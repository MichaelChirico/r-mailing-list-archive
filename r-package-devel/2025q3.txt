From n@r@@ @end|ng |rom @t@n|ord@edu  Tue Jul  1 20:51:00 2025
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Tue, 1 Jul 2025 11:51:00 -0700
Subject: [R-pkg-devel] Proofpoint and CRAN emails
Message-ID: <6462c026-81c8-43be-a66c-b8e110914b35@stanford.edu>

It appears that some recent updates to Proofpoint, which many 
organizations including Stanford use for scanning emails, has flagged 
emails from CRAN as spam. A recent press release from Proofpoint 
mentioning use of some AI agent doesn't exactly inspire confidence!

Our IT folks have opened a ticket with them and here's hoping that any 
fix propagates up the chain.

(We struggled with this for over a week while submitting package updates 
before stumbling on this silent menace.)

Just FYI.

-Naras


From @bew|ck @end|ng |rom c|em@on@edu  Thu Jul  3 23:57:19 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 21:57:19 +0000
Subject: [R-pkg-devel] Two errors
Message-ID: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:13:34 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:13:34 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
> 
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> 
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
> 
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use 
whatever function ape exported.

> 
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction 
between variables and functions.

> 
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
> 
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
> 
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of 
them (if both are exported).

Duncan Murdoch

> 
> Thanks!
> Sharon
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Jul  4 00:13:40 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 3 Jul 2025 15:13:40 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>

1. all functions in R are variables. You can "trick" code tools by writing
seq_root2tip=NULL in the same scope but consider (a) C routines are
typically part of a package's private interface (b) it might be preferable
to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-")
is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C

On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:32:41 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:32:41 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
Message-ID: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?



From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
whatever function ape exported.

>
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction
between variables and functions.

>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of
them (if both are exported).

Duncan Murdoch

>
> Thanks!
> Sharon
>
>       [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:33:35 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:33:35 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
Message-ID: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:46:00 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:46:00 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>

I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:

> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:52:55 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:52:55 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
Message-ID: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Ah, ok great, thanks.

So I added:
toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = 'ape')

But check() is still throwing up a note:

basic_branch: no visible binding for global variable ?seq_root2tip?
  shade_branch: no visible binding for global variable ?seq_root2tip?
  Undefined global functions or variables:
    seq_root2tip

Any thoughts?
Sharon

From: Josiah Parry <josiah.parry at gmail.com>
Date: Thursday, July 3, 2025 at 4:46?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com<mailto:michaelchirico4 at gmail.com>>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>>
Cc: R Package Development <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu><mailto:sbewick at clemson.edu<mailto:sbewick at clemson.edu>>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org><mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:56:58 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:56:58 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <47da4c2b-0411-4667-88cc-b8aba52fe17c@gmail.com>

On 2025-07-03 6:32 p.m., Sharon Bewick wrote:
> The problem is that the function that ape exports is way too slow. Using 
> C directly really sped up my program, which is a bit slow even at that?

You need to be collaborating with the ape maintainer to fix that package 
so it works for your problem.  Most package maintainers are happy to 
accept suggested improvements.

Duncan Murdoch

> 
> *From: *Duncan Murdoch <murdoch.duncan at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:13?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org 
> <r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
> 
> This Message Is From An External Sender: Use caution when opening links 
> or attachments if you do not recognize the sender.
> 
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
> 
> If ape doesn't export seq_root2tip, then you shouldn't use it.? Use
> whatever function ape exported.
> 
>>
>> but seq_root2tip is a function, not a global variable.
> 
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
> 
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
> 
> "phy_tree" and "phy_tree<-" are two different functions.? Import both of
> them (if both are exported).
> 
> Duncan Murdoch
> 
>>
>> Thanks!
>> Sharon
>>
>>?????? [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:57:15 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:57:15 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
 <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufULHO4pjyFdvme9d9kNQTAcEr9enkLwbJz=-6ZVVb70yPg@mail.gmail.com>

I think you can put it in quotes so then it won?t be an issue. Other wise
you can use the global variables function:
https://www.r-bloggers.com/2019/08/no-visible-binding-for-global-variable/amp/

On Thu, Jul 3, 2025 at 15:52 Sharon Bewick <sbewick at clemson.edu> wrote:

> Ah, ok great, thanks.
>
>
>
> So I added:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode,
> PACKAGE = 'ape')
>
>
>
> But check() is still throwing up a note:
>
>
>
> basic_branch: no visible binding for global variable ?seq_root2tip?
>
>   shade_branch: no visible binding for global variable ?seq_root2tip?
>
>   Undefined global functions or variables:
>
>     seq_root2tip
>
>
>
> Any thoughts?
>
> Sharon
>
>
>
> *From: *Josiah Parry <josiah.parry at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:46?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> *This Message Is From An External Sender:* Use caution when opening links
> or attachments if you do not recognize the sender.
>
> I believe they mean as an argument to .Call
>
> https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html
>
>
>
> On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:02:06 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:02:06 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <1928ede0-2bba-365-e570-ecc88bd8676b@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From |kw@|mmo @end|ng |rom gm@||@com  Fri Jul  4 01:11:12 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Thu, 3 Jul 2025 19:11:12 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:12:09 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:12:09 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <b58aab2a-88e8-3bf0-d0c7-d5e944a4b058@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

[Just replying to the list since reply-all seems to be bouncing for me]

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From ro||turner @end|ng |rom po@teo@net  Fri Jul  4 05:21:39 2025
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Fri,  4 Jul 2025 03:21:39 +0000
Subject: [R-pkg-devel] Changing the title of a package.
In-Reply-To: <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
References: <20250606101234.4f57f667@new-hp>
 <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
Message-ID: <20250704152139.3e8d8a87@new-hp>


On Thu, 5 Jun 2025 19:49:48 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> I'm pretty sure CRAN doesn't care what is in the title, as long as
> 
>   - The new one follows their rules (re capitalization etc.)
>   - The change doesn't follow the last package change too rapidly.
> 
> It would be best if you change the title at the same time as you are 
> releasing other changes to the package.  If the title change is the
> only change in a resubmission, that wastes their time.

For the record, I changed the "Title" field in the DESCRIPTION file (and
made some other adjustments) and resubmitted the package.  The package
got uploaded to CRAN with startling rapidity!

Thanks Duncan.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From @bew|ck @end|ng |rom c|em@on@edu  Sat Jul  5 01:03:51 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Fri, 4 Jul 2025 23:03:51 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
Message-ID: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>

So I think the only solution that CRAN will accept is linking against headers. I can download an ape.h header file, but for the life of me, I?m having trouble figuring out how to link it in my R package. I?ve read what I can find online, but haven?t been successful. Right now, I have the ape.h file in an src folder. I also have
LinkingTo: Rcpp, ape
In my DESCRIPTION file

But I?m getting all sorts of errors. Does anyone have an example of how I can do this that I might be able to work from?

Thanks in advance!!!!
Sharon


From: Iris Simmons <ikwsimmo at gmail.com>
Date: Thursday, July 3, 2025 at 5:11?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Sat Jul  5 01:19:29 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 4 Jul 2025 16:19:29 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>

Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
registered entry point for that routine, so you should just be able to do:

importFrom(ape,seq_root2tip)

and be on your way.

[1] ?ape::seq_root2tip notes that "other packages" use it, but none of
those are on CRAN, could be a Bioconductor thing:
https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code

Mike C

On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> So I think the only solution that CRAN will accept is linking against
> headers. I can download an ape.h header file, but for the life of me, I?m
> having trouble figuring out how to link it in my R package. I?ve read what
> I can find online, but haven?t been successful. Right now, I have the ape.h
> file in an src folder. I also have
>
> LinkingTo: Rcpp, ape
>
> In my DESCRIPTION file
>
>
>
> But I?m getting all sorts of errors. Does anyone have an example of how I
> can do this that I might be able to work from?
>
>
>
> Thanks in advance!!!!
>
> Sharon
>
>
>
>
>
> *From: *Iris Simmons <ikwsimmo at gmail.com>
> *Date: *Thursday, July 3, 2025 at 5:11?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
>
> I believe the suggestion was that you should alternatively write:
>
> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
> "ape")
>
> however, that generates the following note that CRAN is very unlikely to
> accept:
>
> * checking foreign function calls ... NOTE
> Foreign function call to a different package:
>   .Call("seq_root2tip", ..., PACKAGE = "ape")
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> The other possibility is adding:
>
> importFrom(ape, seq_root2tip)
>
> to your NAMESPACE and not modifying your code, but that generates a
> different note:
>
> * checking foreign function calls ... NOTE
> Registration problem:
>   symbol 'seq_root2tip' not in namespace:
>    .Call(seq_root2tip, ...)
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> Your best bet is to ask the maintainers of package:ape to add and
> export an R function like this:
>
> idk <- function (...)
> .Call(seq_root2tip, ...)
>
> There are also ways to do it in C using R_RegisterCCallable and
> R_GetCCallable but that might be too complicated for something like
> this.
>
> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
> >
> > Thanks so much for the tips!
> >
> > I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
> the Description file? Somewhere in the code?
> >
> > So sorry for not understanding!
> >
> > Thanks!
> > Sharon
> >
> > From: Michael Chirico <michaelchirico4 at gmail.com>
> > Date: Thursday, July 3, 2025 at 4:13?PM
> > To: Sharon Bewick <sbewick at clemson.edu>
> > Cc: R Package Development <r-package-devel at r-project.org>
> > Subject: Re: [R-pkg-devel] Two errors
> >
> > This Message Is From An External Sender: Use caution when opening links
> or attachments if you do not recognize the sender.
> > 1. all functions in R are variables. You can "trick" code tools by
> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
> >
> > 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
> >
> > (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
> >
> > Mike C
> > On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> > 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
> >
> > toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> >
> > How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
> >
> > shade_branch: no visible binding for global variable ?seq_root2tip?
> >
> > but seq_root2tip is a function, not a global variable.
> >
> > 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
> >
> > I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
> >
> > I don?t know what the problem is?
> >
> > Thanks!
> > Sharon
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

	[[alternative HTML version deleted]]


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:12:56 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:12:56 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
Message-ID: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>

Dear All,

I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
to address one feedback message or even what is causing it. It might
be related to Kevin Ushey's R scripts that I am using to configure the
package during installation [2]. The message that I received is below.

"""
Please ensure that your functions do not write by default or in your
examples/vignettes/tests in the user's home filespace (including the
package directory and getwd()). This is not allowed by CRAN policies.
Please omit any default path in writing functions. In your
examples/vignettes/tests you can write to tempdir().
-> tools/config.Rtools/config/configure.R
"""

`tools/config.Rtools/config/configure.R` is not a file in my package.
So I assume that this report is saying that it is being created during
installation, but I can't reproduce it. My package does read and
execute `tools/config/configure.R` during installation, so right now
my guess is that my configure script is somehow creating
`tools/config.Rtools/config/configure.R` when I try to read
`tools/config/configure.R`. Any help figuring this out would be
appreciated.

[1] https://github.com/reedacartwright/ironseed
[2] https://github.com/kevinushey/configure

Thanks,
Reed

--
Reed A. Cartwright, PhD
Associate Professor of Life Sciences
TEACh Representative - Evolution and Computational Courses
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-6401 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:32:48 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:32:48 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>

I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.

HTH,

-Roy


> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear All,
> 
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
> 
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
> 
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
> 
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
> 
> Thanks,
> Reed
> 
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:38:34 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:38:34 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
Message-ID: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>

Dear Roy,

I think you might have looked at the wrong file. My .Rbuildignore is
here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.

Thanks for looking,

Cheers.

On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
>
> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>
> HTH,
>
> -Roy
>
>
> > On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:50:55 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:50:55 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
 <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
Message-ID: <9D6C66F0-38A9-4333-BE6A-8941DB86F162@noaa.gov>

Thanks.  I am old and slow and often overlook things,  but I don?t see the tools directory in that file that you are pointing to,  which would be consistent with the error message you are getting because that is where the file being name reside.  So you can either add that to the .Rbuildignore. or remove it if not needed.

HTH,

-Roy


> On Jul 5, 2025, at 2:38?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear Roy,
> 
> I think you might have looked at the wrong file. My .Rbuildignore is
> here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.
> 
> Thanks for looking,
> 
> Cheers.
> 
> On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> 
>> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>> 
>> HTH,
>> 
>> -Roy
>> 
>> 
>>> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
>>> 
>>> Dear All,
>>> 
>>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>>> to address one feedback message or even what is causing it. It might
>>> be related to Kevin Ushey's R scripts that I am using to configure the
>>> package during installation [2]. The message that I received is below.
>>> 
>>> """
>>> Please ensure that your functions do not write by default or in your
>>> examples/vignettes/tests in the user's home filespace (including the
>>> package directory and getwd()). This is not allowed by CRAN policies.
>>> Please omit any default path in writing functions. In your
>>> examples/vignettes/tests you can write to tempdir().
>>> -> tools/config.Rtools/config/configure.R
>>> """
>>> 
>>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>>> So I assume that this report is saying that it is being created during
>>> installation, but I can't reproduce it. My package does read and
>>> execute `tools/config/configure.R` during installation, so right now
>>> my guess is that my configure script is somehow creating
>>> `tools/config.Rtools/config/configure.R` when I try to read
>>> `tools/config/configure.R`. Any help figuring this out would be
>>> appreciated.
>>> 
>>> [1] https://github.com/reedacartwright/ironseed
>>> [2] https://github.com/kevinushey/configure
>>> 
>>> Thanks,
>>> Reed
>>> 
>>> --
>>> Reed A. Cartwright, PhD
>>> Associate Professor of Life Sciences
>>> TEACh Representative - Evolution and Computational Courses
>>> School of Life Sciences and The Biodesign Institute
>>> Arizona State University
>>> ==================
>>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>>> 85287-6401 USA
>>> Office: Biodesign B-220C, 1-480-965-9949
>>> Website: http://cartwrig.ht/
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 


From j|r|@c@mor@vec @end|ng |rom gm@||@com  Sun Jul  6 03:07:56 2025
From: j|r|@c@mor@vec @end|ng |rom gm@||@com (=?UTF-8?B?SmnFmcOtIE1vcmF2ZWM=?=)
Date: Sun, 6 Jul 2025 13:07:56 +1200
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
Message-ID: <4630b3d6-1e7a-4099-8f14-fbee6f96e415@gmail.com>

I would like to add that copy pasting is also a valid way to include 
dependencies.

Just make sure to get contributions right.

-- Jirka

On 5/07/25 11:19, Michael Chirico wrote:
> Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
> registered entry point for that routine, so you should just be able to do:
>
> importFrom(ape,seq_root2tip)
>
> and be on your way.
>
> [1] ?ape::seq_root2tip notes that "other packages" use it, but none of
> those are on CRAN, could be a Bioconductor thing:
> https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code
>
> Mike C
>
> On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
>> So I think the only solution that CRAN will accept is linking against
>> headers. I can download an ape.h header file, but for the life of me, I?m
>> having trouble figuring out how to link it in my R package. I?ve read what
>> I can find online, but haven?t been successful. Right now, I have the ape.h
>> file in an src folder. I also have
>>
>> LinkingTo: Rcpp, ape
>>
>> In my DESCRIPTION file
>>
>>
>>
>> But I?m getting all sorts of errors. Does anyone have an example of how I
>> can do this that I might be able to work from?
>>
>>
>>
>> Thanks in advance!!!!
>>
>> Sharon
>>
>>
>>
>>
>>
>> *From: *Iris Simmons <ikwsimmo at gmail.com>
>> *Date: *Thursday, July 3, 2025 at 5:11?PM
>> *To: *Sharon Bewick <sbewick at clemson.edu>
>> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
>> r-package-devel at r-project.org>
>> *Subject: *Re: [R-pkg-devel] Two errors
>>
>> This Message Is From An External Sender: Use caution when opening links or
>> attachments if you do not recognize the sender.
>>
>> I believe the suggestion was that you should alternatively write:
>>
>> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
>> "ape")
>>
>> however, that generates the following note that CRAN is very unlikely to
>> accept:
>>
>> * checking foreign function calls ... NOTE
>> Foreign function call to a different package:
>>    .Call("seq_root2tip", ..., PACKAGE = "ape")
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> The other possibility is adding:
>>
>> importFrom(ape, seq_root2tip)
>>
>> to your NAMESPACE and not modifying your code, but that generates a
>> different note:
>>
>> * checking foreign function calls ... NOTE
>> Registration problem:
>>    symbol 'seq_root2tip' not in namespace:
>>     .Call(seq_root2tip, ...)
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> Your best bet is to ask the maintainers of package:ape to add and
>> export an R function like this:
>>
>> idk <- function (...)
>> .Call(seq_root2tip, ...)
>>
>> There are also ways to do it in C using R_RegisterCCallable and
>> R_GetCCallable but that might be too complicated for something like
>> this.
>>
>> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>>> Thanks so much for the tips!
>>>
>>> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
>> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
>> the Description file? Somewhere in the code?
>>> So sorry for not understanding!
>>>
>>> Thanks!
>>> Sharon
>>>
>>> From: Michael Chirico <michaelchirico4 at gmail.com>
>>> Date: Thursday, July 3, 2025 at 4:13?PM
>>> To: Sharon Bewick <sbewick at clemson.edu>
>>> Cc: R Package Development <r-package-devel at r-project.org>
>>> Subject: Re: [R-pkg-devel] Two errors
>>>
>>> This Message Is From An External Sender: Use caution when opening links
>> or attachments if you do not recognize the sender.
>>> 1. all functions in R are variables. You can "trick" code tools by
>> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
>> typically part of a package's private interface (b) it might be preferable
>> to use the string "seq_root2tip" with PACKAGE="ape"
>>> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
>> "phytree<-") is what you want assuming it's exported)
>>> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>>>
>>> Mike C
>>> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
>> sbewick at clemson.edu>> wrote:
>>> 1. I?m trying to upload my R package. However, I use the ape function
>> seq_root2tip but for the sake of speed am calling it using .Call:
>>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>>
>>> How do I get R to recognize the seq_root2tip function from ape in this C
>> call? It is throwing up a NOTE that is getting my package rejected:
>>> shade_branch: no visible binding for global variable ?seq_root2tip?
>>>
>>> but seq_root2tip is a function, not a global variable.
>>>
>>> 2. I?m also getting a NOTE about: no visible global function definition
>> for ?phy_tree<-?
>>> I have declared phy_tree in the NAMESPACE file:
>> importFrom(phyloseq,phy_tree)
>>> I don?t know what the problem is?
>>>
>>> Thanks!
>>> Sharon
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
>> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>>
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Sat Jul  5 22:49:09 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Sat, 05 Jul 2025 20:49:09 +0000
Subject: [R-pkg-devel] Inconsistent application of the rule about modifying
 the user filespace?
Message-ID: <5a8e849f-4e21-4306-ac65-437ee0c0ed5a@protonmail.com>

Dear all,

tl;dr: several CRAN packages can modify the user filespace without 
explicitly
requiring the user to specify the path, but I was required to change the
default behavior of some functions in my package because they would 
modify the
user's filespace. This seems inconsistent to me (and therefore it's a bit
frustrating), is there a way to clarify it in the policies?

Longer version:

A couple of weeks ago, I submitted a package, flir [0], that provides
several functions that write to the user directory (it is now on CRAN). For
instance, `setup_flir()` creates a folder "flir" in the working 
directory, and
`fix()` parses all R files in the working directory and potentially 
modifies
them following a list of predefined rules. The behavior of those 
functions was
clearly documented.

Those functions had an argument `path = "."` by default. During the 
submission
process, I got a comment indicating that I had to remove this
default value and force users to specify a value for `path` instead (or
interactively handle it if it is missing), which is a bit annoying simply
because it forces extra typing. This comment was referring to the following
paragraph from CRAN policies:

"Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up). Installing
into the system?s R installation (e.g., scripts to its bin directory) is
not allowed.
Limited exceptions may be allowed in interactive sessions if the package
obtains confirmation from the user."

I understand the willingness to minimize automatic changes to the user's
file system, but it seems to me that this rule is not consistently 
applied. There
are plenty of functions from external packages that directly write to 
the user's
file system without specifying a path and without obtaining confirmation 
from
the user, such as `altdoc::setup_docs(), `pkgdown::build_site()`,
`Rcpp::Rcpp.package.skeleton()`, `roxygen2::roxygenize()`, most of `usethis`
functions, etc.

Therefore, it's quite unclear to me why removing the default `path = 
"."` was
required in this case. Does this depend on who reviews the submissions? Is
there a way to clarify it in the policies?

Best,
Etienne

[0]: https://cran.r-project.org/web/packages/flir/


From |kry|ov @end|ng |rom d|@root@org  Sun Jul  6 23:36:01 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 7 Jul 2025 00:36:01 +0300
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <20250707003601.46b3ca9a@Tarkus>

? Sat, 5 Jul 2025 14:12:56 -0700
"Reed A. Cartwright" <racartwright at gmail.com> ?????:

> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it.

Proving a negative is hard.

My guess is that the reviewer may have used a static analysis tool to
look for calls to cat()/writeLines() or functions with a default
argument of ".". The "tools/config.Rtools/config/configure.R" may be a
typo or a forgotten separator somewhere.

If you made any changes to the package for the resubmission, put the
explanation about the R scripts under tools/ being required by the
configure script to operate on the current directory in the submission
comment.

If you want to be extra sure, you can try experimenting with a
container or a virtual machine:

find / /home /tmp -xdev -ls > .../ironseed.before
./configure
find / /home /tmp -xdev -ls > .../ironseed.after
diff -u .../ironseed.before .../ironseed.after

(Adjust the 'find' command so that it can visit all the relevant
filesystems, not /proc or /sys on Linux.)

I didn't notice anything amiss in my own limited testing.

-- 
Best regards,
Ivan


From rhe|p @end|ng |rom eoo@@dd@@n|  Mon Jul  7 17:23:48 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Mon, 7 Jul 2025 17:23:48 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
Message-ID: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>


I have a package, which I am thinking to submit to CRAN. It can output 
graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/). 
However, I am not sure if and how I should indicate the dependency on 
kitty. The package builds and installs fine without kitty. However, you 
can't really use it without it (it will generate errors when you try).

Two possible fields in the DESCRIPTION could be:

SystemRequirements: kitty

And since, kitty only runs on macos and linux:

OS_type: unix

Should I add these? Like above?

Thanks!

Jan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul  7 17:53:37 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jul 2025 11:53:37 -0400
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
Message-ID: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>

On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
> 
> I have a package, which I am thinking to submit to CRAN. It can output
> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
> However, I am not sure if and how I should indicate the dependency on
> kitty. The package builds and installs fine without kitty. However, you
> can't really use it without it (it will generate errors when you try).
> 
> Two possible fields in the DESCRIPTION could be:
> 
> SystemRequirements: kitty
> 
> And since, kitty only runs on macos and linux:
> 
> OS_type: unix
> 
> Should I add these? Like above?

I think the SystemRequirements field is enough.  *Your package* doesn't 
depend on unix, it just depends on kitty.

Duncan Murdoch


From kev|nu@hey @end|ng |rom gm@||@com  Mon Jul  7 20:42:38 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Mon, 7 Jul 2025 11:42:38 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>

Hi Reed,

Have you received any feedback yet? My only guess is that this was a
false positive from some static analysis tools on the CRAN
maintainer's side;
https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
says that:

> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).

Perhaps the presence of these files within a CRAN package submission
is causing something to trip up. If not, let me know if there's
anything I can change on the 'configure' side to help resolve this.

Did you also get a warning about the 'cleanup.R' file? That is, my
guess is that the presence of these two files
(https://github.com/reedacartwright/ironseed/tree/main/tools/config)
is somehow causing the issue.

Thanks,
Kevin

On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
<racartwright at gmail.com> wrote:
>
> Dear All,
>
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
>
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
>
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
>
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
>
> Thanks,
> Reed
>
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jul  7 21:00:57 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 7 Jul 2025 21:00:57 +0200
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>

Please ignore that comment:
I think "tools/config/configure.R" was meant, but that seems fine, too.

Best,
Uwe Ligges

On 07.07.2025 20:42, Kevin Ushey wrote:
> Hi Reed,
> 
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
> 
>> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> 
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
> 
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
> 
> Thanks,
> Kevin
> 
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
>>
>> Dear All,
>>
>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>> to address one feedback message or even what is causing it. It might
>> be related to Kevin Ushey's R scripts that I am using to configure the
>> package during installation [2]. The message that I received is below.
>>
>> """
>> Please ensure that your functions do not write by default or in your
>> examples/vignettes/tests in the user's home filespace (including the
>> package directory and getwd()). This is not allowed by CRAN policies.
>> Please omit any default path in writing functions. In your
>> examples/vignettes/tests you can write to tempdir().
>> -> tools/config.Rtools/config/configure.R
>> """
>>
>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>> So I assume that this report is saying that it is being created during
>> installation, but I can't reproduce it. My package does read and
>> execute `tools/config/configure.R` during installation, so right now
>> my guess is that my configure script is somehow creating
>> `tools/config.Rtools/config/configure.R` when I try to read
>> `tools/config/configure.R`. Any help figuring this out would be
>> appreciated.
>>
>> [1] https://github.com/reedacartwright/ironseed
>> [2] https://github.com/kevinushey/configure
>>
>> Thanks,
>> Reed
>>
>> --
>> Reed A. Cartwright, PhD
>> Associate Professor of Life Sciences
>> TEACh Representative - Evolution and Computational Courses
>> School of Life Sciences and The Biodesign Institute
>> Arizona State University
>> ==================
>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>> 85287-6401 USA
>> Office: Biodesign B-220C, 1-480-965-9949
>> Website: http://cartwrig.ht/
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:22:40 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:22:40 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <CALOkxuz+pP-FCq+2PmM0a1XQfcgiv3qrSyOz03-1ZzRaH3-y8g@mail.gmail.com>

Hi Kevin,

First, thanks for the configure.R package. I needed to check for the
presence of two functions during compilation and it helped simplify
the process for me.

I resubmitted to CRAN yesterday under the assumption that this report
was being generated from a static analysis. I made the following
changes to `tools/config.R`.

* Removed all the `@export` lines.
* Removed the default `path = "."` in `configure_directory()`.
* Removed the `use_configure()` function.

You can see the fill diff at
<https://github.com/reedacartwright/ironseed/compare/8522d28...45a0f23#diff-6c174165097fa11900454663ab7b0a589bb0fc8f7e41b25d8b11833674ad4d91>

If this passes, I'll let you know.

Cheers,
Reed


On Mon, Jul 7, 2025 at 11:43?AM Kevin Ushey <kevinushey at gmail.com> wrote:
>
> Hi Reed,
>
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
>
> > Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
>
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
>
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
>
> Thanks,
> Kevin
>
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:26:13 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:26:13 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
 <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
Message-ID: <CALOkxuxARq1_po7rc4Z3nUm_ccB5yWavmdVfuGE5Z5uFOd4RdQ@mail.gmail.com>

Dear Uwe,

Thank you for letting me know that I can ignore that comment.

Cheers,
Reed

On Mon, Jul 7, 2025 at 12:02?PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> Please ignore that comment:
> I think "tools/config/configure.R" was meant, but that seems fine, too.
>
> Best,
> Uwe Ligges
>
> On 07.07.2025 20:42, Kevin Ushey wrote:
> > Hi Reed,
> >
> > Have you received any feedback yet? My only guess is that this was a
> > false positive from some static analysis tools on the CRAN
> > maintainer's side;
> > https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> > says that:
> >
> >> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> >
> > Perhaps the presence of these files within a CRAN package submission
> > is causing something to trip up. If not, let me know if there's
> > anything I can change on the 'configure' side to help resolve this.
> >
> > Did you also get a warning about the 'cleanup.R' file? That is, my
> > guess is that the presence of these two files
> > (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> > is somehow causing the issue.
> >
> > Thanks,
> > Kevin
> >
> > On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> > <racartwright at gmail.com> wrote:
> >>
> >> Dear All,
> >>
> >> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> >> to address one feedback message or even what is causing it. It might
> >> be related to Kevin Ushey's R scripts that I am using to configure the
> >> package during installation [2]. The message that I received is below.
> >>
> >> """
> >> Please ensure that your functions do not write by default or in your
> >> examples/vignettes/tests in the user's home filespace (including the
> >> package directory and getwd()). This is not allowed by CRAN policies.
> >> Please omit any default path in writing functions. In your
> >> examples/vignettes/tests you can write to tempdir().
> >> -> tools/config.Rtools/config/configure.R
> >> """
> >>
> >> `tools/config.Rtools/config/configure.R` is not a file in my package.
> >> So I assume that this report is saying that it is being created during
> >> installation, but I can't reproduce it. My package does read and
> >> execute `tools/config/configure.R` during installation, so right now
> >> my guess is that my configure script is somehow creating
> >> `tools/config.Rtools/config/configure.R` when I try to read
> >> `tools/config/configure.R`. Any help figuring this out would be
> >> appreciated.
> >>
> >> [1] https://github.com/reedacartwright/ironseed
> >> [2] https://github.com/kevinushey/configure
> >>
> >> Thanks,
> >> Reed
> >>
> >> --
> >> Reed A. Cartwright, PhD
> >> Associate Professor of Life Sciences
> >> TEACh Representative - Evolution and Computational Courses
> >> School of Life Sciences and The Biodesign Institute
> >> Arizona State University
> >> ==================
> >> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> >> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> >> 85287-6401 USA
> >> Office: Biodesign B-220C, 1-480-965-9949
> >> Website: http://cartwrig.ht/
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Jul  8 08:22:28 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 8 Jul 2025 08:22:28 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
 <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
Message-ID: <f916d12d-32da-4d54-9525-b8e44c9dceb0@eoos.dds.nl>

OK. Thanks!

I wasn't sure if the 'SystemRequirements' field was intended just for 
dependencies needed for building and installing the package like 
libraries or a 'non-default C++ standard'. Or that it should also be 
used for dependencies needed at run-time.

Jan


On 07-07-2025 17:53, Duncan Murdoch wrote:
> On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
>>
>> I have a package, which I am thinking to submit to CRAN. It can output
>> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
>> However, I am not sure if and how I should indicate the dependency on
>> kitty. The package builds and installs fine without kitty. However, you
>> can't really use it without it (it will generate errors when you try).
>>
>> Two possible fields in the DESCRIPTION could be:
>>
>> SystemRequirements: kitty
>>
>> And since, kitty only runs on macos and linux:
>>
>> OS_type: unix
>>
>> Should I add these? Like above?
> 
> I think the SystemRequirements field is enough.? *Your package* doesn't 
> depend on unix, it just depends on kitty.
> 
> Duncan Murdoch
>


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 12:13:55 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 12:13:55 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
Message-ID: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>

Hi,

I am the maintainer of a package for which we have done a major 
refactoring (work in progress, can be found here 
<https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).

Upon my last resubmission to CRAN, some issues regarding some man pages 
(that I obviously missed) were found, e.g. function doc without a 
\value{} tag, or examples for (purposely) unexported functions.

These issues were not raised during package check (with or without 
`--as-cran` flag).

The code base is quite large, and I would be very interested in any tool 
that could help me check the man pages more thoroughly than a package 
check ?

I know about `devtools::check_man()` but it does not find the issues 
that I am mentioning.

Thanks in advance,
Best regards,

-- 
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/a5e86ea5/attachment.sig>

From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Jul 10 14:30:35 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 10 Jul 2025 14:30:35 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <7631e6ec-cb15-4793-9078-19eac7e4d60e@eoos.dds.nl>

They also weren't found when checking on winbuilder 
(https://win-builder.r-project.org/)? Especially when checking with 
r-devel?

Jan



On 10-07-2025 12:13, Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here <https://github.com/ 
> getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages 
> (that I obviously missed) were found, e.g. function doc without a 
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without `-- 
> as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool 
> that could help me check the man pages more thoroughly than a package 
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Thu Jul 10 14:33:21 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Thu, 10 Jul 2025 12:33:21 +0000
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <sZ-D_zqlm-dSYwGzVRBCLsqGhTgd_fzbCdDqtv-hmKw40u0EV6ofT5UO6ExFr-6RRcHreWkSrpR7vViEemanQsnPnV8akl_Xsv2irKtFWFk=@protonmail.com>

Hi Ghislain,

You may be interested in checkhelper::find_missing_tags().
More generally, there's a nice list of tools to prepare for CRAN submission here: https://github.com/ThinkR-open/prepare-for-cran

Best,
Etienne




Le jeudi 10 juillet 2025 ? 12:14 PM, Ghislain Durif <ghislain.durif at ens-lyon.fr> a ?crit?:

> 
> 
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).
> 
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> --
> Ghislain Durif
> -------------------------------------------
> Research engineer -- CNRS
> BioComputing Hub, LBMC, ENS Lyon (France)
> Webpage: https://gdurif.perso.math.cnrs.fr
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 10 14:47:20 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jul 2025 08:47:20 -0400
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <70af2bf4-b7f5-4143-9402-5bb3654f2e4d@gmail.com>

Among other tests, CRAN uses the development version of R (R-devel) for 
checks.  It usually contains more stringent tests than the release 
version of R, so possibly you were using a release version for tests and 
that test wasn't in it.

The Github action r-lib/actions/check-r-package at v2 will run on R-devel 
if you specify "r: 'devel'".   For example in my rgl package checks 
(visible at 
https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml), 
I check on the release and the devel versions by having

       matrix:
         config:
           - {os: windows-latest, r: 'release'}
           - {os: windows-latest, r: 'devel'}
           - {os: ubuntu-latest,   r: 'devel', http-user-agent: 'release'}
           - {os: macos-latest, r: 'devel'}

Duncan Murdoch


On 2025-07-10 6:13 a.m., Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 15:19:04 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 15:19:04 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>

Hi again,

Thanks for the responses!

@Jan van der Laan our package is unix-only so I did no try to check it 
with winbuilder.

@Etienne Bacher `checkhelper::find_missing_tags()` does actually find 
some issue, even running with the release version of R.

@Duncan Murdoch I was indeed running the check with the release version 
of R, I'll check with the development version.

Thanks again,

Best regards,

Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr

On 10/07/2025 12:13, Ghislain Durif wrote:
> Hi,
>
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here 
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
>
> Upon my last resubmission to CRAN, some issues regarding some man 
> pages (that I obviously missed) were found, e.g. function doc without 
> a \value{} tag, or examples for (purposely) unexported functions.
>
> These issues were not raised during package check (with or without 
> `--as-cran` flag).
>
> The code base is quite large, and I would be very interested in any 
> tool that could help me check the man pages more thoroughly than a 
> package check ?
>
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
>
> Thanks in advance,
> Best regards,
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/782b190a/attachment.sig>

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 16:10:11 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 16:10:11 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
Message-ID: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>

A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/466dbd9c/attachment.sig>

From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:31:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:31:31 -0500
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
 <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
Message-ID: <26735.52931.558098.560588@rob.eddelbuettel.com>


On 10 July 2025 at 15:19, Ghislain Durif wrote:
| @Duncan Murdoch I was indeed running the check with the release version 
| of R, I'll check with the development version.

There are also regularly updated Docker containers if you want to run checks
locally rather than as an action. See for example rocker/drd (smaller) or
rocker/r-devel (larger).

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:37:57 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:37:57 -0500
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <26735.53317.242011.319748@rob.eddelbuettel.com>


Ghislain,

That email was unreadable for me in two different email clients.

A common pattern for resource minimalisation is to add a snippet setting the
resources in a way CRAN prefers at the beginning of each examples block,
often wrapped in a \dontshow{} block, and possibly resetting at end. That has
been discussed on this list before so some creative searching may lead you
there. 

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @eb@meyer @end|ng |rom |@u@de  Thu Jul 10 19:22:24 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 10 Jul 2025 19:22:24 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <3a412e85-ba80-466e-a792-5e07f760d326@fau.de>

Am 10.07.25 um 12:13 schrieb Ghislain Durif:
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).

tools::checkRdContents() et al. (see ?tools::QC), used by R CMD check, 
don't currently check help pages for these things. I suppose there would 
be too many false alarms so this is manually reviewed by the 
CRAN-submissions team.

> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?

Here is quick-and-dirty code that uses 'tools'-internal helper functions 
to find names of Rd files that might deserve a \value section -- given 
an installed PACKAGE (as a character string):

     ##PACKAGE <- "rkeops"
     functions <- lsf.str(envir = getNamespace(PACKAGE))
     tools::Rd_db(PACKAGE) |>
         Filter(f = function (rd) {
             sections <- tools:::RdTags(rd)
             aliases <- tools:::.Rd_get_metadata(rd, "alias")
             !"\\value" %in% sections && (
                 "\\arguments" %in% sections ||
                 any(aliases %in% functions)
             )
         }) |>
         names()

-- 
Sebastian Meyer


From r|ch@rd@g@ever|tt @end|ng |rom gm@||@com  Thu Jul 10 13:27:55 2025
From: r|ch@rd@g@ever|tt @end|ng |rom gm@||@com (Richard Everitt)
Date: Thu, 10 Jul 2025 12:27:55 +0100
Subject: [R-pkg-devel] ggsmc: failed check
Message-ID: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>

Hi,

	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).

	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

	Does anyone have any recommendations on how I should proceed? I am not sure how to make sure I have fixed the error since I am not able to reproduce it. Could it have been a temporary issue with gganimate, and in this case should I just resubmit the package?

	Many thanks in advance,

	Richard

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Fri Jul 11 10:18:26 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Durif Ghislain)
Date: Fri, 11 Jul 2025 10:18:26 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <e314812e0c7f261d1d3004a7df7016be@ens-lyon.fr>

Hi again,

Thanks @Dirk for pointing the issue with the encoding of my original 
message (it cannot be read from the list archive either). I do not 
understand what could have been the problem since there was no issue 
with other mails sent to the list earlier on the same day in the same 
condition.  I am resending it below from my webmail instead of my 
mailer, hoping it will work better this time, and so that everyone can 
see my original message.

Regarding my issue, I did not know about the \dontshow tag, so I will 
use it. Thanks.

Best

----

Hi,

We have a package that runs parallel computations (work in progress, can 
be found here 
https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).

The package deeply relies on a Python package through `reticulate` that 
itself interfaces OpenMP-based C++ code, which can thus run parallel 
computations.

Users of our package can control CPU resource usage thanks to a wrapper 
function around `RhpcBLASctl::omp_set_num_threads(n_core)` available in 
our package.

By default, OpenMP uses all available cores which is a bad practice for 
CRAN checks. It is recommended to only use 2 CPU cores for computation 
per CRAN policies (which is totally understandable).

For unit test run with `testthat`, we can use a `tests/testthat/setup.R` 
file to run any arbitrary code before running the tests, so I can setup 
a limit on CPU usage here.

For my Rmarkdown vignette build, I have a code chunk not included in the 
output document that setup a limit using our wrapper function.

However, regarding example run, is there a way to automatically setup 
some resource limit before running package examples, or to automatically 
run some code (i.e. add code at top of generated `<pkg>-Ex.R` file) 
before running all the examples?

If not, I will have to repeat the function call that setup limit before 
every examples in my package (around 70 exported functions in my 
package), which does not seems to be really optimal.

In the same spirit, generally my example run breaks because `reticulate` 
is not explicitly initialized (I am not facing this issue in interactive 
or standard script mode and I do not understand why), so I would need to 
run something like `reticulate::py_available(initialize = TRUE)` or 
`reticulate::py_config()` before running my examples (so to prepend this 
at the top of the generated example file).

Also, our package generate cache files in `tools::R_user_dir()` 
directory because it does JIT compilation (and the generated library 
files are cached for reuse). We have a function to clean them, so I 
would need to call this function after example runs so that these files 
are removed (again for CRAN check).

Note: at the moment I have \dontrun tags around almost all my examples 
to avoid all these issues, but it was highlighted in a recent CRAN 
submission that it should be reduced to a minimum if possible.

Thanks in advance,
Best regards,


---
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


From @eb@meyer @end|ng |rom |@u@de  Fri Jul 11 10:53:12 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 11 Jul 2025 10:53:12 +0200
Subject: [R-pkg-devel] ggsmc: failed check
In-Reply-To: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
References: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
Message-ID: <c535556b-a858-44ab-bc25-f49f234083ef@fau.de>

Am 10.07.25 um 13:27 schrieb Richard Everitt:
> 	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).
> 
> 	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

Yes, see <https://github.com/thomasp85/gganimate/issues/517>.

When gganimate:::draw_frames() tries to plot$scene$plot_frame(), an 
error happens

     Error in labs(!!!lapply(plot$plot$labels, function(label) { :
       could not find function "labs"

but that is caught and turned into a "Failed to plot frame" warning 
(that would be shown in the rendered vignette), so gganimate only fails 
later when it calls its gifski_renderer() with non-existent png files 
and that is the error we get to see in the build log.

-- 
Sebastian Meyer


From ke||ey @end|ng |rom d@|@c@  Fri Jul 11 20:50:44 2025
From: ke||ey @end|ng |rom d@|@c@ (Daniel Kelley)
Date: Fri, 11 Jul 2025 18:50:44 +0000
Subject: [R-pkg-devel] Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
Message-ID: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>

# BACKGROUND

I maintain the 'oce' package, and to avoid problems when I submit a new version, I do some remote tests using

* devtools::check_mac_release()
* devtools::check_win_release()
* devtools::check_win_devel()
* devtools::check_win_oldrelease() # problem

I found that the mac upload fails, but it doesn't state why, and I'll ignore that for now, assuming it to be a temporary problem.  My concern is with the last test, i.e. on system

R version 4.4.3 (2025-02-28 ucrt)

It produces one NOTE.  Looking into this, I see the following in the 00check.log file:

* checking DESCRIPTION meta-information ... NOTE
Author field differs from that derived from Authors at R
  Author:    'Dan Kelley [aut, cre] (ORCID: <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'
  Authors at R: 'Dan Kelley [aut, cre] (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'

This relates to the following lines in my DESCRIPTION file.

# QUESTION

Should I be doing something about this note?  Note that I have the following in my DESCRIPTION file.

Authors at R: c(
    person(given="Dan", family="Kelley", email="Dan.Kelley at Dal.Ca", role=c("aut", "cre"), comment=c(ORCID="0000-0001-7808-5911")),
    person(given="Clark", family="Richards", email="clark.richards at gmail.com", role=c("aut"), comment=c(ORCID="0000-0002-7833-206X")),
    person(given="Chantelle", family="Layton", email="chantelle.layton at dal.ca", role=c("ctb"), comment=c(ORCID="0000-0002-3199-5763", "curl() coauthor")),
    person(given="British Geological Survey", role=c("ctb","cph"), comment="magnetic-field subroutine"))


From |kry|ov @end|ng |rom d|@root@org  Fri Jul 11 21:11:25 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 11 Jul 2025 22:11:25 +0300
Subject: [R-pkg-devel] 
 Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
In-Reply-To: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
References: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
Message-ID: <20250711221125.58386f1b@Tarkus>

On Fri, 11 Jul 2025 18:50:44 +0000
Daniel Kelley <kelley at dal.ca> wrote:

> My concern is with the last test, i.e. on system
> 
> R version 4.4.3 (2025-02-28 ucrt)
> 
> It produces one NOTE.  Looking into this, I see the following in the
> 00check.log file:
> 
> * checking DESCRIPTION meta-information ... NOTE
> Author field differs from that derived from Authors at R
>   Author:    'Dan Kelley [aut, cre] (ORCID:
> <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton
> [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl()
> coauthor), British Geological Survey [ctb, cph] (magnetic-field
> subroutine)'
>   Authors at R: 'Dan Kelley [aut, cre]
> (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb]
> (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British
> Geological Survey [ctb, cph] (magnetic-field subroutine)'

This is a false positive. The Author: field in your source package has
the correct text (it says ORCID: <...>), but R-4.4.3 doesn't realise
that because it predates the change to how the Author: field is
formatted.

R-4.4.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (<https://orcid.org/0000-0001-7808-5911>)"

R-4.5.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (ORCID: <https://orcid.org/0000-0001-7808-5911>)"

-- 
Best regards,
Ivan


