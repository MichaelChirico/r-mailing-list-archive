From n@r@@ @end|ng |rom @t@n|ord@edu  Tue Jul  1 20:51:00 2025
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Tue, 1 Jul 2025 11:51:00 -0700
Subject: [R-pkg-devel] Proofpoint and CRAN emails
Message-ID: <6462c026-81c8-43be-a66c-b8e110914b35@stanford.edu>

It appears that some recent updates to Proofpoint, which many 
organizations including Stanford use for scanning emails, has flagged 
emails from CRAN as spam. A recent press release from Proofpoint 
mentioning use of some AI agent doesn't exactly inspire confidence!

Our IT folks have opened a ticket with them and here's hoping that any 
fix propagates up the chain.

(We struggled with this for over a week while submitting package updates 
before stumbling on this silent menace.)

Just FYI.

-Naras


From @bew|ck @end|ng |rom c|em@on@edu  Thu Jul  3 23:57:19 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 21:57:19 +0000
Subject: [R-pkg-devel] Two errors
Message-ID: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:13:34 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:13:34 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
> 
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> 
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
> 
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use 
whatever function ape exported.

> 
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction 
between variables and functions.

> 
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
> 
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
> 
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of 
them (if both are exported).

Duncan Murdoch

> 
> Thanks!
> Sharon
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Jul  4 00:13:40 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 3 Jul 2025 15:13:40 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>

1. all functions in R are variables. You can "trick" code tools by writing
seq_root2tip=NULL in the same scope but consider (a) C routines are
typically part of a package's private interface (b) it might be preferable
to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-")
is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C

On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:32:41 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:32:41 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
Message-ID: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?



From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
whatever function ape exported.

>
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction
between variables and functions.

>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of
them (if both are exported).

Duncan Murdoch

>
> Thanks!
> Sharon
>
>       [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:33:35 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:33:35 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
Message-ID: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:46:00 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:46:00 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>

I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:

> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:52:55 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:52:55 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
Message-ID: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Ah, ok great, thanks.

So I added:
toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = 'ape')

But check() is still throwing up a note:

basic_branch: no visible binding for global variable ?seq_root2tip?
  shade_branch: no visible binding for global variable ?seq_root2tip?
  Undefined global functions or variables:
    seq_root2tip

Any thoughts?
Sharon

From: Josiah Parry <josiah.parry at gmail.com>
Date: Thursday, July 3, 2025 at 4:46?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com<mailto:michaelchirico4 at gmail.com>>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>>
Cc: R Package Development <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu><mailto:sbewick at clemson.edu<mailto:sbewick at clemson.edu>>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org><mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:56:58 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:56:58 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <47da4c2b-0411-4667-88cc-b8aba52fe17c@gmail.com>

On 2025-07-03 6:32 p.m., Sharon Bewick wrote:
> The problem is that the function that ape exports is way too slow. Using 
> C directly really sped up my program, which is a bit slow even at that?

You need to be collaborating with the ape maintainer to fix that package 
so it works for your problem.  Most package maintainers are happy to 
accept suggested improvements.

Duncan Murdoch

> 
> *From: *Duncan Murdoch <murdoch.duncan at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:13?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org 
> <r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
> 
> This Message Is From An External Sender: Use caution when opening links 
> or attachments if you do not recognize the sender.
> 
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
> 
> If ape doesn't export seq_root2tip, then you shouldn't use it.? Use
> whatever function ape exported.
> 
>>
>> but seq_root2tip is a function, not a global variable.
> 
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
> 
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
> 
> "phy_tree" and "phy_tree<-" are two different functions.? Import both of
> them (if both are exported).
> 
> Duncan Murdoch
> 
>>
>> Thanks!
>> Sharon
>>
>>?????? [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:57:15 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:57:15 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
 <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufULHO4pjyFdvme9d9kNQTAcEr9enkLwbJz=-6ZVVb70yPg@mail.gmail.com>

I think you can put it in quotes so then it won?t be an issue. Other wise
you can use the global variables function:
https://www.r-bloggers.com/2019/08/no-visible-binding-for-global-variable/amp/

On Thu, Jul 3, 2025 at 15:52 Sharon Bewick <sbewick at clemson.edu> wrote:

> Ah, ok great, thanks.
>
>
>
> So I added:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode,
> PACKAGE = 'ape')
>
>
>
> But check() is still throwing up a note:
>
>
>
> basic_branch: no visible binding for global variable ?seq_root2tip?
>
>   shade_branch: no visible binding for global variable ?seq_root2tip?
>
>   Undefined global functions or variables:
>
>     seq_root2tip
>
>
>
> Any thoughts?
>
> Sharon
>
>
>
> *From: *Josiah Parry <josiah.parry at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:46?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> *This Message Is From An External Sender:* Use caution when opening links
> or attachments if you do not recognize the sender.
>
> I believe they mean as an argument to .Call
>
> https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html
>
>
>
> On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:02:06 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:02:06 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <1928ede0-2bba-365-e570-ecc88bd8676b@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From |kw@|mmo @end|ng |rom gm@||@com  Fri Jul  4 01:11:12 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Thu, 3 Jul 2025 19:11:12 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:12:09 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:12:09 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <b58aab2a-88e8-3bf0-d0c7-d5e944a4b058@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

[Just replying to the list since reply-all seems to be bouncing for me]

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From ro||turner @end|ng |rom po@teo@net  Fri Jul  4 05:21:39 2025
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Fri,  4 Jul 2025 03:21:39 +0000
Subject: [R-pkg-devel] Changing the title of a package.
In-Reply-To: <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
References: <20250606101234.4f57f667@new-hp>
 <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
Message-ID: <20250704152139.3e8d8a87@new-hp>


On Thu, 5 Jun 2025 19:49:48 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> I'm pretty sure CRAN doesn't care what is in the title, as long as
> 
>   - The new one follows their rules (re capitalization etc.)
>   - The change doesn't follow the last package change too rapidly.
> 
> It would be best if you change the title at the same time as you are 
> releasing other changes to the package.  If the title change is the
> only change in a resubmission, that wastes their time.

For the record, I changed the "Title" field in the DESCRIPTION file (and
made some other adjustments) and resubmitted the package.  The package
got uploaded to CRAN with startling rapidity!

Thanks Duncan.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From @bew|ck @end|ng |rom c|em@on@edu  Sat Jul  5 01:03:51 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Fri, 4 Jul 2025 23:03:51 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
Message-ID: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>

So I think the only solution that CRAN will accept is linking against headers. I can download an ape.h header file, but for the life of me, I?m having trouble figuring out how to link it in my R package. I?ve read what I can find online, but haven?t been successful. Right now, I have the ape.h file in an src folder. I also have
LinkingTo: Rcpp, ape
In my DESCRIPTION file

But I?m getting all sorts of errors. Does anyone have an example of how I can do this that I might be able to work from?

Thanks in advance!!!!
Sharon


From: Iris Simmons <ikwsimmo at gmail.com>
Date: Thursday, July 3, 2025 at 5:11?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Sat Jul  5 01:19:29 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 4 Jul 2025 16:19:29 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>

Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
registered entry point for that routine, so you should just be able to do:

importFrom(ape,seq_root2tip)

and be on your way.

[1] ?ape::seq_root2tip notes that "other packages" use it, but none of
those are on CRAN, could be a Bioconductor thing:
https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code

Mike C

On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> So I think the only solution that CRAN will accept is linking against
> headers. I can download an ape.h header file, but for the life of me, I?m
> having trouble figuring out how to link it in my R package. I?ve read what
> I can find online, but haven?t been successful. Right now, I have the ape.h
> file in an src folder. I also have
>
> LinkingTo: Rcpp, ape
>
> In my DESCRIPTION file
>
>
>
> But I?m getting all sorts of errors. Does anyone have an example of how I
> can do this that I might be able to work from?
>
>
>
> Thanks in advance!!!!
>
> Sharon
>
>
>
>
>
> *From: *Iris Simmons <ikwsimmo at gmail.com>
> *Date: *Thursday, July 3, 2025 at 5:11?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
>
> I believe the suggestion was that you should alternatively write:
>
> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
> "ape")
>
> however, that generates the following note that CRAN is very unlikely to
> accept:
>
> * checking foreign function calls ... NOTE
> Foreign function call to a different package:
>   .Call("seq_root2tip", ..., PACKAGE = "ape")
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> The other possibility is adding:
>
> importFrom(ape, seq_root2tip)
>
> to your NAMESPACE and not modifying your code, but that generates a
> different note:
>
> * checking foreign function calls ... NOTE
> Registration problem:
>   symbol 'seq_root2tip' not in namespace:
>    .Call(seq_root2tip, ...)
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> Your best bet is to ask the maintainers of package:ape to add and
> export an R function like this:
>
> idk <- function (...)
> .Call(seq_root2tip, ...)
>
> There are also ways to do it in C using R_RegisterCCallable and
> R_GetCCallable but that might be too complicated for something like
> this.
>
> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
> >
> > Thanks so much for the tips!
> >
> > I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
> the Description file? Somewhere in the code?
> >
> > So sorry for not understanding!
> >
> > Thanks!
> > Sharon
> >
> > From: Michael Chirico <michaelchirico4 at gmail.com>
> > Date: Thursday, July 3, 2025 at 4:13?PM
> > To: Sharon Bewick <sbewick at clemson.edu>
> > Cc: R Package Development <r-package-devel at r-project.org>
> > Subject: Re: [R-pkg-devel] Two errors
> >
> > This Message Is From An External Sender: Use caution when opening links
> or attachments if you do not recognize the sender.
> > 1. all functions in R are variables. You can "trick" code tools by
> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
> >
> > 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
> >
> > (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
> >
> > Mike C
> > On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> > 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
> >
> > toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> >
> > How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
> >
> > shade_branch: no visible binding for global variable ?seq_root2tip?
> >
> > but seq_root2tip is a function, not a global variable.
> >
> > 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
> >
> > I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
> >
> > I don?t know what the problem is?
> >
> > Thanks!
> > Sharon
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

	[[alternative HTML version deleted]]


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:12:56 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:12:56 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
Message-ID: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>

Dear All,

I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
to address one feedback message or even what is causing it. It might
be related to Kevin Ushey's R scripts that I am using to configure the
package during installation [2]. The message that I received is below.

"""
Please ensure that your functions do not write by default or in your
examples/vignettes/tests in the user's home filespace (including the
package directory and getwd()). This is not allowed by CRAN policies.
Please omit any default path in writing functions. In your
examples/vignettes/tests you can write to tempdir().
-> tools/config.Rtools/config/configure.R
"""

`tools/config.Rtools/config/configure.R` is not a file in my package.
So I assume that this report is saying that it is being created during
installation, but I can't reproduce it. My package does read and
execute `tools/config/configure.R` during installation, so right now
my guess is that my configure script is somehow creating
`tools/config.Rtools/config/configure.R` when I try to read
`tools/config/configure.R`. Any help figuring this out would be
appreciated.

[1] https://github.com/reedacartwright/ironseed
[2] https://github.com/kevinushey/configure

Thanks,
Reed

--
Reed A. Cartwright, PhD
Associate Professor of Life Sciences
TEACh Representative - Evolution and Computational Courses
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-6401 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:32:48 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:32:48 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>

I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.

HTH,

-Roy


> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear All,
> 
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
> 
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
> 
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
> 
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
> 
> Thanks,
> Reed
> 
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:38:34 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:38:34 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
Message-ID: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>

Dear Roy,

I think you might have looked at the wrong file. My .Rbuildignore is
here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.

Thanks for looking,

Cheers.

On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
>
> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>
> HTH,
>
> -Roy
>
>
> > On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:50:55 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:50:55 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
 <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
Message-ID: <9D6C66F0-38A9-4333-BE6A-8941DB86F162@noaa.gov>

Thanks.  I am old and slow and often overlook things,  but I don?t see the tools directory in that file that you are pointing to,  which would be consistent with the error message you are getting because that is where the file being name reside.  So you can either add that to the .Rbuildignore. or remove it if not needed.

HTH,

-Roy


> On Jul 5, 2025, at 2:38?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear Roy,
> 
> I think you might have looked at the wrong file. My .Rbuildignore is
> here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.
> 
> Thanks for looking,
> 
> Cheers.
> 
> On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> 
>> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>> 
>> HTH,
>> 
>> -Roy
>> 
>> 
>>> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
>>> 
>>> Dear All,
>>> 
>>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>>> to address one feedback message or even what is causing it. It might
>>> be related to Kevin Ushey's R scripts that I am using to configure the
>>> package during installation [2]. The message that I received is below.
>>> 
>>> """
>>> Please ensure that your functions do not write by default or in your
>>> examples/vignettes/tests in the user's home filespace (including the
>>> package directory and getwd()). This is not allowed by CRAN policies.
>>> Please omit any default path in writing functions. In your
>>> examples/vignettes/tests you can write to tempdir().
>>> -> tools/config.Rtools/config/configure.R
>>> """
>>> 
>>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>>> So I assume that this report is saying that it is being created during
>>> installation, but I can't reproduce it. My package does read and
>>> execute `tools/config/configure.R` during installation, so right now
>>> my guess is that my configure script is somehow creating
>>> `tools/config.Rtools/config/configure.R` when I try to read
>>> `tools/config/configure.R`. Any help figuring this out would be
>>> appreciated.
>>> 
>>> [1] https://github.com/reedacartwright/ironseed
>>> [2] https://github.com/kevinushey/configure
>>> 
>>> Thanks,
>>> Reed
>>> 
>>> --
>>> Reed A. Cartwright, PhD
>>> Associate Professor of Life Sciences
>>> TEACh Representative - Evolution and Computational Courses
>>> School of Life Sciences and The Biodesign Institute
>>> Arizona State University
>>> ==================
>>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>>> 85287-6401 USA
>>> Office: Biodesign B-220C, 1-480-965-9949
>>> Website: http://cartwrig.ht/
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 


From j|r|@c@mor@vec @end|ng |rom gm@||@com  Sun Jul  6 03:07:56 2025
From: j|r|@c@mor@vec @end|ng |rom gm@||@com (=?UTF-8?B?SmnFmcOtIE1vcmF2ZWM=?=)
Date: Sun, 6 Jul 2025 13:07:56 +1200
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
Message-ID: <4630b3d6-1e7a-4099-8f14-fbee6f96e415@gmail.com>

I would like to add that copy pasting is also a valid way to include 
dependencies.

Just make sure to get contributions right.

-- Jirka

On 5/07/25 11:19, Michael Chirico wrote:
> Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
> registered entry point for that routine, so you should just be able to do:
>
> importFrom(ape,seq_root2tip)
>
> and be on your way.
>
> [1] ?ape::seq_root2tip notes that "other packages" use it, but none of
> those are on CRAN, could be a Bioconductor thing:
> https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code
>
> Mike C
>
> On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
>> So I think the only solution that CRAN will accept is linking against
>> headers. I can download an ape.h header file, but for the life of me, I?m
>> having trouble figuring out how to link it in my R package. I?ve read what
>> I can find online, but haven?t been successful. Right now, I have the ape.h
>> file in an src folder. I also have
>>
>> LinkingTo: Rcpp, ape
>>
>> In my DESCRIPTION file
>>
>>
>>
>> But I?m getting all sorts of errors. Does anyone have an example of how I
>> can do this that I might be able to work from?
>>
>>
>>
>> Thanks in advance!!!!
>>
>> Sharon
>>
>>
>>
>>
>>
>> *From: *Iris Simmons <ikwsimmo at gmail.com>
>> *Date: *Thursday, July 3, 2025 at 5:11?PM
>> *To: *Sharon Bewick <sbewick at clemson.edu>
>> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
>> r-package-devel at r-project.org>
>> *Subject: *Re: [R-pkg-devel] Two errors
>>
>> This Message Is From An External Sender: Use caution when opening links or
>> attachments if you do not recognize the sender.
>>
>> I believe the suggestion was that you should alternatively write:
>>
>> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
>> "ape")
>>
>> however, that generates the following note that CRAN is very unlikely to
>> accept:
>>
>> * checking foreign function calls ... NOTE
>> Foreign function call to a different package:
>>    .Call("seq_root2tip", ..., PACKAGE = "ape")
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> The other possibility is adding:
>>
>> importFrom(ape, seq_root2tip)
>>
>> to your NAMESPACE and not modifying your code, but that generates a
>> different note:
>>
>> * checking foreign function calls ... NOTE
>> Registration problem:
>>    symbol 'seq_root2tip' not in namespace:
>>     .Call(seq_root2tip, ...)
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> Your best bet is to ask the maintainers of package:ape to add and
>> export an R function like this:
>>
>> idk <- function (...)
>> .Call(seq_root2tip, ...)
>>
>> There are also ways to do it in C using R_RegisterCCallable and
>> R_GetCCallable but that might be too complicated for something like
>> this.
>>
>> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>>> Thanks so much for the tips!
>>>
>>> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
>> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
>> the Description file? Somewhere in the code?
>>> So sorry for not understanding!
>>>
>>> Thanks!
>>> Sharon
>>>
>>> From: Michael Chirico <michaelchirico4 at gmail.com>
>>> Date: Thursday, July 3, 2025 at 4:13?PM
>>> To: Sharon Bewick <sbewick at clemson.edu>
>>> Cc: R Package Development <r-package-devel at r-project.org>
>>> Subject: Re: [R-pkg-devel] Two errors
>>>
>>> This Message Is From An External Sender: Use caution when opening links
>> or attachments if you do not recognize the sender.
>>> 1. all functions in R are variables. You can "trick" code tools by
>> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
>> typically part of a package's private interface (b) it might be preferable
>> to use the string "seq_root2tip" with PACKAGE="ape"
>>> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
>> "phytree<-") is what you want assuming it's exported)
>>> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>>>
>>> Mike C
>>> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
>> sbewick at clemson.edu>> wrote:
>>> 1. I?m trying to upload my R package. However, I use the ape function
>> seq_root2tip but for the sake of speed am calling it using .Call:
>>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>>
>>> How do I get R to recognize the seq_root2tip function from ape in this C
>> call? It is throwing up a NOTE that is getting my package rejected:
>>> shade_branch: no visible binding for global variable ?seq_root2tip?
>>>
>>> but seq_root2tip is a function, not a global variable.
>>>
>>> 2. I?m also getting a NOTE about: no visible global function definition
>> for ?phy_tree<-?
>>> I have declared phy_tree in the NAMESPACE file:
>> importFrom(phyloseq,phy_tree)
>>> I don?t know what the problem is?
>>>
>>> Thanks!
>>> Sharon
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
>> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>>
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Sat Jul  5 22:49:09 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Sat, 05 Jul 2025 20:49:09 +0000
Subject: [R-pkg-devel] Inconsistent application of the rule about modifying
 the user filespace?
Message-ID: <5a8e849f-4e21-4306-ac65-437ee0c0ed5a@protonmail.com>

Dear all,

tl;dr: several CRAN packages can modify the user filespace without 
explicitly
requiring the user to specify the path, but I was required to change the
default behavior of some functions in my package because they would 
modify the
user's filespace. This seems inconsistent to me (and therefore it's a bit
frustrating), is there a way to clarify it in the policies?

Longer version:

A couple of weeks ago, I submitted a package, flir [0], that provides
several functions that write to the user directory (it is now on CRAN). For
instance, `setup_flir()` creates a folder "flir" in the working 
directory, and
`fix()` parses all R files in the working directory and potentially 
modifies
them following a list of predefined rules. The behavior of those 
functions was
clearly documented.

Those functions had an argument `path = "."` by default. During the 
submission
process, I got a comment indicating that I had to remove this
default value and force users to specify a value for `path` instead (or
interactively handle it if it is missing), which is a bit annoying simply
because it forces extra typing. This comment was referring to the following
paragraph from CRAN policies:

"Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up). Installing
into the system?s R installation (e.g., scripts to its bin directory) is
not allowed.
Limited exceptions may be allowed in interactive sessions if the package
obtains confirmation from the user."

I understand the willingness to minimize automatic changes to the user's
file system, but it seems to me that this rule is not consistently 
applied. There
are plenty of functions from external packages that directly write to 
the user's
file system without specifying a path and without obtaining confirmation 
from
the user, such as `altdoc::setup_docs(), `pkgdown::build_site()`,
`Rcpp::Rcpp.package.skeleton()`, `roxygen2::roxygenize()`, most of `usethis`
functions, etc.

Therefore, it's quite unclear to me why removing the default `path = 
"."` was
required in this case. Does this depend on who reviews the submissions? Is
there a way to clarify it in the policies?

Best,
Etienne

[0]: https://cran.r-project.org/web/packages/flir/


From |kry|ov @end|ng |rom d|@root@org  Sun Jul  6 23:36:01 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 7 Jul 2025 00:36:01 +0300
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <20250707003601.46b3ca9a@Tarkus>

? Sat, 5 Jul 2025 14:12:56 -0700
"Reed A. Cartwright" <racartwright at gmail.com> ?????:

> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it.

Proving a negative is hard.

My guess is that the reviewer may have used a static analysis tool to
look for calls to cat()/writeLines() or functions with a default
argument of ".". The "tools/config.Rtools/config/configure.R" may be a
typo or a forgotten separator somewhere.

If you made any changes to the package for the resubmission, put the
explanation about the R scripts under tools/ being required by the
configure script to operate on the current directory in the submission
comment.

If you want to be extra sure, you can try experimenting with a
container or a virtual machine:

find / /home /tmp -xdev -ls > .../ironseed.before
./configure
find / /home /tmp -xdev -ls > .../ironseed.after
diff -u .../ironseed.before .../ironseed.after

(Adjust the 'find' command so that it can visit all the relevant
filesystems, not /proc or /sys on Linux.)

I didn't notice anything amiss in my own limited testing.

-- 
Best regards,
Ivan


From rhe|p @end|ng |rom eoo@@dd@@n|  Mon Jul  7 17:23:48 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Mon, 7 Jul 2025 17:23:48 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
Message-ID: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>


I have a package, which I am thinking to submit to CRAN. It can output 
graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/). 
However, I am not sure if and how I should indicate the dependency on 
kitty. The package builds and installs fine without kitty. However, you 
can't really use it without it (it will generate errors when you try).

Two possible fields in the DESCRIPTION could be:

SystemRequirements: kitty

And since, kitty only runs on macos and linux:

OS_type: unix

Should I add these? Like above?

Thanks!

Jan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul  7 17:53:37 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jul 2025 11:53:37 -0400
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
Message-ID: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>

On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
> 
> I have a package, which I am thinking to submit to CRAN. It can output
> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
> However, I am not sure if and how I should indicate the dependency on
> kitty. The package builds and installs fine without kitty. However, you
> can't really use it without it (it will generate errors when you try).
> 
> Two possible fields in the DESCRIPTION could be:
> 
> SystemRequirements: kitty
> 
> And since, kitty only runs on macos and linux:
> 
> OS_type: unix
> 
> Should I add these? Like above?

I think the SystemRequirements field is enough.  *Your package* doesn't 
depend on unix, it just depends on kitty.

Duncan Murdoch


From kev|nu@hey @end|ng |rom gm@||@com  Mon Jul  7 20:42:38 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Mon, 7 Jul 2025 11:42:38 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>

Hi Reed,

Have you received any feedback yet? My only guess is that this was a
false positive from some static analysis tools on the CRAN
maintainer's side;
https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
says that:

> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).

Perhaps the presence of these files within a CRAN package submission
is causing something to trip up. If not, let me know if there's
anything I can change on the 'configure' side to help resolve this.

Did you also get a warning about the 'cleanup.R' file? That is, my
guess is that the presence of these two files
(https://github.com/reedacartwright/ironseed/tree/main/tools/config)
is somehow causing the issue.

Thanks,
Kevin

On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
<racartwright at gmail.com> wrote:
>
> Dear All,
>
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
>
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
>
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
>
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
>
> Thanks,
> Reed
>
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jul  7 21:00:57 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 7 Jul 2025 21:00:57 +0200
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>

Please ignore that comment:
I think "tools/config/configure.R" was meant, but that seems fine, too.

Best,
Uwe Ligges

On 07.07.2025 20:42, Kevin Ushey wrote:
> Hi Reed,
> 
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
> 
>> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> 
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
> 
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
> 
> Thanks,
> Kevin
> 
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
>>
>> Dear All,
>>
>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>> to address one feedback message or even what is causing it. It might
>> be related to Kevin Ushey's R scripts that I am using to configure the
>> package during installation [2]. The message that I received is below.
>>
>> """
>> Please ensure that your functions do not write by default or in your
>> examples/vignettes/tests in the user's home filespace (including the
>> package directory and getwd()). This is not allowed by CRAN policies.
>> Please omit any default path in writing functions. In your
>> examples/vignettes/tests you can write to tempdir().
>> -> tools/config.Rtools/config/configure.R
>> """
>>
>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>> So I assume that this report is saying that it is being created during
>> installation, but I can't reproduce it. My package does read and
>> execute `tools/config/configure.R` during installation, so right now
>> my guess is that my configure script is somehow creating
>> `tools/config.Rtools/config/configure.R` when I try to read
>> `tools/config/configure.R`. Any help figuring this out would be
>> appreciated.
>>
>> [1] https://github.com/reedacartwright/ironseed
>> [2] https://github.com/kevinushey/configure
>>
>> Thanks,
>> Reed
>>
>> --
>> Reed A. Cartwright, PhD
>> Associate Professor of Life Sciences
>> TEACh Representative - Evolution and Computational Courses
>> School of Life Sciences and The Biodesign Institute
>> Arizona State University
>> ==================
>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>> 85287-6401 USA
>> Office: Biodesign B-220C, 1-480-965-9949
>> Website: http://cartwrig.ht/
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:22:40 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:22:40 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <CALOkxuz+pP-FCq+2PmM0a1XQfcgiv3qrSyOz03-1ZzRaH3-y8g@mail.gmail.com>

Hi Kevin,

First, thanks for the configure.R package. I needed to check for the
presence of two functions during compilation and it helped simplify
the process for me.

I resubmitted to CRAN yesterday under the assumption that this report
was being generated from a static analysis. I made the following
changes to `tools/config.R`.

* Removed all the `@export` lines.
* Removed the default `path = "."` in `configure_directory()`.
* Removed the `use_configure()` function.

You can see the fill diff at
<https://github.com/reedacartwright/ironseed/compare/8522d28...45a0f23#diff-6c174165097fa11900454663ab7b0a589bb0fc8f7e41b25d8b11833674ad4d91>

If this passes, I'll let you know.

Cheers,
Reed


On Mon, Jul 7, 2025 at 11:43?AM Kevin Ushey <kevinushey at gmail.com> wrote:
>
> Hi Reed,
>
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
>
> > Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
>
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
>
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
>
> Thanks,
> Kevin
>
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:26:13 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:26:13 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
 <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
Message-ID: <CALOkxuxARq1_po7rc4Z3nUm_ccB5yWavmdVfuGE5Z5uFOd4RdQ@mail.gmail.com>

Dear Uwe,

Thank you for letting me know that I can ignore that comment.

Cheers,
Reed

On Mon, Jul 7, 2025 at 12:02?PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> Please ignore that comment:
> I think "tools/config/configure.R" was meant, but that seems fine, too.
>
> Best,
> Uwe Ligges
>
> On 07.07.2025 20:42, Kevin Ushey wrote:
> > Hi Reed,
> >
> > Have you received any feedback yet? My only guess is that this was a
> > false positive from some static analysis tools on the CRAN
> > maintainer's side;
> > https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> > says that:
> >
> >> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> >
> > Perhaps the presence of these files within a CRAN package submission
> > is causing something to trip up. If not, let me know if there's
> > anything I can change on the 'configure' side to help resolve this.
> >
> > Did you also get a warning about the 'cleanup.R' file? That is, my
> > guess is that the presence of these two files
> > (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> > is somehow causing the issue.
> >
> > Thanks,
> > Kevin
> >
> > On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> > <racartwright at gmail.com> wrote:
> >>
> >> Dear All,
> >>
> >> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> >> to address one feedback message or even what is causing it. It might
> >> be related to Kevin Ushey's R scripts that I am using to configure the
> >> package during installation [2]. The message that I received is below.
> >>
> >> """
> >> Please ensure that your functions do not write by default or in your
> >> examples/vignettes/tests in the user's home filespace (including the
> >> package directory and getwd()). This is not allowed by CRAN policies.
> >> Please omit any default path in writing functions. In your
> >> examples/vignettes/tests you can write to tempdir().
> >> -> tools/config.Rtools/config/configure.R
> >> """
> >>
> >> `tools/config.Rtools/config/configure.R` is not a file in my package.
> >> So I assume that this report is saying that it is being created during
> >> installation, but I can't reproduce it. My package does read and
> >> execute `tools/config/configure.R` during installation, so right now
> >> my guess is that my configure script is somehow creating
> >> `tools/config.Rtools/config/configure.R` when I try to read
> >> `tools/config/configure.R`. Any help figuring this out would be
> >> appreciated.
> >>
> >> [1] https://github.com/reedacartwright/ironseed
> >> [2] https://github.com/kevinushey/configure
> >>
> >> Thanks,
> >> Reed
> >>
> >> --
> >> Reed A. Cartwright, PhD
> >> Associate Professor of Life Sciences
> >> TEACh Representative - Evolution and Computational Courses
> >> School of Life Sciences and The Biodesign Institute
> >> Arizona State University
> >> ==================
> >> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> >> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> >> 85287-6401 USA
> >> Office: Biodesign B-220C, 1-480-965-9949
> >> Website: http://cartwrig.ht/
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Jul  8 08:22:28 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 8 Jul 2025 08:22:28 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
 <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
Message-ID: <f916d12d-32da-4d54-9525-b8e44c9dceb0@eoos.dds.nl>

OK. Thanks!

I wasn't sure if the 'SystemRequirements' field was intended just for 
dependencies needed for building and installing the package like 
libraries or a 'non-default C++ standard'. Or that it should also be 
used for dependencies needed at run-time.

Jan


On 07-07-2025 17:53, Duncan Murdoch wrote:
> On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
>>
>> I have a package, which I am thinking to submit to CRAN. It can output
>> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
>> However, I am not sure if and how I should indicate the dependency on
>> kitty. The package builds and installs fine without kitty. However, you
>> can't really use it without it (it will generate errors when you try).
>>
>> Two possible fields in the DESCRIPTION could be:
>>
>> SystemRequirements: kitty
>>
>> And since, kitty only runs on macos and linux:
>>
>> OS_type: unix
>>
>> Should I add these? Like above?
> 
> I think the SystemRequirements field is enough.? *Your package* doesn't 
> depend on unix, it just depends on kitty.
> 
> Duncan Murdoch
>


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 12:13:55 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 12:13:55 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
Message-ID: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>

Hi,

I am the maintainer of a package for which we have done a major 
refactoring (work in progress, can be found here 
<https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).

Upon my last resubmission to CRAN, some issues regarding some man pages 
(that I obviously missed) were found, e.g. function doc without a 
\value{} tag, or examples for (purposely) unexported functions.

These issues were not raised during package check (with or without 
`--as-cran` flag).

The code base is quite large, and I would be very interested in any tool 
that could help me check the man pages more thoroughly than a package 
check ?

I know about `devtools::check_man()` but it does not find the issues 
that I am mentioning.

Thanks in advance,
Best regards,

-- 
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/a5e86ea5/attachment.sig>

From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Jul 10 14:30:35 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 10 Jul 2025 14:30:35 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <7631e6ec-cb15-4793-9078-19eac7e4d60e@eoos.dds.nl>

They also weren't found when checking on winbuilder 
(https://win-builder.r-project.org/)? Especially when checking with 
r-devel?

Jan



On 10-07-2025 12:13, Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here <https://github.com/ 
> getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages 
> (that I obviously missed) were found, e.g. function doc without a 
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without `-- 
> as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool 
> that could help me check the man pages more thoroughly than a package 
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Thu Jul 10 14:33:21 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Thu, 10 Jul 2025 12:33:21 +0000
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <sZ-D_zqlm-dSYwGzVRBCLsqGhTgd_fzbCdDqtv-hmKw40u0EV6ofT5UO6ExFr-6RRcHreWkSrpR7vViEemanQsnPnV8akl_Xsv2irKtFWFk=@protonmail.com>

Hi Ghislain,

You may be interested in checkhelper::find_missing_tags().
More generally, there's a nice list of tools to prepare for CRAN submission here: https://github.com/ThinkR-open/prepare-for-cran

Best,
Etienne




Le jeudi 10 juillet 2025 ? 12:14 PM, Ghislain Durif <ghislain.durif at ens-lyon.fr> a ?crit?:

> 
> 
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).
> 
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> --
> Ghislain Durif
> -------------------------------------------
> Research engineer -- CNRS
> BioComputing Hub, LBMC, ENS Lyon (France)
> Webpage: https://gdurif.perso.math.cnrs.fr
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 10 14:47:20 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jul 2025 08:47:20 -0400
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <70af2bf4-b7f5-4143-9402-5bb3654f2e4d@gmail.com>

Among other tests, CRAN uses the development version of R (R-devel) for 
checks.  It usually contains more stringent tests than the release 
version of R, so possibly you were using a release version for tests and 
that test wasn't in it.

The Github action r-lib/actions/check-r-package at v2 will run on R-devel 
if you specify "r: 'devel'".   For example in my rgl package checks 
(visible at 
https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml), 
I check on the release and the devel versions by having

       matrix:
         config:
           - {os: windows-latest, r: 'release'}
           - {os: windows-latest, r: 'devel'}
           - {os: ubuntu-latest,   r: 'devel', http-user-agent: 'release'}
           - {os: macos-latest, r: 'devel'}

Duncan Murdoch


On 2025-07-10 6:13 a.m., Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 15:19:04 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 15:19:04 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>

Hi again,

Thanks for the responses!

@Jan van der Laan our package is unix-only so I did no try to check it 
with winbuilder.

@Etienne Bacher `checkhelper::find_missing_tags()` does actually find 
some issue, even running with the release version of R.

@Duncan Murdoch I was indeed running the check with the release version 
of R, I'll check with the development version.

Thanks again,

Best regards,

Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr

On 10/07/2025 12:13, Ghislain Durif wrote:
> Hi,
>
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here 
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
>
> Upon my last resubmission to CRAN, some issues regarding some man 
> pages (that I obviously missed) were found, e.g. function doc without 
> a \value{} tag, or examples for (purposely) unexported functions.
>
> These issues were not raised during package check (with or without 
> `--as-cran` flag).
>
> The code base is quite large, and I would be very interested in any 
> tool that could help me check the man pages more thoroughly than a 
> package check ?
>
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
>
> Thanks in advance,
> Best regards,
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/782b190a/attachment.sig>

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 16:10:11 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 16:10:11 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
Message-ID: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>

A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/466dbd9c/attachment.sig>

From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:31:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:31:31 -0500
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
 <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
Message-ID: <26735.52931.558098.560588@rob.eddelbuettel.com>


On 10 July 2025 at 15:19, Ghislain Durif wrote:
| @Duncan Murdoch I was indeed running the check with the release version 
| of R, I'll check with the development version.

There are also regularly updated Docker containers if you want to run checks
locally rather than as an action. See for example rocker/drd (smaller) or
rocker/r-devel (larger).

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:37:57 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:37:57 -0500
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <26735.53317.242011.319748@rob.eddelbuettel.com>


Ghislain,

That email was unreadable for me in two different email clients.

A common pattern for resource minimalisation is to add a snippet setting the
resources in a way CRAN prefers at the beginning of each examples block,
often wrapped in a \dontshow{} block, and possibly resetting at end. That has
been discussed on this list before so some creative searching may lead you
there. 

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @eb@meyer @end|ng |rom |@u@de  Thu Jul 10 19:22:24 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 10 Jul 2025 19:22:24 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <3a412e85-ba80-466e-a792-5e07f760d326@fau.de>

Am 10.07.25 um 12:13 schrieb Ghislain Durif:
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).

tools::checkRdContents() et al. (see ?tools::QC), used by R CMD check, 
don't currently check help pages for these things. I suppose there would 
be too many false alarms so this is manually reviewed by the 
CRAN-submissions team.

> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?

Here is quick-and-dirty code that uses 'tools'-internal helper functions 
to find names of Rd files that might deserve a \value section -- given 
an installed PACKAGE (as a character string):

     ##PACKAGE <- "rkeops"
     functions <- lsf.str(envir = getNamespace(PACKAGE))
     tools::Rd_db(PACKAGE) |>
         Filter(f = function (rd) {
             sections <- tools:::RdTags(rd)
             aliases <- tools:::.Rd_get_metadata(rd, "alias")
             !"\\value" %in% sections && (
                 "\\arguments" %in% sections ||
                 any(aliases %in% functions)
             )
         }) |>
         names()

-- 
Sebastian Meyer


From r|ch@rd@g@ever|tt @end|ng |rom gm@||@com  Thu Jul 10 13:27:55 2025
From: r|ch@rd@g@ever|tt @end|ng |rom gm@||@com (Richard Everitt)
Date: Thu, 10 Jul 2025 12:27:55 +0100
Subject: [R-pkg-devel] ggsmc: failed check
Message-ID: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>

Hi,

	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).

	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

	Does anyone have any recommendations on how I should proceed? I am not sure how to make sure I have fixed the error since I am not able to reproduce it. Could it have been a temporary issue with gganimate, and in this case should I just resubmit the package?

	Many thanks in advance,

	Richard

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Fri Jul 11 10:18:26 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Durif Ghislain)
Date: Fri, 11 Jul 2025 10:18:26 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <e314812e0c7f261d1d3004a7df7016be@ens-lyon.fr>

Hi again,

Thanks @Dirk for pointing the issue with the encoding of my original 
message (it cannot be read from the list archive either). I do not 
understand what could have been the problem since there was no issue 
with other mails sent to the list earlier on the same day in the same 
condition.  I am resending it below from my webmail instead of my 
mailer, hoping it will work better this time, and so that everyone can 
see my original message.

Regarding my issue, I did not know about the \dontshow tag, so I will 
use it. Thanks.

Best

----

Hi,

We have a package that runs parallel computations (work in progress, can 
be found here 
https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).

The package deeply relies on a Python package through `reticulate` that 
itself interfaces OpenMP-based C++ code, which can thus run parallel 
computations.

Users of our package can control CPU resource usage thanks to a wrapper 
function around `RhpcBLASctl::omp_set_num_threads(n_core)` available in 
our package.

By default, OpenMP uses all available cores which is a bad practice for 
CRAN checks. It is recommended to only use 2 CPU cores for computation 
per CRAN policies (which is totally understandable).

For unit test run with `testthat`, we can use a `tests/testthat/setup.R` 
file to run any arbitrary code before running the tests, so I can setup 
a limit on CPU usage here.

For my Rmarkdown vignette build, I have a code chunk not included in the 
output document that setup a limit using our wrapper function.

However, regarding example run, is there a way to automatically setup 
some resource limit before running package examples, or to automatically 
run some code (i.e. add code at top of generated `<pkg>-Ex.R` file) 
before running all the examples?

If not, I will have to repeat the function call that setup limit before 
every examples in my package (around 70 exported functions in my 
package), which does not seems to be really optimal.

In the same spirit, generally my example run breaks because `reticulate` 
is not explicitly initialized (I am not facing this issue in interactive 
or standard script mode and I do not understand why), so I would need to 
run something like `reticulate::py_available(initialize = TRUE)` or 
`reticulate::py_config()` before running my examples (so to prepend this 
at the top of the generated example file).

Also, our package generate cache files in `tools::R_user_dir()` 
directory because it does JIT compilation (and the generated library 
files are cached for reuse). We have a function to clean them, so I 
would need to call this function after example runs so that these files 
are removed (again for CRAN check).

Note: at the moment I have \dontrun tags around almost all my examples 
to avoid all these issues, but it was highlighted in a recent CRAN 
submission that it should be reduced to a minimum if possible.

Thanks in advance,
Best regards,


---
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


From @eb@meyer @end|ng |rom |@u@de  Fri Jul 11 10:53:12 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 11 Jul 2025 10:53:12 +0200
Subject: [R-pkg-devel] ggsmc: failed check
In-Reply-To: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
References: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
Message-ID: <c535556b-a858-44ab-bc25-f49f234083ef@fau.de>

Am 10.07.25 um 13:27 schrieb Richard Everitt:
> 	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).
> 
> 	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

Yes, see <https://github.com/thomasp85/gganimate/issues/517>.

When gganimate:::draw_frames() tries to plot$scene$plot_frame(), an 
error happens

     Error in labs(!!!lapply(plot$plot$labels, function(label) { :
       could not find function "labs"

but that is caught and turned into a "Failed to plot frame" warning 
(that would be shown in the rendered vignette), so gganimate only fails 
later when it calls its gifski_renderer() with non-existent png files 
and that is the error we get to see in the build log.

-- 
Sebastian Meyer


From ke||ey @end|ng |rom d@|@c@  Fri Jul 11 20:50:44 2025
From: ke||ey @end|ng |rom d@|@c@ (Daniel Kelley)
Date: Fri, 11 Jul 2025 18:50:44 +0000
Subject: [R-pkg-devel] Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
Message-ID: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>

# BACKGROUND

I maintain the 'oce' package, and to avoid problems when I submit a new version, I do some remote tests using

* devtools::check_mac_release()
* devtools::check_win_release()
* devtools::check_win_devel()
* devtools::check_win_oldrelease() # problem

I found that the mac upload fails, but it doesn't state why, and I'll ignore that for now, assuming it to be a temporary problem.  My concern is with the last test, i.e. on system

R version 4.4.3 (2025-02-28 ucrt)

It produces one NOTE.  Looking into this, I see the following in the 00check.log file:

* checking DESCRIPTION meta-information ... NOTE
Author field differs from that derived from Authors at R
  Author:    'Dan Kelley [aut, cre] (ORCID: <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'
  Authors at R: 'Dan Kelley [aut, cre] (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'

This relates to the following lines in my DESCRIPTION file.

# QUESTION

Should I be doing something about this note?  Note that I have the following in my DESCRIPTION file.

Authors at R: c(
    person(given="Dan", family="Kelley", email="Dan.Kelley at Dal.Ca", role=c("aut", "cre"), comment=c(ORCID="0000-0001-7808-5911")),
    person(given="Clark", family="Richards", email="clark.richards at gmail.com", role=c("aut"), comment=c(ORCID="0000-0002-7833-206X")),
    person(given="Chantelle", family="Layton", email="chantelle.layton at dal.ca", role=c("ctb"), comment=c(ORCID="0000-0002-3199-5763", "curl() coauthor")),
    person(given="British Geological Survey", role=c("ctb","cph"), comment="magnetic-field subroutine"))


From |kry|ov @end|ng |rom d|@root@org  Fri Jul 11 21:11:25 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 11 Jul 2025 22:11:25 +0300
Subject: [R-pkg-devel] 
 Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
In-Reply-To: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
References: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
Message-ID: <20250711221125.58386f1b@Tarkus>

On Fri, 11 Jul 2025 18:50:44 +0000
Daniel Kelley <kelley at dal.ca> wrote:

> My concern is with the last test, i.e. on system
> 
> R version 4.4.3 (2025-02-28 ucrt)
> 
> It produces one NOTE.  Looking into this, I see the following in the
> 00check.log file:
> 
> * checking DESCRIPTION meta-information ... NOTE
> Author field differs from that derived from Authors at R
>   Author:    'Dan Kelley [aut, cre] (ORCID:
> <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton
> [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl()
> coauthor), British Geological Survey [ctb, cph] (magnetic-field
> subroutine)'
>   Authors at R: 'Dan Kelley [aut, cre]
> (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb]
> (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British
> Geological Survey [ctb, cph] (magnetic-field subroutine)'

This is a false positive. The Author: field in your source package has
the correct text (it says ORCID: <...>), but R-4.4.3 doesn't realise
that because it predates the change to how the Author: field is
formatted.

R-4.4.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (<https://orcid.org/0000-0001-7808-5911>)"

R-4.5.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (ORCID: <https://orcid.org/0000-0001-7808-5911>)"

-- 
Best regards,
Ivan


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Thu Jul 17 13:30:12 2025
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Thu, 17 Jul 2025 08:30:12 -0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
Message-ID: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>

Hi all,

I recently noticed that my package {flightsbr}
<https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
never received any email or warning that the package would be removed. It
seems my package was removed because it imports the {parzer}
<https://docs.ropensci.org/parzer/> package that was also removed on July
1st. The authors of {parzer} told me they did not receive any messages or
warnings. What makes this a bit more puzzling, is that both packages were
passing all CRAN checks (see here
<https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
and
here
<https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>
).

I'm wondering what has caused this and if this might have happened to other
packages.

Best wishes,

Rafa Pereira

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 17 14:08:37 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 17 Jul 2025 15:08:37 +0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
Message-ID: <20250717150837.66350e36@arachnoid>

? Thu, 17 Jul 2025 08:30:12 -0300
"Rafael H. M. Pereira" <rafa.pereira.br at gmail.com> ?????:

> both packages were passing all CRAN checks (see here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
> and here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>).

While it is, indeed, not visible in the archived check results, digging
into src/contrib/PACKAGES.in reveals that 'parzer' failed the
UBSanitizer check on an Apple M1 machine on June 1st:

https://www.stats.ox.ac.uk/pub/bdr/M1-SAN/parzer/tests/testthat.Rout

Casting a NaN value to an integer is undefined behaviour (with de-facto
different results on x86_64 and ARM processors). There used to be a
check for 'x' being NA_real_, but it seems to have been broken during
refactoring three years ago:
https://github.com/ropensci/parzer/blame/10a8aa68bea8b18a69cc99326e949c5beb144afd/src/pz_parse_parts.cpp#L11-L21

Arguably, the check should be for isnan(x), not only R_IsNA(x): the
latter will still miss non-NA NaN values.

I think that the packages should have had a yellow deadline mark (i.e.
with(tools::CRAN_package_db(), Deadline[Package %in% c('parzer',
'flightsbr')]) should have been returning non-NA values) in the month
that passed. Having a number of packages archived due to a silent
problem with mail delivery is very unfortunate.

-- 
Best regards,
Ivan


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul 17 14:24:21 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 17 Jul 2025 14:24:21 +0200
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
Message-ID: <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>

You got a message from Professor Ripley on June 18 with subject "CRAN 
package parzer and its reverse dependencies" which asked you to prepare 
for the parzer archival.

Best,
Uwe Ligges



On 17.07.2025 13:30, Rafael H. M. Pereira wrote:
> Hi all,
> 
> I recently noticed that my package {flightsbr}
> <https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
> never received any email or warning that the package would be removed. It
> seems my package was removed because it imports the {parzer}
> <https://docs.ropensci.org/parzer/> package that was also removed on July
> 1st. The authors of {parzer} told me they did not receive any messages or
> warnings. What makes this a bit more puzzling, is that both packages were
> passing all CRAN checks (see here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
> and
> here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>
> ).
> 
> I'm wondering what has caused this and if this might have happened to other
> packages.
> 
> Best wishes,
> 
> Rafa Pereira
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Thu Jul 17 14:46:12 2025
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Thu, 17 Jul 2025 09:46:12 -0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
 <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>
Message-ID: <CAA42DGm7ae-0vnt5D0EYASW3fRBvqxr6xF5Au2J6WYdFTm0OQA@mail.gmail.com>

Uwe, I have checked my inbox and spam and could not find the email. I might
have deleted it by accident. In any case, thank you both for the
clarification. We'll be working to resubmit both packages to CRAN soon.

best wishes,
Rafa

On Thu, Jul 17, 2025 at 9:24?AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> You got a message from Professor Ripley on June 18 with subject "CRAN
> package parzer and its reverse dependencies" which asked you to prepare
> for the parzer archival.
>
> Best,
> Uwe Ligges
>
>
>
> On 17.07.2025 13:30, Rafael H. M. Pereira wrote:
> > Hi all,
> >
> > I recently noticed that my package {flightsbr}
> > <https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
> > never received any email or warning that the package would be removed. It
> > seems my package was removed because it imports the {parzer}
> > <https://docs.ropensci.org/parzer/> package that was also removed on
> July
> > 1st. The authors of {parzer} told me they did not receive any messages or
> > warnings. What makes this a bit more puzzling, is that both packages were
> > passing all CRAN checks (see here
> > <
> https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html
> >
> > and
> > here
> > <
> https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html
> >
> > ).
> >
> > I'm wondering what has caused this and if this might have happened to
> other
> > packages.
> >
> > Best wishes,
> >
> > Rafa Pereira
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 16:10:04 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 07:10:04 -0700
Subject: [R-pkg-devel] (no subject)
Message-ID: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>

Hello,

I'm trying to submit a package to CRAN and I'm getting the following note
on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
I've been using for while. Can someone tell me what I'm doing wrong here?


https://win-builder.r-project.org/sUNBEuh3P71y/00check.log

* checking DESCRIPTION meta-information ... NOTE
Author field differs from that derived from Authors at R
  Author:    'John Harrold [aut, cre] (ORCID: <
https://orcid.org/0000-0003-2052-4373>)'
  Authors at R: 'John Harrold [aut, cre] (<
https://orcid.org/0000-0003-2052-4373>)'


Thankyou,
John

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Jul 17 16:42:56 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 17 Jul 2025 09:42:56 -0500
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
Message-ID: <26745.3056.156266.892574@rob.eddelbuettel.com>


On 17 July 2025 at 07:10, John Harrold wrote:
| Hello,
| 
| I'm trying to submit a package to CRAN and I'm getting the following note
| on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
| I've been using for while. Can someone tell me what I'm doing wrong here?
| 
| 
| https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
| 
| * checking DESCRIPTION meta-information ... NOTE
| Author field differs from that derived from Authors at R
|   Author:    'John Harrold [aut, cre] (ORCID: <
| https://orcid.org/0000-0003-2052-4373>)'
|   Authors at R: 'John Harrold [aut, cre] (<
| https://orcid.org/0000-0003-2052-4373>)'

This came up on this list a few days ago, the way the ORCID field is being
formatted from the Authors at R entry changed in R 4.5.*: the previous R release
did not inject 'ORCID: '. But you can ignore this difference, it will not
hold up the processing of your package.

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 16:44:22 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 07:44:22 -0700
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <26745.3056.156266.892574@rob.eddelbuettel.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
Message-ID: <CANAiAiUp_dK=-xNuiUC4fnmZbgsqn+WH-XR0PYG3nHsSH=T=SQ@mail.gmail.com>

Thankyou Dirk.

On Thu, Jul 17, 2025 at 7:42?AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 17 July 2025 at 07:10, John Harrold wrote:
> | Hello,
> |
> | I'm trying to submit a package to CRAN and I'm getting the following note
> | on Winbuilder (oldrelease). It's strange because this the same
> DESCRIPTION
> | I've been using for while. Can someone tell me what I'm doing wrong here?
> |
> |
> | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> |
> | * checking DESCRIPTION meta-information ... NOTE
> | Author field differs from that derived from Authors at R
> |   Author:    'John Harrold [aut, cre] (ORCID: <
> | https://orcid.org/0000-0003-2052-4373>)'
> |   Authors at R: 'John Harrold [aut, cre] (<
> | https://orcid.org/0000-0003-2052-4373>)'
>
> This came up on this list a few days ago, the way the ORCID field is being
> formatted from the Authors at R entry changed in R 4.5.*: the previous R
> release
> did not inject 'ORCID: '. But you can ignore this difference, it will not
> hold up the processing of your package.
>
> Best, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul 17 17:22:42 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 17 Jul 2025 17:22:42 +0200
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <26745.3056.156266.892574@rob.eddelbuettel.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
Message-ID: <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>



On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
> 
> On 17 July 2025 at 07:10, John Harrold wrote:
> | Hello,
> |
> | I'm trying to submit a package to CRAN and I'm getting the following note
> | on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
> | I've been using for while. Can someone tell me what I'm doing wrong here?
> |
> |
> | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> |
> | * checking DESCRIPTION meta-information ... NOTE
> | Author field differs from that derived from Authors at R
> |   Author:    'John Harrold [aut, cre] (ORCID: <
> | https://orcid.org/0000-0003-2052-4373>)'
> |   Authors at R: 'John Harrold [aut, cre] (<
> | https://orcid.org/0000-0003-2052-4373>)'
> 
> This came up on this list a few days ago, the way the ORCID field is being
> formatted from the Authors at R entry changed in R 4.5.*: the previous R release
> did not inject 'ORCID: '. But you can ignore this difference, it will not
> hold up the processing of your package.

Well, ideally you simply build and check with R-release or even better 
R-devel.

Best,
Uwe Ligges



> Best, Dirk
> 


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 18:59:34 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 09:59:34 -0700
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
 <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
Message-ID: <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>

Sorry for not being clearer. I checked on all three and it was only
oldrelease that was giving me this note.

On Thu, Jul 17, 2025 at 8:22?AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
> >
> > On 17 July 2025 at 07:10, John Harrold wrote:
> > | Hello,
> > |
> > | I'm trying to submit a package to CRAN and I'm getting the following
> note
> > | on Winbuilder (oldrelease). It's strange because this the same
> DESCRIPTION
> > | I've been using for while. Can someone tell me what I'm doing wrong
> here?
> > |
> > |
> > | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> > |
> > | * checking DESCRIPTION meta-information ... NOTE
> > | Author field differs from that derived from Authors at R
> > |   Author:    'John Harrold [aut, cre] (ORCID: <
> > | https://orcid.org/0000-0003-2052-4373>)'
> > |   Authors at R: 'John Harrold [aut, cre] (<
> > | https://orcid.org/0000-0003-2052-4373>)'
> >
> > This came up on this list a few days ago, the way the ORCID field is
> being
> > formatted from the Authors at R entry changed in R 4.5.*: the previous R
> release
> > did not inject 'ORCID: '. But you can ignore this difference, it will not
> > hold up the processing of your package.
>
> Well, ideally you simply build and check with R-release or even better
> R-devel.
>
> Best,
> Uwe Ligges
>
>
>
> > Best, Dirk
> >
>
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jul 18 11:28:44 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 18 Jul 2025 11:28:44 +0200
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
 <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
 <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>
Message-ID: <c46ed113-f537-4ca6-89df-95642413c670@statistik.tu-dortmund.de>

That's fine,
Uwe


On 17.07.2025 18:59, John Harrold wrote:
> Sorry for not being clearer. I checked on all three and it was only 
> oldrelease that was giving me this note.
> 
> On Thu, Jul 17, 2025 at 8:22?AM Uwe Ligges <ligges at statistik.tu- 
> dortmund.de <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
> 
> 
>     On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
>      >
>      > On 17 July 2025 at 07:10, John Harrold wrote:
>      > | Hello,
>      > |
>      > | I'm trying to submit a package to CRAN and I'm getting the
>     following note
>      > | on Winbuilder (oldrelease). It's strange because this the same
>     DESCRIPTION
>      > | I've been using for while. Can someone tell me what I'm doing
>     wrong here?
>      > |
>      > |
>      > | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
>     <https://win-builder.r-project.org/sUNBEuh3P71y/00check.log>
>      > |
>      > | * checking DESCRIPTION meta-information ... NOTE
>      > | Author field differs from that derived from Authors at R
>      > |? ?Author:? ? 'John Harrold [aut, cre] (ORCID: <
>      > | https://orcid.org/0000-0003-2052-4373 <https://
>     orcid.org/0000-0003-2052-4373>>)'
>      > |? ?Authors at R: 'John Harrold [aut, cre] (<
>      > | https://orcid.org/0000-0003-2052-4373 <https://
>     orcid.org/0000-0003-2052-4373>>)'
>      >
>      > This came up on this list a few days ago, the way the ORCID field
>     is being
>      > formatted from the Authors at R entry changed in R 4.5.*: the
>     previous R release
>      > did not inject 'ORCID: '. But you can ignore this difference, it
>     will not
>      > hold up the processing of your package.
> 
>     Well, ideally you simply build and check with R-release or even better
>     R-devel.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
>      > Best, Dirk
>      >
> 


From rmh @end|ng |rom temp|e@edu  Wed Jul 23 02:16:57 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 23 Jul 2025 00:16:57 +0000
Subject: [R-pkg-devel] compact vignettes
Message-ID: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>

I need some help on the compacting of pdf files in the inst/doc/ directory.
When I use the --compact-vignettes option, as in
  R CMD build --compact-vignettes microplot
the relevant pdf filesize drops 76 bytes.

The CRAN pretest makes it drop in size by 270 kilobytes

What incantation am I missing?

Thanks
Rich


From edd @end|ng |rom deb|@n@org  Wed Jul 23 02:31:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 22 Jul 2025 19:31:31 -0500
Subject: [R-pkg-devel] compact vignettes
In-Reply-To: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
Message-ID: <26752.11619.121895.965023@rob.eddelbuettel.com>


On 23 July 2025 at 00:16, Richard M. Heiberger wrote:
| I need some help on the compacting of pdf files in the inst/doc/ directory.
| When I use the --compact-vignettes option, as in
|   R CMD build --compact-vignettes microplot
| the relevant pdf filesize drops 76 bytes.
| 
| The CRAN pretest makes it drop in size by 270 kilobytes
| 
| What incantation am I missing?

I use `--compact-vignettes=both` (encoded in wrapper script `build.r` which
is part of my `littler` package).

One of those things that maybe should be a default but aren't...

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From N||@@Lue@chow @end|ng |rom un|-due@@e|dor|@de  Wed Jul 23 12:40:07 2025
From: N||@@Lue@chow @end|ng |rom un|-due@@e|dor|@de (=?UTF-8?Q?Nils_L=C3=BCschow?=)
Date: Wed, 23 Jul 2025 12:40:07 +0200
Subject: [R-pkg-devel] 
 [Extern] Re: Re: Problem building package depending
 on third party c++ source library.
In-Reply-To: <20250603110406.5993742f@Tarkus>
References: <ed3ae707af8e1af36f51e73581ee14af@uni-duesseldorf.de>
 <20250430215741.445338cd@Tarkus>
 <63bbe5f7-e81a-4798-bb65-e18d785d32bc@hhu.de>
 <20250603110406.5993742f@Tarkus>
Message-ID: <d8407f6a-5235-46ae-a8bf-1f3d839a5e4a@uni-duesseldorf.de>

This compiler error was apparently in a gcc update from last year, 
previously this would have been a warning. Apparently the gcc version in 
my wsl working environment was older and therefore I did not encounter 
it. I just removed the "const" and that fixed it (as it was const 
before, there shouldn't be a point where this variable is changed, so I 
guess it shouldn't cause any problems if I do not touch the Gecode 
library any further).

With this and some minor Makevars adjustments I got Gecode to compile 
both separately in the CRAN Debian testing container as well as in 
conjunction with R CMD "check".
Most remaining warnings are easy to deal with, however, one seems to be 
more problematic:


* checking for GNU extensions in Makefiles ... WARNING
Found the following file(s) containing GNU extensions:
 ? src/gcd/Makefile
 ? src/gcd/Makefile.in
 ? src/gecode_untouched/Makefile.in
Portable Makefiles do not use GNU extensions such as +=, :=, $(shell),
$(wildcard), ifeq ... endif, .NOTPARALLEL See section ?Writing portable
packages? in the ?Writing R Extensions? manual.


So there are definitely multiple occurences of such extensions in the 
Gecode Makefile. Since it is, unfortunately, quite extensive I would 
rather not have to rewrite too much of it (also because I do not really 
know too much about more advanced Makefiles). So the question would be 
how unportable it really is in its current state. I have compiled Gecode 
on multiple different Windows and Linux systems without too much hassle 
so far, which is why I wonder whether it is really all that bad (after 
all the library itself was written to run on Linux, Windows and MacOS).

Best regards,
Nils


Am 03.06.2025 um 10:04 schrieb Ivan Krylov:
> On Sat, 24 May 2025 17:07:06 +0200
> Nils L?schow <nilue103 at hhu.de> wrote:
>
>> Regarding the "mismatched-new-delete" warning I am also relatively
>> sure that this is actually a false positive. Taking a look into the
>> stack-trace, the new and delete operators are actually overloaded
>> with functions that internally use malloc and free, hence, there is
>> no mismatch
> You're right, I see now that the call to free() is inlined into the
> operator delete. This might be the same GCC bug as reported at
> <https://gcc.gnu.org/bugzilla/show_bug.cgi?id=100485>, but I've been
> wrong about finding the exact problem before.
>
> Generally, R CMD check will produce a NOTE if it sees you disabling a
> compiler warning, but the compiler is in the wrong here, and a NOTE is
> better than a WARNING. Still, it's best to have a package pass R CMD
> check without even NOTEs because those don't need to be re-checked by a
> human upon updates. Perhaps you could ask on Libera.Chat's #gcc channel
> about possible workarounds? Sorry for not giving a more definitive
> answer.
>
> I've tried compiling the package on a Debian testing container, which
> is the OS that runs the incoming package checks, and encountered even
> more problems. Now gecode doesn't build at all, manually with
> './configure && make' or as part of the R package:
>
> In file included from gecode/set/rel.cpp:39:
> In file included from ./gecode/set/int.hh:296:
> ./gecode/set/int/weights.hpp:127:14: error: no viable overloaded '='
>    127 |     elements = elements0; weights = weights0;
>        |     ~~~~~~~~ ^ ~~~~~~~~~
> ./gecode/kernel/data/shared-array.hpp:53:9: note: candidate function (the implicit copy assignment operator) not viable: 'this' argument has type 'const SharedArray<int>', but
>   method is not marked const
>     53 |   class SharedArray : public SharedHandle {
>        |         ^
> In file included from gecode/set/rel.cpp:39:
> In file included from ./gecode/set/int.hh:296:
> ./gecode/set/int/weights.hpp:127:35: error: no viable overloaded '='
>    127 |     elements = elements0; weights = weights0;
>        |                           ~~~~~~~ ^ ~~~~~~~~
> ./gecode/kernel/data/shared-array.hpp:53:9: note: candidate function (the implicit copy assignment operator) not viable: 'this' argument has type 'const SharedArray<int>', but
>   method is not marked const
>     53 |   class SharedArray : public SharedHandle {
>        |         ^
>
> Additionally, gecode's ./configure wants to add --std=c++11 to the
> compiler command line. I don't know if linking C++20 and C++11 code
> would cause ABI problems, but it might better to configure gecode with
> --enable-cpp11=no (since Makevars already gives the compatible standard
> flag to ./configure).
>


From rmh @end|ng |rom temp|e@edu  Wed Jul 23 22:09:26 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 23 Jul 2025 20:09:26 +0000
Subject: [R-pkg-devel] [External]  compact vignettes
In-Reply-To: <26752.11619.121895.965023@rob.eddelbuettel.com>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
Message-ID: <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>

I still don't have the incantation correct
When I use
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot

I get   558910 bytes

When I use
R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
GS_QUALITY=ebook
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot

I get 558950 bytes

The bytecount for the package went up.

Transcript:


rmh at MacBook-Air-9 HH-R.package % echo $R_QPDF $R_GSCMD $GS_QUALITY
echo $R_QPDF $R_GSCMD $GS_QUALITY

rmh at MacBook-Air-9 HH-R.package % R CMD build --compact-vignettes=both microplot
R CMD build --compact-vignettes=both microplot
* checking for file ?microplot/DESCRIPTION? ... OK
* preparing ?microplot?:
* checking DESCRIPTION meta-information ... OK
* installing the package to process help pages
* saving partial Rd database
* creating vignettes ... OK
* compacting vignettes and other PDF files
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?MSWord_TablePlusGraphicColumn.Rold? ?NEWS-complete.Rold?
  ?dvi.latexConsole.Rold? ?latexCheckOptions.Rold?
  ?microplot.ggplot.Rpdf? ?microplot.ggplot.Rreusegeom?
  ?microplot_yfactor.ggplot.Rold? ?msWord.microplotMatrix_1.0.39.Rold?
Subdirectory 'man' contains invalid file names:
  ?MSWord.Rdold? ?MSWord_TablePlusGraphicColumn.Rdold?
  ?microplot.AEdotplot.Rdold? ?pdfMicroplot.Rdold? ?plot_grid.Rdold?
Subdirectory 'demo' contains invalid file names:
  ?LegendrePolynomials-msWord.rold? ?LegendrePolynomials-msWord.rold29?
  ?boxplot-ggplot-MSWord.rold? ?boxplot-ggplot.rold?
  ?boxplot-ggplot2.rold? ?bwplot-lattice-MSWord.rold?
  ?bwplot-lattice.r31? ?bwplot-lattice.rold? ?iris.rold?
  ?latex-ggplot.rreusegeom?
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a ?data/datalist? file should be added
* building ?microplot_1.0-47.tar.gz?

rmh at MacBook-Air-9 HH-R.package % ls -alF microplot_1.0-47.tar.gz
ls -alF microplot_1.0-47.tar.gz
-rw-r--r--  1 rmh  staff  558910 Jul 23 16:03 microplot_1.0-47.tar.gz


rmh at MacBook-Air-9 HH-R.package %R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
GS_QUALITY=ebook
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot
R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
rmh at MacBook-Air-9 HH-R.package % R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
rmh at MacBook-Air-9 HH-R.package % GS_QUALITY=ebook
rmh at MacBook-Air-9 HH-R.package % echo $R_QPDF $R_GSCMD $GS_QUALITY
/Library/Frameworks/R.framework/Resources/bin/qpdf /usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs ebook
rmh at MacBook-Air-9 HH-R.package % R CMD build --compact-vignettes=both microplot
* checking for file ?microplot/DESCRIPTION? ... OK
* preparing ?microplot?:
* checking DESCRIPTION meta-information ... OK
* installing the package to process help pages
* saving partial Rd database
* creating vignettes ... OK
* compacting vignettes and other PDF files
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?MSWord_TablePlusGraphicColumn.Rold? ?NEWS-complete.Rold?
  ?dvi.latexConsole.Rold? ?latexCheckOptions.Rold?
  ?microplot.ggplot.Rpdf? ?microplot.ggplot.Rreusegeom?
  ?microplot_yfactor.ggplot.Rold? ?msWord.microplotMatrix_1.0.39.Rold?
Subdirectory 'man' contains invalid file names:
  ?MSWord.Rdold? ?MSWord_TablePlusGraphicColumn.Rdold?
  ?microplot.AEdotplot.Rdold? ?pdfMicroplot.Rdold? ?plot_grid.Rdold?
Subdirectory 'demo' contains invalid file names:
  ?LegendrePolynomials-msWord.rold? ?LegendrePolynomials-msWord.rold29?
  ?boxplot-ggplot-MSWord.rold? ?boxplot-ggplot.rold?
  ?boxplot-ggplot2.rold? ?bwplot-lattice-MSWord.rold?
  ?bwplot-lattice.r31? ?bwplot-lattice.rold? ?iris.rold?
  ?latex-ggplot.rreusegeom?
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a ?data/datalist? file should be added
* building ?microplot_1.0-47.tar.gz?

rmh at MacBook-Air-9 HH-R.package % ls -alF microplot_1.0-47.tar.gz
ls -alF microplot_1.0-47.tar.gz
-rw-r--r--  1 rmh  staff  558950 Jul 23 16:04 microplot_1.0-47.tar.gz
rmh at MacBook-Air-9 HH-R.package % 
> On Jul 22, 2025, at 20:31, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 23 July 2025 at 00:16, Richard M. Heiberger wrote:
> | I need some help on the compacting of pdf files in the inst/doc/ directory.
> | When I use the --compact-vignettes option, as in
> |   R CMD build --compact-vignettes microplot
> | the relevant pdf filesize drops 76 bytes.
> | 
> | The CRAN pretest makes it drop in size by 270 kilobytes
> | 
> | What incantation am I missing?
> 
> I use `--compact-vignettes=both` (encoded in wrapper script `build.r` which
> is part of my `littler` package).
> 
> One of those things that maybe should be a default but aren't...
> 
> Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 01:00:32 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 02:00:32 +0300
Subject: [R-pkg-devel] [External]  compact vignettes
In-Reply-To: <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
 <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
Message-ID: <20250724020032.0a4c60c3@Tarkus>

? Wed, 23 Jul 2025 20:09:26 +0000
"Richard M. Heiberger" <rmh at temple.edu> ?????:

> When I use
> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
> GS_QUALITY=ebook
> echo $R_QPDF $R_GSCMD $GS_QUALITY
> R CMD build --compact-vignettes=both microplot
> 
> I get 558950 bytes
> 
> The bytecount for the package went up.

Unfortunately, this seems to be very dependent on versions of software
in use, including LaTeX and Ghostscript (and fonts?). I can compress
your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
when I rebuild the package, I can only get down from 276Kb to 156Kb:

R -q -s -e '
 untar("microplot_1.0-47.tar.gz.orig");
 tools::compactPDF(
  "microplot/inst/doc",
  gs_cmd = "gs", gs_quality = "ebook",
  verbose = TRUE
 )
'
qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
#{pdf}s = length(paths) = 1
- microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0; 
    ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
  compacted ?rmhPoster.pdf? from 372Kb to 96Kb


LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
 --compact-vignettes=both microplot
<...>
* creating vignettes ... OK
<...>
* compacting vignettes and other PDF files
    compacted ?rmhPoster.pdf? from 276Kb to 156Kb

And 'gs --version' says '10.00.0', which shouldn't be that different
from your '10.03.0'!

-- 
Best regards,
Ivan


From rmh @end|ng |rom temp|e@edu  Thu Jul 24 03:52:11 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 24 Jul 2025 01:52:11 +0000
Subject: [R-pkg-devel] [External]  [External]  compact vignettes
In-Reply-To: <20250724020032.0a4c60c3@Tarkus>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
 <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
 <20250724020032.0a4c60c3@Tarkus>
Message-ID: <FF79867A-02D1-4190-BD79-0D657DC745FC@temple.edu>

Ivan, 

I tried doing what you did and it increased the size by a factor of 10

> Sys.getenv("R_QPDF","R_GSCMD","GS_QUALITY")
[1] "/Library/Frameworks/R.framework/Resources/bin/qpdf"
> Sys.getenv("R_QPDF")
[1] "/Library/Frameworks/R.framework/Resources/bin/qpdf"
> Sys.getenv("R_GSCMD")
[1] "/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs"
> Sys.getenv("GS_QUALITY")
[1] "ebook"
> tools::compactPDF(
+ "microplot/inst/doc",
gs_cmd = "gs", gs_quality = "ebook",
+ verbose = TRUE)
+ qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
#{pdf}s = length(paths) = 1
- microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0; 
    ==> (new=3.73094e+06)/(old=380862) = 9.79603 .. not worth using
> 

Can you send me the 96Kb file?  I will then substitute it into microplot_1.0-47.tar.gz
and send that version to CRAN.

Thank you 
Rich


> On Jul 23, 2025, at 19:00, Ivan Krylov <ikrylov at disroot.org> wrote:
> 
> untar("microplot_1.0-47.tar.gz.orig");
> tools::compactPDF(
>  "microplot/inst/doc",
>  gs_cmd = "gs", gs_quality = "ebook",
>  verbose = TRUE
> )
> '


From j@g@nmn2 @end|ng |rom gm@||@com  Thu Jul 24 13:42:32 2025
From: j@g@nmn2 @end|ng |rom gm@||@com (Mikael Jagan)
Date: Thu, 24 Jul 2025 07:42:32 -0400
Subject: [R-pkg-devel] [External] compact vignettes
In-Reply-To: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
References: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
Message-ID: <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>

> Date: Thu, 24 Jul 2025 02:00:32 +0300
> From: Ivan Krylov<ikrylov at disroot.org>
> 
> ? Wed, 23 Jul 2025 20:09:26 +0000
> "Richard M. Heiberger"<rmh at temple.edu> ?????:
> 
>> When I use
>> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
>> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
>> GS_QUALITY=ebook
>> echo $R_QPDF $R_GSCMD $GS_QUALITY
>> R CMD build --compact-vignettes=both microplot
>>
>> I get 558950 bytes
>>
>> The bytecount for the package went up.
> Unfortunately, this seems to be very dependent on versions of software
> in use, including LaTeX and Ghostscript (and fonts?). I can compress
> your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
> when I rebuild the package, I can only get down from 276Kb to 156Kb:
> 
> R -q -s -e '
>   untar("microplot_1.0-47.tar.gz.orig");
>   tools::compactPDF(
>    "microplot/inst/doc",
>    gs_cmd = "gs", gs_quality = "ebook",
>    verbose = TRUE
>   )
> '
> qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
> #{pdf}s = length(paths) = 1
> - microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0;
>      ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
>    compacted ?rmhPoster.pdf? from 372Kb to 96Kb
> 
> 
> LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
>   --compact-vignettes=both microplot
> <...>
> * creating vignettes ... OK
> <...>
> * compacting vignettes and other PDF files
>      compacted ?rmhPoster.pdf? from 276Kb to 156Kb
> 
> And 'gs --version' says '10.00.0', which shouldn't be that different
> from your '10.03.0'!
> 

I build ghostscript from sources under macOS and upgrade the version
periodically.  I encountered the same issue last year and stayed at
10.02 until they released 10.04, because there was a clear regression
in 10.03.  I was never able to track down a relevant bug report, but
I never looked very hard ...

Mikael

> -- Best regards, Ivan


From j@g@nmn2 @end|ng |rom gm@||@com  Thu Jul 24 14:27:12 2025
From: j@g@nmn2 @end|ng |rom gm@||@com (Mikael Jagan)
Date: Thu, 24 Jul 2025 08:27:12 -0400
Subject: [R-pkg-devel] [External] compact vignettes
In-Reply-To: <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>
References: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
 <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>
Message-ID: <6f2f1fb2-ef82-4f3b-b8a0-e90a04712067@gmail.com>



On 2025-07-24 7:42 am, Mikael Jagan wrote:
>> Date: Thu, 24 Jul 2025 02:00:32 +0300
>> From: Ivan Krylov<ikrylov at disroot.org>
>>
>> ? Wed, 23 Jul 2025 20:09:26 +0000
>> "Richard M. Heiberger"<rmh at temple.edu> ?????:
>>
>>> When I use
>>> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
>>> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
>>> GS_QUALITY=ebook
>>> echo $R_QPDF $R_GSCMD $GS_QUALITY
>>> R CMD build --compact-vignettes=both microplot
>>>
>>> I get 558950 bytes
>>>
>>> The bytecount for the package went up.
>> Unfortunately, this seems to be very dependent on versions of software
>> in use, including LaTeX and Ghostscript (and fonts?). I can compress
>> your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
>> when I rebuild the package, I can only get down from 276Kb to 156Kb:
>>
>> R -q -s -e '
>>    untar("microplot_1.0-47.tar.gz.orig");
>>    tools::compactPDF(
>>     "microplot/inst/doc",
>>     gs_cmd = "gs", gs_quality = "ebook",
>>     verbose = TRUE
>>    )
>> '
>> qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
>> #{pdf}s = length(paths) = 1
>> - microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0;
>>       ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
>>     compacted ?rmhPoster.pdf? from 372Kb to 96Kb
>>
>>
>> LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
>>    --compact-vignettes=both microplot
>> <...>
>> * creating vignettes ... OK
>> <...>
>> * compacting vignettes and other PDF files
>>       compacted ?rmhPoster.pdf? from 276Kb to 156Kb
>>
>> And 'gs --version' says '10.00.0', which shouldn't be that different
>> from your '10.03.0'!
>>
> 
> I build ghostscript from sources under macOS and upgrade the version
> periodically.  I encountered the same issue last year and stayed at
> 10.02 until they released 10.04, because there was a clear regression
> in 10.03.  I was never able to track down a relevant bug report, but
> I never looked very hard ...
> 

By the way, as mentioned in WRE, you can get ghostscript from a full MacTeX
rather than Homebrew.  MacTex 2025 installs a binary ghostscript 10.04 under
/usr/local/bin.

Mikael

> Mikael
> 
>> -- Best regards, Ivan
>


From week@ @end|ng |rom p|tt@edu  Thu Jul 24 17:10:41 2025
From: week@ @end|ng |rom p|tt@edu (Weeks, Daniel E)
Date: Thu, 24 Jul 2025 15:10:41 +0000
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
Message-ID: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>

Last week I saw that someone requested help because expected e-mails from CRAN regarding an R package submission were not received.  I am afraid I may be in the same boat regarding trying to get our R package Mega2R fixed so it can be in CRAN again, as I received no response regarding my pointing out that the automated rejection of Mega2R is a false positive due to a compiler bug that is beyond my capability to fix.

I submitted Mega2R on July 14, 2025, and received an automated message that

package Mega2R_1.2.0.tar.gz does not pass the incoming checks automatically.

I responded as below that it was a false postive but did not receive any response after that.

--------------

I believe this rejection is a false positive due to a subtle compiler error.

In June, our Mega2R package was rejected due to a Warning that was generated during the CRAN checks. The Warning (which we are stilll seeing) was:

```
Flavor: r-devel-linux-x86_64-debian-special-gcc-san
Check: Post-processing issues found for gcc-san, Result: WARNING
   File: build_vignettes.log
   vendor/sqlite3/sqlite3.c:80239:14: runtime error: load of address
0x7faa31b1fa40 with insufficient space for an object of type 'struct
MemPage *'
```

As I explain below, I think this Warning is not due to any mistake in Mega2R code itself, but rather due to a compiler bug that is rarely encountered only under specific settings.  As such, I hope you will approve releasing Mega2R to CRAN based on the following due diligence investigations and findings:

Note that the Warning is generated by sqlite3 code so I opened a thread about it on the SQLite forum:

https://sqlite.org/forum/forumpost/e1015d1714

The conclusion of one investigation into this concludes that

"Because of the requirements to reproduce the issue, it looks like a compiler issue not a bug in SQLite"

Further checks of Mega2R

The Warning seen on the gcc-san test machine is not
reproducible on the other similar test machines. The warning is not reproducible on the other machines.

Further investigations via rhub

https://github.com/r-hub2/diplomatic-mole-Mega2R/actions

None of the checks on these machines reproduced the Warning seen on the gcc-san test machine:

clang-asan: All CRAN checks passed.

clang-ubsan: All CRAN checks passed.

valgrind: All CRAN checks passed.

m1-san (R-devel): The Warning seen on the CRAN gcc-san test machine was not observed.  However, there was an error involving `seqlevels<-` (which is also observed using R Under development (unstable) (2025-07-11 r88405)).  This is because the development version of `GenomeInfoDb` no longer contains the `seqlevels<-` function, which in the next release
will be moved into the Seqinfo package.  At that time, this Roxygen command

```
#' @importMethodsFrom GenomeInfoDb 'seqlevels<-'
```

will need to be updated.  For now, in the currently released versions of R such as R version 4.5.1 (2025-06-13), this is correct code.
------------------------



Thanks,

-- Dan --

Daniel E. Weeks, Ph.D.
Professor of Human Genetics
Professor of Biostatistics and Health Data Science
Department of Human Genetics
School of Public Health
University of Pittsburgh
Public Health 3119
130 DeSoto Street
Pittsburgh, PA 15261
USA

(412) 624-5388
FAX: (412) 624-3020



	[[alternative HTML version deleted]]


From m@rk@c|ement@ @end|ng |rom k|@@e  Thu Jul 24 17:15:35 2025
From: m@rk@c|ement@ @end|ng |rom k|@@e (Mark Clements)
Date: Thu, 24 Jul 2025 15:15:35 +0000
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a function`
Message-ID: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>

I am looking for guidance on how to debug a CRAN warning for a package (rstpm2). The warning is:

`Warning in formals(fun) : argument is not a function`

I tried debugging this by using:

.onLoad <- function(libname, pkgname) {
    trace("formals", tracer = quote({
        cat(">>> formals called in R CMD check with object of class:", class(fun), "\n")
        print(sys.calls())
    }), print = FALSE)
}

At package installation, this showed that some formals() were called with objects of class derivedDefaultMethod -- however I am not certain _which_ objects cause this issue. (I realise that this suggests an issue with S3 versus S4 classes -- if that helps.) Does anyone have experience with debugging such warnings? Any guidance would be appreciated.

Sincerely, Mark.


N?r du skickar e-post till Karolinska Institutet (KI) inneb?r detta att KI kommer att behandla dina personuppgifter. H?r finns information om hur KI behandlar personuppgifter<https://ki.se/om-ki/integritetsskyddspolicy>.


Sending email to Karolinska Institutet (KI) will result in KI processing your personal data. You can read more about KI?s processing of personal data here<https://staff.ki.se/data-protection-policy>.

From kev|nu@hey @end|ng |rom gm@||@com  Thu Jul 24 18:48:58 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Thu, 24 Jul 2025 09:48:58 -0700
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
In-Reply-To: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
References: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
Message-ID: <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>

https://gcc.gnu.org/bugzilla/show_bug.cgi?id=120837 suggests it's a
compiler bug; hopefully the issue will go away once the version of gcc
used on these CRAN check machines is updated.

On Thu, Jul 24, 2025 at 8:10?AM Weeks, Daniel E <weeks at pitt.edu> wrote:
>
> Last week I saw that someone requested help because expected e-mails from CRAN regarding an R package submission were not received.  I am afraid I may be in the same boat regarding trying to get our R package Mega2R fixed so it can be in CRAN again, as I received no response regarding my pointing out that the automated rejection of Mega2R is a false positive due to a compiler bug that is beyond my capability to fix.
>
> I submitted Mega2R on July 14, 2025, and received an automated message that
>
> package Mega2R_1.2.0.tar.gz does not pass the incoming checks automatically.
>
> I responded as below that it was a false postive but did not receive any response after that.
>
> --------------
>
> I believe this rejection is a false positive due to a subtle compiler error.
>
> In June, our Mega2R package was rejected due to a Warning that was generated during the CRAN checks. The Warning (which we are stilll seeing) was:
>
> ```
> Flavor: r-devel-linux-x86_64-debian-special-gcc-san
> Check: Post-processing issues found for gcc-san, Result: WARNING
>    File: build_vignettes.log
>    vendor/sqlite3/sqlite3.c:80239:14: runtime error: load of address
> 0x7faa31b1fa40 with insufficient space for an object of type 'struct
> MemPage *'
> ```
>
> As I explain below, I think this Warning is not due to any mistake in Mega2R code itself, but rather due to a compiler bug that is rarely encountered only under specific settings.  As such, I hope you will approve releasing Mega2R to CRAN based on the following due diligence investigations and findings:
>
> Note that the Warning is generated by sqlite3 code so I opened a thread about it on the SQLite forum:
>
> https://sqlite.org/forum/forumpost/e1015d1714
>
> The conclusion of one investigation into this concludes that
>
> "Because of the requirements to reproduce the issue, it looks like a compiler issue not a bug in SQLite"
>
> Further checks of Mega2R
>
> The Warning seen on the gcc-san test machine is not
> reproducible on the other similar test machines. The warning is not reproducible on the other machines.
>
> Further investigations via rhub
>
> https://github.com/r-hub2/diplomatic-mole-Mega2R/actions
>
> None of the checks on these machines reproduced the Warning seen on the gcc-san test machine:
>
> clang-asan: All CRAN checks passed.
>
> clang-ubsan: All CRAN checks passed.
>
> valgrind: All CRAN checks passed.
>
> m1-san (R-devel): The Warning seen on the CRAN gcc-san test machine was not observed.  However, there was an error involving `seqlevels<-` (which is also observed using R Under development (unstable) (2025-07-11 r88405)).  This is because the development version of `GenomeInfoDb` no longer contains the `seqlevels<-` function, which in the next release
> will be moved into the Seqinfo package.  At that time, this Roxygen command
>
> ```
> #' @importMethodsFrom GenomeInfoDb 'seqlevels<-'
> ```
>
> will need to be updated.  For now, in the currently released versions of R such as R version 4.5.1 (2025-06-13), this is correct code.
> ------------------------
>
>
>
> Thanks,
>
> -- Dan --
>
> Daniel E. Weeks, Ph.D.
> Professor of Human Genetics
> Professor of Biostatistics and Health Data Science
> Department of Human Genetics
> School of Public Health
> University of Pittsburgh
> Public Health 3119
> 130 DeSoto Street
> Pittsburgh, PA 15261
> USA
>
> (412) 624-5388
> FAX: (412) 624-3020
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 22:07:02 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 23:07:02 +0300
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a
 function`
In-Reply-To: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
References: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
Message-ID: <20250724230702.071cd6a2@Tarkus>

? Thu, 24 Jul 2025 15:15:35 +0000
Mark Clements <mark.clements at ki.se> ?????:

> I am looking for guidance on how to debug a CRAN warning for a
> package (rstpm2). The warning is:
> 
> `Warning in formals(fun) : argument is not a function`

Could you please provide some more information on where you encounter
it and how it may be reproduced? I don't see it mentioned at
<https://cran.r-project.org/web/checks/check_results_rstpm2.html>, nor
I see a recent incoming_pretest failure, but I do see some problems
regarding constants being overwritten at
<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2>.
It's not impossible that the root cause of this warning is the same
(although it's also plausible that it's different).

> At package installation, this showed that some formals() were called
> with objects of class derivedDefaultMethod -- however I am not
> certain _which_ objects cause this issue.

I think this is a red herring: a derivedDefaultMethod is a function and
doesn't cause this warning by itself:

getClass('derivedDefaultMethod') |> new(\(foo=bar) baz) |> formals()
# $foo
# bar

> Does anyone have experience with debugging such warnings?

If you can reproduce the warning, try doing so with options(warn = 2,
error = recover) set.

-- 
Best regards,
Ivan


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 22:27:57 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 23:27:57 +0300
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
In-Reply-To: <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>
References: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
 <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>
Message-ID: <20250724232757.64e495e8@Tarkus>

? Thu, 24 Jul 2025 09:48:58 -0700
Kevin Ushey <kevinushey at gmail.com> ?????:

> hopefully the issue will go away once the version of gcc
> used on these CRAN check machines is updated

Or when SQLite 3.51.0 comes out, containing the workaround for the
compiler bug, and RSQLite is released with the updated version of
SQLite.

At the very least, the RSQLite maintainer is aware of the problem:
https://github.com/r-dbi/RSQLite/issues/564#issuecomment-3019228955

-- 
Best regards,
Ivan


From m@rk@c|ement@ @end|ng |rom k|@@e  Fri Jul 25 16:39:36 2025
From: m@rk@c|ement@ @end|ng |rom k|@@e (Mark Clements)
Date: Fri, 25 Jul 2025 14:39:36 +0000
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a
 function`
In-Reply-To: <20250724230702.071cd6a2@Tarkus>
References: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
 <20250724230702.071cd6a2@Tarkus>
Message-ID: <GV3P280MB00011938B5D94102422F1C9FF059A@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>

Ivan: thank you for your reply.

I have now resolved this issue. I had an error with specifying an S4 implementation and its documentation. For debugging, I: (a) checked that a previous package version worked with a recent R development version; (b) used tools::codoc() to check the documentation (see the test-codoc task in $(RSRC)/tests/Makefile.common), using Ivan's suggested options() to recover from a warning; and (c) checked whether the S4 class had the available method.

Sincerely, Mark.
________________________________
From: Ivan Krylov <ikrylov at disroot.org>
Sent: 24 July 2025 22:07
To: Mark Clements <mark.clements at ki.se>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] `Warning in formals(fun) : argument is not a function`

? Thu, 24 Jul 2025 15:15:35 +0000
Mark Clements <mark.clements at ki.se> ?????:

> I am looking for guidance on how to debug a CRAN warning for a
> package (rstpm2). The warning is:
>
> `Warning in formals(fun) : argument is not a function`

Could you please provide some more information on where you encounter
it and how it may be reproduced? I don't see it mentioned at
<https://cran.r-project.org/web/checks/check_results_rstpm2.html<https://cran.r-project.org/web/checks/check_results_rstpm2.html>>, nor
I see a recent incoming_pretest failure, but I do see some problems
regarding constants being overwritten at
<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2>>.
It's not impossible that the root cause of this warning is the same
(although it's also plausible that it's different).

> At package installation, this showed that some formals() were called
> with objects of class derivedDefaultMethod -- however I am not
> certain _which_ objects cause this issue.

I think this is a red herring: a derivedDefaultMethod is a function and
doesn't cause this warning by itself:

getClass('derivedDefaultMethod') |> new(\(foo=bar) baz) |> formals()
# $foo
# bar

> Does anyone have experience with debugging such warnings?

If you can reproduce the warning, try doing so with options(warn = 2,
error = recover) set.

--
Best regards,
Ivan



Nar du skickar e-post till Karolinska Institutet (KI) innebar detta att KI kommer att behandla dina personuppgifter. Har finns information om hur KI behandlar personuppgifter<https://ki.se/om-ki/integritetsskyddspolicy>.


Sending email to Karolinska Institutet (KI) will result in KI processing your personal data. You can read more about KI's processing of personal data here<https://staff.ki.se/data-protection-policy>.

	[[alternative HTML version deleted]]


From @ndrew@john@on @end|ng |rom @rjohn@on@u@com  Sun Jul 27 09:57:39 2025
From: @ndrew@john@on @end|ng |rom @rjohn@on@u@com (Andrew Johnson)
Date: Sun, 27 Jul 2025 07:57:39 +0000
Subject: [R-pkg-devel] NOTE: Installation took CPU time 3.5 times elapsed
 time
Message-ID: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>

Hi All,

When submitting a package to CRAN, I?m seeing a note for the installation CPU time being greater than the elapsed time. Normally I?d assume this would be due to some configuration running the compilation in parallel, but I haven?t set this in my package at all. Is this something that anyone has seen before and would know what to change?

Check result is here: https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00check.log

And package source is here: https://github.com/andrjohns/boostmath

Thanks!
Andrew

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Jul 28 13:45:06 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 28 Jul 2025 06:45:06 -0500
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <26759.25282.957842.902833@rob.eddelbuettel.com>


On 27 July 2025 at 07:57, Andrew Johnson wrote:
| When submitting a package to CRAN, I?m seeing a note for the installation CPU time being greater than the elapsed time. Normally I?d assume this would be due to some configuration running the compilation in parallel, but I haven?t set this in my package at all. Is this something that anyone has seen before and would know what to change?
| 
| Check result is here: https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00check.log

[ Aside: Interestingly that Windows check does not warn about excessive test time,
  whereas it does on my machine. I presume you opted to skip tests as CRAN to
  keep within their limit? ]

For tests and examples we know we are asked to over options(Ncpus) and alike;
I am not aware we can override a MAKEFLAGS="-j SOMELARGENUMBER" if it is set
so I am a little stunned.

The only thing that is different in your package is the use of UseLTO you now
added in this release.  If that this new in 1.0.1, maybe it is the difference
maker?  [ And I just validated it: removing that last line from DESCRIPTION
removes the compilation time NOTE. ] So that seems to be something you may
need to sort out with CRAN and their setup.
 
| And package source is here: https://github.com/andrjohns/boostmath

I sent you a courtesy PR as I noticed that we may be able to improve the
link(s) to Boost documentation.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Tue Jul 29 12:33:17 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 29 Jul 2025 13:33:17 +0300
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <26759.25282.957842.902833@rob.eddelbuettel.com>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
Message-ID: <20250729133317.7af0791c@arachnoid>

Dear Dirk,

On Mon, 28 Jul 2025 06:45:06 -0500
Dirk Eddelbuettel <edd at debian.org> wrote:

> And I just validated it: removing that last line from DESCRIPTION
> removes the compilation time NOTE.

This must be the culprit. The 00install.out file [1] shows -flto=8 being
used, which GCC documentation [2] describes as "use 8 threads for LTO":

>> If you specify the optional n [in -flto=n], the optimization and
>> code generation done at link time is executed in parallel using n
>> parallel jobs by utilizing an installed make program. The
>> environment variable MAKE may be used to override the program used. 

I think this was set in the Makeconf on the machine running the
"gcc-san" special checks; I don't see anything in the package that
would set 8 threads in particular. R itself, when configured with
--enable-lto, only sets -flto, not -flto=8.

-- 
Best regards,
Ivan

[1]
https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00install.out

[2]
https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-flto


From edd @end|ng |rom deb|@n@org  Tue Jul 29 14:25:46 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 29 Jul 2025 07:25:46 -0500
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <20250729133317.7af0791c@arachnoid>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
 <20250729133317.7af0791c@arachnoid>
Message-ID: <26760.48586.303951.649894@rob.eddelbuettel.com>


Hi Ivan,

On 29 July 2025 at 13:33, Ivan Krylov via R-package-devel wrote:
| On Mon, 28 Jul 2025 06:45:06 -0500
| Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| > And I just validated it: removing that last line from DESCRIPTION
| > removes the compilation time NOTE.
| 
| This must be the culprit. The 00install.out file [1] shows -flto=8 being
| used, which GCC documentation [2] describes as "use 8 threads for LTO":
| 
| >> If you specify the optional n [in -flto=n], the optimization and
| >> code generation done at link time is executed in parallel using n
| >> parallel jobs by utilizing an installed make program. The
| >> environment variable MAKE may be used to override the program used. 
| 
| I think this was set in the Makeconf on the machine running the
| "gcc-san" special checks; I don't see anything in the package that
| would set 8 threads in particular. R itself, when configured with
| --enable-lto, only sets -flto, not -flto=8.

That's good sleuthing, as usual. But note that my machine has no -flto=$N for
some N but rather '-flto=auto' which also results in the NOTE.

So an extra check may be needed to not issue the nag if LTO is used?

Dirk

| -- 
| Best regards,
| Ivan
| 
| [1]
| https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00install.out
| 
| [2]
| https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-flto
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Wed Jul 30 23:48:05 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 31 Jul 2025 00:48:05 +0300
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <26760.48586.303951.649894@rob.eddelbuettel.com>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
 <20250729133317.7af0791c@arachnoid>
 <26760.48586.303951.649894@rob.eddelbuettel.com>
Message-ID: <20250731004805.6f55a704@Tarkus>

On Tue, 29 Jul 2025 07:25:46 -0500
Dirk Eddelbuettel <edd at debian.org> wrote:

> But note that my machine has no -flto=$N for
> some N but rather '-flto=auto' which also results in the NOTE.
> 
> So an extra check may be needed to not issue the nag if LTO is used?

You're right, -flto=auto chooses the number of LTO processes
automatically if the Make jobserver is not available. Rven if I set
MAKEFLAGS=-j2 before running R CMD INSTALL, that information is not
propagated to g++, so it runs on all logical processors.

This could be the only way to make GCC use noticeably more than one
process by itself, I couldn't find anything else right now.

As a short-term solution, the "specialChecks" system operated by Prof.
Kurt Hornik can switch to -flto=2. For the more distant future, making
this message "INFO" instead of "NOTE" or possibly raising the limit
when LTO is used could make sense.

-- 
Best regards,
Ivan


From greg @end|ng |rom ||rm@n@y@h@com  Fri Aug  1 00:17:00 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Fri, 1 Aug 2025 08:17:00 +1000
Subject: [R-pkg-devel] unable to verify current time
Message-ID: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>

I noticed recently that check --as-cran was hanging and then emitting a
message about not being able to verify the current time.  It seems that the
CRAN check code is using some website to get the current clock time and
that that site is currently down.  This strikes me as an odd approach to
getting the current time.  Why was that approach taken when NTP is
available on all mainstream OSs?   Is there something unusual about the
CRAN environment?

Greg

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Aug  1 00:41:24 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 1 Aug 2025 10:41:24 +1200
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
Message-ID: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>

1) R has no native NTP client
2) outside NTP access is very often blocked on local networks (and local NTP relay requires configuration for which there is no standard)
3) it is overkill as we don?t need microsecond accuracy so a single HTTP(s) request is much easier


> On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> 
> I noticed recently that check --as-cran was hanging and then emitting a message about not being able to verify the current time.  It seems that the CRAN check code is using some website to get the current clock time and that that site is currently down.  This strikes me as an odd approach to getting the current time.  Why was that approach taken when NTP is available on all mainstream OSs?   Is there something unusual about the CRAN environment?
> 
> Greg
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jon@@ko|en @end|ng |rom gm@||@com  Thu Jul 31 11:09:39 2025
From: jon@@ko|en @end|ng |rom gm@||@com (Jon Olav Skoien)
Date: Thu, 31 Jul 2025 11:09:39 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
Message-ID: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>

One of my packages failed the noSuggests test, and needs to be
updated. Fair enough, a suggested package was used unconditionally
both in an example and in a test. From what I understood, a solution
is to wrap this part of the code inside
if (require("suggestedPackage")) {useSuggestedPackage}
However, it still fails the noSuggests test, this time because the
output does not match the test.Rout.save-file. This is also clear, as
some of the code is not executed, and some output is missing.

How do I get around this?
I could use ## IGNORE_RDIFF_BEGIN and ## IGNORE_RDIFF_END before and
after the if (require())  clause, but then this part would not be
tested when the suggested package is available either. I don't like
this solution, as it means the interaction between the two packages
will not be checked.

Am I missing something? Is there a different way of conditionally
using the suggested package? Or do I have to use the IGNORE_RDIFF
method?

Thanks,
Jon


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Fri Aug  1 15:56:42 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Fri, 1 Aug 2025 15:56:42 +0200
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
 <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
Message-ID: <CAN+W6_sYMEUrNBQjMqzy_MwrDopgdbJFX9T7fsF27nYC0E9ytw@mail.gmail.com>

Greg,

If the problem is in your local checks you can
add _R_CHECK_SYSTEM_CLOCK_=FALSE to your .Renviron to omit that check.
See R internals (which documents CRAN's default too) [1].

Best,

Llu?s


[1]:
https://cran.r-project.org/doc/manuals/r-devel/R-ints.html#index-_005fR_005fCHECK_005fSYSTEM_005fCLOCK_005f

On Fri, 1 Aug 2025 at 00:41, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> 1) R has no native NTP client
> 2) outside NTP access is very often blocked on local networks (and local
> NTP relay requires configuration for which there is no standard)
> 3) it is overkill as we don?t need microsecond accuracy so a single
> HTTP(s) request is much easier
>
>
> > On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> >
> > I noticed recently that check --as-cran was hanging and then emitting a
> message about not being able to verify the current time.  It seems that the
> CRAN check code is using some website to get the current clock time and
> that that site is currently down.  This strikes me as an odd approach to
> getting the current time.  Why was that approach taken when NTP is
> available on all mainstream OSs?   Is there something unusual about the
> CRAN environment?
> >
> > Greg
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Fri Aug  1 16:01:51 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 1 Aug 2025 17:01:51 +0300
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <20250801170151.1080e1d1@arachnoid>

? Thu, 31 Jul 2025 11:09:39 +0200
Jon Olav Skoien <jon.skoien at gmail.com> ?????:

> From what I understood, a solution is to wrap this part of the code
> inside if (require("suggestedPackage")) {useSuggestedPackage}

Correct! (requireNamespace(...) is also a good option if you don't
intend to use the package directly and are instead testing your
package's internal use of its optional dependency.)

> However, it still fails the noSuggests test, this time because the
> output does not match the test.Rout.save-file. This is also clear, as
> some of the code is not executed, and some output is missing.

There may be no good solution for "reference output" tests when some of
their dependencies are optional. Without bringing in a test framework,
I've only seen kludges, such as the test printing reference output when
the optional dependency is missing:

https://github.com/Rdatatable/data.table/blob/8039a230b0ebbcc8ca9ea86e84d7c378e00b9d51/tests/knitr.R#L2-L3

I wouldn't call it a beautiful solution, but it does work.

-- 
Best regards,
Ivan


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Fri Aug  1 16:18:51 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Fri, 1 Aug 2025 16:18:51 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <CAN+W6_toAD=1bVrqJwMKLeR5diPQfnj0tECm-MhUjrnpRrnDsg@mail.gmail.com>

To check the existence of a suggested package it is recommended to use
requireNamespace("suggested", quiet = TRUE). See the solution for
examples on the CRAN cookbook [1].

On tests, it depends on the approach you use.
It seems that you don't use any testing package for it (tinytest,
testthat, ...).
I think you could rely on the actual objects and not compare with a
saved output of tests.
Instead of:

> obj
[1] "test1"

Use something like in a plain R file:
stopifnot(identical(obj, "test1"))

This is how it is done on base R itself that checks if MASS is
installed and performs some checks conditionally.
See example on a mirror: [2].
Hope this helps,

Llu?s

[1]: https://contributor.r-project.org/cran-cookbook/general_issues.html
[2]: https://github.com/r-devel/r-svn/blob/fb206acc9f17c30d91c528efca9a368c69d5015b/src/library/stats/tests/ig_glm.R


On Fri, 1 Aug 2025 at 15:23, Jon Olav Skoien <jon.skoien at gmail.com> wrote:
>
> One of my packages failed the noSuggests test, and needs to be
> updated. Fair enough, a suggested package was used unconditionally
> both in an example and in a test. From what I understood, a solution
> is to wrap this part of the code inside
> if (require("suggestedPackage")) {useSuggestedPackage}
> However, it still fails the noSuggests test, this time because the
> output does not match the test.Rout.save-file. This is also clear, as
> some of the code is not executed, and some output is missing.
>
> How do I get around this?
> I could use ## IGNORE_RDIFF_BEGIN and ## IGNORE_RDIFF_END before and
> after the if (require())  clause, but then this part would not be
> tested when the suggested package is available either. I don't like
> this solution, as it means the interaction between the two packages
> will not be checked.
>
> Am I missing something? Is there a different way of conditionally
> using the suggested package? Or do I have to use the IGNORE_RDIFF
> method?
>
> Thanks,
> Jon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@meyer @end|ng |rom |@u@de  Fri Aug  1 16:20:04 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 1 Aug 2025 16:20:04 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>

Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
> Is there a different way of conditionally
> using the suggested package? Or do I have to use the IGNORE_RDIFF
> method?

To use *reference output* for optional tests, you could move these tests 
to a dedicated script with a corresponding .Rout.save file, put the 
files in a tests/ subdirectory, and use an .Rin file to include them 
only if the suggested package is available. I implemented a similar 
approach in the 'nlme' package to run extra tests with reference output 
conditionally on an environment variable, see 
<https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for 
inspiration.

-- 
Sebastian Meyer


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Aug  1 16:39:42 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 1 Aug 2025 07:39:42 -0700
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
 <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
Message-ID: <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>

I would emphasize/paraphrase Ivan's point -- using goldens (.Rout.save) for
such tests is quite a headache. We do so for a very limited number of tests
in {data.table} (something like 10 tests of over 10,000).

You could instead change the tests of Suggests behavior to be based on
expectations, be that a framework like {testthat}/{RUnit}/{assertthat} or
just the built-in tooling like stopifnot(), where you just quit/skip the
checks when Suggests are unavailable.

Of course if you have a strong affinity for golden tests you can just split
things into multiple test files. If it is a huge pain to disentangle which
tests rely on Suggests behavior, that is a decent sign to me that maybe
that package is not Suggests after all.

Mike C

On Fri, Aug 1, 2025, 7:29?AM Sebastian Meyer <seb.meyer at fau.de> wrote:

> Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
> > Is there a different way of conditionally
> > using the suggested package? Or do I have to use the IGNORE_RDIFF
> > method?
>
> To use *reference output* for optional tests, you could move these tests
> to a dedicated script with a corresponding .Rout.save file, put the
> files in a tests/ subdirectory, and use an .Rin file to include them
> only if the suggested package is available. I implemented a similar
> approach in the 'nlme' package to run extra tests with reference output
> conditionally on an environment variable, see
> <https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for
> inspiration.
>
> --
> Sebastian Meyer
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jon@@ko|en @end|ng |rom gm@||@com  Fri Aug  1 17:48:25 2025
From: jon@@ko|en @end|ng |rom gm@||@com (Jon Olav Skoien)
Date: Fri, 1 Aug 2025 17:48:25 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
 <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
 <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>
Message-ID: <CAOh2hrEx4NBw1-MpevCXmj65anq8EMSiDJPVx9f7y6asMNYrgA@mail.gmail.com>

Thank you for all answers!
I agree that adopting a testing framework would be a better approach
for future packages. However, as this particular package is not under
active development, I was particularly looking for solutions that
required less modifications of the current code.

And from the answers and the code in the MASS-example, it seems the
most straightforward fix in my particular case is to replace the print
statements with stopifnot(all.equal(...)). The suggested package
should in my case not produce different output than the original
package, it just offers a different way of computing the same result
when the two of them interact correctly. While I will not use the
.rout.save modification examples here, they could be useful for other
scenarios and for others who encounter this thread in the future.

Thanks and best wishes,
Jon

On Fri, 1 Aug 2025 at 16:39, Michael Chirico <michaelchirico4 at gmail.com> wrote:
>
> I would emphasize/paraphrase Ivan's point -- using goldens (.Rout.save) for such tests is quite a headache. We do so for a very limited number of tests in {data.table} (something like 10 tests of over 10,000).
>
> You could instead change the tests of Suggests behavior to be based on expectations, be that a framework like {testthat}/{RUnit}/{assertthat} or just the built-in tooling like stopifnot(), where you just quit/skip the checks when Suggests are unavailable.
>
> Of course if you have a strong affinity for golden tests you can just split things into multiple test files. If it is a huge pain to disentangle which tests rely on Suggests behavior, that is a decent sign to me that maybe that package is not Suggests after all.
>
> Mike C
>
> On Fri, Aug 1, 2025, 7:29?AM Sebastian Meyer <seb.meyer at fau.de> wrote:
>>
>> Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
>> > Is there a different way of conditionally
>> > using the suggested package? Or do I have to use the IGNORE_RDIFF
>> > method?
>>
>> To use *reference output* for optional tests, you could move these tests
>> to a dedicated script with a corresponding .Rout.save file, put the
>> files in a tests/ subdirectory, and use an .Rin file to include them
>> only if the suggested package is available. I implemented a similar
>> approach in the 'nlme' package to run extra tests with reference output
>> conditionally on an environment variable, see
>> <https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for
>> inspiration.
>>
>> --
>> Sebastian Meyer
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Aug  6 17:56:07 2025
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 6 Aug 2025 16:56:07 +0100
Subject: [R-pkg-devel] My package CECPfuns on github has branches main and
 gh-pages badly out of synch
Message-ID: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>

Sorry for a very trivial issue at one edge of R package management: use 
of github.

My package (https://github.com/cpsyctc/CECPfuns) is mostly very simple 
as I am entirely self-taught as a statistics user and R programmer and 
as I am ageing! ? (I was a fairly good psychiatrist and psychotherapist 
and still am a pretty productive researcher I think!)

The package is mostly aimed at people like me who find R amazingly 
helpful but who sometimes struggle with the documentation, warnings and 
error messages. Hence a lot of it is trivial but is trying to wrap 
things up to give end users reasonable help, the odd vignette (not 
enough currently) and good input sanity checking and non-geek worded 
warnings and errors.

OK enough of the apologies.? I have always found git and github in the 
"dark arts" side of things but I thought that pushing my commits (from 
within a package worked on locally in Rstudio) was working for updating 
the package and mostly I thought the evidence was that it was.? Clearly 
I wasn't checking well enough.

At some point I clearly created a gh-pages branch and I think that was 
to get github to create the user friendly html page(s) about the 
package.? Reading the web now and trying to separate up to date from old 
advice from out of date advice I think this is no longer necessary and I 
could get the html from the main branch and ditch the gh-pages branch.

However, as the subject line says, I now see that the two branches are 
badly out of synch. Github says that main is my default branch and 
gh-pages an active branch and at the moment both say they were last 
updated six hours ago which was when I last pushed changes up.? However, 
gh-pages says its behind:ahead count is 100:31 which sounds nasty and I 
don't think my use of pkgdown and things in /doc and /docs are updating 
correctly.

Having scoured the web for help on this I am rattled and reaching out 
for hel. As I say above, I think using gh-pages is no longer necessary 
and I would like to synchronise the two branches if that is possible 
then delete the gh-pages branch and then get my courage up and try to 
get back to understanding how best to document things with github pages 
and with pkgdown.

I know this is very small beer against the fascinating things I read 
here but I hope someone can look at my mess and point me to safe ways 
forward.

Thanks in advance and more generally, thanks for the list which is, 
though often way beyond what I need, always educational for me.

Chris

-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador
CORE site: http://www.coresystemtrust.org.uk 
<https://www.coresystemtrust.org.uk/>
Other work web site: https://www.psyctc.org/psyctc/
Personal site: https://www.psyctc.org/pelerinage2016/


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Wed Aug  6 18:00:56 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Wed, 6 Aug 2025 09:00:56 -0700
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
Message-ID: <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>

Hey Chris,

Have a look at the actual list of commits in your gh-pages vs. main
branches, I suspect you'll spot what's going on pretty quickly :)

https://github.com/cpsyctc/CECPfuns/commits/gh-pages/

vs

https://github.com/cpsyctc/CECPfuns/commits/main/

Mike C

On Wed, Aug 6, 2025 at 8:56?AM Chris Evans <chrishold at psyctc.org> wrote:

> Sorry for a very trivial issue at one edge of R package management: use
> of github.
>
> My package (https://github.com/cpsyctc/CECPfuns) is mostly very simple
> as I am entirely self-taught as a statistics user and R programmer and
> as I am ageing!   (I was a fairly good psychiatrist and psychotherapist
> and still am a pretty productive researcher I think!)
>
> The package is mostly aimed at people like me who find R amazingly
> helpful but who sometimes struggle with the documentation, warnings and
> error messages. Hence a lot of it is trivial but is trying to wrap
> things up to give end users reasonable help, the odd vignette (not
> enough currently) and good input sanity checking and non-geek worded
> warnings and errors.
>
> OK enough of the apologies.  I have always found git and github in the
> "dark arts" side of things but I thought that pushing my commits (from
> within a package worked on locally in Rstudio) was working for updating
> the package and mostly I thought the evidence was that it was.  Clearly
> I wasn't checking well enough.
>
> At some point I clearly created a gh-pages branch and I think that was
> to get github to create the user friendly html page(s) about the
> package.  Reading the web now and trying to separate up to date from old
> advice from out of date advice I think this is no longer necessary and I
> could get the html from the main branch and ditch the gh-pages branch.
>
> However, as the subject line says, I now see that the two branches are
> badly out of synch. Github says that main is my default branch and
> gh-pages an active branch and at the moment both say they were last
> updated six hours ago which was when I last pushed changes up.  However,
> gh-pages says its behind:ahead count is 100:31 which sounds nasty and I
> don't think my use of pkgdown and things in /doc and /docs are updating
> correctly.
>
> Having scoured the web for help on this I am rattled and reaching out
> for hel. As I say above, I think using gh-pages is no longer necessary
> and I would like to synchronise the two branches if that is possible
> then delete the gh-pages branch and then get my courage up and try to
> get back to understanding how best to document things with github pages
> and with pkgdown.
>
> I know this is very small beer against the fascinating things I read
> here but I hope someone can look at my mess and point me to safe ways
> forward.
>
> Thanks in advance and more generally, thanks for the list which is,
> though often way beyond what I need, always educational for me.
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador
> CORE site: http://www.coresystemtrust.org.uk
> <https://www.coresystemtrust.org.uk/>
> Other work web site: https://www.psyctc.org/psyctc/
> Personal site: https://www.psyctc.org/pelerinage2016/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Aug  6 22:13:00 2025
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 6 Aug 2025 21:13:00 +0100
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
 <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
Message-ID: <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>

Thanks very much.

Ouch, well clearly it would have been a help had I known to do that.? 
Got it and you are correct: whipping long quiescent neurons into action 
finally sorted this out.? It's edge or corner case stuff here I guess 
but may be useful to have in the archives for someone else some day.

What I had forgotten was that I had used the pkgdown package to invoke 
the gh-pages branch (done automatically I think which contributed to my 
forgetting it). That, with a CNAME entry in my DNS four years back, maps 
cpsyctc.github.io to https://cecpfuns.psyctc.org/ (the URL is given to 
github via the first line of _pkgdown.yml). That means that github then 
magically does the pkgdown thing updating the gh-pages branch and that 
is then accessible at https://cecpfuns.psyctc.org/.? As far as I can 
see, the ahead:behind count for the gh-pages branch in github is pretty 
meaningless here.? Someone please correct me if I am wrong about that.

What threw me off was another bit of forgetting: though I was updating 
the package version number in NEWS.md, I was forgetting to update it in 
DESCRIPTION so when I looked at https://cecpfuns.psyctc.org/ I saw the 
old version number and thought the process wasn't working.

Solved!? I have added some notes, largely to myself to make up for 
crumbling memory, to my Rblog (https://www.psyctc.org/Rblog/) at
https://www.psyctc.org/Rblog/posts/2021-02-10-making-my-first-usable-package/#using-github-pages-and-pkgdown-to-create-a-page-about-the-package

Apologies for bandwidth and thanks again for the list,

Chris


On 06/08/2025 17:00, Michael Chirico wrote:
> Hey Chris,
>
> Have a look at the actual list of commits in your gh-pages vs. main 
> branches, I suspect you'll spot what's going on pretty quickly :)
>
> https://github.com/cpsyctc/CECPfuns/commits/gh-pages/
>
> vs
>
> https://github.com/cpsyctc/CECPfuns/commits/main/
>
> Mike C
>
> On Wed, Aug 6, 2025 at 8:56?AM Chris Evans <chrishold at psyctc.org> wrote:
>
>     Sorry for a very trivial issue at one edge of R package
>     management: use
>     of github.
>
>     My package (https://github.com/cpsyctc/CECPfuns) is mostly very
>     simple
>     as I am entirely self-taught as a statistics user and R programmer
>     and
>     as I am ageing! ? (I was a fairly good psychiatrist and
>     psychotherapist
>     and still am a pretty productive researcher I think!)
>
>     The package is mostly aimed at people like me who find R amazingly
>     helpful but who sometimes struggle with the documentation,
>     warnings and
>     error messages. Hence a lot of it is trivial but is trying to wrap
>     things up to give end users reasonable help, the odd vignette (not
>     enough currently) and good input sanity checking and non-geek worded
>     warnings and errors.
>
>     OK enough of the apologies.? I have always found git and github in
>     the
>     "dark arts" side of things but I thought that pushing my commits
>     (from
>     within a package worked on locally in Rstudio) was working for
>     updating
>     the package and mostly I thought the evidence was that it was.?
>     Clearly
>     I wasn't checking well enough.
>
>     At some point I clearly created a gh-pages branch and I think that
>     was
>     to get github to create the user friendly html page(s) about the
>     package.? Reading the web now and trying to separate up to date
>     from old
>     advice from out of date advice I think this is no longer necessary
>     and I
>     could get the html from the main branch and ditch the gh-pages branch.
>
>     However, as the subject line says, I now see that the two branches
>     are
>     badly out of synch. Github says that main is my default branch and
>     gh-pages an active branch and at the moment both say they were last
>     updated six hours ago which was when I last pushed changes up.?
>     However,
>     gh-pages says its behind:ahead count is 100:31 which sounds nasty
>     and I
>     don't think my use of pkgdown and things in /doc and /docs are
>     updating
>     correctly.
>
>     Having scoured the web for help on this I am rattled and reaching out
>     for hel. As I say above, I think using gh-pages is no longer
>     necessary
>     and I would like to synchronise the two branches if that is possible
>     then delete the gh-pages branch and then get my courage up and try to
>     get back to understanding how best to document things with github
>     pages
>     and with pkgdown.
>
>     I know this is very small beer against the fascinating things I read
>     here but I hope someone can look at my mess and point me to safe ways
>     forward.
>
>     Thanks in advance and more generally, thanks for the list which is,
>     though often way beyond what I need, always educational for me.
>
>     Chris
>
>     -- 
>     Chris Evans (he/him)
>     Visiting Professor, UDLA, Quito, Ecuador
>     CORE site: http://www.coresystemtrust.org.uk
>     <https://www.coresystemtrust.org.uk/>
>     Other work web site: https://www.psyctc.org/psyctc/
>     Personal site: https://www.psyctc.org/pelerinage2016/
>
>     ______________________________________________
>     R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador
CORE site: http://www.coresystemtrust.org.uk 
<https://www.coresystemtrust.org.uk/>
Other work web site: https://www.psyctc.org/psyctc/
Personal site: https://www.psyctc.org/pelerinage2016/
<https://ombook.psyctc.org/book>


From edd @end|ng |rom deb|@n@org  Wed Aug  6 22:40:50 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 6 Aug 2025 15:40:50 -0500
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
 <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
 <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>
Message-ID: <26771.48594.17815.193489@rob.eddelbuettel.com>


On 6 August 2025 at 21:13, Chris Evans wrote:
| see, the ahead:behind count for the gh-pages branch in github is pretty 
| meaningless here.? Someone please correct me if I am wrong about that.

Correct.

An aside: the gh-pages branch used to be the only way to publish at GitHub.
But for a few years now one can also use a directory (or even the root dir
and everything below it) in a repo. I prefer that and often use docs/.

It avoids the dance between branches. Other people prefer the seperation into
another branch. As always, each to their own, and good to have choices.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From greg @end|ng |rom ||rm@n@y@h@com  Thu Aug  7 06:29:02 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Thu, 7 Aug 2025 14:29:02 +1000
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
 <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
Message-ID: <CAAS8PAKhB=75iyfyBdTYFMPvYMSSy811hQQ0Fof0==f3-wVxnQ@mail.gmail.com>

Simon,
I have been down a bit of a rabbit hole with this.  There is an interesting
APNIC blog entry related to this that tries to quantify the distribution of
clock skews.

1. I have a very simple R NTP client.  It does not implement the server
clock time adjustment process bits of the protocol, but at a point in time
its able to detect and discard unsynchronised servers and outlier
responses. You can have it if you want, but I think its the answer to the
wrong question.

3. The webservers that the check code references go down periodically, one
is unresponsive from here this afternoon.  I agree you don't need
microseconds or even tens of milliseconds, the check code allows for five
minutes of drift which is consistent with Kerberos tolerance of time
mismatches, but you do need "up" and "up" is not reliably there.  The www.
or cran.r-project.org servers respond to a GET with a standard HTTP Date
header that contains that server's current idea of what the time is (you
can see it using curlGetHeaders("http://cran.r-project.org"), the timezone
is required by the HTTP standard to always be GMT/UTC) and I assume the
core team have some level of control over those servers' configurations and
should be easily able to ensure time synchronisation with some sufficiently
reliable time source if that time sync is not already in place.  I suspect
that cran.r-project.org  is more reliable than the websites you are using
as time sources.

Wouldn't it be possible to use an r-project server, as described above, as
a time source?


Greg

On Fri, 1 Aug 2025 at 08:41, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> 1) R has no native NTP client
> 2) outside NTP access is very often blocked on local networks (and local
> NTP relay requires configuration for which there is no standard)
> 3) it is overkill as we don?t need microsecond accuracy so a single
> HTTP(s) request is much easier
>
>
> > On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> >
> > I noticed recently that check --as-cran was hanging and then emitting a
> message about not being able to verify the current time.  It seems that the
> CRAN check code is using some website to get the current clock time and
> that that site is currently down.  This strikes me as an odd approach to
> getting the current time.  Why was that approach taken when NTP is
> available on all mainstream OSs?   Is there something unusual about the
> CRAN environment?
> >
> > Greg
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 06:38:17 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Sun, 10 Aug 2025 21:38:17 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
Message-ID: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>

Hey everyone who is more familiar with R-devel and docker.

I am trying to test the new version of my package (maxLik) on R-devel,
using the docker container.  I am using rocker/r-devel as the base.  Note
that R-devel is called "RD" in the image.  I am copying in my package
sources and a few scripts, and run "RD CMD build" and "RD CMD check".
However, the latter fails with complaints about missing packages that are
installed and accessible when I run RD from command line.

Here are a few results:

* After a successful build inside the container, I run check:
root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
* using log directory ?//maxLik.Rcheck?
* using R Under development (unstable) (2025-08-11 r88561)
* using platform: x86_64-pc-linux-gnu
* R was compiled by
    gcc (Debian 14.2.0-19) 14.2.0
    GNU Fortran (Debian 14.2.0-19) 14.2.0
* running under: Debian GNU/Linux trixie/sid
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?maxLik/DESCRIPTION? ... OK
* this is package ?maxLik? version ?1.6-3?
* checking CRAN incoming feasibility ... [6s/35s] OK
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?maxLik? can be installed ... ERROR
Installation failed.
See ?//maxLik.Rcheck/00install.out? for details.
* DONE

Status: 1 ERROR
See
  ?//maxLik.Rcheck/00check.log?
for details.

* Take a look at the log:

root at f4024e015396:/# cat maxLik.Rcheck/00install.out
* installing *source* package ?maxLik? ...
** this is package ?maxLik? version ?1.6-3?
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
:
  there is no package called ?lattice?
Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
doWithOneRestart
Execution halted
ERROR: lazy loading failed for package ?maxLik?
* removing ?/maxLik.Rcheck/maxLik?

Apparently 'lattice' is missing???

* But it is there and I can load it with no errors:

root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
[1] ?0.22.7?
root at f4024e015396:/# RDscript -e "library(lattice)"

Formerly I got similar missing package messages for other packages, I have
also tried to manually overwrote the R_LIB_USR environment variable (that
resulted in another error a bit further down in the line), and to install
my own package into different locations.  So far everything seems to lead
to the same problem.

Note that it works if I run it inside the container using the stable R ("R"
instead of "RD").  Currently it is based on r88561 (2025-08-11) version of
R-devel as you can see above.

For reference, here is the Dockerfile:

# -*- dockerfile-mode -*-
FROM rocker/r-devel
RUN apt-get install -y texlive-science
ENV INSIDE_DOCKER=true
COPY packages.R .  # install script for necessary packages
RUN RDscript packages.R  # install dependencies/suggestions etc
COPY pkg ./pkg  # copy the maxlik package source
COPY build-check .  # building/checking script
CMD ["bash"]


Any ideas?

Ott

	[[alternative HTML version deleted]]


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 08:04:33 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Sun, 10 Aug 2025 23:04:33 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
Message-ID: <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>

Thanks.

I thought this was the issue, and even manually deleted /usr/bin/R and
/usr/bin/Rscript, but the problem persisted.  But now I am thinking that
/usr/bin/R may not be the relevant executables, the development version may
pull up something directly from /usr/lib/R/bin instead (the devel is
installed in /usr/local/lib/R ).

Will try!

Ott

On Sun, Aug 10, 2025 at 9:57?PM Tim Taylor <tim.taylor at hiddenelephants.co.uk>
wrote:

> You may be hitting the following issue in tinytest:
> https://github.com/markvanderloo/tinytest/issues/135
>
> There is a linked PR you could try that hopefully fixes the problem:
> https://github.com/markvanderloo/tinytest/pull/134
>
> Tim
>
> On 11 Aug 2025, at 05:39, Ott Toomet <otoomet at gmail.com> wrote:
>
> ?Hey everyone who is more familiar with R-devel and docker.
>
> I am trying to test the new version of my package (maxLik) on R-devel,
> using the docker container.  I am using rocker/r-devel as the base.  Note
> that R-devel is called "RD" in the image.  I am copying in my package
> sources and a few scripts, and run "RD CMD build" and "RD CMD check".
> However, the latter fails with complaints about missing packages that are
> installed and accessible when I run RD from command line.
>
> Here are a few results:
>
> * After a successful build inside the container, I run check:
> root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
> * using log directory ?//maxLik.Rcheck?
> * using R Under development (unstable) (2025-08-11 r88561)
> * using platform: x86_64-pc-linux-gnu
> * R was compiled by
>    gcc (Debian 14.2.0-19) 14.2.0
>    GNU Fortran (Debian 14.2.0-19) 14.2.0
> * running under: Debian GNU/Linux trixie/sid
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?maxLik/DESCRIPTION? ... OK
> * this is package ?maxLik? version ?1.6-3?
> * checking CRAN incoming feasibility ... [6s/35s] OK
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?maxLik? can be installed ... ERROR
> Installation failed.
> See ?//maxLik.Rcheck/00install.out? for details.
> * DONE
>
> Status: 1 ERROR
> See
>  ?//maxLik.Rcheck/00check.log?
> for details.
>
> * Take a look at the log:
>
> root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> * installing *source* package ?maxLik? ...
> ** this is package ?maxLik? version ?1.6-3?
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
> :
>  there is no package called ?lattice?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> doWithOneRestart
> Execution halted
> ERROR: lazy loading failed for package ?maxLik?
> * removing ?/maxLik.Rcheck/maxLik?
>
> Apparently 'lattice' is missing???
>
> * But it is there and I can load it with no errors:
>
> root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> [1] ?0.22.7?
> root at f4024e015396:/# RDscript -e "library(lattice)"
>
> Formerly I got similar missing package messages for other packages, I have
> also tried to manually overwrote the R_LIB_USR environment variable (that
> resulted in another error a bit further down in the line), and to install
> my own package into different locations.  So far everything seems to lead
> to the same problem.
>
> Note that it works if I run it inside the container using the stable R ("R"
> instead of "RD").  Currently it is based on r88561 (2025-08-11) version of
> R-devel as you can see above.
>
> For reference, here is the Dockerfile:
>
> # -*- dockerfile-mode -*-
> FROM rocker/r-devel
> RUN apt-get install -y texlive-science
> ENV INSIDE_DOCKER=true
> COPY packages.R .  # install script for necessary packages
> RUN RDscript packages.R  # install dependencies/suggestions etc
> COPY pkg ./pkg  # copy the maxlik package source
> COPY build-check .  # building/checking script
> CMD ["bash"]
>
>
> Any ideas?
>
> Ott
>
>    [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From greg @end|ng |rom ||rm@n@y@h@com  Mon Aug 11 10:03:28 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Mon, 11 Aug 2025 18:03:28 +1000
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
 <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
Message-ID: <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>

Out of curiosity, why do they install two instances of R in a Docker
container?  On a traditional physical tin server, sure, you can't avoid
that sort of thing, but why in Docker?  I didn't see a rationale for it on
the Rocker wiki or website.

Greg

On Mon, 11 Aug 2025 at 16:05, Ott Toomet <otoomet at gmail.com> wrote:

> Thanks.
>
> I thought this was the issue, and even manually deleted /usr/bin/R and
> /usr/bin/Rscript, but the problem persisted.  But now I am thinking that
> /usr/bin/R may not be the relevant executables, the development version may
> pull up something directly from /usr/lib/R/bin instead (the devel is
> installed in /usr/local/lib/R ).
>
> Will try!
>
> Ott
>
> On Sun, Aug 10, 2025 at 9:57?PM Tim Taylor <
> tim.taylor at hiddenelephants.co.uk>
> wrote:
>
> > You may be hitting the following issue in tinytest:
> > https://github.com/markvanderloo/tinytest/issues/135
> >
> > There is a linked PR you could try that hopefully fixes the problem:
> > https://github.com/markvanderloo/tinytest/pull/134
> >
> > Tim
> >
> > On 11 Aug 2025, at 05:39, Ott Toomet <otoomet at gmail.com> wrote:
> >
> > ?Hey everyone who is more familiar with R-devel and docker.
> >
> > I am trying to test the new version of my package (maxLik) on R-devel,
> > using the docker container.  I am using rocker/r-devel as the base.  Note
> > that R-devel is called "RD" in the image.  I am copying in my package
> > sources and a few scripts, and run "RD CMD build" and "RD CMD check".
> > However, the latter fails with complaints about missing packages that are
> > installed and accessible when I run RD from command line.
> >
> > Here are a few results:
> >
> > * After a successful build inside the container, I run check:
> > root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
> > * using log directory ?//maxLik.Rcheck?
> > * using R Under development (unstable) (2025-08-11 r88561)
> > * using platform: x86_64-pc-linux-gnu
> > * R was compiled by
> >    gcc (Debian 14.2.0-19) 14.2.0
> >    GNU Fortran (Debian 14.2.0-19) 14.2.0
> > * running under: Debian GNU/Linux trixie/sid
> > * using session charset: UTF-8
> > * using option ?--as-cran?
> > * checking for file ?maxLik/DESCRIPTION? ... OK
> > * this is package ?maxLik? version ?1.6-3?
> > * checking CRAN incoming feasibility ... [6s/35s] OK
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for executable files ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking for sufficient/correct file permissions ... OK
> > * checking serialization versions ... OK
> > * checking whether package ?maxLik? can be installed ... ERROR
> > Installation failed.
> > See ?//maxLik.Rcheck/00install.out? for details.
> > * DONE
> >
> > Status: 1 ERROR
> > See
> >  ?//maxLik.Rcheck/00check.log?
> > for details.
> >
> > * Take a look at the log:
> >
> > root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> > * installing *source* package ?maxLik? ...
> > ** this is package ?maxLik? version ?1.6-3?
> > ** using staged installation
> > ** R
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]])
> > :
> >  there is no package called ?lattice?
> > Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> > doWithOneRestart
> > Execution halted
> > ERROR: lazy loading failed for package ?maxLik?
> > * removing ?/maxLik.Rcheck/maxLik?
> >
> > Apparently 'lattice' is missing???
> >
> > * But it is there and I can load it with no errors:
> >
> > root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> > [1] ?0.22.7?
> > root at f4024e015396:/# RDscript -e "library(lattice)"
> >
> > Formerly I got similar missing package messages for other packages, I
> have
> > also tried to manually overwrote the R_LIB_USR environment variable (that
> > resulted in another error a bit further down in the line), and to install
> > my own package into different locations.  So far everything seems to lead
> > to the same problem.
> >
> > Note that it works if I run it inside the container using the stable R
> ("R"
> > instead of "RD").  Currently it is based on r88561 (2025-08-11) version
> of
> > R-devel as you can see above.
> >
> > For reference, here is the Dockerfile:
> >
> > # -*- dockerfile-mode -*-
> > FROM rocker/r-devel
> > RUN apt-get install -y texlive-science
> > ENV INSIDE_DOCKER=true
> > COPY packages.R .  # install script for necessary packages
> > RUN RDscript packages.R  # install dependencies/suggestions etc
> > COPY pkg ./pkg  # copy the maxlik package source
> > COPY build-check .  # building/checking script
> > CMD ["bash"]
> >
> >
> > Any ideas?
> >
> > Ott
> >
> >    [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Aug 11 13:27:10 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 06:27:10 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
Message-ID: <26777.54158.202652.438708@paul.eddelbuettel.com>


On 10 August 2025 at 21:38, Ott Toomet wrote:
| root at f4024e015396:/# cat maxLik.Rcheck/00install.out
| * installing *source* package ?maxLik? ...
| ** this is package ?maxLik? version ?1.6-3?
| ** using staged installation
| ** R
| ** inst
| ** byte-compile and prepare package for lazy loading
| Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
| :
|   there is no package called ?lattice?
| Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
| doWithOneRestart
| Execution halted
| ERROR: lazy loading failed for package ?maxLik?
| * removing ?/maxLik.Rcheck/maxLik?
| 
| Apparently 'lattice' is missing???
| 
| * But it is there and I can load it with no errors:
| 
| root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
| [1] ?0.22.7?
| root at f4024e015396:/# RDscript -e "library(lattice)"

Because R CMD check uses a separate 'narrower' library path for checking a
package, you need to install the dependencies of the package you are
checking. So one way to address this is to 'RD CMD INSTALL lattice' (followed
by whatever else your package needs) in your running Docker session.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Mon Aug 11 13:38:38 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 06:38:38 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
 <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
 <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>
Message-ID: <26777.54846.549798.681111@paul.eddelbuettel.com>


On 11 August 2025 at 18:03, Greg Hunt wrote:
| Out of curiosity, why do they install two instances of R in a Docker
| container?  On a traditional physical tin server, sure, you can't avoid
| that sort of thing, but why in Docker?  I didn't see a rationale for it on
| the Rocker wiki or website.

"They" here. It makes sense to have the underlying base be the r-base
container, and it has R. And because it gets R as a package this is harder to
disentangle afterwards.  Also, my live system also has R and RD so I was used
to _explicitly_ opt into r-devel ...  

Also note that given how R works an honours its installation path, the
following simple 'ln -s RD R' is all you need to have 'RD' be 'R' on that
container too:

  $ docker run --rm -ti rocker/r-devel \
       bash -c 'cd /usr/local/bin && ln -s RD R && R --version'

  (Line break just for exposition here)

but we don't do that by default because having R as well can be useful.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 14:26:52 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Mon, 11 Aug 2025 05:26:52 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <26777.54158.202652.438708@paul.eddelbuettel.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
Message-ID: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>

Hmm...

I am a little bit confused.

* Is this "narrower" library path for CMD check explained somewhere?
* Isn't lattice one of the default packages (graphics depends on it iirc),
so it should be installed in any case?

Thanks, anyway.  So far my tiny test package
https://github.com/otoomet/dummypkg (0.0-1) works, so now I am looking at
vignettes.

Cheers,
Ott

On Mon, Aug 11, 2025 at 4:27?AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 10 August 2025 at 21:38, Ott Toomet wrote:
> | root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> | * installing *source* package ?maxLik? ...
> | ** this is package ?maxLik? version ?1.6-3?
> | ** using staged installation
> | ** R
> | ** inst
> | ** byte-compile and prepare package for lazy loading
> | Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]])
> | :
> |   there is no package called ?lattice?
> | Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> | doWithOneRestart
> | Execution halted
> | ERROR: lazy loading failed for package ?maxLik?
> | * removing ?/maxLik.Rcheck/maxLik?
> |
> | Apparently 'lattice' is missing???
> |
> | * But it is there and I can load it with no errors:
> |
> | root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> | [1] ?0.22.7?
> | root at f4024e015396:/# RDscript -e "library(lattice)"
>
> Because R CMD check uses a separate 'narrower' library path for checking a
> package, you need to install the dependencies of the package you are
> checking. So one way to address this is to 'RD CMD INSTALL lattice'
> (followed
> by whatever else your package needs) in your running Docker session.
>
> Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Aug 11 14:47:45 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 Aug 2025 08:47:45 -0400
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
Message-ID: <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>

lattice is a "recommended" package.  Those are contributed packages, not 
base packages, so they are optional, but most distributions of R include 
them.

Regarding Dirk's "narrower" comment:  I think that is really his 
decision about the docker container, not a property of R CMD check.  R 
CMD check needs to be able to succeed if the only packages installed are 
the hard dependencies (Depends, Imports, plus base packages), but it 
doesn't actually install anything.  That's up to you before running it.

Duncan Murdoch

On 2025-08-11 8:26 a.m., Ott Toomet wrote:
> Hmm...
> 
> I am a little bit confused.
> 
> * Is this "narrower" library path for CMD check explained somewhere?
> * Isn't lattice one of the default packages (graphics depends on it iirc),
> so it should be installed in any case?
> 
> Thanks, anyway.  So far my tiny test package
> https://github.com/otoomet/dummypkg (0.0-1) works, so now I am looking at
> vignettes.
> 
> Cheers,
> Ott
> 
> On Mon, Aug 11, 2025 at 4:27?AM Dirk Eddelbuettel <edd at debian.org> wrote:
> 
>>
>> On 10 August 2025 at 21:38, Ott Toomet wrote:
>> | root at f4024e015396:/# cat maxLik.Rcheck/00install.out
>> | * installing *source* package ?maxLik? ...
>> | ** this is package ?maxLik? version ?1.6-3?
>> | ** using staged installation
>> | ** R
>> | ** inst
>> | ** byte-compile and prepare package for lazy loading
>> | Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]])
>> | :
>> |   there is no package called ?lattice?
>> | Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
>> | doWithOneRestart
>> | Execution halted
>> | ERROR: lazy loading failed for package ?maxLik?
>> | * removing ?/maxLik.Rcheck/maxLik?
>> |
>> | Apparently 'lattice' is missing???
>> |
>> | * But it is there and I can load it with no errors:
>> |
>> | root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
>> | [1] ?0.22.7?
>> | root at f4024e015396:/# RDscript -e "library(lattice)"
>>
>> Because R CMD check uses a separate 'narrower' library path for checking a
>> package, you need to install the dependencies of the package you are
>> checking. So one way to address this is to 'RD CMD INSTALL lattice'
>> (followed
>> by whatever else your package needs) in your running Docker session.
>>
>> Dirk
>>
>> --
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon Aug 11 16:53:53 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 09:53:53 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
Message-ID: <26778.1025.663969.327900@paul.eddelbuettel.com>


On 11 August 2025 at 05:26, Ott Toomet wrote:
| * Is this "narrower" library path for CMD check explained somewhere?

Make your package (in a test, maybe even just tests/hello.R) do
`print(.libPaths())` and assert it is different during tests.

This has nothing to do with the Docker container (but arguably related to how
I packaged R for Debian for 20-some years following a discussion with Kurt
and Fritz 'way back when' that lead to the current split and the three
default directories):

> .libPaths()                           # my comments for rationale below
[1] "/usr/local/lib/R/site-library"     # system-wide, not packaged
[2] "/usr/lib/R/site-library"           # non-base/recommended packages from the distro
[3] "/usr/lib/R/library"                # base+recommended packages from the distrp
> 

plus optionally one below $HOME (and I personally do without).

Follow-ups, if any, maybe to r-sig-debian?

Hth,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From berw|n@tur|@ch @end|ng |rom gm@||@com  Tue Aug 12 10:16:54 2025
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Tue, 12 Aug 2025 16:16:54 +0800
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
Message-ID: <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>

On Mon, 11 Aug 2025 08:47:45 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> Regarding Dirk's "narrower" comment:  I think that is really his
> decision about the docker container, not a property of R CMD check.
> R CMD check needs to be able to succeed if the only packages
> installed are the hard dependencies (Depends, Imports, plus base
> packages), but it doesn't actually install anything.  That's up to
> you before running it.

Obviously I cannot speak for Dirk and where his comment comes from :),
but WRE has since ages the following note:

	Note: R CMD check and R CMD build run R processes with
	--vanilla in which none of the user?s startup files are read.
	If you need R_LIBS set (to find packages in a non-standard
	library) you can set it in the environment: also you can use
	the check and build environment files (as specified by the
	environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
	unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
	used) to set environment variables when using these utilities.

On my linux box I update and compile R patched and R devel regularly,
and at some point I got tired of also installing a lot of packages
(that I need for checking) each time.  So I moved all of these
additional packages to another library (where they are updated on an
as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
this restructure R patched and R devel could promptly not find those
packages anymore (until I changed my scripts to create appropriate
symbolic links, I did not want to go down the path of setting
environment variables).

Cheers,

	Berwin
 


From otoomet @end|ng |rom gm@||@com  Tue Aug 12 15:58:05 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Tue, 12 Aug 2025 06:58:05 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
Message-ID: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>

Thanks, everyone, for responding.  Here a summary of my research so
far--I do not quite understand what I am doing, but I spotted
a number of different issues, and I got the checks to work.

* I was not aware of the distinction between default and recommended
  packages, and the fact that the latter is not installed by default
  (although usually they are on production systems).
* in the rocker/r-devel container, R and R-devel use (partly)
  overlapping lib paths: `/usr/local/lib/R/site-library` and
  `/usr/lib/R/library`.

* R and R-devel have different packages installed by default, but
  because both access `/usr/lib/R/library`, both seem to have access
  to both default and recommended packages.
* `RD CMD check` uses a different lib path, containing
  `/usr/local/lib/R/library` and a temporary folder.  The latter will
  contain the needed packages given they are installed in a certain
  location (I still do not understand how they get there, and from
  where).
* The message I got -- package _lattice_ not available -- was due to
  two reasons: a) it is a recommended, not a default package; and b)
  it is installed in `/usr/lib/R/library` where it is normally
  accessible for both R and R-devel, and hence was not installed
  again.  However, from there it is not copied to the temporary folder that
  R CMD check uses.
* Finally, by setting `ENV R_LIBS=/usr/local/lib/R/site-library/` in
  the Dockerfile, the checks work.  But I am not sure why.

It would be great to isolate R and R-devel better in the docker
image.  Not sure whether it is easy to do...

Cheers,
Ott

On Tue, Aug 12, 2025 at 1:17?AM Berwin A Turlach <berwin.turlach at gmail.com>
wrote:

> On Mon, 11 Aug 2025 08:47:45 -0400
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> > Regarding Dirk's "narrower" comment:  I think that is really his
> > decision about the docker container, not a property of R CMD check.
> > R CMD check needs to be able to succeed if the only packages
> > installed are the hard dependencies (Depends, Imports, plus base
> > packages), but it doesn't actually install anything.  That's up to
> > you before running it.
>
> Obviously I cannot speak for Dirk and where his comment comes from :),
> but WRE has since ages the following note:
>
>         Note: R CMD check and R CMD build run R processes with
>         --vanilla in which none of the user?s startup files are read.
>         If you need R_LIBS set (to find packages in a non-standard
>         library) you can set it in the environment: also you can use
>         the check and build environment files (as specified by the
>         environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
>         unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
>         used) to set environment variables when using these utilities.
>
> On my linux box I update and compile R patched and R devel regularly,
> and at some point I got tired of also installing a lot of packages
> (that I need for checking) each time.  So I moved all of these
> additional packages to another library (where they are updated on an
> as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
> this restructure R patched and R devel could promptly not find those
> packages anymore (until I changed my scripts to create appropriate
> symbolic links, I did not want to go down the path of setting
> environment variables).
>
> Cheers,
>
>         Berwin
>
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Aug 12 16:16:33 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 12 Aug 2025 09:16:33 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
 <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
Message-ID: <26779.19649.736116.780774@paul.eddelbuettel.com>


With all due respect, that summary was more misleading than helpful.  This is
also the wrong list to discuss the matter as a few Debian packaging specific
aspects appear to be falsely seen as general R features. I reiterate that
follow-ups, if any, would really be better suited to either the r-sig-debian
list (and note its 'subscribe first, then post' policy) or possibly the git
repository of this specific container.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Aug 12 16:17:35 2025
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 12 Aug 2025 15:17:35 +0100
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
 <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
Message-ID: <5fe96d8e-f2ba-4bbe-a6a9-338f0f4c6435@dewey.myzen.co.uk>

Dear Ott

Perhaps a dumb question but does your package DESCRIPTION include a 
dependency on lattice (or i,port or suggest)?

Michael

On 12/08/2025 14:58, Ott Toomet wrote:
> Thanks, everyone, for responding.  Here a summary of my research so
> far--I do not quite understand what I am doing, but I spotted
> a number of different issues, and I got the checks to work.
> 
> * I was not aware of the distinction between default and recommended
>    packages, and the fact that the latter is not installed by default
>    (although usually they are on production systems).
> * in the rocker/r-devel container, R and R-devel use (partly)
>    overlapping lib paths: `/usr/local/lib/R/site-library` and
>    `/usr/lib/R/library`.
> 
> * R and R-devel have different packages installed by default, but
>    because both access `/usr/lib/R/library`, both seem to have access
>    to both default and recommended packages.
> * `RD CMD check` uses a different lib path, containing
>    `/usr/local/lib/R/library` and a temporary folder.  The latter will
>    contain the needed packages given they are installed in a certain
>    location (I still do not understand how they get there, and from
>    where).
> * The message I got -- package _lattice_ not available -- was due to
>    two reasons: a) it is a recommended, not a default package; and b)
>    it is installed in `/usr/lib/R/library` where it is normally
>    accessible for both R and R-devel, and hence was not installed
>    again.  However, from there it is not copied to the temporary folder that
>    R CMD check uses.
> * Finally, by setting `ENV R_LIBS=/usr/local/lib/R/site-library/` in
>    the Dockerfile, the checks work.  But I am not sure why.
> 
> It would be great to isolate R and R-devel better in the docker
> image.  Not sure whether it is easy to do...
> 
> Cheers,
> Ott
> 
> On Tue, Aug 12, 2025 at 1:17?AM Berwin A Turlach <berwin.turlach at gmail.com>
> wrote:
> 
>> On Mon, 11 Aug 2025 08:47:45 -0400
>> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>>> Regarding Dirk's "narrower" comment:  I think that is really his
>>> decision about the docker container, not a property of R CMD check.
>>> R CMD check needs to be able to succeed if the only packages
>>> installed are the hard dependencies (Depends, Imports, plus base
>>> packages), but it doesn't actually install anything.  That's up to
>>> you before running it.
>>
>> Obviously I cannot speak for Dirk and where his comment comes from :),
>> but WRE has since ages the following note:
>>
>>          Note: R CMD check and R CMD build run R processes with
>>          --vanilla in which none of the user?s startup files are read.
>>          If you need R_LIBS set (to find packages in a non-standard
>>          library) you can set it in the environment: also you can use
>>          the check and build environment files (as specified by the
>>          environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
>>          unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
>>          used) to set environment variables when using these utilities.
>>
>> On my linux box I update and compile R patched and R devel regularly,
>> and at some point I got tired of also installing a lot of packages
>> (that I need for checking) each time.  So I moved all of these
>> additional packages to another library (where they are updated on an
>> as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
>> this restructure R patched and R devel could promptly not find those
>> packages anymore (until I changed my scripts to create appropriate
>> symbolic links, I did not want to go down the path of setting
>> environment variables).
>>
>> Cheers,
>>
>>          Berwin
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Michael Dewey


From ru@@e||-|enth @end|ng |rom u|ow@@edu  Wed Aug 13 03:42:59 2025
From: ru@@e||-|enth @end|ng |rom u|ow@@edu (Lenth, Russell V)
Date: Wed, 13 Aug 2025 01:42:59 +0000
Subject: [R-pkg-devel] Catch-22 on mandatory package update
Message-ID: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>

Dear package developers:

I have run into a dilemma...

I received a message that my package has errors on the development version of R; and that I must fix the error by August 26. Since I will be traveling out of the country from Aug 17--27, I knew I had to fix the error right away - which I did. But when I tried to submit the updated package, I was unable to do so because CRAN is on vacation until Aug 19. Note that this is after I leave on my trip, and I will not be able to submit anything to CRAN while I am traveling.

So I can't submit my package until Aug 28 at the earliest, and this is two days after the Aug 26 deadline I was given. What can I do to save my package from getting the axe? Any advice is appreciated.

Thanks

Russ Lenth
Emeritus, U of Iowa


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Aug 13 04:09:43 2025
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 12 Aug 2025 19:09:43 -0700
Subject: [R-pkg-devel] Catch-22 on mandatory package update
In-Reply-To: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>
References: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>
Message-ID: <CAJqTW45iR9pQs_SfszjY+-wnNu2eYHraFvu4Ths3i2XAFKh3Fg@mail.gmail.com>

Just tell the CRAN guys your situation and ask for an extension.

On Tue, Aug 12, 2025 at 6:43?PM Lenth, Russell V via R-package-devel <
r-package-devel at r-project.org> wrote:

> Dear package developers:
>
> I have run into a dilemma...
>
> I received a message that my package has errors on the development version
> of R; and that I must fix the error by August 26. Since I will be traveling
> out of the country from Aug 17--27, I knew I had to fix the error right
> away - which I did. But when I tried to submit the updated package, I was
> unable to do so because CRAN is on vacation until Aug 19. Note that this is
> after I leave on my trip, and I will not be able to submit anything to CRAN
> while I am traveling.
>
> So I can't submit my package until Aug 28 at the earliest, and this is two
> days after the Aug 26 deadline I was given. What can I do to save my
> package from getting the axe? Any advice is appreciated.
>
> Thanks
>
> Russ Lenth
> Emeritus, U of Iowa
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Qu|r|n_St|er @end|ng |rom gmx@de  Mon Aug 18 10:29:58 2025
From: Qu|r|n_St|er @end|ng |rom gmx@de (quirin stier)
Date: Mon, 18 Aug 2025 10:29:58 +0200
Subject: [R-pkg-devel] GPU Package Building in CRAN
Message-ID: <b4c48f18-ef48-4bbf-b1bd-1e279a8b0e28@gmx.de>

Hi everyone,

which approach should I try to use for official CRAN submissions of R 
packages using OpenCL and GPUs, if none of the available solutions would 
pass the CRAN checks.

Currently I see two possibilities of building an R package deploying 
OpenCL with a GPU, however neither of them would pass the CRAN checks 
directly. The first solution would be to use the approach of the 
"OpenCL" package from CRAN 
(https://cran.r-project.org/web/packages/OpenCL/index.html) relying on 
the user to set local variables (OCL = ".../SDK/...", and so forth). The 
second approach would be to use something like cmake, to circumvent the 
need for the user to take care of certain requirements prior to 
installation, as is done in 
https://github.com/jmaerte/cmake-rcpp-template. The cmake approach poses 
the problem, that the paths generated are too long and thus fails the 
CRAN check and a building of the package is not possible.

Best regards

Quirin


From r@hr@|m @end|ng |rom tcd@|e  Mon Aug 18 13:19:40 2025
From: r@hr@|m @end|ng |rom tcd@|e (Rasha Shraim)
Date: Mon, 18 Aug 2025 12:19:40 +0100
Subject: [R-pkg-devel] html manual notes
Message-ID: <CAPpXX+DJY=YFDTViwBHrLbmu2q4fYfGaNKHnVQ7sgkEmvDB8PQ@mail.gmail.com>

Hello,

I've been trying to address this note (now failing CRAN submission) from
building the HTML version of the manual.

Check: HTML version of manual, Result: NOTE
  Found the following HTML validation problems:
  temis_download.html:61:1 (temis_download.Rd:25): Warning: inserting
implicit <p>
  temis_download.html:63:1 (temis_download.Rd:27): Warning: inserting
implicit <p>
  temis_download.html:61:1 (temis_download.Rd:25): Warning: trimming empty
<p>
  temis_download.html:63:1 (temis_download.Rd:27): Warning: trimming empty
<p>

The cause is two figures I have in the manual page of the temins_download
functions:
#' @param ...
#' \if{html}{\out{<p>Europe region coverage:</p>}\out{<div
style="text-align:
left">}\figure{March2025_vitD_cloudy_europe.png}{options:
style="width:500px;max-width:50\%;"}\out{</div>}}
#' \if{latex}{Europe region
coverage:\out{\begin{center}}\figure{March2025_vitD_cloudy_europe.png}\out{\end{center}}}
#' \if{html}{\out{<p>World region coverage:</p>}\out{<div
style="text-align: left">}\figure{March2025_vitD_cloudy_world.png}{options:
style="width:500px;max-width:50\%;"}\out{</div>}}
#' \if{latex}{World region
coverage:\out{\begin{center}}\figure{March2025_vitD_cloudy_world.png}\out{\end{center}}}
#' @param ...

I've tried a few variations of the \if{html} lines and updated to
tidy-html5, some similar notes were resolved but inserting/trimming
implicit <p> remain. If anyone has any suggestions for how to format the
offending lines to resolve this?

Many thanks,
Rasha

	[[alternative HTML version deleted]]


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Mon Aug 18 15:06:28 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?iso-8859-1?Q?H=FCsing=2C_Johannes?=)
Date: Mon, 18 Aug 2025 13:06:28 +0000
Subject: [R-pkg-devel] Drafting vignettes that require DB connection
Message-ID: <c9377d13d97047fd904b1699fcdf75a1@krebsregister.nrw.de>

Disclaimer: I am building a package for local usage (for now), which will probably be not submitted to CRAN. If you view this posting as off topic, please say so or ignore.

In a vignette like this one https://rdrr.io/cran/DBI/f/vignettes/DBI-advanced.Rmd, code is introduced that, on invocation, would try to establish a DB connection which probably would not exist on someone else's than the maintainer's configuration. Would the maintainer expect the user of the package to tweak her local configuration, or rather vignette script, to make the code run? The R packages book reads:

Note that since you build vignettes locally, CRAN only receives the html/pdf and the source code. However, CRAN does not re-build the vignette. It only checks that the code is runnable (by running it).

What happens when running the script on the user's configuration if the DB handle does not exist? Or indeed, when CRAN runs the code and no DB is built by running the code?

This posting https://forum.posit.co/t/vignettes-that-require-locally-stored-data/2392 seems to come close to my question.

Best

Johannes

Dr. Johannes H?sing
Epidemiologie

Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum



T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>

Das Landeskrebsregister NRW online
FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/

Newsletter LKR NRW - jetzt anmelden unter
 https://www.landeskrebsregister.nrw/aktuelles/newsletter

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Gesch?ftsf?hrer
Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Aug 18 16:55:06 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 18 Aug 2025 10:55:06 -0400
Subject: [R-pkg-devel] Drafting vignettes that require DB connection
In-Reply-To: <c9377d13d97047fd904b1699fcdf75a1@krebsregister.nrw.de>
References: <c9377d13d97047fd904b1699fcdf75a1@krebsregister.nrw.de>
Message-ID: <906ddef4-6d05-4a89-86a0-0ee6280daeaf@gmail.com>

Presumably when your code tries to open the database, it will fail with 
an error.  What you should do is catch that error so the vignette 
doesn't fail, and print a message to the user explaining why things 
didn't work.

If you are using knitr, you can call `knitr::knit_exit()`
and it will quit at that point without appearing to fail.

Duncan Murdoch

On 2025-08-18 9:06 a.m., H?sing, Johannes via R-package-devel wrote:
> Disclaimer: I am building a package for local usage (for now), which will probably be not submitted to CRAN. If you view this posting as off topic, please say so or ignore.
> 
> In a vignette like this one https://rdrr.io/cran/DBI/f/vignettes/DBI-advanced.Rmd, code is introduced that, on invocation, would try to establish a DB connection which probably would not exist on someone else's than the maintainer's configuration. Would the maintainer expect the user of the package to tweak her local configuration, or rather vignette script, to make the code run? The R packages book reads:
> 
> Note that since you build vignettes locally, CRAN only receives the html/pdf and the source code. However, CRAN does not re-build the vignette. It only checks that the code is runnable (by running it).
> 
> What happens when running the script on the user's configuration if the DB handle does not exist? Or indeed, when CRAN runs the code and no DB is built by running the code?
> 
> This posting https://forum.posit.co/t/vignettes-that-require-locally-stored-data/2392 seems to come close to my question.
> 
> Best
> 
> Johannes
> 
> Dr. Johannes H?sing
> Epidemiologie
> 
> Landeskrebsregister NRW gGmbH
> Gesundheitscampus 10
> 44801 Bochum
> 
> 
> 
> T 0234 54509-216
> F 0234 54509-499
> Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
> www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>
> 
> Das Landeskrebsregister NRW online
> FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
> INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
> LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/
> 
> Newsletter LKR NRW - jetzt anmelden unter
>   https://www.landeskrebsregister.nrw/aktuelles/newsletter
> 
> 5. Landesqualit?tskonferenz
> Mittwoch 08. Oktober 2025 in M?nster
> 20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
> Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
> Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/
> 
> Gesch?ftsf?hrer
> Dr. Andres Sch?tzend?bel
> Vorsitzender der Gesellschafterversammlung
> Staatssekret?r Matthias Heidmeier
> Sitz der Gesellschaft
> Bochum
> Registergericht
> Amtsgericht Bochum
> HRB 17715
> 
> HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Mon Aug 18 17:25:28 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Mon, 18 Aug 2025 15:25:28 +0000
Subject: [R-pkg-devel] Drafting vignettes that require DB connection
In-Reply-To: <906ddef4-6d05-4a89-86a0-0ee6280daeaf@gmail.com>
References: <c9377d13d97047fd904b1699fcdf75a1@krebsregister.nrw.de>
 <906ddef4-6d05-4a89-86a0-0ee6280daeaf@gmail.com>
Message-ID: <AM8PR10MB466065007B0F3004FFB5DC0BA731A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

You can also pre-render your vignette on your local machine, where you have access to the database. Downside is that you cannot automate this, so you will have to render again when you update your package. See: https://ropensci.org/blog/2019/12/08/precompute-vignettes/#the-solution-locally-knitting-rmarkdown

Pepijn

________________________________________
Van:?R-package-devel <r-package-devel-bounces at r-project.org> namens Duncan Murdoch <murdoch.duncan at gmail.com>
Verzonden:?maandag 18 augustus 2025 16:55
Aan:?H?sing, Johannes <Johannes.Huesing at krebsregister.nrw.de>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Onderwerp:?Re: [R-pkg-devel] Drafting vignettes that require DB connection
?
Presumably when your code tries to open the database, it will fail with
an error.? What you should do is catch that error so the vignette
doesn't fail, and print a message to the user explaining why things
didn't work.

If you are using knitr, you can call `knitr::knit_exit()`
and it will quit at that point without appearing to fail.

Duncan Murdoch

On 2025-08-18 9:06 a.m., H?sing, Johannes via R-package-devel wrote:
> Disclaimer: I am building a package for local usage (for now), which will probably be not submitted to CRAN. If you view this posting as off topic, please say so or ignore.
>
> In a vignette like this one https://rdrr.io/cran/DBI/f/vignettes/DBI-advanced.Rmd, code is introduced that, on invocation, would try to establish a DB connection which probably would not exist on someone else's than the maintainer's configuration. Would the maintainer expect the user of the package to tweak her local configuration, or rather vignette script, to make the code run? The R packages book reads:
>
> Note that since you build vignettes locally, CRAN only receives the html/pdf and the source code. However, CRAN does not re-build the vignette. It only checks that the code is runnable (by running it).
>
> What happens when running the script on the user's configuration if the DB handle does not exist? Or indeed, when CRAN runs the code and no DB is built by running the code?
>
> This posting https://forum.posit.co/t/vignettes-that-require-locally-stored-data/2392?seems to come close to my question.
>
> Best
>
> Johannes
>
> Dr. Johannes H?sing
> Epidemiologie
>
> Landeskrebsregister NRW gGmbH
> Gesundheitscampus 10
> 44801 Bochum
>
>
>
> T 0234 54509-216
> F 0234 54509-499
> Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
> [http://www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>]www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>
>
> Das Landeskrebsregister NRW online
> FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
> INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
> LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/
>
> Newsletter LKR NRW - jetzt anmelden unter
>?? https://www.landeskrebsregister.nrw/aktuelles/newsletter
>
> 5. Landesqualit?tskonferenz
> Mittwoch 08. Oktober 2025 in M?nster
> 20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
> Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
> Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/
>
> Gesch?ftsf?hrer
> Dr. Andres Sch?tzend?bel
> Vorsitzender der Gesellschafterversammlung
> Staatssekret?r Matthias Heidmeier
> Sitz der Gesellschaft
> Bochum
> Registergericht
> Amtsgericht Bochum
> HRB 17715
>
> HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.
>
>??????? [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From jo@|@h@p@rry @end|ng |rom gm@||@com  Mon Aug 18 20:25:57 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Mon, 18 Aug 2025 11:25:57 -0700
Subject: [R-pkg-devel] Using DOTS from C API
Message-ID: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>

*Question:* what is the best way to access a DOTSXP from R's C API in a
function call.

Over at extendr (1) we'd like to be able to utilize `...` from the body of
a Rust function?with initial motivation being to support S3 generics like
print(x, ...).

I don't see any recommendations / or mention of accessing DOTSXP in WRE.
The closest I can find is from R internals (2) repo which says

"Easiest to get to with findVar(R_DotsSymbol, env) or similar."


From R's C API would this mean we would want to use something like:

findVar(R_DotsSymbol, R_GetCurrentEnv()) to get the dots pairlist from the
function's environment?


1) https://extendr.rs
2)
https://github.com/hadley/r-internals/blob/16c1d73b635ccecec8b1f396a8935a8dd96126e4/pairlists.md

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Aug 18 21:45:49 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 18 Aug 2025 15:45:49 -0400
Subject: [R-pkg-devel] Using DOTS from C API
In-Reply-To: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
Message-ID: <bd978b04-d85b-445e-b629-f42e040f4470@gmail.com>

On 2025-08-18 2:25 p.m., Josiah Parry wrote:
> *Question:* what is the best way to access a DOTSXP from R's C API in a
> function call.
> 
> Over at extendr (1) we'd like to be able to utilize `...` from the body of
> a Rust function?with initial motivation being to support S3 generics like
> print(x, ...).
> 
> I don't see any recommendations / or mention of accessing DOTSXP in WRE.
> The closest I can find is from R internals (2) repo which says
> 
> "Easiest to get to with findVar(R_DotsSymbol, env) or similar."
> 
> 
>  From R's C API would this mean we would want to use something like:
> 
> findVar(R_DotsSymbol, R_GetCurrentEnv()) to get the dots pairlist from the
> function's environment?
> 

It's almost certainly easier to pass something like list(...) to your 
external function.  That will evaluate each of the arguments in the 
appropriate environments and put them in a list.

If you want to receive the promises without them being evaluated, I 
don't know if there's a documented way to do it in the C API.  You could 
always use the tidyverse approach and ask your users to pass formulas 
instead of expressions.

Duncan Murdoch


From edd @end|ng |rom deb|@n@org  Mon Aug 18 22:00:27 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 18 Aug 2025 15:00:27 -0500
Subject: [R-pkg-devel] Using DOTS from C API
In-Reply-To: <bd978b04-d85b-445e-b629-f42e040f4470@gmail.com>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
 <bd978b04-d85b-445e-b629-f42e040f4470@gmail.com>
Message-ID: <26787.34395.523037.973645@paul.eddelbuettel.com>


It is sometimes helpful to see what other packages do / have done. Here we
get 46 hits in CRAN packages mirrored at GitHub [1], see
  https://github.com/search?q=org%3Acran%20R_DotsSymbol&type=code

Dirk

[1] A superset. AFAIK archived packages do not disappear from the GH org.

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Tue Aug 19 02:25:40 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 19 Aug 2025 03:25:40 +0300
Subject: [R-pkg-devel] Using DOTS from C API
In-Reply-To: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
Message-ID: <20250819032540.0cc71d7a@Tarkus>

? Mon, 18 Aug 2025 11:25:57 -0700
Josiah Parry <josiah.parry at gmail.com> ?????:

> *Question:* what is the best way to access a DOTSXP from R's C API in
> a function call.

In the future, there may be a C interface for that:
https://gist.github.com/lionel-/1ebcbd5ec69c0775d514c329522408a3?permalink_comment_id=5716011#gistcomment-5716011

Currently, working with promises most likely requires some non-API
entry points. What's the intended R-side call from the S3 method to
Rust? What's the intended use on the Rust side?

-- 
Best regards,
Ivan


From |kw@|mmo @end|ng |rom gm@||@com  Tue Aug 19 02:51:37 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Mon, 18 Aug 2025 20:51:37 -0400
Subject: [R-pkg-devel] Using DOTS from C API
In-Reply-To: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
Message-ID: <CADNULg9kyJMv07J-tvtWv9zrtegFh0qq5Q+fM-3UWzQ7OqJsrQ@mail.gmail.com>

Generally, the best way to get access to the current environment is passing
environment() as an argument to your C function. I know that people will
tell you to use R_GetCurrentEnv() in C, but that does not work when the C
call is an argument to another function. For example:

tryCatch({
   .External(.C_<funname>, <other args>)
})

If you tried to call R_GetCurrentEnv() inside your C function, it would
return the environment of doTryCatch, and that's not what you. Better
instead to just do this:

tryCatch({
   .External(.C_<funname>, environment(), <other args>)
})


Next, once you're in C, and you have the environment, presumably using
something like

SEXP rho = CAR(args); args = CDR(args);

you would find it in the environment:

SEXP dots = Rf_findVarInFrame(rho, R_DotsSymbol);

or

SEXP dots = Rf_findVar(R_DotsSymbol, rho);

The best way to determine the length of the object is this:

R_xlen_t n = (TYPEOF(dots) == DOTSXP) ? Rf_length(dots) : 0;

The reason you should switch on TYPEOF is in case ... contains zero
arguments, in which case it is R_MissingArg.

>From there, it is just a pair list. You can select specific elements like
this:

CAR(Rf_nthcdr(dots, <index>))

or you can loop over them like this:

SEXP d = dots;
for (R_xlen_t i = 0; i < n; i++, d = CDR(d)) {
    di = CAR(d);
}

However, the values of di are R_MissingArg if that element is empty or a
promise. And while you cannot access the components of a promise, you are
allowed to evaluate it.

SEXP d = dots;
for (R_xlen_t i = 0; i < n; i++, d = CDR(d)) {
    di = CAR(d);
    if (di == R_MissingArg) {
        <do something if missing>
    }
    else {
        di = Rf_eval(di, R_EmptyEnv);
        <do something with promise value>
    }
}

The environment used in Rf_eval does not matter, when evaluating a promise,
the promise environment is always used.


That being said, Rchk may complain of some objects not being protected. To
make it happen, you should protect dots right after you use
Rf_findVarInFrame, as well as protect di right after you use Rf_eval (don't
forget to unprotect di at the end of each loop).

Regards,
    Iris



On Mon, Aug 18, 2025, 14:26 Josiah Parry <josiah.parry at gmail.com> wrote:

> *Question:* what is the best way to access a DOTSXP from R's C API in a
> function call.
>
> Over at extendr (1) we'd like to be able to utilize `...` from the body of
> a Rust function?with initial motivation being to support S3 generics like
> print(x, ...).
>
> I don't see any recommendations / or mention of accessing DOTSXP in WRE.
> The closest I can find is from R internals (2) repo which says
>
> "Easiest to get to with findVar(R_DotsSymbol, env) or similar."
>
>
> From R's C API would this mean we would want to use something like:
>
> findVar(R_DotsSymbol, R_GetCurrentEnv()) to get the dots pairlist from the
> function's environment?
>
>
> 1) https://extendr.rs
> 2)
>
> https://github.com/hadley/r-internals/blob/16c1d73b635ccecec8b1f396a8935a8dd96126e4/pairlists.md
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |kw@|mmo @end|ng |rom gm@||@com  Tue Aug 19 03:01:00 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Mon, 18 Aug 2025 21:01:00 -0400
Subject: [R-pkg-devel] Using DOTS from C API
In-Reply-To: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
Message-ID: <CADNULg_7W1DaOmEBdZ0q=UT=GMCV=fp6Ki6jPEUJPGjQt9-7DQ@mail.gmail.com>

Oh, forgot to mention. Using Rf_eval on a promise a second time does not
re-evaluate the promise. It simply returns the already calculated promise
value. So if that comes up, no need to worry about it.

On Mon, Aug 18, 2025, 14:26 Josiah Parry <josiah.parry at gmail.com> wrote:

> *Question:* what is the best way to access a DOTSXP from R's C API in a
> function call.
>
> Over at extendr (1) we'd like to be able to utilize `...` from the body of
> a Rust function?with initial motivation being to support S3 generics like
> print(x, ...).
>
> I don't see any recommendations / or mention of accessing DOTSXP in WRE.
> The closest I can find is from R internals (2) repo which says
>
> "Easiest to get to with findVar(R_DotsSymbol, env) or similar."
>
>
> From R's C API would this mean we would want to use something like:
>
> findVar(R_DotsSymbol, R_GetCurrentEnv()) to get the dots pairlist from the
> function's environment?
>
>
> 1) https://extendr.rs
> 2)
>
> https://github.com/hadley/r-internals/blob/16c1d73b635ccecec8b1f396a8935a8dd96126e4/pairlists.md
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Wed Aug 20 01:12:46 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Tue, 19 Aug 2025 18:12:46 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Using DOTS from C API
In-Reply-To: <20250819032540.0cc71d7a@Tarkus>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
 <20250819032540.0cc71d7a@Tarkus>
Message-ID: <dcdb67e1-636b-0ab3-4e89-ab9d8c3eecd3@uiowa.edu>

On Tue, 19 Aug 2025, Ivan Krylov via R-package-devel wrote:

> ? Mon, 18 Aug 2025 11:25:57 -0700
> Josiah Parry <josiah.parry at gmail.com> ?????:
>
>> *Question:* what is the best way to access a DOTSXP from R's C API in
>> a function call.
>
> In the future, there may be a C interface for that:
> https://gist.github.com/lionel-/1ebcbd5ec69c0775d514c329522408a3?permalink_comment_id=5716011#gistcomment-5716011

Hopefully we'll be able to complete an API for doing these sorts of
things safely in the next few months.

> Currently, working with promises most likely requires some non-API
> entry points. What's the intended R-side call from the S3 method to
> Rust? What's the intended use on the Rust side?
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From jo@|@h@p@rry @end|ng |rom gm@||@com  Wed Aug 20 01:29:08 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Tue, 19 Aug 2025 16:29:08 -0700
Subject: [R-pkg-devel] [External] Re:  Using DOTS from C API
In-Reply-To: <dcdb67e1-636b-0ab3-4e89-ab9d8c3eecd3@uiowa.edu>
References: <CAL3ufUJ9uk8VZsUyUvhrjR5_H2AvheGN6Qk8YKDYW1rr+ViJgQ@mail.gmail.com>
 <20250819032540.0cc71d7a@Tarkus>
 <dcdb67e1-636b-0ab3-4e89-ab9d8c3eecd3@uiowa.edu>
Message-ID: <CAL3ufUKtx94P0aTv=1RuP8NWeCXoE7fSBJ1Hw3gZz0Xnioxdmg@mail.gmail.com>

Thank you all for such a wonderful discussion thread!

I think we can hold off on an implementation until there is a formal C API
for doing so.

On Tue, Aug 19, 2025 at 4:12?PM <luke-tierney at uiowa.edu> wrote:

> On Tue, 19 Aug 2025, Ivan Krylov via R-package-devel wrote:
>
> > ? Mon, 18 Aug 2025 11:25:57 -0700
> > Josiah Parry <josiah.parry at gmail.com> ?????:
> >
> >> *Question:* what is the best way to access a DOTSXP from R's C API in
> >> a function call.
> >
> > In the future, there may be a C interface for that:
> >
> https://gist.github.com/lionel-/1ebcbd5ec69c0775d514c329522408a3?permalink_comment_id=5716011#gistcomment-5716011
>
> Hopefully we'll be able to complete an API for doing these sorts of
> things safely in the next few months.
>
> > Currently, working with promises most likely requires some non-API
> > entry points. What's the intended R-side call from the S3 method to
> > Rust? What's the intended use on the Rust side?
> >
> >
>
> --
> Luke Tierney
> Ralph E. Wareham Professor of Mathematical Sciences
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>     Actuarial Science
> 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

	[[alternative HTML version deleted]]


From rhe|p @end|ng |rom eoo@@dd@@n|  Wed Aug 20 21:31:29 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Wed, 20 Aug 2025 21:31:29 +0200
Subject: [R-pkg-devel] Issue with use of par() in package
Message-ID: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>


I recently submitted a package to CRAN that creates a device that 
outputs into the terminal (for terminals that support the Terminal 
Graphics Protocol (and hopefully in the future also terminals that 
support sixel)) [1].

It introduces a 'tgp' function that does the following:

1. It opens a ragg::agg_capture device.

2. When term_col = TRUE: sets the background and foreground colors of 
the device to those of the terminal (when these can be detected).

3. Every time the ragg:agg_capture device is updated: updates the plot 
in the terminal.

Point 2 raises an issue from CRAN as par() changes some properties and 
these are not set back at the and of the function call. This is 
intentional, as otherwise setting them would be useless; it is the 
intention that the colors of subsequent plot calls are changed.  I am 
not sure how I can set the colors of the device to those in the terminal 
(as requested by the user) without violating this rule.

Are there alternative ways of helping the user to set the colors of the 
device without violating this issue?

Could this be an exception to the rule as the argument intentionally 
changes par()? This could be made more explicit by changing the default 
value to FALSE. I guess this question is better asked at the CRAN 
maintainers, but perhaps there are other package that do something 
similar that I might look at.

Instead of having this functionality in the tgp() function, I could 
create a 'set_figure_colours_to_terminal()` function (perhaps with a 
corresponding reset function). However, this function would run into the 
same issue.

I appreciate any suggestions/help that yoy could give.

Best,
Jan




[1] The current version of the code can be found here: 
https://codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev


From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Aug 21 10:45:04 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 21 Aug 2025 10:45:04 +0200
Subject: [R-pkg-devel] Issue with use of par() in package
In-Reply-To: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
References: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
Message-ID: <ab3d2088-1730-47a3-ab42-ad4ca29a9dec@eoos.dds.nl>



Someone asked for the response I got from CRAN. I included it below:

---
[... another issue where I forgot a \value{} in the documentation of one 
of the functions]

Please make sure that you do not change the user's options, par or 
working directory. If you really have to do so within functions, please 
ensure with an *immediate* call of on.exit() that the settings are reset 
when the function is exited.
e.g.:
...
oldpar <- par(no.readonly = TRUE) # code line i
on.exit(par(oldpar)) # code line i + 1
...
par(mfrow=c(2,2)) # somewhere after
...
e.g.: -> R/tgp.R
If you're not familiar with the function, please check ?on.exit. This 
function makes it possible to restore options before exiting a function 
even if the function breaks. Therefore it needs to be called immediately 
after the option change within a function.
For more details: 
<https://contributor.r-project.org/cran-cookbook/code_issues.html#change-of-options-graphical-parameters-and-working-directory>

Please fix and resubmit.
---

I understand why this is asked and I also know how to handle this in 
usual cases. I am not sure how to handle this in the specific case here. 
Perhaps I missed some alternative way of handling this.

Best,
Jan


On 8/20/25 21:31, Jan van der Laan wrote:
> I recently submitted a package to CRAN that creates a device that 
> outputs into the terminal (for terminals that support the Terminal 
> Graphics Protocol (and hopefully in the future also terminals that 
> support sixel)) [1].
> 
> It introduces a 'tgp' function that does the following:
> 
> 1. It opens a ragg::agg_capture device.
> 
> 2. When term_col = TRUE: sets the background and foreground colors of 
> the device to those of the terminal (when these can be detected).
> 
> 3. Every time the ragg:agg_capture device is updated: updates the plot 
> in the terminal.
> 
> Point 2 raises an issue from CRAN as par() changes some properties and 
> these are not set back at the and of the function call. This is 
> intentional, as otherwise setting them would be useless; it is the 
> intention that the colors of subsequent plot calls are changed.? I am 
> not sure how I can set the colors of the device to those in the terminal 
> (as requested by the user) without violating this rule.
> 
> Are there alternative ways of helping the user to set the colors of the 
> device without violating this issue?
> 
> Could this be an exception to the rule as the argument intentionally 
> changes par()? This could be made more explicit by changing the default 
> value to FALSE. I guess this question is better asked at the CRAN 
> maintainers, but perhaps there are other package that do something 
> similar that I might look at.
> 
> Instead of having this functionality in the tgp() function, I could 
> create a 'set_figure_colours_to_terminal()` function (perhaps with a 
> corresponding reset function). However, this function would run into the 
> same issue.
> 
> I appreciate any suggestions/help that yoy could give.
> 
> Best,
> Jan
> 
> 
> 
> 
> [1] The current version of the code can be found here: https:// 
> codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Aug 21 11:07:03 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 21 Aug 2025 11:07:03 +0200
Subject: [R-pkg-devel] Svar:  Issue with use of par() in package
In-Reply-To: <SV0P279MB0577C9530FEBC0805CFF9025FC32A@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
References: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
 <SV0P279MB0577C9530FEBC0805CFF9025FC32A@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
Message-ID: <0e0a6f2a-2b47-4e5f-a70e-12fc3a3f895b@eoos.dds.nl>

Hi Kristian,

Also replying to the list.

Thanks for the suggestion. Personally I have something like the 
following in my ~/.Rprofile

if (interactive() && terminalgraphics::has_tgp_support()) {
   options(device = terminalgraphics::tgp)
}

So that doesn't work well with your suggestion, but creating a (have to 
think of a better name) `get_par` function, might at least make it 
easier for the user to set the colors when it turns out to be impossible 
to set these from tgp():

tgp()
opar <- par(terminalgraphics::get_par())
plot(...)
par(opar)

`get_par` would then be similar to what you suggest. The disadvantage is 
that this code is only relevant when `tgp` is the active device, so 
users would need to either write device specific code or wrap this in 
if-statements. Perhaps a better solution would be to allow for a user 
defined callback to `tgp` that is called after the device is created. A 
user might then be able to do something like:

if (interactive() && terminalgraphics::has_tgp_support()) {
   set_par <- function() par(terminalgraphics::get_par())
   options(device = terminalgraphics::tgp, tgp_callback = set_par)
}

This is still extra work for the user, but avoids device specific code 
in the user scripts.

Thanks again.

Jan







On 8/21/25 08:35, Kristian Hovde Liland wrote:
> Hi Jan,
> 
> I?m not sure how this plays with your point 3, if the intention is 
> subsequent automatic updates, but for setting the colours once, you 
> could let the user perform the par() part, for instance:
> tgp <- function(...){
>  ? # All the nice things that are needed.
>  ? # <- here
>  ? # Output in the form of a vector to be passed to par, e.g.,
>  ? vec <- c(bg = "black",
>  ? ? ? ? ? ?fg = "white",
>  ? ? ? ? ? ?col.axis = "white",
>  ? ? ? ? ? ?col.lab = "white",
>  ? ? ? ? ? ?col.main = "white",
>  ? ? ? ? ? ?col.sub = "white")
>  ? return(vec)
> }
> # Example
> old.par <- par(tgp()) # <- User involvement
> plot(1:3, type="l")
> par(old.par)
> 
> Regards,
> Kristian
> 
> *Fra: *R-package-devel <r-package-devel-bounces at r-project.org> p? vegne 
> av Jan van der Laan <rhelp at eoos.dds.nl>
> *Dato: *onsdag, 20. august 2025 kl. 21:32
> *Til: *r-package-devel at r-project.org <r-package-devel at r-project.org>
> *Emne: *[R-pkg-devel] Issue with use of par() in package
> 
> 
> I recently submitted a package to CRAN that creates a device that
> outputs into the terminal (for terminals that support the Terminal
> Graphics Protocol (and hopefully in the future also terminals that
> support sixel)) [1].
> 
> It introduces a 'tgp' function that does the following:
> 
> 1. It opens a ragg::agg_capture device.
> 
> 2. When term_col = TRUE: sets the background and foreground colors of
> the device to those of the terminal (when these can be detected).
> 
> 3. Every time the ragg:agg_capture device is updated: updates the plot
> in the terminal.
> 
> Point 2 raises an issue from CRAN as par() changes some properties and
> these are not set back at the and of the function call. This is
> intentional, as otherwise setting them would be useless; it is the
> intention that the colors of subsequent plot calls are changed.? I am
> not sure how I can set the colors of the device to those in the terminal
> (as requested by the user) without violating this rule.
> 
> Are there alternative ways of helping the user to set the colors of the
> device without violating this issue?
> 
> Could this be an exception to the rule as the argument intentionally
> changes par()? This could be made more explicit by changing the default
> value to FALSE. I guess this question is better asked at the CRAN
> maintainers, but perhaps there are other package that do something
> similar that I might look at.
> 
> Instead of having this functionality in the tgp() function, I could
> create a 'set_figure_colours_to_terminal()` function (perhaps with a
> corresponding reset function). However, this function would run into the
> same issue.
> 
> I appreciate any suggestions/help that yoy could give.
> 
> Best,
> Jan
> 
> 
> 
> 
> [1] The current version of the code can be found here:
> https://codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev 
> <https://codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https:// 
> stat.ethz.ch/mailman/listinfo/r-package-devel>


From |kry|ov @end|ng |rom d|@root@org  Thu Aug 21 21:42:54 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 21 Aug 2025 22:42:54 +0300
Subject: [R-pkg-devel] html manual notes
In-Reply-To: <CAPpXX+DJY=YFDTViwBHrLbmu2q4fYfGaNKHnVQ7sgkEmvDB8PQ@mail.gmail.com>
References: <CAPpXX+DJY=YFDTViwBHrLbmu2q4fYfGaNKHnVQ7sgkEmvDB8PQ@mail.gmail.com>
Message-ID: <20250821224254.1ad7f326@Tarkus>

? Mon, 18 Aug 2025 12:19:40 +0100
Rasha Shraim via R-package-devel <r-package-devel at r-project.org> ?????:

> \if{html}{\out{<p>World region coverage:</p>}\out{<div
> style="text-align:
> left">}\figure{March2025_vitD_cloudy_world.png}{options:
> style="width:500px;max-width:50\%;"}\out{</div>}}

If you add an empty line between \figure{...} and \out{</div>}, R will
close the the <p> tag that it had opened for the \figure{...} tag while
it's still inside the <div>. Then the <p> won't be empty, and there
won't be a need for an implicit opening <p> for a mismatched closing
</p> after the </div>.

-- 
Best regards,
Ivan


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Aug 21 21:56:41 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 21 Aug 2025 12:56:41 -0700
Subject: [R-pkg-devel] Issue with use of par() in package
In-Reply-To: <ab3d2088-1730-47a3-ab42-ad4ca29a9dec@eoos.dds.nl>
References: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
 <ab3d2088-1730-47a3-ab42-ad4ca29a9dec@eoos.dds.nl>
Message-ID: <CAPRVBcy=3RExZNtfft8gPx6wdU9tcOUt=cy1ftzbut+Ae4c5Fg@mail.gmail.com>

I can understand caution about functions with side effects, but rejecting a
package on those grounds alone seems strange to me.

I can easily find thousands of calls to par() on CRAN without any
associated on.exit() cleanup ([1] [2] [3] [4] with a full regex search [5])

[1]
https://github.com/cran/raster/blob/3f64977b51a3b7c565f1309a462cb35f66daeafe/R/hist.R#L44
[2]
https://github.com/cran/quantreg/blob/43abb16645d5e78d1377896ebd19d760efd2ace9/R/khmal.R#L107-L115
[3]
https://github.com/cran/SensoMineR/blob/c9a159cb445e538c953d27de54288897882b3c91/R/barrow.R#L1
[4]
https://github.com/cran/GD/blob/1ce7c3c8b63dafb1d9d0a9e2ffcd6af4917fa077/R/sesu.R#L25
[5]
https://github.com/search?q=org%3Acran+%2F%5Cn%5B%5E%23%5D*%5B%5E%5Cw.%5Dpar%5C%28%5B+%5Cn%5D*%5B%5E.%29+%5Cn%22%27%5D%2F+path%3A%2F%5C.R%24%2F+NOT+%22on.exit%22+NOT+path%3A%2Fdemo%2F+NOT+path%3A%2Ftests%2F&type=code

I see no reference to 'par' inside {tools} (in particular QC.R), so R CMD
check is not looking for this.

IMO, clearly documenting the side effects of any such functions is more
than enough.

Mike C

On Thu, Aug 21, 2025 at 1:45?AM Jan van der Laan <rhelp at eoos.dds.nl> wrote:

>
>
> Someone asked for the response I got from CRAN. I included it below:
>
> ---
> [... another issue where I forgot a \value{} in the documentation of one
> of the functions]
>
> Please make sure that you do not change the user's options, par or
> working directory. If you really have to do so within functions, please
> ensure with an *immediate* call of on.exit() that the settings are reset
> when the function is exited.
> e.g.:
> ...
> oldpar <- par(no.readonly = TRUE) # code line i
> on.exit(par(oldpar)) # code line i + 1
> ...
> par(mfrow=c(2,2)) # somewhere after
> ...
> e.g.: -> R/tgp.R
> If you're not familiar with the function, please check ?on.exit. This
> function makes it possible to restore options before exiting a function
> even if the function breaks. Therefore it needs to be called immediately
> after the option change within a function.
> For more details:
> <
> https://contributor.r-project.org/cran-cookbook/code_issues.html#change-of-options-graphical-parameters-and-working-directory
> >
>
> Please fix and resubmit.
> ---
>
> I understand why this is asked and I also know how to handle this in
> usual cases. I am not sure how to handle this in the specific case here.
> Perhaps I missed some alternative way of handling this.
>
> Best,
> Jan
>
>
> On 8/20/25 21:31, Jan van der Laan wrote:
> > I recently submitted a package to CRAN that creates a device that
> > outputs into the terminal (for terminals that support the Terminal
> > Graphics Protocol (and hopefully in the future also terminals that
> > support sixel)) [1].
> >
> > It introduces a 'tgp' function that does the following:
> >
> > 1. It opens a ragg::agg_capture device.
> >
> > 2. When term_col = TRUE: sets the background and foreground colors of
> > the device to those of the terminal (when these can be detected).
> >
> > 3. Every time the ragg:agg_capture device is updated: updates the plot
> > in the terminal.
> >
> > Point 2 raises an issue from CRAN as par() changes some properties and
> > these are not set back at the and of the function call. This is
> > intentional, as otherwise setting them would be useless; it is the
> > intention that the colors of subsequent plot calls are changed.  I am
> > not sure how I can set the colors of the device to those in the terminal
> > (as requested by the user) without violating this rule.
> >
> > Are there alternative ways of helping the user to set the colors of the
> > device without violating this issue?
> >
> > Could this be an exception to the rule as the argument intentionally
> > changes par()? This could be made more explicit by changing the default
> > value to FALSE. I guess this question is better asked at the CRAN
> > maintainers, but perhaps there are other package that do something
> > similar that I might look at.
> >
> > Instead of having this functionality in the tgp() function, I could
> > create a 'set_figure_colours_to_terminal()` function (perhaps with a
> > corresponding reset function). However, this function would run into the
> > same issue.
> >
> > I appreciate any suggestions/help that yoy could give.
> >
> > Best,
> > Jan
> >
> >
> >
> >
> > [1] The current version of the code can be found here: https://
> > codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Aug 22 09:14:39 2025
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 22 Aug 2025 09:14:39 +0200
Subject: [R-pkg-devel] Issue with use of par() in package
In-Reply-To: <CAPRVBcy=3RExZNtfft8gPx6wdU9tcOUt=cy1ftzbut+Ae4c5Fg@mail.gmail.com>
References: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
 <ab3d2088-1730-47a3-ab42-ad4ca29a9dec@eoos.dds.nl>
 <CAPRVBcy=3RExZNtfft8gPx6wdU9tcOUt=cy1ftzbut+Ae4c5Fg@mail.gmail.com>
Message-ID: <26792.6367.627433.111006@stat.math.ethz.ch>

>>>>> Michael Chirico 
>>>>>     on Thu, 21 Aug 2025 12:56:41 -0700 writes:

    > I can understand caution about functions with side effects, but rejecting a
    > package on those grounds alone seems strange to me.

    > I can easily find thousands of calls to par() on CRAN without any
    > associated on.exit() cleanup ([1] [2] [3] [4] with a full regex search [5])

    > [1]
    > https://github.com/cran/raster/blob/3f64977b51a3b7c565f1309a462cb35f66daeafe/R/hist.R#L44
    > [2]
    > https://github.com/cran/quantreg/blob/43abb16645d5e78d1377896ebd19d760efd2ace9/R/khmal.R#L107-L115
    > [3]
    > https://github.com/cran/SensoMineR/blob/c9a159cb445e538c953d27de54288897882b3c91/R/barrow.R#L1
    > [4]
    > https://github.com/cran/GD/blob/1ce7c3c8b63dafb1d9d0a9e2ffcd6af4917fa077/R/sesu.R#L25
    > [5]
    > https://github.com/search?q=org%3Acran+%2F%5Cn%5B%5E%23%5D*%5B%5E%5Cw.%5Dpar%5C%28%5B+%5Cn%5D*%5B%5E.%29+%5Cn%22%27%5D%2F+path%3A%2F%5C.R%24%2F+NOT+%22on.exit%22+NOT+path%3A%2Fdemo%2F+NOT+path%3A%2Ftests%2F&type=code

    > I see no reference to 'par' inside {tools} (in particular QC.R), so R CMD
    > check is not looking for this.

    > IMO, clearly documenting the side effects of any such functions is more
    > than enough.

    > Mike C

I agree.
I've also been authoring a package with one function whose
*purpose* it is to modify par() conveniently.
The function is very old (older than R; I wrote it for S /
S-plus in my first post-doc year in 1990:
  https://search.r-project.org/CRAN/refmans/sfsmisc/html/mult.fig.html

It *is* however careful to return the previous par() {in <result>$old.par  }
such that when you use mult.fig() in a function or an R script, you can easily
add an on.exit() in your function or use par(<....>) directly to revert the global par()
to its original values.

Martin


    > On Thu, Aug 21, 2025 at 1:45?AM Jan van der Laan <rhelp at eoos.dds.nl> wrote:

    >> 
    >> 
    >> Someone asked for the response I got from CRAN. I included it below:
    >> 
    >> ---
    >> [... another issue where I forgot a \value{} in the documentation of one
    >> of the functions]
    >> 
    >> Please make sure that you do not change the user's options, par or
    >> working directory. If you really have to do so within functions, please
    >> ensure with an *immediate* call of on.exit() that the settings are reset
    >> when the function is exited.
    >> e.g.:
    >> ...
    >> oldpar <- par(no.readonly = TRUE) # code line i
    >> on.exit(par(oldpar)) # code line i + 1
    >> ...
    >> par(mfrow=c(2,2)) # somewhere after
    >> ...
    >> e.g.: -> R/tgp.R
    >> If you're not familiar with the function, please check ?on.exit. This
    >> function makes it possible to restore options before exiting a function
    >> even if the function breaks. Therefore it needs to be called immediately
    >> after the option change within a function.
    >> For more details:
    >> <
    >> https://contributor.r-project.org/cran-cookbook/code_issues.html#change-of-options-graphical-parameters-and-working-directory
    >> >
    >> 
    >> Please fix and resubmit.
    >> ---
    >> 
    >> I understand why this is asked and I also know how to handle this in
    >> usual cases. I am not sure how to handle this in the specific case here.
    >> Perhaps I missed some alternative way of handling this.
    >> 
    >> Best,
    >> Jan
    >> 
    >> 
    >> On 8/20/25 21:31, Jan van der Laan wrote:
    >> > I recently submitted a package to CRAN that creates a device that
    >> > outputs into the terminal (for terminals that support the Terminal
    >> > Graphics Protocol (and hopefully in the future also terminals that
    >> > support sixel)) [1].
    >> >
    >> > It introduces a 'tgp' function that does the following:
    >> >
    >> > 1. It opens a ragg::agg_capture device.
    >> >
    >> > 2. When term_col = TRUE: sets the background and foreground colors of
    >> > the device to those of the terminal (when these can be detected).
    >> >
    >> > 3. Every time the ragg:agg_capture device is updated: updates the plot
    >> > in the terminal.
    >> >
    >> > Point 2 raises an issue from CRAN as par() changes some properties and
    >> > these are not set back at the and of the function call. This is
    >> > intentional, as otherwise setting them would be useless; it is the
    >> > intention that the colors of subsequent plot calls are changed.  I am
    >> > not sure how I can set the colors of the device to those in the terminal
    >> > (as requested by the user) without violating this rule.
    >> >
    >> > Are there alternative ways of helping the user to set the colors of the
    >> > device without violating this issue?
    >> >
    >> > Could this be an exception to the rule as the argument intentionally
    >> > changes par()? This could be made more explicit by changing the default
    >> > value to FALSE. I guess this question is better asked at the CRAN
    >> > maintainers, but perhaps there are other package that do something
    >> > similar that I might look at.
    >> >
    >> > Instead of having this functionality in the tgp() function, I could
    >> > create a 'set_figure_colours_to_terminal()` function (perhaps with a
    >> > corresponding reset function). However, this function would run into the
    >> > same issue.
    >> >
    >> > I appreciate any suggestions/help that yoy could give.
    >> >
    >> > Best,
    >> > Jan
    >> >
    >> >
    >> >
    >> >
    >> > [1] The current version of the code can be found here: https://
    >> > codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev
    >> >
    >> > ______________________________________________
    >> > R-package-devel at r-project.org mailing list
    >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> 
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> 

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Qu|r|n_St|er @end|ng |rom gmx@de  Fri Aug 22 16:05:31 2025
From: Qu|r|n_St|er @end|ng |rom gmx@de (quirin stier)
Date: Fri, 22 Aug 2025 16:05:31 +0200
Subject: [R-pkg-devel] OpenCL Headers in R packages
Message-ID: <9091fe96-f2f0-4792-a0e3-03ecf245e9c5@gmx.de>

Hi everyone,

building an R package following the work of Simon Urbanek 
(https://github.com/s-u/OpenCL and 
https://cran.r-project.org/web/packages/OpenCL/index.html) still yields 
the error from CRAN about environmental variables required for linking.

Could you please tell me more about the procedure (or possible 
formalities with CRAN) how to submit an R package using OpenCL headers?

Best regards,

Quirin


From rhe|p @end|ng |rom eoo@@dd@@n|  Fri Aug 22 18:18:28 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Fri, 22 Aug 2025 18:18:28 +0200
Subject: [R-pkg-devel] Issue with use of par() in package
In-Reply-To: <26792.6367.627433.111006@stat.math.ethz.ch>
References: <87dbbfc8-48be-4e5a-b188-988656d36572@eoos.dds.nl>
 <ab3d2088-1730-47a3-ab42-ad4ca29a9dec@eoos.dds.nl>
 <CAPRVBcy=3RExZNtfft8gPx6wdU9tcOUt=cy1ftzbut+Ae4c5Fg@mail.gmail.com>
 <26792.6367.627433.111006@stat.math.ethz.ch>
Message-ID: <3d266700-a340-4607-9f14-24fc69bd97b7@eoos.dds.nl>

Thanks Micheal and Martin,

I have contacted the people from CRAN, and they have let me know that in 
this case it is indeed reasonable to set par and not set it back.

I will also think about Martins suggestion. Currently I return an other 
object, but I might be able to add the old par-values to that.

Thanks.

Best,
Jan



On 8/22/25 09:14, Martin Maechler wrote:
>>>>>> Michael Chirico
>>>>>>      on Thu, 21 Aug 2025 12:56:41 -0700 writes:
> 
>      > I can understand caution about functions with side effects, but rejecting a
>      > package on those grounds alone seems strange to me.
> 
>      > I can easily find thousands of calls to par() on CRAN without any
>      > associated on.exit() cleanup ([1] [2] [3] [4] with a full regex search [5])
> 
>      > [1]
>      > https://github.com/cran/raster/blob/3f64977b51a3b7c565f1309a462cb35f66daeafe/R/hist.R#L44
>      > [2]
>      > https://github.com/cran/quantreg/blob/43abb16645d5e78d1377896ebd19d760efd2ace9/R/khmal.R#L107-L115
>      > [3]
>      > https://github.com/cran/SensoMineR/blob/c9a159cb445e538c953d27de54288897882b3c91/R/barrow.R#L1
>      > [4]
>      > https://github.com/cran/GD/blob/1ce7c3c8b63dafb1d9d0a9e2ffcd6af4917fa077/R/sesu.R#L25
>      > [5]
>      > https://github.com/search?q=org%3Acran+%2F%5Cn%5B%5E%23%5D*%5B%5E%5Cw.%5Dpar%5C%28%5B+%5Cn%5D*%5B%5E.%29+%5Cn%22%27%5D%2F+path%3A%2F%5C.R%24%2F+NOT+%22on.exit%22+NOT+path%3A%2Fdemo%2F+NOT+path%3A%2Ftests%2F&type=code
> 
>      > I see no reference to 'par' inside {tools} (in particular QC.R), so R CMD
>      > check is not looking for this.
> 
>      > IMO, clearly documenting the side effects of any such functions is more
>      > than enough.
> 
>      > Mike C
> 
> I agree.
> I've also been authoring a package with one function whose
> *purpose* it is to modify par() conveniently.
> The function is very old (older than R; I wrote it for S /
> S-plus in my first post-doc year in 1990:
>    https://search.r-project.org/CRAN/refmans/sfsmisc/html/mult.fig.html
> 
> It *is* however careful to return the previous par() {in <result>$old.par  }
> such that when you use mult.fig() in a function or an R script, you can easily
> add an on.exit() in your function or use par(<....>) directly to revert the global par()
> to its original values.
> 
> Martin
> 
> 
>      > On Thu, Aug 21, 2025 at 1:45?AM Jan van der Laan <rhelp at eoos.dds.nl> wrote:
> 
>      >>
>      >>
>      >> Someone asked for the response I got from CRAN. I included it below:
>      >>
>      >> ---
>      >> [... another issue where I forgot a \value{} in the documentation of one
>      >> of the functions]
>      >>
>      >> Please make sure that you do not change the user's options, par or
>      >> working directory. If you really have to do so within functions, please
>      >> ensure with an *immediate* call of on.exit() that the settings are reset
>      >> when the function is exited.
>      >> e.g.:
>      >> ...
>      >> oldpar <- par(no.readonly = TRUE) # code line i
>      >> on.exit(par(oldpar)) # code line i + 1
>      >> ...
>      >> par(mfrow=c(2,2)) # somewhere after
>      >> ...
>      >> e.g.: -> R/tgp.R
>      >> If you're not familiar with the function, please check ?on.exit. This
>      >> function makes it possible to restore options before exiting a function
>      >> even if the function breaks. Therefore it needs to be called immediately
>      >> after the option change within a function.
>      >> For more details:
>      >> <
>      >> https://contributor.r-project.org/cran-cookbook/code_issues.html#change-of-options-graphical-parameters-and-working-directory
>      >> >
>      >>
>      >> Please fix and resubmit.
>      >> ---
>      >>
>      >> I understand why this is asked and I also know how to handle this in
>      >> usual cases. I am not sure how to handle this in the specific case here.
>      >> Perhaps I missed some alternative way of handling this.
>      >>
>      >> Best,
>      >> Jan
>      >>
>      >>
>      >> On 8/20/25 21:31, Jan van der Laan wrote:
>      >> > I recently submitted a package to CRAN that creates a device that
>      >> > outputs into the terminal (for terminals that support the Terminal
>      >> > Graphics Protocol (and hopefully in the future also terminals that
>      >> > support sixel)) [1].
>      >> >
>      >> > It introduces a 'tgp' function that does the following:
>      >> >
>      >> > 1. It opens a ragg::agg_capture device.
>      >> >
>      >> > 2. When term_col = TRUE: sets the background and foreground colors of
>      >> > the device to those of the terminal (when these can be detected).
>      >> >
>      >> > 3. Every time the ragg:agg_capture device is updated: updates the plot
>      >> > in the terminal.
>      >> >
>      >> > Point 2 raises an issue from CRAN as par() changes some properties and
>      >> > these are not set back at the and of the function call. This is
>      >> > intentional, as otherwise setting them would be useless; it is the
>      >> > intention that the colors of subsequent plot calls are changed.  I am
>      >> > not sure how I can set the colors of the device to those in the terminal
>      >> > (as requested by the user) without violating this rule.
>      >> >
>      >> > Are there alternative ways of helping the user to set the colors of the
>      >> > device without violating this issue?
>      >> >
>      >> > Could this be an exception to the rule as the argument intentionally
>      >> > changes par()? This could be made more explicit by changing the default
>      >> > value to FALSE. I guess this question is better asked at the CRAN
>      >> > maintainers, but perhaps there are other package that do something
>      >> > similar that I might look at.
>      >> >
>      >> > Instead of having this functionality in the tgp() function, I could
>      >> > create a 'set_figure_colours_to_terminal()` function (perhaps with a
>      >> > corresponding reset function). However, this function would run into the
>      >> > same issue.
>      >> >
>      >> > I appreciate any suggestions/help that yoy could give.
>      >> >
>      >> > Best,
>      >> > Jan
>      >> >
>      >> >
>      >> >
>      >> >
>      >> > [1] The current version of the code can be found here: https://
>      >> > codeberg.org/djvanderlaan/terminalgraphics/src/branch/dev
>      >> >
>      >> > ______________________________________________
>      >> > R-package-devel at r-project.org mailing list
>      >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
> 
>      > [[alternative HTML version deleted]]
> 
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |kry|ov @end|ng |rom d|@root@org  Fri Aug 22 22:59:13 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 22 Aug 2025 23:59:13 +0300
Subject: [R-pkg-devel] OpenCL Headers in R packages
In-Reply-To: <9091fe96-f2f0-4792-a0e3-03ecf245e9c5@gmx.de>
References: <9091fe96-f2f0-4792-a0e3-03ecf245e9c5@gmx.de>
Message-ID: <20250822235913.18b2f8be@Tarkus>

? Fri, 22 Aug 2025 16:05:31 +0200
quirin stier <Quirin_Stier at gmx.de> ?????:

> Hi everyone,
> 
> building an R package following the work of Simon Urbanek 
> (https://github.com/s-u/OpenCL and 
> https://cran.r-project.org/web/packages/OpenCL/index.html) still
> yields the error from CRAN about environmental variables required for
> linking.

In theory, copying the OpenCL approach should have been enough (most
Windows users would get the binaries from CRAN and not worry about
environment variables), except (as you point out) OpenCL is not
currently built on Win-Builder for R-release and R-devel (only R-oldrel
works). I think you need to ask Uwe Ligges to help set up the OpenCL
SDK for R-release and R-devel the same way it's set up for R-oldrel.
But there might be a better solution:

> Could you please tell me more about the procedure (or possible 
> formalities with CRAN) how to submit an R package using OpenCL
> headers?

Since a free software (Apache-2.0) OpenCL SDK exists [1], it could be
made part of Rtools, which is the recommended approach for non-trivial
third-party dependencies [2]. It's already packaged in MSYS2 [3], but
not in MXE. I think the best way forward is to write an MXE Makefile
[4] to produce a package with the OpenCL headers, the import library,
and the ICD loader.

There is one complication: unlike most third-party dependencies in
Rtools, OpenCL must be dynamically linked. This probably means
packaging OpenCL.dll and putting it on the %PATH% (so that R packages
can be built and loaded even on systems without a real OpenCL ICD).
Hopefully this won't cause any conflicts with the system OpenCL.dll
(all it needs to do is export a standard set of functions and look for
ICDs in standard locations).

Someone even started that work back in 2017 [5], but didn't complete
it. Try contacting the people who worked the GitHub pull request, see
if they need any help. When MXE accepts the patch, or if you get stuck,
ask Tomas Kalibera about including the two packages in Rtools.

-- 
Best regards,
Ivan

[1]
https://github.com/KhronosGroup/OpenCL-ICD-Loader
https://github.com/KhronosGroup/OpenCL-Headers

[2]
https://cran.r-project.org/web/packages/external_libs.html#Windows

[3]
https://packages.msys2.org/base/mingw-w64-opencl-headers
https://packages.msys2.org/base/mingw-w64-opencl-icd

[4]
https://mxe.cc/#creating-packages

[5]
https://github.com/mxe/mxe/pull/1938


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Mon Aug 25 08:45:29 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Mon, 25 Aug 2025 06:45:29 +0000
Subject: [R-pkg-devel] CRAN submission status lost
Message-ID: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Hi,

After submitting a newbie package to CRAN, I received a notification after the automatic checks that it was pending a manual check.
However, I haven't heard back from CRAN since. Also, it is nowhere to be found on <https://cran.r-project.org/incoming/>

Should I wait to receive a report on the manual check, or should I contact CRAN?

P.S., Results of the automatic check are here:
<https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/>


From kr|@t|@n@|||@nd @end|ng |rom nmbu@no  Mon Aug 25 08:53:30 2025
From: kr|@t|@n@|||@nd @end|ng |rom nmbu@no (Kristian Hovde Liland)
Date: Mon, 25 Aug 2025 06:53:30 +0000
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>

Hi Pepijn,

You can see your package at https://cran.r-project.org/incoming/newbies/. Note that sorting is a bit special with capital first letters first, then packages with small first letters. It has only been four days according to the date stamp, so maybe give it a couple more days.

Regards,
Kristian

Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne av Pepijn de Vries <pepijn.devries at outlook.com>
Dato: mandag, 25. august 2025 kl. 08:45
Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
Emne: [R-pkg-devel] CRAN submission status lost

Hi,

After submitting a newbie package to CRAN, I received a notification after the automatic checks that it was pending a manual check.
However, I haven't heard back from CRAN since. Also, it is nowhere to be found on <https://cran.r-project.org/incoming/>

Should I wait to receive a report on the manual check, or should I contact CRAN?

P.S., Results of the automatic check are here:
<https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Aug 25 10:02:42 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 25 Aug 2025 10:02:42 +0200
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
Message-ID: <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>

Indeed, as the auto notification says "A CRAN team member will typically 
respond to you within the next 10 working days." Only two passed so far. 
CRAN received > 100 newbie submissions within three days.

Best,
Uwe Ligges


On 25.08.2025 08:53, Kristian Hovde Liland wrote:
> Hi Pepijn,
> 
> You can see your package at https://cran.r-project.org/incoming/newbies/. Note that sorting is a bit special with capital first letters first, then packages with small first letters. It has only been four days according to the date stamp, so maybe give it a couple more days.
> 
> Regards,
> Kristian
> 
> Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne av Pepijn de Vries <pepijn.devries at outlook.com>
> Dato: mandag, 25. august 2025 kl. 08:45
> Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
> Emne: [R-pkg-devel] CRAN submission status lost
> 
> Hi,
> 
> After submitting a newbie package to CRAN, I received a notification after the automatic checks that it was pending a manual check.
> However, I haven't heard back from CRAN since. Also, it is nowhere to be found on <https://cran.r-project.org/incoming/>
> 
> Should I wait to receive a report on the manual check, or should I contact CRAN?
> 
> P.S., Results of the automatic check are here:
> <https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Mon Aug 25 11:03:38 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Mon, 25 Aug 2025 09:03:38 +0000
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
 <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
Message-ID: <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Hi Both,

Thanks for the quick response. Indeed, it was my bad. I overlooked the listing at CRAN incoming due to the sorting. I will patiently await the report of the manual inspection.

Pepijn


________________________________________
Van:?Uwe Ligges
Verzonden:?Maandag, 25 Augustus, 2025 10:02
Aan:?Kristian Hovde Liland; Pepijn de Vries; Ivan Krylov via R-package-devel
Onderwerp:?Re: [R-pkg-devel] Svar: CRAN submission status lost


Indeed, as the auto notification says "A CRAN team member will typically

respond to you within the next 10 working days." Only two passed so far.

CRAN received > 100 newbie submissions within three days.



Best,

Uwe Ligges





On 25.08.2025 08:53, Kristian Hovde Liland wrote:

> Hi Pepijn,

>

> You can see your package at https://cran.r-project.org/incoming/newbies/. Note that sorting is a bit special with capital first letters first, then packages with small first letters. It has only been four days according to the date stamp, so maybe give it a couple more days.

>

> Regards,

> Kristian

>

> Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne av Pepijn de Vries <pepijn.devries at outlook.com>

> Dato: mandag, 25. august 2025 kl. 08:45

> Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>

> Emne: [R-pkg-devel] CRAN submission status lost

>

> Hi,

>

> After submitting a newbie package to CRAN, I received a notification after the automatic checks that it was pending a manual check.

> However, I haven't heard back from CRAN since. Also, it is nowhere to be found on <https://cran.r-project.org/incoming/>

>

> Should I wait to receive a report on the manual check, or should I contact CRAN?

>

> P.S., Results of the automatic check are here:

> <https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/>

>

> ______________________________________________

> R-package-devel at r-project.org mailing list

> https://stat.ethz.ch/mailman/listinfo/r-package-devel

>

>??????? [[alternative HTML version deleted]]

>

>

> ______________________________________________

> R-package-devel at r-project.org mailing list

> https://stat.ethz.ch/mailman/listinfo/r-package-devel




From jo@|@h@p@rry @end|ng |rom gm@||@com  Tue Aug 26 21:02:28 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Tue, 26 Aug 2025 12:02:28 -0700
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
 <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
 <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CAL3ufULUrXOsBnMCx3EbAdc8tTAopW+ovKJYEOEV0T2TJcm6zw@mail.gmail.com>

Pepijn, I bookmarked this shiny app a while ago:
https://r-hub.github.io/cransays/articles/dashboard.html

super helpful for the "is it just me? Did i miss something?" view. It lets
you see if other people have been waiting as well.

On Mon, Aug 25, 2025 at 2:03?AM Pepijn de Vries <pepijn.devries at outlook.com>
wrote:

> Hi Both,
>
> Thanks for the quick response. Indeed, it was my bad. I overlooked the
> listing at CRAN incoming due to the sorting. I will patiently await the
> report of the manual inspection.
>
> Pepijn
>
>
> ________________________________________
> Van: Uwe Ligges
> Verzonden: Maandag, 25 Augustus, 2025 10:02
> Aan: Kristian Hovde Liland; Pepijn de Vries; Ivan Krylov via
> R-package-devel
> Onderwerp: Re: [R-pkg-devel] Svar: CRAN submission status lost
>
>
> Indeed, as the auto notification says "A CRAN team member will typically
>
> respond to you within the next 10 working days." Only two passed so far.
>
> CRAN received > 100 newbie submissions within three days.
>
>
>
> Best,
>
> Uwe Ligges
>
>
>
>
>
> On 25.08.2025 08:53, Kristian Hovde Liland wrote:
>
> > Hi Pepijn,
>
> >
>
> > You can see your package at https://cran.r-project.org/incoming/newbies/.
> Note that sorting is a bit special with capital first letters first, then
> packages with small first letters. It has only been four days according to
> the date stamp, so maybe give it a couple more days.
>
> >
>
> > Regards,
>
> > Kristian
>
> >
>
> > Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne
> av Pepijn de Vries <pepijn.devries at outlook.com>
>
> > Dato: mandag, 25. august 2025 kl. 08:45
>
> > Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
>
> > Emne: [R-pkg-devel] CRAN submission status lost
>
> >
>
> > Hi,
>
> >
>
> > After submitting a newbie package to CRAN, I received a notification
> after the automatic checks that it was pending a manual check.
>
> > However, I haven't heard back from CRAN since. Also, it is nowhere to be
> found on <https://cran.r-project.org/incoming/>
>
> >
>
> > Should I wait to receive a report on the manual check, or should I
> contact CRAN?
>
> >
>
> > P.S., Results of the automatic check are here:
>
> > <
> https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/
> >
>
> >
>
> > ______________________________________________
>
> > R-package-devel at r-project.org mailing list
>
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> >
>
> >        [[alternative HTML version deleted]]
>
> >
>
> >
>
> > ______________________________________________
>
> > R-package-devel at r-project.org mailing list
>
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Aug 27 11:54:45 2025
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 27 Aug 2025 10:54:45 +0100
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <CAL3ufULUrXOsBnMCx3EbAdc8tTAopW+ovKJYEOEV0T2TJcm6zw@mail.gmail.com>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
 <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
 <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <CAL3ufULUrXOsBnMCx3EbAdc8tTAopW+ovKJYEOEV0T2TJcm6zw@mail.gmail.com>
Message-ID: <c4c01b9f-5ab8-4300-a957-3418546ad800@dewey.myzen.co.uk>

There is also the CRAN package foghorn with, amongst others, the handy 
cran_incoming function.

Michael

On 26/08/2025 20:02, Josiah Parry wrote:
> Pepijn, I bookmarked this shiny app a while ago:
> https://r-hub.github.io/cransays/articles/dashboard.html
> 
> super helpful for the "is it just me? Did i miss something?" view. It lets
> you see if other people have been waiting as well.
> 
> On Mon, Aug 25, 2025 at 2:03?AM Pepijn de Vries <pepijn.devries at outlook.com>
> wrote:
> 
>> Hi Both,
>>
>> Thanks for the quick response. Indeed, it was my bad. I overlooked the
>> listing at CRAN incoming due to the sorting. I will patiently await the
>> report of the manual inspection.
>>
>> Pepijn
>>
>>
>> ________________________________________
>> Van: Uwe Ligges
>> Verzonden: Maandag, 25 Augustus, 2025 10:02
>> Aan: Kristian Hovde Liland; Pepijn de Vries; Ivan Krylov via
>> R-package-devel
>> Onderwerp: Re: [R-pkg-devel] Svar: CRAN submission status lost
>>
>>
>> Indeed, as the auto notification says "A CRAN team member will typically
>>
>> respond to you within the next 10 working days." Only two passed so far.
>>
>> CRAN received > 100 newbie submissions within three days.
>>
>>
>>
>> Best,
>>
>> Uwe Ligges
>>
>>
>>
>>
>>
>> On 25.08.2025 08:53, Kristian Hovde Liland wrote:
>>
>>> Hi Pepijn,
>>
>>>
>>
>>> You can see your package at https://cran.r-project.org/incoming/newbies/.
>> Note that sorting is a bit special with capital first letters first, then
>> packages with small first letters. It has only been four days according to
>> the date stamp, so maybe give it a couple more days.
>>
>>>
>>
>>> Regards,
>>
>>> Kristian
>>
>>>
>>
>>> Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne
>> av Pepijn de Vries <pepijn.devries at outlook.com>
>>
>>> Dato: mandag, 25. august 2025 kl. 08:45
>>
>>> Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
>>
>>> Emne: [R-pkg-devel] CRAN submission status lost
>>
>>>
>>
>>> Hi,
>>
>>>
>>
>>> After submitting a newbie package to CRAN, I received a notification
>> after the automatic checks that it was pending a manual check.
>>
>>> However, I haven't heard back from CRAN since. Also, it is nowhere to be
>> found on <https://cran.r-project.org/incoming/>
>>
>>>
>>
>>> Should I wait to receive a report on the manual check, or should I
>> contact CRAN?
>>
>>>
>>
>>> P.S., Results of the automatic check are here:
>>
>>> <
>> https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/
>>>
>>
>>>
>>
>>> ______________________________________________
>>
>>> R-package-devel at r-project.org mailing list
>>
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>
>>
>>>         [[alternative HTML version deleted]]
>>
>>>
>>
>>>
>>
>>> ______________________________________________
>>
>>> R-package-devel at r-project.org mailing list
>>
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Michael Dewey


From edd @end|ng |rom deb|@n@org  Wed Aug 27 13:28:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 27 Aug 2025 06:28:31 -0500
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <c4c01b9f-5ab8-4300-a957-3418546ad800@dewey.myzen.co.uk>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
 <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
 <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <CAL3ufULUrXOsBnMCx3EbAdc8tTAopW+ovKJYEOEV0T2TJcm6zw@mail.gmail.com>
 <c4c01b9f-5ab8-4300-a957-3418546ad800@dewey.myzen.co.uk>
Message-ID: <26798.60383.100896.682400@paul.eddelbuettel.com>


On 27 August 2025 at 10:54, Michael Dewey wrote:
| There is also the CRAN package foghorn with, amongst others, the handy 
| cran_incoming function.

There is also the 'ciw' package with its 'ciw()' (== 'CRAN Incoming Watcher')
function that is a little lighter and faster.

Which is yseful for a quick run at the R prompt, or, via the `littler`
wrapper ciw.r at the command-line, which is what I do.  

$ ciw.r 
     Folder                       Name                Time   Size          Age
     <char>                     <char>              <POSc> <char>   <difftime>
 1: pretest    DendroSync_0.1.5.tar.gz 2025-08-27 13:19:00    32K   0.08 hours
 2: pretest       cobin_1.0.1.3.tar.gz 2025-08-27 13:11:00    34K   0.22 hours
 3: waiting    azuremapsr_0.0.2.tar.gz 2025-08-27 12:09:00    14K   1.25 hours
 4: waiting         CTxCC_0.4.0.tar.gz 2025-08-27 05:21:00    12K   8.05 hours
 5: waiting      capybara_1.7.0.tar.gz 2025-08-27 03:17:00   367K  10.12 hours
 6: waiting          Hmsc_3.3-7.tar.gz 2025-08-26 20:29:00   2.4M  16.92 hours
 7: waiting       fingerPro_2.0.tar.gz 2025-08-26 15:55:00    64K  21.48 hours
 8: waiting   treespace_1.1.4.4.tar.gz 2025-08-26 14:33:00   7.6M  22.85 hours
 9: waiting MplusAutomation_1.2.tar.gz 2025-08-26 14:14:00   1.5M  23.17 hours
10: waiting    rasterVis_0.51.7.tar.gz 2025-08-24 07:37:00    49K  77.78 hours
11: waiting     KbMvtSkew_1.1.0.tar.gz 2025-08-23 00:35:00    13K 108.82 hours
12: waiting      bipartite_2.22.tar.gz 2025-08-21 14:54:00   4.3M 142.50 hours
$

Default settings stop at 168 hours, 50 packages, and skip 'newbies', all that
can be overriden via command-libe flags to 'ciw,r' or arguments to
'ciw::ciw()'. It also sorts the display by 'Age' so often you see the states
'pretest', 'waiting', 'recheck' and 'inspect' intermixed.

$ ciw.r -h
Usage: ciw.r [-h] [-x] [-a] [-m] [-i] [-t] [-p] [-w] [-r] [-s] [-n] [-u] [-l rows] [-g age] [-z] [ARG...]

-m --mega           use 'mega' mode of all folders (see --usage)
-i --inspect        visit 'inspect' folder
-t --pretest        visit 'pretest' folder
-p --pending        visit 'pending' folder
-w --waiting        visit 'waiting' folder
-r --recheck        visit 'recheck' folder
-a --archive        visit 'archive' folder
-n --newbies        visit 'newbies' folder
-u --publish        visit 'publish' folder
-s --skipsort       skip sorting of aggregate results by age
-l --lines rows     print top 'rows' of the result object [default: 50]
-g --max age        print only package less than 'age' hours old [default: 168]
-z --ping           run the connectivity check first
-h --help           show this help text
-x --usage          show help and short example usage 
$ 

Dirk

| 
| Michael
| 
| On 26/08/2025 20:02, Josiah Parry wrote:
| > Pepijn, I bookmarked this shiny app a while ago:
| > https://r-hub.github.io/cransays/articles/dashboard.html
| > 
| > super helpful for the "is it just me? Did i miss something?" view. It lets
| > you see if other people have been waiting as well.
| > 
| > On Mon, Aug 25, 2025 at 2:03?AM Pepijn de Vries <pepijn.devries at outlook.com>
| > wrote:
| > 
| >> Hi Both,
| >>
| >> Thanks for the quick response. Indeed, it was my bad. I overlooked the
| >> listing at CRAN incoming due to the sorting. I will patiently await the
| >> report of the manual inspection.
| >>
| >> Pepijn
| >>
| >>
| >> ________________________________________
| >> Van: Uwe Ligges
| >> Verzonden: Maandag, 25 Augustus, 2025 10:02
| >> Aan: Kristian Hovde Liland; Pepijn de Vries; Ivan Krylov via
| >> R-package-devel
| >> Onderwerp: Re: [R-pkg-devel] Svar: CRAN submission status lost
| >>
| >>
| >> Indeed, as the auto notification says "A CRAN team member will typically
| >>
| >> respond to you within the next 10 working days." Only two passed so far.
| >>
| >> CRAN received > 100 newbie submissions within three days.
| >>
| >>
| >>
| >> Best,
| >>
| >> Uwe Ligges
| >>
| >>
| >>
| >>
| >>
| >> On 25.08.2025 08:53, Kristian Hovde Liland wrote:
| >>
| >>> Hi Pepijn,
| >>
| >>>
| >>
| >>> You can see your package at https://cran.r-project.org/incoming/newbies/.
| >> Note that sorting is a bit special with capital first letters first, then
| >> packages with small first letters. It has only been four days according to
| >> the date stamp, so maybe give it a couple more days.
| >>
| >>>
| >>
| >>> Regards,
| >>
| >>> Kristian
| >>
| >>>
| >>
| >>> Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne
| >> av Pepijn de Vries <pepijn.devries at outlook.com>
| >>
| >>> Dato: mandag, 25. august 2025 kl. 08:45
| >>
| >>> Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
| >>
| >>> Emne: [R-pkg-devel] CRAN submission status lost
| >>
| >>>
| >>
| >>> Hi,
| >>
| >>>
| >>
| >>> After submitting a newbie package to CRAN, I received a notification
| >> after the automatic checks that it was pending a manual check.
| >>
| >>> However, I haven't heard back from CRAN since. Also, it is nowhere to be
| >> found on <https://cran.r-project.org/incoming/>
| >>
| >>>
| >>
| >>> Should I wait to receive a report on the manual check, or should I
| >> contact CRAN?
| >>
| >>>
| >>
| >>> P.S., Results of the automatic check are here:
| >>
| >>> <
| >> https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/
| >>>
| >>
| >>>
| >>
| >>> ______________________________________________
| >>
| >>> R-package-devel at r-project.org mailing list
| >>
| >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| >>>
| >>
| >>>         [[alternative HTML version deleted]]
| >>
| >>>
| >>
| >>>
| >>
| >>> ______________________________________________
| >>
| >>> R-package-devel at r-project.org mailing list
| >>
| >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| >>
| >>
| >> ______________________________________________
| >> R-package-devel at r-project.org mailing list
| >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| > 
| > 	[[alternative HTML version deleted]]
| > 
| > ______________________________________________
| > R-package-devel at r-project.org mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| 
| -- 
| Michael Dewey
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Aug 27 16:33:04 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 27 Aug 2025 09:33:04 -0500
Subject: [R-pkg-devel] corrupt parsing in GitHub Action
Message-ID: <02a796e2-d57d-4f42-aca4-9747fdcf3ffe@effectivedefense.org>

Hello, All:


The R parser in GitHub action seems to be getting corrupted in 
processing "sbgraves237/Ecdat".[1] For one, I'm getting:


358:22: unexpected symbol
357: ##
358: plotUSGPDpresidents('fedReceipts


I replace the single quote with a double quote and get the same problem 
with a single quote later ... except when it gets to:


plot(USGDPpresidents[, "Year"], Surp2-Surplus, type='l')


In that line, it doesn't like either single or double quotes.


What do you suggest I do to get past this?
Thanks,
Spencer Graves


[1]


https://github.com/sbgraves237/Ecdat/actions/runs/17269330174/job/49009447288


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Aug 27 16:45:02 2025
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 27 Aug 2025 16:45:02 +0200
Subject: [R-pkg-devel] corrupt parsing in GitHub Action
In-Reply-To: <02a796e2-d57d-4f42-aca4-9747fdcf3ffe@effectivedefense.org>
References: <02a796e2-d57d-4f42-aca4-9747fdcf3ffe@effectivedefense.org>
Message-ID: <CABtg=Kk41m+Bb9izb8gaiQR-jubSuceRzkG-_cXwOe+FZKT-4A@mail.gmail.com>

This has nothing to do with any GitHub Action. Your example is
corrupt, you need to escape `%` characters in .Rd files.

Gabor

On Wed, Aug 27, 2025 at 4:33?PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
> The R parser in GitHub action seems to be getting corrupted in
> processing "sbgraves237/Ecdat".[1] For one, I'm getting:
>
>
> 358:22: unexpected symbol
> 357: ##
> 358: plotUSGPDpresidents('fedReceipts
>
>
> I replace the single quote with a double quote and get the same problem
> with a single quote later ... except when it gets to:
>
>
> plot(USGDPpresidents[, "Year"], Surp2-Surplus, type='l')
>
>
> In that line, it doesn't like either single or double quotes.
>
>
> What do you suggest I do to get past this?
> Thanks,
> Spencer Graves
>
>
> [1]
>
>
> https://github.com/sbgraves237/Ecdat/actions/runs/17269330174/job/49009447288
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Aug 27 20:22:14 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 27 Aug 2025 13:22:14 -0500
Subject: [R-pkg-devel] help understanding "CRAN Package Check Results for
 Package Ecdat"
Message-ID: <87a09244-db25-4445-95c9-48c81ead78a3@effectivedefense.org>

Hello, All:


"CRAN Package Check Results for Package Ecdat"[1] flags a "NOTE" on all 
platforms. I don't understand any of them.


For example, the check results from some but not all platforms include:


** No Authors at R field in DESCRIPTION.
Please add one, modifying
   Authors at R: c(person(given = "Yves",
                       family = "Croissant",
                       role = "aut",
                       email = "yves.croissant at let.ish-lyon.cnrs.fr"),
                person(given = "Spencer",
                       family = "Graves",
                       role = c("aut", "cre"),
                       email = "spencer.graves at effectivedefense.org"))
as necessary.


** The DESCRIPTION file includes exactly this Author at R field, which 
seems to be what they want, but which I read as complaining it's not 
there. ???


** Some of these check results also complain about "Lost braces". The 
braces seem to be there with the standard syntax that I understand from 
what I read in "Writing R Extensions".


** "Found the following Rd file(s) with Rd \link{} targets missing 
package anchors:
   USFinanceIndustry.Rd: readNIPA"


** In that Rd file, I find "\code{\link[Ecfun]{readNIPA}}"


What am I missing? Thanks, Spencer Graves


[1]


https://cran.rstudio.com//web/checks/check_results_Ecdat.html


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Aug 27 21:13:01 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 27 Aug 2025 15:13:01 -0400
Subject: [R-pkg-devel] 
 help understanding "CRAN Package Check Results for Package Ecdat"
In-Reply-To: <87a09244-db25-4445-95c9-48c81ead78a3@effectivedefense.org>
References: <87a09244-db25-4445-95c9-48c81ead78a3@effectivedefense.org>
Message-ID: <c6c60d3a-1915-4091-8e7e-db30e2604356@gmail.com>

On 2025-08-27 2:22 p.m., Spencer Graves wrote:
> Hello, All:
> 
> 
> "CRAN Package Check Results for Package Ecdat"[1] flags a "NOTE" on all
> platforms. I don't understand any of them.
> 
> 
> For example, the check results from some but not all platforms include:
> 
> 
> ** No Authors at R field in DESCRIPTION.
> Please add one, modifying
>     Authors at R: c(person(given = "Yves",
>                         family = "Croissant",
>                         role = "aut",
>                         email = "yves.croissant at let.ish-lyon.cnrs.fr"),
>                  person(given = "Spencer",
>                         family = "Graves",
>                         role = c("aut", "cre"),
>                         email = "spencer.graves at effectivedefense.org"))
> as necessary.
> 
> 
> ** The DESCRIPTION file includes exactly this Author at R field, which
> seems to be what they want, but which I read as complaining it's not
> there. ???

Version 0.4-2 didn't include that.  The link you sent points to check 
results for that version (which was uploaded in 2022).
> 
> 
> ** Some of these check results also complain about "Lost braces". The
> braces seem to be there with the standard syntax that I understand from
> what I read in "Writing R Extensions".

I think the "lost braces" are unnecessary braces.  For example, you have

   \doi{10.18128/D010.V10.0}{IPUMS USA: Version 10.0 [dataset]. 
Minneapolis, MN: IPUMS}

as though \doi{} needs two arguments, but it only needs one.
	
> 
> 
> ** "Found the following Rd file(s) with Rd \link{} targets missing
> package anchors:
>     USFinanceIndustry.Rd: readNIPA"
> 
> 
> ** In that Rd file, I find "\code{\link[Ecfun]{readNIPA}}"

In 0.4-2 you have

\seealso{
   \code{\link{readNIPA}}
}

Duncan Murdoch

> 
> 
> What am I missing? Thanks, Spencer Graves
> 
> 
> [1]
> 
> 
> https://cran.rstudio.com//web/checks/check_results_Ecdat.html
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Aug 27 21:24:45 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 27 Aug 2025 14:24:45 -0500
Subject: [R-pkg-devel] 
 help understanding "CRAN Package Check Results for Package Ecdat"
In-Reply-To: <c6c60d3a-1915-4091-8e7e-db30e2604356@gmail.com>
References: <87a09244-db25-4445-95c9-48c81ead78a3@effectivedefense.org>
 <c6c60d3a-1915-4091-8e7e-db30e2604356@gmail.com>
Message-ID: <99922caa-97d0-4b46-9f82-c0c7feb8e956@effectivedefense.org>

Hi, Duncan:


Thanks for the reply.


Please excuse: I should have checked that but didn't think to do so.


Thanks again, Spencer Graves


On 8/27/25 14:13, Duncan Murdoch wrote:
> On 2025-08-27 2:22 p.m., Spencer Graves wrote:
>> Hello, All:
>>
>>
>> "CRAN Package Check Results for Package Ecdat"[1] flags a "NOTE" on all
>> platforms. I don't understand any of them.
>>
>>
>> For example, the check results from some but not all platforms include:
>>
>>
>> ** No Authors at R field in DESCRIPTION.
>> Please add one, modifying
>> ??? Authors at R: c(person(given = "Yves",
>> ??????????????????????? family = "Croissant",
>> ??????????????????????? role = "aut",
>> ??????????????????????? email = "yves.croissant at let.ish-lyon.cnrs.fr"),
>> ???????????????? person(given = "Spencer",
>> ??????????????????????? family = "Graves",
>> ??????????????????????? role = c("aut", "cre"),
>> ??????????????????????? email = "spencer.graves at effectivedefense.org"))
>> as necessary.
>>
>>
>> ** The DESCRIPTION file includes exactly this Author at R field, which
>> seems to be what they want, but which I read as complaining it's not
>> there. ???
> 
> Version 0.4-2 didn't include that.? The link you sent points to check 
> results for that version (which was uploaded in 2022).
>>
>>
>> ** Some of these check results also complain about "Lost braces". The
>> braces seem to be there with the standard syntax that I understand from
>> what I read in "Writing R Extensions".
> 
> I think the "lost braces" are unnecessary braces.? For example, you have
> 
>  ? \doi{10.18128/D010.V10.0}{IPUMS USA: Version 10.0 [dataset]. 
> Minneapolis, MN: IPUMS}
> 
> as though \doi{} needs two arguments, but it only needs one.
> 
>>
>>
>> ** "Found the following Rd file(s) with Rd \link{} targets missing
>> package anchors:
>> ??? USFinanceIndustry.Rd: readNIPA"
>>
>>
>> ** In that Rd file, I find "\code{\link[Ecfun]{readNIPA}}"
> 
> In 0.4-2 you have
> 
> \seealso{
>  ? \code{\link{readNIPA}}
> }
> 
> Duncan Murdoch
> 
>>
>>
>> What am I missing? Thanks, Spencer Graves
>>
>>
>> [1]
>>
>>
>> https://cran.rstudio.com//web/checks/check_results_Ecdat.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Thu Aug 28 00:01:20 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Wed, 27 Aug 2025 22:01:20 +0000
Subject: [R-pkg-devel] Svar: CRAN submission status lost
In-Reply-To: <26798.60383.100896.682400@paul.eddelbuettel.com>
References: <AM8PR10MB4660DA9F2C8ECEA4FA94C85AA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <SV0P279MB05776E3FB6834E877AD564DEFC3EA@SV0P279MB0577.NORP279.PROD.OUTLOOK.COM>
 <f7e0839c-9240-4c3a-acb3-b5f7dbcc7cac@statistik.tu-dortmund.de>
 <AM8PR10MB4660CFEE16F488D9675067FDA73EA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <CAL3ufULUrXOsBnMCx3EbAdc8tTAopW+ovKJYEOEV0T2TJcm6zw@mail.gmail.com>
 <c4c01b9f-5ab8-4300-a957-3418546ad800@dewey.myzen.co.uk>
 <26798.60383.100896.682400@paul.eddelbuettel.com>
Message-ID: <AM8PR10MB4660B59A850A6AE6FF1A1AD6A738A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Thanks for all the tips.

@josiah I'm aware of cransays (It's not a shiny app by the way, it uses pkgdown in combination with GH pages). When I checked it, I missed the paginating button at the bottom. So a silly mistake on my behalf.

@Dirk I was not aware of the 'ciw' package. I will give it a try.

General conclusion is that I need to double check before bothering other people ;).

Pepijn

________________________________________
Van:?Dirk Eddelbuettel <edd at debian.org>
Verzonden:?woensdag 27 augustus 2025 13:28
Aan:?Michael Dewey <lists at dewey.myzen.co.uk>
CC:?Josiah Parry <josiah.parry at gmail.com>; Pepijn de Vries <pepijn.devries at outlook.com>; Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
Onderwerp:?Re: [R-pkg-devel] Svar: CRAN submission status lost
?

On 27 August 2025 at 10:54, Michael Dewey wrote:
| There is also the CRAN package foghorn with, amongst others, the handy
| cran_incoming function.

There is also the 'ciw' package with its 'ciw()' (== 'CRAN Incoming Watcher')
function that is a little lighter and faster.

Which is yseful for a quick run at the R prompt, or, via the `littler`
wrapper ciw.r at the command-line, which is what I do.?

$ ciw.r
???? Folder?????????????????????? Name??????????????? Time?? Size????????? Age
???? <char>???????????????????? <char>????????????? <POSc> <char>?? <difftime>
?1: pretest??? DendroSync_0.1.5.tar.gz 2025-08-27 13:19:00??? 32K?? 0.08 hours
?2: pretest?????? cobin_1.0.1.3.tar.gz 2025-08-27 13:11:00??? 34K?? 0.22 hours
?3: waiting??? azuremapsr_0.0.2.tar.gz 2025-08-27 12:09:00??? 14K?? 1.25 hours
?4: waiting???????? CTxCC_0.4.0.tar.gz 2025-08-27 05:21:00??? 12K?? 8.05 hours
?5: waiting????? capybara_1.7.0.tar.gz 2025-08-27 03:17:00?? 367K? 10.12 hours
?6: waiting????????? Hmsc_3.3-7.tar.gz 2025-08-26 20:29:00?? 2.4M? 16.92 hours
?7: waiting?????? fingerPro_2.0.tar.gz 2025-08-26 15:55:00??? 64K? 21.48 hours
?8: waiting?? treespace_1.1.4.4.tar.gz 2025-08-26 14:33:00?? 7.6M? 22.85 hours
?9: waiting MplusAutomation_1.2.tar.gz 2025-08-26 14:14:00?? 1.5M? 23.17 hours
10: waiting??? rasterVis_0.51.7.tar.gz 2025-08-24 07:37:00??? 49K? 77.78 hours
11: waiting???? KbMvtSkew_1.1.0.tar.gz 2025-08-23 00:35:00??? 13K 108.82 hours
12: waiting????? bipartite_2.22.tar.gz 2025-08-21 14:54:00?? 4.3M 142.50 hours
$

Default settings stop at 168 hours, 50 packages, and skip 'newbies', all that
can be overriden via command-libe flags to 'ciw,r' or arguments to
'ciw::ciw()'. It also sorts the display by 'Age' so often you see the states
'pretest', 'waiting', 'recheck' and 'inspect' intermixed.

$ ciw.r -h
Usage: ciw.r [-h] [-x] [-a] [-m] [-i] [-t] [-p] [-w] [-r] [-s] [-n] [-u] [-l rows] [-g age] [-z] [ARG...]

-m --mega?????????? use 'mega' mode of all folders (see --usage)
-i --inspect??????? visit 'inspect' folder
-t --pretest??????? visit 'pretest' folder
-p --pending??????? visit 'pending' folder
-w --waiting??????? visit 'waiting' folder
-r --recheck??????? visit 'recheck' folder
-a --archive??????? visit 'archive' folder
-n --newbies??????? visit 'newbies' folder
-u --publish??????? visit 'publish' folder
-s --skipsort?????? skip sorting of aggregate results by age
-l --lines rows???? print top 'rows' of the result object [default: 50]
-g --max age??????? print only package less than 'age' hours old [default: 168]
-z --ping?????????? run the connectivity check first
-h --help?????????? show this help text
-x --usage????????? show help and short example usage
$

Dirk

|
| Michael
|
| On 26/08/2025 20:02, Josiah Parry wrote:
| > Pepijn, I bookmarked this shiny app a while ago:
| > https://r-hub.github.io/cransays/articles/dashboard.html
| >
| > super helpful for the "is it just me? Did i miss something?" view. It lets
| > you see if other people have been waiting as well.
| >
| > On Mon, Aug 25, 2025 at 2:03?AM Pepijn de Vries <pepijn.devries at outlook.com>
| > wrote:
| >
| >> Hi Both,
| >>
| >> Thanks for the quick response. Indeed, it was my bad. I overlooked the
| >> listing at CRAN incoming due to the sorting. I will patiently await the
| >> report of the manual inspection.
| >>
| >> Pepijn
| >>
| >>
| >> ________________________________________
| >> Van: Uwe Ligges
| >> Verzonden: Maandag, 25 Augustus, 2025 10:02
| >> Aan: Kristian Hovde Liland; Pepijn de Vries; Ivan Krylov via
| >> R-package-devel
| >> Onderwerp: Re: [R-pkg-devel] Svar: CRAN submission status lost
| >>
| >>
| >> Indeed, as the auto notification says "A CRAN team member will typically
| >>
| >> respond to you within the next 10 working days." Only two passed so far.
| >>
| >> CRAN received > 100 newbie submissions within three days.
| >>
| >>
| >>
| >> Best,
| >>
| >> Uwe Ligges
| >>
| >>
| >>
| >>
| >>
| >> On 25.08.2025 08:53, Kristian Hovde Liland wrote:
| >>
| >>> Hi Pepijn,
| >>
| >>>
| >>
| >>> You can see your package at https://cran.r-project.org/incoming/newbies/.
| >> Note that sorting is a bit special with capital first letters first, then
| >> packages with small first letters. It has only been four days according to
| >> the date stamp, so maybe give it a couple more days.
| >>
| >>>
| >>
| >>> Regards,
| >>
| >>> Kristian
| >>
| >>>
| >>
| >>> Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne
| >> av Pepijn de Vries <pepijn.devries at outlook.com>
| >>
| >>> Dato: mandag, 25. august 2025 kl. 08:45
| >>
| >>> Til: Ivan Krylov via R-package-devel <r-package-devel at r-project.org>
| >>
| >>> Emne: [R-pkg-devel] CRAN submission status lost
| >>
| >>>
| >>
| >>> Hi,
| >>
| >>>
| >>
| >>> After submitting a newbie package to CRAN, I received a notification
| >> after the automatic checks that it was pending a manual check.
| >>
| >>> However, I haven't heard back from CRAN since. Also, it is nowhere to be
| >> found on <https://cran.r-project.org/incoming/>
| >>
| >>>
| >>
| >>> Should I wait to receive a report on the manual check, or should I
| >> contact CRAN?
| >>
| >>>
| >>
| >>> P.S., Results of the automatic check are here:
| >>
| >>> <
| >> https://win-builder.r-project.org/incoming_pretest/blosc_0.0.5_20250821_234040/
| >>>
| >>
| >>>
| >>
| >>> ______________________________________________
| >>
| >>> R-package-devel at r-project.org mailing list
| >>
| >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| >>>
| >>
| >>>???????? [[alternative HTML version deleted]]
| >>
| >>>
| >>
| >>>
| >>
| >>> ______________________________________________
| >>
| >>> R-package-devel at r-project.org mailing list
| >>
| >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| >>
| >>
| >> ______________________________________________
| >> R-package-devel at r-project.org mailing list
| >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >>
| >
| >????? [[alternative HTML version deleted]]
| >
| > ______________________________________________
| > R-package-devel at r-project.org mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-package-devel
|
| --
| Michael Dewey
|
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

From Qu|r|n_St|er @end|ng |rom gmx@de  Thu Aug 28 13:17:21 2025
From: Qu|r|n_St|er @end|ng |rom gmx@de (quirin stier)
Date: Thu, 28 Aug 2025 13:17:21 +0200
Subject: [R-pkg-devel] CL/cl.hpp file not found
Message-ID: <c124281a-d703-4943-a9da-1e5be5bef3a9@gmx.de>

Hi everyone,

CRAN Submission of package 
(https://github.com/Quirinms/GeneralizedUmatrixGPU/tree/main)?leads to 
an error.


* installing *source* package 'GeneralizedUmatrixGPU' ...
** this is package 'GeneralizedUmatrixGPU' version '0.0.1'
** using staged installation

  === configurig OpenCL for x64 ==

  OCL=d:/RCompile/CRANpkg/extralibs/OpenCL

SDK appears to include only one architecture, assuming it is 64-bit
OCL64LIB not set, assuming d:/RCompile/CRANpkg/extralibs/OpenCL/lib/OpenCL.lib
OCL32LIB not set, assuming d:/RCompile/CRANpkg/extralibs/OpenCL/lib/x86/OpenCL.lib
OCLINC not set, assuming -Id:/RCompile/CRANpkg/extralibs/OpenCL/include

  --- Compiling 64-bit ---
OCL=d:/RCompile/CRANpkg/extralibs/OpenCL
PKG_CPPFLAGS=-Id:/RCompile/CRANpkg/extralibs/OpenCL/include
PKG_LIBS=d:/RCompile/CRANpkg/extralibs/OpenCL/lib/OpenCL.lib

** libs
using C++ compiler: 'g++.exe (GCC) 14.2.0'
g++ -std=gnu++17  -I"D:/RCompile/recent/R/include" -DNDEBUG '-I-Id:/RCompile/CRANpkg/extralibs/OpenCL/include' -I'D:/RCompile/CRANpkg/lib/4.6/Rcpp/include' -I'D:/RCompile/CRANpkg/lib/4.6/RcppArmadillo/include' -I'D:/RCompile/CRANpkg/lib/4.6/RcppParallel/include'   -I"d:/rtools45/x86_64-w64-mingw32.static.posix/include"      -pedantic -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign    -c RcppExports.cpp -o RcppExports.o
g++ -std=gnu++17  -I"D:/RCompile/recent/R/include" -DNDEBUG '-I-Id:/RCompile/CRANpkg/extralibs/OpenCL/include' -I'D:/RCompile/CRANpkg/lib/4.6/Rcpp/include' -I'D:/RCompile/CRANpkg/lib/4.6/RcppArmadillo/include' -I'D:/RCompile/CRANpkg/lib/4.6/RcppParallel/include'   -I"d:/rtools45/x86_64-w64-mingw32.static.posix/include"      -pedantic -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign    -c trainSESOM.cpp -o trainSESOM.o
trainSESOM.cpp:4:10: fatal error: CL/cl.hpp: No such file or directory
     4 | #include "CL/cl.hpp"
       |          ^~~~~~~~~~~
compilation terminated.
make: *** [D:/RCompile/recent/R/etc/x64/Makeconf:296: trainSESOM.o] Error 1
ERROR: compilation failed for package 'GeneralizedUmatrixGPU'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/GeneralizedUmatrixGPU'

Best,

Quirin

	[[alternative HTML version deleted]]


From Qu|r|n_St|er @end|ng |rom gmx@de  Thu Aug 28 13:25:04 2025
From: Qu|r|n_St|er @end|ng |rom gmx@de (quirin stier)
Date: Thu, 28 Aug 2025 13:25:04 +0200
Subject: [R-pkg-devel] CL/cl.hpp file not found
Message-ID: <a2f70101-989f-47e0-9bb0-b75bca5b10d2@gmx.de>

Hi everyone,

sry for the double mail - I included the old error output from a 
previous version, only the location of the?#include "CL/cl.hpp"? changed 
to ocl.h in /src.

CRAN Submission of package 
(https://github.com/Quirinms/GeneralizedUmatrixGPU/tree/main)?leads to 
an error.

Windows system:

* installing *source* package 'GeneralizedUmatrixGPU' ...
** this is package 'GeneralizedUmatrixGPU' version '0.0.1'
** using staged installation

  === configurig OpenCL for x64 ==

  OCL=d:/RCompile/CRANpkg/extralibs/OpenCL

SDK appears to include only one architecture, assuming it is 64-bit
OCL64LIB not set, assuming d:/RCompile/CRANpkg/extralibs/OpenCL/lib/OpenCL.lib
OCL32LIB not set, assuming d:/RCompile/CRANpkg/extralibs/OpenCL/lib/x86/OpenCL.lib
OCLINC not set, assuming -Id:/RCompile/CRANpkg/extralibs/OpenCL/include

  --- Compiling 64-bit ---
OCL=d:/RCompile/CRANpkg/extralibs/OpenCL
PKG_CPPFLAGS=-Id:/RCompile/CRANpkg/extralibs/OpenCL/include
PKG_LIBS=d:/RCompile/CRANpkg/extralibs/OpenCL/lib/OpenCL.lib

Similar in Debian system:

** libs
using C++ compiler: 'g++.exe (GCC) 14.2.0'
g++ -std=gnu++17  -I"D:/RCompile/recent/R/include" -DNDEBUG '-I-Id:/RCompile/CRANpkg/extralibs/OpenCL/include' -I'D:/RCompile/CRANpkg/lib/4.6/Rcpp/include' -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include' -I'D:/RCompile/CRANincoming/R-devel/lib/RcppParallel/include'   -I"d:/rtools45/x86_64-w64-mingw32.static.posix/include"      -pedantic -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign    -c RcppExports.cpp -o RcppExports.o
In file included from D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/current/armadillo:26,
                  from D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/RcppArmadillo/interface/RcppArmadilloForward.h:51,
                  from D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/RcppArmadillo.h:29,
                  from RcppExports.cpp:4:
D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/current/armadillo_bits/config.hpp:373:72: note: '#pragma message: NOTE: option ARMA_CRIPPLED_LAPACK is not supported'
   373 |   #pragma message ("NOTE: option ARMA_CRIPPLED_LAPACK is not supported")
       |                                                                        ^
g++ -std=gnu++17  -I"D:/RCompile/recent/R/include" -DNDEBUG '-I-Id:/RCompile/CRANpkg/extralibs/OpenCL/include' -I'D:/RCompile/CRANpkg/lib/4.6/Rcpp/include' -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include' -I'D:/RCompile/CRANincoming/R-devel/lib/RcppParallel/include'   -I"d:/rtools45/x86_64-w64-mingw32.static.posix/include"      -pedantic -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign    -c trainSESOM.cpp -o trainSESOM.o
In file included from trainSESOM.cpp:2:
ocl.h:7:10: fatal error: CL/cl.h: No such file or directory
     7 | #include <CL/cl.h>
       |          ^~~~~~~~~
compilation terminated.
make: *** [D:/RCompile/recent/R/etc/x64/Makeconf:296: trainSESOM.o] Error 1
ERROR: compilation failed for package 'GeneralizedUmatrixGPU'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/GeneralizedUmatrixGPU'


* installing *source* package ?GeneralizedUmatrixGPU? ...
** this is package ?GeneralizedUmatrixGPU? version ?0.0.1?
** using staged installation
** libs
using C++ compiler: ?Debian clang version 19.1.7 (3+b2)?
clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c RcppExports.cpp -o RcppExports.o
clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c trainSESOM.cpp -o trainSESOM.o
In file included from trainSESOM.cpp:2:
./ocl.h:9:10: fatal error: 'CL/cl.hpp' file not found
     9 | #include <CL/cl.hpp>
       |          ^~~~~~~~~~~
1 error generated.
make: *** [/home/hornik/tmp/R/etc/Makeconf:209: trainSESOM.o] Error 1
ERROR: compilation failed for package ?GeneralizedUmatrixGPU?
* removing ?/srv/hornik/tmp/CRAN_pretest/GeneralizedUmatrixGPU.Rcheck/GeneralizedUmatrixGPU?

Best,

Quirin

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Aug 28 15:31:24 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 28 Aug 2025 08:31:24 -0500
Subject: [R-pkg-devel] CL/cl.hpp file not found
In-Reply-To: <a2f70101-989f-47e0-9bb0-b75bca5b10d2@gmx.de>
References: <a2f70101-989f-47e0-9bb0-b75bca5b10d2@gmx.de>
Message-ID: <26800.23084.380298.314975@paul.eddelbuettel.com>


On 28 August 2025 at 13:25, quirin stier wrote:
| D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/current/armadillo_bits/config.hpp:373:72: note: '#pragma message: NOTE: option ARMA_CRIPPLED_LAPACK is not supported'

That is a side effect from CRAN and me trying to figure out how to accomodate
breaking changes in the new Armadillo upstream. Ignore this for now, this is
a likely side-effect of a tested version being on the CRAN machine when this
ran. The released RcppArmadillo will not trigger ut,



| * installing *source* package ?GeneralizedUmatrixGPU? ...
| ** this is package ?GeneralizedUmatrixGPU? version ?0.0.1?
| ** using staged installation
| ** libs
| using C++ compiler: ?Debian clang version 19.1.7 (3+b2)?
| clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c RcppExports.cpp -o RcppExports.o
| clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c trainSESOM.cpp -o trainSESOM.o
| In file included from trainSESOM.cpp:2:
| ./ocl.h:9:10: fatal error: 'CL/cl.hpp' file not found
|      9 | #include <CL/cl.hpp>
|        |          ^~~~~~~~~~~
| 1 error generated.
| make: *** [/home/hornik/tmp/R/etc/Makeconf:209: trainSESOM.o] Error 1
| ERROR: compilation failed for package ?GeneralizedUmatrixGPU?
| * removing *?/srv/hornik/tmp/CRAN_pretest/GeneralizedUmatrixGPU.Rcheck/GeneralizedUmatrixGPU?

Do you ensure the CL headers are installed?  On Debian these come for example
from package opencl-clhpp-headers [1] (but you have no general control over what
is installed).  At least package gpuR ships it for R, and you check how few
other packages test for this via a search at github.org/cran (a mirror) [2].

It looks to me like you need to take better care of the 'configure does not
find cl.hpp' case (and you need to add logic to your package to have that test).

Dirk

[1] https://packages.debian.org/search?searchon=contents&keywords=CL%2Fcl.hpp&mode=path&suite=unstable&arch=any
[2] https://github.com/search?q=org%3Acran%20CL%2Fcl.hpp&type=code

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Qu|r|n_St|er @end|ng |rom gmx@de  Fri Aug 29 14:11:18 2025
From: Qu|r|n_St|er @end|ng |rom gmx@de (quirin stier)
Date: Fri, 29 Aug 2025 14:11:18 +0200
Subject: [R-pkg-devel] CL/cl.hpp file not found
In-Reply-To: <26800.23084.380298.314975@paul.eddelbuettel.com>
References: <a2f70101-989f-47e0-9bb0-b75bca5b10d2@gmx.de>
 <26800.23084.380298.314975@paul.eddelbuettel.com>
Message-ID: <0e58357a-2c2e-4f5d-b779-6bf0670e788e@gmx.de>

Thanks! It seems that the headers can be easily shipped without much 
effort inside the inst/include/CL/, working at least for both Debian and 
Windows for now. (Updates available on 
https://github.com/Quirinms/GeneralizedUmatrixGPU/tree/main)

However, there comes another problem afterwards with a dynamic 
library/shared object (Win/Debian).

After finding the headers, following message appeared:

D:\rtools45\x86_64-w64-mingw32.static.posix\bin/ld.exe: cannot find -lOpenCL: No such file or directory

similar in Debian:

Error: package or namespace load failed for ?GeneralizedUmatrixGPU? in library.dynam(lib, package, package.lib):
  shared object ?GeneralizedUmatrixGPU.so? not found


For?Windows there is more output using -lOpenCL --verbose:

g++ -std=gnu++17 -shared -s -static-libgcc -o GeneralizedUmatrixGPU.dll tmp.def RcppExports.o trainSESOM.o -Ld:/RCompile/CRANpkg/extralibs/OpenCL/lib/x64/ -lOpenCL --verbose -Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib/x64 -Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib -LD:/RCompile/recent/R/bin/x64 -lR
Using built-in specs.
COLLECT_GCC=D:\rtools45\x86_64-w64-mingw32.static.posix\bin\g++.exe
COLLECT_LTO_WRAPPER=D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/x86_64-w64-mingw32.static.posix/14.2.0/lto-wrapper.exe
Target: x86_64-w64-mingw32.static.posix
Configured with: /root/mxe/tmp-gcc-host-x86_64-w64-mingw32.static.posix/gcc-14.2.0/configure --host=x86_64-w64-mingw32.static.posix --target=x86_64-w64-mingw32.static.posix --build=x86_64-pc-linux-gnu --prefix=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix --with-native-system-header-dir=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix/include --enable-languages=c,c++,objc,fortran --enable-version-specific-runtime-libs --with-gcc --with-gnu-ld --with-gnu-as --disable-nls --without-libiconv-prefix --disable-shared --disable-multilib --without-x --disable-win32-registry --enable-threads=posix --enable-libgomp --with-gmp=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix --with-isl=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix --with-mpc=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix --with-mpfr=/usr/lib/mxe/usr/x86_64-w64-mingw32.static.posix --enable-libstdcxx-time target_configargs=XCFLAGS=-Wno-format ac_cv_header_sys_mman_h=no
Thread model: posix
Supported LTO compression algorithms: zlib zstd
gcc version 14.2.0 (GCC)
COMPILER_PATH=D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/x86_64-w64-mingw32.static.posix/14.2.0/;D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/
LIBRARY_PATH=D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/;D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/;D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/../../../../lib/;D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/../../../
COLLECT_GCC_OPTIONS='-std=gnu++17' '-shared' '-s' '-static-libgcc' '-o' 'GeneralizedUmatrixGPU.dll' '-Ld:/RCompile/CRANpkg/extralibs/OpenCL/lib/x64/' '-v' '-Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib/x64' '-Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib' '-LD:/RCompile/recent/R/bin/x64' '-mtune=generic' '-march=x86-64' '-dumpdir' 'GeneralizedUmatrixGPU.dll.'
  D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/x86_64-w64-mingw32.static.posix/14.2.0/collect2.exe -plugin D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/x86_64-w64-mingw32.static.posix/14.2.0/liblto_plugin.dll -plugin-opt=D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../libexec/gcc/x86_64-w64-mingw32.static.posix/14.2.0/lto-wrapper.exe -plugin-opt=-fresolution=D:\temp\2025_08_29_11_20_18_14976\cc2Dbamn.res -plugin-opt=-pass-through=-lmingw32 -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lmingwex -plugin-opt=-pass-through=-lmsvcrt -plugin-opt=-pass-through=-lkernel32 -plugin-opt=-pass-through=-lpthread -plugin-opt=-pass-through=-ladvapi32 -plugin-opt=-pass-through=-lshell32 -plugin-opt=-pass-through=-luser32 -plugin-opt=-pass-through=-lkernel32 -plugin-opt=-pass-through=-lmingw32 -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lmingwex -plugin-opt=-pass-through=-lmsvcrt -plugin-opt=-pass-through=-lkernel32 -m i386pep --shared -Bdynamic -e DllMainCRTStartup --enable-auto-image-base -o GeneralizedUmatrixGPU.dll -s D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/../../../../lib/dllcrt2.o D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/crtbegin.o -Ld:/RCompile/CRANpkg/extralibs/OpenCL/lib/x64/ -Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib/x64 -Ld:/rtools45/x86_64-w64-mingw32.static.posix/lib -LD:/RCompile/recent/R/bin/x64 -LD:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0 -LD:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc -LD:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/../../../../lib -LD:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/../../.. tmp.def RcppExports.o trainSESOM.o -lOpenCL -lR -lstdc++ -lmingw32 -lgcc -lmingwex -lmsvcrt -lkernel32 -lpthread -ladvapi32 -lshell32 -luser32 -lkernel32 -lmingw32 -lgcc -lmingwex -lmsvcrt -lkernel32 D:/rtools45/x86_64-w64-mingw32.static.posix/bin/../lib/gcc/x86_64-w64-mingw32.static.posix/14.2.0/crtend.o
D:\rtools45\x86_64-w64-mingw32.static.posix\bin/ld.exe: cannot find -lOpenCL: No such file or directory
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'GeneralizedUmatrixGPU'



Am 28.08.2025 um 15:31 schrieb Dirk Eddelbuettel:
> On 28 August 2025 at 13:25, quirin stier wrote:
> | D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include/current/armadillo_bits/config.hpp:373:72: note: '#pragma message: NOTE: option ARMA_CRIPPLED_LAPACK is not supported'
>
> That is a side effect from CRAN and me trying to figure out how to accomodate
> breaking changes in the new Armadillo upstream. Ignore this for now, this is
> a likely side-effect of a tested version being on the CRAN machine when this
> ran. The released RcppArmadillo will not trigger ut,
>
>
>
> | * installing *source* package ?GeneralizedUmatrixGPU? ...
> | ** this is package ?GeneralizedUmatrixGPU? version ?0.0.1?
> | ** using staged installation
> | ** libs
> | using C++ compiler: ?Debian clang version 19.1.7 (3+b2)?
> | clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c RcppExports.cpp -o RcppExports.o
> | clang++-19 -std=gnu++17 -I"/home/hornik/tmp/R/include" -DNDEBUG  -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include' -I'/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppParallel/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=3   -fpic  -g -O3 -Wall -pedantic -Wno-missing-template-arg-list-after-template-kw -Wdeprecated-literal-operator  -c trainSESOM.cpp -o trainSESOM.o
> | In file included from trainSESOM.cpp:2:
> | ./ocl.h:9:10: fatal error: 'CL/cl.hpp' file not found
> |      9 | #include <CL/cl.hpp>
> |        |          ^~~~~~~~~~~
> | 1 error generated.
> | make: *** [/home/hornik/tmp/R/etc/Makeconf:209: trainSESOM.o] Error 1
> | ERROR: compilation failed for package ?GeneralizedUmatrixGPU?
> | * removing *?/srv/hornik/tmp/CRAN_pretest/GeneralizedUmatrixGPU.Rcheck/GeneralizedUmatrixGPU?
>
> Do you ensure the CL headers are installed?  On Debian these come for example
> from package opencl-clhpp-headers [1] (but you have no general control over what
> is installed).  At least package gpuR ships it for R, and you check how few
> other packages test for this via a search at github.org/cran (a mirror) [2].
>
> It looks to me like you need to take better care of the 'configure does not
> find cl.hpp' case (and you need to add logic to your package to have that test).
>
> Dirk
>
> [1]https://packages.debian.org/search?searchon=contents&keywords=CL%2Fcl.hpp&mode=path&suite=unstable&arch=any
> [2]https://github.com/search?q=org%3Acran%20CL%2Fcl.hpp&type=code
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Fri Aug 29 22:09:46 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 29 Aug 2025 23:09:46 +0300
Subject: [R-pkg-devel] CL/cl.hpp file not found
References: <a2f70101-989f-47e0-9bb0-b75bca5b10d2@gmx.de>
 <26800.23084.380298.314975@paul.eddelbuettel.com>
 <0e58357a-2c2e-4f5d-b779-6bf0670e788e@gmx.de>
Message-ID: <A3179837-9DFF-4DE6-B235-99094081F0A0@disroot.org>

On Fri, 29 Aug 2025 14:11:18 +0200
quirin stier <Quirin_Stier at gmx.de> wrote:

> Error: package or namespace load failed for ?GeneralizedUmatrixGPU?
> in library.dynam(lib, package, package.lib): shared object
> ?GeneralizedUmatrixGPU.so? not found

There's an extra line copied from OpenCL's src/Makevars file:

>> clang++-19 -std=gnu++17 -shared -L/home/hornik/tmp/R/lib -Wl,-O1 -o
>> GeneralizedUmatrixGPU.so RcppExports.o trainSESOM.o -lOpenCL
>> -L/home/hornik/tmp/R/lib -lR
>> mv GeneralizedUmatrixGPU.so R_OpenCL.so # <-- here

The OpenCL package only needs this on Windows so that the system OpenCL.dll
doesn't conflict with with the package OpenCL.dll; the change in
src/Makevars was done to simplify loading the shared library from the
package NAMESPACE [*]. Your package doesn't need to rename the shared
library.

> D:\rtools45\x86_64-w64-mingw32.static.posix\bin/ld.exe: cannot find
> -lOpenCL: No such file or directory

That could be due to the OpenCL SDK shipping the import library in
lib/x86_64 instead of lib/x64 where your package's 'configure.win'
expects it, or for some other reason. When you discussed the installation of OpenCL SDK on Win-Builder with Dr. Uwe Ligges, was a specific version of it mentioned?

-- 
Best regards,
Ivan

[*] https://github.com/s-u/OpenCL/pull/20


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Tue Sep  2 08:23:24 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Tue, 2 Sep 2025 06:23:24 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
Message-ID: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>

I am trying to install a test configuration for an existing package under Windows 10. Here?s my in- and the system?s output.

> usethis::use_testthat(edition = 3, parallel = TRUE)
? Setting active project to "//some_servername/UserHome$/jhuesing/R/some_packagename".
? Adding "true" to Config/testthat/parallel.
Error: [EPERM] Failed to stat '//some_servername/UserHome$': operation not permitted

//some_servername/UserHome$/jhuesing points to my personal directory, which is mapped to a drive specification consisting of a letter and a colon. While I rightfully don?t have access as jhuesing to //some_servername/UserHome$, I should have access to //some_servername/UserHome$/jhuesing, and if R would address the directory via letter + colon, the system probably would permit the action.

Is there a way to specify the directory path in which testthat shall be added, allowing me to write the path in a way the system would accept?



Dr. Johannes H?sing
Epidemiologie

Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum



T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>

Das Landeskrebsregister NRW online
FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/

Newsletter LKR NRW - jetzt anmelden unter
 https://www.landeskrebsregister.nrw/aktuelles/newsletter

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Gesch?ftsf?hrer
Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Sep  2 12:44:38 2025
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 2 Sep 2025 12:44:38 +0200
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
Message-ID: <74866f92-84d5-49aa-b13b-e4068c980d80@gmail.com>


On 9/2/25 08:23, H?sing, Johannes via R-package-devel wrote:
> I am trying to install a test configuration for an existing package under Windows 10. Here?s my in- and the system?s output.
>
>> usethis::use_testthat(edition = 3, parallel = TRUE)
> ? Setting active project to "//some_servername/UserHome$/jhuesing/R/some_packagename".
> ? Adding "true" to Config/testthat/parallel.
> Error: [EPERM] Failed to stat '//some_servername/UserHome$': operation not permitted
>
> //some_servername/UserHome$/jhuesing points to my personal directory, which is mapped to a drive specification consisting of a letter and a colon. While I rightfully don?t have access as jhuesing to //some_servername/UserHome$, I should have access to //some_servername/UserHome$/jhuesing, and if R would address the directory via letter + colon, the system probably would permit the action.

I would recommend to stick to drive letter based paths. UNC paths are 
not fully supported even in base R. Some R functions support them, or 
try to support them, but? it is very unlikely that they would generally 
work and they are certainly not tested. Sometimes they don't work with 
external tools, including tools used commonly with R or to build R/packages.

So I would only use UNC paths if I were going to debug/test specific 
issues with UNC paths. For anything else, I would defensively use drive 
letters.

Best
Tomas

>
> Is there a way to specify the directory path in which testthat shall be added, allowing me to write the path in a way the system would accept?
>
>
>
> Dr. Johannes H?sing
> Epidemiologie
>
> Landeskrebsregister NRW gGmbH
> Gesundheitscampus 10
> 44801 Bochum
>
>
>
> T 0234 54509-216
> F 0234 54509-499
> Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
> www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>
>
> Das Landeskrebsregister NRW online
> FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
> INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
> LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/
>
> Newsletter LKR NRW - jetzt anmelden unter
>   https://www.landeskrebsregister.nrw/aktuelles/newsletter
>
> 5. Landesqualit?tskonferenz
> Mittwoch 08. Oktober 2025 in M?nster
> 20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
> Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
> Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/
>
> Gesch?ftsf?hrer
> Dr. Andres Sch?tzend?bel
> Vorsitzender der Gesellschafterversammlung
> Staatssekret?r Matthias Heidmeier
> Sitz der Gesellschaft
> Bochum
> Registergericht
> Amtsgericht Bochum
> HRB 17715
>
> HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Tue Sep  2 12:48:47 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Tue, 2 Sep 2025 10:48:47 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <74866f92-84d5-49aa-b13b-e4068c980d80@gmail.com>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <74866f92-84d5-49aa-b13b-e4068c980d80@gmail.com>
Message-ID: <7fb658078e5949efa8d79c748e839093@krebsregister.nrw.de>





Dr. Johannes H?sing
Epidemiologie


Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum
T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de
www.landeskrebsregister.nrw.de

Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
Gesch?ftsf?hrer

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.


-----Urspr?ngliche Nachricht-----
On 9/2/25 08:23, H?sing, Johannes via R-package-devel wrote:
>> usethis::use_testthat(edition = 3, parallel = TRUE)

Tomas wrote:
So I would only use UNC paths if I were going to debug/test specific issues with UNC paths. For anything else, I would defensively use drive letters.

I would gladly avoid UNC paths. What is the option/the parameter to set a path in usethis::use_testthat()?


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Sep  2 22:39:50 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 2 Sep 2025 15:39:50 -0500
Subject: [R-pkg-devel] How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
Message-ID: <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>

Hello, All:


TWO QUESTIONS:


1. HOW TO FIX "Number of redirects hit maximum amount"?


For the Ecdat package, CRAN reported, "Number of redirects hit maximum 
amount [www.cde.ca.gov]". Uwe Ligges asked, "Please fix and resubmit."


"www.cde.ca.gov" works for me when I enter it into a browser. Moreover, 
that URL was unchanged after the page appeared. Also, I've looked for 
tools to trace redirects and have so far been unable to find any that 
find any redirect from "www.cde.ca.gov".


2. GITHUB ACTION WITH "--as-cran"?


Is there a way to modify GitHub Action so "R CMD check --as-cran" runs 
on one of the platforms?


** I'm currently concerned about "https://github.com/sbgraves237/Ecdat"


FYI: "R CMD check --as-cran Ecdat_0.4.6.tar.gz" on my local computer a 
few minutes ago found several "(possibly) invalid URLs", none of which 
reported "Number of redirects hit maximum amount". Also, 
"www.cde.ca.gov" was NOT flagged this time.


Should I just document this in "cran-comments.md" and hope for the best?


Thanks, Spencer Graves


-------- Forwarded Message --------
Subject: Re: CRAN package Ecdat
Date: Tue, 2 Sep 2025 12:38:24 +0200
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Organization: Fakult?t Statistik, Technische Universit?t Dortmund
To: Spencer Graves <spencer.graves at effectivedefense.org>, CRAN at R-project.org

For your latest submission I wrote

"
Argh, so many false positives or ill configured web sites, but one is 
true positive.

      URL: https://www.cde.ca.gov
        From: man/Caschool.Rd
        Status: Error
        Message: Number of redirects hit maximum amount [www.cde.ca.gov]:
          Maximum (10) redirects followed

Please fix and resubmit.

Best,
Uwe Ligges
"


Best,
Uwe



On 02.09.2025 12:36, Spencer Graves wrote:
> Dear CRAN team:
> 
> 
> I'm confused: The link below is for an earlier version of Ecdat, 0.4-2.
> 
> 
> On 8/27/25, 17:31 Central I received an email from ligges at statistik.tu- 
> dortmund.de Subject: [CRAN-pretest-inspect-recheck] CRAN Submission 
> Ecdat 0.4-5.
> 
> 
> The first complaint in the link below says, "No Authors at R field in 
> DESCRIPTION." Tests on other platforms complained, "Lost braces" 
> following \doi. Those were fixed in 0.4-5.
> 
> 
> I also submitted cran-comments.md, which identified two other problems I 
> thought I had fixed.
> 
> 
> HOWEVER, I am working on another version and will submit that version 
> before 2025-09-30.
> 
> 
> Thanks,
> Spencer Graves
> 
> 
> On 9/2/25 02:44, Kurt Hornik wrote:
>> Dear maintainer,
>>
>> Please see the problems shown on
>> <https://cran.r-project.org/web/checks/check_results_Ecdat.html>.
>>
>> Please correct before 2025-09-30 to safely retain your package on CRAN.
>>
>> Note that this will be the *final* reminder.
>>
>> Best wishes,
>> The CRAN Team
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Sep  2 22:46:18 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 2 Sep 2025 22:46:18 +0200
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
Message-ID: <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>



On 02.09.2025 22:39, Spencer Graves wrote:
> Hello, All:
> 
> 
> TWO QUESTIONS:
> 
> 
> 1. HOW TO FIX "Number of redirects hit maximum amount"?

I guess you need a different URL.
Have you tried in a web browser? Firefox tells me locally "redirection 
error" (translated from German) and I cannot see any web page. So this 
URL seems to need a change.

Best,
Uwe Ligges









> 
> For the Ecdat package, CRAN reported, "Number of redirects hit maximum 
> amount [www.cde.ca.gov]". Uwe Ligges asked, "Please fix and resubmit."
> 
> 
> "www.cde.ca.gov" works for me when I enter it into a browser. Moreover, 
> that URL was unchanged after the page appeared. Also, I've looked for 
> tools to trace redirects and have so far been unable to find any that 
> find any redirect from "www.cde.ca.gov".
> 
> 
> 2. GITHUB ACTION WITH "--as-cran"?
> 
> 
> Is there a way to modify GitHub Action so "R CMD check --as-cran" runs 
> on one of the platforms?
> 
> 
> ** I'm currently concerned about "https://github.com/sbgraves237/Ecdat"
> 
> 
> FYI: "R CMD check --as-cran Ecdat_0.4.6.tar.gz" on my local computer a 
> few minutes ago found several "(possibly) invalid URLs", none of which 
> reported "Number of redirects hit maximum amount". Also, 
> "www.cde.ca.gov" was NOT flagged this time.
> 
> 
> Should I just document this in "cran-comments.md" and hope for the best?
> 
> 
> Thanks, Spencer Graves
> 
> 
> -------- Forwarded Message --------
> Subject: Re: CRAN package Ecdat
> Date: Tue, 2 Sep 2025 12:38:24 +0200
> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
> Organization: Fakult?t Statistik, Technische Universit?t Dortmund
> To: Spencer Graves <spencer.graves at effectivedefense.org>, CRAN at R- 
> project.org
> 
> For your latest submission I wrote
> 
> "
> Argh, so many false positives or ill configured web sites, but one is 
> true positive.
> 
>  ???? URL: https://www.cde.ca.gov
>  ?????? From: man/Caschool.Rd
>  ?????? Status: Error
>  ?????? Message: Number of redirects hit maximum amount [www.cde.ca.gov]:
>  ???????? Maximum (10) redirects followed
> 
> Please fix and resubmit.
> 
> Best,
> Uwe Ligges
> "
> 
> 
> Best,
> Uwe
> 
> 
> 
> On 02.09.2025 12:36, Spencer Graves wrote:
>> Dear CRAN team:
>>
>>
>> I'm confused: The link below is for an earlier version of Ecdat, 0.4-2.
>>
>>
>> On 8/27/25, 17:31 Central I received an email from 
>> ligges at statistik.tu- dortmund.de Subject: [CRAN-pretest-inspect- 
>> recheck] CRAN Submission Ecdat 0.4-5.
>>
>>
>> The first complaint in the link below says, "No Authors at R field in 
>> DESCRIPTION." Tests on other platforms complained, "Lost braces" 
>> following \doi. Those were fixed in 0.4-5.
>>
>>
>> I also submitted cran-comments.md, which identified two other problems 
>> I thought I had fixed.
>>
>>
>> HOWEVER, I am working on another version and will submit that version 
>> before 2025-09-30.
>>
>>
>> Thanks,
>> Spencer Graves
>>
>>
>> On 9/2/25 02:44, Kurt Hornik wrote:
>>> Dear maintainer,
>>>
>>> Please see the problems shown on
>>> <https://cran.r-project.org/web/checks/check_results_Ecdat.html>.
>>>
>>> Please correct before 2025-09-30 to safely retain your package on CRAN.
>>>
>>> Note that this will be the *final* reminder.
>>>
>>> Best wishes,
>>> The CRAN Team
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Tue Sep  2 23:00:18 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 2 Sep 2025 17:00:18 -0400
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
Message-ID: <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>

   Hmm. Maybe there's something region-specific? From Canada, it works 
for me from Firefox or Chromium ...

On 9/2/25 16:46, Uwe Ligges wrote:
> 
> 
> On 02.09.2025 22:39, Spencer Graves wrote:
>> Hello, All:
>>
>>
>> TWO QUESTIONS:
>>
>>
>> 1. HOW TO FIX "Number of redirects hit maximum amount"?
> 
> I guess you need a different URL.
> Have you tried in a web browser? Firefox tells me locally "redirection 
> error" (translated from German) and I cannot see any web page. So this 
> URL seems to need a change.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
> 
> 
>>
>> For the Ecdat package, CRAN reported, "Number of redirects hit maximum 
>> amount [www.cde.ca.gov]". Uwe Ligges asked, "Please fix and resubmit."
>>be th
>>
>> "www.cde.ca.gov" works for me when I enter it into a browser. 
>> Moreover, that URL was unchanged after the page appeared. Also, I've 
>> looked for tools to trace redirects and have so far been unable to 
>> find any that find any redirect from "www.cde.ca.gov".
>>
>>
>> 2. GITHUB ACTION WITH "--as-cran"?
>>
>>
>> Is there a way to modify GitHub Action so "R CMD check --as-cran" runs 
>> on one of the platforms?
>>
>>
>> ** I'm currently concerned about "https://github.com/sbgraves237/Ecdat"
>>
>>
>> FYI: "R CMD check --as-cran Ecdat_0.4.6.tar.gz" on my local computer a 
>> few minutes ago found several "(possibly) invalid URLs", none of which 
>> reported "Number of redirects hit maximum amount". Also, 
>> "www.cde.ca.gov" was NOT flagged this time.
>>
>>
>> Should I just document this in "cran-comments.md" and hope for the best?
>>
>>
>> Thanks, Spencer Graves
>>
>>
>> -------- Forwarded Message --------
>> Subject: Re: CRAN package Ecdat
>> Date: Tue, 2 Sep 2025 12:38:24 +0200
>> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
>> Organization: Fakult?t Statistik, Technische Universit?t Dortmund
>> To: Spencer Graves <spencer.graves at effectivedefense.org>, CRAN at R- 
>> project.org
>>
>> For your latest submission I wrote
>>
>> "
>> Argh, so many false positives or ill configured web sites, but one is 
>> true positive.
>>
>> ????? URL: https://www.cde.ca.gov
>> ??????? From: man/Caschool.Rd
>> ??????? Status: Error
>> ??????? Message: Number of redirects hit maximum amount [www.cde.ca.gov]:
>> ????????? Maximum (10) redirects followed
>>
>> Please fix and resubmit.
>>
>> Best,
>> Uwe Ligges
>> "
>>
>>
>> Best,
>> Uwe
>>
>>
>>
>> On 02.09.2025 12:36, Spencer Graves wrote:
>>> Dear CRAN team:
>>>
>>>
>>> I'm confused: The link below is for an earlier version of Ecdat, 0.4-2.
>>>
>>>
>>> On 8/27/25, 17:31 Central I received an email from 
>>> ligges at statistik.tu- dortmund.de Subject: [CRAN-pretest-inspect- 
>>> recheck] CRAN Submission Ecdat 0.4-5.
>>>
>>>
>>> The first complaint in the link below says, "No Authors at R field in 
>>> DESCRIPTION." Tests on other platforms complained, "Lost braces" 
>>> following \doi. Those were fixed in 0.4-5.
>>>
>>>
>>> I also submitted cran-comments.md, which identified two other 
>>> problems I thought I had fixed.
>>>
>>>
>>> HOWEVER, I am working on another version and will submit that version 
>>> before 2025-09-30.
>>>
>>>
>>> Thanks,
>>> Spencer Graves
>>>
>>>
>>> On 9/2/25 02:44, Kurt Hornik wrote:
>>>> Dear maintainer,
>>>>
>>>> Please see the problems shown on
>>>> <https://cran.r-project.org/web/checks/check_results_Ecdat.html>.
>>>>
>>>> Please correct before 2025-09-30 to safely retain your package on CRAN.
>>>>
>>>> Note that this will be the *final* reminder.
>>>>
>>>> Best wishes,
>>>> The CRAN Team
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Associate chair (graduate), Mathematics & Statistics
Director, School of Computational Science and Engineering
* E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From jo@|@h@p@rry @end|ng |rom gm@||@com  Tue Sep  2 23:17:45 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Tue, 2 Sep 2025 14:17:45 -0700
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
 <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
Message-ID: <CAL3ufUJySfTdjkFgU1iuPMkFAJzt3VNxjba=GgAP91_wQd_Kgw@mail.gmail.com>

There is a single request when loading the page that results in a 301
status code which is a GET request for https://www.google.com/jsapi

Test the url with curl -I https://www.cde.ca.gov/

Curl results in this response, though, which indicates that a 302 redirect
status does occur when the site thinks you're a bot (fair enough in these
LLM days where companies are stealing the internet).

HTTP/1.1 302 Moved Temporarily
Server: rdwr
Date: Tue, 02 Sep 2025 21:12:14 GMT
Content-Type: text/html
Connection: keep-alive

Location:
https://validate.perfdrive.com/?ssa=613ca131-5a8f-43fc-a8f0-b8263d09dd74&ssb=98511261404&ssc=https%3A%2F%2Fwww.cde.ca.gov%2F&ssi=befc02e3-ctxv-4d8c-a298-7ca114da9162&ssk=botmanager_support at radware.com&ssm={snipped}

It's tough because how can anyone be confident that the `Location` header
will ever actually resolve to the provided url?



On Tue, Sep 2, 2025 at 2:00?PM Ben Bolker <bbolker at gmail.com> wrote:

>    Hmm. Maybe there's something region-specific? From Canada, it works
> for me from Firefox or Chromium ...
>
> On 9/2/25 16:46, Uwe Ligges wrote:
> >
> >
> > On 02.09.2025 22:39, Spencer Graves wrote:
> >> Hello, All:
> >>
> >>
> >> TWO QUESTIONS:
> >>
> >>
> >> 1. HOW TO FIX "Number of redirects hit maximum amount"?
> >
> > I guess you need a different URL.
> > Have you tried in a web browser? Firefox tells me locally "redirection
> > error" (translated from German) and I cannot see any web page. So this
> > URL seems to need a change.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >>
> >> For the Ecdat package, CRAN reported, "Number of redirects hit maximum
> >> amount [www.cde.ca.gov]". Uwe Ligges asked, "Please fix and resubmit."
> >>be th
> >>
> >> "www.cde.ca.gov" works for me when I enter it into a browser.
> >> Moreover, that URL was unchanged after the page appeared. Also, I've
> >> looked for tools to trace redirects and have so far been unable to
> >> find any that find any redirect from "www.cde.ca.gov".
> >>
> >>
> >> 2. GITHUB ACTION WITH "--as-cran"?
> >>
> >>
> >> Is there a way to modify GitHub Action so "R CMD check --as-cran" runs
> >> on one of the platforms?
> >>
> >>
> >> ** I'm currently concerned about "https://github.com/sbgraves237/Ecdat"
> >>
> >>
> >> FYI: "R CMD check --as-cran Ecdat_0.4.6.tar.gz" on my local computer a
> >> few minutes ago found several "(possibly) invalid URLs", none of which
> >> reported "Number of redirects hit maximum amount". Also,
> >> "www.cde.ca.gov" was NOT flagged this time.
> >>
> >>
> >> Should I just document this in "cran-comments.md" and hope for the best?
> >>
> >>
> >> Thanks, Spencer Graves
> >>
> >>
> >> -------- Forwarded Message --------
> >> Subject: Re: CRAN package Ecdat
> >> Date: Tue, 2 Sep 2025 12:38:24 +0200
> >> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
> >> Organization: Fakult?t Statistik, Technische Universit?t Dortmund
> >> To: Spencer Graves <spencer.graves at effectivedefense.org>, CRAN at R-
> >> project.org
> >>
> >> For your latest submission I wrote
> >>
> >> "
> >> Argh, so many false positives or ill configured web sites, but one is
> >> true positive.
> >>
> >>       URL: https://www.cde.ca.gov
> >>         From: man/Caschool.Rd
> >>         Status: Error
> >>         Message: Number of redirects hit maximum amount [www.cde.ca.gov
> ]:
> >>           Maximum (10) redirects followed
> >>
> >> Please fix and resubmit.
> >>
> >> Best,
> >> Uwe Ligges
> >> "
> >>
> >>
> >> Best,
> >> Uwe
> >>
> >>
> >>
> >> On 02.09.2025 12:36, Spencer Graves wrote:
> >>> Dear CRAN team:
> >>>
> >>>
> >>> I'm confused: The link below is for an earlier version of Ecdat, 0.4-2.
> >>>
> >>>
> >>> On 8/27/25, 17:31 Central I received an email from
> >>> ligges at statistik.tu- dortmund.de Subject: [CRAN-pretest-inspect-
> >>> recheck] CRAN Submission Ecdat 0.4-5.
> >>>
> >>>
> >>> The first complaint in the link below says, "No Authors at R field in
> >>> DESCRIPTION." Tests on other platforms complained, "Lost braces"
> >>> following \doi. Those were fixed in 0.4-5.
> >>>
> >>>
> >>> I also submitted cran-comments.md, which identified two other
> >>> problems I thought I had fixed.
> >>>
> >>>
> >>> HOWEVER, I am working on another version and will submit that version
> >>> before 2025-09-30.
> >>>
> >>>
> >>> Thanks,
> >>> Spencer Graves
> >>>
> >>>
> >>> On 9/2/25 02:44, Kurt Hornik wrote:
> >>>> Dear maintainer,
> >>>>
> >>>> Please see the problems shown on
> >>>> <https://cran.r-project.org/web/checks/check_results_Ecdat.html>.
> >>>>
> >>>> Please correct before 2025-09-30 to safely retain your package on
> CRAN.
> >>>>
> >>>> Note that this will be the *final* reminder.
> >>>>
> >>>> Best wishes,
> >>>> The CRAN Team
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Dr. Benjamin Bolker
> Professor, Mathematics & Statistics and Biology, McMaster University
> Associate chair (graduate), Mathematics & Statistics
> Director, School of Computational Science and Engineering
> * E-mail is sent at my convenience; I don't expect replies outside of
> working hours.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Sep  2 23:25:38 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 2 Sep 2025 16:25:38 -0500
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
 <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
Message-ID: <5cd8a6ff-39a3-4f1e-bd68-0050e8acc4d5@effectivedefense.org>

Hi, Uwe and Ben:


Thanks for the replies. That URL worked just now in Firefox, Safari and 
Chrome on my Mac and in the browser on my iPhone in Kansas City, 
Missouri, USA.


It's in the documentation for "The California Test Score Data Set" 
(Ecdat::Caschool), which was created years ago by Yves Croissant, a 
professor at the University of Lyon, France, and author of (2024) 
Microeconometrics with R (https://ycroissant.github.io/micsr_book/) and 
several other publications that use R.


The fact that it didn't work for Uwe worries me.[1]


I hesitate to degrade the work of Yves Croissant. I plan to document 
this in "cran-comments.md" and proceed with the other checks outlined in 
Wickham and Bryan, "R Packages". The current version on GitHub has green 
check marks on 5 platforms. As I mentioned, "R CMD check --as-cran" 
locally flagged several URLs that I have checked multiple times and 
found them good -- but did NOT flag "cde.ca.gov".


Reasonable?
Thanks again.
Spencer Graves


On 9/2/25 16:00, Ben Bolker wrote:
>  ? Hmm. Maybe there's something region-specific? From Canada, it works 
> for me from Firefox or Chromium ...
> 
> On 9/2/25 16:46, Uwe Ligges wrote:
>>
>>
>> On 02.09.2025 22:39, Spencer Graves wrote:
>>> Hello, All:
>>>
>>>
>>> TWO QUESTIONS:
>>>
>>>
>>> 1. HOW TO FIX "Number of redirects hit maximum amount"?
>>
>> I guess you need a different URL.
>> Have you tried in a web browser? Firefox tells me locally "redirection 
>> error" (translated from German) and I cannot see any web page. So this 
>> URL seems to need a change.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>>
>>> For the Ecdat package, CRAN reported, "Number of redirects hit 
>>> maximum amount [www.cde.ca.gov]". Uwe Ligges asked, "Please fix and 
>>> resubmit."
>>> be th
>>>
>>> "www.cde.ca.gov" works for me when I enter it into a browser. 
>>> Moreover, that URL was unchanged after the page appeared. Also, I've 
>>> looked for tools to trace redirects and have so far been unable to 
>>> find any that find any redirect from "www.cde.ca.gov".
>>>
>>>
>>> 2. GITHUB ACTION WITH "--as-cran"?
>>>
>>>
>>> Is there a way to modify GitHub Action so "R CMD check --as-cran" 
>>> runs on one of the platforms?
>>>
>>>
>>> ** I'm currently concerned about "https://github.com/sbgraves237/Ecdat"
>>>
>>>
>>> FYI: "R CMD check --as-cran Ecdat_0.4.6.tar.gz" on my local computer 
>>> a few minutes ago found several "(possibly) invalid URLs", none of 
>>> which reported "Number of redirects hit maximum amount". Also, 
>>> "www.cde.ca.gov" was NOT flagged this time.
>>>
>>>
>>> Should I just document this in "cran-comments.md" and hope for the best?
>>>
>>>
>>> Thanks, Spencer Graves
>>>
>>>
>>> -------- Forwarded Message --------
>>> Subject: Re: CRAN package Ecdat
>>> Date: Tue, 2 Sep 2025 12:38:24 +0200
>>> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
>>> Organization: Fakult?t Statistik, Technische Universit?t Dortmund
>>> To: Spencer Graves <spencer.graves at effectivedefense.org>, CRAN at R- 
>>> project.org
>>>
>>> For your latest submission I wrote
>>>
>>> "
>>> Argh, so many false positives or ill configured web sites, but one is 
>>> true positive.
>>>
>>> ????? URL: https://www.cde.ca.gov
>>> ??????? From: man/Caschool.Rd
>>> ??????? Status: Error
>>> ??????? Message: Number of redirects hit maximum amount 
>>> [www.cde.ca.gov]:
>>> ????????? Maximum (10) redirects followed
>>>
>>> Please fix and resubmit.
>>>
>>> Best,
>>> Uwe Ligges
>>> "
>>>
>>>
>>> Best,
>>> Uwe
>>>
>>>
>>>
>>> On 02.09.2025 12:36, Spencer Graves wrote:
>>>> Dear CRAN team:
>>>>
>>>>
>>>> I'm confused: The link below is for an earlier version of Ecdat, 0.4-2.
>>>>
>>>>
>>>> On 8/27/25, 17:31 Central I received an email from 
>>>> ligges at statistik.tu- dortmund.de Subject: [CRAN-pretest-inspect- 
>>>> recheck] CRAN Submission Ecdat 0.4-5.
>>>>
>>>>
>>>> The first complaint in the link below says, "No Authors at R field in 
>>>> DESCRIPTION." Tests on other platforms complained, "Lost braces" 
>>>> following \doi. Those were fixed in 0.4-5.
>>>>
>>>>
>>>> I also submitted cran-comments.md, which identified two other 
>>>> problems I thought I had fixed.
>>>>
>>>>
>>>> HOWEVER, I am working on another version and will submit that 
>>>> version before 2025-09-30.
>>>>
>>>>
>>>> Thanks,
>>>> Spencer Graves
>>>>
>>>>
>>>> On 9/2/25 02:44, Kurt Hornik wrote:
>>>>> Dear maintainer,
>>>>>
>>>>> Please see the problems shown on
>>>>> <https://cran.r-project.org/web/checks/check_results_Ecdat.html>.
>>>>>
>>>>> Please correct before 2025-09-30 to safely retain your package on 
>>>>> CRAN.
>>>>>
>>>>> Note that this will be the *final* reminder.
>>>>>
>>>>> Best wishes,
>>>>> The CRAN Team
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |kry|ov @end|ng |rom d|@root@org  Tue Sep  2 23:44:17 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 3 Sep 2025 00:44:17 +0300
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
Message-ID: <20250903004417.50ed0048@Tarkus>

On Tue, 2 Sep 2025 06:23:24 +0000
"H?sing, Johannes via R-package-devel" <r-package-devel at r-project.org>
wrote:

> Error: [EPERM] Failed to stat '//some_servername/UserHome$':
> operation not permitted

What's the traceback() output immediately after this error happens? If
you post it, someone may be able to point out the offending code and
perhaps find a way to convince it to use the drive letter instead of
the UNC path.

Since the error is encountered by code in 'usethis' (or somewhere
downstream), likely not in base R, you may also get a more direct
answer by following links at <https://usethis.r-lib.org/SUPPORT.html>.

-- 
Best regards,
Ivan


From |kry|ov @end|ng |rom d|@root@org  Tue Sep  2 23:43:22 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 3 Sep 2025 00:43:22 +0300
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
 <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
Message-ID: <20250903004322.31aad686@Tarkus>

On Tue, 2 Sep 2025 17:00:18 -0400
Ben Bolker <bbolker at gmail.com> wrote:

> Maybe there's something region-specific? 

Definitely. For me, with or without cookies enabled,
https://www.cde.ca.gov/ reliably returns a 303 redirect to
https://www.cde.ca.gov/wafalert.html?_event_transid=<large hexadecimal
string>, which in turn returns a 303 redirect to the same address.

The Internet Wayback Machine does have some good snapshots; not all
captures are redirects to validate.perfdrive.com:
http://web.archive.org/web/*/https://www.cde.ca.gov/
http://web.archive.org/web/20250823081216/https://www.cde.ca.gov/

-- 
Best regards,
Ivan


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Sep  3 01:43:14 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 3 Sep 2025 11:43:14 +1200
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <20250903004322.31aad686@Tarkus>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
 <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
 <20250903004322.31aad686@Tarkus>
Message-ID: <0402F490-16B4-45AD-AC66-16A1C60BFA26@R-project.org>

FWIW same here from the other hemisphere - it's an infinite loop in their webserver. I?d say that confirms that the link is not accessible, so definitely needs fixing.

Looking at the package, I think that link is entirely pointless anyway, because it doesn't even point to the data source, so either point to the actual page with the data or remove (pointing to the archive for the CDE front page is just as useless IMHO).

Cheers,
Simon


> On 3 Sep 2025, at 09:43, Ivan Krylov via R-package-devel <r-package-devel at r-project.org> wrote:
> 
> On Tue, 2 Sep 2025 17:00:18 -0400
> Ben Bolker <bbolker at gmail.com> wrote:
> 
>> Maybe there's something region-specific?
> 
> Definitely. For me, with or without cookies enabled,
> https://www.cde.ca.gov/ reliably returns a 303 redirect to
> https://www.cde.ca.gov/wafalert.html?_event_transid=<large hexadecimal
> string>, which in turn returns a 303 redirect to the same address.
> 
> The Internet Wayback Machine does have some good snapshots; not all
> captures are redirects to validate.perfdrive.com:
> http://web.archive.org/web/*/https://www.cde.ca.gov/
> http://web.archive.org/web/20250823081216/https://www.cde.ca.gov/
> 
> -- 
> Best regards,
> Ivan
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Wed Sep  3 07:50:50 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Wed, 3 Sep 2025 05:50:50 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <20250903004417.50ed0048@Tarkus>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
Message-ID: <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>

Thanks, Ivan. Here is a transcript of the session. Note that functions from the usethis package are invoked from devtools::test(), experts of which I figured I might find most likely here.

Best wishes

Johannes

> devtools::test()
? No testing infrastructure found.
Create it?

1: I forget
2: Of course
3: Not yet

Selection: 2
? Setting active project to "//some-server/UserHome$/jhuesing/project_path
Error: [EPERM] Failed to stat '//some-server/UserHome$': operation not permitted
? Setting active project to "<no active project>".
> traceback()
8: (function (..., call. = TRUE, domain = NULL)
   {
       if (...length() == 1L && inherits(..1, "condition")) {
           cond <- ..1
           if (nargs() > 1L)
               warning("additional arguments ignored in stop()")
           message <- conditionMessage(cond)
           call <- conditionCall(cond)
           .Internal(.signalCondition(cond, message, call))
           .Internal(.dfltStop(message, call))
       }
       else .Internal(stop(call., .makeMessage(..., domain = domain)))
   })(structure(list(message = "[EPERM] Failed to stat '//some-server/UserHome$': operation not permitted"), class = c("EPERM",
   "fs_error", "error", "condition"), location = "utils.cc:16"))
7: dir_create(path, recurse = TRUE)
6: create_directory(proj_path(path))
5: use_directory(path("tests", "testthat"))
4: use_testthat_impl(edition, parallel = parallel)
3: usethis::use_testthat()
2: usethis_use_testthat(pkg)
1: devtools::test()
> use_directory
Error: object 'use_directory' not found
> usethis::use_directory
function (path, ignore = FALSE)
{
    create_directory(proj_path(path))
    if (ignore) {
        use_build_ignore(path)
    }
    invisible(TRUE)
}
<bytecode: 0x0000018a2c1590d8>
<environment: namespace:usethis>
> create_directory
Error: object 'create_directory' not found
> usethis::create_directory
Error: 'create_directory' is not an exported object from 'namespace:usethis'
> dir_create
Error: object 'dir_create' not found
> usethis::dir_create
Error: 'dir_create' is not an exported object from 'namespace:usethis'



Dr. Johannes H?sing
Epidemiologie


Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum
T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de
www.landeskrebsregister.nrw.de

Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
Gesch?ftsf?hrer

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.


-----Urspr?ngliche Nachricht-----
Von: Ivan Krylov <ikrylov at disroot.org>
Gesendet: Dienstag, 2. September 2025 23:44
An: r-package-devel at r-project.org
Cc: H?sing, Johannes <Johannes.Huesing at krebsregister.nrw.de>
Betreff: Re: [R-pkg-devel] Cannot implement test configuration

On Tue, 2 Sep 2025 06:23:24 +0000
"H?sing, Johannes via R-package-devel" <r-package-devel at r-project.org>
wrote:

> Error: [EPERM] Failed to stat '//some_servername/UserHome$':
> operation not permitted

What's the traceback() output immediately after this error happens? If you post it, someone may be able to point out the offending code and perhaps find a way to convince it to use the drive letter instead of the UNC path.

Since the error is encountered by code in 'usethis' (or somewhere downstream), likely not in base R, you may also get a more direct answer by following links at <https://usethis.r-lib.org/SUPPORT.html>.

--
Best regards,
Ivan


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Wed Sep  3 09:09:09 2025
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Wed, 3 Sep 2025 09:09:09 +0200
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <20250903004417.50ed0048@Tarkus>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
Message-ID: <f2370223-726c-42aa-b56c-079943860a98@gmail.com>


On 9/2/25 23:44, Ivan Krylov via R-package-devel wrote:
> On Tue, 2 Sep 2025 06:23:24 +0000
> "H?sing, Johannes via R-package-devel" <r-package-devel at r-project.org>
> wrote:
>
>> Error: [EPERM] Failed to stat '//some_servername/UserHome$':
>> operation not permitted
> What's the traceback() output immediately after this error happens? If
> you post it, someone may be able to point out the offending code and
> perhaps find a way to convince it to use the drive letter instead of
> the UNC path.
>
> Since the error is encountered by code in 'usethis' (or somewhere
> downstream), likely not in base R, you may also get a more direct
> answer by following links at <https://usethis.r-lib.org/SUPPORT.html>.

A common cause of such problems is path normalization.? Base R tries not 
to introduce UNC paths, e.g. path normalization of a path including a 
drive letter tries not to turn that path into UNC, exactly for this 
reason: there are tools around, not just R, that do not fully support 
UNC paths.

Tomas

>


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Wed Sep  3 10:20:17 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Wed, 3 Sep 2025 08:20:17 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <f2370223-726c-42aa-b56c-079943860a98@gmail.com>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <f2370223-726c-42aa-b56c-079943860a98@gmail.com>
Message-ID: <d7e24188b16f4896a8ff8f3de019915b@krebsregister.nrw.de>



>A common cause of such problems is path normalization.  Base R tries not to introduce UNC paths, e.g. path
> normalization of a path including a drive letter tries not to turn that path into UNC, exactly for this
> reason: there are tools around, not just R, that do not fully support UNC paths.

From the traceback transcript I gather that the error message is issued by an R script, as an argument to message(), not to stop(), and that the message refers to the normalised path.

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel



Dr. Johannes H?sing
Epidemiologie


Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum
T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de
www.landeskrebsregister.nrw.de

Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
Gesch?ftsf?hrer

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.



From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Sep  3 19:15:02 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 3 Sep 2025 12:15:02 -0500
Subject: [R-pkg-devel] winbuilder status?
Message-ID: <3c4db99e-5401-4a49-9a42-34dca4b5521e@effectivedefense.org>

Hello, All:


How can I find the status of Win-builder requests?


Yesterday at around 22:00 UTC (17:00 UTC-5, Kansas City, USA) I 
submitted three requests to check the results of a change to Ecdat, and 
I have not seen the results now roughly 17 hours later. I used:


devtools::check_win_devel()
devtools::check_win_release()
devtools::check_win_oldrelease()


I got results from previous checks a few minutes before submitting these 
requests.


*** THANKS TO Ivan Krylov <ikrylov at disroot.org>, who suggested replacing 
"https://www.cde.ca.gov/" with 
"http://web.archive.org/web/20250823081216/https://www.cde.ca.gov/". I 
tested this locally with "R CMD check --as-cran Ecdat_0.4.6.tar.gz", and 
it seemed to work. I'd like to see the winbuilder results before 
resubmitting the package to CRAN.


Thanks, Spencer Graves


From bbo|ker @end|ng |rom gm@||@com  Wed Sep  3 19:26:25 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 3 Sep 2025 13:26:25 -0400
Subject: [R-pkg-devel] winbuilder status?
In-Reply-To: <3c4db99e-5401-4a49-9a42-34dca4b5521e@effectivedefense.org>
References: <3c4db99e-5401-4a49-9a42-34dca4b5521e@effectivedefense.org>
Message-ID: <1381ca53-b828-4eb1-a31a-c7c5bc6f01d4@gmail.com>


I don't see it in the queue:

 > foghorn::winbuilder_queue() |> subset(package=="Ecdat")

# A tibble: 0 ? 5
# ? 5 variables: package <chr>, version <pckg_vrs>, folder <chr>, time 
<dttm>,
#   size <int>

but IIRC this only shows packages that are actually in the queue, not 
those being processed ...

   cheers
     Ben

On 9/3/25 13:15, Spencer Graves wrote:
> Hello, All:
> 
> 
> How can I find the status of Win-builder requests?
> 
> 
> Yesterday at around 22:00 UTC (17:00 UTC-5, Kansas City, USA) I 
> submitted three requests to check the results of a change to Ecdat, and 
> I have not seen the results now roughly 17 hours later. I used:
> 
> 
> devtools::check_win_devel()
> devtools::check_win_release()
> devtools::check_win_oldrelease()
> 
> 
> I got results from previous checks a few minutes before submitting these 
> requests.
> 
> 
> *** THANKS TO Ivan Krylov <ikrylov at disroot.org>, who suggested replacing 
> "https://www.cde.ca.gov/" with "http://web.archive.org/ 
> web/20250823081216/https://www.cde.ca.gov/". I tested this locally with 
> "R CMD check --as-cran Ecdat_0.4.6.tar.gz", and it seemed to work. I'd 
> like to see the winbuilder results before resubmitting the package to CRAN.
> 
> 
> Thanks, Spencer Graves
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Associate chair (graduate), Mathematics & Statistics
Director, School of Computational Science and Engineering
* E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From kev|nu@hey @end|ng |rom gm@||@com  Wed Sep  3 20:18:04 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Wed, 3 Sep 2025 11:18:04 -0700
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <d7e24188b16f4896a8ff8f3de019915b@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <f2370223-726c-42aa-b56c-079943860a98@gmail.com>
 <d7e24188b16f4896a8ff8f3de019915b@krebsregister.nrw.de>
Message-ID: <CAJXgQP3ianZ6dMF+mF_cSzkJP_zB1pEH-ndtB1m_=3WdzYHp3w@mail.gmail.com>

Out of curiosity, what do the following report?

    file.exists("//some_servername/UserHome$")
    dir.exists("//some_servername/UserHome$")
    fs::file_exists("//some_servername/UserHome$")
    fs::dir_exists(""//some_servername/UserHome$")

Looking at the sources, 'usethis' should be checking if the path
exists before trying to create it, but perhaps that check is
unexpectedly returning FALSE.

Best,
Kevin

On Wed, Sep 3, 2025 at 1:20?AM H?sing, Johannes via R-package-devel
<r-package-devel at r-project.org> wrote:
>
>
>
> >A common cause of such problems is path normalization.  Base R tries not to introduce UNC paths, e.g. path
> > normalization of a path including a drive letter tries not to turn that path into UNC, exactly for this
> > reason: there are tools around, not just R, that do not fully support UNC paths.
>
> From the traceback transcript I gather that the error message is issued by an R script, as an argument to message(), not to stop(), and that the message refers to the normalised path.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> Dr. Johannes H?sing
> Epidemiologie
>
>
> Landeskrebsregister NRW gGmbH
> Gesundheitscampus 10
> 44801 Bochum
> T 0234 54509-216
> F 0234 54509-499
> Johannes.Huesing at krebsregister.nrw.de
> www.landeskrebsregister.nrw.de
>
> Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
> Gesch?ftsf?hrer
>
> 5. Landesqualit?tskonferenz
> Mittwoch 08. Oktober 2025 in M?nster
> 20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
> Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
> Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/
>
> Dr. Andres Sch?tzend?bel
> Vorsitzender der Gesellschafterversammlung
> Staatssekret?r Matthias Heidmeier
> Sitz der Gesellschaft
> Bochum
> Registergericht
> Amtsgericht Bochum
> HRB 17715
>
> HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Sep  3 21:26:40 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 3 Sep 2025 14:26:40 -0500
Subject: [R-pkg-devel] winbuilder status?
In-Reply-To: <1381ca53-b828-4eb1-a31a-c7c5bc6f01d4@gmail.com>
References: <3c4db99e-5401-4a49-9a42-34dca4b5521e@effectivedefense.org>
 <1381ca53-b828-4eb1-a31a-c7c5bc6f01d4@gmail.com>
Message-ID: <c595128a-4fe7-45a4-8c48-f689cb4ca573@effectivedefense.org>

Hi, Ben:


Thanks for this. I've added "foghorn::winbuilder_queue()" to my routine 
script ;-)


AND I restarted the ones I couldn't find, and they all completed as 
expected.


Spencer


On 9/3/25 12:26, Ben Bolker wrote:
> 
> I don't see it in the queue:
> 
>  > foghorn::winbuilder_queue() |> subset(package=="Ecdat")
> 
> # A tibble: 0 ? 5
> # ? 5 variables: package <chr>, version <pckg_vrs>, folder <chr>, time 
> <dttm>,
> #?? size <int>
> 
> but IIRC this only shows packages that are actually in the queue, not 
> those being processed ...
> 
>  ? cheers
>  ??? Ben
> 
> On 9/3/25 13:15, Spencer Graves wrote:
>> Hello, All:
>>
>>
>> How can I find the status of Win-builder requests?
>>
>>
>> Yesterday at around 22:00 UTC (17:00 UTC-5, Kansas City, USA) I 
>> submitted three requests to check the results of a change to Ecdat, 
>> and I have not seen the results now roughly 17 hours later. I used:
>>
>>
>> devtools::check_win_devel()
>> devtools::check_win_release()
>> devtools::check_win_oldrelease()
>>
>>
>> I got results from previous checks a few minutes before submitting 
>> these requests.
>>
>>
>> *** THANKS TO Ivan Krylov <ikrylov at disroot.org>, who suggested 
>> replacing "https://www.cde.ca.gov/" with "http://web.archive.org/ 
>> web/20250823081216/https://www.cde.ca.gov/". I tested this locally 
>> with "R CMD check --as-cran Ecdat_0.4.6.tar.gz", and it seemed to 
>> work. I'd like to see the winbuilder results before resubmitting the 
>> package to CRAN.
>>
>>
>> Thanks, Spencer Graves
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Sep  3 21:30:42 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 3 Sep 2025 14:30:42 -0500
Subject: [R-pkg-devel] 
 How to fix "Number of redirects hit maximum amount"?
In-Reply-To: <0402F490-16B4-45AD-AC66-16A1C60BFA26@R-project.org>
References: <063d034f-cbc4-4ef9-906d-257c556a5c0c@statistik.tu-dortmund.de>
 <56c07462-26c8-4080-86fb-dfcb21a847e2@effectivedefense.org>
 <58d8a6a6-ca49-4ccb-aa23-1c0aaaea8992@statistik.tu-dortmund.de>
 <417509b6-dbf6-4afb-bcce-3d82cb0b2d92@gmail.com>
 <20250903004322.31aad686@Tarkus>
 <0402F490-16B4-45AD-AC66-16A1C60BFA26@R-project.org>
Message-ID: <c2caaaae-64a5-4688-ab93-84e1116d9434@effectivedefense.org>

Hello, Simon, Ben, Ivan, Uwe:


Thanks for the suggestions.


I followed Ivan's suggestion of replacing the problem URL with a call to 
a copy on archive.org, and it passed all the tests locally and on 
winbuilder devel, release, and oldrelease.


Spencer Graves


On 9/2/25 18:43, Simon Urbanek wrote:
> FWIW same here from the other hemisphere - it's an infinite loop in their webserver. I?d say that confirms that the link is not accessible, so definitely needs fixing.
> 
> Looking at the package, I think that link is entirely pointless anyway, because it doesn't even point to the data source, so either point to the actual page with the data or remove (pointing to the archive for the CDE front page is just as useless IMHO).
> 
> Cheers,
> Simon
> 
> 
>> On 3 Sep 2025, at 09:43, Ivan Krylov via R-package-devel <r-package-devel at r-project.org> wrote:
>>
>> On Tue, 2 Sep 2025 17:00:18 -0400
>> Ben Bolker <bbolker at gmail.com> wrote:
>>
>>> Maybe there's something region-specific?
>>
>> Definitely. For me, with or without cookies enabled,
>> https://www.cde.ca.gov/ reliably returns a 303 redirect to
>> https://www.cde.ca.gov/wafalert.html?_event_transid=<large hexadecimal
>> string>, which in turn returns a 303 redirect to the same address.
>>
>> The Internet Wayback Machine does have some good snapshots; not all
>> captures are redirects to validate.perfdrive.com:
>> http://web.archive.org/web/*/https://www.cde.ca.gov/
>> http://web.archive.org/web/20250823081216/https://www.cde.ca.gov/
>>
>> -- 
>> Best regards,
>> Ivan
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From |kry|ov @end|ng |rom d|@root@org  Thu Sep  4 00:40:33 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 4 Sep 2025 01:40:33 +0300
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
Message-ID: <20250904014033.66de4e85@Tarkus>

? Wed, 3 Sep 2025 05:50:50 +0000
"H?sing, Johannes" <Johannes.Huesing at krebsregister.nrw.de> ?????:

> ? Setting active project to
> "//some-server/UserHome$/jhuesing/project_path

So, the goal is for a drive letter path to be in the above output
instead of a UNC path?

> structure(list(message = "[EPERM] Failed to stat
> '//some-server/UserHome$': operation not permitted"), class =
> c("EPERM", "fs_error", "error", "condition"), location =
> "utils.cc:16"))

The error happens in fs::dir_create()... [1]

> 7: dir_create(path, recurse = TRUE)
> 6: create_directory(proj_path(path))
> 5: use_directory(path("tests", "testthat"))

...but the path originates from somewhere in usethis::proj_path().

Does getwd() return a path with a drive letter? If not, does it help to
setwd() to a drive letter path first?

Apparently usethis::proj_get() uses a UNC path. Does it help to give a
drive letter path to usethis::proj_set() first?

-- 
Best regards,
Ivan

[1]
https://github.com/r-lib/fs/blob/0d261dd965404cb02ab57788f4437fa057a9e0a3/src/dir.cc#L31
https://github.com/r-lib/fs/blob/main/src/utils.cc#L16


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Thu Sep  4 08:12:49 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Thu, 4 Sep 2025 06:12:49 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <20250904014033.66de4e85@Tarkus>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
 <20250904014033.66de4e85@Tarkus>
Message-ID: <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>

Thanks for your collective curiosity.

Ivan:
I am quite confident that the issue would be solved if the UNC version of the path would be replaced by the letter-plus-colon  MS-DOS-style expression. Typing getwd() indeed returns a letter-plus-colon path.

Kevin:
fs::file_exists(//some_servername/Userhome$) returns FALSE
file.exists(//some_servername/Userhome$) returns FALSE
fs::dir_exists(//some_servername/Userhome$) returns Error: [EPERM] Failed to stat '//some_servername/UserHome$': operation not permitted
dir.exists(//some_servername/Userhome$) returns FALSE


Michael:
Trace calls to fs::path_real() are issued multiple times when trying to build test infrastructure:
> devtools::test()
trace: path_real
? No testing infrastructure found.
Create it?

1: I forget
2: Absolutely
3: No

Selection: 2
trace: dir_exists
trace: path_real
trace: path_real
? Setting active project to "//some_servername/UserHome$/jhuesing/R/Tools/ICD_O_3/ICDO3".
trace: dir_exists
Error: [EPERM] Failed to stat '//some_servername/UserHome$': operation not permitted
? Setting active project to "<no active project>".




Dr. Johannes H?sing
Epidemiologie


Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum
T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de
www.landeskrebsregister.nrw.de

Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
Gesch?ftsf?hrer

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.


-----Urspr?ngliche Nachricht-----
Von: Ivan Krylov <ikrylov at disroot.org>
Gesendet: Donnerstag, 4. September 2025 00:41
An: H?sing, Johannes <Johannes.Huesing at krebsregister.nrw.de>
Cc: r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] Cannot implement test configuration

? Wed, 3 Sep 2025 05:50:50 +0000
"H?sing, Johannes" <Johannes.Huesing at krebsregister.nrw.de> ?????:

> ? Setting active project to
> "//some-server/UserHome$/jhuesing/project_path

So, the goal is for a drive letter path to be in the above output instead of a UNC path?

> structure(list(message = "[EPERM] Failed to stat
> '//some-server/UserHome$': operation not permitted"), class =
> c("EPERM", "fs_error", "error", "condition"), location =
> "utils.cc:16"))

The error happens in fs::dir_create()... [1]

> 7: dir_create(path, recurse = TRUE)
> 6: create_directory(proj_path(path))
> 5: use_directory(path("tests", "testthat"))

...but the path originates from somewhere in usethis::proj_path().

Does getwd() return a path with a drive letter? If not, does it help to
setwd() to a drive letter path first?

Apparently usethis::proj_get() uses a UNC path. Does it help to give a drive letter path to usethis::proj_set() first?

--
Best regards,
Ivan

[1]
https://github.com/r-lib/fs/blob/0d261dd965404cb02ab57788f4437fa057a9e0a3/src/dir.cc#L31
https://github.com/r-lib/fs/blob/main/src/utils.cc#L16


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Thu Sep  4 09:07:32 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Thu, 4 Sep 2025 07:07:32 +0000
Subject: [R-pkg-devel] Reproducing CRAN checks
Message-ID: <AM8PR10MB4660CE222C4F6DB867BE0DF1A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Dear all,

After submitting a newbie package to CRAN, I know receive some check-results that need to be addressed. There are issues raised by the gcc-ASAN, gcc-UBSAN and M1mac checks. More specifically here are the check results:

https://cran.r-project.org/web/checks/check_results_blosc.html

I think I know how to address these issues, however... How can I test if my fixes (https://github.com/pepijn-devries/blosc/pull/27/files) were adequate? When I check the submitted package with rhub's the gcc-ASAN docker file, the issues reported by CRAN don't pop up. I'm also not sure how to reproduce the M1mac results. In short: how can I assure that my fixes are adequate, other then resubmitting to CRAN and hoping for the best?

Kind regards,

Pepijn

From |kry|ov @end|ng |rom d|@root@org  Thu Sep  4 11:10:23 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 04 Sep 2025 12:10:23 +0300
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
 <20250904014033.66de4e85@Tarkus>
 <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>
Message-ID: <62469F19-1DA0-44D4-80F2-EF333C6C95BF@disroot.org>

4 ???????? 2025??. 09:12:49 GMT+03:00, "H?sing, Johannes" <Johannes.Huesing at krebsregister.nrw.de> ?????:
> Typing getwd() indeed returns a letter-plus-colon path.

Then usethis::proj_set(getwd()) might help as a workaround.

-- 
Best regards,
Ivan


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Sep  4 11:24:38 2025
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 4 Sep 2025 11:24:38 +0200
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <fake-VM-id.69e9eb1ea40772e84d1ee46b2630ad84@talos.iv>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
 <20250904014033.66de4e85@Tarkus>
 <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>
 <62469F19-1DA0-44D4-80F2-EF333C6C95BF@disroot.org>
Message-ID: <26809.23254.744716.682131@stat.math.ethz.ch>

>>>>> Ivan Krylov via R-package-devel 
>>>>>     on Thu, 04 Sep 2025 12:10:23 +0300 writes:

    > 4 ???????? 2025??. 09:12:49 GMT+03:00, "H?sing, Johannes" <Johannes.Huesing at krebsregister.nrw.de> ?????:
    >> Typing getwd() indeed returns a letter-plus-colon path.

    > Then usethis::proj_set(getwd()) might help as a workaround.

and I guess, using the excellent and "official" Rtools for
Windows (by Tomas Kalibera), and there a version of
	R CMD check <pkg>
may have helped to save  a lot of time (over using  devtools and all the extra
mumbo jumbo it carries along, but of course that is heretic to say,
... and you need _not_ tell me so ;-).

Martin


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Thu Sep  4 13:03:33 2025
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Thu, 4 Sep 2025 11:03:33 +0000
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <62469F19-1DA0-44D4-80F2-EF333C6C95BF@disroot.org>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
 <20250904014033.66de4e85@Tarkus>
 <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>
 <62469F19-1DA0-44D4-80F2-EF333C6C95BF@disroot.org>
Message-ID: <e5a13cf20b23425082fa41d9e3a5f984@krebsregister.nrw.de>

usethis::proj_set(getwd())
? Setting active project to "//some-project/UserHome$/jhuesing/R/Tools/ICD_O_3/ICDO3".
### hmm ...
> getwd()
[1] "u:/R/Tools/ICD_O_3/ICDO3"
### double hmm ...

The conversion seems to happen within functions of he usethis package, some of which are used by proj_set() but not exported, such as proj_find()



Dr. Johannes H?sing
Epidemiologie


Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum
T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de
www.landeskrebsregister.nrw.de

Newsletter LKR NRW jetzt anmelden unter Newsletter <www.landeskrebsregister.nrw/aktuelles/newsletter>
Gesch?ftsf?hrer

5. Landesqualit?tskonferenz
Mittwoch 08. Oktober 2025 in M?nster
20 Jahre Krebsregistrierung f?r Nordrhein-Westfalen
Eine Erfolgsgeschichte f?r die onkologische Forschung und Versorgung
Anmeldung: https://www.landeskrebsregister.nrw/5-landesqualitaetskonferenz-nrw/

Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Sep  4 15:58:23 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Sep 2025 09:58:23 -0400
Subject: [R-pkg-devel] Cannot implement test configuration
In-Reply-To: <e5a13cf20b23425082fa41d9e3a5f984@krebsregister.nrw.de>
References: <f489d1dc6d0443a0b3334d24db9c7ab1@krebsregister.nrw.de>
 <20250903004417.50ed0048@Tarkus>
 <e89c6d7030e84af1a42e9045950d9a1e@krebsregister.nrw.de>
 <20250904014033.66de4e85@Tarkus>
 <7926addc13234bfe8e324aec93618ab3@krebsregister.nrw.de>
 <62469F19-1DA0-44D4-80F2-EF333C6C95BF@disroot.org>
 <e5a13cf20b23425082fa41d9e3a5f984@krebsregister.nrw.de>
Message-ID: <763fa0a8-671e-4410-bc05-145e0c6371f7@gmail.com>

On 2025-09-04 7:03 a.m., H?sing, Johannes via R-package-devel wrote:
> usethis::proj_set(getwd())
> ? Setting active project to "//some-project/UserHome$/jhuesing/R/Tools/ICD_O_3/ICDO3".
> ### hmm ...
>> getwd()
> [1] "u:/R/Tools/ICD_O_3/ICDO3"
> ### double hmm ...
> 
> The conversion seems to happen within functions of he usethis package, some of which are used by proj_set() but not exported, such as proj_find()

It seems like you may be the only one able to narrow this down further. 
Here's what you could do:

   debug(usethis::proj_set)
   usethis::proj_set(getwd())

This will single-step through proj_set.  If you are in RStudio or a 
similar environment, it will display the values of local variables.  You 
will probably be able to see the string 
"//some-project/UserHome$/jhuesing/R/Tools/ICD_O_3/ICDO3" show up in one 
of those at some point. (I'd guess it will happen really soon, after the 
call to proj_path_prep(path). If you don't see local variables 
displayed, then you can run

   <something>

to print the current value of that variable, or print(<something>) if 
the variable name matches a browser command.

It's likely that you'll be able to identify the exact function call that 
produces the UNC path.  Then you can try to see if that same function 
call does the same thing at top level.   You can call unexported 
functions using the triple colon notation, e.g. 
usethis:::proj_path_prep().  Then you can repeat:

   debug(usethis:::proj_path_prep)

or use the browser "s" command to step into that call.  Use undebug() to 
remove the debugging flags from functions after you find out they aren't 
interesting.

Duncan Murdoch


From |kry|ov @end|ng |rom d|@root@org  Thu Sep  4 22:43:17 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 4 Sep 2025 23:43:17 +0300
Subject: [R-pkg-devel] Reproducing CRAN checks
In-Reply-To: <AM8PR10MB4660CE222C4F6DB867BE0DF1A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
References: <AM8PR10MB4660CE222C4F6DB867BE0DF1A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <20250904234317.16d5bda5@Tarkus>

? Thu, 4 Sep 2025 07:07:32 +0000
Pepijn de Vries <pepijn.devries at outlook.com> ?????:

> When I check the submitted package with rhub's the gcc-ASAN docker
> file, the issues reported by CRAN don't pop up.

Is it this one?
https://github.com/r-hub/containers/blob/main/containers/gcc-asan/Dockerfile

Looks like it's based on Fedora 40 with GCC 14, while Prof. Brian
Ripley runs the gcc-ASAN checks on Fedora 42 with GCC 15:
https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt

(If README.txt and 00check.log ever disagree, trust 00check.log.)

Sometimes the issues are trivial to reproduce with any version of gcc
-fsanitize. Sometimes you need the right compiler version. Sometimes
you need to compile R and all dependencies from source so that they are
all instrumented by sanitizers. Sometimes even a fully reproducible
build environment, if it existed, wouldn't be enough because the issue
is only visible when the CPU is fully loaded with some threads being
starved for CPU time [*].

I think that currently, the approach most likely to reproduce the
problem is to start with a Fedora 42 container and follow the
README.txt together with WRE 4.3.3 and 4.3.4 to build R and all
dependencies from source. There are many shortcuts that could be taken
(and the ones taken by r-hub containers save a lot of electricity and
time running CI!), but they carry a risk of missing the problem.

> I'm also not sure how to reproduce the M1mac results.

If you skip install.libs('blosc') in CI on macOS, the failure should be
reproducible, but then there's no way for the configure script to
succeed. Were you asked to fix the error messages produced by the
configure script?

> In short: how can I assure that my fixes are adequate, other then
> resubmitting to CRAN and hoping for the best?

If you'd like to provably prevent the dereference of the [-1] subscript
from happening, consider moving the if (target_unit < 0) stop(...)
inside the previous if (target_unit < 0) branch, before accessing the
arrays. This way even a strange new unit (or a damaged file) won't cause
undefined behaviour.

-- 
Best regards,
Ivan

[*] e.g. https://github.com/Rdatatable/data.table/issues/7051


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Thu Sep  4 23:30:29 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Thu, 4 Sep 2025 21:30:29 +0000
Subject: [R-pkg-devel] Reproducing CRAN checks
In-Reply-To: <20250904234317.16d5bda5@Tarkus>
References: <AM8PR10MB4660CE222C4F6DB867BE0DF1A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <20250904234317.16d5bda5@Tarkus>
Message-ID: <AM8PR10MB4660485D7AF4AD92CDE71560A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Hi Ivan,

Thank you for you very helpful response!

> ? Thu, 4 Sep 2025 07:07:32 +0000
> Pepijn de Vries <pepijn.devries at outlook.com> ?????:
> 
> > When I check the submitted package with rhub's the gcc-ASAN docker
> > file, the issues reported by CRAN don't pop up.
> 
> Is it this one?
> https://github.com/r-hub/containers/blob/main/containers/gcc-asan/Dockerfile

Yes, that's one of the sanitizers I've used for testing

> 
> Looks like it's based on Fedora 40 with GCC 14, while Prof. Brian
> Ripley runs the gcc-ASAN checks on Fedora 42 with GCC 15:
> https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt
> 
> (If README.txt and 00check.log ever disagree, trust 00check.log.)
> 
> Sometimes the issues are trivial to reproduce with any version of gcc
> -fsanitize. Sometimes you need the right compiler version. Sometimes
> you need to compile R and all dependencies from source so that they are
> all instrumented by sanitizers. Sometimes even a fully reproducible
> build environment, if it existed, wouldn't be enough because the issue
> is only visible when the CPU is fully loaded with some threads being
> starved for CPU time [*].
> 
> I think that currently, the approach most likely to reproduce the
> problem is to start with a Fedora 42 container and follow the
> README.txt together with WRE 4.3.3 and 4.3.4 to build R and all
> dependencies from source. There are many shortcuts that could be taken
> (and the ones taken by r-hub containers save a lot of electricity and
> time running CI!), but they carry a risk of missing the problem.
> 

Thank you for the thorough explanation. I see that reproducing sanitizer
results isn't for the faint of heart. I will have to ponder if I really
want to put all this effort in trying to reproduce the reported results,
or just making sensible adjustments based on the reported issues.

> > I'm also not sure how to reproduce the M1mac results.
> 
> If you skip install.libs('blosc') in CI on macOS, the failure should be
> reproducible, but then there's no way for the configure script to
> succeed. Were you asked to fix the error messages produced by the
> configure script?

Prof. Ripley did send an e-mail with specific requests. Three of the requests
are related to the configure script: 1) I should use c++ flags instead of
c-flags. That was my bad, I have fixed those. 2) In case of failure the
configure script should exit with an informative message. I have updated the
configure script by informing the user how to install the system requirements,
when not found. 3) "Could not find the required static library BLOSC"
Here Prof. Ripley implies that blosc is not static on Linux. I don't think this is
the case. So I'm not sure how to proceed with this.

> 
> > In short: how can I assure that my fixes are adequate, other then
> > resubmitting to CRAN and hoping for the best?
> 
> If you'd like to provably prevent the dereference of the [-1] subscript
> from happening, consider moving the if (target_unit < 0) stop(...)
> inside the previous if (target_unit < 0) branch, before accessing the
> arrays. This way even a strange new unit (or a damaged file) won't cause
> undefined behaviour.

Thanks for the suggestion. I think you are right that it is safer to move the
check (target_unit < 0) up. And I agree that this should address the reported
undefined behaviour.

> 
> --
> Best regards,
> Ivan
> 
> [*] e.g. https://github.com/Rdatatable/data.table/issues/7051

From edd @end|ng |rom deb|@n@org  Fri Sep  5 00:08:35 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 4 Sep 2025 17:08:35 -0500
Subject: [R-pkg-devel] Reproducing CRAN checks
In-Reply-To: <AM8PR10MB4660485D7AF4AD92CDE71560A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
References: <AM8PR10MB4660CE222C4F6DB867BE0DF1A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <20250904234317.16d5bda5@Tarkus>
 <AM8PR10MB4660485D7AF4AD92CDE71560A700A@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <26810.3555.44668.551099@paul.eddelbuettel.com>


On 4 September 2025 at 21:30, Pepijn de Vries wrote:
| when not found. 3) "Could not find the required static library BLOSC"
| Here Prof. Ripley implies that blosc is not static on Linux. I don't think this is
| the case. So I'm not sure how to proceed with this.

What is your system / your reference?  "Here" on Ubuntu libblosc* is set up
like thousands of other libraries: the shared library in the run-time
package, the static library in the -dev package.

Your build picks up the shared library as we'd expect:

$ ldd /usr/local/lib/R/site-library/blosc/libs/blosc.so | grep blosc
        libblosc.so.1 => /lib/x86_64-linux-gnu/libblosc.so.1 (0x00007f4b56501000)
$

To pick just one other package with compressors libraries:

$ ldd /usr/local/lib/R/site-library/zip/libs/zip.so | grep 'lib.*z'
        libzstd.so.1 => /lib/x86_64-linux-gnu/libzstd.so.1 (0x000078af0e90f000)
        liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5 (0x000078af0e8cf000)
        libbz2.so.1.0 => /lib/x86_64-linux-gnu/libbz2.so.1.0 (0x000078af0e8bb000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x000078af0e89d000)
$

Now, it has become a little 'fashionable' to ship libraries with their CRAN
package and embed them, but the default is still to rely on established
system libraries:

$ ldd /usr/local/lib/R/site-library/RPostgreSQL/libs/RPostgreSQL.so | grep libpq
        libpq.so.5 => /lib/x86_64-linux-gnu/libpq.so.5 (0x000071fe7fc53000)
$ ldd /usr/local/lib/R/site-library/RPostgres/libs/RPostgres.so | grep libpq
        libpq.so.5 => /lib/x86_64-linux-gnu/libpq.so.5 (0x000072e718fd6000)
$

Maybe Prof Ripley wanted you to play along the common theme of relying on an
external shared library?  For libblosc the default (as seen from `pkgconf`
aka `pkg-config`) appears to be standard linking just as we saw above:

$ pkgconf --libs blosc
-lblosc 
$ 

Hope this helps,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From chr|@topherkenny @end|ng |rom |@@@h@rv@rd@edu  Fri Sep  5 01:53:05 2025
From: chr|@topherkenny @end|ng |rom |@@@h@rv@rd@edu (Kenny, Christopher)
Date: Thu, 4 Sep 2025 23:53:05 +0000
Subject: [R-pkg-devel] winbuilder status?
In-Reply-To: <c595128a-4fe7-45a4-8c48-f689cb4ca573@effectivedefense.org>
References: <3c4db99e-5401-4a49-9a42-34dca4b5521e@effectivedefense.org>
 <1381ca53-b828-4eb1-a31a-c7c5bc6f01d4@gmail.com>
 <c595128a-4fe7-45a4-8c48-f689cb4ca573@effectivedefense.org>
Message-ID: <BL0PR07MB549135750314FF6C4BD394758000A@BL0PR07MB5491.namprd07.prod.outlook.com>

To the extent it's generally helpful, I have seen this for 3 packages during checking on winbuilder this week. Each with submissions during the late afternoon EST. Something may be stalling and resetting.

With Ben's tip to look at the list with foghorn, there does seem to be a small queue that gets stuck, so it's likely not package specific.

And, as with Spencer's experience, resubmitting later gives the normal response.

It's clearly intermittent, so resubmitting a few hours later seems to be a reliable response for now.

Best,
Chris
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: Wednesday, September 3, 2025 3:26 PM
To: Ben Bolker <bbolker at gmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] winbuilder status?

Hi, Ben:


Thanks for this. I've added "foghorn::winbuilder_queue()" to my routine
script ;-)


AND I restarted the ones I couldn't find, and they all completed as
expected.


Spencer


On 9/3/25 12:26, Ben Bolker wrote:
>
> I don't see it in the queue:
>
>  > foghorn::winbuilder_queue() |> subset(package=="Ecdat")
>
> # A tibble: 0 ? 5
> # ? 5 variables: package <chr>, version <pckg_vrs>, folder <chr>, time
> <dttm>,
> #   size <int>
>
> but IIRC this only shows packages that are actually in the queue, not
> those being processed ...
>
>    cheers
>      Ben
>
> On 9/3/25 13:15, Spencer Graves wrote:
>> Hello, All:
>>
>>
>> How can I find the status of Win-builder requests?
>>
>>
>> Yesterday at around 22:00 UTC (17:00 UTC-5, Kansas City, USA) I
>> submitted three requests to check the results of a change to Ecdat,
>> and I have not seen the results now roughly 17 hours later. I used:
>>
>>
>> devtools::check_win_devel()
>> devtools::check_win_release()
>> devtools::check_win_oldrelease()
>>
>>
>> I got results from previous checks a few minutes before submitting
>> these requests.
>>
>>
>> *** THANKS TO Ivan Krylov <ikrylov at disroot.org>, who suggested
>> replacing "https://www.cde.ca.gov/" with "http://web.archive.org/
>> web/20250823081216/https://www.cde.ca.gov/". I tested this locally
>> with "R CMD check --as-cran Ecdat_0.4.6.tar.gz", and it seemed to
>> work. I'd like to see the winbuilder results before resubmitting the
>> package to CRAN.
>>
>>
>> Thanks, Spencer Graves
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sun Sep  7 21:10:32 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 7 Sep 2025 14:10:32 -0500
Subject: [R-pkg-devel] apparent infinite loop in GitHub Action on a tiny
 package
Message-ID: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>

Hello, All:


GitHub Action has been running on 5 platforms for over a half hour on a 
tiny package:


https://github.com/sbgraves237/SS4Maddison


I'm trying to follow the current recommendation in Wickham and Bryan, R 
Packages.[1] I just added ~R/MaddisonProjectData.R, documenting data 
objects I have yet to add to the package, attempting to follow the 
instructions in R Packages, section 7.1.2 Documenting datasets.[2]


Then "devtools::load_all()" on my local computer put R into an apparent 
infinite loop.[3] After breaking out of that, I managed to replicate the 
behavior on 5 platforms on GitHub Action.


What do you suggest?
Thanks,
Spencer Graves


[1] Wickham and Bryan, R Packages:


https://r-pkgs.org/


[2] Wickham and Bryan, R Packages, section 7.1.2 Documenting datasets:


https://r-pkgs.org/data.html


[3] Sys.info()
  
                           sysname
  
                          "Darwin"
  
                           release
  
                          "24.6.0"
  
                           version
"Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:30 PDT 2025; 
root:xnu-11417.140.69~1/RELEASE_ARM64_T6020"
  
                          nodename
  
                             "Mac"
  
                           machine
  
                           "arm64"
  
                             login
  
                            "root"
  
                              user
  
                              "sg"
  
                    effective_user
  
                              "sg"


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Sep  7 21:40:50 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Sep 2025 15:40:50 -0400
Subject: [R-pkg-devel] apparent infinite loop in GitHub Action on a tiny
 package
In-Reply-To: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
References: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
Message-ID: <b7edb968-e18f-4afc-987d-9dc7179c093e@gmail.com>

On 2025-09-07 3:10 p.m., Spencer Graves wrote:
> Hello, All:
> 
> 
> GitHub Action has been running on 5 platforms for over a half hour on a
> tiny package:
> 
> 
> https://github.com/sbgraves237/SS4Maddison
> 
> 
> I'm trying to follow the current recommendation in Wickham and Bryan, R
> Packages.[1] I just added ~R/MaddisonProjectData.R, documenting data
> objects I have yet to add to the package, attempting to follow the
> instructions in R Packages, section 7.1.2 Documenting datasets.[2]
> 
> 
> Then "devtools::load_all()" on my local computer put R into an apparent
> infinite loop.[3] After breaking out of that, I managed to replicate the
> behavior on 5 platforms on GitHub Action.
> 
> 
> What do you suggest?

You can cancel Github actions.  I'd recommend cancelling 4 of the 5, and 
letting the 5th run for longer.

Several of them are stuck just after "* checking for sufficient/correct 
file permissions ... OK".  I think the next test should be "checking 
whether package ?foo? can be installed ...", so it looks like there are 
installation problems.  Whether those are problems in the package or 
problems at Github I couldn't tell you.

Duncan Murdoch

> Thanks,
> Spencer Graves
> 
> 
> [1] Wickham and Bryan, R Packages:
> 
> 
> https://r-pkgs.org/
> 
> 
> [2] Wickham and Bryan, R Packages, section 7.1.2 Documenting datasets:
> 
> 
> https://r-pkgs.org/data.html
> 
> 
> [3] Sys.info()
>    
>                             sysname
>    
>                            "Darwin"
>    
>                             release
>    
>                            "24.6.0"
>    
>                             version
> "Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:30 PDT 2025;
> root:xnu-11417.140.69~1/RELEASE_ARM64_T6020"
>    
>                            nodename
>    
>                               "Mac"
>    
>                             machine
>    
>                             "arm64"
>    
>                               login
>    
>                              "root"
>    
>                                user
>    
>                                "sg"
>    
>                      effective_user
>    
>                                "sg"
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Sep  7 21:43:06 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Sep 2025 15:43:06 -0400
Subject: [R-pkg-devel] apparent infinite loop in GitHub Action on a tiny
 package
In-Reply-To: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
References: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
Message-ID: <085af911-4bdd-47c9-8236-37f8f2bdaacb@gmail.com>

You're doing one strange thing:  the only code in the package is

   devtools::load_all()

in the single .R file.  That's a weird thing to do.

Duncan Murdoch

On 2025-09-07 3:10 p.m., Spencer Graves wrote:
> Hello, All:
> 
> 
> GitHub Action has been running on 5 platforms for over a half hour on a
> tiny package:
> 
> 
> https://github.com/sbgraves237/SS4Maddison
> 
> 
> I'm trying to follow the current recommendation in Wickham and Bryan, R
> Packages.[1] I just added ~R/MaddisonProjectData.R, documenting data
> objects I have yet to add to the package, attempting to follow the
> instructions in R Packages, section 7.1.2 Documenting datasets.[2]
> 
> 
> Then "devtools::load_all()" on my local computer put R into an apparent
> infinite loop.[3] After breaking out of that, I managed to replicate the
> behavior on 5 platforms on GitHub Action.
> 
> 
> What do you suggest?
> Thanks,
> Spencer Graves
> 
> 
> [1] Wickham and Bryan, R Packages:
> 
> 
> https://r-pkgs.org/
> 
> 
> [2] Wickham and Bryan, R Packages, section 7.1.2 Documenting datasets:
> 
> 
> https://r-pkgs.org/data.html
> 
> 
> [3] Sys.info()
>    
>                             sysname
>    
>                            "Darwin"
>    
>                             release
>    
>                            "24.6.0"
>    
>                             version
> "Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:30 PDT 2025;
> root:xnu-11417.140.69~1/RELEASE_ARM64_T6020"
>    
>                            nodename
>    
>                               "Mac"
>    
>                             machine
>    
>                             "arm64"
>    
>                               login
>    
>                              "root"
>    
>                                user
>    
>                                "sg"
>    
>                      effective_user
>    
>                                "sg"
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sun Sep  7 22:17:18 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 7 Sep 2025 15:17:18 -0500
Subject: [R-pkg-devel] apparent infinite loop in GitHub Action on a tiny
 package
In-Reply-To: <085af911-4bdd-47c9-8236-37f8f2bdaacb@gmail.com>
References: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
 <085af911-4bdd-47c9-8236-37f8f2bdaacb@gmail.com>
Message-ID: <9257e41c-fa10-4ddf-a260-2e4384f1dbbb@effectivedefense.org>

Hi, Duncan:


That's not just weird, it's the source of the infinite loop.


Please excuse me for taking your time with this.


Thanks very much. Spencer Graves


On 9/7/25 14:43, Duncan Murdoch wrote:
> You're doing one strange thing:? the only code in the package is
> 
>  ? devtools::load_all()
> 
> in the single .R file.? That's a weird thing to do.
> 
> Duncan Murdoch
> 
> On 2025-09-07 3:10 p.m., Spencer Graves wrote:
>> Hello, All:
>>
>>
>> GitHub Action has been running on 5 platforms for over a half hour on a
>> tiny package:
>>
>>
>> https://github.com/sbgraves237/SS4Maddison
>>
>>
>> I'm trying to follow the current recommendation in Wickham and Bryan, R
>> Packages.[1] I just added ~R/MaddisonProjectData.R, documenting data
>> objects I have yet to add to the package, attempting to follow the
>> instructions in R Packages, section 7.1.2 Documenting datasets.[2]
>>
>>
>> Then "devtools::load_all()" on my local computer put R into an apparent
>> infinite loop.[3] After breaking out of that, I managed to replicate the
>> behavior on 5 platforms on GitHub Action.
>>
>>
>> What do you suggest?
>> Thanks,
>> Spencer Graves
>>
>>
>> [1] Wickham and Bryan, R Packages:
>>
>>
>> https://r-pkgs.org/
>>
>>
>> [2] Wickham and Bryan, R Packages, section 7.1.2 Documenting datasets:
>>
>>
>> https://r-pkgs.org/data.html
>>
>>
>> [3] Sys.info()
>> ??????????????????????????? sysname
>> ?????????????????????????? "Darwin"
>> ??????????????????????????? release
>> ?????????????????????????? "24.6.0"
>> ??????????????????????????? version
>> "Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:30 PDT 2025;
>> root:xnu-11417.140.69~1/RELEASE_ARM64_T6020"
>> ?????????????????????????? nodename
>> ????????????????????????????? "Mac"
>> ??????????????????????????? machine
>> ??????????????????????????? "arm64"
>> ????????????????????????????? login
>> ???????????????????????????? "root"
>> ?????????????????????????????? user
>> ?????????????????????????????? "sg"
>> ???????????????????? effective_user
>> ?????????????????????????????? "sg"
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From otoomet @end|ng |rom gm@||@com  Sun Sep  7 23:38:23 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Sun, 7 Sep 2025 14:38:23 -0700
Subject: [R-pkg-devel] "Warning: replacing previous import" in reverse
 dependencies
Message-ID: <CAMMJQ0bVib=T1YO-Wn-_mMVP3c3sLWgTuf+jUPSWw4wEGVJ3qQ@mail.gmail.com>

I am trying to understand/fix the reverse dependency warnings I get with
the new version of my maxLik package (see
https://github.com/arne-henningsen/maxLik).   For a number of packages,
e.g. for censReg, I get a warning:

Warning: replacing previous import ?maxLik::nobs? by ?stats::nobs? when
loading ?censReg?

I think this is related to the fact that the new version of maxLik imports
the S4 version of nobs, instead of miscTools' nObs.  The relevant part of
the NAMESPACE is

...
importFrom("stats4", "nobs")
...

However, censReg imports the S3 version after importing maxLik (it's
NAMESPACE):

...
import( "maxLik" )
...
importFrom( "stats", "nobs" )
...

(I may be wrong with my interpretation though.)

Is it something that I should address, or is it an issue with censReg
package in this case?  I can get the warning to go away if I re-order the
imports in censReg (generic nobs first, maxLik afterward).

Any enlightenment appreciated :-)

Ott

	[[alternative HTML version deleted]]


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Mon Sep  8 17:23:31 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Mon, 8 Sep 2025 15:23:31 +0000
Subject: [R-pkg-devel] Misusing CFLAGS?
Message-ID: <AM8PR10MB466091CF9CC73E6A1D7A4DACA70CA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Hi all,

A CRAN check report after a manual inspection confuses me a bit. Hopefully someone can help me interpret. I received the following feedback based on M1mac checks:

_"He really should not be recommending Brew for macOS ... Since it does not log the configure output, issues such as misusing CFLAGS are suppressed (a usual 'anticonf' failing)."_

I use a modified 'anticonf' (by Jeroen Ooms) configure script. When a specific header file (blosc.h) is not found, an error is produced and the submitted version echos the suggestion to install the library with Brew. I know this is not the preferred method for linking to binaries on MacOS. I have already adjusted it to suggest the preferred method for setting this up (using https://mac.R-project.org/bin/install.R). So this should take care of the first part of the feedback.

I'm confused about the second part of the feedback. Is it related to the first part? Or is it a completely separate issue? If it is a completely separate issue, how am I misusing CFLAGS?

Latest version of my configure script is available here: <https://github.com/pepijn-devries/blosc/blob/d43b95fa3ba5c01efa11ffcf14ddfa3fca63988e/configure>

Any assistance is much appreciated!

Kind regards,

Pepijn

From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Mon Sep  8 16:55:52 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Mon, 8 Sep 2025 17:55:52 +0300
Subject: [R-pkg-devel] Possible open-source license incompatibilities within
 R packages
Message-ID: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>

I would like to release my R code under GPL-3. The code depends on a package (lme4) that itself uses "GPL >= 2", but which has upstream dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there recommended ways of resolving this?

This post is written from the perspective of an R-package user. I am not an R-package developer nor a lawyer. I want to comply with the software licenses with the best available understanding about the topic I have.

How did I found the issue: I built a container image from my code, then I ran:

write.csv(installed.packages(fields = "License")[,c(1,10)], "Licenses-of-R-packages.csv")

After inspecting the above list I found out that the lme4, central to my code, imports the minqa package. The lme4 is licensed under the "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" according to CRAN, and the minqa package under "GPL-2". Thus, there might be a license incompatibility. The GPL2 vs GPL3 incompatibility is stated for example here:

https://www.gnu.org/licenses/gpl-faq.html#v2v3Compatibility

Also if you select both the GPL2 and GPL3 licenses in the following license tool, it says they are incompatible:

https://ufal.github.io/public-license-selector/

Here is one of the graphs trying to simplify the license relations. Notice that there is no downstream-compatibility arrow from the GPLv2 to the GPLv2+.

https://dwheeler.com/essays/floss-license-slide.html

Here is another figure lacking the compatibility arrow. On the other hand, there is no red arrow or cross either. The compatibility graph was obtained from the: "Georgia M. Kapitsaki, Nikolaos D. Tselikas, Ioannis E. Foukarakis: An insight into license tools for open source software systems. Journal of Systems and Software 102: 72-87 (2015)".

https://gkapi.blogspot.com/2016/09/foss-license-compatibilities.html?m=1

The main question is: are there incompatibilities between the upper stream GPL2 and lower stream "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" R packages (minqa vs lme4)? If so, how could I deal with the situation as an R-package user trying to publish my source code under the GPL3? Or could the issue be solved by removing the minqa-based bobyqa optimiser from the lme4 package (a solution not directly in my hands)?

Lme4 also suggests the GPL2 numDeriv, is this an issue as well? Furthermore, it is notable how the R package installations also install the undirect dependencies by default, even if my code works without them, complicating the topic further. For example, if I rely on an R package licensed to me with GPL3, after the installation my setup (computer or a container image) can be full of other and possibly non-complying R packages. One of them being the GPL2 licensed rbibutils, which becomes installed with the lme4, but the CRAN page of the lme4 does not mention this as a direct dependency.

Best regards

From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Sep  8 21:07:56 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 8 Sep 2025 15:07:56 -0400
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
Message-ID: <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>

On 2025-09-08 10:55 a.m., Ilmari Tamminen wrote:
> I would like to release my R code under GPL-3. The code depends on a package (lme4) that itself uses "GPL >= 2", but which has upstream dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there recommended ways of resolving this?

My understanding is that the licenses of other packages are only 
relevant if you are incorporating their code into yours and would like 
to release the combined work.

If your code uses some other package but you are not distributing the 
other package then their license doesn't affect your package.

For example, many packages (including R itself) are written to use 
Windows functions, but since they don't distribute copies of those 
functions the fact that Windows isn't open source doesn't matter.

Duncan Murdoch

> 
> This post is written from the perspective of an R-package user. I am not an R-package developer nor a lawyer. I want to comply with the software licenses with the best available understanding about the topic I have.
> 
> How did I found the issue: I built a container image from my code, then I ran:
> 
> write.csv(installed.packages(fields = "License")[,c(1,10)], "Licenses-of-R-packages.csv")
> 
> After inspecting the above list I found out that the lme4, central to my code, imports the minqa package. The lme4 is licensed under the "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" according to CRAN, and the minqa package under "GPL-2". Thus, there might be a license incompatibility. The GPL2 vs GPL3 incompatibility is stated for example here:
> 
> https://www.gnu.org/licenses/gpl-faq.html#v2v3Compatibility
> 
> Also if you select both the GPL2 and GPL3 licenses in the following license tool, it says they are incompatible:
> 
> https://ufal.github.io/public-license-selector/
> 
> Here is one of the graphs trying to simplify the license relations. Notice that there is no downstream-compatibility arrow from the GPLv2 to the GPLv2+.
> 
> https://dwheeler.com/essays/floss-license-slide.html
> 
> Here is another figure lacking the compatibility arrow. On the other hand, there is no red arrow or cross either. The compatibility graph was obtained from the: "Georgia M. Kapitsaki, Nikolaos D. Tselikas, Ioannis E. Foukarakis: An insight into license tools for open source software systems. Journal of Systems and Software 102: 72-87 (2015)".
> 
> https://gkapi.blogspot.com/2016/09/foss-license-compatibilities.html?m=1
> 
> The main question is: are there incompatibilities between the upper stream GPL2 and lower stream "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" R packages (minqa vs lme4)? If so, how could I deal with the situation as an R-package user trying to publish my source code under the GPL3? Or could the issue be solved by removing the minqa-based bobyqa optimiser from the lme4 package (a solution not directly in my hands)?
> 
> Lme4 also suggests the GPL2 numDeriv, is this an issue as well? Furthermore, it is notable how the R package installations also install the undirect dependencies by default, even if my code works without them, complicating the topic further. For example, if I rely on an R package licensed to me with GPL3, after the installation my setup (computer or a container image) can be full of other and possibly non-complying R packages. One of them being the GPL2 licensed rbibutils, which becomes installed with the lme4, but the CRAN page of the lme4 does not mention this as a direct dependency.
> 
> Best regards
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Sep  9 00:23:05 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 9 Sep 2025 10:23:05 +1200
Subject: [R-pkg-devel] Misusing CFLAGS?
In-Reply-To: <AM8PR10MB466091CF9CC73E6A1D7A4DACA70CA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
References: <AM8PR10MB466091CF9CC73E6A1D7A4DACA70CA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <E79FE6CE-7883-4280-A6E8-A71C369575E2@R-project.org>

Pepijn,

the comment points out three somewhat separate issues:

a) recommending brew is generally not a good idea especially for something as lightweight (brew tends to cause conflicts with the system) - not that it prevents people from doing it ;)

b) the test doesn?t log the compiler call, so it doesn't show the actual compiler invocation with flags - which is crucial to be able to say where the problem lies on error

c) the test uses incomplete flags - it fails to include CXXFLAGS in the test (I assume that is the CFLAGS comment, but if not sure you can ask for clarification).

Looking at the file I see another problem as well - this fallback is most certainly wrong:

  for pre in /usr /usr/X11 /usr/X11R6 /usr/local /opt /opt/R/arm64 opt/R/x86_64 /sw; do

I don?t think you should use headers from another platform and/or hard-code them (I?m looking the the two odd "/opt/R/arm64" and "opt/R/x86_64" entires). Also unclear why the latter is missing leading slash? At the moment you can get away with something like /opt/R/$(uname -m), but technically the architecture may be defined by ${R_ARCH} instead, although we avoided using it recently, because people often ignore it and then it causes issues. (I principle this is moot, since if you have any of those, then they should be on the PATH so likely it is a user error to start with).

Cheers,
Simon


> On 9/09/2025, at 03:23, Pepijn de Vries <pepijn.devries at outlook.com> wrote:
> 
> Hi all,
> 
> A CRAN check report after a manual inspection confuses me a bit. Hopefully someone can help me interpret. I received the following feedback based on M1mac checks:
> 
> _"He really should not be recommending Brew for macOS ... Since it does not log the configure output, issues such as misusing CFLAGS are suppressed (a usual 'anticonf' failing)."_
> 
> I use a modified 'anticonf' (by Jeroen Ooms) configure script. When a specific header file (blosc.h) is not found, an error is produced and the submitted version echos the suggestion to install the library with Brew. I know this is not the preferred method for linking to binaries on MacOS. I have already adjusted it to suggest the preferred method for setting this up (using https://mac.R-project.org/bin/install.R). So this should take care of the first part of the feedback.
> 
> I'm confused about the second part of the feedback. Is it related to the first part? Or is it a completely separate issue? If it is a completely separate issue, how am I misusing CFLAGS?
> 
> Latest version of my configure script is available here: <https://github.com/pepijn-devries/blosc/blob/d43b95fa3ba5c01efa11ffcf14ddfa3fca63988e/configure>
> 
> Any assistance is much appreciated!
> 
> Kind regards,
> 
> Pepijn
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Sep  9 01:28:41 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 8 Sep 2025 18:28:41 -0500
Subject: [R-pkg-devel] apparent infinite loop in GitHub Action on a tiny
 package
In-Reply-To: <085af911-4bdd-47c9-8236-37f8f2bdaacb@gmail.com>
References: <4d299816-aa17-43c0-ab0d-da62d9f773c4@effectivedefense.org>
 <085af911-4bdd-47c9-8236-37f8f2bdaacb@gmail.com>
Message-ID: <7b53a01d-311f-4659-b3f1-f49eeac96d1d@effectivedefense.org>

p.s. I filed


I reported an "issue" on GitHub with title, "devtools::load_all() 
infinite recursion #2617" suggesting that load_all() be modified to 
prevent an infinite recursion:


https://github.com/r-lib/devtools/issues/2617


Thanks again to Duncan -- and to this email list more generally.


Spencer Graves


##########


Hi, Duncan:


That's not just weird, it's the source of the infinite loop.


Please excuse me for taking your time with this.


Thanks very much. Spencer Graves


On 9/7/25 14:43, Duncan Murdoch wrote:
> You're doing one strange thing:? the only code in the package is
> 
>  ? devtools::load_all()
> 
> in the single .R file.? That's a weird thing to do.
> 
> Duncan Murdoch
> 
> On 2025-09-07 3:10 p.m., Spencer Graves wrote:
>> Hello, All:
>>
>>
>> GitHub Action has been running on 5 platforms for over a half hour on a
>> tiny package:
>>
>>
>> https://github.com/sbgraves237/SS4Maddison
>>
>>
>> I'm trying to follow the current recommendation in Wickham and Bryan, R
>> Packages.[1] I just added ~R/MaddisonProjectData.R, documenting data
>> objects I have yet to add to the package, attempting to follow the
>> instructions in R Packages, section 7.1.2 Documenting datasets.[2]
>>
>>
>> Then "devtools::load_all()" on my local computer put R into an apparent
>> infinite loop.[3] After breaking out of that, I managed to replicate the
>> behavior on 5 platforms on GitHub Action.
>>
>>
>> What do you suggest?
>> Thanks,
>> Spencer Graves
>>
>>
>> [1] Wickham and Bryan, R Packages:
>>
>>
>> https://r-pkgs.org/
>>
>>
>> [2] Wickham and Bryan, R Packages, section 7.1.2 Documenting datasets:
>>
>>
>> https://r-pkgs.org/data.html
>>
>>
>> [3] Sys.info()
>> ??????????????????????????? sysname
>> ?????????????????????????? "Darwin"
>> ??????????????????????????? release
>> ?????????????????????????? "24.6.0"
>> ??????????????????????????? version
>> "Darwin Kernel Version 24.6.0: Mon Jul 14 11:30:30 PDT 2025;
>> root:xnu-11417.140.69~1/RELEASE_ARM64_T6020"
>> ?????????????????????????? nodename
>> ????????????????????????????? "Mac"
>> ??????????????????????????? machine
>> ??????????????????????????? "arm64"
>> ????????????????????????????? login
>> ???????????????????????????? "root"
>> ?????????????????????????????? user
>> ?????????????????????????????? "sg"
>> ???????????????????? effective_user
>> ?????????????????????????????? "sg"
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Sep  9 01:42:33 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 8 Sep 2025 18:42:33 -0500
Subject: [R-pkg-devel] CITATION problem
Message-ID: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>

Hello, All:


I'm getting "Warning: Invalid citation information in ?inst/CITATION?: 
Error in parse(con): 4:30: unexpected INCOMPLETE_STRING
   11: )
   12:
                                    ^"[1]


with my new package " sbgraves237/SS4Maddison" on GitHub.[2]


I may be foolish to bother with this, but a CITATION file is suggested 
in Section 8.2 of Wickham and Bryan, R Packages, and I'm dutifully 
trying to do what they suggest.


What am I doing wrong?


Thanks, Spencer Graves


[1] This Warning appears in GitHub actions for this package, e.g.:


https://github.com/sbgraves237/SS4Maddison/actions/runs/17565658799/job/49891987005


[2] GitHub sbgraves237/SSMaddison:


https://github.com/sbgraves237/SS4Maddison


From chr|@topherkenny @end|ng |rom |@@@h@rv@rd@edu  Tue Sep  9 01:53:22 2025
From: chr|@topherkenny @end|ng |rom |@@@h@rv@rd@edu (Kenny, Christopher)
Date: Mon, 8 Sep 2025 23:53:22 +0000
Subject: [R-pkg-devel] CITATION problem
In-Reply-To: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>
References: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>
Message-ID: <BL0PR07MB54915BDBCF6EF881A319419F800CA@BL0PR07MB5491.namprd07.prod.outlook.com>

The error is pointing you to 4:30, which is line 4 character 30. If you look at that, you have typed "" instead of ". As such, you have a new string opened which is never closed.

Chris
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: Monday, September 8, 2025 7:42 PM
To: R-pkg devel <R-package-devel at r-project.org>
Subject: [R-pkg-devel] CITATION problem

Hello, All:


I'm getting "Warning: Invalid citation information in ?inst/CITATION?:
Error in parse(con): 4:30: unexpected INCOMPLETE_STRING
   11: )
   12:
                                    ^"[1]


with my new package " sbgraves237/SS4Maddison" on GitHub.[2]


I may be foolish to bother with this, but a CITATION file is suggested
in Section 8.2 of Wickham and Bryan, R Packages, and I'm dutifully
trying to do what they suggest.


What am I doing wrong?


Thanks, Spencer Graves


[1] This Warning appears in GitHub actions for this package, e.g.:


https://github.com/sbgraves237/SS4Maddison/actions/runs/17565658799/job/49891987005


[2] GitHub sbgraves237/SSMaddison:


https://github.com/sbgraves237/SS4Maddison

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Tue Sep  9 01:52:48 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Mon, 8 Sep 2025 16:52:48 -0700
Subject: [R-pkg-devel] CITATION problem
In-Reply-To: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>
References: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>
Message-ID: <CAPRVBczGr7cd_69pCOsCyAp+jNNcRbtXMc1vaY41ceBw8GrVxA@mail.gmail.com>

Hi Spencer, you have a doubled " here:

https://github.com/sbgraves237/SS4Maddison/blob/f4daa00d20af5172fb183e8cea7d57ed0a09dc4d/inst/CITATION#L4

You can try to run parse("inst/CITATION") on the file locally

Mike C

On Mon, Sep 8, 2025 at 4:42?PM Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
> I'm getting "Warning: Invalid citation information in ?inst/CITATION?:
> Error in parse(con): 4:30: unexpected INCOMPLETE_STRING
>    11: )
>    12:
>                                     ^"[1]
>
>
> with my new package " sbgraves237/SS4Maddison" on GitHub.[2]
>
>
> I may be foolish to bother with this, but a CITATION file is suggested
> in Section 8.2 of Wickham and Bryan, R Packages, and I'm dutifully
> trying to do what they suggest.
>
>
> What am I doing wrong?
>
>
> Thanks, Spencer Graves
>
>
> [1] This Warning appears in GitHub actions for this package, e.g.:
>
>
>
> https://github.com/sbgraves237/SS4Maddison/actions/runs/17565658799/job/49891987005
>
>
> [2] GitHub sbgraves237/SSMaddison:
>
>
> https://github.com/sbgraves237/SS4Maddison
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Sep  9 02:37:44 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 8 Sep 2025 19:37:44 -0500
Subject: [R-pkg-devel] CITATION problem
In-Reply-To: <BL0PR07MB54915BDBCF6EF881A319419F800CA@BL0PR07MB5491.namprd07.prod.outlook.com>
References: <bfb8d7cb-912f-4a2a-b524-802668b307d1@effectivedefense.org>
 <BL0PR07MB54915BDBCF6EF881A319419F800CA@BL0PR07MB5491.namprd07.prod.outlook.com>
Message-ID: <1b1f98c4-49cb-4072-ab5a-1ee24179fb6d@effectivedefense.org>

Thanks to Christopher Kenny and Michael Chirico for helping me get past 
this problem ... AND for helping me understand how to read error 
messages like this and check with 'parse("inst/CITATION")'.


Spencer Graves


On 9/8/25 18:53, Kenny, Christopher wrote:
> The error is pointing you to 4:30, which is line 4 character 30. If you 
> look at that, you have typed |""|?instead of |"||. As such, you have a 
> new string |opened which |is never closed.|
> 
> |Chris|
> ------------------------------------------------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on 
> behalf of Spencer Graves <spencer.graves at effectivedefense.org>
> *Sent:* Monday, September 8, 2025 7:42 PM
> *To:* R-pkg devel <R-package-devel at r-project.org>
> *Subject:* [R-pkg-devel] CITATION problem
> Hello, All:
> 
> 
> I'm getting "Warning: Invalid citation information in ?inst/CITATION?:
> Error in parse(con): 4:30: unexpected INCOMPLETE_STRING
>  ?? 11: )
>  ?? 12:
>  ??????????????????????????????????? ^"[1]
> 
> 
> with my new package " sbgraves237/SS4Maddison" on GitHub.[2]
> 
> 
> I may be foolish to bother with this, but a CITATION file is suggested
> in Section 8.2 of Wickham and Bryan, R Packages, and I'm dutifully
> trying to do what they suggest.
> 
> 
> What am I doing wrong?
> 
> 
> Thanks, Spencer Graves
> 
> 
> [1] This Warning appears in GitHub actions for this package, e.g.:
> 
> 
> https://github.com/sbgraves237/SS4Maddison/actions/runs/17565658799/ 
> job/49891987005 <https://github.com/sbgraves237/SS4Maddison/actions/ 
> runs/17565658799/job/49891987005>
> 
> 
> [2] GitHub sbgraves237/SSMaddison:
> 
> 
> https://github.com/sbgraves237/SS4Maddison <https://github.com/ 
> sbgraves237/SS4Maddison>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https:// 
> stat.ethz.ch/mailman/listinfo/r-package-devel>


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Tue Sep  9 09:07:48 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Tue, 9 Sep 2025 10:07:48 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
Message-ID: <3D5E177F-99E0-494F-859D-68425A2D393B@icloud.com>

Thank you for the input.

I have seen the same interpretation earlier, and it feels logical and intuitive to me as well. However, there is a lot of opposing opinions to it in different contexts of programming. For example, see the below question-answer, where the Free Software Foundation itself is also cited:

https://opensource.stackexchange.com/questions/9085/can-i-distribute-non-gpl-code-that-uses-gpl-code-as-long-as-i-dont-distribute-m

I think that the software aggregate is one central concept when considering the question: whether an R code/package using other R packages can be distributed without GPL "leaking" from one entity to another. Below is a link to the Free Software Foundation's interpretations about the aggregates. What do you think about these, how do they apply for the cases where GPL2+ or GPL3 -licensed R code calls GPL2package::function()? Or the installation of GPL2+ or GPL3 -licensed R package also installs a GPL2package? 

https://www.gnu.org/licenses/gpl-faq.en.html#MereAggregation

Does the "shared address space" cover the typical case in R, where both my R code and the R package it loaded can access the same variable in the working memory? If so, then the Free Software Foundation seems to interpreter them as a single program, not an aggregate. And if the LGPL licenses are not used (allowing dynamic linking without the leakage, which is the default with R packages to my understanding), then the GPL licenses start to leak across R codes/packages. To my understanding.

This might also be useful to look at:

https://www.gnu.org/licenses/gpl-faq.en.html#GPLPlugins

I am not familiar with Windows functions. But my gut feeling says that they are considered as separate entity, if standard command-line communication or similar is used (see the above link). The below lecture, from a real open-source legal expert, is titled for corporates, but the principles are the same. I link directly to the point where she discuss about the differences between the GPL and LGPL licenses. Soon after that she discusses how the operating system and its functionalities are considered as separate entity from the other software (with certain conditions).

https://youtu.be/gF4b1TA5Q5w?t=831

> On 8. Sep 2025, at 22.07, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 2025-09-08 10:55 a.m., Ilmari Tamminen wrote:
>> I would like to release my R code under GPL-3. The code depends on a package (lme4) that itself uses "GPL >= 2", but which has upstream dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there recommended ways of resolving this?
> 
> My understanding is that the licenses of other packages are only relevant if you are incorporating their code into yours and would like to release the combined work.
> 
> If your code uses some other package but you are not distributing the other package then their license doesn't affect your package.
> 
> For example, many packages (including R itself) are written to use Windows functions, but since they don't distribute copies of those functions the fact that Windows isn't open source doesn't matter.
> 
> Duncan Murdoch
> 
>> This post is written from the perspective of an R-package user. I am not an R-package developer nor a lawyer. I want to comply with the software licenses with the best available understanding about the topic I have.
>> How did I found the issue: I built a container image from my code, then I ran:
>> write.csv(installed.packages(fields = "License")[,c(1,10)], "Licenses-of-R-packages.csv")
>> After inspecting the above list I found out that the lme4, central to my code, imports the minqa package. The lme4 is licensed under the "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" according to CRAN, and the minqa package under "GPL-2". Thus, there might be a license incompatibility. The GPL2 vs GPL3 incompatibility is stated for example here:
>> https://www.gnu.org/licenses/gpl-faq.html#v2v3Compatibility
>> Also if you select both the GPL2 and GPL3 licenses in the following license tool, it says they are incompatible:
>> https://ufal.github.io/public-license-selector/
>> Here is one of the graphs trying to simplify the license relations. Notice that there is no downstream-compatibility arrow from the GPLv2 to the GPLv2+.
>> https://dwheeler.com/essays/floss-license-slide.html
>> Here is another figure lacking the compatibility arrow. On the other hand, there is no red arrow or cross either. The compatibility graph was obtained from the: "Georgia M. Kapitsaki, Nikolaos D. Tselikas, Ioannis E. Foukarakis: An insight into license tools for open source software systems. Journal of Systems and Software 102: 72-87 (2015)".
>> https://gkapi.blogspot.com/2016/09/foss-license-compatibilities.html?m=1
>> The main question is: are there incompatibilities between the upper stream GPL2 and lower stream "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" R packages (minqa vs lme4)? If so, how could I deal with the situation as an R-package user trying to publish my source code under the GPL3? Or could the issue be solved by removing the minqa-based bobyqa optimiser from the lme4 package (a solution not directly in my hands)?
>> Lme4 also suggests the GPL2 numDeriv, is this an issue as well? Furthermore, it is notable how the R package installations also install the undirect dependencies by default, even if my code works without them, complicating the topic further. For example, if I rely on an R package licensed to me with GPL3, after the installation my setup (computer or a container image) can be full of other and possibly non-complying R packages. One of them being the GPL2 licensed rbibutils, which becomes installed with the lme4, but the CRAN page of the lme4 does not mention this as a direct dependency.
>> Best regards
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From pep|jn@devr|e@ @end|ng |rom out|ook@com  Tue Sep  9 12:27:15 2025
From: pep|jn@devr|e@ @end|ng |rom out|ook@com (Pepijn de Vries)
Date: Tue, 9 Sep 2025 10:27:15 +0000
Subject: [R-pkg-devel] Misusing CFLAGS?
In-Reply-To: <E79FE6CE-7883-4280-A6E8-A71C369575E2@R-project.org>
References: <AM8PR10MB466091CF9CC73E6A1D7A4DACA70CA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>
 <E79FE6CE-7883-4280-A6E8-A71C369575E2@R-project.org>
Message-ID: <AM8PR10MB46602ECEDCB50ECC6907749BA70FA@AM8PR10MB4660.EURPRD10.PROD.OUTLOOK.COM>

Hi Simon,

Thank you for the clarifications. I changed my setup from anticonf to autoconf. I think this will address a few of the issues, I think it now logs compilation errors more clearly. I'm also no longer relying on brew, nor suggesting it.

I will also update the searching path on MacOS, when pkg-config fails, and not hardcode the architecture as you suggested.

Cheers,

Pepijn

________________________________________
Van:?Simon Urbanek <simon.urbanek at R-project.org>
Verzonden:?dinsdag 9 september 2025 00:23
Aan:?Pepijn de Vries <pepijn.devries at outlook.com>
CC:?List r-package-devel <r-package-devel at R-project.org>
Onderwerp:?Re: [R-pkg-devel] Misusing CFLAGS?
?
Pepijn,

the comment points out three somewhat separate issues:

a) recommending brew is generally not a good idea especially for something as lightweight (brew tends to cause conflicts with the system) - not that it prevents people from doing it ;)

b) the test doesn?t log the compiler call, so it doesn't show the actual compiler invocation with flags - which is crucial to be able to say where the problem lies on error

c) the test uses incomplete flags - it fails to include CXXFLAGS in the test (I assume that is the CFLAGS comment, but if not sure you can ask for clarification).

Looking at the file I see another problem as well - this fallback is most certainly wrong:

? for pre in /usr /usr/X11 /usr/X11R6 /usr/local /opt /opt/R/arm64 opt/R/x86_64 /sw; do

I don?t think you should use headers from another platform and/or hard-code them (I?m looking the the two odd "/opt/R/arm64" and "opt/R/x86_64" entires). Also unclear why the latter is missing leading slash? At the moment you can get away with something like /opt/R/$(uname -m), but technically the architecture may be defined by ${R_ARCH} instead, although we avoided using it recently, because people often ignore it and then it causes issues. (I principle this is moot, since if you have any of those, then they should be on the PATH so likely it is a user error to start with).

Cheers,
Simon


> On 9/09/2025, at 03:23, Pepijn de Vries <pepijn.devries at outlook.com> wrote:
>
> Hi all,
>
> A CRAN check report after a manual inspection confuses me a bit. Hopefully someone can help me interpret. I received the following feedback based on M1mac checks:
>
> _"He really should not be recommending Brew for macOS ... Since it does not log the configure output, issues such as misusing CFLAGS are suppressed (a usual 'anticonf' failing)."_
>
> I use a modified 'anticonf' (by Jeroen Ooms) configure script. When a specific header file (blosc.h) is not found, an error is produced and the submitted version echos the suggestion to install the library with Brew. I know this is not the preferred method for linking to binaries on MacOS. I have already adjusted it to suggest the preferred method for setting this up (using https://mac.R-project.org/bin/install.R). So this should take care of the first part of the feedback.
>
> I'm confused about the second part of the feedback. Is it related to the first part? Or is it a completely separate issue? If it is a completely separate issue, how am I misusing CFLAGS?
>
> Latest version of my configure script is available here: <https://github.com/pepijn-devries/blosc/blob/d43b95fa3ba5c01efa11ffcf14ddfa3fca63988e/configure>
>
> Any assistance is much appreciated!
>
> Kind regards,
>
> Pepijn
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |eo@m@d@ @end|ng |rom @yon|c@eu  Thu Sep 11 20:57:41 2025
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Thu, 11 Sep 2025 18:57:41 +0000
Subject: [R-pkg-devel] 2 Generic functions with the same name-skeleton
Message-ID: <DBAP192MB095638DDCA4324484071E42F8409A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear All,

I have some problems and some questions regarding how to pass some checks (run on my computer - new version not yet submitted).

There are 2 important notes:

1. Note 1:
checking S3 generic/method consistency ... NOTE
  Apparent methods for exported generics not registered:
    centres.ppRoll

2. Note 2:
checking Rd \usage sections ... NOTE
  S3 methods shown with full name in Rd file 'centres.ppRoll.Rd':
    'centres.ppRoll'

The current code is on GitHub:
https://github.com/discoleo/Rpdb

But let me first explain the reason and reasoning.

There are 2 generic functions: centres and centres.ppRoll, each with 3 methods for pdb objects, atoms and coords (default).

Generic function centres:
The 1st generic function, centres, computes the centres of a molecule and has methods for 3 objects: pdb molecule, atoms and xyz-coordinates (default). It acts on an object of type coords, while the objects atoms and pdb include such a coords-object in their structure.

I would like to write various "specialised" versions:
- they still compute the centre, as it's the simplest summary possible for 3D objects;
- however, there are many types of molecules: proteins, nucleic acids, other types of molecules; and each may benefit from more "specialised" methods;
Note: all molecules are still coded as a pdb object. It's the user who selects which method is most appropriate for a specific situation/molecule.

E.g. proteins consist of long linear chains. One such variant would be a "rolling mean": it makes sense for polypeptide chains and nucleic acids, but little (or no) sense for other molecules.

I wrote therefore a generic function centres.ppRoll with 3 methods for the 3 base-objects.

I would like to reuse the centres-skeleton for the name: users can then easily check which methods are available to compute centres:
methods(centres)
# [1] centres.atoms          centres.coords         centres.pdb
# centres.ppRoll
# [5] centres.ppRoll.atoms   centres.ppRoll.default centres.ppRoll.pdb

I would like to avoid having hundreds of function names which no-one remembers and which would be cumbersome to search for. Each method would be useful only in particular situations and users are likely to forget the exact names between uses.

I get the above 2 notes with this approach:
- I did not register centres.ppRoll as an S3 method to avoid the 2nd note;
- I get the 2nd note anyway (and it gets silently registered, which may be necessary for the methods-search to work);

Another pseudo-solution would be to add a methods argument. This solution is misused at times; unfortunately, it is really ugly here because some of the methods may have particular arguments (e.g. window-size for the roll-method).

Ultimately, I may end up with 50 or 100 arguments in the function, which I also need to replicate to all the 3 methods (pdb, atoms, default/coords).

I really don't like this pseudo-solution and prefer one based on the 1st approach.

I did not count how many function name variants are in the > 20,000 packages on CRAN. But I think that a more structured approach would be beneficial to everyone.

Thanks in advance for any support,

Leonard

##########

### Note
- Proteins have a backbone and the amino-acids also have side chains;
- It is useful in certain situations to have additional types of centres computed;
- The initial developer of Rpdb used it mainly for other types of molecules (not proteins);

The code actually functions:

# pdb2z81.ent can be downloaded from the Protein Data Bank;
setwd(...)
x = read.pdb("pdb2z81.ent")
# Number of models:  0
# Warning message:
# In read.pdb("pdb2z81.ent") : The pdb contains a Caveat record!
tmp = centres.ppRoll(x)
visualize(x, type="p", pbc.box = FALSE)
# Draw a peptide-"Skeleton"
lines3d(tmp, lwd = 5, col = "red")

# A new version of the pdb-format is also out,
# but that's a horror-story in itself.


	[[alternative HTML version deleted]]


From |kw@|mmo @end|ng |rom gm@||@com  Thu Sep 11 21:01:42 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Thu, 11 Sep 2025 15:01:42 -0400
Subject: [R-pkg-devel] 2 Generic functions with the same name-skeleton
In-Reply-To: <DBAP192MB095638DDCA4324484071E42F8409A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB095638DDCA4324484071E42F8409A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CADNULg9xS-Gs2jv0+3KKZNnynWrPH5F4EoP0gwgnJK5MgMWSoA@mail.gmail.com>

I feel as though it would be best to just rename the function to
centres_ppRoll

On Thu, Sep 11, 2025, 14:57 Leo Mada via R-package-devel <
r-package-devel at r-project.org> wrote:

> Dear All,
>
> I have some problems and some questions regarding how to pass some checks
> (run on my computer - new version not yet submitted).
>
> There are 2 important notes:
>
> 1. Note 1:
> checking S3 generic/method consistency ... NOTE
>   Apparent methods for exported generics not registered:
>     centres.ppRoll
>
> 2. Note 2:
> checking Rd \usage sections ... NOTE
>   S3 methods shown with full name in Rd file 'centres.ppRoll.Rd':
>     'centres.ppRoll'
>
> The current code is on GitHub:
> https://github.com/discoleo/Rpdb
>
> But let me first explain the reason and reasoning.
>
> There are 2 generic functions: centres and centres.ppRoll, each with 3
> methods for pdb objects, atoms and coords (default).
>
> Generic function centres:
> The 1st generic function, centres, computes the centres of a molecule and
> has methods for 3 objects: pdb molecule, atoms and xyz-coordinates
> (default). It acts on an object of type coords, while the objects atoms and
> pdb include such a coords-object in their structure.
>
> I would like to write various "specialised" versions:
> - they still compute the centre, as it's the simplest summary possible for
> 3D objects;
> - however, there are many types of molecules: proteins, nucleic acids,
> other types of molecules; and each may benefit from more "specialised"
> methods;
> Note: all molecules are still coded as a pdb object. It's the user who
> selects which method is most appropriate for a specific situation/molecule.
>
> E.g. proteins consist of long linear chains. One such variant would be a
> "rolling mean": it makes sense for polypeptide chains and nucleic acids,
> but little (or no) sense for other molecules.
>
> I wrote therefore a generic function centres.ppRoll with 3 methods for the
> 3 base-objects.
>
> I would like to reuse the centres-skeleton for the name: users can then
> easily check which methods are available to compute centres:
> methods(centres)
> # [1] centres.atoms          centres.coords         centres.pdb
> # centres.ppRoll
> # [5] centres.ppRoll.atoms   centres.ppRoll.default centres.ppRoll.pdb
>
> I would like to avoid having hundreds of function names which no-one
> remembers and which would be cumbersome to search for. Each method would be
> useful only in particular situations and users are likely to forget the
> exact names between uses.
>
> I get the above 2 notes with this approach:
> - I did not register centres.ppRoll as an S3 method to avoid the 2nd note;
> - I get the 2nd note anyway (and it gets silently registered, which may be
> necessary for the methods-search to work);
>
> Another pseudo-solution would be to add a methods argument. This solution
> is misused at times; unfortunately, it is really ugly here because some of
> the methods may have particular arguments (e.g. window-size for the
> roll-method).
>
> Ultimately, I may end up with 50 or 100 arguments in the function, which I
> also need to replicate to all the 3 methods (pdb, atoms, default/coords).
>
> I really don't like this pseudo-solution and prefer one based on the 1st
> approach.
>
> I did not count how many function name variants are in the > 20,000
> packages on CRAN. But I think that a more structured approach would be
> beneficial to everyone.
>
> Thanks in advance for any support,
>
> Leonard
>
> ##########
>
> ### Note
> - Proteins have a backbone and the amino-acids also have side chains;
> - It is useful in certain situations to have additional types of centres
> computed;
> - The initial developer of Rpdb used it mainly for other types of
> molecules (not proteins);
>
> The code actually functions:
>
> # pdb2z81.ent can be downloaded from the Protein Data Bank;
> setwd(...)
> x = read.pdb("pdb2z81.ent")
> # Number of models:  0
> # Warning message:
> # In read.pdb("pdb2z81.ent") : The pdb contains a Caveat record!
> tmp = centres.ppRoll(x)
> visualize(x, type="p", pbc.box = FALSE)
> # Draw a peptide-"Skeleton"
> lines3d(tmp, lwd = 5, col = "red")
>
> # A new version of the pdb-format is also out,
> # but that's a horror-story in itself.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Sep 11 23:17:28 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 12 Sep 2025 00:17:28 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
Message-ID: <20250912001728.54a1e9ef@Tarkus>

On Mon, 8 Sep 2025 17:55:52 +0300
Ilmari Tamminen <ilmari.tamminen at icloud.com> wrote:

> Are the GPL-2 upstream licenses a problem for my GPL-3 R code? If so,
> are there recommended ways of resolving this?

The _safest_ (possibly overly strict) assumption is that your package
is a derived work of your GPL-2 dependencies even when they are not
direct but transitive (which is the position taken by GPL FAQ), which
necessitates licensing your code under GPL >= 2.

This is not the only possibility. You could make various arguments that
would let you keep your code licensed under GPL-3.0-only (e.g. does your
GPL-3 code work even with the GPL-2 dependency uninstalled? do other
non-GPL2 libraries implement the same interface?), but whether they are
valid in your specific case, only a lawyer who specialises in software
can say.

-- 
Best regards,
Ivan


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Sep 12 00:24:28 2025
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 11 Sep 2025 17:24:28 -0500
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
Message-ID: <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>

On Mon, Sep 8, 2025 at 2:08?PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 2025-09-08 10:55 a.m., Ilmari Tamminen wrote:
> > I would like to release my R code under GPL-3. The code depends on a
> package (lme4) that itself uses "GPL >= 2", but which has upstream
> dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According
> to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the
> GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there
> recommended ways of resolving this?
>
> My understanding is that the licenses of other packages are only
> relevant if you are incorporating their code into yours and would like
> to release the combined work.
>
> If your code uses some other package but you are not distributing the
> other package then their license doesn't affect your package.
>
> For example, many packages (including R itself) are written to use
> Windows functions, but since they don't distribute copies of those
> functions the fact that Windows isn't open source doesn't matter.
>

This is my belief too, and I've written a bit about it at
https://r-pkgs.org/license.html#code-you-use

Hadley

-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Sep 12 02:52:43 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Sep 2025 12:52:43 +1200
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <3D5E177F-99E0-494F-859D-68425A2D393B@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <3D5E177F-99E0-494F-859D-68425A2D393B@icloud.com>
Message-ID: <9F8D2E60-36EF-49ED-AE93-B08B2A20629B@R-project.org>

Ilmari,

there is a huge difference between opinions and law. Many of the statements your quoted are just opinions, they are not legally binding - in fact if you research the legal area you will find that they are often considered incompatible with the wording of the license (i.e., it has been argued that the courts are unlikely to take those views). However, none of these statements have been tested in court (AFAIK), so there is no definitive answer. The simple answer to your question is: consult your lawyer. It really makes no sense to speculate on your own unless you are very familiar with the law and legal system. You have already heard the view of the R community (in short namespaces create APIs and R is interpreted, so use is not derivation) for what it?s worth (it isn?t legally binding, either, but it explains what you see on CRAN), so you can take it or leave it, but you won?t get anything more definitive unless you seek legal advice (and even then you may not get a definitive answer, only an advice).

Cheers,
Simon



> On 9/09/2025, at 19:07, Ilmari Tamminen <ilmari.tamminen at icloud.com> wrote:
> 
> Thank you for the input.
> 
> I have seen the same interpretation earlier, and it feels logical and intuitive to me as well. However, there is a lot of opposing opinions to it in different contexts of programming. For example, see the below question-answer, where the Free Software Foundation itself is also cited:
> 
> https://opensource.stackexchange.com/questions/9085/can-i-distribute-non-gpl-code-that-uses-gpl-code-as-long-as-i-dont-distribute-m
> 
> I think that the software aggregate is one central concept when considering the question: whether an R code/package using other R packages can be distributed without GPL "leaking" from one entity to another. Below is a link to the Free Software Foundation's interpretations about the aggregates. What do you think about these, how do they apply for the cases where GPL2+ or GPL3 -licensed R code calls GPL2package::function()? Or the installation of GPL2+ or GPL3 -licensed R package also installs a GPL2package? 
> 
> https://www.gnu.org/licenses/gpl-faq.en.html#MereAggregation
> 
> Does the "shared address space" cover the typical case in R, where both my R code and the R package it loaded can access the same variable in the working memory? If so, then the Free Software Foundation seems to interpreter them as a single program, not an aggregate. And if the LGPL licenses are not used (allowing dynamic linking without the leakage, which is the default with R packages to my understanding), then the GPL licenses start to leak across R codes/packages. To my understanding.
> 
> This might also be useful to look at:
> 
> https://www.gnu.org/licenses/gpl-faq.en.html#GPLPlugins
> 
> I am not familiar with Windows functions. But my gut feeling says that they are considered as separate entity, if standard command-line communication or similar is used (see the above link). The below lecture, from a real open-source legal expert, is titled for corporates, but the principles are the same. I link directly to the point where she discuss about the differences between the GPL and LGPL licenses. Soon after that she discusses how the operating system and its functionalities are considered as separate entity from the other software (with certain conditions).
> 
> https://youtu.be/gF4b1TA5Q5w?t=831
> 
>> On 8. Sep 2025, at 22.07, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> 
>> On 2025-09-08 10:55 a.m., Ilmari Tamminen wrote:
>>> I would like to release my R code under GPL-3. The code depends on a package (lme4) that itself uses "GPL >= 2", but which has upstream dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there recommended ways of resolving this?
>> 
>> My understanding is that the licenses of other packages are only relevant if you are incorporating their code into yours and would like to release the combined work.
>> 
>> If your code uses some other package but you are not distributing the other package then their license doesn't affect your package.
>> 
>> For example, many packages (including R itself) are written to use Windows functions, but since they don't distribute copies of those functions the fact that Windows isn't open source doesn't matter.
>> 
>> Duncan Murdoch
>> 
>>> This post is written from the perspective of an R-package user. I am not an R-package developer nor a lawyer. I want to comply with the software licenses with the best available understanding about the topic I have.
>>> How did I found the issue: I built a container image from my code, then I ran:
>>> write.csv(installed.packages(fields = "License")[,c(1,10)], "Licenses-of-R-packages.csv")
>>> After inspecting the above list I found out that the lme4, central to my code, imports the minqa package. The lme4 is licensed under the "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" according to CRAN, and the minqa package under "GPL-2". Thus, there might be a license incompatibility. The GPL2 vs GPL3 incompatibility is stated for example here:
>>> https://www.gnu.org/licenses/gpl-faq.html#v2v3Compatibility
>>> Also if you select both the GPL2 and GPL3 licenses in the following license tool, it says they are incompatible:
>>> https://ufal.github.io/public-license-selector/
>>> Here is one of the graphs trying to simplify the license relations. Notice that there is no downstream-compatibility arrow from the GPLv2 to the GPLv2+.
>>> https://dwheeler.com/essays/floss-license-slide.html
>>> Here is another figure lacking the compatibility arrow. On the other hand, there is no red arrow or cross either. The compatibility graph was obtained from the: "Georgia M. Kapitsaki, Nikolaos D. Tselikas, Ioannis E. Foukarakis: An insight into license tools for open source software systems. Journal of Systems and Software 102: 72-87 (2015)".
>>> https://gkapi.blogspot.com/2016/09/foss-license-compatibilities.html?m=1
>>> The main question is: are there incompatibilities between the upper stream GPL2 and lower stream "GPL-2 | GPL-3 [expanded from: GPL (? 2)]" R packages (minqa vs lme4)? If so, how could I deal with the situation as an R-package user trying to publish my source code under the GPL3? Or could the issue be solved by removing the minqa-based bobyqa optimiser from the lme4 package (a solution not directly in my hands)?
>>> Lme4 also suggests the GPL2 numDeriv, is this an issue as well? Furthermore, it is notable how the R package installations also install the undirect dependencies by default, even if my code works without them, complicating the topic further. For example, if I rely on an R package licensed to me with GPL3, after the installation my setup (computer or a container image) can be full of other and possibly non-complying R packages. One of them being the GPL2 licensed rbibutils, which becomes installed with the lme4, but the CRAN page of the lme4 does not mention this as a direct dependency.
>>> Best regards
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Fri Sep 12 09:42:56 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Fri, 12 Sep 2025 10:42:56 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <20250912001728.54a1e9ef@Tarkus>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <20250912001728.54a1e9ef@Tarkus>
Message-ID: <34DC0CA2-1170-4D7B-93CD-A891AD619A30@icloud.com>


> On 12. Sep 2025, at 0.17, Ivan Krylov <ikrylov at disroot.or
> The _safest_ (possibly overly strict) assumption is that your package
> is a derived work of your GPL-2 dependencies even when they are not
> direct but transitive (which is the position taken by GPL FAQ), which
> necessitates licensing your code under GPL >= 2.

I tried to find a clear statement about the transitive case from the GPL FAQ without luck. By "transitive" did you mean distributing the code without the R packages the code depends on? Could you point out the part where the case was dealt with? I concluded it was not allowed, because the option was not separately mentioned, and because of the shared address space during the execution. Also the need for making the separate LGPL licenses affected my conclusion.

>  which necessitates licensing your code under GPL >= 2.

This would be a very easy option for me: instead of licensing my code with GPL3 only, I would use the GPL >= 2 option. Without the need of possibly removing all the GPL2-licensed dependencies, or ask the authors of the dependencies to update their licenses. It would probably also mean that there is not conflict between the GPL-2 | GPL-3 lme4 and GPL2 minqa packages either in the first place. But having basis for this option would also be good, such as explained by the free software foundation.

> You have already heard the view of the R community (in short namespaces create APIs and R is interpreted, so use is not derivation)

Simon, this is very interesting information and makes sense. If I understood correctly, no derivative work but an aggregate, the code entities are communicating through the well-documented APIs. Where was this community view actually stated, do you have any source for further information? If this aligns with the explanations of the free software foundation and thus GPL licenses, then I think there is no issues indeed.

I am very likely to ask about the topic from a software lawyer for my particular case. But to form educated questions, I first need to get some basic understanding, and also hear how the community thinks about these issues.

From ch@r|e@-||@te@+rd @end|ng |rom p|e@@y@org  Sat Sep 13 03:53:16 2025
From: ch@r|e@-||@te@+rd @end|ng |rom p|e@@y@org (Charles Plessy)
Date: Sat, 13 Sep 2025 10:53:16 +0900
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <34DC0CA2-1170-4D7B-93CD-A891AD619A30@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <20250912001728.54a1e9ef@Tarkus>
 <34DC0CA2-1170-4D7B-93CD-A891AD619A30@icloud.com>
Message-ID: <aMTOjEMuF5zAhzt2@bubu.igloo>

Le Fri, Sep 12, 2025 at 10:42:56AM +0300, Ilmari Tamminen a ?crit :
>
>I am very likely to ask about the topic from a software lawyer for my
>particular case. But to form educated questions, I first need to get
>some basic understanding, and also hear how the community thinks about
>these issues.

Hi Ilmari,

there is an important point to consider in order to have the big picture
before asking for legal advice: on whom is the burden of license
compatibility.

I first wrote a long example, but here is a LLM summary that I am
very satisfied of:

GPL?2?only and GPL?3 are not license?compatible when combined into a
single derivative work, but this is rarely an issue for developers who
only distribute source code ? private use is unrestricted, and separate
works can be redistributed side?by?side.

The problem arises when redistributing binaries or other combined
artefacts: if any binary contains code from both, it cannot be legally
redistributed.

This risk extends to container images: while a generic image bundling
many unrelated packages is usually fine, an image built to run two
incompatible?licensed components together could be considered a single
work, triggering the same restrictions.

So I think that the big question is not only on how you comply to
license terms, some of which you can chose as you are the copyright
holder, but also how your choices empower the downstream community to
comply.

Best,

Charles

-- 
Charles Plessy                         Nagahama, Yomitan, Okinawa, Japan
Debian Med packaging team         http://www.debian.org/devel/debian-med
Tooting from work,               https://fediscience.org/@charles_plessy
Tooting from home,                 https://framapiaf.org/@charles_plessy


From greg @end|ng |rom ||rm@n@y@h@com  Sat Sep 13 04:02:02 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Sat, 13 Sep 2025 12:02:02 +1000
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <aMTOjEMuF5zAhzt2@bubu.igloo>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <20250912001728.54a1e9ef@Tarkus>
 <34DC0CA2-1170-4D7B-93CD-A891AD619A30@icloud.com>
 <aMTOjEMuF5zAhzt2@bubu.igloo>
Message-ID: <CAAS8PAJ0yo=RmK++EE1274qgACrYurYr_g0U1-CM3ZL-=ZWnMQ@mail.gmail.com>

I don?t think we should be trusting LLM output for questions like these.
The GPL FAQ directly addresses the bindings between interpreted code
modules (text, not binary) and the need for distribution of code under the
GPL to either be under the same version code or a compatible license.

On Sat, 13 Sep 2025 at 11:53?am, Charles Plessy <
charles-listes+rd at plessy.org> wrote:

> Le Fri, Sep 12, 2025 at 10:42:56AM +0300, Ilmari Tamminen a ?crit :
> >
> >I am very likely to ask about the topic from a software lawyer for my
> >particular case. But to form educated questions, I first need to get
> >some basic understanding, and also hear how the community thinks about
> >these issues.
>
> Hi Ilmari,
>
> there is an important point to consider in order to have the big picture
> before asking for legal advice: on whom is the burden of license
> compatibility.
>
> I first wrote a long example, but here is a LLM summary that I am
> very satisfied of:
>
> GPL?2?only and GPL?3 are not license?compatible when combined into a
> single derivative work, but this is rarely an issue for developers who
> only distribute source code ? private use is unrestricted, and separate
> works can be redistributed side?by?side.
>
> The problem arises when redistributing binaries or other combined
> artefacts: if any binary contains code from both, it cannot be legally
> redistributed.
>
> This risk extends to container images: while a generic image bundling
> many unrelated packages is usually fine, an image built to run two
> incompatible?licensed components together could be considered a single
> work, triggering the same restrictions.
>
> So I think that the big question is not only on how you comply to
> license terms, some of which you can chose as you are the copyright
> holder, but also how your choices empower the downstream community to
> comply.
>
> Best,
>
> Charles
>
> --
> Charles Plessy                         Nagahama, Yomitan, Okinawa, Japan
> Debian Med packaging team         http://www.debian.org/devel/debian-med
> Tooting from work,               https://fediscience.org/@charles_plessy
> Tooting from home,                 https://framapiaf.org/@charles_plessy
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @|ngm@nn @end|ng |rom gm@||@com  Sat Sep 13 11:47:05 2025
From: @|ngm@nn @end|ng |rom gm@||@com (Henrik Singmann)
Date: Sat, 13 Sep 2025 10:47:05 +0100
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
Message-ID: <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>

Hi all,

Just adding my experience to this thread as a cautionary example against
the notion that it should be no problem to release a package under GPL-3 if
it only calls functions from packages released under GPL-2.

Up to 2017, my afex package (which depended on several GPL-2 packages) was
released under GPL-3. However, then an over-eager debian user reported this
as a violation of the GPL, see here:
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=800891
As a consequence, Debian suspended hosting the corresponding binary package
(r-cran-afex) until I changed my license to GPL (? 2).

I in principle agree with both Duncan and Hadley position, but if someone
more powerful (in this case the Debian package admin) has other opinions
there was not much I could do.

Best,
Henrik

Am Do., 11. Sept. 2025 um 23:32 Uhr schrieb Hadley Wickham <
h.wickham at gmail.com>:

> On Mon, Sep 8, 2025 at 2:08?PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
> > On 2025-09-08 10:55 a.m., Ilmari Tamminen wrote:
> > > I would like to release my R code under GPL-3. The code depends on a
> > package (lme4) that itself uses "GPL >= 2", but which has upstream
> > dependencies (minqa, numDeriv, rbibutils) that are GPL-2 only.  According
> > to what I've read (see below), GPL-2 and GPL-3 are incompatible. Are the
> > GPL-2 upstream licenses a problem for my GPL-3 R code? If so, are there
> > recommended ways of resolving this?
> >
> > My understanding is that the licenses of other packages are only
> > relevant if you are incorporating their code into yours and would like
> > to release the combined work.
> >
> > If your code uses some other package but you are not distributing the
> > other package then their license doesn't affect your package.
> >
> > For example, many packages (including R itself) are written to use
> > Windows functions, but since they don't distribute copies of those
> > functions the fact that Windows isn't open source doesn't matter.
> >
>
> This is my belief too, and I've written a bit about it at
> https://r-pkgs.org/license.html#code-you-use
>
> Hadley
>
> --
> http://hadley.nz
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Dr. Henrik Singmann
Associate Professor, Experimental Psychology
University College London (UCL), UK
http://singmann.org

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Sep 14 03:02:19 2025
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Sun, 14 Sep 2025 01:02:19 +0000
Subject: [R-pkg-devel] 2 Generic functions with the same name-skeleton
In-Reply-To: <CADNULg9xS-Gs2jv0+3KKZNnynWrPH5F4EoP0gwgnJK5MgMWSoA@mail.gmail.com>
References: <DBAP192MB095638DDCA4324484071E42F8409A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <CADNULg9xS-Gs2jv0+3KKZNnynWrPH5F4EoP0gwgnJK5MgMWSoA@mail.gmail.com>
Message-ID: <DBAP192MB0956CEC12C7A32935B7D0B0F840AA@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear Iris,

Thank you very much for your response.

I finally found out how to do it.

I am using devtools with roxygen2 to build the package. My knowledge is very limited about this process. I think I've got it now: adding the following lines before the function code does the job, e.g.:

#' @method centres.ppRoll default
#' @exportS3Method centres.ppRoll default

I missed the first method-line and did not realise it.

Many thanks,

Leonard

________________________________
From: Iris Simmons <ikwsimmo at gmail.com>
Sent: Thursday, September 11, 2025 10:01 PM
To: Leo Mada <leo.mada at syonic.eu>
Cc: List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] 2 Generic functions with the same name-skeleton

I feel as though it would be best to just rename the function to centres_ppRoll

On Thu, Sep 11, 2025, 14:57 Leo Mada via R-package-devel <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>> wrote:
Dear All,

I have some problems and some questions regarding how to pass some checks (run on my computer - new version not yet submitted).

There are 2 important notes:

1. Note 1:
checking S3 generic/method consistency ... NOTE
  Apparent methods for exported generics not registered:
    centres.ppRoll

2. Note 2:
checking Rd \usage sections ... NOTE
  S3 methods shown with full name in Rd file 'centres.ppRoll.Rd':
    'centres.ppRoll'

The current code is on GitHub:
https://github.com/discoleo/Rpdb

But let me first explain the reason and reasoning.

There are 2 generic functions: centres and centres.ppRoll, each with 3 methods for pdb objects, atoms and coords (default).

Generic function centres:
The 1st generic function, centres, computes the centres of a molecule and has methods for 3 objects: pdb molecule, atoms and xyz-coordinates (default). It acts on an object of type coords, while the objects atoms and pdb include such a coords-object in their structure.

I would like to write various "specialised" versions:
- they still compute the centre, as it's the simplest summary possible for 3D objects;
- however, there are many types of molecules: proteins, nucleic acids, other types of molecules; and each may benefit from more "specialised" methods;
Note: all molecules are still coded as a pdb object. It's the user who selects which method is most appropriate for a specific situation/molecule.

E.g. proteins consist of long linear chains. One such variant would be a "rolling mean": it makes sense for polypeptide chains and nucleic acids, but little (or no) sense for other molecules.

I wrote therefore a generic function centres.ppRoll with 3 methods for the 3 base-objects.

I would like to reuse the centres-skeleton for the name: users can then easily check which methods are available to compute centres:
methods(centres)
# [1] centres.atoms          centres.coords         centres.pdb
# centres.ppRoll
# [5] centres.ppRoll.atoms   centres.ppRoll.default centres.ppRoll.pdb

I would like to avoid having hundreds of function names which no-one remembers and which would be cumbersome to search for. Each method would be useful only in particular situations and users are likely to forget the exact names between uses.

I get the above 2 notes with this approach:
- I did not register centres.ppRoll as an S3 method to avoid the 2nd note;
- I get the 2nd note anyway (and it gets silently registered, which may be necessary for the methods-search to work);

Another pseudo-solution would be to add a methods argument. This solution is misused at times; unfortunately, it is really ugly here because some of the methods may have particular arguments (e.g. window-size for the roll-method).

Ultimately, I may end up with 50 or 100 arguments in the function, which I also need to replicate to all the 3 methods (pdb, atoms, default/coords).

I really don't like this pseudo-solution and prefer one based on the 1st approach.

I did not count how many function name variants are in the > 20,000 packages on CRAN. But I think that a more structured approach would be beneficial to everyone.

Thanks in advance for any support,

Leonard

##########

### Note
- Proteins have a backbone and the amino-acids also have side chains;
- It is useful in certain situations to have additional types of centres computed;
- The initial developer of Rpdb used it mainly for other types of molecules (not proteins);

The code actually functions:

# pdb2z81.ent can be downloaded from the Protein Data Bank;
setwd(...)
x = read.pdb("pdb2z81.ent")
# Number of models:  0
# Warning message:
# In read.pdb("pdb2z81.ent") : The pdb contains a Caveat record!
tmp = centres.ppRoll(x)
visualize(x, type="p", pbc.box = FALSE)
# Draw a peptide-"Skeleton"
lines3d(tmp, lwd = 5, col = "red")

# A new version of the pdb-format is also out,
# but that's a horror-story in itself.


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Sun Sep 14 09:22:37 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Sun, 14 Sep 2025 10:22:37 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
Message-ID: <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>

Thank you Henrik, I read the "bug" report. The precedent you described seems quite significant, and unfortunate of course, although dealt outside the courts. If no substantial counter arguments appear, such as a stance from the free software foundation or judicial decision that would falsify how your package was treated, I think I don't dare to use the lme4 package as such. Thus, I might need to make my own version and remove the GPL2 dependencies somehow. But there is the risk of breaking the code, as I am not a specialised lme4 developer. However, I have already tested that my mixed-model fittings do work after doing the following in a fresh R session:

library(lme4)
remove.packages(c("numDeriv", "minqa", "rbibutils"), c("/usr/local/lib/R/site-library"))

I understand the burden this would cause, but for me and maybe other lme4 users as well the easiest way would be to solve the assumed issues in more coordinated manner. By asking the dependency authors to update their licenses, or remove the dependencies from the official distribution of the lme4. But honestly I am still unsure is this an over reaction, or was the apex package treated incorrectly. Unfortunate uncertainties and delays for my project anyhow.

Best regards
Ilmari

> Hi all,
> 
> Just adding my experience to this thread as a cautionary example against the notion that it should be no problem to release a package under GPL-3 if it only calls functions from packages released under GPL-2.  
> 
> Up to 2017, my afex package (which depended on several GPL-2 packages) was released under GPL-3. However, then an over-eager debian user reported this as a violation of the GPL, see here: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=800891
> As a consequence, Debian suspended hosting the corresponding binary package (r-cran-afex) until I changed my license to GPL (? 2).
> 
> I in principle agree with both Duncan and Hadley position, but if someone more powerful (in this case the Debian package admin) has other opinions there was not much I could do. 
> 
> Best,
> Henrik


From bbo|ker @end|ng |rom gm@||@com  Sun Sep 14 14:36:06 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 14 Sep 2025 08:36:06 -0400
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
Message-ID: <CABghstR0tZFkHFCBec_CrRL5oQr8ukP-zfp8LbuEVSY3rgaeig@mail.gmail.com>

I will go ahead and ask the upstream developers if they're willing to
change their licenses from GPL-2 to "GPL >= 2", but honestly I think
this is probably an overreaction. I suspect there are *many* packages
on CRAN that have the same kind of license incompatibility, especially
those relying on stable packages that are so old (pre-2007, e.g.
numDeriv) that they were released before GPL-3 existed (and the
package maintainers never saw the need to go back and change the
license).

On Sun, Sep 14, 2025 at 3:22?AM Ilmari Tamminen
<ilmari.tamminen at icloud.com> wrote:
>
> Thank you Henrik, I read the "bug" report. The precedent you described seems quite significant, and unfortunate of course, although dealt outside the courts. If no substantial counter arguments appear, such as a stance from the free software foundation or judicial decision that would falsify how your package was treated, I think I don't dare to use the lme4 package as such. Thus, I might need to make my own version and remove the GPL2 dependencies somehow. But there is the risk of breaking the code, as I am not a specialised lme4 developer. However, I have already tested that my mixed-model fittings do work after doing the following in a fresh R session:
>
> library(lme4)
> remove.packages(c("numDeriv", "minqa", "rbibutils"), c("/usr/local/lib/R/site-library"))
>
> I understand the burden this would cause, but for me and maybe other lme4 users as well the easiest way would be to solve the assumed issues in more coordinated manner. By asking the dependency authors to update their licenses, or remove the dependencies from the official distribution of the lme4. But honestly I am still unsure is this an over reaction, or was the apex package treated incorrectly. Unfortunate uncertainties and delays for my project anyhow.
>
> Best regards
> Ilmari
>
> > Hi all,
> >
> > Just adding my experience to this thread as a cautionary example against the notion that it should be no problem to release a package under GPL-3 if it only calls functions from packages released under GPL-2.
> >
> > Up to 2017, my afex package (which depended on several GPL-2 packages) was released under GPL-3. However, then an over-eager debian user reported this as a violation of the GPL, see here: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=800891
> > As a consequence, Debian suspended hosting the corresponding binary package (r-cran-afex) until I changed my license to GPL (? 2).
> >
> > I in principle agree with both Duncan and Hadley position, but if someone more powerful (in this case the Debian package admin) has other opinions there was not much I could do.
> >
> > Best,
> > Henrik
>


From edd @end|ng |rom deb|@n@org  Sun Sep 14 14:38:27 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 14 Sep 2025 07:38:27 -0500
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
Message-ID: <26822.46915.260403.543560@paul.eddelbuettel.com>


Hi Ilmari,

Am I reading this correctly that you imply that a relationship arising from
package A calling library(B), or having a more Imports or Depends on it,
would lead to same GPL "virality" as having actual object code from an
external package?

The latter case (ie object code and linking) clearly is what the GPL has in
mind, where virality matters, and where it is commonly applied.  The
established consensus, as best as I can tell, always has been is that the
former (an R package calling another R package) is not, and the virality
argument you are making does not apply.  So I think you are fighting a
fighting that does not exist.

Cheers, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|ngm@nn @end|ng |rom gm@||@com  Sun Sep 14 15:18:14 2025
From: @|ngm@nn @end|ng |rom gm@||@com (Henrik Singmann)
Date: Sun, 14 Sep 2025 14:18:14 +0100
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <26822.46915.260403.543560@paul.eddelbuettel.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
Message-ID: <CA+rDMK+wFVXC-sXZx719zi6ZwyNgEkchD1CpJzj3P_2CazAzFA@mail.gmail.com>

Hi Dirk,

You might have missed the point I made in my email which shows that some
people from Debian (!) took exactly the position you believe does not exist
and removed the binary version of afex from the Debian repositories. I link
to the relevant Debian bug report again below which contains the following
claims:

> I believe the r-cran-afex package violates the GPL. It is released under
GPL3+, however it has GPL2-only dependencies (r-cran-stringr, r-cran-coin,
r-crain-lsmeans), and it calls functions from these packages directly.
> The nature of the interaction (function calls) means that r-cran-afex and
its dependencies constitute a single work, and not two separate programs,
as per the GPL faq: [...]
See here: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=800891

While I also believe that this is likely a misinterpretation of the GPL, I
was not in the mood to fight against this and simply changed my package's
license. So while we might all be in agreement here, clearly not everyone
sees it this way.

Best,
Henrik


Am So., 14. Sept. 2025 um 13:38 Uhr schrieb Dirk Eddelbuettel <
edd at debian.org>:

>
> Hi Ilmari,
>
> Am I reading this correctly that you imply that a relationship arising from
> package A calling library(B), or having a more Imports or Depends on it,
> would lead to same GPL "virality" as having actual object code from an
> external package?
>
> The latter case (ie object code and linking) clearly is what the GPL has in
> mind, where virality matters, and where it is commonly applied.  The
> established consensus, as best as I can tell, always has been is that the
> former (an R package calling another R package) is not, and the virality
> argument you are making does not apply.  So I think you are fighting a
> fighting that does not exist.
>
> Cheers, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>


-- 
Dr. Henrik Singmann
Associate Professor, Experimental Psychology
University College London (UCL), UK
http://singmann.org

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Sep 14 15:40:58 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 14 Sep 2025 08:40:58 -0500
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <CA+rDMK+wFVXC-sXZx719zi6ZwyNgEkchD1CpJzj3P_2CazAzFA@mail.gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <CA+rDMK+wFVXC-sXZx719zi6ZwyNgEkchD1CpJzj3P_2CazAzFA@mail.gmail.com>
Message-ID: <26822.50666.230145.26489@paul.eddelbuettel.com>


Hi Henrik,

People have been wrong on the internet before, and they continue to do so.
Just because someone made a claim (which you and I considered false and
without underlying merit), and even when action resulted, does not create
"case law". That was simple a mistake being made. [1]

The underlying issue is that nobody has shown that a Depends (or these days
Imports) implies that the 'importing package' (here your `afex` package)
inherits anything from the 'imported package' (here Ben's `lme4`). CRAN has
over twenty-two thousand packages. There simply is no cross-pollination of
licensing on package being used in this standard way. [2] What matters is
that when a package gets onto CRAN is that its license is a suitable,
understood and accepted license that is part of the master list CRAN
keeps. All that is in the manuals.

I will now try to extract myself now from this thread. It really is a
flashback to earlier days in that it creates a lot of heat without much light.

Cheers, Dirk


[1] And having been part of Debian for thirty years I am with you that
sometimes it is easier to just make a change to a package or file and move
on. That by now means settles the underlying issue. There are simply too many
hotheads to debate.
[2] As said before, it is difference when a package builds, compiles, links,
with an external library. That is the example of virality that
matters. Different case though.

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Mon Sep 15 09:55:09 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Mon, 15 Sep 2025 10:55:09 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <26822.46915.260403.543560@paul.eddelbuettel.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
Message-ID: <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>

Many thanks for the input everybody! I am glad to get help with the complex topic.

> Am I reading this correctly that you imply that a relationship arising from
> package A calling library(B), or having a more Imports or Depends on it,
> would lead to same GPL "virality" as having actual object code from an
> external package?

According to my layman's understanding yes. The primary argument being the shared address space mentioned in the GPL's FAQ, also noted by Ivan. For example, a function defined in my R script can access the same variable as a package::function(). It was mentioned under the #MereAggregation, but with the ambiguous "almost surely" (leaving some space for the API interpretation, I will come back to this later). I also think that the invention of the separate LGPL licenses allowing dynamic linking to dependencies without the license virality supports the above indirectly. Why would the LGPL licenses be needed if the GPL licenses would already allow the dynamic linking? To my understanding, the default use of R language relies on dynamic linking, as no comprehensive executables are compiled prior the execution of the source code.

I do hope that the above interpretation would be wrong and the fight wouldn't exist. For example, so that the handling of the Henrik's afex package would have been incorrect. I do like the other interpretation where the R's namespace is considered as an API interface leading to software aggregates. However, notice the many opposing opinions against the non virality in the https://opensource.stackexchange.com/, specially in the context of R. Although I haven't seen anyone raising the specific API interpretation, I think saw it first time in this discussion. They all might be wrong, but the situation is confusing.

After the above, the most puzzling thing in my head currently reduces to the following. What is actually the difference between the dynamic linking and software aggregates? Any clarifying thoughts on this? The GPL2 license itself has the crucial permissible clause for the aggregates:

"In addition, mere aggregation of another work not based on the Program with the Program (or with a work based on the Program) on a volume of a storage or distribution medium does not bring the other work under the scope of this License."

If the current discussion resembles some earlier debates (that I am not aware of), and the uncertainty is still floating, maybe it would be wise to find some decisive, unambiguous conclusion and state it somewhere officially and visibly. Pointing to the relevant arguments and sources, such as explaining the API interpretation and how it aligns with the GPL licenses and their FAQs. Possibly also deal the difference between the dynamic linking and software aggregates. Which one of the concepts actually covers the default application of the R language, or are they even counterparts? And why would the LGPL licenses be redundant in the context of the default use of R (or are they)? If these topics happen to be crucial for solving the seemingly long-lasting confusion.

Br Ilmari

From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Sep 16 17:58:01 2025
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Tue, 16 Sep 2025 15:58:01 +0000
Subject: [R-pkg-devel] Suggestion: improving checks during actual package
 submission
Message-ID: <DBAP192MB09561F7F6C91532473A2CF898414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear CRAN Team,

Please find below some ideas how to improve the checks during a package submission.

I recently submitted a new version of package Rpbd, but made some trivial mistakes during the first 2 attempts. Both could have been easily caught during the actual submission process - before even running any tests.

1. Forgot to update date
The user should be warned if date is older than 1 week (and raise error if date is older than ... whatever triggers the error).

2. Version with leading zeroes
I resubmitted as version 2.4.01 - as it was just a minor update and was not aware of the generated error.

Both fields can be easily checked when uploading the file with the package: the DESCRIPTION file is processed anyway. The user can easily correct these errors, avoiding unnecessary checks, including additional manual checks.

Many thanks,

Leonard

=======
The new version of Rpdb is now on CRAN:
https://cran.r-project.org/web/packages/Rpdb/index.html



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Sep 16 19:51:44 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 16 Sep 2025 13:51:44 -0400
Subject: [R-pkg-devel] 
 Suggestion: improving checks during actual package submission
In-Reply-To: <DBAP192MB09561F7F6C91532473A2CF898414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB09561F7F6C91532473A2CF898414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <b7096457-999b-4de9-8496-c8f59696b5d9@gmail.com>

On 2025-09-16 11:58 a.m., Leo Mada via R-package-devel wrote:
> Dear CRAN Team,
> 
> Please find below some ideas how to improve the checks during a package submission.
> 
> I recently submitted a new version of package Rpbd, but made some trivial mistakes during the first 2 attempts. Both could have been easily caught during the actual submission process - before even running any tests.
> 
> 1. Forgot to update date
> The user should be warned if date is older than 1 week (and raise error if date is older than ... whatever triggers the error).
> 
> 2. Version with leading zeroes
> I resubmitted as version 2.4.01 - as it was just a minor update and was not aware of the generated error.
> 
> Both fields can be easily checked when uploading the file with the package: the DESCRIPTION file is processed anyway. The user can easily correct these errors, avoiding unnecessary checks, including additional manual checks.

You shouldn't have been uploading the package unless you had already run 
the checks locally (or on one of the several different available check 
services).

After all, you did check the box saying "I have checked the submission 
using R CMD check --as-cran and a current version of r-devel, as 
mandated by the CRAN Repository Policy. (You could do so using the 
win-builder service at https://win-builder.r-project.org)".

Duncan Murdoch


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Sep 16 22:10:01 2025
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Tue, 16 Sep 2025 20:10:01 +0000
Subject: [R-pkg-devel] 
 Suggestion: improving checks during actual package submission
In-Reply-To: <b7096457-999b-4de9-8496-c8f59696b5d9@gmail.com>
References: <DBAP192MB09561F7F6C91532473A2CF898414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <b7096457-999b-4de9-8496-c8f59696b5d9@gmail.com>
Message-ID: <DBAP192MB0956D8963021A2BC632076828414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear Duncan,

Unfortunately, I am not fully versed in the build project. I did use devtools::check.

Looking at the args, it seems that cran = TRUE is set by default:
args(devtools::check)
# function (pkg = ".", document = NULL, build_args = NULL, ...,
#    manual = FALSE, cran = TRUE, remote = FALSE, incoming = remote,
#    force_suggests = FALSE, run_dont_test = FALSE, args = "--timings",
#    env_vars = c(NOT_CRAN = "true"), quiet = FALSE, check_dir = NULL,
#    cleanup = deprecated(), vignettes = TRUE, error_on = c("never",
#        "error", "warning", "note"))

However, users may have older versions of R. So I wouldn't bet on the results which users get on their machines.

GitHub Check:
I have set up some scripts for automatic checking on the GitHub page of Rpdb (at the sugestion from this list). But they didn't catch the date error either (and I do not remember if I uploaded the 1st resubmitted version in order to detect the version issue). That was a quick-fix (though I did run the local devtools:check).

Sincerely,

Leonard

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, September 16, 2025 8:51 PM
To: Leo Mada <leo.mada at syonic.eu>; List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Suggestion: improving checks during actual package submission

On 2025-09-16 11:58 a.m., Leo Mada via R-package-devel wrote:
> Dear CRAN Team,
>
> Please find below some ideas how to improve the checks during a package submission.
>
> I recently submitted a new version of package Rpbd, but made some trivial mistakes during the first 2 attempts. Both could have been easily caught during the actual submission process - before even running any tests.
>
> 1. Forgot to update date
> The user should be warned if date is older than 1 week (and raise error if date is older than ... whatever triggers the error).
>
> 2. Version with leading zeroes
> I resubmitted as version 2.4.01 - as it was just a minor update and was not aware of the generated error.
>
> Both fields can be easily checked when uploading the file with the package: the DESCRIPTION file is processed anyway. The user can easily correct these errors, avoiding unnecessary checks, including additional manual checks.

You shouldn't have been uploading the package unless you had already run
the checks locally (or on one of the several different available check
services).

After all, you did check the box saying "I have checked the submission
using R CMD check --as-cran and a current version of r-devel, as
mandated by the CRAN Repository Policy. (You could do so using the
win-builder service at https://win-builder.r-project.org)".

Duncan Murdoch

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Sep 17 09:55:57 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 17 Sep 2025 09:55:57 +0200
Subject: [R-pkg-devel] 
 Suggestion: improving checks during actual package submission
In-Reply-To: <DBAP192MB0956D8963021A2BC632076828414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB09561F7F6C91532473A2CF898414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <b7096457-999b-4de9-8496-c8f59696b5d9@gmail.com>
 <DBAP192MB0956D8963021A2BC632076828414A@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1eb56482-e9a0-4a46-b5e6-13e0fb99478a@statistik.tu-dortmund.de>



On 16.09.2025 22:10, Leo Mada via R-package-devel wrote:
> Dear Duncan,
> 
> Unfortunately, I am not fully versed in the build project. I did use devtools::check.
> 
> Looking at the args, it seems that cran = TRUE is set by default:
> args(devtools::check)
> # function (pkg = ".", document = NULL, build_args = NULL, ...,
> #    manual = FALSE, cran = TRUE, remote = FALSE, incoming = remote,
> #    force_suggests = FALSE, run_dont_test = FALSE, args = "--timings",
> #    env_vars = c(NOT_CRAN = "true"), quiet = FALSE, check_dir = NULL,
> #    cleanup = deprecated(), vignettes = TRUE, error_on = c("never",
> #        "error", "warning", "note"))
> 
> However, users may have older versions of R. So I wouldn't bet on the results which users get on their machines.

This is explained in the policies: A recent version of R should be used, 
at least R-release, better R-devel.

People may be used to accept policies unconditionally. For CRAN, please 
really read the policies.

Best,
Uwe Ligges



> 
> GitHub Check:
> I have set up some scripts for automatic checking on the GitHub page of Rpdb (at the sugestion from this list). But they didn't catch the date error either (and I do not remember if I uploaded the 1st resubmitted version in order to detect the version issue). That was a quick-fix (though I did run the local devtools:check).
> 
> Sincerely,
> 
> Leonard
> 
> ________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Tuesday, September 16, 2025 8:51 PM
> To: Leo Mada <leo.mada at syonic.eu>; List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Suggestion: improving checks during actual package submission
> 
> On 2025-09-16 11:58 a.m., Leo Mada via R-package-devel wrote:
>> Dear CRAN Team,
>>
>> Please find below some ideas how to improve the checks during a package submission.
>>
>> I recently submitted a new version of package Rpbd, but made some trivial mistakes during the first 2 attempts. Both could have been easily caught during the actual submission process - before even running any tests.
>>
>> 1. Forgot to update date
>> The user should be warned if date is older than 1 week (and raise error if date is older than ... whatever triggers the error).
>>
>> 2. Version with leading zeroes
>> I resubmitted as version 2.4.01 - as it was just a minor update and was not aware of the generated error.
>>
>> Both fields can be easily checked when uploading the file with the package: the DESCRIPTION file is processed anyway. The user can easily correct these errors, avoiding unnecessary checks, including additional manual checks.
> 
> You shouldn't have been uploading the package unless you had already run
> the checks locally (or on one of the several different available check
> services).
> 
> After all, you did check the box saying "I have checked the submission
> using R CMD check --as-cran and a current version of r-devel, as
> mandated by the CRAN Repository Policy. (You could do so using the
> win-builder service at https://win-builder.r-project.org)".
> 
> Duncan Murdoch
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |@|@ye @end|ng |rom un@w@edu@@u  Fri Sep 19 08:36:12 2025
From: |@|@ye @end|ng |rom un@w@edu@@u (Pierre Lafaye de Micheaux)
Date: Fri, 19 Sep 2025 06:36:12 +0000
Subject: [R-pkg-devel] Reviving IndependenceTests and LAPACK WARNINGs
In-Reply-To: <MEYPR01MB74008074E5B9A508168644E69352A@MEYPR01MB7400.ausprd01.prod.outlook.com>
References: <01dbf2f3$Blat.v3.2.24$02318840$1f884658@mail.statistik.tu-dortmund.de>
 <MEYPR01MB7400BC0D9F0458448283A982934AA@MEYPR01MB7400.ausprd01.prod.outlook.com>
 <MEYPR01MB74008074E5B9A508168644E69352A@MEYPR01MB7400.ausprd01.prod.outlook.com>
Message-ID: <MEYPR01MB7400352021712978EE0B97AB9311A@MEYPR01MB7400.ausprd01.prod.outlook.com>

Dear R developpers,

On the 20th of July, I sent an email to the CRAN team asking respectfully if they would consider adding more LAPACK routines to the R's source tree. Since, I have not received a response from them, I now assume that maybe I used the wrong communication channel (and I apologise if this is the case).

My goal is to revive the "IndependenceTests" package, which was archived in 2021.
I was able to resolve most of the issues, but I still have 2 WARNINGs  and 1 NOTE, such as:

    Warning: GNU Extension: Nonstandard type declaration COMPLEX*16 at (1)

I cannot solve these issues without modifying several (old) Lapack Fortran source files.

In Section 6.7 of the "Writing R Extensions" manual, I read that the current set of LAPACK subroutines included in R "might be supplemented".

Moreover, in https://github.com/SurajGupta/r-source/blob/master/src/modules/lapack/README
I see that some Lapack files (not all the ones I need, unfortunately) were added over the years to the R source tree.

The file I would like to be added is:

zhpevx.f

which in turn needs those below that are not in the R Lapack:

lsame.f
xerbla.f
zhptrd.f
zlanhp.f
zstein.f
zupgtr.f
zupmtr.f

Would you kindly let me know if:


  1.
A formal request to add these LAPACK routines to R's source is something the CRAN team would consider?
  2.
Alternatively, would a submission with these remaining warnings still be acceptable?

I fully understand if this falls outside the scope of CRAN's intended support, but any guidance would be greatly appreciated.

Thank you in advance for your time and consideration.

I wish you a nice day.

Kind regards,
Pierre L.







From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Sent: Saturday, 12 July 2025 16:05
To: Pierre Lafaye de Micheaux <lafaye at unsw.edu.au>
Cc: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Subject: winbuilder: Package IndependenceTests_0.6.tar.gz has been checked and built

Dear package maintainer,

this notification has been generated automatically.
Your package IndependenceTests_0.6.tar.gz has been built (if working) and checked for Windows.
Please check the log files and (if working) the binary package at:
https://win-builder.r-project.org/XB9bsh1dkkT4
The files will be removed after roughly 72 hours.
Installation time in seconds: 36
Check time in seconds: 67
Status: 2 WARNINGs, 1 NOTE
R Under development (unstable) (2025-07-11 r88405 ucrt)

All the best,
Uwe Ligges
(CRAN maintainer of binary packages for Windows)


This email and any files transmitted with it may contain confidential information. If you believe you have received this email or any of its contents in error, please notify me immediately by return email and destroy this email. Do not use, disseminate, forward, print or copy any contents of an email received in error.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Sep 19 11:38:32 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 19 Sep 2025 05:38:32 -0400
Subject: [R-pkg-devel] Reviving IndependenceTests and LAPACK WARNINGs
In-Reply-To: <MEYPR01MB7400352021712978EE0B97AB9311A@MEYPR01MB7400.ausprd01.prod.outlook.com>
References: <01dbf2f3$Blat.v3.2.24$02318840$1f884658@mail.statistik.tu-dortmund.de>
 <MEYPR01MB7400BC0D9F0458448283A982934AA@MEYPR01MB7400.ausprd01.prod.outlook.com>
 <MEYPR01MB74008074E5B9A508168644E69352A@MEYPR01MB7400.ausprd01.prod.outlook.com>
 <MEYPR01MB7400352021712978EE0B97AB9311A@MEYPR01MB7400.ausprd01.prod.outlook.com>
Message-ID: <deddcc93-2304-4c28-ab93-fcc64051d141@gmail.com>

Hi.  Just a quick note:  CRAN is the group that runs the package 
repository.  It would be R Core who would decide whether to add those 
LAPACK routines that you are asking for.  There's a big overlap between 
the membership of the two groups, but they are separate.

If you don't get a response from R Core to this message, you could try 
posting a similar message to the R-devel mailing list -- it's the one 
about changes to R itself.  Or you could post it as a feature request on 
bugs.r-project.org (but for that you need an account; see
https://www.r-project.org/bugs.html for a discussion of the procedure).

Duncan Murdoch (not a member of CRAN or R Core).

On 2025-09-19 2:36 a.m., Pierre Lafaye de Micheaux via R-package-devel 
wrote:
> Dear R developpers,
> 
> On the 20th of July, I sent an email to the CRAN team asking respectfully if they would consider adding more LAPACK routines to the R's source tree. Since, I have not received a response from them, I now assume that maybe I used the wrong communication channel (and I apologise if this is the case).
> 
> My goal is to revive the "IndependenceTests" package, which was archived in 2021.
> I was able to resolve most of the issues, but I still have 2 WARNINGs  and 1 NOTE, such as:
> 
>      Warning: GNU Extension: Nonstandard type declaration COMPLEX*16 at (1)
> 
> I cannot solve these issues without modifying several (old) Lapack Fortran source files.
> 
> In Section 6.7 of the "Writing R Extensions" manual, I read that the current set of LAPACK subroutines included in R "might be supplemented".
> 
> Moreover, in https://github.com/SurajGupta/r-source/blob/master/src/modules/lapack/README
> I see that some Lapack files (not all the ones I need, unfortunately) were added over the years to the R source tree.
> 
> The file I would like to be added is:
> 
> zhpevx.f
> 
> which in turn needs those below that are not in the R Lapack:
> 
> lsame.f
> xerbla.f
> zhptrd.f
> zlanhp.f
> zstein.f
> zupgtr.f
> zupmtr.f
> 
> Would you kindly let me know if:
> 
> 
>    1.
> A formal request to add these LAPACK routines to R's source is something the CRAN team would consider?
>    2.
> Alternatively, would a submission with these remaining warnings still be acceptable?
> 
> I fully understand if this falls outside the scope of CRAN's intended support, but any guidance would be greatly appreciated.
> 
> Thank you in advance for your time and consideration.
> 
> I wish you a nice day.
> 
> Kind regards,
> Pierre L.
> 
> 
> 
> 
> 
> 
> 
> From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Sent: Saturday, 12 July 2025 16:05
> To: Pierre Lafaye de Micheaux <lafaye at unsw.edu.au>
> Cc: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Subject: winbuilder: Package IndependenceTests_0.6.tar.gz has been checked and built
> 
> Dear package maintainer,
> 
> this notification has been generated automatically.
> Your package IndependenceTests_0.6.tar.gz has been built (if working) and checked for Windows.
> Please check the log files and (if working) the binary package at:
> https://win-builder.r-project.org/XB9bsh1dkkT4
> The files will be removed after roughly 72 hours.
> Installation time in seconds: 36
> Check time in seconds: 67
> Status: 2 WARNINGs, 1 NOTE
> R Under development (unstable) (2025-07-11 r88405 ucrt)
> 
> All the best,
> Uwe Ligges
> (CRAN maintainer of binary packages for Windows)
> 
> 
> This email and any files transmitted with it may contain confidential information. If you believe you have received this email or any of its contents in error, please notify me immediately by return email and destroy this email. Do not use, disseminate, forward, print or copy any contents of an email received in error.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Fri Sep 19 15:09:01 2025
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Fri, 19 Sep 2025 09:09:01 -0400
Subject: [R-pkg-devel] CRAN Submission Warning and Notes for `HACSim` Package
Message-ID: <CAMVrHdBt2FVn4vu1++B42V3qjMAan1EM5QBwcx4JhHL2GkvdAA@mail.gmail.com>

Hello,

I am the maintainer of the `HACSim` package and received the below WARNING
and NOTE, but am unsure how to address them.

CRAN teams' auto-check service
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Jarrett D. Phillips <phillipsjarrett1 at gmail.com>'

  Size of tarball: 13246681 bytes

Flavor: r-devel-windows-x86_64
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    Warning: replacing previous import 'shinydashboard::taskItem' by
'shinydashboardPlus::taskItem' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardHeader' by
'shinydashboardPlus::dashboardHeader' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::box' by
'shinydashboardPlus::box' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::messageItem' by
'shinydashboardPlus::messageItem' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardSidebar'
by 'shinydashboardPlus::dashboardSidebar' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardPage' by
'shinydashboardPlus::dashboardPage' when loading 'HACSim'
    Warning: replacing previous import 'shinyWidgets::progressBar' by
'shinydashboardPlus::progressBar' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::notificationItem'
by 'shinydashboardPlus::notificationItem' when loading 'HACSim'
    Warning: replacing previous import 'shinyWidgets::alert' by
'shinyjs::alert' when loading 'HACSim'
  See 'd:/RCompile/CRANincoming/R-devel/HACSim.Rcheck/00install.out' for
details.
  Used C++ compiler: 'g++.exe (GCC) 14.2.0'

Flavor: r-devel-linux-x86_64-debian-gcc
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:

/home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include/RcppArmadillo/version/arma.h:71:17:
warning: Using fallback compilation with Armadillo 14.6.3. Please consider
defining -DARMA_USE_CURRENT. See GitHub issue #475 for more.
[-W#pragma-messages]
    Warning: replacing previous import 'shinydashboard::taskItem' by
'shinydashboardPlus::taskItem' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardHeader' by
'shinydashboardPlus::dashboardHeader' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::box' by
'shinydashboardPlus::box' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::messageItem' by
'shinydashboardPlus::messageItem' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardSidebar'
by 'shinydashboardPlus::dashboardSidebar' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::dashboardPage' by
'shinydashboardPlus::dashboardPage' when loading 'HACSim'
    Warning: replacing previous import 'shinyWidgets::progressBar' by
'shinydashboardPlus::progressBar' when loading 'HACSim'
    Warning: replacing previous import 'shinydashboard::notificationItem'
by 'shinydashboardPlus::notificationItem' when loading 'HACSim'
    Warning: replacing previous import 'shinyWidgets::alert' by
'shinyjs::alert' when loading 'HACSim'
  See '/srv/hornik/tmp/CRAN_pretest/HACSim.Rcheck/00install.out' for
details.
  Used C++ compiler: 'Debian clang version 19.1.7 (3+b2)'


The NOTE regarding the maintainer field has never been altered previously,
and it looks syntactically fine on the surface.

For the WARNING, I edited the NAMESPACE to use `import` rather than
`importFrom`, but that didn't fix things.

Any thoughts are greatly welcomed and appreciated.


Thanks.

Cheers,
Jarrertt

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Sep 19 15:16:31 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 19 Sep 2025 09:16:31 -0400
Subject: [R-pkg-devel] CRAN Submission Warning and Notes for `HACSim`
 Package
In-Reply-To: <CAMVrHdBt2FVn4vu1++B42V3qjMAan1EM5QBwcx4JhHL2GkvdAA@mail.gmail.com>
References: <CAMVrHdBt2FVn4vu1++B42V3qjMAan1EM5QBwcx4JhHL2GkvdAA@mail.gmail.com>
Message-ID: <e8c5f383-2d9d-4b4b-96a2-3da0ba3e8405@gmail.com>

On 2025-09-19 9:09 a.m., Jarrett Phillips wrote:
> Hello,
> 
> I am the maintainer of the `HACSim` package and received the below WARNING
> and NOTE, but am unsure how to address them.
> 
> CRAN teams' auto-check service
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'Jarrett D. Phillips <phillipsjarrett1 at gmail.com>'
> 
>    Size of tarball: 13246681 bytes
> 
> Flavor: r-devel-windows-x86_64
> Check: whether package can be installed, Result: WARNING
>    Found the following significant warnings:
>      Warning: replacing previous import 'shinydashboard::taskItem' by
> 'shinydashboardPlus::taskItem' when loading 'HACSim'

Which of those two functions do you want?  You can have both, but only 
if you rename one of them when you import it.

Duncan Murdoch

>      Warning: replacing previous import 'shinydashboard::dashboardHeader' by
> 'shinydashboardPlus::dashboardHeader' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::box' by
> 'shinydashboardPlus::box' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::messageItem' by
> 'shinydashboardPlus::messageItem' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::dashboardSidebar'
> by 'shinydashboardPlus::dashboardSidebar' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::dashboardPage' by
> 'shinydashboardPlus::dashboardPage' when loading 'HACSim'
>      Warning: replacing previous import 'shinyWidgets::progressBar' by
> 'shinydashboardPlus::progressBar' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::notificationItem'
> by 'shinydashboardPlus::notificationItem' when loading 'HACSim'
>      Warning: replacing previous import 'shinyWidgets::alert' by
> 'shinyjs::alert' when loading 'HACSim'
>    See 'd:/RCompile/CRANincoming/R-devel/HACSim.Rcheck/00install.out' for
> details.
>    Used C++ compiler: 'g++.exe (GCC) 14.2.0'
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: whether package can be installed, Result: WARNING
>    Found the following significant warnings:
> 
> /home/hornik/lib/R/Library/4.6/x86_64-linux-gnu/RcppArmadillo/include/RcppArmadillo/version/arma.h:71:17:
> warning: Using fallback compilation with Armadillo 14.6.3. Please consider
> defining -DARMA_USE_CURRENT. See GitHub issue #475 for more.
> [-W#pragma-messages]
>      Warning: replacing previous import 'shinydashboard::taskItem' by
> 'shinydashboardPlus::taskItem' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::dashboardHeader' by
> 'shinydashboardPlus::dashboardHeader' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::box' by
> 'shinydashboardPlus::box' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::messageItem' by
> 'shinydashboardPlus::messageItem' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::dashboardSidebar'
> by 'shinydashboardPlus::dashboardSidebar' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::dashboardPage' by
> 'shinydashboardPlus::dashboardPage' when loading 'HACSim'
>      Warning: replacing previous import 'shinyWidgets::progressBar' by
> 'shinydashboardPlus::progressBar' when loading 'HACSim'
>      Warning: replacing previous import 'shinydashboard::notificationItem'
> by 'shinydashboardPlus::notificationItem' when loading 'HACSim'
>      Warning: replacing previous import 'shinyWidgets::alert' by
> 'shinyjs::alert' when loading 'HACSim'
>    See '/srv/hornik/tmp/CRAN_pretest/HACSim.Rcheck/00install.out' for
> details.
>    Used C++ compiler: 'Debian clang version 19.1.7 (3+b2)'
> 
> 
> The NOTE regarding the maintainer field has never been altered previously,
> and it looks syntactically fine on the surface.
> 
> For the WARNING, I edited the NAMESPACE to use `import` rather than
> `importFrom`, but that didn't fix things.
> 
> Any thoughts are greatly welcomed and appreciated.
> 
> 
> Thanks.
> 
> Cheers,
> Jarrertt
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |kry|ov @end|ng |rom d|@root@org  Fri Sep 19 18:20:27 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 19 Sep 2025 19:20:27 +0300
Subject: [R-pkg-devel] CRAN Submission Warning and Notes for `HACSim`
 Package
In-Reply-To: <CAMVrHdBt2FVn4vu1++B42V3qjMAan1EM5QBwcx4JhHL2GkvdAA@mail.gmail.com>
References: <CAMVrHdBt2FVn4vu1++B42V3qjMAan1EM5QBwcx4JhHL2GkvdAA@mail.gmail.com>
Message-ID: <20250919192027.6f0473bf@arachnoid>

? Fri, 19 Sep 2025 09:09:01 -0400
Jarrett Phillips <phillipsjarrett1 at gmail.com> ?????:

> Check: CRAN incoming feasibility, Result: NOTE
>   Maintainer: 'Jarrett D. Phillips <phillipsjarrett1 at gmail.com>'
> 
>   Size of tarball: 13246681 bytes

> The NOTE regarding the maintainer field has never been altered
> previously, and it looks syntactically fine on the surface.

The maintainer information is a bit of a red herring. It is always
collected by this check (before 2014, it was printed with a NOTE, then
a 'Note_to_CRAN_maintainers' until 2024 to avoid returning a NOTE for
an otherwise perfect check result); nowadays it's hidden with an OK
status unless something else is not right.

Here, the NOTE is due to the size of the source package being too
large. Is there anything that can be trimmed down? Currently, the CRAN
policy limits data and documentation to 5 MB each and the source
package tarball to 10 MB.

> For the WARNING, I edited the NAMESPACE to use `import` rather than
> `importFrom`, but that didn't fix things.

As noted by Duncan Murdoch, it's better to use more specific imports of
individual functions (e.g. importFrom(shinydashboardPlus,
dashboardHeader) but not importFrom(shinydashboard, dashboardHeader) at
the same time) than less specific imports of the whole package
namespace (e.g. import(shinydashboard, shinydashboardPlus) and cause
conflicts) to avoid this warning.

-- 
Best regards,
Ivan


From |kry|ov @end|ng |rom d|@root@org  Sat Sep 20 09:32:36 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Sat, 20 Sep 2025 10:32:36 +0300
Subject: [R-pkg-devel] Reviving IndependenceTests and LAPACK WARNINGs
In-Reply-To: <MEYPR01MB7400352021712978EE0B97AB9311A@MEYPR01MB7400.ausprd01.prod.outlook.com>
References: <01dbf2f3$Blat.v3.2.24$02318840$1f884658@mail.statistik.tu-dortmund.de>
 <MEYPR01MB7400BC0D9F0458448283A982934AA@MEYPR01MB7400.ausprd01.prod.outlook.com>
 <MEYPR01MB74008074E5B9A508168644E69352A@MEYPR01MB7400.ausprd01.prod.outlook.com>
 <MEYPR01MB7400352021712978EE0B97AB9311A@MEYPR01MB7400.ausprd01.prod.outlook.com>
Message-ID: <20250920103236.486bcb67@trisector>

? Fri, 19 Sep 2025 06:36:12 +0000
Pierre Lafaye de Micheaux via R-package-devel
<r-package-devel at r-project.org> ?????:

> I was able to resolve most of the issues, but I still have 2 WARNINGs
>  and 1 NOTE, such as:
> 
>     Warning: GNU Extension: Nonstandard type declaration COMPLEX*16

These only happen on Win-Builder due to extra checks being enabled
there using the _R_CHECK_WALL_FORTRAN_=TRUE environment variable;
normally R CMD check ignores the warnings about COMPLEX*16 or DOUBLE
COMPLEX, including during CRAN submission checks. See, for example, a
recent upload of the 'QZ' package: the compiler warnings are present
[1], but the check status is OK [2].

WRE 1.6.5 expresses a weak preference for DOUBLE COMPLEX over
COMPLEX*16. If you're willing to make the old Fortran code closer to
Fortran 90 instead of Fortran 77 with extensions, replacing COMPLEX*16
with COMPLEX(KIND(0.0D0)) (and removing 10 spaces to the right to avoid
hitting the line length limit) seems to work too.

The C++ code at https://github.com/lafaye/IndependenceTests has a
couple of more serious problems:

 * The 'new[]' allocation at src/cubature1.cpp:429 is freed using
   'delete' instead of 'delete[]' at src/cubature1.cpp:462, which
   crashes the process for me.
 * The allocation at src/dependogram.cpp:635 seems to be leaked.

Hopefully the July 12 version of the package no longer contains them.

-- 
Best regards,
Ivan

[1]
https://win-builder.r-project.org/incoming_pretest/QZ_0.2-4_20250413_040405/Windows/00install.out

[2]
https://win-builder.r-project.org/incoming_pretest/QZ_0.2-4_20250413_040405/Windows/00check.log


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Fri Sep 19 19:40:25 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Fri, 19 Sep 2025 20:40:25 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
Message-ID: <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>

Well, this turned out to be an odd case. It took quite long to notice the following in the end of the GPLv2:

"10. If you wish to incorporate parts of the Program into other free programs whose distribution conditions are different, write to the author to ask for permission. For software which is copyrighted by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions for this. Our decision will be guided by the two goals of preserving the free status of all derivatives of our free software and of promoting the sharing and reuse of software generally."

The information I received from multiple sources was that the upstream licenses must be updated or the dependencies removed, if there is the GPLv2-only vs. GPLv3 conflict. Notably, the option based on the GPLv2 section 10. was not raised in this thread either.

So, is an email "OK" enough for resolving the GPLv2-only vs. GPLv3 conflict? But not necessary only from the package maintainers though, but from all the relevant copyright holders. But the maintainer can ask the permissions and then probably act from behalf of the copyright holders for giving the centralised permission for the cross use. If this is indeed possible, maybe it would be wise to ask permissions (retroactively) for all the versions, to clear all possible conflicts and remove uncertainties from the future at once. It would also be wise to communicate the permissions along the distribution.

I think the awareness about this less burdensome yet (I dare to say) unambiguous option should be distributed. I don't have the expertise to say is the namespace-API interpretation right or wrong. But this new approach is quite clearly defined in the GPLv2. However, I cannot give legal advice for all the possible circumstances. Everybody needs to do their own case-specific interpretations and take responsibility.

Any thoughts?

Br Ilmari Tamminen

> On 15. Sep 2025, at 10.55, Ilmari Tamminen <ilmari.tamminen at icloud.com> wrote:
> 
> Many thanks for the input everybody! I am glad to get help with the complex topic.
> 
>> Am I reading this correctly that you imply that a relationship arising from
>> package A calling library(B), or having a more Imports or Depends on it,
>> would lead to same GPL "virality" as having actual object code from an
>> external package?
> 
> According to my layman's understanding yes. The primary argument being the shared address space mentioned in the GPL's FAQ, also noted by Ivan. For example, a function defined in my R script can access the same variable as a package::function(). It was mentioned under the #MereAggregation, but with the ambiguous "almost surely" (leaving some space for the API interpretation, I will come back to this later). I also think that the invention of the separate LGPL licenses allowing dynamic linking to dependencies without the license virality supports the above indirectly. Why would the LGPL licenses be needed if the GPL licenses would already allow the dynamic linking? To my understanding, the default use of R language relies on dynamic linking, as no comprehensive executables are compiled prior the execution of the source code.
> 
> I do hope that the above interpretation would be wrong and the fight wouldn't exist. For example, so that the handling of the Henrik's afex package would have been incorrect. I do like the other interpretation where the R's namespace is considered as an API interface leading to software aggregates. However, notice the many opposing opinions against the non virality in the https://opensource.stackexchange.com/, specially in the context of R. Although I haven't seen anyone raising the specific API interpretation, I think saw it first time in this discussion. They all might be wrong, but the situation is confusing.
> 
> After the above, the most puzzling thing in my head currently reduces to the following. What is actually the difference between the dynamic linking and software aggregates? Any clarifying thoughts on this? The GPL2 license itself has the crucial permissible clause for the aggregates:
> 
> "In addition, mere aggregation of another work not based on the Program with the Program (or with a work based on the Program) on a volume of a storage or distribution medium does not bring the other work under the scope of this License."
> 
> If the current discussion resembles some earlier debates (that I am not aware of), and the uncertainty is still floating, maybe it would be wise to find some decisive, unambiguous conclusion and state it somewhere officially and visibly. Pointing to the relevant arguments and sources, such as explaining the API interpretation and how it aligns with the GPL licenses and their FAQs. Possibly also deal the difference between the dynamic linking and software aggregates. Which one of the concepts actually covers the default application of the R language, or are they even counterparts? And why would the LGPL licenses be redundant in the context of the default use of R (or are they)? If these topics happen to be crucial for solving the seemingly long-lasting confusion.
> 
> Br Ilmari


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Sat Sep 20 23:40:09 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Sat, 20 Sep 2025 21:40:09 +0000 (GMT)
Subject: [R-pkg-devel] 
 =?utf-8?q?Possible_open-source_license_incompatibi?=
 =?utf-8?q?lities_within_R_packages?=
In-Reply-To: <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
 <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
 <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>
Message-ID: <caca8413-9131-44a3-be6e-a97baf589f70@me.com>

Sorry about my unclear communication. In the context of solving the assumed license conflicts in the lme4, I meant that you (Ben) could ask only one permission for the minqa, one permission for numderiv, and so on. The maintainers of those packages should know who contributed to the packages, and if there are multiple people, the maintainers could act behalf of those (for giving centralized permissions to you). However, this (and what follows) is only my best layman's understanding currently. It would indeed nice to have some earlier credible applications of the GPLv2 section 10. or relevant FSF FAQ. For example, to me the expression "parts" does not exclude "all parts". And would "all parts" even used in an usual case, if only a limited number of functions and their arguments are called from an R package. The packages are not usually even distributed along the code of interest (in this case the lme4), why saying "all parts were incorporated" does not sound valid. Even if the lme4 would call all the functions and their arguments from a package, the "incorporated parts" would still be limited to those superficial elements. And this could be agreed with the dependency maintainers: only the function calls are incorporated (the situation now resembling the namespace-API interpretation, but enhanced with the permissions). The spirit of the FSF in the section 10. is also notable. In the lme4 case, "the parts" are incorporated with the GPL-2 | GPL-3 software, promoting. sharing and reusing. But these are only my hopefull interpretations. As said, it was surprising to find the section 10. so late, nobody haven't talked about it. Coming searches should be focused on the application of the section 10. I will search more when I have time. If you feel that getting the lme4 dependency licenses updated is possible, then I think it would be the clearest option from these two. Regards Ilmari Tamminen P?iv?n? 20. syysk. 2025, klo 23.05, Ben Bolker <bbolker at gmail.com> kirjoitti: On 2025-09-19 1:40 p.m., Ilmari Tamminen wrote: Well, this turned out to be an odd case. It took quite long to notice the following in the end of the GPLv2: "10. If you wish to incorporate parts of the Program into other free programs whose distribution conditions are different, write to the author to ask for permission. For software which is copyrighted by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions for this. Our decision will be guided by the two goals of preserving the free status of all derivatives of our free software and of promoting the sharing and reuse of software generally." The information I received from multiple sources was that the upstream licenses must be updated or the dependencies removed, if there is the GPLv2-only vs. GPLv3 conflict. Notably, the option based on the GPLv2 section 10. was not raised in this thread either. So, is an email "OK" enough for resolving the GPLv2-only vs. GPLv3 conflict? But not necessary only from the package maintainers though, but from all the relevant copyright holders. But the maintainer can ask the permissions and then probably act from behalf of the copyright holders for giving the centralised permission for the cross use. If this is indeed possible, maybe it would be wise to ask permissions (retroactively) for all the versions, to clear all possible conflicts and remove uncertainties from the future at once. It would also be wise to communicate the permissions along the distribution. I think the awareness about this less burdensome yet (I dare to say) unambiguous option should be distributed. I don't have the expertise to say is the namespace-API interpretation right or wrong. But this new approach is quite clearly defined in the GPLv2. However, I cannot give legal advice for all the possible circumstances. Everybody needs to do their own case-specific interpretations and take responsibility Any thoughts? It would be easy enough to request permissions from maintainers. > is an email "OK" enough for resolving the GPLv2-only vs. GPLv3 conflict? Maybe? > But the maintainer can ask the permissions and then probably act from behalf of the copyright holders for giving the centralised permission for the cross use. If this is indeed possible, maybe it would be wise to ask permissions (retroactively) for all the versions, to clear all possible conflicts and remove uncertainties from the future at once. It would also be wise to communicate the permissions along the distribution. I'm not quite sure what you want to have done here; if you're asking me (the lme4 maintainer) to ask all of the upstream maintainers and copyright holders (it's not clear to me who these are in the absence of an explicit 'cph'-tagged entity in the DESCRIPTION file or an explicit COPYRIGHTS file included in the package: maintainer? maintainer and all authors? maintainer, authors, and contributors?), that seems like more work than I want to do. Would I put these permissions in the LICENSE file, or ... ? I don't mind spending a bit of time asking upstream package maintainers to re-license their packages under 'GPL >= 2', but collating permissions actually seems like more work. I agree that it might be nice to have a clearer statement about these licensing issues, but the problem is that in the absence of a legal precedent (which doesn't exist AFAIK, and seems unlikely to exist in the future -- there would have to be an actual court case involving permissions of R packages, and then that would only apply to one particular jurisdiction etc. ...) it would still just be an opinion. Relevant opinions from Stack Exchange (still just opinions): https://opensource.stackexchange.com/questions/4414/if-my-r-package-uses-gpl-packages-does-mine-automatically-inherit-gpl https://opensource.stackexchange.com/search?q=R+package+GPL https://opensource.stackexchange.com/questions/14266/license-r-code-when-using-r-packages-with-different-license-types Br Ilmari Tamminen On 15. Sep 2025, at 10.55, Ilmari Tamminen <ilmari.tamminen at icloud.com> wrote: Many thanks for the input everybody! I am glad to get help with the complex topic. Am I reading this correctly that you imply that a relationship arising from package A calling library(B), or having a more Imports or Depends on it, would lead to same GPL "virality" as having actual object code from an external package? According to my layman's understanding yes. The primary argument being the shared address space mentioned in the GPL's FAQ, also noted by Ivan. For example, a function defined in my R script can access the same variable as a package::function(). It was mentioned under the #MereAggregation, but with the ambiguous "almost surely" (leaving some space for the API interpretation, I will come back to this later). I also think that the invention of the separate LGPL licenses allowing dynamic linking to dependencies without the license virality supports the above indirectly. Why would the LGPL licenses be needed if the GPL licenses would already allow the dynamic linking? To my understanding, the default use of R language relies on dynamic linking, as no comprehensive executables are compiled prior the execution of the source code. I do hope that the above interpretation would be wrong and the fight wouldn't exist. For example, so that the handling of the Henrik's afex package would have been incorrect. I do like the other interpretation where the R's namespace is considered as an API interface leading to software aggregates. However, notice the many opposing opinions against the non virality in the https://opensource.stackexchange.com/ , specially in the context of R. Although I haven't seen anyone raising the specific API interpretation, I think saw it first time in this discussion. They all might be wrong, but the situation is confusing. After the above, the most puzzling thing in my head currently reduces to the following. What is actually the difference between the dynamic linking and software aggregates? Any clarifying thoughts on this? The GPL2 license itself has the crucial permissible clause for the aggregates: "In addition, mere aggregation of another work not based on the Program with the Program (or with a work based on the Program) on a volume of a storage or distribution medium does not bring the other work under the scope of this License." If the current discussion resembles some earlier debates (that I am not aware of), and the uncertainty is still floating, maybe it would be wise to find some decisive, unambiguous conclusion and state it somewhere officially and visibly. Pointing to the relevant arguments and sources, such as explaining the API interpretation and how it aligns with the GPL licenses and their FAQs. Possibly also deal the difference between the dynamic linking and software aggregates. Which one of the concepts actually covers the default application of the R language, or are they even counterparts? And why would the LGPL licenses be redundant in the context of the default use of R (or are they)? If these topics happen to be crucial for solving the seemingly long-lasting confusion. Br Ilmari -- Dr. Benjamin Bolker Professor, Mathematics & Statistics and Biology, McMaster University Director, School of Computational Science and Engineering > E-mail is sent at my convenience; I don't expect replies outside of working hours.

From bbo|ker @end|ng |rom gm@||@com  Sat Sep 20 22:05:27 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 20 Sep 2025 16:05:27 -0400
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
 <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
Message-ID: <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>



On 2025-09-19 1:40 p.m., Ilmari Tamminen wrote:
> Well, this turned out to be an odd case. It took quite long to notice the following in the end of the GPLv2:
> 
> "10. If you wish to incorporate parts of the Program into other free programs whose distribution conditions are different, write to the author to ask for permission. For software which is copyrighted by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions for this. Our decision will be guided by the two goals of preserving the free status of all derivatives of our free software and of promoting the sharing and reuse of software generally."
> 
> The information I received from multiple sources was that the upstream licenses must be updated or the dependencies removed, if there is the GPLv2-only vs. GPLv3 conflict. Notably, the option based on the GPLv2 section 10. was not raised in this thread either.
> 
> So, is an email "OK" enough for resolving the GPLv2-only vs. GPLv3 conflict? But not necessary only from the package maintainers though, but from all the relevant copyright holders. But the maintainer can ask the permissions and then probably act from behalf of the copyright holders for giving the centralised permission for the cross use. If this is indeed possible, maybe it would be wise to ask permissions (retroactively) for all the versions, to clear all possible conflicts and remove uncertainties from the future at once. It would also be wise to communicate the permissions along the distribution.
> 
> I think the awareness about this less burdensome yet (I dare to say) unambiguous option should be distributed. I don't have the expertise to say is the namespace-API interpretation right or wrong. But this new approach is quite clearly defined in the GPLv2. However, I cannot give legal advice for all the possible circumstances. Everybody needs to do their own case-specific interpretations and take responsibility
> 
> Any thoughts?

   It would be easy enough to request permissions from maintainers.

 > is an email "OK" enough for resolving the GPLv2-only vs. GPLv3 conflict?

  Maybe?

 > But the maintainer can ask the permissions and then probably act from 
behalf of the copyright holders for giving the centralised permission 
for the cross use. If this is indeed possible, maybe it would be wise to 
ask permissions (retroactively) for all the versions, to clear all 
possible conflicts and remove uncertainties from the future at once. It 
would also be wise to communicate the permissions along the distribution.

    I'm not quite sure what you want to have done here; if you're asking 
me (the lme4 maintainer) to ask all of the upstream maintainers and 
copyright holders (it's not clear to me who these are in the absence of 
an explicit 'cph'-tagged entity in the DESCRIPTION file or an explicit 
COPYRIGHTS file included in the package: maintainer? maintainer and all 
authors? maintainer, authors, and contributors?), that seems like more 
work than I want to do. Would I put these permissions in the LICENSE 
file, or ... ?

    I don't mind spending a bit of time asking upstream package 
maintainers to re-license their packages under 'GPL >= 2', but collating 
permissions actually seems like more work.

   I agree that it might be nice to have a clearer statement about these 
licensing issues, but the problem is that in the absence of a legal 
precedent (which doesn't exist AFAIK, and seems unlikely to exist in the 
future -- there would have to be an actual court case involving 
permissions of R packages, and then that would only apply to one 
particular jurisdiction etc. ...) it would still just be an opinion.

   Relevant opinions from Stack Exchange (still just opinions):

https://opensource.stackexchange.com/questions/4414/if-my-r-package-uses-gpl-packages-does-mine-automatically-inherit-gpl
   https://opensource.stackexchange.com/search?q=R+package+GPL
https://opensource.stackexchange.com/questions/14266/license-r-code-when-using-r-packages-with-different-license-types

> 
> Br Ilmari Tamminen
> 
>> On 15. Sep 2025, at 10.55, Ilmari Tamminen <ilmari.tamminen at icloud.com> wrote:
>>
>> Many thanks for the input everybody! I am glad to get help with the complex topic.
>>
>>> Am I reading this correctly that you imply that a relationship arising from
>>> package A calling library(B), or having a more Imports or Depends on it,
>>> would lead to same GPL "virality" as having actual object code from an
>>> external package?
>>
>> According to my layman's understanding yes. The primary argument being the shared address space mentioned in the GPL's FAQ, also noted by Ivan. For example, a function defined in my R script can access the same variable as a package::function(). It was mentioned under the #MereAggregation, but with the ambiguous "almost surely" (leaving some space for the API interpretation, I will come back to this later). I also think that the invention of the separate LGPL licenses allowing dynamic linking to dependencies without the license virality supports the above indirectly. Why would the LGPL licenses be needed if the GPL licenses would already allow the dynamic linking? To my understanding, the default use of R language relies on dynamic linking, as no comprehensive executables are compiled prior the execution of the source code.
>>
>> I do hope that the above interpretation would be wrong and the fight wouldn't exist. For example, so that the handling of the Henrik's afex package would have been incorrect. I do like the other interpretation where the R's namespace is considered as an API interface leading to software aggregates. However, notice the many opposing opinions against the non virality in the https://opensource.stackexchange.com/, specially in the context of R. Although I haven't seen anyone raising the specific API interpretation, I think saw it first time in this discussion. They all might be wrong, but the situation is confusing.
>>
>> After the above, the most puzzling thing in my head currently reduces to the following. What is actually the difference between the dynamic linking and software aggregates? Any clarifying thoughts on this? The GPL2 license itself has the crucial permissible clause for the aggregates:
>>
>> "In addition, mere aggregation of another work not based on the Program with the Program (or with a work based on the Program) on a volume of a storage or distribution medium does not bring the other work under the scope of this License."
>>
>> If the current discussion resembles some earlier debates (that I am not aware of), and the uncertainty is still floating, maybe it would be wise to find some decisive, unambiguous conclusion and state it somewhere officially and visibly. Pointing to the relevant arguments and sources, such as explaining the API interpretation and how it aligns with the GPL licenses and their FAQs. Possibly also deal the difference between the dynamic linking and software aggregates. Which one of the concepts actually covers the default application of the R language, or are they even counterparts? And why would the LGPL licenses be redundant in the context of the default use of R (or are they)? If these topics happen to be crucial for solving the seemingly long-lasting confusion.
>>
>> Br Ilmari
> 
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Mon Sep 22 14:44:48 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Mon, 22 Sep 2025 15:44:48 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <caca8413-9131-44a3-be6e-a97baf589f70@me.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
 <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
 <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>
 <caca8413-9131-44a3-be6e-a97baf589f70@me.com>
Message-ID: <FFD2C6D7-41CA-42AC-8166-BEF2F214B0A3@icloud.com>

Hi, could the moderators remove my previous message. For some reason my email client screwed the response, as you can see:

https://stat.ethz.ch/pipermail/r-package-devel/2025q3/012000.html

I didn't find any address to moderators. Here is the previous message, hopefully better this time:


Sorry about my unclear communication. In the context of solving the assumed license conflicts in the lme4, I meant that you (Ben) could ask only one permission for the minqa, one permission for numderiv, and so on. The maintainers of those packages should know who contributed to the packages, and if there are multiple people, the maintainers could act behalf of those (for giving centralized permissions to you). However, this (and what follows) is only my best layman's understanding currently.


It would indeed nice to have some earlier credible applications of the GPLv2 section 10. or relevant FSF FAQ. For example, to me the expression "parts" does not exclude "all parts". And would "all parts" even used in a usual case, if only a limited number of functions and their arguments are called from an R package. The packages are not usually even distributed along the code of interest (in this case the lme4), why saying "all parts were incorporated" does not sound valid. Even if the lme4 would call all the functions and their arguments from a package, the "incorporated parts" would still be limited to those superficial elements. And this could be agreed with the dependency maintainers: only the function calls are incorporated (the situation now resembling the namespace-API interpretation, but enhanced with the permissions).


The spirit of the FSF in the section 10. is also notable. In the lme4 case, "the parts" are incorporated with the GPL-2 | GPL-3 software, promoting. sharing and reusing.


But these are only my hopefull interpretations. As said, it was surprising to find the section 10. so late, nobody haven't talked about it. Coming searches should be focused on the application of the section 10. I will search more when I have time.


If you feel that getting the lme4 dependency licenses updated is possible, then I think it would be the clearest option from these two.


Regards
Ilmari Tamminen

From vo|ody@ @end|ng |rom m|nd@pr|ng@com  Mon Sep 22 18:46:52 2025
From: vo|ody@ @end|ng |rom m|nd@pr|ng@com (Vladimir Dergachev)
Date: Mon, 22 Sep 2025 12:46:52 -0400 (EDT)
Subject: [R-pkg-devel] ucrt is not 64-bit clean
Message-ID: <alpine.DEB.2.22.394.2509221236560.1569706@iridium>


Just wanted to share something I just run into and fixed - when an R 
package is compiled for 64-bit Windows using "ucrt" C library, functions 
like ftell() and fseek() use 32-bit arguments for offsets, rather than 
64-bit.

What's worse the type "off_t" is 32-bit as well, which defeats the 
purpose of introducing off_t in the first place.

The solution for me was to replace ftell()/fseek() with MS-specific 
_lseeki64(), _ftelli64() and _fseeki64(), and redefine off_t to be 64-bit
"long long int".

So typical MS - there is a C-library to compile against but without 
changes the code only works up to 2GB.

It might be a good idea to have an R-shim to isolate ucrt() and provide 
64-bit functions for R packages.

What do you think?

best

Vladimir Dergachev


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Sep 22 20:37:28 2025
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 22 Sep 2025 20:37:28 +0200
Subject: [R-pkg-devel] ucrt is not 64-bit clean
In-Reply-To: <alpine.DEB.2.22.394.2509221236560.1569706@iridium>
References: <alpine.DEB.2.22.394.2509221236560.1569706@iridium>
Message-ID: <2449622c-2b3c-4f6d-bee7-977402cdd27c@gmail.com>


On 9/22/25 18:46, Vladimir Dergachev wrote:
>
> Just wanted to share something I just run into and fixed - when an R 
> package is compiled for 64-bit Windows using "ucrt" C library, 
> functions like ftell() and fseek() use 32-bit arguments for offsets, 
> rather than 64-bit.
>
> What's worse the type "off_t" is 32-bit as well, which defeats the 
> purpose of introducing off_t in the first place.
>
> The solution for me was to replace ftell()/fseek() with MS-specific 
> _lseeki64(), _ftelli64() and _fseeki64(), and redefine off_t to be 64-bit
> "long long int".
>
> So typical MS - there is a C-library to compile against but without 
> changes the code only works up to 2GB.
>
> It might be a good idea to have an R-shim to isolate ucrt() and 
> provide 64-bit functions for R packages.

I think this is something mingw-w64 should take care off, and having a 
quick look at the sources it seems it probably does.

I would start from the POSIX specification and then check how much of it 
is supported by mingw-w64, perhaps using _FILE_OFFSET_BITS and lseek(), 
ftello(), fseeko() would work.

Best
Tomas


>
> What do you think?
>
> best
>
> Vladimir Dergachev
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Sep 24 14:47:04 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 24 Sep 2025 07:47:04 -0500
Subject: [R-pkg-devel] dateset with roxygen2?
Message-ID: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>

Hello, All:


How does one document a dataset with roxygen2?


I've recently read Wickham and Bryan, R Packages (2e).[1] I've tried to 
do what they say there, and R CMD check is reporting:


  Variables with usage in Rd file 'MaddisonCountries.Rd' but not in code:
     ?MaddisonCountries?


This is in "https://github.com/sbgraves237/SS4Maddison".


Suggestions? Thanks, Spencer Graves


p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are always 
effectively exported .... . This means that they must be documented. ... 
[Y]ou document the name of the dataset and save it in R/. For example, 
the roxygen2 block used to document the who data in tidyr is saved in 
R/data.R ... . There are two roxygen tags that are especially important 
for documenting datasets: @format ... @source


They give an example of a "who" dataset in tidyr. I've studied that 
example without finding what I'm doing wrong.[2]


In addition, I need to specify Roygen and "LazyData: true" in DESCRIPTION.


[1] Wickham and Bryan, R Packages online at:


https://r-pkgs.org/


Chapter 7 deals with Data:


https://r-pkgs.org/data.html


[2] "data.R" in tidyr is available at:


https://github.com/tidyverse/tidyr/blob/main/R/data.R


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Wed Sep 24 18:59:24 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Wed, 24 Sep 2025 09:59:24 -0700
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
Message-ID: <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>

{ggplot2} has a number of data sets, you might read over their sources:

https://github.com/tidyverse/ggplot2/blob/main/R/data.R


On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
> How does one document a dataset with roxygen2?
>
>
> I've recently read Wickham and Bryan, R Packages (2e).[1] I've tried to
> do what they say there, and R CMD check is reporting:
>
>
>   Variables with usage in Rd file 'MaddisonCountries.Rd' but not in code:
>      ?MaddisonCountries?
>
>
> This is in "https://github.com/sbgraves237/SS4Maddison".
>
>
> Suggestions? Thanks, Spencer Graves
>
>
> p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are always
> effectively exported .... . This means that they must be documented. ...
> [Y]ou document the name of the dataset and save it in R/. For example,
> the roxygen2 block used to document the who data in tidyr is saved in
> R/data.R ... . There are two roxygen tags that are especially important
> for documenting datasets: @format ... @source
>
>
> They give an example of a "who" dataset in tidyr. I've studied that
> example without finding what I'm doing wrong.[2]
>
>
> In addition, I need to specify Roygen and "LazyData: true" in DESCRIPTION.
>
>
> [1] Wickham and Bryan, R Packages online at:
>
>
> https://r-pkgs.org/
>
>
> Chapter 7 deals with Data:
>
>
> https://r-pkgs.org/data.html
>
>
> [2] "data.R" in tidyr is available at:
>
>
> https://github.com/tidyverse/tidyr/blob/main/R/data.R
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Sep 24 22:32:15 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 24 Sep 2025 15:32:15 -0500
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
 <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
Message-ID: <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>

Hi, Michael et al.:


On 9/24/25 11:59, Michael Chirico wrote:
> {ggplot2} has a number of data sets, you might read over their sources:
> 
> https://github.com/tidyverse/ggplot2/blob/main/R/data.R <https:// 
> github.com/tidyverse/ggplot2/blob/main/R/data.R>


Thanks. I don't see anything there that is different from the example in 
their book, which is extracted from the similar data.R file in their 
tidyr package, which I reviewed earlier.[2]


I've deleted virtually everything else in that package and still get 
that same error.


Suggestions?
Spencer Graves


p.s. I've done several web searches on this issue, found discussions on 
StackOverflow that may have worked a few years ago, but roxygen2 seems 
to have changes since then. I posted a similar question to 
StackOverflow, that generated a few comments but nothing that seemed to 
fix this problem. I reported an "issue" to the R Packages book on GitHub 
last week, so far with nothing:


https://github.com/hadley/r-pkgs/issues/1106


I tried to use roxygen2 with a different project a year ago and gave up 
after being unable to figure out how to use it. >
> 
> On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves 
> <spencer.graves at effectivedefense.org 
> <mailto:spencer.graves at effectivedefense.org>> wrote:
> 
>     Hello, All:
> 
> 
>     How does one document a dataset with roxygen2?
> 
> 
>     I've recently read Wickham and Bryan, R Packages (2e).[1] I've tried to
>     do what they say there, and R CMD check is reporting:
> 
> 
>      ? Variables with usage in Rd file 'MaddisonCountries.Rd' but not in
>     code:
>      ? ? ??MaddisonCountries?
> 
> 
>     This is in "https://github.com/sbgraves237/SS4Maddison <https://
>     github.com/sbgraves237/SS4Maddison>".
> 
> 
>     Suggestions? Thanks, Spencer Graves
> 
> 
>     p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are always
>     effectively exported .... . This means that they must be
>     documented. ...
>     [Y]ou document the name of the dataset and save it in R/. For example,
>     the roxygen2 block used to document the who data in tidyr is saved in
>     R/data.R ... . There are two roxygen tags that are especially important
>     for documenting datasets: @format ... @source
> 
> 
>     They give an example of a "who" dataset in tidyr. I've studied that
>     example without finding what I'm doing wrong.[2]
> 
> 
>     In addition, I need to specify Roygen and "LazyData: true" in
>     DESCRIPTION.
> 
> 
>     [1] Wickham and Bryan, R Packages online at:
> 
> 
>     https://r-pkgs.org/ <https://r-pkgs.org/>
> 
> 
>     Chapter 7 deals with Data:
> 
> 
>     https://r-pkgs.org/data.html <https://r-pkgs.org/data.html>
> 
> 
>     [2] "data.R" in tidyr is available at:
> 
> 
>     https://github.com/tidyverse/tidyr/blob/main/R/data.R <https://
>     github.com/tidyverse/tidyr/blob/main/R/data.R>
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>     stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From jbenn|ngho|| @end|ng |rom m@c@com  Wed Sep 24 23:27:04 2025
From: jbenn|ngho|| @end|ng |rom m@c@com (John Benninghoff)
Date: Wed, 24 Sep 2025 16:27:04 -0500
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
 <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
 <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>
Message-ID: <2348B340-C6D9-403D-909F-E6211610E5A7@mac.com>

Hi Spencer, I tried downloading your GitHub repo. I wasn?t able to replicate your R CMD check results. I did find issues with the DESCRIPTION file, which I fixed by removing the blank ?Imports? and running desc::desc_normalize(). After that, running rcmdcheck::rcmdcheck() returned 0 errors, warnings, and notes.

> On Sep 24, 2025, at 3:32?PM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
> Hi, Michael et al.:
> 
> 
> On 9/24/25 11:59, Michael Chirico wrote:
>> {ggplot2} has a number of data sets, you might read over their sources:
>> https://github.com/tidyverse/ggplot2/blob/main/R/data.R <https:// github.com/tidyverse/ggplot2/blob/main/R/data.R>
> 
> 
> Thanks. I don't see anything there that is different from the example in their book, which is extracted from the similar data.R file in their tidyr package, which I reviewed earlier.[2]
> 
> 
> I've deleted virtually everything else in that package and still get that same error.
> 
> 
> Suggestions?
> Spencer Graves
> 
> 
> p.s. I've done several web searches on this issue, found discussions on StackOverflow that may have worked a few years ago, but roxygen2 seems to have changes since then. I posted a similar question to StackOverflow, that generated a few comments but nothing that seemed to fix this problem. I reported an "issue" to the R Packages book on GitHub last week, so far with nothing:
> 
> 
> https://github.com/hadley/r-pkgs/issues/1106
> 
> 
> I tried to use roxygen2 with a different project a year ago and gave up after being unable to figure out how to use it. >
>> On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves <spencer.graves at effectivedefense.org <mailto:spencer.graves at effectivedefense.org>> wrote:
>>    Hello, All:
>>    How does one document a dataset with roxygen2?
>>    I've recently read Wickham and Bryan, R Packages (2e).[1] I've tried to
>>    do what they say there, and R CMD check is reporting:
>>       Variables with usage in Rd file 'MaddisonCountries.Rd' but not in
>>    code:
>>          ?MaddisonCountries?
>>    This is in "https://github.com/sbgraves237/SS4Maddison <https://
>>    github.com/sbgraves237/SS4Maddison>".
>>    Suggestions? Thanks, Spencer Graves
>>    p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are always
>>    effectively exported .... . This means that they must be
>>    documented. ...
>>    [Y]ou document the name of the dataset and save it in R/. For example,
>>    the roxygen2 block used to document the who data in tidyr is saved in
>>    R/data.R ... . There are two roxygen tags that are especially important
>>    for documenting datasets: @format ... @source
>>    They give an example of a "who" dataset in tidyr. I've studied that
>>    example without finding what I'm doing wrong.[2]
>>    In addition, I need to specify Roygen and "LazyData: true" in
>>    DESCRIPTION.
>>    [1] Wickham and Bryan, R Packages online at:
>>    https://r-pkgs.org/ <https://r-pkgs.org/>
>>    Chapter 7 deals with Data:
>>    https://r-pkgs.org/data.html <https://r-pkgs.org/data.html>
>>    [2] "data.R" in tidyr is available at:
>>    https://github.com/tidyverse/tidyr/blob/main/R/data.R <https://
>>    github.com/tidyverse/tidyr/blob/main/R/data.R>
>>    ______________________________________________
>>    R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>    mailing list
>>    https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>>    stat.ethz.ch/mailman/listinfo/r-package-devel>
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Sep 25 02:01:33 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 24 Sep 2025 19:01:33 -0500
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <2348B340-C6D9-403D-909F-E6211610E5A7@mac.com>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
 <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
 <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>
 <2348B340-C6D9-403D-909F-E6211610E5A7@mac.com>
Message-ID: <b4acc6d4-6fd9-439e-b0e8-0c27648bbe7b@effectivedefense.org>

Hi, John:


On 9/24/25 16:27, John Benninghoff wrote:
> Hi Spencer, I tried downloading your GitHub repo. I wasn?t able to replicate your R CMD check results. I did find issues with the DESCRIPTION file, which I fixed by removing the blank ?Imports? and running desc::desc_normalize(). After that, running rcmdcheck::rcmdcheck() returned 0 errors, warnings, and notes.


Thanks.


I got what you got with "rcmdcheck::rcmdcheck()".


Sadly, GitHub Actions still reported the previous warning after I 
committed the change you suggested to DESCRIPTION AND locally using the 
process I found recommended in "R Projects":


library(devtools)
document() # add
load_all()
check()


I'm currently trying to develop a toy package using roxygen2:


https://github.com/sbgraves237/roxygenData1


This toy package currently consists only of boilerplate with zero content.


Thanks for your help. roxygen2 sounds great, but it cannot be used if a 
problem like this cannot be fixed with a finite amount of effort ;-)


Spencer

> 
>> On Sep 24, 2025, at 3:32?PM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>>
>> Hi, Michael et al.:
>>
>>
>> On 9/24/25 11:59, Michael Chirico wrote:
>>> {ggplot2} has a number of data sets, you might read over their sources:
>>> https://github.com/tidyverse/ggplot2/blob/main/R/data.R <https:// github.com/tidyverse/ggplot2/blob/main/R/data.R>
>>
>>
>> Thanks. I don't see anything there that is different from the example in their book, which is extracted from the similar data.R file in their tidyr package, which I reviewed earlier.[2]
>>
>>
>> I've deleted virtually everything else in that package and still get that same error.
>>
>>
>> Suggestions?
>> Spencer Graves
>>
>>
>> p.s. I've done several web searches on this issue, found discussions on StackOverflow that may have worked a few years ago, but roxygen2 seems to have changes since then. I posted a similar question to StackOverflow, that generated a few comments but nothing that seemed to fix this problem. I reported an "issue" to the R Packages book on GitHub last week, so far with nothing:
>>
>>
>> https://github.com/hadley/r-pkgs/issues/1106
>>
>>
>> I tried to use roxygen2 with a different project a year ago and gave up after being unable to figure out how to use it. >
>>> On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves <spencer.graves at effectivedefense.org <mailto:spencer.graves at effectivedefense.org>> wrote:
>>>     Hello, All:
>>>     How does one document a dataset with roxygen2?
>>>     I've recently read Wickham and Bryan, R Packages (2e).[1] I've tried to
>>>     do what they say there, and R CMD check is reporting:
>>>        Variables with usage in Rd file 'MaddisonCountries.Rd' but not in
>>>     code:
>>>           ?MaddisonCountries?
>>>     This is in "https://github.com/sbgraves237/SS4Maddison <https://
>>>     github.com/sbgraves237/SS4Maddison>".
>>>     Suggestions? Thanks, Spencer Graves
>>>     p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are always
>>>     effectively exported .... . This means that they must be
>>>     documented. ...
>>>     [Y]ou document the name of the dataset and save it in R/. For example,
>>>     the roxygen2 block used to document the who data in tidyr is saved in
>>>     R/data.R ... . There are two roxygen tags that are especially important
>>>     for documenting datasets: @format ... @source
>>>     They give an example of a "who" dataset in tidyr. I've studied that
>>>     example without finding what I'm doing wrong.[2]
>>>     In addition, I need to specify Roygen and "LazyData: true" in
>>>     DESCRIPTION.
>>>     [1] Wickham and Bryan, R Packages online at:
>>>     https://r-pkgs.org/ <https://r-pkgs.org/>
>>>     Chapter 7 deals with Data:
>>>     https://r-pkgs.org/data.html <https://r-pkgs.org/data.html>
>>>     [2] "data.R" in tidyr is available at:
>>>     https://github.com/tidyverse/tidyr/blob/main/R/data.R <https://
>>>     github.com/tidyverse/tidyr/blob/main/R/data.R>
>>>     ______________________________________________
>>>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>>     mailing list
>>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>>>     stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Thu Sep 25 06:06:20 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Thu, 25 Sep 2025 07:06:20 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <FFD2C6D7-41CA-42AC-8166-BEF2F214B0A3@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
 <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
 <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>
 <caca8413-9131-44a3-be6e-a97baf589f70@me.com>
 <FFD2C6D7-41CA-42AC-8166-BEF2F214B0A3@icloud.com>
Message-ID: <97B8848C-6274-4525-92E9-E9B2191C0504@icloud.com>

Regarding the utilisation of the GPL2 section 10 for solving the GPL2-only vs. GPL3 conflicts, it is important to remember the GPL3 virality. If only the GPL licenses are being read then it looks like that the conflicts exist, and the two most certain solutions are:

1) Update the upstream licenses
2) Not use the GPL2 packages downstream

Then, however, the FSF's GPL FAQ takes the more liberal stance, allowing for example the command-line communication within software aggregates. It doesn't sound a valid independency, if one code entity cannot call another one and then fails executing its purpose because of it, but this kind of application without the GPL3 virality seem to be widely accepted despite the language in the GPL licenses. Furthermore, to my understanding the GPL licenses do not clearly take into account whether the dependencies are conveyed with the code of interest or not, making the situation even more blurry.

Thus, the situation is still unfortunately unclear. It seems that the language in the GPL licenses is the strictest, but the popular and widely accepted interpretations are more liberal way or another, divided into the two schools (the R community's way I would like to call as the namespace-API interpretation).

Regards
Ilmari Tamminen


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Thu Sep 25 09:17:08 2025
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Thu, 25 Sep 2025 09:17:08 +0200
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <b4acc6d4-6fd9-439e-b0e8-0c27648bbe7b@effectivedefense.org>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
 <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
 <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>
 <2348B340-C6D9-403D-909F-E6211610E5A7@mac.com>
 <b4acc6d4-6fd9-439e-b0e8-0c27648bbe7b@effectivedefense.org>
Message-ID: <CAA-ibay7d1VOov1-CxG=Q8Qf28R8Oq1n2yi8WFFawj60=nV1qw@mail.gmail.com>

Hi:

Remove 'MaddisonCountries.rda' of your '.Rbuildignore' file.

This line makes that when you build your package you are in fact not
shipping the dataset, and therefore the R CMD CHECK is failing.
 See the commit on my fork and the checks in GH actions:
- Commit:
https://github.com/dieghernan/SS4Maddison/commit/fe1e15626870f1eb573576e182cdaff5a456ec55
- Checks:
https://github.com/dieghernan/SS4Maddison/actions/workflows/R-CMD-check.yaml

El jue, 25 sept 2025 a las 2:06, Spencer Graves (<
spencer.graves at effectivedefense.org>) escribi?:

> Hi, John:
>
>
> On 9/24/25 16:27, John Benninghoff wrote:
> > Hi Spencer, I tried downloading your GitHub repo. I wasn?t able to
> replicate your R CMD check results. I did find issues with the DESCRIPTION
> file, which I fixed by removing the blank ?Imports? and running
> desc::desc_normalize(). After that, running rcmdcheck::rcmdcheck() returned
> 0 errors, warnings, and notes.
>
>
> Thanks.
>
>
> I got what you got with "rcmdcheck::rcmdcheck()".
>
>
> Sadly, GitHub Actions still reported the previous warning after I
> committed the change you suggested to DESCRIPTION AND locally using the
> process I found recommended in "R Projects":
>
>
> library(devtools)
> document() # add
> load_all()
> check()
>
>
> I'm currently trying to develop a toy package using roxygen2:
>
>
> https://github.com/sbgraves237/roxygenData1
>
>
> This toy package currently consists only of boilerplate with zero content.
>
>
> Thanks for your help. roxygen2 sounds great, but it cannot be used if a
> problem like this cannot be fixed with a finite amount of effort ;-)
>
>
> Spencer
>
> >
> >> On Sep 24, 2025, at 3:32?PM, Spencer Graves <
> spencer.graves at effectivedefense.org> wrote:
> >>
> >> Hi, Michael et al.:
> >>
> >>
> >> On 9/24/25 11:59, Michael Chirico wrote:
> >>> {ggplot2} has a number of data sets, you might read over their sources:
> >>> https://github.com/tidyverse/ggplot2/blob/main/R/data.R <https://
> github.com/tidyverse/ggplot2/blob/main/R/data.R>
> >>
> >>
> >> Thanks. I don't see anything there that is different from the example
> in their book, which is extracted from the similar data.R file in their
> tidyr package, which I reviewed earlier.[2]
> >>
> >>
> >> I've deleted virtually everything else in that package and still get
> that same error.
> >>
> >>
> >> Suggestions?
> >> Spencer Graves
> >>
> >>
> >> p.s. I've done several web searches on this issue, found discussions on
> StackOverflow that may have worked a few years ago, but roxygen2 seems to
> have changes since then. I posted a similar question to StackOverflow, that
> generated a few comments but nothing that seemed to fix this problem. I
> reported an "issue" to the R Packages book on GitHub last week, so far with
> nothing:
> >>
> >>
> >> https://github.com/hadley/r-pkgs/issues/1106
> >>
> >>
> >> I tried to use roxygen2 with a different project a year ago and gave up
> after being unable to figure out how to use it. >
> >>> On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves <
> spencer.graves at effectivedefense.org <mailto:
> spencer.graves at effectivedefense.org>> wrote:
> >>>     Hello, All:
> >>>     How does one document a dataset with roxygen2?
> >>>     I've recently read Wickham and Bryan, R Packages (2e).[1] I've
> tried to
> >>>     do what they say there, and R CMD check is reporting:
> >>>        Variables with usage in Rd file 'MaddisonCountries.Rd' but not
> in
> >>>     code:
> >>>           ?MaddisonCountries?
> >>>     This is in "https://github.com/sbgraves237/SS4Maddison <https://
> >>>     github.com/sbgraves237/SS4Maddison>".
> >>>     Suggestions? Thanks, Spencer Graves
> >>>     p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are
> always
> >>>     effectively exported .... . This means that they must be
> >>>     documented. ...
> >>>     [Y]ou document the name of the dataset and save it in R/. For
> example,
> >>>     the roxygen2 block used to document the who data in tidyr is saved
> in
> >>>     R/data.R ... . There are two roxygen tags that are especially
> important
> >>>     for documenting datasets: @format ... @source
> >>>     They give an example of a "who" dataset in tidyr. I've studied that
> >>>     example without finding what I'm doing wrong.[2]
> >>>     In addition, I need to specify Roygen and "LazyData: true" in
> >>>     DESCRIPTION.
> >>>     [1] Wickham and Bryan, R Packages online at:
> >>>     https://r-pkgs.org/ <https://r-pkgs.org/>
> >>>     Chapter 7 deals with Data:
> >>>     https://r-pkgs.org/data.html <https://r-pkgs.org/data.html>
> >>>     [2] "data.R" in tidyr is available at:
> >>>     https://github.com/tidyverse/tidyr/blob/main/R/data.R <https://
> >>>     github.com/tidyverse/tidyr/blob/main/R/data.R>
> >>>     ______________________________________________
> >>>     R-package-devel at r-project.org <mailto:
> R-package-devel at r-project.org>
> >>>     mailing list
> >>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
> >>>     stat.ethz.ch/mailman/listinfo/r-package-devel>
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 



Have a nice day!

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Sep 25 10:08:37 2025
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 25 Sep 2025 03:08:37 -0500
Subject: [R-pkg-devel] dateset with roxygen2?
In-Reply-To: <b4acc6d4-6fd9-439e-b0e8-0c27648bbe7b@effectivedefense.org>
References: <c794159c-0fdd-44a4-9619-3d39fcf7d52c@effectivedefense.org>
 <CAPRVBcy586nHt7it1Kdvtw1AjEe9Ag9FAVoVepL0MtcGaH4_Tg@mail.gmail.com>
 <60ace295-bb86-4475-bcf7-bd8dbcd7ca76@effectivedefense.org>
 <2348B340-C6D9-403D-909F-E6211610E5A7@mac.com>
 <b4acc6d4-6fd9-439e-b0e8-0c27648bbe7b@effectivedefense.org>
Message-ID: <9969ee3a-f7f7-4f5a-ba7f-45ef16bd36a4@effectivedefense.org>

Diego Hernang?mez Herrero identified my problem:


My .Rbuildignore file in the package root directory contained 
'MaddisonCountries.rda'. I thought that entry in .Rbuildignore would 
apply only to the a copy in the package root directory and would not 
affect the copy in data. Clearly I was wrong.


The code in my vignette only generates that file when there's an 
appropriately named *.xlsx file in inst/exdata. Both the *.xlsx and 
*.rda files are in .gitignore and so are not on GitHub. That trick means 
that the vignette does not write anything on standard checks on GitHub, 
CRAN, etc.


I can accomplish the same thing without this problem and still have the 
vignette work as intended by writing the new data file with a different 
name. The file would then have to be renamed before replacing the old 
file in data/ with the new.


Thanks again to Diego Hernang?mez Herrero and thanks to all others who 
spent time looking at this and thinking about it.


Sincerely,
Spencer Graves


On 9/24/25 19:01, Spencer Graves wrote:
> Hi, John:
> 
> 
> On 9/24/25 16:27, John Benninghoff wrote:
>> Hi Spencer, I tried downloading your GitHub repo. I wasn?t able to 
>> replicate your R CMD check results. I did find issues with the 
>> DESCRIPTION file, which I fixed by removing the blank ?Imports? and 
>> running desc::desc_normalize(). After that, running 
>> rcmdcheck::rcmdcheck() returned 0 errors, warnings, and notes.
> 
> 
> Thanks.
> 
> 
> I got what you got with "rcmdcheck::rcmdcheck()".
> 
> 
> Sadly, GitHub Actions still reported the previous warning after I 
> committed the change you suggested to DESCRIPTION AND locally using the 
> process I found recommended in "R Projects":
> 
> 
> library(devtools)
> document() # add
> load_all()
> check()
> 
> 
> I'm currently trying to develop a toy package using roxygen2:
> 
> 
> https://github.com/sbgraves237/roxygenData1
> 
> 
> This toy package currently consists only of boilerplate with zero content.
> 
> 
> Thanks for your help. roxygen2 sounds great, but it cannot be used if a 
> problem like this cannot be fixed with a finite amount of effort ;-)
> 
> 
> Spencer
> 
>>
>>> On Sep 24, 2025, at 3:32?PM, Spencer Graves 
>>> <spencer.graves at effectivedefense.org> wrote:
>>>
>>> Hi, Michael et al.:
>>>
>>>
>>> On 9/24/25 11:59, Michael Chirico wrote:
>>>> {ggplot2} has a number of data sets, you might read over their sources:
>>>> https://github.com/tidyverse/ggplot2/blob/main/R/data.R <https:// 
>>>> github.com/tidyverse/ggplot2/blob/main/R/data.R>
>>>
>>>
>>> Thanks. I don't see anything there that is different from the example 
>>> in their book, which is extracted from the similar data.R file in 
>>> their tidyr package, which I reviewed earlier.[2]
>>>
>>>
>>> I've deleted virtually everything else in that package and still get 
>>> that same error.
>>>
>>>
>>> Suggestions?
>>> Spencer Graves
>>>
>>>
>>> p.s. I've done several web searches on this issue, found discussions 
>>> on StackOverflow that may have worked a few years ago, but roxygen2 
>>> seems to have changes since then. I posted a similar question to 
>>> StackOverflow, that generated a few comments but nothing that seemed 
>>> to fix this problem. I reported an "issue" to the R Packages book on 
>>> GitHub last week, so far with nothing:
>>>
>>>
>>> https://github.com/hadley/r-pkgs/issues/1106
>>>
>>>
>>> I tried to use roxygen2 with a different project a year ago and gave 
>>> up after being unable to figure out how to use it. >
>>>> On Wed, Sep 24, 2025 at 5:48?AM Spencer Graves 
>>>> <spencer.graves at effectivedefense.org 
>>>> <mailto:spencer.graves at effectivedefense.org>> wrote:
>>>> ??? Hello, All:
>>>> ??? How does one document a dataset with roxygen2?
>>>> ??? I've recently read Wickham and Bryan, R Packages (2e).[1] I've 
>>>> tried to
>>>> ??? do what they say there, and R CMD check is reporting:
>>>> ?????? Variables with usage in Rd file 'MaddisonCountries.Rd' but 
>>>> not in
>>>> ??? code:
>>>> ????????? ?MaddisonCountries?
>>>> ??? This is in "https://github.com/sbgraves237/SS4Maddison <https://
>>>> ??? github.com/sbgraves237/SS4Maddison>".
>>>> ??? Suggestions? Thanks, Spencer Graves
>>>> ??? p.s. Wickham and Bryan Section 7.1.2 says, "Objects in data/ are 
>>>> always
>>>> ??? effectively exported .... . This means that they must be
>>>> ??? documented. ...
>>>> ??? [Y]ou document the name of the dataset and save it in R/. For 
>>>> example,
>>>> ??? the roxygen2 block used to document the who data in tidyr is 
>>>> saved in
>>>> ??? R/data.R ... . There are two roxygen tags that are especially 
>>>> important
>>>> ??? for documenting datasets: @format ... @source
>>>> ??? They give an example of a "who" dataset in tidyr. I've studied that
>>>> ??? example without finding what I'm doing wrong.[2]
>>>> ??? In addition, I need to specify Roygen and "LazyData: true" in
>>>> ??? DESCRIPTION.
>>>> ??? [1] Wickham and Bryan, R Packages online at:
>>>> ??? https://r-pkgs.org/ <https://r-pkgs.org/>
>>>> ??? Chapter 7 deals with Data:
>>>> ??? https://r-pkgs.org/data.html <https://r-pkgs.org/data.html>
>>>> ??? [2] "data.R" in tidyr is available at:
>>>> ??? https://github.com/tidyverse/tidyr/blob/main/R/data.R <https://
>>>> ??? github.com/tidyverse/tidyr/blob/main/R/data.R>
>>>> ??? ______________________________________________
>>>> ??? R-package-devel at r-project.org <mailto:R-package-devel at r- 
>>>> project.org>
>>>> ??? mailing list
>>>> ??? https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>>>> ??? stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Thu Sep 25 16:47:16 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 25 Sep 2025 09:47:16 -0500
Subject: [R-pkg-devel] Recurrent link timeout for common license at R CMD
 check
Message-ID: <26837.22004.841087.884937@paul.eddelbuettel.com>


Most of the README.md files for my package list the license I chose, and most
do so via a 'badge' showing the license and a link to the 'upstream' source
of the license.  So far, so good.

As I happen to prefer GPL licenses, I link to the fsf.org website. And
several recent package uploads of mine were upheld and moved to 'Inspect'
state forcing poor overworked Uwe Ligges to manually look at the log file
to conclude 'yep, spurious, all good here' because of a mere timeout.

Same this morning: even after fiddling with the URL I use, testing several
times from here and noticing that 'oh dear this is apparently simply random'
I got one pass (Dortmund, Windows) and one fail (Vienna, Linux) so back to
'Inspect' and wasting Uwe's time it is.

I would rather skip that step and take advantage of automation at CRAN and
not create extra work. I am not quite sure what the best way forward is. I
can think of saying 'ok, folks in Boston cannot run a server' and link to
the Wikipedia page of the GPL. Seems wrong though as we like to show the
original text. I notice that the R website does the same by providing GPL-2
via a lopy copy: https://www.r-project.org/COPYING   Now, for the package I
was working on this morning I actually needed GPL-3 and not GPL-2 so no luck
there. 

Short of giving up and creating a GitHub Pages hosted copy of the licenses I
may need, is there another good source ... without the server timing out?
https://choosealicense.com/licenses/ is pretty good but doesn't of course
provide GPL-2 so no luck for me there for most of my 'GPL (>= 2)' packages.

Anybody have a better fix or idea? Maybe use the R sources (!!) and rely on
GitHub (most likely via a CDN) serving the licenses in 

  https://github.com/r-devel/r-svn/tree/main/share/licenses 
  https://github.com/r-devel/r-svn/blob/main/share/licenses/license.db

where via the .db (ascii text) file ones sees that all these licenses _are_
in fact served via

  https://www.r-project.org/Licenses/

which even acts as a 'pretty' landing page (which I think I once knew
existed, looked for but could not locate via links from either the top-level
www.r-project.org or cran.r-project.org). 

So should we all link to that?

Or not because it puts yet more load on the poor main r-project.org server
(or should we maybe CDN that or parts of it via cloudflare.com ?)

Cheers, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Sep 25 17:21:25 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 25 Sep 2025 08:21:25 -0700
Subject: [R-pkg-devel] 
 Recurrent link timeout for common license at R CMD check
In-Reply-To: <26837.22004.841087.884937@paul.eddelbuettel.com>
References: <26837.22004.841087.884937@paul.eddelbuettel.com>
Message-ID: <CAPRVBcyFDGh23Vii7g+naQjwA_v0JdD1G7PFPP86EWmkiowU9A@mail.gmail.com>

is the SPDX site any more reliable?

https://spdx.org/licenses/

On Thu, Sep 25, 2025, 7:47?AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Most of the README.md files for my package list the license I chose, and
> most
> do so via a 'badge' showing the license and a link to the 'upstream' source
> of the license.  So far, so good.
>
> As I happen to prefer GPL licenses, I link to the fsf.org website. And
> several recent package uploads of mine were upheld and moved to 'Inspect'
> state forcing poor overworked Uwe Ligges to manually look at the log file
> to conclude 'yep, spurious, all good here' because of a mere timeout.
>
> Same this morning: even after fiddling with the URL I use, testing several
> times from here and noticing that 'oh dear this is apparently simply
> random'
> I got one pass (Dortmund, Windows) and one fail (Vienna, Linux) so back to
> 'Inspect' and wasting Uwe's time it is.
>
> I would rather skip that step and take advantage of automation at CRAN and
> not create extra work. I am not quite sure what the best way forward is. I
> can think of saying 'ok, folks in Boston cannot run a server' and link to
> the Wikipedia page of the GPL. Seems wrong though as we like to show the
> original text. I notice that the R website does the same by providing GPL-2
> via a lopy copy: https://www.r-project.org/COPYING   Now, for the package
> I
> was working on this morning I actually needed GPL-3 and not GPL-2 so no
> luck
> there.
>
> Short of giving up and creating a GitHub Pages hosted copy of the licenses
> I
> may need, is there another good source ... without the server timing out?
> https://choosealicense.com/licenses/ is pretty good but doesn't of course
> provide GPL-2 so no luck for me there for most of my 'GPL (>= 2)' packages.
>
> Anybody have a better fix or idea? Maybe use the R sources (!!) and rely on
> GitHub (most likely via a CDN) serving the licenses in
>
>   https://github.com/r-devel/r-svn/tree/main/share/licenses
>   https://github.com/r-devel/r-svn/blob/main/share/licenses/license.db
>
> where via the .db (ascii text) file ones sees that all these licenses _are_
> in fact served via
>
>   https://www.r-project.org/Licenses/
>
> which even acts as a 'pretty' landing page (which I think I once knew
> existed, looked for but could not locate via links from either the
> top-level
> www.r-project.org or cran.r-project.org).
>
> So should we all link to that?
>
> Or not because it puts yet more load on the poor main r-project.org server
> (or should we maybe CDN that or parts of it via cloudflare.com ?)
>
> Cheers, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Sep 25 17:34:44 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 25 Sep 2025 10:34:44 -0500
Subject: [R-pkg-devel] 
 Recurrent link timeout for common license at R CMD check
In-Reply-To: <CAPRVBcyFDGh23Vii7g+naQjwA_v0JdD1G7PFPP86EWmkiowU9A@mail.gmail.com>
References: <26837.22004.841087.884937@paul.eddelbuettel.com>
 <CAPRVBcyFDGh23Vii7g+naQjwA_v0JdD1G7PFPP86EWmkiowU9A@mail.gmail.com>
Message-ID: <26837.24852.251440.390288@paul.eddelbuettel.com>


On 25 September 2025 at 08:21, Michael Chirico wrote:
| is the SPDX site any more reliable?
| 
| https://spdx.org/licenses/

Great suggestion especially as it even differentiates between GPL "2 exactly"
and "2 or later" (as many of us here do, following R itself).

The look and feel of that site is little more 'ahem' but they make up for
that by being comprehensive. And its seems to be a Linux Foundation
initiative so it may have proper hosting

Dirk
 
| On Thu, Sep 25, 2025, 7:47?AM Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| >
| > Most of the README.md files for my package list the license I chose, and
| > most
| > do so via a 'badge' showing the license and a link to the 'upstream' source
| > of the license.  So far, so good.
| >
| > As I happen to prefer GPL licenses, I link to the fsf.org website. And
| > several recent package uploads of mine were upheld and moved to 'Inspect'
| > state forcing poor overworked Uwe Ligges to manually look at the log file
| > to conclude 'yep, spurious, all good here' because of a mere timeout.
| >
| > Same this morning: even after fiddling with the URL I use, testing several
| > times from here and noticing that 'oh dear this is apparently simply
| > random'
| > I got one pass (Dortmund, Windows) and one fail (Vienna, Linux) so back to
| > 'Inspect' and wasting Uwe's time it is.
| >
| > I would rather skip that step and take advantage of automation at CRAN and
| > not create extra work. I am not quite sure what the best way forward is. I
| > can think of saying 'ok, folks in Boston cannot run a server' and link to
| > the Wikipedia page of the GPL. Seems wrong though as we like to show the
| > original text. I notice that the R website does the same by providing GPL-2
| > via a lopy copy: https://www.r-project.org/COPYING   Now, for the package
| > I
| > was working on this morning I actually needed GPL-3 and not GPL-2 so no
| > luck
| > there.
| >
| > Short of giving up and creating a GitHub Pages hosted copy of the licenses
| > I
| > may need, is there another good source ... without the server timing out?
| > https://choosealicense.com/licenses/ is pretty good but doesn't of course
| > provide GPL-2 so no luck for me there for most of my 'GPL (>= 2)' packages.
| >
| > Anybody have a better fix or idea? Maybe use the R sources (!!) and rely on
| > GitHub (most likely via a CDN) serving the licenses in
| >
| >   https://github.com/r-devel/r-svn/tree/main/share/licenses
| >   https://github.com/r-devel/r-svn/blob/main/share/licenses/license.db
| >
| > where via the .db (ascii text) file ones sees that all these licenses _are_
| > in fact served via
| >
| >   https://www.r-project.org/Licenses/
| >
| > which even acts as a 'pretty' landing page (which I think I once knew
| > existed, looked for but could not locate via links from either the
| > top-level
| > www.r-project.org or cran.r-project.org).
| >
| > So should we all link to that?
| >
| > Or not because it puts yet more load on the poor main r-project.org server
| > (or should we maybe CDN that or parts of it via cloudflare.com ?)
| >
| > Cheers, Dirk
| >
| > --
| > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| >
| > ______________________________________________
| > R-package-devel at r-project.org mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Sep 25 17:57:47 2025
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 25 Sep 2025 08:57:47 -0700
Subject: [R-pkg-devel] 
 Recurrent link timeout for common license at R CMD check
In-Reply-To: <26837.22004.841087.884937@paul.eddelbuettel.com>
References: <26837.22004.841087.884937@paul.eddelbuettel.com>
Message-ID: <617037C8-B1F6-43CE-A196-9D2EB3689DE3@dcn.davis.ca.us>

Isn't this the same old trade-off between static linking and dynamic linking or package vendoring vs. dependency that plagues all software? 

A world in which data/functionality are only a link away is amazingly compressible and featureful, but if you are on a plane or otherwise disconnected then all you have is the link. If you 'remember' (cache) the meaning of that link you (the consumer) can at least pretend you know what it would have delivered (I don't need to actually go to <https://www.r-project.org/COPYING> if I think I already know what it says), but of course so many things like that have implicit semantics (what if the license there is changed to inform the reader that a court case invalidated some of it's terms? or there is a usage counter that must be incremented by the retrieval to comply with the full terms? Should such time-varying information even be allowed to be part of the package release?).

The fact that CRAN cannot follow the link is a reminder that your users may not see the information that you intended to convey at the time of release when they need to look at it... and CRAN has a policy that if your contribution is incomplete that they don't want to accept it. There is a fundamental divide between the point of view that you have the right to put some of your content (license in this case) outside the package and their philosophy that you should be providing at the very least a link that is valid at the time they check it. But even that can never address the plight of the offline user with a local copy of CRAN not being able to evaluate the terms of usage. 

I am not clear how far CRAN should be bending for this issue... relying on Internet caching by some for-profit corporation doesn't really "solve" the fundamental issue that the package is incomplete as it stands... relying on the Internet is absolutely great for efficiency, but it is not really clear to me that doing so can consistently deliver a complete representation of the software and its terms of use. GPL2 allows separation of the deliverable and the source if there is a demonstrably reliable way to retrieve the complete source, but in this case the source is being delivered separately from the license and we seem to be finding that https links may not be passing a minimum bar set by CRAN. I don't happen to think moving that bar toward caching is a good idea... I have been offline before and probably will be again, and am also worried about the content at the end of that link changing the TOU later.

So, IMO this is just another incarnation of dependency hell.

On September 25, 2025 7:47:16 AM PDT, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>Most of the README.md files for my package list the license I chose, and most
>do so via a 'badge' showing the license and a link to the 'upstream' source
>of the license.  So far, so good.
>
>As I happen to prefer GPL licenses, I link to the fsf.org website. And
>several recent package uploads of mine were upheld and moved to 'Inspect'
>state forcing poor overworked Uwe Ligges to manually look at the log file
>to conclude 'yep, spurious, all good here' because of a mere timeout.
>
>Same this morning: even after fiddling with the URL I use, testing several
>times from here and noticing that 'oh dear this is apparently simply random'
>I got one pass (Dortmund, Windows) and one fail (Vienna, Linux) so back to
>'Inspect' and wasting Uwe's time it is.
>
>I would rather skip that step and take advantage of automation at CRAN and
>not create extra work. I am not quite sure what the best way forward is. I
>can think of saying 'ok, folks in Boston cannot run a server' and link to
>the Wikipedia page of the GPL. Seems wrong though as we like to show the
>original text. I notice that the R website does the same by providing GPL-2
>via a lopy copy: https://www.r-project.org/COPYING   Now, for the package I
>was working on this morning I actually needed GPL-3 and not GPL-2 so no luck
>there. 
>
>Short of giving up and creating a GitHub Pages hosted copy of the licenses I
>may need, is there another good source ... without the server timing out?
>https://choosealicense.com/licenses/ is pretty good but doesn't of course
>provide GPL-2 so no luck for me there for most of my 'GPL (>= 2)' packages.
>
>Anybody have a better fix or idea? Maybe use the R sources (!!) and rely on
>GitHub (most likely via a CDN) serving the licenses in 
>
>  https://github.com/r-devel/r-svn/tree/main/share/licenses 
>  https://github.com/r-devel/r-svn/blob/main/share/licenses/license.db
>
>where via the .db (ascii text) file ones sees that all these licenses _are_
>in fact served via
>
>  https://www.r-project.org/Licenses/
>
>which even acts as a 'pretty' landing page (which I think I once knew
>existed, looked for but could not locate via links from either the top-level
>www.r-project.org or cran.r-project.org). 
>
>So should we all link to that?
>
>Or not because it puts yet more load on the poor main r-project.org server
>(or should we maybe CDN that or parts of it via cloudflare.com ?)
>
>Cheers, Dirk
>

-- 
Sent from my phone. Please excuse my brevity.


From ||m@r|@t@mm|nen @end|ng |rom |c|oud@com  Thu Sep 25 06:06:20 2025
From: ||m@r|@t@mm|nen @end|ng |rom |c|oud@com (Ilmari Tamminen)
Date: Thu, 25 Sep 2025 07:06:20 +0300
Subject: [R-pkg-devel] 
 Possible open-source license incompatibilities within R packages
In-Reply-To: <FFD2C6D7-41CA-42AC-8166-BEF2F214B0A3@icloud.com>
References: <9867D356-133A-45D1-AE8E-6CCFDF3D653D@icloud.com>
 <f8282fc9-2363-488b-a0f1-a8e7f2d430bb@gmail.com>
 <CABdHhvEmGkW7F+OxecfQVQH3R1Q_PdQ82O6TtJUUOswpm+AXCA@mail.gmail.com>
 <CA+rDMKKFsbZBs9hRHXhm39abH5ZTcJjyit2_LCiFU0Smc8Evfg@mail.gmail.com>
 <F2B7284A-92AA-411C-B653-D82B2740F7B0@icloud.com>
 <26822.46915.260403.543560@paul.eddelbuettel.com>
 <11A3B648-8E3B-4206-9ABD-76EFB700A3E1@icloud.com>
 <5709F319-376B-46F6-A091-001FFA2A80FF@icloud.com>
 <0ec1578c-1577-4a25-96da-725e44dd52e5@gmail.com>
 <caca8413-9131-44a3-be6e-a97baf589f70@me.com>
 <FFD2C6D7-41CA-42AC-8166-BEF2F214B0A3@icloud.com>
Message-ID: <97B8848C-6274-4525-92E9-E9B2191C0504@icloud.com>

Regarding the utilisation of the GPL2 section 10 for solving the GPL2-only vs. GPL3 conflicts, it is important to remember the GPL3 virality. If only the GPL licenses are being read then it looks like that the conflicts exist, and the two most certain solutions are:

1) Update the upstream licenses
2) Not use the GPL2 packages downstream

Then, however, the FSF's GPL FAQ takes the more liberal stance, allowing for example the command-line communication within software aggregates. It doesn't sound a valid independency, if one code entity cannot call another one and then fails executing its purpose because of it, but this kind of application without the GPL3 virality seem to be widely accepted despite the language in the GPL licenses. Furthermore, to my understanding the GPL licenses do not clearly take into account whether the dependencies are conveyed with the code of interest or not, making the situation even more blurry.

Thus, the situation is still unfortunately unclear. It seems that the language in the GPL licenses is the strictest, but the popular and widely accepted interpretations are more liberal way or another, divided into the two schools (the R community's way I would like to call as the namespace-API interpretation).

Regards
Ilmari Tamminen


From greg @end|ng |rom ||rm@n@y@h@com  Fri Sep 26 07:34:13 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Fri, 26 Sep 2025 15:34:13 +1000
Subject: [R-pkg-devel] 
 Recurrent link timeout for common license at R CMD check
In-Reply-To: <26837.22004.841087.884937@paul.eddelbuettel.com>
References: <26837.22004.841087.884937@paul.eddelbuettel.com>
Message-ID: <CAAS8PA+2CULBe0R8HpqqpFJXwpxqjb-tztJG+9eRmbywy=ZMEg@mail.gmail.com>

Dirk,
I think a local copy of the license is best.  There is some complexity in
linking to third party sites.  Do they guarantee to serve the content to
you and with what service level?  This seems to be the problem that you
have.  Do they undertake to maintain the URL for the length of time that
you need it?  How long will you need it for?  How will they tell you that
they are stopping supporting the URL?  How do you update the links to the
page that are in someone else's installation of your package when the URL
changes? As with the time check on package submissions, it is preferable to
link, if you link, to something that is under the control of the publishing
organisation itself, not a third party, unless there are some undertakings
in place, so I'd suggest the R project site if you absolutely must have a
remote copy.  Picking a site that you have no agreement with, either
implicitly or explicitly, does not cover those issues and so does not
minimise the risk of that third party dependency to this business process
(in this case the package check).

SPDX and the FSF Reuse tool do not appear to use the spdx website for
remotely accessed copies of licenses.  The license text referenced by those
tools live in Github and access is described in
https://github.com/spdx/license-list-data/blob/main/accessingLicenses.md
and in https://github.com/spdx/license-list-data/blob/main/README.md The
SPDX software BOM metadata standard appears to include the text of the
licenses that it rerences instead of using external references.  Similarly
the FSF Reuse tool copies licenses locally.

Jeff Newmiller's point about caching is a good one.  It is preferable to
deliver, as part of the package, the text of the license that you intend
people to read, not something under someone else's control, and this is
what the SPDX and FSF tools do.  By relying on a link you own whatever it
is that the third party serves, whether thats a license text, a connection
failure, a redirect, a truncated or hacked copy, or an ad.

Greg


On Fri, 26 Sept 2025 at 00:47, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Most of the README.md files for my package list the license I chose, and
> most
> do so via a 'badge' showing the license and a link to the 'upstream' source
> of the license.  So far, so good.
>
> As I happen to prefer GPL licenses, I link to the fsf.org website. And
> several recent package uploads of mine were upheld and moved to 'Inspect'
> state forcing poor overworked Uwe Ligges to manually look at the log file
> to conclude 'yep, spurious, all good here' because of a mere timeout.
>
> Same this morning: even after fiddling with the URL I use, testing several
> times from here and noticing that 'oh dear this is apparently simply
> random'
> I got one pass (Dortmund, Windows) and one fail (Vienna, Linux) so back to
> 'Inspect' and wasting Uwe's time it is.
>
> I would rather skip that step and take advantage of automation at CRAN and
> not create extra work. I am not quite sure what the best way forward is. I
> can think of saying 'ok, folks in Boston cannot run a server' and link to
> the Wikipedia page of the GPL. Seems wrong though as we like to show the
> original text. I notice that the R website does the same by providing GPL-2
> via a lopy copy: https://www.r-project.org/COPYING   Now, for the package
> I
> was working on this morning I actually needed GPL-3 and not GPL-2 so no
> luck
> there.
>
> Short of giving up and creating a GitHub Pages hosted copy of the licenses
> I
> may need, is there another good source ... without the server timing out?
> https://choosealicense.com/licenses/ is pretty good but doesn't of course
> provide GPL-2 so no luck for me there for most of my 'GPL (>= 2)' packages.
>
> Anybody have a better fix or idea? Maybe use the R sources (!!) and rely on
> GitHub (most likely via a CDN) serving the licenses in
>
>   https://github.com/r-devel/r-svn/tree/main/share/licenses
>   https://github.com/r-devel/r-svn/blob/main/share/licenses/license.db
>
> where via the .db (ascii text) file ones sees that all these licenses _are_
> in fact served via
>
>   https://www.r-project.org/Licenses/
>
> which even acts as a 'pretty' landing page (which I think I once knew
> existed, looked for but could not locate via links from either the
> top-level
> www.r-project.org or cran.r-project.org).
>
> So should we all link to that?
>
> Or not because it puts yet more load on the poor main r-project.org server
> (or should we maybe CDN that or parts of it via cloudflare.com ?)
>
> Cheers, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Sep 26 14:16:07 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 26 Sep 2025 07:16:07 -0500
Subject: [R-pkg-devel] 
 Recurrent link timeout for common license at R CMD check
In-Reply-To: <CAAS8PA+2CULBe0R8HpqqpFJXwpxqjb-tztJG+9eRmbywy=ZMEg@mail.gmail.com>
References: <26837.22004.841087.884937@paul.eddelbuettel.com>
 <CAAS8PA+2CULBe0R8HpqqpFJXwpxqjb-tztJG+9eRmbywy=ZMEg@mail.gmail.com>
Message-ID: <26838.33799.473934.159498@paul.eddelbuettel.com>


On 26 September 2025 at 15:34, Greg Hunt wrote:
| It is preferable to deliver, as part of the package, the text of the
| license that you intend people to read, not something under someone else's
| control, and this is what the SPDX and FSF tools do.

You answer something that was never in any way part of my question. Per
Writing R Extensions, Section 1.1.2:

     Whereas you should feel free to include a license file in your
  _source_ distribution, please do not arrange to _install_ yet another
  copy of the GNU ?COPYING? or ?COPYING.LIB? files but refer to the copies
  on <https://www.R-project.org/Licenses/> and included in the R
  distribution (in directory ?share/licenses?).

My question was *explicitly* about what URL *link* would be recommended to
avoid timing out under R CMD check (also see Subject: of this thread).

I think I may just link to the R-project site.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


