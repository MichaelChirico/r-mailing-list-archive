From n@r@@ @end|ng |rom @t@n|ord@edu  Tue Jul  1 20:51:00 2025
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Tue, 1 Jul 2025 11:51:00 -0700
Subject: [R-pkg-devel] Proofpoint and CRAN emails
Message-ID: <6462c026-81c8-43be-a66c-b8e110914b35@stanford.edu>

It appears that some recent updates to Proofpoint, which many 
organizations including Stanford use for scanning emails, has flagged 
emails from CRAN as spam. A recent press release from Proofpoint 
mentioning use of some AI agent doesn't exactly inspire confidence!

Our IT folks have opened a ticket with them and here's hoping that any 
fix propagates up the chain.

(We struggled with this for over a week while submitting package updates 
before stumbling on this silent menace.)

Just FYI.

-Naras


From @bew|ck @end|ng |rom c|em@on@edu  Thu Jul  3 23:57:19 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 21:57:19 +0000
Subject: [R-pkg-devel] Two errors
Message-ID: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:13:34 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:13:34 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
> 
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> 
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
> 
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use 
whatever function ape exported.

> 
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction 
between variables and functions.

> 
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
> 
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
> 
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of 
them (if both are exported).

Duncan Murdoch

> 
> Thanks!
> Sharon
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Jul  4 00:13:40 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 3 Jul 2025 15:13:40 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>

1. all functions in R are variables. You can "trick" code tools by writing
seq_root2tip=NULL in the same scope but consider (a) C routines are
typically part of a package's private interface (b) it might be preferable
to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-")
is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C

On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:32:41 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:32:41 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
Message-ID: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?



From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?

If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
whatever function ape exported.

>
> but seq_root2tip is a function, not a global variable.

In R, most functions are objects, there isn't really a distinction
between variables and functions.

>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?

"phy_tree" and "phy_tree<-" are two different functions.  Import both of
them (if both are exported).

Duncan Murdoch

>
> Thanks!
> Sharon
>
>       [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:33:35 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:33:35 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
Message-ID: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:46:00 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:46:00 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>

I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:

> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @bew|ck @end|ng |rom c|em@on@edu  Fri Jul  4 00:52:55 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Thu, 3 Jul 2025 22:52:55 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
Message-ID: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>

Ah, ok great, thanks.

So I added:
toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = 'ape')

But check() is still throwing up a note:

basic_branch: no visible binding for global variable ?seq_root2tip?
  shade_branch: no visible binding for global variable ?seq_root2tip?
  Undefined global functions or variables:
    seq_root2tip

Any thoughts?
Sharon

From: Josiah Parry <josiah.parry at gmail.com>
Date: Thursday, July 3, 2025 at 4:46?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
I believe they mean as an argument to .Call
https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html

On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
Thanks so much for the tips!

I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?

So sorry for not understanding!

Thanks!
Sharon

From: Michael Chirico <michaelchirico4 at gmail.com<mailto:michaelchirico4 at gmail.com>>
Date: Thursday, July 3, 2025 at 4:13?PM
To: Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>>
Cc: R Package Development <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Subject: Re: [R-pkg-devel] Two errors

This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"

2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)

(c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)

Mike C
On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu><mailto:sbewick at clemson.edu<mailto:sbewick at clemson.edu>>> wrote:
1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:

toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)

How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:

shade_branch: no visible binding for global variable ?seq_root2tip?

but seq_root2tip is a function, not a global variable.

2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?

I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)

I don?t know what the problem is?

Thanks!
Sharon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org><mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 00:56:58 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Jul 2025 18:56:58 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <47da4c2b-0411-4667-88cc-b8aba52fe17c@gmail.com>

On 2025-07-03 6:32 p.m., Sharon Bewick wrote:
> The problem is that the function that ape exports is way too slow. Using 
> C directly really sped up my program, which is a bit slow even at that?

You need to be collaborating with the ape maintainer to fix that package 
so it works for your problem.  Most package maintainers are happy to 
accept suggested improvements.

Duncan Murdoch

> 
> *From: *Duncan Murdoch <murdoch.duncan at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:13?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org 
> <r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
> 
> This Message Is From An External Sender: Use caution when opening links 
> or attachments if you do not recognize the sender.
> 
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
> 
> If ape doesn't export seq_root2tip, then you shouldn't use it.? Use
> whatever function ape exported.
> 
>>
>> but seq_root2tip is a function, not a global variable.
> 
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
> 
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
> 
> "phy_tree" and "phy_tree<-" are two different functions.? Import both of
> them (if both are exported).
> 
> Duncan Murdoch
> 
>>
>> Thanks!
>> Sharon
>>
>>?????? [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From jo@|@h@p@rry @end|ng |rom gm@||@com  Fri Jul  4 00:57:15 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Thu, 3 Jul 2025 15:57:15 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAL3ufUJrpLQLBZHFwUhDgcT6kfpKpqCuZb88YMx7k2WxxceyHQ@mail.gmail.com>
 <BN6PR06MB3074AE6970788C538AE8387FB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAL3ufULHO4pjyFdvme9d9kNQTAcEr9enkLwbJz=-6ZVVb70yPg@mail.gmail.com>

I think you can put it in quotes so then it won?t be an issue. Other wise
you can use the global variables function:
https://www.r-bloggers.com/2019/08/no-visible-binding-for-global-variable/amp/

On Thu, Jul 3, 2025 at 15:52 Sharon Bewick <sbewick at clemson.edu> wrote:

> Ah, ok great, thanks.
>
>
>
> So I added:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode,
> PACKAGE = 'ape')
>
>
>
> But check() is still throwing up a note:
>
>
>
> basic_branch: no visible binding for global variable ?seq_root2tip?
>
>   shade_branch: no visible binding for global variable ?seq_root2tip?
>
>   Undefined global functions or variables:
>
>     seq_root2tip
>
>
>
> Any thoughts?
>
> Sharon
>
>
>
> *From: *Josiah Parry <josiah.parry at gmail.com>
> *Date: *Thursday, July 3, 2025 at 4:46?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> *This Message Is From An External Sender:* Use caution when opening links
> or attachments if you do not recognize the sender.
>
> I believe they mean as an argument to .Call
>
> https://stat.ethz.ch/R-manual/R-devel/library/base/html/CallExternal.html
>
>
>
> On Thu, Jul 3, 2025 at 15:41 Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should
> the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the
> Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing
> seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:02:06 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:02:06 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <1928ede0-2bba-365-e570-ecc88bd8676b@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From |kw@|mmo @end|ng |rom gm@||@com  Fri Jul  4 01:11:12 2025
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Thu, 3 Jul 2025 19:11:12 -0400
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul  4 01:12:09 2025
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 3 Jul 2025 18:12:09 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re:  Two errors
In-Reply-To: <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <9a6219f4-f2f0-4ed8-a80d-be2232e71edc@gmail.com>
 <BN6PR06MB30743C83F0BE89EADE526E8AB743A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <b58aab2a-88e8-3bf0-d0c7-d5e944a4b058@uiowa.edu>

On Thu, 3 Jul 2025, Sharon Bewick wrote:

> [You don't often get email from sbewick at clemson.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> The problem is that the function that ape exports is way too slow. Using C directly really sped up my program, which is a bit slow even at that?

[Just replying to the list since reply-all seems to be bouncing for me]

The ideal approach would be to try to understand why the exported
function is slow and see if that can be improved. Profiling might help.

ape does actually export the variable seq_root2tip for use with
.Call() (see the info in ape::seq_root2tip).  So you can import it and
use is as seq_root2tip or use it as ape::seq_root2tip.

Best,

luke

>
>
>
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>, r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
>
> On 2025-07-03 5:57 p.m., Sharon Bewick wrote:
>> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>>
>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>
>> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>>
>> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> If ape doesn't export seq_root2tip, then you shouldn't use it.  Use
> whatever function ape exported.
>
>>
>> but seq_root2tip is a function, not a global variable.
>
> In R, most functions are objects, there isn't really a distinction
> between variables and functions.
>
>>
>> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>>
>> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>>
>> I don?t know what the problem is?
>
> "phy_tree" and "phy_tree<-" are two different functions.  Import both of
> them (if both are exported).
>
> Duncan Murdoch
>
>>
>> Thanks!
>> Sharon
>>
>>       [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/

From ro||turner @end|ng |rom po@teo@net  Fri Jul  4 05:21:39 2025
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Fri,  4 Jul 2025 03:21:39 +0000
Subject: [R-pkg-devel] Changing the title of a package.
In-Reply-To: <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
References: <20250606101234.4f57f667@new-hp>
 <e0e3f5b4-f541-4c44-984f-1bf2db422254@gmail.com>
Message-ID: <20250704152139.3e8d8a87@new-hp>


On Thu, 5 Jun 2025 19:49:48 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> I'm pretty sure CRAN doesn't care what is in the title, as long as
> 
>   - The new one follows their rules (re capitalization etc.)
>   - The change doesn't follow the last package change too rapidly.
> 
> It would be best if you change the title at the same time as you are 
> releasing other changes to the package.  If the title change is the
> only change in a resubmission, that wastes their time.

For the record, I changed the "Title" field in the DESCRIPTION file (and
made some other adjustments) and resubmitted the package.  The package
got uploaded to CRAN with startling rapidity!

Thanks Duncan.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From @bew|ck @end|ng |rom c|em@on@edu  Sat Jul  5 01:03:51 2025
From: @bew|ck @end|ng |rom c|em@on@edu (Sharon Bewick)
Date: Fri, 4 Jul 2025 23:03:51 +0000
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
Message-ID: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>

So I think the only solution that CRAN will accept is linking against headers. I can download an ape.h header file, but for the life of me, I?m having trouble figuring out how to link it in my R package. I?ve read what I can find online, but haven?t been successful. Right now, I have the ape.h file in an src folder. I also have
LinkingTo: Rcpp, ape
In my DESCRIPTION file

But I?m getting all sorts of errors. Does anyone have an example of how I can do this that I might be able to work from?

Thanks in advance!!!!
Sharon


From: Iris Simmons <ikwsimmo at gmail.com>
Date: Thursday, July 3, 2025 at 5:11?PM
To: Sharon Bewick <sbewick at clemson.edu>
Cc: Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two errors
This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.

I believe the suggestion was that you should alternatively write:

.Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE = "ape")

however, that generates the following note that CRAN is very unlikely to accept:

* checking foreign function calls ... NOTE
Foreign function call to a different package:
  .Call("seq_root2tip", ..., PACKAGE = "ape")
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

The other possibility is adding:

importFrom(ape, seq_root2tip)

to your NAMESPACE and not modifying your code, but that generates a
different note:

* checking foreign function calls ... NOTE
Registration problem:
  symbol 'seq_root2tip' not in namespace:
   .Call(seq_root2tip, ...)
See chapter 'System and foreign language interfaces' in the 'Writing R
Extensions' manual.

Your best bet is to ask the maintainers of package:ape to add and
export an R function like this:

idk <- function (...)
.Call(seq_root2tip, ...)

There are also ways to do it in C using R_RegisterCCallable and
R_GetCCallable but that might be too complicated for something like
this.

On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
> Thanks so much for the tips!
>
> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In the Description file? Somewhere in the code?
>
> So sorry for not understanding!
>
> Thanks!
> Sharon
>
> From: Michael Chirico <michaelchirico4 at gmail.com>
> Date: Thursday, July 3, 2025 at 4:13?PM
> To: Sharon Bewick <sbewick at clemson.edu>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or attachments if you do not recognize the sender.
> 1. all functions in R are variables. You can "trick" code tools by writing seq_root2tip=NULL in the same scope but consider (a) C routines are typically part of a package's private interface (b) it might be preferable to use the string "seq_root2tip" with PACKAGE="ape"
>
> 2. phytree is not the same as phytree<- : importFrom(phyloseq, "phytree<-") is what you want assuming it's exported)
>
> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>
> Mike C
> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:sbewick at clemson.edu>> wrote:
> 1. I?m trying to upload my R package. However, I use the ape function seq_root2tip but for the sake of speed am calling it using .Call:
>
> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>
> How do I get R to recognize the seq_root2tip function from ape in this C call? It is throwing up a NOTE that is getting my package rejected:
>
> shade_branch: no visible binding for global variable ?seq_root2tip?
>
> but seq_root2tip is a function, not a global variable.
>
> 2. I?m also getting a NOTE about: no visible global function definition for ?phy_tree<-?
>
> I have declared phy_tree in the NAMESPACE file: importFrom(phyloseq,phy_tree)
>
> I don?t know what the problem is?
>
> Thanks!
> Sharon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Sat Jul  5 01:19:29 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 4 Jul 2025 16:19:29 -0700
Subject: [R-pkg-devel] Two errors
In-Reply-To: <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
Message-ID: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>

Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
registered entry point for that routine, so you should just be able to do:

importFrom(ape,seq_root2tip)

and be on your way.

[1] ?ape::seq_root2tip notes that "other packages" use it, but none of
those are on CRAN, could be a Bioconductor thing:
https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code

Mike C

On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:

> So I think the only solution that CRAN will accept is linking against
> headers. I can download an ape.h header file, but for the life of me, I?m
> having trouble figuring out how to link it in my R package. I?ve read what
> I can find online, but haven?t been successful. Right now, I have the ape.h
> file in an src folder. I also have
>
> LinkingTo: Rcpp, ape
>
> In my DESCRIPTION file
>
>
>
> But I?m getting all sorts of errors. Does anyone have an example of how I
> can do this that I might be able to work from?
>
>
>
> Thanks in advance!!!!
>
> Sharon
>
>
>
>
>
> *From: *Iris Simmons <ikwsimmo at gmail.com>
> *Date: *Thursday, July 3, 2025 at 5:11?PM
> *To: *Sharon Bewick <sbewick at clemson.edu>
> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
> r-package-devel at r-project.org>
> *Subject: *Re: [R-pkg-devel] Two errors
>
> This Message Is From An External Sender: Use caution when opening links or
> attachments if you do not recognize the sender.
>
> I believe the suggestion was that you should alternatively write:
>
> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
> "ape")
>
> however, that generates the following note that CRAN is very unlikely to
> accept:
>
> * checking foreign function calls ... NOTE
> Foreign function call to a different package:
>   .Call("seq_root2tip", ..., PACKAGE = "ape")
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> The other possibility is adding:
>
> importFrom(ape, seq_root2tip)
>
> to your NAMESPACE and not modifying your code, but that generates a
> different note:
>
> * checking foreign function calls ... NOTE
> Registration problem:
>   symbol 'seq_root2tip' not in namespace:
>    .Call(seq_root2tip, ...)
> See chapter 'System and foreign language interfaces' in the 'Writing R
> Extensions' manual.
>
> Your best bet is to ask the maintainers of package:ape to add and
> export an R function like this:
>
> idk <- function (...)
> .Call(seq_root2tip, ...)
>
> There are also ways to do it in C using R_RegisterCCallable and
> R_GetCCallable but that might be too complicated for something like
> this.
>
> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
> >
> > Thanks so much for the tips!
> >
> > I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
> the Description file? Somewhere in the code?
> >
> > So sorry for not understanding!
> >
> > Thanks!
> > Sharon
> >
> > From: Michael Chirico <michaelchirico4 at gmail.com>
> > Date: Thursday, July 3, 2025 at 4:13?PM
> > To: Sharon Bewick <sbewick at clemson.edu>
> > Cc: R Package Development <r-package-devel at r-project.org>
> > Subject: Re: [R-pkg-devel] Two errors
> >
> > This Message Is From An External Sender: Use caution when opening links
> or attachments if you do not recognize the sender.
> > 1. all functions in R are variables. You can "trick" code tools by
> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
> typically part of a package's private interface (b) it might be preferable
> to use the string "seq_root2tip" with PACKAGE="ape"
> >
> > 2. phytree is not the same as phytree<- : importFrom(phyloseq,
> "phytree<-") is what you want assuming it's exported)
> >
> > (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
> >
> > Mike C
> > On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
> sbewick at clemson.edu>> wrote:
> > 1. I?m trying to upload my R package. However, I use the ape function
> seq_root2tip but for the sake of speed am calling it using .Call:
> >
> > toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
> >
> > How do I get R to recognize the seq_root2tip function from ape in this C
> call? It is throwing up a NOTE that is getting my package rejected:
> >
> > shade_branch: no visible binding for global variable ?seq_root2tip?
> >
> > but seq_root2tip is a function, not a global variable.
> >
> > 2. I?m also getting a NOTE about: no visible global function definition
> for ?phy_tree<-?
> >
> > I have declared phy_tree in the NAMESPACE file:
> importFrom(phyloseq,phy_tree)
> >
> > I don?t know what the problem is?
> >
> > Thanks!
> > Sharon
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> >
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

	[[alternative HTML version deleted]]


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:12:56 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:12:56 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
Message-ID: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>

Dear All,

I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
to address one feedback message or even what is causing it. It might
be related to Kevin Ushey's R scripts that I am using to configure the
package during installation [2]. The message that I received is below.

"""
Please ensure that your functions do not write by default or in your
examples/vignettes/tests in the user's home filespace (including the
package directory and getwd()). This is not allowed by CRAN policies.
Please omit any default path in writing functions. In your
examples/vignettes/tests you can write to tempdir().
-> tools/config.Rtools/config/configure.R
"""

`tools/config.Rtools/config/configure.R` is not a file in my package.
So I assume that this report is saying that it is being created during
installation, but I can't reproduce it. My package does read and
execute `tools/config/configure.R` during installation, so right now
my guess is that my configure script is somehow creating
`tools/config.Rtools/config/configure.R` when I try to read
`tools/config/configure.R`. Any help figuring this out would be
appreciated.

[1] https://github.com/reedacartwright/ironseed
[2] https://github.com/kevinushey/configure

Thanks,
Reed

--
Reed A. Cartwright, PhD
Associate Professor of Life Sciences
TEACh Representative - Evolution and Computational Courses
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-6401 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:32:48 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:32:48 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>

I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.

HTH,

-Roy


> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear All,
> 
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
> 
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
> 
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
> 
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
> 
> Thanks,
> Reed
> 
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul  5 23:38:34 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Sat, 5 Jul 2025 14:38:34 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
Message-ID: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>

Dear Roy,

I think you might have looked at the wrong file. My .Rbuildignore is
here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.

Thanks for looking,

Cheers.

On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
>
> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>
> HTH,
>
> -Roy
>
>
> > On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Jul  5 23:50:55 2025
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Jul 2025 14:50:55 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <9D19DD7D-65E2-442E-A907-2197568A0F51@noaa.gov>
 <CALOkxuxX29xBdJY3F0P+4BViyPOgHyKmbiVp3fHByY8yUq+WXg@mail.gmail.com>
Message-ID: <9D6C66F0-38A9-4333-BE6A-8941DB86F162@noaa.gov>

Thanks.  I am old and slow and often overlook things,  but I don?t see the tools directory in that file that you are pointing to,  which would be consistent with the error message you are getting because that is where the file being name reside.  So you can either add that to the .Rbuildignore. or remove it if not needed.

HTH,

-Roy


> On Jul 5, 2025, at 2:38?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
> 
> Dear Roy,
> 
> I think you might have looked at the wrong file. My .Rbuildignore is
> here https://github.com/reedacartwright/ironseed/blob/main/.Rbuildignore.
> 
> Thanks for looking,
> 
> Cheers.
> 
> On Sat, Jul 5, 2025 at 2:33?PM Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> 
>> I am not expert in this,  but I do notice that your .Rbuildignore is actually a link to a file of Kevin Ushey,  and I don?t know that CRAN will deal with that correctly.  Try instead to create a new .Rbuildignore with the same contents but is not  pointer but a file.
>> 
>> HTH,
>> 
>> -Roy
>> 
>> 
>>> On Jul 5, 2025, at 2:12?PM, Reed A. Cartwright <racartwright at gmail.com> wrote:
>>> 
>>> Dear All,
>>> 
>>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>>> to address one feedback message or even what is causing it. It might
>>> be related to Kevin Ushey's R scripts that I am using to configure the
>>> package during installation [2]. The message that I received is below.
>>> 
>>> """
>>> Please ensure that your functions do not write by default or in your
>>> examples/vignettes/tests in the user's home filespace (including the
>>> package directory and getwd()). This is not allowed by CRAN policies.
>>> Please omit any default path in writing functions. In your
>>> examples/vignettes/tests you can write to tempdir().
>>> -> tools/config.Rtools/config/configure.R
>>> """
>>> 
>>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>>> So I assume that this report is saying that it is being created during
>>> installation, but I can't reproduce it. My package does read and
>>> execute `tools/config/configure.R` during installation, so right now
>>> my guess is that my configure script is somehow creating
>>> `tools/config.Rtools/config/configure.R` when I try to read
>>> `tools/config/configure.R`. Any help figuring this out would be
>>> appreciated.
>>> 
>>> [1] https://github.com/reedacartwright/ironseed
>>> [2] https://github.com/kevinushey/configure
>>> 
>>> Thanks,
>>> Reed
>>> 
>>> --
>>> Reed A. Cartwright, PhD
>>> Associate Professor of Life Sciences
>>> TEACh Representative - Evolution and Computational Courses
>>> School of Life Sciences and The Biodesign Institute
>>> Arizona State University
>>> ==================
>>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>>> 85287-6401 USA
>>> Office: Biodesign B-220C, 1-480-965-9949
>>> Website: http://cartwrig.ht/
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 


From j|r|@c@mor@vec @end|ng |rom gm@||@com  Sun Jul  6 03:07:56 2025
From: j|r|@c@mor@vec @end|ng |rom gm@||@com (=?UTF-8?B?SmnFmcOtIE1vcmF2ZWM=?=)
Date: Sun, 6 Jul 2025 13:07:56 +1200
Subject: [R-pkg-devel] Two errors
In-Reply-To: <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
References: <BN6PR06MB307469D88D9ACEFBBE193207B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcx__wV15iRgo-Hb3nATV=tL3z81fxhCReVQ_r0H7XNU8w@mail.gmail.com>
 <BN6PR06MB3074348E35457FFF0DDA2236B743A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CADNULg9yWwOoOj-2DqQjB1KmZ2YjrPV8_TNmRi6PWey64hHmVA@mail.gmail.com>
 <BN6PR06MB3074EF9B878B6F7EEDCCC244B742A@BN6PR06MB3074.namprd06.prod.outlook.com>
 <CAPRVBcwijq1v0T6zfNuGTrSFba72Mj9P8MUBD6SGpjpp_kRn0w@mail.gmail.com>
Message-ID: <4630b3d6-1e7a-4099-8f14-fbee6f96e415@gmail.com>

I would like to add that copy pasting is also a valid way to include 
dependencies.

Just make sure to get contributions right.

-- Jirka

On 5/07/25 11:19, Michael Chirico wrote:
> Sharon, Luke noted that (somewhat strangely [1]) {ape} is exporting the
> registered entry point for that routine, so you should just be able to do:
>
> importFrom(ape,seq_root2tip)
>
> and be on your way.
>
> [1] ?ape::seq_root2tip notes that "other packages" use it, but none of
> those are on CRAN, could be a Bioconductor thing:
> https://github.com/search?q=org%3Acran+%2Fseq_root2tip%5Cb%2F+lang%3AR+-repo%3Acran%2Fape&type=code
>
> Mike C
>
> On Fri, Jul 4, 2025 at 4:03?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>
>> So I think the only solution that CRAN will accept is linking against
>> headers. I can download an ape.h header file, but for the life of me, I?m
>> having trouble figuring out how to link it in my R package. I?ve read what
>> I can find online, but haven?t been successful. Right now, I have the ape.h
>> file in an src folder. I also have
>>
>> LinkingTo: Rcpp, ape
>>
>> In my DESCRIPTION file
>>
>>
>>
>> But I?m getting all sorts of errors. Does anyone have an example of how I
>> can do this that I might be able to work from?
>>
>>
>>
>> Thanks in advance!!!!
>>
>> Sharon
>>
>>
>>
>>
>>
>> *From: *Iris Simmons <ikwsimmo at gmail.com>
>> *Date: *Thursday, July 3, 2025 at 5:11?PM
>> *To: *Sharon Bewick <sbewick at clemson.edu>
>> *Cc: *Michael Chirico <michaelchirico4 at gmail.com>, R Package Development <
>> r-package-devel at r-project.org>
>> *Subject: *Re: [R-pkg-devel] Two errors
>>
>> This Message Is From An External Sender: Use caution when opening links or
>> attachments if you do not recognize the sender.
>>
>> I believe the suggestion was that you should alternatively write:
>>
>> .Call("seq_root2tip", nt$edge, length(nt$tip.label), nt$Nnode, PACKAGE =
>> "ape")
>>
>> however, that generates the following note that CRAN is very unlikely to
>> accept:
>>
>> * checking foreign function calls ... NOTE
>> Foreign function call to a different package:
>>    .Call("seq_root2tip", ..., PACKAGE = "ape")
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> The other possibility is adding:
>>
>> importFrom(ape, seq_root2tip)
>>
>> to your NAMESPACE and not modifying your code, but that generates a
>> different note:
>>
>> * checking foreign function calls ... NOTE
>> Registration problem:
>>    symbol 'seq_root2tip' not in namespace:
>>     .Call(seq_root2tip, ...)
>> See chapter 'System and foreign language interfaces' in the 'Writing R
>> Extensions' manual.
>>
>> Your best bet is to ask the maintainers of package:ape to add and
>> export an R function like this:
>>
>> idk <- function (...)
>> .Call(seq_root2tip, ...)
>>
>> There are also ways to do it in C using R_RegisterCCallable and
>> R_GetCCallable but that might be too complicated for something like
>> this.
>>
>> On Thu, Jul 3, 2025 at 6:33?PM Sharon Bewick <sbewick at clemson.edu> wrote:
>>> Thanks so much for the tips!
>>>
>>> I think I?ve fixed #2. But I?m not sure what you mean by #1. Where
>> should the "seq_root2tip" with PACKAGE="ape" go? In the NAMESPACE file? In
>> the Description file? Somewhere in the code?
>>> So sorry for not understanding!
>>>
>>> Thanks!
>>> Sharon
>>>
>>> From: Michael Chirico <michaelchirico4 at gmail.com>
>>> Date: Thursday, July 3, 2025 at 4:13?PM
>>> To: Sharon Bewick <sbewick at clemson.edu>
>>> Cc: R Package Development <r-package-devel at r-project.org>
>>> Subject: Re: [R-pkg-devel] Two errors
>>>
>>> This Message Is From An External Sender: Use caution when opening links
>> or attachments if you do not recognize the sender.
>>> 1. all functions in R are variables. You can "trick" code tools by
>> writing seq_root2tip=NULL in the same scope but consider (a) C routines are
>> typically part of a package's private interface (b) it might be preferable
>> to use the string "seq_root2tip" with PACKAGE="ape"
>>> 2. phytree is not the same as phytree<- : importFrom(phyloseq,
>> "phytree<-") is what you want assuming it's exported)
>>> (c.f. `x = phyteee(...)` vs. `phytree(x) <- ...`)
>>>
>>> Mike C
>>> On Thu, Jul 3, 2025, 2:57?PM Sharon Bewick <sbewick at clemson.edu<mailto:
>> sbewick at clemson.edu>> wrote:
>>> 1. I?m trying to upload my R package. However, I use the ape function
>> seq_root2tip but for the sake of speed am calling it using .Call:
>>> toroot<-.Call(seq_root2tip, nt$edge, length(nt$tip.label), nt$Nnode)
>>>
>>> How do I get R to recognize the seq_root2tip function from ape in this C
>> call? It is throwing up a NOTE that is getting my package rejected:
>>> shade_branch: no visible binding for global variable ?seq_root2tip?
>>>
>>> but seq_root2tip is a function, not a global variable.
>>>
>>> 2. I?m also getting a NOTE about: no visible global function definition
>> for ?phy_tree<-?
>>> I have declared phy_tree in the NAMESPACE file:
>> importFrom(phyloseq,phy_tree)
>>> I don?t know what the problem is?
>>>
>>> Thanks!
>>> Sharon
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
>> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>>
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Sat Jul  5 22:49:09 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Sat, 05 Jul 2025 20:49:09 +0000
Subject: [R-pkg-devel] Inconsistent application of the rule about modifying
 the user filespace?
Message-ID: <5a8e849f-4e21-4306-ac65-437ee0c0ed5a@protonmail.com>

Dear all,

tl;dr: several CRAN packages can modify the user filespace without 
explicitly
requiring the user to specify the path, but I was required to change the
default behavior of some functions in my package because they would 
modify the
user's filespace. This seems inconsistent to me (and therefore it's a bit
frustrating), is there a way to clarify it in the policies?

Longer version:

A couple of weeks ago, I submitted a package, flir [0], that provides
several functions that write to the user directory (it is now on CRAN). For
instance, `setup_flir()` creates a folder "flir" in the working 
directory, and
`fix()` parses all R files in the working directory and potentially 
modifies
them following a list of predefined rules. The behavior of those 
functions was
clearly documented.

Those functions had an argument `path = "."` by default. During the 
submission
process, I got a comment indicating that I had to remove this
default value and force users to specify a value for `path` instead (or
interactively handle it if it is missing), which is a bit annoying simply
because it forces extra typing. This comment was referring to the following
paragraph from CRAN policies:

"Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up). Installing
into the system?s R installation (e.g., scripts to its bin directory) is
not allowed.
Limited exceptions may be allowed in interactive sessions if the package
obtains confirmation from the user."

I understand the willingness to minimize automatic changes to the user's
file system, but it seems to me that this rule is not consistently 
applied. There
are plenty of functions from external packages that directly write to 
the user's
file system without specifying a path and without obtaining confirmation 
from
the user, such as `altdoc::setup_docs(), `pkgdown::build_site()`,
`Rcpp::Rcpp.package.skeleton()`, `roxygen2::roxygenize()`, most of `usethis`
functions, etc.

Therefore, it's quite unclear to me why removing the default `path = 
"."` was
required in this case. Does this depend on who reviews the submissions? Is
there a way to clarify it in the policies?

Best,
Etienne

[0]: https://cran.r-project.org/web/packages/flir/


From |kry|ov @end|ng |rom d|@root@org  Sun Jul  6 23:36:01 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 7 Jul 2025 00:36:01 +0300
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <20250707003601.46b3ca9a@Tarkus>

? Sat, 5 Jul 2025 14:12:56 -0700
"Reed A. Cartwright" <racartwright at gmail.com> ?????:

> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it.

Proving a negative is hard.

My guess is that the reviewer may have used a static analysis tool to
look for calls to cat()/writeLines() or functions with a default
argument of ".". The "tools/config.Rtools/config/configure.R" may be a
typo or a forgotten separator somewhere.

If you made any changes to the package for the resubmission, put the
explanation about the R scripts under tools/ being required by the
configure script to operate on the current directory in the submission
comment.

If you want to be extra sure, you can try experimenting with a
container or a virtual machine:

find / /home /tmp -xdev -ls > .../ironseed.before
./configure
find / /home /tmp -xdev -ls > .../ironseed.after
diff -u .../ironseed.before .../ironseed.after

(Adjust the 'find' command so that it can visit all the relevant
filesystems, not /proc or /sys on Linux.)

I didn't notice anything amiss in my own limited testing.

-- 
Best regards,
Ivan


From rhe|p @end|ng |rom eoo@@dd@@n|  Mon Jul  7 17:23:48 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Mon, 7 Jul 2025 17:23:48 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
Message-ID: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>


I have a package, which I am thinking to submit to CRAN. It can output 
graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/). 
However, I am not sure if and how I should indicate the dependency on 
kitty. The package builds and installs fine without kitty. However, you 
can't really use it without it (it will generate errors when you try).

Two possible fields in the DESCRIPTION could be:

SystemRequirements: kitty

And since, kitty only runs on macos and linux:

OS_type: unix

Should I add these? Like above?

Thanks!

Jan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul  7 17:53:37 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jul 2025 11:53:37 -0400
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
Message-ID: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>

On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
> 
> I have a package, which I am thinking to submit to CRAN. It can output
> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
> However, I am not sure if and how I should indicate the dependency on
> kitty. The package builds and installs fine without kitty. However, you
> can't really use it without it (it will generate errors when you try).
> 
> Two possible fields in the DESCRIPTION could be:
> 
> SystemRequirements: kitty
> 
> And since, kitty only runs on macos and linux:
> 
> OS_type: unix
> 
> Should I add these? Like above?

I think the SystemRequirements field is enough.  *Your package* doesn't 
depend on unix, it just depends on kitty.

Duncan Murdoch


From kev|nu@hey @end|ng |rom gm@||@com  Mon Jul  7 20:42:38 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Mon, 7 Jul 2025 11:42:38 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
Message-ID: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>

Hi Reed,

Have you received any feedback yet? My only guess is that this was a
false positive from some static analysis tools on the CRAN
maintainer's side;
https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
says that:

> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).

Perhaps the presence of these files within a CRAN package submission
is causing something to trip up. If not, let me know if there's
anything I can change on the 'configure' side to help resolve this.

Did you also get a warning about the 'cleanup.R' file? That is, my
guess is that the presence of these two files
(https://github.com/reedacartwright/ironseed/tree/main/tools/config)
is somehow causing the issue.

Thanks,
Kevin

On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
<racartwright at gmail.com> wrote:
>
> Dear All,
>
> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> to address one feedback message or even what is causing it. It might
> be related to Kevin Ushey's R scripts that I am using to configure the
> package during installation [2]. The message that I received is below.
>
> """
> Please ensure that your functions do not write by default or in your
> examples/vignettes/tests in the user's home filespace (including the
> package directory and getwd()). This is not allowed by CRAN policies.
> Please omit any default path in writing functions. In your
> examples/vignettes/tests you can write to tempdir().
> -> tools/config.Rtools/config/configure.R
> """
>
> `tools/config.Rtools/config/configure.R` is not a file in my package.
> So I assume that this report is saying that it is being created during
> installation, but I can't reproduce it. My package does read and
> execute `tools/config/configure.R` during installation, so right now
> my guess is that my configure script is somehow creating
> `tools/config.Rtools/config/configure.R` when I try to read
> `tools/config/configure.R`. Any help figuring this out would be
> appreciated.
>
> [1] https://github.com/reedacartwright/ironseed
> [2] https://github.com/kevinushey/configure
>
> Thanks,
> Reed
>
> --
> Reed A. Cartwright, PhD
> Associate Professor of Life Sciences
> TEACh Representative - Evolution and Computational Courses
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-6401 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jul  7 21:00:57 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 7 Jul 2025 21:00:57 +0200
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>

Please ignore that comment:
I think "tools/config/configure.R" was meant, but that seems fine, too.

Best,
Uwe Ligges

On 07.07.2025 20:42, Kevin Ushey wrote:
> Hi Reed,
> 
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
> 
>> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> 
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
> 
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
> 
> Thanks,
> Kevin
> 
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
>>
>> Dear All,
>>
>> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
>> to address one feedback message or even what is causing it. It might
>> be related to Kevin Ushey's R scripts that I am using to configure the
>> package during installation [2]. The message that I received is below.
>>
>> """
>> Please ensure that your functions do not write by default or in your
>> examples/vignettes/tests in the user's home filespace (including the
>> package directory and getwd()). This is not allowed by CRAN policies.
>> Please omit any default path in writing functions. In your
>> examples/vignettes/tests you can write to tempdir().
>> -> tools/config.Rtools/config/configure.R
>> """
>>
>> `tools/config.Rtools/config/configure.R` is not a file in my package.
>> So I assume that this report is saying that it is being created during
>> installation, but I can't reproduce it. My package does read and
>> execute `tools/config/configure.R` during installation, so right now
>> my guess is that my configure script is somehow creating
>> `tools/config.Rtools/config/configure.R` when I try to read
>> `tools/config/configure.R`. Any help figuring this out would be
>> appreciated.
>>
>> [1] https://github.com/reedacartwright/ironseed
>> [2] https://github.com/kevinushey/configure
>>
>> Thanks,
>> Reed
>>
>> --
>> Reed A. Cartwright, PhD
>> Associate Professor of Life Sciences
>> TEACh Representative - Evolution and Computational Courses
>> School of Life Sciences and The Biodesign Institute
>> Arizona State University
>> ==================
>> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
>> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
>> 85287-6401 USA
>> Office: Biodesign B-220C, 1-480-965-9949
>> Website: http://cartwrig.ht/
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:22:40 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:22:40 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
Message-ID: <CALOkxuz+pP-FCq+2PmM0a1XQfcgiv3qrSyOz03-1ZzRaH3-y8g@mail.gmail.com>

Hi Kevin,

First, thanks for the configure.R package. I needed to check for the
presence of two functions during compilation and it helped simplify
the process for me.

I resubmitted to CRAN yesterday under the assumption that this report
was being generated from a static analysis. I made the following
changes to `tools/config.R`.

* Removed all the `@export` lines.
* Removed the default `path = "."` in `configure_directory()`.
* Removed the `use_configure()` function.

You can see the fill diff at
<https://github.com/reedacartwright/ironseed/compare/8522d28...45a0f23#diff-6c174165097fa11900454663ab7b0a589bb0fc8f7e41b25d8b11833674ad4d91>

If this passes, I'll let you know.

Cheers,
Reed


On Mon, Jul 7, 2025 at 11:43?AM Kevin Ushey <kevinushey at gmail.com> wrote:
>
> Hi Reed,
>
> Have you received any feedback yet? My only guess is that this was a
> false positive from some static analysis tools on the CRAN
> maintainer's side;
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> says that:
>
> > Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
>
> Perhaps the presence of these files within a CRAN package submission
> is causing something to trip up. If not, let me know if there's
> anything I can change on the 'configure' side to help resolve this.
>
> Did you also get a warning about the 'cleanup.R' file? That is, my
> guess is that the presence of these two files
> (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> is somehow causing the issue.
>
> Thanks,
> Kevin
>
> On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> <racartwright at gmail.com> wrote:
> >
> > Dear All,
> >
> > I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> > to address one feedback message or even what is causing it. It might
> > be related to Kevin Ushey's R scripts that I am using to configure the
> > package during installation [2]. The message that I received is below.
> >
> > """
> > Please ensure that your functions do not write by default or in your
> > examples/vignettes/tests in the user's home filespace (including the
> > package directory and getwd()). This is not allowed by CRAN policies.
> > Please omit any default path in writing functions. In your
> > examples/vignettes/tests you can write to tempdir().
> > -> tools/config.Rtools/config/configure.R
> > """
> >
> > `tools/config.Rtools/config/configure.R` is not a file in my package.
> > So I assume that this report is saying that it is being created during
> > installation, but I can't reproduce it. My package does read and
> > execute `tools/config/configure.R` during installation, so right now
> > my guess is that my configure script is somehow creating
> > `tools/config.Rtools/config/configure.R` when I try to read
> > `tools/config/configure.R`. Any help figuring this out would be
> > appreciated.
> >
> > [1] https://github.com/reedacartwright/ironseed
> > [2] https://github.com/kevinushey/configure
> >
> > Thanks,
> > Reed
> >
> > --
> > Reed A. Cartwright, PhD
> > Associate Professor of Life Sciences
> > TEACh Representative - Evolution and Computational Courses
> > School of Life Sciences and The Biodesign Institute
> > Arizona State University
> > ==================
> > Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> > Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> > 85287-6401 USA
> > Office: Biodesign B-220C, 1-480-965-9949
> > Website: http://cartwrig.ht/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Jul  7 21:26:13 2025
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 7 Jul 2025 12:26:13 -0700
Subject: [R-pkg-devel] Help with CRAN Submission Feedback
In-Reply-To: <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
References: <CALOkxuy_L=7z5BYDop92JGyyP4gnptPz0jWdb9RWS5a2DA-PPA@mail.gmail.com>
 <CAJXgQP3=Lme4OXC+OXrWa8uvCTCdKgG1Dc7Eyz5teiwA8sy4rg@mail.gmail.com>
 <8e28b172-eae1-40de-b9c0-535be9c9dc8f@statistik.tu-dortmund.de>
Message-ID: <CALOkxuxARq1_po7rc4Z3nUm_ccB5yWavmdVfuGE5Z5uFOd4RdQ@mail.gmail.com>

Dear Uwe,

Thank you for letting me know that I can ignore that comment.

Cheers,
Reed

On Mon, Jul 7, 2025 at 12:02?PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> Please ignore that comment:
> I think "tools/config/configure.R" was meant, but that seems fine, too.
>
> Best,
> Uwe Ligges
>
> On 07.07.2025 20:42, Kevin Ushey wrote:
> > Hi Reed,
> >
> > Have you received any feedback yet? My only guess is that this was a
> > false positive from some static analysis tools on the CRAN
> > maintainer's side;
> > https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-subdirectories
> > says that:
> >
> >> Subdirectory tools is the preferred place for auxiliary files needed during configuration, and also for sources need to re-create scripts (e.g. M4 files for autoconf: some prefer to put those in a subdirectory m4 of tools).
> >
> > Perhaps the presence of these files within a CRAN package submission
> > is causing something to trip up. If not, let me know if there's
> > anything I can change on the 'configure' side to help resolve this.
> >
> > Did you also get a warning about the 'cleanup.R' file? That is, my
> > guess is that the presence of these two files
> > (https://github.com/reedacartwright/ironseed/tree/main/tools/config)
> > is somehow causing the issue.
> >
> > Thanks,
> > Kevin
> >
> > On Sat, Jul 5, 2025 at 2:13?PM Reed A. Cartwright
> > <racartwright at gmail.com> wrote:
> >>
> >> Dear All,
> >>
> >> I submitted a new package ("ironseed") [1] to CRAN. I am not sure how
> >> to address one feedback message or even what is causing it. It might
> >> be related to Kevin Ushey's R scripts that I am using to configure the
> >> package during installation [2]. The message that I received is below.
> >>
> >> """
> >> Please ensure that your functions do not write by default or in your
> >> examples/vignettes/tests in the user's home filespace (including the
> >> package directory and getwd()). This is not allowed by CRAN policies.
> >> Please omit any default path in writing functions. In your
> >> examples/vignettes/tests you can write to tempdir().
> >> -> tools/config.Rtools/config/configure.R
> >> """
> >>
> >> `tools/config.Rtools/config/configure.R` is not a file in my package.
> >> So I assume that this report is saying that it is being created during
> >> installation, but I can't reproduce it. My package does read and
> >> execute `tools/config/configure.R` during installation, so right now
> >> my guess is that my configure script is somehow creating
> >> `tools/config.Rtools/config/configure.R` when I try to read
> >> `tools/config/configure.R`. Any help figuring this out would be
> >> appreciated.
> >>
> >> [1] https://github.com/reedacartwright/ironseed
> >> [2] https://github.com/kevinushey/configure
> >>
> >> Thanks,
> >> Reed
> >>
> >> --
> >> Reed A. Cartwright, PhD
> >> Associate Professor of Life Sciences
> >> TEACh Representative - Evolution and Computational Courses
> >> School of Life Sciences and The Biodesign Institute
> >> Arizona State University
> >> ==================
> >> Address: The Biodesign Institute, PO Box 876401, Tempe, AZ 85287-6401 USA
> >> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> >> 85287-6401 USA
> >> Office: Biodesign B-220C, 1-480-965-9949
> >> Website: http://cartwrig.ht/
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Jul  8 08:22:28 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 8 Jul 2025 08:22:28 +0200
Subject: [R-pkg-devel] Indicate dependency on kitty in DESCRIPTION
In-Reply-To: <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
References: <d453b264-a092-4aeb-be8d-f4c360ad7d3f@eoos.dds.nl>
 <9df3c136-8273-4ff1-91e9-6d91348ed060@gmail.com>
Message-ID: <f916d12d-32da-4d54-9525-b8e44c9dceb0@eoos.dds.nl>

OK. Thanks!

I wasn't sure if the 'SystemRequirements' field was intended just for 
dependencies needed for building and installing the package like 
libraries or a 'non-default C++ standard'. Or that it should also be 
used for dependencies needed at run-time.

Jan


On 07-07-2025 17:53, Duncan Murdoch wrote:
> On 2025-07-07 11:23 a.m., Jan van der Laan wrote:
>>
>> I have a package, which I am thinking to submit to CRAN. It can output
>> graphics/plots to the kitty terminal (https://sw.kovidgoyal.net/kitty/).
>> However, I am not sure if and how I should indicate the dependency on
>> kitty. The package builds and installs fine without kitty. However, you
>> can't really use it without it (it will generate errors when you try).
>>
>> Two possible fields in the DESCRIPTION could be:
>>
>> SystemRequirements: kitty
>>
>> And since, kitty only runs on macos and linux:
>>
>> OS_type: unix
>>
>> Should I add these? Like above?
> 
> I think the SystemRequirements field is enough.? *Your package* doesn't 
> depend on unix, it just depends on kitty.
> 
> Duncan Murdoch
>


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 12:13:55 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 12:13:55 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
Message-ID: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>

Hi,

I am the maintainer of a package for which we have done a major 
refactoring (work in progress, can be found here 
<https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).

Upon my last resubmission to CRAN, some issues regarding some man pages 
(that I obviously missed) were found, e.g. function doc without a 
\value{} tag, or examples for (purposely) unexported functions.

These issues were not raised during package check (with or without 
`--as-cran` flag).

The code base is quite large, and I would be very interested in any tool 
that could help me check the man pages more thoroughly than a package 
check ?

I know about `devtools::check_man()` but it does not find the issues 
that I am mentioning.

Thanks in advance,
Best regards,

-- 
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/a5e86ea5/attachment.sig>

From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Jul 10 14:30:35 2025
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 10 Jul 2025 14:30:35 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <7631e6ec-cb15-4793-9078-19eac7e4d60e@eoos.dds.nl>

They also weren't found when checking on winbuilder 
(https://win-builder.r-project.org/)? Especially when checking with 
r-devel?

Jan



On 10-07-2025 12:13, Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here <https://github.com/ 
> getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages 
> (that I obviously missed) were found, e.g. function doc without a 
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without `-- 
> as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool 
> that could help me check the man pages more thoroughly than a package 
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From et|enne@b@cher @end|ng |rom protonm@||@com  Thu Jul 10 14:33:21 2025
From: et|enne@b@cher @end|ng |rom protonm@||@com (Etienne Bacher)
Date: Thu, 10 Jul 2025 12:33:21 +0000
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <sZ-D_zqlm-dSYwGzVRBCLsqGhTgd_fzbCdDqtv-hmKw40u0EV6ofT5UO6ExFr-6RRcHreWkSrpR7vViEemanQsnPnV8akl_Xsv2irKtFWFk=@protonmail.com>

Hi Ghislain,

You may be interested in checkhelper::find_missing_tags().
More generally, there's a nice list of tools to prepare for CRAN submission here: https://github.com/ThinkR-open/prepare-for-cran

Best,
Etienne




Le jeudi 10 juillet 2025 ? 12:14 PM, Ghislain Durif <ghislain.durif at ens-lyon.fr> a ?crit?:

> 
> 
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).
> 
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> --
> Ghislain Durif
> -------------------------------------------
> Research engineer -- CNRS
> BioComputing Hub, LBMC, ENS Lyon (France)
> Webpage: https://gdurif.perso.math.cnrs.fr
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 10 14:47:20 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jul 2025 08:47:20 -0400
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <70af2bf4-b7f5-4143-9402-5bb3654f2e4d@gmail.com>

Among other tests, CRAN uses the development version of R (R-devel) for 
checks.  It usually contains more stringent tests than the release 
version of R, so possibly you were using a release version for tests and 
that test wasn't in it.

The Github action r-lib/actions/check-r-package at v2 will run on R-devel 
if you specify "r: 'devel'".   For example in my rgl package checks 
(visible at 
https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml), 
I check on the release and the devel versions by having

       matrix:
         config:
           - {os: windows-latest, r: 'release'}
           - {os: windows-latest, r: 'devel'}
           - {os: ubuntu-latest,   r: 'devel', http-user-agent: 'release'}
           - {os: macos-latest, r: 'devel'}

Duncan Murdoch


On 2025-07-10 6:13 a.m., Ghislain Durif wrote:
> Hi,
> 
> I am the maintainer of a package for which we have done a major
> refactoring (work in progress, can be found here
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
> 
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).
> 
> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?
> 
> I know about `devtools::check_man()` but it does not find the issues
> that I am mentioning.
> 
> Thanks in advance,
> Best regards,
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 15:19:04 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 15:19:04 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>

Hi again,

Thanks for the responses!

@Jan van der Laan our package is unix-only so I did no try to check it 
with winbuilder.

@Etienne Bacher `checkhelper::find_missing_tags()` does actually find 
some issue, even running with the release version of R.

@Duncan Murdoch I was indeed running the check with the release version 
of R, I'll check with the development version.

Thanks again,

Best regards,

Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
BioComputing Hub, LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr

On 10/07/2025 12:13, Ghislain Durif wrote:
> Hi,
>
> I am the maintainer of a package for which we have done a major 
> refactoring (work in progress, can be found here 
> <https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops>).
>
> Upon my last resubmission to CRAN, some issues regarding some man 
> pages (that I obviously missed) were found, e.g. function doc without 
> a \value{} tag, or examples for (purposely) unexported functions.
>
> These issues were not raised during package check (with or without 
> `--as-cran` flag).
>
> The code base is quite large, and I would be very interested in any 
> tool that could help me check the man pages more thoroughly than a 
> package check ?
>
> I know about `devtools::check_man()` but it does not find the issues 
> that I am mentioning.
>
> Thanks in advance,
> Best regards,
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/782b190a/attachment.sig>

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Thu Jul 10 16:10:11 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Ghislain Durif)
Date: Thu, 10 Jul 2025 16:10:11 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
Message-ID: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>

A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20250710/466dbd9c/attachment.sig>

From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:31:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:31:31 -0500
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
 <95caa332-c19a-4545-ad35-93d6fd22584b@ens-lyon.fr>
Message-ID: <26735.52931.558098.560588@rob.eddelbuettel.com>


On 10 July 2025 at 15:19, Ghislain Durif wrote:
| @Duncan Murdoch I was indeed running the check with the release version 
| of R, I'll check with the development version.

There are also regularly updated Docker containers if you want to run checks
locally rather than as an action. See for example rocker/drd (smaller) or
rocker/r-devel (larger).

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Jul 10 16:37:57 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jul 2025 09:37:57 -0500
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <26735.53317.242011.319748@rob.eddelbuettel.com>


Ghislain,

That email was unreadable for me in two different email clients.

A common pattern for resource minimalisation is to add a snippet setting the
resources in a way CRAN prefers at the beginning of each examples block,
often wrapped in a \dontshow{} block, and possibly resetting at end. That has
been discussed on this list before so some creative searching may lead you
there. 

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @eb@meyer @end|ng |rom |@u@de  Thu Jul 10 19:22:24 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 10 Jul 2025 19:22:24 +0200
Subject: [R-pkg-devel] Tool for advanced man/doc page check?
In-Reply-To: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
References: <5b390b92-8fff-44a9-80d1-a948ec41c084@ens-lyon.fr>
Message-ID: <3a412e85-ba80-466e-a792-5e07f760d326@fau.de>

Am 10.07.25 um 12:13 schrieb Ghislain Durif:
> Upon my last resubmission to CRAN, some issues regarding some man pages
> (that I obviously missed) were found, e.g. function doc without a
> \value{} tag, or examples for (purposely) unexported functions.
> 
> These issues were not raised during package check (with or without
> `--as-cran` flag).

tools::checkRdContents() et al. (see ?tools::QC), used by R CMD check, 
don't currently check help pages for these things. I suppose there would 
be too many false alarms so this is manually reviewed by the 
CRAN-submissions team.

> The code base is quite large, and I would be very interested in any tool
> that could help me check the man pages more thoroughly than a package
> check ?

Here is quick-and-dirty code that uses 'tools'-internal helper functions 
to find names of Rd files that might deserve a \value section -- given 
an installed PACKAGE (as a character string):

     ##PACKAGE <- "rkeops"
     functions <- lsf.str(envir = getNamespace(PACKAGE))
     tools::Rd_db(PACKAGE) |>
         Filter(f = function (rd) {
             sections <- tools:::RdTags(rd)
             aliases <- tools:::.Rd_get_metadata(rd, "alias")
             !"\\value" %in% sections && (
                 "\\arguments" %in% sections ||
                 any(aliases %in% functions)
             )
         }) |>
         names()

-- 
Sebastian Meyer


From r|ch@rd@g@ever|tt @end|ng |rom gm@||@com  Thu Jul 10 13:27:55 2025
From: r|ch@rd@g@ever|tt @end|ng |rom gm@||@com (Richard Everitt)
Date: Thu, 10 Jul 2025 12:27:55 +0100
Subject: [R-pkg-devel] ggsmc: failed check
Message-ID: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>

Hi,

	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).

	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

	Does anyone have any recommendations on how I should proceed? I am not sure how to make sure I have fixed the error since I am not able to reproduce it. Could it have been a temporary issue with gganimate, and in this case should I just resubmit the package?

	Many thanks in advance,

	Richard

From gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r  Fri Jul 11 10:18:26 2025
From: gh|@|@|n@dur|| @end|ng |rom en@-|yon@|r (Durif Ghislain)
Date: Fri, 11 Jul 2025 10:18:26 +0200
Subject: [R-pkg-devel] A way to prepend/append some code before/after
 running package examples? (e.g. to setup CPU resource usage limits for
 package example run or to clean up generated files)
In-Reply-To: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
References: <5ddc4248-946f-4296-9ff8-cb5913326c9f@ens-lyon.fr>
Message-ID: <e314812e0c7f261d1d3004a7df7016be@ens-lyon.fr>

Hi again,

Thanks @Dirk for pointing the issue with the encoding of my original 
message (it cannot be read from the list archive either). I do not 
understand what could have been the problem since there was no issue 
with other mails sent to the list earlier on the same day in the same 
condition.  I am resending it below from my webmail instead of my 
mailer, hoping it will work better this time, and so that everyone can 
see my original message.

Regarding my issue, I did not know about the \dontshow tag, so I will 
use it. Thanks.

Best

----

Hi,

We have a package that runs parallel computations (work in progress, can 
be found here 
https://github.com/getkeops/keops/tree/fix_rkeops_v2_keops_v2.3/rkeops).

The package deeply relies on a Python package through `reticulate` that 
itself interfaces OpenMP-based C++ code, which can thus run parallel 
computations.

Users of our package can control CPU resource usage thanks to a wrapper 
function around `RhpcBLASctl::omp_set_num_threads(n_core)` available in 
our package.

By default, OpenMP uses all available cores which is a bad practice for 
CRAN checks. It is recommended to only use 2 CPU cores for computation 
per CRAN policies (which is totally understandable).

For unit test run with `testthat`, we can use a `tests/testthat/setup.R` 
file to run any arbitrary code before running the tests, so I can setup 
a limit on CPU usage here.

For my Rmarkdown vignette build, I have a code chunk not included in the 
output document that setup a limit using our wrapper function.

However, regarding example run, is there a way to automatically setup 
some resource limit before running package examples, or to automatically 
run some code (i.e. add code at top of generated `<pkg>-Ex.R` file) 
before running all the examples?

If not, I will have to repeat the function call that setup limit before 
every examples in my package (around 70 exported functions in my 
package), which does not seems to be really optimal.

In the same spirit, generally my example run breaks because `reticulate` 
is not explicitly initialized (I am not facing this issue in interactive 
or standard script mode and I do not understand why), so I would need to 
run something like `reticulate::py_available(initialize = TRUE)` or 
`reticulate::py_config()` before running my examples (so to prepend this 
at the top of the generated example file).

Also, our package generate cache files in `tools::R_user_dir()` 
directory because it does JIT compilation (and the generated library 
files are cached for reuse). We have a function to clean them, so I 
would need to call this function after example runs so that these files 
are removed (again for CRAN check).

Note: at the moment I have \dontrun tags around almost all my examples 
to avoid all these issues, but it was highlighted in a recent CRAN 
submission that it should be reduced to a minimum if possible.

Thanks in advance,
Best regards,


---
Ghislain Durif
-------------------------------------------
Research engineer -- CNRS
LBMC, ENS Lyon (France)
Webpage: https://gdurif.perso.math.cnrs.fr


From @eb@meyer @end|ng |rom |@u@de  Fri Jul 11 10:53:12 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 11 Jul 2025 10:53:12 +0200
Subject: [R-pkg-devel] ggsmc: failed check
In-Reply-To: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
References: <1D66BAD8-9D80-42B8-B29F-4BB166E18986@gmail.com>
Message-ID: <c535556b-a858-44ab-bc25-f49f234083ef@fau.de>

Am 10.07.25 um 13:27 schrieb Richard Everitt:
> 	My R package ggsmc has been removed from CRAN after a failed check (see here https://cran-archive.r-project.org/web/checks/2025/2025-07-05_check_results_ggsmc.html).
> 
> 	I have not been able to reproduce locally the error mentioned in the check. The check fails on a vignette. It suggests the vignette is building but just gets stuck on an animated histogram. Could if be that the issue is in the gganimate package?

Yes, see <https://github.com/thomasp85/gganimate/issues/517>.

When gganimate:::draw_frames() tries to plot$scene$plot_frame(), an 
error happens

     Error in labs(!!!lapply(plot$plot$labels, function(label) { :
       could not find function "labs"

but that is caught and turned into a "Failed to plot frame" warning 
(that would be shown in the rendered vignette), so gganimate only fails 
later when it calls its gifski_renderer() with non-existent png files 
and that is the error we get to see in the build log.

-- 
Sebastian Meyer


From ke||ey @end|ng |rom d@|@c@  Fri Jul 11 20:50:44 2025
From: ke||ey @end|ng |rom d@|@c@ (Daniel Kelley)
Date: Fri, 11 Jul 2025 18:50:44 +0000
Subject: [R-pkg-devel] Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
Message-ID: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>

# BACKGROUND

I maintain the 'oce' package, and to avoid problems when I submit a new version, I do some remote tests using

* devtools::check_mac_release()
* devtools::check_win_release()
* devtools::check_win_devel()
* devtools::check_win_oldrelease() # problem

I found that the mac upload fails, but it doesn't state why, and I'll ignore that for now, assuming it to be a temporary problem.  My concern is with the last test, i.e. on system

R version 4.4.3 (2025-02-28 ucrt)

It produces one NOTE.  Looking into this, I see the following in the 00check.log file:

* checking DESCRIPTION meta-information ... NOTE
Author field differs from that derived from Authors at R
  Author:    'Dan Kelley [aut, cre] (ORCID: <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'
  Authors at R: 'Dan Kelley [aut, cre] (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut] (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb] (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British Geological Survey [ctb, cph] (magnetic-field subroutine)'

This relates to the following lines in my DESCRIPTION file.

# QUESTION

Should I be doing something about this note?  Note that I have the following in my DESCRIPTION file.

Authors at R: c(
    person(given="Dan", family="Kelley", email="Dan.Kelley at Dal.Ca", role=c("aut", "cre"), comment=c(ORCID="0000-0001-7808-5911")),
    person(given="Clark", family="Richards", email="clark.richards at gmail.com", role=c("aut"), comment=c(ORCID="0000-0002-7833-206X")),
    person(given="Chantelle", family="Layton", email="chantelle.layton at dal.ca", role=c("ctb"), comment=c(ORCID="0000-0002-3199-5763", "curl() coauthor")),
    person(given="British Geological Survey", role=c("ctb","cph"), comment="magnetic-field subroutine"))


From |kry|ov @end|ng |rom d|@root@org  Fri Jul 11 21:11:25 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 11 Jul 2025 22:11:25 +0300
Subject: [R-pkg-devel] 
 Should I ignore a remote-check NOTE on 'Author field
 differs from Authors@R'?
In-Reply-To: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
References: <F0C43B36-B61D-4AB7-9A95-6B1FEA5A0FD4@dal.ca>
Message-ID: <20250711221125.58386f1b@Tarkus>

On Fri, 11 Jul 2025 18:50:44 +0000
Daniel Kelley <kelley at dal.ca> wrote:

> My concern is with the last test, i.e. on system
> 
> R version 4.4.3 (2025-02-28 ucrt)
> 
> It produces one NOTE.  Looking into this, I see the following in the
> 00check.log file:
> 
> * checking DESCRIPTION meta-information ... NOTE
> Author field differs from that derived from Authors at R
>   Author:    'Dan Kelley [aut, cre] (ORCID:
> <https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (ORCID: <https://orcid.org/0000-0002-7833-206X>), Chantelle Layton
> [ctb] (ORCID: <https://orcid.org/0000-0002-3199-5763>, curl()
> coauthor), British Geological Survey [ctb, cph] (magnetic-field
> subroutine)'
>   Authors at R: 'Dan Kelley [aut, cre]
> (<https://orcid.org/0000-0001-7808-5911>), Clark Richards [aut]
> (<https://orcid.org/0000-0002-7833-206X>), Chantelle Layton [ctb]
> (<https://orcid.org/0000-0002-3199-5763>, curl() coauthor), British
> Geological Survey [ctb, cph] (magnetic-field subroutine)'

This is a false positive. The Author: field in your source package has
the correct text (it says ORCID: <...>), but R-4.4.3 doesn't realise
that because it predates the change to how the Author: field is
formatted.

R-4.4.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (<https://orcid.org/0000-0001-7808-5911>)"

R-4.5.x:
person("Dan", "Kelley", comment = c(ORCID =
"https://orcid.org/0000-0001-7808-5911"))
# [1] "Dan Kelley (ORCID: <https://orcid.org/0000-0001-7808-5911>)"

-- 
Best regards,
Ivan


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Thu Jul 17 13:30:12 2025
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Thu, 17 Jul 2025 08:30:12 -0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
Message-ID: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>

Hi all,

I recently noticed that my package {flightsbr}
<https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
never received any email or warning that the package would be removed. It
seems my package was removed because it imports the {parzer}
<https://docs.ropensci.org/parzer/> package that was also removed on July
1st. The authors of {parzer} told me they did not receive any messages or
warnings. What makes this a bit more puzzling, is that both packages were
passing all CRAN checks (see here
<https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
and
here
<https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>
).

I'm wondering what has caused this and if this might have happened to other
packages.

Best wishes,

Rafa Pereira

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 17 14:08:37 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 17 Jul 2025 15:08:37 +0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
Message-ID: <20250717150837.66350e36@arachnoid>

? Thu, 17 Jul 2025 08:30:12 -0300
"Rafael H. M. Pereira" <rafa.pereira.br at gmail.com> ?????:

> both packages were passing all CRAN checks (see here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
> and here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>).

While it is, indeed, not visible in the archived check results, digging
into src/contrib/PACKAGES.in reveals that 'parzer' failed the
UBSanitizer check on an Apple M1 machine on June 1st:

https://www.stats.ox.ac.uk/pub/bdr/M1-SAN/parzer/tests/testthat.Rout

Casting a NaN value to an integer is undefined behaviour (with de-facto
different results on x86_64 and ARM processors). There used to be a
check for 'x' being NA_real_, but it seems to have been broken during
refactoring three years ago:
https://github.com/ropensci/parzer/blame/10a8aa68bea8b18a69cc99326e949c5beb144afd/src/pz_parse_parts.cpp#L11-L21

Arguably, the check should be for isnan(x), not only R_IsNA(x): the
latter will still miss non-NA NaN values.

I think that the packages should have had a yellow deadline mark (i.e.
with(tools::CRAN_package_db(), Deadline[Package %in% c('parzer',
'flightsbr')]) should have been returning non-NA values) in the month
that passed. Having a number of packages archived due to a silent
problem with mail delivery is very unfortunate.

-- 
Best regards,
Ivan


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul 17 14:24:21 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 17 Jul 2025 14:24:21 +0200
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
Message-ID: <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>

You got a message from Professor Ripley on June 18 with subject "CRAN 
package parzer and its reverse dependencies" which asked you to prepare 
for the parzer archival.

Best,
Uwe Ligges



On 17.07.2025 13:30, Rafael H. M. Pereira wrote:
> Hi all,
> 
> I recently noticed that my package {flightsbr}
> <https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
> never received any email or warning that the package would be removed. It
> seems my package was removed because it imports the {parzer}
> <https://docs.ropensci.org/parzer/> package that was also removed on July
> 1st. The authors of {parzer} told me they did not receive any messages or
> warnings. What makes this a bit more puzzling, is that both packages were
> passing all CRAN checks (see here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html>
> and
> here
> <https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html>
> ).
> 
> I'm wondering what has caused this and if this might have happened to other
> packages.
> 
> Best wishes,
> 
> Rafa Pereira
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Thu Jul 17 14:46:12 2025
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Thu, 17 Jul 2025 09:46:12 -0300
Subject: [R-pkg-devel] Package removed from CRAN without warning
In-Reply-To: <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>
References: <CAA42DG=jymV97xeV16aPU2ut+ENcZL22ZD8VRb9ftkVwif2G7w@mail.gmail.com>
 <ad9b048a-5993-44e0-9aee-318d6a0dfb97@statistik.tu-dortmund.de>
Message-ID: <CAA42DGm7ae-0vnt5D0EYASW3fRBvqxr6xF5Au2J6WYdFTm0OQA@mail.gmail.com>

Uwe, I have checked my inbox and spam and could not find the email. I might
have deleted it by accident. In any case, thank you both for the
clarification. We'll be working to resubmit both packages to CRAN soon.

best wishes,
Rafa

On Thu, Jul 17, 2025 at 9:24?AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> You got a message from Professor Ripley on June 18 with subject "CRAN
> package parzer and its reverse dependencies" which asked you to prepare
> for the parzer archival.
>
> Best,
> Uwe Ligges
>
>
>
> On 17.07.2025 13:30, Rafael H. M. Pereira wrote:
> > Hi all,
> >
> > I recently noticed that my package {flightsbr}
> > <https://ipeagit.github.io/flightsbr/> has been removed from CRAN but I
> > never received any email or warning that the package would be removed. It
> > seems my package was removed because it imports the {parzer}
> > <https://docs.ropensci.org/parzer/> package that was also removed on
> July
> > 1st. The authors of {parzer} told me they did not receive any messages or
> > warnings. What makes this a bit more puzzling, is that both packages were
> > passing all CRAN checks (see here
> > <
> https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_flightsbr.html
> >
> > and
> > here
> > <
> https://cran-archive.r-project.org/web/checks/2025/2025-07-02_check_results_parzer.html
> >
> > ).
> >
> > I'm wondering what has caused this and if this might have happened to
> other
> > packages.
> >
> > Best wishes,
> >
> > Rafa Pereira
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 16:10:04 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 07:10:04 -0700
Subject: [R-pkg-devel] (no subject)
Message-ID: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>

Hello,

I'm trying to submit a package to CRAN and I'm getting the following note
on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
I've been using for while. Can someone tell me what I'm doing wrong here?


https://win-builder.r-project.org/sUNBEuh3P71y/00check.log

* checking DESCRIPTION meta-information ... NOTE
Author field differs from that derived from Authors at R
  Author:    'John Harrold [aut, cre] (ORCID: <
https://orcid.org/0000-0003-2052-4373>)'
  Authors at R: 'John Harrold [aut, cre] (<
https://orcid.org/0000-0003-2052-4373>)'


Thankyou,
John

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Jul 17 16:42:56 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 17 Jul 2025 09:42:56 -0500
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
Message-ID: <26745.3056.156266.892574@rob.eddelbuettel.com>


On 17 July 2025 at 07:10, John Harrold wrote:
| Hello,
| 
| I'm trying to submit a package to CRAN and I'm getting the following note
| on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
| I've been using for while. Can someone tell me what I'm doing wrong here?
| 
| 
| https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
| 
| * checking DESCRIPTION meta-information ... NOTE
| Author field differs from that derived from Authors at R
|   Author:    'John Harrold [aut, cre] (ORCID: <
| https://orcid.org/0000-0003-2052-4373>)'
|   Authors at R: 'John Harrold [aut, cre] (<
| https://orcid.org/0000-0003-2052-4373>)'

This came up on this list a few days ago, the way the ORCID field is being
formatted from the Authors at R entry changed in R 4.5.*: the previous R release
did not inject 'ORCID: '. But you can ignore this difference, it will not
hold up the processing of your package.

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 16:44:22 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 07:44:22 -0700
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <26745.3056.156266.892574@rob.eddelbuettel.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
Message-ID: <CANAiAiUp_dK=-xNuiUC4fnmZbgsqn+WH-XR0PYG3nHsSH=T=SQ@mail.gmail.com>

Thankyou Dirk.

On Thu, Jul 17, 2025 at 7:42?AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 17 July 2025 at 07:10, John Harrold wrote:
> | Hello,
> |
> | I'm trying to submit a package to CRAN and I'm getting the following note
> | on Winbuilder (oldrelease). It's strange because this the same
> DESCRIPTION
> | I've been using for while. Can someone tell me what I'm doing wrong here?
> |
> |
> | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> |
> | * checking DESCRIPTION meta-information ... NOTE
> | Author field differs from that derived from Authors at R
> |   Author:    'John Harrold [aut, cre] (ORCID: <
> | https://orcid.org/0000-0003-2052-4373>)'
> |   Authors at R: 'John Harrold [aut, cre] (<
> | https://orcid.org/0000-0003-2052-4373>)'
>
> This came up on this list a few days ago, the way the ORCID field is being
> formatted from the Authors at R entry changed in R 4.5.*: the previous R
> release
> did not inject 'ORCID: '. But you can ignore this difference, it will not
> hold up the processing of your package.
>
> Best, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul 17 17:22:42 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 17 Jul 2025 17:22:42 +0200
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <26745.3056.156266.892574@rob.eddelbuettel.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
Message-ID: <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>



On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
> 
> On 17 July 2025 at 07:10, John Harrold wrote:
> | Hello,
> |
> | I'm trying to submit a package to CRAN and I'm getting the following note
> | on Winbuilder (oldrelease). It's strange because this the same DESCRIPTION
> | I've been using for while. Can someone tell me what I'm doing wrong here?
> |
> |
> | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> |
> | * checking DESCRIPTION meta-information ... NOTE
> | Author field differs from that derived from Authors at R
> |   Author:    'John Harrold [aut, cre] (ORCID: <
> | https://orcid.org/0000-0003-2052-4373>)'
> |   Authors at R: 'John Harrold [aut, cre] (<
> | https://orcid.org/0000-0003-2052-4373>)'
> 
> This came up on this list a few days ago, the way the ORCID field is being
> formatted from the Authors at R entry changed in R 4.5.*: the previous R release
> did not inject 'ORCID: '. But you can ignore this difference, it will not
> hold up the processing of your package.

Well, ideally you simply build and check with R-release or even better 
R-devel.

Best,
Uwe Ligges



> Best, Dirk
> 


From john@m@h@rro|d @end|ng |rom gm@||@com  Thu Jul 17 18:59:34 2025
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Thu, 17 Jul 2025 09:59:34 -0700
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
 <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
Message-ID: <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>

Sorry for not being clearer. I checked on all three and it was only
oldrelease that was giving me this note.

On Thu, Jul 17, 2025 at 8:22?AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
> >
> > On 17 July 2025 at 07:10, John Harrold wrote:
> > | Hello,
> > |
> > | I'm trying to submit a package to CRAN and I'm getting the following
> note
> > | on Winbuilder (oldrelease). It's strange because this the same
> DESCRIPTION
> > | I've been using for while. Can someone tell me what I'm doing wrong
> here?
> > |
> > |
> > | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
> > |
> > | * checking DESCRIPTION meta-information ... NOTE
> > | Author field differs from that derived from Authors at R
> > |   Author:    'John Harrold [aut, cre] (ORCID: <
> > | https://orcid.org/0000-0003-2052-4373>)'
> > |   Authors at R: 'John Harrold [aut, cre] (<
> > | https://orcid.org/0000-0003-2052-4373>)'
> >
> > This came up on this list a few days ago, the way the ORCID field is
> being
> > formatted from the Authors at R entry changed in R 4.5.*: the previous R
> release
> > did not inject 'ORCID: '. But you can ignore this difference, it will not
> > hold up the processing of your package.
>
> Well, ideally you simply build and check with R-release or even better
> R-devel.
>
> Best,
> Uwe Ligges
>
>
>
> > Best, Dirk
> >
>
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jul 18 11:28:44 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 18 Jul 2025 11:28:44 +0200
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>
References: <CANAiAiUof11-Ty1HWrzOJpqehf5OUAncRzk0xBu++0Nsa5Kqeg@mail.gmail.com>
 <26745.3056.156266.892574@rob.eddelbuettel.com>
 <ef96eddf-b539-47a3-a6b7-d0b544f77818@statistik.tu-dortmund.de>
 <CANAiAiUOdajVT0vRp-46K6m7ayWHgJLCY0fxhHwsOiQ9XMbmpQ@mail.gmail.com>
Message-ID: <c46ed113-f537-4ca6-89df-95642413c670@statistik.tu-dortmund.de>

That's fine,
Uwe


On 17.07.2025 18:59, John Harrold wrote:
> Sorry for not being clearer. I checked on all three and it was only 
> oldrelease that was giving me this note.
> 
> On Thu, Jul 17, 2025 at 8:22?AM Uwe Ligges <ligges at statistik.tu- 
> dortmund.de <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
> 
> 
>     On 17.07.2025 16:42, Dirk Eddelbuettel wrote:
>      >
>      > On 17 July 2025 at 07:10, John Harrold wrote:
>      > | Hello,
>      > |
>      > | I'm trying to submit a package to CRAN and I'm getting the
>     following note
>      > | on Winbuilder (oldrelease). It's strange because this the same
>     DESCRIPTION
>      > | I've been using for while. Can someone tell me what I'm doing
>     wrong here?
>      > |
>      > |
>      > | https://win-builder.r-project.org/sUNBEuh3P71y/00check.log
>     <https://win-builder.r-project.org/sUNBEuh3P71y/00check.log>
>      > |
>      > | * checking DESCRIPTION meta-information ... NOTE
>      > | Author field differs from that derived from Authors at R
>      > |? ?Author:? ? 'John Harrold [aut, cre] (ORCID: <
>      > | https://orcid.org/0000-0003-2052-4373 <https://
>     orcid.org/0000-0003-2052-4373>>)'
>      > |? ?Authors at R: 'John Harrold [aut, cre] (<
>      > | https://orcid.org/0000-0003-2052-4373 <https://
>     orcid.org/0000-0003-2052-4373>>)'
>      >
>      > This came up on this list a few days ago, the way the ORCID field
>     is being
>      > formatted from the Authors at R entry changed in R 4.5.*: the
>     previous R release
>      > did not inject 'ORCID: '. But you can ignore this difference, it
>     will not
>      > hold up the processing of your package.
> 
>     Well, ideally you simply build and check with R-release or even better
>     R-devel.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
>      > Best, Dirk
>      >
> 


From rmh @end|ng |rom temp|e@edu  Wed Jul 23 02:16:57 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 23 Jul 2025 00:16:57 +0000
Subject: [R-pkg-devel] compact vignettes
Message-ID: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>

I need some help on the compacting of pdf files in the inst/doc/ directory.
When I use the --compact-vignettes option, as in
  R CMD build --compact-vignettes microplot
the relevant pdf filesize drops 76 bytes.

The CRAN pretest makes it drop in size by 270 kilobytes

What incantation am I missing?

Thanks
Rich


From edd @end|ng |rom deb|@n@org  Wed Jul 23 02:31:31 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 22 Jul 2025 19:31:31 -0500
Subject: [R-pkg-devel] compact vignettes
In-Reply-To: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
Message-ID: <26752.11619.121895.965023@rob.eddelbuettel.com>


On 23 July 2025 at 00:16, Richard M. Heiberger wrote:
| I need some help on the compacting of pdf files in the inst/doc/ directory.
| When I use the --compact-vignettes option, as in
|   R CMD build --compact-vignettes microplot
| the relevant pdf filesize drops 76 bytes.
| 
| The CRAN pretest makes it drop in size by 270 kilobytes
| 
| What incantation am I missing?

I use `--compact-vignettes=both` (encoded in wrapper script `build.r` which
is part of my `littler` package).

One of those things that maybe should be a default but aren't...

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From N||@@Lue@chow @end|ng |rom un|-due@@e|dor|@de  Wed Jul 23 12:40:07 2025
From: N||@@Lue@chow @end|ng |rom un|-due@@e|dor|@de (=?UTF-8?Q?Nils_L=C3=BCschow?=)
Date: Wed, 23 Jul 2025 12:40:07 +0200
Subject: [R-pkg-devel] 
 [Extern] Re: Re: Problem building package depending
 on third party c++ source library.
In-Reply-To: <20250603110406.5993742f@Tarkus>
References: <ed3ae707af8e1af36f51e73581ee14af@uni-duesseldorf.de>
 <20250430215741.445338cd@Tarkus>
 <63bbe5f7-e81a-4798-bb65-e18d785d32bc@hhu.de>
 <20250603110406.5993742f@Tarkus>
Message-ID: <d8407f6a-5235-46ae-a8bf-1f3d839a5e4a@uni-duesseldorf.de>

This compiler error was apparently in a gcc update from last year, 
previously this would have been a warning. Apparently the gcc version in 
my wsl working environment was older and therefore I did not encounter 
it. I just removed the "const" and that fixed it (as it was const 
before, there shouldn't be a point where this variable is changed, so I 
guess it shouldn't cause any problems if I do not touch the Gecode 
library any further).

With this and some minor Makevars adjustments I got Gecode to compile 
both separately in the CRAN Debian testing container as well as in 
conjunction with R CMD "check".
Most remaining warnings are easy to deal with, however, one seems to be 
more problematic:


* checking for GNU extensions in Makefiles ... WARNING
Found the following file(s) containing GNU extensions:
 ? src/gcd/Makefile
 ? src/gcd/Makefile.in
 ? src/gecode_untouched/Makefile.in
Portable Makefiles do not use GNU extensions such as +=, :=, $(shell),
$(wildcard), ifeq ... endif, .NOTPARALLEL See section ?Writing portable
packages? in the ?Writing R Extensions? manual.


So there are definitely multiple occurences of such extensions in the 
Gecode Makefile. Since it is, unfortunately, quite extensive I would 
rather not have to rewrite too much of it (also because I do not really 
know too much about more advanced Makefiles). So the question would be 
how unportable it really is in its current state. I have compiled Gecode 
on multiple different Windows and Linux systems without too much hassle 
so far, which is why I wonder whether it is really all that bad (after 
all the library itself was written to run on Linux, Windows and MacOS).

Best regards,
Nils


Am 03.06.2025 um 10:04 schrieb Ivan Krylov:
> On Sat, 24 May 2025 17:07:06 +0200
> Nils L?schow <nilue103 at hhu.de> wrote:
>
>> Regarding the "mismatched-new-delete" warning I am also relatively
>> sure that this is actually a false positive. Taking a look into the
>> stack-trace, the new and delete operators are actually overloaded
>> with functions that internally use malloc and free, hence, there is
>> no mismatch
> You're right, I see now that the call to free() is inlined into the
> operator delete. This might be the same GCC bug as reported at
> <https://gcc.gnu.org/bugzilla/show_bug.cgi?id=100485>, but I've been
> wrong about finding the exact problem before.
>
> Generally, R CMD check will produce a NOTE if it sees you disabling a
> compiler warning, but the compiler is in the wrong here, and a NOTE is
> better than a WARNING. Still, it's best to have a package pass R CMD
> check without even NOTEs because those don't need to be re-checked by a
> human upon updates. Perhaps you could ask on Libera.Chat's #gcc channel
> about possible workarounds? Sorry for not giving a more definitive
> answer.
>
> I've tried compiling the package on a Debian testing container, which
> is the OS that runs the incoming package checks, and encountered even
> more problems. Now gecode doesn't build at all, manually with
> './configure && make' or as part of the R package:
>
> In file included from gecode/set/rel.cpp:39:
> In file included from ./gecode/set/int.hh:296:
> ./gecode/set/int/weights.hpp:127:14: error: no viable overloaded '='
>    127 |     elements = elements0; weights = weights0;
>        |     ~~~~~~~~ ^ ~~~~~~~~~
> ./gecode/kernel/data/shared-array.hpp:53:9: note: candidate function (the implicit copy assignment operator) not viable: 'this' argument has type 'const SharedArray<int>', but
>   method is not marked const
>     53 |   class SharedArray : public SharedHandle {
>        |         ^
> In file included from gecode/set/rel.cpp:39:
> In file included from ./gecode/set/int.hh:296:
> ./gecode/set/int/weights.hpp:127:35: error: no viable overloaded '='
>    127 |     elements = elements0; weights = weights0;
>        |                           ~~~~~~~ ^ ~~~~~~~~
> ./gecode/kernel/data/shared-array.hpp:53:9: note: candidate function (the implicit copy assignment operator) not viable: 'this' argument has type 'const SharedArray<int>', but
>   method is not marked const
>     53 |   class SharedArray : public SharedHandle {
>        |         ^
>
> Additionally, gecode's ./configure wants to add --std=c++11 to the
> compiler command line. I don't know if linking C++20 and C++11 code
> would cause ABI problems, but it might better to configure gecode with
> --enable-cpp11=no (since Makevars already gives the compatible standard
> flag to ./configure).
>


From rmh @end|ng |rom temp|e@edu  Wed Jul 23 22:09:26 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 23 Jul 2025 20:09:26 +0000
Subject: [R-pkg-devel] [External]  compact vignettes
In-Reply-To: <26752.11619.121895.965023@rob.eddelbuettel.com>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
Message-ID: <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>

I still don't have the incantation correct
When I use
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot

I get   558910 bytes

When I use
R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
GS_QUALITY=ebook
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot

I get 558950 bytes

The bytecount for the package went up.

Transcript:


rmh at MacBook-Air-9 HH-R.package % echo $R_QPDF $R_GSCMD $GS_QUALITY
echo $R_QPDF $R_GSCMD $GS_QUALITY

rmh at MacBook-Air-9 HH-R.package % R CMD build --compact-vignettes=both microplot
R CMD build --compact-vignettes=both microplot
* checking for file ?microplot/DESCRIPTION? ... OK
* preparing ?microplot?:
* checking DESCRIPTION meta-information ... OK
* installing the package to process help pages
* saving partial Rd database
* creating vignettes ... OK
* compacting vignettes and other PDF files
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?MSWord_TablePlusGraphicColumn.Rold? ?NEWS-complete.Rold?
  ?dvi.latexConsole.Rold? ?latexCheckOptions.Rold?
  ?microplot.ggplot.Rpdf? ?microplot.ggplot.Rreusegeom?
  ?microplot_yfactor.ggplot.Rold? ?msWord.microplotMatrix_1.0.39.Rold?
Subdirectory 'man' contains invalid file names:
  ?MSWord.Rdold? ?MSWord_TablePlusGraphicColumn.Rdold?
  ?microplot.AEdotplot.Rdold? ?pdfMicroplot.Rdold? ?plot_grid.Rdold?
Subdirectory 'demo' contains invalid file names:
  ?LegendrePolynomials-msWord.rold? ?LegendrePolynomials-msWord.rold29?
  ?boxplot-ggplot-MSWord.rold? ?boxplot-ggplot.rold?
  ?boxplot-ggplot2.rold? ?bwplot-lattice-MSWord.rold?
  ?bwplot-lattice.r31? ?bwplot-lattice.rold? ?iris.rold?
  ?latex-ggplot.rreusegeom?
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a ?data/datalist? file should be added
* building ?microplot_1.0-47.tar.gz?

rmh at MacBook-Air-9 HH-R.package % ls -alF microplot_1.0-47.tar.gz
ls -alF microplot_1.0-47.tar.gz
-rw-r--r--  1 rmh  staff  558910 Jul 23 16:03 microplot_1.0-47.tar.gz


rmh at MacBook-Air-9 HH-R.package %R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
GS_QUALITY=ebook
echo $R_QPDF $R_GSCMD $GS_QUALITY
R CMD build --compact-vignettes=both microplot
R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
rmh at MacBook-Air-9 HH-R.package % R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
rmh at MacBook-Air-9 HH-R.package % GS_QUALITY=ebook
rmh at MacBook-Air-9 HH-R.package % echo $R_QPDF $R_GSCMD $GS_QUALITY
/Library/Frameworks/R.framework/Resources/bin/qpdf /usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs ebook
rmh at MacBook-Air-9 HH-R.package % R CMD build --compact-vignettes=both microplot
* checking for file ?microplot/DESCRIPTION? ... OK
* preparing ?microplot?:
* checking DESCRIPTION meta-information ... OK
* installing the package to process help pages
* saving partial Rd database
* creating vignettes ... OK
* compacting vignettes and other PDF files
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?MSWord_TablePlusGraphicColumn.Rold? ?NEWS-complete.Rold?
  ?dvi.latexConsole.Rold? ?latexCheckOptions.Rold?
  ?microplot.ggplot.Rpdf? ?microplot.ggplot.Rreusegeom?
  ?microplot_yfactor.ggplot.Rold? ?msWord.microplotMatrix_1.0.39.Rold?
Subdirectory 'man' contains invalid file names:
  ?MSWord.Rdold? ?MSWord_TablePlusGraphicColumn.Rdold?
  ?microplot.AEdotplot.Rdold? ?pdfMicroplot.Rdold? ?plot_grid.Rdold?
Subdirectory 'demo' contains invalid file names:
  ?LegendrePolynomials-msWord.rold? ?LegendrePolynomials-msWord.rold29?
  ?boxplot-ggplot-MSWord.rold? ?boxplot-ggplot.rold?
  ?boxplot-ggplot2.rold? ?bwplot-lattice-MSWord.rold?
  ?bwplot-lattice.r31? ?bwplot-lattice.rold? ?iris.rold?
  ?latex-ggplot.rreusegeom?
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a ?data/datalist? file should be added
* building ?microplot_1.0-47.tar.gz?

rmh at MacBook-Air-9 HH-R.package % ls -alF microplot_1.0-47.tar.gz
ls -alF microplot_1.0-47.tar.gz
-rw-r--r--  1 rmh  staff  558950 Jul 23 16:04 microplot_1.0-47.tar.gz
rmh at MacBook-Air-9 HH-R.package % 
> On Jul 22, 2025, at 20:31, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 23 July 2025 at 00:16, Richard M. Heiberger wrote:
> | I need some help on the compacting of pdf files in the inst/doc/ directory.
> | When I use the --compact-vignettes option, as in
> |   R CMD build --compact-vignettes microplot
> | the relevant pdf filesize drops 76 bytes.
> | 
> | The CRAN pretest makes it drop in size by 270 kilobytes
> | 
> | What incantation am I missing?
> 
> I use `--compact-vignettes=both` (encoded in wrapper script `build.r` which
> is part of my `littler` package).
> 
> One of those things that maybe should be a default but aren't...
> 
> Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 01:00:32 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 02:00:32 +0300
Subject: [R-pkg-devel] [External]  compact vignettes
In-Reply-To: <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
 <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
Message-ID: <20250724020032.0a4c60c3@Tarkus>

? Wed, 23 Jul 2025 20:09:26 +0000
"Richard M. Heiberger" <rmh at temple.edu> ?????:

> When I use
> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
> GS_QUALITY=ebook
> echo $R_QPDF $R_GSCMD $GS_QUALITY
> R CMD build --compact-vignettes=both microplot
> 
> I get 558950 bytes
> 
> The bytecount for the package went up.

Unfortunately, this seems to be very dependent on versions of software
in use, including LaTeX and Ghostscript (and fonts?). I can compress
your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
when I rebuild the package, I can only get down from 276Kb to 156Kb:

R -q -s -e '
 untar("microplot_1.0-47.tar.gz.orig");
 tools::compactPDF(
  "microplot/inst/doc",
  gs_cmd = "gs", gs_quality = "ebook",
  verbose = TRUE
 )
'
qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
#{pdf}s = length(paths) = 1
- microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0; 
    ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
  compacted ?rmhPoster.pdf? from 372Kb to 96Kb


LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
 --compact-vignettes=both microplot
<...>
* creating vignettes ... OK
<...>
* compacting vignettes and other PDF files
    compacted ?rmhPoster.pdf? from 276Kb to 156Kb

And 'gs --version' says '10.00.0', which shouldn't be that different
from your '10.03.0'!

-- 
Best regards,
Ivan


From rmh @end|ng |rom temp|e@edu  Thu Jul 24 03:52:11 2025
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 24 Jul 2025 01:52:11 +0000
Subject: [R-pkg-devel] [External]  [External]  compact vignettes
In-Reply-To: <20250724020032.0a4c60c3@Tarkus>
References: <9E054EEA-E7BC-4D50-84CB-972B44AF2326@temple.edu>
 <26752.11619.121895.965023@rob.eddelbuettel.com>
 <8D78165A-2BF6-4FF4-B142-A530912912F7@temple.edu>
 <20250724020032.0a4c60c3@Tarkus>
Message-ID: <FF79867A-02D1-4190-BD79-0D657DC745FC@temple.edu>

Ivan, 

I tried doing what you did and it increased the size by a factor of 10

> Sys.getenv("R_QPDF","R_GSCMD","GS_QUALITY")
[1] "/Library/Frameworks/R.framework/Resources/bin/qpdf"
> Sys.getenv("R_QPDF")
[1] "/Library/Frameworks/R.framework/Resources/bin/qpdf"
> Sys.getenv("R_GSCMD")
[1] "/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs"
> Sys.getenv("GS_QUALITY")
[1] "ebook"
> tools::compactPDF(
+ "microplot/inst/doc",
gs_cmd = "gs", gs_quality = "ebook",
+ verbose = TRUE)
+ qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
#{pdf}s = length(paths) = 1
- microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0; 
    ==> (new=3.73094e+06)/(old=380862) = 9.79603 .. not worth using
> 

Can you send me the 96Kb file?  I will then substitute it into microplot_1.0-47.tar.gz
and send that version to CRAN.

Thank you 
Rich


> On Jul 23, 2025, at 19:00, Ivan Krylov <ikrylov at disroot.org> wrote:
> 
> untar("microplot_1.0-47.tar.gz.orig");
> tools::compactPDF(
>  "microplot/inst/doc",
>  gs_cmd = "gs", gs_quality = "ebook",
>  verbose = TRUE
> )
> '


From j@g@nmn2 @end|ng |rom gm@||@com  Thu Jul 24 13:42:32 2025
From: j@g@nmn2 @end|ng |rom gm@||@com (Mikael Jagan)
Date: Thu, 24 Jul 2025 07:42:32 -0400
Subject: [R-pkg-devel] [External] compact vignettes
In-Reply-To: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
References: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
Message-ID: <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>

> Date: Thu, 24 Jul 2025 02:00:32 +0300
> From: Ivan Krylov<ikrylov at disroot.org>
> 
> ? Wed, 23 Jul 2025 20:09:26 +0000
> "Richard M. Heiberger"<rmh at temple.edu> ?????:
> 
>> When I use
>> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
>> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
>> GS_QUALITY=ebook
>> echo $R_QPDF $R_GSCMD $GS_QUALITY
>> R CMD build --compact-vignettes=both microplot
>>
>> I get 558950 bytes
>>
>> The bytecount for the package went up.
> Unfortunately, this seems to be very dependent on versions of software
> in use, including LaTeX and Ghostscript (and fonts?). I can compress
> your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
> when I rebuild the package, I can only get down from 276Kb to 156Kb:
> 
> R -q -s -e '
>   untar("microplot_1.0-47.tar.gz.orig");
>   tools::compactPDF(
>    "microplot/inst/doc",
>    gs_cmd = "gs", gs_quality = "ebook",
>    verbose = TRUE
>   )
> '
> qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
> #{pdf}s = length(paths) = 1
> - microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0;
>      ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
>    compacted ?rmhPoster.pdf? from 372Kb to 96Kb
> 
> 
> LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
>   --compact-vignettes=both microplot
> <...>
> * creating vignettes ... OK
> <...>
> * compacting vignettes and other PDF files
>      compacted ?rmhPoster.pdf? from 276Kb to 156Kb
> 
> And 'gs --version' says '10.00.0', which shouldn't be that different
> from your '10.03.0'!
> 

I build ghostscript from sources under macOS and upgrade the version
periodically.  I encountered the same issue last year and stayed at
10.02 until they released 10.04, because there was a clear regression
in 10.03.  I was never able to track down a relevant bug report, but
I never looked very hard ...

Mikael

> -- Best regards, Ivan


From j@g@nmn2 @end|ng |rom gm@||@com  Thu Jul 24 14:27:12 2025
From: j@g@nmn2 @end|ng |rom gm@||@com (Mikael Jagan)
Date: Thu, 24 Jul 2025 08:27:12 -0400
Subject: [R-pkg-devel] [External] compact vignettes
In-Reply-To: <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>
References: <mailman.11660.3.1753351201.44889.r-package-devel@r-project.org>
 <e4aea586-027c-4783-a9f7-92e353c9d9d8@gmail.com>
Message-ID: <6f2f1fb2-ef82-4f3b-b8a0-e90a04712067@gmail.com>



On 2025-07-24 7:42 am, Mikael Jagan wrote:
>> Date: Thu, 24 Jul 2025 02:00:32 +0300
>> From: Ivan Krylov<ikrylov at disroot.org>
>>
>> ? Wed, 23 Jul 2025 20:09:26 +0000
>> "Richard M. Heiberger"<rmh at temple.edu> ?????:
>>
>>> When I use
>>> R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
>>> R_GSCMD=/usr/local/bin/Cellar/ghostscript/10.03.0/bin/gs
>>> GS_QUALITY=ebook
>>> echo $R_QPDF $R_GSCMD $GS_QUALITY
>>> R CMD build --compact-vignettes=both microplot
>>>
>>> I get 558950 bytes
>>>
>>> The bytecount for the package went up.
>> Unfortunately, this seems to be very dependent on versions of software
>> in use, including LaTeX and Ghostscript (and fonts?). I can compress
>> your pre-built 372Kb vignette to 96Kb (as does the CRAN machine), but
>> when I rebuild the package, I can only get down from 276Kb to 156Kb:
>>
>> R -q -s -e '
>>    untar("microplot_1.0-47.tar.gz.orig");
>>    tools::compactPDF(
>>     "microplot/inst/doc",
>>     gs_cmd = "gs", gs_quality = "ebook",
>>     verbose = TRUE
>>    )
>> '
>> qs_quality="ebook" : use_gs=TRUE, use_qpdf=TRUE
>> #{pdf}s = length(paths) = 1
>> - microplot/inst/doc/rmhPoster.pdf:    gs: res=0;  + qpdf: res=0;
>>       ==> (new=98115)/(old=380862) = 0.257613 =====> using it !!
>>     compacted ?rmhPoster.pdf? from 372Kb to 96Kb
>>
>>
>> LANGUAGE=en R_GSCMD=gs GS_QUALITY=ebook R CMD build \
>>    --compact-vignettes=both microplot
>> <...>
>> * creating vignettes ... OK
>> <...>
>> * compacting vignettes and other PDF files
>>       compacted ?rmhPoster.pdf? from 276Kb to 156Kb
>>
>> And 'gs --version' says '10.00.0', which shouldn't be that different
>> from your '10.03.0'!
>>
> 
> I build ghostscript from sources under macOS and upgrade the version
> periodically.  I encountered the same issue last year and stayed at
> 10.02 until they released 10.04, because there was a clear regression
> in 10.03.  I was never able to track down a relevant bug report, but
> I never looked very hard ...
> 

By the way, as mentioned in WRE, you can get ghostscript from a full MacTeX
rather than Homebrew.  MacTex 2025 installs a binary ghostscript 10.04 under
/usr/local/bin.

Mikael

> Mikael
> 
>> -- Best regards, Ivan
>


From week@ @end|ng |rom p|tt@edu  Thu Jul 24 17:10:41 2025
From: week@ @end|ng |rom p|tt@edu (Weeks, Daniel E)
Date: Thu, 24 Jul 2025 15:10:41 +0000
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
Message-ID: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>

Last week I saw that someone requested help because expected e-mails from CRAN regarding an R package submission were not received.  I am afraid I may be in the same boat regarding trying to get our R package Mega2R fixed so it can be in CRAN again, as I received no response regarding my pointing out that the automated rejection of Mega2R is a false positive due to a compiler bug that is beyond my capability to fix.

I submitted Mega2R on July 14, 2025, and received an automated message that

package Mega2R_1.2.0.tar.gz does not pass the incoming checks automatically.

I responded as below that it was a false postive but did not receive any response after that.

--------------

I believe this rejection is a false positive due to a subtle compiler error.

In June, our Mega2R package was rejected due to a Warning that was generated during the CRAN checks. The Warning (which we are stilll seeing) was:

```
Flavor: r-devel-linux-x86_64-debian-special-gcc-san
Check: Post-processing issues found for gcc-san, Result: WARNING
   File: build_vignettes.log
   vendor/sqlite3/sqlite3.c:80239:14: runtime error: load of address
0x7faa31b1fa40 with insufficient space for an object of type 'struct
MemPage *'
```

As I explain below, I think this Warning is not due to any mistake in Mega2R code itself, but rather due to a compiler bug that is rarely encountered only under specific settings.  As such, I hope you will approve releasing Mega2R to CRAN based on the following due diligence investigations and findings:

Note that the Warning is generated by sqlite3 code so I opened a thread about it on the SQLite forum:

https://sqlite.org/forum/forumpost/e1015d1714

The conclusion of one investigation into this concludes that

"Because of the requirements to reproduce the issue, it looks like a compiler issue not a bug in SQLite"

Further checks of Mega2R

The Warning seen on the gcc-san test machine is not
reproducible on the other similar test machines. The warning is not reproducible on the other machines.

Further investigations via rhub

https://github.com/r-hub2/diplomatic-mole-Mega2R/actions

None of the checks on these machines reproduced the Warning seen on the gcc-san test machine:

clang-asan: All CRAN checks passed.

clang-ubsan: All CRAN checks passed.

valgrind: All CRAN checks passed.

m1-san (R-devel): The Warning seen on the CRAN gcc-san test machine was not observed.  However, there was an error involving `seqlevels<-` (which is also observed using R Under development (unstable) (2025-07-11 r88405)).  This is because the development version of `GenomeInfoDb` no longer contains the `seqlevels<-` function, which in the next release
will be moved into the Seqinfo package.  At that time, this Roxygen command

```
#' @importMethodsFrom GenomeInfoDb 'seqlevels<-'
```

will need to be updated.  For now, in the currently released versions of R such as R version 4.5.1 (2025-06-13), this is correct code.
------------------------



Thanks,

-- Dan --

Daniel E. Weeks, Ph.D.
Professor of Human Genetics
Professor of Biostatistics and Health Data Science
Department of Human Genetics
School of Public Health
University of Pittsburgh
Public Health 3119
130 DeSoto Street
Pittsburgh, PA 15261
USA

(412) 624-5388
FAX: (412) 624-3020



	[[alternative HTML version deleted]]


From m@rk@c|ement@ @end|ng |rom k|@@e  Thu Jul 24 17:15:35 2025
From: m@rk@c|ement@ @end|ng |rom k|@@e (Mark Clements)
Date: Thu, 24 Jul 2025 15:15:35 +0000
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a function`
Message-ID: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>

I am looking for guidance on how to debug a CRAN warning for a package (rstpm2). The warning is:

`Warning in formals(fun) : argument is not a function`

I tried debugging this by using:

.onLoad <- function(libname, pkgname) {
    trace("formals", tracer = quote({
        cat(">>> formals called in R CMD check with object of class:", class(fun), "\n")
        print(sys.calls())
    }), print = FALSE)
}

At package installation, this showed that some formals() were called with objects of class derivedDefaultMethod -- however I am not certain _which_ objects cause this issue. (I realise that this suggests an issue with S3 versus S4 classes -- if that helps.) Does anyone have experience with debugging such warnings? Any guidance would be appreciated.

Sincerely, Mark.


N?r du skickar e-post till Karolinska Institutet (KI) inneb?r detta att KI kommer att behandla dina personuppgifter. H?r finns information om hur KI behandlar personuppgifter<https://ki.se/om-ki/integritetsskyddspolicy>.


Sending email to Karolinska Institutet (KI) will result in KI processing your personal data. You can read more about KI?s processing of personal data here<https://staff.ki.se/data-protection-policy>.

From kev|nu@hey @end|ng |rom gm@||@com  Thu Jul 24 18:48:58 2025
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Thu, 24 Jul 2025 09:48:58 -0700
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
In-Reply-To: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
References: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
Message-ID: <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>

https://gcc.gnu.org/bugzilla/show_bug.cgi?id=120837 suggests it's a
compiler bug; hopefully the issue will go away once the version of gcc
used on these CRAN check machines is updated.

On Thu, Jul 24, 2025 at 8:10?AM Weeks, Daniel E <weeks at pitt.edu> wrote:
>
> Last week I saw that someone requested help because expected e-mails from CRAN regarding an R package submission were not received.  I am afraid I may be in the same boat regarding trying to get our R package Mega2R fixed so it can be in CRAN again, as I received no response regarding my pointing out that the automated rejection of Mega2R is a false positive due to a compiler bug that is beyond my capability to fix.
>
> I submitted Mega2R on July 14, 2025, and received an automated message that
>
> package Mega2R_1.2.0.tar.gz does not pass the incoming checks automatically.
>
> I responded as below that it was a false postive but did not receive any response after that.
>
> --------------
>
> I believe this rejection is a false positive due to a subtle compiler error.
>
> In June, our Mega2R package was rejected due to a Warning that was generated during the CRAN checks. The Warning (which we are stilll seeing) was:
>
> ```
> Flavor: r-devel-linux-x86_64-debian-special-gcc-san
> Check: Post-processing issues found for gcc-san, Result: WARNING
>    File: build_vignettes.log
>    vendor/sqlite3/sqlite3.c:80239:14: runtime error: load of address
> 0x7faa31b1fa40 with insufficient space for an object of type 'struct
> MemPage *'
> ```
>
> As I explain below, I think this Warning is not due to any mistake in Mega2R code itself, but rather due to a compiler bug that is rarely encountered only under specific settings.  As such, I hope you will approve releasing Mega2R to CRAN based on the following due diligence investigations and findings:
>
> Note that the Warning is generated by sqlite3 code so I opened a thread about it on the SQLite forum:
>
> https://sqlite.org/forum/forumpost/e1015d1714
>
> The conclusion of one investigation into this concludes that
>
> "Because of the requirements to reproduce the issue, it looks like a compiler issue not a bug in SQLite"
>
> Further checks of Mega2R
>
> The Warning seen on the gcc-san test machine is not
> reproducible on the other similar test machines. The warning is not reproducible on the other machines.
>
> Further investigations via rhub
>
> https://github.com/r-hub2/diplomatic-mole-Mega2R/actions
>
> None of the checks on these machines reproduced the Warning seen on the gcc-san test machine:
>
> clang-asan: All CRAN checks passed.
>
> clang-ubsan: All CRAN checks passed.
>
> valgrind: All CRAN checks passed.
>
> m1-san (R-devel): The Warning seen on the CRAN gcc-san test machine was not observed.  However, there was an error involving `seqlevels<-` (which is also observed using R Under development (unstable) (2025-07-11 r88405)).  This is because the development version of `GenomeInfoDb` no longer contains the `seqlevels<-` function, which in the next release
> will be moved into the Seqinfo package.  At that time, this Roxygen command
>
> ```
> #' @importMethodsFrom GenomeInfoDb 'seqlevels<-'
> ```
>
> will need to be updated.  For now, in the currently released versions of R such as R version 4.5.1 (2025-06-13), this is correct code.
> ------------------------
>
>
>
> Thanks,
>
> -- Dan --
>
> Daniel E. Weeks, Ph.D.
> Professor of Human Genetics
> Professor of Biostatistics and Health Data Science
> Department of Human Genetics
> School of Public Health
> University of Pittsburgh
> Public Health 3119
> 130 DeSoto Street
> Pittsburgh, PA 15261
> USA
>
> (412) 624-5388
> FAX: (412) 624-3020
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 22:07:02 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 23:07:02 +0300
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a
 function`
In-Reply-To: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
References: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
Message-ID: <20250724230702.071cd6a2@Tarkus>

? Thu, 24 Jul 2025 15:15:35 +0000
Mark Clements <mark.clements at ki.se> ?????:

> I am looking for guidance on how to debug a CRAN warning for a
> package (rstpm2). The warning is:
> 
> `Warning in formals(fun) : argument is not a function`

Could you please provide some more information on where you encounter
it and how it may be reproduced? I don't see it mentioned at
<https://cran.r-project.org/web/checks/check_results_rstpm2.html>, nor
I see a recent incoming_pretest failure, but I do see some problems
regarding constants being overwritten at
<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2>.
It's not impossible that the root cause of this warning is the same
(although it's also plausible that it's different).

> At package installation, this showed that some formals() were called
> with objects of class derivedDefaultMethod -- however I am not
> certain _which_ objects cause this issue.

I think this is a red herring: a derivedDefaultMethod is a function and
doesn't cause this warning by itself:

getClass('derivedDefaultMethod') |> new(\(foo=bar) baz) |> formals()
# $foo
# bar

> Does anyone have experience with debugging such warnings?

If you can reproduce the warning, try doing so with options(warn = 2,
error = recover) set.

-- 
Best regards,
Ivan


From |kry|ov @end|ng |rom d|@root@org  Thu Jul 24 22:27:57 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 24 Jul 2025 23:27:57 +0300
Subject: [R-pkg-devel] Mega2R CRAN submission: false positive
In-Reply-To: <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>
References: <CH0PR04MB80512A61ABD3342BC64908B0D65EA@CH0PR04MB8051.namprd04.prod.outlook.com>
 <CAJXgQP0c7G1g1E+Zoga=M3JEqSAzYnWx25B_6JhBYEiBReB2LQ@mail.gmail.com>
Message-ID: <20250724232757.64e495e8@Tarkus>

? Thu, 24 Jul 2025 09:48:58 -0700
Kevin Ushey <kevinushey at gmail.com> ?????:

> hopefully the issue will go away once the version of gcc
> used on these CRAN check machines is updated

Or when SQLite 3.51.0 comes out, containing the workaround for the
compiler bug, and RSQLite is released with the updated version of
SQLite.

At the very least, the RSQLite maintainer is aware of the problem:
https://github.com/r-dbi/RSQLite/issues/564#issuecomment-3019228955

-- 
Best regards,
Ivan


From m@rk@c|ement@ @end|ng |rom k|@@e  Fri Jul 25 16:39:36 2025
From: m@rk@c|ement@ @end|ng |rom k|@@e (Mark Clements)
Date: Fri, 25 Jul 2025 14:39:36 +0000
Subject: [R-pkg-devel] `Warning in formals(fun) : argument is not a
 function`
In-Reply-To: <20250724230702.071cd6a2@Tarkus>
References: <GV3P280MB0001D488C55C4047D0E73475F05EA@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>
 <20250724230702.071cd6a2@Tarkus>
Message-ID: <GV3P280MB00011938B5D94102422F1C9FF059A@GV3P280MB0001.SWEP280.PROD.OUTLOOK.COM>

Ivan: thank you for your reply.

I have now resolved this issue. I had an error with specifying an S4 implementation and its documentation. For debugging, I: (a) checked that a previous package version worked with a recent R development version; (b) used tools::codoc() to check the documentation (see the test-codoc task in $(RSRC)/tests/Makefile.common), using Ivan's suggested options() to recover from a warning; and (c) checked whether the S4 class had the available method.

Sincerely, Mark.
________________________________
From: Ivan Krylov <ikrylov at disroot.org>
Sent: 24 July 2025 22:07
To: Mark Clements <mark.clements at ki.se>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] `Warning in formals(fun) : argument is not a function`

? Thu, 24 Jul 2025 15:15:35 +0000
Mark Clements <mark.clements at ki.se> ?????:

> I am looking for guidance on how to debug a CRAN warning for a
> package (rstpm2). The warning is:
>
> `Warning in formals(fun) : argument is not a function`

Could you please provide some more information on where you encounter
it and how it may be reproduced? I don't see it mentioned at
<https://cran.r-project.org/web/checks/check_results_rstpm2.html<https://cran.r-project.org/web/checks/check_results_rstpm2.html>>, nor
I see a recent incoming_pretest failure, but I do see some problems
regarding constants being overwritten at
<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2<https://github.com/kalibera/cran-checks/tree/master/rcnst/results/rstpm2>>.
It's not impossible that the root cause of this warning is the same
(although it's also plausible that it's different).

> At package installation, this showed that some formals() were called
> with objects of class derivedDefaultMethod -- however I am not
> certain _which_ objects cause this issue.

I think this is a red herring: a derivedDefaultMethod is a function and
doesn't cause this warning by itself:

getClass('derivedDefaultMethod') |> new(\(foo=bar) baz) |> formals()
# $foo
# bar

> Does anyone have experience with debugging such warnings?

If you can reproduce the warning, try doing so with options(warn = 2,
error = recover) set.

--
Best regards,
Ivan



Nar du skickar e-post till Karolinska Institutet (KI) innebar detta att KI kommer att behandla dina personuppgifter. Har finns information om hur KI behandlar personuppgifter<https://ki.se/om-ki/integritetsskyddspolicy>.


Sending email to Karolinska Institutet (KI) will result in KI processing your personal data. You can read more about KI's processing of personal data here<https://staff.ki.se/data-protection-policy>.

	[[alternative HTML version deleted]]


From @ndrew@john@on @end|ng |rom @rjohn@on@u@com  Sun Jul 27 09:57:39 2025
From: @ndrew@john@on @end|ng |rom @rjohn@on@u@com (Andrew Johnson)
Date: Sun, 27 Jul 2025 07:57:39 +0000
Subject: [R-pkg-devel] NOTE: Installation took CPU time 3.5 times elapsed
 time
Message-ID: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>

Hi All,

When submitting a package to CRAN, I?m seeing a note for the installation CPU time being greater than the elapsed time. Normally I?d assume this would be due to some configuration running the compilation in parallel, but I haven?t set this in my package at all. Is this something that anyone has seen before and would know what to change?

Check result is here: https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00check.log

And package source is here: https://github.com/andrjohns/boostmath

Thanks!
Andrew

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Jul 28 13:45:06 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 28 Jul 2025 06:45:06 -0500
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <26759.25282.957842.902833@rob.eddelbuettel.com>


On 27 July 2025 at 07:57, Andrew Johnson wrote:
| When submitting a package to CRAN, I?m seeing a note for the installation CPU time being greater than the elapsed time. Normally I?d assume this would be due to some configuration running the compilation in parallel, but I haven?t set this in my package at all. Is this something that anyone has seen before and would know what to change?
| 
| Check result is here: https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00check.log

[ Aside: Interestingly that Windows check does not warn about excessive test time,
  whereas it does on my machine. I presume you opted to skip tests as CRAN to
  keep within their limit? ]

For tests and examples we know we are asked to over options(Ncpus) and alike;
I am not aware we can override a MAKEFLAGS="-j SOMELARGENUMBER" if it is set
so I am a little stunned.

The only thing that is different in your package is the use of UseLTO you now
added in this release.  If that this new in 1.0.1, maybe it is the difference
maker?  [ And I just validated it: removing that last line from DESCRIPTION
removes the compilation time NOTE. ] So that seems to be something you may
need to sort out with CRAN and their setup.
 
| And package source is here: https://github.com/andrjohns/boostmath

I sent you a courtesy PR as I noticed that we may be able to improve the
link(s) to Boost documentation.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Tue Jul 29 12:33:17 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 29 Jul 2025 13:33:17 +0300
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <26759.25282.957842.902833@rob.eddelbuettel.com>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
Message-ID: <20250729133317.7af0791c@arachnoid>

Dear Dirk,

On Mon, 28 Jul 2025 06:45:06 -0500
Dirk Eddelbuettel <edd at debian.org> wrote:

> And I just validated it: removing that last line from DESCRIPTION
> removes the compilation time NOTE.

This must be the culprit. The 00install.out file [1] shows -flto=8 being
used, which GCC documentation [2] describes as "use 8 threads for LTO":

>> If you specify the optional n [in -flto=n], the optimization and
>> code generation done at link time is executed in parallel using n
>> parallel jobs by utilizing an installed make program. The
>> environment variable MAKE may be used to override the program used. 

I think this was set in the Makeconf on the machine running the
"gcc-san" special checks; I don't see anything in the package that
would set 8 threads in particular. R itself, when configured with
--enable-lto, only sets -flto, not -flto=8.

-- 
Best regards,
Ivan

[1]
https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00install.out

[2]
https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-flto


From edd @end|ng |rom deb|@n@org  Tue Jul 29 14:25:46 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 29 Jul 2025 07:25:46 -0500
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <20250729133317.7af0791c@arachnoid>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
 <20250729133317.7af0791c@arachnoid>
Message-ID: <26760.48586.303951.649894@rob.eddelbuettel.com>


Hi Ivan,

On 29 July 2025 at 13:33, Ivan Krylov via R-package-devel wrote:
| On Mon, 28 Jul 2025 06:45:06 -0500
| Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| > And I just validated it: removing that last line from DESCRIPTION
| > removes the compilation time NOTE.
| 
| This must be the culprit. The 00install.out file [1] shows -flto=8 being
| used, which GCC documentation [2] describes as "use 8 threads for LTO":
| 
| >> If you specify the optional n [in -flto=n], the optimization and
| >> code generation done at link time is executed in parallel using n
| >> parallel jobs by utilizing an installed make program. The
| >> environment variable MAKE may be used to override the program used. 
| 
| I think this was set in the Makeconf on the machine running the
| "gcc-san" special checks; I don't see anything in the package that
| would set 8 threads in particular. R itself, when configured with
| --enable-lto, only sets -flto, not -flto=8.

That's good sleuthing, as usual. But note that my machine has no -flto=$N for
some N but rather '-flto=auto' which also results in the NOTE.

So an extra check may be needed to not issue the nag if LTO is used?

Dirk

| -- 
| Best regards,
| Ivan
| 
| [1]
| https://win-builder.r-project.org/incoming_pretest/boostmath_1.0.1_20250727_090857/specialChecks/gcc-san/package/00install.out
| 
| [2]
| https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-flto
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Wed Jul 30 23:48:05 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 31 Jul 2025 00:48:05 +0300
Subject: [R-pkg-devel] 
 NOTE: Installation took CPU time 3.5 times elapsed time
In-Reply-To: <26760.48586.303951.649894@rob.eddelbuettel.com>
References: <SY3PPF8CBDD8E6EE1AB962BC02AF1063692975BA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <26759.25282.957842.902833@rob.eddelbuettel.com>
 <20250729133317.7af0791c@arachnoid>
 <26760.48586.303951.649894@rob.eddelbuettel.com>
Message-ID: <20250731004805.6f55a704@Tarkus>

On Tue, 29 Jul 2025 07:25:46 -0500
Dirk Eddelbuettel <edd at debian.org> wrote:

> But note that my machine has no -flto=$N for
> some N but rather '-flto=auto' which also results in the NOTE.
> 
> So an extra check may be needed to not issue the nag if LTO is used?

You're right, -flto=auto chooses the number of LTO processes
automatically if the Make jobserver is not available. Rven if I set
MAKEFLAGS=-j2 before running R CMD INSTALL, that information is not
propagated to g++, so it runs on all logical processors.

This could be the only way to make GCC use noticeably more than one
process by itself, I couldn't find anything else right now.

As a short-term solution, the "specialChecks" system operated by Prof.
Kurt Hornik can switch to -flto=2. For the more distant future, making
this message "INFO" instead of "NOTE" or possibly raising the limit
when LTO is used could make sense.

-- 
Best regards,
Ivan


From greg @end|ng |rom ||rm@n@y@h@com  Fri Aug  1 00:17:00 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Fri, 1 Aug 2025 08:17:00 +1000
Subject: [R-pkg-devel] unable to verify current time
Message-ID: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>

I noticed recently that check --as-cran was hanging and then emitting a
message about not being able to verify the current time.  It seems that the
CRAN check code is using some website to get the current clock time and
that that site is currently down.  This strikes me as an odd approach to
getting the current time.  Why was that approach taken when NTP is
available on all mainstream OSs?   Is there something unusual about the
CRAN environment?

Greg

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Aug  1 00:41:24 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 1 Aug 2025 10:41:24 +1200
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
Message-ID: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>

1) R has no native NTP client
2) outside NTP access is very often blocked on local networks (and local NTP relay requires configuration for which there is no standard)
3) it is overkill as we don?t need microsecond accuracy so a single HTTP(s) request is much easier


> On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> 
> I noticed recently that check --as-cran was hanging and then emitting a message about not being able to verify the current time.  It seems that the CRAN check code is using some website to get the current clock time and that that site is currently down.  This strikes me as an odd approach to getting the current time.  Why was that approach taken when NTP is available on all mainstream OSs?   Is there something unusual about the CRAN environment?
> 
> Greg
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jon@@ko|en @end|ng |rom gm@||@com  Thu Jul 31 11:09:39 2025
From: jon@@ko|en @end|ng |rom gm@||@com (Jon Olav Skoien)
Date: Thu, 31 Jul 2025 11:09:39 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
Message-ID: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>

One of my packages failed the noSuggests test, and needs to be
updated. Fair enough, a suggested package was used unconditionally
both in an example and in a test. From what I understood, a solution
is to wrap this part of the code inside
if (require("suggestedPackage")) {useSuggestedPackage}
However, it still fails the noSuggests test, this time because the
output does not match the test.Rout.save-file. This is also clear, as
some of the code is not executed, and some output is missing.

How do I get around this?
I could use ## IGNORE_RDIFF_BEGIN and ## IGNORE_RDIFF_END before and
after the if (require())  clause, but then this part would not be
tested when the suggested package is available either. I don't like
this solution, as it means the interaction between the two packages
will not be checked.

Am I missing something? Is there a different way of conditionally
using the suggested package? Or do I have to use the IGNORE_RDIFF
method?

Thanks,
Jon


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Fri Aug  1 15:56:42 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Fri, 1 Aug 2025 15:56:42 +0200
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
 <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
Message-ID: <CAN+W6_sYMEUrNBQjMqzy_MwrDopgdbJFX9T7fsF27nYC0E9ytw@mail.gmail.com>

Greg,

If the problem is in your local checks you can
add _R_CHECK_SYSTEM_CLOCK_=FALSE to your .Renviron to omit that check.
See R internals (which documents CRAN's default too) [1].

Best,

Llu?s


[1]:
https://cran.r-project.org/doc/manuals/r-devel/R-ints.html#index-_005fR_005fCHECK_005fSYSTEM_005fCLOCK_005f

On Fri, 1 Aug 2025 at 00:41, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> 1) R has no native NTP client
> 2) outside NTP access is very often blocked on local networks (and local
> NTP relay requires configuration for which there is no standard)
> 3) it is overkill as we don?t need microsecond accuracy so a single
> HTTP(s) request is much easier
>
>
> > On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> >
> > I noticed recently that check --as-cran was hanging and then emitting a
> message about not being able to verify the current time.  It seems that the
> CRAN check code is using some website to get the current clock time and
> that that site is currently down.  This strikes me as an odd approach to
> getting the current time.  Why was that approach taken when NTP is
> available on all mainstream OSs?   Is there something unusual about the
> CRAN environment?
> >
> > Greg
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Fri Aug  1 16:01:51 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 1 Aug 2025 17:01:51 +0300
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <20250801170151.1080e1d1@arachnoid>

? Thu, 31 Jul 2025 11:09:39 +0200
Jon Olav Skoien <jon.skoien at gmail.com> ?????:

> From what I understood, a solution is to wrap this part of the code
> inside if (require("suggestedPackage")) {useSuggestedPackage}

Correct! (requireNamespace(...) is also a good option if you don't
intend to use the package directly and are instead testing your
package's internal use of its optional dependency.)

> However, it still fails the noSuggests test, this time because the
> output does not match the test.Rout.save-file. This is also clear, as
> some of the code is not executed, and some output is missing.

There may be no good solution for "reference output" tests when some of
their dependencies are optional. Without bringing in a test framework,
I've only seen kludges, such as the test printing reference output when
the optional dependency is missing:

https://github.com/Rdatatable/data.table/blob/8039a230b0ebbcc8ca9ea86e84d7c378e00b9d51/tests/knitr.R#L2-L3

I wouldn't call it a beautiful solution, but it does work.

-- 
Best regards,
Ivan


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Fri Aug  1 16:18:51 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Fri, 1 Aug 2025 16:18:51 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <CAN+W6_toAD=1bVrqJwMKLeR5diPQfnj0tECm-MhUjrnpRrnDsg@mail.gmail.com>

To check the existence of a suggested package it is recommended to use
requireNamespace("suggested", quiet = TRUE). See the solution for
examples on the CRAN cookbook [1].

On tests, it depends on the approach you use.
It seems that you don't use any testing package for it (tinytest,
testthat, ...).
I think you could rely on the actual objects and not compare with a
saved output of tests.
Instead of:

> obj
[1] "test1"

Use something like in a plain R file:
stopifnot(identical(obj, "test1"))

This is how it is done on base R itself that checks if MASS is
installed and performs some checks conditionally.
See example on a mirror: [2].
Hope this helps,

Llu?s

[1]: https://contributor.r-project.org/cran-cookbook/general_issues.html
[2]: https://github.com/r-devel/r-svn/blob/fb206acc9f17c30d91c528efca9a368c69d5015b/src/library/stats/tests/ig_glm.R


On Fri, 1 Aug 2025 at 15:23, Jon Olav Skoien <jon.skoien at gmail.com> wrote:
>
> One of my packages failed the noSuggests test, and needs to be
> updated. Fair enough, a suggested package was used unconditionally
> both in an example and in a test. From what I understood, a solution
> is to wrap this part of the code inside
> if (require("suggestedPackage")) {useSuggestedPackage}
> However, it still fails the noSuggests test, this time because the
> output does not match the test.Rout.save-file. This is also clear, as
> some of the code is not executed, and some output is missing.
>
> How do I get around this?
> I could use ## IGNORE_RDIFF_BEGIN and ## IGNORE_RDIFF_END before and
> after the if (require())  clause, but then this part would not be
> tested when the suggested package is available either. I don't like
> this solution, as it means the interaction between the two packages
> will not be checked.
>
> Am I missing something? Is there a different way of conditionally
> using the suggested package? Or do I have to use the IGNORE_RDIFF
> method?
>
> Thanks,
> Jon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@meyer @end|ng |rom |@u@de  Fri Aug  1 16:20:04 2025
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 1 Aug 2025 16:20:04 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
Message-ID: <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>

Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
> Is there a different way of conditionally
> using the suggested package? Or do I have to use the IGNORE_RDIFF
> method?

To use *reference output* for optional tests, you could move these tests 
to a dedicated script with a corresponding .Rout.save file, put the 
files in a tests/ subdirectory, and use an .Rin file to include them 
only if the suggested package is available. I implemented a similar 
approach in the 'nlme' package to run extra tests with reference output 
conditionally on an environment variable, see 
<https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for 
inspiration.

-- 
Sebastian Meyer


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Aug  1 16:39:42 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 1 Aug 2025 07:39:42 -0700
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
 <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
Message-ID: <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>

I would emphasize/paraphrase Ivan's point -- using goldens (.Rout.save) for
such tests is quite a headache. We do so for a very limited number of tests
in {data.table} (something like 10 tests of over 10,000).

You could instead change the tests of Suggests behavior to be based on
expectations, be that a framework like {testthat}/{RUnit}/{assertthat} or
just the built-in tooling like stopifnot(), where you just quit/skip the
checks when Suggests are unavailable.

Of course if you have a strong affinity for golden tests you can just split
things into multiple test files. If it is a huge pain to disentangle which
tests rely on Suggests behavior, that is a decent sign to me that maybe
that package is not Suggests after all.

Mike C

On Fri, Aug 1, 2025, 7:29?AM Sebastian Meyer <seb.meyer at fau.de> wrote:

> Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
> > Is there a different way of conditionally
> > using the suggested package? Or do I have to use the IGNORE_RDIFF
> > method?
>
> To use *reference output* for optional tests, you could move these tests
> to a dedicated script with a corresponding .Rout.save file, put the
> files in a tests/ subdirectory, and use an .Rin file to include them
> only if the suggested package is available. I implemented a similar
> approach in the 'nlme' package to run extra tests with reference output
> conditionally on an environment variable, see
> <https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for
> inspiration.
>
> --
> Sebastian Meyer
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jon@@ko|en @end|ng |rom gm@||@com  Fri Aug  1 17:48:25 2025
From: jon@@ko|en @end|ng |rom gm@||@com (Jon Olav Skoien)
Date: Fri, 1 Aug 2025 17:48:25 +0200
Subject: [R-pkg-devel] Problem passing noSuggests test
In-Reply-To: <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>
References: <CAOh2hrH+mFWwjWWaMzjCkobfUFpLHhm0Lb4RNEJcBto=08WLjA@mail.gmail.com>
 <9778ff63-6405-4c93-8366-52a999fd61ee@fau.de>
 <CAPRVBczNGnkf4hu=FsGnYxs37LCtJ6c0Dok00CYkXJi3RFszgQ@mail.gmail.com>
Message-ID: <CAOh2hrEx4NBw1-MpevCXmj65anq8EMSiDJPVx9f7y6asMNYrgA@mail.gmail.com>

Thank you for all answers!
I agree that adopting a testing framework would be a better approach
for future packages. However, as this particular package is not under
active development, I was particularly looking for solutions that
required less modifications of the current code.

And from the answers and the code in the MASS-example, it seems the
most straightforward fix in my particular case is to replace the print
statements with stopifnot(all.equal(...)). The suggested package
should in my case not produce different output than the original
package, it just offers a different way of computing the same result
when the two of them interact correctly. While I will not use the
.rout.save modification examples here, they could be useful for other
scenarios and for others who encounter this thread in the future.

Thanks and best wishes,
Jon

On Fri, 1 Aug 2025 at 16:39, Michael Chirico <michaelchirico4 at gmail.com> wrote:
>
> I would emphasize/paraphrase Ivan's point -- using goldens (.Rout.save) for such tests is quite a headache. We do so for a very limited number of tests in {data.table} (something like 10 tests of over 10,000).
>
> You could instead change the tests of Suggests behavior to be based on expectations, be that a framework like {testthat}/{RUnit}/{assertthat} or just the built-in tooling like stopifnot(), where you just quit/skip the checks when Suggests are unavailable.
>
> Of course if you have a strong affinity for golden tests you can just split things into multiple test files. If it is a huge pain to disentangle which tests rely on Suggests behavior, that is a decent sign to me that maybe that package is not Suggests after all.
>
> Mike C
>
> On Fri, Aug 1, 2025, 7:29?AM Sebastian Meyer <seb.meyer at fau.de> wrote:
>>
>> Am 31.07.25 um 11:09 schrieb Jon Olav Skoien:
>> > Is there a different way of conditionally
>> > using the suggested package? Or do I have to use the IGNORE_RDIFF
>> > method?
>>
>> To use *reference output* for optional tests, you could move these tests
>> to a dedicated script with a corresponding .Rout.save file, put the
>> files in a tests/ subdirectory, and use an .Rin file to include them
>> only if the suggested package is available. I implemented a similar
>> approach in the 'nlme' package to run extra tests with reference output
>> conditionally on an environment variable, see
>> <https://svn.r-project.org/R-packages/trunk/nlme/tests/extras.Rin> for
>> inspiration.
>>
>> --
>> Sebastian Meyer
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Aug  6 17:56:07 2025
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 6 Aug 2025 16:56:07 +0100
Subject: [R-pkg-devel] My package CECPfuns on github has branches main and
 gh-pages badly out of synch
Message-ID: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>

Sorry for a very trivial issue at one edge of R package management: use 
of github.

My package (https://github.com/cpsyctc/CECPfuns) is mostly very simple 
as I am entirely self-taught as a statistics user and R programmer and 
as I am ageing! ? (I was a fairly good psychiatrist and psychotherapist 
and still am a pretty productive researcher I think!)

The package is mostly aimed at people like me who find R amazingly 
helpful but who sometimes struggle with the documentation, warnings and 
error messages. Hence a lot of it is trivial but is trying to wrap 
things up to give end users reasonable help, the odd vignette (not 
enough currently) and good input sanity checking and non-geek worded 
warnings and errors.

OK enough of the apologies.? I have always found git and github in the 
"dark arts" side of things but I thought that pushing my commits (from 
within a package worked on locally in Rstudio) was working for updating 
the package and mostly I thought the evidence was that it was.? Clearly 
I wasn't checking well enough.

At some point I clearly created a gh-pages branch and I think that was 
to get github to create the user friendly html page(s) about the 
package.? Reading the web now and trying to separate up to date from old 
advice from out of date advice I think this is no longer necessary and I 
could get the html from the main branch and ditch the gh-pages branch.

However, as the subject line says, I now see that the two branches are 
badly out of synch. Github says that main is my default branch and 
gh-pages an active branch and at the moment both say they were last 
updated six hours ago which was when I last pushed changes up.? However, 
gh-pages says its behind:ahead count is 100:31 which sounds nasty and I 
don't think my use of pkgdown and things in /doc and /docs are updating 
correctly.

Having scoured the web for help on this I am rattled and reaching out 
for hel. As I say above, I think using gh-pages is no longer necessary 
and I would like to synchronise the two branches if that is possible 
then delete the gh-pages branch and then get my courage up and try to 
get back to understanding how best to document things with github pages 
and with pkgdown.

I know this is very small beer against the fascinating things I read 
here but I hope someone can look at my mess and point me to safe ways 
forward.

Thanks in advance and more generally, thanks for the list which is, 
though often way beyond what I need, always educational for me.

Chris

-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador
CORE site: http://www.coresystemtrust.org.uk 
<https://www.coresystemtrust.org.uk/>
Other work web site: https://www.psyctc.org/psyctc/
Personal site: https://www.psyctc.org/pelerinage2016/


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Wed Aug  6 18:00:56 2025
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Wed, 6 Aug 2025 09:00:56 -0700
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
Message-ID: <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>

Hey Chris,

Have a look at the actual list of commits in your gh-pages vs. main
branches, I suspect you'll spot what's going on pretty quickly :)

https://github.com/cpsyctc/CECPfuns/commits/gh-pages/

vs

https://github.com/cpsyctc/CECPfuns/commits/main/

Mike C

On Wed, Aug 6, 2025 at 8:56?AM Chris Evans <chrishold at psyctc.org> wrote:

> Sorry for a very trivial issue at one edge of R package management: use
> of github.
>
> My package (https://github.com/cpsyctc/CECPfuns) is mostly very simple
> as I am entirely self-taught as a statistics user and R programmer and
> as I am ageing!   (I was a fairly good psychiatrist and psychotherapist
> and still am a pretty productive researcher I think!)
>
> The package is mostly aimed at people like me who find R amazingly
> helpful but who sometimes struggle with the documentation, warnings and
> error messages. Hence a lot of it is trivial but is trying to wrap
> things up to give end users reasonable help, the odd vignette (not
> enough currently) and good input sanity checking and non-geek worded
> warnings and errors.
>
> OK enough of the apologies.  I have always found git and github in the
> "dark arts" side of things but I thought that pushing my commits (from
> within a package worked on locally in Rstudio) was working for updating
> the package and mostly I thought the evidence was that it was.  Clearly
> I wasn't checking well enough.
>
> At some point I clearly created a gh-pages branch and I think that was
> to get github to create the user friendly html page(s) about the
> package.  Reading the web now and trying to separate up to date from old
> advice from out of date advice I think this is no longer necessary and I
> could get the html from the main branch and ditch the gh-pages branch.
>
> However, as the subject line says, I now see that the two branches are
> badly out of synch. Github says that main is my default branch and
> gh-pages an active branch and at the moment both say they were last
> updated six hours ago which was when I last pushed changes up.  However,
> gh-pages says its behind:ahead count is 100:31 which sounds nasty and I
> don't think my use of pkgdown and things in /doc and /docs are updating
> correctly.
>
> Having scoured the web for help on this I am rattled and reaching out
> for hel. As I say above, I think using gh-pages is no longer necessary
> and I would like to synchronise the two branches if that is possible
> then delete the gh-pages branch and then get my courage up and try to
> get back to understanding how best to document things with github pages
> and with pkgdown.
>
> I know this is very small beer against the fascinating things I read
> here but I hope someone can look at my mess and point me to safe ways
> forward.
>
> Thanks in advance and more generally, thanks for the list which is,
> though often way beyond what I need, always educational for me.
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador
> CORE site: http://www.coresystemtrust.org.uk
> <https://www.coresystemtrust.org.uk/>
> Other work web site: https://www.psyctc.org/psyctc/
> Personal site: https://www.psyctc.org/pelerinage2016/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Aug  6 22:13:00 2025
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 6 Aug 2025 21:13:00 +0100
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
 <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
Message-ID: <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>

Thanks very much.

Ouch, well clearly it would have been a help had I known to do that.? 
Got it and you are correct: whipping long quiescent neurons into action 
finally sorted this out.? It's edge or corner case stuff here I guess 
but may be useful to have in the archives for someone else some day.

What I had forgotten was that I had used the pkgdown package to invoke 
the gh-pages branch (done automatically I think which contributed to my 
forgetting it). That, with a CNAME entry in my DNS four years back, maps 
cpsyctc.github.io to https://cecpfuns.psyctc.org/ (the URL is given to 
github via the first line of _pkgdown.yml). That means that github then 
magically does the pkgdown thing updating the gh-pages branch and that 
is then accessible at https://cecpfuns.psyctc.org/.? As far as I can 
see, the ahead:behind count for the gh-pages branch in github is pretty 
meaningless here.? Someone please correct me if I am wrong about that.

What threw me off was another bit of forgetting: though I was updating 
the package version number in NEWS.md, I was forgetting to update it in 
DESCRIPTION so when I looked at https://cecpfuns.psyctc.org/ I saw the 
old version number and thought the process wasn't working.

Solved!? I have added some notes, largely to myself to make up for 
crumbling memory, to my Rblog (https://www.psyctc.org/Rblog/) at
https://www.psyctc.org/Rblog/posts/2021-02-10-making-my-first-usable-package/#using-github-pages-and-pkgdown-to-create-a-page-about-the-package

Apologies for bandwidth and thanks again for the list,

Chris


On 06/08/2025 17:00, Michael Chirico wrote:
> Hey Chris,
>
> Have a look at the actual list of commits in your gh-pages vs. main 
> branches, I suspect you'll spot what's going on pretty quickly :)
>
> https://github.com/cpsyctc/CECPfuns/commits/gh-pages/
>
> vs
>
> https://github.com/cpsyctc/CECPfuns/commits/main/
>
> Mike C
>
> On Wed, Aug 6, 2025 at 8:56?AM Chris Evans <chrishold at psyctc.org> wrote:
>
>     Sorry for a very trivial issue at one edge of R package
>     management: use
>     of github.
>
>     My package (https://github.com/cpsyctc/CECPfuns) is mostly very
>     simple
>     as I am entirely self-taught as a statistics user and R programmer
>     and
>     as I am ageing! ? (I was a fairly good psychiatrist and
>     psychotherapist
>     and still am a pretty productive researcher I think!)
>
>     The package is mostly aimed at people like me who find R amazingly
>     helpful but who sometimes struggle with the documentation,
>     warnings and
>     error messages. Hence a lot of it is trivial but is trying to wrap
>     things up to give end users reasonable help, the odd vignette (not
>     enough currently) and good input sanity checking and non-geek worded
>     warnings and errors.
>
>     OK enough of the apologies.? I have always found git and github in
>     the
>     "dark arts" side of things but I thought that pushing my commits
>     (from
>     within a package worked on locally in Rstudio) was working for
>     updating
>     the package and mostly I thought the evidence was that it was.?
>     Clearly
>     I wasn't checking well enough.
>
>     At some point I clearly created a gh-pages branch and I think that
>     was
>     to get github to create the user friendly html page(s) about the
>     package.? Reading the web now and trying to separate up to date
>     from old
>     advice from out of date advice I think this is no longer necessary
>     and I
>     could get the html from the main branch and ditch the gh-pages branch.
>
>     However, as the subject line says, I now see that the two branches
>     are
>     badly out of synch. Github says that main is my default branch and
>     gh-pages an active branch and at the moment both say they were last
>     updated six hours ago which was when I last pushed changes up.?
>     However,
>     gh-pages says its behind:ahead count is 100:31 which sounds nasty
>     and I
>     don't think my use of pkgdown and things in /doc and /docs are
>     updating
>     correctly.
>
>     Having scoured the web for help on this I am rattled and reaching out
>     for hel. As I say above, I think using gh-pages is no longer
>     necessary
>     and I would like to synchronise the two branches if that is possible
>     then delete the gh-pages branch and then get my courage up and try to
>     get back to understanding how best to document things with github
>     pages
>     and with pkgdown.
>
>     I know this is very small beer against the fascinating things I read
>     here but I hope someone can look at my mess and point me to safe ways
>     forward.
>
>     Thanks in advance and more generally, thanks for the list which is,
>     though often way beyond what I need, always educational for me.
>
>     Chris
>
>     -- 
>     Chris Evans (he/him)
>     Visiting Professor, UDLA, Quito, Ecuador
>     CORE site: http://www.coresystemtrust.org.uk
>     <https://www.coresystemtrust.org.uk/>
>     Other work web site: https://www.psyctc.org/psyctc/
>     Personal site: https://www.psyctc.org/pelerinage2016/
>
>     ______________________________________________
>     R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador
CORE site: http://www.coresystemtrust.org.uk 
<https://www.coresystemtrust.org.uk/>
Other work web site: https://www.psyctc.org/psyctc/
Personal site: https://www.psyctc.org/pelerinage2016/
<https://ombook.psyctc.org/book>


From edd @end|ng |rom deb|@n@org  Wed Aug  6 22:40:50 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 6 Aug 2025 15:40:50 -0500
Subject: [R-pkg-devel] 
 My package CECPfuns on github has branches main and
 gh-pages badly out of synch
In-Reply-To: <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>
References: <72d70d90-cc4e-49b9-8ff4-bba8e0d5f8ab@psyctc.org>
 <CAPRVBcw=cnNG7NMs7QhoQbfWQFeyqKMmRVaNty5ja26+gGTPtQ@mail.gmail.com>
 <be1001b0-613c-488a-9b0a-8b18c264f462@psyctc.org>
Message-ID: <26771.48594.17815.193489@rob.eddelbuettel.com>


On 6 August 2025 at 21:13, Chris Evans wrote:
| see, the ahead:behind count for the gh-pages branch in github is pretty 
| meaningless here.? Someone please correct me if I am wrong about that.

Correct.

An aside: the gh-pages branch used to be the only way to publish at GitHub.
But for a few years now one can also use a directory (or even the root dir
and everything below it) in a repo. I prefer that and often use docs/.

It avoids the dance between branches. Other people prefer the seperation into
another branch. As always, each to their own, and good to have choices.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From greg @end|ng |rom ||rm@n@y@h@com  Thu Aug  7 06:29:02 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Thu, 7 Aug 2025 14:29:02 +1000
Subject: [R-pkg-devel] unable to verify current time
In-Reply-To: <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
References: <CAAS8PA+294Z=EONG0U7K0h7o_tPq5483tLJ6mH6GnOvY-JpjKg@mail.gmail.com>
 <619668DB-D7BC-433D-80AA-B00C4D76B80D@R-project.org>
Message-ID: <CAAS8PAKhB=75iyfyBdTYFMPvYMSSy811hQQ0Fof0==f3-wVxnQ@mail.gmail.com>

Simon,
I have been down a bit of a rabbit hole with this.  There is an interesting
APNIC blog entry related to this that tries to quantify the distribution of
clock skews.

1. I have a very simple R NTP client.  It does not implement the server
clock time adjustment process bits of the protocol, but at a point in time
its able to detect and discard unsynchronised servers and outlier
responses. You can have it if you want, but I think its the answer to the
wrong question.

3. The webservers that the check code references go down periodically, one
is unresponsive from here this afternoon.  I agree you don't need
microseconds or even tens of milliseconds, the check code allows for five
minutes of drift which is consistent with Kerberos tolerance of time
mismatches, but you do need "up" and "up" is not reliably there.  The www.
or cran.r-project.org servers respond to a GET with a standard HTTP Date
header that contains that server's current idea of what the time is (you
can see it using curlGetHeaders("http://cran.r-project.org"), the timezone
is required by the HTTP standard to always be GMT/UTC) and I assume the
core team have some level of control over those servers' configurations and
should be easily able to ensure time synchronisation with some sufficiently
reliable time source if that time sync is not already in place.  I suspect
that cran.r-project.org  is more reliable than the websites you are using
as time sources.

Wouldn't it be possible to use an r-project server, as described above, as
a time source?


Greg

On Fri, 1 Aug 2025 at 08:41, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> 1) R has no native NTP client
> 2) outside NTP access is very often blocked on local networks (and local
> NTP relay requires configuration for which there is no standard)
> 3) it is overkill as we don?t need microsecond accuracy so a single
> HTTP(s) request is much easier
>
>
> > On 1/08/2025, at 10:17, Greg Hunt <greg at firmansyah.com> wrote:
> >
> > I noticed recently that check --as-cran was hanging and then emitting a
> message about not being able to verify the current time.  It seems that the
> CRAN check code is using some website to get the current clock time and
> that that site is currently down.  This strikes me as an odd approach to
> getting the current time.  Why was that approach taken when NTP is
> available on all mainstream OSs?   Is there something unusual about the
> CRAN environment?
> >
> > Greg
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 06:38:17 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Sun, 10 Aug 2025 21:38:17 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
Message-ID: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>

Hey everyone who is more familiar with R-devel and docker.

I am trying to test the new version of my package (maxLik) on R-devel,
using the docker container.  I am using rocker/r-devel as the base.  Note
that R-devel is called "RD" in the image.  I am copying in my package
sources and a few scripts, and run "RD CMD build" and "RD CMD check".
However, the latter fails with complaints about missing packages that are
installed and accessible when I run RD from command line.

Here are a few results:

* After a successful build inside the container, I run check:
root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
* using log directory ?//maxLik.Rcheck?
* using R Under development (unstable) (2025-08-11 r88561)
* using platform: x86_64-pc-linux-gnu
* R was compiled by
    gcc (Debian 14.2.0-19) 14.2.0
    GNU Fortran (Debian 14.2.0-19) 14.2.0
* running under: Debian GNU/Linux trixie/sid
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?maxLik/DESCRIPTION? ... OK
* this is package ?maxLik? version ?1.6-3?
* checking CRAN incoming feasibility ... [6s/35s] OK
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?maxLik? can be installed ... ERROR
Installation failed.
See ?//maxLik.Rcheck/00install.out? for details.
* DONE

Status: 1 ERROR
See
  ?//maxLik.Rcheck/00check.log?
for details.

* Take a look at the log:

root at f4024e015396:/# cat maxLik.Rcheck/00install.out
* installing *source* package ?maxLik? ...
** this is package ?maxLik? version ?1.6-3?
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
:
  there is no package called ?lattice?
Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
doWithOneRestart
Execution halted
ERROR: lazy loading failed for package ?maxLik?
* removing ?/maxLik.Rcheck/maxLik?

Apparently 'lattice' is missing???

* But it is there and I can load it with no errors:

root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
[1] ?0.22.7?
root at f4024e015396:/# RDscript -e "library(lattice)"

Formerly I got similar missing package messages for other packages, I have
also tried to manually overwrote the R_LIB_USR environment variable (that
resulted in another error a bit further down in the line), and to install
my own package into different locations.  So far everything seems to lead
to the same problem.

Note that it works if I run it inside the container using the stable R ("R"
instead of "RD").  Currently it is based on r88561 (2025-08-11) version of
R-devel as you can see above.

For reference, here is the Dockerfile:

# -*- dockerfile-mode -*-
FROM rocker/r-devel
RUN apt-get install -y texlive-science
ENV INSIDE_DOCKER=true
COPY packages.R .  # install script for necessary packages
RUN RDscript packages.R  # install dependencies/suggestions etc
COPY pkg ./pkg  # copy the maxlik package source
COPY build-check .  # building/checking script
CMD ["bash"]


Any ideas?

Ott

	[[alternative HTML version deleted]]


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 08:04:33 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Sun, 10 Aug 2025 23:04:33 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
Message-ID: <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>

Thanks.

I thought this was the issue, and even manually deleted /usr/bin/R and
/usr/bin/Rscript, but the problem persisted.  But now I am thinking that
/usr/bin/R may not be the relevant executables, the development version may
pull up something directly from /usr/lib/R/bin instead (the devel is
installed in /usr/local/lib/R ).

Will try!

Ott

On Sun, Aug 10, 2025 at 9:57?PM Tim Taylor <tim.taylor at hiddenelephants.co.uk>
wrote:

> You may be hitting the following issue in tinytest:
> https://github.com/markvanderloo/tinytest/issues/135
>
> There is a linked PR you could try that hopefully fixes the problem:
> https://github.com/markvanderloo/tinytest/pull/134
>
> Tim
>
> On 11 Aug 2025, at 05:39, Ott Toomet <otoomet at gmail.com> wrote:
>
> ?Hey everyone who is more familiar with R-devel and docker.
>
> I am trying to test the new version of my package (maxLik) on R-devel,
> using the docker container.  I am using rocker/r-devel as the base.  Note
> that R-devel is called "RD" in the image.  I am copying in my package
> sources and a few scripts, and run "RD CMD build" and "RD CMD check".
> However, the latter fails with complaints about missing packages that are
> installed and accessible when I run RD from command line.
>
> Here are a few results:
>
> * After a successful build inside the container, I run check:
> root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
> * using log directory ?//maxLik.Rcheck?
> * using R Under development (unstable) (2025-08-11 r88561)
> * using platform: x86_64-pc-linux-gnu
> * R was compiled by
>    gcc (Debian 14.2.0-19) 14.2.0
>    GNU Fortran (Debian 14.2.0-19) 14.2.0
> * running under: Debian GNU/Linux trixie/sid
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?maxLik/DESCRIPTION? ... OK
> * this is package ?maxLik? version ?1.6-3?
> * checking CRAN incoming feasibility ... [6s/35s] OK
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?maxLik? can be installed ... ERROR
> Installation failed.
> See ?//maxLik.Rcheck/00install.out? for details.
> * DONE
>
> Status: 1 ERROR
> See
>  ?//maxLik.Rcheck/00check.log?
> for details.
>
> * Take a look at the log:
>
> root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> * installing *source* package ?maxLik? ...
> ** this is package ?maxLik? version ?1.6-3?
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
> :
>  there is no package called ?lattice?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> doWithOneRestart
> Execution halted
> ERROR: lazy loading failed for package ?maxLik?
> * removing ?/maxLik.Rcheck/maxLik?
>
> Apparently 'lattice' is missing???
>
> * But it is there and I can load it with no errors:
>
> root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> [1] ?0.22.7?
> root at f4024e015396:/# RDscript -e "library(lattice)"
>
> Formerly I got similar missing package messages for other packages, I have
> also tried to manually overwrote the R_LIB_USR environment variable (that
> resulted in another error a bit further down in the line), and to install
> my own package into different locations.  So far everything seems to lead
> to the same problem.
>
> Note that it works if I run it inside the container using the stable R ("R"
> instead of "RD").  Currently it is based on r88561 (2025-08-11) version of
> R-devel as you can see above.
>
> For reference, here is the Dockerfile:
>
> # -*- dockerfile-mode -*-
> FROM rocker/r-devel
> RUN apt-get install -y texlive-science
> ENV INSIDE_DOCKER=true
> COPY packages.R .  # install script for necessary packages
> RUN RDscript packages.R  # install dependencies/suggestions etc
> COPY pkg ./pkg  # copy the maxlik package source
> COPY build-check .  # building/checking script
> CMD ["bash"]
>
>
> Any ideas?
>
> Ott
>
>    [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From greg @end|ng |rom ||rm@n@y@h@com  Mon Aug 11 10:03:28 2025
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Mon, 11 Aug 2025 18:03:28 +1000
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
 <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
Message-ID: <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>

Out of curiosity, why do they install two instances of R in a Docker
container?  On a traditional physical tin server, sure, you can't avoid
that sort of thing, but why in Docker?  I didn't see a rationale for it on
the Rocker wiki or website.

Greg

On Mon, 11 Aug 2025 at 16:05, Ott Toomet <otoomet at gmail.com> wrote:

> Thanks.
>
> I thought this was the issue, and even manually deleted /usr/bin/R and
> /usr/bin/Rscript, but the problem persisted.  But now I am thinking that
> /usr/bin/R may not be the relevant executables, the development version may
> pull up something directly from /usr/lib/R/bin instead (the devel is
> installed in /usr/local/lib/R ).
>
> Will try!
>
> Ott
>
> On Sun, Aug 10, 2025 at 9:57?PM Tim Taylor <
> tim.taylor at hiddenelephants.co.uk>
> wrote:
>
> > You may be hitting the following issue in tinytest:
> > https://github.com/markvanderloo/tinytest/issues/135
> >
> > There is a linked PR you could try that hopefully fixes the problem:
> > https://github.com/markvanderloo/tinytest/pull/134
> >
> > Tim
> >
> > On 11 Aug 2025, at 05:39, Ott Toomet <otoomet at gmail.com> wrote:
> >
> > ?Hey everyone who is more familiar with R-devel and docker.
> >
> > I am trying to test the new version of my package (maxLik) on R-devel,
> > using the docker container.  I am using rocker/r-devel as the base.  Note
> > that R-devel is called "RD" in the image.  I am copying in my package
> > sources and a few scripts, and run "RD CMD build" and "RD CMD check".
> > However, the latter fails with complaints about missing packages that are
> > installed and accessible when I run RD from command line.
> >
> > Here are a few results:
> >
> > * After a successful build inside the container, I run check:
> > root at f4024e015396:/# RD CMD check --as-cran maxLik_1.6-3.tar.gz
> > * using log directory ?//maxLik.Rcheck?
> > * using R Under development (unstable) (2025-08-11 r88561)
> > * using platform: x86_64-pc-linux-gnu
> > * R was compiled by
> >    gcc (Debian 14.2.0-19) 14.2.0
> >    GNU Fortran (Debian 14.2.0-19) 14.2.0
> > * running under: Debian GNU/Linux trixie/sid
> > * using session charset: UTF-8
> > * using option ?--as-cran?
> > * checking for file ?maxLik/DESCRIPTION? ... OK
> > * this is package ?maxLik? version ?1.6-3?
> > * checking CRAN incoming feasibility ... [6s/35s] OK
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for executable files ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking for sufficient/correct file permissions ... OK
> > * checking serialization versions ... OK
> > * checking whether package ?maxLik? can be installed ... ERROR
> > Installation failed.
> > See ?//maxLik.Rcheck/00install.out? for details.
> > * DONE
> >
> > Status: 1 ERROR
> > See
> >  ?//maxLik.Rcheck/00check.log?
> > for details.
> >
> > * Take a look at the log:
> >
> > root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> > * installing *source* package ?maxLik? ...
> > ** this is package ?maxLik? version ?1.6-3?
> > ** using staged installation
> > ** R
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]])
> > :
> >  there is no package called ?lattice?
> > Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> > doWithOneRestart
> > Execution halted
> > ERROR: lazy loading failed for package ?maxLik?
> > * removing ?/maxLik.Rcheck/maxLik?
> >
> > Apparently 'lattice' is missing???
> >
> > * But it is there and I can load it with no errors:
> >
> > root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> > [1] ?0.22.7?
> > root at f4024e015396:/# RDscript -e "library(lattice)"
> >
> > Formerly I got similar missing package messages for other packages, I
> have
> > also tried to manually overwrote the R_LIB_USR environment variable (that
> > resulted in another error a bit further down in the line), and to install
> > my own package into different locations.  So far everything seems to lead
> > to the same problem.
> >
> > Note that it works if I run it inside the container using the stable R
> ("R"
> > instead of "RD").  Currently it is based on r88561 (2025-08-11) version
> of
> > R-devel as you can see above.
> >
> > For reference, here is the Dockerfile:
> >
> > # -*- dockerfile-mode -*-
> > FROM rocker/r-devel
> > RUN apt-get install -y texlive-science
> > ENV INSIDE_DOCKER=true
> > COPY packages.R .  # install script for necessary packages
> > RUN RDscript packages.R  # install dependencies/suggestions etc
> > COPY pkg ./pkg  # copy the maxlik package source
> > COPY build-check .  # building/checking script
> > CMD ["bash"]
> >
> >
> > Any ideas?
> >
> > Ott
> >
> >    [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Aug 11 13:27:10 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 06:27:10 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
Message-ID: <26777.54158.202652.438708@paul.eddelbuettel.com>


On 10 August 2025 at 21:38, Ott Toomet wrote:
| root at f4024e015396:/# cat maxLik.Rcheck/00install.out
| * installing *source* package ?maxLik? ...
| ** this is package ?maxLik? version ?1.6-3?
| ** using staged installation
| ** R
| ** inst
| ** byte-compile and prepare package for lazy loading
| Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
| :
|   there is no package called ?lattice?
| Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
| doWithOneRestart
| Execution halted
| ERROR: lazy loading failed for package ?maxLik?
| * removing ?/maxLik.Rcheck/maxLik?
| 
| Apparently 'lattice' is missing???
| 
| * But it is there and I can load it with no errors:
| 
| root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
| [1] ?0.22.7?
| root at f4024e015396:/# RDscript -e "library(lattice)"

Because R CMD check uses a separate 'narrower' library path for checking a
package, you need to install the dependencies of the package you are
checking. So one way to address this is to 'RD CMD INSTALL lattice' (followed
by whatever else your package needs) in your running Docker session.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Mon Aug 11 13:38:38 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 06:38:38 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <5E725A29-CD58-43FD-B4B1-7FAD569A4A98@hiddenelephants.co.uk>
 <CAMMJQ0aRDx6+_OAcB06FYSGiAVwQbHmphK7-xNDXwX5fVS9emg@mail.gmail.com>
 <CAAS8PALp+ev+f+k9bSXzGHkSkVSdk0tx+MU-9_3rdbtN2djsfg@mail.gmail.com>
Message-ID: <26777.54846.549798.681111@paul.eddelbuettel.com>


On 11 August 2025 at 18:03, Greg Hunt wrote:
| Out of curiosity, why do they install two instances of R in a Docker
| container?  On a traditional physical tin server, sure, you can't avoid
| that sort of thing, but why in Docker?  I didn't see a rationale for it on
| the Rocker wiki or website.

"They" here. It makes sense to have the underlying base be the r-base
container, and it has R. And because it gets R as a package this is harder to
disentangle afterwards.  Also, my live system also has R and RD so I was used
to _explicitly_ opt into r-devel ...  

Also note that given how R works an honours its installation path, the
following simple 'ln -s RD R' is all you need to have 'RD' be 'R' on that
container too:

  $ docker run --rm -ti rocker/r-devel \
       bash -c 'cd /usr/local/bin && ln -s RD R && R --version'

  (Line break just for exposition here)

but we don't do that by default because having R as well can be useful.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From otoomet @end|ng |rom gm@||@com  Mon Aug 11 14:26:52 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Mon, 11 Aug 2025 05:26:52 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <26777.54158.202652.438708@paul.eddelbuettel.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
Message-ID: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>

Hmm...

I am a little bit confused.

* Is this "narrower" library path for CMD check explained somewhere?
* Isn't lattice one of the default packages (graphics depends on it iirc),
so it should be installed in any case?

Thanks, anyway.  So far my tiny test package
https://github.com/otoomet/dummypkg (0.0-1) works, so now I am looking at
vignettes.

Cheers,
Ott

On Mon, Aug 11, 2025 at 4:27?AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 10 August 2025 at 21:38, Ott Toomet wrote:
> | root at f4024e015396:/# cat maxLik.Rcheck/00install.out
> | * installing *source* package ?maxLik? ...
> | ** this is package ?maxLik? version ?1.6-3?
> | ** using staged installation
> | ** R
> | ** inst
> | ** byte-compile and prepare package for lazy loading
> | Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]])
> | :
> |   there is no package called ?lattice?
> | Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
> | doWithOneRestart
> | Execution halted
> | ERROR: lazy loading failed for package ?maxLik?
> | * removing ?/maxLik.Rcheck/maxLik?
> |
> | Apparently 'lattice' is missing???
> |
> | * But it is there and I can load it with no errors:
> |
> | root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
> | [1] ?0.22.7?
> | root at f4024e015396:/# RDscript -e "library(lattice)"
>
> Because R CMD check uses a separate 'narrower' library path for checking a
> package, you need to install the dependencies of the package you are
> checking. So one way to address this is to 'RD CMD INSTALL lattice'
> (followed
> by whatever else your package needs) in your running Docker session.
>
> Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Aug 11 14:47:45 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 Aug 2025 08:47:45 -0400
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
Message-ID: <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>

lattice is a "recommended" package.  Those are contributed packages, not 
base packages, so they are optional, but most distributions of R include 
them.

Regarding Dirk's "narrower" comment:  I think that is really his 
decision about the docker container, not a property of R CMD check.  R 
CMD check needs to be able to succeed if the only packages installed are 
the hard dependencies (Depends, Imports, plus base packages), but it 
doesn't actually install anything.  That's up to you before running it.

Duncan Murdoch

On 2025-08-11 8:26 a.m., Ott Toomet wrote:
> Hmm...
> 
> I am a little bit confused.
> 
> * Is this "narrower" library path for CMD check explained somewhere?
> * Isn't lattice one of the default packages (graphics depends on it iirc),
> so it should be installed in any case?
> 
> Thanks, anyway.  So far my tiny test package
> https://github.com/otoomet/dummypkg (0.0-1) works, so now I am looking at
> vignettes.
> 
> Cheers,
> Ott
> 
> On Mon, Aug 11, 2025 at 4:27?AM Dirk Eddelbuettel <edd at debian.org> wrote:
> 
>>
>> On 10 August 2025 at 21:38, Ott Toomet wrote:
>> | root at f4024e015396:/# cat maxLik.Rcheck/00install.out
>> | * installing *source* package ?maxLik? ...
>> | ** this is package ?maxLik? version ?1.6-3?
>> | ** using staged installation
>> | ** R
>> | ** inst
>> | ** byte-compile and prepare package for lazy loading
>> | Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]])
>> | :
>> |   there is no package called ?lattice?
>> | Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart ->
>> | doWithOneRestart
>> | Execution halted
>> | ERROR: lazy loading failed for package ?maxLik?
>> | * removing ?/maxLik.Rcheck/maxLik?
>> |
>> | Apparently 'lattice' is missing???
>> |
>> | * But it is there and I can load it with no errors:
>> |
>> | root at f4024e015396:/# RDscript -e "packageVersion('lattice')"
>> | [1] ?0.22.7?
>> | root at f4024e015396:/# RDscript -e "library(lattice)"
>>
>> Because R CMD check uses a separate 'narrower' library path for checking a
>> package, you need to install the dependencies of the package you are
>> checking. So one way to address this is to 'RD CMD INSTALL lattice'
>> (followed
>> by whatever else your package needs) in your running Docker session.
>>
>> Dirk
>>
>> --
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon Aug 11 16:53:53 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Aug 2025 09:53:53 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
Message-ID: <26778.1025.663969.327900@paul.eddelbuettel.com>


On 11 August 2025 at 05:26, Ott Toomet wrote:
| * Is this "narrower" library path for CMD check explained somewhere?

Make your package (in a test, maybe even just tests/hello.R) do
`print(.libPaths())` and assert it is different during tests.

This has nothing to do with the Docker container (but arguably related to how
I packaged R for Debian for 20-some years following a discussion with Kurt
and Fritz 'way back when' that lead to the current split and the three
default directories):

> .libPaths()                           # my comments for rationale below
[1] "/usr/local/lib/R/site-library"     # system-wide, not packaged
[2] "/usr/lib/R/site-library"           # non-base/recommended packages from the distro
[3] "/usr/lib/R/library"                # base+recommended packages from the distrp
> 

plus optionally one below $HOME (and I personally do without).

Follow-ups, if any, maybe to r-sig-debian?

Hth,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From berw|n@tur|@ch @end|ng |rom gm@||@com  Tue Aug 12 10:16:54 2025
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Tue, 12 Aug 2025 16:16:54 +0800
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
Message-ID: <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>

On Mon, 11 Aug 2025 08:47:45 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> Regarding Dirk's "narrower" comment:  I think that is really his
> decision about the docker container, not a property of R CMD check.
> R CMD check needs to be able to succeed if the only packages
> installed are the hard dependencies (Depends, Imports, plus base
> packages), but it doesn't actually install anything.  That's up to
> you before running it.

Obviously I cannot speak for Dirk and where his comment comes from :),
but WRE has since ages the following note:

	Note: R CMD check and R CMD build run R processes with
	--vanilla in which none of the user?s startup files are read.
	If you need R_LIBS set (to find packages in a non-standard
	library) you can set it in the environment: also you can use
	the check and build environment files (as specified by the
	environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
	unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
	used) to set environment variables when using these utilities.

On my linux box I update and compile R patched and R devel regularly,
and at some point I got tired of also installing a lot of packages
(that I need for checking) each time.  So I moved all of these
additional packages to another library (where they are updated on an
as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
this restructure R patched and R devel could promptly not find those
packages anymore (until I changed my scripts to create appropriate
symbolic links, I did not want to go down the path of setting
environment variables).

Cheers,

	Berwin
 


From otoomet @end|ng |rom gm@||@com  Tue Aug 12 15:58:05 2025
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Tue, 12 Aug 2025 06:58:05 -0700
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
Message-ID: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>

Thanks, everyone, for responding.  Here a summary of my research so
far--I do not quite understand what I am doing, but I spotted
a number of different issues, and I got the checks to work.

* I was not aware of the distinction between default and recommended
  packages, and the fact that the latter is not installed by default
  (although usually they are on production systems).
* in the rocker/r-devel container, R and R-devel use (partly)
  overlapping lib paths: `/usr/local/lib/R/site-library` and
  `/usr/lib/R/library`.

* R and R-devel have different packages installed by default, but
  because both access `/usr/lib/R/library`, both seem to have access
  to both default and recommended packages.
* `RD CMD check` uses a different lib path, containing
  `/usr/local/lib/R/library` and a temporary folder.  The latter will
  contain the needed packages given they are installed in a certain
  location (I still do not understand how they get there, and from
  where).
* The message I got -- package _lattice_ not available -- was due to
  two reasons: a) it is a recommended, not a default package; and b)
  it is installed in `/usr/lib/R/library` where it is normally
  accessible for both R and R-devel, and hence was not installed
  again.  However, from there it is not copied to the temporary folder that
  R CMD check uses.
* Finally, by setting `ENV R_LIBS=/usr/local/lib/R/site-library/` in
  the Dockerfile, the checks work.  But I am not sure why.

It would be great to isolate R and R-devel better in the docker
image.  Not sure whether it is easy to do...

Cheers,
Ott

On Tue, Aug 12, 2025 at 1:17?AM Berwin A Turlach <berwin.turlach at gmail.com>
wrote:

> On Mon, 11 Aug 2025 08:47:45 -0400
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> > Regarding Dirk's "narrower" comment:  I think that is really his
> > decision about the docker container, not a property of R CMD check.
> > R CMD check needs to be able to succeed if the only packages
> > installed are the hard dependencies (Depends, Imports, plus base
> > packages), but it doesn't actually install anything.  That's up to
> > you before running it.
>
> Obviously I cannot speak for Dirk and where his comment comes from :),
> but WRE has since ages the following note:
>
>         Note: R CMD check and R CMD build run R processes with
>         --vanilla in which none of the user?s startup files are read.
>         If you need R_LIBS set (to find packages in a non-standard
>         library) you can set it in the environment: also you can use
>         the check and build environment files (as specified by the
>         environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
>         unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
>         used) to set environment variables when using these utilities.
>
> On my linux box I update and compile R patched and R devel regularly,
> and at some point I got tired of also installing a lot of packages
> (that I need for checking) each time.  So I moved all of these
> additional packages to another library (where they are updated on an
> as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
> this restructure R patched and R devel could promptly not find those
> packages anymore (until I changed my scripts to create appropriate
> symbolic links, I did not want to go down the path of setting
> environment variables).
>
> Cheers,
>
>         Berwin
>
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Aug 12 16:16:33 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 12 Aug 2025 09:16:33 -0500
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
 <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
Message-ID: <26779.19649.736116.780774@paul.eddelbuettel.com>


With all due respect, that summary was more misleading than helpful.  This is
also the wrong list to discuss the matter as a few Debian packaging specific
aspects appear to be falsely seen as general R features. I reiterate that
follow-ups, if any, would really be better suited to either the r-sig-debian
list (and note its 'subscribe first, then post' policy) or possibly the git
repository of this specific container.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Aug 12 16:17:35 2025
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 12 Aug 2025 15:17:35 +0100
Subject: [R-pkg-devel] Testing package on R-devel in a docker container
In-Reply-To: <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
References: <CAMMJQ0Z1vq-e4R16AR_EJuVCKUQsXVXGFZHtbNS7Je1QdKNiTg@mail.gmail.com>
 <26777.54158.202652.438708@paul.eddelbuettel.com>
 <CAMMJQ0axSzM3g2XGfbE9PsHzdMZU94zudLmMNavvVv6LchLrgA@mail.gmail.com>
 <f4058abd-b6e0-4a41-813a-9f21f030f462@gmail.com>
 <20250812161654.59baf69e@dep59159.uniwa.uwa.edu.au>
 <CAMMJQ0ZRQjPdguB1LDr-CevGgw-bknJvchQfcaU8KS4iHyGVaQ@mail.gmail.com>
Message-ID: <5fe96d8e-f2ba-4bbe-a6a9-338f0f4c6435@dewey.myzen.co.uk>

Dear Ott

Perhaps a dumb question but does your package DESCRIPTION include a 
dependency on lattice (or i,port or suggest)?

Michael

On 12/08/2025 14:58, Ott Toomet wrote:
> Thanks, everyone, for responding.  Here a summary of my research so
> far--I do not quite understand what I am doing, but I spotted
> a number of different issues, and I got the checks to work.
> 
> * I was not aware of the distinction between default and recommended
>    packages, and the fact that the latter is not installed by default
>    (although usually they are on production systems).
> * in the rocker/r-devel container, R and R-devel use (partly)
>    overlapping lib paths: `/usr/local/lib/R/site-library` and
>    `/usr/lib/R/library`.
> 
> * R and R-devel have different packages installed by default, but
>    because both access `/usr/lib/R/library`, both seem to have access
>    to both default and recommended packages.
> * `RD CMD check` uses a different lib path, containing
>    `/usr/local/lib/R/library` and a temporary folder.  The latter will
>    contain the needed packages given they are installed in a certain
>    location (I still do not understand how they get there, and from
>    where).
> * The message I got -- package _lattice_ not available -- was due to
>    two reasons: a) it is a recommended, not a default package; and b)
>    it is installed in `/usr/lib/R/library` where it is normally
>    accessible for both R and R-devel, and hence was not installed
>    again.  However, from there it is not copied to the temporary folder that
>    R CMD check uses.
> * Finally, by setting `ENV R_LIBS=/usr/local/lib/R/site-library/` in
>    the Dockerfile, the checks work.  But I am not sure why.
> 
> It would be great to isolate R and R-devel better in the docker
> image.  Not sure whether it is easy to do...
> 
> Cheers,
> Ott
> 
> On Tue, Aug 12, 2025 at 1:17?AM Berwin A Turlach <berwin.turlach at gmail.com>
> wrote:
> 
>> On Mon, 11 Aug 2025 08:47:45 -0400
>> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>>> Regarding Dirk's "narrower" comment:  I think that is really his
>>> decision about the docker container, not a property of R CMD check.
>>> R CMD check needs to be able to succeed if the only packages
>>> installed are the hard dependencies (Depends, Imports, plus base
>>> packages), but it doesn't actually install anything.  That's up to
>>> you before running it.
>>
>> Obviously I cannot speak for Dirk and where his comment comes from :),
>> but WRE has since ages the following note:
>>
>>          Note: R CMD check and R CMD build run R processes with
>>          --vanilla in which none of the user?s startup files are read.
>>          If you need R_LIBS set (to find packages in a non-standard
>>          library) you can set it in the environment: also you can use
>>          the check and build environment files (as specified by the
>>          environment variables R_CHECK_ENVIRON and R_BUILD_ENVIRON; if
>>          unset, files55 ~/.R/check.Renviron and ~/.R/build.Renviron are
>>          used) to set environment variables when using these utilities.
>>
>> On my linux box I update and compile R patched and R devel regularly,
>> and at some point I got tired of also installing a lot of packages
>> (that I need for checking) each time.  So I moved all of these
>> additional packages to another library (where they are updated on an
>> as needed basis via update.packages(ask=FALSE, CheckBuilt=TRUE)). After
>> this restructure R patched and R devel could promptly not find those
>> packages anymore (until I changed my scripts to create appropriate
>> symbolic links, I did not want to go down the path of setting
>> environment variables).
>>
>> Cheers,
>>
>>          Berwin
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Michael Dewey


From ru@@e||-|enth @end|ng |rom u|ow@@edu  Wed Aug 13 03:42:59 2025
From: ru@@e||-|enth @end|ng |rom u|ow@@edu (Lenth, Russell V)
Date: Wed, 13 Aug 2025 01:42:59 +0000
Subject: [R-pkg-devel] Catch-22 on mandatory package update
Message-ID: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>

Dear package developers:

I have run into a dilemma...

I received a message that my package has errors on the development version of R; and that I must fix the error by August 26. Since I will be traveling out of the country from Aug 17--27, I knew I had to fix the error right away - which I did. But when I tried to submit the updated package, I was unable to do so because CRAN is on vacation until Aug 19. Note that this is after I leave on my trip, and I will not be able to submit anything to CRAN while I am traveling.

So I can't submit my package until Aug 28 at the earliest, and this is two days after the Aug 26 deadline I was given. What can I do to save my package from getting the axe? Any advice is appreciated.

Thanks

Russ Lenth
Emeritus, U of Iowa


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Aug 13 04:09:43 2025
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 12 Aug 2025 19:09:43 -0700
Subject: [R-pkg-devel] Catch-22 on mandatory package update
In-Reply-To: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>
References: <BN7PR04MB384452E739CBE80E9053D01FF12AA@BN7PR04MB3844.namprd04.prod.outlook.com>
Message-ID: <CAJqTW45iR9pQs_SfszjY+-wnNu2eYHraFvu4Ths3i2XAFKh3Fg@mail.gmail.com>

Just tell the CRAN guys your situation and ask for an extension.

On Tue, Aug 12, 2025 at 6:43?PM Lenth, Russell V via R-package-devel <
r-package-devel at r-project.org> wrote:

> Dear package developers:
>
> I have run into a dilemma...
>
> I received a message that my package has errors on the development version
> of R; and that I must fix the error by August 26. Since I will be traveling
> out of the country from Aug 17--27, I knew I had to fix the error right
> away - which I did. But when I tried to submit the updated package, I was
> unable to do so because CRAN is on vacation until Aug 19. Note that this is
> after I leave on my trip, and I will not be able to submit anything to CRAN
> while I am traveling.
>
> So I can't submit my package until Aug 28 at the earliest, and this is two
> days after the Aug 26 deadline I was given. What can I do to save my
> package from getting the axe? Any advice is appreciated.
>
> Thanks
>
> Russ Lenth
> Emeritus, U of Iowa
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


