From r@|@@pere|r@@br @end|ng |rom gm@||@com  Fri Jan  2 01:34:11 2026
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Thu, 1 Jan 2026 21:34:11 -0300
Subject: [R-pkg-devel] Falling gracefully in subsequent code
In-Reply-To: <CABdHhvErXOp_OKM63zkZw7KWXapRQKftFysrcwSRvp8cZ=XAcw@mail.gmail.com>
References: <CAA42DGnyNVoqtfOTUN3aackFwMwbFWy+7XKxA1eY7vjsiDfTvQ@mail.gmail.com>
 <CAPRVBcxcjprGk+V1bL9DGvZCAL3-iKToyHDjtiY6L5D9JGPmWQ@mail.gmail.com>
 <CABdHhvErXOp_OKM63zkZw7KWXapRQKftFysrcwSRvp8cZ=XAcw@mail.gmail.com>
Message-ID: <CAA42DGm2D9XHRRSqD7K8wd_YObVpsuEdqZX+693mS7BLiFGDAA@mail.gmail.com>

Thank you all for the kind suggestions! Dirk's advice (in the same spirit
of Hadely's suggestion) should work like a glove !

For the record, I really appreciate how supportive the R community (and
this group in particular) is. Thanks a bunch and happy New Year!

best,
Rafa Pereira

On Tue, Dec 30, 2025 at 2:54?PM Hadley Wickham <h.wickham at gmail.com> wrote:

> Or slightly simpler (if less helpful), you can do something like:
>
> if (is.null(df)) {
>   knitr::opts_chunk(eval = FALSE)
> }
>
> Hadley
>
> On Mon, Dec 29, 2025 at 7:23?PM Michael Chirico <michaelchirico4 at gmail.com>
> wrote:
>
>> At a glance you might try a hidden code chunk that looks for NULL input
>> and
>> populates a "fake" dataset if so.
>>
>> On Mon, Dec 29, 2025, 4:35?PM Rafael H. M. Pereira <
>> rafa.pereira.br at gmail.com> wrote:
>>
>> > Hi all,
>> >
>> > I would very much appreciate your thoughts on this situation.
>> >
>> > # context
>> > I received an email from Prof Ripley saying that my package is not
>> "falling
>> > gracefully". Error report here
>> > https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/aopdata.out
>> >
>> > The error happens in the code below. You see, in the case of an internet
>> > connection issue, the aopdata::read_population() function returns a
>> silent
>> > NULL plus an informative message, as it should. So my package does in
>> fact
>> > fail gracefully whenever an internet connection is unavailable.
>> >
>> > In this case, though, the error is actually happening in the ggplot2
>> call.
>> > Because the df object is NULL, ggplot2 cannot find the "P001" column. In
>> > short, the package itself does follow CRAN's policy when there is an
>> > eventual internet connection issue, but the subsequent code throws an
>> error
>> > in such a case.
>> >
>> > Given this behavior, I?m not sure there is a change I could make to my
>> > package that would fully prevent this situation, other than removing
>> > vignettes that demonstrate how to use the function outputs, which I
>> would
>> > prefer to avoid if possible.
>> >
>> > # the situation
>> > When I asked for advice, a kind Cran maintainer said: "So it is not good
>> > enough to have a function return NULL when the subsequent code will
>> throw
>> > an error when it gets that NULL."
>> >
>> > So here is the situation. The Cran Policy (see it below) requires *the
>> > package* to fail gracefully. It does not mention subsequent code. Imho,
>> it
>> > should not require any subsequent code to fail gracefully. As a
>> > package developer, I only have control over the functioning of my
>> package,
>> > I cannot control what code users will use to analyze the output of my
>> > package functions.
>> >
>> > If necessary, I will simply not run the ggplot calls in my vignettes and
>> > render pre-generated plots saved in .png. I feel this would be a bad
>> > solution to keep the package on CRAN, though. I would really appreciate
>> > your thoughts on this.
>> >
>> > best,
>> > Rafael Pereira
>> >
>> > *Cran Policy asks that:*
>> >
>> >    - Packages which use Internet resources should fail gracefully with
>> > an informative
>> >    message if the resource is not available or has changed (and not
>> give a
>> >    check warning nor error)
>> >
>> >
>> > # code causing the error
>> >
>> > library(aopdata)
>> > library(ggplot2)
>> > df <- aopdata::read_population
>> > <https://ipeagit.github.io/aopdata/reference/read_population.html>(
>> > city = 'Fortaleza',  year = 2010,  geometry = TRUE,  showProgress =
>> > FALSE  )
>> >
>> >
>> >
>> > ggplot() +
>> >   geom_sf(data=subset(df, P001>0), aes(fill=P001), color=NA, alpha=.8) +
>> >   scale_fill_distiller(palette = "YlOrRd", direction = 1)+
>> >   labs(title='Population distribution', fill="Total population") +
>> >   theme_void()
>> >
>> >
>> > best,
>> > Rafael Pereira
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
> http://hadley.nz
>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Jan  2 18:09:20 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Fri, 2 Jan 2026 09:09:20 -0800
Subject: [R-pkg-devel] Falling gracefully in subsequent code
In-Reply-To: <CAA42DGm2D9XHRRSqD7K8wd_YObVpsuEdqZX+693mS7BLiFGDAA@mail.gmail.com>
References: <CAA42DGnyNVoqtfOTUN3aackFwMwbFWy+7XKxA1eY7vjsiDfTvQ@mail.gmail.com>
 <CAPRVBcxcjprGk+V1bL9DGvZCAL3-iKToyHDjtiY6L5D9JGPmWQ@mail.gmail.com>
 <CABdHhvErXOp_OKM63zkZw7KWXapRQKftFysrcwSRvp8cZ=XAcw@mail.gmail.com>
 <CAA42DGm2D9XHRRSqD7K8wd_YObVpsuEdqZX+693mS7BLiFGDAA@mail.gmail.com>
Message-ID: <CAPRVBcxaDmXqs0bD07=y6LWM_S+opdUHFnWMDv6N5G4XpCL5aA@mail.gmail.com>

Sharing here a solution I was happy with:

```{r, eval=!is.null(df), ...}

this has the advantage of hiding the distracting edge case handling from
the expository code being shown to the vignette reader.

Mike C

On Thu, Jan 1, 2026, 4:53?PM Rafael H. M. Pereira <rafa.pereira.br at gmail.com>
wrote:

> Thank you all for the kind suggestions! Dirk's advice (in the same spirit
> of Hadely's suggestion) should work like a glove !
>
> For the record, I really appreciate how supportive the R community (and
> this group in particular) is. Thanks a bunch and happy New Year!
>
> best,
> Rafa Pereira
>
> On Tue, Dec 30, 2025 at 2:54?PM Hadley Wickham <h.wickham at gmail.com>
> wrote:
>
> > Or slightly simpler (if less helpful), you can do something like:
> >
> > if (is.null(df)) {
> >   knitr::opts_chunk(eval = FALSE)
> > }
> >
> > Hadley
> >
> > On Mon, Dec 29, 2025 at 7:23?PM Michael Chirico <
> michaelchirico4 at gmail.com>
> > wrote:
> >
> >> At a glance you might try a hidden code chunk that looks for NULL input
> >> and
> >> populates a "fake" dataset if so.
> >>
> >> On Mon, Dec 29, 2025, 4:35?PM Rafael H. M. Pereira <
> >> rafa.pereira.br at gmail.com> wrote:
> >>
> >> > Hi all,
> >> >
> >> > I would very much appreciate your thoughts on this situation.
> >> >
> >> > # context
> >> > I received an email from Prof Ripley saying that my package is not
> >> "falling
> >> > gracefully". Error report here
> >> > https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/aopdata.out
> >> >
> >> > The error happens in the code below. You see, in the case of an
> internet
> >> > connection issue, the aopdata::read_population() function returns a
> >> silent
> >> > NULL plus an informative message, as it should. So my package does in
> >> fact
> >> > fail gracefully whenever an internet connection is unavailable.
> >> >
> >> > In this case, though, the error is actually happening in the ggplot2
> >> call.
> >> > Because the df object is NULL, ggplot2 cannot find the "P001" column.
> In
> >> > short, the package itself does follow CRAN's policy when there is an
> >> > eventual internet connection issue, but the subsequent code throws an
> >> error
> >> > in such a case.
> >> >
> >> > Given this behavior, I?m not sure there is a change I could make to my
> >> > package that would fully prevent this situation, other than removing
> >> > vignettes that demonstrate how to use the function outputs, which I
> >> would
> >> > prefer to avoid if possible.
> >> >
> >> > # the situation
> >> > When I asked for advice, a kind Cran maintainer said: "So it is not
> good
> >> > enough to have a function return NULL when the subsequent code will
> >> throw
> >> > an error when it gets that NULL."
> >> >
> >> > So here is the situation. The Cran Policy (see it below) requires *the
> >> > package* to fail gracefully. It does not mention subsequent code.
> Imho,
> >> it
> >> > should not require any subsequent code to fail gracefully. As a
> >> > package developer, I only have control over the functioning of my
> >> package,
> >> > I cannot control what code users will use to analyze the output of my
> >> > package functions.
> >> >
> >> > If necessary, I will simply not run the ggplot calls in my vignettes
> and
> >> > render pre-generated plots saved in .png. I feel this would be a bad
> >> > solution to keep the package on CRAN, though. I would really
> appreciate
> >> > your thoughts on this.
> >> >
> >> > best,
> >> > Rafael Pereira
> >> >
> >> > *Cran Policy asks that:*
> >> >
> >> >    - Packages which use Internet resources should fail gracefully with
> >> > an informative
> >> >    message if the resource is not available or has changed (and not
> >> give a
> >> >    check warning nor error)
> >> >
> >> >
> >> > # code causing the error
> >> >
> >> > library(aopdata)
> >> > library(ggplot2)
> >> > df <- aopdata::read_population
> >> > <https://ipeagit.github.io/aopdata/reference/read_population.html>(
> >> > city = 'Fortaleza',  year = 2010,  geometry = TRUE,  showProgress =
> >> > FALSE  )
> >> >
> >> >
> >> >
> >> > ggplot() +
> >> >   geom_sf(data=subset(df, P001>0), aes(fill=P001), color=NA,
> alpha=.8) +
> >> >   scale_fill_distiller(palette = "YlOrRd", direction = 1)+
> >> >   labs(title='Population distribution', fill="Total population") +
> >> >   theme_void()
> >> >
> >> >
> >> > best,
> >> > Rafael Pereira
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-package-devel at r-project.org mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >
> > --
> > http://hadley.nz
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Sun Jan  4 12:28:56 2026
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael H. M. Pereira)
Date: Sun, 4 Jan 2026 08:28:56 -0300
Subject: [R-pkg-devel] Falling gracefully in subsequent code
In-Reply-To: <CAPRVBcxaDmXqs0bD07=y6LWM_S+opdUHFnWMDv6N5G4XpCL5aA@mail.gmail.com>
References: <CAA42DGnyNVoqtfOTUN3aackFwMwbFWy+7XKxA1eY7vjsiDfTvQ@mail.gmail.com>
 <CAPRVBcxcjprGk+V1bL9DGvZCAL3-iKToyHDjtiY6L5D9JGPmWQ@mail.gmail.com>
 <CABdHhvErXOp_OKM63zkZw7KWXapRQKftFysrcwSRvp8cZ=XAcw@mail.gmail.com>
 <CAA42DGm2D9XHRRSqD7K8wd_YObVpsuEdqZX+693mS7BLiFGDAA@mail.gmail.com>
 <CAPRVBcxaDmXqs0bD07=y6LWM_S+opdUHFnWMDv6N5G4XpCL5aA@mail.gmail.com>
Message-ID: <CAA42DGmbbogv_VMp7oTRS8TD8pUkj+eW_6+XFa=brPu433VjUA@mail.gmail.com>

??

Rafael H. M. Pereira reacted via Gmail
<https://www.google.com/gmail/about/?utm_source=gmail-in-product&utm_medium=et&utm_campaign=emojireactionemail#app>

On Fri, Jan 2, 2026 at 2:09?PM Michael Chirico <michaelchirico4 at gmail.com>
wrote:

> Sharing here a solution I was happy with:
>
> ```{r, eval=!is.null(df), ...}
>
> this has the advantage of hiding the distracting edge case handling from
> the expository code being shown to the vignette reader.
>
> Mike C
>
> On Thu, Jan 1, 2026, 4:53?PM Rafael H. M. Pereira <
> rafa.pereira.br at gmail.com> wrote:
>
>> Thank you all for the kind suggestions! Dirk's advice (in the same spirit
>> of Hadely's suggestion) should work like a glove !
>>
>> For the record, I really appreciate how supportive the R community (and
>> this group in particular) is. Thanks a bunch and happy New Year!
>>
>> best,
>> Rafa Pereira
>>
>> On Tue, Dec 30, 2025 at 2:54?PM Hadley Wickham <h.wickham at gmail.com>
>> wrote:
>>
>> > Or slightly simpler (if less helpful), you can do something like:
>> >
>> > if (is.null(df)) {
>> >   knitr::opts_chunk(eval = FALSE)
>> > }
>> >
>> > Hadley
>> >
>> > On Mon, Dec 29, 2025 at 7:23?PM Michael Chirico <
>> michaelchirico4 at gmail.com>
>> > wrote:
>> >
>> >> At a glance you might try a hidden code chunk that looks for NULL input
>> >> and
>> >> populates a "fake" dataset if so.
>> >>
>> >> On Mon, Dec 29, 2025, 4:35?PM Rafael H. M. Pereira <
>> >> rafa.pereira.br at gmail.com> wrote:
>> >>
>> >> > Hi all,
>> >> >
>> >> > I would very much appreciate your thoughts on this situation.
>> >> >
>> >> > # context
>> >> > I received an email from Prof Ripley saying that my package is not
>> >> "falling
>> >> > gracefully". Error report here
>> >> > https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/aopdata.out
>> >> >
>> >> > The error happens in the code below. You see, in the case of an
>> internet
>> >> > connection issue, the aopdata::read_population() function returns a
>> >> silent
>> >> > NULL plus an informative message, as it should. So my package does in
>> >> fact
>> >> > fail gracefully whenever an internet connection is unavailable.
>> >> >
>> >> > In this case, though, the error is actually happening in the ggplot2
>> >> call.
>> >> > Because the df object is NULL, ggplot2 cannot find the "P001"
>> column. In
>> >> > short, the package itself does follow CRAN's policy when there is an
>> >> > eventual internet connection issue, but the subsequent code throws an
>> >> error
>> >> > in such a case.
>> >> >
>> >> > Given this behavior, I?m not sure there is a change I could make to
>> my
>> >> > package that would fully prevent this situation, other than removing
>> >> > vignettes that demonstrate how to use the function outputs, which I
>> >> would
>> >> > prefer to avoid if possible.
>> >> >
>> >> > # the situation
>> >> > When I asked for advice, a kind Cran maintainer said: "So it is not
>> good
>> >> > enough to have a function return NULL when the subsequent code will
>> >> throw
>> >> > an error when it gets that NULL."
>> >> >
>> >> > So here is the situation. The Cran Policy (see it below) requires
>> *the
>> >> > package* to fail gracefully. It does not mention subsequent code.
>> Imho,
>> >> it
>> >> > should not require any subsequent code to fail gracefully. As a
>> >> > package developer, I only have control over the functioning of my
>> >> package,
>> >> > I cannot control what code users will use to analyze the output of my
>> >> > package functions.
>> >> >
>> >> > If necessary, I will simply not run the ggplot calls in my vignettes
>> and
>> >> > render pre-generated plots saved in .png. I feel this would be a bad
>> >> > solution to keep the package on CRAN, though. I would really
>> appreciate
>> >> > your thoughts on this.
>> >> >
>> >> > best,
>> >> > Rafael Pereira
>> >> >
>> >> > *Cran Policy asks that:*
>> >> >
>> >> >    - Packages which use Internet resources should fail gracefully
>> with
>> >> > an informative
>> >> >    message if the resource is not available or has changed (and not
>> >> give a
>> >> >    check warning nor error)
>> >> >
>> >> >
>> >> > # code causing the error
>> >> >
>> >> > library(aopdata)
>> >> > library(ggplot2)
>> >> > df <- aopdata::read_population
>> >> > <https://ipeagit.github.io/aopdata/reference/read_population.html>(
>> >> > city = 'Fortaleza',  year = 2010,  geometry = TRUE,  showProgress =
>> >> > FALSE  )
>> >> >
>> >> >
>> >> >
>> >> > ggplot() +
>> >> >   geom_sf(data=subset(df, P001>0), aes(fill=P001), color=NA,
>> alpha=.8) +
>> >> >   scale_fill_distiller(palette = "YlOrRd", direction = 1)+
>> >> >   labs(title='Population distribution', fill="Total population") +
>> >> >   theme_void()
>> >> >
>> >> >
>> >> > best,
>> >> > Rafael Pereira
>> >> >
>> >> >         [[alternative HTML version deleted]]
>> >> >
>> >> > ______________________________________________
>> >> > R-package-devel at r-project.org mailing list
>> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> >
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >
>> >
>> > --
>> > http://hadley.nz
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jan  6 23:31:22 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 6 Jan 2026 14:31:22 -0800
Subject: [R-pkg-devel] Trying to submit a package
Message-ID: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>

Hi All:

In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.

Thanks,

-Roy

From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Tue Jan  6 23:35:00 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Tue, 6 Jan 2026 14:35:00 -0800
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
Message-ID: <CAPRVBcwRHKRVjpYROBG+ENV9dOHSwCXEPdv8j9dx0g9PD8f89Q@mail.gmail.com>

I'm not seeing that package on this dashboard:

https://r-hub.github.io/cransays/articles/dashboard.html

Which AIUI is just a UI on top of https://cran.r-project.org/incoming/

Mike C

On Tue, Jan 6, 2026 at 2:31?PM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:

> Hi All:
>
> In the process of trying to submit a new version of the package
> ?plotdap?,  I made my submission to CRAN,  I get the first initial response
> that takes me to the page where there is the 3 item check list,  I checked
> the items,  hit submit  (or whatever the button is called) and then it just
> hung instead of the usual return page and I did not receive the usual
> acknowledgement.  So I am not certain if the submission was successful.  Is
> there a way I can find out?  I don?t want to hit CRAN with two submissions
> of the same thing if the first one actually made it.
>
> Thanks,
>
> -Roy
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jan  6 23:37:49 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 6 Jan 2026 14:37:49 -0800
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <CAPRVBcwRHKRVjpYROBG+ENV9dOHSwCXEPdv8j9dx0g9PD8f89Q@mail.gmail.com>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
 <CAPRVBcwRHKRVjpYROBG+ENV9dOHSwCXEPdv8j9dx0g9PD8f89Q@mail.gmail.com>
Message-ID: <D36BA10B-E735-481C-9032-8A1A2592EF18@noaa.gov>

Thanks.  And do I have my dates correct,  that CRAN is open again for submissions again after the holiday break

-Roy

> On Jan 6, 2026, at 2:35?PM, Michael Chirico <michaelchirico4 at gmail.com> wrote:
> 
> I'm not seeing that package on this dashboard:
> 
> https://r-hub.github.io/cransays/articles/dashboard.html
> 
> Which AIUI is just a UI on top of https://cran.r-project.org/incoming/
> 
> Mike C
> 
> On Tue, Jan 6, 2026 at 2:31?PM Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org> wrote:
> Hi All:
> 
> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
> 
> Thanks,
> 
> -Roy
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Tue Jan  6 23:41:13 2026
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 6 Jan 2026 17:41:13 -0500
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
Message-ID: <30a8699c-345b-4326-85a5-ce5be761e16f@gmail.com>

   CRAN submissions are closed so I'm not surprised if something didn't 
work.

   The 'foghorn' package provides a nice R interface to the CRAN queue; 
foghorn::cran_incoming() for the whole queue, or 
cran_incoming("plotdap") just for your package.  (I don't see it, so I 
would wait until submissions re-open tomorrow and try again ...)

On 2026-01-06 5:31 p.m., Roy Mendelssohn - NOAA Federal via 
R-package-devel wrote:
> Hi All:
> 
> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
> 
> Thanks,
> 
> -Roy
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
> E-mail is sent at my convenience; I don't expect replies outside of working hours.


From |kw@|mmo @end|ng |rom gm@||@com  Tue Jan  6 23:41:31 2026
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Tue, 6 Jan 2026 17:41:31 -0500
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
Message-ID: <CADNULg9barQvf0fXNG2-Qt5TY5JYiX+ffy+J711jS-wMR3Msyg@mail.gmail.com>

I would usually check here for cran incoming packages:

https://r-hub.github.io/cransays/articles/dashboard.html

On Tue, Jan 6, 2026, 17:31 Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:

> Hi All:
>
> In the process of trying to submit a new version of the package
> ?plotdap?,  I made my submission to CRAN,  I get the first initial response
> that takes me to the page where there is the 3 item check list,  I checked
> the items,  hit submit  (or whatever the button is called) and then it just
> hung instead of the usual return page and I did not receive the usual
> acknowledgement.  So I am not certain if the submission was successful.  Is
> there a way I can find out?  I don?t want to hit CRAN with two submissions
> of the same thing if the first one actually made it.
>
> Thanks,
>
> -Roy
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jan  6 23:46:25 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 6 Jan 2026 14:46:25 -0800
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <30a8699c-345b-4326-85a5-ce5be761e16f@gmail.com>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
 <30a8699c-345b-4326-85a5-ce5be761e16f@gmail.com>
Message-ID: <4EA8CD1B-2034-4E13-A25B-5C4F7C2090E9@noaa.gov>

Thanks.  My bad.  I thought CRAN re-opened today.  Not a problem.

Happy new year to all.

-Roy


> On Jan 6, 2026, at 2:41?PM, Ben Bolker <bbolker at gmail.com> wrote:
> 
>  CRAN submissions are closed so I'm not surprised if something didn't work.
> 
>  The 'foghorn' package provides a nice R interface to the CRAN queue; foghorn::cran_incoming() for the whole queue, or cran_incoming("plotdap") just for your package.  (I don't see it, so I would wait until submissions re-open tomorrow and try again ...)
> 
> On 2026-01-06 5:31 p.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> Hi All:
>> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
>> Thanks,
>> -Roy
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Dr. Benjamin Bolker
> Professor, Mathematics & Statistics and Biology, McMaster University
> Director, School of Computational Science and Engineering
>> E-mail is sent at my convenience; I don't expect replies outside of working hours.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Jan  6 23:52:58 2026
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 6 Jan 2026 22:52:58 +0000
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
Message-ID: <LO0P265MB6325CB94B7D6A68E5A3582EFAE87A@LO0P265MB6325.GBRP265.PROD.OUTLOOK.COM>

First,  wait for the CRAN submissions to reopen (tomorrow I think).

Having said the above, I often get in trouble if I try to follow the cran link from my phone. Just click it again and repeat the process - cran will report that you have already submitted successfully, if your previous attrmpt was good. Also,
note that after a successful submission you immediately get a confirmation email. So its absence suggests that you have not confirmed your submission successfully.

All of the above is automatic, noreal burden on the cran team, to my understanding.

Georgi Boshnakov

Sent from Outlook for Android<https://aka.ms/AAb9ysg>
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
Sent: Tuesday, January 6, 2026 10:31:22 PM
To: List r-package-devel <r-package-devel at r-project.org>
Subject: [R-pkg-devel] Trying to submit a package

Hi All:

In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.

Thanks,

-Roy
______________________________________________
R-package-devel at r-project.org mailing list
https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!PDiH4ENfjr2_Jw!Cx7dLprVsmabu-SY6DbfQvxDAkLoAzCjyY4-PWs-kcADQABNG2zT9hcDU4LrNY-Sf1HDCbTfgiZA1dnf0B_N4axm7i0oU-_1zOGjugRdZZI$ [stat[.]ethz[.]ch]

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Wed Jan  7 00:29:00 2026
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Jan 2026 15:29:00 -0800
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <LO0P265MB6325CB94B7D6A68E5A3582EFAE87A@LO0P265MB6325.GBRP265.PROD.OUTLOOK.COM>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
 <LO0P265MB6325CB94B7D6A68E5A3582EFAE87A@LO0P265MB6325.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCQ=WDaAnX-vQs2PJQe4=QGPSgcXG+EOx+RygvZTXmKWOg@mail.gmail.com>

Hello,

are you using devtools::submit_cran() to submit your package to CRAN?
I've seen a few developers posting about CRAN submission issues on
social media platforms too. My best guess is that each of them are
using devtools::submit_cran(), because submissions via the official
page <https://cran.r-project.org/submit.html> is still down;

"CRAN submissions will be offline from Dec 23, 2025 to Jan 07, 2026
-CRAN team vacation and maintenance work)

During this time, the submission of packages is not possible.

Sorry for any inconvenience."

Since these questions about CRAN downtimes keep popping up now and
then, would it make sense to have a standard "scheduled_maintenance"
file somewhere that can be parsed? Then devtools::submit_cran() could
look at that before attempting a submission. Even without that, I
guess devtools::submit_cran() could check the source for
https://xmpalantir.wu.ac.at/cransubmit/ to see that there are no input
fields in the HTML <form> tag.

My $.02

/Henrik

On Tue, Jan 6, 2026 at 3:11?PM Georgi Boshnakov
<georgi.boshnakov at manchester.ac.uk> wrote:
>
> First,  wait for the CRAN submissions to reopen (tomorrow I think).
>
> Having said the above, I often get in trouble if I try to follow the cran link from my phone. Just click it again and repeat the process - cran will report that you have already submitted successfully, if your previous attrmpt was good. Also,
> note that after a successful submission you immediately get a confirmation email. So its absence suggests that you have not confirmed your submission successfully.
>
> All of the above is automatic, noreal burden on the cran team, to my understanding.
>
> Georgi Boshnakov
>
> Sent from Outlook for Android<https://aka.ms/AAb9ysg>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> Sent: Tuesday, January 6, 2026 10:31:22 PM
> To: List r-package-devel <r-package-devel at r-project.org>
> Subject: [R-pkg-devel] Trying to submit a package
>
> Hi All:
>
> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
>
> Thanks,
>
> -Roy
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!PDiH4ENfjr2_Jw!Cx7dLprVsmabu-SY6DbfQvxDAkLoAzCjyY4-PWs-kcADQABNG2zT9hcDU4LrNY-Sf1HDCbTfgiZA1dnf0B_N4axm7i0oU-_1zOGjugRdZZI$ [stat[.]ethz[.]ch]
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jan  7 00:39:54 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 6 Jan 2026 15:39:54 -0800
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <CAFDcVCQ=WDaAnX-vQs2PJQe4=QGPSgcXG+EOx+RygvZTXmKWOg@mail.gmail.com>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
 <LO0P265MB6325CB94B7D6A68E5A3582EFAE87A@LO0P265MB6325.GBRP265.PROD.OUTLOOK.COM>
 <CAFDcVCQ=WDaAnX-vQs2PJQe4=QGPSgcXG+EOx+RygvZTXmKWOg@mail.gmail.com>
Message-ID: <D68DB5C5-1698-4E9B-9A74-27E76A986965@noaa.gov>

thanks.  As I said,  it was my bad.  I mistakenly thought CRAN submissions resumed today.  I will re-submit tomorrow.

-Roy

> On Jan 6, 2026, at 3:29?PM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
> 
> Hello,
> 
> are you using devtools::submit_cran() to submit your package to CRAN?
> I've seen a few developers posting about CRAN submission issues on
> social media platforms too. My best guess is that each of them are
> using devtools::submit_cran(), because submissions via the official
> page <https://cran.r-project.org/submit.html> is still down;
> 
> "CRAN submissions will be offline from Dec 23, 2025 to Jan 07, 2026
> -CRAN team vacation and maintenance work)
> 
> During this time, the submission of packages is not possible.
> 
> Sorry for any inconvenience."
> 
> Since these questions about CRAN downtimes keep popping up now and
> then, would it make sense to have a standard "scheduled_maintenance"
> file somewhere that can be parsed? Then devtools::submit_cran() could
> look at that before attempting a submission. Even without that, I
> guess devtools::submit_cran() could check the source for
> https://xmpalantir.wu.ac.at/cransubmit/ to see that there are no input
> fields in the HTML <form> tag.
> 
> My $.02
> 
> /Henrik
> 
> On Tue, Jan 6, 2026 at 3:11?PM Georgi Boshnakov
> <georgi.boshnakov at manchester.ac.uk> wrote:
>> 
>> First,  wait for the CRAN submissions to reopen (tomorrow I think).
>> 
>> Having said the above, I often get in trouble if I try to follow the cran link from my phone. Just click it again and repeat the process - cran will report that you have already submitted successfully, if your previous attrmpt was good. Also,
>> note that after a successful submission you immediately get a confirmation email. So its absence suggests that you have not confirmed your submission successfully.
>> 
>> All of the above is automatic, noreal burden on the cran team, to my understanding.
>> 
>> Georgi Boshnakov
>> 
>> Sent from Outlook for Android<https://aka.ms/AAb9ysg>
>> ________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
>> Sent: Tuesday, January 6, 2026 10:31:22 PM
>> To: List r-package-devel <r-package-devel at r-project.org>
>> Subject: [R-pkg-devel] Trying to submit a package
>> 
>> Hi All:
>> 
>> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
>> 
>> Thanks,
>> 
>> -Roy
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!PDiH4ENfjr2_Jw!Cx7dLprVsmabu-SY6DbfQvxDAkLoAzCjyY4-PWs-kcADQABNG2zT9hcDU4LrNY-Sf1HDCbTfgiZA1dnf0B_N4axm7i0oU-_1zOGjugRdZZI$ [stat[.]ethz[.]ch]
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From peter@c@rbonetto @end|ng |rom gm@||@com  Thu Jan  8 20:56:07 2026
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Thu, 8 Jan 2026 13:56:07 -0600
Subject: [R-pkg-devel] 
 Reproducing the clang-UBSAN test environment in rhub
 or somewhere else?
In-Reply-To: <26894.40554.133312.526224@paul.eddelbuettel.com>
References: <CAPvCojKkPyoiC1Y8PsYCC4=Z2-jfGi-3OhxOmAkzv9fEnnknPA@mail.gmail.com>
 <976baf88-74c1-4e29-aac8-8c284933f844@gmail.com>
 <26888.58879.930849.144637@paul.eddelbuettel.com>
 <CAPvCojKZ9Jj9kJunbz9k8b+AhG7LD_f+QL9=zqUXPpt02r5X2A@mail.gmail.com>
 <26894.40554.133312.526224@paul.eddelbuettel.com>
Message-ID: <CAPvCoj+eoK=P4-XzfF_yF0KOk+P5CowDfm9XPB6qZWexXSy6iw@mail.gmail.com>

I wanted to circle back on this old thread (from back in November 2025!)

Thanks to the excellent advice received (see previous responses in this
thread), I managed to (a) reproduce the errors and (b) fix them, with the
eventual result that fastTopics is back on CRAN. It was a long road, so I
wanted to briefly share with all of you the steps I took to reproduce the
errors that arose in the "clang USBAN" test environment (I'm ignoring steps
that were specific to fastTopics and therefore unlikely to be of interest
to others). Perhaps these instructions will be useful to others who find
themselves in a similar situation:

# Steps taken to replicate clang USBAN test environment.
# See these links for more details:
# https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/fastTopics/
# https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt
# https://github.com/rocker-org/r-devel-san-clang
docker pull --platform linux/x86_64 rocker/r-devel-ubsan-clang
docker run -lm -v $(pwd):/data -ti rocker/r-devel-ubsan-clang
cd /data
apt-get update
apt-get install cmake
Rdevel --no-save
> install.packages("rmarkdown")
> install.packages("remotes")
> library(remotes)
> # Now install fastTopics.
export UBSAN_OPTIONS="print_stacktrace=1"
Rscriptdevel --vanilla single_cell_rnaseq_basic.R \
  > single_cell_rnaseq_basic.out 2> single_cell_rnaseq_basic.err

I'll note that Ben was correct in his speculation about the source of the
"null pointer" errors, although there was an additional error that arose
from an edge case that I failed to handle.

More generally, my takeaway from this experience is that we (the R package
developers) have been spoiled to have so many user-friendly resources that
mimic the CRAN test environments (e.g., winbuilder), and it was a very
steep learning curve to do this manually with the Docker containers
(generously provided by Dirk).

Peter

On Fri, Nov 7, 2025 at 7:35?PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 7 November 2025 at 15:14, Peter Carbonetto wrote:
> | However, I was not able to reproduce the exact errors Dirk obtained by
> | running the R code purl'ed from the single_cell_rnaseq_basic.Rmd
> vignette.
> | I thought that this might work:
> |
> | R -d valgrind --vanilla < single_cell_rnaseq_basic.R
> |
> | but this did not produce any of the "runtime errors" such as:
> |
> |
> /usr/local/lib/R/site-library/RcppArmadillo/include/current/armadillo_bits/Mat_meat.hpp:7043:26:
> | runtime error: reference binding to null pointer of type 'const double'
> |
> | Dirk, could you please share the exact R or Rscript command you ran to
> | obtain these errors? In addition, do I need to install fastTopics and the
> | other R packages in a specific way as well? That is, are there special
> | flags (perhaps existing somewhere in
> | https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt) that are needed
> to
> | activate these extra debugging checks?
>
> You want 'RD', not 'R'.  From the container's github repo README.mdL
>
>    Note that the instrumented version of R is available on the path as
>    Rdevel, symbolically linked as RD, and that the instrumented versions of
>    Rscript is Rscriptdevel with symbolic link RDscript. Based on the
> R-devel
>    sources, they use the sanitizer setup that is the focuse here whereas
> the
>    R and Rscript binaries come from the standard binary package and
>    correspond to R-release without any sanitizer instrumentation. So use RD
>    and RDscript to inspect undefined behavior.
>
> Also not sure why you added '-d valgrind'. That is a very fine tool, but
> its
> use tends to be independent of ASAN/UBSAN and result in separate reports.
>
> Best, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From k@@perd@n|e|h@n@en @end|ng |rom gm@||@com  Fri Jan  9 13:47:50 2026
From: k@@perd@n|e|h@n@en @end|ng |rom gm@||@com (Kasper Daniel Hansen)
Date: Fri, 9 Jan 2026 07:47:50 -0500
Subject: [R-pkg-devel] 
 Reproducing the clang-UBSAN test environment in rhub
 or somewhere else?
In-Reply-To: <CAPvCoj+eoK=P4-XzfF_yF0KOk+P5CowDfm9XPB6qZWexXSy6iw@mail.gmail.com>
References: <CAPvCojKkPyoiC1Y8PsYCC4=Z2-jfGi-3OhxOmAkzv9fEnnknPA@mail.gmail.com>
 <976baf88-74c1-4e29-aac8-8c284933f844@gmail.com>
 <26888.58879.930849.144637@paul.eddelbuettel.com>
 <CAPvCojKZ9Jj9kJunbz9k8b+AhG7LD_f+QL9=zqUXPpt02r5X2A@mail.gmail.com>
 <26894.40554.133312.526224@paul.eddelbuettel.com>
 <CAPvCoj+eoK=P4-XzfF_yF0KOk+P5CowDfm9XPB6qZWexXSy6iw@mail.gmail.com>
Message-ID: <CAC2h7uuVtZZK2PiqL17oCZz4Eug6MX_=9mGDVAUqq3d7Zh6S-Q@mail.gmail.com>

Peter,

Thanks for this end-of-fix update. I really appreciate when people
report on the "solution" like you do here.

Best,
Kasper

On Thu, Jan 8, 2026 at 2:56?PM Peter Carbonetto <peter.carbonetto at gmail.com>
wrote:

> I wanted to circle back on this old thread (from back in November 2025!)
>
> Thanks to the excellent advice received (see previous responses in this
> thread), I managed to (a) reproduce the errors and (b) fix them, with the
> eventual result that fastTopics is back on CRAN. It was a long road, so I
> wanted to briefly share with all of you the steps I took to reproduce the
> errors that arose in the "clang USBAN" test environment (I'm ignoring steps
> that were specific to fastTopics and therefore unlikely to be of interest
> to others). Perhaps these instructions will be useful to others who find
> themselves in a similar situation:
>
> # Steps taken to replicate clang USBAN test environment.
> # See these links for more details:
> # https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/fastTopics/
> # https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt
> # https://github.com/rocker-org/r-devel-san-clang
> docker pull --platform linux/x86_64 rocker/r-devel-ubsan-clang
> docker run -lm -v $(pwd):/data -ti rocker/r-devel-ubsan-clang
> cd /data
> apt-get update
> apt-get install cmake
> Rdevel --no-save
> > install.packages("rmarkdown")
> > install.packages("remotes")
> > library(remotes)
> > # Now install fastTopics.
> export UBSAN_OPTIONS="print_stacktrace=1"
> Rscriptdevel --vanilla single_cell_rnaseq_basic.R \
>   > single_cell_rnaseq_basic.out 2> single_cell_rnaseq_basic.err
>
> I'll note that Ben was correct in his speculation about the source of the
> "null pointer" errors, although there was an additional error that arose
> from an edge case that I failed to handle.
>
> More generally, my takeaway from this experience is that we (the R package
> developers) have been spoiled to have so many user-friendly resources that
> mimic the CRAN test environments (e.g., winbuilder), and it was a very
> steep learning curve to do this manually with the Docker containers
> (generously provided by Dirk).
>
> Peter
>
> On Fri, Nov 7, 2025 at 7:35?PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
> >
> > On 7 November 2025 at 15:14, Peter Carbonetto wrote:
> > | However, I was not able to reproduce the exact errors Dirk obtained by
> > | running the R code purl'ed from the single_cell_rnaseq_basic.Rmd
> > vignette.
> > | I thought that this might work:
> > |
> > | R -d valgrind --vanilla < single_cell_rnaseq_basic.R
> > |
> > | but this did not produce any of the "runtime errors" such as:
> > |
> > |
> >
> /usr/local/lib/R/site-library/RcppArmadillo/include/current/armadillo_bits/Mat_meat.hpp:7043:26:
> > | runtime error: reference binding to null pointer of type 'const double'
> > |
> > | Dirk, could you please share the exact R or Rscript command you ran to
> > | obtain these errors? In addition, do I need to install fastTopics and
> the
> > | other R packages in a specific way as well? That is, are there special
> > | flags (perhaps existing somewhere in
> > | https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt) that are
> needed
> > to
> > | activate these extra debugging checks?
> >
> > You want 'RD', not 'R'.  From the container's github repo README.mdL
> >
> >    Note that the instrumented version of R is available on the path as
> >    Rdevel, symbolically linked as RD, and that the instrumented versions
> of
> >    Rscript is Rscriptdevel with symbolic link RDscript. Based on the
> > R-devel
> >    sources, they use the sanitizer setup that is the focuse here whereas
> > the
> >    R and Rscript binaries come from the standard binary package and
> >    correspond to R-release without any sanitizer instrumentation. So use
> RD
> >    and RDscript to inspect undefined behavior.
> >
> > Also not sure why you added '-d valgrind'. That is a very fine tool, but
> > its
> > use tends to be independent of ASAN/UBSAN and result in separate reports.
> >
> > Best, Dirk
> >
> > --
> > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Best,
Kasper

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan  9 14:23:00 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 9 Jan 2026 07:23:00 -0600
Subject: [R-pkg-devel] 
 Reproducing the clang-UBSAN test environment in rhub
 or somewhere else?
In-Reply-To: <CAC2h7uuVtZZK2PiqL17oCZz4Eug6MX_=9mGDVAUqq3d7Zh6S-Q@mail.gmail.com>
References: <CAPvCojKkPyoiC1Y8PsYCC4=Z2-jfGi-3OhxOmAkzv9fEnnknPA@mail.gmail.com>
 <976baf88-74c1-4e29-aac8-8c284933f844@gmail.com>
 <26888.58879.930849.144637@paul.eddelbuettel.com>
 <CAPvCojKZ9Jj9kJunbz9k8b+AhG7LD_f+QL9=zqUXPpt02r5X2A@mail.gmail.com>
 <26894.40554.133312.526224@paul.eddelbuettel.com>
 <CAPvCoj+eoK=P4-XzfF_yF0KOk+P5CowDfm9XPB6qZWexXSy6iw@mail.gmail.com>
 <CAC2h7uuVtZZK2PiqL17oCZz4Eug6MX_=9mGDVAUqq3d7Zh6S-Q@mail.gmail.com>
Message-ID: <26977.308.872980.361730@paul.eddelbuettel.com>


On 9 January 2026 at 07:47, Kasper Daniel Hansen wrote:
| Peter,
| 
| Thanks for this end-of-fix update. I really appreciate when people
| report on the "solution" like you do here.

Seconded!  (And always very happy to see these tools used!)

The only micro-hint I'd add is that (for a fair subset of packages) you can
use `apt` when installing some dependencies (that you do not need for ASAN /
UBSAN).  I have wondered about switching to Ubuntu to take advantage of r2u
here but the underlying Debian container here gives us newer gcc (or clang,
respectively) which we generally need. I could get clang nightlies for
Ubuntu, gcc is trickier.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Jan  9 15:11:35 2026
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 9 Jan 2026 08:11:35 -0600
Subject: [R-pkg-devel] CRAN submissions down?
Message-ID: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>

Hi all,

Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
down for others too?

Hadley

-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan  9 15:29:17 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 9 Jan 2026 08:29:17 -0600
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
Message-ID: <26977.4285.87660.893523@paul.eddelbuettel.com>


On 9 January 2026 at 08:11, Hadley Wickham wrote:
| Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
| down for others too?

> ciw::ciw() |> head()
    Folder                  Name                Time   Size        Age
    <char>                <char>              <POSc> <char> <difftime>
1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
>

Five uploads in the last hour may suggest it is a 'you' problem.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Jan  9 15:46:02 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 9 Jan 2026 06:46:02 -0800
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <26977.4285.87660.893523@paul.eddelbuettel.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
Message-ID: <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>

I can reach it from your work address but not from my home address.  When I do a traceroute from home I get blocked at the last step.

HTH,

-Roy


> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 9 January 2026 at 08:11, Hadley Wickham wrote:
> | Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
> | down for others too?
> 
>> ciw::ciw() |> head()
>    Folder                  Name                Time   Size        Age
>    <char>                <char>              <POSc> <char> <difftime>
> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
>> 
> 
> Five uploads in the last hour may suggest it is a 'you' problem.
> 
> Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Jan  9 16:32:58 2026
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 9 Jan 2026 09:32:58 -0600
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
Message-ID: <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>

Hmmm, I tried from my phone and it worked once, but I tried again now and
it didn't work either. This is the traceroute I see, in case it means
anything to anyone.

traceroute to xmpalantir.wu.ac.at (137.208.57.16), 64 hops max, 40 byte
packets
 1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
 2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
 3  104-186-12-1.lightspeed.hstntx.sbcglobal.net (104.186.12.1)  6.222 ms
 6.569 ms  10.912 ms
 4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
10  dls-b24-link.ip.twelve99.net (62.115.139.131)  138.944 ms  140.363 ms
    dls-b23-link.ip.twelve99.net (62.115.138.65)  141.967 ms
11  dls-bb1-link.ip.twelve99.net (62.115.136.118)  12.237 ms  12.013 ms
 14.187 ms
12  * * nash-bb1-link.ip.twelve99.net (62.115.137.44)  100.600 ms
13  atl-bb1-link.ip.twelve99.net (62.115.137.54)  32.449 ms  32.397 ms
 31.204 ms
14  rest-bb1-link.ip.twelve99.net (62.115.138.70)  46.045 ms *  58.522 ms
15  prs-bb1-link.ip.twelve99.net (62.115.140.104)  120.740 ms  134.808 ms *
16  ffm-bb1-link.ip.twelve99.net (62.115.123.12)  126.600 ms  128.108 ms
 173.614 ms
17  win-bb1-link.ip.twelve99.net (62.115.137.203)  137.453 ms  140.338 ms
 138.001 ms
18  win-b7-link.ip.twelve99.net (62.115.137.103)  139.714 ms  142.909 ms
 140.607 ms
19  nextlayer-ic-392861.ip.twelve99-cust.net (62.115.205.175)  142.257 ms
 139.253 ms  139.711 ms
20  * * *
21  * * *
22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
23  vpn.wu-wien.ac.at (137.208.9.41)  135.997 ms  140.398 ms  138.908 ms

Hadley

On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> I can reach it from your work address but not from my home address.  When
> I do a traceroute from home I get blocked at the last step.
>
> HTH,
>
> -Roy
>
>
> > On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> >
> >
> > On 9 January 2026 at 08:11, Hadley Wickham wrote:
> > | Is this just a me problem, or is
> https://xmpalantir.wu.ac.at/cransubmit/
> > | down for others too?
> >
> >> ciw::ciw() |> head()
> >    Folder                  Name                Time   Size        Age
> >    <char>                <char>              <POSc> <char> <difftime>
> > 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
> > 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
> > 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
> > 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
> > 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
> > 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
> >>
> >
> > Five uploads in the last hour may suggest it is a 'you' problem.
> >
> > Dirk
> >
> > --
> > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Jan  9 16:34:32 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 9 Jan 2026 07:34:32 -0800
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
Message-ID: <5F8996D0-8B4B-4A0B-B229-C6F453D24F2A@noaa.gov>

clearly that should be from ?my work address ? IP.  I think it is real,  just appears to be selective,  such as something is blocking a range of IPs.  I have seen this when things like Akamai or Cloudfare or the like are in front of a server,  they decide that something should  be blocked.     I can provide traceroute  results if that would help.

-Roy

> On Jan 9, 2026, at 6:46?AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> I can reach it from your work address but not from my home address.  When I do a traceroute from home I get blocked at the last step.
> 
> HTH,
> 
> -Roy
> 
> 
>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>> 
>> 
>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>> | Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
>> | down for others too?
>> 
>>> ciw::ciw() |> head()
>>   Folder                  Name                Time   Size        Age
>>   <char>                <char>              <POSc> <char> <difftime>
>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
>>> 
>> 
>> Five uploads in the last hour may suggest it is a 'you' problem.
>> 
>> Dirk
>> 
>> -- 
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Jan  9 16:35:36 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 9 Jan 2026 07:35:36 -0800
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
Message-ID: <81194423-B24E-4A2F-97A5-2F8C8FCB0257@noaa.gov>

My traceroute reaches 193.171.13.18 and then fails.

-Roy


> On Jan 9, 2026, at 7:32?AM, Hadley Wickham <h.wickham at gmail.com> wrote:
> 
> Hmmm, I tried from my phone and it worked once, but I tried again now and it didn't work either. This is the traceroute I see, in case it means anything to anyone.
> 
> traceroute to xmpalantir.wu.ac.at (137.208.57.16), 64 hops max, 40 byte packets
>  1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
>  2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
>  3  104-186-12-1.lightspeed.hstntx.sbcglobal.net (104.186.12.1)  6.222 ms  6.569 ms  10.912 ms
>  4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
>  5  * * *
>  6  * * *
>  7  * * *
>  8  * * *
>  9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
> 10  dls-b24-link.ip.twelve99.net (62.115.139.131)  138.944 ms  140.363 ms
>     dls-b23-link.ip.twelve99.net (62.115.138.65)  141.967 ms
> 11  dls-bb1-link.ip.twelve99.net (62.115.136.118)  12.237 ms  12.013 ms  14.187 ms
> 12  * * nash-bb1-link.ip.twelve99.net (62.115.137.44)  100.600 ms
> 13  atl-bb1-link.ip.twelve99.net (62.115.137.54)  32.449 ms  32.397 ms  31.204 ms
> 14  rest-bb1-link.ip.twelve99.net (62.115.138.70)  46.045 ms *  58.522 ms
> 15  prs-bb1-link.ip.twelve99.net (62.115.140.104)  120.740 ms  134.808 ms *
> 16  ffm-bb1-link.ip.twelve99.net (62.115.123.12)  126.600 ms  128.108 ms  173.614 ms
> 17  win-bb1-link.ip.twelve99.net (62.115.137.203)  137.453 ms  140.338 ms  138.001 ms
> 18  win-b7-link.ip.twelve99.net (62.115.137.103)  139.714 ms  142.909 ms  140.607 ms
> 19  nextlayer-ic-392861.ip.twelve99-cust.net (62.115.205.175)  142.257 ms  139.253 ms  139.711 ms
> 20  * * *
> 21  * * *
> 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
> 23  vpn.wu-wien.ac.at (137.208.9.41)  135.997 ms  140.398 ms  138.908 ms
> 
> Hadley
> 
> On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> I can reach it from your work address but not from my home address.  When I do a traceroute from home I get blocked at the last step.
> 
> HTH,
> 
> -Roy
> 
> 
> > On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> > 
> > 
> > On 9 January 2026 at 08:11, Hadley Wickham wrote:
> > | Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
> > | down for others too?
> > 
> >> ciw::ciw() |> head()
> >    Folder                  Name                Time   Size        Age
> >    <char>                <char>              <POSc> <char> <difftime>
> > 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
> > 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
> > 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
> > 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
> > 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
> > 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
> >> 
> > 
> > Five uploads in the last hour may suggest it is a 'you' problem.
> > 
> > Dirk
> > 
> > -- 
> > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> -- 
> http://hadley.nz


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jan  9 16:40:02 2026
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 9 Jan 2026 16:40:02 +0100
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
Message-ID: <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>

It seems some people tried to submit with devtools during the CRAN 
vacations while the submission webpage was deactivated.
Not sure what devtools does, but it seems some partial submission was 
possible that way (just incomplete) and that may have caused a pattern 
that lead to the IP block.

At least we had some reports about the above mentioned szenario. The 
sysadmin team tries to resolve this.
Perhaps simply send your IP to cran-sysadmin at R-project.org
for a quick solution.

Best,
Uwe





On 09.01.2026 16:32, Hadley Wickham wrote:
> Hmmm, I tried from my phone and it worked once, but I tried again now and
> it didn't work either. This is the traceroute I see, in case it means
> anything to anyone.
> 
> traceroute to xmpalantir.wu.ac.at (137.208.57.16), 64 hops max, 40 byte
> packets
>   1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
>   2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
>   3  104-186-12-1.lightspeed.hstntx.sbcglobal.net (104.186.12.1)  6.222 ms
>   6.569 ms  10.912 ms
>   4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
>   5  * * *
>   6  * * *
>   7  * * *
>   8  * * *
>   9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
> 10  dls-b24-link.ip.twelve99.net (62.115.139.131)  138.944 ms  140.363 ms
>      dls-b23-link.ip.twelve99.net (62.115.138.65)  141.967 ms
> 11  dls-bb1-link.ip.twelve99.net (62.115.136.118)  12.237 ms  12.013 ms
>   14.187 ms
> 12  * * nash-bb1-link.ip.twelve99.net (62.115.137.44)  100.600 ms
> 13  atl-bb1-link.ip.twelve99.net (62.115.137.54)  32.449 ms  32.397 ms
>   31.204 ms
> 14  rest-bb1-link.ip.twelve99.net (62.115.138.70)  46.045 ms *  58.522 ms
> 15  prs-bb1-link.ip.twelve99.net (62.115.140.104)  120.740 ms  134.808 ms *
> 16  ffm-bb1-link.ip.twelve99.net (62.115.123.12)  126.600 ms  128.108 ms
>   173.614 ms
> 17  win-bb1-link.ip.twelve99.net (62.115.137.203)  137.453 ms  140.338 ms
>   138.001 ms
> 18  win-b7-link.ip.twelve99.net (62.115.137.103)  139.714 ms  142.909 ms
>   140.607 ms
> 19  nextlayer-ic-392861.ip.twelve99-cust.net (62.115.205.175)  142.257 ms
>   139.253 ms  139.711 ms
> 20  * * *
> 21  * * *
> 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
> 23  vpn.wu-wien.ac.at (137.208.9.41)  135.997 ms  140.398 ms  138.908 ms
> 
> Hadley
> 
> On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
> roy.mendelssohn at noaa.gov> wrote:
> 
>> I can reach it from your work address but not from my home address.  When
>> I do a traceroute from home I get blocked at the last step.
>>
>> HTH,
>>
>> -Roy
>>
>>
>>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>
>>>
>>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>>> | Is this just a me problem, or is
>> https://xmpalantir.wu.ac.at/cransubmit/
>>> | down for others too?
>>>
>>>> ciw::ciw() |> head()
>>>     Folder                  Name                Time   Size        Age
>>>     <char>                <char>              <POSc> <char> <difftime>
>>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
>>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
>>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
>>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
>>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
>>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
>>>>
>>>
>>> Five uploads in the last hour may suggest it is a 'you' problem.
>>>
>>> Dirk
>>>
>>> --
>>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
> 


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jan  9 16:44:55 2026
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 9 Jan 2026 10:44:55 -0500
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <81194423-B24E-4A2F-97A5-2F8C8FCB0257@noaa.gov>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <81194423-B24E-4A2F-97A5-2F8C8FCB0257@noaa.gov>
Message-ID: <36ce423e-c9e3-4f19-8b2b-cc2cb78bd68f@gmail.com>

Similar from here in Ottawa.

JN

On 2026-01-09 10:35, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
> My traceroute reaches 193.171.13.18 and then fails.
> 
> -Roy
> 
> 
>> On Jan 9, 2026, at 7:32?AM, Hadley Wickham <h.wickham at gmail.com> wrote:
>>
>> Hmmm, I tried from my phone and it worked once, but I tried again now and it didn't work either. This is the traceroute I see, in case it means anything to anyone.
>>
>> traceroute to xmpalantir.wu.ac.at (137.208.57.16), 64 hops max, 40 byte packets
>>   1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
>>   2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
>>   3  104-186-12-1.lightspeed.hstntx.sbcglobal.net (104.186.12.1)  6.222 ms  6.569 ms  10.912 ms
>>   4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
>>   5  * * *
>>   6  * * *
>>   7  * * *
>>   8  * * *
>>   9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
>> 10  dls-b24-link.ip.twelve99.net (62.115.139.131)  138.944 ms  140.363 ms
>>      dls-b23-link.ip.twelve99.net (62.115.138.65)  141.967 ms
>> 11  dls-bb1-link.ip.twelve99.net (62.115.136.118)  12.237 ms  12.013 ms  14.187 ms
>> 12  * * nash-bb1-link.ip.twelve99.net (62.115.137.44)  100.600 ms
>> 13  atl-bb1-link.ip.twelve99.net (62.115.137.54)  32.449 ms  32.397 ms  31.204 ms
>> 14  rest-bb1-link.ip.twelve99.net (62.115.138.70)  46.045 ms *  58.522 ms
>> 15  prs-bb1-link.ip.twelve99.net (62.115.140.104)  120.740 ms  134.808 ms *
>> 16  ffm-bb1-link.ip.twelve99.net (62.115.123.12)  126.600 ms  128.108 ms  173.614 ms
>> 17  win-bb1-link.ip.twelve99.net (62.115.137.203)  137.453 ms  140.338 ms  138.001 ms
>> 18  win-b7-link.ip.twelve99.net (62.115.137.103)  139.714 ms  142.909 ms  140.607 ms
>> 19  nextlayer-ic-392861.ip.twelve99-cust.net (62.115.205.175)  142.257 ms  139.253 ms  139.711 ms
>> 20  * * *
>> 21  * * *
>> 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
>> 23  vpn.wu-wien.ac.at (137.208.9.41)  135.997 ms  140.398 ms  138.908 ms
>>
>> Hadley
>>
>> On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>> I can reach it from your work address but not from my home address.  When I do a traceroute from home I get blocked at the last step.
>>
>> HTH,
>>
>> -Roy
>>
>>
>>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>
>>>
>>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>>> | Is this just a me problem, or is https://xmpalantir.wu.ac.at/cransubmit/
>>> | down for others too?
>>>
>>>> ciw::ciw() |> head()
>>>     Folder                  Name                Time   Size        Age
>>>     <char>                <char>              <POSc> <char> <difftime>
>>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
>>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
>>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
>>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
>>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
>>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
>>>>
>>>
>>> Five uploads in the last hour may suggest it is a 'you' problem.
>>>
>>> Dirk
>>>
>>> -- 
>>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
>> -- 
>> http://hadley.nz
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@tth|@@-gond@n @end|ng |rom gmx@de  Fri Jan  9 17:18:45 2026
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Fri, 9 Jan 2026 17:18:45 +0100
Subject: [R-pkg-devel] R mac builder, c++
Message-ID: <005201dc8183$a107bcd0$e3173670$@gmx.de>

Dear CRAN maintainers,

 

(I am writing to this list since I guess you read it anyway, and there isn't
any "contact information" at the R Mac Builder site.)

 

The Mac Builder service does not seem to compile even a basic Rcpp package
anymore, see here:

 

https://mac.r-project.org/macbuilder/results/1767974115-2b3446b6016a0ee3/

 

#include <cmath> is not found, same for #include <iostream>. Some help on
this issue would be greatly appreciated.

 

Best wishes,

 

Matthias


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jan  9 17:32:51 2026
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 9 Jan 2026 17:32:51 +0100
Subject: [R-pkg-devel] R mac builder, c++
In-Reply-To: <005201dc8183$a107bcd0$e3173670$@gmx.de>
References: <005201dc8183$a107bcd0$e3173670$@gmx.de>
Message-ID: <973a6e16-8cb1-4f62-816a-f1fc7625056d@statistik.tu-dortmund.de>



On 09.01.2026 17:18, Matthias Gondan wrote:
> Dear CRAN maintainers,
> 
>   
> 
> (I am writing to this list since I guess you read it anyway, and there isn't
> any "contact information" at the R Mac Builder site.)
> 
>   
> 
> The Mac Builder service does not seem to compile even a basic Rcpp package
> anymore, see here:

- A new Rcpp version is currently under reverse dependency checks on CRAN.

- In general report issues with the macbuilder service to its 
maintainer, Simon Urbanek.

Best,
Uwe Ligges




>   
> 
> https://mac.r-project.org/macbuilder/results/1767974115-2b3446b6016a0ee3/
> 
>   
> 
> #include <cmath> is not found, same for #include <iostream>. Some help on
> this issue would be greatly appreciated.
> 
>   
> 
> Best wishes,
> 
>   
> 
> Matthias
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Jan  9 23:13:42 2026
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 10 Jan 2026 11:13:42 +1300
Subject: [R-pkg-devel] R mac builder, c++
In-Reply-To: <005201dc8183$a107bcd0$e3173670$@gmx.de>
References: <005201dc8183$a107bcd0$e3173670$@gmx.de>
Message-ID: <40C564E8-4D26-4EAA-B6EB-B0C2474666FA@R-project.org>

Matthias,

thanks, now fixed:

https://mac.r-project.org/macbuilder/results/1767996503-3a8243f5318cf480/

It's the old Xcode update bug which can be fixed with
sudo rm -rf /Library/Developer/CommandLineTools/usr/include/c++

Cheers,
Simon

PS: contact info is on the main page (=me, preferred) or R-SIG-Mac.



> On 10/01/2026, at 05:18, Matthias Gondan <matthias-gondan at gmx.de> wrote:
> 
> Dear CRAN maintainers,
> 
> 
> 
> (I am writing to this list since I guess you read it anyway, and there isn't
> any "contact information" at the R Mac Builder site.)
> 
> 
> 
> The Mac Builder service does not seem to compile even a basic Rcpp package
> anymore, see here:
> 
> 
> 
> https://mac.r-project.org/macbuilder/results/1767974115-2b3446b6016a0ee3/
> 
> 
> 
> #include <cmath> is not found, same for #include <iostream>. Some help on
> this issue would be greatly appreciated.
> 
> 
> 
> Best wishes,
> 
> 
> 
> Matthias
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Jan 10 01:12:35 2026
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 10 Jan 2026 01:12:35 +0100
Subject: [R-pkg-devel] Trying to submit a package
In-Reply-To: <D68DB5C5-1698-4E9B-9A74-27E76A986965@noaa.gov>
References: <EA5F6D2C-466E-48B3-B353-E44A2AFA49F7@noaa.gov>
 <LO0P265MB6325CB94B7D6A68E5A3582EFAE87A@LO0P265MB6325.GBRP265.PROD.OUTLOOK.COM>
 <CAFDcVCQ=WDaAnX-vQs2PJQe4=QGPSgcXG+EOx+RygvZTXmKWOg@mail.gmail.com>
 <D68DB5C5-1698-4E9B-9A74-27E76A986965@noaa.gov>
Message-ID: <97ed162c-59d4-4b01-858f-ca3fe0543996@statistik.tu-dortmund.de>

The CRAN sysadmins resolved the issues, all blocked IPs should be 
cleaned up and submission should work for everybody again (not only the 
hundreds (!) of  submissions we received successfully within 2 days)

Best,
Uwe Ligges



On 07.01.2026 00:39, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> thanks.  As I said,  it was my bad.  I mistakenly thought CRAN submissions resumed today.  I will re-submit tomorrow.
> 
> -Roy
> 
>> On Jan 6, 2026, at 3:29?PM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>>
>> Hello,
>>
>> are you using devtools::submit_cran() to submit your package to CRAN?
>> I've seen a few developers posting about CRAN submission issues on
>> social media platforms too. My best guess is that each of them are
>> using devtools::submit_cran(), because submissions via the official
>> page <https://cran.r-project.org/submit.html> is still down;
>>
>> "CRAN submissions will be offline from Dec 23, 2025 to Jan 07, 2026
>> -CRAN team vacation and maintenance work)
>>
>> During this time, the submission of packages is not possible.
>>
>> Sorry for any inconvenience."
>>
>> Since these questions about CRAN downtimes keep popping up now and
>> then, would it make sense to have a standard "scheduled_maintenance"
>> file somewhere that can be parsed? Then devtools::submit_cran() could
>> look at that before attempting a submission. Even without that, I
>> guess devtools::submit_cran() could check the source for
>> https://xmpalantir.wu.ac.at/cransubmit/ to see that there are no input
>> fields in the HTML <form> tag.
>>
>> My $.02
>>
>> /Henrik
>>
>> On Tue, Jan 6, 2026 at 3:11?PM Georgi Boshnakov
>> <georgi.boshnakov at manchester.ac.uk> wrote:
>>>
>>> First,  wait for the CRAN submissions to reopen (tomorrow I think).
>>>
>>> Having said the above, I often get in trouble if I try to follow the cran link from my phone. Just click it again and repeat the process - cran will report that you have already submitted successfully, if your previous attrmpt was good. Also,
>>> note that after a successful submission you immediately get a confirmation email. So its absence suggests that you have not confirmed your submission successfully.
>>>
>>> All of the above is automatic, noreal burden on the cran team, to my understanding.
>>>
>>> Georgi Boshnakov
>>>
>>> Sent from Outlook for Android<https://aka.ms/AAb9ysg>
>>> ________________________________
>>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
>>> Sent: Tuesday, January 6, 2026 10:31:22 PM
>>> To: List r-package-devel <r-package-devel at r-project.org>
>>> Subject: [R-pkg-devel] Trying to submit a package
>>>
>>> Hi All:
>>>
>>> In the process of trying to submit a new version of the package ?plotdap?,  I made my submission to CRAN,  I get the first initial response that takes me to the page where there is the 3 item check list,  I checked the items,  hit submit  (or whatever the button is called) and then it just hung instead of the usual return page and I did not receive the usual acknowledgement.  So I am not certain if the submission was successful.  Is there a way I can find out?  I don?t want to hit CRAN with two submissions of the same thing if the first one actually made it.
>>>
>>> Thanks,
>>>
>>> -Roy
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!PDiH4ENfjr2_Jw!Cx7dLprVsmabu-SY6DbfQvxDAkLoAzCjyY4-PWs-kcADQABNG2zT9hcDU4LrNY-Sf1HDCbTfgiZA1dnf0B_N4axm7i0oU-_1zOGjugRdZZI$ [stat[.]ethz[.]ch]
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Jan 11 15:19:07 2026
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 11 Jan 2026 08:19:07 -0600
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
Message-ID: <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>

Thanks for the fix!

Happy to chat about what devtools could do better here to avoid future
problems.

Hadley

On Fri, Jan 9, 2026 at 9:40?AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> It seems some people tried to submit with devtools during the CRAN
> vacations while the submission webpage was deactivated.
> Not sure what devtools does, but it seems some partial submission was
> possible that way (just incomplete) and that may have caused a pattern
> that lead to the IP block.
>
> At least we had some reports about the above mentioned szenario. The
> sysadmin team tries to resolve this.
> Perhaps simply send your IP to cran-sysadmin at R-project.org
> for a quick solution.
>
> Best,
> Uwe
>
>
>
>
>
> On 09.01.2026 16:32, Hadley Wickham wrote:
> > Hmmm, I tried from my phone and it worked once, but I tried again now and
> > it didn't work either. This is the traceroute I see, in case it means
> > anything to anyone.
> >
> > traceroute to xmpalantir.wu.ac.at (137.208.57.16), 64 hops max, 40 byte
> > packets
> >   1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
> >   2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
> >   3  104-186-12-1.lightspeed.hstntx.sbcglobal.net (104.186.12.1)  6.222
> ms
> >   6.569 ms  10.912 ms
> >   4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
> >   5  * * *
> >   6  * * *
> >   7  * * *
> >   8  * * *
> >   9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
> > 10  dls-b24-link.ip.twelve99.net (62.115.139.131)  138.944 ms  140.363
> ms
> >      dls-b23-link.ip.twelve99.net (62.115.138.65)  141.967 ms
> > 11  dls-bb1-link.ip.twelve99.net (62.115.136.118)  12.237 ms  12.013 ms
> >   14.187 ms
> > 12  * * nash-bb1-link.ip.twelve99.net (62.115.137.44)  100.600 ms
> > 13  atl-bb1-link.ip.twelve99.net (62.115.137.54)  32.449 ms  32.397 ms
> >   31.204 ms
> > 14  rest-bb1-link.ip.twelve99.net (62.115.138.70)  46.045 ms *  58.522
> ms
> > 15  prs-bb1-link.ip.twelve99.net (62.115.140.104)  120.740 ms  134.808
> ms *
> > 16  ffm-bb1-link.ip.twelve99.net (62.115.123.12)  126.600 ms  128.108 ms
> >   173.614 ms
> > 17  win-bb1-link.ip.twelve99.net (62.115.137.203)  137.453 ms  140.338
> ms
> >   138.001 ms
> > 18  win-b7-link.ip.twelve99.net (62.115.137.103)  139.714 ms  142.909 ms
> >   140.607 ms
> > 19  nextlayer-ic-392861.ip.twelve99-cust.net (62.115.205.175)  142.257
> ms
> >   139.253 ms  139.711 ms
> > 20  * * *
> > 21  * * *
> > 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
> > 23  vpn.wu-wien.ac.at (137.208.9.41)  135.997 ms  140.398 ms  138.908 ms
> >
> > Hadley
> >
> > On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
> > roy.mendelssohn at noaa.gov> wrote:
> >
> >> I can reach it from your work address but not from my home address.
> When
> >> I do a traceroute from home I get blocked at the last step.
> >>
> >> HTH,
> >>
> >> -Roy
> >>
> >>
> >>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> >>>
> >>>
> >>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
> >>> | Is this just a me problem, or is
> >> https://xmpalantir.wu.ac.at/cransubmit/
> >>> | down for others too?
> >>>
> >>>> ciw::ciw() |> head()
> >>>     Folder                  Name                Time   Size        Age
> >>>     <char>                <char>              <POSc> <char> <difftime>
> >>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M 0.04 hours
> >>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K 0.12 hours
> >>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M 0.30 hours
> >>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M 0.35 hours
> >>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K 0.54 hours
> >>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M 1.14 hours
> >>>>
> >>>
> >>> Five uploads in the last hour may suggest it is a 'you' problem.
> >>>
> >>> Dirk
> >>>
> >>> --
> >>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
> >
>
>

-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jan 12 01:08:05 2026
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 12 Jan 2026 01:08:05 +0100
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
Message-ID: <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>



On 11.01.2026 15:19, Hadley Wickham wrote:
> Thanks for the fix!
> 
> Happy to chat about what devtools could do better here to avoid future 
> problems.


We try to find out why submissions got blocked. I guess devtools tried 
multiple times to open some webpage that was shut down and then the 
corresponding IP got auto blocked for too many connections within a time 
frame (which is why I get blocked by WU Vienna few times a year). We 
hope to get feedback from the sysadmins soon.


Best,
Uwe


> Hadley
> 
> On Fri, Jan 9, 2026 at 9:40?AM Uwe Ligges <ligges at statistik.tu- 
> dortmund.de <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
>     It seems some people tried to submit with devtools during the CRAN
>     vacations while the submission webpage was deactivated.
>     Not sure what devtools does, but it seems some partial submission was
>     possible that way (just incomplete) and that may have caused a pattern
>     that lead to the IP block.
> 
>     At least we had some reports about the above mentioned szenario. The
>     sysadmin team tries to resolve this.
>     Perhaps simply send your IP to cran-sysadmin at R-project.org
>     for a quick solution.
> 
>     Best,
>     Uwe
> 
> 
> 
> 
> 
>     On 09.01.2026 16:32, Hadley Wickham wrote:
>      > Hmmm, I tried from my phone and it worked once, but I tried again
>     now and
>      > it didn't work either. This is the traceroute I see, in case it means
>      > anything to anyone.
>      >
>      > traceroute to xmpalantir.wu.ac.at <http://xmpalantir.wu.ac.at>
>     (137.208.57.16), 64 hops max, 40 byte
>      > packets
>      >? ?1? 192.168.4.1 (192.168.4.1)? 7.828 ms? 3.684 ms? 5.233 ms
>      >? ?2? 192.168.1.254 (192.168.1.254)? 7.409 ms? 5.343 ms? 5.369 ms
>      >? ?3 104-186-12-1.lightspeed.hstntx.sbcglobal.net
>     <http://104-186-12-1.lightspeed.hstntx.sbcglobal.net>
>     (104.186.12.1)? 6.222 ms
>      >? ?6.569 ms? 10.912 ms
>      >? ?4? 71.149.39.62 (71.149.39.62)? 5.816 ms? 6.046 ms? 4.386 ms
>      >? ?5? * * *
>      >? ?6? * * *
>      >? ?7? * * *
>      >? ?8? * * *
>      >? ?9? * * 192.205.37.10 (192.205.37.10)? 11.947 ms
>      > 10 dls-b24-link.ip.twelve99.net <http://dls-b24-
>     link.ip.twelve99.net> (62.115.139.131)? 138.944 ms? 140.363 ms
>      > dls-b23-link.ip.twelve99.net <http://dls-b23-
>     link.ip.twelve99.net> (62.115.138.65)? 141.967 ms
>      > 11 dls-bb1-link.ip.twelve99.net <http://dls-bb1-
>     link.ip.twelve99.net> (62.115.136.118)? 12.237 ms? 12.013 ms
>      >? ?14.187 ms
>      > 12? * * nash-bb1-link.ip.twelve99.net <http://nash-bb1-
>     link.ip.twelve99.net> (62.115.137.44)? 100.600 ms
>      > 13 atl-bb1-link.ip.twelve99.net <http://atl-bb1-
>     link.ip.twelve99.net> (62.115.137.54)? 32.449 ms? 32.397 ms
>      >? ?31.204 ms
>      > 14 rest-bb1-link.ip.twelve99.net <http://rest-bb1-
>     link.ip.twelve99.net> (62.115.138.70)? 46.045 ms *? 58.522 ms
>      > 15 prs-bb1-link.ip.twelve99.net <http://prs-bb1-
>     link.ip.twelve99.net> (62.115.140.104)? 120.740 ms? 134.808 ms *
>      > 16 ffm-bb1-link.ip.twelve99.net <http://ffm-bb1-
>     link.ip.twelve99.net> (62.115.123.12)? 126.600 ms? 128.108 ms
>      >? ?173.614 ms
>      > 17 win-bb1-link.ip.twelve99.net <http://win-bb1-
>     link.ip.twelve99.net> (62.115.137.203)? 137.453 ms? 140.338 ms
>      >? ?138.001 ms
>      > 18 win-b7-link.ip.twelve99.net <http://win-b7-
>     link.ip.twelve99.net> (62.115.137.103)? 139.714 ms? 142.909 ms
>      >? ?140.607 ms
>      > 19 nextlayer-ic-392861.ip.twelve99-cust.net <http://nextlayer-
>     ic-392861.ip.twelve99-cust.net> (62.115.205.175)? 142.257 ms
>      >? ?139.253 ms? 139.711 ms
>      > 20? * * *
>      > 21? * * *
>      > 22? 193.171.13.18 (193.171.13.18)? 135.095 ms? 139.585 ms? 133.808 ms
>      > 23 vpn.wu-wien.ac.at <http://vpn.wu-wien.ac.at> (137.208.9.41) 
>     135.997 ms? 140.398 ms? 138.908 ms
>      >
>      > Hadley
>      >
>      > On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
>      > roy.mendelssohn at noaa.gov <mailto:roy.mendelssohn at noaa.gov>> wrote:
>      >
>      >> I can reach it from your work address but not from my home
>     address.? When
>      >> I do a traceroute from home I get blocked at the last step.
>      >>
>      >> HTH,
>      >>
>      >> -Roy
>      >>
>      >>
>      >>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org
>     <mailto:edd at debian.org>> wrote:
>      >>>
>      >>>
>      >>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>      >>> | Is this just a me problem, or is
>      >> https://xmpalantir.wu.ac.at/cransubmit/ <https://
>     xmpalantir.wu.ac.at/cransubmit/>
>      >>> | down for others too?
>      >>>
>      >>>> ciw::ciw() |> head()
>      >>>? ? ?Folder? ? ? ? ? ? ? ? ? Name? ? ? ? ? ? ? ? Time? ?Size   
>      ? ? Age
>      >>>? ? ?<char>? ? ? ? ? ? ? ? <char>? ? ? ? ? ? ? <POSc> <char>
>     <difftime>
>      >>> 1: pretest? ? ?NNS_11.6.4.tar.gz 2026-01-09 15:26:00? ?1.9M
>     0.04 hours
>      >>> 2: pretest? ?ggsced_0.1.2.tar.gz 2026-01-09 15:21:00? ?348K
>     0.12 hours
>      >>> 3: pretest? warprrr_0.1.0.tar.gz 2026-01-09 15:10:00? ?1.0M
>     0.30 hours
>      >>> 4: recheck? ? mapsf_1.1.0.tar.gz 2026-01-09 15:07:00? ?1.4M
>     0.35 hours
>      >>> 5: waiting? ? ?ripc_0.3.2.tar.gz 2026-01-09 14:56:00? ?103K
>     0.54 hours
>      >>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00? ?2.2M
>     1.14 hours
>      >>>>
>      >>>
>      >>> Five uploads in the last hour may suggest it is a 'you' problem.
>      >>>
>      >>> Dirk
>      >>>
>      >>> --
>      >>> dirk.eddelbuettel.com <http://dirk.eddelbuettel.com> |
>     @eddelbuettel | edd at debian.org <mailto:edd at debian.org>
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org <mailto:R-package-devel at r-
>     project.org> mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>     stat.ethz.ch/mailman/listinfo/r-package-devel>
>      >>
>      >>
>      >
> 
> 
> 
> -- 
> http://hadley.nz <http://hadley.nz>


From edd @end|ng |rom deb|@n@org  Mon Jan 12 02:05:44 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 11 Jan 2026 19:05:44 -0600
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
Message-ID: <26980.18664.444221.369187@paul.eddelbuettel.com>


On 12 January 2026 at 01:08, Uwe Ligges wrote:
| We try to find out why submissions got blocked. I guess devtools tried 
| multiple times to open some webpage that was shut down and then the 
| corresponding IP got auto blocked for too many connections within a time 
| frame (which is why I get blocked by WU Vienna few times a year). We 
| hope to get feedback from the sysadmins soon.

Yep, for what it's worth, I also don't think it is 'the code' that drove it
(as I am using a derived piece) but likely rather repeated (?) usage. At some
point, I too got tired of the webform, and also got equally tired of the
[redacted] interaction enforced by devtools so I abstracted out a simpler
version of it leaning on the basic REST calls (that devtools so nicely
compiled). I put that in a script `crup.r` (CRan UPload script) that is part
of littler.  Been using it for a few months now for my uploads, and without
issues. It worked before the winter break and also worked afterwards for (so
far) three package uploads so seemingly I did not get blacklisted. YMMV.

Cheers, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Jan 12 02:37:57 2026
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 11 Jan 2026 17:37:57 -0800
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
Message-ID: <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>

For what it is worth in my case as far as I can tell the behaviors of both devtools::submit_cran and the cran machine were quote reasonable,  even if it caused me a little pain.  The block Uwe describes sounds like fail2ban or the like,  and given the junk we see hitting our services  it is a reasonable thing to run.  I had the day wrong when I thought cran was back up.  devtools on submission said ti couldn?t connect,  It is not unreasonable as a submitter, thinking the machine was back up,  to wait a bit,  and  try again,  and maybe do so a few times throughout the day.  That is indeed what I did.  Then to be sure it wasn?t a devtools problem I went to the web page  and that is when it seemed to block me. 

So my point is everything to my mind behaved reasonably.  The only thing I could suggest,  and I have no idea of how much work this would entail, and I am not looking to make work for people,  is perhaps a banner on the webpage when the service is down,  and if possible have the server return to programs  like devtools an error that the service is down.

I can?t speak for why others were blocked,  but as I said this all seems reasonable.

Thanks,

-Roy

> On Jan 11, 2026, at 4:08?PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 11.01.2026 15:19, Hadley Wickham wrote:
>> Thanks for the fix!
>> Happy to chat about what devtools could do better here to avoid future problems.
> 
> 
> We try to find out why submissions got blocked. I guess devtools tried multiple times to open some webpage that was shut down and then the corresponding IP got auto blocked for too many connections within a time frame (which is why I get blocked by WU Vienna few times a year). We hope to get feedback from the sysadmins soon.
> 
> 
> Best,
> Uwe
> 
> 
>> Hadley
>> On Fri, Jan 9, 2026 at 9:40?AM Uwe Ligges <ligges at statistik.tu- dortmund.de <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>    It seems some people tried to submit with devtools during the CRAN
>>    vacations while the submission webpage was deactivated.
>>    Not sure what devtools does, but it seems some partial submission was
>>    possible that way (just incomplete) and that may have caused a pattern
>>    that lead to the IP block.
>>    At least we had some reports about the above mentioned szenario. The
>>    sysadmin team tries to resolve this.
>>    Perhaps simply send your IP to cran-sysadmin at R-project.org
>>    for a quick solution.
>>    Best,
>>    Uwe
>>    On 09.01.2026 16:32, Hadley Wickham wrote:
>>     > Hmmm, I tried from my phone and it worked once, but I tried again
>>    now and
>>     > it didn't work either. This is the traceroute I see, in case it means
>>     > anything to anyone.
>>     >
>>     > traceroute to xmpalantir.wu.ac.at <http://xmpalantir.wu.ac.at>
>>    (137.208.57.16), 64 hops max, 40 byte
>>     > packets
>>     >   1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
>>     >   2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
>>     >   3 104-186-12-1.lightspeed.hstntx.sbcglobal.net
>>    <http://104-186-12-1.lightspeed.hstntx.sbcglobal.net>
>>    (104.186.12.1)  6.222 ms
>>     >   6.569 ms  10.912 ms
>>     >   4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
>>     >   5  * * *
>>     >   6  * * *
>>     >   7  * * *
>>     >   8  * * *
>>     >   9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
>>     > 10 dls-b24-link.ip.twelve99.net <http://dls-b24-
>>    link.ip.twelve99.net> (62.115.139.131)  138.944 ms  140.363 ms
>>     > dls-b23-link.ip.twelve99.net <http://dls-b23-
>>    link.ip.twelve99.net> (62.115.138.65)  141.967 ms
>>     > 11 dls-bb1-link.ip.twelve99.net <http://dls-bb1-
>>    link.ip.twelve99.net> (62.115.136.118)  12.237 ms  12.013 ms
>>     >   14.187 ms
>>     > 12  * * nash-bb1-link.ip.twelve99.net <http://nash-bb1-
>>    link.ip.twelve99.net> (62.115.137.44)  100.600 ms
>>     > 13 atl-bb1-link.ip.twelve99.net <http://atl-bb1-
>>    link.ip.twelve99.net> (62.115.137.54)  32.449 ms  32.397 ms
>>     >   31.204 ms
>>     > 14 rest-bb1-link.ip.twelve99.net <http://rest-bb1-
>>    link.ip.twelve99.net> (62.115.138.70)  46.045 ms *  58.522 ms
>>     > 15 prs-bb1-link.ip.twelve99.net <http://prs-bb1-
>>    link.ip.twelve99.net> (62.115.140.104)  120.740 ms  134.808 ms *
>>     > 16 ffm-bb1-link.ip.twelve99.net <http://ffm-bb1-
>>    link.ip.twelve99.net> (62.115.123.12)  126.600 ms  128.108 ms
>>     >   173.614 ms
>>     > 17 win-bb1-link.ip.twelve99.net <http://win-bb1-
>>    link.ip.twelve99.net> (62.115.137.203)  137.453 ms  140.338 ms
>>     >   138.001 ms
>>     > 18 win-b7-link.ip.twelve99.net <http://win-b7-
>>    link.ip.twelve99.net> (62.115.137.103)  139.714 ms  142.909 ms
>>     >   140.607 ms
>>     > 19 nextlayer-ic-392861.ip.twelve99-cust.net <http://nextlayer-
>>    ic-392861.ip.twelve99-cust.net> (62.115.205.175)  142.257 ms
>>     >   139.253 ms  139.711 ms
>>     > 20  * * *
>>     > 21  * * *
>>     > 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
>>     > 23 vpn.wu-wien.ac.at <http://vpn.wu-wien.ac.at> (137.208.9.41)     135.997 ms  140.398 ms  138.908 ms
>>     >
>>     > Hadley
>>     >
>>     > On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
>>     > roy.mendelssohn at noaa.gov <mailto:roy.mendelssohn at noaa.gov>> wrote:
>>     >
>>     >> I can reach it from your work address but not from my home
>>    address.  When
>>     >> I do a traceroute from home I get blocked at the last step.
>>     >>
>>     >> HTH,
>>     >>
>>     >> -Roy
>>     >>
>>     >>
>>     >>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org
>>    <mailto:edd at debian.org>> wrote:
>>     >>>
>>     >>>
>>     >>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>>     >>> | Is this just a me problem, or is
>>     >> https://xmpalantir.wu.ac.at/cransubmit/ <https://
>>    xmpalantir.wu.ac.at/cransubmit/>
>>     >>> | down for others too?
>>     >>>
>>     >>>> ciw::ciw() |> head()
>>     >>>     Folder                  Name                Time   Size            Age
>>     >>>     <char>                <char>              <POSc> <char>
>>    <difftime>
>>     >>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M
>>    0.04 hours
>>     >>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K
>>    0.12 hours
>>     >>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M
>>    0.30 hours
>>     >>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M
>>    0.35 hours
>>     >>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K
>>    0.54 hours
>>     >>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M
>>    1.14 hours
>>     >>>>
>>     >>>
>>     >>> Five uploads in the last hour may suggest it is a 'you' problem.
>>     >>>
>>     >>> Dirk
>>     >>>
>>     >>> --
>>     >>> dirk.eddelbuettel.com <http://dirk.eddelbuettel.com> |
>>    @eddelbuettel | edd at debian.org <mailto:edd at debian.org>
>>     >>>
>>     >>> ______________________________________________
>>     >>> R-package-devel at r-project.org <mailto:R-package-devel at r-
>>    project.org> mailing list
>>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>>    stat.ethz.ch/mailman/listinfo/r-package-devel>
>>     >>
>>     >>
>>     >
>> -- 
>> http://hadley.nz <http://hadley.nz>
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jan 13 04:04:05 2026
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 13 Jan 2026 16:04:05 +1300
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
 <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>
Message-ID: <17A93EE5-DD01-4946-9791-8FD45BDFCBAD@R-project.org>



> On 12 Jan 2026, at 14:37, Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org> wrote:
> 
> For what it is worth in my case as far as I can tell the behaviors of both devtools::submit_cran and the cran machine were quote reasonable,  even if it caused me a little pain.  The block Uwe describes sounds like fail2ban or the like,  and given the junk we see hitting our services  it is a reasonable thing to run.  I had the day wrong when I thought cran was back up.  devtools on submission said ti couldn?t connect,  It is not unreasonable as a submitter, thinking the machine was back up,  to wait a bit,  and  try again,  and maybe do so a few times throughout the day.  That is indeed what I did.  Then to be sure it wasn?t a devtools problem I went to the web page  and that is when it seemed to block me. 
> 
> So my point is everything to my mind behaved reasonably.  The only thing I could suggest,  and I have no idea of how much work this would entail, and I am not looking to make work for people,  is perhaps a banner on the webpage when the service is down,


That?s the thing - there *was* a red banner that said no submissions are accepted so everyone using the official CRAN way was fine, it?s the back-door access by devtools that caused the problems. The issue is that once devtools got you blocked, it was too late so you couldn?t go back and see that you were not supposed to use it since your IP was already on the blacklist even for the official front-end. Clearly, devtools needs to be fixed to make sure it?s not submitting things blindly when it?s not supposed - probably with some help from the CRAN admin team to make sure there is a well-defiled path for this.

Cheers,
Simon


>  and if possible have the server return to programs  like devtools an error that the service is down.
> 
> I can?t speak for why others were blocked,  but as I said this all seems reasonable.
> 
> Thanks,
> 
> -Roy
> 
>> On Jan 11, 2026, at 4:08?PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>> 
>> 
>> 
>> On 11.01.2026 15:19, Hadley Wickham wrote:
>>> Thanks for the fix!
>>> Happy to chat about what devtools could do better here to avoid future problems.
>> 
>> 
>> We try to find out why submissions got blocked. I guess devtools tried multiple times to open some webpage that was shut down and then the corresponding IP got auto blocked for too many connections within a time frame (which is why I get blocked by WU Vienna few times a year). We hope to get feedback from the sysadmins soon.
>> 
>> 
>> Best,
>> Uwe
>> 
>> 
>>> Hadley
>>> On Fri, Jan 9, 2026 at 9:40?AM Uwe Ligges <ligges at statistik.tu- dortmund.de <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>>   It seems some people tried to submit with devtools during the CRAN
>>>   vacations while the submission webpage was deactivated.
>>>   Not sure what devtools does, but it seems some partial submission was
>>>   possible that way (just incomplete) and that may have caused a pattern
>>>   that lead to the IP block.
>>>   At least we had some reports about the above mentioned szenario. The
>>>   sysadmin team tries to resolve this.
>>>   Perhaps simply send your IP to cran-sysadmin at R-project.org
>>>   for a quick solution.
>>>   Best,
>>>   Uwe
>>>   On 09.01.2026 16:32, Hadley Wickham wrote:
>>>> Hmmm, I tried from my phone and it worked once, but I tried again
>>>   now and
>>>> it didn't work either. This is the traceroute I see, in case it means
>>>> anything to anyone.
>>>> 
>>>> traceroute to xmpalantir.wu.ac.at <http://xmpalantir.wu.ac.at>
>>>   (137.208.57.16), 64 hops max, 40 byte
>>>> packets
>>>>  1  192.168.4.1 (192.168.4.1)  7.828 ms  3.684 ms  5.233 ms
>>>>  2  192.168.1.254 (192.168.1.254)  7.409 ms  5.343 ms  5.369 ms
>>>>  3 104-186-12-1.lightspeed.hstntx.sbcglobal.net
>>>   <http://104-186-12-1.lightspeed.hstntx.sbcglobal.net>
>>>   (104.186.12.1)  6.222 ms
>>>>  6.569 ms  10.912 ms
>>>>  4  71.149.39.62 (71.149.39.62)  5.816 ms  6.046 ms  4.386 ms
>>>>  5  * * *
>>>>  6  * * *
>>>>  7  * * *
>>>>  8  * * *
>>>>  9  * * 192.205.37.10 (192.205.37.10)  11.947 ms
>>>> 10 dls-b24-link.ip.twelve99.net <http://dls-b24-
>>>   link.ip.twelve99.net> (62.115.139.131)  138.944 ms  140.363 ms
>>>> dls-b23-link.ip.twelve99.net <http://dls-b23-
>>>   link.ip.twelve99.net> (62.115.138.65)  141.967 ms
>>>> 11 dls-bb1-link.ip.twelve99.net <http://dls-bb1-
>>>   link.ip.twelve99.net> (62.115.136.118)  12.237 ms  12.013 ms
>>>>  14.187 ms
>>>> 12  * * nash-bb1-link.ip.twelve99.net <http://nash-bb1-
>>>   link.ip.twelve99.net> (62.115.137.44)  100.600 ms
>>>> 13 atl-bb1-link.ip.twelve99.net <http://atl-bb1-
>>>   link.ip.twelve99.net> (62.115.137.54)  32.449 ms  32.397 ms
>>>>  31.204 ms
>>>> 14 rest-bb1-link.ip.twelve99.net <http://rest-bb1-
>>>   link.ip.twelve99.net> (62.115.138.70)  46.045 ms *  58.522 ms
>>>> 15 prs-bb1-link.ip.twelve99.net <http://prs-bb1-
>>>   link.ip.twelve99.net> (62.115.140.104)  120.740 ms  134.808 ms *
>>>> 16 ffm-bb1-link.ip.twelve99.net <http://ffm-bb1-
>>>   link.ip.twelve99.net> (62.115.123.12)  126.600 ms  128.108 ms
>>>>  173.614 ms
>>>> 17 win-bb1-link.ip.twelve99.net <http://win-bb1-
>>>   link.ip.twelve99.net> (62.115.137.203)  137.453 ms  140.338 ms
>>>>  138.001 ms
>>>> 18 win-b7-link.ip.twelve99.net <http://win-b7-
>>>   link.ip.twelve99.net> (62.115.137.103)  139.714 ms  142.909 ms
>>>>  140.607 ms
>>>> 19 nextlayer-ic-392861.ip.twelve99-cust.net <http://nextlayer-
>>>   ic-392861.ip.twelve99-cust.net> (62.115.205.175)  142.257 ms
>>>>  139.253 ms  139.711 ms
>>>> 20  * * *
>>>> 21  * * *
>>>> 22  193.171.13.18 (193.171.13.18)  135.095 ms  139.585 ms  133.808 ms
>>>> 23 vpn.wu-wien.ac.at <http://vpn.wu-wien.ac.at> (137.208.9.41)     135.997 ms  140.398 ms  138.908 ms
>>>> 
>>>> Hadley
>>>> 
>>>> On Fri, Jan 9, 2026 at 8:46?AM Roy Mendelssohn - NOAA Federal <
>>>> roy.mendelssohn at noaa.gov <mailto:roy.mendelssohn at noaa.gov>> wrote:
>>>> 
>>>>> I can reach it from your work address but not from my home
>>>   address.  When
>>>>> I do a traceroute from home I get blocked at the last step.
>>>>> 
>>>>> HTH,
>>>>> 
>>>>> -Roy
>>>>> 
>>>>> 
>>>>>> On Jan 9, 2026, at 6:29?AM, Dirk Eddelbuettel <edd at debian.org
>>>   <mailto:edd at debian.org>> wrote:
>>>>>> 
>>>>>> 
>>>>>> On 9 January 2026 at 08:11, Hadley Wickham wrote:
>>>>>> | Is this just a me problem, or is
>>>>> https://xmpalantir.wu.ac.at/cransubmit/ <https://
>>>   xmpalantir.wu.ac.at/cransubmit/>
>>>>>> | down for others too?
>>>>>> 
>>>>>>> ciw::ciw() |> head()
>>>>>>    Folder                  Name                Time   Size            Age
>>>>>>    <char>                <char>              <POSc> <char>
>>>   <difftime>
>>>>>> 1: pretest     NNS_11.6.4.tar.gz 2026-01-09 15:26:00   1.9M
>>>   0.04 hours
>>>>>> 2: pretest   ggsced_0.1.2.tar.gz 2026-01-09 15:21:00   348K
>>>   0.12 hours
>>>>>> 3: pretest  warprrr_0.1.0.tar.gz 2026-01-09 15:10:00   1.0M
>>>   0.30 hours
>>>>>> 4: recheck    mapsf_1.1.0.tar.gz 2026-01-09 15:07:00   1.4M
>>>   0.35 hours
>>>>>> 5: waiting     ripc_0.3.2.tar.gz 2026-01-09 14:56:00   103K
>>>   0.54 hours
>>>>>> 6: recheck rD3plot_1.1.45.tar.gz 2026-01-09 14:20:00   2.2M
>>>   1.14 hours
>>>>>>> 
>>>>>> 
>>>>>> Five uploads in the last hour may suggest it is a 'you' problem.
>>>>>> 
>>>>>> Dirk
>>>>>> 
>>>>>> --
>>>>>> dirk.eddelbuettel.com <http://dirk.eddelbuettel.com> |
>>>   @eddelbuettel | edd at debian.org <mailto:edd at debian.org>
>>>>>> 
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-
>>>   project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://
>>>   stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>>> 
>>>>> 
>>>> 
>>> -- 
>>> http://hadley.nz <http://hadley.nz>
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From h@w|ckh@m @end|ng |rom gm@||@com  Tue Jan 13 14:32:27 2026
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Tue, 13 Jan 2026 07:32:27 -0600
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <17A93EE5-DD01-4946-9791-8FD45BDFCBAD@R-project.org>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
 <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>
 <17A93EE5-DD01-4946-9791-8FD45BDFCBAD@R-project.org>
Message-ID: <CABdHhvFQJ9SBcONBpdyHzza1d9ZTMcNBoO_QyDvjz9xT0c4ZzQ@mail.gmail.com>

>
>
>
> > On 12 Jan 2026, at 14:37, Roy Mendelssohn - NOAA Federal via
> R-package-devel <r-package-devel at r-project.org> wrote:
> >
> > For what it is worth in my case as far as I can tell the behaviors of
> both devtools::submit_cran and the cran machine were quote reasonable,
> even if it caused me a little pain.  The block Uwe describes sounds like
> fail2ban or the like,  and given the junk we see hitting our services  it
> is a reasonable thing to run.  I had the day wrong when I thought cran was
> back up.  devtools on submission said ti couldn?t connect,  It is not
> unreasonable as a submitter, thinking the machine was back up,  to wait a
> bit,  and  try again,  and maybe do so a few times throughout the day.
> That is indeed what I did.  Then to be sure it wasn?t a devtools problem I
> went to the web page  and that is when it seemed to block me.
> >
> > So my point is everything to my mind behaved reasonably.  The only thing
> I could suggest,  and I have no idea of how much work this would entail,
> and I am not looking to make work for people,  is perhaps a banner on the
> webpage when the service is down,
>
>
> That?s the thing - there *was* a red banner that said no submissions are
> accepted so everyone using the official CRAN way was fine, it?s the
> back-door access by devtools that caused the problems. The issue is that
> once devtools got you blocked, it was too late so you couldn?t go back and
> see that you were not supposed to use it since your IP was already on the
> blacklist even for the official front-end. Clearly, devtools needs to be
> fixed to make sure it?s not submitting things blindly when it?s not
> supposed - probably with some help from the CRAN admin team to make sure
> there is a well-defiled path for this.


Would it be possible for the form to be blocked as well as the submission
page? Typically web servers return a 404 or a 403 when a page isn't
available.

I can of course scrape the submission page, but now that the message is
gone, I don't know what to look for.

Hadley

-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From jroseii@ m@iii@g oii gm@ii@com  Tue Jan 13 14:41:18 2026
From: jroseii@ m@iii@g oii gm@ii@com (jroseii@ m@iii@g oii gm@ii@com)
Date: Tue, 13 Jan 2026 14:41:18 +0100
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CABdHhvFQJ9SBcONBpdyHzza1d9ZTMcNBoO_QyDvjz9xT0c4ZzQ@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
 <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>
 <17A93EE5-DD01-4946-9791-8FD45BDFCBAD@R-project.org>
 <CABdHhvFQJ9SBcONBpdyHzza1d9ZTMcNBoO_QyDvjz9xT0c4ZzQ@mail.gmail.com>
Message-ID: <CAPst22sX=zAGmHKNvbFMqaBUPjVz7peCiMUMhJoWc4QOx4QitQ@mail.gmail.com>

I believe it would be better to use the *503 status code. *It indicates
that the server is busy, overloaded, or down for maintenance

The HTTP Retry-After response header indicates how long the user agent
should wait before making a follow-up request. There are three main cases
this header is used:

In a 503 Service Unavailable response, this indicates how long the service
is expected to be unavailable.

*Jordi Rosell  *


El dt., 13 de gen. 2026, 14:32, Hadley Wickham <h.wickham at gmail.com> va
escriure:

> >
> >
> >
> > > On 12 Jan 2026, at 14:37, Roy Mendelssohn - NOAA Federal via
> > R-package-devel <r-package-devel at r-project.org> wrote:
> > >
> > > For what it is worth in my case as far as I can tell the behaviors of
> > both devtools::submit_cran and the cran machine were quote reasonable,
> > even if it caused me a little pain.  The block Uwe describes sounds like
> > fail2ban or the like,  and given the junk we see hitting our services  it
> > is a reasonable thing to run.  I had the day wrong when I thought cran
> was
> > back up.  devtools on submission said ti couldn?t connect,  It is not
> > unreasonable as a submitter, thinking the machine was back up,  to wait a
> > bit,  and  try again,  and maybe do so a few times throughout the day.
> > That is indeed what I did.  Then to be sure it wasn?t a devtools problem
> I
> > went to the web page  and that is when it seemed to block me.
> > >
> > > So my point is everything to my mind behaved reasonably.  The only
> thing
> > I could suggest,  and I have no idea of how much work this would entail,
> > and I am not looking to make work for people,  is perhaps a banner on the
> > webpage when the service is down,
> >
> >
> > That?s the thing - there *was* a red banner that said no submissions are
> > accepted so everyone using the official CRAN way was fine, it?s the
> > back-door access by devtools that caused the problems. The issue is that
> > once devtools got you blocked, it was too late so you couldn?t go back
> and
> > see that you were not supposed to use it since your IP was already on the
> > blacklist even for the official front-end. Clearly, devtools needs to be
> > fixed to make sure it?s not submitting things blindly when it?s not
> > supposed - probably with some help from the CRAN admin team to make sure
> > there is a well-defiled path for this.
>
>
> Would it be possible for the form to be blocked as well as the submission
> page? Typically web servers return a 404 or a 403 when a page isn't
> available.
>
> I can of course scrape the submission page, but now that the message is
> gone, I don't know what to look for.
>
> Hadley
>
> --
> http://hadley.nz
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Jan 13 19:38:55 2026
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 13 Jan 2026 10:38:55 -0800
Subject: [R-pkg-devel] CRAN submissions down?
In-Reply-To: <CAPst22sX=zAGmHKNvbFMqaBUPjVz7peCiMUMhJoWc4QOx4QitQ@mail.gmail.com>
References: <CABdHhvGULpJPpJRPt5Qr_mEb4eO_70zdsXeRMarNjKZZDgEFAA@mail.gmail.com>
 <26977.4285.87660.893523@paul.eddelbuettel.com>
 <809E6C2C-5B2B-4B31-93D9-2F19C60E64BC@noaa.gov>
 <CABdHhvHhhhsTVCM15sR+-DrKOg9PyUGXXWMkBKqfo7GTfJgSag@mail.gmail.com>
 <c9d7673e-fe64-4d59-9b8d-bbb777443e37@statistik.tu-dortmund.de>
 <CABdHhvEBJobdE3ajpFSCAmNr4RUpN2mBgo1387mTw=Z0UZv0jQ@mail.gmail.com>
 <169a7e30-8850-41fd-983c-10e099eec1ef@statistik.tu-dortmund.de>
 <2AE3972A-1617-4D7B-A43E-13CD6A9DCDB7@noaa.gov>
 <17A93EE5-DD01-4946-9791-8FD45BDFCBAD@R-project.org>
 <CABdHhvFQJ9SBcONBpdyHzza1d9ZTMcNBoO_QyDvjz9xT0c4ZzQ@mail.gmail.com>
 <CAPst22sX=zAGmHKNvbFMqaBUPjVz7peCiMUMhJoWc4QOx4QitQ@mail.gmail.com>
Message-ID: <CAFDcVCR1jghxJDEAOBBLkYtUb2Bx8+J=P6vrnJbfqJuVcAkJ6A@mail.gmail.com>

I checked the source code on submission page when it was still down; there
was an HTML <form> tag, but all <input> tags had been removed.

Submission via devtools went through and the CRAN incoming server responded
with the usual email asking the maintainer to confirm by going to the
"three-checkboxes" webpage. I didn't proceed from there.

Henrik

On Tue, Jan 13, 2026, 09:02 jroselln at gmail.com <jroselln at gmail.com> wrote:

> I believe it would be better to use the *503 status code. *It indicates
> that the server is busy, overloaded, or down for maintenance
>
> The HTTP Retry-After response header indicates how long the user agent
> should wait before making a follow-up request. There are three main cases
> this header is used:
>
> In a 503 Service Unavailable response, this indicates how long the service
> is expected to be unavailable.
>
> *Jordi Rosell  *
>
>
> El dt., 13 de gen. 2026, 14:32, Hadley Wickham <h.wickham at gmail.com> va
> escriure:
>
> > >
> > >
> > >
> > > > On 12 Jan 2026, at 14:37, Roy Mendelssohn - NOAA Federal via
> > > R-package-devel <r-package-devel at r-project.org> wrote:
> > > >
> > > > For what it is worth in my case as far as I can tell the behaviors of
> > > both devtools::submit_cran and the cran machine were quote reasonable,
> > > even if it caused me a little pain.  The block Uwe describes sounds
> like
> > > fail2ban or the like,  and given the junk we see hitting our services
> it
> > > is a reasonable thing to run.  I had the day wrong when I thought cran
> > was
> > > back up.  devtools on submission said ti couldn?t connect,  It is not
> > > unreasonable as a submitter, thinking the machine was back up,  to
> wait a
> > > bit,  and  try again,  and maybe do so a few times throughout the day.
> > > That is indeed what I did.  Then to be sure it wasn?t a devtools
> problem
> > I
> > > went to the web page  and that is when it seemed to block me.
> > > >
> > > > So my point is everything to my mind behaved reasonably.  The only
> > thing
> > > I could suggest,  and I have no idea of how much work this would
> entail,
> > > and I am not looking to make work for people,  is perhaps a banner on
> the
> > > webpage when the service is down,
> > >
> > >
> > > That?s the thing - there *was* a red banner that said no submissions
> are
> > > accepted so everyone using the official CRAN way was fine, it?s the
> > > back-door access by devtools that caused the problems. The issue is
> that
> > > once devtools got you blocked, it was too late so you couldn?t go back
> > and
> > > see that you were not supposed to use it since your IP was already on
> the
> > > blacklist even for the official front-end. Clearly, devtools needs to
> be
> > > fixed to make sure it?s not submitting things blindly when it?s not
> > > supposed - probably with some help from the CRAN admin team to make
> sure
> > > there is a well-defiled path for this.
> >
> >
> > Would it be possible for the form to be blocked as well as the submission
> > page? Typically web servers return a 404 or a 403 when a page isn't
> > available.
> >
> > I can of course scrape the submission page, but now that the message is
> > gone, I don't know what to look for.
> >
> > Hadley
> >
> > --
> > http://hadley.nz
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @ndrew@john@on @end|ng |rom @rjohn@on@u@com  Wed Jan 14 06:55:11 2026
From: @ndrew@john@on @end|ng |rom @rjohn@on@u@com (Andrew Johnson)
Date: Wed, 14 Jan 2026 05:55:11 +0000
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
Message-ID: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>

Hi all!

I have an R package which uses several JS scripts/libraries, and I'm trying to configure the build process to minify the JS files at build-time (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/).

My current approach is using a configure script to run the minification, with the jsutils package added as an Import (https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But this adds an additional runtime dependency when it's only needed at build time.

Are there any recommended ways for specifying build-time dependencies when the package doesn't require compilation? My attempts to use the LinkingTo field so far are giving check notes for not having source or include files.

Any suggestions are much appreciated!

Thanks,
Andrew

	[[alternative HTML version deleted]]


From j@y|@mb20 @end|ng |rom gm@||@com  Thu Jan 15 02:19:09 2026
From: j@y|@mb20 @end|ng |rom gm@||@com (James Lamb)
Date: Wed, 14 Jan 2026 19:19:09 -0600
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
In-Reply-To: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
References: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <CADPubGTEthpDPtE85GB8mrTM5nte02zjmeLR4n_p2dxp7r8TxA@mail.gmail.com>

(forgot to CC the list on my previous reply)

Hey Andrew,

To avoid needing to declare the dependency in any context, assuming that
the minification is deterministic and not dependent on any details of the
runtime environment (like CPU architecture), I recommend just doing the
minification in a shell script, Makefile, etc. BEFORE calling `R CMD
BUILD`, then uploading a package to CRAN vendoring already-minified sources.

I think you'll find it's easier that way (and easier for any users who end
up building your package from source).

Cheers,

- James

On Tue, Jan 13, 2026, 11:55?PM Andrew Johnson <
andrew.johnson at arjohnsonau.com> wrote:

> Hi all!
>
> I have an R package which uses several JS scripts/libraries, and I'm
> trying to configure the build process to minify the JS files at build-time
> (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/
> ).
>
> My current approach is using a configure script to run the minification,
> with the jsutils package added as an Import (
> https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But
> this adds an additional runtime dependency when it's only needed at build
> time.
>
> Are there any recommended ways for specifying build-time dependencies when
> the package doesn't require compilation? My attempts to use the LinkingTo
> field so far are giving check notes for not having source or include files.
>
> Any suggestions are much appreciated!
>
> Thanks,
> Andrew
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Thu Jan 15 09:32:09 2026
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (NP))
Date: Thu, 15 Jan 2026 08:32:09 +0000
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
In-Reply-To: <CADPubGTEthpDPtE85GB8mrTM5nte02zjmeLR4n_p2dxp7r8TxA@mail.gmail.com>
References: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <CADPubGTEthpDPtE85GB8mrTM5nte02zjmeLR4n_p2dxp7r8TxA@mail.gmail.com>
Message-ID: <PA4PR08MB74359D502D487D4E6A18FA818B8CA@PA4PR08MB7435.eurprd08.prod.outlook.com>

Hi Andrew,

This is something that came up with the mathjaxr package, which bundles MathJax. Originally it included the minified code, but this was not acceptable as the proper source code, especially for the Debian packages.

So the package then included the unminified code that was minified via a make file on installation if the 'js' package was installed. So 'js' was a suggested package, not required.

Unfortunately, the minification with js no longer works with the most recent version of MathJax (same issue as https://github.com/jeroen/js/issues/5), but since CRAN packages can now be a bit larger (I believe up to 10MB), the minification is no longer a hard requirement to get mathjaxr on CRAN and I removed this step from the most recent version.

But you can grab version 1.8.0 from https://cran.r-project.org/src/contrib/Archive/mathjaxr/ to see how things used to be done.

Best,
Wolfgang

> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of James Lamb
> Sent: Thursday, January 15, 2026 02:19
> To: andrew.johnson at arjohnsonau.com
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Specifying non-C/C++ build-time dependency
> 
> (forgot to CC the list on my previous reply)
> 
> Hey Andrew,
> 
> To avoid needing to declare the dependency in any context, assuming that
> the minification is deterministic and not dependent on any details of the
> runtime environment (like CPU architecture), I recommend just doing the
> minification in a shell script, Makefile, etc. BEFORE calling `R CMD
> BUILD`, then uploading a package to CRAN vendoring already-minified sources.
> 
> I think you'll find it's easier that way (and easier for any users who end
> up building your package from source).
> 
> Cheers,
> 
> - James
> 
> On Tue, Jan 13, 2026, 11:55?PM Andrew Johnson <
> andrew.johnson at arjohnsonau.com> wrote:
> 
> > Hi all!
> >
> > I have an R package which uses several JS scripts/libraries, and I'm
> > trying to configure the build process to minify the JS files at build-time
> > (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/
> > ).
> >
> > My current approach is using a configure script to run the minification,
> > with the jsutils package added as an Import (
> > https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But
> > this adds an additional runtime dependency when it's only needed at build
> > time.
> >
> > Are there any recommended ways for specifying build-time dependencies when
> > the package doesn't require compilation? My attempts to use the LinkingTo
> > field so far are giving check notes for not having source or include files.
> >
> > Any suggestions are much appreciated!
> >
> > Thanks,
> > Andrew

From rm@h@rp @end|ng |rom me@com  Thu Jan 15 18:51:45 2026
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Thu, 15 Jan 2026 11:51:45 -0600
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
Message-ID: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>

I submitted an update based on needing to make some changes due to dependencies. As appended below, I received a message July 25, 2025 that the updated package (1.0.8) was on its way to CRAN. I checked shortly after July 25th and the package was published. However, it appears 1.0.8 was removed on July 29th. I do not see a problem on https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html

I have contacted CRAN-submissions at R-project.org <mailto:CRAN-submissions at R-project.org> to find out what I need to do to rectify this but have not gotten a response. Suggestions are welcome.

Mark
R. Mark Sharp, Ph.D.
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com




Begin forwarded message:

From: ligges at statistik.tu-dortmund.de
Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
Date: July 25, 2025 at 10:56:10?PM CDT
To: rmsharp at me.com
Cc: CRAN-submissions at R-project.org
Reply-To: CRAN-submissions at R-project.org

Dear maintainer,

thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.

Best regards,
CRAN teams' auto-check service
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
Check: *, Result: OK

From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Jan 15 19:12:42 2026
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 15 Jan 2026 10:12:42 -0800
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
In-Reply-To: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
References: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
Message-ID: <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>

Sorry to hear. From https://cran.r-project.org/src/contrib/PACKAGES.in (*):

"Package: nprcgenekeepr
X-CRAN-Comment: Archived on 2025-07-29 as issues were not corrected in time.
  .
  Tested elapsed times.
X-CRAN-History: Archived on 2022-11-03 as check problems were not corrected
despite reminders.
  Unarchived on 2025-04-24."

(*) That file is a hard-yo-remember "internal" URL. You can find it via
https://www.cranhaven.org/.


How this helps,

Henrik

On Thu, Jan 15, 2026, 09:52 R. Mark Sharp <rmsharp at me.com> wrote:

> I submitted an update based on needing to make some changes due to
> dependencies. As appended below, I received a message July 25, 2025 that
> the updated package (1.0.8) was on its way to CRAN. I checked shortly after
> July 25th and the package was published. However, it appears 1.0.8 was
> removed on July 29th. I do not see a problem on
> https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
>
> I have contacted CRAN-submissions at R-project.org <mailto:
> CRAN-submissions at R-project.org> to find out what I need to do to rectify
> this but have not gotten a response. Suggestions are welcome.
>
> Mark
> R. Mark Sharp, Ph.D.
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
>
>
>
>
> Begin forwarded message:
>
> From: ligges at statistik.tu-dortmund.de
> Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
> Date: July 25, 2025 at 10:56:10?PM CDT
> To: rmsharp at me.com
> Cc: CRAN-submissions at R-project.org
> Reply-To: CRAN-submissions at R-project.org
>
> Dear maintainer,
>
> thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.
>
> Best regards,
> CRAN teams' auto-check service
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> Check: *, Result: OK
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Jan 15 19:28:41 2026
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 15 Jan 2026 13:28:41 -0500
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
In-Reply-To: <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>
References: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
 <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>
Message-ID: <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>

I don't think that answers the OP's question (why was it archived
after apparently passing checks/being published)?

I do get one error (reproduced below) when I `R CMD check --as-cran`
on Linux with r-devel.

  I would say that the path of least resistance would be: (1) fix the
error (assuming you can reproduce it ...); (2) bump the version number
to 1.0.9 (or 1.0.8.1, whatever); (3) (re)submit to CRAN.

 [24s/43s] ERROR
Running the tests in ?tests/testthat.R? failed.
Last 13 lines of output:
    'test_saveDataframesAsFiles.R:11:3', 'test_saveDataframesAsFiles.R:37:3',
    'test_saveDataframesAsFiles.R:62:3'

  ?? Failed tests
????????????????????????????????????????????????????????????????
  ?? Failure ('test_print.summary.nprcgenekeeprErr.R:29:3'):
print.summary.nprcgenekeeprErr prints expected output ??
  Expected failure message to match regexp "produced output".
  Actual message:
  ? ? Expected `print(summary(qcStudbook(pedOne, reportErrors =
TRUE)))` to produce no output.
    ? Actual output:
    ? Error: The animal listed as a sire and also listed as a female
is: s1.\nError: The animal listed as a dam and also listed as a male
is: d1.\n\nPlease check and correct the pedigree file.\n \nAnimal
records where parent records are suspicous because of dates.\nOne or
more parents appear too young at time of birth.\n  dam sire id sex
 birth recordStatus exit  sireBirth   damBirth sireAge\n2  d2   s1 o2
 F 2009-03-17     original <NA> 2000-07-18 2015-09-16    8.66\n3  d2
s2 o3   F 2012-04-11     original <NA> 2006-06-19 2015-09-16
5.81\n4  d2   s2 o4   M 2006-04-13     original <NA> 2006-06-19
2015-09-16   -0.18\n  damAge\n2   -6.5\n3   -3.4\n4   -9.4

  [ FAIL 1 | WARN 0 | SKIP 24 | PASS 861 ]
  Error:
  ! Test failures.
  Execution halted

On Thu, Jan 15, 2026 at 1:13?PM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> Sorry to hear. From https://cran.r-project.org/src/contrib/PACKAGES.in (*):
>
> "Package: nprcgenekeepr
> X-CRAN-Comment: Archived on 2025-07-29 as issues were not corrected in time.
>   .
>   Tested elapsed times.
> X-CRAN-History: Archived on 2022-11-03 as check problems were not corrected
> despite reminders.
>   Unarchived on 2025-04-24."
>
> (*) That file is a hard-yo-remember "internal" URL. You can find it via
> https://www.cranhaven.org/.
>
>
> How this helps,
>
> Henrik
>
> On Thu, Jan 15, 2026, 09:52 R. Mark Sharp <rmsharp at me.com> wrote:
>
> > I submitted an update based on needing to make some changes due to
> > dependencies. As appended below, I received a message July 25, 2025 that
> > the updated package (1.0.8) was on its way to CRAN. I checked shortly after
> > July 25th and the package was published. However, it appears 1.0.8 was
> > removed on July 29th. I do not see a problem on
> > https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
> >
> > I have contacted CRAN-submissions at R-project.org <mailto:
> > CRAN-submissions at R-project.org> to find out what I need to do to rectify
> > this but have not gotten a response. Suggestions are welcome.
> >
> > Mark
> > R. Mark Sharp, Ph.D.
> > 7526 Meadow Green St.
> > San Antonio, TX 78251
> > mobile: 210-218-2868
> > rmsharp at me.com
> >
> >
> >
> >
> > Begin forwarded message:
> >
> > From: ligges at statistik.tu-dortmund.de
> > Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
> > Date: July 25, 2025 at 10:56:10?PM CDT
> > To: rmsharp at me.com
> > Cc: CRAN-submissions at R-project.org
> > Reply-To: CRAN-submissions at R-project.org
> >
> > Dear maintainer,
> >
> > thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.
> >
> > Best regards,
> > CRAN teams' auto-check service
> > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> > Check: *, Result: OK
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rm@h@rp @end|ng |rom me@com  Thu Jan 15 19:51:45 2026
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Thu, 15 Jan 2026 12:51:45 -0600
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
In-Reply-To: <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>
References: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
 <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>
 <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>
Message-ID: <03421DB9-40EA-415A-B66D-93FD1E4E74E2@me.com>

Ben,

Thank you for the advice. I will submit a new minor revision after addressing the issue you pointed out.

Mark

R. Mark Sharp
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com




> On Jan 15, 2026, at 12:28?PM, Ben Bolker <bbolker at gmail.com> wrote:
> 
> I don't think that answers the OP's question (why was it archived
> after apparently passing checks/being published)?
> 
> I do get one error (reproduced below) when I `R CMD check --as-cran`
> on Linux with r-devel.
> 
>  I would say that the path of least resistance would be: (1) fix the
> error (assuming you can reproduce it ...); (2) bump the version number
> to 1.0.9 (or 1.0.8.1, whatever); (3) (re)submit to CRAN.
> 
> [24s/43s] ERROR
> Running the tests in ?tests/testthat.R? failed.
> Last 13 lines of output:
>    'test_saveDataframesAsFiles.R:11:3', 'test_saveDataframesAsFiles.R:37:3',
>    'test_saveDataframesAsFiles.R:62:3'
> 
>  ?? Failed tests
> ????????????????????????????????????????????????????????????????
>  ?? Failure ('test_print.summary.nprcgenekeeprErr.R:29:3'):
> print.summary.nprcgenekeeprErr prints expected output ??
>  Expected failure message to match regexp "produced output".
>  Actual message:
>  ? ? Expected `print(summary(qcStudbook(pedOne, reportErrors =
> TRUE)))` to produce no output.
>    ? Actual output:
>    ? Error: The animal listed as a sire and also listed as a female
> is: s1.\nError: The animal listed as a dam and also listed as a male
> is: d1.\n\nPlease check and correct the pedigree file.\n \nAnimal
> records where parent records are suspicous because of dates.\nOne or
> more parents appear too young at time of birth.\n  dam sire id sex
> birth recordStatus exit  sireBirth   damBirth sireAge\n2  d2   s1 o2
> F 2009-03-17     original <NA> 2000-07-18 2015-09-16    8.66\n3  d2
> s2 o3   F 2012-04-11     original <NA> 2006-06-19 2015-09-16
> 5.81\n4  d2   s2 o4   M 2006-04-13     original <NA> 2006-06-19
> 2015-09-16   -0.18\n  damAge\n2   -6.5\n3   -3.4\n4   -9.4
> 
>  [ FAIL 1 | WARN 0 | SKIP 24 | PASS 861 ]
>  Error:
>  ! Test failures.
>  Execution halted
> 
> On Thu, Jan 15, 2026 at 1:13?PM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
>> 
>> Sorry to hear. From https://cran.r-project.org/src/contrib/PACKAGES.in (*):
>> 
>> "Package: nprcgenekeepr
>> X-CRAN-Comment: Archived on 2025-07-29 as issues were not corrected in time.
>>  .
>>  Tested elapsed times.
>> X-CRAN-History: Archived on 2022-11-03 as check problems were not corrected
>> despite reminders.
>>  Unarchived on 2025-04-24."
>> 
>> (*) That file is a hard-yo-remember "internal" URL. You can find it via
>> https://www.cranhaven.org/.
>> 
>> 
>> How this helps,
>> 
>> Henrik
>> 
>> On Thu, Jan 15, 2026, 09:52 R. Mark Sharp <rmsharp at me.com> wrote:
>> 
>>> I submitted an update based on needing to make some changes due to
>>> dependencies. As appended below, I received a message July 25, 2025 that
>>> the updated package (1.0.8) was on its way to CRAN. I checked shortly after
>>> July 25th and the package was published. However, it appears 1.0.8 was
>>> removed on July 29th. I do not see a problem on
>>> https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
>>> 
>>> I have contacted CRAN-submissions at R-project.org <mailto:
>>> CRAN-submissions at R-project.org> to find out what I need to do to rectify
>>> this but have not gotten a response. Suggestions are welcome.
>>> 
>>> Mark
>>> R. Mark Sharp, Ph.D.
>>> 7526 Meadow Green St.
>>> San Antonio, TX 78251
>>> mobile: 210-218-2868
>>> rmsharp at me.com
>>> 
>>> 
>>> 
>>> 
>>> Begin forwarded message:
>>> 
>>> From: ligges at statistik.tu-dortmund.de
>>> Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
>>> Date: July 25, 2025 at 10:56:10?PM CDT
>>> To: rmsharp at me.com
>>> Cc: CRAN-submissions at R-project.org
>>> Reply-To: CRAN-submissions at R-project.org
>>> 
>>> Dear maintainer,
>>> 
>>> thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.
>>> 
>>> Best regards,
>>> CRAN teams' auto-check service
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
>>> Check: *, Result: OK
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Jan 15 20:24:06 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 15 Jan 2026 11:24:06 -0800
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
In-Reply-To: <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>
References: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
 <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>
 <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>
Message-ID: <CAPRVBcyYz3-dBzf=6q16Par2-wV8BXB0-H9i74Ag+Eqv8yvmog@mail.gmail.com>

Agree with Ben about just re-submitting.

The CRAN results shared show 1.0.8 had landed on CRAN, and was passing
tests:
https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html

The GitHub CRAN mirror also shows 1.08 being the one landed on July 25:
https://github.com/cran/nprcgenekeepr/commits/master/

I also see from the CRAN e-mail that it was "on its way to CRAN" at 10 PM
CDT, so it doesn't look like a timezone mismatch issue, either.

Mike C

On Thu, Jan 15, 2026 at 10:29?AM Ben Bolker <bbolker at gmail.com> wrote:

> I don't think that answers the OP's question (why was it archived
> after apparently passing checks/being published)?
>
> I do get one error (reproduced below) when I `R CMD check --as-cran`
> on Linux with r-devel.
>
>   I would say that the path of least resistance would be: (1) fix the
> error (assuming you can reproduce it ...); (2) bump the version number
> to 1.0.9 (or 1.0.8.1, whatever); (3) (re)submit to CRAN.
>
>  [24s/43s] ERROR
> Running the tests in ?tests/testthat.R? failed.
> Last 13 lines of output:
>     'test_saveDataframesAsFiles.R:11:3',
> 'test_saveDataframesAsFiles.R:37:3',
>     'test_saveDataframesAsFiles.R:62:3'
>
>   ?? Failed tests
> ????????????????????????????????????????????????????????????????
>   ?? Failure ('test_print.summary.nprcgenekeeprErr.R:29:3'):
> print.summary.nprcgenekeeprErr prints expected output ??
>   Expected failure message to match regexp "produced output".
>   Actual message:
>   ? ? Expected `print(summary(qcStudbook(pedOne, reportErrors =
> TRUE)))` to produce no output.
>     ? Actual output:
>     ? Error: The animal listed as a sire and also listed as a female
> is: s1.\nError: The animal listed as a dam and also listed as a male
> is: d1.\n\nPlease check and correct the pedigree file.\n \nAnimal
> records where parent records are suspicous because of dates.\nOne or
> more parents appear too young at time of birth.\n  dam sire id sex
>  birth recordStatus exit  sireBirth   damBirth sireAge\n2  d2   s1 o2
>  F 2009-03-17     original <NA> 2000-07-18 2015-09-16    8.66\n3  d2
> s2 o3   F 2012-04-11     original <NA> 2006-06-19 2015-09-16
> 5.81\n4  d2   s2 o4   M 2006-04-13     original <NA> 2006-06-19
> 2015-09-16   -0.18\n  damAge\n2   -6.5\n3   -3.4\n4   -9.4
>
>   [ FAIL 1 | WARN 0 | SKIP 24 | PASS 861 ]
>   Error:
>   ! Test failures.
>   Execution halted
>
> On Thu, Jan 15, 2026 at 1:13?PM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
> >
> > Sorry to hear. From https://cran.r-project.org/src/contrib/PACKAGES.in
> (*):
> >
> > "Package: nprcgenekeepr
> > X-CRAN-Comment: Archived on 2025-07-29 as issues were not corrected in
> time.
> >   .
> >   Tested elapsed times.
> > X-CRAN-History: Archived on 2022-11-03 as check problems were not
> corrected
> > despite reminders.
> >   Unarchived on 2025-04-24."
> >
> > (*) That file is a hard-yo-remember "internal" URL. You can find it via
> > https://www.cranhaven.org/.
> >
> >
> > How this helps,
> >
> > Henrik
> >
> > On Thu, Jan 15, 2026, 09:52 R. Mark Sharp <rmsharp at me.com> wrote:
> >
> > > I submitted an update based on needing to make some changes due to
> > > dependencies. As appended below, I received a message July 25, 2025
> that
> > > the updated package (1.0.8) was on its way to CRAN. I checked shortly
> after
> > > July 25th and the package was published. However, it appears 1.0.8 was
> > > removed on July 29th. I do not see a problem on
> > >
> https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
> > >
> > > I have contacted CRAN-submissions at R-project.org <mailto:
> > > CRAN-submissions at R-project.org> to find out what I need to do to
> rectify
> > > this but have not gotten a response. Suggestions are welcome.
> > >
> > > Mark
> > > R. Mark Sharp, Ph.D.
> > > 7526 Meadow Green St.
> > > San Antonio, TX 78251
> > > mobile: 210-218-2868
> > > rmsharp at me.com
> > >
> > >
> > >
> > >
> > > Begin forwarded message:
> > >
> > > From: ligges at statistik.tu-dortmund.de
> > > Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
> > > Date: July 25, 2025 at 10:56:10?PM CDT
> > > To: rmsharp at me.com
> > > Cc: CRAN-submissions at R-project.org
> > > Reply-To: CRAN-submissions at R-project.org
> > >
> > > Dear maintainer,
> > >
> > > thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.
> > >
> > > Best regards,
> > > CRAN teams' auto-check service
> > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> > > Check: *, Result: OK
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Thu Jan 15 23:17:31 2026
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Thu, 15 Jan 2026 23:17:31 +0100
Subject: [R-pkg-devel] Package (nprcgenekeepr) archived a few days after
 publication to CRAN
In-Reply-To: <CAPRVBcyYz3-dBzf=6q16Par2-wV8BXB0-H9i74Ag+Eqv8yvmog@mail.gmail.com>
References: <CF0E0F68-074C-4FE2-997C-F12B8EEAAA10@me.com>
 <CAFDcVCSxRfQfvsY=vOqYL4QO=Ctr6p0Wz-qrwaAR7AaYe-neWQ@mail.gmail.com>
 <CABghstTTxy48D0WEmMafPb=nXLr7gHD-He1r3z91vPSWUZwHhA@mail.gmail.com>
 <CAPRVBcyYz3-dBzf=6q16Par2-wV8BXB0-H9i74Ag+Eqv8yvmog@mail.gmail.com>
Message-ID: <CAN+W6_udewqFR_Gdh2cMsFamiVNcXKR75PTcBrwqoPx-Vd7oew@mail.gmail.com>

Taking the opportunity of this issue to share some comments regarding this
situation.

This happens sometimes: one submit a new version that fixes issues, it is
accepted.
The (same or new) issues show up again soon after.
A CRAN member sees the previous (note?) deadline and the check issues
resulting on the package being archived.

More often than not the maintainer is left thinking that the issue is
fixed: The submission passed all checks of the submission process and the
last communication they got from CRAN was that it was on its way to CRAN.
However, some time later (as in this case), they find that the package was
archived soon after being accepted (without further notification [as per
CRAN processes and policies]).

Up to last year there were ~400 cases when a package was archived in less
than 7 days after being published, ~25% of them on the same day the new
version was published. For completeness this represents ~1% of the packages
ever archived.
If we extend the period to less than 14 days, they represent ~6% of
packages ever archived.

A new notification from CRAN (and maybe a deadline extension?) to these
active and responsive maintainers would reduce the friction to keep the
package available for users.

Cheers,

Llu?s

Missatge de Michael Chirico <michaelchirico4 at gmail.com> del dia dj., 15 de
gen. 2026 a les 20:32:

> Agree with Ben about just re-submitting.
>
> The CRAN results shared show 1.0.8 had landed on CRAN, and was passing
> tests:
>
> https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
>
> The GitHub CRAN mirror also shows 1.08 being the one landed on July 25:
> https://github.com/cran/nprcgenekeepr/commits/master/
>
> I also see from the CRAN e-mail that it was "on its way to CRAN" at 10 PM
> CDT, so it doesn't look like a timezone mismatch issue, either.
>
> Mike C
>
> On Thu, Jan 15, 2026 at 10:29?AM Ben Bolker <bbolker at gmail.com> wrote:
>
> > I don't think that answers the OP's question (why was it archived
> > after apparently passing checks/being published)?
> >
> > I do get one error (reproduced below) when I `R CMD check --as-cran`
> > on Linux with r-devel.
> >
> >   I would say that the path of least resistance would be: (1) fix the
> > error (assuming you can reproduce it ...); (2) bump the version number
> > to 1.0.9 (or 1.0.8.1, whatever); (3) (re)submit to CRAN.
> >
> >  [24s/43s] ERROR
> > Running the tests in ?tests/testthat.R? failed.
> > Last 13 lines of output:
> >     'test_saveDataframesAsFiles.R:11:3',
> > 'test_saveDataframesAsFiles.R:37:3',
> >     'test_saveDataframesAsFiles.R:62:3'
> >
> >   ?? Failed tests
> > ????????????????????????????????????????????????????????????????
> >   ?? Failure ('test_print.summary.nprcgenekeeprErr.R:29:3'):
> > print.summary.nprcgenekeeprErr prints expected output ??
> >   Expected failure message to match regexp "produced output".
> >   Actual message:
> >   ? ? Expected `print(summary(qcStudbook(pedOne, reportErrors =
> > TRUE)))` to produce no output.
> >     ? Actual output:
> >     ? Error: The animal listed as a sire and also listed as a female
> > is: s1.\nError: The animal listed as a dam and also listed as a male
> > is: d1.\n\nPlease check and correct the pedigree file.\n \nAnimal
> > records where parent records are suspicous because of dates.\nOne or
> > more parents appear too young at time of birth.\n  dam sire id sex
> >  birth recordStatus exit  sireBirth   damBirth sireAge\n2  d2   s1 o2
> >  F 2009-03-17     original <NA> 2000-07-18 2015-09-16    8.66\n3  d2
> > s2 o3   F 2012-04-11     original <NA> 2006-06-19 2015-09-16
> > 5.81\n4  d2   s2 o4   M 2006-04-13     original <NA> 2006-06-19
> > 2015-09-16   -0.18\n  damAge\n2   -6.5\n3   -3.4\n4   -9.4
> >
> >   [ FAIL 1 | WARN 0 | SKIP 24 | PASS 861 ]
> >   Error:
> >   ! Test failures.
> >   Execution halted
> >
> > On Thu, Jan 15, 2026 at 1:13?PM Henrik Bengtsson
> > <henrik.bengtsson at gmail.com> wrote:
> > >
> > > Sorry to hear. From https://cran.r-project.org/src/contrib/PACKAGES.in
> > (*):
> > >
> > > "Package: nprcgenekeepr
> > > X-CRAN-Comment: Archived on 2025-07-29 as issues were not corrected in
> > time.
> > >   .
> > >   Tested elapsed times.
> > > X-CRAN-History: Archived on 2022-11-03 as check problems were not
> > corrected
> > > despite reminders.
> > >   Unarchived on 2025-04-24."
> > >
> > > (*) That file is a hard-yo-remember "internal" URL. You can find it via
> > > https://www.cranhaven.org/.
> > >
> > >
> > > How this helps,
> > >
> > > Henrik
> > >
> > > On Thu, Jan 15, 2026, 09:52 R. Mark Sharp <rmsharp at me.com> wrote:
> > >
> > > > I submitted an update based on needing to make some changes due to
> > > > dependencies. As appended below, I received a message July 25, 2025
> > that
> > > > the updated package (1.0.8) was on its way to CRAN. I checked shortly
> > after
> > > > July 25th and the package was published. However, it appears 1.0.8
> was
> > > > removed on July 29th. I do not see a problem on
> > > >
> >
> https://cran-archive.r-project.org/web/checks/2025/2025-07-29_check_results_nprcgenekeepr.html
> > > >
> > > > I have contacted CRAN-submissions at R-project.org <mailto:
> > > > CRAN-submissions at R-project.org> to find out what I need to do to
> > rectify
> > > > this but have not gotten a response. Suggestions are welcome.
> > > >
> > > > Mark
> > > > R. Mark Sharp, Ph.D.
> > > > 7526 Meadow Green St.
> > > > San Antonio, TX 78251
> > > > mobile: 210-218-2868
> > > > rmsharp at me.com
> > > >
> > > >
> > > >
> > > >
> > > > Begin forwarded message:
> > > >
> > > > From: ligges at statistik.tu-dortmund.de
> > > > Subject: [CRAN-pretest-publish] CRAN Submission nprcgenekeepr 1.0.8
> > > > Date: July 25, 2025 at 10:56:10?PM CDT
> > > > To: rmsharp at me.com
> > > > Cc: CRAN-submissions at R-project.org
> > > > Reply-To: CRAN-submissions at R-project.org
> > > >
> > > > Dear maintainer,
> > > >
> > > > thanks, package nprcgenekeepr_1.0.8.tar.gz is on its way to CRAN.
> > > >
> > > > Best regards,
> > > > CRAN teams' auto-check service
> > > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> > > > Check: *, Result: OK
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From n@@|n@k|@m@c|ej @end|ng |rom gm@||@com  Tue Jan 20 11:57:49 2026
From: n@@|n@k|@m@c|ej @end|ng |rom gm@||@com (Maciej Nasinski)
Date: Tue, 20 Jan 2026 11:57:49 +0100
Subject: [R-pkg-devel] Impact of Matrix requirement for R >= 4.4.0 on CRAN
 package ecosystem
Message-ID: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>

Dear R-packge-devel members,

I am writing to discuss the update from a while ago to the Matrix package,
which specifies a minimum requirement of R (>= 4.4.0).

As Matrix is a Recommended package and a foundational dependency for a vast
number of packages on CRAN (including lme4, mgcv, and hundreds or thousands
others), this version requirement has significant downstream implications
if applied everywhere. I am aware only of a few packages which updated
their minimum required R version matching Matrix as their dependency.

Because so many packages depend on Matrix, this change effectively raises
the "floor" for a large portion of CRAN to R 4.4.0. Is it true? Do we see
that a few thousands packages are not yet properly updated to R (>= 4.4.0)?
Or Most of the packages do not need the newest Matrix and the
install.packages matching somehow the newest Matrix fitted for a User R
Version.

I do not find anything direct in that matter in the R docs.

Thank you for your support.

Best regards,

Maciej Nasinski
University of Warsaw

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Tue Jan 20 13:04:55 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 20 Jan 2026 15:04:55 +0300
Subject: [R-pkg-devel] 
 Impact of Matrix requirement for R >= 4.4.0 on CRAN
 package ecosystem
In-Reply-To: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>
References: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>
Message-ID: <20260120150455.151725af@arachnoid>

Dear Maciej Nasinski,

? Tue, 20 Jan 2026 11:57:49 +0100
Maciej Nasinski <nasinski.maciej at gmail.com> ?????:

> Because so many packages depend on Matrix, this change effectively
> raises the "floor" for a large portion of CRAN to R 4.4.0. Is it true?

Ideally, only for those depending on Matrix (>= 1.7-0), currently
CoTiMA, FlexRL, gamm4, matrixCorr, organik, and their strong recursive
reverse dependencies (29 more packages via gamm4).

If the dependencies of the remaining packages are truly satisfied by
Matrix < 1.7-0, installing them shouldn't pose a problem, as Matrix is
likely to be pre-installed as a "Recommended" package. Even if it's not
installed and the distribution source code is missing, it's still
possible to download a matching version of Matrix from CRAN, e.g.,
from https://cran.r-project.org/src/contrib/4.0.0/Recommended/.

Still, it's a reason to worry, because most developers don't test their
packages with the minimal version of every dependency installed (some
CRAN packages even have dependencies on minimal versions of R that
don't exist!). There may be packages that effectively depend on a later
version of Matrix and don't know it.

-- 
Best regards,
Ivan


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Tue Jan 20 13:15:29 2026
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Tue, 20 Jan 2026 13:15:29 +0100
Subject: [R-pkg-devel] 
 Impact of Matrix requirement for R >= 4.4.0 on CRAN
 package ecosystem
In-Reply-To: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>
References: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>
Message-ID: <CAN+W6_ve+G-ZPTpBNPDSO+EwR_E2DmKFMD7ccK-_ztC1k96JLQ@mail.gmail.com>

Hi Maciej,

By default the install process uses the **latest** package available that
meets the requirements.
Installing Matrix with install.packages("Matrix") on R 4.3 or below won't
work.

The requirement for R >= 4.4.0 on Matrix was added on version 1.7-0 (thanks
to diffify: https://diffify.com/R/Matrix/1.6-5/1.7-0)
Currently on CRAN 6 packages require higher or equal versions of Matrix
1.7: CoTiMA, dependentsimr, FlexRL, gamm4, matrixCorr, organik
But 1475 packages don't require a specific version of Matrix, which by
default will use default to install from CRAN that requires R >= 4.4 if it
is not available.
And 198 packages require a version compatible with Matrix 1.7.0 and some
versions below it.

One can install packages if the other requirements are met:
- On systems with Matrix < 1.7.0, packages not requiring R >= 4.4 or Matrix
>= 1.7.0 (or any of their dependencies) can be installed.
- On systems with R < 4.4, packages requiring Matrix >= 1.7.0 or R >= 4.4
(or any of their dependencies) cannot be installed
  One can't install the latest Matrix package but could install some of the
1663 packages that don't require Matrix 1.7.0 (if the other requirements
are met)

Packages do not **need** to update version requirements based on other
packages' version requirements if they want to support the latest versions.
They can do that if they want to limit the "support" for older versions.
By default users will get the latest Matrix version which requires a recent
R version.
If users of old R versions want to update they can as far as the package
requirements allow them.

Note that install.packages(<pkgname>) is not the only way to install
packages.
Older versions of packages can still be installed with
install.packages("path/pkg_ver.tar.gz") or install.packages("
https://cran.r-project.org/src/contrib/Archive/Matrix/Matrix_1.6-5.tar.gz",
repos = NULL) if their requirements are met.
But this doesn't "guarantee" that packages work together as CRAN (and
maintainers) might have not checked that combination of packages.

I hope this answered all the questions,

Llu?s

PS: The version of Matrix installed as recommended and from CRAN (
https://cran.r-project.org/package=Matrix) might be different as it happens
currently.

Missatge de Maciej Nasinski <nasinski.maciej at gmail.com> del dia dt., 20 de
gen. 2026 a les 11:58:

> Dear R-packge-devel members,
>
> I am writing to discuss the update from a while ago to the Matrix package,
> which specifies a minimum requirement of R (>= 4.4.0).
>
> As Matrix is a Recommended package and a foundational dependency for a vast
> number of packages on CRAN (including lme4, mgcv, and hundreds or thousands
> others), this version requirement has significant downstream implications
> if applied everywhere. I am aware only of a few packages which updated
> their minimum required R version matching Matrix as their dependency.
>
> Because so many packages depend on Matrix, this change effectively raises
> the "floor" for a large portion of CRAN to R 4.4.0. Is it true? Do we see
> that a few thousands packages are not yet properly updated to R (>= 4.4.0)?
> Or Most of the packages do not need the newest Matrix and the
> install.packages matching somehow the newest Matrix fitted for a User R
> Version.
>
> I do not find anything direct in that matter in the R docs.
>
> Thank you for your support.
>
> Best regards,
>
> Maciej Nasinski
> University of Warsaw
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From n@@|n@k|@m@c|ej @end|ng |rom gm@||@com  Tue Jan 20 14:42:17 2026
From: n@@|n@k|@m@c|ej @end|ng |rom gm@||@com (Maciej Nasinski)
Date: Tue, 20 Jan 2026 14:42:17 +0100
Subject: [R-pkg-devel] 
 Impact of Matrix requirement for R >= 4.4.0 on CRAN
 package ecosystem
In-Reply-To: <20260120150455.151725af@arachnoid>
References: <CA+h+x0bdqU5FVa0mqdeHteG=r=0K5Xposp2K0bLcwqhhkV4u4A@mail.gmail.com>
 <20260120150455.151725af@arachnoid>
Message-ID: <CA+h+x0YC5FM0sBRJWnxpp_DDEihROXEwUW8dErG+YsPk+U_OdQ@mail.gmail.com>

Hi Ivan,

Thank you so much for your answer. Everything is clear now.

First, we have to ask ourselves if my package needs a more modern Matrix
version. Then, if I need a newer Matrix than 1.7-0, I set the minimal
required Matrix version and the corresponding R version. If I need Matrix,
but the one provided for a specific R version (from R X version) is
sufficient, I simply specify Matrix as a dependency, and it does not
influence my minimal R requirement.

The edge case is an R installation without "Recommended" packages, which
can cause additional manual Matrix installation.

KR Maciej

On Tue, 20 Jan 2026 at 13:04, Ivan Krylov <ikrylov at disroot.org> wrote:

> Dear Maciej Nasinski,
>
> ? Tue, 20 Jan 2026 11:57:49 +0100
> Maciej Nasinski <nasinski.maciej at gmail.com> ?????:
>
> > Because so many packages depend on Matrix, this change effectively
> > raises the "floor" for a large portion of CRAN to R 4.4.0. Is it true?
>
> Ideally, only for those depending on Matrix (>= 1.7-0), currently
> CoTiMA, FlexRL, gamm4, matrixCorr, organik, and their strong recursive
> reverse dependencies (29 more packages via gamm4).
>
> If the dependencies of the remaining packages are truly satisfied by
> Matrix < 1.7-0, installing them shouldn't pose a problem, as Matrix is
> likely to be pre-installed as a "Recommended" package. Even if it's not
> installed and the distribution source code is missing, it's still
> possible to download a matching version of Matrix from CRAN, e.g.,
> from https://cran.r-project.org/src/contrib/4.0.0/Recommended/.
>
> Still, it's a reason to worry, because most developers don't test their
> packages with the minimal version of every dependency installed (some
> CRAN packages even have dependencies on minimal versions of R that
> don't exist!). There may be packages that effectively depend on a later
> version of Matrix and don't know it.
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 22 22:39:15 2026
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 22 Jan 2026 16:39:15 -0500
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
In-Reply-To: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
References: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <30cab415-a60e-4637-aeea-3b5da69249c0@gmail.com>

On 2026-01-14 12:55 a.m., Andrew Johnson wrote:
> Hi all!
> 
> I have an R package which uses several JS scripts/libraries, and I'm trying to configure the build process to minify the JS files at build-time (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/).
> 
> My current approach is using a configure script to run the minification, with the jsutils package added as an Import (https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But this adds an additional runtime dependency when it's only needed at build time.
> 
> Are there any recommended ways for specifying build-time dependencies when the package doesn't require compilation? My attempts to use the LinkingTo field so far are giving check notes for not having source or include files.
> 
> Any suggestions are much appreciated!

The rgl package keeps Javascript code deep down within the inst 
directory, and uses R code calling js::uglify_files to minify them.

Remember that building a package entails running every .R file in the R 
directory.  In most cases that just executes function definitions, but 
it can also execute other code involved in building.  So rgl defines a 
function rgl::makeDependency(), then calls things like

   CanvasMatrixDependency <- makeDependency("CanvasMatrix4",
     src = "htmlwidgets/lib/CanvasMatrix",
     script = "CanvasMatrix.src.js",
     package = "rgl",
     debugging = isTRUE(as.logical(Sys.getenv("RGL_DEBUGGING", "FALSE"))))

to minify it and record the information used by htmlwidgets to handle 
dependencies.  The makeDependency() function is exported from rgl, and 
might be useful as a model for the kinds of things you should do.  If 
you're using htmlwidgets, then you might be able to use it as-is.

Duncan Murdoch


From |kry|ov @end|ng |rom d|@root@org  Mon Jan 26 12:53:32 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 26 Jan 2026 14:53:32 +0300
Subject: [R-pkg-devel] The XML package may have to remove DTD introspection
 soon
Message-ID: <20260126145332.1c5ce155@arachnoid>

Hi!

Out of the many deprecation warnings in the XML package [1], the ones
most challenging to fix are in src/RSDTD.c. This file powers the
parseDTD() function and the getDTD= argument of the functions
htmlParse(), htmlTreeParse(), xmlInternalTreeParse(),
xmlNativeTreeParse(), xmlParse(), xmlTreeParse(). Unlike the DTD
validation features, the DTD _introspection_ features rely on direct
access to structure members that libxml2's developers no longer wish to
keep public.

The good news are that no current version of a CRAN or Bioconductor
package seems to be using parseDTD(). The bad news are that the getDTD=
argument defaults to TRUE in all 6 parsing functions. The good news are
that everyone seems to be ignoring the DTD part of the return value;
I've been running increasingly wide reverse dependency checks with this
feature removed and so far found no changes to worse (but many failures
related to Internet access).

If you would like parseDTD() or {xml|html}*Parse(getDTD=TRUE) to keep
working, please let me know now; maybe we could propose a DTD
introspection API to the upstream. So far they haven't answered my
questions [2].

Since there is no way for XML to pass R CMD check with this interface
still working, what should be done about it? Especially worrying is the
getDTD=TRUE argument, which affects the class and shape of the return
value.

-- 
Best regards,
Ivan

[1] https://cran.r-project.org/web/checks/check_results_XML.html

[2] https://gitlab.gnome.org/GNOME/libxml2/-/issues/1042


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Mon Jan 26 15:31:59 2026
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Mon, 26 Jan 2026 15:31:59 +0100
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
Message-ID: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>

Hi.

I have asked to correct a simple (apparently) update of my mnormt package, see https://cran.r-project.org/web/packages/mnormt/index.html

The request was to amend a few Rd files and the DESCRIPTION, and this was the easy part.  Unfortunately, after I rebuilt the package and run  
R CMD check --as-cran --run-donttest mnormt_2.1.2.tar.gz 

unexpected problems appeared. The 00check.log file is as follows:


* using log directory ?/Users/aa/SW-aa/Pkg-mnormt/mnormt.Rcheck?
* using R version 4.5.2 (2025-10-31)
* using platform: aarch64-apple-darwin20
* R was compiled by
    Apple clang version 16.0.0 (clang-1600.0.26.6)
    GNU Fortran (GCC) 14.2.0
* running under: macOS Tahoe 26.2
* using session charset: UTF-8
* using options ?--run-donttest --as-cran?
* checking for file ?mnormt/DESCRIPTION? ... OK
* this is package ?mnormt? version ?2.1.2?
* package encoding: UTF-8
* checking CRAN incoming feasibility ... OK
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?mnormt? can be installed ... ERROR
Installation failed.
See ?/Users/aa/SW-aa/Pkg-mnormt/mnormt.Rcheck/00install.out? for details.
* DONE
Status: 1 ERROR

Since the 00install.out file is quite long, it has been placed at
http://azzalini.stat.unipd.it/SW/00install.out
It shows a long list of Fortran warning messages, many of them of the following form:

Warning: Possible change of value in conversion from REAL(8) to INTEGER(4) at (1) [-Wconversion]

and finally
ld: library 'emutls_w' not found
clang: error: linker command failed with exit code 1 (use -v to see invocation)

where the process has stopped.

This bunch of warnings/error surprised me, since that Fortran code has been in use for several years and various versions of the package, without showing these problems. 

Since my macOS has recently been updated to version 26.2 (Tahoe) with a corresponding update of Xcode, I wonder whether this update has anything to do with these problems.

Any suggestions are much appreciated!

Best regards,

Adelchi Azzalini
http://azzalini.stat.unipd.it


From bbo|ker @end|ng |rom gm@||@com  Mon Jan 26 15:34:49 2026
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 26 Jan 2026 09:34:49 -0500
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
Message-ID: <a524c202-a663-456f-a623-efac7c053224@gmail.com>

   Old but maybe relevant?

https://stackoverflow.com/questions/76096681/macos-brew-system-r-packages-fail-to-install-with-emutls-w

On 2026-01-26 9:31 a.m., Adelchi Azzalini wrote:
> Hi.
> 
> I have asked to correct a simple (apparently) update of my mnormt package, see https://cran.r-project.org/web/packages/mnormt/index.html
> 
> The request was to amend a few Rd files and the DESCRIPTION, and this was the easy part.  Unfortunately, after I rebuilt the package and run
> R CMD check --as-cran --run-donttest mnormt_2.1.2.tar.gz
> 
> unexpected problems appeared. The 00check.log file is as follows:
> 
> 
> * using log directory ?/Users/aa/SW-aa/Pkg-mnormt/mnormt.Rcheck?
> * using R version 4.5.2 (2025-10-31)
> * using platform: aarch64-apple-darwin20
> * R was compiled by
>      Apple clang version 16.0.0 (clang-1600.0.26.6)
>      GNU Fortran (GCC) 14.2.0
> * running under: macOS Tahoe 26.2
> * using session charset: UTF-8
> * using options ?--run-donttest --as-cran?
> * checking for file ?mnormt/DESCRIPTION? ... OK
> * this is package ?mnormt? version ?2.1.2?
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... OK
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?mnormt? can be installed ... ERROR
> Installation failed.
> See ?/Users/aa/SW-aa/Pkg-mnormt/mnormt.Rcheck/00install.out? for details.
> * DONE
> Status: 1 ERROR
> 
> Since the 00install.out file is quite long, it has been placed at
> http://azzalini.stat.unipd.it/SW/00install.out
> It shows a long list of Fortran warning messages, many of them of the following form:
> 
> Warning: Possible change of value in conversion from REAL(8) to INTEGER(4) at (1) [-Wconversion]
> 
> and finally
> ld: library 'emutls_w' not found
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> 
> where the process has stopped.
> 
> This bunch of warnings/error surprised me, since that Fortran code has been in use for several years and various versions of the package, without showing these problems.
> 
> Since my macOS has recently been updated to version 26.2 (Tahoe) with a corresponding update of Xcode, I wonder whether this update has anything to do with these problems.
> 
> Any suggestions are much appreciated!
> 
> Best regards,
> 
> Adelchi Azzalini
> http://azzalini.stat.unipd.it
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Associate Chair (Graduate), Department of Mathematics & Statistics
Director, School of Computational Science and Engineering
> E-mail is sent at my convenience; I don't expect replies outside of working hours.


From |kry|ov @end|ng |rom d|@root@org  Mon Jan 26 16:01:44 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 26 Jan 2026 18:01:44 +0300
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
Message-ID: <20260126180144.4b6886ae@arachnoid>

? Mon, 26 Jan 2026 15:31:59 +0100
Adelchi Azzalini <azzalini at stat.unipd.it> ?????:

> It shows a long list of Fortran warning messages, many of them of the
> following form:
> 
> Warning: Possible change of value in conversion from REAL(8) to
> INTEGER(4) at (1) [-Wconversion]

These are also present in the compilation log for macOS on CRAN:
https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/mnormt-00install.html

> and finally
> ld: library 'emutls_w' not found
> clang: error: linker command failed with exit code 1 (use -v to see
> invocation)

> Since my macOS has recently been updated to version 26.2 (Tahoe) with
> a corresponding update of Xcode, I wonder whether this update has
> anything to do with these problems.

It's probably due to the toolchain version mismatch. What's your R
version? Maybe you need a newer gfortran, 14.2 instead of 12.2?
See https://mac.r-project.org/tools/ for download links.

-- 
Best regards,
Ivan


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Mon Jan 26 17:25:32 2026
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Mon, 26 Jan 2026 17:25:32 +0100
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <20260126180144.4b6886ae@arachnoid>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
 <20260126180144.4b6886ae@arachnoid>
Message-ID: <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>

Updating to gfortran 14.2 led to successful checking of the package.
Thanks, Ivan, for the effective suggestion. 
The R version was already up to date.

best wishes 
Adelchi
 



> On 26 Jan 2026, at 16:01, Ivan Krylov <ikrylov at disroot.org> wrote:
> 
> ? Mon, 26 Jan 2026 15:31:59 +0100
> Adelchi Azzalini <azzalini at stat.unipd.it> ?????:
> 
>> It shows a long list of Fortran warning messages, many of them of the
>> following form:
>> 
>> Warning: Possible change of value in conversion from REAL(8) to
>> INTEGER(4) at (1) [-Wconversion]
> 
> These are also present in the compilation log for macOS on CRAN:
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/mnormt-00install.html
> 
>> and finally
>> ld: library 'emutls_w' not found
>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
> 
>> Since my macOS has recently been updated to version 26.2 (Tahoe) with
>> a corresponding update of Xcode, I wonder whether this update has
>> anything to do with these problems.
> 
> It's probably due to the toolchain version mismatch. What's your R
> version? Maybe you need a newer gfortran, 14.2 instead of 12.2?
> See https://mac.r-project.org/tools/ for download links.
> 
> -- 
> Best regards,
> Ivan


From edd @end|ng |rom deb|@n@org  Mon Jan 26 18:17:06 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 26 Jan 2026 11:17:06 -0600
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
 <20260126180144.4b6886ae@arachnoid>
 <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
Message-ID: <26999.41362.1136.281418@paul.eddelbuettel.com>


On 26 January 2026 at 17:25, Adelchi Azzalini wrote:
| Updating to gfortran 14.2 led to successful checking of the package.
| Thanks, Ivan, for the effective suggestion. 
| The R version was already up to date.

Excellent news.

It may be worth mentioning that there are multiple ways to get a package
tested 'easily' on current infrastructure:

 - submit to winbuilder or macbuilder (both provided by CRAN / R Core)
 
 - use a CI platform (may look intimidating, but can be easy)
 
 - setup r-universe (gets you many build and OS variants) or r-hub2

 - use a container

as well as variants of these (i.e. rely on a container inside a CI 'action').

This comes close to having an automated 'second set of eyes' or setup and can
be quite valuable.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jbenn|ngho|| @end|ng |rom m@c@com  Mon Jan 26 22:06:19 2026
From: jbenn|ngho|| @end|ng |rom m@c@com (John Benninghoff)
Date: Mon, 26 Jan 2026 15:06:19 -0600
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
 <20260126180144.4b6886ae@arachnoid>
 <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
Message-ID: <9FB7D554-EA06-42AC-B253-DD261203BD65@mac.com>

I?ve run into this problem before as well (not finding emutls_w), and have done a fair amount of research on it. Some key points of what I?ve learned:

R/CRAN, including the default R Makeconf assumes that you have a specific version/build of gfortran installed from https://mac.r-project.org/tools/:

- gfortran 4.2.3 for R 3.6 (https://cran.r-project.org/bin/macosx/tools/)
- gfortran 8.2 for intel R 4.0 through 4.2 (https://github.com/fxcoudert/gfortran-for-macOS)
- gfortran 11.0.0 for arm64 R 4.1 (https://mac.r-project.org/libs-arm64/gfortran-f51f1da0-darwin20.0-arm64.tar.gz)
- gfortran 12.0.1 for arm64 R 4.2 (https://github.com/R-macos/gcc-darwin-arm64)
- gfortran-12.2-universal.pkg for R 4.3 and 4.4 (https://github.com/R-macos/gcc-12-branch)
- gfortran-14.2-universal.pkg (r-gfortran) for R 4.5 and newer (https://github.com/R-macos/gcc-14-branch)

If you?re using a different gfortran (for example, from Homebrew?s gcc formula), you?ll need a custom .R/Makevars (which you may need for other reasons, such as using libomp). (A copy of my Makevars is available here: https://github.com/jabenninghoff/macos-env/blob/master/R/Makevars). This is also discussed in an issue for rig: https://github.com/r-lib/rig/issues/207.

What I don?t know and don?t understand is why emutls_w (or heapt_w) are needed, does anyone here know? In the past, I?ve been able to build R packages from source with a custom FLIBS that doesn?t include either library, although I?ve now switched to using the official R gfortran.

Also, FWIW, I built a Homebrew cask to automate installation of R?s gfortran: https://github.com/jabenninghoff/homebrew-edge/blob/master/Casks/r-gfortran.rb.

Thanks,
John

> On Jan 26, 2026, at 10:25?AM, Adelchi Azzalini <azzalini at stat.unipd.it> wrote:
> 
> Updating to gfortran 14.2 led to successful checking of the package.
> Thanks, Ivan, for the effective suggestion. 
> The R version was already up to date.
> 
> best wishes 
> Adelchi
> 
> 
> 
> 
>> On 26 Jan 2026, at 16:01, Ivan Krylov <ikrylov at disroot.org> wrote:
>> 
>> ? Mon, 26 Jan 2026 15:31:59 +0100
>> Adelchi Azzalini <azzalini at stat.unipd.it> ?????:
>> 
>>> It shows a long list of Fortran warning messages, many of them of the
>>> following form:
>>> 
>>> Warning: Possible change of value in conversion from REAL(8) to
>>> INTEGER(4) at (1) [-Wconversion]
>> 
>> These are also present in the compilation log for macOS on CRAN:
>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/mnormt-00install.html
>> 
>>> and finally
>>> ld: library 'emutls_w' not found
>>> clang: error: linker command failed with exit code 1 (use -v to see
>>> invocation)
>> 
>>> Since my macOS has recently been updated to version 26.2 (Tahoe) with
>>> a corresponding update of Xcode, I wonder whether this update has
>>> anything to do with these problems.
>> 
>> It's probably due to the toolchain version mismatch. What's your R
>> version? Maybe you need a newer gfortran, 14.2 instead of 12.2?
>> See https://mac.r-project.org/tools/ for download links.
>> 
>> -- 
>> Best regards,
>> Ivan
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jan 27 03:25:33 2026
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 27 Jan 2026 15:25:33 +1300
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <9FB7D554-EA06-42AC-B253-DD261203BD65@mac.com>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
 <20260126180144.4b6886ae@arachnoid>
 <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
 <9FB7D554-EA06-42AC-B253-DD261203BD65@mac.com>
Message-ID: <530E4591-BE99-48B7-AED7-4155045D8164@R-project.org>



> On 27 Jan 2026, at 10:06, John Benninghoff <jbenninghoff at mac.com> wrote:
> 
> I?ve run into this problem before as well (not finding emutls_w), and have done a fair amount of research on it. Some key points of what I?ve learned:
> 
> R/CRAN, including the default R Makeconf assumes that you have a specific version/build of gfortran installed from https://mac.r-project.org/tools/:
> 
> - gfortran 4.2.3 for R 3.6 (https://cran.r-project.org/bin/macosx/tools/)
> - gfortran 8.2 for intel R 4.0 through 4.2 (https://github.com/fxcoudert/gfortran-for-macOS)
> - gfortran 11.0.0 for arm64 R 4.1 (https://mac.r-project.org/libs-arm64/gfortran-f51f1da0-darwin20.0-arm64.tar.gz)
> - gfortran 12.0.1 for arm64 R 4.2 (https://github.com/R-macos/gcc-darwin-arm64)
> - gfortran-12.2-universal.pkg for R 4.3 and 4.4 (https://github.com/R-macos/gcc-12-branch)
> - gfortran-14.2-universal.pkg (r-gfortran) for R 4.5 and newer (https://github.com/R-macos/gcc-14-branch)
> 
> If you?re using a different gfortran (for example, from Homebrew?s gcc formula), you?ll need a custom .R/Makevars (which you may need for other reasons, such as using libomp). (A copy of my Makevars is available here: https://github.com/jabenninghoff/macos-env/blob/master/R/Makevars). This is also discussed in an issue for rig: https://github.com/r-lib/rig/issues/207.
> 
> What I don?t know and don?t understand is why emutls_w (or heapt_w) are needed, does anyone here know? In the past, I?ve been able to build R packages from source with a custom FLIBS that doesn?t include either library, although I?ve now switched to using the official R gfortran.
> 

It is part of the gcc runtime which is why gfortran pulls it in (remember that GNU Fortran is the Fortran part from GCC 14.2, it has nothing to do with Apple nor clang). You will see it in the gcc sources:

libgcc/config.host:  extra_parts="crt3.o crttms.o crttme.o libemutls_w.a "

Those are the static and object parts of the compiler run-time (CRT). You may get away with not using it if your source code happens to not generate run-time code that requires it or if the driver you use happens to include them anyway.

Note that using anything other than the compiler R was configured with is strictly unsupported, because part of the R configure step is to record the flags necessary for the various compilers to link their run-time pieces including crt/static ones  - and all those are very specific to the exact binary and directory layout of the compiler used. This is necessary, because we allow linking of multiple languages (C, C++, Fortran) with one linker call, which is normally impossible since each language has its own flags generated by the language-specific linker invocation, so we extract that information from the various linker drivers so that we can, e.g. tell the C++ linker to also use Fortran flags if the linked binary needs both. It?s all quite non-trivial, especially in the macOS setup, because we end up having to merge both GCC (Fortran) and clang (C/C++) run-times into one linking step. So the only way to do all this magic reliably is to make sure you use the correct compiler which R was configured with, otherwise it?s just pure luck if it works :P.

Cheers,
Simon



> Also, FWIW, I built a Homebrew cask to automate installation of R?s gfortran: https://github.com/jabenninghoff/homebrew-edge/blob/master/Casks/r-gfortran.rb.
> 
> Thanks,
> John
> 
>> On Jan 26, 2026, at 10:25?AM, Adelchi Azzalini <azzalini at stat.unipd.it> wrote:
>> 
>> Updating to gfortran 14.2 led to successful checking of the package.
>> Thanks, Ivan, for the effective suggestion. 
>> The R version was already up to date.
>> 
>> best wishes 
>> Adelchi
>> 
>> 
>> 
>> 
>>> On 26 Jan 2026, at 16:01, Ivan Krylov <ikrylov at disroot.org> wrote:
>>> 
>>> ? Mon, 26 Jan 2026 15:31:59 +0100
>>> Adelchi Azzalini <azzalini at stat.unipd.it> ?????:
>>> 
>>>> It shows a long list of Fortran warning messages, many of them of the
>>>> following form:
>>>> 
>>>> Warning: Possible change of value in conversion from REAL(8) to
>>>> INTEGER(4) at (1) [-Wconversion]
>>> 
>>> These are also present in the compilation log for macOS on CRAN:
>>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/mnormt-00install.html
>>> 
>>>> and finally
>>>> ld: library 'emutls_w' not found
>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>> invocation)
>>> 
>>>> Since my macOS has recently been updated to version 26.2 (Tahoe) with
>>>> a corresponding update of Xcode, I wonder whether this update has
>>>> anything to do with these problems.
>>> 
>>> It's probably due to the toolchain version mismatch. What's your R
>>> version? Maybe you need a newer gfortran, 14.2 instead of 12.2?
>>> See https://mac.r-project.org/tools/ for download links.
>>> 
>>> -- 
>>> Best regards,
>>> Ivan
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From @ndrew@john@on @end|ng |rom @rjohn@on@u@com  Tue Jan 27 05:49:03 2026
From: @ndrew@john@on @end|ng |rom @rjohn@on@u@com (Andrew Johnson)
Date: Tue, 27 Jan 2026 04:49:03 +0000
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
In-Reply-To: <30cab415-a60e-4637-aeea-3b5da69249c0@gmail.com>
References: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <30cab415-a60e-4637-aeea-3b5da69249c0@gmail.com>
Message-ID: <SY2PPF6B2A530F4287E4352BF168A448A319790A@SY2PPF6B2A530F4.AUSP282.PROD.OUTLOOK.COM>

Hi Duncan,

That's perfect, exactly what I was looking for!

Many thanks for the help!
Andrew

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Friday, 23 January 2026 5:39 AM
To: Andrew Johnson <andrew.johnson at arjohnsonau.com>; R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Specifying non-C/C++ build-time dependency

On 2026-01-14 12:55 a.m., Andrew Johnson wrote:
> Hi all!
> 
> I have an R package which uses several JS scripts/libraries, and I'm trying to configure the build process to minify the JS files at build-time (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/).
> 
> My current approach is using a configure script to run the minification, with the jsutils package added as an Import (https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But this adds an additional runtime dependency when it's only needed at build time.
> 
> Are there any recommended ways for specifying build-time dependencies when the package doesn't require compilation? My attempts to use the LinkingTo field so far are giving check notes for not having source or include files.
> 
> Any suggestions are much appreciated!

The rgl package keeps Javascript code deep down within the inst directory, and uses R code calling js::uglify_files to minify them.

Remember that building a package entails running every .R file in the R directory.  In most cases that just executes function definitions, but it can also execute other code involved in building.  So rgl defines a function rgl::makeDependency(), then calls things like

   CanvasMatrixDependency <- makeDependency("CanvasMatrix4",
     src = "htmlwidgets/lib/CanvasMatrix",
     script = "CanvasMatrix.src.js",
     package = "rgl",
     debugging = isTRUE(as.logical(Sys.getenv("RGL_DEBUGGING", "FALSE"))))

to minify it and record the information used by htmlwidgets to handle dependencies.  The makeDependency() function is exported from rgl, and might be useful as a model for the kinds of things you should do.  If you're using htmlwidgets, then you might be able to use it as-is.

Duncan Murdoch

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 27 10:49:13 2026
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 27 Jan 2026 04:49:13 -0500
Subject: [R-pkg-devel] Specifying non-C/C++ build-time dependency
In-Reply-To: <SY2PPF6B2A530F4287E4352BF168A448A319790A@SY2PPF6B2A530F4.AUSP282.PROD.OUTLOOK.COM>
References: <SY3PPF8CBDD8E6E9C715412C20D58DD9F30978FA@SY3PPF8CBDD8E6E.AUSP282.PROD.OUTLOOK.COM>
 <30cab415-a60e-4637-aeea-3b5da69249c0@gmail.com>
 <SY2PPF6B2A530F4287E4352BF168A448A319790A@SY2PPF6B2A530F4.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <4d04198b-82ed-4e84-bcd6-95aed7f864b0@gmail.com>

You're welcome.  Just noticed one little error in what I wrote:  it's 
"installing" that runs all the code, not "building".

Duncan Murdoch

On 2026-01-26 11:49 p.m., Andrew Johnson wrote:
> Hi Duncan,
> 
> That's perfect, exactly what I was looking for!
> 
> Many thanks for the help!
> Andrew
> 
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Friday, 23 January 2026 5:39 AM
> To: Andrew Johnson <andrew.johnson at arjohnsonau.com>; R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Specifying non-C/C++ build-time dependency
> 
> On 2026-01-14 12:55 a.m., Andrew Johnson wrote:
>> Hi all!
>>
>> I have an R package which uses several JS scripts/libraries, and I'm trying to configure the build process to minify the JS files at build-time (via my jsutils package: https://cran.r-project.org/web/packages/jsutils/).
>>
>> My current approach is using a configure script to run the minification, with the jsutils package added as an Import (https://github.com/AUS-DOH-Safety-and-Quality/controlcharts/pull/25). But this adds an additional runtime dependency when it's only needed at build time.
>>
>> Are there any recommended ways for specifying build-time dependencies when the package doesn't require compilation? My attempts to use the LinkingTo field so far are giving check notes for not having source or include files.
>>
>> Any suggestions are much appreciated!
> 
> The rgl package keeps Javascript code deep down within the inst directory, and uses R code calling js::uglify_files to minify them.
> 
> Remember that building a package entails running every .R file in the R directory.  In most cases that just executes function definitions, but it can also execute other code involved in building.  So rgl defines a function rgl::makeDependency(), then calls things like
> 
>     CanvasMatrixDependency <- makeDependency("CanvasMatrix4",
>       src = "htmlwidgets/lib/CanvasMatrix",
>       script = "CanvasMatrix.src.js",
>       package = "rgl",
>       debugging = isTRUE(as.logical(Sys.getenv("RGL_DEBUGGING", "FALSE"))))
> 
> to minify it and record the information used by htmlwidgets to handle dependencies.  The makeDependency() function is exported from rgl, and might be useful as a model for the kinds of things you should do.  If you're using htmlwidgets, then you might be able to use it as-is.
> 
> Duncan Murdoch


From n|cho|@@@t|erney @end|ng |rom gm@||@com  Thu Jan 29 01:36:00 2026
From: n|cho|@@@t|erney @end|ng |rom gm@||@com (Nicholas Tierney)
Date: Thu, 29 Jan 2026 11:36:00 +1100
Subject: [R-pkg-devel] Issue "Re-building vignettes had CPU time 4.1 times
 elapsed time"
Message-ID: <CACrL82WnR_dM5QHJLHb_dRVn_xacsKEY0TLfOf1JDZ=PcDhgvg@mail.gmail.com>

Hi folks,

I'm working on re-submitting {greta} onto CRAN after it was archived last
year. I keep running into this NOTE:

```
Flavor: r-devel-linux-x86_64-debian-gcc
Check: re-building of vignette outputs, Result: NOTE
  Re-building vignettes had CPU time 4.1 times elapsed time
```

Searching this email list, I understand this error means that our code is
using 2 or more cores. I am a bit confused how this is happening on CRAN,
as we mostly skip running of vignettes on CRAN as it involves installing
tensorflow and tensorflow probability. I have tried very hard to limit the
vignettes to only use 2 cores, by setting options like the following in the
vignette:

```{r setup, include = FALSE}

knitr::opts_chunk$set(echo = TRUE,
                      eval = greta:::check_tf_version("message"),
                      purl = greta:::check_tf_version("message"),
                      cache = TRUE,
                      comment = NA,
                      progress = FALSE)

# Force limit to 2 cores for CRAN
Sys.setenv("R_PARALLELLY_AVAILABLE_CORES" = "2")
Sys.setenv("MC_CORES" = "2")
Sys.setenv("OMP_THREAD_LIMIT" = "2")
Sys.setenv("OMP_NUM_THREADS" = "2")
options(mc.cores = 2)

# ...
```

This above approach does not seem to solve this problem. Searching more
generally, I see
https://contributor.r-project.org/cran-cookbook/code_issues.html#using-more-than-2-cores
and

I also note that I cannot reproduce the same error with:

```
rcmdcheck::rcmdcheck(args = c("--no-manual", "--as-cran",
"--no-multiarch"), env =
"_R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_ = 53")
```

I'm wondering if there is something I am missing on how to deal with this
vignette building NOTE, or if I should if ask CRAN can ignore this NOTE?

Best,

Nick

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Jan 29 15:26:52 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 29 Jan 2026 17:26:52 +0300
Subject: [R-pkg-devel] 
 Issue "Re-building vignettes had CPU time 4.1 times elapsed time"
In-Reply-To: <CACrL82WnR_dM5QHJLHb_dRVn_xacsKEY0TLfOf1JDZ=PcDhgvg@mail.gmail.com>
References: <CACrL82WnR_dM5QHJLHb_dRVn_xacsKEY0TLfOf1JDZ=PcDhgvg@mail.gmail.com>
Message-ID: <20260129172652.3f0aebf7@arachnoid>

? Thu, 29 Jan 2026 11:36:00 +1100
Nicholas Tierney <nicholas.tierney at gmail.com> ?????:

> I also note that I cannot reproduce the same error with:
> 
> ```
> rcmdcheck::rcmdcheck(args = c("--no-manual", "--as-cran",
> "--no-multiarch"), env =
> "_R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_ = 53")
> ```

This threshold is very large. It makes more sense to lower it, not
raise, in order to make the test more sensitive. On a machine with 16
hyper-threads, 

_R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=1.1 \
 R CMD check --timings greta_0.5.1.tar.gz

...reproduces the NOTE. (The more CPUs on your machine, the more the
chance that something trying to use all of them will cause a noticeable
spike in CPU time. The machines running CRAN checks have even more
logical CPUs.) In particular,

list.files("vignettes", full.names=TRUE, patt = '[.]Rmd$') |>
 setNames(nm = _) |> lapply(\(.)
  tools::buildVignette(., encoding='UTF-8') |> system.time()
 )

shows that it's the get_started.Rmd vignette (62.765 s userspace CPU
time vs. 27.745 s elapsed time).

What exactly starts these threads? 'pthread_create' is not the complete
answer, but it usually points out some suspects.

ltrace -w 10 -f -e pthread_create -- \
 env R_LIBS_USER=greta.Rcheck:%U \
 R -f greta.Rcheck/greta/doc/get_started.R

...There are a lot of suspects.

Here is a copy of OpenBLAS bundled with a Python wheel that 'greta'
installs starting 16 threads when greta:::check_tf_version is called:

> knitr::opts_chunk$set(echo = TRUE,
+                       eval = greta:::check_tf_version("message"),
+                       purl = greta:::check_tf_version("message"),
+                       cache = TRUE,
+                       comment = NA,
+                       progress = FALSE)
...
[pid 25013] libopenblas64_p-r0-0cf96a72.3.23.dev.so->pthread_create(0x7f36ed7ccd80, 0, 0x7f36ebb50660, 0) = 0
                        blas_thread_init.part.0 (ip = 0x7f36ebb50a2a)
                        blas_thread_init (ip = 0x7f36ebb50ba9)
                        gotoblas_init (ip = 0x7f36eb91807f)
                        __nptl_change_stack_perm (ip = 0x7f36ef0959ce)
                        __nptl_change_stack_perm (ip = 0x7f36ef095ab4)
                        _dl_catch_exception (ip = 0x7f36eeed9274)
                        _dl_rtld_di_serinfo (ip = 0x7f36ef09c21e)
                        _dl_catch_exception (ip = 0x7f36eeed921a)
                        _dl_find_dso_for_object (ip = 0x7f36ef09c5b8)
                        dlmopen (ip = 0x7f36eee0f4b8)

By the time the following code block runs and tries to set
OMP_THREAD_LIMIT=2, it's too late. (It's usually too late to set
OpenMP-related variables inside an R script, because the OpenMP runtime
reads them once at process startup, before any R code can run.)

It might help to set OPENBLAS_NUM_THREADS=2 first, then implicitly load
greta by calling greta:::check_tf_version(...). Though judging by later
results, it's probably a red herring.

Here's node.js creating 16 worker threads through the 'V8' package:

> DiagrammeR::export_graph(attr(gr, "dgr_graph"),
+                          file_name = "figures/full_graph.png",
+                          file_type = "png",
+                          width = 958 * 2,
+                          height = 450 * 2)
[pid 24967] libnode.so.108->pthread_create(0x555bfee583c0, 0x7ffde39e7c50, 0x7fc7a9f49280, 0x555bfee582f0) = 0
                        _ZN2v84base6Thread5StartEv (ip = 0x7fc7a9f4a424)
                        _ZN2v88platform30DefaultWorkerThreadsTaskRunner12WorkerThreadC1EPS1_ (ip = 0x7fc7a95fab76)
                        _ZN2v88platform30DefaultWorkerThreadsTaskRunnerC2EjPFdvE (ip = 0x7fc7a95fadbc)
                        _ZN2v88platform15DefaultPlatform37EnsureBackgroundTaskRunnerInitializedEv (ip = 0x7fc7a95f861e)
                        _ZN2v88platform18NewDefaultPlatformEiNS0_15IdleTaskSupportENS0_21InProcessStackDumpingESt10unique_p (ip = 0x7fc7a95f8849)
                        R_init_V8 (ip = 0x7fc7b001d609)
                        AddDLL (ip = 0x555baec0a5f1)
                        do_dynload (ip = 0x555baec0d0d1)
                        bcEval_loop (ip = 0x555baecd7100)
                        bcEval (ip = 0x555baece5477)

Here's librsvg -> pango creating worker threads:

> DiagrammeR::export_graph(attr(gr, "dgr_graph"),
+                          file_name = "figures/coef_graph.png",
+                          file_type = "png",
+                          width = 325 * 2,
+                          height = 123 * 2)
[pid 24967] libglib-2.0.so.0->pthread_create(0x555bff3ad6d0, 0x7ffde39e6c60, 0x7fc7a0003650, 0x555bff3ad6a0) = 0
                        g_mutex_init (ip = 0x7fc7a0003fb5)
                        g_thread_new (ip = 0x7fc79ffd9fa8)
                        pango_fc_font_map_get_config (ip = 0x7fc79fae816f)
                        pango_glyph_string_x_to_index (ip = 0x7fc7a00b5803)
                        pango_layout_line_get_extents (ip = 0x7fc7a00c583e)
                        pango_layout_index_to_line_x (ip = 0x7fc7a00c7efe)
                        pango_layout_get_size (ip = 0x7fc7a00c8126)
                        rsvg_pixbuf_from_file_at_max_size (ip = 0x7fc7a074e6d2)
                        rsvg_pixbuf_from_file_at_max_size (ip = 0x7fc7a06661c6)
                        rsvg_error_get_type (ip = 0x7fc7a05f869e)

Do they consume a lot of CPU? Probably not.

Here's Tensorflow creating 16 worker threads:

> draws <- mcmc(m, n_samples = 1000)
[pid 24967] libtensorflow_framework.so.2->pthread_create(0x555bff178668, 0x7ffde39e8ed8, 0x7fc7eb867150, 0x555bfea36d30) = 0
                        _ZN3tsl12_GLOBAL__N_18PosixEnv11StartThreadERKNS_13ThreadOptionsERKNSt7__cxx1112basic_stringIcSt11c (ip = 0x7fc7eb866567)
                        _ZN3tsl6thread16EigenEnvironment12CreateThreadESt8functionIFvvEE (ip = 0x7fc7eacd0a39)
                        _ZN5Eigen15ThreadPoolTemplIN3tsl6thread16EigenEnvironmentEEC2EibS3_ (ip = 0x7fc7eaccefaa)
                        _ZN3tsl6thread10ThreadPoolC2EPNS_3EnvERKNS_13ThreadOptionsERKNSt7__cxx1112basic_stringIcSt11char_tr (ip = 0x7fc7eacce92c)
                        _ZN10tensorflow11LocalDevice19EigenThreadPoolInfoC2ERKNS_14SessionOptionsEiPN3tsl9AllocatorE (ip = 0x7fc7ebcbacfc)
                        _ZN10tensorflow11LocalDeviceC2ERKNS_14SessionOptionsERKNS_16DeviceAttributesE (ip = 0x7fc7ebcba857)
                        _ZN10tensorflow16ThreadPoolDeviceC1ERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt11char_tra (ip = 0x7fc7ebc1fc36)
                        _ZN10tensorflow29GPUCompatibleCPUDeviceFactory13CreateDevicesERKNS_14SessionOptionsERKNSt7__cxx1112 (ip = 0x7fc7ebd30b64)
                        _ZN10tensorflow13DeviceFactory13AddCpuDevicesERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt (ip = 0x7fc7eb60eabc)
                        _ZN10tensorflow13DeviceFactory10AddDevicesERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt11c (ip = 0x7fc7eb60eb92)

It _says_ it runs on "up to 2 CPU cores", but empirically it consumes
up to ~400% CPU (4 out of 16 logical CPUs on this computer) while
mcmc(...) is running. Judging by the profiling data, most of the CPU
usage is due to tensorflow/Eigen running multiple threads during the
call to mcmc(), possibly due to the default argument chains = 4?

-- 
Best regards,
Ivan


From jbenn|ngho|| @end|ng |rom m@c@com  Thu Jan 29 22:50:27 2026
From: jbenn|ngho|| @end|ng |rom m@c@com (John Benninghoff)
Date: Thu, 29 Jan 2026 15:50:27 -0600
Subject: [R-pkg-devel] unexpected Fortran compilation warnings/error
In-Reply-To: <530E4591-BE99-48B7-AED7-4155045D8164@R-project.org>
References: <0C9CE257-EAD7-4BC3-96B9-460F5304F9A7@stat.unipd.it>
 <20260126180144.4b6886ae@arachnoid>
 <9C90B6C4-A58F-447A-9A0D-F716F9F83089@stat.unipd.it>
 <9FB7D554-EA06-42AC-B253-DD261203BD65@mac.com>
 <530E4591-BE99-48B7-AED7-4155045D8164@R-project.org>
Message-ID: <A6898C49-026A-421A-860D-6CE31C31FDD3@mac.com>

Thanks for the great explanation, Simon, much appreciated and very helpful!

> On Jan 26, 2026, at 8:25?PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> 
> 
>> On 27 Jan 2026, at 10:06, John Benninghoff <jbenninghoff at mac.com> wrote:
>> 
>> I?ve run into this problem before as well (not finding emutls_w), and have done a fair amount of research on it. Some key points of what I?ve learned:
>> 
>> R/CRAN, including the default R Makeconf assumes that you have a specific version/build of gfortran installed from https://mac.r-project.org/tools/:
>> 
>> - gfortran 4.2.3 for R 3.6 (https://cran.r-project.org/bin/macosx/tools/)
>> - gfortran 8.2 for intel R 4.0 through 4.2 (https://github.com/fxcoudert/gfortran-for-macOS)
>> - gfortran 11.0.0 for arm64 R 4.1 (https://mac.r-project.org/libs-arm64/gfortran-f51f1da0-darwin20.0-arm64.tar.gz)
>> - gfortran 12.0.1 for arm64 R 4.2 (https://github.com/R-macos/gcc-darwin-arm64)
>> - gfortran-12.2-universal.pkg for R 4.3 and 4.4 (https://github.com/R-macos/gcc-12-branch)
>> - gfortran-14.2-universal.pkg (r-gfortran) for R 4.5 and newer (https://github.com/R-macos/gcc-14-branch)
>> 
>> If you?re using a different gfortran (for example, from Homebrew?s gcc formula), you?ll need a custom .R/Makevars (which you may need for other reasons, such as using libomp). (A copy of my Makevars is available here: https://github.com/jabenninghoff/macos-env/blob/master/R/Makevars). This is also discussed in an issue for rig: https://github.com/r-lib/rig/issues/207.
>> 
>> What I don?t know and don?t understand is why emutls_w (or heapt_w) are needed, does anyone here know? In the past, I?ve been able to build R packages from source with a custom FLIBS that doesn?t include either library, although I?ve now switched to using the official R gfortran.
>> 
> 
> It is part of the gcc runtime which is why gfortran pulls it in (remember that GNU Fortran is the Fortran part from GCC 14.2, it has nothing to do with Apple nor clang). You will see it in the gcc sources:
> 
> libgcc/config.host:  extra_parts="crt3.o crttms.o crttme.o libemutls_w.a "
> 
> Those are the static and object parts of the compiler run-time (CRT). You may get away with not using it if your source code happens to not generate run-time code that requires it or if the driver you use happens to include them anyway.
> 
> Note that using anything other than the compiler R was configured with is strictly unsupported, because part of the R configure step is to record the flags necessary for the various compilers to link their run-time pieces including crt/static ones  - and all those are very specific to the exact binary and directory layout of the compiler used. This is necessary, because we allow linking of multiple languages (C, C++, Fortran) with one linker call, which is normally impossible since each language has its own flags generated by the language-specific linker invocation, so we extract that information from the various linker drivers so that we can, e.g. tell the C++ linker to also use Fortran flags if the linked binary needs both. It?s all quite non-trivial, especially in the macOS setup, because we end up having to merge both GCC (Fortran) and clang (C/C++) run-times into one linking step. So the only way to do all this magic reliably is to make sure you use the correct compiler which R was configured with, otherwise it?s just pure luck if it works :P.
> 
> Cheers,
> Simon
> 
> 
> 
>> Also, FWIW, I built a Homebrew cask to automate installation of R?s gfortran: https://github.com/jabenninghoff/homebrew-edge/blob/master/Casks/r-gfortran.rb.
>> 
>> Thanks,
>> John
>> 
>>> On Jan 26, 2026, at 10:25?AM, Adelchi Azzalini <azzalini at stat.unipd.it> wrote:
>>> 
>>> Updating to gfortran 14.2 led to successful checking of the package.
>>> Thanks, Ivan, for the effective suggestion. 
>>> The R version was already up to date.
>>> 
>>> best wishes 
>>> Adelchi
>>> 
>>> 
>>> 
>>> 
>>>> On 26 Jan 2026, at 16:01, Ivan Krylov <ikrylov at disroot.org> wrote:
>>>> 
>>>> ? Mon, 26 Jan 2026 15:31:59 +0100
>>>> Adelchi Azzalini <azzalini at stat.unipd.it> ?????:
>>>> 
>>>>> It shows a long list of Fortran warning messages, many of them of the
>>>>> following form:
>>>>> 
>>>>> Warning: Possible change of value in conversion from REAL(8) to
>>>>> INTEGER(4) at (1) [-Wconversion]
>>>> 
>>>> These are also present in the compilation log for macOS on CRAN:
>>>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/mnormt-00install.html
>>>> 
>>>>> and finally
>>>>> ld: library 'emutls_w' not found
>>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>> invocation)
>>>> 
>>>>> Since my macOS has recently been updated to version 26.2 (Tahoe) with
>>>>> a corresponding update of Xcode, I wonder whether this update has
>>>>> anything to do with these problems.
>>>> 
>>>> It's probably due to the toolchain version mismatch. What's your R
>>>> version? Maybe you need a newer gfortran, 14.2 instead of 12.2?
>>>> See https://mac.r-project.org/tools/ for download links.
>>>> 
>>>> -- 
>>>> Best regards,
>>>> Ivan
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From e||@@kr@|n@k| @end|ng |rom gm@||@com  Sat Jan 31 20:21:29 2026
From: e||@@kr@|n@k| @end|ng |rom gm@||@com (Elias T. Krainski)
Date: Sat, 31 Jan 2026 22:21:29 +0300
Subject: [R-pkg-devel] gcc-san fail with s2 package
Message-ID: <CAA0dk0Gst5e-BtGT=bE+c0OxwygQzwk9Ret9kXs_Df6K9oAGkw@mail.gmail.com>

I am trying to get a new version of a package; however, the gcc-san test
failed:

/usr/include/absl/container/internal/raw_hash_set.h:4052:56:   in
?constexpr? expansion of
?absl::debian7::container_internal::hash_policy_traits<absl::debian7::container_internal::FlatHashSetPolicy<s2shapeutil::ShapeEdgeId>,
void>::get_hash_slot_fn<absl::debian7::hash_internal::Hash<s2shapeutil::ShapeEdgeId>
>()?
/usr/include/absl/container/internal/hash_policy_traits.h:163:54:
error: ?(absl::debian7::container_internal::TypeErasedApplyToSlotFn<absl::debian7::hash_internal::Hash<s2shapeutil::ShapeEdgeId>,
s2shapeutil::ShapeEdgeId> == 0)? is not a constant expression
  163 |     return Policy::template get_hash_slot_fn<Hash>() == nullptr
      |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~
make[1]: *** [/home/hornik/tmp/R-d-gcc-xtra/etc/Makeconf:201:
s2-cell-union.o] Error 1
make[1]: Leaving directory
'/home/hornik/tmp/scratch/RtmpVRwpdp/R.INSTALL260db63d7805ba/s2/src'
ERROR: compilation failed for package ?s2?
* removing ?/home/hornik/tmp/CRAN_special_gcc-san/Library/s2?

Since my package isn't directly dependent on this one (it's fourth order),
I'm not sure how to proceed. Actually, I was surprised by this ERROR with a
package that is on CRAN.

Elias

	[[alternative HTML version deleted]]


From e||@@kr@|n@k| @end|ng |rom gm@||@com  Tue Feb  3 12:34:14 2026
From: e||@@kr@|n@k| @end|ng |rom gm@||@com (Elias T. Krainski)
Date: Tue, 3 Feb 2026 14:34:14 +0300
Subject: [R-pkg-devel] gcc-san fail with s2 package
In-Reply-To: <CAA0dk0Gst5e-BtGT=bE+c0OxwygQzwk9Ret9kXs_Df6K9oAGkw@mail.gmail.com>
References: <CAA0dk0Gst5e-BtGT=bE+c0OxwygQzwk9Ret9kXs_Df6K9oAGkw@mail.gmail.com>
Message-ID: <CAA0dk0Hzbf+_Y0YdWjYBVD4fyaeLKwgyKgHOSfGbxGaGfySLAg@mail.gmail.com>

Let me try to clarify the issue. An earlier version has failed a memory
sanitize check. I was able to solve it. But, at the same time, some
dependency was added, which includes the 's2' package but is not a direct
dependency.

What seems to happen now is that the gcc-san special check is performed in
an environment where all the dependency is compiled, but it fails to
compile 's2', as far as I can see from
https://win-builder.r-project.org/incoming_pretest/graphpcor_0.1.19_20260131_125536/specialChecks/gcc-san/

My current approach is to do a workaround to remove such a dependency. I
had to do it also to another one recently because of a similar issue (
https://win-builder.r-project.org/incoming_pretest/graphpcor_0.1.17_20260126_215413/specialChecks/clang-san/
)

On Sat, 31 Jan 2026 at 22:21, Elias T. Krainski <eliaskrainski at gmail.com>
wrote:

> I am trying to get a new version of a package; however, the gcc-san test
> failed:
>
> /usr/include/absl/container/internal/raw_hash_set.h:4052:56:   in ?constexpr? expansion of ?absl::debian7::container_internal::hash_policy_traits<absl::debian7::container_internal::FlatHashSetPolicy<s2shapeutil::ShapeEdgeId>, void>::get_hash_slot_fn<absl::debian7::hash_internal::Hash<s2shapeutil::ShapeEdgeId> >()?
> /usr/include/absl/container/internal/hash_policy_traits.h:163:54: error: ?(absl::debian7::container_internal::TypeErasedApplyToSlotFn<absl::debian7::hash_internal::Hash<s2shapeutil::ShapeEdgeId>, s2shapeutil::ShapeEdgeId> == 0)? is not a constant expression
>   163 |     return Policy::template get_hash_slot_fn<Hash>() == nullptr
>       |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~
> make[1]: *** [/home/hornik/tmp/R-d-gcc-xtra/etc/Makeconf:201: s2-cell-union.o] Error 1
> make[1]: Leaving directory '/home/hornik/tmp/scratch/RtmpVRwpdp/R.INSTALL260db63d7805ba/s2/src'
> ERROR: compilation failed for package ?s2?
> * removing ?/home/hornik/tmp/CRAN_special_gcc-san/Library/s2?
>
> Since my package isn't directly dependent on this one (it's fourth order),
> I'm not sure how to proceed. Actually, I was surprised by this ERROR with a
> package that is on CRAN.
>
> Elias
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Tue Feb  3 13:00:05 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 3 Feb 2026 15:00:05 +0300
Subject: [R-pkg-devel] gcc-san fail with s2 package
In-Reply-To: <CAA0dk0Hzbf+_Y0YdWjYBVD4fyaeLKwgyKgHOSfGbxGaGfySLAg@mail.gmail.com>
References: <CAA0dk0Gst5e-BtGT=bE+c0OxwygQzwk9Ret9kXs_Df6K9oAGkw@mail.gmail.com>
 <CAA0dk0Hzbf+_Y0YdWjYBVD4fyaeLKwgyKgHOSfGbxGaGfySLAg@mail.gmail.com>
Message-ID: <20260203150005.59ee8e8a@arachnoid>

? Tue, 3 Feb 2026 14:34:14 +0300
"Elias T. Krainski" <eliaskrainski at gmail.com> ?????:

> What seems to happen now is that the gcc-san special check is
> performed in an environment where all the dependency is compiled, but
> it fails to compile 's2', as far as I can see from
> https://win-builder.r-project.org/incoming_pretest/graphpcor_0.1.19_20260131_125536/specialChecks/gcc-san/

Very annoying situation to be in. g++ fails to compile these source
files because of the -fsanitize=undefined flag. This is reproducible in
the rocker/r-devel-san container, or by hand in a Debian testing
installation.

This is probably a compiler bug, although it could also be a bug in the
libabsl-dev version distributed in Debian testing. If you have the
time, try reducing the example to a minimal file that fails to compile
with constexpr-related errors when -fsanitize=undefined is added, then
reporting it to the GCC developers, or at least asking in the #gcc
channel on libera.chat. I can try to find the time to help with this
later, but not right now.

's2' developers seem to be aware of this [*], but there isn't much to
fix in the package source code.

[*] https://github.com/r-spatial/s2/issues/270#issuecomment-2881978818

-- 
Best regards,
Ivan


From k@||eng|u @end|ng |rom gm@||@com  Fri Feb  6 16:23:27 2026
From: k@||eng|u @end|ng |rom gm@||@com (Kaifeng Lu)
Date: Fri, 6 Feb 2026 10:23:27 -0500
Subject: [R-pkg-devel] macOS build error 'R_ext/Callbacks.h' file not found
Message-ID: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>

I am currently submitting a new version of the trtswitch package to CRAN
and have encountered a fatal error during the macOS arm64 build process:
fatal error: 'R_ext/Callbacks.h' file not found
The full build log for this submission is available here
macOS build result for 1770388945-93cbe1227ad944fa
<https://mac.r-project.org/macbuilder/results/1770388945-93cbe1227ad944fa/>

I was able to replicate this issue using rhub::rhub_check() on both m1-san
and macos-arm64 (R-devel).

While the Linux and Windows builds pass successfully, those logs do include
a note regarding R.h and Rinternals.h being included before Rcpp.h headers.

Interestingly, when I attempted to rebuild the currently published version
(v0.2.3), I encountered the same errors. This suggests that the issue may
stem from recent changes in the macOS build environment or stricter R-devel
checks introduced earlier this year.

I would appreciate any advice or suggestions you might have to resolve
these header conflicts and missing file errors.

Best regards,
Kaifeng

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Feb  6 17:05:24 2026
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 6 Feb 2026 17:05:24 +0100
Subject: [R-pkg-devel] 
 macOS build error 'R_ext/Callbacks.h' file not found
In-Reply-To: <fake-VM-id.77899d03ec145cba95e903dc60d02ba7@talos.iv>
References: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>
Message-ID: <27014.4420.695763.665186@stat.math.ethz.ch>

>>>>> Kaifeng Lu 
>>>>>     on Fri, 6 Feb 2026 10:23:27 -0500 writes:

    > I am currently submitting a new version of the trtswitch package to CRAN
    > and have encountered a fatal error during the macOS arm64 build process:
    > fatal error: 'R_ext/Callbacks.h' file not found
    > The full build log for this submission is available here
    > macOS build result for 1770388945-93cbe1227ad944fa
    > <https://mac.r-project.org/macbuilder/results/1770388945-93cbe1227ad944fa/>

    > I was able to replicate this issue using rhub::rhub_check() on both m1-san
    > and macos-arm64 (R-devel).

The NEWS for R-devel (which will become the next version of R ca. in April)
have contained for a couple of weeks

    * The non-API header files R_ext/Callbacks.h and R_ext/PrtUtil.h
      are no longer copied to the installed includes directory. The
      R_ObjectTable type definitions formally in R_ext/Callbacks.h are
      now available in the new header file R_ext/ObjectTable.h.  This
      new header file should be used in packages instead of
      R_ext/Callbacks.h.

So, source code accessing these will have to be adapted.
They were never API, but people *could* misuse them.

As mention Rcpp, maybe you are using an outdated version of Rcpp?
Rcpp and the Rcpp<some> package were all adapted to the above
news, AFAIK mostly even before their exclusion became active.

Martin


    > While the Linux and Windows builds pass successfully, those logs do include
    > a note regarding R.h and Rinternals.h being included before Rcpp.h headers.

    > Interestingly, when I attempted to rebuild the currently published version
    > (v0.2.3), I encountered the same errors. This suggests that the issue may
    > stem from recent changes in the macOS build environment or stricter R-devel
    > checks introduced earlier this year.

    > I would appreciate any advice or suggestions you might have to resolve
    > these header conflicts and missing file errors.

    > Best regards,
    > Kaifeng

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |kry|ov @end|ng |rom d|@root@org  Fri Feb  6 17:07:51 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 6 Feb 2026 19:07:51 +0300
Subject: [R-pkg-devel] 
 macOS build error 'R_ext/Callbacks.h' file not found
In-Reply-To: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>
References: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>
Message-ID: <20260206190751.09bf0c5c@arachnoid>

? Fri, 6 Feb 2026 10:23:27 -0500
Kaifeng Lu <kaifenglu at gmail.com> ?????:

> I am currently submitting a new version of the trtswitch package to
> CRAN and have encountered a fatal error during the macOS arm64 build
> process: fatal error: 'R_ext/Callbacks.h' file not found
> The full build log for this submission is available here
> macOS build result for 1770388945-93cbe1227ad944fa
> <https://mac.r-project.org/macbuilder/results/1770388945-93cbe1227ad944fa/>

>> In file included from
>> .../Rcpp/include/Rcpp.h:27: ...Rcpp/include/RcppCommon.h:75:10:
>> fatal error: 'R_ext/Callbacks.h' file not found

This was fixed in Rcpp in December 2025 [1] and should work well with
the latest version of Rcpp. The macOS Builder seems to be behind on
some package updates right now.

-- 
Best regards,
Ivan

[1] https://github.com/RcppCore/Rcpp/pull/1418


From k@||eng|u @end|ng |rom gm@||@com  Fri Feb  6 17:58:42 2026
From: k@||eng|u @end|ng |rom gm@||@com (Kaifeng Lu)
Date: Fri, 6 Feb 2026 11:58:42 -0500
Subject: [R-pkg-devel] 
 macOS build error 'R_ext/Callbacks.h' file not found
In-Reply-To: <20260206190751.09bf0c5c@arachnoid>
References: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>
 <20260206190751.09bf0c5c@arachnoid>
Message-ID: <CAAsVnmLOAeNu8ieAbD6QovbFS3aXQmAnYnK54gdsyv7egBxZ6A@mail.gmail.com>

Hi Martin and Ivan,

Thank you both for the clarification.

I have confirmed that I am using the most recent versions for my
environment: R 4.5.2, Rcpp 1.1.1, RcppParallel 5.1.11-1, and RcppThread
2.3.0. Based on our discussion, I will wait for the macOS Builder updates
to conclude before re-checking the build results.

Does anyone have an estimate on when the current CRAN macOS builder updates
are expected to complete?

Thank you again for your guidance.

Best regards,
Kaifeng


On Fri, Feb 6, 2026 at 11:07?AM Ivan Krylov <ikrylov at disroot.org> wrote:

> ? Fri, 6 Feb 2026 10:23:27 -0500
> Kaifeng Lu <kaifenglu at gmail.com> ?????:
>
> > I am currently submitting a new version of the trtswitch package to
> > CRAN and have encountered a fatal error during the macOS arm64 build
> > process: fatal error: 'R_ext/Callbacks.h' file not found
> > The full build log for this submission is available here
> > macOS build result for 1770388945-93cbe1227ad944fa
> > <
> https://mac.r-project.org/macbuilder/results/1770388945-93cbe1227ad944fa/>
>
> >> In file included from
> >> .../Rcpp/include/Rcpp.h:27: ...Rcpp/include/RcppCommon.h:75:10:
> >> fatal error: 'R_ext/Callbacks.h' file not found
>
> This was fixed in Rcpp in December 2025 [1] and should work well with
> the latest version of Rcpp. The macOS Builder seems to be behind on
> some package updates right now.
>
> --
> Best regards,
> Ivan
>
> [1] https://github.com/RcppCore/Rcpp/pull/1418
>

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Feb 10 00:36:23 2026
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 10 Feb 2026 12:36:23 +1300
Subject: [R-pkg-devel] 
 macOS build error 'R_ext/Callbacks.h' file not found
In-Reply-To: <CAAsVnmLOAeNu8ieAbD6QovbFS3aXQmAnYnK54gdsyv7egBxZ6A@mail.gmail.com>
References: <CAAsVnmLx2PpVEtKNkpc5DOEDRgvV4FFpbprHQaJ5tdJYMd0SQA@mail.gmail.com>
 <20260206190751.09bf0c5c@arachnoid>
 <CAAsVnmLOAeNu8ieAbD6QovbFS3aXQmAnYnK54gdsyv7egBxZ6A@mail.gmail.com>
Message-ID: <C0E02A3A-B6DE-45C5-A0FF-031AE1702A66@R-project.org>

Kaifeng,

there was an issue where the MacBuilder was using inadvertently big-sur CRAN binaries instead of sonoma so the packages were outdated. This has been fixed so should ok now (thanks to Ivan earlier helping to chase the issue).

Cheers,
Simon



> On Feb 7, 2026, at 05:58, Kaifeng Lu <kaifenglu at gmail.com> wrote:
> 
> Hi Martin and Ivan,
> 
> Thank you both for the clarification.
> 
> I have confirmed that I am using the most recent versions for my
> environment: R 4.5.2, Rcpp 1.1.1, RcppParallel 5.1.11-1, and RcppThread
> 2.3.0. Based on our discussion, I will wait for the macOS Builder updates
> to conclude before re-checking the build results.
> 
> Does anyone have an estimate on when the current CRAN macOS builder updates
> are expected to complete?
> 
> Thank you again for your guidance.
> 
> Best regards,
> Kaifeng
> 
> 
> On Fri, Feb 6, 2026 at 11:07?AM Ivan Krylov <ikrylov at disroot.org> wrote:
> 
>> ? Fri, 6 Feb 2026 10:23:27 -0500
>> Kaifeng Lu <kaifenglu at gmail.com> ?????:
>> 
>>> I am currently submitting a new version of the trtswitch package to
>>> CRAN and have encountered a fatal error during the macOS arm64 build
>>> process: fatal error: 'R_ext/Callbacks.h' file not found
>>> The full build log for this submission is available here
>>> macOS build result for 1770388945-93cbe1227ad944fa
>>> <
>> https://mac.r-project.org/macbuilder/results/1770388945-93cbe1227ad944fa/>
>> 
>>>> In file included from
>>>> .../Rcpp/include/Rcpp.h:27: ...Rcpp/include/RcppCommon.h:75:10:
>>>> fatal error: 'R_ext/Callbacks.h' file not found
>> 
>> This was fixed in Rcpp in December 2025 [1] and should work well with
>> the latest version of Rcpp. The macOS Builder seems to be behind on
>> some package updates right now.
>> 
>> --
>> Best regards,
>> Ivan
>> 
>> [1] https://github.com/RcppCore/Rcpp/pull/1418
>> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From n|cho|@@@t|erney @end|ng |rom gm@||@com  Wed Feb 11 00:15:39 2026
From: n|cho|@@@t|erney @end|ng |rom gm@||@com (Nicholas Tierney)
Date: Wed, 11 Feb 2026 10:15:39 +1100
Subject: [R-pkg-devel] 
 Issue "Re-building vignettes had CPU time 4.1 times elapsed time"
In-Reply-To: <20260129172652.3f0aebf7@arachnoid>
References: <CACrL82WnR_dM5QHJLHb_dRVn_xacsKEY0TLfOf1JDZ=PcDhgvg@mail.gmail.com>
 <20260129172652.3f0aebf7@arachnoid>
Message-ID: <CACrL82X87PrjuatgvDbEF34p2s31eM52qhoLFpC6NfkKePVb2w@mail.gmail.com>

Hi Ivan,

Thank you for investigating this so thoroughly! My apologies for not
replying sooner.

I think it is a good practice to assume up to 2 cores for most users.
Unfortunately I am unable to trigger this NOTE locally, even running:

```
_R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=1.1 \
 R CMD check --timings greta_0.5.1.tar.gz
```

I have tried setting default chains and cpu to be 2, but it seems, based on
your evidence perhaps that there is something inside tensorflow, or in
reticulate that might be triggering this. I will reach out to the
developers of tensorflow and reticulate to query this.

Thank you so much again for your help!

Nick


On Fri, 30 Jan 2026 at 01:26, Ivan Krylov <ikrylov at disroot.org> wrote:

> ? Thu, 29 Jan 2026 11:36:00 +1100
> Nicholas Tierney <nicholas.tierney at gmail.com> ?????:
>
> > I also note that I cannot reproduce the same error with:
> >
> > ```
> > rcmdcheck::rcmdcheck(args = c("--no-manual", "--as-cran",
> > "--no-multiarch"), env =
> > "_R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_ = 53")
> > ```
>
> This threshold is very large. It makes more sense to lower it, not
> raise, in order to make the test more sensitive. On a machine with 16
> hyper-threads,
>
> _R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=1.1 \
>  R CMD check --timings greta_0.5.1.tar.gz
>
> ...reproduces the NOTE. (The more CPUs on your machine, the more the
> chance that something trying to use all of them will cause a noticeable
> spike in CPU time. The machines running CRAN checks have even more
> logical CPUs.) In particular,
>
> list.files("vignettes", full.names=TRUE, patt = '[.]Rmd$') |>
>  setNames(nm = _) |> lapply(\(.)
>   tools::buildVignette(., encoding='UTF-8') |> system.time()
>  )
>
> shows that it's the get_started.Rmd vignette (62.765 s userspace CPU
> time vs. 27.745 s elapsed time).
>
> What exactly starts these threads? 'pthread_create' is not the complete
> answer, but it usually points out some suspects.
>
> ltrace -w 10 -f -e pthread_create -- \
>  env R_LIBS_USER=greta.Rcheck:%U \
>  R -f greta.Rcheck/greta/doc/get_started.R
>
> ...There are a lot of suspects.
>
> Here is a copy of OpenBLAS bundled with a Python wheel that 'greta'
> installs starting 16 threads when greta:::check_tf_version is called:
>
> > knitr::opts_chunk$set(echo = TRUE,
> +                       eval = greta:::check_tf_version("message"),
> +                       purl = greta:::check_tf_version("message"),
> +                       cache = TRUE,
> +                       comment = NA,
> +                       progress = FALSE)
> ...
> [pid 25013]
> libopenblas64_p-r0-0cf96a72.3.23.dev.so->pthread_create(0x7f36ed7ccd80, 0,
> 0x7f36ebb50660, 0) = 0
>                         blas_thread_init.part.0 (ip = 0x7f36ebb50a2a)
>                         blas_thread_init (ip = 0x7f36ebb50ba9)
>                         gotoblas_init (ip = 0x7f36eb91807f)
>                         __nptl_change_stack_perm (ip = 0x7f36ef0959ce)
>                         __nptl_change_stack_perm (ip = 0x7f36ef095ab4)
>                         _dl_catch_exception (ip = 0x7f36eeed9274)
>                         _dl_rtld_di_serinfo (ip = 0x7f36ef09c21e)
>                         _dl_catch_exception (ip = 0x7f36eeed921a)
>                         _dl_find_dso_for_object (ip = 0x7f36ef09c5b8)
>                         dlmopen (ip = 0x7f36eee0f4b8)
>
> By the time the following code block runs and tries to set
> OMP_THREAD_LIMIT=2, it's too late. (It's usually too late to set
> OpenMP-related variables inside an R script, because the OpenMP runtime
> reads them once at process startup, before any R code can run.)
>
> It might help to set OPENBLAS_NUM_THREADS=2 first, then implicitly load
> greta by calling greta:::check_tf_version(...). Though judging by later
> results, it's probably a red herring.
>
> Here's node.js creating 16 worker threads through the 'V8' package:
>
> > DiagrammeR::export_graph(attr(gr, "dgr_graph"),
> +                          file_name = "figures/full_graph.png",
> +                          file_type = "png",
> +                          width = 958 * 2,
> +                          height = 450 * 2)
> [pid 24967] libnode.so.108->pthread_create(0x555bfee583c0, 0x7ffde39e7c50,
> 0x7fc7a9f49280, 0x555bfee582f0) = 0
>                         _ZN2v84base6Thread5StartEv (ip = 0x7fc7a9f4a424)
>
> _ZN2v88platform30DefaultWorkerThreadsTaskRunner12WorkerThreadC1EPS1_ (ip =
> 0x7fc7a95fab76)
>
> _ZN2v88platform30DefaultWorkerThreadsTaskRunnerC2EjPFdvE (ip =
> 0x7fc7a95fadbc)
>
> _ZN2v88platform15DefaultPlatform37EnsureBackgroundTaskRunnerInitializedEv
> (ip = 0x7fc7a95f861e)
>
> _ZN2v88platform18NewDefaultPlatformEiNS0_15IdleTaskSupportENS0_21InProcessStackDumpingESt10unique_p
> (ip = 0x7fc7a95f8849)
>                         R_init_V8 (ip = 0x7fc7b001d609)
>                         AddDLL (ip = 0x555baec0a5f1)
>                         do_dynload (ip = 0x555baec0d0d1)
>                         bcEval_loop (ip = 0x555baecd7100)
>                         bcEval (ip = 0x555baece5477)
>
> Here's librsvg -> pango creating worker threads:
>
> > DiagrammeR::export_graph(attr(gr, "dgr_graph"),
> +                          file_name = "figures/coef_graph.png",
> +                          file_type = "png",
> +                          width = 325 * 2,
> +                          height = 123 * 2)
> [pid 24967] libglib-2.0.so.0->pthread_create(0x555bff3ad6d0,
> 0x7ffde39e6c60, 0x7fc7a0003650, 0x555bff3ad6a0) = 0
>                         g_mutex_init (ip = 0x7fc7a0003fb5)
>                         g_thread_new (ip = 0x7fc79ffd9fa8)
>                         pango_fc_font_map_get_config (ip = 0x7fc79fae816f)
>                         pango_glyph_string_x_to_index (ip = 0x7fc7a00b5803)
>                         pango_layout_line_get_extents (ip = 0x7fc7a00c583e)
>                         pango_layout_index_to_line_x (ip = 0x7fc7a00c7efe)
>                         pango_layout_get_size (ip = 0x7fc7a00c8126)
>                         rsvg_pixbuf_from_file_at_max_size (ip =
> 0x7fc7a074e6d2)
>                         rsvg_pixbuf_from_file_at_max_size (ip =
> 0x7fc7a06661c6)
>                         rsvg_error_get_type (ip = 0x7fc7a05f869e)
>
> Do they consume a lot of CPU? Probably not.
>
> Here's Tensorflow creating 16 worker threads:
>
> > draws <- mcmc(m, n_samples = 1000)
> [pid 24967] libtensorflow_framework.so.2->pthread_create(0x555bff178668,
> 0x7ffde39e8ed8, 0x7fc7eb867150, 0x555bfea36d30) = 0
>
> _ZN3tsl12_GLOBAL__N_18PosixEnv11StartThreadERKNS_13ThreadOptionsERKNSt7__cxx1112basic_stringIcSt11c
> (ip = 0x7fc7eb866567)
>
> _ZN3tsl6thread16EigenEnvironment12CreateThreadESt8functionIFvvEE (ip =
> 0x7fc7eacd0a39)
>
> _ZN5Eigen15ThreadPoolTemplIN3tsl6thread16EigenEnvironmentEEC2EibS3_ (ip =
> 0x7fc7eaccefaa)
>
> _ZN3tsl6thread10ThreadPoolC2EPNS_3EnvERKNS_13ThreadOptionsERKNSt7__cxx1112basic_stringIcSt11char_tr
> (ip = 0x7fc7eacce92c)
>
> _ZN10tensorflow11LocalDevice19EigenThreadPoolInfoC2ERKNS_14SessionOptionsEiPN3tsl9AllocatorE
> (ip = 0x7fc7ebcbacfc)
>
> _ZN10tensorflow11LocalDeviceC2ERKNS_14SessionOptionsERKNS_16DeviceAttributesE
> (ip = 0x7fc7ebcba857)
>
> _ZN10tensorflow16ThreadPoolDeviceC1ERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt11char_tra
> (ip = 0x7fc7ebc1fc36)
>
> _ZN10tensorflow29GPUCompatibleCPUDeviceFactory13CreateDevicesERKNS_14SessionOptionsERKNSt7__cxx1112
> (ip = 0x7fc7ebd30b64)
>
> _ZN10tensorflow13DeviceFactory13AddCpuDevicesERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt
> (ip = 0x7fc7eb60eabc)
>
> _ZN10tensorflow13DeviceFactory10AddDevicesERKNS_14SessionOptionsERKNSt7__cxx1112basic_stringIcSt11c
> (ip = 0x7fc7eb60eb92)
>
> It _says_ it runs on "up to 2 CPU cores", but empirically it consumes
> up to ~400% CPU (4 out of 16 logical CPUs on this computer) while
> mcmc(...) is running. Judging by the profiling data, most of the CPU
> usage is due to tensorflow/Eigen running multiple threads during the
> call to mcmc(), possibly due to the default argument chains = 4?
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de  Wed Feb 11 08:39:04 2026
From: Joh@nne@@Hue@|ng @end|ng |rom kreb@reg|@ter@nrw@de (=?utf-8?B?SMO8c2luZywgSm9oYW5uZXM=?=)
Date: Wed, 11 Feb 2026 07:39:04 +0000
Subject: [R-pkg-devel] error message when trying to knit a vignette
 involving data import
Message-ID: <3ab06a6067874314a1d24e72b9eca482@krebsregister.nrw.de>

I am trying to puild a package including a vignette. The focus of this package is the generation of linkage tables connecting cancer diagnoses.
The following code is processed into a HTML document when invoked with rmarkdown::render(), but fails to be processed with devtools::build_vignettes():

---
title: "staduicc"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{staduicc}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
# headline

```{r setup}
library(staduicc)
spieldatenpfad <- system.file("./inst/extdata/spieldaten.rda", package = "staduicc")
message(spieldatenpfad)
load(spieldatenpfad)
```
<end of Rmd code>

The message which comes with running the code is as follows:

? Installing staduicc in temporary library
? Building vignettes for staduicc
--- re-building 'staduicc.Rmd' using rmarkdown


processing file: staduicc.Rmd
1/5
2/5 [unnamed-chunk-1]
3/5
4/5 [setup]

Quitting from staduicc.Rmd:19-24 [setup]
Error: processing vignette 'staduicc.Rmd' failed with diagnostics:
cannot open the connection
--- failed re-building 'staduicc.Rmd'

SUMMARY: processing the following file failed:
  'staduicc.Rmd'

Error:
! in callr subprocess.
Caused by error:
! Vignette re-building failed.
? See `$stdout` and `$stderr` for standard output and error.
Type .Last.error to see the more details.
<end of error messages>

I am suspecting it may have something to do which how system.path() is processed. But I?ll gladly take any hint that is more specific than my musings.


Dr. Johannes H?sing
Epidemiologie

Landeskrebsregister NRW gGmbH
Gesundheitscampus 10
44801 Bochum

T 0234 54509-216
F 0234 54509-499
Johannes.Huesing at krebsregister.nrw.de<mailto:Johannes.Huesing at krebsregister.nrw.de>
www.landeskrebsregister.nrw<http://www.landeskrebsregister.nrw>

Das Landeskrebsregister NRW online
FACEBOOK: https://www.facebook.com/LKRNordrheinWestfalen/
INSTAGRAM: https://www.instagram.com/landeskrebsregister_nrw
LINKEDIN: https://www.linkedin.com/company/87452209/admin/feed/posts/

Newsletter LKR NRW - jetzt anmelden unter
 https://www.landeskrebsregister.nrw/aktuelles/newsletter


Gesch?ftsf?hrer
Dr. Andres Sch?tzend?bel
Vorsitzender der Gesellschafterversammlung
Staatssekret?r Matthias Heidmeier
Sitz der Gesellschaft
Bochum
Registergericht
Amtsgericht Bochum
HRB 17715

HINWEIS: Diese Nachricht ist nur f?r den Adressaten bestimmt. Es ist nicht erlaubt, diese Nachricht zu kopieren oder Dritten zug?nglich zu machen. Sollten Sie irrt?mlich diese Nachricht erhalten haben, bitte ich um Ihre Mitteilung per E-Mail oder unter der oben angegebenen Telefonnummer.

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Wed Feb 11 09:58:56 2026
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 11 Feb 2026 09:58:56 +0100
Subject: [R-pkg-devel] error message when trying to knit a vignette
 involving data import
In-Reply-To: <3ab06a6067874314a1d24e72b9eca482@krebsregister.nrw.de>
References: <3ab06a6067874314a1d24e72b9eca482@krebsregister.nrw.de>
Message-ID: <0b8539c3-c9c9-4c19-9c15-c0bb61f6b5e4@fau.de>

Am 11.02.26 um 08:39 schrieb H?sing, Johannes via R-package-devel:
> spieldatenpfad <- system.file("./inst/extdata/spieldaten.rda", package = "staduicc")
system.file() finds files in an _installed_ package, which is what you 
want to access in a vignette. However, './inst/' only exists in your 
source package. At installation, the _contents_ of that subdirectory are 
copied recursively to the installation directory, so that will have 
'./extdata' at the root. I recommend installing the package and checking 
out its installation directory to see for yourself:

     (instdir <- find.package("staduicc"))
     browseURL(instdir)

(Browsing the directory should work via 'xdg-open' on Linux; I'm not 
sure about Windows, but you will know the path.)

	Sebastian Meyer


From jo@|@h@p@rry @end|ng |rom gm@||@com  Wed Feb 11 19:17:31 2026
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Wed, 11 Feb 2026 10:17:31 -0800
Subject: [R-pkg-devel] False Error in CRAN checks
Message-ID: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>

My package arcgisutils has an "ERROR Installation failed" recorded for arm64 macOS (1)

However, if you go to the log (2) it shows ?Status: OK? and the installation log (3) also shows a clean install.

This is affecting my downstream packages arcgisgeocode (4),  arcgislayers (5), and arcpbf (6), which are showing Status OK and clean installs as well.

Is this a ?blip? in the check system? Or am I missing something and am at risk of archival? 

Thanks all! 



1) https://cran.r-project.org/web/checks/check_results_arcgisutils.html
2) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00check.html
3) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00install.html
4) https://cran.r-project.org/web/checks/check_results_arcgisgeocode.html
5) https://cran.r-project.org/web/checks/check_results_arcgislayers.html
6) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcpbf-00check.html
	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Wed Feb 11 20:10:54 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 11 Feb 2026 22:10:54 +0300
Subject: [R-pkg-devel] False Error in CRAN checks
In-Reply-To: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
References: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
Message-ID: <20260211221054.73754f74@Tarkus>

? Wed, 11 Feb 2026 10:17:31 -0800
Josiah Parry <josiah.parry at gmail.com> ?????:

> Is this a ?blip? in the check system? Or am I missing something and
> am at risk of archival? 

Something's not right with r-devel-macos-arm64. For many packages,
<https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/PACKAGE-00check.html>
points to outdated results (sometimes a previous version of the
package) or a 404 error, and there's no corresponding binary for
R-devel/Sonoma. Examples include 'bapred', 'aroma.affymetrix', 'b32',
'RPostgreSQL' (approximately 197 packages in total). Try asking Simon
Urbanek about this problem.

At least there's no deadline set right now:

tools::CRAN_package_db() |>
subset(grepl('^arcgis|^arcpbf$', Package)) |>
_$Deadline |> is.na() |> all()
# [1] TRUE


-- 
Best regards,
Ivan


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Feb 11 21:45:16 2026
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 12 Feb 2026 09:45:16 +1300
Subject: [R-pkg-devel] False Error in CRAN checks
In-Reply-To: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
References: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
Message-ID: <49A2FF8C-CDCE-47CE-912F-3B37A71F7FA2@R-project.org>

Josiah,

we just enabled the r-devel logs and the websites are not entirely correct yet, because the logs on the website show from the old big-sur build instead of the new sonoma build - which is where the result status is from.

That said, In your particular case it failed in the sonoma build yesterday since it was a manual catch-up run and didn't have the rust compiler (hence the short test time - I have noticed and fixed it at the time), but the subsequent regular run succeeded. Give it another day or so before it all settles.

Cheers,
Simon


> On 12/02/2026, at 07:17, Josiah Parry <josiah.parry at gmail.com> wrote:
> 
> My package arcgisutils has an "ERROR Installation failed" recorded for arm64 macOS (1)
> 
> However, if you go to the log (2) it shows ?Status: OK? and the installation log (3) also shows a clean install.
> 
> This is affecting my downstream packages arcgisgeocode (4),  arcgislayers (5), and arcpbf (6), which are showing Status OK and clean installs as well.
> 
> Is this a ?blip? in the check system? Or am I missing something and am at risk of archival? 
> 
> Thanks all! 
> 
> 
> 
> 1) https://cran.r-project.org/web/checks/check_results_arcgisutils.html
> 2) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00check.html
> 3) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00install.html
> 4) https://cran.r-project.org/web/checks/check_results_arcgisgeocode.html
> 5) https://cran.r-project.org/web/checks/check_results_arcgislayers.html
> 6) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcpbf-00check.html
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jo@|@h@p@rry @end|ng |rom gm@||@com  Wed Feb 11 21:45:57 2026
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Wed, 11 Feb 2026 12:45:57 -0800
Subject: [R-pkg-devel] False Error in CRAN checks
In-Reply-To: <49A2FF8C-CDCE-47CE-912F-3B37A71F7FA2@R-project.org>
References: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
 <49A2FF8C-CDCE-47CE-912F-3B37A71F7FA2@R-project.org>
Message-ID: <70CFE13F-3D30-4758-907F-76ACE96ED357@gmail.com>

Thank you so much for the update, Simon! Brilliant <3

> On Feb 11, 2026, at 12:45, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Josiah,
> 
> we just enabled the r-devel logs and the websites are not entirely correct yet, because the logs on the website show from the old big-sur build instead of the new sonoma build - which is where the result status is from.
> 
> That said, In your particular case it failed in the sonoma build yesterday since it was a manual catch-up run and didn't have the rust compiler (hence the short test time - I have noticed and fixed it at the time), but the subsequent regular run succeeded. Give it another day or so before it all settles.
> 
> Cheers,
> Simon
> 
> 
>> On 12/02/2026, at 07:17, Josiah Parry <josiah.parry at gmail.com> wrote:
>> 
>> My package arcgisutils has an "ERROR Installation failed" recorded for arm64 macOS (1)
>> 
>> However, if you go to the log (2) it shows ?Status: OK? and the installation log (3) also shows a clean install.
>> 
>> This is affecting my downstream packages arcgisgeocode (4),  arcgislayers (5), and arcpbf (6), which are showing Status OK and clean installs as well.
>> 
>> Is this a ?blip? in the check system? Or am I missing something and am at risk of archival? 
>> 
>> Thanks all! 
>> 
>> 
>> 
>> 1) https://cran.r-project.org/web/checks/check_results_arcgisutils.html
>> 2) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00check.html
>> 3) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00install.html
>> 4) https://cran.r-project.org/web/checks/check_results_arcgisgeocode.html
>> 5) https://cran.r-project.org/web/checks/check_results_arcgislayers.html
>> 6) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcpbf-00check.html
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 


From |kry|ov @end|ng |rom d|@root@org  Wed Feb 11 23:06:27 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 12 Feb 2026 01:06:27 +0300
Subject: [R-pkg-devel] 
 Issue "Re-building vignettes had CPU time 4.1 times elapsed time"
In-Reply-To: <CACrL82X87PrjuatgvDbEF34p2s31eM52qhoLFpC6NfkKePVb2w@mail.gmail.com>
References: <CACrL82WnR_dM5QHJLHb_dRVn_xacsKEY0TLfOf1JDZ=PcDhgvg@mail.gmail.com>
 <20260129172652.3f0aebf7@arachnoid>
 <CACrL82X87PrjuatgvDbEF34p2s31eM52qhoLFpC6NfkKePVb2w@mail.gmail.com>
Message-ID: <20260212010628.32fb01dd@Tarkus>

? Wed, 11 Feb 2026 10:15:39 +1100
Nicholas Tierney <nicholas.tierney at gmail.com> ?????:

> Unfortunately I am unable to trigger this NOTE locally, even running:
> 
> ```
> _R_CHECK_VIGNETTE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=1.1 \
>  R CMD check --timings greta_0.5.1.tar.gz
> ```

What's your operating system? How many logical processors does it have?
Could it be offloading Tensorflow operations to a GPU? This check
doesn't work on Windows, but should be very sensitive otherwise.

> I have tried setting default chains and cpu to be 2, but it seems,
> based on your evidence perhaps that there is something inside
> tensorflow, or in reticulate that might be triggering this.

Sorry, my mistake. Setting the number of chains to 2 instead of 4
seemed to lower the average CPU load closer to 2 on my computer, but
the instantaneous CPU load still spikes to around 400%. This is
definitely happening in the threads created by Tensorflow, see the
attached plot of approximate CPU load versus DLL name and process
runtime.

-- 
Best regards,
Ivan

-------------- next part --------------
A non-text attachment was scrubbed...
Name: perf_task_cycles.png
Type: image/png
Size: 146050 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20260212/20e5aac1/attachment.png>

From Kurt@Horn|k @end|ng |rom wu@@c@@t  Thu Feb 12 09:01:48 2026
From: Kurt@Horn|k @end|ng |rom wu@@c@@t (Kurt Hornik)
Date: Thu, 12 Feb 2026 09:01:48 +0100
Subject: [R-pkg-devel] False Error in CRAN checks
In-Reply-To: <49A2FF8C-CDCE-47CE-912F-3B37A71F7FA2@R-project.org>
References: <780D5159-81FC-47C1-B520-56D45CF91A2B@gmail.com>
 <49A2FF8C-CDCE-47CE-912F-3B37A71F7FA2@R-project.org>
Message-ID: <27021.35052.329433.319406@hornik.net>

>>>>> Simon Urbanek writes:

Sorry, my fault, I had added x86_64 where I should have added arm64 ...

That's what happens when doing these things along with running a
department etc.

Fixed now.

-k

> Josiah,
> we just enabled the r-devel logs and the websites are not entirely correct yet, because the logs on the website show from the old big-sur build instead of the new sonoma build - which is where the result status is from.

> That said, In your particular case it failed in the sonoma build yesterday since it was a manual catch-up run and didn't have the rust compiler (hence the short test time - I have noticed and fixed it at the time), but the subsequent regular run succeeded. Give it another day or so before it all settles.

> Cheers,
> Simon


>> On 12/02/2026, at 07:17, Josiah Parry <josiah.parry at gmail.com> wrote:
>> 
>> My package arcgisutils has an "ERROR Installation failed" recorded for arm64 macOS (1)
>> 
>> However, if you go to the log (2) it shows ?Status: OK? and the installation log (3) also shows a clean install.
>> 
>> This is affecting my downstream packages arcgisgeocode (4),  arcgislayers (5), and arcpbf (6), which are showing Status OK and clean installs as well.
>> 
>> Is this a ?blip? in the check system? Or am I missing something and am at risk of archival? 
>> 
>> Thanks all! 
>> 
>> 
>> 
>> 1) https://cran.r-project.org/web/checks/check_results_arcgisutils.html
>> 2) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00check.html
>> 3) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcgisutils-00install.html
>> 4) https://cran.r-project.org/web/checks/check_results_arcgisgeocode.html
>> 5) https://cran.r-project.org/web/checks/check_results_arcgislayers.html
>> 6) https://www.r-project.org/nosvn/R.check/r-devel-macos-arm64/arcpbf-00check.html
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 


From bj@rke@h@utop @end|ng |rom gm@||@com  Thu Feb 12 15:52:27 2026
From: bj@rke@h@utop @end|ng |rom gm@||@com (Bjarke Hautop)
Date: Thu, 12 Feb 2026 15:52:27 +0100
Subject: [R-pkg-devel] R CMD check false positive unused imports inside R6
 class
Message-ID: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>

Hi all,

R CMD check gives a false positive locally when the only usage of an
imported package is through pkg::foo() inside an R6 class. This GitHub repo
contains a full MWE, with log files and a more elaborate explanation:
https://github.com/BjarkeHautop/RCMDcheckFalsePositive

The R package contains a single .R file with this (I'm aware you don't have
to import base packages explicitly, but this is an MWE with only base
packages (except R6)):

filter <- function() {
  message("This is a custom filter function.")
}

DataProcessor <- R6::R6Class(
  "DataProcessor",
  public = list(
    data = NULL,
    initialize = function(data) self$data <- data,

    filter_data = function(data) {
      filter()
      self$data <- stats::filter(self$data, rep(1, 3))
    }
  )
)

When running R CMD check, it will generate the following NOTE:

* checking dependencies in R code ... NOTE
Namespaces in Imports field not imported from:
  ?R6? ?stats?

Interestingly, the NOTE disappears on CRAN release/dev winbuilder.

My questions are:

1. Is this the intended behavior of R CMD check, or is it a bug that it
fails to detect usage of packages inside
R6 classes? If intended (e.g., due to it being too expensive to check for
:: in "hidden places") should this be
mentioned somewhere on WRE? Currently
[WRE](
https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-Dependencies-1)
says:
*"The ?Imports? field should not contain packages which are not imported
from (via the NAMESPACE file or :: or ::: operators)"*
indicating that `::` usage should be fully supported.

2. How/Why does the NOTE disappear when checking on CRAN dev winbuilder?
Can I replicate this behavior locally using R CMD check? Will it pass on
CRAN?

Best regards,
Bjarke

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Feb 12 23:32:47 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 12 Feb 2026 16:32:47 -0600
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
Message-ID: <27022.21775.426830.878236@paul.eddelbuettel.com>


On 12 February 2026 at 15:52, Bjarke Hautop wrote:
| Hi all,
| 
| R CMD check gives a false positive locally when the only usage of an
| imported package is through pkg::foo() inside an R6 class. This GitHub repo
| contains a full MWE, with log files and a more elaborate explanation:
| https://github.com/BjarkeHautop/RCMDcheckFalsePositive
| 
| The R package contains a single .R file with this (I'm aware you don't have
| to import base packages explicitly, but this is an MWE with only base
| packages (except R6)):
| 
| filter <- function() {
|   message("This is a custom filter function.")
| }
| 
| DataProcessor <- R6::R6Class(
|   "DataProcessor",
|   public = list(
|     data = NULL,
|     initialize = function(data) self$data <- data,
| 
|     filter_data = function(data) {
|       filter()
|       self$data <- stats::filter(self$data, rep(1, 3))
|     }
|   )
| )
| 
| When running R CMD check, it will generate the following NOTE:
| 
| * checking dependencies in R code ... NOTE
| Namespaces in Imports field not imported from:
|   ?R6? ?stats?

Thanks for posting a full and complete example!  From a quick glance your
problem may be that while you DO have the the packages in DESCRIPTION you
DO NOT import them in NAMESPACE.  The error message could arguably be more
explicit but that seems to be the case here.

Hope this helps, Dirk
 
| Interestingly, the NOTE disappears on CRAN release/dev winbuilder.
| 
| My questions are:
| 
| 1. Is this the intended behavior of R CMD check, or is it a bug that it
| fails to detect usage of packages inside
| R6 classes? If intended (e.g., due to it being too expensive to check for
| :: in "hidden places") should this be
| mentioned somewhere on WRE? Currently
| [WRE](
| https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-Dependencies-1)
| says:
| *"The ?Imports? field should not contain packages which are not imported
| from (via the NAMESPACE file or :: or ::: operators)"*
| indicating that `::` usage should be fully supported.
| 
| 2. How/Why does the NOTE disappear when checking on CRAN dev winbuilder?
| Can I replicate this behavior locally using R CMD check? Will it pass on
| CRAN?
| 
| Best regards,
| Bjarke
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Feb 12 23:53:08 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 12 Feb 2026 14:53:08 -0800
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <27022.21775.426830.878236@paul.eddelbuettel.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
 <27022.21775.426830.878236@paul.eddelbuettel.com>
Message-ID: <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>

R6 is a _build-time_ dependency for your package. It may be possible for a
user without R6 installed to run your package without issue from the built
tarball. R today doesn't really have a concept of a build-time dependency
in the DESCRIPTION

'stats' is more of a false positive -- {codetools} simply doesn't know how
to check the R6 object DataProcessor (which it sees as an environment and
doesn't walk completely). It could find 'stats::' if it looked at

body(getNamespace(<pkg>)$DataProcessor$public_methods$filter_data)[[3]][[3]][[1]]

Anyway, Dirk's advice is correct: you can just add the entries to your
NAMESPACE:

importFrom(R6, R6class)
importFrom(stats, filter)

Once that's done, you can choose whether to continue namespace-qualifying
the calls inside the sources.

You could also explore if just putting the packages in Suggests, not
Imports, works.

Mike C

On Thu, Feb 12, 2026 at 2:33?PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 12 February 2026 at 15:52, Bjarke Hautop wrote:
> | Hi all,
> |
> | R CMD check gives a false positive locally when the only usage of an
> | imported package is through pkg::foo() inside an R6 class. This GitHub
> repo
> | contains a full MWE, with log files and a more elaborate explanation:
> | https://github.com/BjarkeHautop/RCMDcheckFalsePositive
> |
> | The R package contains a single .R file with this (I'm aware you don't
> have
> | to import base packages explicitly, but this is an MWE with only base
> | packages (except R6)):
> |
> | filter <- function() {
> |   message("This is a custom filter function.")
> | }
> |
> | DataProcessor <- R6::R6Class(
> |   "DataProcessor",
> |   public = list(
> |     data = NULL,
> |     initialize = function(data) self$data <- data,
> |
> |     filter_data = function(data) {
> |       filter()
> |       self$data <- stats::filter(self$data, rep(1, 3))
> |     }
> |   )
> | )
> |
> | When running R CMD check, it will generate the following NOTE:
> |
> | * checking dependencies in R code ... NOTE
> | Namespaces in Imports field not imported from:
> |   ?R6? ?stats?
>
> Thanks for posting a full and complete example!  From a quick glance your
> problem may be that while you DO have the the packages in DESCRIPTION you
> DO NOT import them in NAMESPACE.  The error message could arguably be more
> explicit but that seems to be the case here.
>
> Hope this helps, Dirk
>
> | Interestingly, the NOTE disappears on CRAN release/dev winbuilder.
> |
> | My questions are:
> |
> | 1. Is this the intended behavior of R CMD check, or is it a bug that it
> | fails to detect usage of packages inside
> | R6 classes? If intended (e.g., due to it being too expensive to check for
> | :: in "hidden places") should this be
> | mentioned somewhere on WRE? Currently
> | [WRE](
> |
> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-Dependencies-1
> )
> | says:
> | *"The ?Imports? field should not contain packages which are not imported
> | from (via the NAMESPACE file or :: or ::: operators)"*
> | indicating that `::` usage should be fully supported.
> |
> | 2. How/Why does the NOTE disappear when checking on CRAN dev winbuilder?
> | Can I replicate this behavior locally using R CMD check? Will it pass on
> | CRAN?
> |
> | Best regards,
> | Bjarke
> |
> |       [[alternative HTML version deleted]]
> |
> | ______________________________________________
> | R-package-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Feb 12 23:57:59 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 12 Feb 2026 14:57:59 -0800
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
 <27022.21775.426830.878236@paul.eddelbuettel.com>
 <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>
Message-ID: <CAPRVBcxxY69vA6Z1da6vhQ=2Y2Vt4hU2_WUbLenTB0LcQT_C7w@mail.gmail.com>

> Interestingly, the NOTE disappears on CRAN release/dev winbuilder.

I suspect that's due to a difference of running the check on the built
package vs. on the package sources:

tools:::.check_packages_used(dir = ".") # nothing
tools:::.check_packages_used(package = <pkg>)
# Namespaces in Imports field not imported from:
#   ?R6? ?stats?
#   All declared Imports should be used.

Mike C

On Thu, Feb 12, 2026 at 2:53?PM Michael Chirico <michaelchirico4 at gmail.com>
wrote:

> R6 is a _build-time_ dependency for your package. It may be possible for a
> user without R6 installed to run your package without issue from the built
> tarball. R today doesn't really have a concept of a build-time dependency
> in the DESCRIPTION
>
> 'stats' is more of a false positive -- {codetools} simply doesn't know how
> to check the R6 object DataProcessor (which it sees as an environment and
> doesn't walk completely). It could find 'stats::' if it looked at
>
>
> body(getNamespace(<pkg>)$DataProcessor$public_methods$filter_data)[[3]][[3]][[1]]
>
> Anyway, Dirk's advice is correct: you can just add the entries to your
> NAMESPACE:
>
> importFrom(R6, R6class)
> importFrom(stats, filter)
>
> Once that's done, you can choose whether to continue namespace-qualifying
> the calls inside the sources.
>
> You could also explore if just putting the packages in Suggests, not
> Imports, works.
>
> Mike C
>
> On Thu, Feb 12, 2026 at 2:33?PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 12 February 2026 at 15:52, Bjarke Hautop wrote:
>> | Hi all,
>> |
>> | R CMD check gives a false positive locally when the only usage of an
>> | imported package is through pkg::foo() inside an R6 class. This GitHub
>> repo
>> | contains a full MWE, with log files and a more elaborate explanation:
>> | https://github.com/BjarkeHautop/RCMDcheckFalsePositive
>> |
>> | The R package contains a single .R file with this (I'm aware you don't
>> have
>> | to import base packages explicitly, but this is an MWE with only base
>> | packages (except R6)):
>> |
>> | filter <- function() {
>> |   message("This is a custom filter function.")
>> | }
>> |
>> | DataProcessor <- R6::R6Class(
>> |   "DataProcessor",
>> |   public = list(
>> |     data = NULL,
>> |     initialize = function(data) self$data <- data,
>> |
>> |     filter_data = function(data) {
>> |       filter()
>> |       self$data <- stats::filter(self$data, rep(1, 3))
>> |     }
>> |   )
>> | )
>> |
>> | When running R CMD check, it will generate the following NOTE:
>> |
>> | * checking dependencies in R code ... NOTE
>> | Namespaces in Imports field not imported from:
>> |   ?R6? ?stats?
>>
>> Thanks for posting a full and complete example!  From a quick glance your
>> problem may be that while you DO have the the packages in DESCRIPTION you
>> DO NOT import them in NAMESPACE.  The error message could arguably be more
>> explicit but that seems to be the case here.
>>
>> Hope this helps, Dirk
>>
>> | Interestingly, the NOTE disappears on CRAN release/dev winbuilder.
>> |
>> | My questions are:
>> |
>> | 1. Is this the intended behavior of R CMD check, or is it a bug that it
>> | fails to detect usage of packages inside
>> | R6 classes? If intended (e.g., due to it being too expensive to check
>> for
>> | :: in "hidden places") should this be
>> | mentioned somewhere on WRE? Currently
>> | [WRE](
>> |
>> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-Dependencies-1
>> )
>> | says:
>> | *"The ?Imports? field should not contain packages which are not imported
>> | from (via the NAMESPACE file or :: or ::: operators)"*
>> | indicating that `::` usage should be fully supported.
>> |
>> | 2. How/Why does the NOTE disappear when checking on CRAN dev winbuilder?
>> | Can I replicate this behavior locally using R CMD check? Will it pass on
>> | CRAN?
>> |
>> | Best regards,
>> | Bjarke
>> |
>> |       [[alternative HTML version deleted]]
>> |
>> | ______________________________________________
>> | R-package-devel at r-project.org mailing list
>> | https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Fri Feb 13 08:44:58 2026
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 12 Feb 2026 23:44:58 -0800
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <CAMjMs8dQ5jpnTXqDduRMcDAT-f25cdfbg9rY=o3NA4hFveLSmA@mail.gmail.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
 <27022.21775.426830.878236@paul.eddelbuettel.com>
 <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>
 <CAMjMs8dQ5jpnTXqDduRMcDAT-f25cdfbg9rY=o3NA4hFveLSmA@mail.gmail.com>
Message-ID: <CAPRVBcxOpCTnG7+_8sCKc_6sgO1+5BR-eSfWB2KfNUTK+4a=Ww@mail.gmail.com>

I reckon it was just written before R6 and could go for a patch:
https://gitlab.com/luke-tierney/codetools

Point taken about masking. Working from memory (CMIIW) you can just import
and name from stats to satisfy the static analysis:

importFrom(stats, setNames)

R doesn't do two-way "include what you use" checks to insure the names you
import are actually used.

Mike C

On Thu, Feb 12, 2026, 11:33?PM Bjarke Hautop <bjarke.hautop at gmail.com>
wrote:

> Sorry, clicked send too soon!
>
> > It could find 'stats::' if it looked at
>
> >
> body(getNamespace(<pkg>)$DataProcessor$public_methods$filter_data)[[3]][[3]][[1]]
>
> Is there a reason why it doesn't do this? Is it just for computational
> reasons?
>
> Best regards,
> Bjarke
>
> Den tors. 12. feb. 2026 kl. 23.53 skrev Michael Chirico <
> michaelchirico4 at gmail.com>:
>
>> R6 is a _build-time_ dependency for your package. It may be possible for
>> a user without R6 installed to run your package without issue from the
>> built tarball. R today doesn't really have a concept of a build-time
>> dependency in the DESCRIPTION
>>
>> 'stats' is more of a false positive -- {codetools} simply doesn't know
>> how to check the R6 object DataProcessor (which it sees as an environment
>> and doesn't walk completely). It could find 'stats::' if it looked at
>>
>>
>> body(getNamespace(<pkg>)$DataProcessor$public_methods$filter_data)[[3]][[3]][[1]]
>>
>> Anyway, Dirk's advice is correct: you can just add the entries to your
>> NAMESPACE:
>>
>> importFrom(R6, R6class)
>> importFrom(stats, filter)
>>
>> Once that's done, you can choose whether to continue namespace-qualifying
>> the calls inside the sources.
>>
>> You could also explore if just putting the packages in Suggests, not
>> Imports, works.
>>
>> Mike C
>>
>> On Thu, Feb 12, 2026 at 2:33?PM Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>>>
>>> On 12 February 2026 at 15:52, Bjarke Hautop wrote:
>>> | Hi all,
>>> |
>>> | R CMD check gives a false positive locally when the only usage of an
>>> | imported package is through pkg::foo() inside an R6 class. This GitHub
>>> repo
>>> | contains a full MWE, with log files and a more elaborate explanation:
>>> | https://github.com/BjarkeHautop/RCMDcheckFalsePositive
>>> |
>>> | The R package contains a single .R file with this (I'm aware you don't
>>> have
>>> | to import base packages explicitly, but this is an MWE with only base
>>> | packages (except R6)):
>>> |
>>> | filter <- function() {
>>> |   message("This is a custom filter function.")
>>> | }
>>> |
>>> | DataProcessor <- R6::R6Class(
>>> |   "DataProcessor",
>>> |   public = list(
>>> |     data = NULL,
>>> |     initialize = function(data) self$data <- data,
>>> |
>>> |     filter_data = function(data) {
>>> |       filter()
>>> |       self$data <- stats::filter(self$data, rep(1, 3))
>>> |     }
>>> |   )
>>> | )
>>> |
>>> | When running R CMD check, it will generate the following NOTE:
>>> |
>>> | * checking dependencies in R code ... NOTE
>>> | Namespaces in Imports field not imported from:
>>> |   ?R6? ?stats?
>>>
>>> Thanks for posting a full and complete example!  From a quick glance your
>>> problem may be that while you DO have the the packages in DESCRIPTION you
>>> DO NOT import them in NAMESPACE.  The error message could arguably be
>>> more
>>> explicit but that seems to be the case here.
>>>
>>> Hope this helps, Dirk
>>>
>>> | Interestingly, the NOTE disappears on CRAN release/dev winbuilder.
>>> |
>>> | My questions are:
>>> |
>>> | 1. Is this the intended behavior of R CMD check, or is it a bug that it
>>> | fails to detect usage of packages inside
>>> | R6 classes? If intended (e.g., due to it being too expensive to check
>>> for
>>> | :: in "hidden places") should this be
>>> | mentioned somewhere on WRE? Currently
>>> | [WRE](
>>> |
>>> https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-Dependencies-1
>>> )
>>> | says:
>>> | *"The ?Imports? field should not contain packages which are not
>>> imported
>>> | from (via the NAMESPACE file or :: or ::: operators)"*
>>> | indicating that `::` usage should be fully supported.
>>> |
>>> | 2. How/Why does the NOTE disappear when checking on CRAN dev
>>> winbuilder?
>>> | Can I replicate this behavior locally using R CMD check? Will it pass
>>> on
>>> | CRAN?
>>> |
>>> | Best regards,
>>> | Bjarke
>>> |
>>> |       [[alternative HTML version deleted]]
>>> |
>>> | ______________________________________________
>>> | R-package-devel at r-project.org mailing list
>>> | https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> --
>>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Feb 13 14:14:18 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 13 Feb 2026 07:14:18 -0600
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <CAPRVBcxOpCTnG7+_8sCKc_6sgO1+5BR-eSfWB2KfNUTK+4a=Ww@mail.gmail.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
 <27022.21775.426830.878236@paul.eddelbuettel.com>
 <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>
 <CAMjMs8dQ5jpnTXqDduRMcDAT-f25cdfbg9rY=o3NA4hFveLSmA@mail.gmail.com>
 <CAPRVBcxOpCTnG7+_8sCKc_6sgO1+5BR-eSfWB2KfNUTK+4a=Ww@mail.gmail.com>
Message-ID: <27023.9130.530925.732422@paul.eddelbuettel.com>


Bjarke,

I had sent you a minimal diff that silenced R CMD check after you replied to
me off-list; if it were my package I'd stop there.

But you can of course continue to insist that you should be allowed to have a
local, internal filtering function -- and "yes you can". But the common
(documented) trick is to use _an internal function_ differentiated with a
leading dot, i.e. `.filter()`.  So with the diff below I once again only have
a warning from your class being undocumented. That R6 needs to be imported
seems par for the course; Michael rightly suggested that you could patch
`codetools` if it really bugs you.

Cheers, Dirk

edd at paul:/tmp/r/RCMDcheckFalsePositive(main)$ git diff
diff --git i/NAMESPACE w/NAMESPACE
index dbd6067..817a7ee 100644
--- i/NAMESPACE
+++ w/NAMESPACE
@@ -1 +1,2 @@
 export(DataProcessor)
+import(R6)
diff --git i/R/hello.R w/R/hello.R
index a608963..85befc4 100644
--- i/R/hello.R
+++ w/R/hello.R
@@ -1,4 +1,4 @@
-filter <- function() {
+.filter <- function() {
   message("This is a custom filter function.")
 }
 
@@ -9,7 +9,7 @@ DataProcessor <- R6::R6Class(
     initialize = function(data) self$data <- data,
 
     filter_data = function(data) {
-      filter()
+      .filter()
       self$data <- stats::filter(self$data, rep(1, 3))
     }
   )
edd at paul:/tmp/r/RCMDcheckFalsePositive(main)$ 
-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom d|@root@org  Fri Feb 13 14:36:47 2026
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 13 Feb 2026 16:36:47 +0300
Subject: [R-pkg-devel] 
 R CMD check false positive unused imports inside R6 class
In-Reply-To: <CAPRVBcxxY69vA6Z1da6vhQ=2Y2Vt4hU2_WUbLenTB0LcQT_C7w@mail.gmail.com>
References: <CAMjMs8fPGWK9DqcqKM1Y2-A7ChAM1eyp6jSRGuowPFnt7J6GPw@mail.gmail.com>
 <27022.21775.426830.878236@paul.eddelbuettel.com>
 <CAPRVBcyJUM1iuJPpbHBQx-6_NbgfbErH18QvB+Cxs4oR4B7d-Q@mail.gmail.com>
 <CAPRVBcxxY69vA6Z1da6vhQ=2Y2Vt4hU2_WUbLenTB0LcQT_C7w@mail.gmail.com>
Message-ID: <20260213163647.0a182694@arachnoid>

? Thu, 12 Feb 2026 14:57:59 -0800
Michael Chirico <michaelchirico4 at gmail.com> ?????:

> I suspect that's due to a difference of running the check on the built
> package vs. on the package sources:
> 
> tools:::.check_packages_used(dir = ".") # nothing
> tools:::.check_packages_used(package = <pkg>)
> # Namespaces in Imports field not imported from:
> #   ?R6? ?stats?
> #   All declared Imports should be used.

I wonder what happens on Win-Builder during the check. According to the
code (tools/R/check.R line 2156, function check_R_code),
tools:::.check_packages_used(dir = ...) is only used if !do_install,
and 00check.log from Win-Builder doesn't seem to divulge anything that
would set do_install to FALSE. (Checking with --install=fake or
--install=check:... still sets do_install to TRUE and causes the NOTE).
The function is quite self-contained; indeed, it only walks LANGSXP
call objects, expression vectors, and pairlists made from functions.

Does tools:::.check_packages_used(package=...) really fail to notice
the "unused" imports on Win-Builder? Does something unseen really set
do_install <- FALSE? Is there a third reason?

-- 
Best regards,
Ivan


