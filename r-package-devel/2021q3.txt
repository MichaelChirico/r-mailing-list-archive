From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Jul  1 00:50:10 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 1 Jul 2021 10:50:10 +1200
Subject: [R-pkg-devel] Warning in dir.create(vd2 <- "vign_test") :
 'vign_test' already exists
In-Reply-To: <43f9e076-51bd-178a-4839-fd1d7f4c11ea@effectivedefense.org>
References: <43f9e076-51bd-178a-4839-fd1d7f4c11ea@effectivedefense.org>
Message-ID: <20210701105010.38cc7200@rolf-Latitude-E7470>


On Tue, 29 Jun 2021 14:09:34 -0500
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> Hello, All:
> 
> 
> 	  "R CMD check Ecfun_0.2-5.tar.gz" with R 4.1.0 under macOS
> 11.4 gave "Warning in dir.create(vd2 <- "vign_test") : 'vign_test'
> already exists".  It ultimately said, "Status: OK", so maybe I
> shouldn't worry about it.  It's available at:
> 
> 
> https://github.com/sbgraves237/Ecfun
> 
> 
> 	  This passed all 4 GitHub Actions, so maybe I should not
> worry about this.
> 
> 
> 	  Comments?
> 	  Thanks,
> 	  Spencer Graves

It is rather presumptuous of me to comment, but for what it's worth I
personally would not ignore such a warning.  There is (it seems to me)
always a possibility that the warning is symptomatic of a problem that
could at some stage whip around and bite you on the arse.  I would try
to find out why the directory "vign_test" (unexpectedly?) exists.  Where
does it come from? Who/what created it?

If its possible existence is "understandable" perhaps you should test
for its existence (using file.exists()?) and if it does indeed exist,
don't try to create it.

Feel free to ignore me (and I'll go away! :-) ).

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul  1 01:14:11 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 30 Jun 2021 19:14:11 -0400
Subject: [R-pkg-devel] Warning in dir.create(vd2 <- "vign_test") :
 'vign_test' already exists
In-Reply-To: <20210701105010.38cc7200@rolf-Latitude-E7470>
References: <43f9e076-51bd-178a-4839-fd1d7f4c11ea@effectivedefense.org>
 <20210701105010.38cc7200@rolf-Latitude-E7470>
Message-ID: <d441f8cd-958d-ece9-e334-c1a680dff0a1@gmail.com>

On 30/06/2021 6:50 p.m., Rolf Turner wrote:
> 
> On Tue, 29 Jun 2021 14:09:34 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>> Hello, All:
>>
>>
>> 	  "R CMD check Ecfun_0.2-5.tar.gz" with R 4.1.0 under macOS
>> 11.4 gave "Warning in dir.create(vd2 <- "vign_test") : 'vign_test'
>> already exists".  It ultimately said, "Status: OK", so maybe I
>> shouldn't worry about it.  It's available at:
>>
>>
>> https://github.com/sbgraves237/Ecfun
>>
>>
>> 	  This passed all 4 GitHub Actions, so maybe I should not
>> worry about this.
>>
>>
>> 	  Comments?
>> 	  Thanks,
>> 	  Spencer Graves
> 
> It is rather presumptuous of me to comment, but for what it's worth I
> personally would not ignore such a warning.  There is (it seems to me)
> always a possibility that the warning is symptomatic of a problem that
> could at some stage whip around and bite you on the arse.  I would try
> to find out why the directory "vign_test" (unexpectedly?) exists.  Where
> does it come from? Who/what created it?
> 
> If its possible existence is "understandable" perhaps you should test
> for its existence (using file.exists()?) and if it does indeed exist,
> don't try to create it.
> 
> Feel free to ignore me (and I'll go away! :-) ).

I agree the warning shouldn't be ignored, but I believe it was created 
by R CMD check, not by Spencer directly.  So the real question is:  why 
was it already there?

Duncan Murdoch


From m|ch@e|ch|r|co4 @end|ng |rom gm@||@com  Thu Jul  1 10:20:37 2021
From: m|ch@e|ch|r|co4 @end|ng |rom gm@||@com (Michael Chirico)
Date: Thu, 1 Jul 2021 01:20:37 -0700
Subject: [R-pkg-devel] gettext on Solaris
Message-ID: <CAPRVBcxab6vLt+H+g7VgVROxSx4niEgFhKmJU2SkbFH4sC7g1g@mail.gmail.com>

My new submission potools failed on Solaris:

https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/potools-00check.html

Likely reason is that one or more of the SystemRequirements are missing (I
put gettext as a catchall in the DESCRIPTION but more specifically it needs
msgfmt, msgmerge, msginit and msgconv).

WRE mentions tests/examples should run without error when command-line
tools are unavailable, so I've added some escapes, but nevertheless I'm a
bit puzzled -- I expected these requirements would be easy to handle since
tools::update_pkg_po() has the same requirements.

Am I right that R's own default packages may be only partially functional
on CRAN checks?

	[[alternative HTML version deleted]]


From @905125 @end|ng |rom @|umn|@un@v@e@  Thu Jul  1 16:10:05 2021
From: @905125 @end|ng |rom @|umn|@un@v@e@ (=?UTF-8?Q?Javier_Garc=C3=ADa_Chamorro?=)
Date: Thu, 1 Jul 2021 16:10:05 +0200
Subject: [R-pkg-devel] Change package maintainer
Message-ID: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>

Hi there, I have recently uploaded the first version of my R package to
CRAN. As it is part of my final degree project, I need to change the
maintainer to my supervisor, now that I have finished the project.

I changed in the DESCRIPTION file the proper data to do so, but when
receiving back the email from CRAN the only NOTE I have is this one:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Fernando Carazo Developer <fcarazo at tecnun.es>'

New maintainer:
  Fernando Carazo Developer <fcarazo at tecnun.es>
Old maintainer(s):
  Javier Garcia Developer <a905125 at alumni.unav.es>


What do I need to do here?

Thank you

Javier

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul  1 17:38:33 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 1 Jul 2021 17:38:33 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
Message-ID: <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>



On 01.07.2021 16:10, Javier Garc?a Chamorro wrote:
> Hi there, I have recently uploaded the first version of my R package to
> CRAN. As it is part of my final degree project, I need to change the
> maintainer to my supervisor, now that I have finished the project.
> 
> I changed in the DESCRIPTION file the proper data to do so, but when
> receiving back the email from CRAN the only NOTE I have is this one:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Fernando Carazo Developer <fcarazo at tecnun.es>'
> 
> New maintainer:
>    Fernando Carazo Developer <fcarazo at tecnun.es>
> Old maintainer(s):
>    Javier Garcia Developer <a905125 at alumni.unav.es>

1. Correct the name of the new maintainer whose family name is probably 
not "Developer". Apparently nobody spotted this in your initial submission.

2. After successful submission to CRAN, the old maintainer will receive 
a confirmation request which you have to respond to.

Best,
Uwe Ligges



> 
> 
> What do I need to do here?
> 
> Thank you
> 
> Javier
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Jul  1 17:59:59 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 1 Jul 2021 08:59:59 -0700
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
Message-ID: <8A007EAC-A341-4ABC-BB9E-4E7AC73919BF@noaa.gov>

Hi Uwe:

Is what you described the preferred way to change maintainers  (I have just taken over another package),  or would you prefer receiving an email from the old maintainer before the submission?

Thanks,

-Roy

> On Jul 1, 2021, at 8:38 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 01.07.2021 16:10, Javier Garc?a Chamorro wrote:
>> Hi there, I have recently uploaded the first version of my R package to
>> CRAN. As it is part of my final degree project, I need to change the
>> maintainer to my supervisor, now that I have finished the project.
>> I changed in the DESCRIPTION file the proper data to do so, but when
>> receiving back the email from CRAN the only NOTE I have is this one:
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Fernando Carazo Developer <fcarazo at tecnun.es>'
>> New maintainer:
>>   Fernando Carazo Developer <fcarazo at tecnun.es>
>> Old maintainer(s):
>>   Javier Garcia Developer <a905125 at alumni.unav.es>
> 
> 1. Correct the name of the new maintainer whose family name is probably not "Developer". Apparently nobody spotted this in your initial submission.
> 
> 2. After successful submission to CRAN, the old maintainer will receive a confirmation request which you have to respond to.
> 
> Best,
> Uwe Ligges
> 
> 
> 
>> What do I need to do here?
>> Thank you
>> Javier
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul  1 18:00:29 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 1 Jul 2021 18:00:29 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
Message-ID: <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>

Both ways are fine with us, but the auto confirmation request will be 
sent out in any case.

Best,
Uwe Ligges


On 01.07.2021 17:57, rmendelss gmail wrote:
> Hi Uwe:
> 
> Is what you described the preferred way to change maintainers  (I have just taken over another package),  or would you prefer receiving an email from the old maintainer before the submission?
> 
> Thanks,
> 
> -Roy
> 
>> On Jul 1, 2021, at 8:38 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 01.07.2021 16:10, Javier Garc?a Chamorro wrote:
>>> Hi there, I have recently uploaded the first version of my R package to
>>> CRAN. As it is part of my final degree project, I need to change the
>>> maintainer to my supervisor, now that I have finished the project.
>>> I changed in the DESCRIPTION file the proper data to do so, but when
>>> receiving back the email from CRAN the only NOTE I have is this one:
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: 'Fernando Carazo Developer <fcarazo at tecnun.es>'
>>> New maintainer:
>>>    Fernando Carazo Developer <fcarazo at tecnun.es>
>>> Old maintainer(s):
>>>    Javier Garcia Developer <a905125 at alumni.unav.es>
>>
>> 1. Correct the name of the new maintainer whose family name is probably not "Developer". Apparently nobody spotted this in your initial submission.
>>
>> 2. After successful submission to CRAN, the old maintainer will receive a confirmation request which you have to respond to.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>> What do I need to do here?
>>> Thank you
>>> Javier
>>> 	[[alternative HTML version deleted]]
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Thu Jul  1 20:00:21 2021
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Thu, 1 Jul 2021 20:00:21 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
Message-ID: <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>

Thanks Uwe for answering,

I have a question related to changing maintainers.
What happens when the old/current maintainer does not respond to
emails or other methods of contact?
Would the new maintainer need to wait until the package is removed
from CRAN to submit it again?

Best,

Llu?s

PS: Not sure if my related question should be in another thread or not.


On Thu, 1 Jul 2021 at 18:00, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
> Both ways are fine with us, but the auto confirmation request will be
> sent out in any case.
>
> Best,
> Uwe Ligges
>
>
> On 01.07.2021 17:57, rmendelss gmail wrote:
> > Hi Uwe:
> >
> > Is what you described the preferred way to change maintainers  (I have just taken over another package),  or would you prefer receiving an email from the old maintainer before the submission?
> >
> > Thanks,
> >
> > -Roy
> >
> >> On Jul 1, 2021, at 8:38 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> >>
> >>
> >>
> >> On 01.07.2021 16:10, Javier Garc?a Chamorro wrote:
> >>> Hi there, I have recently uploaded the first version of my R package to
> >>> CRAN. As it is part of my final degree project, I need to change the
> >>> maintainer to my supervisor, now that I have finished the project.
> >>> I changed in the DESCRIPTION file the proper data to do so, but when
> >>> receiving back the email from CRAN the only NOTE I have is this one:
> >>> * checking CRAN incoming feasibility ... NOTE
> >>> Maintainer: 'Fernando Carazo Developer <fcarazo at tecnun.es>'
> >>> New maintainer:
> >>>    Fernando Carazo Developer <fcarazo at tecnun.es>
> >>> Old maintainer(s):
> >>>    Javier Garcia Developer <a905125 at alumni.unav.es>
> >>
> >> 1. Correct the name of the new maintainer whose family name is probably not "Developer". Apparently nobody spotted this in your initial submission.
> >>
> >> 2. After successful submission to CRAN, the old maintainer will receive a confirmation request which you have to respond to.
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >>
> >>> What do I need to do here?
> >>> Thank you
> >>> Javier
> >>>     [[alternative HTML version deleted]]
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Thu Jul  1 21:11:05 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 1 Jul 2021 14:11:05 -0500
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
Message-ID: <24798.4937.978801.297875@rob.eddelbuettel.com>


On 1 July 2021 at 20:00, Llu?s Revilla wrote:
| I have a question related to changing maintainers.
| What happens when the old/current maintainer does not respond to
| emails or other methods of contact?
| Would the new maintainer need to wait until the package is removed
| from CRAN to submit it again?

Not speaking for CRAN here but my understanding always was that a full and
complete 'email handshake' with both old and new maintainer was strongly
preferred / the default simply to prevent misunderstandings or shenanigans.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul  1 23:52:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 1 Jul 2021 17:52:40 -0400
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <24798.4937.978801.297875@rob.eddelbuettel.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
 <24798.4937.978801.297875@rob.eddelbuettel.com>
Message-ID: <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>

On 01/07/2021 3:11 p.m., Dirk Eddelbuettel wrote:
> 
> On 1 July 2021 at 20:00, Llu?s Revilla wrote:
> | I have a question related to changing maintainers.
> | What happens when the old/current maintainer does not respond to
> | emails or other methods of contact?
> | Would the new maintainer need to wait until the package is removed
> | from CRAN to submit it again?
> 
> Not speaking for CRAN here but my understanding always was that a full and
> complete 'email handshake' with both old and new maintainer was strongly
> preferred / the default simply to prevent misunderstandings or shenanigans.

I'd agree in the normal case where the package is still active on CRAN.

In the case where a package has unaddressed issues with no response to 
CRAN from the maintainer, they'd probably be quite happy to have someone 
volunteer to take over.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jul  2 08:38:32 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 2 Jul 2021 08:38:32 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
 <24798.4937.978801.297875@rob.eddelbuettel.com>
 <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>
Message-ID: <eed05c1e-c1ef-c303-804a-9cfceac942ee@statistik.tu-dortmund.de>



On 01.07.2021 23:52, Duncan Murdoch wrote:
> On 01/07/2021 3:11 p.m., Dirk Eddelbuettel wrote:
>>
>> On 1 July 2021 at 20:00, Llu?s Revilla wrote:
>> | I have a question related to changing maintainers.
>> | What happens when the old/current maintainer does not respond to
>> | emails or other methods of contact?
>> | Would the new maintainer need to wait until the package is removed
>> | from CRAN to submit it again?
>>
>> Not speaking for CRAN here but my understanding always was that a full 
>> and
>> complete 'email handshake' with both old and new maintainer was strongly
>> preferred / the default simply to prevent misunderstandings or 
>> shenanigans.
> 
> I'd agree in the normal case where the package is still active on CRAN.
> 
> In the case where a package has unaddressed issues with no response to 
> CRAN from the maintainer, they'd probably be quite happy to have someone 
> volunteer to take over.

... and if in doubt, ask the CRAN team and give them details.

Best,
Uwe Ligges


> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Fri Jul  2 12:30:27 2021
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Fri, 2 Jul 2021 12:30:27 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <eed05c1e-c1ef-c303-804a-9cfceac942ee@statistik.tu-dortmund.de>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
 <24798.4937.978801.297875@rob.eddelbuettel.com>
 <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>
 <eed05c1e-c1ef-c303-804a-9cfceac942ee@statistik.tu-dortmund.de>
Message-ID: <CAN+W6_sZMtnNx7et74_ijrRfbFL2M4YmutCpkcDwRoUN-sbkqQ@mail.gmail.com>

Hi,

I agree that the email handshake is the best approach (and very
reasonable to expect it).
I thought that maybe in cases like this there was a waiting period
and/or multiple attempts to contact the maintainer and someone on the
mailing list might have had some experience with the process.
When I'm ready to take over the package I will ask the CRAN team and
give them more details.

Many thanks to all.

Llu?s Revilla

On Fri, 2 Jul 2021 at 08:38, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
>
>
> On 01.07.2021 23:52, Duncan Murdoch wrote:
> > On 01/07/2021 3:11 p.m., Dirk Eddelbuettel wrote:
> >>
> >> On 1 July 2021 at 20:00, Llu?s Revilla wrote:
> >> | I have a question related to changing maintainers.
> >> | What happens when the old/current maintainer does not respond to
> >> | emails or other methods of contact?
> >> | Would the new maintainer need to wait until the package is removed
> >> | from CRAN to submit it again?
> >>
> >> Not speaking for CRAN here but my understanding always was that a full
> >> and
> >> complete 'email handshake' with both old and new maintainer was strongly
> >> preferred / the default simply to prevent misunderstandings or
> >> shenanigans.
> >
> > I'd agree in the normal case where the package is still active on CRAN.
> >
> > In the case where a package has unaddressed issues with no response to
> > CRAN from the maintainer, they'd probably be quite happy to have someone
> > volunteer to take over.
>
> ... and if in doubt, ask the CRAN team and give them details.
>
> Best,
> Uwe Ligges
>
>
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Jul  2 14:45:34 2021
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 2 Jul 2021 07:45:34 -0500
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <CAN+W6_sZMtnNx7et74_ijrRfbFL2M4YmutCpkcDwRoUN-sbkqQ@mail.gmail.com>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
 <24798.4937.978801.297875@rob.eddelbuettel.com>
 <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>
 <eed05c1e-c1ef-c303-804a-9cfceac942ee@statistik.tu-dortmund.de>
 <CAN+W6_sZMtnNx7et74_ijrRfbFL2M4YmutCpkcDwRoUN-sbkqQ@mail.gmail.com>
Message-ID: <9a443bac-ef87-d2ba-fde9-a9d58feaf4a0@effectivedefense.org>

	  I can suggest one example: multcompView:  I created it during or 
before 2006 and passed it during or before 2011 to Luciano Selzer 
<luciano.selzer at gmail.com>.  I do not remember the exact process, and 
procedures could have changed since then.  However, I think I remember 
communicating with the CRAN maintainers after Selzer and I agreed he 
would take it over.  Beyond that, I see that the DESCRIPTION file for 
multicompView0.1-3 lists BOTH of us as Maintainer.  The version before 
that lists me only, and the one after lists him.[1]


	  Second, last September, Brian Ripley sent an email to 50 different 
people saying gdata had problems, the maintainer had not responded, and 
it was scheduled to be archived along with all its strong reverse 
dependencies on 2020-09-25.  I don't know what happened from that except 
that the package is still on CRAN with date Published: 2017-06-06, but 
my Ecfun package no longer uses it.


	  Beyond that, I'm pretty sure that anyone can adopt a package in the 
archives that is no longer on CRAN and resurrect it if you agree to fix 
the problems.  However, you should discuss with the CRAN maintainers.


	  Spencer


[1]
https://cran.r-project.org/src/contrib/Archive/multcompView/


On 7/2/21 5:30 AM, Llu?s Revilla wrote:
> Hi,
> 
> I agree that the email handshake is the best approach (and very
> reasonable to expect it).
> I thought that maybe in cases like this there was a waiting period
> and/or multiple attempts to contact the maintainer and someone on the
> mailing list might have had some experience with the process.
> When I'm ready to take over the package I will ask the CRAN team and
> give them more details.
> 
> Many thanks to all.
> 
> Llu?s Revilla
> 
> On Fri, 2 Jul 2021 at 08:38, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 01.07.2021 23:52, Duncan Murdoch wrote:
>>> On 01/07/2021 3:11 p.m., Dirk Eddelbuettel wrote:
>>>>
>>>> On 1 July 2021 at 20:00, Llu?s Revilla wrote:
>>>> | I have a question related to changing maintainers.
>>>> | What happens when the old/current maintainer does not respond to
>>>> | emails or other methods of contact?
>>>> | Would the new maintainer need to wait until the package is removed
>>>> | from CRAN to submit it again?
>>>>
>>>> Not speaking for CRAN here but my understanding always was that a full
>>>> and
>>>> complete 'email handshake' with both old and new maintainer was strongly
>>>> preferred / the default simply to prevent misunderstandings or
>>>> shenanigans.
>>>
>>> I'd agree in the normal case where the package is still active on CRAN.
>>>
>>> In the case where a package has unaddressed issues with no response to
>>> CRAN from the maintainer, they'd probably be quite happy to have someone
>>> volunteer to take over.
>>
>> ... and if in doubt, ask the CRAN team and give them details.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jul  2 15:18:45 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 2 Jul 2021 15:18:45 +0200
Subject: [R-pkg-devel] Change package maintainer
In-Reply-To: <9a443bac-ef87-d2ba-fde9-a9d58feaf4a0@effectivedefense.org>
References: <CAFHOBwzuzE1Q67Pz+wavZdkAJbJPi8ejSqEYOZd2823F=fPkLA@mail.gmail.com>
 <a1c3df66-b76e-b936-91b5-01c2ce94bb30@statistik.tu-dortmund.de>
 <08D3D35C-F5DD-4746-BEE6-18E0E90B706A@gmail.com>
 <4a23da21-62fd-b2d1-7c32-52afe9ffcc69@statistik.tu-dortmund.de>
 <CAN+W6_vCWt-7CiyCh__Dm6=-fbP4KrGSkhr4fzqjSc+h_5o2nQ@mail.gmail.com>
 <24798.4937.978801.297875@rob.eddelbuettel.com>
 <f55be9f7-9ac8-c4b7-54ef-4889434cda5e@gmail.com>
 <eed05c1e-c1ef-c303-804a-9cfceac942ee@statistik.tu-dortmund.de>
 <CAN+W6_sZMtnNx7et74_ijrRfbFL2M4YmutCpkcDwRoUN-sbkqQ@mail.gmail.com>
 <9a443bac-ef87-d2ba-fde9-a9d58feaf4a0@effectivedefense.org>
Message-ID: <2df4f0d7-15af-b831-ca9b-55b36116b8d1@statistik.tu-dortmund.de>



On 02.07.2021 14:45, Spencer Graves wrote:
>  ????? I can suggest one example: multcompView:? I created it during or 
> before 2006 and passed it during or before 2011 to Luciano Selzer 
> <luciano.selzer at gmail.com>.? I do not remember the exact process, and 
> procedures could have changed since then.? However, I think I remember 
> communicating with the CRAN maintainers after Selzer and I agreed he 
> would take it over.? Beyond that, I see that the DESCRIPTION file for 
> multicompView0.1-3 lists BOTH of us as Maintainer.? The version before 
> that lists me only, and the one after lists him.[1]

Although, the CRAN policies require a single maintainer these days.

Best,
Uwe


> 
>  ????? Second, last September, Brian Ripley sent an email to 50 
> different people saying gdata had problems, the maintainer had not 
> responded, and it was scheduled to be archived along with all its strong 
> reverse dependencies on 2020-09-25.? I don't know what happened from 
> that except that the package is still on CRAN with date Published: 
> 2017-06-06, but my Ecfun package no longer uses it.
> 
> 
>  ????? Beyond that, I'm pretty sure that anyone can adopt a package in 
> the archives that is no longer on CRAN and resurrect it if you agree to 
> fix the problems.? However, you should discuss with the CRAN maintainers.
> 
> 
>  ????? Spencer
> 
> 
> [1]
> https://cran.r-project.org/src/contrib/Archive/multcompView/
> 
> 
> On 7/2/21 5:30 AM, Llu?s Revilla wrote:
>> Hi,
>>
>> I agree that the email handshake is the best approach (and very
>> reasonable to expect it).
>> I thought that maybe in cases like this there was a waiting period
>> and/or multiple attempts to contact the maintainer and someone on the
>> mailing list might have had some experience with the process.
>> When I'm ready to take over the package I will ask the CRAN team and
>> give them more details.
>>
>> Many thanks to all.
>>
>> Llu?s Revilla
>>
>> On Fri, 2 Jul 2021 at 08:38, Uwe Ligges 
>> <ligges at statistik.tu-dortmund.de> wrote:
>>>
>>>
>>>
>>> On 01.07.2021 23:52, Duncan Murdoch wrote:
>>>> On 01/07/2021 3:11 p.m., Dirk Eddelbuettel wrote:
>>>>>
>>>>> On 1 July 2021 at 20:00, Llu?s Revilla wrote:
>>>>> | I have a question related to changing maintainers.
>>>>> | What happens when the old/current maintainer does not respond to
>>>>> | emails or other methods of contact?
>>>>> | Would the new maintainer need to wait until the package is removed
>>>>> | from CRAN to submit it again?
>>>>>
>>>>> Not speaking for CRAN here but my understanding always was that a full
>>>>> and
>>>>> complete 'email handshake' with both old and new maintainer was 
>>>>> strongly
>>>>> preferred / the default simply to prevent misunderstandings or
>>>>> shenanigans.
>>>>
>>>> I'd agree in the normal case where the package is still active on CRAN.
>>>>
>>>> In the case where a package has unaddressed issues with no response to
>>>> CRAN from the maintainer, they'd probably be quite happy to have 
>>>> someone
>>>> volunteer to take over.
>>>
>>> ... and if in doubt, ask the CRAN team and give them details.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Sun Jul  4 11:23:10 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Sun, 4 Jul 2021 11:23:10 +0200
Subject: [R-pkg-devel] ERROR: lazy loading failed for package 'movecost'
In-Reply-To: <774fb9ef-4e8d-4be7-8ef3-4d973d5f43fb@Spark>
References: <774fb9ef-4e8d-4be7-8ef3-4d973d5f43fb@Spark>
Message-ID: <bac4279c-5e37-4ffe-9c88-984ad6115e84@Spark>

Hello,

I am in the process of checking my ?movecost? package before submitting to CRAN.

As usual, I have tested my package locally (on my MAC) using devtools::check() and everything is fine, getting 0 error, 0 warnings and 0 notes.

Also, as I routinely do, I used (A)?devtools::check_win_devel(); in the returned email, the status was OK (https://win-builder.r-project.org/lWar6m662wl3).

BUT, I got 1 error from both:
(B) devtools::check_win_release() (https://win-builder.r-project.org/6ZzaipUr9rPF)
(C) devtools::check_win_oldrelease() (https://win-builder.r-project.org/yXHZoOCov7xH)

I cannot really figure out what is actually causing the error (Im not a specialist in programming and the like):
ERROR: lazy loading failed for package ?movecost'


Any hint/elucidation on the matter, so that I can spot what is causing the error, would be appreciated.
Thank you for your time and consideration.

Best
Gianmarco


************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From |@gger@cyr|| @end|ng |rom gm@||@com  Sun Jul  4 23:26:37 2021
From: |@gger@cyr|| @end|ng |rom gm@||@com (Cyril Lagger)
Date: Sun, 4 Jul 2021 22:26:37 +0100
Subject: [R-pkg-devel] R-CMD-check works locally and on github,
 but windows automatic checks fail
Message-ID: <CAApgGZdGbZqUmpVNr1wXZsd_na6+Vg7fAN1FkBZwLyf9TzRVqw@mail.gmail.com>

Hi all,

I am trying to submit our package scDiffCom (
https://github.com/CyrilLagger/scDiffCom) to CRAN. However, it does not
pass the windows automatic checks for some unclear reason to me. Any help
would be really appreciated!

Basically, the output from R-CMD-check is fine locally and for the github
actions I specified, but not for the automatic windows tests. Please see
below:

------------
1)
no ERRORs, no WARNINGs, no NOTEs when running devtools:check() locally
(windows 10, R 4.1.0)

2)
no ERRORs, no WARNINGs, no NOTEs when running github-actions
<https://github.com/CyrilLagger/scDiffCom/blob/master/.github/workflows/check-standard.yaml>
for windows-latest (release), macOS-latest (release), ubuntu-20.04
(release), ubuntu-20.04 (devel)

3)
1 ERROR when running devtools:check_win_devel: *Running the tests in
'tests/testthat.R' failed.* However, testthat.Rout.fail is not informative
to me, it only contains:

> library(testthat)
> library(scDiffCom)
>
> test_check("scDiffCom")
Loading required package: SeuratObject

4)
2 ERRORs when running devtools:check_win_release. As follows:

** running tests for arch 'i386' ... [5s] ERROR
  Running 'spelling.R' [0s]
  Running 'testthat.R' [4s]
Running the tests in 'tests/testthat.R' failed.
Complete output:
  > library(testthat)
  > library(scDiffCom)
  >
  > test_check("scDiffCom")
  Loading required package: SeuratObject
  == Failed tests
================================================================
  -- Error (test-everything.R:171:1): (code run outside of
`test_that()`) --------
  Error: error in load action .__A__.1 for package RcppAnnoy:
loadModule(module = "AnnoyAngular", what = TRUE, env = ns, loadNow =
TRUE): Unable to load module "AnnoyAngular": bad binding access
  Backtrace:
       x
    1. +-base::lapply(...) test-everything.R:171:0
    2. | \-scDiffCom:::FUN(X[[i]], ...)
    3. |   \-scDiffCom:::extract_analysis_inputs(...) test-everything.R:174:4
    4. |     \-scDiffCom:::extract_seurat_inputs(...)
    5. \-base::loadNamespace(x)
    6.   +-base::namespaceImportFrom(...)
    7.   | \-base::asNamespace(ns)
    8.   \-base::loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
versionCheck = vI[[j]])
    9.     \-methods::cacheMetaData(ns, TRUE, ns)
   10.       \-methods:::.doLoadActions(where, attach)

  [ FAIL 1 | WARN 0 | SKIP 0 | PASS 6 ]
  Error: Test failures
  Execution halted
** running tests for arch 'x64' ... [5s] ERROR
  Running 'spelling.R' [0s]
  Running 'testthat.R' [5s]
Running the tests in 'tests/testthat.R' failed.
Complete output:
  > library(testthat)
  > library(scDiffCom)
  >
  > test_check("scDiffCom")
  Loading required package: SeuratObject

-----------

Since I have no error locally on my machine, I don't know what I could
change for the automatic tests to work. Also, I don't understand why
the github-action for windows-latest (release) works but not
devtools:check_win_release().

By the way, I installed R devel on my machine in addition to R 4.1.0,
but it turns out I cannot test our package installation because it has
Bioconductor dependencies and "Bioconductor does not yet build and
check packages for R version 4.2" as reported here
<https://github.com/r-hub/rhub/issues/471>. The exact same error
actually also occurs when I run devtools:check_rhub(). It does not
seem to be related to the failure of testthat I reported above, but I
thought it might be useful to mention it.

Thanks in advance for any help/suggestions!

Cyril

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul  5 01:47:52 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 4 Jul 2021 19:47:52 -0400
Subject: [R-pkg-devel] R-CMD-check works locally and on github,
 but windows automatic checks fail
In-Reply-To: <CAApgGZdGbZqUmpVNr1wXZsd_na6+Vg7fAN1FkBZwLyf9TzRVqw@mail.gmail.com>
References: <CAApgGZdGbZqUmpVNr1wXZsd_na6+Vg7fAN1FkBZwLyf9TzRVqw@mail.gmail.com>
Message-ID: <beb621fc-49f1-8d2d-a538-356ae51b3257@gmail.com>

On 04/07/2021 5:26 p.m., Cyril Lagger wrote:
> Hi all,
> 
> I am trying to submit our package scDiffCom (
> https://github.com/CyrilLagger/scDiffCom) to CRAN. However, it does not
> pass the windows automatic checks for some unclear reason to me. Any help
> would be really appreciated!
> 
> Basically, the output from R-CMD-check is fine locally and for the github
> actions I specified, but not for the automatic windows tests. Please see
> below:
> 
> ------------
> 1)
> no ERRORs, no WARNINGs, no NOTEs when running devtools:check() locally
> (windows 10, R 4.1.0)

That's the windows release version, not devel.
> 
> 2)
> no ERRORs, no WARNINGs, no NOTEs when running github-actions
> <https://github.com/CyrilLagger/scDiffCom/blob/master/.github/workflows/check-standard.yaml>
> for windows-latest (release), macOS-latest (release), ubuntu-20.04
> (release), ubuntu-20.04 (devel)

You didn't test windows-devel.


> 
> 3)
> 1 ERROR when running devtools:check_win_devel: *Running the tests in
> 'tests/testthat.R' failed.* However, testthat.Rout.fail is not informative
> to me, it only contains:

That's a Windows devel run.  That's what you haven't done locally.

> 
>> library(testthat)
>> library(scDiffCom)
>>
>> test_check("scDiffCom")
> Loading required package: SeuratObject
> 
> 4)
> 2 ERRORs when running devtools:check_win_release. As follows:
> 
> ** running tests for arch 'i386' ... [5s] ERROR
>    Running 'spelling.R' [0s]
>    Running 'testthat.R' [4s]
> Running the tests in 'tests/testthat.R' failed.
> Complete output:
>    > library(testthat)
>    > library(scDiffCom)
>    >
>    > test_check("scDiffCom")
>    Loading required package: SeuratObject
>    == Failed tests
> ================================================================
>    -- Error (test-everything.R:171:1): (code run outside of
> `test_that()`) --------
>    Error: error in load action .__A__.1 for package RcppAnnoy:
> loadModule(module = "AnnoyAngular", what = TRUE, env = ns, loadNow =
> TRUE): Unable to load module "AnnoyAngular": bad binding access
>    Backtrace:
>         x
>      1. +-base::lapply(...) test-everything.R:171:0
>      2. | \-scDiffCom:::FUN(X[[i]], ...)
>      3. |   \-scDiffCom:::extract_analysis_inputs(...) test-everything.R:174:4
>      4. |     \-scDiffCom:::extract_seurat_inputs(...)
>      5. \-base::loadNamespace(x)
>      6.   +-base::namespaceImportFrom(...)
>      7.   | \-base::asNamespace(ns)
>      8.   \-base::loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
> versionCheck = vI[[j]])
>      9.     \-methods::cacheMetaData(ns, TRUE, ns)
>     10.       \-methods:::.doLoadActions(where, attach)
> 
>    [ FAIL 1 | WARN 0 | SKIP 0 | PASS 6 ]
>    Error: Test failures
>    Execution halted
> ** running tests for arch 'x64' ... [5s] ERROR
>    Running 'spelling.R' [0s]
>    Running 'testthat.R' [5s]
> Running the tests in 'tests/testthat.R' failed.
> Complete output:
>    > library(testthat)
>    > library(scDiffCom)
>    >
>    > test_check("scDiffCom")
>    Loading required package: SeuratObject
> 
> -----------
> 
> Since I have no error locally on my machine, I don't know what I could
> change for the automatic tests to work. Also, I don't understand why
> the github-action for windows-latest (release) works but not
> devtools:check_win_release().

You say check_win_devel() above.

> 
> By the way, I installed R devel on my machine in addition to R 4.1.0,
> but it turns out I cannot test our package installation because it has
> Bioconductor dependencies and "Bioconductor does not yet build and
> check packages for R version 4.2" as reported here
> <https://github.com/r-hub/rhub/issues/471>. The exact same error
> actually also occurs when I run devtools:check_rhub(). It does not
> seem to be related to the failure of testthat I reported above, but I
> thought it might be useful to mention it.

Yes, seems related.  If you're depending on a package that won't build, 
your tests will fail.

Perhaps you can reduce your dependence to Suggests, which will give a 
note on the failure to load, but no more.

I don't know if this is under your control, but I believe R-devel will 
not support i386.  (Or is it the last version to do so?  I forget where 
I saw the news.)

Duncan Murdoch


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Mon Jul  5 09:49:13 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Mon, 5 Jul 2021 09:49:13 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
Message-ID: <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>

Good morning,

I got stuck on what follows.
I have tested a new version of my package locally (on a MAC), and everything is fine.

I got mixed results using:
devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -?https://win-builder.r-project.org/7qy6PL8C7ye7

devtools::check_win_release() - 1 ERROR (R version 4.1.0) -?https://win-builder.r-project.org/hlA15dFq5BdR

devtools::check_win_devel()??- 1 ERROR (R Under development (unstable) -?https://win-builder.r-project.org/uQ0LGZ7v0E5h

The reported error seems to be:
ERROR: lazy loading failed for package ?movecost'


I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).

Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.

I would really appreciate any help and/or suggestion.

Best
Gianmarco




************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Mon Jul  5 11:16:51 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Mon, 5 Jul 2021 11:16:51 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
Message-ID: <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>

Hello,
Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.

I ran?devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:

Bioconductor does not yet build and check packages for R version 4.2

The complete report that I got from?devtools::check_rhub() is here:
https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a414498921e9ab2a54aaf


Any idea about how to proceed in order for me to get my package on CRAN?
I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).

Best
GmA

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> Good morning,
>
> I got stuck on what follows.
> I have tested a new version of my package locally (on a MAC), and everything is fine.
>
> I got mixed results using:
> devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -?https://win-builder.r-project.org/7qy6PL8C7ye7
>
> devtools::check_win_release() - 1 ERROR (R version 4.1.0) -?https://win-builder.r-project.org/hlA15dFq5BdR
>
> devtools::check_win_devel()??- 1 ERROR (R Under development (unstable) -?https://win-builder.r-project.org/uQ0LGZ7v0E5h
>
> The reported error seems to be:
> ERROR: lazy loading failed for package ?movecost'
>
>
> I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
>
> Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
>
> I would really appreciate any help and/or suggestion.
>
> Best
> Gianmarco
>
>
>
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jul  5 11:21:07 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 5 Jul 2021 11:21:07 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
Message-ID: <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>

What happens when you test it on winbuilder?
It is configured like the CRAN incoming checks and there should be all 
relevant packages available.

Best,
Uwe Ligges


On 05.07.2021 11:16, Gianmarco Alberti wrote:
> Hello,
> Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> 
> I ran?devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> 
> Bioconductor does not yet build and check packages for R version 4.2
> 
> The complete report that I got from?devtools::check_rhub() is here:
> https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a414498921e9ab2a54aaf
> 
> 
> Any idea about how to proceed in order for me to get my package on CRAN?
> I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> 
> Best
> GmA
> 
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
> 
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
> 
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> 
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
> 
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
> 
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
> 
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
>> Good morning,
>>
>> I got stuck on what follows.
>> I have tested a new version of my package locally (on a MAC), and everything is fine.
>>
>> I got mixed results using:
>> devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -?https://win-builder.r-project.org/7qy6PL8C7ye7
>>
>> devtools::check_win_release() - 1 ERROR (R version 4.1.0) -?https://win-builder.r-project.org/hlA15dFq5BdR
>>
>> devtools::check_win_devel()??- 1 ERROR (R Under development (unstable) -?https://win-builder.r-project.org/uQ0LGZ7v0E5h
>>
>> The reported error seems to be:
>> ERROR: lazy loading failed for package ?movecost'
>>
>>
>> I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
>>
>> Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
>>
>> I would really appreciate any help and/or suggestion.
>>
>> Best
>> Gianmarco
>>
>>
>>
>>
>> ************************************************
>> Dr Gianmarco Alberti (PhD Udine)
>> Lecturer in Spatial Forensics
>> Coordinator of the BA dissertations
>> Department of Criminology
>> Faculty for Social Wellbeing
>> Room 332, Humanities B (FEMA)
>> University of Malta, Msida, Malta (Europe) - MSD 2080
>> tel +356 2340 3718
>>
>> Academic profiles
>> https://www.researchgate.net/profile/Gianmarco_Alberti4
>> https://malta.academia.edu/GianmarcoAlberti
>>
>> Google Scholar profile
>> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>>
>> Correspondence Analysis website
>> http://cainarchaeology.weebly.com/
>>
>> R packages on CRAN:
>> CAinterprTools
>> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>>
>> GmAMisc
>> https://cran.r-project.org/package=GmAMisc
>>
>> movecost
>> https://cran.r-project.org/web/packages/movecost/index.html
>> ************************************************
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Mon Jul  5 11:26:49 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Mon, 5 Jul 2021 11:26:49 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
Message-ID: <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>

Hello,
Thanks for your reply.

I got mixed results using:
devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7

devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR

devtools::check_win_devel() ?- 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h

The reported error is to be:
ERROR: lazy loading failed for package ?movecost?

Since I couldn?t understand the actual underlying issue, I ran?devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.

I have tested the package on Win (R version 4.1) and everything was fine.

I hope I have addressed your question.
Please let me know if you need any other relevant info from my end.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> What happens when you test it on winbuilder?
> It is configured like the CRAN incoming checks and there should be all
> relevant packages available.
>
> Best,
> Uwe Ligges
>
>
> On 05.07.2021 11:16, Gianmarco Alberti wrote:
> > Hello,
> > Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> >
> > I ran?devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> >
> > Bioconductor does not yet build and check packages for R version 4.2
> >
> > The complete report that I got from?devtools::check_rhub() is here:
> > https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a414498921e9ab2a54aaf
> >
> >
> > Any idea about how to proceed in order for me to get my package on CRAN?
> > I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> >
> > Best
> > GmA
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA dissertations
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080
> > tel +356 2340 3718
> >
> > Academic profiles
> > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > https://malta.academia.edu/GianmarcoAlberti
> >
> > Google Scholar profile
> > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> >
> > Correspondence Analysis website
> > http://cainarchaeology.weebly.com/
> >
> > R packages on CRAN:
> > CAinterprTools
> > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> >
> > GmAMisc
> > https://cran.r-project.org/package=GmAMisc
> >
> > movecost
> > https://cran.r-project.org/web/packages/movecost/index.html
> > ************************************************
> > On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > > Good morning,
> > >
> > > I got stuck on what follows.
> > > I have tested a new version of my package locally (on a MAC), and everything is fine.
> > >
> > > I got mixed results using:
> > > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -?https://win-builder.r-project.org/7qy6PL8C7ye7
> > >
> > > devtools::check_win_release() - 1 ERROR (R version 4.1.0) -?https://win-builder.r-project.org/hlA15dFq5BdR
> > >
> > > devtools::check_win_devel()??- 1 ERROR (R Under development (unstable) -?https://win-builder.r-project.org/uQ0LGZ7v0E5h
> > >
> > > The reported error seems to be:
> > > ERROR: lazy loading failed for package ?movecost'
> > >
> > >
> > > I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
> > >
> > > Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
> > >
> > > I would really appreciate any help and/or suggestion.
> > >
> > > Best
> > > Gianmarco
> > >
> > >
> > >
> > >
> > > ************************************************
> > > Dr Gianmarco Alberti (PhD Udine)
> > > Lecturer in Spatial Forensics
> > > Coordinator of the BA dissertations
> > > Department of Criminology
> > > Faculty for Social Wellbeing
> > > Room 332, Humanities B (FEMA)
> > > University of Malta, Msida, Malta (Europe) - MSD 2080
> > > tel +356 2340 3718
> > >
> > > Academic profiles
> > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > https://malta.academia.edu/GianmarcoAlberti
> > >
> > > Google Scholar profile
> > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > >
> > > Correspondence Analysis website
> > > http://cainarchaeology.weebly.com/
> > >
> > > R packages on CRAN:
> > > CAinterprTools
> > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > >
> > > GmAMisc
> > > https://cran.r-project.org/package=GmAMisc
> > >
> > > movecost
> > > https://cran.r-project.org/web/packages/movecost/index.html
> > > ************************************************
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Jul  5 11:53:57 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 5 Jul 2021 11:53:57 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
Message-ID: <CABtg=KnRwfuo+DD-johAG+HKDfMA-d1my40pgW4Wdu02Jcj7Vw@mail.gmail.com>

I think the Bioconductor error on R-hub is a red herring. The error
message is printed, but the actual error is ignored. So this is really
only an issue if you do need a Bioconductor package for the check.

I think the issue might be that for R-devel CRAN binaries are x64
only, but R CMD INSTALL and R CMD check still try to install the
package for i386 as well. Dependencies (e.g. chron in this case) will
not be available on i386.

At least this is the issue for R-hub, because it uses CRAN binaries by
default: https://artifacts.r-hub.io/movecost_1.2.tar.gz-cbda0dbe4d7a414498921e9ab2a54aaf/movecost.Rcheck/00install.out

AFAICT Win-builder has its own package library, which might have i386
support, I don't know. So maybe the issue is different there.

Gabor

On Mon, Jul 5, 2021 at 11:27 AM Gianmarco Alberti
<gianmarcoalberti at gmail.com> wrote:
>
> Hello,
> Thanks for your reply.
>
> I got mixed results using:
> devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7
>
> devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR
>
> devtools::check_win_devel()  - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
>
> The reported error is to be:
> ERROR: lazy loading failed for package ?movecost?
>
> Since I couldn?t understand the actual underlying issue, I ran devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.
>
> I have tested the package on Win (R version 4.1) and everything was fine.
>
> I hope I have addressed your question.
> Please let me know if you need any other relevant info from my end.
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> > What happens when you test it on winbuilder?
> > It is configured like the CRAN incoming checks and there should be all
> > relevant packages available.
> >
> > Best,
> > Uwe Ligges
> >
> >
> > On 05.07.2021 11:16, Gianmarco Alberti wrote:
> > > Hello,
> > > Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> > >
> > > I ran devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> > >
> > > Bioconductor does not yet build and check packages for R version 4.2
> > >
> > > The complete report that I got from devtools::check_rhub() is here:
> > > https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a414498921e9ab2a54aaf
> > >
> > >
> > > Any idea about how to proceed in order for me to get my package on CRAN?
> > > I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> > >
> > > Best
> > > GmA
> > >
> > > ************************************************
> > > Dr Gianmarco Alberti (PhD Udine)
> > > Lecturer in Spatial Forensics
> > > Coordinator of the BA dissertations
> > > Department of Criminology
> > > Faculty for Social Wellbeing
> > > Room 332, Humanities B (FEMA)
> > > University of Malta, Msida, Malta (Europe) - MSD 2080
> > > tel +356 2340 3718
> > >
> > > Academic profiles
> > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > https://malta.academia.edu/GianmarcoAlberti
> > >
> > > Google Scholar profile
> > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > >
> > > Correspondence Analysis website
> > > http://cainarchaeology.weebly.com/
> > >
> > > R packages on CRAN:
> > > CAinterprTools
> > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > >
> > > GmAMisc
> > > https://cran.r-project.org/package=GmAMisc
> > >
> > > movecost
> > > https://cran.r-project.org/web/packages/movecost/index.html
> > > ************************************************
> > > On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > > > Good morning,
> > > >
> > > > I got stuck on what follows.
> > > > I have tested a new version of my package locally (on a MAC), and everything is fine.
> > > >
> > > > I got mixed results using:
> > > > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7
> > > >
> > > > devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR
> > > >
> > > > devtools::check_win_devel()  - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
> > > >
> > > > The reported error seems to be:
> > > > ERROR: lazy loading failed for package ?movecost'
> > > >
> > > >
> > > > I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
> > > >
> > > > Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
> > > >
> > > > I would really appreciate any help and/or suggestion.
> > > >
> > > > Best
> > > > Gianmarco
> > > >
> > > >
> > > >
> > > >
> > > > ************************************************
> > > > Dr Gianmarco Alberti (PhD Udine)
> > > > Lecturer in Spatial Forensics
> > > > Coordinator of the BA dissertations
> > > > Department of Criminology
> > > > Faculty for Social Wellbeing
> > > > Room 332, Humanities B (FEMA)
> > > > University of Malta, Msida, Malta (Europe) - MSD 2080
> > > > tel +356 2340 3718
> > > >
> > > > Academic profiles
> > > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > > https://malta.academia.edu/GianmarcoAlberti
> > > >
> > > > Google Scholar profile
> > > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > > >
> > > > Correspondence Analysis website
> > > > http://cainarchaeology.weebly.com/
> > > >
> > > > R packages on CRAN:
> > > > CAinterprTools
> > > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > > >
> > > > GmAMisc
> > > > https://cran.r-project.org/package=GmAMisc
> > > >
> > > > movecost
> > > > https://cran.r-project.org/web/packages/movecost/index.html
> > > > ************************************************
> > >
> > > [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dbos@k01 m@iii@g oii gm@ii@com  Mon Jul  5 13:25:38 2021
From: dbos@k01 m@iii@g oii gm@ii@com (dbos@k01 m@iii@g oii gm@ii@com)
Date: Mon, 5 Jul 2021 07:25:38 -0400
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
Message-ID: <018601d77190$7b8ac400$72a04c00$@gmail.com>

For the lazy loading error, if you are not intentionally lazy loading data, you should remove the lazy loading entry from the description file.  Previously this was not causing any problems with the CRAN checks, but now it is.  

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Gianmarco Alberti
Sent: Monday, July 5, 2021 5:27 AM
To: r-package-devel at r-project.org; Uwe Ligges <ligges at statistik.tu-dortmund.de>
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

Hello,
Thanks for your reply.

I got mixed results using:
devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7

devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR

devtools::check_win_devel()  - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h

The reported error is to be:
ERROR: lazy loading failed for package ?movecost?

Since I couldn?t understand the actual underlying issue, I ran devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.

I have tested the package on Win (R version 4.1) and everything was fine.

I hope I have addressed your question.
Please let me know if you need any other relevant info from my end.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> What happens when you test it on winbuilder?
> It is configured like the CRAN incoming checks and there should be all 
> relevant packages available.
>
> Best,
> Uwe Ligges
>
>
> On 05.07.2021 11:16, Gianmarco Alberti wrote:
> > Hello,
> > Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> >
> > I ran devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> >
> > Bioconductor does not yet build and check packages for R version 4.2
> >
> > The complete report that I got from devtools::check_rhub() is here:
> > https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a4144
> > 98921e9ab2a54aaf
> >
> >
> > Any idea about how to proceed in order for me to get my package on CRAN?
> > I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> >
> > Best
> > GmA
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA dissertations
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340 
> > 3718
> >
> > Academic profiles
> > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > https://malta.academia.edu/GianmarcoAlberti
> >
> > Google Scholar profile
> > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> >
> > Correspondence Analysis website
> > http://cainarchaeology.weebly.com/
> >
> > R packages on CRAN:
> > CAinterprTools
> > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> >
> > GmAMisc
> > https://cran.r-project.org/package=GmAMisc
> >
> > movecost
> > https://cran.r-project.org/web/packages/movecost/index.html
> > ************************************************
> > On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > > Good morning,
> > >
> > > I got stuck on what follows.
> > > I have tested a new version of my package locally (on a MAC), and everything is fine.
> > >
> > > I got mixed results using:
> > > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - 
> > > https://win-builder.r-project.org/7qy6PL8C7ye7
> > >
> > > devtools::check_win_release() - 1 ERROR (R version 4.1.0) - 
> > > https://win-builder.r-project.org/hlA15dFq5BdR
> > >
> > > devtools::check_win_devel()  - 1 ERROR (R Under development 
> > > (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
> > >
> > > The reported error seems to be:
> > > ERROR: lazy loading failed for package ?movecost'
> > >
> > >
> > > I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
> > >
> > > Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
> > >
> > > I would really appreciate any help and/or suggestion.
> > >
> > > Best
> > > Gianmarco
> > >
> > >
> > >
> > >
> > > ************************************************
> > > Dr Gianmarco Alberti (PhD Udine)
> > > Lecturer in Spatial Forensics
> > > Coordinator of the BA dissertations Department of Criminology 
> > > Faculty for Social Wellbeing Room 332, Humanities B (FEMA) 
> > > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 
> > > 2340 3718
> > >
> > > Academic profiles
> > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > https://malta.academia.edu/GianmarcoAlberti
> > >
> > > Google Scholar profile
> > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > >
> > > Correspondence Analysis website
> > > http://cainarchaeology.weebly.com/
> > >
> > > R packages on CRAN:
> > > CAinterprTools
> > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > >
> > > GmAMisc
> > > https://cran.r-project.org/package=GmAMisc
> > >
> > > movecost
> > > https://cran.r-project.org/web/packages/movecost/index.html
> > > ************************************************
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Mon Jul  5 16:32:57 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 5 Jul 2021 10:32:57 -0400
Subject: [R-pkg-devel] weird C stack traces from win-builder,
 due to brms/rstan load?
Message-ID: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>

  I'm running into trouble checking a new release of the 'broom.mixed' 
package <https://cran.r-project.org/web/packages/broom.mixed/index.html> 
on win-builder.  I think it is some kind of rstan problem.

   The broom.mixed package loads the brms package, and loads several 
pre-computed objects from the brms package; I don't think it actually 
tries to run anything of the functions from brms during the check process.

   At several points during checking (see 
<https://win-builder.r-project.org/LsDDMqpnX52n/00check.log>), I get 
voluminous "C stack trace" outputs: once when "Checking dependencies in 
R code", once when calling require(brms) as part of an example, once 
when running the tests (not easy to determine the precise location, and 
once when building the vignettes).

   The trace starts like this:

==== C stack trace ===============================

	SETCAR [0x0x6c838a90+32]
	ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE [0x0x6ac093ff+1151]
	ZN4Rcpp6Module12classes_infoEv [0x0x6ac07467+327]
	Z20Module__classes_infoP7SEXPREC [0x0x6abe1c4a+74]
	Rf_NewFrameConfirm [0x0x6c7a7d18+33960]
	R_initAssignSymbols [0x0x6c7f3259+53849]
	Rf_eval [0x0x6c7fcd31+369]
...

   and goes on for a while.

   R CMD check runs fine on Linux with recent r-devel.

   Has anyone seen this?  Other than scrubbing all references to brms 
and rstan (a second try with one of the brms references avoided instead 
runs into trouble when loading rstan ...), I don't see what I can do ...

<https://win-builder.r-project.org/YArr24tuYZ8G/00check.log>

   cheers
    Ben Bolker


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul  5 20:01:29 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 5 Jul 2021 14:01:29 -0400
Subject: [R-pkg-devel] weird C stack traces from win-builder,
 due to brms/rstan load?
In-Reply-To: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>
References: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>
Message-ID: <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>

On 05/07/2021 10:32 a.m., Ben Bolker wrote:
>    I'm running into trouble checking a new release of the 'broom.mixed'
> package <https://cran.r-project.org/web/packages/broom.mixed/index.html>
> on win-builder.  I think it is some kind of rstan problem.
> 
>     The broom.mixed package loads the brms package, and loads several
> pre-computed objects from the brms package; I don't think it actually
> tries to run anything of the functions from brms during the check process.
> 
>     At several points during checking (see
> <https://win-builder.r-project.org/LsDDMqpnX52n/00check.log>), I get
> voluminous "C stack trace" outputs: once when "Checking dependencies in
> R code", once when calling require(brms) as part of an example, once
> when running the tests (not easy to determine the precise location, and
> once when building the vignettes).
> 
>     The trace starts like this:
> 
> ==== C stack trace ===============================
> 
> 	SETCAR [0x0x6c838a90+32]
> 	ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE [0x0x6ac093ff+1151]
> 	ZN4Rcpp6Module12classes_infoEv [0x0x6ac07467+327]
> 	Z20Module__classes_infoP7SEXPREC [0x0x6abe1c4a+74]
> 	Rf_NewFrameConfirm [0x0x6c7a7d18+33960]
> 	R_initAssignSymbols [0x0x6c7f3259+53849]
> 	Rf_eval [0x0x6c7fcd31+369]
> ...
> 
>     and goes on for a while.
> 
>     R CMD check runs fine on Linux with recent r-devel.
> 
>     Has anyone seen this?  Other than scrubbing all references to brms
> and rstan (a second try with one of the brms references avoided instead
> runs into trouble when loading rstan ...), I don't see what I can do ...
> 
> <https://win-builder.r-project.org/YArr24tuYZ8G/00check.log>
> 

What error do you get before the stack trace?

The Z... names look like C++ entry points to overloaded functions or 
methods.  There's a command line function (c++filt) that will usually 
turn those into their original readable form.  It's not working for me 
on the names you've got; maybe because I'm on a Mac, and that was 
compiled on Windows.  Perhaps someone else knows how to demangle those 
names?

Duncan Murdoch


From bbo|ker @end|ng |rom gm@||@com  Mon Jul  5 20:16:29 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 5 Jul 2021 14:16:29 -0400
Subject: [R-pkg-devel] weird C stack traces from win-builder,
 due to brms/rstan load?
In-Reply-To: <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>
References: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>
 <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>
Message-ID: <d0ff2bd1-e0b5-2e6e-81cf-8e3e3112d088@gmail.com>



On 7/5/21 2:01 PM, Duncan Murdoch wrote:
> On 05/07/2021 10:32 a.m., Ben Bolker wrote:
>> ?? I'm running into trouble checking a new release of the 'broom.mixed'
>> package <https://cran.r-project.org/web/packages/broom.mixed/index.html>
>> on win-builder.? I think it is some kind of rstan problem.
>>
>> ??? The broom.mixed package loads the brms package, and loads several
>> pre-computed objects from the brms package; I don't think it actually
>> tries to run anything of the functions from brms during the check 
>> process.
>>
>> ??? At several points during checking (see
>> <https://win-builder.r-project.org/LsDDMqpnX52n/00check.log>), I get
>> voluminous "C stack trace" outputs: once when "Checking dependencies in
>> R code", once when calling require(brms) as part of an example, once
>> when running the tests (not easy to determine the precise location, and
>> once when building the vignettes).
>>
>> ??? The trace starts like this:
>>
>> ==== C stack trace ===============================
>>
>> ????SETCAR [0x0x6c838a90+32]
>> ????ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE 
>> [0x0x6ac093ff+1151]
>> ????ZN4Rcpp6Module12classes_infoEv [0x0x6ac07467+327]
>> ????Z20Module__classes_infoP7SEXPREC [0x0x6abe1c4a+74]
>> ????Rf_NewFrameConfirm [0x0x6c7a7d18+33960]
>> ????R_initAssignSymbols [0x0x6c7f3259+53849]
>> ????Rf_eval [0x0x6c7fcd31+369]
>> ...
>>
>> ??? and goes on for a while.
>>
>> ??? R CMD check runs fine on Linux with recent r-devel.
>>
>> ??? Has anyone seen this?? Other than scrubbing all references to brms
>> and rstan (a second try with one of the brms references avoided instead
>> runs into trouble when loading rstan ...), I don't see what I can do ...
>>
>> <https://win-builder.r-project.org/YArr24tuYZ8G/00check.log>
>>
> 
> What error do you get before the stack trace?
> 
> The Z... names look like C++ entry points to overloaded functions or 
> methods.? There's a command line function (c++filt) that will usually 
> turn those into their original readable form.? It's not working for me 
> on the names you've got; maybe because I'm on a Mac, and that was 
> compiled on Windows.? Perhaps someone else knows how to demangle those 
> names?
> 
> Duncan Murdoch

   No obvious errors at all before the stack trace. I'm pretty sure that 
the stack trace is caused by the *act of loading the rstan package*.

   I guess the next thing to do would be to make a dummy package that 
does *nothing* but try to load rstan ... ?

=---

Here's the start of the text the first time this appears:

* checking dependencies in R code ... NOTE

==== C stack trace ===============================
	SETCAR [0x0x6c838a90+32]
	ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE [0x0x6ac093ff+1151]
---


   Here is another example:


Error(s) in re-building vignettes:
--- re-building 'broom_mixed_intro.rmd' using rmarkdown

Attaching package: 'dplyr'

The following objects are masked from 'package:stats':

     filter, lag

The following objects are masked from 'package:base':

     intersect, setdiff, setequal, union

Loading required package: brms
Loading required package: Rcpp

==== C stack trace ===============================

	SETCAR [0x0x6c838a90+32]
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Jul  5 20:50:39 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 5 Jul 2021 11:50:39 -0700
Subject: [R-pkg-devel] weird C stack traces from win-builder,
 due to brms/rstan load?
In-Reply-To: <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>
References: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>
 <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>
Message-ID: <CAHqSRuQiBJ6Nojby3vra8NJL4UxcRefpPHmyE7hdfYg3XDXv7Q@mail.gmail.com>

I think the stack trace is omitting the initial underscore in the symbol
name:

> c++filt
_ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE
Rcpp::CppClass::CppClass(Rcpp::Module*, Rcpp::class_Base*,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >&)

-Bill

On Mon, Jul 5, 2021 at 11:01 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 05/07/2021 10:32 a.m., Ben Bolker wrote:
> >    I'm running into trouble checking a new release of the 'broom.mixed'
> > package <https://cran.r-project.org/web/packages/broom.mixed/index.html>
> > on win-builder.  I think it is some kind of rstan problem.
> >
> >     The broom.mixed package loads the brms package, and loads several
> > pre-computed objects from the brms package; I don't think it actually
> > tries to run anything of the functions from brms during the check
> process.
> >
> >     At several points during checking (see
> > <https://win-builder.r-project.org/LsDDMqpnX52n/00check.log>), I get
> > voluminous "C stack trace" outputs: once when "Checking dependencies in
> > R code", once when calling require(brms) as part of an example, once
> > when running the tests (not easy to determine the precise location, and
> > once when building the vignettes).
> >
> >     The trace starts like this:
> >
> > ==== C stack trace ===============================
> >
> >       SETCAR [0x0x6c838a90+32]
> >
>  ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE
> [0x0x6ac093ff+1151]
> >       ZN4Rcpp6Module12classes_infoEv [0x0x6ac07467+327]
> >       Z20Module__classes_infoP7SEXPREC [0x0x6abe1c4a+74]
> >       Rf_NewFrameConfirm [0x0x6c7a7d18+33960]
> >       R_initAssignSymbols [0x0x6c7f3259+53849]
> >       Rf_eval [0x0x6c7fcd31+369]
> > ...
> >
> >     and goes on for a while.
> >
> >     R CMD check runs fine on Linux with recent r-devel.
> >
> >     Has anyone seen this?  Other than scrubbing all references to brms
> > and rstan (a second try with one of the brms references avoided instead
> > runs into trouble when loading rstan ...), I don't see what I can do ...
> >
> > <https://win-builder.r-project.org/YArr24tuYZ8G/00check.log>
> >
>
> What error do you get before the stack trace?
>
> The Z... names look like C++ entry points to overloaded functions or
> methods.  There's a command line function (c++filt) that will usually
> turn those into their original readable form.  It's not working for me
> on the names you've got; maybe because I'm on a Mac, and that was
> compiled on Windows.  Perhaps someone else knows how to demangle those
> names?
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Mon Jul  5 23:12:40 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Mon, 5 Jul 2021 23:12:40 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <018601d77190$7b8ac400$72a04c00$@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
Message-ID: <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>

Hello,
Thank you all for the suggestions.

I am starting being a bit worried because I seem not being able to fix the issue.

I have never experienced issues with this package (movecost);
the last new version I have released to CRAN was released a couple of weeks ago with no issue whatsoever.

The new version I am trying to get on CRAN has just one difference: the ?chorn??package?has been added to the dependencies.
Now, I have tried to drop that new dependency, and I have run the tests. Same result.
The test using?devtools::check_win_release() and?devtools::check_win_devel() both return 1 error (lazy loading failed for package ?movecost?)

The test using?devtools::check_win_oldrelease() is OK.


I also tried to keep the new dependency and to drop the lazy download instead (in DESCRIPTION I have put?LazyData: false). I got the same results as above.

The package checks perfectly on my MAC, and checked perfectly when I asked a Win users to test the package on his PC (with the latest version of R).


I am really scratching my head.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 13:25 +0200, dbosak01 at gmail.com, wrote:
> For the lazy loading error, if you are not intentionally lazy loading data, you should remove the lazy loading entry from the description file. Previously this was not causing any problems with the CRAN checks, but now it is.
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Gianmarco Alberti
> Sent: Monday, July 5, 2021 5:27 AM
> To: r-package-devel at r-project.org; Uwe Ligges <ligges at statistik.tu-dortmund.de>
> Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
>
> Hello,
> Thanks for your reply.
>
> I got mixed results using:
> devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7
>
> devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR
>
> devtools::check_win_devel() - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
>
> The reported error is to be:
> ERROR: lazy loading failed for package ?movecost?
>
> Since I couldn?t understand the actual underlying issue, I ran devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.
>
> I have tested the package on Win (R version 4.1) and everything was fine.
>
> I hope I have addressed your question.
> Please let me know if you need any other relevant info from my end.
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> > What happens when you test it on winbuilder?
> > It is configured like the CRAN incoming checks and there should be all
> > relevant packages available.
> >
> > Best,
> > Uwe Ligges
> >
> >
> > On 05.07.2021 11:16, Gianmarco Alberti wrote:
> > > Hello,
> > > Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> > >
> > > I ran devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> > >
> > > Bioconductor does not yet build and check packages for R version 4.2
> > >
> > > The complete report that I got from devtools::check_rhub() is here:
> > > https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a4144
> > > 98921e9ab2a54aaf
> > >
> > >
> > > Any idea about how to proceed in order for me to get my package on CRAN?
> > > I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> > >
> > > Best
> > > GmA
> > >
> > > ************************************************
> > > Dr Gianmarco Alberti (PhD Udine)
> > > Lecturer in Spatial Forensics
> > > Coordinator of the BA dissertations
> > > Department of Criminology
> > > Faculty for Social Wellbeing
> > > Room 332, Humanities B (FEMA)
> > > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340
> > > 3718
> > >
> > > Academic profiles
> > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > https://malta.academia.edu/GianmarcoAlberti
> > >
> > > Google Scholar profile
> > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > >
> > > Correspondence Analysis website
> > > http://cainarchaeology.weebly.com/
> > >
> > > R packages on CRAN:
> > > CAinterprTools
> > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > >
> > > GmAMisc
> > > https://cran.r-project.org/package=GmAMisc
> > >
> > > movecost
> > > https://cran.r-project.org/web/packages/movecost/index.html
> > > ************************************************
> > > On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > > > Good morning,
> > > >
> > > > I got stuck on what follows.
> > > > I have tested a new version of my package locally (on a MAC), and everything is fine.
> > > >
> > > > I got mixed results using:
> > > > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -
> > > > https://win-builder.r-project.org/7qy6PL8C7ye7
> > > >
> > > > devtools::check_win_release() - 1 ERROR (R version 4.1.0) -
> > > > https://win-builder.r-project.org/hlA15dFq5BdR
> > > >
> > > > devtools::check_win_devel() - 1 ERROR (R Under development
> > > > (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
> > > >
> > > > The reported error seems to be:
> > > > ERROR: lazy loading failed for package ?movecost'
> > > >
> > > >
> > > > I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
> > > >
> > > > Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
> > > >
> > > > I would really appreciate any help and/or suggestion.
> > > >
> > > > Best
> > > > Gianmarco
> > > >
> > > >
> > > >
> > > >
> > > > ************************************************
> > > > Dr Gianmarco Alberti (PhD Udine)
> > > > Lecturer in Spatial Forensics
> > > > Coordinator of the BA dissertations Department of Criminology
> > > > Faculty for Social Wellbeing Room 332, Humanities B (FEMA)
> > > > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356
> > > > 2340 3718
> > > >
> > > > Academic profiles
> > > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > > https://malta.academia.edu/GianmarcoAlberti
> > > >
> > > > Google Scholar profile
> > > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > > >
> > > > Correspondence Analysis website
> > > > http://cainarchaeology.weebly.com/
> > > >
> > > > R packages on CRAN:
> > > > CAinterprTools
> > > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > > >
> > > > GmAMisc
> > > > https://cran.r-project.org/package=GmAMisc
> > > >
> > > > movecost
> > > > https://cran.r-project.org/web/packages/movecost/index.html
> > > > ************************************************
> > >
> > > [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From dbos@k01 m@iii@g oii gm@ii@com  Mon Jul  5 23:46:54 2021
From: dbos@k01 m@iii@g oii gm@ii@com (dbos@k01 m@iii@g oii gm@ii@com)
Date: Mon, 5 Jul 2021 17:46:54 -0400
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
Message-ID: <01a601d771e7$457f1760$d07d4620$@gmail.com>

Gm:

 

Did you try completely removing the LazyData line from the description file?

 

David

 

From: Gianmarco Alberti <gianmarcoalberti at gmail.com> 
Sent: Monday, July 5, 2021 5:13 PM
To: r-package-devel at r-project.org; Uwe Ligges <ligges at statistik.tu-dortmund.de>; dbosak01 at gmail.com
Subject: RE: [R-pkg-devel] package test returns error when R version 4.1.0

 

Hello, 

Thank you all for the suggestions.

 

I am starting being a bit worried because I seem not being able to fix the issue.

 

I have never experienced issues with this package (movecost); 

the last new version I have released to CRAN was released a couple of weeks ago with no issue whatsoever.

 

The new version I am trying to get on CRAN has just one difference: the ?chorn? package has been added to the dependencies.

Now, I have tried to drop that new dependency, and I have run the tests. Same result.

The test using devtools::check_win_release() and devtools::check_win_devel() both return 1 error (lazy loading failed for package ?movecost?)

 

The test using devtools::check_win_oldrelease() is OK.

 

 

I also tried to keep the new dependency and to drop the lazy download instead (in DESCRIPTION I have put LazyData: false). I got the same results as above.

 

The package checks perfectly on my MAC, and checked perfectly when I asked a Win users to test the package on his PC (with the latest version of R).

 

 

I am really scratching my head.

 

Best

Gm


************************************************

Dr Gianmarco Alberti (PhD Udine)

Lecturer in Spatial Forensics
Coordinator of the BA dissertations

Department of Criminology

Faculty for Social Wellbeing

Room 332, Humanities B (FEMA)

University of Malta, Msida, Malta (Europe) - MSD 2080

tel +356 2340 3718



Academic profiles

https://www.researchgate.net/profile/Gianmarco_Alberti4

https://malta.academia.edu/GianmarcoAlberti



Google Scholar profile

https://scholar.google.com/citations?user=tFrJKQ0AAAAJ <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en> &hl=en



Correspondence Analysis website

http://cainarchaeology.weebly.com/



R packages on CRAN:

CAinterprTools

https://cran.r-project.org/web/packages/CAinterprTools/index.html



GmAMisc

https://cran.r-project.org/package=GmAMisc



movecost

https://cran.r-project.org/web/packages/movecost/index.html

************************************************

On 5 Jul 2021, 13:25 +0200, dbosak01 at gmail.com <mailto:dbosak01 at gmail.com> , wrote:



For the lazy loading error, if you are not intentionally lazy loading data, you should remove the lazy loading entry from the description file. Previously this was not causing any problems with the CRAN checks, but now it is.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org> > On Behalf Of Gianmarco Alberti
Sent: Monday, July 5, 2021 5:27 AM
To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> ; Uwe Ligges <ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de> >
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

Hello,
Thanks for your reply.

I got mixed results using:
devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7

devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR

devtools::check_win_devel() - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h

The reported error is to be:
ERROR: lazy loading failed for package ?movecost?

Since I couldn?t understand the actual underlying issue, I ran devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.

I have tested the package on Win (R version 4.1) and everything was fine.

I hope I have addressed your question.
Please let me know if you need any other relevant info from my end.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en> &hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de> >, wrote:



What happens when you test it on winbuilder?
It is configured like the CRAN incoming checks and there should be all
relevant packages available.

Best,
Uwe Ligges


On 05.07.2021 11:16, Gianmarco Alberti wrote:



Hello,
Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.

I ran devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:

Bioconductor does not yet build and check packages for R version 4.2

The complete report that I got from devtools::check_rhub() is here:
https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a4144
98921e9ab2a54aaf


Any idea about how to proceed in order for me to get my package on CRAN?
I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).

Best
GmA

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340
3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en> &hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com> >, wrote:



Good morning,

I got stuck on what follows.
I have tested a new version of my package locally (on a MAC), and everything is fine.

I got mixed results using:
devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -
https://win-builder.r-project.org/7qy6PL8C7ye7

devtools::check_win_release() - 1 ERROR (R version 4.1.0) -
https://win-builder.r-project.org/hlA15dFq5BdR

devtools::check_win_devel() - 1 ERROR (R Under development
(unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h

The reported error seems to be:
ERROR: lazy loading failed for package ?movecost'


I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).

Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.

I would really appreciate any help and/or suggestion.

Best
Gianmarco




************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations Department of Criminology
Faculty for Social Wellbeing Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356
2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en> &hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************


[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jul  6 03:01:48 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 5 Jul 2021 21:01:48 -0400
Subject: [R-pkg-devel] weird C stack traces from win-builder,
 due to brms/rstan load?
In-Reply-To: <CAHqSRuQiBJ6Nojby3vra8NJL4UxcRefpPHmyE7hdfYg3XDXv7Q@mail.gmail.com>
References: <8263f0ef-c0e3-58cd-0ee8-ab3fa409d1f0@mcmaster.ca>
 <6153c8a5-b2b9-a487-5ae7-a6596fd23c75@gmail.com>
 <CAHqSRuQiBJ6Nojby3vra8NJL4UxcRefpPHmyE7hdfYg3XDXv7Q@mail.gmail.com>
Message-ID: <ac22c326-a8a0-adc3-0932-0284d50b22f6@gmail.com>

On 05/07/2021 2:50 p.m., Bill Dunlap wrote:
> I think the stack trace is omitting the initial underscore in the symbol 
> name:
> 
>  > c++filt 
> _ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE
> Rcpp::CppClass::CppClass(Rcpp::Module*, Rcpp::class_Base*, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> >&)

Thanks.  It doesn't work for me with the leading underscore, but I'm 
using a clang based compiler, not gcc, so maybe that explains it.  (I've 
tried most of the --format= options, without success.)

Duncan



> -Bill
> 
> On Mon, Jul 5, 2021 at 11:01 AM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 05/07/2021 10:32 a.m., Ben Bolker wrote:
>      >? ? I'm running into trouble checking a new release of the
>     'broom.mixed'
>      > package
>     <https://cran.r-project.org/web/packages/broom.mixed/index.html
>     <https://cran.r-project.org/web/packages/broom.mixed/index.html>>
>      > on win-builder.? I think it is some kind of rstan problem.
>      >
>      >? ? ?The broom.mixed package loads the brms package, and loads several
>      > pre-computed objects from the brms package; I don't think it actually
>      > tries to run anything of the functions from brms during the check
>     process.
>      >
>      >? ? ?At several points during checking (see
>      > <https://win-builder.r-project.org/LsDDMqpnX52n/00check.log
>     <https://win-builder.r-project.org/LsDDMqpnX52n/00check.log>>), I get
>      > voluminous "C stack trace" outputs: once when "Checking
>     dependencies in
>      > R code", once when calling require(brms) as part of an example, once
>      > when running the tests (not easy to determine the precise
>     location, and
>      > once when building the vignettes).
>      >
>      >? ? ?The trace starts like this:
>      >
>      > ==== C stack trace ===============================
>      >
>      >? ? ? ?SETCAR [0x0x6c838a90+32]
>      >     
>      ?ZN4Rcpp8CppClassC1EPNS_6ModuleEPNS_10class_BaseERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE [0x0x6ac093ff+1151]
>      >? ? ? ?ZN4Rcpp6Module12classes_infoEv [0x0x6ac07467+327]
>      >? ? ? ?Z20Module__classes_infoP7SEXPREC [0x0x6abe1c4a+74]
>      >? ? ? ?Rf_NewFrameConfirm [0x0x6c7a7d18+33960]
>      >? ? ? ?R_initAssignSymbols [0x0x6c7f3259+53849]
>      >? ? ? ?Rf_eval [0x0x6c7fcd31+369]
>      > ...
>      >
>      >? ? ?and goes on for a while.
>      >
>      >? ? ?R CMD check runs fine on Linux with recent r-devel.
>      >
>      >? ? ?Has anyone seen this?? Other than scrubbing all references to
>     brms
>      > and rstan (a second try with one of the brms references avoided
>     instead
>      > runs into trouble when loading rstan ...), I don't see what I can
>     do ...
>      >
>      > <https://win-builder.r-project.org/YArr24tuYZ8G/00check.log
>     <https://win-builder.r-project.org/YArr24tuYZ8G/00check.log>>
>      >
> 
>     What error do you get before the stack trace?
> 
>     The Z... names look like C++ entry points to overloaded functions or
>     methods.? There's a command line function (c++filt) that will usually
>     turn those into their original readable form.? It's not working for me
>     on the names you've got; maybe because I'm on a Mac, and that was
>     compiled on Windows.? Perhaps someone else knows how to demangle those
>     names?
> 
>     Duncan Murdoch
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Tue Jul  6 07:22:53 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Tue, 6 Jul 2021 07:22:53 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <01a601d771e7$457f1760$d07d4620$@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
Message-ID: <17c22932-e168-4730-a085-ccf6e2e5a878@Spark>

Hello,
Thank you.
Yes I just tried that option, but I still get the same ?error:
https://win-builder.r-project.org/2OF2vD11Uxe3

Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 5 Jul 2021, 23:46 +0200, dbosak01 at gmail.com, wrote:
> Gm:
>
> Did you try completely removing the LazyData line from the description file?
>
> David
>
> From: Gianmarco Alberti <gianmarcoalberti at gmail.com>
> Sent: Monday, July 5, 2021 5:13 PM
> To: r-package-devel at r-project.org; Uwe Ligges <ligges at statistik.tu-dortmund.de>; dbosak01 at gmail.com
> Subject: RE: [R-pkg-devel] package test returns error when R version 4.1.0
>
> Hello,
> Thank you all for the suggestions.
>
> I am starting being a bit worried because I seem not being able to fix the issue.
>
> I have never experienced issues with this package (movecost);
> the last new version I have released to CRAN was released a couple of weeks ago with no issue whatsoever.
>
> The new version I am trying to get on CRAN has just one difference: the ?chorn??package?has been added to the dependencies.
> Now, I have tried to drop that new dependency, and I have run the tests. Same result.
> The test using?devtools::check_win_release() and?devtools::check_win_devel() both return 1 error (lazy loading failed for package ?movecost?)
>
> The test using?devtools::check_win_oldrelease() is OK.
>
>
> I also tried to keep the new dependency and to drop the lazy download instead (in DESCRIPTION I have put?LazyData: false). I got the same results as above.
>
> The package checks perfectly on my MAC, and checked perfectly when I asked a Win users to test the package on his PC (with the latest version of R).
>
>
> I am really scratching my head.
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 5 Jul 2021, 13:25 +0200, dbosak01 at gmail.com, wrote:
>
> > For the lazy loading error, if you are not intentionally lazy loading data, you should remove the lazy loading entry from the description file. Previously this was not causing any problems with the CRAN checks, but now it is.
> >
> > -----Original Message-----
> > From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Gianmarco Alberti
> > Sent: Monday, July 5, 2021 5:27 AM
> > To: r-package-devel at r-project.org; Uwe Ligges <ligges at statistik.tu-dortmund.de>
> > Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
> >
> > Hello,
> > Thanks for your reply.
> >
> > I got mixed results using:
> > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) - https://win-builder.r-project.org/7qy6PL8C7ye7
> >
> > devtools::check_win_release() - 1 ERROR (R version 4.1.0) - https://win-builder.r-project.org/hlA15dFq5BdR
> >
> > devtools::check_win_devel() - 1 ERROR (R Under development (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
> >
> > The reported error is to be:
> > ERROR: lazy loading failed for package ?movecost?
> >
> > Since I couldn?t understand the actual underlying issue, I ran devtools::check_rhub() (as described in my earlier email) which brought to the fore the Bioconductor issue.
> >
> > I have tested the package on Win (R version 4.1) and everything was fine.
> >
> > I hope I have addressed your question.
> > Please let me know if you need any other relevant info from my end.
> >
> > Best
> > Gm
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA dissertations
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340 3718
> >
> > Academic profiles
> > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > https://malta.academia.edu/GianmarcoAlberti
> >
> > Google Scholar profile
> > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> >
> > Correspondence Analysis website
> > http://cainarchaeology.weebly.com/
> >
> > R packages on CRAN:
> > CAinterprTools
> > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> >
> > GmAMisc
> > https://cran.r-project.org/package=GmAMisc
> >
> > movecost
> > https://cran.r-project.org/web/packages/movecost/index.html
> > ************************************************
> > On 5 Jul 2021, 11:20 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> >
> > > What happens when you test it on winbuilder?
> > > It is configured like the CRAN incoming checks and there should be all
> > > relevant packages available.
> > >
> > > Best,
> > > Uwe Ligges
> > >
> > >
> > > On 05.07.2021 11:16, Gianmarco Alberti wrote:
> > >
> > > > Hello,
> > > > Further to my earlier email, I think I have located a likely issue, and I would appreciate feedback.
> > > >
> > > > I ran devtools::check_rhub(), and somewhere in the flood of the output I got there is the following message:
> > > >
> > > > Bioconductor does not yet build and check packages for R version 4.2
> > > >
> > > > The complete report that I got from devtools::check_rhub() is here:
> > > > https://builder.r-hub.io/status/movecost_1.2.tar.gz-cbda0dbe4d7a4144
> > > > 98921e9ab2a54aaf
> > > >
> > > >
> > > > Any idea about how to proceed in order for me to get my package on CRAN?
> > > > I am noticing that I am not the only one experiencing that isse (https://github.com/r-hub/rhub/issues/471).
> > > >
> > > > Best
> > > > GmA
> > > >
> > > > ************************************************
> > > > Dr Gianmarco Alberti (PhD Udine)
> > > > Lecturer in Spatial Forensics
> > > > Coordinator of the BA dissertations
> > > > Department of Criminology
> > > > Faculty for Social Wellbeing
> > > > Room 332, Humanities B (FEMA)
> > > > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356 2340
> > > > 3718
> > > >
> > > > Academic profiles
> > > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > > https://malta.academia.edu/GianmarcoAlberti
> > > >
> > > > Google Scholar profile
> > > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > > >
> > > > Correspondence Analysis website
> > > > http://cainarchaeology.weebly.com/
> > > >
> > > > R packages on CRAN:
> > > > CAinterprTools
> > > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > > >
> > > > GmAMisc
> > > > https://cran.r-project.org/package=GmAMisc
> > > >
> > > > movecost
> > > > https://cran.r-project.org/web/packages/movecost/index.html
> > > > ************************************************
> > > > On 5 Jul 2021, 09:49 +0200, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > > >
> > > > > Good morning,
> > > > >
> > > > > I got stuck on what follows.
> > > > > I have tested a new version of my package locally (on a MAC), and everything is fine.
> > > > >
> > > > > I got mixed results using:
> > > > > devtools::check_win_oldrelease() - STATUS OK (R version 4.0.5) -
> > > > > https://win-builder.r-project.org/7qy6PL8C7ye7
> > > > >
> > > > > devtools::check_win_release() - 1 ERROR (R version 4.1.0) -
> > > > > https://win-builder.r-project.org/hlA15dFq5BdR
> > > > >
> > > > > devtools::check_win_devel() - 1 ERROR (R Under development
> > > > > (unstable) - https://win-builder.r-project.org/uQ0LGZ7v0E5h
> > > > >
> > > > > The reported error seems to be:
> > > > > ERROR: lazy loading failed for package ?movecost'
> > > > >
> > > > >
> > > > > I have asked a friend to run devtools::check() on his Win-based machine (running R version 4.1.0), and the test returned no problems (0 error, 0 warning, 0 notes).
> > > > >
> > > > > Since I cannot reproduce the error neither on my computer nor on a win-based machine, I am at loss of understanding where the issue actually lies.
> > > > >
> > > > > I would really appreciate any help and/or suggestion.
> > > > >
> > > > > Best
> > > > > Gianmarco
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > ************************************************
> > > > > Dr Gianmarco Alberti (PhD Udine)
> > > > > Lecturer in Spatial Forensics
> > > > > Coordinator of the BA dissertations Department of Criminology
> > > > > Faculty for Social Wellbeing Room 332, Humanities B (FEMA)
> > > > > University of Malta, Msida, Malta (Europe) - MSD 2080 tel +356
> > > > > 2340 3718
> > > > >
> > > > > Academic profiles
> > > > > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > > > > https://malta.academia.edu/GianmarcoAlberti
> > > > >
> > > > > Google Scholar profile
> > > > > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > > > >
> > > > > Correspondence Analysis website
> > > > > http://cainarchaeology.weebly.com/
> > > > >
> > > > > R packages on CRAN:
> > > > > CAinterprTools
> > > > > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> > > > >
> > > > > GmAMisc
> > > > > https://cran.r-project.org/package=GmAMisc
> > > > >
> > > > > movecost
> > > > > https://cran.r-project.org/web/packages/movecost/index.html
> > > > > ************************************************
> > > >
> > > > [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jul  6 12:35:20 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 6 Jul 2021 12:35:20 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <01a601d771e7$457f1760$d07d4620$@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
Message-ID: <24804.12776.897797.180095@stat.math.ethz.ch>

>>>>>   
>>>>>     on Mon, 5 Jul 2021 17:46:54 -0400 writes:

    > Gm:


    > Did you try completely removing the LazyData line from the
    > description file?


    > David

Dear David,

where did you get this "idea" that 'LazyData'  is not good  for
 R 4.1.0 and newer ?

R's own  {datasets} package  *does* use lazyloading, and so do
most (formally) recommended packages, and I think most packages
I (co-)maintain, i.e., around two dozen CRAN packages do use
lazyloaded data.

---
*) The `Matrix` package is a big exception with 'Lazyload: No'
because its datasets partly are (S4-) classed objects from the package
itself, and -- as the "WRE" ('Writing R Extensions') manual
states -- package datasets must not *need* the package itself when
they should be lazy loaded.

Martin

--
Martin Maechler
ETH Zurich  and  R Core Team

 
    > From: Gianmarco Alberti ..
    > Sent: Monday, July 5, 2021 5:13 PM 
    ...

    > Hello,

    > Thank you all for the suggestions.

    > I am starting being a bit worried because I seem not being
    > able to fix the issue.

[......]

    > I also tried to keep the new dependency and to drop the
    > lazy download instead (in DESCRIPTION I have put LazyData:
    > false). I got the same results as above.

    > The package checks perfectly on my MAC, and checked
    > perfectly when I asked a Win users to test the package on
    > his PC (with the latest version of R).

    > I am really scratching my head.

[....]

    > On 5 Jul 2021, 13:25 +0200, dbosak01 at gmail.com
    > <mailto:dbosak01 at gmail.com> , wrote:


    > For the lazy loading error, if you are not intentionally
    > lazy loading data, you should remove the lazy loading
    > entry from the description file. Previously this was not
    > causing any problems with the CRAN checks, but now it is.


From dbos@k01 m@iii@g oii gm@ii@com  Tue Jul  6 14:08:59 2021
From: dbos@k01 m@iii@g oii gm@ii@com (dbos@k01 m@iii@g oii gm@ii@com)
Date: Tue, 6 Jul 2021 08:08:59 -0400
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <24804.12776.897797.180095@stat.math.ethz.ch>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>	<4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>	<0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>	<689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>	<49dec377-6469-4eb3-bbe4-cba449b96097@Spark>	<018601d77190$7b8ac400$72a04c00$@gmail.com>	<a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>	<01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
Message-ID: <01d801d7725f$b461b200$1d251600$@gmail.com>

Martin:

What I suggested was he remove the LazyData entry from the description file
if he was NOT lazy loading data.  If someone is lazy loading data, then that
is a different situation, and they obviously need to set the entry. 

But clearly Gm has a different problem.  He has now tried "LazyData: true",
"LazyData: false", and removing the LazyData entry entirely.  And he is
still getting this error:  

* installing *source* package 'movecost' ...
** using staged installation
** R
** data
** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'movecost'
* removing 'd:/RCompile/CRANguest/R-release/lib/movecost'


So changing the description entry isn't helping.  Maybe someone else has a
suggestion of what to try next.


David

-----Original Message-----
From: Martin Maechler <maechler at stat.math.ethz.ch> 
Sent: Tuesday, July 6, 2021 6:35 AM
To: David <dbosak01 at gmail.com>
Cc: 'Gianmarco Alberti' <gianmarcoalberti at gmail.com>;
r-package-devel at r-project.org; 'Uwe Ligges'
<ligges at statistik.tu-dortmund.de>
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

>>>>>   
>>>>>     on Mon, 5 Jul 2021 17:46:54 -0400 writes:

    > Gm:


    > Did you try completely removing the LazyData line from the
    > description file?


    > David

Dear David,

where did you get this "idea" that 'LazyData'  is not good  for  R 4.1.0 and
newer ?

R's own  {datasets} package  *does* use lazyloading, and so do most
(formally) recommended packages, and I think most packages I (co-)maintain,
i.e., around two dozen CRAN packages do use lazyloaded data.

---
*) The `Matrix` package is a big exception with 'Lazyload: No'
because its datasets partly are (S4-) classed objects from the package
itself, and -- as the "WRE" ('Writing R Extensions') manual states --
package datasets must not *need* the package itself when they should be lazy
loaded.

Martin

--
Martin Maechler
ETH Zurich  and  R Core Team

 
    > From: Gianmarco Alberti ..
    > Sent: Monday, July 5, 2021 5:13 PM 
    ...

    > Hello,

    > Thank you all for the suggestions.

    > I am starting being a bit worried because I seem not being
    > able to fix the issue.

[......]

    > I also tried to keep the new dependency and to drop the
    > lazy download instead (in DESCRIPTION I have put LazyData:
    > false). I got the same results as above.

    > The package checks perfectly on my MAC, and checked
    > perfectly when I asked a Win users to test the package on
    > his PC (with the latest version of R).

    > I am really scratching my head.

[....]

    > On 5 Jul 2021, 13:25 +0200, dbosak01 at gmail.com
    > <mailto:dbosak01 at gmail.com> , wrote:


    > For the lazy loading error, if you are not intentionally
    > lazy loading data, you should remove the lazy loading
    > entry from the description file. Previously this was not
    > causing any problems with the CRAN checks, but now it is.


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Tue Jul  6 14:52:47 2021
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Tue, 6 Jul 2021 12:52:47 +0000 (UTC)
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <01d801d7725f$b461b200$1d251600$@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
Message-ID: <262461067.1979515.1625575967793@mail.yahoo.com>


> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com <dbosak01 at gmail.com> wrote:
>
> Martin:
>
> What I suggested was he remove the LazyData entry from the description file
> if he was NOT lazy loading data.? If someone is lazy loading data, then that
> is a different situation, and they obviously need to set the entry.
>
> But clearly Gm has a different problem.? He has now tried "LazyData: true",
> "LazyData: false", and removing the LazyData entry entirely.? And he is
> still getting this error:
>
> * installing *source* package 'movecost' ...
> ** using staged installation
> ** R
> ** data
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'movecost'
> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'

FWIW I think this is lazy loading of the code, which I think is
 different to what LazyData controls.? This is described in 
R-Internals:

https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading

I know nothing about it so I will not comment further.

Best,

B.


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Tue Jul  6 18:18:14 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Tue, 6 Jul 2021 18:18:14 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <262461067.1979515.1625575967793@mail.yahoo.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
Message-ID: <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>

Thank you all. I appreciate your help and discussion so far.

To complicate the matter further, I have done an experiment. I have tried to test a new version which is 99.9% identical to the last official one on CRAN because I wanted to understand if the issue was with some??new code added to the version I have been testing in the last couple of days.

The new version 1.2 (virtually identical to the 1.1 on CRAN) did not pass the tests as per my earlier description. Same errors. The only Ok is on my computer and with devtools? winoldrealeases()

I really don?t know that to do next.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <r-package-devel at r-project.org>, ha scritto:
>
> > On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com <dbosak01 at gmail.com> wrote:
> >
> > Martin:
> >
> > What I suggested was he remove the LazyData entry from the description file
> > if he was NOT lazy loading data.? If someone is lazy loading data, then that
> > is a different situation, and they obviously need to set the entry.
> >
> > But clearly Gm has a different problem.? He has now tried "LazyData: true",
> > "LazyData: false", and removing the LazyData entry entirely.? And he is
> > still getting this error:
> >
> > * installing *source* package 'movecost' ...
> > ** using staged installation
> > ** R
> > ** data
> > ** byte-compile and prepare package for lazy loading
> > ERROR: lazy loading failed for package 'movecost'
> > * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
>
> FWIW I think this is lazy loading of the code, which I think is
> different to what LazyData controls.? This is described in
> R-Internals:
>
> https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading
>
> I know nothing about it so I will not comment further.
>
> Best,
>
> B.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @|ex@chub@ty @end|ng |rom gm@||@com  Tue Jul  6 21:11:38 2021
From: @|ex@chub@ty @end|ng |rom gm@||@com (Alex Chubaty)
Date: Tue, 6 Jul 2021 13:11:38 -0600
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
Message-ID: <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>

FWIW I'm having the same issue with package NetLogoR (
https://github.com/PredictiveEcology/NetLogoR/)

Passing windows tests locally but code can't be lazy loaded on winbuilder,
except for oldrel.

Alex





On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
gianmarcoalberti at gmail.com> wrote:

> Thank you all. I appreciate your help and discussion so far.
>
> To complicate the matter further, I have done an experiment. I have tried
> to test a new version which is 99.9% identical to the last official one on
> CRAN because I wanted to understand if the issue was with some  new code
> added to the version I have been testing in the last couple of days.
>
> The new version 1.2 (virtually identical to the 1.1 on CRAN) did not pass
> the tests as per my earlier description. Same errors. The only Ok is on my
> computer and with devtools? winoldrealeases()
>
> I really don?t know that to do next.
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
> r-package-devel at r-project.org>, ha scritto:
> >
> > > On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com <
> dbosak01 at gmail.com> wrote:
> > >
> > > Martin:
> > >
> > > What I suggested was he remove the LazyData entry from the description
> file
> > > if he was NOT lazy loading data.  If someone is lazy loading data,
> then that
> > > is a different situation, and they obviously need to set the entry.
> > >
> > > But clearly Gm has a different problem.  He has now tried "LazyData:
> true",
> > > "LazyData: false", and removing the LazyData entry entirely.  And he is
> > > still getting this error:
> > >
> > > * installing *source* package 'movecost' ...
> > > ** using staged installation
> > > ** R
> > > ** data
> > > ** byte-compile and prepare package for lazy loading
> > > ERROR: lazy loading failed for package 'movecost'
> > > * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
> >
> > FWIW I think this is lazy loading of the code, which I think is
> > different to what LazyData controls.  This is described in
> > R-Internals:
> >
> > https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading
> >
> > I know nothing about it so I will not comment further.
> >
> > Best,
> >
> > B.
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jul  6 22:08:14 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 6 Jul 2021 16:08:14 -0400
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
Message-ID: <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>

Both NegLogoR and movecost have a lot of hard dependencies -- so many 
that I'm unwilling to install them with the limited bandwidth that I 
have right now.  I suspect that's related to the problem:  some 
dependency install is failing, and that causes something else to fail, 
and that leads to the not-very-informative failure messages.

This kind of problem is quite a lot of work to debug.  If I were going 
to attempt to do it, I would go for a bisection strategy:

  - Do you have any old revision which succeeds?  If so, use bisection 
on the revisions until you find the change which first triggers the error.

  - Perhaps no versions succeed, because something external to your 
package has triggered the error.  In this case, bisection would work on 
the dependencies:  cut out half of the dependencies and all the code 
that depends on those.  Have you fixed the error?  If so, add back half 
of the dependencies, otherwise cut out half of the remaining ones.

  - If you're still getting the errors after cutting out all of the 
dependencies, then start cutting out code and data. Etc.

In any case, try to find a version of the package that doesn't trigger 
the error, and a minimal change to it that does.  Then perhaps you'll 
understand the root cause of the error.

Duncan Murdoch

On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
> FWIW I'm having the same issue with package NetLogoR (
> https://github.com/PredictiveEcology/NetLogoR/)
> 
> Passing windows tests locally but code can't be lazy loaded on winbuilder,
> except for oldrel.
> 
> Alex
> 
> 
> 
> 
> 
> On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
> gianmarcoalberti at gmail.com> wrote:
> 
>> Thank you all. I appreciate your help and discussion so far.
>>
>> To complicate the matter further, I have done an experiment. I have tried
>> to test a new version which is 99.9% identical to the last official one on
>> CRAN because I wanted to understand if the issue was with some  new code
>> added to the version I have been testing in the last couple of days.
>>
>> The new version 1.2 (virtually identical to the 1.1 on CRAN) did not pass
>> the tests as per my earlier description. Same errors. The only Ok is on my
>> computer and with devtools? winoldrealeases()
>>
>> I really don?t know that to do next.
>>
>> Best
>> Gm
>>
>> ************************************************
>> Dr Gianmarco Alberti (PhD Udine)
>> Lecturer in Spatial Forensics
>> Coordinator of the BA dissertations
>> Department of Criminology
>> Faculty for Social Wellbeing
>> Room 332, Humanities B (FEMA)
>> University of Malta, Msida, Malta (Europe) - MSD 2080
>> tel +356 2340 3718
>>
>> Academic profiles
>> https://www.researchgate.net/profile/Gianmarco_Alberti4
>> https://malta.academia.edu/GianmarcoAlberti
>>
>> Google Scholar profile
>> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>>
>> Correspondence Analysis website
>> http://cainarchaeology.weebly.com/
>>
>> R packages on CRAN:
>> CAinterprTools
>> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>>
>> GmAMisc
>> https://cran.r-project.org/package=GmAMisc
>>
>> movecost
>> https://cran.r-project.org/web/packages/movecost/index.html
>> ************************************************
>> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
>> r-package-devel at r-project.org>, ha scritto:
>>>
>>>> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com <
>> dbosak01 at gmail.com> wrote:
>>>>
>>>> Martin:
>>>>
>>>> What I suggested was he remove the LazyData entry from the description
>> file
>>>> if he was NOT lazy loading data.  If someone is lazy loading data,
>> then that
>>>> is a different situation, and they obviously need to set the entry.
>>>>
>>>> But clearly Gm has a different problem.  He has now tried "LazyData:
>> true",
>>>> "LazyData: false", and removing the LazyData entry entirely.  And he is
>>>> still getting this error:
>>>>
>>>> * installing *source* package 'movecost' ...
>>>> ** using staged installation
>>>> ** R
>>>> ** data
>>>> ** byte-compile and prepare package for lazy loading
>>>> ERROR: lazy loading failed for package 'movecost'
>>>> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
>>>
>>> FWIW I think this is lazy loading of the code, which I think is
>>> different to what LazyData controls.  This is described in
>>> R-Internals:
>>>
>>> https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading
>>>
>>> I know nothing about it so I will not comment further.
>>>
>>> Best,
>>>
>>> B.
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|ex@chub@ty @end|ng |rom gm@||@com  Tue Jul  6 22:15:30 2021
From: @|ex@chub@ty @end|ng |rom gm@||@com (Alex Chubaty)
Date: Tue, 6 Jul 2021 14:15:30 -0600
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
Message-ID: <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>

Thanks for the suggestion Duncan.

The same code version ran on winbuilder last week, but it's broken this
week.

I'll compare the dependencies between the two packages and focus on those
used by both for now, to see if it's caused by a broken dependency.

Alex


On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> Both NegLogoR and movecost have a lot of hard dependencies -- so many
> that I'm unwilling to install them with the limited bandwidth that I
> have right now.  I suspect that's related to the problem:  some
> dependency install is failing, and that causes something else to fail,
> and that leads to the not-very-informative failure messages.
>
> This kind of problem is quite a lot of work to debug.  If I were going
> to attempt to do it, I would go for a bisection strategy:
>
>   - Do you have any old revision which succeeds?  If so, use bisection
> on the revisions until you find the change which first triggers the error.
>
>   - Perhaps no versions succeed, because something external to your
> package has triggered the error.  In this case, bisection would work on
> the dependencies:  cut out half of the dependencies and all the code
> that depends on those.  Have you fixed the error?  If so, add back half
> of the dependencies, otherwise cut out half of the remaining ones.
>
>   - If you're still getting the errors after cutting out all of the
> dependencies, then start cutting out code and data. Etc.
>
> In any case, try to find a version of the package that doesn't trigger
> the error, and a minimal change to it that does.  Then perhaps you'll
> understand the root cause of the error.
>
> Duncan Murdoch
>
> On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
> > FWIW I'm having the same issue with package NetLogoR (
> > https://github.com/PredictiveEcology/NetLogoR/)
> >
> > Passing windows tests locally but code can't be lazy loaded on
> winbuilder,
> > except for oldrel.
> >
> > Alex
> >
> >
> >
> >
> >
> > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
> > gianmarcoalberti at gmail.com> wrote:
> >
> >> Thank you all. I appreciate your help and discussion so far.
> >>
> >> To complicate the matter further, I have done an experiment. I have
> tried
> >> to test a new version which is 99.9% identical to the last official one
> on
> >> CRAN because I wanted to understand if the issue was with some  new code
> >> added to the version I have been testing in the last couple of days.
> >>
> >> The new version 1.2 (virtually identical to the 1.1 on CRAN) did not
> pass
> >> the tests as per my earlier description. Same errors. The only Ok is on
> my
> >> computer and with devtools? winoldrealeases()
> >>
> >> I really don?t know that to do next.
> >>
> >> Best
> >> Gm
> >>
> >> ************************************************
> >> Dr Gianmarco Alberti (PhD Udine)
> >> Lecturer in Spatial Forensics
> >> Coordinator of the BA dissertations
> >> Department of Criminology
> >> Faculty for Social Wellbeing
> >> Room 332, Humanities B (FEMA)
> >> University of Malta, Msida, Malta (Europe) - MSD 2080
> >> tel +356 2340 3718
> >>
> >> Academic profiles
> >> https://www.researchgate.net/profile/Gianmarco_Alberti4
> >> https://malta.academia.edu/GianmarcoAlberti
> >>
> >> Google Scholar profile
> >> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> >>
> >> Correspondence Analysis website
> >> http://cainarchaeology.weebly.com/
> >>
> >> R packages on CRAN:
> >> CAinterprTools
> >> https://cran.r-project.org/web/packages/CAinterprTools/index.html
> >>
> >> GmAMisc
> >> https://cran.r-project.org/package=GmAMisc
> >>
> >> movecost
> >> https://cran.r-project.org/web/packages/movecost/index.html
> >> ************************************************
> >> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
> >> r-package-devel at r-project.org>, ha scritto:
> >>>
> >>>> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com <
> >> dbosak01 at gmail.com> wrote:
> >>>>
> >>>> Martin:
> >>>>
> >>>> What I suggested was he remove the LazyData entry from the description
> >> file
> >>>> if he was NOT lazy loading data.  If someone is lazy loading data,
> >> then that
> >>>> is a different situation, and they obviously need to set the entry.
> >>>>
> >>>> But clearly Gm has a different problem.  He has now tried "LazyData:
> >> true",
> >>>> "LazyData: false", and removing the LazyData entry entirely.  And he
> is
> >>>> still getting this error:
> >>>>
> >>>> * installing *source* package 'movecost' ...
> >>>> ** using staged installation
> >>>> ** R
> >>>> ** data
> >>>> ** byte-compile and prepare package for lazy loading
> >>>> ERROR: lazy loading failed for package 'movecost'
> >>>> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
> >>>
> >>> FWIW I think this is lazy loading of the code, which I think is
> >>> different to what LazyData controls.  This is described in
> >>> R-Internals:
> >>>
> >>> https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading
> >>>
> >>> I know nothing about it so I will not comment further.
> >>>
> >>> Best,
> >>>
> >>> B.
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jul  6 22:28:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 6 Jul 2021 16:28:23 -0400
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
Message-ID: <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>

On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
> Thanks for the suggestion Duncan.
> 
> The same code version ran on winbuilder last week, but it's broken this 
> week.

If that happened with a released version of R, then it could be that 
some new package version is causing the problem, or it could be a 
transient problem on Winbuilder.

Devel versions of R change every day, so there are more possibilities 
for origins of the problem there.

Duncan Murdoch

> 
> I'll compare the dependencies between the two packages and focus on 
> those used by both for now, to see if it's caused by a broken dependency.
> 
> Alex
> 
> 
> On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     Both NegLogoR and movecost have a lot of hard dependencies -- so many
>     that I'm unwilling to install them with the limited bandwidth that I
>     have right now.? I suspect that's related to the problem:? some
>     dependency install is failing, and that causes something else to fail,
>     and that leads to the not-very-informative failure messages.
> 
>     This kind of problem is quite a lot of work to debug.? If I were going
>     to attempt to do it, I would go for a bisection strategy:
> 
>      ? - Do you have any old revision which succeeds?? If so, use bisection
>     on the revisions until you find the change which first triggers the
>     error.
> 
>      ? - Perhaps no versions succeed, because something external to your
>     package has triggered the error.? In this case, bisection would work on
>     the dependencies:? cut out half of the dependencies and all the code
>     that depends on those.? Have you fixed the error?? If so, add back half
>     of the dependencies, otherwise cut out half of the remaining ones.
> 
>      ? - If you're still getting the errors after cutting out all of the
>     dependencies, then start cutting out code and data. Etc.
> 
>     In any case, try to find a version of the package that doesn't trigger
>     the error, and a minimal change to it that does.? Then perhaps you'll
>     understand the root cause of the error.
> 
>     Duncan Murdoch
> 
>     On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
>      > FWIW I'm having the same issue with package NetLogoR (
>      > https://github.com/PredictiveEcology/NetLogoR/
>     <https://github.com/PredictiveEcology/NetLogoR/>)
>      >
>      > Passing windows tests locally but code can't be lazy loaded on
>     winbuilder,
>      > except for oldrel.
>      >
>      > Alex
>      >
>      >
>      >
>      >
>      >
>      > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
>      > gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
>     wrote:
>      >
>      >> Thank you all. I appreciate your help and discussion so far.
>      >>
>      >> To complicate the matter further, I have done an experiment. I
>     have tried
>      >> to test a new version which is 99.9% identical to the last
>     official one on
>      >> CRAN because I wanted to understand if the issue was with some 
>     new code
>      >> added to the version I have been testing in the last couple of days.
>      >>
>      >> The new version 1.2 (virtually identical to the 1.1 on CRAN) did
>     not pass
>      >> the tests as per my earlier description. Same errors. The only
>     Ok is on my
>      >> computer and with devtools? winoldrealeases()
>      >>
>      >> I really don?t know that to do next.
>      >>
>      >> Best
>      >> Gm
>      >>
>      >> ************************************************
>      >> Dr Gianmarco Alberti (PhD Udine)
>      >> Lecturer in Spatial Forensics
>      >> Coordinator of the BA dissertations
>      >> Department of Criminology
>      >> Faculty for Social Wellbeing
>      >> Room 332, Humanities B (FEMA)
>      >> University of Malta, Msida, Malta (Europe) - MSD 2080
>      >> tel +356 2340 3718
>      >>
>      >> Academic profiles
>      >> https://www.researchgate.net/profile/Gianmarco_Alberti4
>     <https://www.researchgate.net/profile/Gianmarco_Alberti4>
>      >> https://malta.academia.edu/GianmarcoAlberti
>     <https://malta.academia.edu/GianmarcoAlberti>
>      >>
>      >> Google Scholar profile
>      >> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>     <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en>
>      >>
>      >> Correspondence Analysis website
>      >> http://cainarchaeology.weebly.com/
>     <http://cainarchaeology.weebly.com/>
>      >>
>      >> R packages on CRAN:
>      >> CAinterprTools
>      >>
>     https://cran.r-project.org/web/packages/CAinterprTools/index.html
>     <https://cran.r-project.org/web/packages/CAinterprTools/index.html>
>      >>
>      >> GmAMisc
>      >> https://cran.r-project.org/package=GmAMisc
>     <https://cran.r-project.org/package=GmAMisc>
>      >>
>      >> movecost
>      >> https://cran.r-project.org/web/packages/movecost/index.html
>     <https://cran.r-project.org/web/packages/movecost/index.html>
>      >> ************************************************
>      >> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
>      >> r-package-devel at r-project.org
>     <mailto:r-package-devel at r-project.org>>, ha scritto:
>      >>>
>      >>>> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
>     <mailto:dbosak01 at gmail.com> <
>      >> dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
>      >>>>
>      >>>> Martin:
>      >>>>
>      >>>> What I suggested was he remove the LazyData entry from the
>     description
>      >> file
>      >>>> if he was NOT lazy loading data.? If someone is lazy loading data,
>      >> then that
>      >>>> is a different situation, and they obviously need to set the
>     entry.
>      >>>>
>      >>>> But clearly Gm has a different problem.? He has now tried
>     "LazyData:
>      >> true",
>      >>>> "LazyData: false", and removing the LazyData entry entirely. 
>     And he is
>      >>>> still getting this error:
>      >>>>
>      >>>> * installing *source* package 'movecost' ...
>      >>>> ** using staged installation
>      >>>> ** R
>      >>>> ** data
>      >>>> ** byte-compile and prepare package for lazy loading
>      >>>> ERROR: lazy loading failed for package 'movecost'
>      >>>> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
>      >>>
>      >>> FWIW I think this is lazy loading of the code, which I think is
>      >>> different to what LazyData controls.? This is described in
>      >>> R-Internals:
>      >>>
>      >>> https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading
>     <https://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading>
>      >>>
>      >>> I know nothing about it so I will not comment further.
>      >>>
>      >>> Best,
>      >>>
>      >>> B.
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>      >>
>      >>? ? ? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>      >>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>      >
>


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Tue Jul  6 23:18:59 2021
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Tue, 6 Jul 2021 21:18:59 +0000
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>,
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
Message-ID: <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>

I also get from Winbuilder:

** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'secr'

even for the tar.gz of the version secr 4.4.4 that currently passes all checks on CRAN. Perhaps it is significant that secr also imports from raster that had a new version on CRAN 18th June.

Murray Efford

________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: 07 July 2021 08:28
To: Alex Chubaty
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
> Thanks for the suggestion Duncan.
>
> The same code version ran on winbuilder last week, but it's broken this
> week.

If that happened with a released version of R, then it could be that
some new package version is causing the problem, or it could be a
transient problem on Winbuilder.

Devel versions of R change every day, so there are more possibilities
for origins of the problem there.

Duncan Murdoch

>
> I'll compare the dependencies between the two packages and focus on
> those used by both for now, to see if it's caused by a broken dependency.
>
> Alex
>
>
> On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
> <mailto:murdoch.duncan at gmail.com>> wrote:
>
>     Both NegLogoR and movecost have a lot of hard dependencies -- so many
>     that I'm unwilling to install them with the limited bandwidth that I
>     have right now.  I suspect that's related to the problem:  some
>     dependency install is failing, and that causes something else to fail,
>     and that leads to the not-very-informative failure messages.
>
>     This kind of problem is quite a lot of work to debug.  If I were going
>     to attempt to do it, I would go for a bisection strategy:
>
>        - Do you have any old revision which succeeds?  If so, use bisection
>     on the revisions until you find the change which first triggers the
>     error.
>
>        - Perhaps no versions succeed, because something external to your
>     package has triggered the error.  In this case, bisection would work on
>     the dependencies:  cut out half of the dependencies and all the code
>     that depends on those.  Have you fixed the error?  If so, add back half
>     of the dependencies, otherwise cut out half of the remaining ones.
>
>        - If you're still getting the errors after cutting out all of the
>     dependencies, then start cutting out code and data. Etc.
>
>     In any case, try to find a version of the package that doesn't trigger
>     the error, and a minimal change to it that does.  Then perhaps you'll
>     understand the root cause of the error.
>
>     Duncan Murdoch
>
>     On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
>      > FWIW I'm having the same issue with package NetLogoR (
>      > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0>)
>      >
>      > Passing windows tests locally but code can't be lazy loaded on
>     winbuilder,
>      > except for oldrel.
>      >
>      > Alex
>      >
>      >
>      >
>      >
>      >
>      > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
>      > gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
>     wrote:
>      >
>      >> Thank you all. I appreciate your help and discussion so far.
>      >>
>      >> To complicate the matter further, I have done an experiment. I
>     have tried
>      >> to test a new version which is 99.9% identical to the last
>     official one on
>      >> CRAN because I wanted to understand if the issue was with some
>     new code
>      >> added to the version I have been testing in the last couple of days.
>      >>
>      >> The new version 1.2 (virtually identical to the 1.1 on CRAN) did
>     not pass
>      >> the tests as per my earlier description. Same errors. The only
>     Ok is on my
>      >> computer and with devtools? winoldrealeases()
>      >>
>      >> I really don?t know that to do next.
>      >>
>      >> Best
>      >> Gm
>      >>
>      >> ************************************************
>      >> Dr Gianmarco Alberti (PhD Udine)
>      >> Lecturer in Spatial Forensics
>      >> Coordinator of the BA dissertations
>      >> Department of Criminology
>      >> Faculty for Social Wellbeing
>      >> Room 332, Humanities B (FEMA)
>      >> University of Malta, Msida, Malta (Europe) - MSD 2080
>      >> tel +356 2340 3718
>      >>
>      >> Academic profiles
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0>
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0>
>      >>
>      >> Google Scholar profile
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0>
>      >>
>      >> Correspondence Analysis website
>      >> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0>
>      >>
>      >> R packages on CRAN:
>      >> CAinterprTools
>      >>
>     https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0>
>      >>
>      >> GmAMisc
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0>
>      >>
>      >> movecost
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0>
>      >> ************************************************
>      >> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
>      >> r-package-devel at r-project.org
>     <mailto:r-package-devel at r-project.org>>, ha scritto:
>      >>>
>      >>>> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
>     <mailto:dbosak01 at gmail.com> <
>      >> dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
>      >>>>
>      >>>> Martin:
>      >>>>
>      >>>> What I suggested was he remove the LazyData entry from the
>     description
>      >> file
>      >>>> if he was NOT lazy loading data.  If someone is lazy loading data,
>      >> then that
>      >>>> is a different situation, and they obviously need to set the
>     entry.
>      >>>>
>      >>>> But clearly Gm has a different problem.  He has now tried
>     "LazyData:
>      >> true",
>      >>>> "LazyData: false", and removing the LazyData entry entirely.
>     And he is
>      >>>> still getting this error:
>      >>>>
>      >>>> * installing *source* package 'movecost' ...
>      >>>> ** using staged installation
>      >>>> ** R
>      >>>> ** data
>      >>>> ** byte-compile and prepare package for lazy loading
>      >>>> ERROR: lazy loading failed for package 'movecost'
>      >>>> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
>      >>>
>      >>> FWIW I think this is lazy loading of the code, which I think is
>      >>> different to what LazyData controls.  This is described in
>      >>> R-Internals:
>      >>>
>      >>> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0>
>      >>>
>      >>> I know nothing about it so I will not comment further.
>      >>>
>      >>> Best,
>      >>>
>      >>> B.
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >>> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>      >>
>      >>?         [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>      >>
>      >
>      >?      [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>     <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>      >
>

______________________________________________
R-package-devel at r-project.org mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0


From bbo|ker @end|ng |rom gm@||@com  Wed Jul  7 00:51:56 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 6 Jul 2021 18:51:56 -0400
Subject: [R-pkg-devel] clarification about missing suggested packages.
Message-ID: <d2147327-163e-75eb-d288-52c245ec248b@gmail.com>


   We are working on a resubmission of a package 
(https://github.com/glmmTMB/glmmTMB/issues/721 for people who want all 
the gory details). Our last hurdle is that one of the packages in 
"Suggests:", DHARMa, is currently unavailable on Solaris, even though it 
in good standing on CRAN 
<https://cran.r-project.org/web/packages/DHARMa/index.html>. (This stems 
from a circular dependency: DHARMa can't be built on Solaris because the 
_previous_ version of glmmTMB, which DHARMa imports, had a bug on 
Solaris ...)

   We have been testing on r-hub's solaris platform, where DHARMa is 
similarly unavailable. We can only pass tests if we set 
_R_CHECK_FORCE_SUGGESTS_=false; otherwise we get an error that says some 
suggested packages are missing.

   It is my understanding that the CRAN maintainers can either

    * test with _R_CHECK_FORCE_SUGGESTS_=false and yell at us if we have 
used any missing/unavailable packages unconditionally or

    * test with _R_CHECK_FORCE_SUGGESTS_=true and ensure that all 
suggested packages are installed

but that it would be unreasonable to reject package A because it has a 
Suggests: dependency on package B that is in good standing on CRAN but 
is not available on a particular CRAN testing platform, as long as 
package A only uses package B conditionally.

   Thoughts/opinions/evidence?

   cheers
     Ben Bolker

---
 From the current CRAN policy:

     Packages on which a CRAN package depends should be available from a 
mainstream repository: if any mentioned in ?Suggests? or ?Enhances? 
fields are not from such a repository, where to obtain them at a 
repository should be specified in an ?Additional_repositories? field of 
the DESCRIPTION file (as a comma-separated list of repository URLs) or 
for other means of access, described in the ?Description? field.

     A package listed in ?Suggests? or ?Enhances? should be used 
conditionally in examples or tests if it cannot straightforwardly be 
installed on the major R platforms. (?Writing R Extensions? recommends 
that they are always used conditionally.)


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jul  7 12:52:02 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Jul 2021 12:52:02 +0200
Subject: [R-pkg-devel] clarification about missing suggested packages.
In-Reply-To: <d2147327-163e-75eb-d288-52c245ec248b@gmail.com>
References: <d2147327-163e-75eb-d288-52c245ec248b@gmail.com>
Message-ID: <59d5b6c1-279a-8004-7450-10e1fdeb96b9@statistik.tu-dortmund.de>



On 07.07.2021 00:51, Ben Bolker wrote:
> 
>  ? We are working on a resubmission of a package 
> (https://github.com/glmmTMB/glmmTMB/issues/721 for people who want all 
> the gory details). Our last hurdle is that one of the packages in 
> "Suggests:", DHARMa, is currently unavailable on Solaris, even though it 
> in good standing on CRAN 
> <https://cran.r-project.org/web/packages/DHARMa/index.html>. (This stems 
> from a circular dependency: DHARMa can't be built on Solaris because the 
> _previous_ version of glmmTMB, which DHARMa imports, had a bug on 
> Solaris ...)
> 
>  ? We have been testing on r-hub's solaris platform, where DHARMa is 
> similarly unavailable. We can only pass tests if we set 
> _R_CHECK_FORCE_SUGGESTS_=false; otherwise we get an error that says some 
> suggested packages are missing.
> 
>  ? It is my understanding that the CRAN maintainers can either
> 
>  ?? * test with _R_CHECK_FORCE_SUGGESTS_=false and yell at us if we have 
> used any missing/unavailable packages unconditionally or
> 
>  ?? * test with _R_CHECK_FORCE_SUGGESTS_=true and ensure that all 
> suggested packages are installed
> 
> but that it would be unreasonable to reject package A because it has a 
> Suggests: dependency on package B that is in good standing on CRAN but 
> is not available on a particular CRAN testing platform, as long as 
> package A only uses package B conditionally.

Yes.

Best,
Uwe Ligges


>  ? Thoughts/opinions/evidence?
> 
>  ? cheers
>  ??? Ben Bolker
> 
> ---
>  From the current CRAN policy:
> 
>  ??? Packages on which a CRAN package depends should be available from a 
> mainstream repository: if any mentioned in ?Suggests? or ?Enhances? 
> fields are not from such a repository, where to obtain them at a 
> repository should be specified in an ?Additional_repositories? field of 
> the DESCRIPTION file (as a comma-separated list of repository URLs) or 
> for other means of access, described in the ?Description? field.
> 
>  ??? A package listed in ?Suggests? or ?Enhances? should be used 
> conditionally in examples or tests if it cannot straightforwardly be 
> installed on the major R platforms. (?Writing R Extensions? recommends 
> that they are always used conditionally.)
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From J@n@W|j||e|@ @end|ng |rom vub@be  Tue Jul  6 10:37:20 2021
From: J@n@W|j||e|@ @end|ng |rom vub@be (Jan Wijffels)
Date: Tue, 6 Jul 2021 08:37:20 +0000
Subject: [R-pkg-devel] invalid DOIs
Message-ID: <AM0PR0102MB3267F44650383BDD43CBE81FF71B9@AM0PR0102MB3267.eurprd01.prod.exchangelabs.com>

Hello everyone,

I'm updating the R package image.textlinedetector which is already on CRAN.
When doing R CMD check on winbuilder. I receive the note:

Found the following (possibly) invalid DOIs:
  DOI: 10.1117/12.704538
    From: DESCRIPTION
    Status: Internal Server Error
    Message: 500

The relevant part in the DESCRIPTION file which caused this note looks like this:
... by Arivazhagan M. et al (2007) <doi:10.1117/12.704538>, and a wrapper for an image segmentation ...

This DOI hasn't changed and CRAN seems to parse it fine as the link is shown at the DESCRIPTION of the web page of the package at https://cran.r-project.org/package=image.textlinedetector
How to solve this? What is the correct doi to put in here?

many thanks for your help,
Jan
[https://cran.r-project.org/CRANlogo.png]<https://cran.r-project.org/package=image.textlinedetector>
CRAN - Package image.textlinedetector<https://cran.r-project.org/package=image.textlinedetector>
Version: 0.1.3: Imports: Rcpp (? 0.12.9), magick: LinkingTo: Rcpp: Suggests: opencv: Published: 2021-01-25: Author: Jan Wijffels [aut, cre, cph] (R wrapper), Vrije Universiteit Brussel - DIGI: Brussels Platform for Digital Humanities [cph] (R wrapper), Jeroen Ooms [ctb, cph] (More details in LICENSE.note file), Arthur Fl?r [ctb, cph] (More details in LICENSE.note file), Saverio Meucci [ctb ...
cran.r-project.org
?


	[[alternative HTML version deleted]]


From d@v|dp@y@re@g @end|ng |rom gm@||@com  Wed Jul  7 11:29:20 2021
From: d@v|dp@y@re@g @end|ng |rom gm@||@com (=?UTF-8?Q?David_Enrique_Payares_Garc=C3=ADa?=)
Date: Wed, 7 Jul 2021 11:29:20 +0200
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
Message-ID: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>

Hello everybody,

I developed an R package that depends on packages hosted in GitHub.
In the DESCRIPTION file, I added the R packages (from GitHub ) in the
"Suggests" section and I included a copy of them in my personal GitHub so
they can be accessed in the "Additional_repositories:" section.


Suggests:
    rmarkdown,
    ANTsR,
    ANTsRCore,
    ITKR,
    extrantsr,
    MNITemplate,
    RAVEL
Imports:
    knitr,
    oro.nifti,
    fslr,
    neurobase
Depends:
    R (>= 3.5)
Additional_repositories: https://davidpayares.github.io/drat


A copy of the R packages my package needs is in
https://davidpayares.github.io/drat .
When I submit the package to CRAN, I get this error:


Suggests or Enhances not in mainstream repositories:
    ANTsR, ANTsRCore, ITKR, extrantsr, MNITemplate, RAVEL
  Availability using Additional_repositories specification:
    ANTsR         yes   https://davidpayares.github.io/drat
    ANTsRCore     yes   https://davidpayares.github.io/drat
    ITKR          yes   https://davidpayares.github.io/drat
    extrantsr     yes   https://davidpayares.github.io/drat
    MNITemplate   yes   https://davidpayares.github.io/drat
    RAVEL         yes   https://davidpayares.github.io/drat

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: package dependencies, Result: ERROR
  Packages suggested but not available for checking:
    'ANTsR', 'ANTsRCore', 'ITKR', 'extrantsr', 'MNITemplate', 'RAVEL'

  Namespace dependencies missing from DESCRIPTION Imports/Depends entries:
    'MNITemplate', 'RAVEL', 'extrantsr'

I found that this is the correct way to add dependencies that are not
hosted in CRAN. However, I do not understand why it is not working. If
anyone could help me, I would really appreciate it.

Thank you so much.

Cheers,

David Payares

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul  7 13:18:48 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 7 Jul 2021 07:18:48 -0400
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
In-Reply-To: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
References: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
Message-ID: <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>

On 07/07/2021 5:29 a.m., David Enrique Payares Garc?a wrote:
> Hello everybody,
> 
> I developed an R package that depends on packages hosted in GitHub.
> In the DESCRIPTION file, I added the R packages (from GitHub ) in the
> "Suggests" section and I included a copy of them in my personal GitHub so
> they can be accessed in the "Additional_repositories:" section.
> 
> 
> Suggests:
>      rmarkdown,
>      ANTsR,
>      ANTsRCore,
>      ITKR,
>      extrantsr,
>      MNITemplate,
>      RAVEL
> Imports:
>      knitr,
>      oro.nifti,
>      fslr,
>      neurobase
> Depends:
>      R (>= 3.5)
> Additional_repositories: https://davidpayares.github.io/drat
> 
> 
> A copy of the R packages my package needs is in
> https://davidpayares.github.io/drat .
> When I submit the package to CRAN, I get this error:
> 
> 
> Suggests or Enhances not in mainstream repositories:
>      ANTsR, ANTsRCore, ITKR, extrantsr, MNITemplate, RAVEL
>    Availability using Additional_repositories specification:
>      ANTsR         yes   https://davidpayares.github.io/drat
>      ANTsRCore     yes   https://davidpayares.github.io/drat
>      ITKR          yes   https://davidpayares.github.io/drat
>      extrantsr     yes   https://davidpayares.github.io/drat
>      MNITemplate   yes   https://davidpayares.github.io/drat
>      RAVEL         yes   https://davidpayares.github.io/drat
> 
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: package dependencies, Result: ERROR
>    Packages suggested but not available for checking:
>      'ANTsR', 'ANTsRCore', 'ITKR', 'extrantsr', 'MNITemplate', 'RAVEL'
> 
>    Namespace dependencies missing from DESCRIPTION Imports/Depends entries:
>      'MNITemplate', 'RAVEL', 'extrantsr'

I think this one is the part causing the ERROR.  Without seeing your 
package I can't say for sure, but I would guess you have made some 
unconditional use of those three packages.  Since they are only 
Suggested packages, you can't do that.  Your package has to run even if 
they are not available at all.  (It may not have full functionality, but 
it shouldn't generate any errors in its tests or examples.)

Duncan Murdoch


> 
> I found that this is the correct way to add dependencies that are not
> hosted in CRAN. However, I do not understand why it is not working. If
> anyone could help me, I would really appreciate it.
> 
> Thank you so much.
> 
> Cheers,
> 
> David Payares
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jul  7 15:08:45 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Jul 2021 15:08:45 +0200
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
In-Reply-To: <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>
References: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
 <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>
Message-ID: <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>



On 07.07.2021 13:18, Duncan Murdoch wrote:
> On 07/07/2021 5:29 a.m., David Enrique Payares Garc?a wrote:
>> Hello everybody,
>>
>> I developed an R package that depends on packages hosted in GitHub.
>> In the DESCRIPTION file, I added the R packages (from GitHub ) in the
>> "Suggests" section and I included a copy of them in my personal GitHub so
>> they can be accessed in the "Additional_repositories:" section.
>>
>>
>> Suggests:
>> ???? rmarkdown,
>> ???? ANTsR,
>> ???? ANTsRCore,
>> ???? ITKR,
>> ???? extrantsr,
>> ???? MNITemplate,
>> ???? RAVEL
>> Imports:
>> ???? knitr,
>> ???? oro.nifti,
>> ???? fslr,
>> ???? neurobase
>> Depends:
>> ???? R (>= 3.5)
>> Additional_repositories: https://davidpayares.github.io/drat
>>
>>
>> A copy of the R packages my package needs is in
>> https://davidpayares.github.io/drat .
>> When I submit the package to CRAN, I get this error:
>>
>>
>> Suggests or Enhances not in mainstream repositories:
>> ???? ANTsR, ANTsRCore, ITKR, extrantsr, MNITemplate, RAVEL
>> ?? Availability using Additional_repositories specification:
>> ???? ANTsR???????? yes?? https://davidpayares.github.io/drat
>> ???? ANTsRCore???? yes?? https://davidpayares.github.io/drat
>> ???? ITKR????????? yes?? https://davidpayares.github.io/drat
>> ???? extrantsr???? yes?? https://davidpayares.github.io/drat
>> ???? MNITemplate?? yes?? https://davidpayares.github.io/drat
>> ???? RAVEL???????? yes?? https://davidpayares.github.io/drat
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>> Check: package dependencies, Result: ERROR
>> ?? Packages suggested but not available for checking:
>> ???? 'ANTsR', 'ANTsRCore', 'ITKR', 'extrantsr', 'MNITemplate', 'RAVEL'
>>
>> ?? Namespace dependencies missing from DESCRIPTION Imports/Depends 
>> entries:
>> ???? 'MNITemplate', 'RAVEL', 'extrantsr'


As the message says: You likely have declared some import directives via 
the NAMESPACE file. In that case you have to import from a package and 
hence list it in the Imports field.

If the package is not available from a mainsteam repository and you want 
to suggest it only, you cannot import from it via the NAMESPACE file.

Best,
Uwe Ligges



> I think this one is the part causing the ERROR.? Without seeing your 
> package I can't say for sure, but I would guess you have made some 
> unconditional use of those three packages.? Since they are only 
> Suggested packages, you can't do that.? Your package has to run even if 
> they are not available at all.? (It may not have full functionality, but 
> it shouldn't generate any errors in its tests or examples.)
> 
> Duncan Murdoch
> 
> 
>>
>> I found that this is the correct way to add dependencies that are not
>> hosted in CRAN. However, I do not understand why it is not working. If
>> anyone could help me, I would really appreciate it.
>>
>> Thank you so much.
>>
>> Cheers,
>>
>> David Payares
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From je||er|@ @end|ng |rom gm@||@com  Wed Jul  7 15:12:30 2021
From: je||er|@ @end|ng |rom gm@||@com (Greg Jefferis)
Date: Wed, 7 Jul 2021 14:12:30 +0100
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
In-Reply-To: <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>
References: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
 <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>
 <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>
Message-ID: <4D97B058-1D00-427F-BC74-2B92ACA44F22@gmail.com>



> On 7 Jul 2021, at 14:08, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
>>>    Namespace dependencies missing from DESCRIPTION Imports/Depends entries:
>>>      'MNITemplate', 'RAVEL', 'extrantsr'
> 
> 
> As the message says: You likely have declared some import directives via the NAMESPACE file. In that case you have to import from a package and hence list it in the Imports field.
> 
> If the package is not available from a mainsteam repository and you want to suggest it only, you cannot import from it via the NAMESPACE file.


As in 

https://github.com/DavidPayares/neuronorm/blob/eeb6249a3da5412cf3632e2a41233400707ef01b/NAMESPACE#L12-L17

importFrom(MNITemplate,getMNIPath)
importFrom(MNITemplate,readMNI)
importFrom(RAVEL,maskIntersect)
importFrom(RAVEL,normalizeRAVEL)
importFrom(extrantsr,ants_regwrite)
importFrom(extrantsr,bias_correct)

From roxygen2 directives like this:

https://github.com/DavidPayares/neuronorm/blob/b0ca02478dcf7d5a61dad97ada407edf6b2da962/R/preprocessing.R#L209

Best,

Greg.

--
Gregory Jefferis, PhD
Division of Neurobiology
MRC Laboratory of Molecular Biology
Francis Crick Avenue
Cambridge Biomedical Campus
Cambridge, CB2 OQH, UK

http://www2.mrc-lmb.cam.ac.uk/group-leaders/h-to-m/g-jefferis
http://jefferislab.org
http://www.zoo.cam.ac.uk/departments/connectomics


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jul  7 16:28:18 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Jul 2021 16:28:18 +0200
Subject: [R-pkg-devel] invalid DOIs
In-Reply-To: <AM0PR0102MB3267F44650383BDD43CBE81FF71B9@AM0PR0102MB3267.eurprd01.prod.exchangelabs.com>
References: <AM0PR0102MB3267F44650383BDD43CBE81FF71B9@AM0PR0102MB3267.eurprd01.prod.exchangelabs.com>
Message-ID: <86fb0329-6a57-f387-72d5-1d457d745594@statistik.tu-dortmund.de>



On 06.07.2021 10:37, Jan Wijffels wrote:
> Hello everyone,
> 
> I'm updating the R package image.textlinedetector which is already on CRAN.
> When doing R CMD check on winbuilder. I receive the note:
> 
> Found the following (possibly) invalid DOIs:
>    DOI: 10.1117/12.704538
>      From: DESCRIPTION
>      Status: Internal Server Error
>      Message: 500

Many publishers (one worse than the other) seem to have very flakey 
internet resources and web servers are poorly set up, hence simply 
ignore this.

Best,
Uwe Ligges

> The relevant part in the DESCRIPTION file which caused this note looks like this:
> ... by Arivazhagan M. et al (2007) <doi:10.1117/12.704538>, and a wrapper for an image segmentation ...
> 
> This DOI hasn't changed and CRAN seems to parse it fine as the link is shown at the DESCRIPTION of the web page of the package at https://cran.r-project.org/package=image.textlinedetector
> How to solve this? What is the correct doi to put in here?
> 
> many thanks for your help,
> Jan
> [https://cran.r-project.org/CRANlogo.png]<https://cran.r-project.org/package=image.textlinedetector>
> CRAN - Package image.textlinedetector<https://cran.r-project.org/package=image.textlinedetector>
> Version: 0.1.3: Imports: Rcpp (? 0.12.9), magick: LinkingTo: Rcpp: Suggests: opencv: Published: 2021-01-25: Author: Jan Wijffels [aut, cre, cph] (R wrapper), Vrije Universiteit Brussel - DIGI: Brussels Platform for Digital Humanities [cph] (R wrapper), Jeroen Ooms [ctb, cph] (More details in LICENSE.note file), Arthur Fl?r [ctb, cph] (More details in LICENSE.note file), Saverio Meucci [ctb ...
> cran.r-project.org
> ?
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From J@n@W|j||e|@ @end|ng |rom vub@be  Wed Jul  7 16:31:06 2021
From: J@n@W|j||e|@ @end|ng |rom vub@be (Jan Wijffels)
Date: Wed, 7 Jul 2021 14:31:06 +0000
Subject: [R-pkg-devel] invalid DOIs
In-Reply-To: <86fb0329-6a57-f387-72d5-1d457d745594@statistik.tu-dortmund.de>
References: <AM0PR0102MB3267F44650383BDD43CBE81FF71B9@AM0PR0102MB3267.eurprd01.prod.exchangelabs.com>,
 <86fb0329-6a57-f387-72d5-1d457d745594@statistik.tu-dortmund.de>
Message-ID: <AM0PR0102MB3267C6530E8404D0B613EA78F71A9@AM0PR0102MB3267.eurprd01.prod.exchangelabs.com>

Thank you, Uwe.

Jan
________________________________
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: Wednesday, July 7, 2021 4:28 PM
To: Jan Wijffels <Jan.Wijffels at vub.be>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] invalid DOIs



On 06.07.2021 10:37, Jan Wijffels wrote:
> Hello everyone,
>
> I'm updating the R package image.textlinedetector which is already on CRAN.
> When doing R CMD check on winbuilder. I receive the note:
>
> Found the following (possibly) invalid DOIs:
>    DOI: 10.1117/12.704538
>      From: DESCRIPTION
>      Status: Internal Server Error
>      Message: 500

Many publishers (one worse than the other) seem to have very flakey
internet resources and web servers are poorly set up, hence simply
ignore this.

Best,
Uwe Ligges

> The relevant part in the DESCRIPTION file which caused this note looks like this:
> ... by Arivazhagan M. et al (2007) <doi:10.1117/12.704538>, and a wrapper for an image segmentation ...
>
> This DOI hasn't changed and CRAN seems to parse it fine as the link is shown at the DESCRIPTION of the web page of the package at https://cran.r-project.org/package=image.textlinedetector
> How to solve this? What is the correct doi to put in here?
>
> many thanks for your help,
> Jan
> [https://cran.r-project.org/CRANlogo.png]<https://cran.r-project.org/package=image.textlinedetector>
> CRAN - Package image.textlinedetector<https://cran.r-project.org/package=image.textlinedetector>
> Version: 0.1.3: Imports: Rcpp (? 0.12.9), magick: LinkingTo: Rcpp: Suggests: opencv: Published: 2021-01-25: Author: Jan Wijffels [aut, cre, cph] (R wrapper), Vrije Universiteit Brussel - DIGI: Brussels Platform for Digital Humanities [cph] (R wrapper), Jeroen Ooms [ctb, cph] (More details in LICENSE.note file), Arthur Fl?r [ctb, cph] (More details in LICENSE.note file), Saverio Meucci [ctb ...
> cran.r-project.org
> ?
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jul  7 16:46:49 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Jul 2021 16:46:49 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
Message-ID: <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>

Can you pls try again now.

Best,
Uwe Ligges

On 06.07.2021 23:18, Murray Efford wrote:
> I also get from Winbuilder:
> 
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'secr'
> 
> even for the tar.gz of the version secr 4.4.4 that currently passes all checks on CRAN. Perhaps it is significant that secr also imports from raster that had a new version on CRAN 18th June.
> 
> Murray Efford
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: 07 July 2021 08:28
> To: Alex Chubaty
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
> 
> On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
>> Thanks for the suggestion Duncan.
>>
>> The same code version ran on winbuilder last week, but it's broken this
>> week.
> 
> If that happened with a released version of R, then it could be that
> some new package version is causing the problem, or it could be a
> transient problem on Winbuilder.
> 
> Devel versions of R change every day, so there are more possibilities
> for origins of the problem there.
> 
> Duncan Murdoch
> 
>>
>> I'll compare the dependencies between the two packages and focus on
>> those used by both for now, to see if it's caused by a broken dependency.
>>
>> Alex
>>
>>
>> On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>      Both NegLogoR and movecost have a lot of hard dependencies -- so many
>>      that I'm unwilling to install them with the limited bandwidth that I
>>      have right now.  I suspect that's related to the problem:  some
>>      dependency install is failing, and that causes something else to fail,
>>      and that leads to the not-very-informative failure messages.
>>
>>      This kind of problem is quite a lot of work to debug.  If I were going
>>      to attempt to do it, I would go for a bisection strategy:
>>
>>         - Do you have any old revision which succeeds?  If so, use bisection
>>      on the revisions until you find the change which first triggers the
>>      error.
>>
>>         - Perhaps no versions succeed, because something external to your
>>      package has triggered the error.  In this case, bisection would work on
>>      the dependencies:  cut out half of the dependencies and all the code
>>      that depends on those.  Have you fixed the error?  If so, add back half
>>      of the dependencies, otherwise cut out half of the remaining ones.
>>
>>         - If you're still getting the errors after cutting out all of the
>>      dependencies, then start cutting out code and data. Etc.
>>
>>      In any case, try to find a version of the package that doesn't trigger
>>      the error, and a minimal change to it that does.  Then perhaps you'll
>>      understand the root cause of the error.
>>
>>      Duncan Murdoch
>>
>>      On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
>>       > FWIW I'm having the same issue with package NetLogoR (
>>       > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0>)
>>       >
>>       > Passing windows tests locally but code can't be lazy loaded on
>>      winbuilder,
>>       > except for oldrel.
>>       >
>>       > Alex
>>       >
>>       >
>>       >
>>       >
>>       >
>>       > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
>>       > gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
>>      wrote:
>>       >
>>       >> Thank you all. I appreciate your help and discussion so far.
>>       >>
>>       >> To complicate the matter further, I have done an experiment. I
>>      have tried
>>       >> to test a new version which is 99.9% identical to the last
>>      official one on
>>       >> CRAN because I wanted to understand if the issue was with some
>>      new code
>>       >> added to the version I have been testing in the last couple of days.
>>       >>
>>       >> The new version 1.2 (virtually identical to the 1.1 on CRAN) did
>>      not pass
>>       >> the tests as per my earlier description. Same errors. The only
>>      Ok is on my
>>       >> computer and with devtools? winoldrealeases()
>>       >>
>>       >> I really don?t know that to do next.
>>       >>
>>       >> Best
>>       >> Gm
>>       >>
>>       >> ************************************************
>>       >> Dr Gianmarco Alberti (PhD Udine)
>>       >> Lecturer in Spatial Forensics
>>       >> Coordinator of the BA dissertations
>>       >> Department of Criminology
>>       >> Faculty for Social Wellbeing
>>       >> Room 332, Humanities B (FEMA)
>>       >> University of Malta, Msida, Malta (Europe) - MSD 2080
>>       >> tel +356 2340 3718
>>       >>
>>       >> Academic profiles
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0>
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0>
>>       >>
>>       >> Google Scholar profile
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0>
>>       >>
>>       >> Correspondence Analysis website
>>       >> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0>
>>       >>
>>       >> R packages on CRAN:
>>       >> CAinterprTools
>>       >>
>>      https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0>
>>       >>
>>       >> GmAMisc
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0>
>>       >>
>>       >> movecost
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0>
>>       >> ************************************************
>>       >> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
>>       >> r-package-devel at r-project.org
>>      <mailto:r-package-devel at r-project.org>>, ha scritto:
>>       >>>
>>       >>>> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
>>      <mailto:dbosak01 at gmail.com> <
>>       >> dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
>>       >>>>
>>       >>>> Martin:
>>       >>>>
>>       >>>> What I suggested was he remove the LazyData entry from the
>>      description
>>       >> file
>>       >>>> if he was NOT lazy loading data.  If someone is lazy loading data,
>>       >> then that
>>       >>>> is a different situation, and they obviously need to set the
>>      entry.
>>       >>>>
>>       >>>> But clearly Gm has a different problem.  He has now tried
>>      "LazyData:
>>       >> true",
>>       >>>> "LazyData: false", and removing the LazyData entry entirely.
>>      And he is
>>       >>>> still getting this error:
>>       >>>>
>>       >>>> * installing *source* package 'movecost' ...
>>       >>>> ** using staged installation
>>       >>>> ** R
>>       >>>> ** data
>>       >>>> ** byte-compile and prepare package for lazy loading
>>       >>>> ERROR: lazy loading failed for package 'movecost'
>>       >>>> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
>>       >>>
>>       >>> FWIW I think this is lazy loading of the code, which I think is
>>       >>> different to what LazyData controls.  This is described in
>>       >>> R-Internals:
>>       >>>
>>       >>> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0>
>>       >>>
>>       >>> I know nothing about it so I will not comment further.
>>       >>>
>>       >>> Best,
>>       >>>
>>       >>> B.
>>       >>>
>>       >>> ______________________________________________
>>       >>> R-package-devel at r-project.org
>>      <mailto:R-package-devel at r-project.org> mailing list
>>       >>> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>>       >>
>>       >>?         [[alternative HTML version deleted]]
>>       >>
>>       >> ______________________________________________
>>       >> R-package-devel at r-project.org
>>      <mailto:R-package-devel at r-project.org> mailing list
>>       >> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>>       >>
>>       >
>>       >?      [[alternative HTML version deleted]]
>>       >
>>       > ______________________________________________
>>       > R-package-devel at r-project.org
>>      <mailto:R-package-devel at r-project.org> mailing list
>>       > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
>>      <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
>>       >
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul  7 17:21:55 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 7 Jul 2021 11:21:55 -0400
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
In-Reply-To: <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>
References: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
 <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>
 <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>
Message-ID: <fb230e95-a073-2766-1c11-d0062d962f4c@gmail.com>

On 07/07/2021 9:08 a.m., Uwe Ligges wrote:
> 
> 
> On 07.07.2021 13:18, Duncan Murdoch wrote:
>> On 07/07/2021 5:29 a.m., David Enrique Payares Garc?a wrote:
>>> Hello everybody,
>>>
>>> I developed an R package that depends on packages hosted in GitHub.
>>> In the DESCRIPTION file, I added the R packages (from GitHub ) in the
>>> "Suggests" section and I included a copy of them in my personal GitHub so
>>> they can be accessed in the "Additional_repositories:" section.
>>>
>>>
>>> Suggests:
>>>  ???? rmarkdown,
>>>  ???? ANTsR,
>>>  ???? ANTsRCore,
>>>  ???? ITKR,
>>>  ???? extrantsr,
>>>  ???? MNITemplate,
>>>  ???? RAVEL
>>> Imports:
>>>  ???? knitr,
>>>  ???? oro.nifti,
>>>  ???? fslr,
>>>  ???? neurobase
>>> Depends:
>>>  ???? R (>= 3.5)
>>> Additional_repositories: https://davidpayares.github.io/drat
>>>
>>>
>>> A copy of the R packages my package needs is in
>>> https://davidpayares.github.io/drat .
>>> When I submit the package to CRAN, I get this error:
>>>
>>>
>>> Suggests or Enhances not in mainstream repositories:
>>>  ???? ANTsR, ANTsRCore, ITKR, extrantsr, MNITemplate, RAVEL
>>>  ?? Availability using Additional_repositories specification:
>>>  ???? ANTsR???????? yes?? https://davidpayares.github.io/drat
>>>  ???? ANTsRCore???? yes?? https://davidpayares.github.io/drat
>>>  ???? ITKR????????? yes?? https://davidpayares.github.io/drat
>>>  ???? extrantsr???? yes?? https://davidpayares.github.io/drat
>>>  ???? MNITemplate?? yes?? https://davidpayares.github.io/drat
>>>  ???? RAVEL???????? yes?? https://davidpayares.github.io/drat
>>>
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>> Check: package dependencies, Result: ERROR
>>>  ?? Packages suggested but not available for checking:
>>>  ???? 'ANTsR', 'ANTsRCore', 'ITKR', 'extrantsr', 'MNITemplate', 'RAVEL'
>>>
>>>  ?? Namespace dependencies missing from DESCRIPTION Imports/Depends
>>> entries:
>>>  ???? 'MNITemplate', 'RAVEL', 'extrantsr'
> 
> 
> As the message says: You likely have declared some import directives via
> the NAMESPACE file. In that case you have to import from a package and
> hence list it in the Imports field.

Maybe the message should say "NAMESPACE dependencies missing from 
DESCRIPTION Imports/Depends entries" to make that even more obvious?

Duncan Murdoch

> 
> If the package is not available from a mainsteam repository and you want
> to suggest it only, you cannot import from it via the NAMESPACE file.
> 
> Best,
> Uwe Ligges
> 
> 
> 
>> I think this one is the part causing the ERROR.? Without seeing your
>> package I can't say for sure, but I would guess you have made some
>> unconditional use of those three packages.? Since they are only
>> Suggested packages, you can't do that.? Your package has to run even if
>> they are not available at all.? (It may not have full functionality, but
>> it shouldn't generate any errors in its tests or examples.)
>>
>> Duncan Murdoch
>>
>>
>>>
>>> I found that this is the correct way to add dependencies that are not
>>> hosted in CRAN. However, I do not understand why it is not working. If
>>> anyone could help me, I would really appreciate it.
>>>
>>> Thank you so much.
>>>
>>> Cheers,
>>>
>>> David Payares
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jul  7 17:26:50 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 7 Jul 2021 17:26:50 +0200
Subject: [R-pkg-devel] Error uploading package to CRAN that depends on
 packages hosted in GitHub
In-Reply-To: <fb230e95-a073-2766-1c11-d0062d962f4c@gmail.com>
References: <CADZW5XGFdmcGn7WHG5+kYu+xAk8H=rznpen9jAcnippPG_kdaQ@mail.gmail.com>
 <0166e411-430f-f89f-155b-1dec3027565c@gmail.com>
 <bc0399e2-482a-4657-47b7-586369f6aa10@statistik.tu-dortmund.de>
 <fb230e95-a073-2766-1c11-d0062d962f4c@gmail.com>
Message-ID: <7de71dce-e0d0-542d-7ae0-206bb49c2886@statistik.tu-dortmund.de>



On 07.07.2021 17:21, Duncan Murdoch wrote:
> On 07/07/2021 9:08 a.m., Uwe Ligges wrote:
>>
>>
>> On 07.07.2021 13:18, Duncan Murdoch wrote:
>>> On 07/07/2021 5:29 a.m., David Enrique Payares Garc?a wrote:
>>>> Hello everybody,
>>>>
>>>> I developed an R package that depends on packages hosted in GitHub.
>>>> In the DESCRIPTION file, I added the R packages (from GitHub ) in the
>>>> "Suggests" section and I included a copy of them in my personal 
>>>> GitHub so
>>>> they can be accessed in the "Additional_repositories:" section.
>>>>
>>>>
>>>> Suggests:
>>>> ????? rmarkdown,
>>>> ????? ANTsR,
>>>> ????? ANTsRCore,
>>>> ????? ITKR,
>>>> ????? extrantsr,
>>>> ????? MNITemplate,
>>>> ????? RAVEL
>>>> Imports:
>>>> ????? knitr,
>>>> ????? oro.nifti,
>>>> ????? fslr,
>>>> ????? neurobase
>>>> Depends:
>>>> ????? R (>= 3.5)
>>>> Additional_repositories: https://davidpayares.github.io/drat
>>>>
>>>>
>>>> A copy of the R packages my package needs is in
>>>> https://davidpayares.github.io/drat .
>>>> When I submit the package to CRAN, I get this error:
>>>>
>>>>
>>>> Suggests or Enhances not in mainstream repositories:
>>>> ????? ANTsR, ANTsRCore, ITKR, extrantsr, MNITemplate, RAVEL
>>>> ??? Availability using Additional_repositories specification:
>>>> ????? ANTsR???????? yes?? https://davidpayares.github.io/drat
>>>> ????? ANTsRCore???? yes?? https://davidpayares.github.io/drat
>>>> ????? ITKR????????? yes?? https://davidpayares.github.io/drat
>>>> ????? extrantsr???? yes?? https://davidpayares.github.io/drat
>>>> ????? MNITemplate?? yes?? https://davidpayares.github.io/drat
>>>> ????? RAVEL???????? yes?? https://davidpayares.github.io/drat
>>>>
>>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>>> Check: package dependencies, Result: ERROR
>>>> ??? Packages suggested but not available for checking:
>>>> ????? 'ANTsR', 'ANTsRCore', 'ITKR', 'extrantsr', 'MNITemplate', 'RAVEL'
>>>>
>>>> ??? Namespace dependencies missing from DESCRIPTION Imports/Depends
>>>> entries:
>>>> ????? 'MNITemplate', 'RAVEL', 'extrantsr'
>>
>>
>> As the message says: You likely have declared some import directives via
>> the NAMESPACE file. In that case you have to import from a package and
>> hence list it in the Imports field.
> 
> Maybe the message should say "NAMESPACE dependencies missing from 
> DESCRIPTION Imports/Depends entries" to make that even more obvious?


Thanks, I will suggest the change,
Uwe

> Duncan Murdoch
> 
>>
>> If the package is not available from a mainsteam repository and you want
>> to suggest it only, you cannot import from it via the NAMESPACE file.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>> I think this one is the part causing the ERROR.? Without seeing your
>>> package I can't say for sure, but I would guess you have made some
>>> unconditional use of those three packages.? Since they are only
>>> Suggested packages, you can't do that.? Your package has to run even if
>>> they are not available at all.? (It may not have full functionality, but
>>> it shouldn't generate any errors in its tests or examples.)
>>>
>>> Duncan Murdoch
>>>
>>>
>>>>
>>>> I found that this is the correct way to add dependencies that are not
>>>> hosted in CRAN. However, I do not understand why it is not working. If
>>>> anyone could help me, I would really appreciate it.
>>>>
>>>> Thank you so much.
>>>>
>>>> Cheers,
>>>>
>>>> David Payares
>>>>
>>>> ?????[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Wed Jul  7 22:21:06 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Wed, 7 Jul 2021 22:21:06 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>
Message-ID: <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>

Dear All,
Thanks for the useful discussion.

After Uwe?s prompt, I have tested the package again, and everything is fine now.
Was it a CRAN issue?

Whatever the issue was, I am glad my new version is bound to be on CRAN soon (I have just submitted it).

Best
Gianmarco

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 7 Jul 2021, 16:47 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> Can you pls try again now.
>
> Best,
> Uwe Ligges
>
> On 06.07.2021 23:18, Murray Efford wrote:
> > I also get from Winbuilder:
> >
> > ** byte-compile and prepare package for lazy loading
> > ERROR: lazy loading failed for package 'secr'
> >
> > even for the tar.gz of the version secr 4.4.4 that currently passes all checks on CRAN. Perhaps it is significant that secr also imports from raster that had a new version on CRAN 18th June.
> >
> > Murray Efford
> >
> > ________________________________________
> > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> > Sent: 07 July 2021 08:28
> > To: Alex Chubaty
> > Cc: r-package-devel at r-project.org
> > Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
> >
> > On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
> > > Thanks for the suggestion Duncan.
> > >
> > > The same code version ran on winbuilder last week, but it's broken this
> > > week.
> >
> > If that happened with a released version of R, then it could be that
> > some new package version is causing the problem, or it could be a
> > transient problem on Winbuilder.
> >
> > Devel versions of R change every day, so there are more possibilities
> > for origins of the problem there.
> >
> > Duncan Murdoch
> >
> > >
> > > I'll compare the dependencies between the two packages and focus on
> > > those used by both for now, to see if it's caused by a broken dependency.
> > >
> > > Alex
> > >
> > >
> > > On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
> > > <mailto:murdoch.duncan at gmail.com>> wrote:
> > >
> > > Both NegLogoR and movecost have a lot of hard dependencies -- so many
> > > that I'm unwilling to install them with the limited bandwidth that I
> > > have right now. I suspect that's related to the problem: some
> > > dependency install is failing, and that causes something else to fail,
> > > and that leads to the not-very-informative failure messages.
> > >
> > > This kind of problem is quite a lot of work to debug. If I were going
> > > to attempt to do it, I would go for a bisection strategy:
> > >
> > > - Do you have any old revision which succeeds? If so, use bisection
> > > on the revisions until you find the change which first triggers the
> > > error.
> > >
> > > - Perhaps no versions succeed, because something external to your
> > > package has triggered the error. In this case, bisection would work on
> > > the dependencies: cut out half of the dependencies and all the code
> > > that depends on those. Have you fixed the error? If so, add back half
> > > of the dependencies, otherwise cut out half of the remaining ones.
> > >
> > > - If you're still getting the errors after cutting out all of the
> > > dependencies, then start cutting out code and data. Etc.
> > >
> > > In any case, try to find a version of the package that doesn't trigger
> > > the error, and a minimal change to it that does. Then perhaps you'll
> > > understand the root cause of the error.
> > >
> > > Duncan Murdoch
> > >
> > > On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
> > > > FWIW I'm having the same issue with package NetLogoR (
> > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0>)
> > > >
> > > > Passing windows tests locally but code can't be lazy loaded on
> > > winbuilder,
> > > > except for oldrel.
> > > >
> > > > Alex
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
> > > > gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
> > > wrote:
> > > >
> > > > > Thank you all. I appreciate your help and discussion so far.
> > > > >
> > > > > To complicate the matter further, I have done an experiment. I
> > > have tried
> > > > > to test a new version which is 99.9% identical to the last
> > > official one on
> > > > > CRAN because I wanted to understand if the issue was with some
> > > new code
> > > > > added to the version I have been testing in the last couple of days.
> > > > >
> > > > > The new version 1.2 (virtually identical to the 1.1 on CRAN) did
> > > not pass
> > > > > the tests as per my earlier description. Same errors. The only
> > > Ok is on my
> > > > > computer and with devtools? winoldrealeases()
> > > > >
> > > > > I really don?t know that to do next.
> > > > >
> > > > > Best
> > > > > Gm
> > > > >
> > > > > ************************************************
> > > > > Dr Gianmarco Alberti (PhD Udine)
> > > > > Lecturer in Spatial Forensics
> > > > > Coordinator of the BA dissertations
> > > > > Department of Criminology
> > > > > Faculty for Social Wellbeing
> > > > > Room 332, Humanities B (FEMA)
> > > > > University of Malta, Msida, Malta (Europe) - MSD 2080
> > > > > tel +356 2340 3718
> > > > >
> > > > > Academic profiles
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0>
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0>
> > > > >
> > > > > Google Scholar profile
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0>
> > > > >
> > > > > Correspondence Analysis website
> > > > > https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0>
> > > > >
> > > > > R packages on CRAN:
> > > > > CAinterprTools
> > > > >
> > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0>
> > > > >
> > > > > GmAMisc
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0>
> > > > >
> > > > > movecost
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0>
> > > > > ************************************************
> > > > > Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
> > > > > r-package-devel at r-project.org
> > > <mailto:r-package-devel at r-project.org>>, ha scritto:
> > > > > >
> > > > > > > On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
> > > <mailto:dbosak01 at gmail.com> <
> > > > > dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
> > > > > > >
> > > > > > > Martin:
> > > > > > >
> > > > > > > What I suggested was he remove the LazyData entry from the
> > > description
> > > > > file
> > > > > > > if he was NOT lazy loading data. If someone is lazy loading data,
> > > > > then that
> > > > > > > is a different situation, and they obviously need to set the
> > > entry.
> > > > > > >
> > > > > > > But clearly Gm has a different problem. He has now tried
> > > "LazyData:
> > > > > true",
> > > > > > > "LazyData: false", and removing the LazyData entry entirely.
> > > And he is
> > > > > > > still getting this error:
> > > > > > >
> > > > > > > * installing *source* package 'movecost' ...
> > > > > > > ** using staged installation
> > > > > > > ** R
> > > > > > > ** data
> > > > > > > ** byte-compile and prepare package for lazy loading
> > > > > > > ERROR: lazy loading failed for package 'movecost'
> > > > > > > * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
> > > > > >
> > > > > > FWIW I think this is lazy loading of the code, which I think is
> > > > > > different to what LazyData controls. This is described in
> > > > > > R-Internals:
> > > > > >
> > > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0>
> > > > > >
> > > > > > I know nothing about it so I will not comment further.
> > > > > >
> > > > > > Best,
> > > > > >
> > > > > > B.
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-package-devel at r-project.org
> > > <mailto:R-package-devel at r-project.org> mailing list
> > > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> > > > >
> > > > > ? [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org
> > > <mailto:R-package-devel at r-project.org> mailing list
> > > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> > > > >
> > > >
> > > > ? [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org
> > > <mailto:R-package-devel at r-project.org> mailing list
> > > > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > > <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> > > >
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Wed Jul  7 22:42:12 2021
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Wed, 7 Jul 2021 20:42:12 +0000
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <4c6c0739-16b4-4f99-b03d-8e2f532a470a@Spark>
 <0b666b1e-37a6-4f30-aeb9-91f55b2850d6@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>,
 <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>
Message-ID: <SY4PR01MB5658F2294ACDA7F99479828CAC1A9@SY4PR01MB5658.ausprd01.prod.outlook.com>

Likewise: secr now passes on Winbuilder for R-release.
Thanks
Murray

________________________________________
From: Gianmarco Alberti <gianmarcoalberti at gmail.com>
Sent: 08 July 2021 08:21
To: r-package-devel at r-project.org
Cc: Murray Efford; Duncan Murdoch; Alex Chubaty; Uwe Ligges
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

Dear All,
Thanks for the useful discussion.

After Uwe?s prompt, I have tested the package again, and everything is fine now.
Was it a CRAN issue?

Whatever the issue was, I am glad my new version is bound to be on CRAN soon (I have just submitted it).

Best
Gianmarco

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130923706%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=h8Vd1hD4UYCABtO2KXooCaVJ20XkNPizQUisles3WG4%3D&reserved=0>
https://malta.academia.edu/GianmarcoAlberti<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=zts7AUM0HDuFCDEIY8bKnZ9gtW2XNlsc%2FmGyRpldKc4%3D&reserved=0>

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=1EFXaEOiQUnYxmyH3YXpeY7UnxJmJIlNs4J4kyYLkfs%3D&reserved=0>

Correspondence Analysis website
http://cainarchaeology.weebly.com/<https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=CsvmSG6H6Hdo32dt95ylIXFJL80zBFKpwp8Jck5awns%3D&reserved=0>

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=LAeqHw6HR8j99IxLlt142lRP9Zr0OHvQuaRSMgE6tz4%3D&reserved=0>

GmAMisc
https://cran.r-project.org/package=GmAMisc<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=0g8Doj4UduPhPihoTd0M5i8UkHEAu526hW8bw%2FLqW2A%3D&reserved=0>

movecost
https://cran.r-project.org/web/packages/movecost/index.html<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130953573%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=NTlgzW0PBh7RvbhNWb9ZCWsUG8Fh2NcVIqX%2Flta9%2FJ4%3D&reserved=0>
************************************************
On 7 Jul 2021, 16:47 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
Can you pls try again now.

Best,
Uwe Ligges

On 06.07.2021 23:18, Murray Efford wrote:
I also get from Winbuilder:

** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'secr'

even for the tar.gz of the version secr 4.4.4 that currently passes all checks on CRAN. Perhaps it is significant that secr also imports from raster that had a new version on CRAN 18th June.

Murray Efford

________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: 07 July 2021 08:28
To: Alex Chubaty
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0

On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
Thanks for the suggestion Duncan.

The same code version ran on winbuilder last week, but it's broken this
week.

If that happened with a released version of R, then it could be that
some new package version is causing the problem, or it could be a
transient problem on Winbuilder.

Devel versions of R change every day, so there are more possibilities
for origins of the problem there.

Duncan Murdoch


I'll compare the dependencies between the two packages and focus on
those used by both for now, to see if it's caused by a broken dependency.

Alex


On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
<mailto:murdoch.duncan at gmail.com>> wrote:

Both NegLogoR and movecost have a lot of hard dependencies -- so many
that I'm unwilling to install them with the limited bandwidth that I
have right now. I suspect that's related to the problem: some
dependency install is failing, and that causes something else to fail,
and that leads to the not-very-informative failure messages.

This kind of problem is quite a lot of work to debug. If I were going
to attempt to do it, I would go for a bisection strategy:

- Do you have any old revision which succeeds? If so, use bisection
on the revisions until you find the change which first triggers the
error.

- Perhaps no versions succeed, because something external to your
package has triggered the error. In this case, bisection would work on
the dependencies: cut out half of the dependencies and all the code
that depends on those. Have you fixed the error? If so, add back half
of the dependencies, otherwise cut out half of the remaining ones.

- If you're still getting the errors after cutting out all of the
dependencies, then start cutting out code and data. Etc.

In any case, try to find a version of the package that doesn't trigger
the error, and a minimal change to it that does. Then perhaps you'll
understand the root cause of the error.

Duncan Murdoch

On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
FWIW I'm having the same issue with package NetLogoR (
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0>)

Passing windows tests locally but code can't be lazy loaded on
winbuilder,
except for oldrel.

Alex





On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
wrote:

Thank you all. I appreciate your help and discussion so far.

To complicate the matter further, I have done an experiment. I
have tried
to test a new version which is 99.9% identical to the last
official one on
CRAN because I wanted to understand if the issue was with some
new code
added to the version I have been testing in the last couple of days.

The new version 1.2 (virtually identical to the 1.1 on CRAN) did
not pass
the tests as per my earlier description. Same errors. The only
Ok is on my
computer and with devtools? winoldrealeases()

I really don?t know that to do next.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0>
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0>

Google Scholar profile
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0>

Correspondence Analysis website
https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0>

R packages on CRAN:
CAinterprTools

https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0>

GmAMisc
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0>

movecost
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0>
************************************************
Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
r-package-devel at r-project.org
<mailto:r-package-devel at r-project.org>>, ha scritto:

On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
<mailto:dbosak01 at gmail.com> <
dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:

Martin:

What I suggested was he remove the LazyData entry from the
description
file
if he was NOT lazy loading data. If someone is lazy loading data,
then that
is a different situation, and they obviously need to set the
entry.

But clearly Gm has a different problem. He has now tried
"LazyData:
true",
"LazyData: false", and removing the LazyData entry entirely.
And he is
still getting this error:

* installing *source* package 'movecost' ...
** using staged installation
** R
** data
** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'movecost'
* removing 'd:/RCompile/CRANguest/R-release/lib/movecost'

FWIW I think this is lazy loading of the code, which I think is
different to what LazyData controls. This is described in
R-Internals:

https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0>

I know nothing about it so I will not comment further.

Best,

B.

______________________________________________
R-package-devel at r-project.org
<mailto:R-package-devel at r-project.org> mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>

  [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org
<mailto:R-package-devel at r-project.org> mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>


  [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org
<mailto:R-package-devel at r-project.org> mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>



______________________________________________
R-package-devel at r-project.org mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul  8 10:41:56 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 8 Jul 2021 10:41:56 +0200
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <SY4PR01MB5658F2294ACDA7F99479828CAC1A9@SY4PR01MB5658.ausprd01.prod.outlook.com>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>
 <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>
 <SY4PR01MB5658F2294ACDA7F99479828CAC1A9@SY4PR01MB5658.ausprd01.prod.outlook.com>
Message-ID: <d84c1c5a-dc4a-474a-cd41-20d4b958502d@statistik.tu-dortmund.de>

It was likely an interim version of Rcpp (which never made it to CRAN) 
that was causing trouble.
The winbuilder queues are set up to test against most recent CRAN 
submissions which caused the trouble in this case.

Best,
Uwe Ligges

On 07.07.2021 22:42, Murray Efford wrote:
> Likewise: secr now passes on Winbuilder for R-release.
> Thanks
> Murray
> 
> ________________________________________
> From: Gianmarco Alberti <gianmarcoalberti at gmail.com>
> Sent: 08 July 2021 08:21
> To: r-package-devel at r-project.org
> Cc: Murray Efford; Duncan Murdoch; Alex Chubaty; Uwe Ligges
> Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
> 
> Dear All,
> Thanks for the useful discussion.
> 
> After Uwe?s prompt, I have tested the package again, and everything is fine now.
> Was it a CRAN issue?
> 
> Whatever the issue was, I am glad my new version is bound to be on CRAN soon (I have just submitted it).
> 
> Best
> Gianmarco
> 
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
> 
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130923706%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=h8Vd1hD4UYCABtO2KXooCaVJ20XkNPizQUisles3WG4%3D&reserved=0>
> https://malta.academia.edu/GianmarcoAlberti<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=zts7AUM0HDuFCDEIY8bKnZ9gtW2XNlsc%2FmGyRpldKc4%3D&reserved=0>
> 
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=1EFXaEOiQUnYxmyH3YXpeY7UnxJmJIlNs4J4kyYLkfs%3D&reserved=0>
> 
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/<https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=CsvmSG6H6Hdo32dt95ylIXFJL80zBFKpwp8Jck5awns%3D&reserved=0>
> 
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=LAeqHw6HR8j99IxLlt142lRP9Zr0OHvQuaRSMgE6tz4%3D&reserved=0>
> 
> GmAMisc
> https://cran.r-project.org/package=GmAMisc<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=0g8Doj4UduPhPihoTd0M5i8UkHEAu526hW8bw%2FLqW2A%3D&reserved=0>
> 
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html<https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130953573%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=NTlgzW0PBh7RvbhNWb9ZCWsUG8Fh2NcVIqX%2Flta9%2FJ4%3D&reserved=0>
> ************************************************
> On 7 Jul 2021, 16:47 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> Can you pls try again now.
> 
> Best,
> Uwe Ligges
> 
> On 06.07.2021 23:18, Murray Efford wrote:
> I also get from Winbuilder:
> 
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'secr'
> 
> even for the tar.gz of the version secr 4.4.4 that currently passes all checks on CRAN. Perhaps it is significant that secr also imports from raster that had a new version on CRAN 18th June.
> 
> Murray Efford
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: 07 July 2021 08:28
> To: Alex Chubaty
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] package test returns error when R version 4.1.0
> 
> On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
> Thanks for the suggestion Duncan.
> 
> The same code version ran on winbuilder last week, but it's broken this
> week.
> 
> If that happened with a released version of R, then it could be that
> some new package version is causing the problem, or it could be a
> transient problem on Winbuilder.
> 
> Devel versions of R change every day, so there are more possibilities
> for origins of the problem there.
> 
> Duncan Murdoch
> 
> 
> I'll compare the dependencies between the two packages and focus on
> those used by both for now, to see if it's caused by a broken dependency.
> 
> Alex
> 
> 
> On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
> Both NegLogoR and movecost have a lot of hard dependencies -- so many
> that I'm unwilling to install them with the limited bandwidth that I
> have right now. I suspect that's related to the problem: some
> dependency install is failing, and that causes something else to fail,
> and that leads to the not-very-informative failure messages.
> 
> This kind of problem is quite a lot of work to debug. If I were going
> to attempt to do it, I would go for a bisection strategy:
> 
> - Do you have any old revision which succeeds? If so, use bisection
> on the revisions until you find the change which first triggers the
> error.
> 
> - Perhaps no versions succeed, because something external to your
> package has triggered the error. In this case, bisection would work on
> the dependencies: cut out half of the dependencies and all the code
> that depends on those. Have you fixed the error? If so, add back half
> of the dependencies, otherwise cut out half of the remaining ones.
> 
> - If you're still getting the errors after cutting out all of the
> dependencies, then start cutting out code and data. Etc.
> 
> In any case, try to find a version of the package that doesn't trigger
> the error, and a minimal change to it that does. Then perhaps you'll
> understand the root cause of the error.
> 
> Duncan Murdoch
> 
> On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
> FWIW I'm having the same issue with package NetLogoR (
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0>)
> 
> Passing windows tests locally but code can't be lazy loaded on
> winbuilder,
> except for oldrel.
> 
> Alex
> 
> 
> 
> 
> 
> On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
> gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
> wrote:
> 
> Thank you all. I appreciate your help and discussion so far.
> 
> To complicate the matter further, I have done an experiment. I
> have tried
> to test a new version which is 99.9% identical to the last
> official one on
> CRAN because I wanted to understand if the issue was with some
> new code
> added to the version I have been testing in the last couple of days.
> 
> The new version 1.2 (virtually identical to the 1.1 on CRAN) did
> not pass
> the tests as per my earlier description. Same errors. The only
> Ok is on my
> computer and with devtools? winoldrealeases()
> 
> I really don?t know that to do next.
> 
> Best
> Gm
> 
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
> 
> Academic profiles
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0>
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0>
> 
> Google Scholar profile
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0>
> 
> Correspondence Analysis website
> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0>
> 
> R packages on CRAN:
> CAinterprTools
> 
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0>
> 
> GmAMisc
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0>
> 
> movecost
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0>
> ************************************************
> Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
> r-package-devel at r-project.org
> <mailto:r-package-devel at r-project.org>>, ha scritto:
> 
> On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
> <mailto:dbosak01 at gmail.com> <
> dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
> 
> Martin:
> 
> What I suggested was he remove the LazyData entry from the
> description
> file
> if he was NOT lazy loading data. If someone is lazy loading data,
> then that
> is a different situation, and they obviously need to set the
> entry.
> 
> But clearly Gm has a different problem. He has now tried
> "LazyData:
> true",
> "LazyData: false", and removing the LazyData entry entirely.
> And he is
> still getting this error:
> 
> * installing *source* package 'movecost' ...
> ** using staged installation
> ** R
> ** data
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'movecost'
> * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
> 
> FWIW I think this is lazy loading of the code, which I think is
> different to what LazyData controls. This is described in
> R-Internals:
> 
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0>
> 
> I know nothing about it so I will not comment further.
> 
> Best,
> 
> B.
> 
> ______________________________________________
> R-package-devel at r-project.org
> <mailto:R-package-devel at r-project.org> mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org
> <mailto:R-package-devel at r-project.org> mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org
> <mailto:R-package-devel at r-project.org> mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> <https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0>
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|ex@chub@ty @end|ng |rom gm@||@com  Thu Jul  8 17:39:15 2021
From: @|ex@chub@ty @end|ng |rom gm@||@com (Alex Chubaty)
Date: Thu, 8 Jul 2021 09:39:15 -0600
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <d84c1c5a-dc4a-474a-cd41-20d4b958502d@statistik.tu-dortmund.de>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>
 <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>
 <SY4PR01MB5658F2294ACDA7F99479828CAC1A9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <d84c1c5a-dc4a-474a-cd41-20d4b958502d@statistik.tu-dortmund.de>
Message-ID: <CAPpe6oRzCw==M_HwK18f0nAFQ8FM0=jQt8BRuHYT3CB5Pe-i6A@mail.gmail.com>

Thanks Uwe! That fixed the issue for me too.

On Thu, Jul 8, 2021 at 2:41 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> It was likely an interim version of Rcpp (which never made it to CRAN)
> that was causing trouble.
> The winbuilder queues are set up to test against most recent CRAN
> submissions which caused the trouble in this case.
>
> Best,
> Uwe Ligges
>
> On 07.07.2021 22:42, Murray Efford wrote:
> > Likewise: secr now passes on Winbuilder for R-release.
> > Thanks
> > Murray
> >
> > ________________________________________
> > From: Gianmarco Alberti <gianmarcoalberti at gmail.com>
> > Sent: 08 July 2021 08:21
> > To: r-package-devel at r-project.org
> > Cc: Murray Efford; Duncan Murdoch; Alex Chubaty; Uwe Ligges
> > Subject: Re: [R-pkg-devel] package test returns error when R version
> 4.1.0
> >
> > Dear All,
> > Thanks for the useful discussion.
> >
> > After Uwe?s prompt, I have tested the package again, and everything is
> fine now.
> > Was it a CRAN issue?
> >
> > Whatever the issue was, I am glad my new version is bound to be on CRAN
> soon (I have just submitted it).
> >
> > Best
> > Gianmarco
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA dissertations
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080
> > tel +356 2340 3718
> >
> > Academic profiles
> > https://www.researchgate.net/profile/Gianmarco_Alberti4<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130923706%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=h8Vd1hD4UYCABtO2KXooCaVJ20XkNPizQUisles3WG4%3D&reserved=0
> >
> > https://malta.academia.edu/GianmarcoAlberti<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=zts7AUM0HDuFCDEIY8bKnZ9gtW2XNlsc%2FmGyRpldKc4%3D&reserved=0
> >
> >
> > Google Scholar profile
> > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=1EFXaEOiQUnYxmyH3YXpeY7UnxJmJIlNs4J4kyYLkfs%3D&reserved=0
> >
> >
> > Correspondence Analysis website
> > http://cainarchaeology.weebly.com/<
> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130933658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=CsvmSG6H6Hdo32dt95ylIXFJL80zBFKpwp8Jck5awns%3D&reserved=0
> >
> >
> > R packages on CRAN:
> > CAinterprTools
> > https://cran.r-project.org/web/packages/CAinterprTools/index.html<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=LAeqHw6HR8j99IxLlt142lRP9Zr0OHvQuaRSMgE6tz4%3D&reserved=0
> >
> >
> > GmAMisc
> > https://cran.r-project.org/package=GmAMisc<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130943618%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=0g8Doj4UduPhPihoTd0M5i8UkHEAu526hW8bw%2FLqW2A%3D&reserved=0
> >
> >
> > movecost
> > https://cran.r-project.org/web/packages/movecost/index.html<
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&data=04%7C01%7Cmurray.efford%40otago.ac.nz%7Cc4dbf78cce0a48d0d11708d94184c644%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612862130953573%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=NTlgzW0PBh7RvbhNWb9ZCWsUG8Fh2NcVIqX%2Flta9%2FJ4%3D&reserved=0
> >
> > ************************************************
> > On 7 Jul 2021, 16:47 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>,
> wrote:
> > Can you pls try again now.
> >
> > Best,
> > Uwe Ligges
> >
> > On 06.07.2021 23:18, Murray Efford wrote:
> > I also get from Winbuilder:
> >
> > ** byte-compile and prepare package for lazy loading
> > ERROR: lazy loading failed for package 'secr'
> >
> > even for the tar.gz of the version secr 4.4.4 that currently passes all
> checks on CRAN. Perhaps it is significant that secr also imports from
> raster that had a new version on CRAN 18th June.
> >
> > Murray Efford
> >
> > ________________________________________
> > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Duncan Murdoch <murdoch.duncan at gmail.com>
> > Sent: 07 July 2021 08:28
> > To: Alex Chubaty
> > Cc: r-package-devel at r-project.org
> > Subject: Re: [R-pkg-devel] package test returns error when R version
> 4.1.0
> >
> > On 06/07/2021 4:15 p.m., Alex Chubaty wrote:
> > Thanks for the suggestion Duncan.
> >
> > The same code version ran on winbuilder last week, but it's broken this
> > week.
> >
> > If that happened with a released version of R, then it could be that
> > some new package version is causing the problem, or it could be a
> > transient problem on Winbuilder.
> >
> > Devel versions of R change every day, so there are more possibilities
> > for origins of the problem there.
> >
> > Duncan Murdoch
> >
> >
> > I'll compare the dependencies between the two packages and focus on
> > those used by both for now, to see if it's caused by a broken dependency.
> >
> > Alex
> >
> >
> > On Tue, Jul 6, 2021 at 2:08 PM Duncan Murdoch <murdoch.duncan at gmail.com
> > <mailto:murdoch.duncan at gmail.com>> wrote:
> >
> > Both NegLogoR and movecost have a lot of hard dependencies -- so many
> > that I'm unwilling to install them with the limited bandwidth that I
> > have right now. I suspect that's related to the problem: some
> > dependency install is failing, and that causes something else to fail,
> > and that leads to the not-very-informative failure messages.
> >
> > This kind of problem is quite a lot of work to debug. If I were going
> > to attempt to do it, I would go for a bisection strategy:
> >
> > - Do you have any old revision which succeeds? If so, use bisection
> > on the revisions until you find the change which first triggers the
> > error.
> >
> > - Perhaps no versions succeed, because something external to your
> > package has triggered the error. In this case, bisection would work on
> > the dependencies: cut out half of the dependencies and all the code
> > that depends on those. Have you fixed the error? If so, add back half
> > of the dependencies, otherwise cut out half of the remaining ones.
> >
> > - If you're still getting the errors after cutting out all of the
> > dependencies, then start cutting out code and data. Etc.
> >
> > In any case, try to find a version of the package that doesn't trigger
> > the error, and a minimal change to it that does. Then perhaps you'll
> > understand the root cause of the error.
> >
> > Duncan Murdoch
> >
> > On 06/07/2021 3:11 p.m., Alex Chubaty wrote:
> > FWIW I'm having the same issue with package NetLogoR (
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078338060%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=5XPRhpw3sUyHbOiiupslC%2BZ0pCxcvNekFmWzmZkQPig%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPredictiveEcology%2FNetLogoR%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=faXwrXOP1RHKEsPrqjmOhg4O8MWayRou6%2B1Y%2BPIj%2FuY%3D&amp;reserved=0
> >)
> >
> > Passing windows tests locally but code can't be lazy loaded on
> > winbuilder,
> > except for oldrel.
> >
> > Alex
> >
> >
> >
> >
> >
> > On Tue, Jul 6, 2021 at 10:18 AM Gianmarco Alberti <
> > gianmarcoalberti at gmail.com <mailto:gianmarcoalberti at gmail.com>>
> > wrote:
> >
> > Thank you all. I appreciate your help and discussion so far.
> >
> > To complicate the matter further, I have done an experiment. I
> > have tried
> > to test a new version which is 99.9% identical to the last
> > official one on
> > CRAN because I wanted to understand if the issue was with some
> > new code
> > added to the version I have been testing in the last couple of days.
> >
> > The new version 1.2 (virtually identical to the 1.1 on CRAN) did
> > not pass
> > the tests as per my earlier description. Same errors. The only
> > Ok is on my
> > computer and with devtools? winoldrealeases()
> >
> > I really don?t know that to do next.
> >
> > Best
> > Gm
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA dissertations
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080
> > tel +356 2340 3718
> >
> > Academic profiles
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.researchgate.net%2Fprofile%2FGianmarco_Alberti4&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=03qtEfvqo6lqgqCe7QRBIOLM%2BSHSNDAEFqOwPT25pnc%3D&amp;reserved=0
> >
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmalta.academia.edu%2FGianmarcoAlberti&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=S9uUT6rfFrnB2Fhic84eYMuhA3qZ23HMhbYXANLCEbI%3D&amp;reserved=0
> >
> >
> > Google Scholar profile
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fscholar.google.com%2Fcitations%3Fuser%3DtFrJKQ0AAAAJ%26hl%3Den&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ktVjpaYkTtPx0%2BniHOTrq8Bz2FkegI8QMWkpcU%2B%2BY1s%3D&amp;reserved=0
> >
> >
> > Correspondence Analysis website
> >
> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fcainarchaeology.weebly.com%2F&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y5f2wO8GCmbcuACuiIjhvlmnczh3N096S%2BLfXUMnG9g%3D&amp;reserved=0
> >
> >
> > R packages on CRAN:
> > CAinterprTools
> >
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FCAinterprTools%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=DkyH2A6ZVY4BAwEw%2BxVxEp6xVCN1fZWvxKqH7nR3OFI%3D&amp;reserved=0
> >
> >
> > GmAMisc
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DGmAMisc&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=SKhC8DWY62W2hmb%2BSSnu7yQ49ysHRKW1o6M1DXq3XeU%3D&amp;reserved=0
> >
> >
> > movecost
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmovecost%2Findex.html&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ZoZci%2FxGKJPeWZsLFfjR5wC0nlqKMc4BUguMRoKdctI%3D&amp;reserved=0
> >
> > ************************************************
> > Il 6 lug 2021, 14:53 +0200, brodie gaslam via R-package-devel <
> > r-package-devel at r-project.org
> > <mailto:r-package-devel at r-project.org>>, ha scritto:
> >
> > On Tuesday, July 6, 2021, 8:09:18 AM EDT, dbosak01 at gmail.com
> > <mailto:dbosak01 at gmail.com> <
> > dbosak01 at gmail.com <mailto:dbosak01 at gmail.com>> wrote:
> >
> > Martin:
> >
> > What I suggested was he remove the LazyData entry from the
> > description
> > file
> > if he was NOT lazy loading data. If someone is lazy loading data,
> > then that
> > is a different situation, and they obviously need to set the
> > entry.
> >
> > But clearly Gm has a different problem. He has now tried
> > "LazyData:
> > true",
> > "LazyData: false", and removing the LazyData entry entirely.
> > And he is
> > still getting this error:
> >
> > * installing *source* package 'movecost' ...
> > ** using staged installation
> > ** R
> > ** data
> > ** byte-compile and prepare package for lazy loading
> > ERROR: lazy loading failed for package 'movecost'
> > * removing 'd:/RCompile/CRANguest/R-release/lib/movecost'
> >
> > FWIW I think this is lazy loading of the code, which I think is
> > different to what LazyData controls. This is described in
> > R-Internals:
> >
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fdoc%2Fmanuals%2FR-ints.html%23Lazy-loading&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078348021%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=h%2FGUwYdqUFaP7y2R9r%2BD40xKGAQ3A7igBm0PWP9%2BlpM%3D&amp;reserved=0
> >
> >
> > I know nothing about it so I will not comment further.
> >
> > Best,
> >
> > B.
> >
> > ______________________________________________
> > R-package-devel at r-project.org
> > <mailto:R-package-devel at r-project.org> mailing list
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> >
> >
> >    [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org
> > <mailto:R-package-devel at r-project.org> mailing list
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> >
> >
> >
> >    [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org
> > <mailto:R-package-devel at r-project.org> mailing list
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> > <
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> >
> >
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> >
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C0215a2eac18a47b8f63108d940bcd5d9%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637612003078357978%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=qdOZZ66nPru98mfJQfM6X2A5dJ71uGdmfuqdgaMTd0c%3D&amp;reserved=0
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Jul  8 18:24:34 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 8 Jul 2021 11:24:34 -0500
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: <d84c1c5a-dc4a-474a-cd41-20d4b958502d@statistik.tu-dortmund.de>
References: <9c52640d-9fbd-463f-b4e4-3cd12a42197a@Spark>
 <689fbe39-c706-e865-f4fd-5fd7b1978d1c@statistik.tu-dortmund.de>
 <49dec377-6469-4eb3-bbe4-cba449b96097@Spark>
 <018601d77190$7b8ac400$72a04c00$@gmail.com>
 <a7cae41d-3a65-45d9-9b25-45aab986f6f0@Spark>
 <01a601d771e7$457f1760$d07d4620$@gmail.com>
 <24804.12776.897797.180095@stat.math.ethz.ch>
 <01d801d7725f$b461b200$1d251600$@gmail.com>
 <262461067.1979515.1625575967793@mail.yahoo.com>
 <5a04f0f1-de31-4db4-bca2-0b9cb02d0776@Spark>
 <CAPpe6oS+T2WWvFPj1rMzTuxQ3V9+s6kuSpFf9iucdTh9K0zueg@mail.gmail.com>
 <a09322b7-9502-83fc-ad6b-143e29b35ac0@gmail.com>
 <CAPpe6oSvdf5DQ-4VHZgOPjQDJsMph1HdK+go0Lrss5guk3a_ew@mail.gmail.com>
 <8b0efe57-6827-a0b0-72dc-348c81844317@gmail.com>
 <SY4PR01MB5658AF9E6997ED292A7D3B1AAC1B9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <5cd55f7e-f1a9-feff-0c71-55113c635daf@statistik.tu-dortmund.de>
 <d8210855-9664-47f1-b216-ffd1d3b141ff@Spark>
 <SY4PR01MB5658F2294ACDA7F99479828CAC1A9@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <d84c1c5a-dc4a-474a-cd41-20d4b958502d@statistik.tu-dortmund.de>
Message-ID: <24807.9922.354998.346302@rob.eddelbuettel.com>


On 8 July 2021 at 10:41, Uwe Ligges wrote:
| It was likely an interim version of Rcpp (which never made it to CRAN) 
| that was causing trouble.

Yup, our bad.

While we test against 2300+ reverse depends, we only test against them _under
the most recent versions we have seen_ which affects the Rcpp under test, and
we do not have an (explicit) test vector for these 2300+ packages tested
against everything built under the _CRAN_ version of Rcpp.  So the need for
one small adjustment slipped til we made it to CRAN, which caused this issue,
and one for broom.mixed (as we communicated off-list to Ben).

In short, no matter how large you try to span your test coverage and surface,
there will always be a residual chance for something slipping through.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m|n@h@|| @end|ng |rom um|ch@edu  Fri Jul  9 11:57:34 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Fri, 09 Jul 2021 12:57:34 +0300
Subject: [R-pkg-devel] package test returns error when R version 4.1.0
In-Reply-To: Your message of "Thu, 08 Jul 2021 11:24:34 -0500."
 <24807.9922.354998.346302@rob.eddelbuettel.com>
Message-ID: <750110.1625824654@apollo2.minshall.org>

> In short, no matter how large you try to span your test coverage and surface,
> there will always be a residual chance for something slipping through.

"the narrower the window, the more likely you are to hit it."  :)


From bbo|ker @end|ng |rom gm@||@com  Tue Jul 13 23:10:41 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 13 Jul 2021 17:10:41 -0400
Subject: [R-pkg-devel] best LICENSE practices: AGPL-3 + LaTeX Project Public
 License
Message-ID: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>


   In the process of trying to get a package to build successfully on 
r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files 
to the vignette directory.  One of these was collectbox.sty, which 
triggers the NOTE

---
NOTE
The following files contain a license that requires
distribution of original sources:
   ?collectbox.sty?
---

   The licensing/copyright information in collectbox.sty is as follows:


%% The original source files were:
%%
%% collectbox.dtx  (with options: `collectbox.sty')
%%
%% IMPORTANT NOTICE:
%%
%% For the copyright see the source file.
%%
%% Any modified versions of this file must be renamed
%% with new filenames distinct from collectbox.sty.
%%
%% For distribution of the original source see the terms
%% for copying and modification in the file collectbox.dtx.
%%
%% This generated file may be distributed as long as the
%% original source files, as listed above, are part of the
%% same distribution. (The sources need not necessarily be
%% in the same archive or directory.)
%% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de>
%% --------------------------------------------------------------------
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.

    So I put collectbox.dtx into the inst/misc directory in the package. 
Fine.

  Now, what do I need to do to (1) make sure that my DESCRIPTION file is 
correct and (2) hopefully, suppress the NOTE so I don't have to explain 
it to the CRAN maintainers every time?

* Do I change the LICENCE line (which is currently AGPL-3)? According to 
https://cran.r-project.org/doc/manuals/R-exts.html#Licensing it would 
seem I would have to switch to "file LICENCE" (adding a 
"Licence_is_FOSS: yes"), where "LICENCE" contains something like

package code licensed under AGPL-3; file vignettes/collectbox.sty is 
under the LaTeX Project Public License (source provided in 
misc/collectbox.dtx)

? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?

* Do I just include the files without comment, since I have complied (as 
far as I can tell) with the terms of the LPPL?

* Is there a way to signal to R CMD check that I *have* complied with 
the terms?

   cheers
    Ben Bolker


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Jul 14 00:40:22 2021
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 13 Jul 2021 15:40:22 -0700
Subject: [R-pkg-devel] 
 best LICENSE practices: AGPL-3 + LaTeX Project Public License
In-Reply-To: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
References: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
Message-ID: <CAJqTW47GjKwCj8RjOYP6wSrnYssTWNiRq+P_xaeLzL+_+vZWKQ@mail.gmail.com>

I'll let others discuss the technical details of how to set up the licence
files.  I want to make sure you know that using AGPL is a good way to
ensure that nobody in tech uses your package.  Maybe that's intended, but
when I was at Google the ONLY software we were specifically prohibited from
using was code released under AGPL. I won't try to convince you of that
being a good or bad thing, but wanted to make sure you were aware of it.

On Tue, Jul 13, 2021 at 2:11 PM Ben Bolker <bbolker at gmail.com> wrote:

>
>    In the process of trying to get a package to build successfully on
> r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files
> to the vignette directory.  One of these was collectbox.sty, which
> triggers the NOTE
>
> ---
> NOTE
> The following files contain a license that requires
> distribution of original sources:
>    ?collectbox.sty?
> ---
>
>    The licensing/copyright information in collectbox.sty is as follows:
>
>
> %% The original source files were:
> %%
> %% collectbox.dtx  (with options: `collectbox.sty')
> %%
> %% IMPORTANT NOTICE:
> %%
> %% For the copyright see the source file.
> %%
> %% Any modified versions of this file must be renamed
> %% with new filenames distinct from collectbox.sty.
> %%
> %% For distribution of the original source see the terms
> %% for copying and modification in the file collectbox.dtx.
> %%
> %% This generated file may be distributed as long as the
> %% original source files, as listed above, are part of the
> %% same distribution. (The sources need not necessarily be
> %% in the same archive or directory.)
> %% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de>
> %% --------------------------------------------------------------------
> %% This work may be distributed and/or modified under the
> %% conditions of the LaTeX Project Public License, either version 1.3
> %% of this license or (at your option) any later version.
> %% The latest version of this license is in
> %%   http://www.latex-project.org/lppl.txt
> %% and version 1.3 or later is part of all distributions of LaTeX
> %% version 2005/12/01 or later.
>
>     So I put collectbox.dtx into the inst/misc directory in the package.
> Fine.
>
>   Now, what do I need to do to (1) make sure that my DESCRIPTION file is
> correct and (2) hopefully, suppress the NOTE so I don't have to explain
> it to the CRAN maintainers every time?
>
> * Do I change the LICENCE line (which is currently AGPL-3)? According to
> https://cran.r-project.org/doc/manuals/R-exts.html#Licensing it would
> seem I would have to switch to "file LICENCE" (adding a
> "Licence_is_FOSS: yes"), where "LICENCE" contains something like
>
> package code licensed under AGPL-3; file vignettes/collectbox.sty is
> under the LaTeX Project Public License (source provided in
> misc/collectbox.dtx)
>
> ? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?
>
> * Do I just include the files without comment, since I have complied (as
> far as I can tell) with the terms of the LPPL?
>
> * Is there a way to signal to R CMD check that I *have* complied with
> the terms?
>
>    cheers
>     Ben Bolker
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Jul 14 02:43:07 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 13 Jul 2021 20:43:07 -0400
Subject: [R-pkg-devel] 
 best LICENSE practices: AGPL-3 + LaTeX Project Public License
In-Reply-To: <CAJqTW47GjKwCj8RjOYP6wSrnYssTWNiRq+P_xaeLzL+_+vZWKQ@mail.gmail.com>
References: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
 <CAJqTW47GjKwCj8RjOYP6wSrnYssTWNiRq+P_xaeLzL+_+vZWKQ@mail.gmail.com>
Message-ID: <8ea27357-7cd2-36f3-6f4c-e2c65b57920b@gmail.com>

   AGPL was chosen by my colleagues.  I'll pass on the information.

On 7/13/21 6:40 PM, Steven Scott wrote:
> I'll let others discuss the technical details of how to set up the 
> licence files.? I want to make sure you know?that using AGPL is a good 
> way to ensure that nobody in tech uses your package.? Maybe that's 
> intended, but when I was at Google the ONLY software we were 
> specifically prohibited from using was code released under AGPL. I won't 
> try to convince you of that being a good or bad thing, but wanted to 
> make sure you were aware of it.
> 
> On Tue, Jul 13, 2021 at 2:11 PM Ben Bolker <bbolker at gmail.com 
> <mailto:bbolker at gmail.com>> wrote:
> 
> 
>      ? ?In the process of trying to get a package to build successfully on
>     r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files
>     to the vignette directory.? One of these was collectbox.sty, which
>     triggers the NOTE
> 
>     ---
>     NOTE
>     The following files contain a license that requires
>     distribution of original sources:
>      ? ??collectbox.sty?
>     ---
> 
>      ? ?The licensing/copyright information in collectbox.sty is as follows:
> 
> 
>     %% The original source files were:
>     %%
>     %% collectbox.dtx? (with options: `collectbox.sty')
>     %%
>     %% IMPORTANT NOTICE:
>     %%
>     %% For the copyright see the source file.
>     %%
>     %% Any modified versions of this file must be renamed
>     %% with new filenames distinct from collectbox.sty.
>     %%
>     %% For distribution of the original source see the terms
>     %% for copying and modification in the file collectbox.dtx.
>     %%
>     %% This generated file may be distributed as long as the
>     %% original source files, as listed above, are part of the
>     %% same distribution. (The sources need not necessarily be
>     %% in the same archive or directory.)
>     %% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de
>     <mailto:martin at scharrer-online.de>>
>     %% --------------------------------------------------------------------
>     %% This work may be distributed and/or modified under the
>     %% conditions of the LaTeX Project Public License, either version 1.3
>     %% of this license or (at your option) any later version.
>     %% The latest version of this license is in
>     %% http://www.latex-project.org/lppl.txt
>     <http://www.latex-project.org/lppl.txt>
>     %% and version 1.3 or later is part of all distributions of LaTeX
>     %% version 2005/12/01 or later.
> 
>      ? ? So I put collectbox.dtx into the inst/misc directory in the
>     package.
>     Fine.
> 
>      ? Now, what do I need to do to (1) make sure that my DESCRIPTION
>     file is
>     correct and (2) hopefully, suppress the NOTE so I don't have to explain
>     it to the CRAN maintainers every time?
> 
>     * Do I change the LICENCE line (which is currently AGPL-3)?
>     According to
>     https://cran.r-project.org/doc/manuals/R-exts.html#Licensing
>     <https://cran.r-project.org/doc/manuals/R-exts.html#Licensing> it would
>     seem I would have to switch to "file LICENCE" (adding a
>     "Licence_is_FOSS: yes"), where "LICENCE" contains something like
> 
>     package code licensed under AGPL-3; file vignettes/collectbox.sty is
>     under the LaTeX Project Public License (source provided in
>     misc/collectbox.dtx)
> 
>     ? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?
> 
>     * Do I just include the files without comment, since I have complied
>     (as
>     far as I can tell) with the terms of the LPPL?
> 
>     * Is there a way to signal to R CMD check that I *have* complied with
>     the terms?
> 
>      ? ?cheers
>      ? ? Ben Bolker
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
Graduate chair, Mathematics & Statistics


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul 14 22:56:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 14 Jul 2021 16:56:23 -0400
Subject: [R-pkg-devel] 
 best LICENSE practices: AGPL-3 + LaTeX Project Public License
In-Reply-To: <CAJqTW47GjKwCj8RjOYP6wSrnYssTWNiRq+P_xaeLzL+_+vZWKQ@mail.gmail.com>
References: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
 <CAJqTW47GjKwCj8RjOYP6wSrnYssTWNiRq+P_xaeLzL+_+vZWKQ@mail.gmail.com>
Message-ID: <e62c8fcc-f253-3cc3-ff1c-93677f49ed39@gmail.com>

On 13/07/2021 6:40 p.m., Steven Scott wrote:
> I'll let others discuss the technical details of how to set up the licence
> files.  I want to make sure you know that using AGPL is a good way to
> ensure that nobody in tech uses your package.  Maybe that's intended, but
> when I was at Google the ONLY software we were specifically prohibited from
> using was code released under AGPL. I won't try to convince you of that
> being a good or bad thing, but wanted to make sure you were aware of it.

For some projects that makes AGPL a good choice.  For example, the free 
version of RStudio is licensed under the AGPL, so there's some extra 
motivation for companies like Google to pay for the commercial license.

That probably doesn't apply to Ben's project, though.  It would likely 
require all copyright holders to agree on a second non-open license.

Duncan Murdoch

> 
> On Tue, Jul 13, 2021 at 2:11 PM Ben Bolker <bbolker at gmail.com> wrote:
> 
>>
>>     In the process of trying to get a package to build successfully on
>> r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files
>> to the vignette directory.  One of these was collectbox.sty, which
>> triggers the NOTE
>>
>> ---
>> NOTE
>> The following files contain a license that requires
>> distribution of original sources:
>>     ?collectbox.sty?
>> ---
>>
>>     The licensing/copyright information in collectbox.sty is as follows:
>>
>>
>> %% The original source files were:
>> %%
>> %% collectbox.dtx  (with options: `collectbox.sty')
>> %%
>> %% IMPORTANT NOTICE:
>> %%
>> %% For the copyright see the source file.
>> %%
>> %% Any modified versions of this file must be renamed
>> %% with new filenames distinct from collectbox.sty.
>> %%
>> %% For distribution of the original source see the terms
>> %% for copying and modification in the file collectbox.dtx.
>> %%
>> %% This generated file may be distributed as long as the
>> %% original source files, as listed above, are part of the
>> %% same distribution. (The sources need not necessarily be
>> %% in the same archive or directory.)
>> %% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de>
>> %% --------------------------------------------------------------------
>> %% This work may be distributed and/or modified under the
>> %% conditions of the LaTeX Project Public License, either version 1.3
>> %% of this license or (at your option) any later version.
>> %% The latest version of this license is in
>> %%   http://www.latex-project.org/lppl.txt
>> %% and version 1.3 or later is part of all distributions of LaTeX
>> %% version 2005/12/01 or later.
>>
>>      So I put collectbox.dtx into the inst/misc directory in the package.
>> Fine.
>>
>>    Now, what do I need to do to (1) make sure that my DESCRIPTION file is
>> correct and (2) hopefully, suppress the NOTE so I don't have to explain
>> it to the CRAN maintainers every time?
>>
>> * Do I change the LICENCE line (which is currently AGPL-3)? According to
>> https://cran.r-project.org/doc/manuals/R-exts.html#Licensing it would
>> seem I would have to switch to "file LICENCE" (adding a
>> "Licence_is_FOSS: yes"), where "LICENCE" contains something like
>>
>> package code licensed under AGPL-3; file vignettes/collectbox.sty is
>> under the LaTeX Project Public License (source provided in
>> misc/collectbox.dtx)
>>
>> ? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?
>>
>> * Do I just include the files without comment, since I have complied (as
>> far as I can tell) with the terms of the LPPL?
>>
>> * Is there a way to signal to R CMD check that I *have* complied with
>> the terms?
>>
>>     cheers
>>      Ben Bolker
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ron@n@gr|ot @end|ng |rom gm@||@com  Thu Jul 15 11:19:49 2021
From: ron@n@gr|ot @end|ng |rom gm@||@com (Ronan GRIOT)
Date: Thu, 15 Jul 2021 11:19:49 +0200
Subject: [R-pkg-devel] =?utf-8?q?package_submission_NOTE_=3A_Found_no_cal?=
	=?utf-8?b?bHMgdG86IOKAmFJfcmVnaXN0ZXJSb3V0aW5lc+KAmSwg4oCYUl91c2VE?=
	=?utf-8?q?ynamicSymbols=E2=80=99?=
Message-ID: <CAE1CRY+eYhEoBF+HYM=YYYOy6b71UC7oF9hkpou-M_TzdyArHw@mail.gmail.com>

Dear R developpers,
I submitted my package on the CRAN and had this NOTE :

Found no calls to: ?R_registerRoutines?, ?R_useDynamicSymbols?

I added the output of the
tools::package_native_routine_registration_skeleton(".") function in a .c
file, updated the NAMESPACE with useDynLib(mypackage, .registration = TRUE)
and have no error on my local computer.

I don't know how to fix this problem as I cannot replicate it on my
computer. Is it just a false positive ?

Regards,
Ronan

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 15 11:28:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 15 Jul 2021 05:28:10 -0400
Subject: [R-pkg-devel] 
 =?utf-8?q?package_submission_NOTE_=3A_Found_no_cal?=
 =?utf-8?b?bHMgdG86IOKAmFJfcmVnaXN0ZXJSb3V0aW5lc+KAmSwg4oCYUl91c2VEeW5h?=
 =?utf-8?q?micSymbols=E2=80=99?=
In-Reply-To: <CAE1CRY+eYhEoBF+HYM=YYYOy6b71UC7oF9hkpou-M_TzdyArHw@mail.gmail.com>
References: <CAE1CRY+eYhEoBF+HYM=YYYOy6b71UC7oF9hkpou-M_TzdyArHw@mail.gmail.com>
Message-ID: <d3eb1ca1-5327-b437-f35f-d96ddb83526f@gmail.com>

On 15/07/2021 5:19 a.m., Ronan GRIOT wrote:
> Dear R developpers,
> I submitted my package on the CRAN and had this NOTE :
> 
> Found no calls to: ?R_registerRoutines?, ?R_useDynamicSymbols?
> 
> I added the output of the
> tools::package_native_routine_registration_skeleton(".") function in a .c
> file, updated the NAMESPACE with useDynLib(mypackage, .registration = TRUE)
> and have no error on my local computer.
> 
> I don't know how to fix this problem as I cannot replicate it on my
> computer. Is it just a false positive ?

It's unlikely anyone could help you with this without seeing what you did.

Duncan Murdoch


From ron@n@gr|ot @end|ng |rom gm@||@com  Thu Jul 15 11:39:27 2021
From: ron@n@gr|ot @end|ng |rom gm@||@com (Ronan GRIOT)
Date: Thu, 15 Jul 2021 11:39:27 +0200
Subject: [R-pkg-devel] =?utf-8?q?package_submission_NOTE_=3A_Found_no_cal?=
	=?utf-8?b?bHMgdG86IOKAmFJfcmVnaXN0ZXJSb3V0aW5lc+KAmSwg4oCYUl91c2VE?=
	=?utf-8?q?ynamicSymbols=E2=80=99?=
Message-ID: <CAE1CRYKKCOknC-vz4PuWC6Tjn0gb=dC+X7MQrHjTU3erhiX_CQ@mail.gmail.com>

 Dear R developpers,
I submitted my package on the CRAN and had this NOTE :

Found no calls to: ?R_registerRoutines?, ?R_useDynamicSymbols?

------------------------------------------------------------------------------------------------------------------------
In my package, called APIS, I wrote 4 .c functions all included in one file
: APIS.c

To avoid that NOTE message, I ran the command
tools::package_native_routine_registration_skeleton("."), copy the output
and paste it in a mypackage_init.c file.
Here is the output of the function :

#include <stdlib.h> // for NULL
#include <R_ext/Rdynload.h>

/* FIXME:
   Check these declarations against the C/Fortran source code.
*/

/* .C calls */
extern void get_individual_mendelian_probability_2n(void *, void *, void *,
void *, void *, void *, void *, void *, void *, void *);
extern void get_individual_mendelian_probability_3n(void *, void *, void *,
void *, void *, void *, void *, void *, void *, void *);
extern void get_mendelian_probability_2n(void *, void *, void *, void *,
void *, void *, void *, void *, void *, void *, void *);
extern void get_mendelian_probability_3n(void *, void *, void *, void *,
void *, void *, void *, void *, void *, void *, void *);

static const R_CMethodDef CEntries[] = {
    {"get_individual_mendelian_probability_2n", (DL_FUNC)
&get_individual_mendelian_probability_2n, 10},
    {"get_individual_mendelian_probability_3n", (DL_FUNC)
&get_individual_mendelian_probability_3n, 10},
    {"get_mendelian_probability_2n",            (DL_FUNC)
&get_mendelian_probability_2n,            11},
    {"get_mendelian_probability_3n",            (DL_FUNC)
&get_mendelian_probability_3n,            11},
    {NULL, NULL, 0}
};

void R_init_APIS(DllInfo *dll)
{
    R_registerRoutines(dll, CEntries, NULL, NULL, NULL);
    R_useDynamicSymbols(dll, FALSE);
}

----------
then, I changed all the @useDynLib APIS by @useDynLib APIS, .registration =
TRUE as recommended in
https://stackoverflow.com/questions/42313373/r-cmd-check-note-found-no-calls-to-r-registerroutines-r-usedynamicsymbols

On my computer, it solved the problem and I do not have the NOTE message
anymore. However, during the CRAN submission process, I had this NOTE
message twice.
I do not know how to fix this as I cannot get the NOTE message on my
computer.

Regards,
Ronan

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Jul 15 11:47:47 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 15 Jul 2021 11:47:47 +0200
Subject: [R-pkg-devel] 
 =?utf-8?q?package_submission_NOTE_=3A_Found_no_cal?=
 =?utf-8?b?bHMgdG86IOKAmFJfcmVnaXN0ZXJSb3V0aW5lc+KAmSwg4oCYUl91c2VEeW5h?=
 =?utf-8?q?micSymbols=E2=80=99?=
In-Reply-To: <CAE1CRYKKCOknC-vz4PuWC6Tjn0gb=dC+X7MQrHjTU3erhiX_CQ@mail.gmail.com>
References: <CAE1CRYKKCOknC-vz4PuWC6Tjn0gb=dC+X7MQrHjTU3erhiX_CQ@mail.gmail.com>
Message-ID: <0508923a-bb10-d5ed-599b-f4a68c35bf24@fau.de>

I think you got caught by a common misinterpretation of the auto-check 
output from the Debian machine. It **appends** the

Current CRAN status

at the bottom of the check log. So you see the check results for your 
submitted version and then, below, for comparison, the results for the 
package version currently on CRAN (which indeed gives the NOTE from 
checking compiled code).

Best regards,

	Sebastian Meyer


Am 15.07.21 um 11:39 schrieb Ronan GRIOT:
>   Dear R developpers,
> I submitted my package on the CRAN and had this NOTE :
> 
> Found no calls to: ?R_registerRoutines?, ?R_useDynamicSymbols?
> 
> ------------------------------------------------------------------------------------------------------------------------
> In my package, called APIS, I wrote 4 .c functions all included in one file
> : APIS.c
> 
> To avoid that NOTE message, I ran the command
> tools::package_native_routine_registration_skeleton("."), copy the output
> and paste it in a mypackage_init.c file.
> Here is the output of the function :
> 
> #include <stdlib.h> // for NULL
> #include <R_ext/Rdynload.h>
> 
> /* FIXME:
>     Check these declarations against the C/Fortran source code.
> */
> 
> /* .C calls */
> extern void get_individual_mendelian_probability_2n(void *, void *, void *,
> void *, void *, void *, void *, void *, void *, void *);
> extern void get_individual_mendelian_probability_3n(void *, void *, void *,
> void *, void *, void *, void *, void *, void *, void *);
> extern void get_mendelian_probability_2n(void *, void *, void *, void *,
> void *, void *, void *, void *, void *, void *, void *);
> extern void get_mendelian_probability_3n(void *, void *, void *, void *,
> void *, void *, void *, void *, void *, void *, void *);
> 
> static const R_CMethodDef CEntries[] = {
>      {"get_individual_mendelian_probability_2n", (DL_FUNC)
> &get_individual_mendelian_probability_2n, 10},
>      {"get_individual_mendelian_probability_3n", (DL_FUNC)
> &get_individual_mendelian_probability_3n, 10},
>      {"get_mendelian_probability_2n",            (DL_FUNC)
> &get_mendelian_probability_2n,            11},
>      {"get_mendelian_probability_3n",            (DL_FUNC)
> &get_mendelian_probability_3n,            11},
>      {NULL, NULL, 0}
> };
> 
> void R_init_APIS(DllInfo *dll)
> {
>      R_registerRoutines(dll, CEntries, NULL, NULL, NULL);
>      R_useDynamicSymbols(dll, FALSE);
> }
> 
> ----------
> then, I changed all the @useDynLib APIS by @useDynLib APIS, .registration =
> TRUE as recommended in
> https://stackoverflow.com/questions/42313373/r-cmd-check-note-found-no-calls-to-r-registerroutines-r-usedynamicsymbols
> 
> On my computer, it solved the problem and I do not have the NOTE message
> anymore. However, during the CRAN submission process, I had this NOTE
> message twice.
> I do not know how to fix this as I cannot get the NOTE message on my
> computer.
> 
> Regards,
> Ronan
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Jul 16 03:49:11 2021
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 16 Jul 2021 13:49:11 +1200
Subject: [R-pkg-devel] 
 best LICENSE practices: AGPL-3 + LaTeX Project Public License
In-Reply-To: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
References: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
Message-ID: <CABdHhvEkThkxxrpfiOajdnuHUUeQp++L8RT_9ukfQpshBmP3bw@mail.gmail.com>

On Wed, Jul 14, 2021 at 9:11 AM Ben Bolker <bbolker at gmail.com> wrote:
>
>
>    In the process of trying to get a package to build successfully on
> r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files
> to the vignette directory.  One of these was collectbox.sty, which
> triggers the NOTE
>
> ---
> NOTE
> The following files contain a license that requires
> distribution of original sources:
>    ?collectbox.sty?
> ---
>
>    The licensing/copyright information in collectbox.sty is as follows:
>
>
> %% The original source files were:
> %%
> %% collectbox.dtx  (with options: `collectbox.sty')
> %%
> %% IMPORTANT NOTICE:
> %%
> %% For the copyright see the source file.
> %%
> %% Any modified versions of this file must be renamed
> %% with new filenames distinct from collectbox.sty.
> %%
> %% For distribution of the original source see the terms
> %% for copying and modification in the file collectbox.dtx.
> %%
> %% This generated file may be distributed as long as the
> %% original source files, as listed above, are part of the
> %% same distribution. (The sources need not necessarily be
> %% in the same archive or directory.)
> %% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de>
> %% --------------------------------------------------------------------
> %% This work may be distributed and/or modified under the
> %% conditions of the LaTeX Project Public License, either version 1.3
> %% of this license or (at your option) any later version.
> %% The latest version of this license is in
> %%   http://www.latex-project.org/lppl.txt
> %% and version 1.3 or later is part of all distributions of LaTeX
> %% version 2005/12/01 or later.
>
>     So I put collectbox.dtx into the inst/misc directory in the package.
> Fine.
>
>   Now, what do I need to do to (1) make sure that my DESCRIPTION file is
> correct and (2) hopefully, suppress the NOTE so I don't have to explain
> it to the CRAN maintainers every time?
>
> * Do I change the LICENCE line (which is currently AGPL-3)? According to
> https://cran.r-project.org/doc/manuals/R-exts.html#Licensing it would
> seem I would have to switch to "file LICENCE" (adding a
> "Licence_is_FOSS: yes"), where "LICENCE" contains something like
>
> package code licensed under AGPL-3; file vignettes/collectbox.sty is
> under the LaTeX Project Public License (source provided in
> misc/collectbox.dtx)
>
> ? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?
>
> * Do I just include the files without comment, since I have complied (as
> far as I can tell) with the terms of the LPPL?

It's my understanding that the goal of the license field is to list
one license that the entire package can be distributed under (i.e. is
compatible with all licenses in the package). As long as you believe
that LPPL is compatible with the AGPL-3, then it's fine to keep the
license as AGPL-3.

I don't believe it would be correct to use "AGPL-3 + file LICENSE` as
R-exts only lists three uses of file LICENSE, none of which apply to
your case:

> If a package license restricts a base license (where permitted, e.g., using GPL-3 or AGPL-3 with an
> attribution clause), the additional terms should be placed in file LICENSE (or LICENCE), and the
> string ?+ file LICENSE? (or ?+ file LICENCE?, respectively) should be appended to the corresponding
> individual license specification.

> The optional file LICENSE/LICENCE contains a copy of the license of the package...
> Whereas you should feel free to include a license file in your source distribution, please do not arrange to
install yet another copy of the GNU COPYING or COPYING.LIB files ...
> Since files named LICENSE or LICENCE will be installed, do not use these names for standard license files.

> A few ?standard? licenses are rather license templates which need additional information to be
> completed via ?+ file LICENSE?.

I also recommend two additional changes:

* Include a LICENSE.note field that describes any parts of the package
that are available under other licenses.

* Add the authors of the included files to Authors at R

See https://r-pkgs.org/license.html#how-to-include for more details. I
haven't had any explicit feedback on these recommendations from CRAN
but they have worked for me in package submissions and align with my
(possibly flawed) understanding of CRAN policies and beliefs around
licensing.

Hadley

-- 
http://hadley.nz


From bbo|ker @end|ng |rom gm@||@com  Fri Jul 16 04:16:27 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 15 Jul 2021 22:16:27 -0400
Subject: [R-pkg-devel] 
 best LICENSE practices: AGPL-3 + LaTeX Project Public License
In-Reply-To: <CABdHhvEkThkxxrpfiOajdnuHUUeQp++L8RT_9ukfQpshBmP3bw@mail.gmail.com>
References: <48a26290-1936-e359-bc64-3ab9100426a1@gmail.com>
 <CABdHhvEkThkxxrpfiOajdnuHUUeQp++L8RT_9ukfQpshBmP3bw@mail.gmail.com>
Message-ID: <CABghstQ8DqADCcXeNqssbsXTQJ9yvvyXKSU=gDEBuKSOOH8NFA@mail.gmail.com>

  Thanks very much.  In the end I gave up and removed the offending
LaTeX files, as the goal of this was to get the package to build on
r-hub's Fedora platform, and it seems more promising to work with the
r-hub folks to get a sufficiently complete LaTeX installation
available there (as the required files seem to be present on every
_other_ Linux platform I've tried). (For future readers/references,
the  huxtable package is driving these requirements.)

  cheers
   Ben Bolker

On Thu, Jul 15, 2021 at 9:49 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> On Wed, Jul 14, 2021 at 9:11 AM Ben Bolker <bbolker at gmail.com> wrote:
> >
> >
> >    In the process of trying to get a package to build successfully on
> > r-hub's Fedora platform, I had to add a whole bunch of LaTeX .sty files
> > to the vignette directory.  One of these was collectbox.sty, which
> > triggers the NOTE
> >
> > ---
> > NOTE
> > The following files contain a license that requires
> > distribution of original sources:
> >    ?collectbox.sty?
> > ---
> >
> >    The licensing/copyright information in collectbox.sty is as follows:
> >
> >
> > %% The original source files were:
> > %%
> > %% collectbox.dtx  (with options: `collectbox.sty')
> > %%
> > %% IMPORTANT NOTICE:
> > %%
> > %% For the copyright see the source file.
> > %%
> > %% Any modified versions of this file must be renamed
> > %% with new filenames distinct from collectbox.sty.
> > %%
> > %% For distribution of the original source see the terms
> > %% for copying and modification in the file collectbox.dtx.
> > %%
> > %% This generated file may be distributed as long as the
> > %% original source files, as listed above, are part of the
> > %% same distribution. (The sources need not necessarily be
> > %% in the same archive or directory.)
> > %% Copyright (C) 2012 by Martin Scharrer <martin at scharrer-online.de>
> > %% --------------------------------------------------------------------
> > %% This work may be distributed and/or modified under the
> > %% conditions of the LaTeX Project Public License, either version 1.3
> > %% of this license or (at your option) any later version.
> > %% The latest version of this license is in
> > %%   http://www.latex-project.org/lppl.txt
> > %% and version 1.3 or later is part of all distributions of LaTeX
> > %% version 2005/12/01 or later.
> >
> >     So I put collectbox.dtx into the inst/misc directory in the package.
> > Fine.
> >
> >   Now, what do I need to do to (1) make sure that my DESCRIPTION file is
> > correct and (2) hopefully, suppress the NOTE so I don't have to explain
> > it to the CRAN maintainers every time?
> >
> > * Do I change the LICENCE line (which is currently AGPL-3)? According to
> > https://cran.r-project.org/doc/manuals/R-exts.html#Licensing it would
> > seem I would have to switch to "file LICENCE" (adding a
> > "Licence_is_FOSS: yes"), where "LICENCE" contains something like
> >
> > package code licensed under AGPL-3; file vignettes/collectbox.sty is
> > under the LaTeX Project Public License (source provided in
> > misc/collectbox.dtx)
> >
> > ? Should it say "file LICENCE" or "AGPL-3 + file LICENCE" ?
> >
> > * Do I just include the files without comment, since I have complied (as
> > far as I can tell) with the terms of the LPPL?
>
> It's my understanding that the goal of the license field is to list
> one license that the entire package can be distributed under (i.e. is
> compatible with all licenses in the package). As long as you believe
> that LPPL is compatible with the AGPL-3, then it's fine to keep the
> license as AGPL-3.
>
> I don't believe it would be correct to use "AGPL-3 + file LICENSE` as
> R-exts only lists three uses of file LICENSE, none of which apply to
> your case:
>
> > If a package license restricts a base license (where permitted, e.g., using GPL-3 or AGPL-3 with an
> > attribution clause), the additional terms should be placed in file LICENSE (or LICENCE), and the
> > string ?+ file LICENSE? (or ?+ file LICENCE?, respectively) should be appended to the corresponding
> > individual license specification.
>
> > The optional file LICENSE/LICENCE contains a copy of the license of the package...
> > Whereas you should feel free to include a license file in your source distribution, please do not arrange to
> install yet another copy of the GNU COPYING or COPYING.LIB files ...
> > Since files named LICENSE or LICENCE will be installed, do not use these names for standard license files.
>
> > A few ?standard? licenses are rather license templates which need additional information to be
> > completed via ?+ file LICENSE?.
>
> I also recommend two additional changes:
>
> * Include a LICENSE.note field that describes any parts of the package
> that are available under other licenses.
>
> * Add the authors of the included files to Authors at R
>
> See https://r-pkgs.org/license.html#how-to-include for more details. I
> haven't had any explicit feedback on these recommendations from CRAN
> but they have worked for me in package submissions and align with my
> (possibly flawed) understanding of CRAN policies and beliefs around
> licensing.
>
> Hadley
>
> --
> http://hadley.nz


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Fri Jul 16 18:08:27 2021
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Fri, 16 Jul 2021 12:08:27 -0400
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
Message-ID: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>

Hi,

  ?I have been updating a couple of R packages this morning. One of them
triggered a manual inspection for "possibly mis-spelled words in
DESCRIPTION" for my last name (Coombes) --- even though none of the
other 20 packages that I maintain has ever triggered that particular
NOTE. A second package also triggered a manual inspection for
mis-spelled words including "Proteomics". (These flags only arose on the
debian CRAN machine, not the Windows CRAN machine, and not on my home
machines. And let's ignore how many spelling corrections I had to make
while typing this email)

*My question, however, is: why should this NOTE ever trigger a manual
inspection?* That makes more work for the CRAN maintainers, who I am
sure have better things to do than evaluate spelling. Anything that
would actually stop the package from working (mis-spelling a keyword, or
mis-spelling the name of package that is imported) is going to cause an
automatic ERROR and a rejection of the submission without making more
work for the CRAN maintainers. The other mis-spellings may reflect
poorly on the package author, but since they are NOTEs, it is easy
enough to get them fixed for the next round without making human
eyeballs look at them.

Best,
  ? Kevin


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul 16 19:07:29 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 16 Jul 2021 10:07:29 -0700
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
Message-ID: <878299C4-1962-46CC-A974-15D426C47F5D@dcn.davis.ca.us>

Spelling has different importance to different people. You are expressing a value judgement that differs from the values of R Core, but are presenting your opinion as if they are facts. My point is that your challenging attitude IMO makes having a conversation about those concerns difficult. (I am not associated with R Core in any way, and do in fact empathize with your frustration with the process.)

I think it is worth pointing out that spelling errors in the DESCRIPTION file are of greater significance than other areas of a package as they can affect assignment of responsibility and permissions, as well as reflecting poorly on the CRAN summary web pages. I suspect that problems with DESCRIPTION files in the past lead to this requirement.

I would encourage you to pause for a day or two before sending off messages like this in the future... a lesson I have learned the hard way myself.

On July 16, 2021 9:08:27 AM PDT, "Kevin R. Coombes" <kevin.r.coombes at gmail.com> wrote:
>Hi,
>
> ?I have been updating a couple of R packages this morning. One of them
>triggered a manual inspection for "possibly mis-spelled words in
>DESCRIPTION" for my last name (Coombes) --- even though none of the
>other 20 packages that I maintain has ever triggered that particular
>NOTE. A second package also triggered a manual inspection for
>mis-spelled words including "Proteomics". (These flags only arose on
>the
>debian CRAN machine, not the Windows CRAN machine, and not on my home
>machines. And let's ignore how many spelling corrections I had to make
>while typing this email)
>
>*My question, however, is: why should this NOTE ever trigger a manual
>inspection?* That makes more work for the CRAN maintainers, who I am
>sure have better things to do than evaluate spelling. Anything that
>would actually stop the package from working (mis-spelling a keyword,
>or
>mis-spelling the name of package that is imported) is going to cause an
>automatic ERROR and a rejection of the submission without making more
>work for the CRAN maintainers. The other mis-spellings may reflect
>poorly on the package author, but since they are NOTEs, it is easy
>enough to get them fixed for the next round without making human
>eyeballs look at them.
>
>Best,
>  ? Kevin
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Fri Jul 16 19:37:23 2021
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Fri, 16 Jul 2021 13:37:23 -0400
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <878299C4-1962-46CC-A974-15D426C47F5D@dcn.davis.ca.us>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
 <878299C4-1962-46CC-A974-15D426C47F5D@dcn.davis.ca.us>
Message-ID: <07d74a85-09b6-1da2-3902-f6d26bf0ca74@gmail.com>

Hi Jeff,

I think you are inferring an attitude in my initial message that wasn't 
actually present. I greatly appreciate the hard work that CRAN 
maintainers put in on behalf of the community. And I really did (and do) 
want to understand why some of their valuable volunteer time should be 
occupied deciding if "possible mis-spellings" are (a) real and (b) 
important enough to do something about.

I also admit to being possibly the world's worst typist. I often 
mis-spell multiple words in a sentence, and I rely on numerous spell 
checkers to point out the problems so I can fix them right away. (But 
right now, I am unhappy that the spell-checker in my email client 
insists that "mis-spell" and it variants doesn't have a hyphen in it.) 
So, I agree that correct spelling is worth someone spending their time 
on. But that someone (in my opinion) should be the package author and 
maintainer, not the CRAN maintainers.

Part of the issue is that the mis-spellings are reported from R CMD 
check as a NOTE, not a WARNING nor an ERROR. They don't affect the code 
in any way (unlike the consequences of trying to import the "grpahics" 
package -- boy, was that hard to type.). Further, most of the "possible 
mis-spellings" that I have seen flagged in my own packages are false 
positives. (As noted above; I use spell-checkers at several points along 
the way so I can correct them before I submit.) Moreover, the results 
from different spell-checkers (such as those on different CRAN machines) 
are inconsistent. That increases the probability that any package is 
going to get flagged with false positives and require manual intervention.

I don't know; maybe the CRAN maintainers like checking other people's 
spelling manually. But having to do that on a regular basis would soon 
make me run screaming from the room.

Best,
 ? Kevin

On 7/16/2021 1:07 PM, Jeff Newmiller wrote:
> Spelling has different importance to different people. You are expressing a value judgement that differs from the values of R Core, but are presenting your opinion as if they are facts. My point is that your challenging attitude IMO makes having a conversation about those concerns difficult. (I am not associated with R Core in any way, and do in fact empathize with your frustration with the process.)
>
> I think it is worth pointing out that spelling errors in the DESCRIPTION file are of greater significance than other areas of a package as they can affect assignment of responsibility and permissions, as well as reflecting poorly on the CRAN summary web pages. I suspect that problems with DESCRIPTION files in the past lead to this requirement.
>
> I would encourage you to pause for a day or two before sending off messages like this in the future... a lesson I have learned the hard way myself.
>
> On July 16, 2021 9:08:27 AM PDT, "Kevin R. Coombes" <kevin.r.coombes at gmail.com> wrote:
>> Hi,
>>
>>  ?I have been updating a couple of R packages this morning. One of them
>> triggered a manual inspection for "possibly mis-spelled words in
>> DESCRIPTION" for my last name (Coombes) --- even though none of the
>> other 20 packages that I maintain has ever triggered that particular
>> NOTE. A second package also triggered a manual inspection for
>> mis-spelled words including "Proteomics". (These flags only arose on
>> the
>> debian CRAN machine, not the Windows CRAN machine, and not on my home
>> machines. And let's ignore how many spelling corrections I had to make
>> while typing this email)
>>
>> *My question, however, is: why should this NOTE ever trigger a manual
>> inspection?* That makes more work for the CRAN maintainers, who I am
>> sure have better things to do than evaluate spelling. Anything that
>> would actually stop the package from working (mis-spelling a keyword,
>> or
>> mis-spelling the name of package that is imported) is going to cause an
>> automatic ERROR and a rejection of the submission without making more
>> work for the CRAN maintainers. The other mis-spellings may reflect
>> poorly on the package author, but since they are NOTEs, it is easy
>> enough to get them fixed for the next round without making human
>> eyeballs look at them.
>>
>> Best,
>>   ? Kevin
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From n@@|n@k|@m@c|ej @end|ng |rom gm@||@com  Fri Jul 16 12:13:50 2021
From: n@@|n@k|@m@c|ej @end|ng |rom gm@||@com (Maciej Nasinski)
Date: Fri, 16 Jul 2021 12:13:50 +0200
Subject: [R-pkg-devel] Scrapping R CRAN website from package
Message-ID: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>

Dear Sir or Madam,

I am creating a new package `pacs` https://github.com/Polkas/pacs, which
I want to send to R CRAN shortly. However I am not sure about R
CRAN policy regarding scraping CRAN per package page with its archive.
More precisely I am fetching the data from
https://CRAN.R-project.org/package=%s and
https://cran.r-project.org/src/contrib/Archive/%s/ (downloading an old
tar.gz too).

Why I need this: I could read any DESCRIPTION files for any time point and
get a true dependency tree.  Moreover I could get a life duration of any
released package version, where shorter than 7 days are marked as risky. I
could compare a package min required dependencies difference before we
update it.  And much more.

I made a few notices like "Please as a courtesy to the R CRAN, don't
overload their server by constantly using this function." inside the
package.

Optionally If scrapping R CRAN from my package is a problem I will try to
build a separate DB with such data (updated everyday). Still any old tar.gz
has to be downloaded.

Maciej Nasinski, University of Warsaw

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul 16 21:38:55 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 16 Jul 2021 15:38:55 -0400
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <07d74a85-09b6-1da2-3902-f6d26bf0ca74@gmail.com>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
 <878299C4-1962-46CC-A974-15D426C47F5D@dcn.davis.ca.us>
 <07d74a85-09b6-1da2-3902-f6d26bf0ca74@gmail.com>
Message-ID: <5a2b678e-8db3-d4e3-6484-7135df51d98d@gmail.com>

For what it's worth, I didn't see your message as aggressive.  But 
that's email:  it's hard to know the impressions people will get from it.

Regarding your point, I'd like to say (unaggressively!) that it's not 
your problem if the CRAN folks choose differently than you would in how 
they should spend their time.  One thing I can infer from past silence 
is that they don't like discussing such things here.

Duncan Murdoch

On 16/07/2021 1:37 p.m., Kevin R. Coombes wrote:
> Hi Jeff,
> 
> I think you are inferring an attitude in my initial message that wasn't
> actually present. I greatly appreciate the hard work that CRAN
> maintainers put in on behalf of the community. And I really did (and do)
> want to understand why some of their valuable volunteer time should be
> occupied deciding if "possible mis-spellings" are (a) real and (b)
> important enough to do something about.
> 
> I also admit to being possibly the world's worst typist. I often
> mis-spell multiple words in a sentence, and I rely on numerous spell
> checkers to point out the problems so I can fix them right away. (But
> right now, I am unhappy that the spell-checker in my email client
> insists that "mis-spell" and it variants doesn't have a hyphen in it.)
> So, I agree that correct spelling is worth someone spending their time
> on. But that someone (in my opinion) should be the package author and
> maintainer, not the CRAN maintainers.
> 
> Part of the issue is that the mis-spellings are reported from R CMD
> check as a NOTE, not a WARNING nor an ERROR. They don't affect the code
> in any way (unlike the consequences of trying to import the "grpahics"
> package -- boy, was that hard to type.). Further, most of the "possible
> mis-spellings" that I have seen flagged in my own packages are false
> positives. (As noted above; I use spell-checkers at several points along
> the way so I can correct them before I submit.) Moreover, the results
> from different spell-checkers (such as those on different CRAN machines)
> are inconsistent. That increases the probability that any package is
> going to get flagged with false positives and require manual intervention.
> 
> I don't know; maybe the CRAN maintainers like checking other people's
> spelling manually. But having to do that on a regular basis would soon
> make me run screaming from the room.
> 
> Best,
>   ? Kevin
> 
> On 7/16/2021 1:07 PM, Jeff Newmiller wrote:
>> Spelling has different importance to different people. You are expressing a value judgement that differs from the values of R Core, but are presenting your opinion as if they are facts. My point is that your challenging attitude IMO makes having a conversation about those concerns difficult. (I am not associated with R Core in any way, and do in fact empathize with your frustration with the process.)
>>
>> I think it is worth pointing out that spelling errors in the DESCRIPTION file are of greater significance than other areas of a package as they can affect assignment of responsibility and permissions, as well as reflecting poorly on the CRAN summary web pages. I suspect that problems with DESCRIPTION files in the past lead to this requirement.
>>
>> I would encourage you to pause for a day or two before sending off messages like this in the future... a lesson I have learned the hard way myself.
>>
>> On July 16, 2021 9:08:27 AM PDT, "Kevin R. Coombes" <kevin.r.coombes at gmail.com> wrote:
>>> Hi,
>>>
>>>   ?I have been updating a couple of R packages this morning. One of them
>>> triggered a manual inspection for "possibly mis-spelled words in
>>> DESCRIPTION" for my last name (Coombes) --- even though none of the
>>> other 20 packages that I maintain has ever triggered that particular
>>> NOTE. A second package also triggered a manual inspection for
>>> mis-spelled words including "Proteomics". (These flags only arose on
>>> the
>>> debian CRAN machine, not the Windows CRAN machine, and not on my home
>>> machines. And let's ignore how many spelling corrections I had to make
>>> while typing this email)
>>>
>>> *My question, however, is: why should this NOTE ever trigger a manual
>>> inspection?* That makes more work for the CRAN maintainers, who I am
>>> sure have better things to do than evaluate spelling. Anything that
>>> would actually stop the package from working (mis-spelling a keyword,
>>> or
>>> mis-spelling the name of package that is imported) is going to cause an
>>> automatic ERROR and a rejection of the submission without making more
>>> work for the CRAN maintainers. The other mis-spellings may reflect
>>> poorly on the package author, but since they are NOTEs, it is easy
>>> enough to get them fixed for the next round without making human
>>> eyeballs look at them.
>>>
>>> Best,
>>>    ? Kevin
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From john@m@h@rro|d @end|ng |rom gm@||@com  Fri Jul 16 22:43:35 2021
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Fri, 16 Jul 2021 13:43:35 -0700
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
Message-ID: <CANAiAiUussVXCGW9dTOCcvOQSz4-4W9QevBHCeYJkPQdjMuuzA@mail.gmail.com>

I have a list of words, acronyms and initialisms that commonly get flagged
as misspelled words when I submit updates. I generally just put an
explanation for each one in the "optional comment" section of the
submission form. It's pretty simple and seems to work out well.

On Fri, Jul 16, 2021 at 9:08 AM Kevin R. Coombes <kevin.r.coombes at gmail.com>
wrote:

> Hi,
>
>    I have been updating a couple of R packages this morning. One of them
> triggered a manual inspection for "possibly mis-spelled words in
> DESCRIPTION" for my last name (Coombes) --- even though none of the
> other 20 packages that I maintain has ever triggered that particular
> NOTE. A second package also triggered a manual inspection for
> mis-spelled words including "Proteomics". (These flags only arose on the
> debian CRAN machine, not the Windows CRAN machine, and not on my home
> machines. And let's ignore how many spelling corrections I had to make
> while typing this email)
>
> *My question, however, is: why should this NOTE ever trigger a manual
> inspection?* That makes more work for the CRAN maintainers, who I am
> sure have better things to do than evaluate spelling. Anything that
> would actually stop the package from working (mis-spelling a keyword, or
> mis-spelling the name of package that is imported) is going to cause an
> automatic ERROR and a rejection of the submission without making more
> work for the CRAN maintainers. The other mis-spellings may reflect
> poorly on the package author, but since they are NOTEs, it is easy
> enough to get them fixed for the next round without making human
> eyeballs look at them.
>
> Best,
>     Kevin
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
John
:wq

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Jul 16 23:03:45 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 16 Jul 2021 21:03:45 +0000
Subject: [R-pkg-devel] Scrapping R CRAN website from package
In-Reply-To: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
References: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
Message-ID: <CWXP265MB2008D18B776CEDE6C09183E9AE119@CWXP265MB2008.GBRP265.PROD.OUTLOOK.COM>

If you need only DESCRIPTION, you can get it from github/cran - just open the file in any package and see how its web address is formed. There is a small delay between a package appearing on CRAN and it being mirrowed on github/CRAN though.

For caching strategies you could check, for example, revdepcheck (which does it on an epic scale).

Georgi Boshnakov

Get Outlook for Android<https://aka.ms/AAb9ysg>
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Maciej Nasinski <nasinski.maciej at gmail.com>
Sent: Friday, July 16, 2021 11:13:50 AM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] Scrapping R CRAN website from package

Dear Sir or Madam,

I am creating a new package `pacs` https://github.com/Polkas/pacs, which
I want to send to R CRAN shortly. However I am not sure about R
CRAN policy regarding scraping CRAN per package page with its archive.
More precisely I am fetching the data from
https://CRAN.R-project.org/package=%s and
https://cran.r-project.org/src/contrib/Archive/%s/ (downloading an old
tar.gz too).

Why I need this: I could read any DESCRIPTION files for any time point and
get a true dependency tree.  Moreover I could get a life duration of any
released package version, where shorter than 7 days are marked as risky. I
could compare a package min required dependencies difference before we
update it.  And much more.

I made a few notices like "Please as a courtesy to the R CRAN, don't
overload their server by constantly using this function." inside the
package.

Optionally If scrapping R CRAN from my package is a problem I will try to
build a separate DB with such data (updated everyday). Still any old tar.gz
has to be downloaded.

Maciej Nasinski, University of Warsaw

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Fri Jul 16 23:54:20 2021
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Fri, 16 Jul 2021 17:54:20 -0400
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <CANAiAiUussVXCGW9dTOCcvOQSz4-4W9QevBHCeYJkPQdjMuuzA@mail.gmail.com>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
 <CANAiAiUussVXCGW9dTOCcvOQSz4-4W9QevBHCeYJkPQdjMuuzA@mail.gmail.com>
Message-ID: <6ef30adb-2feb-757c-5607-6644a0a234cc@gmail.com>

That's an excellent idea. I can't resist pointing out that everything 
that was flagged this morning has been in those packages for years (and 
for multiple submissions), and has never been flagged before. So I would 
still have to update my master last this time around. And a human at 
CRAN would still have to spend time to check the submission comment 
against the NOTE.? (Hmm. Maybe the real underlying issue is that I'd 
like computers to make less work for humans, not more.)

On 7/16/2021 4:43 PM, John Harrold wrote:
> I have a list of words, acronyms and initialisms that commonly get 
> flagged as misspelled words when I submit updates. I generally just 
> put an explanation?for each one in the "optional comment" section of 
> the submission form. It's pretty simple and seems to work out well.
>
> On Fri, Jul 16, 2021 at 9:08 AM Kevin R. Coombes 
> <kevin.r.coombes at gmail.com <mailto:kevin.r.coombes at gmail.com>> wrote:
>
>     Hi,
>
>     ? ?I have been updating a couple of R packages this morning. One
>     of them
>     triggered a manual inspection for "possibly mis-spelled words in
>     DESCRIPTION" for my last name (Coombes) --- even though none of the
>     other 20 packages that I maintain has ever triggered that particular
>     NOTE. A second package also triggered a manual inspection for
>     mis-spelled words including "Proteomics". (These flags only arose
>     on the
>     debian CRAN machine, not the Windows CRAN machine, and not on my home
>     machines. And let's ignore how many spelling corrections I had to make
>     while typing this email)
>
>     *My question, however, is: why should this NOTE ever trigger a manual
>     inspection?* That makes more work for the CRAN maintainers, who I am
>     sure have better things to do than evaluate spelling. Anything that
>     would actually stop the package from working (mis-spelling a
>     keyword, or
>     mis-spelling the name of package that is imported) is going to
>     cause an
>     automatic ERROR and a rejection of the submission without making more
>     work for the CRAN maintainers. The other mis-spellings may reflect
>     poorly on the package author, but since they are NOTEs, it is easy
>     enough to get them fixed for the next round without making human
>     eyeballs look at them.
>
>     Best,
>     ? ? Kevin
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>
>
> -- 
> John
> :wq


	[[alternative HTML version deleted]]


From dbos@k01 m@iii@g oii gm@ii@com  Sat Jul 17 02:21:31 2021
From: dbos@k01 m@iii@g oii gm@ii@com (dbos@k01 m@iii@g oii gm@ii@com)
Date: Fri, 16 Jul 2021 20:21:31 -0400
Subject: [R-pkg-devel] Scrapping R CRAN website from package
In-Reply-To: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
References: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
Message-ID: <004501d77aa1$b1c41520$154c3f60$@gmail.com>

Maciej:

There are other packages that query the CRAN site (cranlogs, etc.).  So it
seems the queries/fetches are generally allowed.  I can only find a couple
relevant mentions in the CRAN policies:


"Packages which use Internet resources should fail gracefully with an
informative message if the resource is not available or has changed (and not
give a check warning nor error)."

"Downloads of additional software or data as part of package installation or
startup should only use secure download mechanisms (e.g., 'https' or
'ftps'). For downloads of more than a few MB, ensure that a sufficiently
large timeout is set."


So it seems like what you are trying to do would be OK with the appropriate
cautions in place.  Obviously any test cases are going to have to run fast,
or it will get rejected for being too slow to check.

Just my reading of the policies.  Have never tried it.

David


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of
Maciej Nasinski
Sent: Friday, July 16, 2021 6:14 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Scrapping R CRAN website from package

Dear Sir or Madam,

I am creating a new package `pacs` https://github.com/Polkas/pacs, which I
want to send to R CRAN shortly. However I am not sure about R CRAN policy
regarding scraping CRAN per package page with its archive.
More precisely I am fetching the data from
https://CRAN.R-project.org/package=%s and
https://cran.r-project.org/src/contrib/Archive/%s/ (downloading an old
tar.gz too).

Why I need this: I could read any DESCRIPTION files for any time point and
get a true dependency tree.  Moreover I could get a life duration of any
released package version, where shorter than 7 days are marked as risky. I
could compare a package min required dependencies difference before we
update it.  And much more.

I made a few notices like "Please as a courtesy to the R CRAN, don't
overload their server by constantly using this function." inside the
package.

Optionally If scrapping R CRAN from my package is a problem I will try to
build a separate DB with such data (updated everyday). Still any old tar.gz
has to be downloaded.

Maciej Nasinski, University of Warsaw

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@c@rtwr|ght @end|ng |rom gm@||@com  Sat Jul 17 22:03:00 2021
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed Cartwright)
Date: Sat, 17 Jul 2021 13:03:00 -0700
Subject: [R-pkg-devel] CMake on MacOS
Message-ID: <CAHoyoSLaLNqhG90U7eeWJufXv4duoMZFuf2eUAZ5jy3QLn=MQQ@mail.gmail.com>

My package, rbedrock (
https://cran.r-project.org/web/packages/rbedrock/index.html), depends on
CMake to configure a dependent library. This works fine on most build
machines as `cmake` is installed and in the path. However, cmake is missing
on the machines that produce macOS  binaries. So I have two questions:

(1) Is cmake installed on these machines and I'm just using the wrong path?

(2) If not, is there anyone I can contact about getting it installed on the
MacOS images?

Thanks,
Reed

	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Mon Jul 19 09:14:18 2021
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Mon, 19 Jul 2021 07:14:18 +0000 (UTC)
Subject: [R-pkg-devel] Scrapping R CRAN website from package
In-Reply-To: <004501d77aa1$b1c41520$154c3f60$@gmail.com>
References: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
 <004501d77aa1$b1c41520$154c3f60$@gmail.com>
Message-ID: <541152831.476595.1626678858420@mail.yahoo.com>

Could pkgsearch http://r-hub.github.io/pkgsearch/ help with what you're doing, as it can queries all versions of CRAN packages? See http://r-hub.github.io/pkgsearch/reference/cran_package_history.html for the docs of the function cran_package_history().

It does not scrape CRAN pages, it uses an R-hub API (that gets the data from CRAN so similar to your idea of building a separate DB :-) ).

Ma?lle.


Den l?rdag 17 juli 2021 02:21:55 CEST, <dbosak01 at gmail.com> skrev: 





Maciej:

There are other packages that query the CRAN site (cranlogs, etc.).? So it
seems the queries/fetches are generally allowed.? I can only find a couple
relevant mentions in the CRAN policies:


"Packages which use Internet resources should fail gracefully with an
informative message if the resource is not available or has changed (and not
give a check warning nor error)."

"Downloads of additional software or data as part of package installation or
startup should only use secure download mechanisms (e.g., 'https' or
'ftps'). For downloads of more than a few MB, ensure that a sufficiently
large timeout is set."


So it seems like what you are trying to do would be OK with the appropriate
cautions in place.? Obviously any test cases are going to have to run fast,
or it will get rejected for being too slow to check.

Just my reading of the policies.? Have never tried it.

David


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of
Maciej Nasinski
Sent: Friday, July 16, 2021 6:14 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Scrapping R CRAN website from package

Dear Sir or Madam,

I am creating a new package `pacs` https://github.com/Polkas/pacs, which I
want to send to R CRAN shortly. However I am not sure about R CRAN policy
regarding scraping CRAN per package page with its archive.
More precisely I am fetching the data from
https://CRAN.R-project.org/package=%s and
https://cran.r-project.org/src/contrib/Archive/%s/ (downloading an old
tar.gz too).

Why I need this: I could read any DESCRIPTION files for any time point and
get a true dependency tree.? Moreover I could get a life duration of any
released package version, where shorter than 7 days are marked as risky. I
could compare a package min required dependencies difference before we
update it.? And much more.

I made a few notices like "Please as a courtesy to the R CRAN, don't
overload their server by constantly using this function." inside the
package.

Optionally If scrapping R CRAN from my package is a problem I will try to
build a separate DB with such data (updated everyday). Still any old tar.gz
has to be downloaded.

Maciej Nasinski, University of Warsaw

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Jul 19 09:19:45 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 19 Jul 2021 09:19:45 +0200
Subject: [R-pkg-devel] Scrapping R CRAN website from package
In-Reply-To: <004501d77aa1$b1c41520$154c3f60$@gmail.com>
References: <CA+h+x0YnvqMnJ5srzv3uTY1QDhXGPVnnKqxxBj+2_uCQkZTFdw@mail.gmail.com>
 <004501d77aa1$b1c41520$154c3f60$@gmail.com>
Message-ID: <CABtg=KkNc-t9gUwkD2MgVhsV-w6FSoPJp3kAiP2NnDmMLsQCmA@mail.gmail.com>

On Sat, Jul 17, 2021 at 2:21 AM <dbosak01 at gmail.com> wrote:
>
> Maciej:
>
> There are other packages that query the CRAN site (cranlogs, etc.).  So it
> seems the queries/fetches are generally allowed.  I can only find a couple
> relevant mentions in the CRAN policies:
[...]

For the record, the cranlogs package does not scrape or even just
download anything from CRAN or any CRAN mirror.

Gabor


From @eb@meyer @end|ng |rom |@u@de  Mon Jul 19 14:36:37 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 19 Jul 2021 14:36:37 +0200
Subject: [R-pkg-devel] Spelling and manual CRAN inspection
In-Reply-To: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
References: <3dcbc0ce-9b58-fa9c-909e-f5348422b834@gmail.com>
Message-ID: <3bd6354b-c8af-bf09-e059-a420f80b769b@fau.de>

Note that the spell checks are not run by default in R CMD check. To 
trigger these, you need to set the (undocumented) environment variable

_R_CHECK_CRAN_INCOMING_USE_ASPELL_=TRUE

and have aspell (or alternatives) installed.

No worries about a potential pain of rechecking the same flagged words 
multiple times: Flagged words from the current CRAN version of the 
package are automatically filtered out (by default) if remote checks are 
enabled, i.e., if the environment variable

_R_CHECK_CRAN_INCOMING_REMOTE_=TRUE

(if unset it is TRUE for --as-cran). I'm sure the CRAN team takes care 
of that.

Anyway, if you would like to setup a dedicated dictionary for your 
package, this is also possible, see the "Watch Your Spelling!" R Journal 
article by Kurt Hornik and Duncan Murdoch 
(https://journal.r-project.org/archive/2011/RJ-2011-014/RJ-2011-014.pdf) 
and the details section in help("aspell-utils").

Best regards,

	Sebastian Meyer


Am 16.07.21 um 18:08 schrieb Kevin R. Coombes:
> Hi,
> 
>  ??I have been updating a couple of R packages this morning. One of them
> triggered a manual inspection for "possibly mis-spelled words in
> DESCRIPTION" for my last name (Coombes) --- even though none of the
> other 20 packages that I maintain has ever triggered that particular
> NOTE. A second package also triggered a manual inspection for
> mis-spelled words including "Proteomics". (These flags only arose on the
> debian CRAN machine, not the Windows CRAN machine, and not on my home
> machines. And let's ignore how many spelling corrections I had to make
> while typing this email)
> 
> *My question, however, is: why should this NOTE ever trigger a manual
> inspection?* That makes more work for the CRAN maintainers, who I am
> sure have better things to do than evaluate spelling. Anything that
> would actually stop the package from working (mis-spelling a keyword, or
> mis-spelling the name of package that is imported) is going to cause an
> automatic ERROR and a rejection of the submission without making more
> work for the CRAN maintainers. The other mis-spellings may reflect
> poorly on the package author, but since they are NOTEs, it is easy
> enough to get them fixed for the next round without making human
> eyeballs look at them.
> 
> Best,
>  ?? Kevin
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@nn@h@owen@ @end|ng |rom gm@||@com  Thu Jul 22 15:46:18 2021
From: h@nn@h@owen@ @end|ng |rom gm@||@com (Hannah Owens)
Date: Thu, 22 Jul 2021 15:46:18 +0200
Subject: [R-pkg-devel] Tracking down inconsistent errors and notes across
 operating systems
Message-ID: <CAB_Q2xK-pDFmU482YWWB6dzNC_M0dou9N3DZO4_D+4AF-JrtOw@mail.gmail.com>

Hi all,
I am working on an update to a package I have on CRAN called occCite. My
latest release attempt didn?t pass incoming automated checks, because there
is an outstanding error. Additionally, there are some weird notes I would
like to get rid of, if anyone has suggestions.

The killing error is in r-devel-linux-x86_64-debian-gcc, which is: Packages
required but not available: 'BIEN', 'taxize', ?RPostgreSQL'

I don?t understand this, as it is the only system that throws this error,
and the packages mentioned are available via CRAN. Any suggestions?

Additionally, there are multiple platforms
(r-devel-linux-x86_64-fedora-clang; r-devel-linux-x86_64-fedora-gcc;
r-devel-windows-x86_64-gcc10-UCRT; r-patched-solaris-x86;
r-release-macos-arm64; r-release-macos-x86_64; r-oldrel-macos-x86_64) where
two notes pop up:

NOTE 1: Namespace in Imports field not imported from: ?bit64? All declared
Imports should be used.

The package does use bit64. Any tips on how to address this note?

NOTE 2: Found 6 marked UTF-8 strings.

I presume this is thrown because of the small sample dataset I?ve included
in the package, but why is it not thrown for all the platforms?

Thanks in advance for any help!
Hannah O.

-- 
Hannah L. Owens, Ph.D.
Postdoctoral Associate
Center for Macroecology, Evolution, and Climate
University of Copenhagen

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Thu Jul 22 16:03:47 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 22 Jul 2021 16:03:47 +0200
Subject: [R-pkg-devel] 
 Tracking down inconsistent errors and notes across operating systems
In-Reply-To: <CAB_Q2xK-pDFmU482YWWB6dzNC_M0dou9N3DZO4_D+4AF-JrtOw@mail.gmail.com>
References: <CAB_Q2xK-pDFmU482YWWB6dzNC_M0dou9N3DZO4_D+4AF-JrtOw@mail.gmail.com>
Message-ID: <CALEXWq12a4SxVXO=t28fEbS0oV-XaZ9ndMgsW-EOqQnJK7gYpw@mail.gmail.com>

Hi,

On Thu, 22 Jul 2021 at 15:51, Hannah Owens <hannah.owens at gmail.com> wrote:
>
> Hi all,
> I am working on an update to a package I have on CRAN called occCite. My
> latest release attempt didn?t pass incoming automated checks, because there
> is an outstanding error. Additionally, there are some weird notes I would
> like to get rid of, if anyone has suggestions.
>
> The killing error is in r-devel-linux-x86_64-debian-gcc, which is: Packages
> required but not available: 'BIEN', 'taxize', ?RPostgreSQL'
>
> I don?t understand this, as it is the only system that throws this error,
> and the packages mentioned are available via CRAN. Any suggestions?

This kind of message usually arises when there is some problem with
those packages on CRAN. Indeed,

https://cran.r-project.org/web/checks/check_results_BIEN.html
https://cran.r-project.org/web/checks/check_results_taxize.html
https://cran.r-project.org/web/checks/check_results_RPostgreSQL.html

the three of them have ERRORs in that platform. No issue on your end.
You reply pointing to that.

> Additionally, there are multiple platforms
> (r-devel-linux-x86_64-fedora-clang; r-devel-linux-x86_64-fedora-gcc;
> r-devel-windows-x86_64-gcc10-UCRT; r-patched-solaris-x86;
> r-release-macos-arm64; r-release-macos-x86_64; r-oldrel-macos-x86_64) where
> two notes pop up:
>
> NOTE 1: Namespace in Imports field not imported from: ?bit64? All declared
> Imports should be used.
>
> The package does use bit64. Any tips on how to address this note?

Are you sure? Your NAMESPACE file does not import(bit64) nor
importFrom(bit64,) anything.

> NOTE 2: Found 6 marked UTF-8 strings.
>
> I presume this is thrown because of the small sample dataset I?ve included
> in the package, but why is it not thrown for all the platforms?

Not all the checks are necessarily done in all the platforms. You can
silence this NOTE by converting the offending strings in your datasets
to ASCII and resaving them.

-- 
I?aki ?car


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 22 16:26:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 22 Jul 2021 10:26:40 -0400
Subject: [R-pkg-devel] 
 Tracking down inconsistent errors and notes across operating systems
In-Reply-To: <CALEXWq12a4SxVXO=t28fEbS0oV-XaZ9ndMgsW-EOqQnJK7gYpw@mail.gmail.com>
References: <CAB_Q2xK-pDFmU482YWWB6dzNC_M0dou9N3DZO4_D+4AF-JrtOw@mail.gmail.com>
 <CALEXWq12a4SxVXO=t28fEbS0oV-XaZ9ndMgsW-EOqQnJK7gYpw@mail.gmail.com>
Message-ID: <95db1305-5a9d-36ca-3f6c-b8da165818dc@gmail.com>

On 22/07/2021 10:03 a.m., I?aki Ucar wrote:
> Hi,
> 
> On Thu, 22 Jul 2021 at 15:51, Hannah Owens <hannah.owens at gmail.com> wrote:
>>
>> Hi all,
>> I am working on an update to a package I have on CRAN called occCite. My
>> latest release attempt didn?t pass incoming automated checks, because there
>> is an outstanding error. Additionally, there are some weird notes I would
>> like to get rid of, if anyone has suggestions.
>>
>> The killing error is in r-devel-linux-x86_64-debian-gcc, which is: Packages
>> required but not available: 'BIEN', 'taxize', ?RPostgreSQL'
>>
>> I don?t understand this, as it is the only system that throws this error,
>> and the packages mentioned are available via CRAN. Any suggestions?
> 
> This kind of message usually arises when there is some problem with
> those packages on CRAN. Indeed,
> 
> https://cran.r-project.org/web/checks/check_results_BIEN.html
> https://cran.r-project.org/web/checks/check_results_taxize.html
> https://cran.r-project.org/web/checks/check_results_RPostgreSQL.html
> 
> the three of them have ERRORs in that platform. No issue on your end.
> You reply pointing to that.

Or reduce your dependence on them to Suggests.  As it is, nobody will be 
able to use your package on platforms that fail to install any of those. 
  Are they essential to most of your package, or just a few functions? 
If the latter, then list them as Suggests instead of Imports, leave them 
out of your imports in the NAMESPACE file, in the functions that need 
them add tests like

   if (!requireNamespace("BIEN"))
     stop("This function requires the BIEN package.")

   # do things, with BIEN:: prefix on functions from that package.

and make sure your examples are also conditionalized.

You'll still get messages that they aren't available, but it won't 
completely disable your package.

Duncan Murdoch

> 
>> Additionally, there are multiple platforms
>> (r-devel-linux-x86_64-fedora-clang; r-devel-linux-x86_64-fedora-gcc;
>> r-devel-windows-x86_64-gcc10-UCRT; r-patched-solaris-x86;
>> r-release-macos-arm64; r-release-macos-x86_64; r-oldrel-macos-x86_64) where
>> two notes pop up:
>>
>> NOTE 1: Namespace in Imports field not imported from: ?bit64? All declared
>> Imports should be used.
>>
>> The package does use bit64. Any tips on how to address this note?
> 
> Are you sure? Your NAMESPACE file does not import(bit64) nor
> importFrom(bit64,) anything.
> 
>> NOTE 2: Found 6 marked UTF-8 strings.
>>
>> I presume this is thrown because of the small sample dataset I?ve included
>> in the package, but why is it not thrown for all the platforms?
> 
> Not all the checks are necessarily done in all the platforms. You can
> silence this NOTE by converting the offending strings in your datasets
> to ASCII and resaving them.
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Jul 22 19:18:26 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 22 Jul 2021 10:18:26 -0700
Subject: [R-pkg-devel] 
 Tracking down inconsistent errors and notes across operating systems
In-Reply-To: <CALEXWq12a4SxVXO=t28fEbS0oV-XaZ9ndMgsW-EOqQnJK7gYpw@mail.gmail.com>
References: <CAB_Q2xK-pDFmU482YWWB6dzNC_M0dou9N3DZO4_D+4AF-JrtOw@mail.gmail.com>
 <CALEXWq12a4SxVXO=t28fEbS0oV-XaZ9ndMgsW-EOqQnJK7gYpw@mail.gmail.com>
Message-ID: <CAHqSRuR2HW0grqNCUJQT_VAZTvJzyYQn7w3kUhWxLqNZj_BHRQ@mail.gmail.com>

I think the problem with RPostgreSQL/sec/RS-DBI.c comes from some changes
to Defn.h and Rinternals.h in RHOME/include that Luke made recently
(2021-07-20, svn 80647).  Since then the line
   #define s_object SEXPREC
in Rdefines.h causes problems.  Should it now be 'struct SEXPREC'?

-Bill


On Thu, Jul 22, 2021 at 7:04 AM I?aki Ucar <iucar at fedoraproject.org> wrote:

> Hi,
>
> On Thu, 22 Jul 2021 at 15:51, Hannah Owens <hannah.owens at gmail.com> wrote:
> >
> > Hi all,
> > I am working on an update to a package I have on CRAN called occCite. My
> > latest release attempt didn?t pass incoming automated checks, because
> there
> > is an outstanding error. Additionally, there are some weird notes I would
> > like to get rid of, if anyone has suggestions.
> >
> > The killing error is in r-devel-linux-x86_64-debian-gcc, which is:
> Packages
> > required but not available: 'BIEN', 'taxize', ?RPostgreSQL'
> >
> > I don?t understand this, as it is the only system that throws this error,
> > and the packages mentioned are available via CRAN. Any suggestions?
>
> This kind of message usually arises when there is some problem with
> those packages on CRAN. Indeed,
>
> https://cran.r-project.org/web/checks/check_results_BIEN.html
> https://cran.r-project.org/web/checks/check_results_taxize.html
> https://cran.r-project.org/web/checks/check_results_RPostgreSQL.html
>
> the three of them have ERRORs in that platform. No issue on your end.
> You reply pointing to that.
>
> > Additionally, there are multiple platforms
> > (r-devel-linux-x86_64-fedora-clang; r-devel-linux-x86_64-fedora-gcc;
> > r-devel-windows-x86_64-gcc10-UCRT; r-patched-solaris-x86;
> > r-release-macos-arm64; r-release-macos-x86_64; r-oldrel-macos-x86_64)
> where
> > two notes pop up:
> >
> > NOTE 1: Namespace in Imports field not imported from: ?bit64? All
> declared
> > Imports should be used.
> >
> > The package does use bit64. Any tips on how to address this note?
>
> Are you sure? Your NAMESPACE file does not import(bit64) nor
> importFrom(bit64,) anything.
>
> > NOTE 2: Found 6 marked UTF-8 strings.
> >
> > I presume this is thrown because of the small sample dataset I?ve
> included
> > in the package, but why is it not thrown for all the platforms?
>
> Not all the checks are necessarily done in all the platforms. You can
> silence this NOTE by converting the offending strings in your datasets
> to ASCII and resaving them.
>
> --
> I?aki ?car
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Fri Jul 23 13:19:25 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Fri, 23 Jul 2021 11:19:25 +0000
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
Message-ID: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>

Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)

Of course, I get a WARNING for this:

?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
Duration: 6m 41.8s

? checking dependencies in R code ... WARNING
  Unexported objects imported by ':::' calls:
    ?parallel:::readChild? ?parallel:::selectChildren?
    ?parallel:::sendMaster?
    See the note in ?`:::` about the use of this operator.
    Including base/recommended package(s):
    ?parallel?

Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?

Kind regards,
David Norris


From g|t@demont @end|ng |rom gm@||@com  Fri Jul 23 13:48:39 2021
From: g|t@demont @end|ng |rom gm@||@com (git demont)
Date: Fri, 23 Jul 2021 13:48:39 +0200
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
Message-ID: <CAGf8esihPvG7-uWBVOxFv5Gax5a-N=21auyvLQFzO2Cg658=ZQ@mail.gmail.com>

AFAIK, you may use getFromNamespace to import non-exported function (e.g.
readChild <- getFromNamespace("readChild", "parallel") )
Although, I never use it myself for a package on CRAN

Concerning the unix only part, I don't know if it is acceptable or not,
If not, maybe it could be a good idea to have a package that can install on
all CRAN platform but to test OS and send a message to user whenever the
functionality is not available on its OS

Best,
Yohann Demont

On Fri, Jul 23, 2021 at 1:19 PM David Norris <david at precisionmethods.guru>
wrote:

> Because parallelized progress reporting in the futureverse.org incurs
> latencies too great for my application (
> https://github.com/HenrikBengtsson/progressr/issues/118), I have found it
> necessary to implement my own progress reporting using some of the
> non-exported functionality from `parallel`. (I do appreciate that Windows
> lacks the fork() system call, and will not support this. But am willing to
> make this an OS_type: unix-only package.)
>
> Of course, I get a WARNING for this:
>
> ?? R CMD check results ???????????????????????????????? precautionary
> 0.2.6 ????
> Duration: 6m 41.8s
>
> ? checking dependencies in R code ... WARNING
>   Unexported objects imported by ':::' calls:
>     ?parallel:::readChild? ?parallel:::selectChildren?
>     ?parallel:::sendMaster?
>     See the note in ?`:::` about the use of this operator.
>     Including base/recommended package(s):
>     ?parallel?
>
> Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way
> to do `:::` that avoids the warning altogether?
>
> Kind regards,
> David Norris
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Fri Jul 23 14:05:32 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 23 Jul 2021 14:05:32 +0200
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
Message-ID: <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>

Am 23.07.21 um 13:19 schrieb David Norris:
> Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)
> 
> Of course, I get a WARNING for this:
> 
> ?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
> Duration: 6m 41.8s
> 
> ? checking dependencies in R code ... WARNING
>    Unexported objects imported by ':::' calls:
>      ?parallel:::readChild? ?parallel:::selectChildren?
>      ?parallel:::sendMaster?
>      See the note in ?`:::` about the use of this operator.
>      Including base/recommended package(s):
>      ?parallel?
> 
> Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?

The 'parallel' functions your package intends to access seem to be 
intentionally unexported. Their help page says: "They are not available 
on Windows, and not exported from the namespace", and "This is a very 
low-level interface for expert use only: it not regarded as part of the 
R API and subject to change without notice."

Correspondingly, the CRAN Repository Policy says

> Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.

which kind of answers both of your questions. The policy thus implicitly 
advises against using getFromNamespace().

Best regards,

	Sebastian Meyer

> 
> Kind regards,
> David Norris
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Fri Jul 23 15:09:04 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Fri, 23 Jul 2021 13:09:04 +0000
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
Message-ID: <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>

I can confirm that getFromNamespace() does indeed circumvent the WARNING.
I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R

(Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)

Best, David

From: Sebastian Meyer <seb.meyer at fau.de>
Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
Date: Friday, July 23, 2021 at 8:05 AM
To: David Norris <david at precisionmethods.guru>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

Am 23.07.21 um 13:19 schrieb David Norris:
Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)

Of course, I get a WARNING for this:

?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
Duration: 6m 41.8s

? checking dependencies in R code ... WARNING
????Unexported objects imported by ':::' calls:
???????parallel:::readChild? ?parallel:::selectChildren?
???????parallel:::sendMaster?
??????See the note in ?`:::` about the use of this operator.
??????Including base/recommended package(s):
???????parallel?

Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?

The 'parallel' functions your package intends to access seem to be 
intentionally unexported. Their help page says: "They are not available 
on Windows, and not exported from the namespace", and "This is a very 
low-level interface for expert use only: it not regarded as part of the 
R API and subject to change without notice."

Correspondingly, the CRAN Repository Policy says

Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.

which kind of answers both of your questions. The policy thus implicitly 
advises against using getFromNamespace().

Best regards,

	Sebastian Meyer


Kind regards,
David Norris

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel




From hugh@p@r@on@ge @end|ng |rom gm@||@com  Fri Jul 23 16:59:54 2021
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Sat, 24 Jul 2021 00:59:54 +1000
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
 <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
Message-ID: <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>

Happily, package parallel is open-source. If you would like to make
use of the unexported functions, you could copy the source code with
acknowledgement into your package. Naturally this might be a lot of
work and risks different behaviour between your package and parallel,
but neither might be that terrible for you.  And certainly would be
better than trying to pretend that the functions you want are exported
from parallel.

On Fri, 23 Jul 2021 at 23:09, David Norris <david at precisionmethods.guru> wrote:
>
> I can confirm that getFromNamespace() does indeed circumvent the WARNING.
> I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
> I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
> Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
> https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R
>
> (Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)
>
> Best, David
>
> From: Sebastian Meyer <seb.meyer at fau.de>
> Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
> Date: Friday, July 23, 2021 at 8:05 AM
> To: David Norris <david at precisionmethods.guru>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
>
> Am 23.07.21 um 13:19 schrieb David Norris:
> Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)
>
> Of course, I get a WARNING for this:
>
> ?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
> Duration: 6m 41.8s
>
> ? checking dependencies in R code ... WARNING
>     Unexported objects imported by ':::' calls:
>       ?parallel:::readChild? ?parallel:::selectChildren?
>       ?parallel:::sendMaster?
>       See the note in ?`:::` about the use of this operator.
>       Including base/recommended package(s):
>       ?parallel?
>
> Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?
>
> The 'parallel' functions your package intends to access seem to be
> intentionally unexported. Their help page says: "They are not available
> on Windows, and not exported from the namespace", and "This is a very
> low-level interface for expert use only: it not regarded as part of the
> R API and subject to change without notice."
>
> Correspondingly, the CRAN Repository Policy says
>
> Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.
>
> which kind of answers both of your questions. The policy thus implicitly
> advises against using getFromNamespace().
>
> Best regards,
>
>         Sebastian Meyer
>
>
> Kind regards,
> David Norris
>
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul 23 17:26:30 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 23 Jul 2021 11:26:30 -0400
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
 <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
 <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>
Message-ID: <0f0cc2fa-7940-00f2-7e8c-6c5c93afbb82@gmail.com>

On 23/07/2021 10:59 a.m., Hugh Parsonage wrote:
> Happily, package parallel is open-source. If you would like to make
> use of the unexported functions, you could copy the source code with
> acknowledgement into your package.

There's a good chance that wouldn't work, because parallel is a base 
package.  Base packages can work with R internals and user-written 
packages can't.

Probably David's best course of action is to submit patches where 
necessary so that he doesn't need ::: access.  The original motivation 
appeared to be avoiding inefficiency in a contributed package; if 
there's a patch that can fix that, it could be available in a few days. 
  If it needs changes to the parallel package (e.g. exposing functions 
that are currently internal), that will take much longer, and needs a 
strong argument why the current API isn't sufficient.

Alternatively, he can go ahead and use :::, but just not expect his 
package to be on CRAN.  There are other ways to distribute packages.

Duncan Murdoch

  Naturally this might be a lot of
> work and risks different behaviour between your package and parallel,
> but neither might be that terrible for you.  And certainly would be
> better than trying to pretend that the functions you want are exported
> from parallel.
> 


> On Fri, 23 Jul 2021 at 23:09, David Norris <david at precisionmethods.guru> wrote:
>>
>> I can confirm that getFromNamespace() does indeed circumvent the WARNING.
>> I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
>> I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
>> Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
>> https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R
>>
>> (Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)
>>
>> Best, David
>>
>> From: Sebastian Meyer <seb.meyer at fau.de>
>> Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
>> Date: Friday, July 23, 2021 at 8:05 AM
>> To: David Norris <david at precisionmethods.guru>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
>>
>> Am 23.07.21 um 13:19 schrieb David Norris:
>> Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)
>>
>> Of course, I get a WARNING for this:
>>
>> ?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
>> Duration: 6m 41.8s
>>
>> ? checking dependencies in R code ... WARNING
>>      Unexported objects imported by ':::' calls:
>>        ?parallel:::readChild? ?parallel:::selectChildren?
>>        ?parallel:::sendMaster?
>>        See the note in ?`:::` about the use of this operator.
>>        Including base/recommended package(s):
>>        ?parallel?
>>
>> Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?
>>
>> The 'parallel' functions your package intends to access seem to be
>> intentionally unexported. Their help page says: "They are not available
>> on Windows, and not exported from the namespace", and "This is a very
>> low-level interface for expert use only: it not regarded as part of the
>> R API and subject to change without notice."
>>
>> Correspondingly, the CRAN Repository Policy says
>>
>> Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.
>>
>> which kind of answers both of your questions. The policy thus implicitly
>> advises against using getFromNamespace().
>>
>> Best regards,
>>
>>          Sebastian Meyer
>>
>>
>> Kind regards,
>> David Norris
>>
>> ______________________________________________
>> mailto:R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @kyebend @end|ng |rom @kyeome@net  Fri Jul 23 17:36:57 2021
From: @kyebend @end|ng |rom @kyeome@net (Skye Bender-deMoll)
Date: Fri, 23 Jul 2021 08:36:57 -0700
Subject: [R-pkg-devel] package upload failing with note about 'calibre'
 files in temp dirs
Message-ID: <ba93bcba-9f11-68fa-bb8f-6008c3b7adb2@skyeome.net>

Dear CRAN devs

I've recently run into some testing issues when attempting to release 
fixes for the ndtv package on CRAN.

1) I have examples in documentation that test the ability of the package 
to export files, but the creation of these files then results in a NOTE 
from testing.

For example:
 > export.dot(net,file="testNet.dot")


Flavor: r-devel-linux-x86_64-debian-gcc
Check: for non-standard things in the check directory, Result: NOTE
   Found the following files/directories:
     'testNet.dot' 'toy_epi_sim.net'

Is there a recommended path/location that I can dependably write to that 
won't cause testing issues?


2) I'm getting a NOTE about tmp files that don't seem to be generated by 
my package:

Flavor: r-devel-linux-x86_64-debian-gcc
Check: for detritus in the temp directory, Result: NOTE
   Found the following files/directories:
     'calibre_5.12.0_tmp_0xdbyqv2' 'calibre_5.12.0_tmp_1jl8jqpk'
     'calibre_5.12.0_tmp_5y0ez9_o' 'calibre_5.12.0_tmp_74yrardi'
     'calibre_5.12.0_tmp_94i7al75' 'calibre_5.12.0_tmp_ddddnxrg'
     'calibre_5.12.0_tmp_kspp394a' 'calibre_5.12.0_tmp_llj3v9l1'
     'calibre_5.12.0_tmp_n41oxz8a' 'calibre_5.12.0_tmp_nqsnylff'
     'calibre_5.12.0_tmp_o8q1up25' 'calibre_5.12.0_tmp_ou7_bpv1'
     'calibre_5.12.0_tmp_vcw1hd1w' 'calibre_5.12.0_tmp_xh0gp8d4'

I don't have any source code in my package that includes these file 
names, and searching on the web, it seems like it must be a reference to 
the a debian package for a "powerful and easy to use e-book manager" 
https://packages.debian.org/testing/calibre ?  This seems very unrelated 
to the functionality of the ndtv package, any ideas where these files 
are comming from?

Thanks for your help!
best,
  -skye


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul 23 17:51:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 23 Jul 2021 11:51:40 -0400
Subject: [R-pkg-devel] package upload failing with note about 'calibre'
 files in temp dirs
In-Reply-To: <ba93bcba-9f11-68fa-bb8f-6008c3b7adb2@skyeome.net>
References: <ba93bcba-9f11-68fa-bb8f-6008c3b7adb2@skyeome.net>
Message-ID: <82d18ad6-3bcd-440e-122d-eb8b83994eb9@gmail.com>

On 23/07/2021 11:36 a.m., Skye Bender-deMoll wrote:
> Dear CRAN devs
> 
> I've recently run into some testing issues when attempting to release
> fixes for the ndtv package on CRAN.
> 
> 1) I have examples in documentation that test the ability of the package
> to export files, but the creation of these files then results in a NOTE
> from testing.
> 
> For example:
>   > export.dot(net,file="testNet.dot")
> 
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for non-standard things in the check directory, Result: NOTE
>     Found the following files/directories:
>       'testNet.dot' 'toy_epi_sim.net'

You can write to the directory given by tempdir().  You may still get a 
note if you don't delete the files when you're done with them.

No idea about the other issue.

Duncan Murdoch

> 
> Is there a recommended path/location that I can dependably write to that
> won't cause testing issues?
> 
> 
> 2) I'm getting a NOTE about tmp files that don't seem to be generated by
> my package:
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for detritus in the temp directory, Result: NOTE
>     Found the following files/directories:
>       'calibre_5.12.0_tmp_0xdbyqv2' 'calibre_5.12.0_tmp_1jl8jqpk'
>       'calibre_5.12.0_tmp_5y0ez9_o' 'calibre_5.12.0_tmp_74yrardi'
>       'calibre_5.12.0_tmp_94i7al75' 'calibre_5.12.0_tmp_ddddnxrg'
>       'calibre_5.12.0_tmp_kspp394a' 'calibre_5.12.0_tmp_llj3v9l1'
>       'calibre_5.12.0_tmp_n41oxz8a' 'calibre_5.12.0_tmp_nqsnylff'
>       'calibre_5.12.0_tmp_o8q1up25' 'calibre_5.12.0_tmp_ou7_bpv1'
>       'calibre_5.12.0_tmp_vcw1hd1w' 'calibre_5.12.0_tmp_xh0gp8d4'
> 
> I don't have any source code in my package that includes these file
> names, and searching on the web, it seems like it must be a reference to
> the a debian package for a "powerful and easy to use e-book manager"
> https://packages.debian.org/testing/calibre ?  This seems very unrelated
> to the functionality of the ndtv package, any ideas where these files
> are comming from?
> 
> Thanks for your help!
> best,
>    -skye
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Fri Jul 23 19:17:00 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Fri, 23 Jul 2021 17:17:00 +0000
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <0f0cc2fa-7940-00f2-7e8c-6c5c93afbb82@gmail.com>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
 <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
 <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>
 <0f0cc2fa-7940-00f2-7e8c-6c5c93afbb82@gmail.com>
Message-ID: <9EA2B671-E3E9-40BE-B160-7702144D8410@precisionmethods.guru>

My understanding about this issue with progressr is that it is nontrivial, and will take author Henrik Bengtsson some time & thought to resolve.
OTOH if patches to 'parallel' were welcome, I could embed my solution in a modified version of parallel::mclapply by introducing 1 or 2 new parameters (e.g., mc.prog=NULL) to support progress reporting consistently with the existing interface.

From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Friday, July 23, 2021 at 11:26 AM
To: Hugh Parsonage <hugh.parsonage at gmail.com>, David Norris <david at precisionmethods.guru>
Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

On 23/07/2021 10:59 a.m., Hugh Parsonage wrote:
Happily, package parallel is open-source. If you would like to make
use of the unexported functions, you could copy the source code with
acknowledgement into your package.

There's a good chance that wouldn't work, because parallel is a base 
package.??Base packages can work with R internals and user-written 
packages can't.

Probably David's best course of action is to submit patches where 
necessary so that he doesn't need ::: access.??The original motivation 
appeared to be avoiding inefficiency in a contributed package; if 
there's a patch that can fix that, it could be available in a few days. 
??If it needs changes to the parallel package (e.g. exposing functions 
that are currently internal), that will take much longer, and needs a 
strong argument why the current API isn't sufficient.

Alternatively, he can go ahead and use :::, but just not expect his 
package to be on CRAN.??There are other ways to distribute packages.

Duncan Murdoch

??Naturally this might be a lot of
work and risks different behaviour between your package and parallel,
but neither might be that terrible for you.??And certainly would be
better than trying to pretend that the functions you want are exported
from parallel.



On Fri, 23 Jul 2021 at 23:09, David Norris <mailto:david at precisionmethods.guru> wrote:

I can confirm that getFromNamespace() does indeed circumvent the WARNING.
I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R

(Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)

Best, David

From: Sebastian Meyer <mailto:seb.meyer at fau.de>
Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
Date: Friday, July 23, 2021 at 8:05 AM
To: David Norris <mailto:david at precisionmethods.guru>, "mailto:r-package-devel at r-project.org" <mailto:r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

Am 23.07.21 um 13:19 schrieb David Norris:
Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)

Of course, I get a WARNING for this:

?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
Duration: 6m 41.8s

? checking dependencies in R code ... WARNING
??????Unexported objects imported by ':::' calls:
?????????parallel:::readChild? ?parallel:::selectChildren?
?????????parallel:::sendMaster?
????????See the note in ?`:::` about the use of this operator.
????????Including base/recommended package(s):
?????????parallel?

Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?

The 'parallel' functions your package intends to access seem to be
intentionally unexported. Their help page says: "They are not available
on Windows, and not exported from the namespace", and "This is a very
low-level interface for expert use only: it not regarded as part of the
R API and subject to change without notice."

Correspondingly, the CRAN Repository Policy says

Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.

which kind of answers both of your questions. The policy thus implicitly
advises against using getFromNamespace().

Best regards,

??????????Sebastian Meyer


Kind regards,
David Norris

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel





From bbo|ker @end|ng |rom gm@||@com  Fri Jul 23 19:28:31 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 23 Jul 2021 13:28:31 -0400
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <9EA2B671-E3E9-40BE-B160-7702144D8410@precisionmethods.guru>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
 <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
 <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>
 <0f0cc2fa-7940-00f2-7e8c-6c5c93afbb82@gmail.com>
 <9EA2B671-E3E9-40BE-B160-7702144D8410@precisionmethods.guru>
Message-ID: <bf9cef10-7820-fd76-bb04-aa44a24a9559@gmail.com>

   Patches to parallel could certainly be *considered*, but people will 
probably want to argue about the details quite a bit.  I would suggest 
presenting/discussing your ideas for modification on r-devel before 
posting them as a 'wishlist' item to the R bug tracker. (If an R-core 
member participates in the discussion on r-devel and is convinced of the 
utility and harmlessness of your modifications the last step might be 
unnecessary).

   cheers
    Ben Bolker


On 7/23/21 1:17 PM, David Norris wrote:
> My understanding about this issue with progressr is that it is nontrivial, and will take author Henrik Bengtsson some time & thought to resolve.
> OTOH if patches to 'parallel' were welcome, I could embed my solution in a modified version of parallel::mclapply by introducing 1 or 2 new parameters (e.g., mc.prog=NULL) to support progress reporting consistently with the existing interface.
> 
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Friday, July 23, 2021 at 11:26 AM
> To: Hugh Parsonage <hugh.parsonage at gmail.com>, David Norris <david at precisionmethods.guru>
> Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
> 
> On 23/07/2021 10:59 a.m., Hugh Parsonage wrote:
> Happily, package parallel is open-source. If you would like to make
> use of the unexported functions, you could copy the source code with
> acknowledgement into your package.
> 
> There's a good chance that wouldn't work, because parallel is a base
> package.??Base packages can work with R internals and user-written
> packages can't.
> 
> Probably David's best course of action is to submit patches where
> necessary so that he doesn't need ::: access.??The original motivation
> appeared to be avoiding inefficiency in a contributed package; if
> there's a patch that can fix that, it could be available in a few days.
>  ??If it needs changes to the parallel package (e.g. exposing functions
> that are currently internal), that will take much longer, and needs a
> strong argument why the current API isn't sufficient.
> 
> Alternatively, he can go ahead and use :::, but just not expect his
> package to be on CRAN.??There are other ways to distribute packages.
> 
> Duncan Murdoch
> 
>  ??Naturally this might be a lot of
> work and risks different behaviour between your package and parallel,
> but neither might be that terrible for you.??And certainly would be
> better than trying to pretend that the functions you want are exported
> from parallel.
> 
> 
> 
> On Fri, 23 Jul 2021 at 23:09, David Norris <mailto:david at precisionmethods.guru> wrote:
> 
> I can confirm that getFromNamespace() does indeed circumvent the WARNING.
> I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
> I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
> Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
> https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R
> 
> (Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)
> 
> Best, David
> 
> From: Sebastian Meyer <mailto:seb.meyer at fau.de>
> Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
> Date: Friday, July 23, 2021 at 8:05 AM
> To: David Norris <mailto:david at precisionmethods.guru>, "mailto:r-package-devel at r-project.org" <mailto:r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
> 
> Am 23.07.21 um 13:19 schrieb David Norris:
> Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)
> 
> Of course, I get a WARNING for this:
> 
> ?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
> Duration: 6m 41.8s
> 
> ? checking dependencies in R code ... WARNING
>  ??????Unexported objects imported by ':::' calls:
>  ?????????parallel:::readChild? ?parallel:::selectChildren?
>  ?????????parallel:::sendMaster?
>  ????????See the note in ?`:::` about the use of this operator.
>  ????????Including base/recommended package(s):
>  ?????????parallel?
> 
> Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?
> 
> The 'parallel' functions your package intends to access seem to be
> intentionally unexported. Their help page says: "They are not available
> on Windows, and not exported from the namespace", and "This is a very
> low-level interface for expert use only: it not regarded as part of the
> R API and subject to change without notice."
> 
> Correspondingly, the CRAN Repository Policy says
> 
> Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.
> 
> which kind of answers both of your questions. The policy thus implicitly
> advises against using getFromNamespace().
> 
> Best regards,
> 
>  ??????????Sebastian Meyer
> 
> 
> Kind regards,
> David Norris
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Fri Jul 23 20:10:36 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Fri, 23 Jul 2021 18:10:36 +0000
Subject: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings
In-Reply-To: <bf9cef10-7820-fd76-bb04-aa44a24a9559@gmail.com>
References: <9AEB3219-D931-4BCA-A153-9E5005776F0E@precisionmethods.guru>
 <2167f36e-81f8-1f22-3b9d-ab77ace722e5@fau.de>
 <99B05BDC-B70E-4D69-927B-A3EAF5F1DDC1@precisionmethods.guru>
 <CAJmOi+Or_kc75_4Ey7uEB+8SDGwiDoJDsH5gH7DM9PTnOQY-zw@mail.gmail.com>
 <0f0cc2fa-7940-00f2-7e8c-6c5c93afbb82@gmail.com>
 <9EA2B671-E3E9-40BE-B160-7702144D8410@precisionmethods.guru>
 <bf9cef10-7820-fd76-bb04-aa44a24a9559@gmail.com>
Message-ID: <909E6A48-B885-4AE1-875F-6797AA09DF5B@precisionmethods.guru>

Thanks for delineating r-devel vs this list, Ben, and for invitation to start a fresh convo over there.
I'll do that once I can exhibit a basic proposal functioning within package 'precautionary'.
Best, David

From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Ben Bolker <bbolker at gmail.com>
Date: Friday, July 23, 2021 at 1:29 PM
To: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

?? Patches to parallel could certainly be *considered*, but people will 
probably want to argue about the details quite a bit.??I would suggest 
presenting/discussing your ideas for modification on r-devel before 
posting them as a 'wishlist' item to the R bug tracker. (If an R-core 
member participates in the discussion on r-devel and is convinced of the 
utility and harmlessness of your modifications the last step might be 
unnecessary).

?? cheers
????Ben Bolker


On 7/23/21 1:17 PM, David Norris wrote:
My understanding about this issue with progressr is that it is nontrivial, and will take author Henrik Bengtsson some time & thought to resolve.
OTOH if patches to 'parallel' were welcome, I could embed my solution in a modified version of parallel::mclapply by introducing 1 or 2 new parameters (e.g., mc.prog=NULL) to support progress reporting consistently with the existing interface.

From: Duncan Murdoch <mailto:murdoch.duncan at gmail.com>
Date: Friday, July 23, 2021 at 11:26 AM
To: Hugh Parsonage <mailto:hugh.parsonage at gmail.com>, David Norris <mailto:david at precisionmethods.guru>
Cc: "mailto:r-package-devel at r-project.org" <mailto:r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

On 23/07/2021 10:59 a.m., Hugh Parsonage wrote:
Happily, package parallel is open-source. If you would like to make
use of the unexported functions, you could copy the source code with
acknowledgement into your package.

There's a good chance that wouldn't work, because parallel is a base
package.??Base packages can work with R internals and user-written
packages can't.

Probably David's best course of action is to submit patches where
necessary so that he doesn't need ::: access.??The original motivation
appeared to be avoiding inefficiency in a contributed package; if
there's a patch that can fix that, it could be available in a few days.
????If it needs changes to the parallel package (e.g. exposing functions
that are currently internal), that will take much longer, and needs a
strong argument why the current API isn't sufficient.

Alternatively, he can go ahead and use :::, but just not expect his
package to be on CRAN.??There are other ways to distribute packages.

Duncan Murdoch

????Naturally this might be a lot of
work and risks different behaviour between your package and parallel,
but neither might be that terrible for you.??And certainly would be
better than trying to pretend that the functions you want are exported
from parallel.



On Fri, 23 Jul 2021 at 23:09, David Norris <mailto:david at precisionmethods.guru> wrote:

I can confirm that getFromNamespace() does indeed circumvent the WARNING.
I might otherwise prefer ':::', however, for making its 'bad intentions' so clear.
I was very much aware of the cautionary language under `?readChild`, but wondered whether *in practice* more liberal community policies might be in force pending the maturation of the futureverse.
Although the sparse history of the relevant file hardly supports "might-break-at-any-time" alarmism, I do note that the last commit (in May 2020) introduced an argument sendMaster(raw.asis=TRUE) that I am actually using.
https://github.com/wch/r-source/commits/trunk/src/library/parallel/R/unix/mcfork.R

(Also agree with Yohann that ideally one might support Windows with a warning such as data.table issues regarding my Mac's non-support for OpenMP.)

Best, David

From: Sebastian Meyer <mailto:seb.meyer at fau.de>
Organization: Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
Date: Friday, July 23, 2021 at 8:05 AM
To: David Norris <mailto:david at precisionmethods.guru>, "mailto:r-package-devel at r-project.org" <mailto:r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Using parallel:::sendMaster &c. despite warnings

Am 23.07.21 um 13:19 schrieb David Norris:
Because parallelized progress reporting in the futureverse.org incurs latencies too great for my application (https://github.com/HenrikBengtsson/progressr/issues/118), I have found it necessary to implement my own progress reporting using some of the non-exported functionality from `parallel`. (I do appreciate that Windows lacks the fork() system call, and will not support this. But am willing to make this an OS_type: unix-only package.)

Of course, I get a WARNING for this:

?? R CMD check results ???????????????????????????????? precautionary 0.2.6 ????
Duration: 6m 41.8s

? checking dependencies in R code ... WARNING
????????Unexported objects imported by ':::' calls:
???????????parallel:::readChild? ?parallel:::selectChildren?
???????????parallel:::sendMaster?
??????????See the note in ?`:::` about the use of this operator.
??????????Including base/recommended package(s):
???????????parallel?

Is this warning an absolute deal-killer on CRAN? Is there a 'correct' way to do `:::` that avoids the warning altogether?

The 'parallel' functions your package intends to access seem to be
intentionally unexported. Their help page says: "They are not available
on Windows, and not exported from the namespace", and "This is a very
low-level interface for expert use only: it not regarded as part of the
R API and subject to change without notice."

Correspondingly, the CRAN Repository Policy says

Also, ::: should not be used to access undocumented/internal objects in base packages (nor should other means of access be employed). Such usages can cause packages to break at any time, even in patched versions of R.

which kind of answers both of your questions. The policy thus implicitly
advises against using getFromNamespace().

Best regards,

????????????Sebastian Meyer


Kind regards,
David Norris

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel




______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



From ru@@e||@g@@|mond @end|ng |rom gm@||@com  Sat Jul 24 18:04:15 2021
From: ru@@e||@g@@|mond @end|ng |rom gm@||@com (Russell Almond)
Date: Sat, 24 Jul 2021 12:04:15 -0400
Subject: [R-pkg-devel] Creating a package that links to a 3rd party library:
 Technical questions
Message-ID: <0ee817f8-8aed-1a71-8ece-d36547522147@gmail.com>

I'm working on a package called RNetica which links to a 3rd party 
library:  Netica.  Netica is available in both static (libnetica.a) and 
shared (libnetica.so) version (also Netica.dll for windows, but that is 
a separate topic).

I have a version of my package which works very well 
(github_install("ralmond/RNetica")), but it requires manually moving the 
`libnetica.so` file into someplace like `/usr/local/lib` where R will 
find it.

My preferences for how to deal with this are:

1) Figure out a set of flags to send to the linker so that R CMD INSTALL 
links against the static rather than the dynamic library.

2) Figure out how to add a line to the makefile so that `libnetica.so` 
will be copied to a directory where R will find it.  This is a bit 
tricky as a user without admin privileges may not have write permission 
on the proper directory.

I would be grateful for any suggestions.

	--Russell Almond


From ru@@e||@g@@|mond @end|ng |rom gm@||@com  Sat Jul 24 18:14:25 2021
From: ru@@e||@g@@|mond @end|ng |rom gm@||@com (Russell Almond)
Date: Sat, 24 Jul 2021 12:14:25 -0400
Subject: [R-pkg-devel] Adding package with 3rd party library to CRAN: legal
 question
Message-ID: <d06923ad-7342-b19e-a1bc-e25ff8c4df33@gmail.com>

This is related to my previous technical question, but really is a 
question about CRAN policy.

I'm currently the maintainer of the RNetica package 
(https://github.com/ralmond/RNetica) which provides an R binding for the 
C API of the Netica Bayes net library (https://norsys.com).  The Netica 
library is available in both a "student" and "professional" version, the 
difference being a license code available from Norsys.  The student 
version is sufficiently functional to run the test suite and to be used 
for educational purposes.  Installing the package from github installs 
the student version, which can be converted to a professional version by 
purchasing a license code.

In the past, Norsys has been fine with me distributing binaries which 
included the Netica code (but not the license keys), and I'm sure that 
they would be okay with CRAN distributing student-mode binaries as well. 
  Currently, the source version will download the Netica API kit from 
the Norsys web site and install Netica (still working out one or two 
technical glitches).

What are the policy issues associated with distributing this package 
through CRAN?  My own code is licensed under the Artistic license (which 
is CRAN compatible), but the 3rd party shared library has a different 
license from Netica.  Can I distribute RNetica through CRAN or am I 
stuck with a github-only distribution.

Thanks for your assistance.
	--Russell Almond


From edd @end|ng |rom deb|@n@org  Sat Jul 24 18:35:35 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 24 Jul 2021 11:35:35 -0500
Subject: [R-pkg-devel] 
 Creating a package that links to a 3rd party library:
 Technical questions
In-Reply-To: <0ee817f8-8aed-1a71-8ece-d36547522147@gmail.com>
References: <0ee817f8-8aed-1a71-8ece-d36547522147@gmail.com>
Message-ID: <24828.16727.48828.783245@rob.eddelbuettel.com>


Russell,

On 24 July 2021 at 12:04, Russell Almond wrote:
| I'm working on a package called RNetica which links to a 3rd party 
| library:  Netica.  Netica is available in both static (libnetica.a) and 
| shared (libnetica.so) version (also Netica.dll for windows, but that is 
| a separate topic).
| 
| I have a version of my package which works very well 
| (github_install("ralmond/RNetica")), but it requires manually moving the 
| `libnetica.so` file into someplace like `/usr/local/lib` where R will 
| find it.
| 
| My preferences for how to deal with this are:
| 
| 1) Figure out a set of flags to send to the linker so that R CMD INSTALL 
| links against the static rather than the dynamic library.
| 
| 2) Figure out how to add a line to the makefile so that `libnetica.so` 
| will be copied to a directory where R will find it.  This is a bit 
| tricky as a user without admin privileges may not have write permission 
| on the proper directory.
| 
| I would be grateful for any suggestions.

Building R packages against third-party C (or C++) packages is a common
topic.  There are a number of subtle sub-points here, and I tried to address
these in a recent-ish paper
   https://arxiv.org/abs/1911.06416
also available as a vignette in the Rcpp package
   http://cran.r-project.org/package=Rcpp/vignettes/Rcpp-libraries.pdf

An actual external (shared or static) library is a pretty tricky step. It has
been done a number of times before, see e.g. our Rblpapi package for use with
the Bloomberg API library ("free as in beer but not in speech" as no source
code) which we download at build time. That is a borderline case, in general
having source is better. Another case is deciding whether to use it as a
system library ("easy", "fast", less compilation; also less "reliable" as you
cannot control but users have) and/or embedding.  The database package span
the gamut there: sometimes the code is embedded, sometimes it is used as a
library on some platforms but locally compiled as part of the package and so
on.

It all depends. You may have a hard case if there are legal / redistribution
issues as per your other email.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@e@e005 @end|ng |rom umn@edu  Sat Jul 24 18:46:08 2021
From: m@e@e005 @end|ng |rom umn@edu (Danielle Maeser)
Date: Sat, 24 Jul 2021 11:46:08 -0500
Subject: [R-pkg-devel] Building Vignettes
Message-ID: <CA+YOmB_-v_mZWnHayaW7yenybn9tOoCBq6FWVAQPGh5G+vzH9w@mail.gmail.com>

Hello,

I have a question concerning the oncoPredict R package. I noticed this
package requires obtaining the .tar.gz file, then selecting the option to
install, and then  'Build Source Package' inorder to build the vignettes.

However, this isn't always the case with other packages. These require
installing from the .tar.gz file, but they don't also require building the
source package.

Why is building the source package required in some cases but not in others?

Any assistance would be appreciated.

Danielle

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jul 24 18:59:57 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 24 Jul 2021 12:59:57 -0400
Subject: [R-pkg-devel] Building Vignettes
In-Reply-To: <CA+YOmB_-v_mZWnHayaW7yenybn9tOoCBq6FWVAQPGh5G+vzH9w@mail.gmail.com>
References: <CA+YOmB_-v_mZWnHayaW7yenybn9tOoCBq6FWVAQPGh5G+vzH9w@mail.gmail.com>
Message-ID: <2d056cc7-e953-1b75-df51-6af968b1452c@gmail.com>

On 24/07/2021 12:46 p.m., Danielle Maeser wrote:
> Hello,
> 
> I have a question concerning the oncoPredict R package. I noticed this
> package requires obtaining the .tar.gz file, then selecting the option to
> install, and then  'Build Source Package' inorder to build the vignettes.
> 
> However, this isn't always the case with other packages. These require
> installing from the .tar.gz file, but they don't also require building the
> source package.
> 
> Why is building the source package required in some cases but not in others?
> 
> Any assistance would be appreciated.

Usually people include the built vignettes in the .tar.gz file, but if 
it was created with the --no-build-vignettes option, they won't be 
included.

If they are not included, you'll need to install the package to build them.

Some people create .tar.gz files for packages by methods other than 
running R CMD build (or equivalent functions).  Those may not be 
recognized by the R installer, so you would need to untar them, run R 
CMD build yourself, and then install the corrected tarball.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Jul 25 15:16:44 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 25 Jul 2021 15:16:44 +0200
Subject: [R-pkg-devel] 
 Adding package with 3rd party library to CRAN: legal question
In-Reply-To: <d06923ad-7342-b19e-a1bc-e25ff8c4df33@gmail.com>
References: <d06923ad-7342-b19e-a1bc-e25ff8c4df33@gmail.com>
Message-ID: <a0b7a6e8-6583-1f89-437f-315107899f89@statistik.tu-dortmund.de>

A package can have one or more licneses, but they have to apply to the 
whole package, otehrwise the componentes havbe to be distributed separately.

Also note that CRAN accepts FOSS licenses. This sounds like a case that 
CRAN will not agree to distribute the (non FOSS) binaries.

Best,
Uwe Ligges


On 24.07.2021 18:14, Russell Almond wrote:
> This is related to my previous technical question, but really is a 
> question about CRAN policy.
> 
> I'm currently the maintainer of the RNetica package 
> (https://github.com/ralmond/RNetica) which provides an R binding for the 
> C API of the Netica Bayes net library (https://norsys.com).? The Netica 
> library is available in both a "student" and "professional" version, the 
> difference being a license code available from Norsys.? The student 
> version is sufficiently functional to run the test suite and to be used 
> for educational purposes.? Installing the package from github installs 
> the student version, which can be converted to a professional version by 
> purchasing a license code.
> 
> In the past, Norsys has been fine with me distributing binaries which 
> included the Netica code (but not the license keys), and I'm sure that 
> they would be okay with CRAN distributing student-mode binaries as well. 
>  ?Currently, the source version will download the Netica API kit from 
> the Norsys web site and install Netica (still working out one or two 
> technical glitches).
> 
> What are the policy issues associated with distributing this package 
> through CRAN?? My own code is licensed under the Artistic license (which 
> is CRAN compatible), but the 3rd party shared library has a different 
> license from Netica.? Can I distribute RNetica through CRAN or am I 
> stuck with a github-only distribution.
> 
> Thanks for your assistance.
>  ????--Russell Almond
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kjohn@on @end|ng |rom @koy@b|o@com  Mon Jul 26 17:02:40 2021
From: kjohn@on @end|ng |rom @koy@b|o@com (Kent Johnson)
Date: Mon, 26 Jul 2021 15:02:40 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
Message-ID: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>

Hi,

What is the usual process to submit a new package to CRAN which has false-positive warnings?

I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at ftp://cran.r-project.org/incoming.

I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?

win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log
cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md

Thank you for any guidance,
Kent Johnson
Akoya Biosciences

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Mon Jul 26 17:52:06 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Mon, 26 Jul 2021 11:52:06 -0400
Subject: [R-pkg-devel] C++17
Message-ID: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>

Hi Folks,

It appears that c++17 is not supported on all platforms used by CRAN. Is
there a workaround?

I have CXX_STD = CXX17 in the package Makevars file, but see
https://cran.r-project.org/web/checks/check_results_kdtools.html

I assume if CXX17 is not defined, it is not available on that build owing
to the compiler. I'm curious to know if anyone else has solved that problem.

Thanks.

THK

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Jul 26 18:07:03 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 26 Jul 2021 17:07:03 +0100
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
Message-ID: <bfd434e6-1cad-f838-8cb8-4aff402c5e2b@dewey.myzen.co.uk>

Dear Kent

I think the canonical way to report these is in the space on the 
submission form, unless I have not correctly grasped what you did.

Michael

On 26/07/2021 16:02, Kent Johnson wrote:
> Hi,
> 
> What is the usual process to submit a new package to CRAN which has false-positive warnings?
> 
> I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at ftp://cran.r-project.org/incoming.
> 
> I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?
> 
> win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log
> cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md
> 
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From kjohn@on @end|ng |rom @koy@b|o@com  Mon Jul 26 19:38:06 2021
From: kjohn@on @end|ng |rom @koy@b|o@com (Kent Johnson)
Date: Mon, 26 Jul 2021 17:38:06 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <bfd434e6-1cad-f838-8cb8-4aff402c5e2b@dewey.myzen.co.uk>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>,
 <bfd434e6-1cad-f838-8cb8-4aff402c5e2b@dewey.myzen.co.uk>
Message-ID: <MN2PR18MB36698B209FDF241956C39A22B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>

Thanks Michael! So I should re-submit the package with the documentation on WARNINGS in the comments section of the submission?

Kent

________________________________
From: Michael Dewey <lists at dewey.myzen.co.uk>
Sent: Monday, July 26, 2021 12:07 PM
To: Kent Johnson <kjohnson at akoyabio.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN submission with warnings

Dear Kent

I think the canonical way to report these is in the space on the
submission form, unless I have not correctly grasped what you did.

Michael

On 26/07/2021 16:02, Kent Johnson wrote:
> Hi,
>
> What is the usual process to submit a new package to CRAN which has false-positive warnings?
>
> I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at ftp://cran.r-project.org/incoming<ftp://cran.r-project.org/incoming>.
>
> I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?
>
> win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>
> cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md<https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
>
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

--
Michael
http://www.dewey.myzen.co.uk/home.html<http://www.dewey.myzen.co.uk/home.html>

	[[alternative HTML version deleted]]


From kjohn@on @end|ng |rom @koy@b|o@com  Mon Jul 26 19:46:55 2021
From: kjohn@on @end|ng |rom @koy@b|o@com (Kent Johnson)
Date: Mon, 26 Jul 2021 17:46:55 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <MN2PR18MB36698B209FDF241956C39A22B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>,
 <bfd434e6-1cad-f838-8cb8-4aff402c5e2b@dewey.myzen.co.uk>,
 <MN2PR18MB36698B209FDF241956C39A22B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
Message-ID: <MN2PR18MB3669D058E4FBC9D6A978DE44B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>

Actually I think the contents of cran-comments.md were included in the comments on the submission form. I used devtools::submit_cran() for the submission. It automates the form submission and IIUC copies cran-comments into the form. My comments are in the confirmation email I received.

Kent
________________________________
From: Kent Johnson <kjohnson at akoyabio.com>
Sent: Monday, July 26, 2021 1:38 PM
To: Michael Dewey <lists at dewey.myzen.co.uk>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN submission with warnings

Thanks Michael! So I should re-submit the package with the documentation on WARNINGS in the comments section of the submission?

Kent

________________________________
From: Michael Dewey <lists at dewey.myzen.co.uk>
Sent: Monday, July 26, 2021 12:07 PM
To: Kent Johnson <kjohnson at akoyabio.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN submission with warnings

Dear Kent

I think the canonical way to report these is in the space on the
submission form, unless I have not correctly grasped what you did.

Michael

On 26/07/2021 16:02, Kent Johnson wrote:
> Hi,
>
> What is the usual process to submit a new package to CRAN which has false-positive warnings?
>
> I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at ftp://cran.r-project.org/incoming<ftp://cran.r-project.org/incoming>.
>
> I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?
>
> win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>
> cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md<https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
>
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

--
Michael
http://www.dewey.myzen.co.uk/home.html<http://www.dewey.myzen.co.uk/home.html>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul 26 21:12:50 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 26 Jul 2021 15:12:50 -0400
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
Message-ID: <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>

On 26/07/2021 11:02 a.m., Kent Johnson wrote:
> Hi,
> 
> What is the usual process to submit a new package to CRAN which has false-positive warnings?
> 
> I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at ftp://cran.r-project.org/incoming.
> 
> I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?

Generally I'd sit for a week or so, then send a gentle reminder.  It's 
summer, and people are on holiday, so you might make that 10 days.

Regarding the issues:

Since one of them comes from the BH package rather than yours, you might 
want to talk to Dirk for advice about it.

The second issue you mention in your comment looks more serious:
"Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found 
'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf', 
possibly from 'printf' (C)".

Your response that you don't call  'abort', 'exit' or 'printf' isn't 
sufficient here:  those functions appear to have been linked in to your 
DLL, so somebody is calling them.  I'd try to track down those calls and 
see if there's a way to compile without them.

Duncan Murdoch

> 
> win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log
> cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md
> 
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kjohn@on @end|ng |rom @koy@b|o@com  Mon Jul 26 21:34:18 2021
From: kjohn@on @end|ng |rom @koy@b|o@com (Kent Johnson)
Date: Mon, 26 Jul 2021 19:34:18 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>,
 <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
Message-ID: <MN2PR18MB36690AA2F384CA79CFB7F9A1B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>

Thanks, Duncan,

I did consult with Dirk about the warnings. The #pragma in Boost headers which disables those warnings is not allowed in a CRAN submission, so he removed the #pragma, enabling the warnings.

I see that Boost does call std::abort in its error handling. I don't think I can do anything about that...

Kent

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Monday, July 26, 2021 3:12 PM
To: Kent Johnson <kjohnson at akoyabio.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN submission with warnings

Regarding the issues:

Since one of them comes from the BH package rather than yours, you might
want to talk to Dirk for advice about it.

The second issue you mention in your comment looks more serious:
"Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found
'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf',
possibly from 'printf' (C)".

Your response that you don't call 'abort', 'exit' or 'printf' isn't
sufficient here: those functions appear to have been linked in to your
DLL, so somebody is calling them. I'd try to track down those calls and
see if there's a way to compile without them.

Duncan Murdoch

>
> win-builder results are here: https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>
> cran-comments.md here: https://github.com/akoyabio/rtree/blob/master/cran-comments.md<https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
>
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

	[[alternative HTML version deleted]]


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Mon Jul 26 21:40:26 2021
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Mon, 26 Jul 2021 19:40:26 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>,
 <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
Message-ID: <SY4PR01MB56586EE197213E04F3AB48FDACE89@SY4PR01MB5658.ausprd01.prod.outlook.com>

FWIW my package 'secr' has for some time had the same 'abort', 'exit' or 'printf' issue when checked locally on Windows. It is happily accepted by CRAN, and I have learned to ignore the local message. The only common element I can see between secr 4.4.5 and rtree 0.2.0 is that both import and link to Rcpp.
Murray

________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: 27 July 2021 07:12
To: Kent Johnson; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] CRAN submission with warnings

On 26/07/2021 11:02 a.m., Kent Johnson wrote:
> Hi,
>
> What is the usual process to submit a new package to CRAN which has false-positive warnings?
>
> I submitted rtree_0.2.0 last week (7/21). This package compiles with warnings from Boost headers. The warnings are expected, unavoidable, and unimportant, which I documented in cran-comments.md. After submitting the package, I got an email that the package failed the pre-test due to the warnings. I replied-all, pointing to the explanation in cran-comments.md. I haven't heard anything since, and the package is still in the archive folder at https://apc01.safelinks.protection.outlook.com/?url=ftp%3A%2F%2Fcran.r-project.org%2Fincoming&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C06d4282ca217499e9a0508d950696dea%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637629236685044870%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=1FHh3TJIOfDVlt2AwP14VakVEnwmNhHNlNyMnbKZeFg%3D&amp;reserved=0.
>
> I'm new to this process. Is there something else I should do, or should I just sit tight and wait for a response?

Generally I'd sit for a week or so, then send a gentle reminder.  It's
summer, and people are on holiday, so you might make that 10 days.

Regarding the issues:

Since one of them comes from the BH package rather than yours, you might
want to talk to Dirk for advice about it.

The second issue you mention in your comment looks more serious:
"Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found
'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf',
possibly from 'printf' (C)".

Your response that you don't call  'abort', 'exit' or 'printf' isn't
sufficient here:  those functions appear to have been linked in to your
DLL, so somebody is calling them.  I'd try to track down those calls and
see if there's a way to compile without them.

Duncan Murdoch

>
> win-builder results are here: https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2Frtree_0.2.0_20210721_153225%2FWindows%2F00check.log&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C06d4282ca217499e9a0508d950696dea%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637629236685044870%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=So21y%2B0jedC7Sg77850LUBiVHqMzC2Dai9761M6MRwc%3D&amp;reserved=0
> cran-comments.md here: https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fakoyabio%2Frtree%2Fblob%2Fmaster%2Fcran-comments.md&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C06d4282ca217499e9a0508d950696dea%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637629236685044870%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=JsNXbq4%2FNfAVQUJ1HrcbUyz%2FJBiOaMASZn9Q9c2jBnc%3D&amp;reserved=0
>
> Thank you for any guidance,
> Kent Johnson
> Akoya Biosciences
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C06d4282ca217499e9a0508d950696dea%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637629236685044870%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=T01GZ6Vjj10rNu3mJoXO7SewUHijwqPCM934scz8FRs%3D&amp;reserved=0
>

______________________________________________
R-package-devel at r-project.org mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Cmurray.efford%40otago.ac.nz%7C06d4282ca217499e9a0508d950696dea%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637629236685044870%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=T01GZ6Vjj10rNu3mJoXO7SewUHijwqPCM934scz8FRs%3D&amp;reserved=0


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul 26 22:15:27 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 26 Jul 2021 16:15:27 -0400
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <MN2PR18MB36690AA2F384CA79CFB7F9A1B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
 <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
 <MN2PR18MB36690AA2F384CA79CFB7F9A1B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
Message-ID: <33cd043c-f528-ef92-317b-bb3820b04faf@gmail.com>

On 26/07/2021 3:34 p.m., Kent Johnson wrote:
> Thanks, Duncan,
> 
> I did consult with Dirk about the warnings. The #pragma in Boost headers 
> which disables those warnings is not allowed in a CRAN submission, so he 
> removed the #pragma, enabling the warnings >
> I see that Boost does call std::abort in its error handling. I don't 
> think I can do anything about that...


If you look at the BH page on CRAN, there are a ton of "reverse linking 
to" packages, i.e. packages that are doing something like what you do. 
It would be worth looking at a few of those that don't generate those 
warnings (e.g. abcADM, ACEt, etc.) to see if they're using the same 
parts of Boost as you're using, and have found a way to avoid the warnings.

Duncan Murdoch

> 
> Kent
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Monday, July 26, 2021 3:12 PM
> *To:* Kent Johnson <kjohnson at akoyabio.com>; 
> r-package-devel at r-project.org <r-package-devel at r-project.org>
> *Subject:* Re: [R-pkg-devel] CRAN submission with warnings
> Regarding the issues:
> 
> Since one of them comes from the BH package rather than yours, you might
> want to talk to Dirk for advice about it.
> 
> The second issue you mention in your comment looks more serious:
> "Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found
> 'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf',
> possibly from 'printf' (C)".
> 
> Your response that you don't call 'abort', 'exit' or 'printf' isn't
> sufficient here: those functions appear to have been linked in to your
> DLL, so somebody is calling them. I'd try to track down those calls and
> see if there's a way to compile without them.
> 
> Duncan Murdoch
> 
>  >
>  > win-builder results are here: 
> https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log 
> <https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>
>  > cran-comments.md here: 
> https://github.com/akoyabio/rtree/blob/master/cran-comments.md 
> <https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
>  >
>  > Thank you for any guidance,
>  > Kent Johnson
>  > Akoya Biosciences
>  >
>  > [[alternative HTML version deleted]]
>  >
>  > ______________________________________________
>  > R-package-devel at r-project.org mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-package-devel 
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>  >


From kjohn@on @end|ng |rom @koy@b|o@com  Mon Jul 26 22:43:00 2021
From: kjohn@on @end|ng |rom @koy@b|o@com (Kent Johnson)
Date: Mon, 26 Jul 2021 20:43:00 +0000
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <33cd043c-f528-ef92-317b-bb3820b04faf@gmail.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
 <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
 <MN2PR18MB36690AA2F384CA79CFB7F9A1B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>,
 <33cd043c-f528-ef92-317b-bb3820b04faf@gmail.com>
Message-ID: <MN2PR18MB3669F160669DD6EDBE92B374B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>

The {anytime} package by Dirk Eddelbuettel uses {BH} and generates the same NOTE when I CMD Check it locally on Windows. It seems safe to ignore this NOTE.

Kent

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>

If you look at the BH page on CRAN, there are a ton of "reverse linking
to" packages, i.e. packages that are doing something like what you do.
It would be worth looking at a few of those that don't generate those
warnings (e.g. abcADM, ACEt, etc.) to see if they're using the same
parts of Boost as you're using, and have found a way to avoid the warnings.

Duncan Murdoch

>
> Kent
>
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>

> The second issue you mention in your comment looks more serious:
> "Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found
> 'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf',
> possibly from 'printf' (C)".
>
> Your response that you don't call 'abort', 'exit' or 'printf' isn't
> sufficient here: those functions appear to have been linked in to your
> DLL, so somebody is calling them. I'd try to track down those calls and
> see if there's a way to compile without them.
>
> Duncan Murdoch
>
> >
> > win-builder results are here:
> https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>
> <https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>>
> > cran-comments.md here:
> https://github.com/akoyabio/rtree/blob/master/cran-comments.md<https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
> <https://github.com/akoyabio/rtree/blob/master/cran-comments.md<https://github.com/akoyabio/rtree/blob/master/cran-comments.md>>
> >
> > Thank you for any guidance,
> > Kent Johnson
> > Akoya Biosciences
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> >

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul 26 23:55:56 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 26 Jul 2021 17:55:56 -0400
Subject: [R-pkg-devel] CRAN submission with warnings
In-Reply-To: <MN2PR18MB3669F160669DD6EDBE92B374B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
References: <MN2PR18MB3669E2E82EB82CC2188D6B3CB6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
 <c9c31831-5390-ce01-c0dd-ba0eb8282cc0@gmail.com>
 <MN2PR18MB36690AA2F384CA79CFB7F9A1B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
 <33cd043c-f528-ef92-317b-bb3820b04faf@gmail.com>
 <MN2PR18MB3669F160669DD6EDBE92B374B6E89@MN2PR18MB3669.namprd18.prod.outlook.com>
Message-ID: <fec106bd-5516-d5b4-0276-e20235993442@gmail.com>

On 26/07/2021 4:43 p.m., Kent Johnson wrote:
> The {anytime} package by?Dirk Eddelbuettel uses {BH} and generates the 
> same NOTE when I CMD Check it locally on Windows. It seems safe to 
> ignore this NOTE.

But it generates no messages on CRAN:  OK all the way.

Duncan Murdoch

> 
> Kent
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> If you look at the BH page on CRAN, there are a ton of "reverse linking
> to" packages, i.e. packages that are doing something like what you do.
> It would be worth looking at a few of those that don't generate those
> warnings (e.g. abcADM, ACEt, etc.) to see if they're using the same
> parts of Boost as you're using, and have found a way to avoid the warnings.
> 
> Duncan Murdoch
> 
>  >
>  > Kent
>  >
>  > ------------------------------------------------------------------------
>  > *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> 
>  > The second issue you mention in your comment looks more serious:
>  > "Found 'abort', possibly from 'abort' (C), 'runtime' (Fortran) Found
>  > 'exit', possibly from 'exit' (C), 'stop' (Fortran) Found 'printf',
>  > possibly from 'printf' (C)".
>  >
>  > Your response that you don't call 'abort', 'exit' or 'printf' isn't
>  > sufficient here: those functions appear to have been linked in to your
>  > DLL, so somebody is calling them. I'd try to track down those calls and
>  > see if there's a way to compile without them.
>  >
>  > Duncan Murdoch
>  >
>  > >
>  > > win-builder results are here:
>  > 
> https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log 
> <https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log> 
> 
>  > 
> <https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log 
> <https://win-builder.r-project.org/incoming_pretest/rtree_0.2.0_20210721_153225/Windows/00check.log>>
>  > > cran-comments.md here:
>  > https://github.com/akoyabio/rtree/blob/master/cran-comments.md 
> <https://github.com/akoyabio/rtree/blob/master/cran-comments.md>
>  > <https://github.com/akoyabio/rtree/blob/master/cran-comments.md 
> <https://github.com/akoyabio/rtree/blob/master/cran-comments.md>>
>  > >
>  > > Thank you for any guidance,
>  > > Kent Johnson
>  > > Akoya Biosciences
>  > >
>  > > [[alternative HTML version deleted]]
>  > >
>  > > ______________________________________________
>  > > R-package-devel at r-project.org mailing list
>  > > https://stat.ethz.ch/mailman/listinfo/r-package-devel 
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>  > <https://stat.ethz.ch/mailman/listinfo/r-package-devel 
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>  > >


From |o@n@@bouro@ @end|ng |rom @pc@ox@@c@uk  Fri Jul 30 17:02:59 2021
From: |o@n@@bouro@ @end|ng |rom @pc@ox@@c@uk (Ioana Bouros)
Date: Fri, 30 Jul 2021 15:02:59 +0000
Subject: [R-pkg-devel] Question on proper methods documentation for R
 package with multiple S4 classes
Message-ID: <CWXP265MB047237D33CC51B66D3E33040EFEC9@CWXP265MB0472.GBRP265.PROD.OUTLOOK.COM>

Hello,


We are trying to build an R package with more than two S4 classes that have common methods. However, when checking the methods part of the documentation for the second class, we see only the definition of the generic of the first class.


For illustration, we can call these two classes `Myclass` and `Mynewclass` which have similarly named methods `parameters` and `parameters<-`


```

#' Example docstring of Myclass

#'

#' @slot parameters_names names of the parameters which are used by the

#'     model.

#' @slot parameters parameters which are used by the

#'     model.

#'

#' @import tidyverse

#' @import reshape2

#' @importFrom methods new

#' @export Myclass

#'

Myclass <- setClass('Myclass',

                    # slots

                    slots = c(

                      parameters_names = 'list',

                      parameters = 'list'

                    ),



                    # prototypes for the slots, automatically set output and param

                    # names

                    prototype = list(

                      parameters_names = list('a', 'b'),

                      parameters = vector(mode = "list", length = 2)

                    )

)


# Setter and getter methods for parameters


#' Retrieves parameters Myclass.

#'

#' @param object An object of the class Myclass.

#'

#' @return parameter values of Myclass.

#' @export

setGeneric('parameters',

           function(object) standardGeneric('parameters'))


#' @describeIn Myclass Retrieves parameters Myclass.

#'

#' @param object An object of the class Myclass.

#'

#' @return parameter values of Myclass.

#' @aliases parameters,ANY,ANY-method

#' @export

setMethod('parameters', 'Myclass',

          function(object) object at parameters)


#' Sets parameters of Myclass,

#'

#' @param object An object of the class Myclass

#' @param value a named list of (a, b).

#'

#' @return Updated version of Myclass.

#' @export

setGeneric(

  'parameters<-',

  function(object, value){

    standardGeneric('parameters<-')

  })


#' @describeIn Myclass Sets parameters of Myclass.

#'

#' @param object An object of the class Myclass.

#' @param value a named list of (a, b).

#'

#' @return Updated version of Myclass.

#' @aliases parameters<-,ANY,ANY-method

#' @export

setMethod(

  'parameters<-', 'Myclass',

  function(object, value) {

    a = value$a

    b = value$b

    ic <- list(a, b)

    # if all above tests are passed, assign the ic namelist to the object

    object at parameters <- ic



    return(object)

  })

```

 and


```

#' Example docstring of Mynewclass

#'

#' @slot parameters_names names of the parameters which are used by the

#'     model.

#' @slot parameters parameters which are used by the

#'     model.

#'

#' @import tidyverse

#' @import reshape2

#' @importFrom methods new

#' @export Mynewclass

#'

Mynewclass <- setClass('Mynewclass',

                    # slots

                    slots = c(

                      parameters_names = 'list',

                      parameters = 'list'

                    ),



                    # prototypes for the slots, automatically set output and param

                    # names

                    prototype = list(

                      parameters_names = list('a', 'b', 'c'),

                      parameters = vector(mode = "list", length = 3)

                    )

)


# Setter and getter methods for parameters


#' @describeIn Mynewclass Retrieves parameters Mynewclass.

#'

#' @param object An object of the class Mynewclass.

#'

#' @return parameter values of Mynewclass.

#' @aliases parameters,ANY,ANY-method

#' @export

setMethod('parameters', 'Mynewclass',

          function(object) object at parameters)


#' @describeIn Mynewclass Sets parameters of Mynewclass.

#'

#' @param object An object of the class Mynewclass.

#' @param value a named list of (a, b, c).

#'

#' @return Updated version of Mynewclass.

#' @aliases parameters<-,ANY,ANY-method

#' @export

setMethod(

  'parameters<-', 'Mynewclass',

  function(object, value) {

    a = value$a

    b = value$b

    c = value$c

    ic <- list(a, b, c)

    # if all above tests are passed, assign the ic namelist to the object

    object at parameters <- ic



    return(object)

  })

```


It might be worth mentioning that keeping the generics for both classes led to problems in the `devtools::document()` command, as seen in the following StackOverflow question [https://stackoverflow.com/questions/68113799/how-can-you-create-multiple-s4-classes-with-similarly-named-methods-in-r]


How could we solve this issue without having to give different names for the methods?


Many thanks,

Ioana


PS. The link to the relevant branch of the Github repository is below:

[https://github.com/Como-DTC-Collaboration/como-models/tree/i4-age-structure]


	[[alternative HTML version deleted]]


From @bronder @end|ng |rom @tevebronder@com  Fri Jul 30 19:31:59 2021
From: @bronder @end|ng |rom @tevebronder@com (Steve Bronder)
Date: Fri, 30 Jul 2021 13:31:59 -0400
Subject: [R-pkg-devel] C++17
In-Reply-To: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
References: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
Message-ID: <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>

Hi Tim, if you look in the history of the mailing list there's been a few
questions surrounding c++17. But most of what I've seen is to have flags to
turn on and off the c++17 parts of your code. I get it, and not impossible
to do cleanly with boost macros, but kind of a bummer.  It would be nice to
have a larger discussion around CRAN c++17 based packages as now that the
windows gcc version is bumped up to 8 working in 17 seems much more
feasible. While most of 17 is "slice of life" features it's much nicer to
write imo.

Is Solaris the only system that does not yet support 17?

On Mon, Jul 26, 2021, 11:52 AM Tim Keitt <tkeitt at gmail.com> wrote:

> Hi Folks,
>
> It appears that c++17 is not supported on all platforms used by CRAN. Is
> there a workaround?
>
> I have CXX_STD = CXX17 in the package Makevars file, but see
> https://cran.r-project.org/web/checks/check_results_kdtools.html
>
> I assume if CXX17 is not defined, it is not available on that build owing
> to the compiler. I'm curious to know if anyone else has solved that
> problem.
>
> Thanks.
>
> THK
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jul 30 20:06:02 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 30 Jul 2021 13:06:02 -0500
Subject: [R-pkg-devel] C++17
In-Reply-To: <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>
References: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
 <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>
Message-ID: <24836.16266.192765.812991@rob.eddelbuettel.com>


Section 2.7.3 'C++ Support' of the R Admin manual says, "C++ is not used by R
itself, but support is provided ...".  This is all stored from when R itself
is configure (prior to compiling) and override-able in package configuration
(Section 2.7.3 covers that) but as that in other places _it all depends on
what the user has installed in terms of C++ compilers_.

So packages need to test. R 4.1.0 ensure that _if_ C++ is present it is at
least C++11, R 4.2.0 (aka r-devel now) is currently set to roll this to
C++14.  Which is ... actually rather nice and way better than what had only a
few short years ago. But local system may still need to look after their
local compilers.  I still get bug reports from folks "blessed" with a
particularl Linux distro that seems to persist long enough so that people
aren't even yet at g++ 4.8 or 4.9 (though that environment has workarounds
too). Similarly even when R 4.2.0 comes our there will still be people trying
to build our packages on R 3.6.* or R 3.5.*. Such is life.

So in short, for my money, _assuming_ C++17 is present is still a wee bit far
out. Test for it, enjoy it when it is present and deal with it if not.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tke|tt @end|ng |rom gm@||@com  Sat Jul 31 04:15:35 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 30 Jul 2021 22:15:35 -0400
Subject: [R-pkg-devel] C++17
In-Reply-To: <24836.16266.192765.812991@rob.eddelbuettel.com>
References: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
 <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>
 <24836.16266.192765.812991@rob.eddelbuettel.com>
Message-ID: <CANnL8gpYua3Y7=TNkuoAXpJhrTGZ9-HkaYhYP-xyYuW9B2SNKA@mail.gmail.com>

Kind of figured that out looking around on github. I added a config
(borrowed from one of your repos) to test for CXX17. I'm not sure its quite
working for me yet but I will figure it out. A couple of questions:

1) I had C++17 in the system requirements in the description file but might
remove it as I hope to make it check without CXX17. Does that have any
impact on installation or is it only informative/notification?
2) If we need to adjust a package currently on CRAN owing to platform
errors, should we keep the version the same or submit with a version bump?

Thanks.

THK

On Fri, Jul 30, 2021 at 2:06 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Section 2.7.3 'C++ Support' of the R Admin manual says, "C++ is not used
> by R
> itself, but support is provided ...".  This is all stored from when R
> itself
> is configure (prior to compiling) and override-able in package
> configuration
> (Section 2.7.3 covers that) but as that in other places _it all depends on
> what the user has installed in terms of C++ compilers_.
>
> So packages need to test. R 4.1.0 ensure that _if_ C++ is present it is at
> least C++11, R 4.2.0 (aka r-devel now) is currently set to roll this to
> C++14.  Which is ... actually rather nice and way better than what had
> only a
> few short years ago. But local system may still need to look after their
> local compilers.  I still get bug reports from folks "blessed" with a
> particularl Linux distro that seems to persist long enough so that people
> aren't even yet at g++ 4.8 or 4.9 (though that environment has workarounds
> too). Similarly even when R 4.2.0 comes our there will still be people
> trying
> to build our packages on R 3.6.* or R 3.5.*. Such is life.
>
> So in short, for my money, _assuming_ C++17 is present is still a wee bit
> far
> out. Test for it, enjoy it when it is present and deal with it if not.
>
> Dirk
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From mthrun @end|ng |rom m@them@t|k@un|-m@rburg@de  Sat Jul 31 10:31:54 2021
From: mthrun @end|ng |rom m@them@t|k@un|-m@rburg@de (Dr. rer. nat. Michael Thrun)
Date: Sat, 31 Jul 2021 10:31:54 +0200
Subject: [R-pkg-devel] Invalid URLs in Description Due to Redirection
Message-ID: <ED873E31-F076-4C84-B7D7-EF0AE93608A5@mathematik.uni-marburg.de>

Dear R developers,
I have several packages on CRAN and usually I can resolve all issues without bothering others in the mailing list. However, in this case I am stuck with the following note for 
my package https://CRAN.R-project.org/package=FCPS which enables access to over 60 clustering algorithms with consistent input and output:

?
Found the following 
(possibly) invalid URLs:
 URL: 
https://www.deepbionics.org/ (moved to 
https://mthrun.github.io/index)
   From: 
DESCRIPTION
   Status: 200
   Message: 
OK

Please change http --> https, add trailing 
slashes, or follow moved content as 
appropriate.
?

The URL  https://www.deepbionics.org/  redirects currently to gihub.io. My problem with the proposed solution in the note is, that I will probably move the website again somewhere else in the future.
Adding slashes did not resolve the note. For the current update, I just deleted the URL, but someday I would like to update my other packages or this one again. Hence, I have to solve this issue permanently.
Thus, I would like to be able to link the packages to a stable URL and not update packages every time, I move the website.
Does someone know, how to resolve this issue?
Should I use another redirection option in the settings of my hosting provider?
Should I implement an entry website using my hosting provider for deepbioonics.org which redirects the user after 5 seconds to the current website?

Best Regards
Michael


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Jul 31 11:55:17 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 31 Jul 2021 11:55:17 +0200
Subject: [R-pkg-devel] Invalid URLs in Description Due to Redirection
In-Reply-To: <ED873E31-F076-4C84-B7D7-EF0AE93608A5@mathematik.uni-marburg.de>
References: <ED873E31-F076-4C84-B7D7-EF0AE93608A5@mathematik.uni-marburg.de>
Message-ID: <3b9ecfb4-3e9c-c070-64e7-2b822007a2af@statistik.tu-dortmund.de>



On 31.07.2021 10:31, Dr. rer. nat. Michael Thrun wrote:
> Dear R developers,
> I have several packages on CRAN and usually I can resolve all issues without bothering others in the mailing list. However, in this case I am stuck with the following note for
> my package https://CRAN.R-project.org/package=FCPS which enables access to over 60 clustering algorithms with consistent input and output:
> 
> ?
> Found the following
> (possibly) invalid URLs:
>   URL:
> https://www.deepbionics.org/ (moved to
> https://mthrun.github.io/index)
>     From:
> DESCRIPTION
>     Status: 200
>     Message:
> OK
> 
> Please change http --> https, add trailing
> slashes, or follow moved content as
> appropriate.
> ?
> 
> The URL  https://www.deepbionics.org/  redirects currently to gihub.io. My problem with the proposed solution in the note is, that I will probably move the website again somewhere else in the future.
> Adding slashes did not resolve the note. For the current update, I just deleted the URL, but someday I would like to update my other packages or this one again. Hence, I have to solve this issue permanently.
> Thus, I would like to be able to link the packages to a stable URL and not update packages every time, I move the website.
> Does someone know, how to resolve this issue?

Well, the webpage reports Status 301 for permamently moved content. It 
should just be a redirection. Then you can keep it as is.

Best,
Uwe Ligges




> Should I use another redirection option in the settings of my hosting provider?
> Should I implement an entry website using my hosting provider for deepbioonics.org which redirects the user after 5 seconds to the current website?
> 
> Best Regards
> Michael
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Jul 31 11:59:10 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 31 Jul 2021 11:59:10 +0200
Subject: [R-pkg-devel] C++17
In-Reply-To: <CANnL8gpYua3Y7=TNkuoAXpJhrTGZ9-HkaYhYP-xyYuW9B2SNKA@mail.gmail.com>
References: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
 <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>
 <24836.16266.192765.812991@rob.eddelbuettel.com>
 <CANnL8gpYua3Y7=TNkuoAXpJhrTGZ9-HkaYhYP-xyYuW9B2SNKA@mail.gmail.com>
Message-ID: <09cac6a5-5454-a192-5ba3-0a1a774aecdf@statistik.tu-dortmund.de>



On 31.07.2021 04:15, Tim Keitt wrote:
> Kind of figured that out looking around on github. I added a config
> (borrowed from one of your repos) to test for CXX17. I'm not sure its quite
> working for me yet but I will figure it out. A couple of questions:
> 
> 1) I had C++17 in the system requirements in the description file but might
> remove it as I hope to make it check without CXX17. Does that have any
> impact on installation or is it only informative/notification?


Well, there is no platform indepednet code for dealing with that field, 
but some parts may be scripted on parts of CRAN.



> 2) If we need to adjust a package currently on CRAN owing to platform
> errors, should we keep the version the same or submit with a version bump?

Any changes in new submissions need a new version number.

Best,
Uwe Ligges




> Thanks.
> 
> THK
> 
> On Fri, Jul 30, 2021 at 2:06 PM Dirk Eddelbuettel <edd at debian.org> wrote:
> 
>>
>> Section 2.7.3 'C++ Support' of the R Admin manual says, "C++ is not used
>> by R
>> itself, but support is provided ...".  This is all stored from when R
>> itself
>> is configure (prior to compiling) and override-able in package
>> configuration
>> (Section 2.7.3 covers that) but as that in other places _it all depends on
>> what the user has installed in terms of C++ compilers_.
>>
>> So packages need to test. R 4.1.0 ensure that _if_ C++ is present it is at
>> least C++11, R 4.2.0 (aka r-devel now) is currently set to roll this to
>> C++14.  Which is ... actually rather nice and way better than what had
>> only a
>> few short years ago. But local system may still need to look after their
>> local compilers.  I still get bug reports from folks "blessed" with a
>> particularl Linux distro that seems to persist long enough so that people
>> aren't even yet at g++ 4.8 or 4.9 (though that environment has workarounds
>> too). Similarly even when R 4.2.0 comes our there will still be people
>> trying
>> to build our packages on R 3.6.* or R 3.5.*. Such is life.
>>
>> So in short, for my money, _assuming_ C++17 is present is still a wee bit
>> far
>> out. Test for it, enjoy it when it is present and deal with it if not.
>>
>> Dirk
>>
>> --
>> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From mthrun @end|ng |rom m@them@t|k@un|-m@rburg@de  Sat Jul 31 12:18:57 2021
From: mthrun @end|ng |rom m@them@t|k@un|-m@rburg@de (Dr. rer. nat. Michael Thrun)
Date: Sat, 31 Jul 2021 12:18:57 +0200
Subject: [R-pkg-devel] Invalid URLs in Description Due to Redirection
In-Reply-To: <3b9ecfb4-3e9c-c070-64e7-2b822007a2af@statistik.tu-dortmund.de>
References: <ED873E31-F076-4C84-B7D7-EF0AE93608A5@mathematik.uni-marburg.de>
 <3b9ecfb4-3e9c-c070-64e7-2b822007a2af@statistik.tu-dortmund.de>
Message-ID: <86B61EF2-3408-485F-A6E7-8CF61327096B@mathematik.uni-marburg.de>

Clicking on the link (https://www.deepbionics.org/) it redirects correctly on my PC.  
If I understand Uwe correctly,
this is an issue with the setting of my hosting provider meaning to change the setting 301 to something else. 
Can someone be so kind to point out to me the right option for a correct redirection from the point of view of CRAN?
I have the choices
301, 302, Proxy, Frameset and URL anchor
and would tend to select frameset, but then only http instead of https is possible.

> On 31. Jul 2021, at 11:55, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 31.07.2021 10:31, Dr. rer. nat. Michael Thrun wrote:
>> Dear R developers,
>> I have several packages on CRAN and usually I can resolve all issues without bothering others in the mailing list. However, in this case I am stuck with the following note for
>> my package https://CRAN.R-project.org/package=FCPS which enables access to over 60 clustering algorithms with consistent input and output:
>> ?
>> Found the following
>> (possibly) invalid URLs:
>>  URL:
>> https://www.deepbionics.org/ (moved to
>> https://mthrun.github.io/index)
>>    From:
>> DESCRIPTION
>>    Status: 200
>>    Message:
>> OK
>> Please change http --> https, add trailing
>> slashes, or follow moved content as
>> appropriate.
>> ?
>> The URL  https://www.deepbionics.org/  redirects currently to gihub.io. My problem with the proposed solution in the note is, that I will probably move the website again somewhere else in the future.
>> Adding slashes did not resolve the note. For the current update, I just deleted the URL, but someday I would like to update my other packages or this one again. Hence, I have to solve this issue permanently.
>> Thus, I would like to be able to link the packages to a stable URL and not update packages every time, I move the website.
>> Does someone know, how to resolve this issue?
> 
> Well, the webpage reports Status 301 for permamently moved content. It should just be a redirection. Then you can keep it as is.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
>> Should I use another redirection option in the settings of my hosting provider?
>> Should I implement an entry website using my hosting provider for deepbioonics.org <http://deepbioonics.org/> which redirects the user after 5 seconds to the current website?
>> Best Regards
>> Michael
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Jul 31 13:14:55 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 31 Jul 2021 13:14:55 +0200
Subject: [R-pkg-devel] Invalid URLs in Description Due to Redirection
In-Reply-To: <86B61EF2-3408-485F-A6E7-8CF61327096B@mathematik.uni-marburg.de>
References: <ED873E31-F076-4C84-B7D7-EF0AE93608A5@mathematik.uni-marburg.de>
 <3b9ecfb4-3e9c-c070-64e7-2b822007a2af@statistik.tu-dortmund.de>
 <86B61EF2-3408-485F-A6E7-8CF61327096B@mathematik.uni-marburg.de>
Message-ID: <a5e07df4-2413-b6d4-053f-e665eb748f8e@statistik.tu-dortmund.de>



On 31.07.2021 12:18, Dr. rer. nat. Michael Thrun wrote:
> Clicking on the link (https://www.deepbionics.org/ 
> <https://www.deepbionics.org/>) it redirects correctly on my PC.
> If I understand Uwe correctly,
> this is an issue with the setting of my hosting provider meaning to 
> change the setting 301 to something else.
> Can someone be so kind to point out to me the right option for a correct 
> redirection from the point of view of CRAN?
> I have the choices
> 301, 302, Proxy, Frameset and URL anchor
> and would tend to select frameset, but then only http instead of https 
> is possible.

302 is fine.


Best,
Uwe Ligges


> 
>> On 31. Jul 2021, at 11:55, Uwe Ligges <ligges at statistik.tu-dortmund.de 
>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>
>>
>>
>> On 31.07.2021 10:31, Dr. rer. nat. Michael Thrun wrote:
>>> Dear R developers,
>>> I have several packages on CRAN and usually I can resolve all issues 
>>> without bothering others in the mailing list. However, in this case I 
>>> am stuck with the following note for
>>> my package https://CRAN.R-project.org/package=FCPS 
>>> <https://CRAN.R-project.org/package=FCPS> which enables access to 
>>> over 60 clustering algorithms with consistent input and output:
>>> ?
>>> Found the following
>>> (possibly) invalid URLs:
>>> ?URL:
>>> https://www.deepbionics.org/ <https://www.deepbionics.org/> (moved to
>>> https://mthrun.github.io/index <https://mthrun.github.io/index>)
>>> ???From:
>>> DESCRIPTION
>>> ???Status: 200
>>> ???Message:
>>> OK
>>> Please change http --> https, add trailing
>>> slashes, or follow moved content as
>>> appropriate.
>>> ?
>>> The URL https://www.deepbionics.org/ <https://www.deepbionics.org/> 
>>> ?redirects currently to gihub.io <http://gihub.io>. My problem with 
>>> the proposed solution in the note is, that I will probably move the 
>>> website again somewhere else in the future.
>>> Adding slashes did not resolve the note. For the current update, I 
>>> just deleted the URL, but someday I would like to update my other 
>>> packages or this one again. Hence, I have to solve this issue 
>>> permanently.
>>> Thus, I would like to be able to link the packages to a stable URL 
>>> and not update packages every time, I move the website.
>>> Does someone know, how to resolve this issue?
>>
>> Well, the webpage reports Status 301 for permamently moved content. It 
>> should just be a redirection. Then you can keep it as is.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>>> Should I use another redirection option in the settings of my hosting 
>>> provider?
>>> Should I implement an entry website using my hosting provider 
>>> fordeepbioonics.org <http://deepbioonics.org/>which redirects the 
>>> user after 5 seconds to the current website?
>>> Best Regards
>>> Michael
>>> ______________________________________________
>>> R-package-devel at r-project.org 
>>> <mailto:R-package-devel at r-project.org>mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel 
>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From @bronder @end|ng |rom @tevebronder@com  Sat Jul 31 18:03:26 2021
From: @bronder @end|ng |rom @tevebronder@com (Steve Bronder)
Date: Sat, 31 Jul 2021 12:03:26 -0400
Subject: [R-pkg-devel] C++17
In-Reply-To: <09cac6a5-5454-a192-5ba3-0a1a774aecdf@statistik.tu-dortmund.de>
References: <CANnL8gqO58CR3QPBEUiHeDVy41Zgf5Cvi_Y1qHzWQZnAWRUxPw@mail.gmail.com>
 <CAAVP=an=EZVjQazNWnng8s8iKTO+FnYetXZNT93qGDHmGQjE3w@mail.gmail.com>
 <24836.16266.192765.812991@rob.eddelbuettel.com>
 <CANnL8gpYua3Y7=TNkuoAXpJhrTGZ9-HkaYhYP-xyYuW9B2SNKA@mail.gmail.com>
 <09cac6a5-5454-a192-5ba3-0a1a774aecdf@statistik.tu-dortmund.de>
Message-ID: <CAAVP=ak-7V6QkLpdgvMmmnx-trOwg_D-7ZSRNHGkNO-EuquRdg@mail.gmail.com>

Thanks Dirk and Uwe! Mostly thinking out loud, I wonder how open cran would
be to something where if C++17 is not available from the compiler a package
could

1. Have checks in the R code before the call to throw before the function
is called
2. Using macros so that if c++17 is not available you create a C++ function
that just returns something arbitrary but valid so everything compiles.

That feels a bit funky after writing it out but as long as things fail
properly idt it's an invalid pattern

There's also the alternative route like Eigen and Boost to query the
compiler for certain 14/17 features and make macros for those features. See
the example below for defining EIGEN_CONSTEXPR

https://gitlab.com/libeigen/eigen/-/blob/master/Eigen/src/Core/util/Macros.h#L766

This gives some niceties, but things like `if constexpr ()` and class
constructors with deduced templates go out the window.

We've thought about moving up to C++17 for the Stan math library, but we've
been kind of confused on what would make CRAN happy while requiring 17.
Dirk, I think you're right that "enjoy it when you can" is the best option
atm.

Regards,

Steve Bronder
Website: stevebronder.com
Phone: 412-719-1282
Email: sbronder at stevebronder.com



On Sat, Jul 31, 2021 at 6:05 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 31.07.2021 04:15, Tim Keitt wrote:
> > Kind of figured that out looking around on github. I added a config
> > (borrowed from one of your repos) to test for CXX17. I'm not sure its
> quite
> > working for me yet but I will figure it out. A couple of questions:
> >
> > 1) I had C++17 in the system requirements in the description file but
> might
> > remove it as I hope to make it check without CXX17. Does that have any
> > impact on installation or is it only informative/notification?
>
>
> Well, there is no platform indepednet code for dealing with that field,
> but some parts may be scripted on parts of CRAN.
>
>
>
> > 2) If we need to adjust a package currently on CRAN owing to platform
> > errors, should we keep the version the same or submit with a version
> bump?
>
> Any changes in new submissions need a new version number.
>
> Best,
> Uwe Ligges
>
>
>
>
> > Thanks.
> >
> > THK
> >
> > On Fri, Jul 30, 2021 at 2:06 PM Dirk Eddelbuettel <edd at debian.org>
> wrote:
> >
> >>
> >> Section 2.7.3 'C++ Support' of the R Admin manual says, "C++ is not used
> >> by R
> >> itself, but support is provided ...".  This is all stored from when R
> >> itself
> >> is configure (prior to compiling) and override-able in package
> >> configuration
> >> (Section 2.7.3 covers that) but as that in other places _it all depends
> on
> >> what the user has installed in terms of C++ compilers_.
> >>
> >> So packages need to test. R 4.1.0 ensure that _if_ C++ is present it is
> at
> >> least C++11, R 4.2.0 (aka r-devel now) is currently set to roll this to
> >> C++14.  Which is ... actually rather nice and way better than what had
> >> only a
> >> few short years ago. But local system may still need to look after their
> >> local compilers.  I still get bug reports from folks "blessed" with a
> >> particularl Linux distro that seems to persist long enough so that
> people
> >> aren't even yet at g++ 4.8 or 4.9 (though that environment has
> workarounds
> >> too). Similarly even when R 4.2.0 comes our there will still be people
> >> trying
> >> to build our packages on R 3.6.* or R 3.5.*. Such is life.
> >>
> >> So in short, for my money, _assuming_ C++17 is present is still a wee
> bit
> >> far
> >> out. Test for it, enjoy it when it is present and deal with it if not.
> >>
> >> Dirk
> >>
> >> --
> >> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Aug  2 19:11:14 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 2 Aug 2021 17:11:14 +0000
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
Message-ID: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

An update to my package rbibutils triggered 'Additional issues' on CRAN from valgrind, CRAN Package Check Results for Package rbibutils (r-project.org)<https://cran.r-project.org/web/checks/check_results_rbibutils.html>.

However, running the checks with -use-valgrind  on my machine gives zero errors.
I am on Ubuntu (the latest stable version), my R-devel installation was updated earlier today and I rebuild it adding the
--with-valgrind-instrumentation=2 to the call to configure.
Valgrind coming with Ubuntu is 3.5.0, so I installed its latest version from  github (also no errors).

rbibutils has no dependencies, except that testthat is used for testing.

What am I missing? Do I need to have a separate library for the instrumented R-devel version?

As a side note, is there a way to find out if R has been built with valgrind? It seems that 'capabilities()' and 'R CMD config' do not offer this information.

Thanks,
Georgi Boshnakov

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Aug  2 20:00:30 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 2 Aug 2021 20:00:30 +0200
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
In-Reply-To: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <20210802200030.1e855964@trisector>

On Mon, 2 Aug 2021 17:11:14 +0000
Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk> wrote:

> What am I missing? Do I need to have a separate library for the
> instrumented R-devel version?

It doesn't look to me like you're missing anything, unless you start
seeing the errors when you start `R -d valgrind` and then run the tests
from your package.

Perhaps AddressSanitizer would be more successful at catching this
particular error? It should be possible run -fsanitize=... shared
libraries with "unsanitized" executables by LD_PRELOAD'ing libasan.
What happens if you run the following?

LD_PRELOAD=libasan.so.3 \
 PKG_CXXFLAGS=-fsanitize=address PKG_LIBS=-fsanitize=address \
 R CMD check rbibutils_VERSION.tar.gz

AddressSanitizer used to have an error where it couldn't start up if
something called malloc() before its constructors had a chance to run,
but it's been fixed in 2017.

-- 
Best regards,
Ivan


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Aug  2 20:48:21 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 2 Aug 2021 11:48:21 -0700
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
In-Reply-To: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAHqSRuT0_WaW0PY33kKC+i+cKRuc9Uu7JiP3hs=q_7oEHXMBZQ@mail.gmail.com>

I ran the tests of rbibutils-2.2.2, using the latest devel version of R
configured to use valgrind, with

R --debugger=valgrind --debugger-args=--track-origins=yes --quiet -e
'testthat::test_package("rbibutils")'

I saw a lot of 'conditional jump depends on uninitialized value' errors:

==27280== Conditional jump or move depends on uninitialised value(s)
==27280==    at 0x11C420B7: UnknownInlinedFun (xml.c:178)
==27280==    by 0x11C420B7: xml_parse (xml.c:241)
==27280==    by 0x11C514EF: medin_processf (medin.c:683)
==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
==27280==    by 0x2D7F22: do_begin (eval.c:2530)
==27280==  Uninitialised value was created by a heap allocation
==27280==    at 0x483DFAF: realloc (in
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280==    by 0x11C38DB2: str_realloc.part.0 (str.c:90)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:85)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:543)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:551)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:547)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:607)
==27280==    by 0x11C3B63D: str_segcpy (str.c:585)
==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)
==27280==    by 0x11C67A96: UnknownInlinedFun (bibcore.c:471)
==27280==    by 0x11C67A96: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)

realloc() does not initialize memory.  str.c contains a comment about
replacing malloc() with calloc() to avoid similar problems that valgrind
found.  It states that valgrind is mistaken, that that memory really is
initialized.  Hmm.

I also see the error about reading off the end of a malloc'ed array:

==27280== Invalid read of size 1
==27280==    at 0x11C420A8: UnknownInlinedFun (xml.c:174)
==27280==    by 0x11C420A8: xml_parse (xml.c:241)
==27280==    by 0x11C514EF: medin_processf (medin.c:683)
==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
==27280==    by 0x2D7F22: do_begin (eval.c:2530)
==27280==  Address 0x125028af is 0 bytes after a block of size 10,927
alloc'd
==27280==    at 0x483DD99: calloc (in
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280==    by 0x11C38DF2: str_initalloc (str.c:253)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:541)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:551)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:547)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:607)
==27280==    by 0x11C3B66A: str_segcpy (str.c:585)
==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)


On Mon, Aug 2, 2021 at 10:11 AM Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> An update to my package rbibutils triggered 'Additional issues' on CRAN
> from valgrind, CRAN Package Check Results for Package rbibutils (
> r-project.org)<
> https://cran.r-project.org/web/checks/check_results_rbibutils.html>.
>
> However, running the checks with -use-valgrind  on my machine gives zero
> errors.
> I am on Ubuntu (the latest stable version), my R-devel installation was
> updated earlier today and I rebuild it adding the
> --with-valgrind-instrumentation=2 to the call to configure.
> Valgrind coming with Ubuntu is 3.5.0, so I installed its latest version
> from  github (also no errors).
>
> rbibutils has no dependencies, except that testthat is used for testing.
>
> What am I missing? Do I need to have a separate library for the
> instrumented R-devel version?
>
> As a side note, is there a way to find out if R has been built with
> valgrind? It seems that 'capabilities()' and 'R CMD config' do not offer
> this information.
>
> Thanks,
> Georgi Boshnakov
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Mon Aug  2 21:20:39 2021
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 2 Aug 2021 15:20:39 -0400
Subject: [R-pkg-devel] I changed my vignette's file name to lowercase,
 then realized the url was case-sensitive
In-Reply-To: <CAEfsz7oeTPcOBWegHUz+GEu5mb-gR43c9W4rzXtWWqm9YAe74w@mail.gmail.com>
References: <CAEfsz7oeTPcOBWegHUz+GEu5mb-gR43c9W4rzXtWWqm9YAe74w@mail.gmail.com>
Message-ID: <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>

I changed my "Introduction.html" vignette's name to
"introduction.html", realizing only after the fact that CRAN's URLs
are case sensitive.

Would the solution of adding to my package's source a new
Introduction.html file pointing to introduction.html using a <meta
http-equiv="refresh" ...> be a viable one? Or is there maybe another,
better solution?

Thanks in advance

Dominic Comtois, summarytools author & maintainer


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Aug  2 21:50:31 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 2 Aug 2021 15:50:31 -0400
Subject: [R-pkg-devel] I changed my vignette's file name to lowercase,
 then realized the url was case-sensitive
In-Reply-To: <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>
References: <CAEfsz7oeTPcOBWegHUz+GEu5mb-gR43c9W4rzXtWWqm9YAe74w@mail.gmail.com>
 <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>
Message-ID: <be65c505-1f6a-a1e4-1591-f03430e6c409@gmail.com>

On 02/08/2021 3:20 p.m., Dominic Comtois wrote:
> I changed my "Introduction.html" vignette's name to
> "introduction.html", realizing only after the fact that CRAN's URLs
> are case sensitive.
> 
> Would the solution of adding to my package's source a new
> Introduction.html file pointing to introduction.html using a <meta
> http-equiv="refresh" ...> be a viable one? Or is there maybe another,
> better solution?

I'm afraid I don't understand the issue here.  Other packages have 
vignettes named "introduction.html", e.g.

https://cran.r-project.org/web/packages/rasterly/index.html

links to

https://cran.r-project.org/web/packages/rasterly/vignettes/introduction.html

and it doesn't seem to cause any problems.  Why would you need a 
separate link to Introduction.html?

Duncan Murdoch


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Mon Aug  2 21:51:05 2021
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Mon, 2 Aug 2021 15:51:05 -0400
Subject: [R-pkg-devel] I changed my vignette's file name to lowercase,
 then realized the url was case-sensitive
In-Reply-To: <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>
References: <CAEfsz7oeTPcOBWegHUz+GEu5mb-gR43c9W4rzXtWWqm9YAe74w@mail.gmail.com>
 <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>
Message-ID: <CAGmyFCHu3xN-A7MS=RY-5+TPThbthYYM5jgCC24qK3suo=aLwA@mail.gmail.com>

According to https://www.w3.org/TR/WD-html40-970708/htmlweb.html, "URLs in
general are case-sensitive", it's not only a CRAN thing.
Your vignette will be shipped with the package, hence if a user has a
case-insensitive file system (like macOS has by default), your workaround
would not work (see also Section 1.1 in "Writing R Extensions").

In my opinion the only solution is to fix the links, or go back to the old
case. There are plenty of tools around to replace all occurrences of
"Introduction.html" to "introduction.html" within your package. Of course
that doesn't work for all other links pointing to "Introduction.html" that
float around the web?

Best,
David

On Mon, Aug 2, 2021 at 3:21 PM Dominic Comtois <dominic.comtois at gmail.com>
wrote:

> I changed my "Introduction.html" vignette's name to
> "introduction.html", realizing only after the fact that CRAN's URLs
> are case sensitive.
>
> Would the solution of adding to my package's source a new
> Introduction.html file pointing to introduction.html using a <meta
> http-equiv="refresh" ...> be a viable one? Or is there maybe another,
> better solution?
>
> Thanks in advance
>
> Dominic Comtois, summarytools author & maintainer
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
David Kepplinger, PhD
https://www.dkepplinger.org

	[[alternative HTML version deleted]]


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Mon Aug  2 23:49:20 2021
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 2 Aug 2021 17:49:20 -0400
Subject: [R-pkg-devel] I changed my vignette's file name to lowercase,
 then realized the url was case-sensitive
In-Reply-To: <CAGmyFCHu3xN-A7MS=RY-5+TPThbthYYM5jgCC24qK3suo=aLwA@mail.gmail.com>
References: <CAEfsz7oeTPcOBWegHUz+GEu5mb-gR43c9W4rzXtWWqm9YAe74w@mail.gmail.com>
 <CAEfsz7p5f4U=7YNyvaub_gyj=XgTgM4ey_ADu0iOcQu8AuZuiQ@mail.gmail.com>
 <CAGmyFCHu3xN-A7MS=RY-5+TPThbthYYM5jgCC24qK3suo=aLwA@mail.gmail.com>
Message-ID: <CAEfsz7pWiJ4Uu7bw+j9w4exiotsZxE+tG0zroF1N437=+y_gdA@mail.gmail.com>

My question was in relation to the fact that my package has been
around for a while using this link:

https://cran.r-project.org/package=summarytools/vignettes/Introduction.html

which is now broken, since my last update (uploaded to CRAN a few days ago) uses

https://cran.r-project.org/package=summarytools/vignettes/introduction.html

So yes, I can revert to the previous Introduction.html, but I thought
a more flexible approach would be to add, when I submit my next
release, an "Introduction.html" redirecting to introduction.html.

I was wondering whether that would pose a problem, or whether there
might be a better way to redirect than using the meta tag / refresh
approach.



On Mon, 2 Aug 2021 at 15:51, David Kepplinger
<david.kepplinger at gmail.com> wrote:
>
> According to https://www.w3.org/TR/WD-html40-970708/htmlweb.html, "URLs in general are case-sensitive", it's not only a CRAN thing.
> Your vignette will be shipped with the package, hence if a user has a case-insensitive file system (like macOS has by default), your workaround would not work (see also Section 1.1 in "Writing R Extensions").
>
> In my opinion the only solution is to fix the links, or go back to the old case. There are plenty of tools around to replace all occurrences of "Introduction.html" to "introduction.html" within your package. Of course that doesn't work for all other links pointing to "Introduction.html" that float around the web?
>
> Best,
> David
>
> On Mon, Aug 2, 2021 at 3:21 PM Dominic Comtois <dominic.comtois at gmail.com> wrote:
>>
>> I changed my "Introduction.html" vignette's name to
>> "introduction.html", realizing only after the fact that CRAN's URLs
>> are case sensitive.
>>
>> Would the solution of adding to my package's source a new
>> Introduction.html file pointing to introduction.html using a <meta
>> http-equiv="refresh" ...> be a viable one? Or is there maybe another,
>> better solution?
>>
>> Thanks in advance
>>
>> Dominic Comtois, summarytools author & maintainer
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> David Kepplinger, PhD
> https://www.dkepplinger.org


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Aug  3 01:23:23 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 2 Aug 2021 23:23:23 +0000
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
In-Reply-To: <CAHqSRuT0_WaW0PY33kKC+i+cKRuc9Uu7JiP3hs=q_7oEHXMBZQ@mail.gmail.com>
References: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <CAHqSRuT0_WaW0PY33kKC+i+cKRuc9Uu7JiP3hs=q_7oEHXMBZQ@mail.gmail.com>
Message-ID: <LOYP265MB2015B14BA7BE3EF19139AAF2AEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

Thanks for looking into this. I probably didn?t make it clear that I am not questioning the errors on CRAN but my own configuration. I have pretty good idea where the error comes from, since the only change from the previous CRAN version was in medin.c (function medin_readf from line 94 and most probably line 144-145). I think also that all errors have medin.c on the trace.

It would be very helpful if somebody can spot from the description of my configuration in the original email where I have gone wrong in the setup of R with valgrind.

>realloc() does not initialize memory.  str.c contains a comment about replacing malloc() with calloc() to avoid?

            //    The data is not really left uninitialised and there may be a better way to let the compiler know.
            //
            s->data = (char *) calloc( size, sizeof( *(s->data) ) );
            if ( !s->data ) {
              error("Error.  Cannot allocate memory in str_initalloc, requested %lu characters.\n\n", size );
              // error("\n"); // error( EXIT_FAILURE );
            }
            s->data[0]='\0';
            s->dim=size;
            s->len=0;

My comment is indeed sloppy but the first byte is initialised to zero and the rest is used for writing only
(valgrind has no way to know, of course, and it is fair to question how a human can possibly be sure).


Thanks again,
Georgi Boshnakov


From: Bill Dunlap <williamwdunlap at gmail.com>
Sent: 02 August 2021 19:48
To: Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with valgrind

I ran the tests of rbibutils-2.2.2, using the latest devel version of R configured to use valgrind, with

R --debugger=valgrind --debugger-args=--track-origins=yes --quiet -e 'testthat::test_package("rbibutils")'

I saw a lot of 'conditional jump depends on uninitialized value' errors:

==27280== Conditional jump or move depends on uninitialised value(s)
==27280==    at 0x11C420B7: UnknownInlinedFun (xml.c:178)
==27280==    by 0x11C420B7: xml_parse (xml.c:241)
==27280==    by 0x11C514EF: medin_processf (medin.c:683)
==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
==27280==    by 0x2D7F22: do_begin (eval.c:2530)
==27280==  Uninitialised value was created by a heap allocation
==27280==    at 0x483DFAF: realloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280==    by 0x11C38DB2: str_realloc.part.0 (str.c:90)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:85)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:543)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:551)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:547)
==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:607)
==27280==    by 0x11C3B63D: str_segcpy (str.c:585)
==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)
==27280==    by 0x11C67A96: UnknownInlinedFun (bibcore.c:471)
==27280==    by 0x11C67A96: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)

realloc() does not initialize memory.  str.c contains a comment about replacing malloc() with calloc() to avoid similar problems that valgrind found.  It states that valgrind is mistaken, that that memory really is initialized.  Hmm.

I also see the error about reading off the end of a malloc'ed array:

==27280== Invalid read of size 1
==27280==    at 0x11C420A8: UnknownInlinedFun (xml.c:174)
==27280==    by 0x11C420A8: xml_parse (xml.c:241)
==27280==    by 0x11C514EF: medin_processf (medin.c:683)
==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
==27280==    by 0x2D7F22: do_begin (eval.c:2530)
==27280==  Address 0x125028af is 0 bytes after a block of size 10,927 alloc'd
==27280==    at 0x483DD99: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280==    by 0x11C38DF2: str_initalloc (str.c:253)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:541)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:551)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:547)
==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:607)
==27280==    by 0x11C3B66A: str_segcpy (str.c:585)
==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)


On Mon, Aug 2, 2021 at 10:11 AM Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk<mailto:georgi.boshnakov at manchester.ac.uk>> wrote:
An update to my package rbibutils triggered 'Additional issues' on CRAN from valgrind, CRAN Package Check Results for Package rbibutils (r-project.org<http://r-project.org>)<https://cran.r-project.org/web/checks/check_results_rbibutils.html>.

However, running the checks with -use-valgrind  on my machine gives zero errors.
I am on Ubuntu (the latest stable version), my R-devel installation was updated earlier today and I rebuild it adding the
--with-valgrind-instrumentation=2 to the call to configure.
Valgrind coming with Ubuntu is 3.5.0, so I installed its latest version from  github (also no errors).

rbibutils has no dependencies, except that testthat is used for testing.

What am I missing? Do I need to have a separate library for the instrumented R-devel version?

As a side note, is there a way to find out if R has been built with valgrind? It seems that 'capabilities()' and 'R CMD config' do not offer this information.

Thanks,
Georgi Boshnakov

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From yut@n|@|n| @end|ng |rom gm@||@com  Thu Aug  5 01:17:37 2021
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Thu, 5 Aug 2021 08:17:37 +0900
Subject: [R-pkg-devel] How can I avoid Solaris build on CRAN?
Message-ID: <CALyqOb826pg_imVX-r7tsjgOh4z+FJdCFUBAJFWSvGPC3U1Puw@mail.gmail.com>

Hi,

I recently submitted my package, which needs compilation of Rust code,
to CRAN. Now I'm seeing a CRAN check error on Solaris.

https://cran.r-project.org/web/checks/check_results_string2path.html

Since Solaris is not a platform supported by Rust [1], I need to avoid
building on Solaris. I assumed specifying

    SystemRequirements: Cargo (rustc package manager)

would effectively achieve this, considering this seems the only common
thing among other CRAN packages [2][3] with Rust compilation. But, it
turned out I was wrong.

Are there any ways to ask CRAN to exclude Solaris?

Best,
Hiroaki Yutani

[1]: https://doc.rust-lang.org/nightly/rustc/platform-support.html
[2]: https://cran.r-project.org/package=cargo
[3]: https://cran.r-project.org/package=baseflow


From yut@n|@|n| @end|ng |rom gm@||@com  Thu Aug  5 01:26:09 2021
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Thu, 5 Aug 2021 08:26:09 +0900
Subject: [R-pkg-devel] How can I avoid Solaris build on CRAN?
In-Reply-To: <CALyqOb826pg_imVX-r7tsjgOh4z+FJdCFUBAJFWSvGPC3U1Puw@mail.gmail.com>
References: <CALyqOb826pg_imVX-r7tsjgOh4z+FJdCFUBAJFWSvGPC3U1Puw@mail.gmail.com>
Message-ID: <CALyqOb_0L9s4qbQv3r=kwZ0sT4EHS64M9SowDV0jCvYiecguCQ@mail.gmail.com>

Sorry, I pointed a wrong package. I meant,

[2]: https://cran.r-project.org/package=gifski
[3]: https://cran.r-project.org/package=baseflow

Best,
Hiroaki Yutani

2021?8?5?(?) 8:17 Hiroaki Yutani <yutani.ini at gmail.com>:
>
> Hi,
>
> I recently submitted my package, which needs compilation of Rust code,
> to CRAN. Now I'm seeing a CRAN check error on Solaris.
>
> https://cran.r-project.org/web/checks/check_results_string2path.html
>
> Since Solaris is not a platform supported by Rust [1], I need to avoid
> building on Solaris. I assumed specifying
>
>     SystemRequirements: Cargo (rustc package manager)
>
> would effectively achieve this, considering this seems the only common
> thing among other CRAN packages [2][3] with Rust compilation. But, it
> turned out I was wrong.
>
> Are there any ways to ask CRAN to exclude Solaris?
>
> Best,
> Hiroaki Yutani
>
> [1]: https://doc.rust-lang.org/nightly/rustc/platform-support.html
> [2]: https://cran.r-project.org/package=cargo
> [3]: https://cran.r-project.org/package=baseflow


From |@go@g|n-v@z @end|ng |rom protonm@||@com  Thu Aug  5 10:09:48 2021
From: |@go@g|n-v@z @end|ng |rom protonm@||@com (=?utf-8?Q?Iago_Gin=C3=A9-V=C3=A1zquez?=)
Date: Thu, 05 Aug 2021 08:09:48 +0000
Subject: [R-pkg-devel] Tools beyond roxygen2 to write Rd documentation
Message-ID: <jeJcVgvRDOPY2mpw3OMHNyz87DA8eZARsPv_YyNqc6kKihOKJJT1OsIc29MA1IGi_h-3VG-9ttBX4gz-ki-wEkKyRicyRFV9nYdr3xssOyY=@protonmail.com>

Dear all,

Are there any tools to edit .Rd files by hand (so avoiding roxygen2), as an editor (like could be *RdStudio*, ? la RStudio or TeXstudio) or a plugin for ViM or another editor (like could be *vim-Rd*, ? la vim-latex)?

Thanks for your answers,

Stay safe,
Iago

Sent with [ProtonMail](https://protonmail.com/) Secure Email.
	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Aug  5 10:51:33 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 5 Aug 2021 10:51:33 +0200
Subject: [R-pkg-devel] Tools beyond roxygen2 to write Rd documentation
In-Reply-To: <jeJcVgvRDOPY2mpw3OMHNyz87DA8eZARsPv_YyNqc6kKihOKJJT1OsIc29MA1IGi_h-3VG-9ttBX4gz-ki-wEkKyRicyRFV9nYdr3xssOyY=@protonmail.com>
References: <jeJcVgvRDOPY2mpw3OMHNyz87DA8eZARsPv_YyNqc6kKihOKJJT1OsIc29MA1IGi_h-3VG-9ttBX4gz-ki-wEkKyRicyRFV9nYdr3xssOyY=@protonmail.com>
Message-ID: <24843.42645.124202.22599@stat.math.ethz.ch>

>>>>> Iago Gin?-V?zquez 
>>>>>     on Thu, 05 Aug 2021 08:09:48 +0000 writes:

    > Dear all, Are there any tools to edit .Rd files by hand
    > (so avoiding roxygen2), as an editor (like could be
    > *RdStudio*, ? la RStudio or TeXstudio) or a plugin for ViM
    > or another editor (like could be *vim-Rd*, ? la
    > vim-latex)?

    > Thanks for your answers,

    > Stay safe, Iago

Yes, of course:
"All good" R package authors edit *.Rd files by hand
((;-), well no, I know it's not true ..
 I personally use roxygen (in ESS, see below) only sometimes at the very
 beginning of writing a new function, or for functions that I
 do *not* export, because there's a nice key stroke to create
 the outline). ... and if I export that function use the
 Roxygen -> Rd *once* only, and from then on, I edit the *.Rd nicely
 including using descriptions lists, some math, etc... all well
 indented, nicely human-readable etc, much nicer than hidden in
 roxygen R comments)

Rstudio has supported *.Rd in the past but as I'm not using it
regularly .. I don't know if they dropped it now... that would
honestly surprise me, though.

Rather  ESS (Emacs Speaks Statistics) has always well supported
Rd editing, and I thought the  vim - plugin for R would also
support *.Rd  but probably not ??

Best,
Martin

--
Martin Maechler
ETH Zurich,  R Core Team  (*and* ESS Core team)


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Thu Aug  5 11:16:19 2021
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Thu, 5 Aug 2021 12:16:19 +0300
Subject: [R-pkg-devel] Tools beyond roxygen2 to write Rd documentation
In-Reply-To: <24843.42645.124202.22599@stat.math.ethz.ch>
References: <jeJcVgvRDOPY2mpw3OMHNyz87DA8eZARsPv_YyNqc6kKihOKJJT1OsIc29MA1IGi_h-3VG-9ttBX4gz-ki-wEkKyRicyRFV9nYdr3xssOyY=@protonmail.com>
 <24843.42645.124202.22599@stat.math.ethz.ch>
Message-ID: <CAL6gwnLxFNjztP9Ui1RPYFV93x9SRex4h44WrF3afYXAREgGAQ@mail.gmail.com>

I always write mine by hand. Used to do it in notepad++. Now I just do it
as a text file in the Rstudio IDE.

Avi

On Thu, Aug 5, 2021 at 11:52 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Iago Gin?-V?zquez
> >>>>>     on Thu, 05 Aug 2021 08:09:48 +0000 writes:
>
>     > Dear all, Are there any tools to edit .Rd files by hand
>     > (so avoiding roxygen2), as an editor (like could be
>     > *RdStudio*, ? la RStudio or TeXstudio) or a plugin for ViM
>     > or another editor (like could be *vim-Rd*, ? la
>     > vim-latex)?
>
>     > Thanks for your answers,
>
>     > Stay safe, Iago
>
> Yes, of course:
> "All good" R package authors edit *.Rd files by hand
> ((;-), well no, I know it's not true ..
>  I personally use roxygen (in ESS, see below) only sometimes at the very
>  beginning of writing a new function, or for functions that I
>  do *not* export, because there's a nice key stroke to create
>  the outline). ... and if I export that function use the
>  Roxygen -> Rd *once* only, and from then on, I edit the *.Rd nicely
>  including using descriptions lists, some math, etc... all well
>  indented, nicely human-readable etc, much nicer than hidden in
>  roxygen R comments)
>
> Rstudio has supported *.Rd in the past but as I'm not using it
> regularly .. I don't know if they dropped it now... that would
> honestly surprise me, though.
>
> Rather  ESS (Emacs Speaks Statistics) has always well supported
> Rd editing, and I thought the  vim - plugin for R would also
> support *.Rd  but probably not ??
>
> Best,
> Martin
>
> --
> Martin Maechler
> ETH Zurich,  R Core Team  (*and* ESS Core team)
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From ctr|bb|e09 @end|ng |rom gm@||@com  Fri Aug  6 22:34:31 2021
From: ctr|bb|e09 @end|ng |rom gm@||@com (Carrie Tribble)
Date: Fri, 6 Aug 2021 10:34:31 -1000
Subject: [R-pkg-devel] WinBuilder error: dependency version not available
Message-ID: <CA+emL6N19n0P+xBq+FjjUvcrg+c3xhSA0G7yiE4P-q7nBwurhA@mail.gmail.com>

I am in the final stages of preparing an R package
<https://github.com/cmt2/RevGadgets/tree/development> to submit to CRAN.
The package passes devtools::check() locally, GitHub Actions on multiple
systems (including windows), devtools::check_rhub() remotely, and
rhub::check_on_windows(check_args = "--force-multiarch"). However, it fails
on WinBuilder.

I'd appreciate any advice or suggestions. More details below:

You can see the full WinBuilder log here:
 https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log
<https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log>

* checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Carrie Tribble <ctribble09 at gmail.com>' New submission Possibly
> misspelled words in DESCRIPTION:
> RevBayes (3:45, 22:92)
> * checking package namespace information ... OK
> * checking package dependencies ... ERROR
> Package required and available but unsuitable version: 'ggtree' See
> section 'The DESCRIPTION file' in the 'Writing R Extensions'
> manual.
> * DONE
> Status: 1 ERROR, 1 NOTE


We require the latest version of ggtree, a bioconductor package.
Unfortunately, this latest version is necessary for our package to
function. What's the best way to get access to that version of ggtree on
WinBuilder?

You can see the log for the successful rhub check_on_windows run here:
https://builder.r-hub.io/status/RevGadgets_1.0.0.tar.gz-8367c3a164ad47379c8bd89c81347ceb,
and find the package on GitHub here:
https://github.com/cmt2/RevGadgets/tree/development.

Thank you!

-------------------
Carrie M. Tribble, PhD <http://carrietribble.weebly.com/>
Postdoctoral Researcher in the Zenil-Ferguson Lab
<https://roszenil.github.io/>
University of Hawai?i at M?noa

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Fri Aug  6 22:51:37 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 6 Aug 2021 15:51:37 -0500
Subject: [R-pkg-devel] Ongoing CXX17 woes
Message-ID: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>

Hi Folks,

I have a package that compiles fine under C++11 but it throws an "Error:
C++17 standard requested but CXX17 is not defined" error when checking
under Solaris.

My configure looks like:

#!/bin/sh

# Borrowed from
https://github.com/eddelbuettel/rcppsimdjson/blob/master/configure

: ${R_HOME=`R RHOME`}
if test -z "${R_HOME}"; then
    echo Could not determine R_HOME.
    exit 1
fi

CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep "^CXX17$"`

if test "x${CXX17}" = "x"; then
   sed -e 's/@CXXSTD@/CXX11/' -e 's/@NOCXX17@/-DNO_CXX17/' src/Makevars.in
> src/Makevars
else
   sed -e 's/@CXXSTD@/CXX17/' -e 's/@NOCXX17@//' src/Makevars.in >
src/Makevars
fi

exit 0

If I change the grep match to something nonsensical (forcing c++11), then
the package builds and checks just fine on my machine.

So it seems that there is some checking code that searches for c++17
statements in the package and throws an error. If that is the case, then
those checks should be removed as they cannot account for conditional
compilation. For example, in my vignettes, I have c++17 code but those
chunks are not evaluated if c++17 is not available.

Is the checking code available for inspection? I'd like to find exactly
where the error is coming from.

THK

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Aug  6 23:05:09 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 6 Aug 2021 23:05:09 +0200
Subject: [R-pkg-devel] Ongoing CXX17 woes
In-Reply-To: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>
References: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>
Message-ID: <20210806230509.50b0cedd@trisector>

On Fri, 6 Aug 2021 15:51:37 -0500
Tim Keitt <tkeitt at gmail.com> wrote:

> CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep \
> "^CXX17$"`

This seems to output "CXX17" on a machine with no C++17 support. On the
other hand, running `${R_HOME}/bin/R CMD config CXX17` here gives me an
empty string.

-- 
Best regards,
Ivan


From tke|tt @end|ng |rom gm@||@com  Fri Aug  6 23:22:54 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 6 Aug 2021 16:22:54 -0500
Subject: [R-pkg-devel] Ongoing CXX17 woes
In-Reply-To: <20210806230509.50b0cedd@trisector>
References: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>
 <20210806230509.50b0cedd@trisector>
Message-ID: <CANnL8grQJhWKbAahziP4_ygEnwb7vir+V29GCia4sF0Q0xPK_g@mail.gmail.com>

On Fri, Aug 6, 2021 at 4:05 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Fri, 6 Aug 2021 15:51:37 -0500
> Tim Keitt <tkeitt at gmail.com> wrote:
>
> > CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep \
> > "^CXX17$"`
>
> This seems to output "CXX17" on a machine with no C++17 support. On the
> other hand, running `${R_HOME}/bin/R CMD config CXX17` here gives me an
> empty string.
>

Not on my machine. But perhaps this is the issue with Solaris? You can
check the comments at
https://github.com/eddelbuettel/rcppsimdjson/blob/master/configure that
suggest the grep method is more robust. But perhaps that's no longer the
case or on all platforms.

THK


>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Fri Aug  6 23:33:31 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 6 Aug 2021 16:33:31 -0500
Subject: [R-pkg-devel] Ongoing CXX17 woes
In-Reply-To: <CANnL8grQJhWKbAahziP4_ygEnwb7vir+V29GCia4sF0Q0xPK_g@mail.gmail.com>
References: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>
 <20210806230509.50b0cedd@trisector>
 <CANnL8grQJhWKbAahziP4_ygEnwb7vir+V29GCia4sF0Q0xPK_g@mail.gmail.com>
Message-ID: <CANnL8greaEUaKTMnveQbX+NNYTfLtEGWDqbUddvK5-6kgqZQ7Q@mail.gmail.com>

On Fri, Aug 6, 2021 at 4:22 PM Tim Keitt <tkeitt at gmail.com> wrote:

>
>
> On Fri, Aug 6, 2021 at 4:05 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
>> On Fri, 6 Aug 2021 15:51:37 -0500
>> Tim Keitt <tkeitt at gmail.com> wrote:
>>
>> > CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep \
>> > "^CXX17$"`
>>
>> This seems to output "CXX17" on a machine with no C++17 support. On the
>> other hand, running `${R_HOME}/bin/R CMD config CXX17` here gives me an
>> empty string.
>>
>
Actually, you are right -- from the shell it does return a string. I'll try
the alternative version.

THK


>
> Not on my machine. But perhaps this is the issue with Solaris? You can
> check the comments at
> https://github.com/eddelbuettel/rcppsimdjson/blob/master/configure that
> suggest the grep method is more robust. But perhaps that's no longer the
> case or on all platforms.
>
> THK
>
>
>>
>> --
>> Best regards,
>> Ivan
>>
>

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Sat Aug  7 00:37:22 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 6 Aug 2021 17:37:22 -0500
Subject: [R-pkg-devel] Ongoing CXX17 woes
In-Reply-To: <CANnL8greaEUaKTMnveQbX+NNYTfLtEGWDqbUddvK5-6kgqZQ7Q@mail.gmail.com>
References: <CANnL8go2w=QtBdbLy3W-2b1H4Yr_xOdatRhJa6KH54FBbMPOmA@mail.gmail.com>
 <20210806230509.50b0cedd@trisector>
 <CANnL8grQJhWKbAahziP4_ygEnwb7vir+V29GCia4sF0Q0xPK_g@mail.gmail.com>
 <CANnL8greaEUaKTMnveQbX+NNYTfLtEGWDqbUddvK5-6kgqZQ7Q@mail.gmail.com>
Message-ID: <CANnL8gorSTo4FQs6QihruFf_TRrdVP78TgKUwk=K7u-yR5mOmA@mail.gmail.com>

Fixed. Thanks.

THK

On Fri, Aug 6, 2021 at 4:33 PM Tim Keitt <tkeitt at gmail.com> wrote:

>
>
> On Fri, Aug 6, 2021 at 4:22 PM Tim Keitt <tkeitt at gmail.com> wrote:
>
>>
>>
>> On Fri, Aug 6, 2021 at 4:05 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>>
>>> On Fri, 6 Aug 2021 15:51:37 -0500
>>> Tim Keitt <tkeitt at gmail.com> wrote:
>>>
>>> > CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep \
>>> > "^CXX17$"`
>>>
>>> This seems to output "CXX17" on a machine with no C++17 support. On the
>>> other hand, running `${R_HOME}/bin/R CMD config CXX17` here gives me an
>>> empty string.
>>>
>>
> Actually, you are right -- from the shell it does return a string. I'll
> try the alternative version.
>
> THK
>
>
>>
>> Not on my machine. But perhaps this is the issue with Solaris? You can
>> check the comments at
>> https://github.com/eddelbuettel/rcppsimdjson/blob/master/configure that
>> suggest the grep method is more robust. But perhaps that's no longer the
>> case or on all platforms.
>>
>> THK
>>
>>
>>>
>>> --
>>> Best regards,
>>> Ivan
>>>
>>

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Sat Aug  7 00:42:33 2021
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 6 Aug 2021 17:42:33 -0500
Subject: [R-pkg-devel] windows and configure scripts
Message-ID: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>

As configure is not run on windows, but according to the writing extensions
docs you can run commands in Makevars, is that not preferable for simple
cases?

What shell is active in Makevars? Is it "/bin/sh" or is make the
interpreter here?

Can we use $(shell ...cmd...) in Makevars on windows? I'm not sure where to
look for what syntax is in-play in the Makevars file during package
building other than trial-and-error.

THK

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sat Aug  7 01:00:01 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 6 Aug 2021 18:00:01 -0500
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
Message-ID: <24845.48881.737620.788441@rob.eddelbuettel.com>


If look closely enough at _Writing R Extensions_ you notice that it mentions
'configure.win' over half a dozen times.  A powerful trick is to then use the
fact that there are other packages on CRAN, in fact almost 18k of them.

And e.g. this search

  https://github.com/search?q=org%3Acran+configure.win&type=code

find 261 hits within the 'cran' mirror at GitHub for the term 'configure.win'.
Some of those are likely of use to you.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tke|tt @end|ng |rom gm@||@com  Sat Aug  7 01:32:15 2021
From: tke|tt @end|ng |rom gm@||@com (Timothy Keitt)
Date: Fri, 6 Aug 2021 18:32:15 -0500
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <24845.48881.737620.788441@rob.eddelbuettel.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
 <24845.48881.737620.788441@rob.eddelbuettel.com>
Message-ID: <CANnL8gotRTePyA-rbRpcrvG7VwkH+bUaheG9D+_nGHkPvQFdaA@mail.gmail.com>

Snarky answers aside, it's still a valid question whether it's not just
cleaner in simple cases to run commands from the Makevars file as described
in the extensions doc. Of course there's no particularly useful examples
there and searching 'Makevars' on github (yes tried that) is not very
illuminating as it's too generic.

THK

On Fri, Aug 6, 2021 at 6:00 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> If look closely enough at _Writing R Extensions_ you notice that it
> mentions
> 'configure.win' over half a dozen times.  A powerful trick is to then use
> the
> fact that there are other packages on CRAN, in fact almost 18k of them.
>
> And e.g. this search
>
>   https://github.com/search?q=org%3Acran+configure.win&type=code
>
> find 261 hits within the 'cran' mirror at GitHub for the term
> 'configure.win'.
> Some of those are likely of use to you.
>
> Dirk
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Aug  7 01:44:31 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 7 Aug 2021 01:44:31 +0200
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <CANnL8gotRTePyA-rbRpcrvG7VwkH+bUaheG9D+_nGHkPvQFdaA@mail.gmail.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
 <24845.48881.737620.788441@rob.eddelbuettel.com>
 <CANnL8gotRTePyA-rbRpcrvG7VwkH+bUaheG9D+_nGHkPvQFdaA@mail.gmail.com>
Message-ID: <CABtg=Kk0rmTQw150+R=dNEAzdA8ScrU=xjeUPGSGq53csJ3Eew@mail.gmail.com>

On Sat, Aug 7, 2021 at 1:32 AM Timothy Keitt <tkeitt at gmail.com> wrote:
>
> Snarky answers aside, it's still a valid question whether it's not just
> cleaner in simple cases to run commands from the Makevars file as described
> in the extensions doc. Of course there's no particularly useful examples
> there and searching 'Makevars' on github (yes tried that) is not very
> illuminating as it's too generic.

You can restrict your search to CRAN packages by using the 'cran' organization:
https://github.com/search?q=org%3Acran+filename%3AMakevars.win&type=Code

You can also have a `configure.win` file, that runs only on Windows, with sh.
Or you can have a single `configure` that works on all platforms, and
call that from `configure.win`. E.g.
https://github.com/cran/ps/blob/master/configure.win

G.

[...]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Sat Aug  7 04:08:39 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 6 Aug 2021 19:08:39 -0700
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
In-Reply-To: <LOYP265MB2015B14BA7BE3EF19139AAF2AEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <CAHqSRuT0_WaW0PY33kKC+i+cKRuc9Uu7JiP3hs=q_7oEHXMBZQ@mail.gmail.com>
 <LOYP265MB2015B14BA7BE3EF19139AAF2AEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAHqSRuST39vf0vb2fP7XbE93R6d_WJSW9pvCj-a8f-F00zO4Bg@mail.gmail.com>

I think the following change to str.c, in str_strcpy_internal(), fixes the
valgrind issues.  It was easier to track down after the calloc() was
changed to malloc(), since before it only happened after a realloc().
 $ diff -u rbibutils/src/str.c rbibutils-fixed/src/str.c
--- rbibutils/src/str.c 2021-06-16 04:13:48.000000000 -0700
+++ rbibutils-fixed/src/str.c   2021-08-06 18:38:56.763556500 -0700
@@ -217,8 +217,8 @@
        unsigned long size = str_initlen;
        assert( s );
        if ( minsize > str_initlen ) size = minsize;
-       // 2021-06-16 was: s->data = (char *) malloc( sizeof( *(s->data) )
* size );
-       //     changing to calloc() to avoid this kind of error from
valgrind:
+       s->data = (char *) malloc( sizeof( *(s->data) ) * size );
+       //     tried changing to calloc() to avoid this kind of error from
valgrind:
         //      > bibConvert(fn_med, bib, informat = "med")
         //      ==16041== Conditional jump or move depends on
uninitialised value(s)
         //      ==16041==    at 0x10CCF2A3: xml_processtag (xml.c:174)
@@ -249,8 +249,9 @@
        //
        // TODO:
        //    The data is not really left uninitialised and there may be a
better way to let the compiler know.
+        // WWD: fixing str_strcpy_internal takes care of memory misuse.
        //
-       s->data = (char *) calloc( size, sizeof( *(s->data) ) );
+       // s->data = (char *) calloc( size, sizeof( *(s->data) ) );
        if ( !s->data ) {
          error("Error.  Cannot allocate memory in str_initalloc, requested
%lu characters.\n\n", size );
          // error("\n"); // error( EXIT_FAILURE );
@@ -552,9 +553,9 @@
        // Georgi: this fixes the warning about truncation in strncpy
        //   strcpy cannot be used here since at least one of the calls
below
        //   passes a non-NULL terminated 'p'
-       strncpy( s->data, p, n + 1);
-       // strncpy( s->data, p, n );
-       // s->data[n] = '\0';
+       // strncpy( s->data, p, n + 1); // WWD: ???
+       strncpy( s->data, p, n );
+       s->data[n] = '\0';
        s->len = n;
 }

I don't know why valgrind isn't working for you.

-Bill

On Mon, Aug 2, 2021 at 4:23 PM Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> Thanks for looking into this. I probably didn?t make it clear that I am
> not questioning the errors on CRAN but my own configuration. I have pretty
> good idea where the error comes from, since the only change from the
> previous CRAN version was in medin.c (function medin_readf from line 94 and
> most probably line 144-145). I think also that all errors have medin.c on
> the trace.
>
>
>
> It would be very helpful if somebody can spot from the description of my
> configuration in the original email where I have gone wrong in the setup of
> R with valgrind.
>
>
>
> >realloc() does not initialize memory.  str.c contains a comment about
> replacing malloc() with calloc() to avoid?
>
>
>
>             //    The data is not really left uninitialised and there may
> be a better way to let the compiler know.
>
>             //
>
>             s->data = (char *) calloc( size, sizeof( *(s->data) ) );
>
>             if ( !s->data ) {
>
>               error("Error.  Cannot allocate memory in str_initalloc,
> requested %lu characters.\n\n", size );
>
>               // error("\n"); // error( EXIT_FAILURE );
>
>             }
>
>             s->data[0]='\0';
>
>             s->dim=size;
>
>             s->len=0;
>
>
>
> My comment is indeed sloppy but the first byte is initialised to zero and
> the rest is used for writing only
>
> (valgrind has no way to know, of course, and it is fair to question how a
> human can possibly be sure).
>
>
>
>
>
> Thanks again,
>
> Georgi Boshnakov
>
>
>
>
>
> *From:* Bill Dunlap <williamwdunlap at gmail.com>
> *Sent:* 02 August 2021 19:48
> *To:* Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
> *Cc:* r-package-devel at r-project.org
> *Subject:* Re: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN
> with valgrind
>
>
>
> I ran the tests of rbibutils-2.2.2, using the latest devel version of R
> configured to use valgrind, with
>
>
>
> R --debugger=valgrind --debugger-args=--track-origins=yes --quiet -e
> 'testthat::test_package("rbibutils")'
>
>
>
> I saw a lot of 'conditional jump depends on uninitialized value' errors:
>
>
>
> ==27280== Conditional jump or move depends on uninitialised value(s)
> ==27280==    at 0x11C420B7: UnknownInlinedFun (xml.c:178)
> ==27280==    by 0x11C420B7: xml_parse (xml.c:241)
> ==27280==    by 0x11C514EF: medin_processf (medin.c:683)
> ==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
> ==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
> ==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
> ==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
> ==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
> ==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
> ==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
> ==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
> ==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
> ==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
> ==27280==    by 0x2D7F22: do_begin (eval.c:2530)
> ==27280==  Uninitialised value was created by a heap allocation
> ==27280==    at 0x483DFAF: realloc (in
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==27280==    by 0x11C38DB2: str_realloc.part.0 (str.c:90)
> ==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:85)
> ==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:543)
> ==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:551)
> ==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:547)
> ==27280==    by 0x11C3B63D: UnknownInlinedFun (str.c:607)
> ==27280==    by 0x11C3B63D: str_segcpy (str.c:585)
> ==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)
> ==27280==    by 0x11C67A96: UnknownInlinedFun (bibcore.c:471)
> ==27280==    by 0x11C67A96: bibl_read.part.0 (bibcore.c:862)
> ==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
> ==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
> ==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
>
>
>
> realloc() does not initialize memory.  str.c contains a comment about
> replacing malloc() with calloc() to avoid similar problems that valgrind
> found.  It states that valgrind is mistaken, that that memory really is
> initialized.  Hmm.
>
>
>
> I also see the error about reading off the end of a malloc'ed array:
>
>
>
> ==27280== Invalid read of size 1
> ==27280==    at 0x11C420A8: UnknownInlinedFun (xml.c:174)
> ==27280==    by 0x11C420A8: xml_parse (xml.c:241)
> ==27280==    by 0x11C514EF: medin_processf (medin.c:683)
> ==27280==    by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
> ==27280==    by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
> ==27280==    by 0x11C68C66: bibprog (bibprog.c:36)
> ==27280==    by 0x11C69327: any2xml_main (any2xml.c:127)
> ==27280==    by 0x307639: do_dotCode (dotcode.c:1814)
> ==27280==    by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
> ==27280==    by 0x2DADB7: Rf_eval (eval.c:740)
> ==27280==    by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
> ==27280==    by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
> ==27280==    by 0x2DAFD3: Rf_eval (eval.c:863)
> ==27280==    by 0x2D7F22: do_begin (eval.c:2530)
> ==27280==  Address 0x125028af is 0 bytes after a block of size 10,927
> alloc'd
> ==27280==    at 0x483DD99: calloc (in
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==27280==    by 0x11C38DF2: str_initalloc (str.c:253)
> ==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:541)
> ==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:551)
> ==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:547)
> ==27280==    by 0x11C3B66A: UnknownInlinedFun (str.c:607)
> ==27280==    by 0x11C3B66A: str_segcpy (str.c:585)
> ==27280==    by 0x11C4DDFA: medin_readf (medin.c:144)
>
>
>
>
>
> On Mon, Aug 2, 2021 at 10:11 AM Georgi Boshnakov <
> georgi.boshnakov at manchester.ac.uk> wrote:
>
> An update to my package rbibutils triggered 'Additional issues' on CRAN
> from valgrind, CRAN Package Check Results for Package rbibutils (
> r-project.org)<
> https://cran.r-project.org/web/checks/check_results_rbibutils.html>.
>
> However, running the checks with -use-valgrind  on my machine gives zero
> errors.
> I am on Ubuntu (the latest stable version), my R-devel installation was
> updated earlier today and I rebuild it adding the
> --with-valgrind-instrumentation=2 to the call to configure.
> Valgrind coming with Ubuntu is 3.5.0, so I installed its latest version
> from  github (also no errors).
>
> rbibutils has no dependencies, except that testthat is used for testing.
>
> What am I missing? Do I need to have a separate library for the
> instrumented R-devel version?
>
> As a side note, is there a way to find out if R has been built with
> valgrind? It seems that 'capabilities()' and 'R CMD config' do not offer
> this information.
>
> Thanks,
> Georgi Boshnakov
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Sat Aug  7 22:35:21 2021
From: tke|tt @end|ng |rom gm@||@com (Timothy Keitt)
Date: Sat, 7 Aug 2021 15:35:21 -0500
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <CABtg=Kk0rmTQw150+R=dNEAzdA8ScrU=xjeUPGSGq53csJ3Eew@mail.gmail.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
 <24845.48881.737620.788441@rob.eddelbuettel.com>
 <CANnL8gotRTePyA-rbRpcrvG7VwkH+bUaheG9D+_nGHkPvQFdaA@mail.gmail.com>
 <CABtg=Kk0rmTQw150+R=dNEAzdA8ScrU=xjeUPGSGq53csJ3Eew@mail.gmail.com>
Message-ID: <CANnL8grV9rLkL4sXf7iCEhF-7zNCYMHDnYiFanuiy56z9sfoDQ@mail.gmail.com>

Good suggestion. I'll try that.

THK

On Fri, Aug 6, 2021 at 6:44 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> On Sat, Aug 7, 2021 at 1:32 AM Timothy Keitt <tkeitt at gmail.com> wrote:
> >
> > Snarky answers aside, it's still a valid question whether it's not just
> > cleaner in simple cases to run commands from the Makevars file as
> described
> > in the extensions doc. Of course there's no particularly useful examples
> > there and searching 'Makevars' on github (yes tried that) is not very
> > illuminating as it's too generic.
>
> You can restrict your search to CRAN packages by using the 'cran'
> organization:
> https://github.com/search?q=org%3Acran+filename%3AMakevars.win&type=Code
>
> You can also have a `configure.win` file, that runs only on Windows, with
> sh.
> Or you can have a single `configure` that works on all platforms, and
> call that from `configure.win`. E.g.
> https://github.com/cran/ps/blob/master/configure.win
>
> G.
>
> [...]
>

	[[alternative HTML version deleted]]


From kev|nu@hey @end|ng |rom gm@||@com  Sat Aug  7 23:51:05 2021
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Sat, 7 Aug 2021 14:51:05 -0700
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
Message-ID: <CAJXgQP1kTzq4EAqmLcdy92oOQT1A+4QTAh5GL7Z2meVqdU23OQ@mail.gmail.com>

On Fri, Aug 6, 2021 at 3:47 PM Tim Keitt <tkeitt at gmail.com> wrote:
>
> As configure is not run on windows, but according to the writing extensions
> docs you can run commands in Makevars, is that not preferable for simple
> cases?

IMHO it's ultimately up to you. Do what makes your life easier as a
package maintainer. If your package can be successfully configured
using only Makevars, then that's probably simplest. If Windows needs
special help, then it might be reasonable to have a separate
Makevars.win file. If you need to perform some extra introspection
about the user's machine, then you probably want a pair of configure
and configure.win scripts.

> What shell is active in Makevars? Is it "/bin/sh" or is make the
> interpreter here?

Since Makevars is just a Makefile, it is processed by make. Executed
shell commands then depend on what shell make has been configured to
use. That defaults to /bin/sh, but R installations might be configured
to use a different shell instead. If you look within $(R
RHOME)/etc/Makeconf you'll probably see something like:

    SHELL = /bin/sh

But that might differ on different platforms. (I don't immediately
recall how this is handled on Windows)

I don't quite understand your question re: "is make the interpreter
here?" -- make interprets Makefiles, which, while looking similar to
shell scripts, are their own thing. Recipes are effectively just
specially adorned shell commands, so while they are still interpreted
by make per-se, it does so by sending those commands to a shell for
execution. See https://pubs.opengroup.org/onlinepubs/9699919799/utilities/make.html
for the nitty gritty details.

> Can we use $(shell ...cmd...) in Makevars on windows? I'm not sure where to
> look for what syntax is in-play in the Makevars file during package
> building other than trial-and-error.

I think you would have to consult with the CRAN maintainers to be sure
(assuming your question is whether CRAN would accept packages using
GNU extensions only on Windows). While the toolchain on Windows is
GNU-based and so GNU extensions are supported by the toolchain, it is
theoretically possible (although, to me, very unlikely) this could
change in the future.

> THK
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tke|tt @end|ng |rom gm@||@com  Sun Aug  8 19:47:14 2021
From: tke|tt @end|ng |rom gm@||@com (Timothy Keitt)
Date: Sun, 8 Aug 2021 12:47:14 -0500
Subject: [R-pkg-devel] windows and configure scripts
In-Reply-To: <CAJXgQP1kTzq4EAqmLcdy92oOQT1A+4QTAh5GL7Z2meVqdU23OQ@mail.gmail.com>
References: <CANnL8gpDhZgYS0uD0uCWXMkZk7uSHtsT-=zap777c3gCpW+K9Q@mail.gmail.com>
 <CAJXgQP1kTzq4EAqmLcdy92oOQT1A+4QTAh5GL7Z2meVqdU23OQ@mail.gmail.com>
Message-ID: <CANnL8go91Xs3tVcmR1r+OqkyXJGAFbAo+LoFPz-sAEk7tcBooQ@mail.gmail.com>

Thanks. Just me trying to be minimalist and see if I could achieve the aim
without extra files, etc. All I need to do is see if the CXX17 config
option is empty and modify PKG_CPPFLAGS and CXX_STD appropriately. That
means calling R and and implementing an if-else in the Makevars file
outside of any make target (or that's my assumption). Searching how to do
that inevitably leads to 100's of GNU make examples using GNU extensions,
which are not portable across all R platforms and so are useless. (Thanks
for the link to the official non-extended make syntax.)

In the end, it was easier just to have a config and config.win as per
Dirk's suggestion.

THK

On Sat, Aug 7, 2021 at 4:51 PM Kevin Ushey <kevinushey at gmail.com> wrote:

> On Fri, Aug 6, 2021 at 3:47 PM Tim Keitt <tkeitt at gmail.com> wrote:
> >
> > As configure is not run on windows, but according to the writing
> extensions
> > docs you can run commands in Makevars, is that not preferable for simple
> > cases?
>
> IMHO it's ultimately up to you. Do what makes your life easier as a
> package maintainer. If your package can be successfully configured
> using only Makevars, then that's probably simplest. If Windows needs
> special help, then it might be reasonable to have a separate
> Makevars.win file. If you need to perform some extra introspection
> about the user's machine, then you probably want a pair of configure
> and configure.win scripts.
>
> > What shell is active in Makevars? Is it "/bin/sh" or is make the
> > interpreter here?
>
> Since Makevars is just a Makefile, it is processed by make. Executed
> shell commands then depend on what shell make has been configured to
> use. That defaults to /bin/sh, but R installations might be configured
> to use a different shell instead. If you look within $(R
> RHOME)/etc/Makeconf you'll probably see something like:
>
>     SHELL = /bin/sh
>
> But that might differ on different platforms. (I don't immediately
> recall how this is handled on Windows)
>
> I don't quite understand your question re: "is make the interpreter
> here?" -- make interprets Makefiles, which, while looking similar to
> shell scripts, are their own thing. Recipes are effectively just
> specially adorned shell commands, so while they are still interpreted
> by make per-se, it does so by sending those commands to a shell for
> execution. See
> https://pubs.opengroup.org/onlinepubs/9699919799/utilities/make.html
> for the nitty gritty details.
>
> > Can we use $(shell ...cmd...) in Makevars on windows? I'm not sure where
> to
> > look for what syntax is in-play in the Makevars file during package
> > building other than trial-and-error.
>
> I think you would have to consult with the CRAN maintainers to be sure
> (assuming your question is whether CRAN would accept packages using
> GNU extensions only on Windows). While the toolchain on Windows is
> GNU-based and so GNU extensions are supported by the toolchain, it is
> theoretically possible (although, to me, very unlikely) this could
> change in the future.
>
> > THK
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Aug  9 11:18:10 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 9 Aug 2021 09:18:10 +0000
Subject: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with
 valgrind
In-Reply-To: <CAHqSRuST39vf0vb2fP7XbE93R6d_WJSW9pvCj-a8f-F00zO4Bg@mail.gmail.com>
References: <LOYP265MB20158D7D223D1B8C6577D46CAEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <CAHqSRuT0_WaW0PY33kKC+i+cKRuc9Uu7JiP3hs=q_7oEHXMBZQ@mail.gmail.com>
 <LOYP265MB2015B14BA7BE3EF19139AAF2AEEF9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <CAHqSRuST39vf0vb2fP7XbE93R6d_WJSW9pvCj-a8f-F00zO4Bg@mail.gmail.com>
Message-ID: <LOYP265MB201569896D878E7509A1F9B3AEF69@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

Thanks Bill for taking the time to look into this, the patch, and the enlightening comments. 
 
I incorporated it and it resolved the valgrind issues. An old compiler issue resurfaced (Wstringop-truncation warning from strncopy) whose dodgy fix had introduced the current bug but it is now fixed.

As to valgrind, I adapted a Github actions workflow kindly provided by Martin R. Smith which reproduced the errors from CRAN. 

Georgi Boshnakov

==============================

From: Bill Dunlap <williamwdunlap at gmail.com> 
Sent: 07 August 2021 03:09
To: Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with valgrind

I think the following change to str.c, in str_strcpy_internal(), fixes the valgrind issues.? It was easier to track down after the calloc() was changed to malloc(), since before it only happened after a realloc().
?$ diff -u rbibutils/src/str.c rbibutils-fixed/src/str.c
--- rbibutils/src/str.c 2021-06-16 04:13:48.000000000 -0700
+++ rbibutils-fixed/src/str.c ? 2021-08-06 18:38:56.763556500 -0700
@@ -217,8 +217,8 @@
? ? ? ? unsigned long size = str_initlen;
? ? ? ? assert( s );
? ? ? ? if ( minsize > str_initlen ) size = minsize;
- ? ? ? // 2021-06-16 was: s->data = (char *) malloc( sizeof( *(s->data) ) * size );
- ? ? ? // ? ? changing to calloc() to avoid this kind of error from valgrind:
+ ? ? ? s->data = (char *) malloc( sizeof( *(s->data) ) * size );
+ ? ? ? // ? ? tried changing to calloc() to avoid this kind of error from valgrind:
? ? ? ? ?// ? ? ?> bibConvert(fn_med, bib, informat = "med")
? ? ? ? ?// ? ? ?==16041== Conditional jump or move depends on uninitialised value(s)
? ? ? ? ?// ? ? ?==16041== ? ?at 0x10CCF2A3: xml_processtag (xml.c:174)
@@ -249,8 +249,9 @@
? ? ? ? //
? ? ? ? // TODO:
? ? ? ? // ? ?The data is not really left uninitialised and there may be a better way to let the compiler know.
+ ? ? ? ?// WWD: fixing str_strcpy_internal takes care of memory misuse.
? ? ? ? //
- ? ? ? s->data = (char *) calloc( size, sizeof( *(s->data) ) );
+ ? ? ? // s->data = (char *) calloc( size, sizeof( *(s->data) ) );
? ? ? ? if ( !s->data ) {
? ? ? ? ? error("Error.? Cannot allocate memory in str_initalloc, requested %lu characters.\n\n", size );
? ? ? ? ? // error("\n"); // error( EXIT_FAILURE );
@@ -552,9 +553,9 @@
? ? ? ? // Georgi: this fixes the warning about truncation in strncpy
? ? ? ? // ? strcpy cannot be used here since at least one of the calls below
? ? ? ? // ? passes a non-NULL terminated 'p'
- ? ? ? strncpy( s->data, p, n + 1);
- ? ? ? // strncpy( s->data, p, n );
- ? ? ? // s->data[n] = '\0';
+ ? ? ? // strncpy( s->data, p, n + 1); // WWD: ???
+ ? ? ? strncpy( s->data, p, n );
+ ? ? ? s->data[n] = '\0';
? ? ? ? s->len = n;
?}

I don't know why valgrind isn't working for you.

-Bill

On Mon, Aug 2, 2021 at 4:23 PM Georgi Boshnakov <mailto:georgi.boshnakov at manchester.ac.uk> wrote:
Thanks for looking into this. I probably didn?t make it clear that I am not questioning the errors on CRAN but my own configuration. I have pretty good idea where the error comes from, since the only change from the previous CRAN version was in medin.c (function medin_readf from line 94 and most probably line 144-145). I think also that all errors have medin.c on the trace.
?
It would be very helpful if somebody can spot from the description of my configuration in the original email where I have gone wrong in the setup of R with valgrind.
?
>realloc() does not initialize memory.? str.c contains a comment about replacing malloc() with calloc() to avoid?
?
??????????? //??? The data is not really left uninitialised and there may be a better way to let the compiler know.
??????????? //
??????????? s->data = (char *) calloc( size, sizeof( *(s->data) ) );
??????????? if ( !s->data ) {
??????????? ? error("Error.? Cannot allocate memory in str_initalloc, requested %lu characters.\n\n", size );
??????????? ? // error("\n"); // error( EXIT_FAILURE );
??????????? }
??????????? s->data[0]='\0';
??????????? s->dim=size;
??????????? s->len=0;
?
My comment is indeed sloppy but the first byte is initialised to zero and the rest is used for writing only
(valgrind has no way to know, of course, and it is fair to question how a human can possibly be sure).
?
?
Thanks again,
Georgi Boshnakov
?
?
From: Bill Dunlap <mailto:williamwdunlap at gmail.com> 
Sent: 02 August 2021 19:48
To: Georgi Boshnakov <mailto:georgi.boshnakov at manchester.ac.uk>
Cc: mailto:r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] can't reproduce 'Additional issues' on CRAN with valgrind
?
I ran the tests of rbibutils-2.2.2, using the latest devel version of R configured to use valgrind, with
?
R --debugger=valgrind --debugger-args=--track-origins=yes --quiet -e 'testthat::test_package("rbibutils")'
?
I saw a lot of 'conditional jump depends on uninitialized value' errors:
?
==27280== Conditional jump or move depends on uninitialised value(s)
==27280== ? ?at 0x11C420B7: UnknownInlinedFun (xml.c:178)
==27280== ? ?by 0x11C420B7: xml_parse (xml.c:241)
==27280== ? ?by 0x11C514EF: medin_processf (medin.c:683)
==27280== ? ?by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280== ? ?by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280== ? ?by 0x11C68C66: bibprog (bibprog.c:36)
==27280== ? ?by 0x11C69327: any2xml_main (any2xml.c:127)
==27280== ? ?by 0x307639: do_dotCode (dotcode.c:1814)
==27280== ? ?by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280== ? ?by 0x2DADB7: Rf_eval (eval.c:740)
==27280== ? ?by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280== ? ?by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280== ? ?by 0x2DAFD3: Rf_eval (eval.c:863)
==27280== ? ?by 0x2D7F22: do_begin (eval.c:2530)
==27280== ?Uninitialised value was created by a heap allocation
==27280== ? ?at 0x483DFAF: realloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280== ? ?by 0x11C38DB2: str_realloc.part.0 (str.c:90)
==27280== ? ?by 0x11C3B63D: UnknownInlinedFun (str.c:85)
==27280== ? ?by 0x11C3B63D: UnknownInlinedFun (str.c:543)
==27280== ? ?by 0x11C3B63D: UnknownInlinedFun (str.c:551)
==27280== ? ?by 0x11C3B63D: UnknownInlinedFun (str.c:547)
==27280== ? ?by 0x11C3B63D: UnknownInlinedFun (str.c:607)
==27280== ? ?by 0x11C3B63D: str_segcpy (str.c:585)
==27280== ? ?by 0x11C4DDFA: medin_readf (medin.c:144)
==27280== ? ?by 0x11C67A96: UnknownInlinedFun (bibcore.c:471)
==27280== ? ?by 0x11C67A96: bibl_read.part.0 (bibcore.c:862)
==27280== ? ?by 0x11C68C66: bibprog (bibprog.c:36)
==27280== ? ?by 0x11C69327: any2xml_main (any2xml.c:127)
==27280== ? ?by 0x307639: do_dotCode (dotcode.c:1814)
?
realloc() does not initialize memory.? str.c contains a comment about replacing malloc() with calloc() to avoid similar problems that valgrind found.? It states that valgrind is mistaken, that that memory really is initialized.? Hmm.
?
I also see the error about reading off the end of a malloc'ed array:
?
==27280== Invalid read of size 1
==27280== ? ?at 0x11C420A8: UnknownInlinedFun (xml.c:174)
==27280== ? ?by 0x11C420A8: xml_parse (xml.c:241)
==27280== ? ?by 0x11C514EF: medin_processf (medin.c:683)
==27280== ? ?by 0x11C67ADE: UnknownInlinedFun (bibcore.c:479)
==27280== ? ?by 0x11C67ADE: bibl_read.part.0 (bibcore.c:862)
==27280== ? ?by 0x11C68C66: bibprog (bibprog.c:36)
==27280== ? ?by 0x11C69327: any2xml_main (any2xml.c:127)
==27280== ? ?by 0x307639: do_dotCode (dotcode.c:1814)
==27280== ? ?by 0x2B4600: bcEval.lto_priv.0 (eval.c:7128)
==27280== ? ?by 0x2DADB7: Rf_eval (eval.c:740)
==27280== ? ?by 0x2DD28E: R_execClosure.lto_priv.0 (eval.c:1910)
==27280== ? ?by 0x2DE1EC: Rf_applyClosure (eval.c:1836)
==27280== ? ?by 0x2DAFD3: Rf_eval (eval.c:863)
==27280== ? ?by 0x2D7F22: do_begin (eval.c:2530)
==27280== ?Address 0x125028af is 0 bytes after a block of size 10,927 alloc'd
==27280== ? ?at 0x483DD99: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==27280== ? ?by 0x11C38DF2: str_initalloc (str.c:253)
==27280== ? ?by 0x11C3B66A: UnknownInlinedFun (str.c:541)
==27280== ? ?by 0x11C3B66A: UnknownInlinedFun (str.c:551)
==27280== ? ?by 0x11C3B66A: UnknownInlinedFun (str.c:547)
==27280== ? ?by 0x11C3B66A: UnknownInlinedFun (str.c:607)
==27280== ? ?by 0x11C3B66A: str_segcpy (str.c:585)
==27280== ? ?by 0x11C4DDFA: medin_readf (medin.c:144)
?
?
On Mon, Aug 2, 2021 at 10:11 AM Georgi Boshnakov <mailto:georgi.boshnakov at manchester.ac.uk> wrote:
An update to my package rbibutils triggered 'Additional issues' on CRAN from valgrind, CRAN Package Check Results for Package rbibutils (http://r-project.org)<https://cran.r-project.org/web/checks/check_results_rbibutils.html>.

However, running the checks with -use-valgrind? on my machine gives zero errors.
I am on Ubuntu (the latest stable version), my R-devel installation was updated earlier today and I rebuild it adding the
--with-valgrind-instrumentation=2 to the call to configure.
Valgrind coming with Ubuntu is 3.5.0, so I installed its latest version from? github (also no errors).

rbibutils has no dependencies, except that testthat is used for testing.

What am I missing? Do I need to have a separate library for the instrumented R-devel version?

As a side note, is there a way to find out if R has been built with valgrind? It seems that 'capabilities()' and 'R CMD config' do not offer this information.

Thanks,
Georgi Boshnakov

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From berryboe@@enkoo| @end|ng |rom hotm@||@com  Tue Aug 10 01:20:55 2021
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Mon, 9 Aug 2021 23:20:55 +0000
Subject: [R-pkg-devel] 
 WinBuilder error: dependency version not available
In-Reply-To: <CA+emL6N19n0P+xBq+FjjUvcrg+c3xhSA0G7yiE4P-q7nBwurhA@mail.gmail.com>
References: <CA+emL6N19n0P+xBq+FjjUvcrg+c3xhSA0G7yiE4P-q7nBwurhA@mail.gmail.com>
Message-ID: <AM0PR01MB403320A518393EB3609E27BFD5F69@AM0PR01MB4033.eurprd01.prod.exchangelabs.com>


If it works on all other testing platforms, I'd just submit to CRAN and see if it works.
You may also just wait out until ggtree works on winbuilder...

Regards,
Berry



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Carrie Tribble <ctribble09 at gmail.com>
Sent: Friday, August 6, 2021 22:34
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] WinBuilder error: dependency version not available

I am in the final stages of preparing an R package
<https://github.com/cmt2/RevGadgets/tree/development> to submit to CRAN.
The package passes devtools::check() locally, GitHub Actions on multiple
systems (including windows), devtools::check_rhub() remotely, and
rhub::check_on_windows(check_args = "--force-multiarch"). However, it fails
on WinBuilder.

I'd appreciate any advice or suggestions. More details below:

You can see the full WinBuilder log here:
 https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log
<https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log>

* checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Carrie Tribble <ctribble09 at gmail.com>' New submission Possibly
> misspelled words in DESCRIPTION:
> RevBayes (3:45, 22:92)
> * checking package namespace information ... OK
> * checking package dependencies ... ERROR
> Package required and available but unsuitable version: 'ggtree' See
> section 'The DESCRIPTION file' in the 'Writing R Extensions'
> manual.
> * DONE
> Status: 1 ERROR, 1 NOTE


We require the latest version of ggtree, a bioconductor package.
Unfortunately, this latest version is necessary for our package to
function. What's the best way to get access to that version of ggtree on
WinBuilder?

You can see the log for the successful rhub check_on_windows run here:
https://builder.r-hub.io/status/RevGadgets_1.0.0.tar.gz-8367c3a164ad47379c8bd89c81347ceb,
and find the package on GitHub here:
https://github.com/cmt2/RevGadgets/tree/development.

Thank you!

-------------------
Carrie M. Tribble, PhD <http://carrietribble.weebly.com/>
Postdoctoral Researcher in the Zenil-Ferguson Lab
<https://roszenil.github.io/>
University of Hawai?i at M?noa

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue Aug 10 14:13:51 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 10 Aug 2021 14:13:51 +0200
Subject: [R-pkg-devel] "polygon edge not found" on macos-arm64
Message-ID: <CALEXWq3w7S_JU71D2DZLRRDjqgV81i3Pm0dyxj+RNV3RVFcv8A@mail.gmail.com>

Dear CRAN maintainers,

I see there's a new WARN on the recently added macos-arm64 platform
for quite a number of packages. Specifically, vignette rebuilding
fails with "polygon edge not found" (example in [1]). In addition,
there are a number of warnings like this:

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)) :
     no font could be found for family "Arial"

Is this something package authors should worry about in submissions?

[1] https://cran.r-project.org/web/checks/check_results_simmer.html

-- 
I?aki ?car


From @kw@|mmo @end|ng |rom gm@||@com  Wed Aug 11 05:25:33 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 10 Aug 2021 23:25:33 -0400
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
Message-ID: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>

Hello,


I've written two functions to emulate do while/until loops seen in other
languages, but I'm having trouble documenting its usage. The function is
typically used like:

do ({
    expr1
    expr2
    ...
}) %while% (cond)

so I want to document it something like:

do(expr) %while% (cond)
do(expr) %until% (cond)

to look like the documentation for 'while' and 'if', but R CMD check
produces a "Code/documentation mismatch" warning, complaining that the
documentation should look like:

expr %while% cond
expr %until% cond

So, my question is, is there a way to bypass the
* checking for code/documentation mismatches
portion of R CMD check, at least for one file? Some way to acknowledge that
the code and documentation will mismatch, but that's okay.


Thank you!

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Wed Aug 11 05:47:41 2021
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Wed, 11 Aug 2021 13:47:41 +1000
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
In-Reply-To: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
References: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
Message-ID: <CAJmOi+Mpp4X6vWFf+AURnRGM-BXYR7W_x2jKE3Xxy2gf4if4CA@mail.gmail.com>

What is the behaviour of %while% if not preceded by an expression wrapped
in do() ?

On Wed, 11 Aug 2021 at 1:26 pm, Andrew Simmons <akwsimmo at gmail.com> wrote:

> Hello,
>
>
> I've written two functions to emulate do while/until loops seen in other
> languages, but I'm having trouble documenting its usage. The function is
> typically used like:
>
> do ({
>     expr1
>     expr2
>     ...
> }) %while% (cond)
>
> so I want to document it something like:
>
> do(expr) %while% (cond)
> do(expr) %until% (cond)
>
> to look like the documentation for 'while' and 'if', but R CMD check
> produces a "Code/documentation mismatch" warning, complaining that the
> documentation should look like:
>
> expr %while% cond
> expr %until% cond
>
> So, my question is, is there a way to bypass the
> * checking for code/documentation mismatches
> portion of R CMD check, at least for one file? Some way to acknowledge that
> the code and documentation will mismatch, but that's okay.
>
>
> Thank you!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Aug 11 06:02:58 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 11 Aug 2021 00:02:58 -0400
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
In-Reply-To: <CAJmOi+Mpp4X6vWFf+AURnRGM-BXYR7W_x2jKE3Xxy2gf4if4CA@mail.gmail.com>
References: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
 <CAJmOi+Mpp4X6vWFf+AURnRGM-BXYR7W_x2jKE3Xxy2gf4if4CA@mail.gmail.com>
Message-ID: <CAPcHnpR-2hJFR2cRsDo8_7V9fRpBZq1N0agY8cq57yPMXRHybg@mail.gmail.com>

When not preceded by an expression wrapped in do(), %while% would throw an
error "do while loop must begin with 'do'". The function %while% looks like

`%while%` <- function (expr, cond)
invisible(.Call(C_do.while, substitute(expr), substitute(cond),
parent.frame()))

and the corresponding C function looks like

SEXP do_dowhile(SEXP expr, SEXP cond, SEXP rho)
{
    /* we're looking for an expression of the form
       do ( expr )
       do ( { expr1 ; expr2 } )

       there must NOT be a tag on the second item, the expression within
'do'
       that is, we reject expressions of the form

       do (var = expr)
       do (var = { expr1 ; expr2 } ) */
    if (TYPEOF(expr) != LANGSXP || CAR(expr) != install("do"))
        error("do while loop must begin with 'do'");
    else if (xlength(expr) != 2 || !isNull(TAG(CDR(expr))))
        error("invalid 'expr'");

The 'do' part of the expression is irrelevant and later removed, it's only
required because it makes the syntax look more like other languages.
So the proper way to use %while% is
expr %while% cond
where expr is wrapped with do(), but I think it would be far more
understandable in the usage documentation to have it look like
do(expr) %while% (cond)

If it helps at all with context, I'll provide the R and C scripts I'm using.

On Tue, Aug 10, 2021 at 11:47 PM Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> What is the behaviour of %while% if not preceded by an expression wrapped
> in do() ?
>
> On Wed, 11 Aug 2021 at 1:26 pm, Andrew Simmons <akwsimmo at gmail.com> wrote:
>
>> Hello,
>>
>>
>> I've written two functions to emulate do while/until loops seen in other
>> languages, but I'm having trouble documenting its usage. The function is
>> typically used like:
>>
>> do ({
>>     expr1
>>     expr2
>>     ...
>> }) %while% (cond)
>>
>> so I want to document it something like:
>>
>> do(expr) %while% (cond)
>> do(expr) %until% (cond)
>>
>> to look like the documentation for 'while' and 'if', but R CMD check
>> produces a "Code/documentation mismatch" warning, complaining that the
>> documentation should look like:
>>
>> expr %while% cond
>> expr %until% cond
>>
>> So, my question is, is there a way to bypass the
>> * checking for code/documentation mismatches
>> portion of R CMD check, at least for one file? Some way to acknowledge
>> that
>> the code and documentation will mismatch, but that's okay.
>>
>>
>> Thank you!
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Aug 11 08:52:27 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 11 Aug 2021 08:52:27 +0200
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
In-Reply-To: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
References: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
Message-ID: <24851.29611.869540.598846@stat.math.ethz.ch>

> Hello,
> 
> I've written two functions to emulate do while/until loops seen in other
> languages, but I'm having trouble documenting its usage. The function is
> typically used like:
> 
> do ({
>     expr1
>     expr2
>     ...
> }) %while% (cond)

I understand that you did *not* ask .. but really
why don't you want to use R's own
builtin, fast, well documented, present everywhere *and* simpler syntax

while(cond) {
  expr1
  expr2
  ...
}	

???

and also

   repeat {
     expr1
     expr2
     ....
     if(cond) break
   }

instead of your   %until%  below?


> so I want to document it something like:
> 
> do(expr) %while% (cond)
> do(expr) %until% (cond)
> 
> to look like the documentation for 'while' and 'if', but R CMD check
> produces a "Code/documentation mismatch" warning, complaining that the
> documentation should look like:
> 
> expr %while% cond
> expr %until% cond
> 
> So, my question is, is there a way to bypass the
> * checking for code/documentation mismatches
> portion of R CMD check, at least for one file? Some way to acknowledge that
> the code and documentation will mismatch, but that's okay.
> 
> 
> Thank you!


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Aug 11 11:53:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 11 Aug 2021 05:53:28 -0400
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
In-Reply-To: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
References: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
Message-ID: <58dfbc37-9644-0c47-41dd-ee44a3c891b9@gmail.com>

On 10/08/2021 11:25 p.m., Andrew Simmons wrote:
> Hello,
> 
> 
> I've written two functions to emulate do while/until loops seen in other
> languages, but I'm having trouble documenting its usage. The function is
> typically used like:
> 
> do ({
>      expr1
>      expr2
>      ...
> }) %while% (cond)
> 
> so I want to document it something like:
> 
> do(expr) %while% (cond)
> do(expr) %until% (cond)
> 
> to look like the documentation for 'while' and 'if', but R CMD check
> produces a "Code/documentation mismatch" warning, complaining that the
> documentation should look like:
> 
> expr %while% cond
> expr %until% cond
> 
> So, my question is, is there a way to bypass the
> * checking for code/documentation mismatches
> portion of R CMD check, at least for one file? Some way to acknowledge that
> the code and documentation will mismatch, but that's okay.
> 

I think the answer is no.  What I'd do is name the first argument to the 
operator in a way to indicate that it must be the result of do() and the 
second to indicate it must be parenthesized (if that's a 
requirement...), e.g.

`%while%` <- function(do_expr, parenthesized_cond) { ... }

and then document as

do_expr %while% parenthesized_cond

in the \usage section, and document standard usage in the \details 
section and examples.

Duncan Murdoch


From @kw@|mmo @end|ng |rom gm@||@com  Wed Aug 11 18:13:39 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 11 Aug 2021 12:13:39 -0400
Subject: [R-pkg-devel] Workaround for code/documentation mismatch
In-Reply-To: <58dfbc37-9644-0c47-41dd-ee44a3c891b9@gmail.com>
References: <CAPcHnpS8EHAJ0ztwA_uEuBzSCi3TtmSdXz1Ak8+gCEwWMk61Hw@mail.gmail.com>
 <58dfbc37-9644-0c47-41dd-ee44a3c891b9@gmail.com>
Message-ID: <CAPcHnpQXEg430Rbc=ROzG9XJFOGeKzQpVZ2-6O7yaWTC2LM98w@mail.gmail.com>

Hello,


@Martin Maechler:
%until% and %while% use R's builtin repeat function. Something like

do(expr) %until% (cond)
repeat {
    expr
    if (cond)
        break
}

are identical. After %until% and %while% check the arguments look correct,
it makes a call to repeat like above and evaluates it in the same
environment as %until% or %while% was called from. I haven't completely
reinvented the wheel here.
%until% and %while% are slower than repeat, but only by a microsecond or
two.
Admittedly, my documentation for %until% and %while% is dog water compared
to repeat, but I've tried to make it as clear as possible in my
documentation that %until% and %while% use repeat,
and included the link to the documentation for repeat.


@Duncan Murdoch:
I'll try renaming the arguments, thank you for the suggestion. Also, I
didn't realize you could put R comments in \usage with #, so I might try
that as well, thank you!

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Aug 11 19:42:49 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 11 Aug 2021 13:42:49 -0400
Subject: [R-pkg-devel] advice on reminders/nags to CRAN maintainers
Message-ID: <8b9dcc11-092e-e1a6-7d60-60551c5b95ee@gmail.com>


   Wondering about etiquette/if I should start over again with a package 
submission. tl;dr, the package has been 'waiting' since 30 July (I 
responded the same day to the queries that were sent).

   For what it's worth, the 'pretest-waiting-recheck' message below was 
sent from *a* CRAN maintainer, but hitting "reply-all" in my mail client 
only included the "CRAN-submissions at -rproject.org" address. Maybe my 
mail client is misconfigured ? supposed to respond to the sender as well 
as the Reply-To: address? I could poke the individual CM who sent it 
personally, but I'm loath to do that unnecessarily ...


    thoughts?
    Ben Bolker

---

(Some previous history omitted here for brevity; there had been a bit of 
back-and-forth about this package previously.)

   07/30: Submitted version 1.1.2.2 of the glmmTMB package.  Got a 
"pretest-waiting-recheck" message asking us to confirm that we had 
addressed issues; I responded the same day.

   08/04, 08/06: Tried to confirm that the message was received (maybe I 
was too pushy?) -- no answer that I have seen.

   The CRAN queue in general seems to be moving OK 
(foghorn::cran_incoming(), 'archive' folder filtered out, sorted by 
time: 57 total, 45 from today or yesterday).

    package      version    cran_folder time
    <chr>        <pckg_vrs> <chr>       <dttm>
  1 BIRDS        0.2.1      pending     2021-07-21 17:01:00
  2 glmmTMB      1.1.2.2    waiting     2021-07-30 20:29:00
  3 PEcAn.logger 1.8.0      waiting     2021-08-05 18:58:00
  4 IPDFileCheck 0.7.4      waiting     2021-08-06 11:15:00
  5 R6           2.5.1      waiting     2021-08-06 22:27:00
  6 ibdreg       0.3.3      pending     2021-08-06 23:41:00
  7 mark         0.2.0      waiting     2021-08-08 23:25:00
  8 DataGraph    1.2.3      pending     2021-08-09 03:11:00
  9 tibble       3.1.4      waiting     2021-08-09 05:46:00


From r@c@rtwr|ght @end|ng |rom gm@||@com  Fri Aug 13 00:41:09 2021
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Thu, 12 Aug 2021 15:41:09 -0700
Subject: [R-pkg-devel] advice on reminders/nags to CRAN maintainers
In-Reply-To: <8b9dcc11-092e-e1a6-7d60-60551c5b95ee@gmail.com>
References: <8b9dcc11-092e-e1a6-7d60-60551c5b95ee@gmail.com>
Message-ID: <CALOkxux0fF45bPywwVY4soSG-=ZXcpS4MgE-the4UKyOWneXsA@mail.gmail.com>

I'm also waiting several weeks for an update to be approved or sent back to
me.

In the meantime, the package has been archived by CRAN because the update
--- which fixes issues identified by CRAN --- hasn't been approved yet.

On Wed, Aug 11, 2021 at 10:44 AM Ben Bolker <bbolker at gmail.com> wrote:

>
>    Wondering about etiquette/if I should start over again with a package
> submission. tl;dr, the package has been 'waiting' since 30 July (I
> responded the same day to the queries that were sent).
>
>    For what it's worth, the 'pretest-waiting-recheck' message below was
> sent from *a* CRAN maintainer, but hitting "reply-all" in my mail client
> only included the "CRAN-submissions at -rproject.org" address. Maybe my
> mail client is misconfigured ? supposed to respond to the sender as well
> as the Reply-To: address? I could poke the individual CM who sent it
> personally, but I'm loath to do that unnecessarily ...
>
>
>     thoughts?
>     Ben Bolker
>
> ---
>
> (Some previous history omitted here for brevity; there had been a bit of
> back-and-forth about this package previously.)
>
>    07/30: Submitted version 1.1.2.2 of the glmmTMB package.  Got a
> "pretest-waiting-recheck" message asking us to confirm that we had
> addressed issues; I responded the same day.
>
>    08/04, 08/06: Tried to confirm that the message was received (maybe I
> was too pushy?) -- no answer that I have seen.
>
>    The CRAN queue in general seems to be moving OK
> (foghorn::cran_incoming(), 'archive' folder filtered out, sorted by
> time: 57 total, 45 from today or yesterday).
>
>     package      version    cran_folder time
>     <chr>        <pckg_vrs> <chr>       <dttm>
>   1 BIRDS        0.2.1      pending     2021-07-21 17:01:00
>   2 glmmTMB      1.1.2.2    waiting     2021-07-30 20:29:00
>   3 PEcAn.logger 1.8.0      waiting     2021-08-05 18:58:00
>   4 IPDFileCheck 0.7.4      waiting     2021-08-06 11:15:00
>   5 R6           2.5.1      waiting     2021-08-06 22:27:00
>   6 ibdreg       0.3.3      pending     2021-08-06 23:41:00
>   7 mark         0.2.0      waiting     2021-08-08 23:25:00
>   8 DataGraph    1.2.3      pending     2021-08-09 03:11:00
>   9 tibble       3.1.4      waiting     2021-08-09 05:46:00
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!IKRxdwAv5BmarQ!NzcnjtD4aA9RM4vGmX2bS0bIcMbZwWFtOq4BE3pEPbZDl4yRkVwFt6-lYRLwd7va$
>

	[[alternative HTML version deleted]]


From p@kr|v|t@ky @end|ng |rom un@w@edu@@u  Fri Aug 13 05:06:33 2021
From: p@kr|v|t@ky @end|ng |rom un@w@edu@@u (Pavel N. Krivitsky)
Date: Fri, 13 Aug 2021 13:06:33 +1000
Subject: [R-pkg-devel] How to debug build-time dynamic documentation issues?
Message-ID: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>

Dear All,

TL;DR: Is there a way to get a full traceback and/or frame dump for
errors that occur in build-time and install-time \Sexpr{} calls in R
documentation files?


# Context

I am working on a package (
https://github.com/joycecheng/ergm/tree/ergm-term-index ) whose
documentation includes a number of \Sexpr[stage=render]{} calls, and I
am getting reports that some Windows users are not able to install the
package because they get errors when the HTML indices are being built.

Complicating the matter is that this only seems to affect some Windows
systems but not others.

Unfortunately, R's output is not very helpful in identifying the
problem beyond the help file in which it had occurred and the terminal
error message. For example, on those systems with R 4.1.0:

remotes::install_github("joycecheng/ergm at ergm-term-index")

gives (for those users):

[SNIP]
ergmConstraint html 
Error: incorrect number of dimensions
- removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
-----------------------------------
ERROR: package installation failed
Error: Failed to install 'ergm' from GitHub:
System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr (last
10 lines):
E> ergm.exact html 
E> ergm.geodistdist html 
E> ergm.getnetwork html 
E> ergm.godfather html 
E> ergm.mple html 
E> ergmConstraint html 
E> Error: incorrect number of dimensions
E> * removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
E> -----------------------------------
E> ERROR: package installation failed


# What I've tried so far

 * Running the code in the \Sexpr{} manually in an R session doesn't
   reproduce the error: this seems to be a build/install-time issue.
 * options(error=...) does the wrong thing, because the \Sexpr{} code
   is run inside tryCatch(), so what gets traced and/or dumped is
   catching code, not the original error.

Thanks in advance,
Pavel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Aug 13 08:46:34 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 13 Aug 2021 06:46:34 +0000
Subject: [R-pkg-devel] 
 How to debug build-time dynamic documentation issues?
In-Reply-To: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>
References: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>
Message-ID: <LOYP265MB201542DC5D445FBE0AFDB925AEFA9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

It may be worth checking if the users can install the package if you send them (1) tarball or (2) a binary build (if you don't have Windows, win-builder creates one).

A user had a similar issue with a package

Get Outlook for Android<https://aka.ms/AAb9ysg>
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Pavel N. Krivitsky <p.krivitsky at unsw.edu.au>
Sent: Friday, August 13, 2021 4:06:33 AM
To: R Package Devel <r-package-devel at r-project.org>
Subject: [R-pkg-devel] How to debug build-time dynamic documentation issues?

Dear All,

TL;DR: Is there a way to get a full traceback and/or frame dump for
errors that occur in build-time and install-time \Sexpr{} calls in R
documentation files?


# Context

I am working on a package (
https://github.com/joycecheng/ergm/tree/ergm-term-index ) whose
documentation includes a number of \Sexpr[stage=render]{} calls, and I
am getting reports that some Windows users are not able to install the
package because they get errors when the HTML indices are being built.

Complicating the matter is that this only seems to affect some Windows
systems but not others.

Unfortunately, R's output is not very helpful in identifying the
problem beyond the help file in which it had occurred and the terminal
error message. For example, on those systems with R 4.1.0:

remotes::install_github("joycecheng/ergm at ergm-term-index")

gives (for those users):

[SNIP]
ergmConstraint html
Error: incorrect number of dimensions
- removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
-----------------------------------
ERROR: package installation failed
Error: Failed to install 'ergm' from GitHub:
System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr (last
10 lines):
E> ergm.exact html
E> ergm.geodistdist html
E> ergm.getnetwork html
E> ergm.godfather html
E> ergm.mple html
E> ergmConstraint html
E> Error: incorrect number of dimensions
E> * removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
E> -----------------------------------
E> ERROR: package installation failed


# What I've tried so far

 * Running the code in the \Sexpr{} manually in an R session doesn't
   reproduce the error: this seems to be a build/install-time issue.
 * options(error=...) does the wrong thing, because the \Sexpr{} code
   is run inside tryCatch(), so what gets traced and/or dumped is
   catching code, not the original error.

Thanks in advance,
Pavel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Aug 13 09:00:52 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 13 Aug 2021 07:00:52 +0000
Subject: [R-pkg-devel] 
 How to debug build-time dynamic documentation issues?
In-Reply-To: <LOYP265MB201542DC5D445FBE0AFDB925AEFA9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>
 <LOYP265MB201542DC5D445FBE0AFDB925AEFA9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <LOYP265MB20155C15F8A7F1FD63D40392AEFA9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

(Sorry for the previous messages, accidentally sent it prematurely while typing on the phone.)

It may be worth checking if the users can install the package if you send them (1) tarball or (2) a binary build (if you don't have Windows, win-builder creates one). A user had a similar issue with a package of mine and (1) didn't work but (2) did. On my Windows laptop I had  similar issue and resolved it by updating the packages in the current  installation. 
The reason for the problem seemed to be inconsistent versions of some installed packages, almost certainly Matrix and matrixStats in my case.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Georgi Boshnakov
Sent: 13 August 2021 07:47
To: Pavel N. Krivitsky <p.krivitsky at unsw.edu.au>; R Package Devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How to debug build-time dynamic documentation issues?

It may be worth checking if the users can install the package if you send them (1) tarball or (2) a binary build (if you don't have Windows, win-builder creates one).

A user had a similar issue with a package

Get Outlook for Android<https://aka.ms/AAb9ysg> ________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Pavel N. Krivitsky <p.krivitsky at unsw.edu.au>
Sent: Friday, August 13, 2021 4:06:33 AM
To: R Package Devel <r-package-devel at r-project.org>
Subject: [R-pkg-devel] How to debug build-time dynamic documentation issues?

Dear All,

TL;DR: Is there a way to get a full traceback and/or frame dump for errors that occur in build-time and install-time \Sexpr{} calls in R documentation files?


# Context

I am working on a package (
https://github.com/joycecheng/ergm/tree/ergm-term-index ) whose documentation includes a number of \Sexpr[stage=render]{} calls, and I am getting reports that some Windows users are not able to install the package because they get errors when the HTML indices are being built.

Complicating the matter is that this only seems to affect some Windows systems but not others.

Unfortunately, R's output is not very helpful in identifying the problem beyond the help file in which it had occurred and the terminal error message. For example, on those systems with R 4.1.0:

remotes::install_github("joycecheng/ergm at ergm-term-index")

gives (for those users):

[SNIP]
ergmConstraint html
Error: incorrect number of dimensions
- removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
-----------------------------------
ERROR: package installation failed
Error: Failed to install 'ergm' from GitHub:
System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr (last
10 lines):
E> ergm.exact html
E> ergm.geodistdist html
E> ergm.getnetwork html
E> ergm.godfather html
E> ergm.mple html
E> ergmConstraint html
E> Error: incorrect number of dimensions
E> * removing
'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
E> -----------------------------------
E> ERROR: package installation failed


# What I've tried so far

 * Running the code in the \Sexpr{} manually in an R session doesn't
   reproduce the error: this seems to be a build/install-time issue.
 * options(error=...) does the wrong thing, because the \Sexpr{} code
   is run inside tryCatch(), so what gets traced and/or dumped is
   catching code, not the original error.

Thanks in advance,
Pavel

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Aug 13 11:38:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 13 Aug 2021 05:38:00 -0400
Subject: [R-pkg-devel] 
 How to debug build-time dynamic documentation issues?
In-Reply-To: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>
References: <5f6b7eae4db02d9eabb990520d3d5c27d90ae5ff.camel@unsw.edu.au>
Message-ID: <e88f9a50-73ec-64d0-2f50-af3e17ce8f5d@gmail.com>

I'm not certain this will give you enough debug information, but you can 
run R CMD build in the current session using the internal function 
tools::.build_packages, e.g.

   R CMD build --no-manual testpkg

would be run as

   tools:::.build_packages(c("--no-manual", "testpkg"))

This removes one level of processes, but the tryCatch() and processes 
run within this function are still there, so it might not be sufficient 
for you.  In that case the only solution might be to add debugging code 
into R and recompile it.

The similar command for INSTALL is tools:::.install_packages.

Duncan Murdoch

On 12/08/2021 11:06 p.m., Pavel N. Krivitsky wrote:
> Dear All,
> 
> TL;DR: Is there a way to get a full traceback and/or frame dump for
> errors that occur in build-time and install-time \Sexpr{} calls in R
> documentation files?
> 
> 
> # Context
> 
> I am working on a package (
> https://github.com/joycecheng/ergm/tree/ergm-term-index ) whose
> documentation includes a number of \Sexpr[stage=render]{} calls, and I
> am getting reports that some Windows users are not able to install the
> package because they get errors when the HTML indices are being built.
> 
> Complicating the matter is that this only seems to affect some Windows
> systems but not others.
> 
> Unfortunately, R's output is not very helpful in identifying the
> problem beyond the help file in which it had occurred and the terminal
> error message. For example, on those systems with R 4.1.0:
> 
> remotes::install_github("joycecheng/ergm at ergm-term-index")
> 
> gives (for those users):
> 
> [SNIP]
> ergmConstraint html
> Error: incorrect number of dimensions
> - removing
> 'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
> -----------------------------------
> ERROR: package installation failed
> Error: Failed to install 'ergm' from GitHub:
> System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr (last
> 10 lines):
> E> ergm.exact html
> E> ergm.geodistdist html
> E> ergm.getnetwork html
> E> ergm.godfather html
> E> ergm.mple html
> E> ergmConstraint html
> E> Error: incorrect number of dimensions
> E> * removing
> 'C:/Users/[SNIP]/AppData/Local/Temp/RtmpURZYMP/Rinst1144e5a2698/ergm'
> E> -----------------------------------
> E> ERROR: package installation failed
> 
> 
> # What I've tried so far
> 
>   * Running the code in the \Sexpr{} manually in an R session doesn't
>     reproduce the error: this seems to be a build/install-time issue.
>   * options(error=...) does the wrong thing, because the \Sexpr{} code
>     is run inside tryCatch(), so what gets traced and/or dumped is
>     catching code, not the original error.
> 
> Thanks in advance,
> Pavel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|eruete @end|ng |rom gm@||@com  Fri Aug 13 10:33:34 2021
From: @|eruete @end|ng |rom gm@||@com (Alejandro Ruete)
Date: Fri, 13 Aug 2021 10:33:34 +0200
Subject: [R-pkg-devel] advice on reminders/nags to CRAN maintainers
In-Reply-To: <CALOkxux0fF45bPywwVY4soSG-=ZXcpS4MgE-the4UKyOWneXsA@mail.gmail.com>
References: <8b9dcc11-092e-e1a6-7d60-60551c5b95ee@gmail.com>
 <CALOkxux0fF45bPywwVY4soSG-=ZXcpS4MgE-the4UKyOWneXsA@mail.gmail.com>
Message-ID: <CABCaC+YRDsu-V9vr4cfcf6LntFsm7k81TRfcbMjmNMujuMqbLg@mail.gmail.com>

Same here. I did the mistake to reply directly and now I am blacklisted
from one of the CM email list.

Alejandro




Alejandro Ruete
about.me/alejandro.ruete
  <http://about.me/alejandro.ruete>


On Fri, 13 Aug 2021 at 00:42, Reed A. Cartwright <racartwright at gmail.com>
wrote:

> I'm also waiting several weeks for an update to be approved or sent back to
> me.
>
> In the meantime, the package has been archived by CRAN because the update
> --- which fixes issues identified by CRAN --- hasn't been approved yet.
>
> On Wed, Aug 11, 2021 at 10:44 AM Ben Bolker <bbolker at gmail.com> wrote:
>
> >
> >    Wondering about etiquette/if I should start over again with a package
> > submission. tl;dr, the package has been 'waiting' since 30 July (I
> > responded the same day to the queries that were sent).
> >
> >    For what it's worth, the 'pretest-waiting-recheck' message below was
> > sent from *a* CRAN maintainer, but hitting "reply-all" in my mail client
> > only included the "CRAN-submissions at -rproject.org" address. Maybe my
> > mail client is misconfigured ? supposed to respond to the sender as well
> > as the Reply-To: address? I could poke the individual CM who sent it
> > personally, but I'm loath to do that unnecessarily ...
> >
> >
> >     thoughts?
> >     Ben Bolker
> >
> > ---
> >
> > (Some previous history omitted here for brevity; there had been a bit of
> > back-and-forth about this package previously.)
> >
> >    07/30: Submitted version 1.1.2.2 of the glmmTMB package.  Got a
> > "pretest-waiting-recheck" message asking us to confirm that we had
> > addressed issues; I responded the same day.
> >
> >    08/04, 08/06: Tried to confirm that the message was received (maybe I
> > was too pushy?) -- no answer that I have seen.
> >
> >    The CRAN queue in general seems to be moving OK
> > (foghorn::cran_incoming(), 'archive' folder filtered out, sorted by
> > time: 57 total, 45 from today or yesterday).
> >
> >     package      version    cran_folder time
> >     <chr>        <pckg_vrs> <chr>       <dttm>
> >   1 BIRDS        0.2.1      pending     2021-07-21 17:01:00
> >   2 glmmTMB      1.1.2.2    waiting     2021-07-30 20:29:00
> >   3 PEcAn.logger 1.8.0      waiting     2021-08-05 18:58:00
> >   4 IPDFileCheck 0.7.4      waiting     2021-08-06 11:15:00
> >   5 R6           2.5.1      waiting     2021-08-06 22:27:00
> >   6 ibdreg       0.3.3      pending     2021-08-06 23:41:00
> >   7 mark         0.2.0      waiting     2021-08-08 23:25:00
> >   8 DataGraph    1.2.3      pending     2021-08-09 03:11:00
> >   9 tibble       3.1.4      waiting     2021-08-09 05:46:00
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> >
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!IKRxdwAv5BmarQ!NzcnjtD4aA9RM4vGmX2bS0bIcMbZwWFtOq4BE3pEPbZDl4yRkVwFt6-lYRLwd7va$
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@v|d @end|ng |rom prec|@|onmethod@@guru  Mon Aug 16 11:05:54 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Mon, 16 Aug 2021 09:05:54 +0000
Subject: [R-pkg-devel] UX for "WARNING unable to translate to native
 encoding"?
Message-ID: <946F6873-4056-4AF6-9602-665CDE0E01B3@precisionmethods.guru>

Whereas Unicode U+00d7 (times), U+00b1 (plus-minus) and U+03bc (mu) have equivalents in Latin-1 encoding, and I have used these without difficulty in strings, neither U+2206 (INCREMENT) nor U+0394 (Greek Delta) does:
https://en.wikipedia.org/wiki/ISO/IEC_8859-1
Consequently, my attempt to use a parameter named '\u2206t' as in the following

>         attr(path_list,'performance') <- self$report(J = length(path_list)
>                                                    , t1 = round(t1)
>                                                    , t2 = round(t2)
>                                                    , "\u2206t" = round(t2 - t1)
>                                                      )

generates the following WARNING on Windows R-CMD-check:

> checking R files for syntax errors ... WARNING
  Warning in file 'R/cpe.R':
    unable to translate '<U+2206>t' to native encoding

From this article by Tomas Kalibera
https://developer.r-project.org/Blog/public/2020/05/02/utf-8-support-on-windows/,
I gather that quite often problems such as these won't actually bubble up to the user experience.
Is this one such case? Or would this WARNING be fatal to a CRAN submission?



From kry|ov@r00t @end|ng |rom gm@||@com  Mon Aug 16 12:42:59 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 16 Aug 2021 12:42:59 +0200
Subject: [R-pkg-devel] UX for "WARNING unable to translate to native
 encoding"?
In-Reply-To: <946F6873-4056-4AF6-9602-665CDE0E01B3@precisionmethods.guru>
References: <946F6873-4056-4AF6-9602-665CDE0E01B3@precisionmethods.guru>
Message-ID: <20210816124259.75611758@trisector>

On Mon, 16 Aug 2021 09:05:54 +0000
David Norris <david at precisionmethods.guru> wrote:

> Unicode U+00d7 (times), U+00b1 (plus-minus) and U+03bc (mu) have
> equivalents in Latin-1 encoding, and I have used these without
> difficulty in strings, neither U+2206 (INCREMENT) nor U+0394 (Greek
> Delta) does

But not in some other locale encodings on Windows (e.g. CP-1251), nor
in some single-byte locale encodings on *nix-like systems (e.g.
ru_RU.KOI8-R), which are admittedly used much rarer nowadays than on
Windows. Unless I'm mistaken, the "\u2206t" in your example needs to
become a symbol, and symbols are always translated into the locale
encoding [1] [2].

I would expect this warning to be a problem for CRAN, but I'm just
another package developer, so I could be wrong.

-- 
Best regards,
Ivan

[1]
https://github.com/r-devel/r-svn/blob/9b13376f5e630f584a68d3815da004dc79c059a3/src/main/sysutils.c#L1046-L1052

[2]
https://github.com/r-devel/r-svn/blob/9b13376f5e630f584a68d3815da004dc79c059a3/src/main/sysutils.c#L842


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Aug 16 14:48:32 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 16 Aug 2021 14:48:32 +0200
Subject: [R-pkg-devel] UX for "WARNING unable to translate to native
 encoding"?
In-Reply-To: <20210816124259.75611758@trisector>
References: <946F6873-4056-4AF6-9602-665CDE0E01B3@precisionmethods.guru>
 <20210816124259.75611758@trisector>
Message-ID: <deaf5d3e-40aa-6fed-50fc-cd6ccc145588@gmail.com>


On 8/16/21 12:42 PM, Ivan Krylov wrote:
> On Mon, 16 Aug 2021 09:05:54 +0000
> David Norris <david at precisionmethods.guru> wrote:
>
>> Unicode U+00d7 (times), U+00b1 (plus-minus) and U+03bc (mu) have
>> equivalents in Latin-1 encoding, and I have used these without
>> difficulty in strings, neither U+2206 (INCREMENT) nor U+0394 (Greek
>> Delta) does
> But not in some other locale encodings on Windows (e.g. CP-1251), nor
> in some single-byte locale encodings on *nix-like systems (e.g.
> ru_RU.KOI8-R), which are admittedly used much rarer nowadays than on
> Windows. Unless I'm mistaken, the "\u2206t" in your example needs to
> become a symbol, and symbols are always translated into the locale
> encoding [1] [2].
>
> I would expect this warning to be a problem for CRAN, but I'm just
> another package developer, so I could be wrong.
>
Yes, this is a problem. Only ASCII characters should be used in symbol 
names (in R packages), as they can be represented in every (supported) 
locale.

Some characters would be best-fitted by Windows (replaced by other 
similar characters) during translation to native encoding, if they are 
not representable directly, but that can produce surprising results and 
should not be relied on, definitely not in packages.

Best
Tomas


From g@ngr@@_pooj@ @end|ng |rom ||||y@com  Mon Aug 16 17:37:09 2021
From: g@ngr@@_pooj@ @end|ng |rom ||||y@com (Pooja Gangras)
Date: Mon, 16 Aug 2021 15:37:09 +0000
Subject: [R-pkg-devel] FW: [EXTERNAL] [CRAN-pretest-archived] CRAN
 submission surfaltr 1.0.0.9000
In-Reply-To: <01d792ab$Blat.v3.2.16$7a11f435$100401968@mail.statistik.tu-dortmund.de>
References: <20210816142209.C9B09162EA9@xmpalantir.wu.ac.at>
 <01d792ab$Blat.v3.2.16$7a11f435$100401968@mail.statistik.tu-dortmund.de>
Message-ID: <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>

Hi all,

PFA the pre-check results for my package surfaltr from CRAN. I am having troubles with a package dependency on Debian that I am not able to fix. 2 functions in my package require a Bioconductor package msa (https://bioconductor.org/packages/release/bioc/html/msa.html). To deal with this error, I tried the following solution of adding a call to BiocManager and also including a code for msa installation but it did not help:

#' @importFrom BiocManager install
#' @import msa
.
.
.
Foo() {
if (!requireNamespace("msa", quietly = TRUE)){
    BiocManager::install("msa")}
}

How do I solve the problem so that I don't generate this error with Debian?

Thank you,
Pooja


Pooja Gangras, Ph.D.
Postdoctoral Research Scientist - RNA Therapeutics
Eli Lilly and Company
Lilly Corporate Center, Indianapolis IN 46285 U.S.A.
Office phone number: (317) 651-0589
Cellphone number: (614) 906-0940
gangras_pooja at lilly.com | www.lilly.com


CONFIDENTIALITY NOTICE: This email message (including all attachments) is for the sole use of the intended recipient(s) and may contain confidential information. Any unauthorized review, use, disclosure, copying or distribution is strictly prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.

-----Original Message-----
From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de> 
Sent: Monday, August 16, 2021 10:32 AM
To: Pooja Gangras <gangras_pooja at lilly.com>
Cc: CRAN-submissions at R-project.org
Subject: [EXTERNAL] [CRAN-pretest-archived] CRAN submission surfaltr 1.0.0.9000

EXTERNAL EMAIL: Use caution before replying, clicking links, and opening attachments.

Dear maintainer,
 
package surfaltr_1.0.0.9000.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Windows/00check.log>
Status: 1 NOTE
Debian: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Debian/00check.log>
Status: 1 ERROR, 1 NOTE
 

 
Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
 
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/>
The files will be removed after roughly 7 days.
 
No strong reverse dependencies to be checked.
 
Best regards,
CRAN teams' auto-check service

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210816/45e48262/attachment.log>

From d@v|d @end|ng |rom prec|@|onmethod@@guru  Mon Aug 16 17:38:09 2021
From: d@v|d @end|ng |rom prec|@|onmethod@@guru (David Norris)
Date: Mon, 16 Aug 2021 15:38:09 +0000
Subject: [R-pkg-devel] UX for "WARNING unable to translate to native
 encoding"?
In-Reply-To: <deaf5d3e-40aa-6fed-50fc-cd6ccc145588@gmail.com>
References: <946F6873-4056-4AF6-9602-665CDE0E01B3@precisionmethods.guru>
 <20210816124259.75611758@trisector>
 <deaf5d3e-40aa-6fed-50fc-cd6ccc145588@gmail.com>
Message-ID: <C57A7A57-3185-492A-B955-9F45C5D6E9BC@precisionmethods.guru>

Thanks to you both, Ivan and Tomas. Capital D it is, then.
-David

From: Tomas Kalibera <tomas.kalibera at gmail.com>
Date: Monday, August 16, 2021 at 8:48 AM
To: Ivan Krylov <krylov.r00t at gmail.com>, David Norris <david at precisionmethods.guru>
Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] UX for "WARNING unable to translate to native encoding"?


On 8/16/21 12:42 PM, Ivan Krylov wrote:
On Mon, 16 Aug 2021 09:05:54 +0000
David Norris <mailto:david at precisionmethods.guru> wrote:

Unicode U+00d7 (times), U+00b1 (plus-minus) and U+03bc (mu) have
equivalents in Latin-1 encoding, and I have used these without
difficulty in strings, neither U+2206 (INCREMENT) nor U+0394 (Greek
Delta) does
But not in some other locale encodings on Windows (e.g. CP-1251), nor
in some single-byte locale encodings on *nix-like systems (e.g.
ru_RU.KOI8-R), which are admittedly used much rarer nowadays than on
Windows. Unless I'm mistaken, the "\u2206t" in your example needs to
become a symbol, and symbols are always translated into the locale
encoding [1] [2].

I would expect this warning to be a problem for CRAN, but I'm just
another package developer, so I could be wrong.

Yes, this is a problem. Only ASCII characters should be used in symbol 
names (in R packages), as they can be represented in every (supported) 
locale.

Some characters would be best-fitted by Windows (replaced by other 
similar characters) during translation to native encoding, if they are 
not representable directly, but that can produce surprising results and 
should not be relied on, definitely not in packages.

Best
Tomas




From @eb@meyer @end|ng |rom |@u@de  Mon Aug 16 20:48:51 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 16 Aug 2021 20:48:51 +0200
Subject: [R-pkg-devel] FW: [EXTERNAL] [CRAN-pretest-archived] CRAN
 submission surfaltr 1.0.0.9000
In-Reply-To: <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>
References: <20210816142209.C9B09162EA9@xmpalantir.wu.ac.at>
 <01d792ab$Blat.v3.2.16$7a11f435$100401968@mail.statistik.tu-dortmund.de>
 <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>
Message-ID: <29ffcc92-634f-3b1a-8293-626a106ec4d9@fau.de>

Packages on CRAN can depend on released packages from both CRAN and 
Bioconductor.

I don't know why "msa" is missing on the Debian check machine. The check 
results of another CRAN package that suggests "msa" indicate that this 
package is currently unavailable on all Linux, Solaris and macOS 
machines of the CRAN check farm: 
https://cran.r-project.org/web/checks/check_results_bio3d.html

Maybe this is a temporary problem? You could try resubmitting in a few days.

I think you should remove the automatic package installation from your 
functions; they should not write to the user's home filespace without 
consent.
You should probably also avoid this NOTE when submitting to CRAN:

 > Version contains large components (1.0.0.9000)

Best regards,

	Sebastian Meyer


Am 16.08.21 um 17:37 schrieb Pooja Gangras via R-package-devel:
> Hi all,
> 
> PFA the pre-check results for my package surfaltr from CRAN. I am having troubles with a package dependency on Debian that I am not able to fix. 2 functions in my package require a Bioconductor package msa (https://bioconductor.org/packages/release/bioc/html/msa.html). To deal with this error, I tried the following solution of adding a call to BiocManager and also including a code for msa installation but it did not help:
> 
> #' @importFrom BiocManager install
> #' @import msa
> .
> .
> .
> Foo() {
> if (!requireNamespace("msa", quietly = TRUE)){
>      BiocManager::install("msa")}
> }
> 
> How do I solve the problem so that I don't generate this error with Debian?
> 
> Thank you,
> Pooja
> 
> 
> Pooja Gangras, Ph.D.
> Postdoctoral Research Scientist - RNA Therapeutics
> Eli Lilly and Company
> Lilly Corporate Center, Indianapolis IN 46285 U.S.A.
> Office phone number: (317) 651-0589
> Cellphone number: (614) 906-0940
> gangras_pooja at lilly.com | www.lilly.com
> 
> 
> CONFIDENTIALITY NOTICE: This email message (including all attachments) is for the sole use of the intended recipient(s) and may contain confidential information. Any unauthorized review, use, disclosure, copying or distribution is strictly prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.
> 
> -----Original Message-----
> From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Sent: Monday, August 16, 2021 10:32 AM
> To: Pooja Gangras <gangras_pooja at lilly.com>
> Cc: CRAN-submissions at R-project.org
> Subject: [EXTERNAL] [CRAN-pretest-archived] CRAN submission surfaltr 1.0.0.9000
> 
> EXTERNAL EMAIL: Use caution before replying, clicking links, and opening attachments.
> 
> Dear maintainer,
>   
> package surfaltr_1.0.0.9000.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Windows/00check.log>
> Status: 1 NOTE
> Debian: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Debian/00check.log>
> Status: 1 ERROR, 1 NOTE
>   
> 
>   
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>   
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/>
> The files will be removed after roughly 7 days.
>   
> No strong reverse dependencies to be checked.
>   
> Best regards,
> CRAN teams' auto-check service
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From g@ngr@@_pooj@ @end|ng |rom ||||y@com  Mon Aug 16 20:52:21 2021
From: g@ngr@@_pooj@ @end|ng |rom ||||y@com (Pooja Gangras)
Date: Mon, 16 Aug 2021 18:52:21 +0000
Subject: [R-pkg-devel] [EXTERNAL] Re: FW: [CRAN-pretest-archived] CRAN
 submission surfaltr 1.0.0.9000
In-Reply-To: <29ffcc92-634f-3b1a-8293-626a106ec4d9@fau.de>
References: <20210816142209.C9B09162EA9@xmpalantir.wu.ac.at>
 <01d792ab$Blat.v3.2.16$7a11f435$100401968@mail.statistik.tu-dortmund.de>
 <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>
 <29ffcc92-634f-3b1a-8293-626a106ec4d9@fau.de>
Message-ID: <BN6P162MB000121B9852099249706C2CB82FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>

Thank you so much Sebastian!
Pooja

Pooja Gangras, Ph.D.
Postdoctoral Research Scientist - RNA Therapeutics
Eli Lilly and Company
Lilly Corporate Center, Indianapolis IN 46285 U.S.A.
Office phone number: (317) 651-0589
Cellphone number: (614) 906-0940
gangras_pooja at lilly.com | www.lilly.com


CONFIDENTIALITY NOTICE: This email message (including all attachments) is for the sole use of the intended recipient(s) and may contain confidential information. Any unauthorized review, use, disclosure, copying or distribution is strictly prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.

-----Original Message-----
From: Sebastian Meyer <seb.meyer at fau.de> 
Sent: Monday, August 16, 2021 2:49 PM
To: Pooja Gangras <gangras_pooja at lilly.com>; r-package-devel at r-project.org
Subject: [EXTERNAL] Re: [R-pkg-devel] FW: [CRAN-pretest-archived] CRAN submission surfaltr 1.0.0.9000

EXTERNAL EMAIL: Use caution before replying, clicking links, and opening attachments.

Packages on CRAN can depend on released packages from both CRAN and Bioconductor.

I don't know why "msa" is missing on the Debian check machine. The check results of another CRAN package that suggests "msa" indicate that this package is currently unavailable on all Linux, Solaris and macOS machines of the CRAN check farm: 
https://cran.r-project.org/web/checks/check_results_bio3d.html

Maybe this is a temporary problem? You could try resubmitting in a few days.

I think you should remove the automatic package installation from your functions; they should not write to the user's home filespace without consent.
You should probably also avoid this NOTE when submitting to CRAN:

 > Version contains large components (1.0.0.9000)

Best regards,

	Sebastian Meyer


Am 16.08.21 um 17:37 schrieb Pooja Gangras via R-package-devel:
> Hi all,
> 
> PFA the pre-check results for my package surfaltr from CRAN. I am having troubles with a package dependency on Debian that I am not able to fix. 2 functions in my package require a Bioconductor package msa (https://bioconductor.org/packages/release/bioc/html/msa.html). To deal with this error, I tried the following solution of adding a call to BiocManager and also including a code for msa installation but it did not help:
> 
> #' @importFrom BiocManager install
> #' @import msa
> .
> .
> .
> Foo() {
> if (!requireNamespace("msa", quietly = TRUE)){
>      BiocManager::install("msa")}
> }
> 
> How do I solve the problem so that I don't generate this error with Debian?
> 
> Thank you,
> Pooja
> 
> 
> Pooja Gangras, Ph.D.
> Postdoctoral Research Scientist - RNA Therapeutics Eli Lilly and 
> Company Lilly Corporate Center, Indianapolis IN 46285 U.S.A.
> Office phone number: (317) 651-0589
> Cellphone number: (614) 906-0940
> gangras_pooja at lilly.com | www.lilly.com
> 
> 
> CONFIDENTIALITY NOTICE: This email message (including all attachments) is for the sole use of the intended recipient(s) and may contain confidential information. Any unauthorized review, use, disclosure, copying or distribution is strictly prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.
> 
> -----Original Message-----
> From: ligges at statistik.tu-dortmund.de 
> <ligges at statistik.tu-dortmund.de>
> Sent: Monday, August 16, 2021 10:32 AM
> To: Pooja Gangras <gangras_pooja at lilly.com>
> Cc: CRAN-submissions at R-project.org
> Subject: [EXTERNAL] [CRAN-pretest-archived] CRAN submission surfaltr 
> 1.0.0.9000
> 
> EXTERNAL EMAIL: Use caution before replying, clicking links, and opening attachments.
> 
> Dear maintainer,
>   
> package surfaltr_1.0.0.9000.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: 
> <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.900
> 0_20210816_162209/Windows/00check.log>
> Status: 1 NOTE
> Debian: 
> <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.900
> 0_20210816_162209/Debian/00check.log>
> Status: 1 ERROR, 1 NOTE
>   
> 
>   
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>   
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.900
> 0_20210816_162209/> The files will be removed after roughly 7 days.
>   
> No strong reverse dependencies to be checked.
>   
> Best regards,
> CRAN teams' auto-check service
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From ctr|bb|e09 @end|ng |rom gm@||@com  Mon Aug 16 21:21:39 2021
From: ctr|bb|e09 @end|ng |rom gm@||@com (Carrie Tribble)
Date: Mon, 16 Aug 2021 09:21:39 -1000
Subject: [R-pkg-devel] 
 WinBuilder error: dependency version not available
In-Reply-To: <AM0PR01MB403320A518393EB3609E27BFD5F69@AM0PR01MB4033.eurprd01.prod.exchangelabs.com>
References: <CA+emL6N19n0P+xBq+FjjUvcrg+c3xhSA0G7yiE4P-q7nBwurhA@mail.gmail.com>
 <AM0PR01MB403320A518393EB3609E27BFD5F69@AM0PR01MB4033.eurprd01.prod.exchangelabs.com>
Message-ID: <CA+emL6P1c2yuZaku0RxZYUTzYCAbggFPLZVzn+Z3wXOf3hsUUA@mail.gmail.com>

Dear Berry,

Thanks for your reply! I was away from my computer until now. We also
submitted to CRAN, but the dependency version is still causing an error:

package RevGadgets_1.0.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/RevGadgets_1.0.0_20210805_041017/Windows/00check.log
> >
> Status: 1 ERROR, 1 NOTE
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/RevGadgets_1.0.0_20210805_041017/Debian/00check.log
> >
> Status: 1 NOTE

Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.

More details are given in the directory:
> <
> https://win-builder.r-project.org/incoming_pretest/RevGadgets_1.0.0_20210805_041017/
> >
> The files will be removed after roughly 7 days.


The ERROR referenced is the same ggtree version error, and the Note is
simply that this is a first time CRAN submission. Is there any way that a
bioconductor package could be manually installed on WinBuilder? If so,
perhaps we could ask the dependency's maintainer to help us out and upload
the new version themselves. Other ideas would be very welcome --- we have a
deadline for getting the package on CRAN so waiting for the dependency to
be updated is not an ideal solution for us!

Thanks again for your help and suggestions!
Carrie

-------------------
Carrie M. Tribble, PhD <http://carrietribble.weebly.com/>
Postdoctoral Researcher in the Zenil-Ferguson Lab
<https://roszenil.github.io/>
University of Hawai?i at M?noa



On Mon, Aug 9, 2021 at 1:20 PM Berry Boessenkool <
berryboessenkool at hotmail.com> wrote:

>
> If it works on all other testing platforms, I'd just submit to CRAN and
> see if it works.
> You may also just wait out until ggtree works on winbuilder...
>
> Regards,
> Berry
>
>
>
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Carrie Tribble <ctribble09 at gmail.com>
> *Sent:* Friday, August 6, 2021 22:34
> *To:* r-package-devel at r-project.org <r-package-devel at r-project.org>
> *Subject:* [R-pkg-devel] WinBuilder error: dependency version not
> available
>
> I am in the final stages of preparing an R package
> <https://github.com/cmt2/RevGadgets/tree/development> to submit to CRAN.
> The package passes devtools::check() locally, GitHub Actions on multiple
> systems (including windows), devtools::check_rhub() remotely, and
> rhub::check_on_windows(check_args = "--force-multiarch"). However, it fails
> on WinBuilder.
>
> I'd appreciate any advice or suggestions. More details below:
>
> You can see the full WinBuilder log here:
>  https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log
> <https://win-builder.r-project.org/kTnuoY4Kqo8B/00check.log>
>
> * checking CRAN incoming feasibility ... NOTE
> > Maintainer: 'Carrie Tribble <ctribble09 at gmail.com>' New submission
> Possibly
> > misspelled words in DESCRIPTION:
> > RevBayes (3:45, 22:92)
> > * checking package namespace information ... OK
> > * checking package dependencies ... ERROR
> > Package required and available but unsuitable version: 'ggtree' See
> > section 'The DESCRIPTION file' in the 'Writing R Extensions'
> > manual.
> > * DONE
> > Status: 1 ERROR, 1 NOTE
>
>
> We require the latest version of ggtree, a bioconductor package.
> Unfortunately, this latest version is necessary for our package to
> function. What's the best way to get access to that version of ggtree on
> WinBuilder?
>
> You can see the log for the successful rhub check_on_windows run here:
>
> https://builder.r-hub.io/status/RevGadgets_1.0.0.tar.gz-8367c3a164ad47379c8bd89c81347ceb
> ,
> and find the package on GitHub here:
> https://github.com/cmt2/RevGadgets/tree/development.
>
> Thank you!
>
> -------------------
> Carrie M. Tribble, PhD <http://carrietribble.weebly.com/>
> Postdoctoral Researcher in the Zenil-Ferguson Lab
> <https://roszenil.github.io/>
> University of Hawai?i at M?noa
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de  Tue Aug 17 13:59:13 2021
From: @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de (Aisouda Hoshiyar)
Date: Tue, 17 Aug 2021 13:59:13 +0200
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
Message-ID: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>

Hi,

submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
Version: 1.0.0
ok
Version: 0.3-1
Check: R code for possible problems, Result: NOTE
  genRidge: no visible global function definition for 'plogis'
  ordGene: no visible global function definition for 'anova'
  ordGene: no visible global function definition for 'lm'
  ordSelect: no visible binding for global variable 'sd'
  ordSmooth: no visible binding for global variable 'sd'
  plot.ordPen: no visible global function definition for 'grey'
  plot.ordPen: no visible global function definition for 'devAskNewPage'
  plot.ordPen: no visible global function definition for 'lines'
  predict.ordPen: no visible global function definition for 'plogis'
  Undefined global functions or variables:
    anova devAskNewPage grey lines lm plogis sd
  Consider adding
    importFrom("grDevices", "devAskNewPage", "grey")
    importFrom("graphics", "lines")
    importFrom("stats", "anova", "lm", "plogis", "sd")
  to your NAMESPACE file.
Version: 0.3-1
Check: package dependencies, Result: NOTE
  Package suggested but not available for checking: ?IsoGene?
https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>

https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>

But these are exactly the new changes that we already took care of in the updated version 1.0.0
The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more. 
That is exactly the reason for update version 1.0.0, were everything is fixed now.

Also,
- there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
- there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.
 

So is this a false positive? 

Best
Aisouda





	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Aug 17 15:22:55 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 17 Aug 2021 13:22:55 +0000
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
In-Reply-To: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
References: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
Message-ID: <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

When the previous version has problems, you get an email listing them, followed with something like 'Did you fix them? Please Reply-All...'

Maybe you missed the last phrase?

Georgi Boshnakov



Get Outlook for Android<https://aka.ms/AAb9ysg>
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de>
Sent: Tuesday, August 17, 2021 12:59:13 PM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] submitting package update failed, since old version out of date (?)

Hi,

submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
Version: 1.0.0
ok
Version: 0.3-1
Check: R code for possible problems, Result: NOTE
  genRidge: no visible global function definition for 'plogis'
  ordGene: no visible global function definition for 'anova'
  ordGene: no visible global function definition for 'lm'
  ordSelect: no visible binding for global variable 'sd'
  ordSmooth: no visible binding for global variable 'sd'
  plot.ordPen: no visible global function definition for 'grey'
  plot.ordPen: no visible global function definition for 'devAskNewPage'
  plot.ordPen: no visible global function definition for 'lines'
  predict.ordPen: no visible global function definition for 'plogis'
  Undefined global functions or variables:
    anova devAskNewPage grey lines lm plogis sd
  Consider adding
    importFrom("grDevices", "devAskNewPage", "grey")
    importFrom("graphics", "lines")
    importFrom("stats", "anova", "lm", "plogis", "sd")
  to your NAMESPACE file.
Version: 0.3-1
Check: package dependencies, Result: NOTE
  Package suggested but not available for checking: ?IsoGene?
https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>

https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>

But these are exactly the new changes that we already took care of in the updated version 1.0.0
The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more.
That is exactly the reason for update version 1.0.0, were everything is fixed now.

Also,
- there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
- there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.


So is this a false positive?

Best
Aisouda





        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de  Tue Aug 17 15:37:25 2021
From: @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de (Aisouda Hoshiyar)
Date: Tue, 17 Aug 2021 15:37:25 +0200
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
In-Reply-To: <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
 <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <500C1F61-D90F-41E5-8822-FDD4D8855507@hsu-hh.de>

The CRAN (pretest) email states:
 
package ordPens_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests: 
Debian: <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log>>
Status: 2 NOTEs

Last released version's CRAN status: NOTE: 13
See: <https://CRAN.R-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>

Please fix all problems and resubmit a fixed version via the webform. 
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

I really don?t understand how else to fix (and what to fix). These are out of date problems of version 0.3-1, which are not relevant any more in version 1.0.0
Version 1.0.0 exactly was a fix to those. 

Do you think I can reply-all & explain that this must be a false-positive?

Best
Aisouda



> Am 17.08.2021 um 15:22 schrieb Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>:
> 
> When the previous version has problems, you get an email listing them, followed with something like 'Did you fix them? Please Reply-All...'
> 
> Maybe you missed the last phrase?
> 
> Georgi Boshnakov
> 
> 
> 
> Get Outlook for Android <https://aka.ms/AAb9ysg>
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de>
> Sent: Tuesday, August 17, 2021 12:59:13 PM
> To: r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: [R-pkg-devel] submitting package update failed, since old version out of date (?)
>  
> Hi,
> 
> submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
> Version: 1.0.0
> ok
> Version: 0.3-1
> Check: R code for possible problems, Result: NOTE
>   genRidge: no visible global function definition for 'plogis'
>   ordGene: no visible global function definition for 'anova'
>   ordGene: no visible global function definition for 'lm'
>   ordSelect: no visible binding for global variable 'sd'
>   ordSmooth: no visible binding for global variable 'sd'
>   plot.ordPen: no visible global function definition for 'grey'
>   plot.ordPen: no visible global function definition for 'devAskNewPage'
>   plot.ordPen: no visible global function definition for 'lines'
>   predict.ordPen: no visible global function definition for 'plogis'
>   Undefined global functions or variables:
>     anova devAskNewPage grey lines lm plogis sd
>   Consider adding
>     importFrom("grDevices", "devAskNewPage", "grey")
>     importFrom("graphics", "lines")
>     importFrom("stats", "anova", "lm", "plogis", "sd")
>   to your NAMESPACE file.
> Version: 0.3-1
> Check: package dependencies, Result: NOTE
>   Package suggested but not available for checking: ?IsoGene?
> https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>
> 
> https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>>
> 
> But these are exactly the new changes that we already took care of in the updated version 1.0.0
> The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more. 
> That is exactly the reason for update version 1.0.0, were everything is fixed now.
> 
> Also,
> - there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
> - there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
> which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.
>  
> 
> So is this a false positive? 
> 
> Best
> Aisouda
> 
> 
> 
> 
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Aug 17 15:42:31 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 17 Aug 2021 15:42:31 +0200
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
In-Reply-To: <500C1F61-D90F-41E5-8822-FDD4D8855507@hsu-hh.de>
References: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
 <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <500C1F61-D90F-41E5-8822-FDD4D8855507@hsu-hh.de>
Message-ID: <CABtg=KkKYdE-KT8JrWAJEG_L4LHTPDQs8FgHf25b6JZGsj3Wog@mail.gmail.com>

I think they are this:

* checking CRAN incoming feasibility ... NOTE
...

and this:

* checking examples ... [76s/77s] NOTE
Examples with CPU (user + system) or elapsed time > 5s
                  user system elapsed
ordPens-package 54.112  0.044  54.158
ordPCA          18.377  0.004  18.382

G.

On Tue, Aug 17, 2021 at 3:38 PM Aisouda Hoshiyar
<aisouda.hoshiyar at hsu-hh.de> wrote:
>
> The CRAN (pretest) email states:
>
> package ordPens_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Debian: <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log>>
> Status: 2 NOTEs
>
> Last released version's CRAN status: NOTE: 13
> See: <https://CRAN.R-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>
> I really don?t understand how else to fix (and what to fix). These are out of date problems of version 0.3-1, which are not relevant any more in version 1.0.0
> Version 1.0.0 exactly was a fix to those.
>
> Do you think I can reply-all & explain that this must be a false-positive?
>
> Best
> Aisouda
>
>
>
> > Am 17.08.2021 um 15:22 schrieb Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>:
> >
> > When the previous version has problems, you get an email listing them, followed with something like 'Did you fix them? Please Reply-All...'
> >
> > Maybe you missed the last phrase?
> >
> > Georgi Boshnakov
> >
> >
> >
> > Get Outlook for Android <https://aka.ms/AAb9ysg>
> > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de>
> > Sent: Tuesday, August 17, 2021 12:59:13 PM
> > To: r-package-devel at r-project.org <r-package-devel at r-project.org>
> > Subject: [R-pkg-devel] submitting package update failed, since old version out of date (?)
> >
> > Hi,
> >
> > submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
> > Version: 1.0.0
> > ok
> > Version: 0.3-1
> > Check: R code for possible problems, Result: NOTE
> >   genRidge: no visible global function definition for 'plogis'
> >   ordGene: no visible global function definition for 'anova'
> >   ordGene: no visible global function definition for 'lm'
> >   ordSelect: no visible binding for global variable 'sd'
> >   ordSmooth: no visible binding for global variable 'sd'
> >   plot.ordPen: no visible global function definition for 'grey'
> >   plot.ordPen: no visible global function definition for 'devAskNewPage'
> >   plot.ordPen: no visible global function definition for 'lines'
> >   predict.ordPen: no visible global function definition for 'plogis'
> >   Undefined global functions or variables:
> >     anova devAskNewPage grey lines lm plogis sd
> >   Consider adding
> >     importFrom("grDevices", "devAskNewPage", "grey")
> >     importFrom("graphics", "lines")
> >     importFrom("stats", "anova", "lm", "plogis", "sd")
> >   to your NAMESPACE file.
> > Version: 0.3-1
> > Check: package dependencies, Result: NOTE
> >   Package suggested but not available for checking: ?IsoGene?
> > https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>
> >
> > https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>>
> >
> > But these are exactly the new changes that we already took care of in the updated version 1.0.0
> > The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more.
> > That is exactly the reason for update version 1.0.0, were everything is fixed now.
> >
> > Also,
> > - there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
> > - there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
> > which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.
> >
> >
> > So is this a false positive?
> >
> > Best
> > Aisouda
> >
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de  Tue Aug 17 15:53:27 2021
From: @|@oud@@ho@h|y@r @end|ng |rom h@u-hh@de (Aisouda Hoshiyar)
Date: Tue, 17 Aug 2021 15:53:27 +0200
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
In-Reply-To: <CABtg=KkKYdE-KT8JrWAJEG_L4LHTPDQs8FgHf25b6JZGsj3Wog@mail.gmail.com>
References: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
 <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <500C1F61-D90F-41E5-8822-FDD4D8855507@hsu-hh.de>
 <CABtg=KkKYdE-KT8JrWAJEG_L4LHTPDQs8FgHf25b6JZGsj3Wog@mail.gmail.com>
Message-ID: <0A5DDBC2-A1DE-4289-95EA-CA493598AFD8@hsu-hh.de>

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de>?

is just a change of the maintainer and already declared in my cran-comments.md file.

Best
Aisouda 



> Am 17.08.2021 um 15:42 schrieb G?bor Cs?rdi <csardi.gabor at gmail.com>:
> 
> I think they are this:
> 
> * checking CRAN incoming feasibility ... NOTE
> ...
> 
> and this:
> 
> * checking examples ... [76s/77s] NOTE
> Examples with CPU (user + system) or elapsed time > 5s
>                  user system elapsed
> ordPens-package 54.112  0.044  54.158
> ordPCA          18.377  0.004  18.382
> 
> G.
> 
> On Tue, Aug 17, 2021 at 3:38 PM Aisouda Hoshiyar
> <aisouda.hoshiyar at hsu-hh.de <mailto:aisouda.hoshiyar at hsu-hh.de>> wrote:
>> 
>> The CRAN (pretest) email states:
>> 
>> package ordPens_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
>> Debian: <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log>>>
>> Status: 2 NOTEs
>> 
>> Last released version's CRAN status: NOTE: 13
>> See: <https://CRAN.R-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>>
>> 
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>> 
>> I really don?t understand how else to fix (and what to fix). These are out of date problems of version 0.3-1, which are not relevant any more in version 1.0.0
>> Version 1.0.0 exactly was a fix to those.
>> 
>> Do you think I can reply-all & explain that this must be a false-positive?
>> 
>> Best
>> Aisouda
>> 
>> 
>> 
>>> Am 17.08.2021 um 15:22 schrieb Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk <mailto:georgi.boshnakov at manchester.ac.uk>>:
>>> 
>>> When the previous version has problems, you get an email listing them, followed with something like 'Did you fix them? Please Reply-All...'
>>> 
>>> Maybe you missed the last phrase?
>>> 
>>> Georgi Boshnakov
>>> 
>>> 
>>> 
>>> Get Outlook for Android <https://aka.ms/AAb9ysg <https://aka.ms/AAb9ysg>>
>>> From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org>> on behalf of Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de <mailto:aisouda.hoshiyar at hsu-hh.de>>
>>> Sent: Tuesday, August 17, 2021 12:59:13 PM
>>> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>>
>>> Subject: [R-pkg-devel] submitting package update failed, since old version out of date (?)
>>> 
>>> Hi,
>>> 
>>> submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
>>> Version: 1.0.0
>>> ok
>>> Version: 0.3-1
>>> Check: R code for possible problems, Result: NOTE
>>>  genRidge: no visible global function definition for 'plogis'
>>>  ordGene: no visible global function definition for 'anova'
>>>  ordGene: no visible global function definition for 'lm'
>>>  ordSelect: no visible binding for global variable 'sd'
>>>  ordSmooth: no visible binding for global variable 'sd'
>>>  plot.ordPen: no visible global function definition for 'grey'
>>>  plot.ordPen: no visible global function definition for 'devAskNewPage'
>>>  plot.ordPen: no visible global function definition for 'lines'
>>>  predict.ordPen: no visible global function definition for 'plogis'
>>>  Undefined global functions or variables:
>>>    anova devAskNewPage grey lines lm plogis sd
>>>  Consider adding
>>>    importFrom("grDevices", "devAskNewPage", "grey")
>>>    importFrom("graphics", "lines")
>>>    importFrom("stats", "anova", "lm", "plogis", "sd")
>>>  to your NAMESPACE file.
>>> Version: 0.3-1
>>> Check: package dependencies, Result: NOTE
>>>  Package suggested but not available for checking: ?IsoGene?
>>> https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>>
>>> 
>>> https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/><https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/><https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>>>
>>> 
>>> But these are exactly the new changes that we already took care of in the updated version 1.0.0
>>> The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more.
>>> That is exactly the reason for update version 1.0.0, were everything is fixed now.
>>> 
>>> Also,
>>> - there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
>>> - there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
>>> which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.
>>> 
>>> 
>>> So is this a false positive?
>>> 
>>> Best
>>> Aisouda
>>> 
>>> 
>>> 
>>> 
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel> <https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue Aug 17 19:42:00 2021
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Tue, 17 Aug 2021 17:42:00 +0000
Subject: [R-pkg-devel] 
 [EXTERNAL] [CRAN-pretest-archived] CRAN submission
 surfaltr 1.0.0.9000
In-Reply-To: <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>
References: <20210816142209.C9B09162EA9@xmpalantir.wu.ac.at>
 <01d792ab$Blat.v3.2.16$7a11f435$100401968@mail.statistik.tu-dortmund.de>
 <BN6P162MB000158DF253AB28378C981E082FD9@BN6P162MB0001.NAMP162.PROD.OUTLOOK.COM>
Message-ID: <YQXPR01MB4579F71AFCB47B1CE9A497689AFE9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>

Hi Pooja,

In the code below, you install msa if it's missing. This is considered bad practice, as it installs a new package without explicitly asking for the user's permission. I'm surprised it wasn't flagged by the CRAN checks.

Make sure msa is in the "Imports" field of your DESCRIPTION file, and you should be fine. As Sebastian mentioned, it's possible the error you saw is transient, as Bioconductor packages are typically available for testing on CRAN machines.

Best,


Max Turgeon<https://www.name-coach.com/maxime-turgeon>
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Pooja Gangras via R-package-devel <r-package-devel at r-project.org>
Sent: Monday, August 16, 2021 10:37 AM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] FW: [EXTERNAL] [CRAN-pretest-archived] CRAN submission surfaltr 1.0.0.9000

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Hi all,

PFA the pre-check results for my package surfaltr from CRAN. I am having troubles with a package dependency on Debian that I am not able to fix. 2 functions in my package require a Bioconductor package msa (https://bioconductor.org/packages/release/bioc/html/msa.html). To deal with this error, I tried the following solution of adding a call to BiocManager and also including a code for msa installation but it did not help:

#' @importFrom BiocManager install
#' @import msa
.
.
.
Foo() {
if (!requireNamespace("msa", quietly = TRUE)){
    BiocManager::install("msa")}
}

How do I solve the problem so that I don't generate this error with Debian?

Thank you,
Pooja


Pooja Gangras, Ph.D.
Postdoctoral Research Scientist - RNA Therapeutics
Eli Lilly and Company
Lilly Corporate Center, Indianapolis IN 46285 U.S.A.
Office phone number: (317) 651-0589
Cellphone number: (614) 906-0940
gangras_pooja at lilly.com | www.lilly.com<http://www.lilly.com>


CONFIDENTIALITY NOTICE: This email message (including all attachments) is for the sole use of the intended recipient(s) and may contain confidential information. Any unauthorized review, use, disclosure, copying or distribution is strictly prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.

-----Original Message-----
From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Sent: Monday, August 16, 2021 10:32 AM
To: Pooja Gangras <gangras_pooja at lilly.com>
Cc: CRAN-submissions at R-project.org
Subject: [EXTERNAL] [CRAN-pretest-archived] CRAN submission surfaltr 1.0.0.9000

EXTERNAL EMAIL: Use caution before replying, clicking links, and opening attachments.

Dear maintainer,

package surfaltr_1.0.0.9000.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Windows/00check.log>
Status: 1 NOTE
Debian: <https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/Debian/00check.log>
Status: 1 ERROR, 1 NOTE



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/surfaltr_1.0.0.9000_20210816_162209/>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Aug 18 17:25:22 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 18 Aug 2021 17:25:22 +0200
Subject: [R-pkg-devel] submitting package update failed,
 since old version out of date (?)
In-Reply-To: <0A5DDBC2-A1DE-4289-95EA-CA493598AFD8@hsu-hh.de>
References: <954BC2DB-ABD7-4416-A4D8-D0C6AFFAE621@hsu-hh.de>
 <LOYP265MB2015ABF488181FD2563C278AAEFE9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <500C1F61-D90F-41E5-8822-FDD4D8855507@hsu-hh.de>
 <CABtg=KkKYdE-KT8JrWAJEG_L4LHTPDQs8FgHf25b6JZGsj3Wog@mail.gmail.com>
 <0A5DDBC2-A1DE-4289-95EA-CA493598AFD8@hsu-hh.de>
Message-ID: <6052e06c-dae8-301e-df44-4e477c137c6c@statistik.tu-dortmund.de>

But the example timing...:
Please reduce each example to less than 5 sec.

Best,
Uwe Ligges

On 17.08.2021 15:53, Aisouda Hoshiyar wrote:
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de>?
> 
> is just a change of the maintainer and already declared in my cran-comments.md file.
> 
> Best
> Aisouda
> 
> 
> 
>> Am 17.08.2021 um 15:42 schrieb G?bor Cs?rdi <csardi.gabor at gmail.com>:
>>
>> I think they are this:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> ...
>>
>> and this:
>>
>> * checking examples ... [76s/77s] NOTE
>> Examples with CPU (user + system) or elapsed time > 5s
>>                   user system elapsed
>> ordPens-package 54.112  0.044  54.158
>> ordPCA          18.377  0.004  18.382
>>
>> G.
>>
>> On Tue, Aug 17, 2021 at 3:38 PM Aisouda Hoshiyar
>> <aisouda.hoshiyar at hsu-hh.de <mailto:aisouda.hoshiyar at hsu-hh.de>> wrote:
>>>
>>> The CRAN (pretest) email states:
>>>
>>> package ordPens_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
>>> Debian: <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/00check.log>>>
>>> Status: 2 NOTEs
>>>
>>> Last released version's CRAN status: NOTE: 13
>>> See: <https://CRAN.R-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>>
>>>
>>> Please fix all problems and resubmit a fixed version via the webform.
>>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>>>
>>> I really don?t understand how else to fix (and what to fix). These are out of date problems of version 0.3-1, which are not relevant any more in version 1.0.0
>>> Version 1.0.0 exactly was a fix to those.
>>>
>>> Do you think I can reply-all & explain that this must be a false-positive?
>>>
>>> Best
>>> Aisouda
>>>
>>>
>>>
>>>> Am 17.08.2021 um 15:22 schrieb Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk <mailto:georgi.boshnakov at manchester.ac.uk>>:
>>>>
>>>> When the previous version has problems, you get an email listing them, followed with something like 'Did you fix them? Please Reply-All...'
>>>>
>>>> Maybe you missed the last phrase?
>>>>
>>>> Georgi Boshnakov
>>>>
>>>>
>>>>
>>>> Get Outlook for Android <https://aka.ms/AAb9ysg <https://aka.ms/AAb9ysg>>
>>>> From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org>> on behalf of Aisouda Hoshiyar <aisouda.hoshiyar at hsu-hh.de <mailto:aisouda.hoshiyar at hsu-hh.de>>
>>>> Sent: Tuesday, August 17, 2021 12:59:13 PM
>>>> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>>
>>>> Subject: [R-pkg-devel] submitting package update failed, since old version out of date (?)
>>>>
>>>> Hi,
>>>>
>>>> submitting an update of our package ordPens failed (update version is 1.0.0), reporting the following:
>>>> Version: 1.0.0
>>>> ok
>>>> Version: 0.3-1
>>>> Check: R code for possible problems, Result: NOTE
>>>>   genRidge: no visible global function definition for 'plogis'
>>>>   ordGene: no visible global function definition for 'anova'
>>>>   ordGene: no visible global function definition for 'lm'
>>>>   ordSelect: no visible binding for global variable 'sd'
>>>>   ordSmooth: no visible binding for global variable 'sd'
>>>>   plot.ordPen: no visible global function definition for 'grey'
>>>>   plot.ordPen: no visible global function definition for 'devAskNewPage'
>>>>   plot.ordPen: no visible global function definition for 'lines'
>>>>   predict.ordPen: no visible global function definition for 'plogis'
>>>>   Undefined global functions or variables:
>>>>     anova devAskNewPage grey lines lm plogis sd
>>>>   Consider adding
>>>>     importFrom("grDevices", "devAskNewPage", "grey")
>>>>     importFrom("graphics", "lines")
>>>>     importFrom("stats", "anova", "lm", "plogis", "sd")
>>>>   to your NAMESPACE file.
>>>> Version: 0.3-1
>>>> Check: package dependencies, Result: NOTE
>>>>   Package suggested but not available for checking: ?IsoGene?
>>>> https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html> <https://cran.r-project.org/web/checks/check_results_ordPens.html <https://cran.r-project.org/web/checks/check_results_ordPens.html>>>
>>>>
>>>> https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/><https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>> <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/><https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/ <https://win-builder.r-project.org/incoming_pretest/ordPens_1.0.0_20210817_114846/Debian/>>>
>>>>
>>>> But these are exactly the new changes that we already took care of in the updated version 1.0.0
>>>> The previous version 0.3-1 is from 2015 and due to R updates, the old package won?t work any more.
>>>> That is exactly the reason for update version 1.0.0, were everything is fixed now.
>>>>
>>>> Also,
>>>> - there is a NOTE about change in maintainer, which is already stated in the cran-comments.md, and the previous maintainer sent an e-main to CRAN as well
>>>> - there is a NOTE saying 'Examples with CPU (user + system) or elapsed time > 10s?
>>>> which is also stated in the cran-comments.md explaining that cross-validation examples are important for illustrating the package usage.
>>>>
>>>>
>>>> So is this a false positive?
>>>>
>>>> Best
>>>> Aisouda
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel> <https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Aug 23 21:19:38 2021
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 23 Aug 2021 12:19:38 -0700
Subject: [R-pkg-devel] Expired Incoming Package
Message-ID: <CALOkxuzUxU=Fd_+QJgzZixt=_Mhei_QUgHKLrgjhaCWH2hOgYQ@mail.gmail.com>

If my submission is no longer visible using foghorn::cran_incoming(), that
means it has expired and I should resubmit, right?

--
Reed A. Cartwright, PhD
Associate Professor of Genomics, Evolution, and Bioinformatics
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 875301, Tempe, AZ 85287-5301 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-5301 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Aug 23 21:21:07 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 23 Aug 2021 15:21:07 -0400
Subject: [R-pkg-devel] Expired Incoming Package
In-Reply-To: <CALOkxuzUxU=Fd_+QJgzZixt=_Mhei_QUgHKLrgjhaCWH2hOgYQ@mail.gmail.com>
References: <CALOkxuzUxU=Fd_+QJgzZixt=_Mhei_QUgHKLrgjhaCWH2hOgYQ@mail.gmail.com>
Message-ID: <91a71ea5-5ba1-127f-6129-a78020695fc2@gmail.com>

   That would be my best guess.

On 8/23/21 3:19 PM, Reed A. Cartwright wrote:
> If my submission is no longer visible using foghorn::cran_incoming(), that
> means it has expired and I should resubmit, right?
> 
> --
> Reed A. Cartwright, PhD
> Associate Professor of Genomics, Evolution, and Bioinformatics
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 875301, Tempe, AZ 85287-5301 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-5301 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

--


From r@c@rtwr|ght @end|ng |rom gm@||@com  Mon Aug 23 21:31:23 2021
From: r@c@rtwr|ght @end|ng |rom gm@||@com (Reed A. Cartwright)
Date: Mon, 23 Aug 2021 12:31:23 -0700
Subject: [R-pkg-devel] Solaris Support
Message-ID: <CALOkxuw6BMDT5WNuNYyveqV1bfQnnzBS60JfKYqU0VJxf5JVfA@mail.gmail.com>

What is the proper way to indicate that a package submitted to CRAN
requires the gcc compiler on Solaris? I haven't been able to find any
information about how to indicate that in a way that the CRAN builders will
pick up on it.

--
Reed A. Cartwright, PhD
Associate Professor of Genomics, Evolution, and Bioinformatics
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 875301, Tempe, AZ 85287-5301 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-5301 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/

	[[alternative HTML version deleted]]


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Mon Aug 23 21:53:56 2021
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Mon, 23 Aug 2021 19:53:56 +0000
Subject: [R-pkg-devel] Solaris Support
In-Reply-To: <CALOkxuw6BMDT5WNuNYyveqV1bfQnnzBS60JfKYqU0VJxf5JVfA@mail.gmail.com>
References: <CALOkxuw6BMDT5WNuNYyveqV1bfQnnzBS60JfKYqU0VJxf5JVfA@mail.gmail.com>
Message-ID: <LO2P265MB2605DF27805F4056C099D8E4DDC49@LO2P265MB2605.GBRP265.PROD.OUTLOOK.COM>

No direct experience, so others may know more, but I'd have thought in the system requirements of DESCRIPTION. See for instance what duckdb does https://github.com/duckdb/duckdb/blob/master/tools/rpkg/DESCRIPTION

________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Reed A. Cartwright <racartwright at gmail.com>
Sent: 23 August 2021 20:31
To: R Package Devel
Subject: [R-pkg-devel] Solaris Support

What is the proper way to indicate that a package submitted to CRAN
requires the gcc compiler on Solaris? I haven't been able to find any
information about how to indicate that in a way that the CRAN builders will
pick up on it.

--
Reed A. Cartwright, PhD
Associate Professor of Genomics, Evolution, and Bioinformatics
School of Life Sciences and The Biodesign Institute
Arizona State University
==================
Address: The Biodesign Institute, PO Box 875301, Tempe, AZ 85287-5301 USA
Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
85287-5301 USA
Office: Biodesign B-220C, 1-480-965-9949
Website: http://cartwrig.ht/

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Mon Aug 23 23:47:13 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 23 Aug 2021 17:47:13 -0400
Subject: [R-pkg-devel] Solaris Support
In-Reply-To: <CALOkxuw6BMDT5WNuNYyveqV1bfQnnzBS60JfKYqU0VJxf5JVfA@mail.gmail.com>
References: <CALOkxuw6BMDT5WNuNYyveqV1bfQnnzBS60JfKYqU0VJxf5JVfA@mail.gmail.com>
Message-ID: <d3812f37-c0f0-6613-7b3d-58d647cb8bda@gmail.com>

   I think you're stuck with what you get as far as compilers go (see 
below), but it shouldn't be a deal-breaker for CRAN.

The list of CRAN test platforms 
<https://cran.r-project.org/web/checks/check_flavors.html> indicates 
that the platform uses the Oracle Developer Studio 12.6 compiler , but 
the DETAILS 
<https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-patched-solaris-x86> say 
"GCC is used for packages linking to Rcpp|cpp11|StanHeaders, rgdal/sf 
(GDAL is only compilable with g++) and about 40 others."

   So if you link to one of those packages or the undisclosed 40 others, 
you will get GCC (details below).  If not, or if you're not sure, you 
should indicate in your submission message that your package only works 
with GCC on Solaris. According to the CRAN policies 
<https://cran.r-project.org/web/packages/policies.html>

Package authors should make all reasonable efforts to provide 
cross-platform portable code. Packages will not normally be accepted 
that do not run on at least two of the major R platforms. [I believe 
"the major R platforms" means {MacOS, Windows, Linux} but I don't think? 
this is explicitly defined anywhere.]

   So, at least as far as publicly viewable policies go, the CRAN 
maintainers would be able to ask you to make "all reasonable efforts". 
(In my opinion, figuring out how to make your package work properly with 
ODS 12.6 would take more than a "reasonable" effort, but .. ???)

   cheers
    Ben Bolker



=====
Where these compilers cannot be used, use
GCC 5.2.0 from OpenCSW, with config.site:
CC="/opt/csw//bin/gcc"
CFLAGS=-O2
CPPFLAGS="-I/opt/csw/include -I/usr/local/include"
FC="/opt/csw//bin/gfortran"
FFLAGS=-O2
CXX="/opt/csw//bin/g++"
CXXFLAGS=-O2
LDFLAGS="-L/opt/csw/lib -L/usr/local/lib"
R_LD_LIBRARY_PATH="/usr/local/lib:/opt/csw/lib:/home/ripley/developerstudio12.6/lib:/usr/openwin/lib"




On 8/23/21 3:31 PM, Reed A. Cartwright wrote:
> What is the proper way to indicate that a package submitted to CRAN
> requires the gcc compiler on Solaris? I haven't been able to find any
> information about how to indicate that in a way that the CRAN builders will
> pick up on it.
> 
> --
> Reed A. Cartwright, PhD
> Associate Professor of Genomics, Evolution, and Bioinformatics
> School of Life Sciences and The Biodesign Institute
> Arizona State University
> ==================
> Address: The Biodesign Institute, PO Box 875301, Tempe, AZ 85287-5301 USA
> Packages: The Biodesign Institute, 1001 S. McAllister Ave, Tempe, AZ
> 85287-5301 USA
> Office: Biodesign B-220C, 1-480-965-9949
> Website: http://cartwrig.ht/
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
Graduate chair, Mathematics & Statistics


From @|@n@w1 @end|ng |rom berke|ey@edu  Mon Aug 23 18:07:14 2021
From: @|@n@w1 @end|ng |rom berke|ey@edu (Alan Aw)
Date: Mon, 23 Aug 2021 09:07:14 -0700
Subject: [R-pkg-devel] "Connections left open" Error
Message-ID: <CADeEhZ-KpHwaeTg53Z1HBDtAbKSDuFsPj7vX--muQ5kFzo5T4w@mail.gmail.com>

Hi,

I submitted a package to CRAN, but it keeps failing a particular check for
Windows. This error shows up when I check my code examples.

Error: connections left open:
>         <-CRANwin.fb05.statistik.uni-dortmund.de:11602
> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
>         <-CRANwin.fb05.statistik.uni-dortmund.de:11602
> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
> Execution halted


For context, my code example does the following.

suppressWarnings(require(doParallel))
> registerDoParallel(cores = 2)
>


# Some code examples that use foreach and %dopar%



stopImplicitCluster()


Other contextual information:

   - I already import doParallel in the DESCRIPTION file.
   - My package passes all checks on the Linux machine.

I have read elsewhere (e.g., this thread
<https://github.com/HenrikBengtsson/future/issues/327>) that examples with
parallelization lead to this error. However stopImplicitCluster() does not
seem to fix it.

Could someone familiar with this please troubleshoot? Thank you.

Alan

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Aug 24 23:21:47 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 24 Aug 2021 16:21:47 -0500
Subject: [R-pkg-devel] CRAN closed for a week
Message-ID: <24869.25323.892539.230985@rob.eddelbuettel.com>


While we generally get an email about these things, CRAN appears to have
closed shop for a week to take a well deserved break until September 1.

Or so the message says---the hourly CRANberriesFeed cron job saw packages
being processed, but that too is not uncommon when the queues get cleared.

To all not yet back to fall term teaching: enjoy a few more days of summer.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Aug 27 09:25:48 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 27 Aug 2021 09:25:48 +0200
Subject: [R-pkg-devel] "Connections left open" Error
In-Reply-To: <CADeEhZ-KpHwaeTg53Z1HBDtAbKSDuFsPj7vX--muQ5kFzo5T4w@mail.gmail.com>
References: <CADeEhZ-KpHwaeTg53Z1HBDtAbKSDuFsPj7vX--muQ5kFzo5T4w@mail.gmail.com>
Message-ID: <eb23f879-0cbb-4865-9dd3-7126537c6f0c@statistik.tu-dortmund.de>



On 23.08.2021 18:07, Alan Aw wrote:
> Hi,
> 
> I submitted a package to CRAN, but it keeps failing a particular check for
> Windows. This error shows up when I check my code examples.
> 
> Error: connections left open:
>>          <-CRANwin.fb05.statistik.uni-dortmund.de:11602
>> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
>>          <-CRANwin.fb05.statistik.uni-dortmund.de:11602
>> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
>> Execution halted
> 
> 
> For context, my code example does the following.
> 
> suppressWarnings(require(doParallel))
>> registerDoParallel(cores = 2)
>>
> 
> 
> # Some code examples that use foreach and %dopar%
> 
> 
> 
> stopImplicitCluster()
> 
> 
> Other contextual information:
> 
>     - I already import doParallel in the DESCRIPTION file.
>     - My package passes all checks on the Linux machine.
> 
> I have read elsewhere (e.g., this thread
> <https://github.com/HenrikBengtsson/future/issues/327>) that examples with
> parallelization lead to this error. However stopImplicitCluster() does not
> seem to fix it.
> 
> Could someone familiar with this please troubleshoot? Thank you.

No idea about the doParallel package, but perhaps it helps to open a 
cluster explicitly and in the end stop exactly that cluster?

Best,
Uwe Ligges
> 
> Alan
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Fri Aug 27 10:07:08 2021
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Fri, 27 Aug 2021 11:07:08 +0300
Subject: [R-pkg-devel] "Connections left open" Error
In-Reply-To: <eb23f879-0cbb-4865-9dd3-7126537c6f0c@statistik.tu-dortmund.de>
References: <CADeEhZ-KpHwaeTg53Z1HBDtAbKSDuFsPj7vX--muQ5kFzo5T4w@mail.gmail.com>
 <eb23f879-0cbb-4865-9dd3-7126537c6f0c@statistik.tu-dortmund.de>
Message-ID: <CAL6gwnL=K7vJaO594mHcMhqFPNy=Prt7dHPrjTvUTWJoC+k1MA@mail.gmail.com>

On Fri, Aug 27, 2021 at 10:25 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 23.08.2021 18:07, Alan Aw wrote:
> > Hi,
> >
> > I submitted a package to CRAN, but it keeps failing a particular check
> for
> > Windows. This error shows up when I check my code examples.
> >
> > Error: connections left open:
> >>          <-CRANwin.fb05.statistik.uni-dortmund.de:11602
> >> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
> >>          <-CRANwin.fb05.statistik.uni-dortmund.de:11602
> >> <http://cranwin.fb05.statistik.uni-dortmund.de:11602/> (sockconn)
> >> Execution halted
> >
> >
> > For context, my code example does the following.
> >
> > suppressWarnings(require(doParallel))
> >> registerDoParallel(cores = 2)
> >>
> >
> >
> > # Some code examples that use foreach and %dopar%
> >
> >
> >
> > stopImplicitCluster()
> >
> >
> > Other contextual information:
> >
> >     - I already import doParallel in the DESCRIPTION file.
> >     - My package passes all checks on the Linux machine.
> >
> > I have read elsewhere (e.g., this thread
> > <https://github.com/HenrikBengtsson/future/issues/327>) that examples
> with
> > parallelization lead to this error. However stopImplicitCluster() does
> not
> > seem to fix it.
> >
> > Could someone familiar with this please troubleshoot? Thank you.
>
> No idea about the doParallel package, but perhaps it helps to open a
> cluster explicitly and in the end stop exactly that cluster?
>
> Best,
> Uwe Ligges
> >
> > Alan


As per Dr. Ligges, I?ve had more success closing the named cluster than
using stopImplicit.

Avi

>
> --
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Tue Aug 31 21:20:40 2021
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Tue, 31 Aug 2021 16:20:40 -0300
Subject: [R-pkg-devel] Checking package dependencies before loading namespace
Message-ID: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>

Dear all,
I have a package called pliman <https://CRAN.R-project.org/package=pliman>
which depends on the Bioconductor package EBImage.

When running install.packages("pliman") I get the following warning

Warning in install.packages :  dependency ?EBImage? is not available

and thus when loading the package with library(pliman), the following error
occurs

Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
 there is no package called ?EBImage?

I created a check function to check if EBImage is available and if not, ask
users if they want to install it

---
check_ebi <- function(){
  if(!requireNamespace("EBImage", quietly = TRUE)) {
    inst <-
    switch(menu(c("Yes", "No"), title = "Package {EBImage} required but not
available.\nDo you want to install it now?"),
           "yes", "no")
    if(inst == "yes"){
      if (!requireNamespace("BiocManager", quietly = TRUE)){
        install.packages("BiocManager")
      }
      BiocManager::install("EBImage", ask = FALSE, update = FALSE)
    } else{
      message("To use {pliman}, first install {EBImage} with
'BiocManager::install(\"EBImage\")'.")
    }
  }
}
---

Is there any way to run this function prior to namespace loading? I tried
putting check_ebi() into .onLoad() but the same error occurs.

Thanks in advance for any suggestions.
Tiago

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Aug 31 23:33:52 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 31 Aug 2021 17:33:52 -0400
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
Message-ID: <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>

People shouldn't be able to install your package unless the "hard" 
dependencies are available.

If EBImage isn't essential to your package, you should make it a "soft" 
dependency by listing it in Suggests and checking for it every time you 
use it.

Duncan Murdoch

On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
> Dear all,
> I have a package called pliman <https://CRAN.R-project.org/package=pliman>
> which depends on the Bioconductor package EBImage.
> 
> When running install.packages("pliman") I get the following warning
> 
> Warning in install.packages :  dependency ?EBImage? is not available
> 
> and thus when loading the package with library(pliman), the following error
> occurs
> 
> Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
>   there is no package called ?EBImage?
> 
> I created a check function to check if EBImage is available and if not, ask
> users if they want to install it
> 
> ---
> check_ebi <- function(){
>    if(!requireNamespace("EBImage", quietly = TRUE)) {
>      inst <-
>      switch(menu(c("Yes", "No"), title = "Package {EBImage} required but not
> available.\nDo you want to install it now?"),
>             "yes", "no")
>      if(inst == "yes"){
>        if (!requireNamespace("BiocManager", quietly = TRUE)){
>          install.packages("BiocManager")
>        }
>        BiocManager::install("EBImage", ask = FALSE, update = FALSE)
>      } else{
>        message("To use {pliman}, first install {EBImage} with
> 'BiocManager::install(\"EBImage\")'.")
>      }
>    }
> }
> ---
> 
> Is there any way to run this function prior to namespace loading? I tried
> putting check_ebi() into .onLoad() but the same error occurs.
> 
> Thanks in advance for any suggestions.
> Tiago
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Sep  1 08:53:45 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 1 Sep 2021 08:53:45 +0200
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
Message-ID: <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>

Two more comments.

1. Note that your code only works in interactice mode, not when checking 
your package as it waits infinitely for the user's choice.

2. I do not see an advantage of installing BiocManager if EBImage is 
needed, the essential part is simply to select BioC as a repository to 
install packages from.

Best,
Uwe Ligges


On 31.08.2021 23:33, Duncan Murdoch wrote:
> People shouldn't be able to install your package unless the "hard" 
> dependencies are available.
> 
> If EBImage isn't essential to your package, you should make it a "soft" 
> dependency by listing it in Suggests and checking for it every time you 
> use it.
> 
> Duncan Murdoch
> 
> On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
>> Dear all,
>> I have a package called pliman 
>> <https://CRAN.R-project.org/package=pliman>
>> which depends on the Bioconductor package EBImage.
>>
>> When running install.packages("pliman") I get the following warning
>>
>> Warning in install.packages :? dependency ?EBImage? is not available
>>
>> and thus when loading the package with library(pliman), the following 
>> error
>> occurs
>>
>> Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
>> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
>> ? there is no package called ?EBImage?
>>
>> I created a check function to check if EBImage is available and if 
>> not, ask
>> users if they want to install it
>>
>> ---
>> check_ebi <- function(){
>> ?? if(!requireNamespace("EBImage", quietly = TRUE)) {
>> ???? inst <-
>> ???? switch(menu(c("Yes", "No"), title = "Package {EBImage} required 
>> but not
>> available.\nDo you want to install it now?"),
>> ??????????? "yes", "no")
>> ???? if(inst == "yes"){
>> ?????? if (!requireNamespace("BiocManager", quietly = TRUE)){
>> ???????? install.packages("BiocManager")
>> ?????? }
>> ?????? BiocManager::install("EBImage", ask = FALSE, update = FALSE)
>> ???? } else{
>> ?????? message("To use {pliman}, first install {EBImage} with
>> 'BiocManager::install(\"EBImage\")'.")
>> ???? }
>> ?? }
>> }
>> ---
>>
>> Is there any way to run this function prior to namespace loading? I tried
>> putting check_ebi() into .onLoad() but the same error occurs.
>>
>> Thanks in advance for any suggestions.
>> Tiago
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From t|@goo||voto @end|ng |rom gm@||@com  Wed Sep  1 14:11:52 2021
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 1 Sep 2021 09:11:52 -0300
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
 <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
Message-ID: <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>

Thank you, Duncan and Uwe for the suggestions.
 I followed your instructions and created a function to check for EBImage
that is only called in an interactive section and, if necessary, ask the
user to install the package with install.packages("EBImage", repos="
https://bioconductor.org/packages/3.13/bioc")

Best,
Tiago

Em qua., 1 de set. de 2021 ?s 03:53, Uwe Ligges <
ligges at statistik.tu-dortmund.de> escreveu:

> Two more comments.
>
> 1. Note that your code only works in interactice mode, not when checking
> your package as it waits infinitely for the user's choice.
>
> 2. I do not see an advantage of installing BiocManager if EBImage is
> needed, the essential part is simply to select BioC as a repository to
> install packages from.
>
> Best,
> Uwe Ligges
>
>
> On 31.08.2021 23:33, Duncan Murdoch wrote:
> > People shouldn't be able to install your package unless the "hard"
> > dependencies are available.
> >
> > If EBImage isn't essential to your package, you should make it a "soft"
> > dependency by listing it in Suggests and checking for it every time you
> > use it.
> >
> > Duncan Murdoch
> >
> > On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
> >> Dear all,
> >> I have a package called pliman
> >> <https://CRAN.R-project.org/package=pliman>
> >> which depends on the Bioconductor package EBImage.
> >>
> >> When running install.packages("pliman") I get the following warning
> >>
> >> Warning in install.packages :  dependency ?EBImage? is not available
> >>
> >> and thus when loading the package with library(pliman), the following
> >> error
> >> occurs
> >>
> >> Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
> >> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
> >>   there is no package called ?EBImage?
> >>
> >> I created a check function to check if EBImage is available and if
> >> not, ask
> >> users if they want to install it
> >>
> >> ---
> >> check_ebi <- function(){
> >>    if(!requireNamespace("EBImage", quietly = TRUE)) {
> >>      inst <-
> >>      switch(menu(c("Yes", "No"), title = "Package {EBImage} required
> >> but not
> >> available.\nDo you want to install it now?"),
> >>             "yes", "no")
> >>      if(inst == "yes"){
> >>        if (!requireNamespace("BiocManager", quietly = TRUE)){
> >>          install.packages("BiocManager")
> >>        }
> >>        BiocManager::install("EBImage", ask = FALSE, update = FALSE)
> >>      } else{
> >>        message("To use {pliman}, first install {EBImage} with
> >> 'BiocManager::install(\"EBImage\")'.")
> >>      }
> >>    }
> >> }
> >> ---
> >>
> >> Is there any way to run this function prior to namespace loading? I
> tried
> >> putting check_ebi() into .onLoad() but the same error occurs.
> >>
> >> Thanks in advance for any suggestions.
> >> Tiago
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Thu Sep  2 12:29:50 2021
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 2 Sep 2021 12:29:50 +0200
Subject: [R-pkg-devel] Pre-test check fails with "non-standard things in
 check directory" on one platform
Message-ID: <29D22DE2-AD4D-421A-ADCA-9ED2A61E1B6B@krugs.de>

Hi

I submitted an update of the dmdScheme package and got the response back from the pre-submission check that it failed on one platform with the Note:

* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  ?emeScheme?

(Links to the logs are here:

package dmdScheme_1.2.7.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Windows/00check.log>
Status: OK
Debian: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Debian/00check.log>
Status: 1 NOTE

)

This only occurs on the CRAN server and I can not reproduce it with rhub or locally on my Mac with 4.1.1.

I can currently not check the level version, as it seems to be not compiling for Mac. 

Could somebody give any guidance, how to fix this? Which one is the ?check directory"? 

Thanks,

Rainer

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Sep  2 14:02:14 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 2 Sep 2021 08:02:14 -0400
Subject: [R-pkg-devel] Pre-test check fails with "non-standard things in
 check directory" on one platform
In-Reply-To: <29D22DE2-AD4D-421A-ADCA-9ED2A61E1B6B@krugs.de>
References: <29D22DE2-AD4D-421A-ADCA-9ED2A61E1B6B@krugs.de>
Message-ID: <444313ce-00a0-3f13-8731-0821c24c487c@gmail.com>

On 02/09/2021 6:29 a.m., Rainer M Krug wrote:
> Hi
> 
> I submitted an update of the dmdScheme package and got the response back from the pre-submission check that it failed on one platform with the Note:
> 
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>    ?emeScheme?
> 
> (Links to the logs are here:
> 
> package dmdScheme_1.2.7.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Windows/00check.log>
> Status: OK
> Debian: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Debian/00check.log>
> Status: 1 NOTE
> 
> )
> 
> This only occurs on the CRAN server and I can not reproduce it with rhub or locally on my Mac with 4.1.1.
> 
> I can currently not check the level version, as it seems to be not compiling for Mac.
> 
> Could somebody give any guidance, how to fix this? Which one is the ?check directory"?

That's the one reported at the start of the log as the "log directory".

Fixing it is a little harder without more info.  That looks like a name 
that you would have created, given the name of your package.  You should 
look at your package source to figure out if there's an example or test 
that created it but didn't delete it.

Duncan Murdoch


From R@|ner @end|ng |rom krug@@de  Thu Sep  2 14:47:25 2021
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 2 Sep 2021 14:47:25 +0200
Subject: [R-pkg-devel] Pre-test check fails with "non-standard things in
 check directory" on one platform
In-Reply-To: <444313ce-00a0-3f13-8731-0821c24c487c@gmail.com>
References: <29D22DE2-AD4D-421A-ADCA-9ED2A61E1B6B@krugs.de>
 <444313ce-00a0-3f13-8731-0821c24c487c@gmail.com>
Message-ID: <0E10346E-08D5-4E10-A31F-F1573B517190@krugs.de>



> On 2 Sep 2021, at 14:02, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 02/09/2021 6:29 a.m., Rainer M Krug wrote:
>> Hi
>> I submitted an update of the dmdScheme package and got the response back from the pre-submission check that it failed on one platform with the Note:
>> * checking for non-standard things in the check directory ... NOTE
>> Found the following files/directories:
>>   ?emeScheme?
>> (Links to the logs are here:
>> package dmdScheme_1.2.7.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
>> Windows: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Windows/00check.log>
>> Status: OK
>> Debian: <https://win-builder.r-project.org/incoming_pretest/dmdScheme_1.2.7_20210901_161445/Debian/00check.log>
>> Status: 1 NOTE
>> )
>> This only occurs on the CRAN server and I can not reproduce it with rhub or locally on my Mac with 4.1.1.
>> I can currently not check the level version, as it seems to be not compiling for Mac.
>> Could somebody give any guidance, how to fix this? Which one is the ?check directory"?
> 
> That's the one reported at the start of the log as the "log directory".
> 
> Fixing it is a little harder without more info.  That looks like a name that you would have created, given the name of your package.  You should look at your package source to figure out if there's an example or test that created it but didn't delete it.
> 

Thanks Duncan.


I will look at it and come back when I have further questions.

Rainer


> Duncan Murdoch

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From biii m@iii@g oii de@@ey@ws  Thu Sep  2 17:24:19 2021
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Thu, 2 Sep 2021 11:24:19 -0400
Subject: [R-pkg-devel] Unicode Name Warnings for Package Constant
Message-ID: <06b101d7a00e$99b792d0$cd26b870$@denney.ws>

Hello,

 

In the janitor package, we want to optionally support conversion from
Unicode characters that visually map to mu or micro to the character "u".
For that, we were thinking to create an unexported character vector constant
with names of all the Unicode mu/micro characters and values of "u".  As a
work-around, I was able to fix the issue using setNames(), but it was a
non-intuitive fix, and I would prefer to just use create the named character
vector directly.

 

Is there a good way to prevent the warnings below?

 

When running the following (on Windows 10 with R 4.1.0) either during a
normal R session or while checking the package (via devtools::check()), we
get several warnings:

 

mu_to_u <-

  c(

    "\u00b5"="u", "\u03bc"="u", "\u3382"="u", "\u338c"="u", "\u338d"="u",

    "\u3395"="u", "\u339b"="u", "\u33b2"="u", "\u33b6"="u", "\u33bc"="u"

  )

 

  Warnings in file 'R/clean_names.R':

    unable to translate '<U+3382>' to native encoding

    unable to translate '<U+338C>' to native encoding

    unable to translate '<U+338D>' to native encoding

    unable to translate '<U+3395>' to native encoding

    unable to translate '<U+339B>' to native encoding

    unable to translate '<U+33B2>' to native encoding

    unable to translate '<U+33B6>' to native encoding

    unable to translate '<U+33BC>' to native encoding

 

I tried wrapping this in suppressWarnings(), but the warnings still
occurred.

 

Thanks,

 

Bill


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Sep  2 18:18:17 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 2 Sep 2021 12:18:17 -0400
Subject: [R-pkg-devel] Unicode Name Warnings for Package Constant
In-Reply-To: <06b101d7a00e$99b792d0$cd26b870$@denney.ws>
References: <06b101d7a00e$99b792d0$cd26b870$@denney.ws>
Message-ID: <17b2a60c-e613-a7f4-7f32-500bbe5df2bc@gmail.com>

On 02/09/2021 11:24 a.m., bill at denney.ws wrote:
> Hello,
> 
>   
> 
> In the janitor package, we want to optionally support conversion from
> Unicode characters that visually map to mu or micro to the character "u".
> For that, we were thinking to create an unexported character vector constant
> with names of all the Unicode mu/micro characters and values of "u".  As a
> work-around, I was able to fix the issue using setNames(), but it was a
> non-intuitive fix, and I would prefer to just use create the named character
> vector directly.

I think the warning comes because on non-UTF8 platforms there are 
operations that will mess up names.  So using setNames() may fool the 
check, but it probably won't solve the problem.

On the other hand, I think all current platforms handle UTF8 data fine, 
so keeping the vector of characters as data should be fine.  Then the 
base chartr() function could do your translation for you.

To do the translation you want, you'd use something like

   original <- "45 \u00b5m"
 
chartr("\u00b5\u03bc\u3382\u338c\u338d\u3395\u339b\u33b2\u33b6\u33bc", 
"uuuuuuuuuu", original)

Duncan Murdoch


>   
> 
> Is there a good way to prevent the warnings below?
> 
>   
> 
> When running the following (on Windows 10 with R 4.1.0) either during a
> normal R session or while checking the package (via devtools::check()), we
> get several warnings:
> 
>   
> 
> mu_to_u <-
> 
>    c(
> 
>      "\u00b5"="u", "\u03bc"="u", "\u3382"="u", "\u338c"="u", "\u338d"="u",
> 
>      "\u3395"="u", "\u339b"="u", "\u33b2"="u", "\u33b6"="u", "\u33bc"="u"
> 
>    )
> 
>   
> 
>    Warnings in file 'R/clean_names.R':
> 
>      unable to translate '<U+3382>' to native encoding
> 
>      unable to translate '<U+338C>' to native encoding
> 
>      unable to translate '<U+338D>' to native encoding
> 
>      unable to translate '<U+3395>' to native encoding
> 
>      unable to translate '<U+339B>' to native encoding
> 
>      unable to translate '<U+33B2>' to native encoding
> 
>      unable to translate '<U+33B6>' to native encoding
> 
>      unable to translate '<U+33BC>' to native encoding
> 
>   
> 
> I tried wrapping this in suppressWarnings(), but the warnings still
> occurred.
> 
>   
> 
> Thanks,
> 
>   
> 
> Bill
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Sep  3 08:31:16 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 3 Sep 2021 08:31:16 +0200
Subject: [R-pkg-devel] Unicode Name Warnings for Package Constant
In-Reply-To: <06b101d7a00e$99b792d0$cd26b870$@denney.ws>
References: <06b101d7a00e$99b792d0$cd26b870$@denney.ws>
Message-ID: <20b757a0-1980-918d-7c9d-961fb018fae9@gmail.com>

In the current R releases, R symbol names are in the native encoding, 
which on Windows in R (the normal MSVCRT builds up to R 4.1) cannot be 
UTF-8 nor any other Unicode encoding. So you can't portably use such 
characters e.g. in names of vector elements or of bindings in an 
environment, so not even as keys in a hash map implemented using an 
environment.

This works in UCRT builds of Windows on recent Windows 10 (and on Unix 
and macOS for many years), but before that becomes the norm, it might be 
easiest to give up on this feature in your package. But, in principle, 
you can work with UTF-8 strings, sometimes (one needs to check the 
docs), but they cannot be R symbols. So you can do some operations e.g. 
with a vector like

c(mu = "\u00b5")

where the UTF-8 string is a value, not a name.

Best
Tomas


On 9/2/21 5:24 PM, bill at denney.ws wrote:
> Hello,
>
>   
>
> In the janitor package, we want to optionally support conversion from
> Unicode characters that visually map to mu or micro to the character "u".
> For that, we were thinking to create an unexported character vector constant
> with names of all the Unicode mu/micro characters and values of "u".  As a
> work-around, I was able to fix the issue using setNames(), but it was a
> non-intuitive fix, and I would prefer to just use create the named character
> vector directly.
>
>   
>
> Is there a good way to prevent the warnings below?
>
>   
>
> When running the following (on Windows 10 with R 4.1.0) either during a
> normal R session or while checking the package (via devtools::check()), we
> get several warnings:
>
>   
>
> mu_to_u <-
>
>    c(
>
>      "\u00b5"="u", "\u03bc"="u", "\u3382"="u", "\u338c"="u", "\u338d"="u",
>
>      "\u3395"="u", "\u339b"="u", "\u33b2"="u", "\u33b6"="u", "\u33bc"="u"
>
>    )
>
>   
>
>    Warnings in file 'R/clean_names.R':
>
>      unable to translate '<U+3382>' to native encoding
>
>      unable to translate '<U+338C>' to native encoding
>
>      unable to translate '<U+338D>' to native encoding
>
>      unable to translate '<U+3395>' to native encoding
>
>      unable to translate '<U+339B>' to native encoding
>
>      unable to translate '<U+33B2>' to native encoding
>
>      unable to translate '<U+33B6>' to native encoding
>
>      unable to translate '<U+33BC>' to native encoding
>
>   
>
> I tried wrapping this in suppressWarnings(), but the warnings still
> occurred.
>
>   
>
> Thanks,
>
>   
>
> Bill
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From cr@p@rede@c@ @end|ng |rom un@|@edu@co  Fri Sep  3 16:37:46 2021
From: cr@p@rede@c@ @end|ng |rom un@|@edu@co (Cristhian Paredes Cardona)
Date: Fri, 3 Sep 2021 09:37:46 -0500
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
Message-ID: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>

Dear All,

I'm trying to submit an R package to CRAN and there is a new warning that
did not use to appear a few days ago when checking with winbuilder (R under
development version):

Found the following significant warnings:
  Warning: 'memory.limit()' is no longer supported
See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for details.

Package build is attached and Check results when the warning did not
appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/

I would appreciate if someone could please provide me with some guide
on how to solve this issue.

Thanks in advance.

Sincerely,

Cristhian Paredes

-- 
*Aviso legal:*?El contenido de este mensaje y los archivos adjuntos son 
confidenciales y de uso exclusivo de la Universidad Nacional de Colombia. 
Se encuentran dirigidos s?lo para el uso del destinatario al cual van 
enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a 
cualquier persona diferente a este y puede ser ilegal. Si usted lo ha 
recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos 
Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra 
Pol?tica de Datos Personales que podr? consultar en la p?gina web?
www.unal.edu.co <http://www.unal.edu.co/>.*?*Las opiniones, informaciones, 
conclusiones y cualquier otro tipo de dato contenido en este correo 
electr?nico, no relacionados con la actividad de la Universidad Nacional de 
Colombia, se entender? como personales y de ninguna manera son avaladas por 
la Universidad.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: masscor_0.0.6.tar.gz
Type: application/x-gzip
Size: 428206 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210903/fa51007b/attachment.bin>

From mtmorg@n@b|oc @end|ng |rom gm@||@com  Fri Sep  3 17:58:04 2021
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Fri, 3 Sep 2021 15:58:04 +0000
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
 <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
 <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>
Message-ID: <BN8PR04MB6241FB37214426E64BE977FAF9CF9@BN8PR04MB6241.namprd04.prod.outlook.com>

The specific repository you've chosen is not what you want to do. This will always install EBImage from Bioconductor version 3.13, but Bioconductor version 3.13 is only relevant for R-4.1 (see https://bioconductor.org/about/release-announcements/)

Personally, I would encourage you to follow the Bioconductor community best practice of BiocManager::install("EBImage"). In that way you will get the version of EBImage that has been tested with other Bioconductor packages in the same release, and on the version of R in use by your user.

If you were to use a specific repository, it should the one that is as good as base R can do (this can be different from the version that BiocManager would choose because R's release cycle is different from Bioconductor's). I think this is most easily accomplished by utils::chooseBioCmirror(), and then selecting the 0-Bioconductor repository. That's a lot to tell your users... Maybe others in the R community have a better way (the key information is in tools:::.BioC_version_associated_with_R_version(), but that is not an exported function so not recommended for CRAN packages...)

Martin Morgan

?On 9/1/21, 8:13 AM, "R-package-devel on behalf of Tiago Olivoto" <r-package-devel-bounces at r-project.org on behalf of tiagoolivoto at gmail.com> wrote:

    Thank you, Duncan and Uwe for the suggestions.
     I followed your instructions and created a function to check for EBImage
    that is only called in an interactive section and, if necessary, ask the
    user to install the package with install.packages("EBImage", repos="
    https://bioconductor.org/packages/3.13/bioc")

    Best,
    Tiago

    Em qua., 1 de set. de 2021 ?s 03:53, Uwe Ligges <
    ligges at statistik.tu-dortmund.de> escreveu:

    > Two more comments.
    >
    > 1. Note that your code only works in interactice mode, not when checking
    > your package as it waits infinitely for the user's choice.
    >
    > 2. I do not see an advantage of installing BiocManager if EBImage is
    > needed, the essential part is simply to select BioC as a repository to
    > install packages from.
    >
    > Best,
    > Uwe Ligges
    >
    >
    > On 31.08.2021 23:33, Duncan Murdoch wrote:
    > > People shouldn't be able to install your package unless the "hard"
    > > dependencies are available.
    > >
    > > If EBImage isn't essential to your package, you should make it a "soft"
    > > dependency by listing it in Suggests and checking for it every time you
    > > use it.
    > >
    > > Duncan Murdoch
    > >
    > > On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
    > >> Dear all,
    > >> I have a package called pliman
    > >> <https://CRAN.R-project.org/package=pliman>
    > >> which depends on the Bioconductor package EBImage.
    > >>
    > >> When running install.packages("pliman") I get the following warning
    > >>
    > >> Warning in install.packages :  dependency ?EBImage? is not available
    > >>
    > >> and thus when loading the package with library(pliman), the following
    > >> error
    > >> occurs
    > >>
    > >> Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
    > >> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
    > >>   there is no package called ?EBImage?
    > >>
    > >> I created a check function to check if EBImage is available and if
    > >> not, ask
    > >> users if they want to install it
    > >>
    > >> ---
    > >> check_ebi <- function(){
    > >>    if(!requireNamespace("EBImage", quietly = TRUE)) {
    > >>      inst <-
    > >>      switch(menu(c("Yes", "No"), title = "Package {EBImage} required
    > >> but not
    > >> available.\nDo you want to install it now?"),
    > >>             "yes", "no")
    > >>      if(inst == "yes"){
    > >>        if (!requireNamespace("BiocManager", quietly = TRUE)){
    > >>          install.packages("BiocManager")
    > >>        }
    > >>        BiocManager::install("EBImage", ask = FALSE, update = FALSE)
    > >>      } else{
    > >>        message("To use {pliman}, first install {EBImage} with
    > >> 'BiocManager::install(\"EBImage\")'.")
    > >>      }
    > >>    }
    > >> }
    > >> ---
    > >>
    > >> Is there any way to run this function prior to namespace loading? I
    > tried
    > >> putting check_ebi() into .onLoad() but the same error occurs.
    > >>
    > >> Thanks in advance for any suggestions.
    > >> Tiago
    > >>
    > >>     [[alternative HTML version deleted]]
    > >>
    > >> ______________________________________________
    > >> R-package-devel at r-project.org mailing list
    > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    > >>
    > >
    > > ______________________________________________
    > > R-package-devel at r-project.org mailing list
    > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >

    	[[alternative HTML version deleted]]

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel

From brod|e@g@@|@m @end|ng |rom y@hoo@com  Fri Sep  3 18:18:35 2021
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Fri, 3 Sep 2021 16:18:35 +0000 (UTC)
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
In-Reply-To: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
References: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
Message-ID: <1032922842.2654595.1630685915856@mail.yahoo.com>

There was a recent changed made to R to remove that option.
There is documentation visible in the patch that explains it:

https://github.com/r-devel/r-svn/commit/795fb3fe60d35734750afbc34cc7d36b19290b9c

Presumably you would have to remove any uses of the now
unsupported functions.? After the patch, the only thing those
functions do is issue the warning.

Best,

B.


On Friday, September 3, 2021, 11:39:03 AM EDT, Cristhian Paredes Cardona <craparedesca at unal.edu.co> wrote: 



Dear All,

I'm trying to submit an R package to CRAN and there is a new warning that
did not use to appear a few days ago when checking with winbuilder (R under
development version):

Found the following significant warnings:
? Warning: 'memory.limit()' is no longer supported
See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for details.

Package build is attached and Check results when the warning did not
appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/

I would appreciate if someone could please provide me with some guide
on how to solve this issue.

Thanks in advance.

Sincerely,

Cristhian Paredes

-- 
*Aviso legal:*?El contenido de este mensaje y los archivos adjuntos son 
confidenciales y de uso exclusivo de la Universidad Nacional de Colombia. 
Se encuentran dirigidos s?lo para el uso del destinatario al cual van 
enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a 
cualquier persona diferente a este y puede ser ilegal. Si usted lo ha 
recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos 
Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra 
Pol?tica de Datos Personales que podr? consultar en la p?gina web?
www.unal.edu.co <http://www.unal.edu.co/>.*?*Las opiniones, informaciones, 
conclusiones y cualquier otro tipo de dato contenido en este correo 
electr?nico, no relacionados con la actividad de la Universidad Nacional de 
Colombia, se entender? como personales y de ninguna manera son avaladas por 
la Universidad.
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Fri Sep  3 18:21:45 2021
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Fri, 3 Sep 2021 16:21:45 +0000 (UTC)
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
In-Reply-To: <1032922842.2654595.1630685915856@mail.yahoo.com>
References: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
 <1032922842.2654595.1630685915856@mail.yahoo.com>
Message-ID: <1680485377.2663825.1630686105739@mail.yahoo.com>

Or you might need to make their use conditional on the R
version.? It is possible that the call is still needed if your
package is run on older versions of R.? I am not familiar with
the general use of this though.? I only noticed the change
in R-devel and linked it to your question.

Best,

B.


On Friday, September 3, 2021, 12:18:35 PM EDT, brodie gaslam <brodie.gaslam at yahoo.com> wrote: 


There was a recent changed made to R to remove that option.
There is documentation visible in the patch that explains it:

https://github.com/r-devel/r-svn/commit/795fb3fe60d35734750afbc34cc7d36b19290b9c

Presumably you would have to remove any uses of the now
unsupported functions.? After the patch, the only thing those
functions do is issue the warning.

Best,

B.


On Friday, September 3, 2021, 11:39:03 AM EDT, Cristhian Paredes Cardona <craparedesca at unal.edu.co> wrote: 



Dear All,

I'm trying to submit an R package to CRAN and there is a new warning that
did not use to appear a few days ago when checking with winbuilder (R under
development version):

Found the following significant warnings:
? Warning: 'memory.limit()' is no longer supported
See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for details.

Package build is attached and Check results when the warning did not
appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/

I would appreciate if someone could please provide me with some guide
on how to solve this issue.

Thanks in advance.

Sincerely,

Cristhian Paredes

-- 
*Aviso legal:*?El contenido de este mensaje y los archivos adjuntos son 
confidenciales y de uso exclusivo de la Universidad Nacional de Colombia. 
Se encuentran dirigidos s?lo para el uso del destinatario al cual van 
enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a 
cualquier persona diferente a este y puede ser ilegal. Si usted lo ha 
recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos 
Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra 
Pol?tica de Datos Personales que podr? consultar en la p?gina web?
www.unal.edu.co <http://www.unal.edu.co/>.*?*Las opiniones, informaciones, 
conclusiones y cualquier otro tipo de dato contenido en este correo 
electr?nico, no relacionados con la actividad de la Universidad Nacional de 
Colombia, se entender? como personales y de ninguna manera son avaladas por 
la Universidad.
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Fri Sep  3 18:25:33 2021
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini S.)
Date: Fri, 3 Sep 2021 12:25:33 -0400
Subject: [R-pkg-devel] system.file duplicates the path
Message-ID: <CAOxgwDADpXOjzAA7wH2RqWqVRcF-vA0iubstSkhNynQtbJfFyg@mail.gmail.com>

Dear All:

I submitted a package to CRAN. I developed it in DEBIAN and tested it in
R-HUB windows devel, windows release, and macOS. None of the systems throw
an
error to me, and I mainly get notes about the package archived condition.

However, the package failed at win-builder devel, as in one of the tests I
call
base::system.file to read a file and the function --only there-- returns
the file
path twice.

Does system.file work differently on windows?

You can check out CRAN win-builder check.log at:
<
https://win-builder.r-project.org/incoming_pretest/uFTIR_0.1.3_20210903_174243/Windows/00check.log
>

Kind regards,
Fabio

-- 


	[[alternative HTML version deleted]]


From cr@p@rede@c@ @end|ng |rom un@|@edu@co  Fri Sep  3 19:10:08 2021
From: cr@p@rede@c@ @end|ng |rom un@|@edu@co (Cristhian Paredes Cardona)
Date: Fri, 3 Sep 2021 12:10:08 -0500
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
In-Reply-To: <1680485377.2663825.1630686105739@mail.yahoo.com>
References: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
 <1032922842.2654595.1630685915856@mail.yahoo.com>
 <1680485377.2663825.1630686105739@mail.yahoo.com>
Message-ID: <CAGshqEm2=N7j8cuKNYBxH-4meNRALCa3iRDkbZZpUEcOpWWDgQ@mail.gmail.com>

Dear Brodie Gaslam,

Thank you for your quick reply.
Do you maybe know how could I avoid the use of  'memory.limit()' during
package installation?
Best,
Cristhian Paredes

El vie, 3 sept 2021 a las 11:21, brodie gaslam (<brodie.gaslam at yahoo.com>)
escribi?:

> Or you might need to make their use conditional on the R
> version.  It is possible that the call is still needed if your
> package is run on older versions of R.  I am not familiar with
> the general use of this though.  I only noticed the change
> in R-devel and linked it to your question.
>
> Best,
>
> B.
>
>
> On Friday, September 3, 2021, 12:18:35 PM EDT, brodie gaslam <
> brodie.gaslam at yahoo.com> wrote:
>
>
> There was a recent changed made to R to remove that option.
> There is documentation visible in the patch that explains it:
>
>
> https://github.com/r-devel/r-svn/commit/795fb3fe60d35734750afbc34cc7d36b19290b9c
>
> Presumably you would have to remove any uses of the now
> unsupported functions.  After the patch, the only thing those
> functions do is issue the warning.
>
> Best,
>
> B.
>
>
> On Friday, September 3, 2021, 11:39:03 AM EDT, Cristhian Paredes Cardona <
> craparedesca at unal.edu.co> wrote:
>
>
>
> Dear All,
>
> I'm trying to submit an R package to CRAN and there is a new warning that
> did not use to appear a few days ago when checking with winbuilder (R under
> development version):
>
> Found the following significant warnings:
>   Warning: 'memory.limit()' is no longer supported
> See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for
> details.
>
> Package build is attached and Check results when the warning did not
> appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/
>
> I would appreciate if someone could please provide me with some guide
> on how to solve this issue.
>
> Thanks in advance.
>
> Sincerely,
>
> Cristhian Paredes
>
> --
> *Aviso legal:* El contenido de este mensaje y los archivos adjuntos son
> confidenciales y de uso exclusivo de la Universidad Nacional de Colombia.
> Se encuentran dirigidos s?lo para el uso del destinatario al cual van
> enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a
> cualquier persona diferente a este y puede ser ilegal. Si usted lo ha
> recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos
> Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra
> Pol?tica de Datos Personales que podr? consultar en la p?gina web
> www.unal.edu.co <http://www.unal.edu.co/>.* *Las opiniones,
> informaciones,
> conclusiones y cualquier otro tipo de dato contenido en este correo
> electr?nico, no relacionados con la actividad de la Universidad Nacional
> de
> Colombia, se entender? como personales y de ninguna manera son avaladas
> por
> la Universidad.
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
*Aviso legal:*?El contenido de este mensaje y los archivos adjuntos son 
confidenciales y de uso exclusivo de la Universidad Nacional de Colombia. 
Se encuentran dirigidos s?lo para el uso del destinatario al cual van 
enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a 
cualquier persona diferente a este y puede ser ilegal. Si usted lo ha 
recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos 
Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra 
Pol?tica de Datos Personales que podr? consultar en la p?gina web?
www.unal.edu.co <http://www.unal.edu.co/>.*?*Las opiniones, informaciones, 
conclusiones y cualquier otro tipo de dato contenido en este correo 
electr?nico, no relacionados con la actividad de la Universidad Nacional de 
Colombia, se entender? como personales y de ninguna manera son avaladas por 
la Universidad.

	[[alternative HTML version deleted]]


From kr|@h@ng @end|ng |rom |||td@@c@|n  Fri Sep  3 19:13:39 2021
From: kr|@h@ng @end|ng |rom |||td@@c@|n (Krishan Gupta)
Date: Fri, 3 Sep 2021 13:13:39 -0400
Subject: [R-pkg-devel] (no subject)
Message-ID: <CAEW5xfRXc_H2HJ-7fLkfMZ0H0Q3fukh5yGKQbxFnEZNHXFmpBA@mail.gmail.com>

Please please stop sending emil to me. i want to not recieve more mails.

*Best regards,*

*Krishan Gupta*
*PhD scholar, the Sengupta Laboratory*

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Fri Sep  3 19:30:27 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 3 Sep 2021 13:30:27 -0400
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CAEW5xfRXc_H2HJ-7fLkfMZ0H0Q3fukh5yGKQbxFnEZNHXFmpBA@mail.gmail.com>
References: <CAEW5xfRXc_H2HJ-7fLkfMZ0H0Q3fukh5yGKQbxFnEZNHXFmpBA@mail.gmail.com>
Message-ID: <9b20d196-b227-0e3a-e618-a21eed447e73@gmail.com>

   You can go to the URL that is at the bottom of every message from 
this list <https://stat.ethz.ch/mailman/listinfo/r-package-devel> and 
search for "unsubscribe" in the page ...

On 9/3/21 1:13 PM, Krishan Gupta wrote:
> Please please stop sending emil to me. i want to not recieve more mails.
> 
> *Best regards,*
> 
> *Krishan Gupta*
> *PhD scholar, the Sengupta Laboratory*
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
   cheers
    Ben Bolker


From t|@goo||voto @end|ng |rom gm@||@com  Fri Sep  3 20:13:57 2021
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Fri, 3 Sep 2021 15:13:57 -0300
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <BN8PR04MB6241FB37214426E64BE977FAF9CF9@BN8PR04MB6241.namprd04.prod.outlook.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
 <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
 <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>
 <BN8PR04MB6241FB37214426E64BE977FAF9CF9@BN8PR04MB6241.namprd04.prod.outlook.com>
Message-ID: <CAMyz+tXZEgrfTg-AqBEtMRUO_7rKmXdDCBSe_2GT_JCrScHdew@mail.gmail.com>

Thanks for your response Martin,
I'm definitely thinking to use BiocManager::install("EBImage") since it is
the official suggestion of the Bioconductor community. Anyway, I've been
learning a lot from this discussion. Thanks all!!
Best,
Tiago

Em sex., 3 de set. de 2021 ?s 12:58, Martin Morgan <mtmorgan.bioc at gmail.com>
escreveu:

> The specific repository you've chosen is not what you want to do. This
> will always install EBImage from Bioconductor version 3.13, but
> Bioconductor version 3.13 is only relevant for R-4.1 (see
> https://bioconductor.org/about/release-announcements/)
>
> Personally, I would encourage you to follow the Bioconductor community
> best practice of BiocManager::install("EBImage"). In that way you will get
> the version of EBImage that has been tested with other Bioconductor
> packages in the same release, and on the version of R in use by your user.
>
> If you were to use a specific repository, it should the one that is as
> good as base R can do (this can be different from the version that
> BiocManager would choose because R's release cycle is different from
> Bioconductor's). I think this is most easily accomplished by
> utils::chooseBioCmirror(), and then selecting the 0-Bioconductor
> repository. That's a lot to tell your users... Maybe others in the R
> community have a better way (the key information is in
> tools:::.BioC_version_associated_with_R_version(), but that is not an
> exported function so not recommended for CRAN packages...)
>
> Martin Morgan
>
> ?On 9/1/21, 8:13 AM, "R-package-devel on behalf of Tiago Olivoto" <
> r-package-devel-bounces at r-project.org on behalf of tiagoolivoto at gmail.com>
> wrote:
>
>     Thank you, Duncan and Uwe for the suggestions.
>      I followed your instructions and created a function to check for
> EBImage
>     that is only called in an interactive section and, if necessary, ask
> the
>     user to install the package with install.packages("EBImage", repos="
>     https://bioconductor.org/packages/3.13/bioc")
>
>     Best,
>     Tiago
>
>     Em qua., 1 de set. de 2021 ?s 03:53, Uwe Ligges <
>     ligges at statistik.tu-dortmund.de> escreveu:
>
>     > Two more comments.
>     >
>     > 1. Note that your code only works in interactice mode, not when
> checking
>     > your package as it waits infinitely for the user's choice.
>     >
>     > 2. I do not see an advantage of installing BiocManager if EBImage is
>     > needed, the essential part is simply to select BioC as a repository
> to
>     > install packages from.
>     >
>     > Best,
>     > Uwe Ligges
>     >
>     >
>     > On 31.08.2021 23:33, Duncan Murdoch wrote:
>     > > People shouldn't be able to install your package unless the "hard"
>     > > dependencies are available.
>     > >
>     > > If EBImage isn't essential to your package, you should make it a
> "soft"
>     > > dependency by listing it in Suggests and checking for it every
> time you
>     > > use it.
>     > >
>     > > Duncan Murdoch
>     > >
>     > > On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
>     > >> Dear all,
>     > >> I have a package called pliman
>     > >> <https://CRAN.R-project.org/package=pliman>
>     > >> which depends on the Bioconductor package EBImage.
>     > >>
>     > >> When running install.packages("pliman") I get the following
> warning
>     > >>
>     > >> Warning in install.packages :  dependency ?EBImage? is not
> available
>     > >>
>     > >> and thus when loading the package with library(pliman), the
> following
>     > >> error
>     > >> occurs
>     > >>
>     > >> Erro: package or namespace load failed for ?pliman? in
> loadNamespace(i,
>     > >> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
>     > >>   there is no package called ?EBImage?
>     > >>
>     > >> I created a check function to check if EBImage is available and if
>     > >> not, ask
>     > >> users if they want to install it
>     > >>
>     > >> ---
>     > >> check_ebi <- function(){
>     > >>    if(!requireNamespace("EBImage", quietly = TRUE)) {
>     > >>      inst <-
>     > >>      switch(menu(c("Yes", "No"), title = "Package {EBImage}
> required
>     > >> but not
>     > >> available.\nDo you want to install it now?"),
>     > >>             "yes", "no")
>     > >>      if(inst == "yes"){
>     > >>        if (!requireNamespace("BiocManager", quietly = TRUE)){
>     > >>          install.packages("BiocManager")
>     > >>        }
>     > >>        BiocManager::install("EBImage", ask = FALSE, update =
> FALSE)
>     > >>      } else{
>     > >>        message("To use {pliman}, first install {EBImage} with
>     > >> 'BiocManager::install(\"EBImage\")'.")
>     > >>      }
>     > >>    }
>     > >> }
>     > >> ---
>     > >>
>     > >> Is there any way to run this function prior to namespace loading?
> I
>     > tried
>     > >> putting check_ebi() into .onLoad() but the same error occurs.
>     > >>
>     > >> Thanks in advance for any suggestions.
>     > >> Tiago
>     > >>
>     > >>     [[alternative HTML version deleted]]
>     > >>
>     > >> ______________________________________________
>     > >> R-package-devel at r-project.org mailing list
>     > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     > >>
>     > >
>     > > ______________________________________________
>     > > R-package-devel at r-project.org mailing list
>     > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >
>
>         [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Sep  3 20:51:39 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 3 Sep 2021 20:51:39 +0200
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
In-Reply-To: <CAGshqEm2=N7j8cuKNYBxH-4meNRALCa3iRDkbZZpUEcOpWWDgQ@mail.gmail.com>
References: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
 <1032922842.2654595.1630685915856@mail.yahoo.com>
 <1680485377.2663825.1630686105739@mail.yahoo.com>
 <CAGshqEm2=N7j8cuKNYBxH-4meNRALCa3iRDkbZZpUEcOpWWDgQ@mail.gmail.com>
Message-ID: <df07d569-f899-41ba-4e28-0de1ca147808@gmail.com>

Dear Cristhian,

memory.limit() is called by package "ff" when it is loaded. Your new 
package uses "ff" via "propagate". Perhaps the easiest option for you is 
to re-try the submission once "ff" is adapted to this change in R-devel.

Best
Tomas

On 9/3/21 7:10 PM, Cristhian Paredes Cardona wrote:
> Dear Brodie Gaslam,
>
> Thank you for your quick reply.
> Do you maybe know how could I avoid the use of  'memory.limit()' during
> package installation?
> Best,
> Cristhian Paredes
>
> El vie, 3 sept 2021 a las 11:21, brodie gaslam (<brodie.gaslam at yahoo.com>)
> escribi?:
>
>> Or you might need to make their use conditional on the R
>> version.  It is possible that the call is still needed if your
>> package is run on older versions of R.  I am not familiar with
>> the general use of this though.  I only noticed the change
>> in R-devel and linked it to your question.
>>
>> Best,
>>
>> B.
>>
>>
>> On Friday, September 3, 2021, 12:18:35 PM EDT, brodie gaslam <
>> brodie.gaslam at yahoo.com> wrote:
>>
>>
>> There was a recent changed made to R to remove that option.
>> There is documentation visible in the patch that explains it:
>>
>>
>> https://github.com/r-devel/r-svn/commit/795fb3fe60d35734750afbc34cc7d36b19290b9c
>>
>> Presumably you would have to remove any uses of the now
>> unsupported functions.  After the patch, the only thing those
>> functions do is issue the warning.
>>
>> Best,
>>
>> B.
>>
>>
>> On Friday, September 3, 2021, 11:39:03 AM EDT, Cristhian Paredes Cardona <
>> craparedesca at unal.edu.co> wrote:
>>
>>
>>
>> Dear All,
>>
>> I'm trying to submit an R package to CRAN and there is a new warning that
>> did not use to appear a few days ago when checking with winbuilder (R under
>> development version):
>>
>> Found the following significant warnings:
>>    Warning: 'memory.limit()' is no longer supported
>> See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for
>> details.
>>
>> Package build is attached and Check results when the warning did not
>> appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/
>>
>> I would appreciate if someone could please provide me with some guide
>> on how to solve this issue.
>>
>> Thanks in advance.
>>
>> Sincerely,
>>
>> Cristhian Paredes
>>
>> --
>> *Aviso legal:* El contenido de este mensaje y los archivos adjuntos son
>> confidenciales y de uso exclusivo de la Universidad Nacional de Colombia.
>> Se encuentran dirigidos s?lo para el uso del destinatario al cual van
>> enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a
>> cualquier persona diferente a este y puede ser ilegal. Si usted lo ha
>> recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos
>> Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra
>> Pol?tica de Datos Personales que podr? consultar en la p?gina web
>> www.unal.edu.co <http://www.unal.edu.co/>.* *Las opiniones,
>> informaciones,
>> conclusiones y cualquier otro tipo de dato contenido en este correo
>> electr?nico, no relacionados con la actividad de la Universidad Nacional
>> de
>> Colombia, se entender? como personales y de ninguna manera son avaladas
>> por
>> la Universidad.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From cr@p@rede@c@ @end|ng |rom un@|@edu@co  Fri Sep  3 21:03:31 2021
From: cr@p@rede@c@ @end|ng |rom un@|@edu@co (Cristhian Paredes Cardona)
Date: Fri, 3 Sep 2021 14:03:31 -0500
Subject: [R-pkg-devel] (R-devel unknown warning: 'memory.limit()' is no
 longer supported)
In-Reply-To: <df07d569-f899-41ba-4e28-0de1ca147808@gmail.com>
References: <CAGshqEkPyBRZqiWyV0Cq5D9P82C1jDOZfWLVw3GuGGbp0KuKRw@mail.gmail.com>
 <1032922842.2654595.1630685915856@mail.yahoo.com>
 <1680485377.2663825.1630686105739@mail.yahoo.com>
 <CAGshqEm2=N7j8cuKNYBxH-4meNRALCa3iRDkbZZpUEcOpWWDgQ@mail.gmail.com>
 <df07d569-f899-41ba-4e28-0de1ca147808@gmail.com>
Message-ID: <CAGshqEnWiq_dJbGp5rxrVC5f3uYF18AmRg9KYceUw9WovfG1zA@mail.gmail.com>

Dear Tomas Kalibera,

Thank you so much for the information.
I'll use an alternative package to 'propagate' ('metRology') hoping the
warning will disappear.

Thanks to all the community for their time.
Best regards.
Cristhian



El vie, 3 sept 2021 a las 13:51, Tomas Kalibera (<tomas.kalibera at gmail.com>)
escribi?:

> Dear Cristhian,
>
> memory.limit() is called by package "ff" when it is loaded. Your new
> package uses "ff" via "propagate". Perhaps the easiest option for you is
> to re-try the submission once "ff" is adapted to this change in R-devel.
>
> Best
> Tomas
>
> On 9/3/21 7:10 PM, Cristhian Paredes Cardona wrote:
> > Dear Brodie Gaslam,
> >
> > Thank you for your quick reply.
> > Do you maybe know how could I avoid the use of  'memory.limit()' during
> > package installation?
> > Best,
> > Cristhian Paredes
> >
> > El vie, 3 sept 2021 a las 11:21, brodie gaslam (<brodie.gaslam at yahoo.com
> >)
> > escribi?:
> >
> >> Or you might need to make their use conditional on the R
> >> version.  It is possible that the call is still needed if your
> >> package is run on older versions of R.  I am not familiar with
> >> the general use of this though.  I only noticed the change
> >> in R-devel and linked it to your question.
> >>
> >> Best,
> >>
> >> B.
> >>
> >>
> >> On Friday, September 3, 2021, 12:18:35 PM EDT, brodie gaslam <
> >> brodie.gaslam at yahoo.com> wrote:
> >>
> >>
> >> There was a recent changed made to R to remove that option.
> >> There is documentation visible in the patch that explains it:
> >>
> >>
> >>
> https://github.com/r-devel/r-svn/commit/795fb3fe60d35734750afbc34cc7d36b19290b9c
> >>
> >> Presumably you would have to remove any uses of the now
> >> unsupported functions.  After the patch, the only thing those
> >> functions do is issue the warning.
> >>
> >> Best,
> >>
> >> B.
> >>
> >>
> >> On Friday, September 3, 2021, 11:39:03 AM EDT, Cristhian Paredes
> Cardona <
> >> craparedesca at unal.edu.co> wrote:
> >>
> >>
> >>
> >> Dear All,
> >>
> >> I'm trying to submit an R package to CRAN and there is a new warning
> that
> >> did not use to appear a few days ago when checking with winbuilder (R
> under
> >> development version):
> >>
> >> Found the following significant warnings:
> >>    Warning: 'memory.limit()' is no longer supported
> >> See 'd:/RCompile/CRANincoming/R-devel/masscor.Rcheck/00install.out' for
> >> details.
> >>
> >> Package build is attached and Check results when the warning did not
> >> appear are at: https://win-builder.r-project.org/2zQe5ZnEci31/
> >>
> >> I would appreciate if someone could please provide me with some guide
> >> on how to solve this issue.
> >>
> >> Thanks in advance.
> >>
> >> Sincerely,
> >>
> >> Cristhian Paredes
> >>
> >> --
> >> *Aviso legal:* El contenido de este mensaje y los archivos adjuntos son
> >> confidenciales y de uso exclusivo de la Universidad Nacional de
> Colombia.
> >> Se encuentran dirigidos s?lo para el uso del destinatario al cual van
> >> enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a
> >> cualquier persona diferente a este y puede ser ilegal. Si usted lo ha
> >> recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos
> >> Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra
> >> Pol?tica de Datos Personales que podr? consultar en la p?gina web
> >> www.unal.edu.co <http://www.unal.edu.co/>.* *Las opiniones,
> >> informaciones,
> >> conclusiones y cualquier otro tipo de dato contenido en este correo
> >> electr?nico, no relacionados con la actividad de la Universidad Nacional
> >> de
> >> Colombia, se entender? como personales y de ninguna manera son avaladas
> >> por
> >> la Universidad.
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
>

-- 
*Aviso legal:*?El contenido de este mensaje y los archivos adjuntos son 
confidenciales y de uso exclusivo de la Universidad Nacional de Colombia. 
Se encuentran dirigidos s?lo para el uso del destinatario al cual van 
enviados. La reproducci?n, lectura y/o copia se encuentran prohibidas a 
cualquier persona diferente a este y puede ser ilegal. Si usted lo ha 
recibido por error, inf?rmenos y elim?nelo de su correo. Los Datos 
Personales ser?n tratados conforme a la Ley 1581 de 2012 y a nuestra 
Pol?tica de Datos Personales que podr? consultar en la p?gina web?
www.unal.edu.co <http://www.unal.edu.co/>.*?*Las opiniones, informaciones, 
conclusiones y cualquier otro tipo de dato contenido en este correo 
electr?nico, no relacionados con la actividad de la Universidad Nacional de 
Colombia, se entender? como personales y de ninguna manera son avaladas por 
la Universidad.

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Sun Sep  5 04:45:40 2021
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Sun, 5 Sep 2021 02:45:40 +0000
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <CAMyz+tXZEgrfTg-AqBEtMRUO_7rKmXdDCBSe_2GT_JCrScHdew@mail.gmail.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
 <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
 <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>
 <BN8PR04MB6241FB37214426E64BE977FAF9CF9@BN8PR04MB6241.namprd04.prod.outlook.com>
 <CAMyz+tXZEgrfTg-AqBEtMRUO_7rKmXdDCBSe_2GT_JCrScHdew@mail.gmail.com>
Message-ID: <BN8PR04MB6241A874AE74ACDB9FCDD9FAF9D19@BN8PR04MB6241.namprd04.prod.outlook.com>

Actually, I think the right thing to do is to tell the user what to do ("To use this feature, install EBImage following the directions at https://bioconductor.org/packages/EBImage') instead of doing it for them.

Martin

From: Tiago Olivoto <tiagoolivoto at gmail.com>
Date: Friday, September 3, 2021 at 2:14 PM
To: Martin Morgan <mtmorgan.bioc at gmail.com>
Cc: Uwe Ligges <ligges at statistik.tu-dortmund.de>, R Package Devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Checking package dependencies before loading namespace
Thanks for your response?Martin,
I'm definitely?thinking to use?BiocManager::install("EBImage") since it is the official suggestion of the Bioconductor community. Anyway, I've been learning a lot from this discussion. Thanks all!!
Best,
Tiago

Em sex., 3 de set. de 2021 ?s 12:58, Martin Morgan <mailto:mtmorgan.bioc at gmail.com> escreveu:
The specific repository you've chosen is not what you want to do. This will always install EBImage from Bioconductor version 3.13, but Bioconductor version 3.13 is only relevant for R-4.1 (see https://bioconductor.org/about/release-announcements/)

Personally, I would encourage you to follow the Bioconductor community best practice of BiocManager::install("EBImage"). In that way you will get the version of EBImage that has been tested with other Bioconductor packages in the same release, and on the version of R in use by your user.

If you were to use a specific repository, it should the one that is as good as base R can do (this can be different from the version that BiocManager would choose because R's release cycle is different from Bioconductor's). I think this is most easily accomplished by utils::chooseBioCmirror(), and then selecting the 0-Bioconductor repository. That's a lot to tell your users... Maybe others in the R community have a better way (the key information is in tools:::.BioC_version_associated_with_R_version(), but that is not an exported function so not recommended for CRAN packages...)

Martin Morgan

?On 9/1/21, 8:13 AM, "R-package-devel on behalf of Tiago Olivoto" <mailto:r-package-devel-bounces at r-project.org on behalf of mailto:tiagoolivoto at gmail.com> wrote:

? ? Thank you, Duncan and Uwe for the suggestions.
? ? ?I followed your instructions and created a function to check for EBImage
? ? that is only called in an interactive section and, if necessary, ask the
? ? user to install the package with install.packages("EBImage", repos="
? ? https://bioconductor.org/packages/3.13/bioc")

? ? Best,
? ? Tiago

? ? Em qua., 1 de set. de 2021 ?s 03:53, Uwe Ligges <
? ? mailto:ligges at statistik.tu-dortmund.de> escreveu:

? ? > Two more comments.
? ? >
? ? > 1. Note that your code only works in interactice mode, not when checking
? ? > your package as it waits infinitely for the user's choice.
? ? >
? ? > 2. I do not see an advantage of installing BiocManager if EBImage is
? ? > needed, the essential part is simply to select BioC as a repository to
? ? > install packages from.
? ? >
? ? > Best,
? ? > Uwe Ligges
? ? >
? ? >
? ? > On 31.08.2021 23:33, Duncan Murdoch wrote:
? ? > > People shouldn't be able to install your package unless the "hard"
? ? > > dependencies are available.
? ? > >
? ? > > If EBImage isn't essential to your package, you should make it a "soft"
? ? > > dependency by listing it in Suggests and checking for it every time you
? ? > > use it.
? ? > >
? ? > > Duncan Murdoch
? ? > >
? ? > > On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
? ? > >> Dear all,
? ? > >> I have a package called pliman
? ? > >> <https://CRAN.R-project.org/package=pliman>
? ? > >> which depends on the Bioconductor package EBImage.
? ? > >>
? ? > >> When running install.packages("pliman") I get the following warning
? ? > >>
? ? > >> Warning in install.packages :? dependency ?EBImage? is not available
? ? > >>
? ? > >> and thus when loading the package with library(pliman), the following
? ? > >> error
? ? > >> occurs
? ? > >>
? ? > >> Erro: package or namespace load failed for ?pliman? in loadNamespace(i,
? ? > >> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
? ? > >>? ?there is no package called ?EBImage?
? ? > >>
? ? > >> I created a check function to check if EBImage is available and if
? ? > >> not, ask
? ? > >> users if they want to install it
? ? > >>
? ? > >> ---
? ? > >> check_ebi <- function(){
? ? > >>? ? if(!requireNamespace("EBImage", quietly = TRUE)) {
? ? > >>? ? ? inst <-
? ? > >>? ? ? switch(menu(c("Yes", "No"), title = "Package {EBImage} required
? ? > >> but not
? ? > >> available.\nDo you want to install it now?"),
? ? > >>? ? ? ? ? ? ?"yes", "no")
? ? > >>? ? ? if(inst == "yes"){
? ? > >>? ? ? ? if (!requireNamespace("BiocManager", quietly = TRUE)){
? ? > >>? ? ? ? ? install.packages("BiocManager")
? ? > >>? ? ? ? }
? ? > >>? ? ? ? BiocManager::install("EBImage", ask = FALSE, update = FALSE)
? ? > >>? ? ? } else{
? ? > >>? ? ? ? message("To use {pliman}, first install {EBImage} with
? ? > >> 'BiocManager::install(\"EBImage\")'.")
? ? > >>? ? ? }
? ? > >>? ? }
? ? > >> }
? ? > >> ---
? ? > >>
? ? > >> Is there any way to run this function prior to namespace loading? I
? ? > tried
? ? > >> putting check_ebi() into .onLoad() but the same error occurs.
? ? > >>
? ? > >> Thanks in advance for any suggestions.
? ? > >> Tiago
? ? > >>
? ? > >>? ? ?[[alternative HTML version deleted]]
? ? > >>
? ? > >> ______________________________________________
? ? > >> mailto:R-package-devel at r-project.org mailing list
? ? > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
? ? > >>
? ? > >
? ? > > ______________________________________________
? ? > > mailto:R-package-devel at r-project.org mailing list
? ? > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
? ? >

? ? ? ? [[alternative HTML version deleted]]

? ? ______________________________________________
? ? mailto:R-package-devel at r-project.org mailing list
? ? https://stat.ethz.ch/mailman/listinfo/r-package-devel

From brod|e@g@@|@m @end|ng |rom y@hoo@com  Sun Sep  5 23:05:31 2021
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Sun, 5 Sep 2021 21:05:31 +0000 (UTC)
Subject: [R-pkg-devel] system.file duplicates the path
In-Reply-To: <CAOxgwDADpXOjzAA7wH2RqWqVRcF-vA0iubstSkhNynQtbJfFyg@mail.gmail.com>
References: <CAOxgwDADpXOjzAA7wH2RqWqVRcF-vA0iubstSkhNynQtbJfFyg@mail.gmail.com>
Message-ID: <1550915770.3146959.1630875931915@mail.yahoo.com>

Fabio,

Judging from prior versions of your package, the function `tile_read`
makes many assumptions as to what paths will look like, and also
modifies paths.? In this case, it appears to be thrown off by either
the lower case drive name, or the forward slashes in the path.? Presumably
winbuilder is now running in a configuration that does different things
with paths.

Under those new paths, your code will double up the path by pre-pending
the current working directory.? This is not a `system.file` issue.

I just took the second part of (grabbed from the error message):

'd:/RCompile/CRANincoming/R-devel/uFTIR.Rcheck/d:/RCompile/CRANincoming/R-devel/lib/uFTIR/extdata/tile.bsp'

and fed it to your function from the prior version of your package
and was able to produce a doubled up path as above.

Best,

B.

PS: with this type of thing it is always helpful if you can provide a
link to an online repository with the version of the code that you
are trying to submit.




On Friday, September 3, 2021, 12:29:02 PM EDT, Fabio Corradini S. <fabio.corradini at inia.cl> wrote: 





Dear All:

I submitted a package to CRAN. I developed it in DEBIAN and tested it in
R-HUB windows devel, windows release, and macOS. None of the systems throw
an
error to me, and I mainly get notes about the package archived condition.

However, the package failed at win-builder devel, as in one of the tests I
call
base::system.file to read a file and the function --only there-- returns
the file
path twice.

Does system.file work differently on windows?

You can check out CRAN win-builder check.log at:
<
https://win-builder.r-project.org/incoming_pretest/uFTIR_0.1.3_20210903_174243/Windows/00check.log
>

Kind regards,
Fabio

-- 


??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From t|@goo||voto @end|ng |rom gm@||@com  Mon Sep  6 12:43:03 2021
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Mon, 6 Sep 2021 07:43:03 -0300
Subject: [R-pkg-devel] Checking package dependencies before loading
 namespace
In-Reply-To: <BN8PR04MB6241A874AE74ACDB9FCDD9FAF9D19@BN8PR04MB6241.namprd04.prod.outlook.com>
References: <CAMyz+tXh9LGAA=MuLGmCCg_tXMn-9vC0EFgbT1DUgnoFbiE0nw@mail.gmail.com>
 <cf8a63fd-b07f-c8d2-cc25-7572b288da99@gmail.com>
 <f89ed12e-ae5f-d601-7330-d385d1e8e2f3@statistik.tu-dortmund.de>
 <CAMyz+tXNSGf+a4Q0oS5xizTFQgASKWtf5q-iF4cdjuEMpx8WKA@mail.gmail.com>
 <BN8PR04MB6241FB37214426E64BE977FAF9CF9@BN8PR04MB6241.namprd04.prod.outlook.com>
 <CAMyz+tXZEgrfTg-AqBEtMRUO_7rKmXdDCBSe_2GT_JCrScHdew@mail.gmail.com>
 <BN8PR04MB6241A874AE74ACDB9FCDD9FAF9D19@BN8PR04MB6241.namprd04.prod.outlook.com>
Message-ID: <CAMyz+tUQdaJ6mZ_+7mBAoF4jXfkHX-EGOrXk5Xd9d7qU7Om4sw@mail.gmail.com>

Thanks to all for the suggestions!
Best,
Tiago

Em s?b., 4 de set. de 2021 ?s 23:45, Martin Morgan <mtmorgan.bioc at gmail.com>
escreveu:

> Actually, I think the right thing to do is to tell the user what to do
> ("To use this feature, install EBImage following the directions at
> https://bioconductor.org/packages/EBImage') instead of doing it for them.
>
> Martin
>
> From: Tiago Olivoto <tiagoolivoto at gmail.com>
> Date: Friday, September 3, 2021 at 2:14 PM
> To: Martin Morgan <mtmorgan.bioc at gmail.com>
> Cc: Uwe Ligges <ligges at statistik.tu-dortmund.de>, R Package Devel <
> r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Checking package dependencies before loading
> namespace
> Thanks for your response Martin,
> I'm definitely thinking to use BiocManager::install("EBImage") since it is
> the official suggestion of the Bioconductor community. Anyway, I've been
> learning a lot from this discussion. Thanks all!!
> Best,
> Tiago
>
> Em sex., 3 de set. de 2021 ?s 12:58, Martin Morgan <mailto:
> mtmorgan.bioc at gmail.com> escreveu:
> The specific repository you've chosen is not what you want to do. This
> will always install EBImage from Bioconductor version 3.13, but
> Bioconductor version 3.13 is only relevant for R-4.1 (see
> https://bioconductor.org/about/release-announcements/)
>
> Personally, I would encourage you to follow the Bioconductor community
> best practice of BiocManager::install("EBImage"). In that way you will get
> the version of EBImage that has been tested with other Bioconductor
> packages in the same release, and on the version of R in use by your user.
>
> If you were to use a specific repository, it should the one that is as
> good as base R can do (this can be different from the version that
> BiocManager would choose because R's release cycle is different from
> Bioconductor's). I think this is most easily accomplished by
> utils::chooseBioCmirror(), and then selecting the 0-Bioconductor
> repository. That's a lot to tell your users... Maybe others in the R
> community have a better way (the key information is in
> tools:::.BioC_version_associated_with_R_version(), but that is not an
> exported function so not recommended for CRAN packages...)
>
> Martin Morgan
>
> ?On 9/1/21, 8:13 AM, "R-package-devel on behalf of Tiago Olivoto" <mailto:
> r-package-devel-bounces at r-project.org on behalf of mailto:
> tiagoolivoto at gmail.com> wrote:
>
>     Thank you, Duncan and Uwe for the suggestions.
>      I followed your instructions and created a function to check for
> EBImage
>     that is only called in an interactive section and, if necessary, ask
> the
>     user to install the package with install.packages("EBImage", repos="
>     https://bioconductor.org/packages/3.13/bioc")
>
>     Best,
>     Tiago
>
>     Em qua., 1 de set. de 2021 ?s 03:53, Uwe Ligges <
>     mailto:ligges at statistik.tu-dortmund.de> escreveu:
>
>     > Two more comments.
>     >
>     > 1. Note that your code only works in interactice mode, not when
> checking
>     > your package as it waits infinitely for the user's choice.
>     >
>     > 2. I do not see an advantage of installing BiocManager if EBImage is
>     > needed, the essential part is simply to select BioC as a repository
> to
>     > install packages from.
>     >
>     > Best,
>     > Uwe Ligges
>     >
>     >
>     > On 31.08.2021 23:33, Duncan Murdoch wrote:
>     > > People shouldn't be able to install your package unless the "hard"
>     > > dependencies are available.
>     > >
>     > > If EBImage isn't essential to your package, you should make it a
> "soft"
>     > > dependency by listing it in Suggests and checking for it every
> time you
>     > > use it.
>     > >
>     > > Duncan Murdoch
>     > >
>     > > On 31/08/2021 3:20 p.m., Tiago Olivoto wrote:
>     > >> Dear all,
>     > >> I have a package called pliman
>     > >> <https://CRAN.R-project.org/package=pliman>
>     > >> which depends on the Bioconductor package EBImage.
>     > >>
>     > >> When running install.packages("pliman") I get the following
> warning
>     > >>
>     > >> Warning in install.packages :  dependency ?EBImage? is not
> available
>     > >>
>     > >> and thus when loading the package with library(pliman), the
> following
>     > >> error
>     > >> occurs
>     > >>
>     > >> Erro: package or namespace load failed for ?pliman? in
> loadNamespace(i,
>     > >> c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
>     > >>   there is no package called ?EBImage?
>     > >>
>     > >> I created a check function to check if EBImage is available and if
>     > >> not, ask
>     > >> users if they want to install it
>     > >>
>     > >> ---
>     > >> check_ebi <- function(){
>     > >>    if(!requireNamespace("EBImage", quietly = TRUE)) {
>     > >>      inst <-
>     > >>      switch(menu(c("Yes", "No"), title = "Package {EBImage}
> required
>     > >> but not
>     > >> available.\nDo you want to install it now?"),
>     > >>             "yes", "no")
>     > >>      if(inst == "yes"){
>     > >>        if (!requireNamespace("BiocManager", quietly = TRUE)){
>     > >>          install.packages("BiocManager")
>     > >>        }
>     > >>        BiocManager::install("EBImage", ask = FALSE, update =
> FALSE)
>     > >>      } else{
>     > >>        message("To use {pliman}, first install {EBImage} with
>     > >> 'BiocManager::install(\"EBImage\")'.")
>     > >>      }
>     > >>    }
>     > >> }
>     > >> ---
>     > >>
>     > >> Is there any way to run this function prior to namespace loading?
> I
>     > tried
>     > >> putting check_ebi() into .onLoad() but the same error occurs.
>     > >>
>     > >> Thanks in advance for any suggestions.
>     > >> Tiago
>     > >>
>     > >>     [[alternative HTML version deleted]]
>     > >>
>     > >> ______________________________________________
>     > >> mailto:R-package-devel at r-project.org mailing list
>     > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     > >>
>     > >
>     > > ______________________________________________
>     > > mailto:R-package-devel at r-project.org mailing list
>     > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >
>
>         [[alternative HTML version deleted]]
>
>     ______________________________________________
>     mailto:R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@g|||e@p|e @end|ng |rom gm@||@com  Mon Sep  6 13:02:08 2021
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Mon, 6 Sep 2021 12:02:08 +0100
Subject: [R-pkg-devel] Additional CRAN Checks
Message-ID: <CADbDLZ=mer=LQQ23ki+CGWvxMYR=CgKnQWVRDufaxpydQGPoaw@mail.gmail.com>

Dear All,

Sorry if this is the wrong mailing address.

I was doing a little investigation of R versions in packages and
discovered a number of errors:

https://cran.r-project.org/web/packages/bartCause/index.html  - R (? 3.1-0)
https://cran.r-project.org/web/packages/activityGCMM/index.html  - R (3.00)
https://cran.r-project.org/web/packages/deTestSet/index.html - R (? 2.01)

and also

https://cran.r-project.org/web/packages/NGSSEML/ - R (? 1.9.0), R (?
3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (?
3.5.0)

Overall I detected ~40 packages with issues:

c("activityGCMM", "behavr", "bioassays", "bvpSolve", "celestial",
"chest", "CRTSize", "csppData", "damr", "deTestSet", "diagram",
"directPA", "DiscreteFDR", "ecolMod", "ecp", "epibasix", "europepmc",
"fabisearch", "FDX", "ggetho", "hyper.fit", "MedSurvey", "NBPSeq",
"NetIndices", "NFWdist", "OmegaG", "primer", "RATest", "refund",
"RmarineHeatWaves", "rmcfs", "rootSolve", "RPPASPACE", "scopr",
"scoringRules", "seqDesign", "shape", "sleepr", "SMPracticals",
"text", "tggd", "zeitgebr")

It seems like this would be a useful check to implement on the R CMD check.

Thanks

Colin


Dr Colin Gillespie
https://twitter.com/csgillespie


From m|kko@v|ht@k@r| @end|ng |rom h|@no  Mon Sep  6 15:42:14 2021
From: m|kko@v|ht@k@r| @end|ng |rom h|@no (Vihtakari, Mikko)
Date: Mon, 6 Sep 2021 13:42:14 +0000
Subject: [R-pkg-devel] Debian note: non-standard things in the check
 directory
Message-ID: <920DEC6C-23FF-4E96-8BA1-A8C42E611785@hi.no>

Dear R developers,

I submitted my package (https://github.com/MikkoVihtakari/ggOceanMaps) to CRAN and got a note I have not seen before in this context. R CMD check --as-cran on the source version, rhub::check_for_cran(), and devtools::check() all run without problems. So did CRAN checks on every platform except Debian. Here is the log I received from CRAN:

----

Flavor: r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Mikko Vihtakari <mikko.vihtakari at hi.no>'

  New submission

  Package was archived on CRAN

  Possibly misspelled words in DESCRIPTION:
    GitHub (26:13)
    bathymetric (18:38)
    geospatial (24:3)
    shapefiles (23:24, 25:17, 25:45)

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-06-04 as check problems were not
      corrected in time.

  Suggests or Enhances not in mainstream repositories:
    ggOceanMapsData
  Availability using Additional_repositories specification:
    ggOceanMapsData   yes   https://mikkovihtakari.github.io/drat

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: package dependencies, Result: NOTE
  Package suggested but not available for checking: 'ggOceanMapsData'

Flavor: r-devel-linux-x86_64-debian-gcc
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Mikko Vihtakari <mikko.vihtakari at hi.no>'

  New submission

  Package was archived on CRAN

  Possibly misspelled words in DESCRIPTION:
    bathymetric (18:38)
    geospatial (24:3)
    shapefiles (23:24, 25:17, 25:45)

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-06-04 as check problems were not
      corrected in time.

  Suggests or Enhances not in mainstream repositories:
    ggOceanMapsData
  Availability using Additional_repositories specification:
    ggOceanMapsData   yes   https://mikkovihtakari.github.io/drat

Flavor: r-devel-linux-x86_64-debian-gcc
Check: for non-standard things in the check directory, Result: NOTE
  Found the following files/directories:
    'ggOceanMapsData'

----

I am lost with what they mean by "Check: for non-standard things in the check directory, Result: NOTE  Found the following files/directories:  'ggOceanMapsData'".

The package requires ggOceanMapsData package to function. That package is too large for CRAN and has been placed in a drat repository on Github. I have used install.packages() in the vignette ( https://github.com/MikkoVihtakari/ggOceanMaps/blob/3c3d4daa5a26b262db569a3465208face0fca731/vignettes/ggOceanMaps.Rmd#L17) to make it possible to compile the vignette. Could it be that the check on Debian has begun to pick on this line for some reason? As said, I have not encountered this issue before, and the package was on CRAN before being pulled by another problem.

Any insight would be appreciated.

All the best,

______________________________________

Mikko Vihtakari
PhD in Natural Science
Researcher
Deep sea species and cartilaginous fish
Institute of Marine Research
Fram Centre, 9296 Troms?, Norway
Email: mikko.vihtakari at hi.no<mailto:mikko.vihtakari at hi.no>
Tel: +47-91891316
______________________________________




	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Sep  7 15:47:32 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Sep 2021 06:47:32 -0700
Subject: [R-pkg-devel] Additional CRAN Checks
In-Reply-To: <CADbDLZ=mer=LQQ23ki+CGWvxMYR=CgKnQWVRDufaxpydQGPoaw@mail.gmail.com>
References: <CADbDLZ=mer=LQQ23ki+CGWvxMYR=CgKnQWVRDufaxpydQGPoaw@mail.gmail.com>
Message-ID: <D259B304-DA36-43BF-AC47-F02C5789EE7F@dcn.davis.ca.us>

Exactly what errors do you think you found? It is not an error for a package to be compatible with a range of versions of R.

On September 6, 2021 4:02:08 AM PDT, Colin Gillespie <csgillespie at gmail.com> wrote:
>Dear All,
>
>Sorry if this is the wrong mailing address.
>
>I was doing a little investigation of R versions in packages and
>discovered a number of errors:
>
>https://cran.r-project.org/web/packages/bartCause/index.html  - R (? 3.1-0)
>https://cran.r-project.org/web/packages/activityGCMM/index.html  - R (3.00)
>https://cran.r-project.org/web/packages/deTestSet/index.html - R (? 2.01)
>
>and also
>
>https://cran.r-project.org/web/packages/NGSSEML/ - R (? 1.9.0), R (?
>3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (?
>3.5.0)
>
>Overall I detected ~40 packages with issues:
>
>c("activityGCMM", "behavr", "bioassays", "bvpSolve", "celestial",
>"chest", "CRTSize", "csppData", "damr", "deTestSet", "diagram",
>"directPA", "DiscreteFDR", "ecolMod", "ecp", "epibasix", "europepmc",
>"fabisearch", "FDX", "ggetho", "hyper.fit", "MedSurvey", "NBPSeq",
>"NetIndices", "NFWdist", "OmegaG", "primer", "RATest", "refund",
>"RmarineHeatWaves", "rmcfs", "rootSolve", "RPPASPACE", "scopr",
>"scoringRules", "seqDesign", "shape", "sleepr", "SMPracticals",
>"text", "tggd", "zeitgebr")
>
>It seems like this would be a useful check to implement on the R CMD check.
>
>Thanks
>
>Colin
>
>
>Dr Colin Gillespie
>https://twitter.com/csgillespie
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From c@g|||e@p|e @end|ng |rom gm@||@com  Tue Sep  7 16:39:01 2021
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Tue, 7 Sep 2021 15:39:01 +0100
Subject: [R-pkg-devel] Additional CRAN Checks
In-Reply-To: <D259B304-DA36-43BF-AC47-F02C5789EE7F@dcn.davis.ca.us>
References: <CADbDLZ=mer=LQQ23ki+CGWvxMYR=CgKnQWVRDufaxpydQGPoaw@mail.gmail.com>
 <D259B304-DA36-43BF-AC47-F02C5789EE7F@dcn.davis.ca.us>
Message-ID: <CADbDLZm4rMSpTWVdZK=XuZ6YgSPAE5wVcbTR9BpmRz_ab+z_oA@mail.gmail.com>

))> Exactly what errors do you think you found? It is not an error for
a package to be compatible with a range of versions of R.

I suspect that the author didn't mean to specify 7 versions of R
(https://cran.r-project.org/web/packages/NGSSEML/) under Depends.

When a package specifies R >= 2.01 did they mean R 2.0.1 or R 2.1.0
(https://cran.r-project.org/web/packages/diagram/)

Or specifying R >= 2.16 (which doesn't exist) -
https://cran.r-project.org/web/packages/seqDesign/

I realise that the above aren't "errors", but they do strongly
indicate that the package author is making a mistake.

Thanks

Colin



>
> On September 6, 2021 4:02:08 AM PDT, Colin Gillespie <csgillespie at gmail.com> wrote:
> >Dear All,
> >
> >Sorry if this is the wrong mailing address.
> >
> >I was doing a little investigation of R versions in packages and
> >discovered a number of errors:
> >
> >https://cran.r-project.org/web/packages/bartCause/index.html  - R (? 3.1-0)
> >https://cran.r-project.org/web/packages/activityGCMM/index.html  - R (3.00)
> >https://cran.r-project.org/web/packages/deTestSet/index.html - R (? 2.01)
> >
> >and also
> >
> >https://cran.r-project.org/web/packages/NGSSEML/ - R (? 1.9.0), R (?
> >3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (?
> >3.5.0)
> >
> >Overall I detected ~40 packages with issues:
> >
> >c("activityGCMM", "behavr", "bioassays", "bvpSolve", "celestial",
> >"chest", "CRTSize", "csppData", "damr", "deTestSet", "diagram",
> >"directPA", "DiscreteFDR", "ecolMod", "ecp", "epibasix", "europepmc",
> >"fabisearch", "FDX", "ggetho", "hyper.fit", "MedSurvey", "NBPSeq",
> >"NetIndices", "NFWdist", "OmegaG", "primer", "RATest", "refund",
> >"RmarineHeatWaves", "rmcfs", "rootSolve", "RPPASPACE", "scopr",
> >"scoringRules", "seqDesign", "shape", "sleepr", "SMPracticals",
> >"text", "tggd", "zeitgebr")
> >
> >It seems like this would be a useful check to implement on the R CMD check.
> >
> >Thanks
> >
> >Colin
> >
> >
> >Dr Colin Gillespie
> >https://twitter.com/csgillespie
> >
> >______________________________________________
> >R-package-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Sep  7 17:21:08 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 7 Sep 2021 17:21:08 +0200
Subject: [R-pkg-devel] Additional CRAN Checks
In-Reply-To: <CADbDLZm4rMSpTWVdZK=XuZ6YgSPAE5wVcbTR9BpmRz_ab+z_oA@mail.gmail.com>
References: <CADbDLZ=mer=LQQ23ki+CGWvxMYR=CgKnQWVRDufaxpydQGPoaw@mail.gmail.com>
 <D259B304-DA36-43BF-AC47-F02C5789EE7F@dcn.davis.ca.us>
 <CADbDLZm4rMSpTWVdZK=XuZ6YgSPAE5wVcbTR9BpmRz_ab+z_oA@mail.gmail.com>
Message-ID: <cd808513-72be-31f9-97a4-6fd940e43daa@statistik.tu-dortmund.de>



On 07.09.2021 16:39, Colin Gillespie wrote:
> ))> Exactly what errors do you think you found? It is not an error for
> a package to be compatible with a range of versions of R.
> 
> I suspect that the author didn't mean to specify 7 versions of R
> (https://cran.r-project.org/web/packages/NGSSEML/) under Depends.

I suspect so, too, but it works.


> When a package specifies R >= 2.01 did they mean R 2.0.1 or R 2.1.0
> (https://cran.r-project.org/web/packages/diagram/)

Yes, this is not obvious. But then it will be interpreted as R >= 2.1 
which is not wrong in any case (even if 2.0.1 was meant).


> Or specifying R >= 2.16 (which doesn't exist) -
> https://cran.r-project.org/web/packages/seqDesign/

Actually R-2.16.0 did exist as a development version that was later on 
renumbered to 3.0.0, so it is right.


> I realise that the above aren't "errors", but they do strongly
> indicate that the package author is making a mistake.

The only unclear statement is the 2.01, but compareVersion() does a 
sensible thing. So I do not worry too much.

Best,
Uwe Ligges


> Thanks
> 
> Colin
> 
> 
> 
>>
>> On September 6, 2021 4:02:08 AM PDT, Colin Gillespie <csgillespie at gmail.com> wrote:
>>> Dear All,
>>>
>>> Sorry if this is the wrong mailing address.
>>>
>>> I was doing a little investigation of R versions in packages and
>>> discovered a number of errors:
>>>
>>> https://cran.r-project.org/web/packages/bartCause/index.html  - R (? 3.1-0)
>>> https://cran.r-project.org/web/packages/activityGCMM/index.html  - R (3.00)
>>> https://cran.r-project.org/web/packages/deTestSet/index.html - R (? 2.01)
>>>
>>> and also
>>>
>>> https://cran.r-project.org/web/packages/NGSSEML/ - R (? 1.9.0), R (?
>>> 3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (? 3.5.0), R (?
>>> 3.5.0)
>>>
>>> Overall I detected ~40 packages with issues:
>>>
>>> c("activityGCMM", "behavr", "bioassays", "bvpSolve", "celestial",
>>> "chest", "CRTSize", "csppData", "damr", "deTestSet", "diagram",
>>> "directPA", "DiscreteFDR", "ecolMod", "ecp", "epibasix", "europepmc",
>>> "fabisearch", "FDX", "ggetho", "hyper.fit", "MedSurvey", "NBPSeq",
>>> "NetIndices", "NFWdist", "OmegaG", "primer", "RATest", "refund",
>>> "RmarineHeatWaves", "rmcfs", "rootSolve", "RPPASPACE", "scopr",
>>> "scoringRules", "seqDesign", "shape", "sleepr", "SMPracticals",
>>> "text", "tggd", "zeitgebr")
>>>
>>> It seems like this would be a useful check to implement on the R CMD check.
>>>
>>> Thanks
>>>
>>> Colin
>>>
>>>
>>> Dr Colin Gillespie
>>> https://twitter.com/csgillespie
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From obr|@o||@u @end|ng |rom gm@||@com  Wed Sep  8 02:02:51 2021
From: obr|@o||@u @end|ng |rom gm@||@com (obrl soil)
Date: Wed, 8 Sep 2021 12:02:51 +1200
Subject: [R-pkg-devel] http error handling in packages
Message-ID: <CALG31BVjOWF8xkX3L5M5oKqrsOTwJXQ=ZpceAsK5z4J_8eu=6Q@mail.gmail.com>

Hello list,

my package 'slga' has been flagged for potential removal from CRAN
because of the following:

> Please see the problems shown on
> <https://cran.r-project.org/web/checks/check_results_slga.html>.

> Please correct before 2021-09-19 to safely retain your package on CRAN.

> It seems we need to remind you of the CRAN policy:

> 'Packages which use Internet resources should fail gracefully with an informative message
> if the resource is not available or has changed (and not give a check warning nor error).'

> This needs correction whether or not the resource recovers.

The issue is that the WCS server from which the package retrieves data
sometimes gets overloaded, and throws a 502 error. I currently use a
stop(message)) to return the http error code to the user, e.g. here -
https://github.com/obrl-soil/slga/blob/a770dac9f101995db92e2d42476af8705971d80c/R/get_data.R#L61

I just want to clarify whether the problem is an overly brief error
message, or my use of stop() in this context? What is the preferred
pattern for handling these kinds of errors?

Many thanks,
Lauren O'Brien


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Sep  8 09:29:03 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 8 Sep 2021 09:29:03 +0200
Subject: [R-pkg-devel] http error handling in packages
In-Reply-To: <CALG31BVjOWF8xkX3L5M5oKqrsOTwJXQ=ZpceAsK5z4J_8eu=6Q@mail.gmail.com>
References: <CALG31BVjOWF8xkX3L5M5oKqrsOTwJXQ=ZpceAsK5z4J_8eu=6Q@mail.gmail.com>
Message-ID: <14b1aa8c-f5a7-33e9-1dbf-3808ac05d457@statistik.tu-dortmund.de>



On 08.09.2021 02:02, obrl soil wrote:
> Hello list,
> 
> my package 'slga' has been flagged for potential removal from CRAN
> because of the following:
> 
>> Please see the problems shown on
>> <https://cran.r-project.org/web/checks/check_results_slga.html>.
> 
>> Please correct before 2021-09-19 to safely retain your package on CRAN.
> 
>> It seems we need to remind you of the CRAN policy:
> 
>> 'Packages which use Internet resources should fail gracefully with an informative message
>> if the resource is not available or has changed (and not give a check warning nor error).'
> 
>> This needs correction whether or not the resource recovers.
> 
> The issue is that the WCS server from which the package retrieves data
> sometimes gets overloaded, and throws a 502 error. I currently use a
> stop(message)) to return the http error code to the user, e.g. here -
> https://github.com/obrl-soil/slga/blob/a770dac9f101995db92e2d42476af8705971d80c/R/get_data.R#L61
> 
> I just want to clarify whether the problem is an overly brief error
> message, or my use of stop() in this context? What is the preferred
> pattern for handling these kinds of errors?

Exit gracefully, i.e. without an ERROR.

Best,
Uwe Ligges


> 
> Many thanks,
> Lauren O'Brien
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Sep  8 11:06:45 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 8 Sep 2021 11:06:45 +0200
Subject: [R-pkg-devel] http error handling in packages
In-Reply-To: <CALG31BVjOWF8xkX3L5M5oKqrsOTwJXQ=ZpceAsK5z4J_8eu=6Q@mail.gmail.com>
References: <CALG31BVjOWF8xkX3L5M5oKqrsOTwJXQ=ZpceAsK5z4J_8eu=6Q@mail.gmail.com>
Message-ID: <20210908110645.253e2459@parabola>

On Wed, 8 Sep 2021 12:02:51 +1200
obrl soil <obrlsoilau at gmail.com> wrote:

> I just want to clarify whether the problem is an overly brief error
> message, or my use of stop() in this context? 

I think it's neither: it's perfectly fine to use the R error system to
signal being unable to establish function postconditions, but then the
tests shouldn't fail because of that (yes, including the \donttest{}
ones).

So, in my opinion, both stop() and the error message are okay, but the
example should wrap them in try() / tryCatch() and check the return
value correctly.

-- 
Best regards,
Ivan


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Sep  9 18:23:36 2021
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Fri, 10 Sep 2021 02:23:36 +1000
Subject: [R-pkg-devel] S3 is.unsorted registration
Message-ID: <CAJmOi+OVct_urMCT44XLuKywhn6hMkzGtxrs_kjWUO6gHwMvcA@mail.gmail.com>

I would like to register an S3 method for `is.unsorted` for my
package's class "factor256" but I'm having trouble honouring the
`strictly` argument.  I've defined

is.unsorted.factor256 <- function(x, na.rm = FALSE, strictly = FALSE) {
  strictly
}

i.e. the class is sorted iff strictly = TRUE

However, the strictly argument appears to be ignored

x <- integer(2)
class(x) <- "factor256"

is.unsorted(x)  # FALSE [expected]
is.unsorted(x, strictly = TRUE)  # FALSE [unexpected]

The method is definitely being dispatched as when I change the function to

is.unsorted.factor256 <- function(x, na.rm = FALSE, strictly = FALSE) {
  cat("dispatching\n")
  strictly
}

I see the dispatch:

is.unsorted(ff, strictly = T)
#> dispatching
#> [1] FALSE

and

> methods("is.unsorted")
[1] is.unsorted.factor256
see '?methods' for accessing help and source code

I note that if I omit the na.rm = argument I will get the intended
result (I was drawn to the solution by noting the .Internal call has
omitted it) but I'm wondering whether this is correct.


Best,


Hugh Parsonage.


From @ergue|@@oko| @end|ng |rom gm@||@com  Thu Sep  9 20:11:44 2021
From: @ergue|@@oko| @end|ng |rom gm@||@com (Sokol Serguei)
Date: Thu, 9 Sep 2021 20:11:44 +0200
Subject: [R-pkg-devel] S3 is.unsorted registration
In-Reply-To: <CAJmOi+OVct_urMCT44XLuKywhn6hMkzGtxrs_kjWUO6gHwMvcA@mail.gmail.com>
References: <CAJmOi+OVct_urMCT44XLuKywhn6hMkzGtxrs_kjWUO6gHwMvcA@mail.gmail.com>
Message-ID: <31c53e1f-2526-ae43-cf09-5e2e0ffbad32@gmail.com>

On 09/09/2021 18:23, Hugh Parsonage wrote:
> I would like to register an S3 method for `is.unsorted` for my
> package's class "factor256" but I'm having trouble honouring the
> `strictly` argument.  I've defined
>
> is.unsorted.factor256 <- function(x, na.rm = FALSE, strictly = FALSE) {
>    strictly
> }
>
> i.e. the class is sorted iff strictly = TRUE
>
> However, the strictly argument appears to be ignored
>
> x <- integer(2)
> class(x) <- "factor256"
>
> is.unsorted(x)  # FALSE [expected]
> is.unsorted(x, strictly = TRUE)  # FALSE [unexpected]
>
> The method is definitely being dispatched as when I change the function to
>
> is.unsorted.factor256 <- function(x, na.rm = FALSE, strictly = FALSE) {
>    cat("dispatching\n")
>    strictly
> }
>
> I see the dispatch:
>
> is.unsorted(ff, strictly = T)
> #> dispatching
> #> [1] FALSE

Moreover, if I define

is.unsorted.factor256 <- function(x, na.rm = FALSE, strictly = FALSE) {
 ?? cat("dispatching\n")
 ?? print(match.call())
 ?? strictly
}

I get:

is.unsorted(ff, strictly = T)


# dispatching
# is.unsorted.factor256(x = x, na.rm = strictly)
# [1] FALSE

While defining not a method but a classic function works as expected:

f=function(x, na.rm = FALSE, strictly = FALSE) {
 ?? cat("f\n")
 ?? print(match.call())
 ?? strictly
}

f(ff, strictly=T)

# f
# f(x = ff, strictly = T)
# [1] TRUE

Just my 0.02 ?
Serguei.


> and
>
>> methods("is.unsorted")
> [1] is.unsorted.factor256
> see '?methods' for accessing help and source code
>
> I note that if I omit the na.rm = argument I will get the intended
> result (I was drawn to the solution by noting the .Internal call has
> omitted it) but I'm wondering whether this is correct.
>
>
> Best,
>
>
> Hugh Parsonage.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e@e005 @end|ng |rom umn@edu  Sat Sep 11 23:09:56 2021
From: m@e@e005 @end|ng |rom umn@edu (Danielle Maeser)
Date: Sat, 11 Sep 2021 16:09:56 -0500
Subject: [R-pkg-devel] Packages required but not available
Message-ID: <CA+YOmB8MDG3pSeU=+Go4QOg=5U+mmkqTLW6zeP4ac8_mOuk0Zg@mail.gmail.com>

Hello,

I received the following output from my package, oncoPredict.

However, I don't understand how to correct this error. I've tested the
advice here:
https://stackoverflow.com/questions/14358814/error-in-r-cmd-check-packages-required-but-not-available
without success.

Any thoughts as to how this error can be fixed?

Danielle Maeser






*Version: 0.1Check: package dependenciesResult: ERROR    Packages required
but not available:     'org.Hs.eg.db', 'TxDb.Hsapiens.UCSC.hg19.knownGene',
'maftools',     'TCGAbiolinks'*
  *  See section ?The DESCRIPTION file? in the ?Writing R Extensions?*

*    manual.Flavor: r-release-macos-x86_64
<https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/oncoPredict-00check.html>*
-- 
Ph.D. Student
Bioinformatics and Computational Biology
University of Minnesota

	[[alternative HTML version deleted]]


From m@e@e005 @end|ng |rom umn@edu  Sun Sep 12 00:28:08 2021
From: m@e@e005 @end|ng |rom umn@edu (Danielle Maeser)
Date: Sat, 11 Sep 2021 17:28:08 -0500
Subject: [R-pkg-devel] Packages required but not available
In-Reply-To: <000101d7a754$067c4d60$1374e820$@gmail.com>
References: <CA+YOmB8MDG3pSeU=+Go4QOg=5U+mmkqTLW6zeP4ac8_mOuk0Zg@mail.gmail.com>
 <000101d7a754$067c4d60$1374e820$@gmail.com>
Message-ID: <CA+YOmB8vj_LoPa7PricbeCuMFyHsQEhr9nVMeJazxEUONKc0+Q@mail.gmail.com>

Hi David,

Yes. I did recently upgrade R.

On Sat, Sep 11, 2021 at 4:28 PM <dbosak01 at gmail.com> wrote:

> Danielle:
>
> Did you recently upgrade to R 4.1.1?
>
> David
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
> Of Danielle Maeser via R-package-devel
> Sent: Saturday, September 11, 2021 5:10 PM
> To: R Package Devel <r-package-devel at r-project.org>
> Subject: [R-pkg-devel] Packages required but not available
>
> Hello,
>
> I received the following output from my package, oncoPredict.
>
> However, I don't understand how to correct this error. I've tested the
> advice here:
>
> https://stackoverflow.com/questions/14358814/error-in-r-cmd-check-packages-required-but-not-available
> without success.
>
> Any thoughts as to how this error can be fixed?
>
> Danielle Maeser
>
>
>
>
>
>
> *Version: 0.1Check: package dependenciesResult: ERROR    Packages required
> but not available:     'org.Hs.eg.db', 'TxDb.Hsapiens.UCSC.hg19.knownGene',
> 'maftools',     'TCGAbiolinks'*
>   *  See section ?The DESCRIPTION file? in the ?Writing R Extensions?*
>
> *    manual.Flavor: r-release-macos-x86_64
> <
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/oncoPredict-00check.html
> >*
> --
> Ph.D. Student
> Bioinformatics and Computational Biology University of Minnesota
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

-- 
Ph.D. Student
Bioinformatics and Computational Biology
University of Minnesota

	[[alternative HTML version deleted]]


From dbos@k01 m@iii@g oii gm@ii@com  Sun Sep 12 00:47:32 2021
From: dbos@k01 m@iii@g oii gm@ii@com (dbos@k01 m@iii@g oii gm@ii@com)
Date: Sat, 11 Sep 2021 18:47:32 -0400
Subject: [R-pkg-devel] Packages required but not available
In-Reply-To: <CA+YOmB8vj_LoPa7PricbeCuMFyHsQEhr9nVMeJazxEUONKc0+Q@mail.gmail.com>
References: <CA+YOmB8MDG3pSeU=+Go4QOg=5U+mmkqTLW6zeP4ac8_mOuk0Zg@mail.gmail.com>
 <000101d7a754$067c4d60$1374e820$@gmail.com>
 <CA+YOmB8vj_LoPa7PricbeCuMFyHsQEhr9nVMeJazxEUONKc0+Q@mail.gmail.com>
Message-ID: <001401d7a75f$0240eca0$06c2c5e0$@gmail.com>

Reminder that you have to re-install any packages that your oncoPredict package depends on for the new R version 4.1.1.  Packages are downloaded/installed to a specific R version.  If you switch to another version, everything needs to be reinstalled.  I always get this error after upgrading or switching R versions.

 ?

If you?ve already reinstalled and are still getting the error, then maybe it is something with your NAMESPACE or DESCRIPTION file.  Like if you are using a package inside a function, but forget to add it to the DESCRIPTION.  Or you put it in the DESCRIPTION, but forget to add the @import roxygen directive above your function so that it gets into the NAMESPACE.  

 ?

Those are the situations that most commonly generate this error, from what I have seen.  

 ?

From: Danielle Maeser <maese005 at umn.edu> 
Sent: Saturday, September 11, 2021 6:28 PM
To: dbosak01 at gmail.com; R Package Devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Packages required but not available

 ?

Hi David,

 ?

Yes. I did recently upgrade R. ?

 ?

On Sat, Sep 11, 2021 at 4:28 PM <dbosak01 at gmail.com <mailto:dbosak01 at gmail.com> > wrote:

Danielle:

Did you recently upgrade to R 4.1.1?

David


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org> > On Behalf Of Danielle Maeser via R-package-devel
Sent: Saturday, September 11, 2021 5:10 PM
To: R Package Devel <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> >
Subject: [R-pkg-devel] Packages required but not available

Hello,

I received the following output from my package, oncoPredict.

However, I don't understand how to correct this error. I've tested the advice here:
https://stackoverflow.com/questions/14358814/error-in-r-cmd-check-packages-required-but-not-available
without success.

Any thoughts as to how this error can be fixed?

Danielle Maeser






*Version: 0.1Check: package dependenciesResult: ERROR ?  ? Packages required
but not available: ?  ?  ?'org.Hs.eg.db', 'TxDb.Hsapiens.UCSC.hg19.knownGene',
'maftools', ?  ?  ?'TCGAbiolinks'*
 ? * ? See section ?The DESCRIPTION file? in the ?Writing R Extensions?*

* ?  ? manual.Flavor: r-release-macos-x86_64
<https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/oncoPredict-00check.html>*
--
Ph.D. Student
Bioinformatics and Computational Biology University of Minnesota

 ?  ?  ?  ? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel




 ?

-- 

Ph.D. Student

Bioinformatics and  Computational  Biology

University of Minnesota

 ?


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Sep 12 01:09:58 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 11 Sep 2021 16:09:58 -0700
Subject: [R-pkg-devel] Packages required but not available
In-Reply-To: <001401d7a75f$0240eca0$06c2c5e0$@gmail.com>
References: <CA+YOmB8MDG3pSeU=+Go4QOg=5U+mmkqTLW6zeP4ac8_mOuk0Zg@mail.gmail.com>
 <000101d7a754$067c4d60$1374e820$@gmail.com>
 <CA+YOmB8vj_LoPa7PricbeCuMFyHsQEhr9nVMeJazxEUONKc0+Q@mail.gmail.com>
 <001401d7a75f$0240eca0$06c2c5e0$@gmail.com>
Message-ID: <E0CA7FAB-9054-467D-A6D1-8D890000CAEB@dcn.davis.ca.us>

This advice would apply if the errors were being generated on a computer under the package developer's control... but this looks like it is from a repo submission.

That said, if the developer has installed packages not currently in BioC for R4.1.1 they may need to wait for those packages to propagate in the official BioC repo and then to the submission test computers.

On September 11, 2021 3:47:32 PM PDT, dbosak01 at gmail.com wrote:
>Reminder that you have to re-install any packages that your oncoPredict package depends on for the new R version 4.1.1.  Packages are downloaded/installed to a specific R version.  If you switch to another version, everything needs to be reinstalled.  I always get this error after upgrading or switching R versions.
>
> ?
>
>If you?ve already reinstalled and are still getting the error, then maybe it is something with your NAMESPACE or DESCRIPTION file.  Like if you are using a package inside a function, but forget to add it to the DESCRIPTION.  Or you put it in the DESCRIPTION, but forget to add the @import roxygen directive above your function so that it gets into the NAMESPACE.  
>
> ?
>
>Those are the situations that most commonly generate this error, from what I have seen.  
>
> ?
>
>From: Danielle Maeser <maese005 at umn.edu> 
>Sent: Saturday, September 11, 2021 6:28 PM
>To: dbosak01 at gmail.com; R Package Devel <r-package-devel at r-project.org>
>Subject: Re: [R-pkg-devel] Packages required but not available
>
> ?
>
>Hi David,
>
> ?
>
>Yes. I did recently upgrade R. ?
>
> ?
>
>On Sat, Sep 11, 2021 at 4:28 PM <dbosak01 at gmail.com <mailto:dbosak01 at gmail.com> > wrote:
>
>Danielle:
>
>Did you recently upgrade to R 4.1.1?
>
>David
>
>
>-----Original Message-----
>From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org> > On Behalf Of Danielle Maeser via R-package-devel
>Sent: Saturday, September 11, 2021 5:10 PM
>To: R Package Devel <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> >
>Subject: [R-pkg-devel] Packages required but not available
>
>Hello,
>
>I received the following output from my package, oncoPredict.
>
>However, I don't understand how to correct this error. I've tested the advice here:
>https://stackoverflow.com/questions/14358814/error-in-r-cmd-check-packages-required-but-not-available
>without success.
>
>Any thoughts as to how this error can be fixed?
>
>Danielle Maeser
>
>
>
>
>
>
>*Version: 0.1Check: package dependenciesResult: ERROR ?  ? Packages required
>but not available: ?  ?  ?'org.Hs.eg.db', 'TxDb.Hsapiens.UCSC.hg19.knownGene',
>'maftools', ?  ?  ?'TCGAbiolinks'*
> ? * ? See section ?The DESCRIPTION file? in the ?Writing R Extensions?*
>
>* ?  ? manual.Flavor: r-release-macos-x86_64
><https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/oncoPredict-00check.html>*
>--
>Ph.D. Student
>Bioinformatics and Computational Biology University of Minnesota
>
> ?  ?  ?  ? [[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>
> ?
>

-- 
Sent from my phone. Please excuse my brevity.


From konr@d@rudo|ph @end|ng |rom gm@||@com  Sun Sep 12 19:25:46 2021
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Sun, 12 Sep 2021 18:25:46 +0100
Subject: [R-pkg-devel] 'rlang' win-builder error for package without rlang
 dependency
Message-ID: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>

Hi,

My recent CRAN package submission failed with a win-builder error during
the tests and vignette building *of the previously submitted version* [1]:

```
    Error in library.dynam(lib, package, package.lib) :
      DLL 'rlang' not found: maybe not installed for this architecture?
```

(The log also shows another testing error with the new version which I can
make neither heads nor tails of, but that?s a separate issue.)

My package does not directly depend on 'rlang' (though it is a transitive
'Suggests' (build time) dependency via 'testthat'). I?m at a loss how to
fix this issue. The closest I could find was [2], where the error is caused
by tests being run for a mismatching architecture. In my case, the error
seems to be caused by 'testthat' not being able to load the rlang DLL for
x64 (weirdly the tests run to completion for the [mismatching] i386
architecture). Given that I don?t control (a) which architecture is tested
on win-builder, nor (b) how 'testthat' loads its dependencies, how can I
fix this?

? or was this error included in the win-builder output of the new
submission as a simple FYI and can be safely ignored?

[1]
https://win-builder.r-project.org/incoming_pretest/box_1.0.3_20210912_125241/Debian/00check.log
[2] https://github.com/r-hub/rhub/issues/476

--
Konrad Rudolph // @klmr

	[[alternative HTML version deleted]]


From ctr|bb|e09 @end|ng |rom gm@||@com  Sun Sep 12 19:31:33 2021
From: ctr|bb|e09 @end|ng |rom gm@||@com (Carrie Tribble)
Date: Sun, 12 Sep 2021 07:31:33 -1000
Subject: [R-pkg-devel] 
 'rlang' win-builder error for package without rlang dependency
In-Reply-To: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
References: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
Message-ID: <CA+emL6Me3Z5-ZGTbeZRwWc1ij+MNaoiRRH4ixyEQrruDyCBQzQ@mail.gmail.com>

Hi Konrad,

This happened to me too on Thursday. I tried retesting on Friday and ran
into the same problem with a different function (vctrs instead of rlang).
But Friday night when I retested, the problem had resolved itself. Curious
to hear what could have happened, but I'd also suggest retesting now if if
you haven't tried again since.

Cheers,
Carrie

On Sun, Sep 12, 2021, 7:26 AM Konrad Rudolph <konrad.rudolph at gmail.com>
wrote:

> Hi,
>
> My recent CRAN package submission failed with a win-builder error during
> the tests and vignette building *of the previously submitted version* [1]:
>
> ```
>     Error in library.dynam(lib, package, package.lib) :
>       DLL 'rlang' not found: maybe not installed for this architecture?
> ```
>
> (The log also shows another testing error with the new version which I can
> make neither heads nor tails of, but that?s a separate issue.)
>
> My package does not directly depend on 'rlang' (though it is a transitive
> 'Suggests' (build time) dependency via 'testthat'). I?m at a loss how to
> fix this issue. The closest I could find was [2], where the error is caused
> by tests being run for a mismatching architecture. In my case, the error
> seems to be caused by 'testthat' not being able to load the rlang DLL for
> x64 (weirdly the tests run to completion for the [mismatching] i386
> architecture). Given that I don?t control (a) which architecture is tested
> on win-builder, nor (b) how 'testthat' loads its dependencies, how can I
> fix this?
>
> ? or was this error included in the win-builder output of the new
> submission as a simple FYI and can be safely ignored?
>
> [1]
>
> https://win-builder.r-project.org/incoming_pretest/box_1.0.3_20210912_125241/Debian/00check.log
> [2] https://github.com/r-hub/rhub/issues/476
>
> --
> Konrad Rudolph // @klmr
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From konr@d@rudo|ph @end|ng |rom gm@||@com  Sun Sep 12 19:36:38 2021
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Sun, 12 Sep 2021 18:36:38 +0100
Subject: [R-pkg-devel] 
 'rlang' win-builder error for package without rlang dependency
In-Reply-To: <CA+emL6Me3Z5-ZGTbeZRwWc1ij+MNaoiRRH4ixyEQrruDyCBQzQ@mail.gmail.com>
References: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
 <CA+emL6Me3Z5-ZGTbeZRwWc1ij+MNaoiRRH4ixyEQrruDyCBQzQ@mail.gmail.com>
Message-ID: <CAM2gKPb=pecSyWfRMeSoRKZ1wj=cB9ik_SENQjVDmS1Qf6wTxA@mail.gmail.com>

Hi Carrie,

Thanks for the prompt reply, good to hear that I?m not the only one
experiencing this (the fact that this hadn?t been posted to r-package-devel
yet had dispirited me).

I?ll try resubmitting as soon as I?ve taken care of the other (real) issues.

On Sun, Sep 12, 2021 at 6:31 PM Carrie Tribble <ctribble09 at gmail.com> wrote:

> Hi Konrad,
>
> This happened to me too on Thursday. I tried retesting on Friday and ran
> into the same problem with a different function (vctrs instead of rlang).
> But Friday night when I retested, the problem had resolved itself. Curious
> to hear what could have happened, but I'd also suggest retesting now if if
> you haven't tried again since.
>
> Cheers,
> Carrie
>
> On Sun, Sep 12, 2021, 7:26 AM Konrad Rudolph <konrad.rudolph at gmail.com>
> wrote:
>
>> Hi,
>>
>> My recent CRAN package submission failed with a win-builder error during
>> the tests and vignette building *of the previously submitted version* [1]:
>>
>> ```
>>     Error in library.dynam(lib, package, package.lib) :
>>       DLL 'rlang' not found: maybe not installed for this architecture?
>> ```
>>
>> (The log also shows another testing error with the new version which I can
>> make neither heads nor tails of, but that?s a separate issue.)
>>
>> My package does not directly depend on 'rlang' (though it is a transitive
>> 'Suggests' (build time) dependency via 'testthat'). I?m at a loss how to
>> fix this issue. The closest I could find was [2], where the error is
>> caused
>> by tests being run for a mismatching architecture. In my case, the error
>> seems to be caused by 'testthat' not being able to load the rlang DLL for
>> x64 (weirdly the tests run to completion for the [mismatching] i386
>> architecture). Given that I don?t control (a) which architecture is tested
>> on win-builder, nor (b) how 'testthat' loads its dependencies, how can I
>> fix this?
>>
>> ? or was this error included in the win-builder output of the new
>> submission as a simple FYI and can be safely ignored?
>>
>> [1]
>>
>> https://win-builder.r-project.org/incoming_pretest/box_1.0.3_20210912_125241/Debian/00check.log
>> [2] https://github.com/r-hub/rhub/issues/476
>>
>> --
>> Konrad Rudolph // @klmr
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 
Konrad Rudolph // @klmr

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Sun Sep 12 23:09:19 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Sun, 12 Sep 2021 23:09:19 +0200
Subject: [R-pkg-devel] 
 'rlang' win-builder error for package without rlang dependency
In-Reply-To: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
References: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
Message-ID: <ef847b7e-bbd3-0812-2ce0-1830e21a9d45@fau.de>

Am 12.09.21 um 19:25 schrieb Konrad Rudolph:
> Hi,
> 
> My recent CRAN package submission failed with a win-builder error during
> the tests and vignette building *of the previously submitted version* [1]:
> 
> ```
>      Error in library.dynam(lib, package, package.lib) :
>        DLL 'rlang' not found: maybe not installed for this architecture?
> ```
> 
> (The log also shows another testing error with the new version which I can
> make neither heads nor tails of, but that?s a separate issue.)
> 
> My package does not directly depend on 'rlang' (though it is a transitive
> 'Suggests' (build time) dependency via 'testthat'). I?m at a loss how to
> fix this issue. The closest I could find was [2], where the error is caused
> by tests being run for a mismatching architecture. In my case, the error
> seems to be caused by 'testthat' not being able to load the rlang DLL for
> x64 (weirdly the tests run to completion for the [mismatching] i386
> architecture). Given that I don?t control (a) which architecture is tested
> on win-builder, nor (b) how 'testthat' loads its dependencies, how can I
> fix this?
> 
> ? or was this error included in the win-builder output of the new
> submission as a simple FYI and can be safely ignored?

Yes, the current CRAN status of the package is appended just FYI / for 
comparison.

These appended check results in the Debian pre-test output regularly 
confuse package developers. I am suggesting (to R-core) to simply add 
more empty lines before "current CRAN status" and maybe it should also 
say something like "(for comparison)" to clarify that these results are 
not the reason for the failure of the automatic pretest.

Best regards,

	Sebastian Meyer

> 
> [1]
> https://win-builder.r-project.org/incoming_pretest/box_1.0.3_20210912_125241/Debian/00check.log
> [2] https://github.com/r-hub/rhub/issues/476
> 
> --
> Konrad Rudolph // @klmr
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Sep 13 00:02:34 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 12 Sep 2021 18:02:34 -0400
Subject: [R-pkg-devel] 
 'rlang' win-builder error for package without rlang dependency
In-Reply-To: <ef847b7e-bbd3-0812-2ce0-1830e21a9d45@fau.de>
References: <CAM2gKPZadzf8jJt=h006E4buJYWBZ0sON2fWBtbUU-5kdVnwWg@mail.gmail.com>
 <ef847b7e-bbd3-0812-2ce0-1830e21a9d45@fau.de>
Message-ID: <60371dbd-90a3-a924-d07b-55313c50763c@gmail.com>

On 12/09/2021 5:09 p.m., Sebastian Meyer wrote:
> Am 12.09.21 um 19:25 schrieb Konrad Rudolph:
>> Hi,
>>
>> My recent CRAN package submission failed with a win-builder error during
>> the tests and vignette building *of the previously submitted version* [1]:
>>
>> ```
>>       Error in library.dynam(lib, package, package.lib) :
>>         DLL 'rlang' not found: maybe not installed for this architecture?
>> ```
>>
>> (The log also shows another testing error with the new version which I can
>> make neither heads nor tails of, but that?s a separate issue.)
>>
>> My package does not directly depend on 'rlang' (though it is a transitive
>> 'Suggests' (build time) dependency via 'testthat'). I?m at a loss how to
>> fix this issue. The closest I could find was [2], where the error is caused
>> by tests being run for a mismatching architecture. In my case, the error
>> seems to be caused by 'testthat' not being able to load the rlang DLL for
>> x64 (weirdly the tests run to completion for the [mismatching] i386
>> architecture). Given that I don?t control (a) which architecture is tested
>> on win-builder, nor (b) how 'testthat' loads its dependencies, how can I
>> fix this?
>>
>> ? or was this error included in the win-builder output of the new
>> submission as a simple FYI and can be safely ignored?
> 
> Yes, the current CRAN status of the package is appended just FYI / for
> comparison.
> 
> These appended check results in the Debian pre-test output regularly
> confuse package developers. I am suggesting (to R-core) to simply add

Sebastian:  R-core isn't involved in this.  CRAN is a separate group.

Duncan Murdoch

> more empty lines before "current CRAN status" and maybe it should also
> say something like "(for comparison)" to clarify that these results are
> not the reason for the failure of the automatic pretest.
> 
> Best regards,
> 
> 	Sebastian Meyer
> 
>>
>> [1]
>> https://win-builder.r-project.org/incoming_pretest/box_1.0.3_20210912_125241/Debian/00check.log
>> [2] https://github.com/r-hub/rhub/issues/476
>>
>> --
>> Konrad Rudolph // @klmr
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


