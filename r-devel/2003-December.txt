From Stephen.Harker at spme.monash.edu.au  Mon Dec  1 00:29:36 2003
From: Stephen.Harker at spme.monash.edu.au (Stephen.Harker@spme.monash.edu.au)
Date: Mon Dec  1 00:28:13 2003
Subject: [Rd] R postscript generation error (lines versus points) (PR#5285)
Message-ID: <20031130232936.EC2D0F0A5@slim.kubism.ku.dk>

For what worth it may be to the R development team: The main comment I
have had, so far, on the submission of a bug report to the ghostscript
list was as given below.  I submitted a report plus a test file
derived from the R file as submitted to the R-bugs list.  The
following comments appear to confirm a ghostscript bug.

[Bug 687173] line misalignment with respect to points in 8.11 but not
 8.00
http://bugs.ghostscript.com/show_bug.cgi?id=687173


------- Additional Comments From alexcher@coscript.com  2003-11-28 04:38 -------
Ghostscript uses fixed point repressntation of the device coordinates.
So there is a trade-off between the range and precission.

File gxfixed.h was changed on 2003/02/15 22:37:01 to have 8 bit precission.
The previous 12 bits was too large to accomodate large format inkjet printers
at modern resolutions of 720 and 1200 dpi.

The long chain of rlineto operations in the source file accumulates
roniding errors, which becomes visible at the end of the line.

There are several ways to improve the precission.
(1) Use to 64-bit fixed numbers. This is very easy to do but may affect the
    performance.
(2) Keep current point calculations in float point. Most precission problems
    are caused by inprecise current point calculations.
(3) Replace all fixed arithmetic with floating pont one. This can improve
    the performance on some platforms.

One can also work around the problem by:
(1) compiling a private version of GS with higher precission and lower range.
(2) fixing the PS file using UNIX text tools.

-- 
Stephen Harker                           Stephen.Harker@spme.monash.edu.au
School of Physics & Materials Engineering
Monash University                       http://www.ph.adfa.edu.au/s-harker/
                                 Baloney Baffles brains: Eric Frank Russell

From ripley at stats.ox.ac.uk  Mon Dec  1 08:26:54 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec  1 08:25:39 2003
Subject: [Rd] installing packages
In-Reply-To: <F0F4CB13-236F-11D8-BFCB-000A95A67E82@stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0312010715460.4150-100000@gannet.stats>

On Sun, 30 Nov 2003, Jan de Leeuw wrote:

> If R_LIBS is not set then R CMD INSTALL without a lib argument installs  
> in R_HOME/library
> while install.packages() without lib installs in the first element of  
> .libPaths().

which would normally be .Library=R_HOME/library, set in Rprofile.

> If R_LIBS is set, then R CMD INSTALL installs in the
> first directory in R_LIBS, and install.packages() still installs in the  
> first element
> of .libPaths() (i.e. ignores R_LIBS).

The first element of .libPaths() should be the first element of R_LIBS by 
default, set in Rprofile.

> Is this difference intentional ? It would perhaps be more convenient if
> .libPaths()[1] was used as a default in all cases (when no lib argument
> is given).

It is, provided the user has not reset .libPaths.

One caveat: R CMD INSTALL looks for R_LIBS in the environment, whereas by 
the time .libPaths() is set it can be set in other places, including via 
~/.Renviron.  Maybe R CMD INSTALL should look at more of those places.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Dec  1 08:31:54 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec  1 08:30:52 2003
Subject: [Rd] R as OS X Framework
In-Reply-To: <18438152-2375-11D8-A505-0003938AF008@math.uni-augsburg.de>
Message-ID: <Pine.LNX.4.44.0312010728090.4150-100000@gannet.stats>

R on Unix can be run from where it is built, and I frequently move where 
it is built/change symbolic links.  You definitely do not want where it is 
going to be installed, as make check is run where it is built (not that 
that matters when the R(.sh) scripts sets R_HOME).

On Sun, 30 Nov 2003, Simon Urbanek wrote:

> On Nov 29, 2003, at 9:33 PM, Prof Brian Ripley wrote:
> 
> > On Sat, 29 Nov 2003, Simon Urbanek wrote:
> >
> >> BTW: This is not Mac specific - I was fighting this on Windows (and
> >> unix for that matter) as well - it is possible to run an .exe linked 
> >> to
> >> R.dll from anywhere, if R.dll is in the PATH. But then, one has to
> >> determine R_HOME somehow (yes, there is the registry, but that's not
> >> really safe if more R versions are installed).
> >
> > How do you do that?  For R's own executables on Windows R_HOME is
> > determined from where they are loaded from.  You cannot AFAIK determine
> > from within an executable where the R.dll was linked from.  That's why 
> > the
> > rproxy.dll uses the registry.  I believe you have even less 
> > information on
> > Windows.
> 
> On Mac OS X there is a very nice CoreFoundation function: 
> CFBundleGetBundleWithIdentifier. Each bundle can have an unique 
> identifier and the above function will return the bundle reference if 
> the bundle was loaded by the current application - and a framework is a 
> bundle. So for Mac OS X this piece of code will determine R_HOME of the 
> linked R.framework:
> 
> CFBundleRef bundle = 
> CFBundleGetBundleWithIdentifier(CFSTR("org.r-project.r-framework") );
> CFURLRef rdir=CFBundleCopyBundleURL(bundle);
> CFStringRef rhome=CFURLCopyFileSystemPath(rdir,kCFURLPOSIXPathStyle);
> 
> I doubt there is any standard way on unix platforms in general. I have 
> a vague feeling that I saw some relevant API on Windows - at least form 
> the DLL itself, but I'm stuck with my PowerBook for three more week 
> until I get home, so I can't check that easily.
> 
> I would suggest a fallback for cases where the location cannot be 
> determined: we could use a tiny source file like location.c.in (could 
> be config.h.in itself for that matter) which gets processed by 
> configure and contains the install path. Then any program linked to R 
> shlib could call a function like char* R_installPath(); Although that 
> is not optimal, it is in general unlikely that the user would move R 
> after doing make install (unless it's a network installation of course 
> - then we're in trouble) and it is even safer that the registry on 
> Windows. It would be an useful fallback for platforms where we simply 
> don't know.
> 
> Simon
> 
> PS: My script mentioned in the original post doesn't create proper 
> Info,plist if ran by /bin/sh - you can get the correct Info.plist for R 
> 1.8.1 from http://stats.math.uni-augsburg.de/misc/Info.plist and copy 
> it to .../R.framework/Resources/
> 
> ---
> Simon Urbanek
> Department of computer oriented statistics and data analysis
> Universit?tsstr. 14
> 86135 Augsburg
> Germany
> 
> Tel: +49-821-598-2236
> Fax: +49-821-598-2280
> 
> Simon.Urbanek@Math.Uni-Augsburg.de
> http://simon.urbanek.info
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Mon Dec  1 09:50:54 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Dec  1 09:49:30 2003
Subject: [Rd] library stepfun seems to have a problem (PR#5405)
Message-ID: <20031201085054.9CC2AF30F@slim.kubism.ku.dk>

>>>>> "agandy" == agandy  <agandy@mathematik.uni-ulm.de>
>>>>>     on Sat, 29 Nov 2003 17:42:20 +0100 (CET) writes:

    agandy> The following code results in a crash of R:

    > library(stepfun) 
    > stepfun(c(), c(1))(2)

Thank you, Axel.

Yes, this should give an error instead, and will in R-patched as
of tomorrow.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From pburns at pburns.seanet.com  Mon Dec  1 15:33:56 2003
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Mon Dec  1 15:32:35 2003
Subject: [Rd] eigen anomaly
Message-ID: <3FCB5154.4000801@pburns.seanet.com>

This is undoubtedly a bug, but I doubt that it is really down to R.

Synopsis: a certain matrix causes eigen(symmetric=TRUE)
to produce NaN's in some of the returned eigenvectors.
This happens using SuSe 8.2 Professional and the precompiled
R rpm (happens in both 1.8.1 and 1.7.1).  I don't see it under
Windows.

To reproduce the bug:
The matrix (75 by 75, about 45K) is in
http://www.burns-stat.com/pages/Flotsam/eigenbugmatrix.RData

Load that into R.

sum(is.na(eigen(eigenbugmatrix, symmetric=TRUE)$vectors))

is non-zero (600 in my experience) when the bug is exhibited and
is zero when the bug is not.

It is quite sensitive to the numbers.  The bug is still there with some
scaling of the matrix (from about divide by 2 to multiply by 8).  The
bug disappears if the matrix is dumped and sourced back in again.

The only clue that I can offer is that it is vectors 43:50 (I think) that
are NaN's and the matrix is logically of rank 50.  That is, it is a
covariance matrix on 75 variables using 50 observations.

Hopefully, someone has the experience and tenacity to figure out
what is going on here.


Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

From I3tv-bounces at udius.com  Mon Dec  1 17:19:35 2003
From: I3tv-bounces at udius.com (I3tv-bounces@udius.com)
Date: Mon Dec  1 17:17:55 2003
Subject: [Rd] =?iso-8859-1?q?Votre_abonnement_=E0_la_liste_I3tv_a_=E9t=E9?=
 =?iso-8859-1?q?_r=E9sili=E9?=
Message-ID: <mailman.39.1070295575.3377.i3tv_udius.com@udius.com>

From rmh at surfer.sbm.temple.edu  Tue Dec  2 07:22:12 2003
From: rmh at surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Tue Dec  2 07:20:48 2003
Subject: [Rd] xtabs or model.frame (PR#5461)
Message-ID: <20031202062212.E094FEFB1@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################

Here is the bug report I got from Professor Hsuan, and my exploration
of it.  The cause of the problem is that a character vector is not
coerced to factor by xtabs or model.frame.

Is it a bug?  I think yes.  Character vectors are so frequently
coerced to factor that it is reasonable to assume that it will happen
here.  The documentation is ambiguous as ?xtabs says
 formula: a formula object with the cross-classifying variables,
          separated by `+', on the right hand side.  Interactions are
          not allowed.
It says "variables", not "factors", implying to us that the coercion to
factor will take place.

Rich

######################
Date: Mon, 1 Dec 2003 21:53:06 -0500
From: "Francis Hsuan" <francis.hsuan@temple.edu> Add To Address Book 
To: <rmh@temple.edu> 
Cc: "Francis Hsuan" <francish@temple.edu> 

Rich, I got some strange output from R.  Does this indicate
a bug in the xtabs() function?  Thanks, Francis

> rm(list=ls(all=TRUE))
> Freq <- c(9, 2, 5, 4, 16, 26, 10, 28)
> H <- rep(c("yes", " no"), each=4)
> S <- rep(rep(c("yes", " no"), each=2), 2)
> A <- rep(c("yes", " no"), 4)
> xtabs(Freq~H+S+A)
Error in model.frame(formula, rownames, variables, varnames,
extras, extranames,  :
        invalid variable type
> Data3 <- data.frame(H, S, A, Freq)
> xtabs(Freq~H+S+A, Data3)
, , A =  no

     S
H      no yes
   no 28  26
  yes  4   2

, , A = yes

     S
H      no yes
   no 10  16
  yes  5   9
######################

The bug is generated in  model.frame.default  by the line
    data <- .Internal(model.frame(formula, rownames, variables, 
        varnames, extras, extranames, subset, na.action))

####
## Here is one repair
> H <- factor(H)
> S <- factor(S)
> A <- factor(A)
> xtabs(Freq~H+S+A)
, , A =  no

     S
H      no yes
   no 28  26 
  yes  4   2 

, , A = yes

     S
H      no yes
   no 10  16 
  yes  5   9 

> 
## Here is another way to generate the error
> class(Data3$H)
[1] "factor"
> Data3$H <- H
> class(Data3$H)
[1] "character"
> xtabs(Freq~H+S+A, Data3)
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,  : 
	invalid variable type
> 
####

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.1
 year = 2003
 month = 06
 day = 16
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, file:c:/HOME/rmh/hh/splus.library/.RData, package:grid, package:lattice, Autoloads, package:base

From peter_mcmahan at yahoo.com  Wed Dec  3 03:54:39 2003
From: peter_mcmahan at yahoo.com (Peter McMahan)
Date: Wed Dec  3 03:53:16 2003
Subject: [Rd] RAqua line-editor navigation keys
Message-ID: <20031203025439.18139.qmail@web41605.mail.yahoo.com>

this is a suggestion for a feature in future releases
of RAqua for mac OS X:
It would be very nice if the gui conformed to the
navigation keys that most other os x apps do (with the
exception of ms word and mozilla).  i am referring to
the use of ctrl- f, b, n, p, e, and a for navigating
forward one character, backwards one character, up one
line, down one line, to the end of a line, and to the
beginning of a line, respectively.  also, ctrl-d to
delete forward would be convenient.
these work in the command-line version from terminal
because they work with everything in terminal.
this is not major, of course, but it would be nice and
would go a long way to make RAqua feel more native to
os x.
thanks,
peter

From schiessler at agere.com  Wed Dec  3 06:01:58 2003
From: schiessler at agere.com (schiessler@agere.com)
Date: Wed Dec  3 06:00:33 2003
Subject: [Rd] memory leak (PR#5476)
Message-ID: <20031203050158.86615EC53@slim.kubism.ku.dk>

Full_Name: g. schiessler
Version: 1.8.1
OS: Windows 2000 Pro
Submission from: (NULL) (24.229.106.55)


Appears to be memory leak with 
=RApply("qnorm",K56)*-1 function
from within Excel 2000.
Have spreadsheet with between 
100 and 500 of above references.
When spreadsheet first opened 
system using about 200MB but 
very quickly grows to over 600MB
and appears to be unlimited.
Is there another way to run qnorm
from within Excel with less memory?

From ripley at stats.ox.ac.uk  Wed Dec  3 08:51:49 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Dec  3 08:57:14 2003
Subject: [Rd] memory leak (PR#5476)
In-Reply-To: <20031203050158.86615EC53@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312030748170.21703-100000@gannet.stats>

That appears to have been garbled en route.
Could you please take a look at the FAQ and submit
a reproducible example along the lines suggested there.

On the face of it this appears to be a bug report on Excel 2000,
but you may be using an R addin without mentioning it.

On Wed, 3 Dec 2003 schiessler@agere.com wrote:

> Full_Name: g. schiessler
> Version: 1.8.1
> OS: Windows 2000 Pro
> Submission from: (NULL) (24.229.106.55)
> 
> 
> Appears to be memory leak with 
> =RApply("qnorm",K56)*-1 function

Is that line really correct?  If so, what does it have to do with R?

> from within Excel 2000.
> Have spreadsheet with between 
> 100 and 500 of above references.
> When spreadsheet first opened 
> system using about 200MB but 
> very quickly grows to over 600MB
> and appears to be unlimited.
> Is there another way to run qnorm
> from within Excel with less memory?
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From schiessler at agere.com  Wed Dec  3 17:11:35 2003
From: schiessler at agere.com (Schiessler, Gary E (Gary))
Date: Wed Dec  3 17:10:26 2003
Subject: [Rd] memory leak (PR#5476)
Message-ID: <3FCE0B37.89A2D4C7@agere.com>

Prof Ripley,

I have attached a sample Excel spreadsheet
containing approx 500 RApply("qnorm"...
references. When I repeatedly re-calc
cell references, either automatically or manually
(F9), the memory usage on my system increases
with each re-calc seemingly without bound.
The more RApply references the greater the
incremental memory consumption.

I'm using Excel 2000 (9.0.4402 SR-1)
runnning under Microsoft Windows 2000
5.00.2195 SP3 on an IBM T21 laptop
with 256MB of memory.

I'm running R 1.8.1
> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    8.1
year     2003
month    11
day      21
language R

with RExcel version 1.0

and R DCOM server version 1.2

If you need any additional information
please let me know.

Thanks,
Gary Schiessler
Agere Systems

Prof Brian Ripley wrote:

> That appears to have been garbled en route.
> Could you please take a look at the FAQ and submit
> a reproducible example along the lines suggested there.
>
> On the face of it this appears to be a bug report on Excel 2000,
> but you may be using an R addin without mentioning it.
>
> On Wed, 3 Dec 2003 schiessler@agere.com wrote:
>
> > Full_Name: g. schiessler
> > Version: 1.8.1
> > OS: Windows 2000 Pro
> > Submission from: (NULL) (24.229.106.55)
> >
> >
> > Appears to be memory leak with
> > =RApply("qnorm",K56)*-1 function
>
> Is that line really correct?  If so, what does it have to do with R?
>
> > from within Excel 2000.
> > Have spreadsheet with between
> > 100 and 500 of above references.
> > When spreadsheet first opened
> > system using about 200MB but
> > very quickly grows to over 600MB
> > and appears to be unlimited.
> > Is there another way to run qnorm
> > from within Excel with less memory?
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bates at stat.wisc.edu  Wed Dec  3 18:52:18 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Dec  3 18:51:11 2003
Subject: [Rd] RAqua line-editor navigation keys
In-Reply-To: <20031203025439.18139.qmail@web41605.mail.yahoo.com>
References: <20031203025439.18139.qmail@web41605.mail.yahoo.com>
Message-ID: <6rk75deqlp.fsf@bates4.stat.wisc.edu>

Peter McMahan <peter_mcmahan@yahoo.com> writes:

> this is a suggestion for a feature in future releases
> of RAqua for mac OS X:
> It would be very nice if the gui conformed to the
> navigation keys that most other os x apps do (with the
> exception of ms word and mozilla).  i am referring to
> the use of ctrl- f, b, n, p, e, and a for navigating
> forward one character, backwards one character, up one
> line, down one line, to the end of a line, and to the
> beginning of a line, respectively.  also, ctrl-d to
> delete forward would be convenient.

I believe these started as the emacs (and later readline) keybindings.

> these work in the command-line version from terminal
> because they work with everything in terminal.

I imagine they work in R under a terminal because of inclusion of the
readline library, not because "they work with everything".

> this is not major, of course, but it would be nice and would go a
> long way to make RAqua feel more native to os x.

Alternatively, you could use the ESS package with emacs or xemacs
under OS X (but I can understand if emacs doesn't seem very
Macintosh-like :-). Anyone who has attended presentations by both Steve
Jobs and Richard Stallman would have difficulty imagining the two of
them finding common ground.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

From dmurdoch at pair.com  Thu Dec  4 02:36:02 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Dec  4 02:34:38 2003
Subject: [Rd] Insight/gdb users?
Message-ID: <463tsvkpgsslsqqgs2flqhafuvluiedt42@4ax.com>

Are there any users of Insight with gdb out there?

I was debugging r-patched tonight, and after quitting and restarting,
suddenly Insight won't start!!?  

It prints a very long error dialog (which doesn't allow cut and paste
@%$!), starting out like this:

> Can't find a usable main.tcl in the following directories ....

This is followed by a search list of directories, one of which does
contain main.tcl.  Then the weird part:

>f:/cygwin/usr/share/Insight1.0/main.tcl:  extra characters after close-brace

>extra characters after close-brace while executing

>"F:/[the path to] /Rterm.exe/breakpoints={{break cmdlineoptions} 1 {} {"

Now I had a breakpoint set on "cmdlineoptions" in that file, so it
looks to me as though Insight is reading a file of old breakpoints
from somewhere, and tripping over a syntax error in it.  But I can't
find the file!!

Does anyone know where Insight would save debugging options from
session to session?  If not, does anyone know where to go for help
with it?

Duncan Murdoch

From dmurdoch at pair.com  Thu Dec  4 04:19:26 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Dec  4 04:18:03 2003
Subject: [Rd] Insight/gdb users?
In-Reply-To: <Pine.LNX.4.44.0312032013290.24805-100000@itasca2.stat.uiowa.edu>
References: <463tsvkpgsslsqqgs2flqhafuvluiedt42@4ax.com>
	<Pine.LNX.4.44.0312032013290.24805-100000@itasca2.stat.uiowa.edu>
Message-ID: <bt9tsv4rsn5m0bav1ap3rlqvcm8rrtccuk@4ax.com>

On Wed, 3 Dec 2003 20:15:29 -0600 (CST), you wrote:

>Is there a file gdbtk.ini someplace  that might have gotten corrupted?

That's it!  Thanks. 

Duncan Murdoch

From dmurdoch at pair.com  Thu Dec  4 05:32:57 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Dec  4 05:31:32 2003
Subject: [Rd] Not my night for tools...
Message-ID: <lvdtsvss6u8dp28p67k30vl8vampa0uqnc@4ax.com>

Earlier this evening, Insight/gdb messed up it's gdbtk.ini file and
stopped working.  One of its error messages said that it might not be
installed properly.

After trying a few other things, I decided to update my cygwin
installation, hoping this would fix Insight.  It didn't.

After Luke told me about the gdbtk.ini file and I got Insight working,
I found the cause of a small bug in r-patched, and fixed it.  Tried to
do a cvs update before committing the patch, and cvs hung.  After I
(thought I) backed out to the previous version of cygwin, cvs still
hangs.

Just not my night.

Duncan Murdoch

From Brian.Middleton at astrazeneca.com  Thu Dec  4 12:54:59 2003
From: Brian.Middleton at astrazeneca.com (Brian.Middleton@astrazeneca.com)
Date: Thu Dec  4 12:53:39 2003
Subject: [Rd] Loading R 1.8.1 (PR#5509)
Message-ID: <20031204115459.20E93EDEB@slim.kubism.ku.dk>

I downloaded the latest Windows version 1.8.1 from
http://www.stats.bris.ac.uk/R/  (21/11/03 R-1.8.1.tar then to-day the file
is R-1.8.1.tgz) and from Windows unzipped the file.  The directory R-1.8.1
is created (rather than rw1081) but no subdirectory 'bin'.  I cannot see any
.dll nor .exe files in the directory and I understand from Brian Ripley's
page of 'R for Windows FAQ' there should be a 'bin' subdirectory.

2.2 How do I install R for Windows?
You need Windows 95/98/ME/NT4/2000/XP: Windows 3.11+win32s will not work.
Your file system must allow long file names (as is likely except perhaps for
some network-mounted systems).
If you want to build packages from sources, we recommend that you choose an
installation path not containing spaces. (Using a path with spaces in will
probably work, but is little-tested.)
To use rw1081.exe or miniR.exe. Just double-click on the icon and follow the
instructions. If you installed R this way you can uninstall it from the
Control Panel or Start Menu (unless you supressed making a group for R).
Choose a working directory for R. If you installed manually, make a shortcut
to rw1081\bin\Rgui.exe on your desktop or somewhere on the Start menu file
tree. Right-click the shortcut, select Properties... and change the `Start
in' field to your working directory.
 
Have I done something wrong ?

I would be grateful for some help,

Thanks,  

Brian Middleton
Consultant Statistician
Statistical Sciences Group, EST
AstraZeneca, England
Tel (44) 1625 515767

From dmurdoch at pair.com  Thu Dec  4 13:17:00 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Dec  4 13:15:36 2003
Subject: [Rd] Loading R 1.8.1 (PR#5509)
In-Reply-To: <20031204115459.20E93EDEB@slim.kubism.ku.dk>
References: <20031204115459.20E93EDEB@slim.kubism.ku.dk>
Message-ID: <h69usvkag0s96s1tle41ssh340dq2fs5a7@4ax.com>

On Thu,  4 Dec 2003 12:54:59 +0100 (CET), you wrote:

>I downloaded the latest Windows version 1.8.1 from
>http://www.stats.bris.ac.uk/R/  (21/11/03 R-1.8.1.tar then to-day the file
>is R-1.8.1.tgz) and from Windows unzipped the file.  The directory R-1.8.1
>is created (rather than rw1081) but no subdirectory 'bin'.  I cannot see any
>.dll nor .exe files in the directory and I understand from Brian Ripley's
>page of 'R for Windows FAQ' there should be a 'bin' subdirectory.

You've downloaded the source, not a binary build.  The file you want
to download is rw1081.exe, from the /bin/windows/base directory on
CRAN mirrors.

Duncan Murdoch

From ekpiym8u at uluru.stanford.edu  Thu Dec  4 14:59:26 2003
From: ekpiym8u at uluru.stanford.edu (ekpiym8u@uluru.stanford.edu)
Date: Thu Dec  4 14:58:06 2003
Subject: [Rd] Order X.anax Directly from Here gkwjc rn (PR#5514)
Message-ID: <20031204135926.0F706F30F@slim.kubism.ku.dk>


--.AA_D.8A.BA0F..C
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML><FONT  SIZE=3D2 PTSIZE=3D10 FAMILY=3D"SANSSERIF" FACE=3D"Arial" LANG=
=3D"0"><BR>
1<BR>
<BR>
If you need any type of medication, we can help:<BR>
<BR>
<A HREF=3D"http://www.northcentral.biz/web/">Check out our full list today=
</A><U><BR>
<BR>
<BR>
</U>f&nbsp; 9&nbsp; Hilary Vazquez</FONT></HTML>
mnap sqyc
suxozuo sy mzcsbqm
iarqngjuelw  
row zlyd

 ts

--.AA_D.8A.BA0F..C--

From bronwyn at biocadmin.otago.ac.nz  Fri Dec  5 00:48:39 2003
From: bronwyn at biocadmin.otago.ac.nz (bronwyn@biocadmin.otago.ac.nz)
Date: Fri Dec  5 00:47:15 2003
Subject: [Rd] R OS X panther? (PR#5529)
Message-ID: <20031204234839.B630DEDDE@slim.kubism.ku.dk>

I have just used the RAqua.pkg to install R, and it doesn't work!  I 
have Mac OS X 10.3, and the old version of R works OK, but the .pkg 
thing installed, and then when I double-click on the "StartR" 
application nothing happens.  Nothing at all, no little icon bobbing up 
and down in the dock, just nothing.  What have I done wrong? I didn't 
have to install the other packages did I?

Bronwyn Carlisle
Biochemistry Department
University of Otago
Dunedin
New Zealand

Tel 64 3 479 7704

From tlumley at u.washington.edu  Fri Dec  5 01:38:54 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Dec  5 01:37:42 2003
Subject: [Rd] R OS X panther? (PR#5529)
In-Reply-To: <20031204234839.B630DEDDE@slim.kubism.ku.dk>
References: <20031204234839.B630DEDDE@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.58.0312041637200.42940@homer04.u.washington.edu>

On Fri, 5 Dec 2003 bronwyn@biocadmin.otago.ac.nz wrote:

> I have just used the RAqua.pkg to install R, and it doesn't work!  I
> have Mac OS X 10.3, and the old version of R works OK, but the .pkg
> thing installed, and then when I double-click on the "StartR"
> application nothing happens.  Nothing at all, no little icon bobbing up
> and down in the dock, just nothing.  What have I done wrong? I didn't
> have to install the other packages did I?

If you open a Console window (in Applications | Utilities | Console) you
may get some more informative error messages.

	-thomas

From wolfram at fischer-zim.ch  Fri Dec  5 10:11:46 2003
From: wolfram at fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Fri Dec  5 10:10:19 2003
Subject: [Rd] R 1.8.1 ./configure with "," in working directory (PR#5536)
Message-ID: <20031205091146.20572EDDE@slim.kubism.ku.dk>

PROBLEM
``./configure'' creates empty Makefiles and the following error messages
if there is a ``,'' in the name of the working directory.

REMARK
As I have seen, ``,'' is used as separator for the sed statements in
config.status. Would it be possible to use instead a character which
cannot be used in a pathname, e.g. ``;''?

ERROR MESSAGES
...
checking for lpr... lpr
checking for paperconf... false
checking for recommended packages... yes
configure: creating ./config.status
config.status: creating Makeconf
sed: -e expression #1, char 295: Unknown option to `s'
config.status: creating Makefile
sed: -e expression #1, char 295: Unknown option to `s'
config.status: creating afm/Makefile
sed: -e expression #1, char 299: Unknown option to `s'
config.status: creating doc/Makefile
...


Wolfram

From wolfram at fischer-zim.ch  Fri Dec  5 10:59:58 2003
From: wolfram at fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Fri Dec  5 10:58:32 2003
Subject: [Rd] [R] factor: help-page: reference to "codes" (PR#5537)
Message-ID: <20031205095958.F2725FB8A@slim.kubism.ku.dk>

Since ``codes'' is deprecated, the reference to ``codes''
in ``See also'' of the ``factor'' help page should be updated
and refer to ``unclass''.

Wolfram

From B.Rowlingson at lancaster.ac.uk  Fri Dec  5 11:04:11 2003
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri Dec  5 11:03:04 2003
Subject: [Rd] R 1.8.1 ./configure with "," in working directory (PR#5536)
In-Reply-To: <20031205091146.20572EDDE@slim.kubism.ku.dk>
References: <20031205091146.20572EDDE@slim.kubism.ku.dk>
Message-ID: <3FD0581B.10800@lancaster.ac.uk>

wolfram@fischer-zim.ch wrote:

> REMARK
> As I have seen, ``,'' is used as separator for the sed statements in
> config.status. Would it be possible to use instead a character which
> cannot be used in a pathname, e.g. ``;''?
> 

  What makes you think ';' cant be used in a pathname?

$ mkdir 'foo;bar'
$ ls -l
total 4
drwxr-xr-x    2 rowlings baz          4096 Dec  5 10:01 foo;bar

I think the only (printable ascii) character not allowed in Unix 
pathnames is '/'.

Barry

From bjg at network-theory.co.uk  Fri Dec  5 17:58:12 2003
From: bjg at network-theory.co.uk (bjg@network-theory.co.uk)
Date: Fri Dec  5 17:56:48 2003
Subject: [Rd] documentation bugs (cvs) (PR#5543)
Message-ID: <20031205165812.3E67EECB4@slim.kubism.ku.dk>

Hi,

Below I've flagged some sentences in the R documentation (from cvs)
which are garbled in some way.  If anyone can clarify what these
sentences should say I'd be grateful.

The problems were picked up as part of the proof-reading of the R
manuals by Ciaran O'Riordan.  After looking at the text neither of us
could figure out what the documentation was meant to say.

-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

Index: src/library/base/man/merge.Rd
===================================================================
RCS file: /home/cvsroot/R/src/library/base/man/merge.Rd,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 merge.Rd
--- src/library/base/man/merge.Rd	7 Nov 2003 11:57:17 -0000	1.1.1.1
+++ src/library/base/man/merge.Rd	5 Dec 2003 16:23:13 -0000
@@ -43,6 +43,7 @@
   that match on the specified columns are extracted, and joined
   together.  If there is more than one match, all possible matches
   contribute one row each.\cr
+% "vector are": singular or plural???
   If the \code{by.*} vector are of length 0, the result, \code{r}, is the
   \dQuote{Cartesian product} of \code{x} and \code{y}, i.e.,
   \code{dim(r) = c(nrow(x)*nrow, ncol(x) + ncol(y))}.
Index: src/library/base/man/paste.Rd
===================================================================
RCS file: /home/cvsroot/R/src/library/base/man/paste.Rd,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 paste.Rd
--- src/library/base/man/paste.Rd	7 Nov 2003 11:57:17 -0000	1.1.1.1
+++ src/library/base/man/paste.Rd	5 Dec 2003 16:25:06 -0000
@@ -24,6 +24,7 @@
 }
 \value{
   A character vector of the concatenated values.  Thus will be of length
+% objects are (....) unless ???
   zero if all the objects are unless \code{collapse} is non-NULL, in
   which case it is a single empty string.
 }
Index: src/library/base/man/print.coefmat.Rd
===================================================================
RCS file: /home/cvsroot/R/src/library/base/man/print.coefmat.Rd,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 print.coefmat.Rd
--- src/library/base/man/print.coefmat.Rd	7 Nov 2003 11:57:17 -0000	1.1.1.1
+++ src/library/base/man/print.coefmat.Rd	5 Dec 2003 16:26:12 -0000
@@ -43,6 +43,7 @@
     \code{TRUE} \emph{and} \code{x} has at least 4 columns \emph{and}
     the last column name of \code{x} starts with \code{"Pr("}.}
   \item{has.Pvalue}{logical; if \code{TRUE}, the last column of \code{x}
+% should be "iff P.values is TRUE"???
     contains P values; in that case, it is printed \emph{iff}
     \code{P.values} (above).}
   \item{eps.Pvalue}{number,..}
Index: src/library/base/man/sink.Rd
===================================================================
RCS file: /home/cvsroot/R/src/library/base/man/sink.Rd,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 sink.Rd
--- src/library/base/man/sink.Rd	7 Nov 2003 11:57:18 -0000	1.1.1.1
+++ src/library/base/man/sink.Rd	5 Dec 2003 16:27:18 -0000
@@ -44,6 +44,7 @@
   there is no stack of connections.
 }
 \value{
+% this sentenced doesn't seem to mean anything?
   For \code{sink}.
 
   For \code{sink.number()} the number (0, 1, 2, \dots) of diversions of

From jago at mclink.it  Fri Dec  5 23:40:36 2003
From: jago at mclink.it (Stefano Iacus)
Date: Fri Dec  5 23:39:28 2003
Subject: [Rd] R OS X panther? (PR#5529)
In-Reply-To: <20031204234839.B630DEDDE@slim.kubism.ku.dk>
Message-ID: <0B0BB254-2774-11D8-ABA5-003065CC4CB8@mclink.it>


On Venerd?, dic 5, 2003, at 00:48 Europe/Rome, 
bronwyn@biocadmin.otago.ac.nz wrote:

> I have just used the RAqua.pkg to install R, and it doesn't work!  I
> have Mac OS X 10.3, and the old version of R works OK, but the .pkg
> thing installed, and then when I double-click on the "StartR"
> application nothing happens.  Nothing at all, no little icon bobbing up
> and down in the dock, just nothing.  What have I done wrong? I didn't
> have to install the other packages did I?

 From the ReadMe.txt file

------------
If you want to install RAqua double click on the RAqua.pkg icon. You 
will be asked for a root password. RAqua will be installed on your 
system in  the /Applications folder.

(...)

You should also install the other three packages:
1. libreadline (unless you have this package already installed)
2. tcltk (this is a must if you want to use tcltk)
3. libxml2 (if you want to use the XML package)
---------



I guess you don't have the libreadline library installed on you system 
and this causes RAqua failing to launch. Please use the installer 
provided in the RAqua.dmg archive.

Also follow Thomas L. suggestion (as a general rule when a OSX 
application fails to run or quits unexpectedly) to look at the Console 
application inside the Applications/Utilities folder on your system

stefano


>
> Bronwyn Carlisle
> Biochemistry Department
> University of Otago
> Dunedin
> New Zealand
>
> Tel 64 3 479 7704
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From maechler at stat.math.ethz.ch  Sat Dec  6 18:23:52 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat Dec  6 18:22:32 2003
Subject: [Rd] documentation bugs (cvs) (PR#5543)
Message-ID: <20031206172352.88F50F32B@slim.kubism.ku.dk>

Thank you, Brian.
I've just committed the fixes.

Apropos the one in paste.Rd :

 \value{
   A character vector of the concatenated values.  Thus will be of length
+% objects are (....) unless ???
   zero if all the objects are unless \code{collapse} is non-NULL, in
   which case it is a single empty string.
 }

I've just added a "," between 'are' and 'unless' -- Do you
understand it now?

Martin

From p.dalgaard at biostat.ku.dk  Sat Dec  6 23:36:59 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat Dec  6 23:35:57 2003
Subject: [Rd] documentation bugs (cvs) (PR#5543)
In-Reply-To: <20031206172352.88F50F32B@slim.kubism.ku.dk>
References: <20031206172352.88F50F32B@slim.kubism.ku.dk>
Message-ID: <x27k19inec.fsf@biostat.ku.dk>

maechler@stat.math.ethz.ch writes:

> Thank you, Brian.
> I've just committed the fixes.
> 
> Apropos the one in paste.Rd :
> 
>  \value{
>    A character vector of the concatenated values.  Thus will be of length
> +% objects are (....) unless ???
>    zero if all the objects are unless \code{collapse} is non-NULL, in
>    which case it is a single empty string.
>  }
> 
> I've just added a "," between 'are' and 'unless' -- Do you
> understand it now?

"Thus" should be "This" too, I suppose?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From nakama at ki.rim.or.jp  Mon Dec  8 05:13:43 2003
From: nakama at ki.rim.or.jp (nakama@ki.rim.or.jp)
Date: Mon Dec  8 05:12:35 2003
Subject: [Rd] rgui transpose-chars problem (PR#5593)
Message-ID: <20031208041343.E9C53ED8F@slim.kubism.ku.dk>

Full_Name: Eiji Nakama
Version: 1.8.1
OS: Windows2000(Japan)
Submission from: (NULL) (219.117.236.13)


I type typo sl().
cursole move `l` position moved.
type C-t not change.
It operated in rterm.

--- src/gnuwin32/console.c.orig
+++ src/gnuwin32/console.c
            case CHARTRANS:
-               if(cur_pos < 2) break;
+               if(cur_pos < 1) break;
+               if(cur_pos >= max_pos) break;
                cur_char = cur_line[cur_pos];
                cur_line[cur_pos] = cur_line[cur_pos-1];
                cur_line[cur_pos-1] = cur_char;
                break;

From bjg at network-theory.co.uk  Mon Dec  8 12:59:15 2003
From: bjg at network-theory.co.uk (bjg@network-theory.co.uk)
Date: Mon Dec  8 12:58:16 2003
Subject: [Rd] documentation bugs (cvs) (PR#5543)
Message-ID: <20031208115915.958A0EA7F@slim.kubism.ku.dk>

Martin Maechler writes:
 > Thank you, Brian.
 > I've just committed the fixes.

Thanks I will incorporate them into the printed version.

 > Apropos the one in paste.Rd :
 > 
 >  \value{
 >    A character vector of the concatenated values.  Thus will be of length
 > +% objects are (....) unless ???
 >    zero if all the objects are unless \code{collapse} is non-NULL, in
 >    which case it is a single empty string.
 >  }
 > 
 > I've just added a "," between 'are' and 'unless' -- Do you
 > understand it now?

I understand it.  It may be clearer to write explicitly,

"This will be of length zero if all the objects are of length zero, unless"

I'll be sending a big set of patches for the the other typos found
during the proofreading.

-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

From ripley at stats.ox.ac.uk  Mon Dec  8 13:02:52 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec  8 13:01:51 2003
Subject: [Rd] rgui transpose-chars problem (PR#5593)
In-Reply-To: <20031208041343.E9C53ED8F@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312081159370.19038-100000@gannet.stats>

Thank you, now incorporated in R-patched.

For future reference, could you please include the line numbers for
diffs in bug reports, so patch will work?

On Mon, 8 Dec 2003 nakama@ki.rim.or.jp wrote:

> Full_Name: Eiji Nakama
> Version: 1.8.1
> OS: Windows2000(Japan)
> Submission from: (NULL) (219.117.236.13)
> 
> 
> I type typo sl().
> cursole move `l` position moved.
> type C-t not change.
> It operated in rterm.
> 
> --- src/gnuwin32/console.c.orig
> +++ src/gnuwin32/console.c
>             case CHARTRANS:
> -               if(cur_pos < 2) break;
> +               if(cur_pos < 1) break;
> +               if(cur_pos >= max_pos) break;
>                 cur_char = cur_line[cur_pos];
>                 cur_line[cur_pos] = cur_line[cur_pos-1];
>                 cur_line[cur_pos-1] = cur_char;
>                 break;

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bjg at network-theory.co.uk  Mon Dec  8 16:10:23 2003
From: bjg at network-theory.co.uk (bjg@network-theory.co.uk)
Date: Mon Dec  8 16:08:56 2003
Subject: [Rd] documentation fix - strwrap.Rd (cvs) (PR#5606)
Message-ID: <20031208151023.BC308F32C@slim.kubism.ku.dk>

Here is a patch for a garbled sentence in strwrap.Rd

regards
-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

Index: strwrap.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/strwrap.Rd,v
retrieving revision 1.2
diff -c -r1.2 strwrap.Rd
*** strwrap.Rd	2003/07/08 00:20:19	1.2
--- strwrap.Rd	2003/12/08 15:08:11
***************
*** 30,37 ****
  }
  \details{
    Whitespace in the input is destroyed.  Double spaces after periods
!   (thought as representing sentence ends) are preserved.  Currently, it
!   possible sentence ends at line breaks are not considerd specially.
    
    Indentation is relative to the number of characters in the prefix
    string.
--- 30,37 ----
  }
  \details{
    Whitespace in the input is destroyed.  Double spaces after periods
!   (representing sentence ends) are preserved.  Currently, sentence
!   ends at line breaks are not considered specially.
    
    Indentation is relative to the number of characters in the prefix
    string.

From p.dalgaard at biostat.ku.dk  Mon Dec  8 17:00:13 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Dec  8 16:59:14 2003
Subject: [Rd] matrix coercion, logical -> character
Message-ID: <x2smjvpaeq.fsf@biostat.ku.dk>


Anyone know whether this is intentional, and by which rationale?
(R-devel on RedHat, but hardly new)


> l <- data.frame(a=rpois(10,1)>0,b=rpois(10,1)>0)
> apply(l,1,which)
Error in FUN(newX[, i], ...) : argument to "which" is not logical
> lapply(l,mode)
$a
[1] "logical"

$b
[1] "logical"

> mode(as.matrix(l))
[1] "character"


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Mon Dec  8 17:12:38 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec  8 17:11:19 2003
Subject: [Rd] matrix coercion, logical -> character
In-Reply-To: <x2smjvpaeq.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0312081607300.19904-100000@gannet.stats>

On 8 Dec 2003, Peter Dalgaard wrote:

> 
> Anyone know whether this is intentional, and by which rationale?
> (R-devel on RedHat, but hardly new)

It is documented:

     'as.matrix' is a generic function. The method for data frames will
     convert any non-numeric column into a character vector using
     'format' and so return a character matrix.

Remember than not some long ago you could not have logical columns in data 
frames: they were coerced to factors.

It would be easy to change to allow numeric, logical or character 
matrices.



> 
> 
> > l <- data.frame(a=rpois(10,1)>0,b=rpois(10,1)>0)
> > apply(l,1,which)
> Error in FUN(newX[, i], ...) : argument to "which" is not logical
> > lapply(l,mode)
> $a
> [1] "logical"
> 
> $b
> [1] "logical"
> 
> > mode(as.matrix(l))
> [1] "character"
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Mon Dec  8 18:50:31 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Dec  8 18:49:33 2003
Subject: [Rd] matrix coercion, logical -> character
In-Reply-To: <Pine.LNX.4.44.0312081607300.19904-100000@gannet.stats>
References: <Pine.LNX.4.44.0312081607300.19904-100000@gannet.stats>
Message-ID: <x2brqjp5aw.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 8 Dec 2003, Peter Dalgaard wrote:
> 
> > 
> > Anyone know whether this is intentional, and by which rationale?
> > (R-devel on RedHat, but hardly new)
> 
> It is documented:
> 
>      'as.matrix' is a generic function. The method for data frames will
>      convert any non-numeric column into a character vector using
>      'format' and so return a character matrix.

and for apply:

     If 'X' is not an array but has a dimension attribute, 'apply'
     attempts to coerce it to an array via 'as.matrix' if it is
     two-dimensional (e.g., data frames) or via 'as.array'.

explains why apply(...., which) got in trouble

> Remember than not some long ago you could not have logical columns in data 
> frames: they were coerced to factors.
> 
> It would be easy to change to allow numeric, logical or character 
> matrices.

Yes. That was the direction in which I was hinting. It does seem a bit
like a leftover, and applying which() over a set of logical
columns is not unlikely to be useful in practice.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pburns at pburns.seanet.com  Mon Dec  8 19:43:50 2003
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Mon Dec  8 19:42:44 2003
Subject: [Rd] matrix coercion, logical -> character
References: <Pine.LNX.4.44.0312081607300.19904-100000@gannet.stats>
	<x2brqjp5aw.fsf@biostat.ku.dk>
Message-ID: <3FD4C666.9080302@pburns.seanet.com>

It seems another reason to make the change would be the
ability to work around the following feature:

 > lmat <- as.matrix(data.frame(a=c(FALSE, TRUE)))
 > lmat
  a     
1 "FALSE"
2 " TRUE"
 > mode(lmat) <- "logical"
 >
 > lmat
      a
1 FALSE
2    NA

Numeric, character and logical were mentioned.  Complex data
frames coerce to complex matrices already.

Apropos of this, it would be good to put a See Also "complex"
in the "numeric" help file and vice versa.

Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Peter Dalgaard wrote:

>Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
>
>  
>
>>On 8 Dec 2003, Peter Dalgaard wrote:
>>
>>    
>>
>>>Anyone know whether this is intentional, and by which rationale?
>>>(R-devel on RedHat, but hardly new)
>>>      
>>>
>>It is documented:
>>
>>     'as.matrix' is a generic function. The method for data frames will
>>     convert any non-numeric column into a character vector using
>>     'format' and so return a character matrix.
>>    
>>
>
>and for apply:
>
>     If 'X' is not an array but has a dimension attribute, 'apply'
>     attempts to coerce it to an array via 'as.matrix' if it is
>     two-dimensional (e.g., data frames) or via 'as.array'.
>
>explains why apply(...., which) got in trouble
>
>  
>
>>Remember than not some long ago you could not have logical columns in data 
>>frames: they were coerced to factors.
>>
>>It would be easy to change to allow numeric, logical or character 
>>matrices.
>>    
>>
>
>Yes. That was the direction in which I was hinting. It does seem a bit
>like a leftover, and applying which() over a set of logical
>columns is not unlikely to be useful in practice.
>
>  
>

From ripley at stats.ox.ac.uk  Mon Dec  8 19:57:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec  8 20:11:33 2003
Subject: [Rd] matrix coercion, logical -> character
In-Reply-To: <3FD4C666.9080302@pburns.seanet.com>
Message-ID: <Pine.LNX.4.44.0312081856240.30662-100000@gannet.stats>

On Mon, 8 Dec 2003, Patrick Burns wrote:

> It seems another reason to make the change would be the
> ability to work around the following feature:
> 
>  > lmat <- as.matrix(data.frame(a=c(FALSE, TRUE)))
>  > lmat
>   a     
> 1 "FALSE"
> 2 " TRUE"
>  > mode(lmat) <- "logical"
>  >
>  > lmat
>       a
> 1 FALSE
> 2    NA
> 
> Numeric, character and logical were mentioned.  Complex data
> frames coerce to complex matrices already.

(Yes, complex is numeric for this purpose.  I had checked that out.)

> Apropos of this, it would be good to put a See Also "complex"
> in the "numeric" help file and vice versa.
> 
> Patrick Burns
> 
> Burns Statistics
> patrick@burns-stat.com
> +44 (0)20 8525 0696
> http://www.burns-stat.com
> (home of S Poetry and "A Guide for the Unwilling S User")
> 
> Peter Dalgaard wrote:
> 
> >Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> >
> >  
> >
> >>On 8 Dec 2003, Peter Dalgaard wrote:
> >>
> >>    
> >>
> >>>Anyone know whether this is intentional, and by which rationale?
> >>>(R-devel on RedHat, but hardly new)
> >>>      
> >>>
> >>It is documented:
> >>
> >>     'as.matrix' is a generic function. The method for data frames will
> >>     convert any non-numeric column into a character vector using
> >>     'format' and so return a character matrix.
> >>    
> >>
> >
> >and for apply:
> >
> >     If 'X' is not an array but has a dimension attribute, 'apply'
> >     attempts to coerce it to an array via 'as.matrix' if it is
> >     two-dimensional (e.g., data frames) or via 'as.array'.
> >
> >explains why apply(...., which) got in trouble
> >
> >  
> >
> >>Remember than not some long ago you could not have logical columns in data 
> >>frames: they were coerced to factors.
> >>
> >>It would be easy to change to allow numeric, logical or character 
> >>matrices.
> >>    
> >>
> >
> >Yes. That was the direction in which I was hinting. It does seem a bit
> >like a leftover, and applying which() over a set of logical
> >columns is not unlikely to be useful in practice.
> >
> >  
> >
> 
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bates at stat.wisc.edu  Mon Dec  8 23:10:11 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Mon Dec  8 23:08:45 2003
Subject: [Rd] Chaining prototypes in S4 class definitions
Message-ID: <6r8ylnt0zg.fsf@bates4.stat.wisc.edu>

Under R-devel class definitions like

# S4 class for general double-precision matrices
setClass("Matrix",
         representation(Dim = "integer", rcond = "numeric",
                        factorization = "list"),
         contains = "numeric",
         prototype = prototype(numeric(0), Dim = as.integer(c(0,0)),
         rcond = as.numeric(NA), factorization = list()),
         validity = function(object) {
             .Call("Matrix_validate", object, PACKAGE="Matrix")
         })

# Dense, non-packed, triangular matrices 
setClass("trMatrix",
         representation(uplo = "character", diag = "character"),
         contains = "Matrix",
         prototype = prototype(new("Matrix"), uplo = "U", diag = "N"),
         validity = function(object) {
             .Call("trMatrix_validate", object, PACKAGE="Matrix")
         })

generate an error

Error in makePrototypeFromClassDef(properties, ClassDef, immediate) : 
	In constructing the prototype for class "trMatrix": Prototype has class "Matrix", but the data part specifies class "numeric"

which makes sense.  Is there a way to chain the definition of the
prototype so that a prototype object of the contained class is
generated first then the additional slots are added?

From Remy.Drouilhet at upmf-grenoble.fr  Tue Dec  9 11:30:36 2003
From: Remy.Drouilhet at upmf-grenoble.fr (Remy.Drouilhet@upmf-grenoble.fr)
Date: Tue Dec  9 11:29:09 2003
Subject: [Rd] Maybe some bug on sapply and cbind (PR#5628)
Message-ID: <20031209103036.3021DF4E7@slim.kubism.ku.dk>

Full_Name: Drouilhet R?my
Version: 1.8.1
OS: Linux
Submission from: (NULL) (195.221.43.136)


Hi!!!

Is there some mistake?
This is some part of one of my R programs. I created this function to show you
the trouble!!!

bugTest<-function() {
  paramnames <- c("mean","sd")
  param <- list(expression(1),expression(2))
  paramtmp <- list(mean=0,sd=1)
  if(length(param)) {
      sapply(1:length(param),function(i)
paramtmp[[paramnames[i]]]<<-param[[i]])
  }
  paramtmp
}

If you run :

> bugTest()
$mean
expression(1)

$sd
expression(2)

Everything seems Ok!!! But, now, continue by running :
> cbind(1,rep(2,1))
Segmentation fault

In fact, every cbind, rbind applying vectors seem to fail.

Now, change in the bugTest the sapply by some for instance:

bugTest2<-function() {
  paramnames <- c("mean","sd")
  param <- list(expression(1),expression(2))
  paramtmp <- list(mean=0,sd=1)
  if(length(param)) {
      for( i in 1:length(param)) paramtmp[[paramnames[i]]]<-param[[i]]
  }
  paramtmp
}

>  bugTest2()
$mean
expression(1)

$sd
expression(2)

>  cbind(1,rep(2,1))
     [,1] [,2]
[1,]    1    2

NOW, EVERYTHING IS OK!!!

I hope this could be helpful for us!!

Bye

From brahm at alum.mit.edu  Tue Dec  9 15:40:41 2003
From: brahm at alum.mit.edu (brahm@alum.mit.edu)
Date: Tue Dec  9 15:39:12 2003
Subject: [Rd] Maybe some bug on sapply and cbind (PR#5628)
Message-ID: <20031209144041.B15BBF3C4@slim.kubism.ku.dk>

I can confirm this bug on Solaris 2.8 running R-1.8.1.  Here's a simplified
version:

y <- list()
sapply(1, function(i) y[[i]] <- expression(1))
cbind(1, rep(2,1))

  [ Process R segmentation Fault at Tue Dec  9 09:20:33 2003 ]

Curiously, replacing the third line with
  cbind(1, 2)
does not casue a crash, even though rep(2,1) == 2 !


> R.version
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    8.1                 
year     2003                
month    11                  
day      21                  
language R                   
-- 
                              -- David Brahm (brahm@alum.mit.edu)

From bjg at network-theory.co.uk  Tue Dec  9 15:45:52 2003
From: bjg at network-theory.co.uk (bjg@network-theory.co.uk)
Date: Tue Dec  9 15:44:28 2003
Subject: [Rd] documentation fixes (cvs) (PR#5632)
Message-ID: <20031209144552.7BD50F4DB@slim.kubism.ku.dk>

The patch below attempts to correct some unclear sentences in the R
documentation.

In the case of coplot.Rd it wasn't clear whether "shingle" bar had a
special meaning or was a typo for "single". I've just put a comment in
that case.

regards
-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

Index: src/library/base/man/Random.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Random.Rd,v
retrieving revision 1.40
diff -u -r1.40 Random.Rd
--- src/library/base/man/Random.Rd	2003/12/09 09:11:10	1.40
+++ src/library/base/man/Random.Rd	2003/12/09 14:37:13
@@ -147,7 +147,8 @@
   represent the type of normal generator (starting at \code{0}).
 
   In the underlying C, \code{.Random.seed[-1]} is \code{unsigned};
-  therefore in \R \code{.Random.seed[-1]} can be negative.
+  therefore in \R \code{.Random.seed[-1]} can be negative, due to
+  the coercion of an unsigned integer into a signed integer.
 
   \code{RNGkind} returns a two-element character vector of the RNG and
   normal kinds in use \emph{before} the call, invisibly if either
Index: src/library/base/man/strwrap.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/strwrap.Rd,v
retrieving revision 1.2
diff -u -r1.2 strwrap.Rd
--- src/library/base/man/strwrap.Rd	2003/07/08 00:20:19	1.2
+++ src/library/base/man/strwrap.Rd	2003/12/09 14:37:14
@@ -30,8 +30,8 @@
 }
 \details{
   Whitespace in the input is destroyed.  Double spaces after periods
-  (thought as representing sentence ends) are preserved.  Currently, it
-  possible sentence ends at line breaks are not considerd specially.
+  (representing sentence ends) are preserved.  Currently, sentence
+  ends at line breaks are not considered specially.
   
   Indentation is relative to the number of characters in the prefix
   string.
Index: src/library/graphics/man/coplot.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/coplot.Rd,v
retrieving revision 1.1
diff -u -r1.1 coplot.Rd
--- src/library/graphics/man/coplot.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/coplot.Rd	2003/12/09 14:37:14
@@ -56,6 +56,7 @@
   \item{pch}{a vector of plotting symbols or characters.  If too short,
     the values are recycled.}
   \item{bar.bg}{a named vector with components \code{"num"} and
+% what is a "shingle" bar?
     \code{"fac"} giving the background colors for the (shingle) bars,
     for \bold{num}eric and \bold{fac}tor conditioning variables respectively.}
   \item{xlab}{character; labels to use for the x axis and the
Index: src/library/stats/man/model.frame.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/model.frame.Rd,v
retrieving revision 1.1
diff -u -r1.1 model.frame.Rd
--- src/library/stats/man/model.frame.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/model.frame.Rd	2003/12/09 14:37:16
@@ -27,8 +27,8 @@
 
   \item{subset}{a specification of the rows to be used: defaults to all
     rows. This can be any valid indexing vector (see
-    \code{\link{[.data.frame}} for the rows of \code{data} or if that is not
-    supplied, a data frame made up of the variables used in \code{formula}.}
+    \code{\link{data.frame}} for the rows of \code{data} or if that is not
+    supplied, a data frame made up of the variables used in \code{formula}).}
 
   \item{na.action}{how \code{NA}s are treated. The default is first,
     any \code{na.action} attribute of \code{data}, second
Index: src/library/stats/man/nafns.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/nafns.Rd,v
retrieving revision 1.1
diff -u -r1.1 nafns.Rd
--- src/library/stats/man/nafns.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/nafns.Rd	2003/12/09 14:37:16
@@ -33,8 +33,8 @@
   the default, \code{"lm"} and \code{"glm"} methods, and by further
   methods in packages \pkg{MASS}, \pkg{rpart} and \pkg{survival}.
 
-  The default methods do nothing.  The method for the \code{na.exclude}
-  action to pad the object with \code{NA}s in the correct positions to
+  The default methods do nothing.  The default method for the \code{na.exclude}
+  action is to pad the object with \code{NA}s in the correct positions to
   have the same number of rows as the original data frame.
 
   Currently \code{naresid} and \code{napredict} are identical, but
Index: src/library/stats/man/nlm.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/nlm.Rd,v
retrieving revision 1.1
diff -u -r1.1 nlm.Rd
--- src/library/stats/man/nlm.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/nlm.Rd	2003/12/09 14:37:16
@@ -17,9 +17,9 @@
     \code{hessian} attributes, these will be used in the calculation of
     updated parameter values.  Otherwise, numerical derivatives are
     used. \code{\link{deriv}} returns a function with suitable
-    \code{gradient} attribute.  This should be a function a vector of
-    the length of \code{p} followed by any other arguments specified
-    in \code{dots}.}
+    \code{gradient} attribute.  This should be a function of a vector of
+    the length of \code{p} followed by any additional parameters specified
+    by the \code{\dots} argument.}
   \item{p}{starting parameter values for the minimization.}
   \item{hessian}{if \code{TRUE}, the hessian of \code{f}
     at the minimum is returned.}

From bjg at network-theory.co.uk  Tue Dec  9 16:15:30 2003
From: bjg at network-theory.co.uk (Brian Gough)
Date: Tue Dec  9 16:14:06 2003
Subject: [Rd] pdfs for printed edition of R reference manual
Message-ID: <E1ATjaE-0000IQ-00@localhost>

Hi, 
This message is to let the R developers know that the pdfs for the
first two volumes of the printed edition of R reference manual are
available at,

  http://www.network-theory.co.uk/R/base/vol1.pdf
  http://www.network-theory.co.uk/R/base/vol2.pdf

I've divided the manual into "core commands" of the base package
(control flow, and related programming commands, etc) in Volume 1 and
additional commands grouped by subject (graphics, date-time
calculations, models, etc) in Volume 2.

If you have any comments please let me know. I'll be sending them for
printing in the next week or so.

best regards

-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

From tlumley at u.washington.edu  Tue Dec  9 17:04:34 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Dec  9 17:03:16 2003
Subject: [Rd] Maybe some bug on sapply(PR#5628)
In-Reply-To: <20031209144041.B15BBF3C4@slim.kubism.ku.dk>
References: <20031209144041.B15BBF3C4@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.58.0312090803420.114602@homer03.u.washington.edu>

On Tue, 9 Dec 2003 brahm@alum.mit.edu wrote:

> I can confirm this bug on Solaris 2.8 running R-1.8.1.  Here's a simplified
> version:
>
> y <- list()
> sapply(1, function(i) y[[i]] <- expression(1))
> cbind(1, rep(2,1))
>

Furthermore, it doesn't happen with lapply() or with sapply(,
simplify=FALSE), so it is linked to the simplify step

	-thomas

From luke at stat.uiowa.edu  Tue Dec  9 17:09:34 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Tue Dec  9 17:08:16 2003
Subject: [Rd] Maybe some bug on sapply and cbind (PR#5628)
In-Reply-To: <20031209144041.B15BBF3C4@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312091009080.14909-100000@itasca.stat.uiowa.edu>

Simpler version seems to be

x <- list(expression(1))
y <- rep(2,1)
.Internal(unlist(x, FALSE, FALSE))
.Internal(cbind(1, y))

Seems to be related to undesirable behavior of unlist when expression
objects are involved;

> unlist(list(expression(1)), recursive = FALSE)
NULL
> unlist(list(expression(1)), recursive = TRUE)
[1] 150684992

luke

On Tue, 9 Dec 2003 brahm@alum.mit.edu wrote:

> I can confirm this bug on Solaris 2.8 running R-1.8.1.  Here's a simplified
> version:
> 
> y <- list()
> sapply(1, function(i) y[[i]] <- expression(1))
> cbind(1, rep(2,1))
> 
>   [ Process R segmentation Fault at Tue Dec  9 09:20:33 2003 ]
> 
> Curiously, replacing the third line with
>   cbind(1, 2)
> does not casue a crash, even though rep(2,1) == 2 !
> 
> 
> > R.version
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    8.1                 
> year     2003                
> month    11                  
> day      21                  
> language R                   
> 

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From p.dalgaard at biostat.ku.dk  Tue Dec  9 17:09:14 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Dec  9 17:08:34 2003
Subject: [Rd] documentation fixes (cvs) (PR#5632)
In-Reply-To: <20031209144552.7BD50F4DB@slim.kubism.ku.dk>
References: <20031209144552.7BD50F4DB@slim.kubism.ku.dk>
Message-ID: <x2wu96ezx1.fsf@biostat.ku.dk>

bjg@network-theory.co.uk writes:

> The patch below attempts to correct some unclear sentences in the R
> documentation.
> 
> In the case of coplot.Rd it wasn't clear whether "shingle" bar had a
> special meaning or was a typo for "single". I've just put a comment in
> that case.

"Shingle" is correct. These are the overlapping bars drawn along the
sides of the coplot.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Tue Dec  9 17:44:51 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Dec  9 17:43:59 2003
Subject: [Rd] pdfs for printed edition of R reference manual
In-Reply-To: <E1ATjaE-0000IQ-00@localhost>
References: <E1ATjaE-0000IQ-00@localhost>
Message-ID: <x2smjuey9o.fsf@biostat.ku.dk>

Brian Gough <bjg@network-theory.co.uk> writes:

> Hi, 
> This message is to let the R developers know that the pdfs for the
> first two volumes of the printed edition of R reference manual are
> available at,
> 
>   http://www.network-theory.co.uk/R/base/vol1.pdf
>   http://www.network-theory.co.uk/R/base/vol2.pdf
> 
> I've divided the manual into "core commands" of the base package
> (control flow, and related programming commands, etc) in Volume 1 and
> additional commands grouped by subject (graphics, date-time
> calculations, models, etc) in Volume 2.
> 
> If you have any comments please let me know. I'll be sending them for
> printing in the next week or so.

There was a restructuring of the base package in R-devel very recently
(today actually, but it has been in the works for a while) and the way
you have been splitting things is similar, but not exactly the same. You
probably need to decide whether to ignore that at this stage, but it
might not be too painful to follow suit.

A couple of things are definitely in the wrong place: quantile() in
one section and fivenum() in another is certainly odd. I think
fivenum, stem, density, and bandwidth are out of place. r2dtable and
sample looked odd to me at first, but I suppose they are OK; perhaps
shange the chapter title to include something about RNG?

This is probably painful to do, but might it be possible to change the
collation so that  ALLCAPS, Capitalized, and lowercase group together?
They tend to mean similar things.

BTW, we seem to have an alias bug with bandwidth:

> ?bandwidth
Error in help("bandwidth") : No documentation for 'bandwidth' in...

but  ?bw.nrd gives a page called "bandwidth".

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Tue Dec  9 19:05:11 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec  9 19:04:00 2003
Subject: [Rd] pdfs for printed edition of R reference manual
In-Reply-To: <x2smjuey9o.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0312091803280.9318-100000@gannet.stats>

On 9 Dec 2003, Peter Dalgaard wrote:

> BTW, we seem to have an alias bug with bandwidth:
> 
> > ?bandwidth
> Error in help("bandwidth") : No documentation for 'bandwidth' in...
> 
> but  ?bw.nrd gives a page called "bandwidth".

Nothing wrong with that: page names are not aliases.  There are quite a 
few such examples.  It could do with a \concept entry, though.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From gregory_r_warnes at groton.pfizer.com  Tue Dec  9 22:34:48 2003
From: gregory_r_warnes at groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Tue Dec  9 22:33:20 2003
Subject: [Rd] latex problem with \preformatted (PR#5645)
Message-ID: <20031209213448.A4EE5F4DB@slim.kubism.ku.dk>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_000_01C3BE9C.3FB5BC1A
Content-Type: text/plain; charset="iso-8859-1"


There is a small bug in the implementation of \preformatted in R 1.8.0:
The closing "\end{verbatim}" needs to be followed by a newline, since my
latex ignores everything following it on the line.


In an .Rd file I have:


\details{
  This function provides a thin wrapper around the Unix "fork" system
  call, which will create a new process which is an exact copy of the
  [...]
    
\preformatted{
  {
    pid = fork(slave=NULL) 
    if(pid==0) { 
      cat("Hi from the child process\n"); exit() 
    } else {
      cat("Hi from the parent process\n");
    } 
  } 
}

}

which gets translated to 

\begin{Details}\relax
This function provides a thin wrapper around the Unix "fork" system
call, which will create a new process which is an exact copy of the
[...]

\begin{verbatim}
  \{
    pid = fork(slave=NULL) 
    if(pid==0) \{ 
      cat("Hi from the child process\bsl{}n"); exit() 
    \} else \{
      cat("Hi from the parent process\bsl{}n");
    \} 
  \}
\end{verbatim}\end{Details}


When processed by Rd2dvi these warning messages show up in the log:

This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2002.7.17)  9 DEC
2003 16:11
[...]

LaTeX Warning: Characters dropped after `\end{verbatim}' on input line 139.

[3] [4] [5] [6] [7] [8] [9]

! LaTeX Error: \begin{list} on input line 73 ended by \end{document}.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.437 \end{document}
[...]

The solution is to simply add an '\n' at the appropriate place in Rdconv.pm:

gsun492: R [61]> diff -u Rdconv.pm.orig Rdconv.pm
--- Rdconv.pm.orig 2003-12-09 16:32:17.940846000 -0500
+++ Rdconv.pm 2003-12-09 16:32:32.440931000 -0500
@@ -2450,7 +2450,7 @@
     my $code = $_[0];
 
     $code = latex_code_trans ($code);
-    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}";
+    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}\n";
     $code;
 }

after which everything works fine.

-Greg


Gregory R. Warnes, Ph.D.
Senior Coordinator
Groton Non-Clinical Statistics
Pfizer Global Research and Development
 <<Warnes, Gregory R.vcf>> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From ripley at stats.ox.ac.uk  Tue Dec  9 22:42:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec  9 22:41:28 2003
Subject: [Rd] latex problem with \preformatted (PR#5645)
In-Reply-To: <20031209213448.A4EE5F4DB@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312092141250.30404-100000@gannet.stats>

Have you tried the *current* version of R?

>From NEWS

   o   Rd conversion to latex did not add a new line before
       \end{Section} for the section environments, which caused
       problems if the last thing in a section was \preformatted{}
       (and potentially elsewhere).


On Tue, 9 Dec 2003 gregory_r_warnes@groton.pfizer.com wrote:

> This message is in MIME format. Since your mail reader does not understand
> this format, some or all of this message may not be legible.
> 
> ------_=_NextPart_000_01C3BE9C.3FB5BC1A
> Content-Type: text/plain; charset="iso-8859-1"
> 
> 
> There is a small bug in the implementation of \preformatted in R 1.8.0:
> The closing "\end{verbatim}" needs to be followed by a newline, since my
> latex ignores everything following it on the line.
> 
> 
> In an .Rd file I have:
> 
> 
> \details{
>   This function provides a thin wrapper around the Unix "fork" system
>   call, which will create a new process which is an exact copy of the
>   [...]
>     
> \preformatted{
>   {
>     pid = fork(slave=NULL) 
>     if(pid==0) { 
>       cat("Hi from the child process\n"); exit() 
>     } else {
>       cat("Hi from the parent process\n");
>     } 
>   } 
> }
> 
> }
> 
> which gets translated to 
> 
> \begin{Details}\relax
> This function provides a thin wrapper around the Unix "fork" system
> call, which will create a new process which is an exact copy of the
> [...]
> 
> \begin{verbatim}
>   \{
>     pid = fork(slave=NULL) 
>     if(pid==0) \{ 
>       cat("Hi from the child process\bsl{}n"); exit() 
>     \} else \{
>       cat("Hi from the parent process\bsl{}n");
>     \} 
>   \}
> \end{verbatim}\end{Details}
> 
> 
> When processed by Rd2dvi these warning messages show up in the log:
> 
> This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2002.7.17)  9 DEC
> 2003 16:11
> [...]
> 
> LaTeX Warning: Characters dropped after `\end{verbatim}' on input line 139.
> 
> [3] [4] [5] [6] [7] [8] [9]
> 
> ! LaTeX Error: \begin{list} on input line 73 ended by \end{document}.
> 
> See the LaTeX manual or LaTeX Companion for explanation.
> Type  H <return>  for immediate help.
>  ...                                              
>                                                   
> l.437 \end{document}
> [...]
> 
> The solution is to simply add an '\n' at the appropriate place in Rdconv.pm:
> 
> gsun492: R [61]> diff -u Rdconv.pm.orig Rdconv.pm
> --- Rdconv.pm.orig 2003-12-09 16:32:17.940846000 -0500
> +++ Rdconv.pm 2003-12-09 16:32:32.440931000 -0500
> @@ -2450,7 +2450,7 @@
>      my $code = $_[0];
>  
>      $code = latex_code_trans ($code);
> -    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}";
> +    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}\n";
>      $code;
>  }
> 
> after which everything works fine.
> 
> -Greg
> 
> 
> Gregory R. Warnes, Ph.D.
> Senior Coordinator
> Groton Non-Clinical Statistics
> Pfizer Global Research and Development
>  <<Warnes, Gregory R.vcf>> 
> 
> 
> LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From arnima at u.washington.edu  Tue Dec  9 23:31:20 2003
From: arnima at u.washington.edu (Arni Magnusson)
Date: Tue Dec  9 23:29:57 2003
Subject: [Rd] arni.colors
Message-ID: <Pine.A41.4.58.0312091353150.38686@dante36.u.washington.edu>

Dear r-devel,

I have implemented a function to create color palettes with improved
contrast and logical order, compared with the built-in ones:

 source("arni.colors.R")  # code is given below
 barplot(rep(1,100), col=arni.colors(100), space=0, border=0, axes=F)
 par(mfrow=c(2,1)) # rainbow() has too much green...
 barplot(rep(1,50), col=rev(rainbow(50,end=0.7)), space=0, border=0,
         axes=F)
 barplot(rep(1,50), col=arni.colors(50), space=0, border=0, axes=F)
 arni.colors(100, plot=T) # graph color recipes
 arni.colors(10, rgb=T)   # numeric color recipes

The arni.colors function also includes a palette="depth" which is an even
progression from dark blue to light blue. The color mixing proved to be
more complex than I anticipated:

 arni.colors(100, palette="depth", plot=T)

I'm hoping that the R Core Team can adopt these palettes, as is, as
separate functions, or as arguments to the already existing palette()
function. Of course I don't mind if the R Core Team changes the function
name or any other part of the code.

Thanks,
Arni



arni.colors <- function(n, palette=c("temperature", "depth"),
                        rgb.matrix=FALSE, plot.colors=FALSE)
{
  rgb2hsv <- function(v) rgb(v[1], v[2], v[3])
  palette <- match.arg(palette)
  x <- seq(0, 1, length=n)
  if(palette == "temperature") {
    r <- 1 / (1+exp(20-35*x))
    g <- pmin(pmax(0,-0.8+6*x-5*x^2), 1)
    b <- dnorm(x,0.25,0.15) / max(dnorm(x,0.25,0.15))
  }
  else {
    r <-        0.6*x + 0.4*x^2
    g <-        1.5*x - 0.5*x^2
    b <- 0.36 + 2.4*x - 2.0*x^2
    b[x>0.4] <- 1
  }
  rgb.m <- matrix(c(r,g,b), ncol=3,
                  dimnames=list(as.character(seq(length=n)),
                    c("red","green","blue")))
  hsv.v <- apply(rgb.m, 1, rgb2hsv)
  if(rgb.matrix)
    attr(hsv.v, "rgb.matrix") <- rgb.m
  if(plot.colors) {
    opar <- par("fig", "plt")
    par(fig=c(0,1,0,0.7), plt=c(0.15,0.9,0.2,0.95))
    plot(NA, xlim=c(-0.01,1.01), ylim=c(-0.01,1.01), xlab="Spectrum",
         ylab="", xaxs="i", yaxs="i", axes=FALSE)
    title(ylab="Value", mgp=c(3.5,0,0))
    matlines(x, rgb.m, col=colnames(rgb.m), lty=1, lwd=3)
    matpoints(x, rgb.m, col=colnames(rgb.m), pch=16)
    axis(1, at=0:1)
    axis(2, at=0:1, las=1)
    par(fig=c(0,1,0.75,0.9), plt=c(0.08,0.97,0,1), new=TRUE)
    midpoints <- barplot(rep(1,n), col=hsv.v, border=FALSE, space=FALSE,
                         axes=FALSE)
    axis(1, at=midpoints, labels=1:n, lty=0, cex.axis=0.6)
    par(opar)
  }
  return(hsv.v)
}

From ryszard.czerminski at pharma.novartis.com  Wed Dec 10 15:13:11 2003
From: ryszard.czerminski at pharma.novartis.com (ryszard.czerminski@pharma.novartis.com)
Date: Wed Dec 10 15:11:41 2003
Subject: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)
Message-ID: <20031210141311.C1371FBFA@slim.kubism.ku.dk>

In e1071 package/svm default epsilon value is set to 0.1 and not 0.5
as documentation says.

R

From bjg at network-theory.co.uk  Wed Dec 10 15:31:00 2003
From: bjg at network-theory.co.uk (Brian Gough)
Date: Wed Dec 10 15:29:40 2003
Subject: [Rd] pdfs for printed edition of R reference manual
In-Reply-To: <x2smjuey9o.fsf@biostat.ku.dk>
References: <E1ATjaE-0000IQ-00@localhost>
	<x2smjuey9o.fsf@biostat.ku.dk>
Message-ID: <16343.11812.969748.469989@debian.local>

Peter Dalgaard writes:
 > There was a restructuring of the base package in R-devel very recently
 > (today actually, but it has been in the works for a while) and the way
 > you have been splitting things is similar, but not exactly the same. You
 > probably need to decide whether to ignore that at this stage, but it
 > might not be too painful to follow suit.

For now I think I will have to stick with the current classification,
which was based on the keywords used in the R 1.8 release.

 > A couple of things are definitely in the wrong place: quantile() in
 > one section and fivenum() in another is certainly odd. I think
 > fivenum, stem, density, and bandwidth are out of place. r2dtable and
 > sample looked odd to me at first, but I suppose they are OK; perhaps
 > shange the chapter title to include something about RNG?

Thanks!  I'll take a look at those.

 > This is probably painful to do, but might it be possible to change the
 > collation so that  ALLCAPS, Capitalized, and lowercase group together?
 > They tend to mean similar things.

I'm using the collation from the 1.8 release here.

-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

From david.meyer at ci.tuwien.ac.at  Wed Dec 10 16:18:30 2003
From: david.meyer at ci.tuwien.ac.at (David Meyer)
Date: Wed Dec 10 16:17:30 2003
Subject: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)
In-Reply-To: <20031210141311.C1371FBFA@slim.kubism.ku.dk> (from
	ryszard.czerminski@pharma.novartis.com on Wed, Dec 10,
	2003 at 15:13:11 +0100)
References: <20031210141311.C1371FBFA@slim.kubism.ku.dk>
Message-ID: <20031210151830.GE17438@boromir.ci.tuwien.ac.at>

On 2003.12.10 15:13, ryszard.czerminski@pharma.novartis.com wrote:
> In e1071 package/svm default epsilon value is set to 0.1 and not 0.5
> as documentation says.

Fixed in 1.3-15 (set to 0.1).

g.,
David

From ryszard.czerminski at pharma.novartis.com  Wed Dec 10 16:49:09 2003
From: ryszard.czerminski at pharma.novartis.com (ryszard.czerminski@pharma.novartis.com)
Date: Wed Dec 10 16:49:02 2003
Subject: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)
Message-ID: <OF8761315A.7AD4EBF7-ON85256DF8.005696ED-85256DF8.0056FFD3@EU.novartis.net>

In 1.8.0 seems to be 0.5 in documentation....

> ?svm
svm                  package:e1071                  R Documentation

Support Vector Machines

Description:

     'svm' is used to train a support vector machine. It can be used to
     carry out general regression and classification (of nu and
     epsilon-type), as well as density-estimation. A formula interface
     is provided.

Usage:

     ## S3 method for class 'formula':
     svm(formula, data = list(), ..., subset, na.action =
     na.omit, scale = TRUE)
     ## Default S3 method:
     svm(x, y = NULL, scale = TRUE, type = NULL, kernel =
     "radial", degree = 3, gamma = 1 / dim(x)[2], coef0 = 0, cost = 1, nu 
= 0.5,
     class.weights = NULL, cachesize = 40, tolerance = 0.001, epsilon = 
0.5,
     shrinking = TRUE, cross = 0, fitted = TRUE, ..., subset, na.action = 
na.omit)

> R.version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    8.0
year     2003
month    10
day      08
language R


R





David Meyer <david.meyer@ci.tuwien.ac.at>
12/10/2003 10:18 AM

 
        To:     Ryszard Czerminski/PH/Novartis@PH
        cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
        Subject:        Re: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)


On 2003.12.10 15:13, ryszard.czerminski@pharma.novartis.com wrote:
> In e1071 package/svm default epsilon value is set to 0.1 and not 0.5
> as documentation says.

Fixed in 1.3-15 (set to 0.1).

g.,
David

From david.meyer at ci.tuwien.ac.at  Wed Dec 10 16:59:54 2003
From: david.meyer at ci.tuwien.ac.at (David Meyer)
Date: Wed Dec 10 16:58:55 2003
Subject: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)
In-Reply-To: <OF8761315A.7AD4EBF7-ON85256DF8.005696ED-85256DF8.0056FFD3@EU.novartis.net>
	(from ryszard.czerminski@pharma.novartis.com on Wed, Dec 10,
	2003 at 16:49:09 +0100)
References: <OF8761315A.7AD4EBF7-ON85256DF8.005696ED-85256DF8.0056FFD3@EU.novartis.net>
Message-ID: <20031210155954.GK17438@boromir.ci.tuwien.ac.at>

Ryszard:

the *package* version (e1071) is relevant here, not the version number  
of R. Actually, the documentation bug you have reported has already  
been fixed in 1.3-14 (which is the current version on CRAN).

Best,

David

On 2003.12.10 16:49, ryszard.czerminski@pharma.novartis.com wrote:
> In 1.8.0 seems to be 0.5 in documentation....
> 
> > ?svm
> svm                  package:e1071                  R Documentation
> 
> Support Vector Machines
> 
> Description:
> 
>      'svm' is used to train a support vector machine. It can be used
> to
>      carry out general regression and classification (of nu and
>      epsilon-type), as well as density-estimation. A formula  
> interface
>      is provided.
> 
> Usage:
> 
>      ## S3 method for class 'formula':
>      svm(formula, data = list(), ..., subset, na.action =
>      na.omit, scale = TRUE)
>      ## Default S3 method:
>      svm(x, y = NULL, scale = TRUE, type = NULL, kernel =
>      "radial", degree = 3, gamma = 1 / dim(x)[2], coef0 = 0, cost =  
> 1,
> nu
> = 0.5,
>      class.weights = NULL, cachesize = 40, tolerance = 0.001, epsilon
> =
> 0.5,
>      shrinking = TRUE, cross = 0, fitted = TRUE, ..., subset,
> na.action =
> na.omit)
> 
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    8.0
> year     2003
> month    10
> day      08
> language R
> 
> 
> R
> 
> 
> 
> 
> 
> David Meyer <david.meyer@ci.tuwien.ac.at>
> 12/10/2003 10:18 AM
> 
> 
>         To:     Ryszard Czerminski/PH/Novartis@PH
>         cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>         Subject:        Re: [Rd] e1071:svm - default epsilon = 0.1
> (NOT 0.5) (PR#5671)
> 
> 
> On 2003.12.10 15:13, ryszard.czerminski@pharma.novartis.com wrote:
> > In e1071 package/svm default epsilon value is set to 0.1 and not  
> 0.5
> > as documentation says.
> 
> Fixed in 1.3-15 (set to 0.1).
> 
> g.,
> David
> 
> 
> 
> 
>

From david.meyer at ci.tuwien.ac.at  Wed Dec 10 17:00:28 2003
From: david.meyer at ci.tuwien.ac.at (david.meyer@ci.tuwien.ac.at)
Date: Wed Dec 10 16:59:11 2003
Subject: [Rd] e1071:svm - default epsilon = 0.1 (NOT 0.5) (PR#5671)
Message-ID: <20031210160028.A2334ED90@slim.kubism.ku.dk>

Ryszard:

the *package* version (e1071) is relevant here, not the version number  
of R. Actually, the documentation bug you have reported has already  
been fixed in 1.3-14 (which is the current version on CRAN).

Best,

David

On 2003.12.10 16:49, ryszard.czerminski@pharma.novartis.com wrote:
> In 1.8.0 seems to be 0.5 in documentation....
> 
> > ?svm
> svm                  package:e1071                  R Documentation
> 
> Support Vector Machines
> 
> Description:
> 
>      'svm' is used to train a support vector machine. It can be used
> to
>      carry out general regression and classification (of nu and
>      epsilon-type), as well as density-estimation. A formula  
> interface
>      is provided.
> 
> Usage:
> 
>      ## S3 method for class 'formula':
>      svm(formula, data = list(), ..., subset, na.action =
>      na.omit, scale = TRUE)
>      ## Default S3 method:
>      svm(x, y = NULL, scale = TRUE, type = NULL, kernel =
>      "radial", degree = 3, gamma = 1 / dim(x)[2], coef0 = 0, cost =  
> 1,
> nu
> = 0.5,
>      class.weights = NULL, cachesize = 40, tolerance = 0.001, epsilon
> =
> 0.5,
>      shrinking = TRUE, cross = 0, fitted = TRUE, ..., subset,
> na.action =
> na.omit)
> 
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    8.0
> year     2003
> month    10
> day      08
> language R
> 
> 
> R
> 
> 
> 
> 
> 
> David Meyer <david.meyer@ci.tuwien.ac.at>
> 12/10/2003 10:18 AM
> 
> 
>         To:     Ryszard Czerminski/PH/Novartis@PH
>         cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>         Subject:        Re: [Rd] e1071:svm - default epsilon = 0.1
> (NOT 0.5) (PR#5671)
> 
> 
> On 2003.12.10 15:13, ryszard.czerminski@pharma.novartis.com wrote:
> > In e1071 package/svm default epsilon value is set to 0.1 and not  
> 0.5
> > as documentation says.
> 
> Fixed in 1.3-15 (set to 0.1).
> 
> g.,
> David
> 
> 
> 
> 
>

From ellis at stat.harvard.edu  Wed Dec 10 19:18:15 2003
From: ellis at stat.harvard.edu (ellis@stat.harvard.edu)
Date: Wed Dec 10 19:16:47 2003
Subject: [Rd] R.app should ignore -psn command line argument (PR#5674)
Message-ID: <20031210181815.E7ED3FBFB@slim.kubism.ku.dk>

Full_Name: Byron Ellis
Version: R 1.9.0
OS: OS X .3
Submission from: (NULL) (140.247.241.138)


Under OS X, when something is launched via "open" or the Dock or the Finder it
is passed a Process Serial Number argument in the form of -psn_*, which
generates a warning dialog when starting R.app.

Putting the following in src/unix/system.c:234 ignores that parameter:

#ifdef HAVE_AQUA
else if(!strncmp(*av,"-psn",4)) { }
#endif

From colestephen at msn.com  Wed Dec 10 23:03:03 2003
From: colestephen at msn.com (colestephen@msn.com)
Date: Wed Dec 10 23:01:35 2003
Subject: [Rd] Error in lm.wfit(x, y, w, offset = offset,
	singular.ok = singular.ok, : (PR#5682)
Message-ID: <20031210220303.CEA43FC07@slim.kubism.ku.dk>

I have encountered the following problem while doing "Appendix A A simple session" p.84 in The Intro to R :

> fm1 <- lm(y ~ x, data=dummy, weight=1/w^2)
Error in lm.wfit(x, y, w, offset = offset, singular.ok = singular.ok,  : 
        NA/NaN/Inf in foreign function call (arg 1)

What seem to be the problem?


Yours Truly,
Stephen W. Cole
Deployed Solutions, Inc.
11521 Mackey St.
Overland Park, Kansas 66210
colestephen@msn.com
Office: 913.498.0708
Cell  : 913.634.0306
	[[alternative HTML version deleted]]

From gregory_r_warnes at groton.pfizer.com  Wed Dec 10 23:13:01 2003
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Wed Dec 10 23:11:53 2003
Subject: [Rd] latex problem with \preformatted (PR#5645)
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20680ABE6@groexmb02.pfizer.com>

Apparently not. :^(

-G

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Tuesday, December 09, 2003 4:43 PM
> To: gregory_r_warnes@groton.pfizer.com
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] latex problem with \preformatted (PR#5645)
> 
> 
> Have you tried the *current* version of R?
> 
> From NEWS
> 
>    o   Rd conversion to latex did not add a new line before
>        \end{Section} for the section environments, which caused
>        problems if the last thing in a section was \preformatted{}
>        (and potentially elsewhere).
> 
> 
> On Tue, 9 Dec 2003 gregory_r_warnes@groton.pfizer.com wrote:
> 
> > This message is in MIME format. Since your mail reader does 
> not understand
> > this format, some or all of this message may not be legible.
> > 
> > ------_=_NextPart_000_01C3BE9C.3FB5BC1A
> > Content-Type: text/plain; charset="iso-8859-1"
> > 
> > 
> > There is a small bug in the implementation of \preformatted 
> in R 1.8.0:
> > The closing "\end{verbatim}" needs to be followed by a 
> newline, since my
> > latex ignores everything following it on the line.
> > 
> > 
> > In an .Rd file I have:
> > 
> > 
> > \details{
> >   This function provides a thin wrapper around the Unix 
> "fork" system
> >   call, which will create a new process which is an exact 
> copy of the
> >   [...]
> >     
> > \preformatted{
> >   {
> >     pid = fork(slave=NULL) 
> >     if(pid==0) { 
> >       cat("Hi from the child process\n"); exit() 
> >     } else {
> >       cat("Hi from the parent process\n");
> >     } 
> >   } 
> > }
> > 
> > }
> > 
> > which gets translated to 
> > 
> > \begin{Details}\relax
> > This function provides a thin wrapper around the Unix "fork" system
> > call, which will create a new process which is an exact copy of the
> > [...]
> > 
> > \begin{verbatim}
> >   \{
> >     pid = fork(slave=NULL) 
> >     if(pid==0) \{ 
> >       cat("Hi from the child process\bsl{}n"); exit() 
> >     \} else \{
> >       cat("Hi from the parent process\bsl{}n");
> >     \} 
> >   \}
> > \end{verbatim}\end{Details}
> > 
> > 
> > When processed by Rd2dvi these warning messages show up in the log:
> > 
> > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 
> 2002.7.17)  9 DEC
> > 2003 16:11
> > [...]
> > 
> > LaTeX Warning: Characters dropped after `\end{verbatim}' on 
> input line 139.
> > 
> > [3] [4] [5] [6] [7] [8] [9]
> > 
> > ! LaTeX Error: \begin{list} on input line 73 ended by 
> \end{document}.
> > 
> > See the LaTeX manual or LaTeX Companion for explanation.
> > Type  H <return>  for immediate help.
> >  ...                                              
> >                                                   
> > l.437 \end{document}
> > [...]
> > 
> > The solution is to simply add an '\n' at the appropriate 
> place in Rdconv.pm:
> > 
> > gsun492: R [61]> diff -u Rdconv.pm.orig Rdconv.pm
> > --- Rdconv.pm.orig 2003-12-09 16:32:17.940846000 -0500
> > +++ Rdconv.pm 2003-12-09 16:32:32.440931000 -0500
> > @@ -2450,7 +2450,7 @@
> >      my $code = $_[0];
> >  
> >      $code = latex_code_trans ($code);
> > -    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}";
> > +    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}\n";
> >      $code;
> >  }
> > 
> > after which everything works fine.
> > 
> > -Greg
> > 
> > 
> > Gregory R. Warnes, Ph.D.
> > Senior Coordinator
> > Groton Non-Clinical Statistics
> > Pfizer Global Research and Development
> >  <<Warnes, Gregory R.vcf>> 
> > 
> > 
> > LEGAL NOTICE\ Unless expressly stated otherwise, this 
> messag...{{dropped}}
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From jago at mclink.it  Thu Dec 11 00:21:51 2003
From: jago at mclink.it (Stefano Iacus)
Date: Thu Dec 11 00:20:30 2003
Subject: [Rd] R.app should ignore -psn command line argument (PR#5674)
In-Reply-To: <20031210181815.E7ED3FBFB@slim.kubism.ku.dk>
Message-ID: <A2625B0E-2B67-11D8-8EF0-003065CC4CB8@mclink.it>

Thanks Byron,
I was about to commit a similar fix.

stefano

On Mercoled?, dic 10, 2003, at 19:18 Europe/Rome, 
ellis@stat.harvard.edu wrote:

> Full_Name: Byron Ellis
> Version: R 1.9.0
> OS: OS X .3
> Submission from: (NULL) (140.247.241.138)
>
>
> Under OS X, when something is launched via "open" or the Dock or the 
> Finder it
> is passed a Process Serial Number argument in the form of -psn_*, which
> generates a warning dialog when starting R.app.
>
> Putting the following in src/unix/system.c:234 ignores that parameter:
>
> #ifdef HAVE_AQUA
> else if(!strncmp(*av,"-psn",4)) { }
> #endif
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From Tim.Keighley at csiro.au  Thu Dec 11 03:18:17 2003
From: Tim.Keighley at csiro.au (Tim.Keighley@csiro.au)
Date: Thu Dec 11 03:16:57 2003
Subject: [Rd] Using \leq for <= in Rd files
Message-ID: <FC026A0F0EE43E42A6EE465E2C7FFF78033D6FA3@coxs-nh.nsw.cmis.CSIRO.AU>

Hi,

When writing formulae in Rd files I use \leq to get a less-than-or-equal-to
sign, as this is what the LaTeX references I consulted suggested. This works
correctly for the PDF output (Rcmd Rd2dvi.sh --pdf), however when the Rd
file is converted to text or html this command is converted to "<=q".

A workaround is to use \le instead of \leq which works with my LaTeX
distribution (MiKTeX 2.3.?). Another way would be to change Rdconv.pm by
adding \leq and \geq to the substitution lists in text2html, text2txt and
the other similar functions.

I don't know much about LaTeX so it may be that \leq has been phased out in
favour of \le and the books and websites I read might be out of date.

Cheers,
Tim Keighley

> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    8.1
year     2003
month    11
day      21
language R

	[[alternative HTML version deleted]]

From ripley at stats.ox.ac.uk  Thu Dec 11 07:14:53 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Dec 11 07:13:39 2003
Subject: (PR#5682) Re: [Rd] Error in lm.wfit(x, y, w, offset = offset,
	singular.ok = singular.ok, : (PR#5682)
In-Reply-To: <20031210220303.CEA43FC07@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312110611570.27343-100000@gannet.stats>

Please read the R FAQ on how to report a bug.

1) R-bugs is not the forum to ask questions

2) There is nothing here we can reproduce.  That example works for others.

3) There is no version information provided.

On Wed, 10 Dec 2003 colestephen@msn.com wrote:

> I have encountered the following problem while doing "Appendix A A simple session" p.84 in The Intro to R :
> 
> > fm1 <- lm(y ~ x, data=dummy, weight=1/w^2)
> Error in lm.wfit(x, y, w, offset = offset, singular.ok = singular.ok,  : 
>         NA/NaN/Inf in foreign function call (arg 1)
> 
> What seem to be the problem?

User error?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Dec 11 08:00:00 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Dec 11 07:58:55 2003
Subject: [Rd] Using \leq for <= in Rd files
In-Reply-To: <FC026A0F0EE43E42A6EE465E2C7FFF78033D6FA3@coxs-nh.nsw.cmis.CSIRO.AU>
Message-ID: <Pine.LNX.4.44.0312110649410.27676-100000@gannet.stats>

On Thu, 11 Dec 2003 Tim.Keighley@csiro.au wrote:

> Hi,
> 
> When writing formulae in Rd files I use \leq to get a less-than-or-equal-to
> sign, as this is what the LaTeX references I consulted suggested. This works
> correctly for the PDF output (Rcmd Rd2dvi.sh --pdf), however when the Rd
> file is converted to text or html this command is converted to "<=q".
> 
> A workaround is to use \le instead of \leq which works with my LaTeX
> distribution (MiKTeX 2.3.?). Another way would be to change Rdconv.pm by
> adding \leq and \geq to the substitution lists in text2html, text2txt and
> the other similar functions.
> 
> I don't know much about LaTeX so it may be that \leq has been phased out in
> favour of \le and the books and websites I read might be out of date.

\leq is not an Rd command, so you should be using e.g.

\eqn{X \leq 4}{X \le 4}

if you want to use it.  You may find that in your setup \le and \leq give 
different glyphs.  Standard latex says

/TeX/fptex/texmf/tex/latex/base/fontmath.ltx:   \let\le=\leq

where \leq is the glyph name in the CM symbol fonts.  MASS is typeset with
\let\le=\leqslant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From statho3 at web.de  Thu Dec 11 14:40:24 2003
From: statho3 at web.de (Thomas Stabla)
Date: Thu Dec 11 14:39:19 2003
Subject: [Rd] Tidying R Code - S4 Classes
Message-ID: <Pine.LNX.4.44.0312111433060.1613-100000@spock.vulcan>

Hello,

I read the section "Tidying R Code" in "Writing R Extension" and tried to
tidy some of my class-definitions. ("Tidying R Code" doesn't mention
classes, just functions)

When I procede as follows in R 1.8.1

>
> options(keep.source = FALSE)
> source("myclass.R")
> dump(ls(all = TRUE), file = "new.myclass.R")
>

to tidy the class definition

>
> setClass("myclass", representation(a = "numeric", b = "numeric"))
>

the resulting code below in my opinion is by no ways more readable
and even worse, the file new.myclass.R produces a parsing error
if is read in via source or when pasted into the R process.

Is there someone working on this issue? Or is this irrelevant?

Best regards,
Thomas Stabla

--
Code produced by dump:

".__C__myclass" <-
structure(list(), slots = structure(list(a = "numeric", b = "numeric"),
.Names = c("a",
"b")), contains = list(), virtual = FALSE, prototype = structure(list(), a
`, access = list(), className = structure("myclass", package =
".GlobalEnv"), package = ".GlobalEnv", subclasses = list(),
versionKey = <pointer: 0x401e5bc0>, sealed = FALSE, class =
"classRepresentation")

NULL= numeric(0), b = numeric(0)), validity = `
--

From Brian.Beckage at uvm.edu  Thu Dec 11 16:39:54 2003
From: Brian.Beckage at uvm.edu (Brian.Beckage@uvm.edu)
Date: Thu Dec 11 16:38:34 2003
Subject: [Rd] Failed installation on Mac OSX 10.3 (PR#5697)
Message-ID: <20031211153954.B6AD6EFB8@slim.kubism.ku.dk>

I've installed R 1.8.1 on OSX 10.3 (Panther) using the RAqua.pkg and 
all indications were that the installation was successful.  However, 
after double clicking the R icon in the Applications folder, nothing 
appears to happen.  The following message appears on the console:

Mac OS X Version 10.3 (Build 7B85)
2003-12-11 08:45:31 -0500
prefs written
dyld: /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua can't 
open library: /usr/local/lib/libreadline.4.3.dylib  (No such file or 
directory, errno = 2)


When I check /usr/local/ there is no 'lib' folder, only the 'bin' 
folder.  I checked the FAQ's and the bug reports and this problem was 
reported by at least one other person (bug report id 5529) but no 
solution has been put forward that I could find.

Do the other packages that come with the download (e.g., 
j_libreadlne.pkg, j_tcltk.pkg, j_libxml2.pkg) need to be installed? 
Any suggestions are appreciated.

Thanks for your help,
Brian










-- 
*********************************************************************
Brian Beckage
Department of Botany
University of Vermont
Marsh Life Science Building
Burlington, VT 05405

Phone:  802 656-0197
Fax  :  802 656-0440
email:  Brian.Beckage@uvm.edu
web  :  www.uvm.edu/~bbeckage

From torsten at hothorn.de  Thu Dec 11 18:03:07 2003
From: torsten at hothorn.de (torsten@hothorn.de)
Date: Thu Dec 11 18:01:52 2003
Subject: [Rd] Re: [R] chisq.test freezing on certain inputs (PR#5701)
Message-ID: <20031211170307.7A315FC00@slim.kubism.ku.dk>

On Thu, 11 Dec 2003, Jeffrey Chang wrote:

> Hello everybody,
>
> I'm running R 1.8.1 on both Linux and OS X compiled with gcc 3.2.2 and
> 3.3, respectively.  The following call seems to freeze the interpreter
> on both systems:
>  > chisq.test(matrix(c(233, 580104, 3776, 5786104), 2, 2),
> simulate.p.value=TRUE)
>
> By freeze, I mean, the function call never returns (running > 10 hours
> so far), the process is unresponsive to SIGINT (but I call kill it with
> TERM), and the process still consumes cycles on the CPU.
>

This is due to calling `exp' with a very small value leading to
a zero return value in rcont2 (src/appl/rcont.c) line 70:

            x = exp(fact[iap - 1] + fact[ib] + fact[ic] +
                    fact[idp - 1] - fact[ie] - fact[nlmp - 1] -
                    fact[igp - 1] - fact[ihp - 1] - fact[iip - 1]);
            if (x >= dummy) {
                goto L160;
            }
            sumprb = x;
            y = x;


y is never checked for zero and later on

L150:
            if (lsm) {
                goto L155;
            }

            /* Decrement entry in row L, column M */
            j = nll * (ii + nll);
            if (j == 0) {
                goto L154;
            }
            --nll;
            y = y * j / (double) ((id - nll) * (ia - nll));
            sumprb += y;
            if (sumprb >= dummy) {
                goto L159;
            }
            if (! lsp) {
                goto L140;
            }
            goto L150;


y has no chance of becoming larger than zero and we are in the goto trap
until the end of time. A simple fix would be checking for zero but I don't
know how one would proceed in this case ...

Best,

Torsten

From maechler at stat.math.ethz.ch  Thu Dec 11 18:29:05 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Dec 11 18:27:40 2003
Subject: [Rd] Re: [R] chisq.test freezing on certain inputs (PR#5701)
Message-ID: <20031211172905.19744FC00@slim.kubism.ku.dk>

>>>>> "Torsten" == Torsten Hothorn <torsten@hothorn.de>
>>>>>     on Thu, 11 Dec 2003 18:03:07 +0100 (CET) writes:

    Torsten> On Thu, 11 Dec 2003, Jeffrey Chang wrote:
    >> Hello everybody,
    >> 
    >> I'm running R 1.8.1 on both Linux and OS X compiled with
    >> gcc 3.2.2 and 3.3, respectively.  The following call
    >> seems to freeze the interpreter on both systems: >
    >> chisq.test(matrix(c(233, 580104, 3776, 5786104), 2, 2),
    >> simulate.p.value=TRUE)
    >> 
    >> By freeze, I mean, the function call never returns
    >> (running > 10 hours so far), the process is unresponsive
    >> to SIGINT (but I call kill it with TERM), and the process
    >> still consumes cycles on the CPU.
    >> 

    Torsten> This is due to calling `exp' with a very small
    Torsten> value leading to a zero return value in rcont2
    Torsten> (src/appl/rcont.c) line 70:

yes, that's correct.  

Please, before anyone starts changing the code: 
I have had an version of rcont.c in my own code tree which 
uses much less goto's than the current official code.

I'd like to commit it (with an error message for the moment).
Martin

From dpierce at ucsd.edu  Thu Dec 11 19:34:00 2003
From: dpierce at ucsd.edu (dpierce@ucsd.edu)
Date: Thu Dec 11 19:33:14 2003
Subject: [Rd] bug + insufficient doc in R CMD INSTALL (PR#5703)
Message-ID: <20031211183400.1A750FC07@slim.kubism.ku.dk>

Hello,

I believe I have found a bug in the R INSTALL script
(src/scripts/INSTALL.in). The problem comes up when a user tries to
specify more than one "--config-args" (or, I imagine, "--config-vars") on
the R CMD INSTALL line. In such a case, no error message is generated, but
the first specification is silently overwritten by the second
specification.  The process therefore fails.

So for instance, a user contacted me after typing this:

R CMD INSTALL
--configure-args=-with-netcdf_incdir=/usr/local/netcdf/include
--configure-args=-with-netcdf_libdir=/usr/local/netcdf/lib ncdf_1.1.tar.gz

and it failed (they contacted me because I'm the maintainer of the ncdf
package).

I would say that this is both a bug and something that needs more
documentation.  It's a bug because it accepts the incorrect line without
giving an error message, but does not parse it "as expected."  And I would
say it needs more documentation because I looked through the R docs on
this, and could find no place where the correct syntax is given.  You
probably already know (I didn't), but the syntax should be this instead:

R CMD INSTALL
--configure-args="-with-netcdf_incdir=/usr/local/netcdf/include
-with-netcdf_libdir=/usr/local/netcdf/lib" ncdf_1.1.tar.gz

and, of course, although I'm using the ncdf package as an example for
concreteness, this is a general problem for any R package.

The place in INSTALL.in that seems to be problematic is this bit:

----------------------------------
configure_args=
configure_vars=
with_package_versions=false
save="CHECK"
save_args=
fake=false

while test -n "${1}"; do
  case ${1} in
    -h|--help)
      echo "${usage}"; exit 0 ;;
...skip stuff...
    --configure-args=*)
      configure_args=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
    --configure-vars=*)
      configure_vars=`echo "${1}" | sed -e 's/[^=]*=//'` ;;

---------------------------------

It seems pretty clear that if multiple --configure-args are given on the
command line, they are silently overwritten.

One possible fix is to check and make sure the configure_args variable is
empty before setting it, as follows:

-----------------------------------

    --configure-args=*)
      if test x${configure_args} != x; then
        echo "INSTALL: command line error: only one --configure_args
argument can be given.  To specify multiple args to the configure
script, put them in quotes, separated by a space, like this:
--configure_args=\"--config_arg_1 --config_arg_2\""
        exit 1
      fi
      configure_args=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
    --configure-vars=*)
      if test x${configure_vars} != x; then
        echo "INSTALL: command line error: only one --configure_vars
argument can be given.  To specify multiple vars to the configure
script, put them in quotes, separated by a space, like this:
--configure_vars=\"--config_vars_1 --config_vars_2\""
        exit 1
      fi
      configure_vars=`echo "${1}" | sed -e 's/[^=]*=//'` ;;

-------------------------------------

Another option would be to concatenate multiple --configure-args arguments
... I imagine it's your call on which way to go.

Regards,

--Dave

---------------------------------------------------------------
David W. Pierce        / Climate Research Division
Scripps Inst. Oceanog. / (858) 534-8276 (voice)
dpierce@ucsd.edu       / (858) 534-8561 (fax)

From jago at mclink.it  Fri Dec 12 01:24:11 2003
From: jago at mclink.it (stefano iacus)
Date: Fri Dec 12 01:22:51 2003
Subject: [Rd] Failed installation on Mac OSX 10.3 (PR#5697)
In-Reply-To: <20031211153954.B6AD6EFB8@slim.kubism.ku.dk>
Message-ID: <81E06D88-2C39-11D8-9037-003065CC4CB8@mclink.it>

You should read the readme.txt file which says that you have to install 
the libreadline with the provided .pkg archive that comes with 
RAqua.dmg.
stefano

On Gioved?, dic 11, 2003, at 16:39 Europe/Rome, Brian.Beckage@uvm.edu 
wrote:

> I've installed R 1.8.1 on OSX 10.3 (Panther) using the RAqua.pkg and
> all indications were that the installation was successful.  However,
> after double clicking the R icon in the Applications folder, nothing
> appears to happen.  The following message appears on the console:
>
> Mac OS X Version 10.3 (Build 7B85)
> 2003-12-11 08:45:31 -0500
> prefs written
> dyld: /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua can't
> open library: /usr/local/lib/libreadline.4.3.dylib  (No such file or
> directory, errno = 2)
>
>
> When I check /usr/local/ there is no 'lib' folder, only the 'bin'
> folder.  I checked the FAQ's and the bug reports and this problem was
> reported by at least one other person (bug report id 5529) but no
> solution has been put forward that I could find.
>
> Do the other packages that come with the download (e.g.,
> j_libreadlne.pkg, j_tcltk.pkg, j_libxml2.pkg) need to be installed?
> Any suggestions are appreciated.
>
> Thanks for your help,
> Brian
>
>
>
>
>
>
>
>
>
>
> -- 
> *********************************************************************
> Brian Beckage
> Department of Botany
> University of Vermont
> Marsh Life Science Building
> Burlington, VT 05405
>
> Phone:  802 656-0197
> Fax  :  802 656-0440
> email:  Brian.Beckage@uvm.edu
> web  :  www.uvm.edu/~bbeckage
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From ripley at stats.ox.ac.uk  Fri Dec 12 06:32:07 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Dec 12 06:30:56 2003
Subject: [Rd] Reorganization of packages in the R distribution
Message-ID: <Pine.LNX.4.44.0312111049380.3905-100000@gannet.stats>

After long but intermittent discussion (it was mentioned at DSC99, for
example), we have reorganized the standard packages, with

  base graphics stats utils methods

normally loaded,

  mle splines stepfun tcltk tools

available for loading, and

  ctest eda lqs modreg mva nls ts

as stub packages which ensure back-compatibility.  (These have all been
merged into stats except lqs which rejoins rlm in MASS.)

There are a small number of CRAN packages that attempt to modify system
functions and so will need updating.  (Known examples are in dse:tframe,
gregmisc and mclust and some testing code elsewhere.)

What will happen about datasets is currently under discussion.  These are
split between base and stats for historical reasons, except that all time
series datasets (and ts and its methods) are now in stats.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Kurt.Hornik at wu-wien.ac.at  Fri Dec 12 08:14:50 2003
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Fri Dec 12 08:16:26 2003
Subject: [Rd] bug + insufficient doc in R CMD INSTALL (PR#5703)
In-Reply-To: <20031211183400.1A750FC07@slim.kubism.ku.dk>
References: <20031211183400.1A750FC07@slim.kubism.ku.dk>
Message-ID: <16345.27370.315993.796937@mithrandir.hornik.net>

>>>>> dpierce  writes:

> Hello,
> I believe I have found a bug in the R INSTALL script
> (src/scripts/INSTALL.in). The problem comes up when a user tries to
> specify more than one "--config-args" (or, I imagine, "--config-vars") on
> the R CMD INSTALL line. In such a case, no error message is generated, but
> the first specification is silently overwritten by the second
> specification.  The process therefore fails.

> So for instance, a user contacted me after typing this:

> R CMD INSTALL
> --configure-args=-with-netcdf_incdir=/usr/local/netcdf/include
> --configure-args=-with-netcdf_libdir=/usr/local/netcdf/lib ncdf_1.1.tar.gz

> and it failed (they contacted me because I'm the maintainer of the ncdf
> package).

> I would say that this is both a bug and something that needs more
> documentation.  It's a bug because it accepts the incorrect line without
> giving an error message, but does not parse it "as expected."  And I would
> say it needs more documentation because I looked through the R docs on
> this, and could find no place where the correct syntax is given.  You
> probably already know (I didn't), but the syntax should be this instead:

> R CMD INSTALL
> --configure-args="-with-netcdf_incdir=/usr/local/netcdf/include
> -with-netcdf_libdir=/usr/local/netcdf/lib" ncdf_1.1.tar.gz

> and, of course, although I'm using the ncdf package as an example for
> concreteness, this is a general problem for any R package.

> The place in INSTALL.in that seems to be problematic is this bit:

> ...

I would have thought that the current behavior is what everyone would
expect to happen: I don't recall having come across a program where
command line options accumulate.

If really necessary, we can of course say so.  I don't think we should
change the code, as then we would need to handle *all* command line
arguments accordingly, or, even worse, special-case some command line
args ...

-k

From gasser at websource.ch  Fri Dec 12 10:51:40 2003
From: gasser at websource.ch (gasser@websource.ch)
Date: Fri Dec 12 10:50:14 2003
Subject: [Rd] legend() graphics output  bug (PR#5725)
Message-ID: <20031212095140.81CC8FC11@slim.kubism.ku.dk>

Full_Name: Daniel Gasser
Version: 1.8.1
OS: Win XP
Submission from: (NULL) (130.60.20.92)


The legend()-Function shows a different behaviour than it did in Version 1.6.1.
It plots a black box left of the legend lines on each legend row. In 1.6.1 there
was just the line in appropriate color for each row in the legend (i was using
exactly the same legend statement and same plot function).
My legend statement is:
legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
= NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
y.intersp = 1, ncol = 1, horiz = FALSE)

If i write the statement as follows:
legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
= NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
y.intersp = 1, ncol = 1, horiz = FALSE, merge = TRUE)

The merge = TRUE statemen merges the black boxes (one for each row) and the
colored lines in the legend, but the boxes remain there.

From liebscher at gsf.de  Fri Dec 12 11:19:23 2003
From: liebscher at gsf.de (liebscher@gsf.de)
Date: Fri Dec 12 11:17:57 2003
Subject: [Rd] Bug in pbinom? (PR#5727)
Message-ID: <20031212101923.309D2FC01@slim.kubism.ku.dk>

Dear colleagues,

the command 

pbinom(size=1.95*10^10,prob=seq(1.02,1.03,10^-3)*10^-10,q=1,lower=F,log=T)

produced the output 

 [1] -46.0120973 -46.0101369 -46.0081784 -46.0062239 -46.0042692 -46.0023165
 [7]  -0.5205666  -0.5196801  -0.5187944  -0.5179102  -0.5170278


what seems strange. Has this survived in newer versions?

Best regards,
Volkmar Liebscher
-- 
Dr. Volkmar Liebscher
Institute of Biomathematics and Biometry
GSF - National Research Centre for Environment and Health 
		Ingolst?dter Landstr.1
		D--85758 Neuherberg
		Germany
E-mail:	liebscher@gsf.de
URL: 	http://www.gsf.de/ibb/homepages/liebscher
phone:	+49 89 3187 2907
Fax: 	+49 89 3187 3369


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 7.1
 year = 2003
 month = 06
 day = 16
 language = R

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, 
package:nls, package:ts, Autoloads, package:base

From ligges at statistik.uni-dortmund.de  Fri Dec 12 11:27:03 2003
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri Dec 12 11:25:37 2003
Subject: [Rd] legend() graphics output  bug (PR#5725)
Message-ID: <20031212102703.8ED55FC00@slim.kubism.ku.dk>

gasser@websource.ch wrote:
> Full_Name: Daniel Gasser
> Version: 1.8.1
> OS: Win XP
> Submission from: (NULL) (130.60.20.92)
> 
> 
> The legend()-Function shows a different behaviour than it did in Version 1.6.1.
> It plots a black box left of the legend lines on each legend row. In 1.6.1 there
> was just the line in appropriate color for each row in the legend (i was using
> exactly the same legend statement and same plot function).
> My legend statement is:
> legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
> = NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
> y.intersp = 1, ncol = 1, horiz = FALSE)
> 
> If i write the statement as follows:
> legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
> = NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
> y.intersp = 1, ncol = 1, horiz = FALSE, merge = TRUE)
> 
> The merge = TRUE statemen merges the black boxes (one for each row) and the
> colored lines in the legend, but the boxes remain there.

Don't specify "density" which implies that you are requesting the boxes. 
Looks like there was a bug in R-1.6.1 that has been fixed.

Uwe Ligges

From ripley at stats.ox.ac.uk  Fri Dec 12 11:37:28 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Dec 12 11:36:20 2003
Subject: [Rd] legend() graphics output  bug (PR#5725)
In-Reply-To: <20031212102703.8ED55FC00@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312121031590.13347-100000@gannet.stats>

On Fri, 12 Dec 2003 ligges@statistik.uni-dortmund.de wrote:

> gasser@websource.ch wrote:
> > Full_Name: Daniel Gasser
> > Version: 1.8.1
> > OS: Win XP
> > Submission from: (NULL) (130.60.20.92)
> > 
> > 
> > The legend()-Function shows a different behaviour than it did in Version 1.6.1.
> > It plots a black box left of the legend lines on each legend row. In 1.6.1 there
> > was just the line in appropriate color for each row in the legend (i was using
> > exactly the same legend statement and same plot function).
> > My legend statement is:
> > legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
> > = NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
> > y.intersp = 1, ncol = 1, horiz = FALSE)
> > 
> > If i write the statement as follows:
> > legend(x=(daysold+2), y=0.95*maxy.j, legend=leg.txt, col = leg.col, lty=1,angle
> > = NULL, density = NULL, bty = "o", xjust = 0, yjust = 1, x.intersp = 1,
> > y.intersp = 1, ncol = 1, horiz = FALSE, merge = TRUE)
> > 
> > The merge = TRUE statemen merges the black boxes (one for each row) and the
> > colored lines in the legend, but the boxes remain there.
> 
> Don't specify "density" which implies that you are requesting the boxes. 
> Looks like there was a bug in R-1.6.1 that has been fixed.

Several, with

    o	legend() allows shading without filling again.

being the critical one.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Dec 12 11:44:43 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Dec 12 11:44:06 2003
Subject: [Rd] Bug in pbinom? (PR#5727)
In-Reply-To: <20031212101923.309D2FC01@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312121038390.13347-100000@gannet.stats>

Oh, come on: have you never heard of the Poisson approximation?

> ppois(1, 1.95*seq(1.02,1.03,10^-3), lower=F,log=T)
 [1] -0.5259247 -0.5250276 -0.5241321 -0.5232383 -0.5223462 -0.5214557
 [7] -0.5205669 -0.5196798 -0.5187943 -0.5179104 -0.5170282

Probably you believe that computers never make errors too.

On Fri, 12 Dec 2003 liebscher@gsf.de wrote:

> Dear colleagues,
> 
> the command 
> 
> pbinom(size=1.95*10^10,prob=seq(1.02,1.03,10^-3)*10^-10,q=1,lower=F,log=T)
> 
> produced the output 
> 
>  [1] -46.0120973 -46.0101369 -46.0081784 -46.0062239 -46.0042692 -46.0023165
>  [7]  -0.5205666  -0.5196801  -0.5187944  -0.5179102  -0.5170278
> 
> 
> what seems strange. Has this survived in newer versions?
> 
> Best regards,
> Volkmar Liebscher
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bbeckage at uvm.edu  Fri Dec 12 12:41:15 2003
From: bbeckage at uvm.edu (Brian Beckage)
Date: Fri Dec 12 12:40:01 2003
Subject: [Rd] Failed installation on Mac OSX 10.3 (PR#5697)
In-Reply-To: <81E06D88-2C39-11D8-9037-003065CC4CB8@mclink.it>
References: <81E06D88-2C39-11D8-9037-003065CC4CB8@mclink.it>
Message-ID: <Pine.A41.4.58.0312120638080.109266@gnu.uvm.edu>


I did read the readme.txt but it said you 'should' install the libreadline
so my impression was that it was recommended but not necessary.
Undoubtedly, an oversight on my part.

Brian



On Fri, 12 Dec 2003, stefano iacus wrote:

> You should read the readme.txt file which says that you have to install
> the libreadline with the provided .pkg archive that comes with
> RAqua.dmg.
> stefano
>
> On Gioved, dic 11, 2003, at 16:39 Europe/Rome, Brian.Beckage@uvm.edu
> wrote:
>
> > I've installed R 1.8.1 on OSX 10.3 (Panther) using the RAqua.pkg and
> > all indications were that the installation was successful.  However,
> > after double clicking the R icon in the Applications folder, nothing
> > appears to happen.  The following message appears on the console:
> >
> > Mac OS X Version 10.3 (Build 7B85)
> > 2003-12-11 08:45:31 -0500
> > prefs written
> > dyld: /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua can't
> > open library: /usr/local/lib/libreadline.4.3.dylib  (No such file or
> > directory, errno = 2)
> >
> >
> > When I check /usr/local/ there is no 'lib' folder, only the 'bin'
> > folder.  I checked the FAQ's and the bug reports and this problem was
> > reported by at least one other person (bug report id 5529) but no
> > solution has been put forward that I could find.
> >
> > Do the other packages that come with the download (e.g.,
> > j_libreadlne.pkg, j_tcltk.pkg, j_libxml2.pkg) need to be installed?
> > Any suggestions are appreciated.
> >
> > Thanks for your help,
> > Brian
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > --
> > *********************************************************************
> > Brian Beckage
> > Department of Botany
> > University of Vermont
> > Marsh Life Science Building
> > Burlington, VT 05405
> >
> > Phone:  802 656-0197
> > Fax  :  802 656-0440
> > email:  Brian.Beckage@uvm.edu
> > web  :  www.uvm.edu/~bbeckage
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
>
>

From jago at mclink.it  Fri Dec 12 13:59:03 2003
From: jago at mclink.it (stefano iacus)
Date: Fri Dec 12 13:57:50 2003
Subject: [Rd] Failed installation on Mac OSX 10.3 (PR#5697)
In-Reply-To: <Pine.A41.4.58.0312120638080.109266@gnu.uvm.edu>
Message-ID: <F61B9304-2CA2-11D8-B89A-003065CC4CB8@mclink.it>

We are probably both right as the readme.txt file says

You should also install the other three packages:
1. libreadline (unless you have this package already installed)
2. tcltk (this is a must if you want to use tcltk)
3. libxml2 (if you want to use the XML package)

stefano
On Venerd?, dic 12, 2003, at 12:41 Europe/Rome, Brian Beckage wrote:

>
> I did read the readme.txt but it said you 'should' install the 
> libreadline
> so my impression was that it was recommended but not necessary.
> Undoubtedly, an oversight on my part.
>
> Brian
>
>
>
> On Fri, 12 Dec 2003, stefano iacus wrote:
>
>> You should read the readme.txt file which says that you have to 
>> install
>> the libreadline with the provided .pkg archive that comes with
>> RAqua.dmg.
>> stefano
>>
>> On Gioved?, dic 11, 2003, at 16:39 Europe/Rome, Brian.Beckage@uvm.edu
>> wrote:
>>
>>> I've installed R 1.8.1 on OSX 10.3 (Panther) using the RAqua.pkg and
>>> all indications were that the installation was successful.  However,
>>> after double clicking the R icon in the Applications folder, nothing
>>> appears to happen.  The following message appears on the console:
>>>
>>> Mac OS X Version 10.3 (Build 7B85)
>>> 2003-12-11 08:45:31 -0500
>>> prefs written
>>> dyld: /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua can't
>>> open library: /usr/local/lib/libreadline.4.3.dylib  (No such file or
>>> directory, errno = 2)
>>>
>>>
>>> When I check /usr/local/ there is no 'lib' folder, only the 'bin'
>>> folder.  I checked the FAQ's and the bug reports and this problem was
>>> reported by at least one other person (bug report id 5529) but no
>>> solution has been put forward that I could find.
>>>
>>> Do the other packages that come with the download (e.g.,
>>> j_libreadlne.pkg, j_tcltk.pkg, j_libxml2.pkg) need to be installed?
>>> Any suggestions are appreciated.
>>>
>>> Thanks for your help,
>>> Brian
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> --
>>> *********************************************************************
>>> Brian Beckage
>>> Department of Botany
>>> University of Vermont
>>> Marsh Life Science Building
>>> Burlington, VT 05405
>>>
>>> Phone:  802 656-0197
>>> Fax  :  802 656-0440
>>> email:  Brian.Beckage@uvm.edu
>>> web  :  www.uvm.edu/~bbeckage
>>>
>>> ______________________________________________
>>> R-devel@stat.math.ethz.ch mailing list
>>> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>>
>

From pgilbert at bank-banque-canada.ca  Fri Dec 12 15:56:34 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Dec 12 15:56:18 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <Pine.LNX.4.44.0312111049380.3905-100000@gannet.stats>
References: <Pine.LNX.4.44.0312111049380.3905-100000@gannet.stats>
Message-ID: <3FD9D722.90504@bankofcanada.ca>

Prof Brian Ripley wrote:

>There are a small number of CRAN packages that attempt to modify system
>functions and so will need updating.  (Known examples are in dse:tframe,
>gregmisc and mclust and some testing code elsewhere.)
>
Brian

What do you mean by "updating?"  In tframe I modify a few functions like

     start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
...) else UseMethod("start")

If that can no longer be done then this is a serious fundamental change 
that breaks all my code. I hope that is not what you mean. I'm just 
going away for a week, but will follow up when I return.

Paul

From ripley at stats.ox.ac.uk  Fri Dec 12 16:05:31 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Dec 12 16:04:24 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <3FD9D722.90504@bankofcanada.ca>
Message-ID: <Pine.LNX.4.44.0312121503140.13907-100000@gannet.stats>

On Fri, 12 Dec 2003, Paul Gilbert wrote:

> Prof Brian Ripley wrote:
> 
> >There are a small number of CRAN packages that attempt to modify system
> >functions and so will need updating.  (Known examples are in dse:tframe,
> >gregmisc and mclust and some testing code elsewhere.)
> >
> Brian
> 
> What do you mean by "updating?"  In tframe I modify a few functions like
> 
>      start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
> ...) else UseMethod("start")
> 
> If that can no longer be done then this is a serious fundamental change 
> that breaks all my code. I hope that is not what you mean. I'm just 
> going away for a week, but will follow up when I return.

It's always been incorrect code, and it no longer works.  You should not
be masking system generics, as the namespace registration mechanism does
not work on your version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pgilbert at bank-banque-canada.ca  Fri Dec 12 16:20:09 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Dec 12 16:19:51 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <Pine.LNX.4.44.0312121503140.13907-100000@gannet.stats>
References: <Pine.LNX.4.44.0312121503140.13907-100000@gannet.stats>
Message-ID: <3FD9DCA9.5020105@bankofcanada.ca>

Prof Brian Ripley wrote:

>On Fri, 12 Dec 2003, Paul Gilbert wrote:
>
>  
>
>>Prof Brian Ripley wrote:
>>
>>    
>>
>>>There are a small number of CRAN packages that attempt to modify system
>>>functions and so will need updating.  (Known examples are in dse:tframe,
>>>gregmisc and mclust and some testing code elsewhere.)
>>>
>>>      
>>>
>>Brian
>>
>>What do you mean by "updating?"  In tframe I modify a few functions like
>>
>>     start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
>>...) else UseMethod("start")
>>
>>If that can no longer be done then this is a serious fundamental change 
>>that breaks all my code. I hope that is not what you mean. I'm just 
>>going away for a week, but will follow up when I return.
>>    
>>
>
>It's always been incorrect code, and it no longer works.  You should not
>be masking system generics, as the namespace registration mechanism does
>not work on your version.
>  
>
So what would be the proper mechanism for doing something like this?  
Basically I need to do something that I believe is like multiple 
inheritance. I need to dispatch on the class of a certain part of an 
object rather than on the object itself.  (BTW, this code has worked for 
about  ten years and  I believe predates your definition of  "corrrect".)

Paul

From bjg at network-theory.co.uk  Fri Dec 12 16:50:50 2003
From: bjg at network-theory.co.uk (bjg@network-theory.co.uk)
Date: Fri Dec 12 16:49:58 2003
Subject: [Rd] proofreading corrections (cvs) (PR#5730)
Message-ID: <20031212155050.8CB12FC23@slim.kubism.ku.dk>

Here is a patch of changes from the proof-reading of the R reference
manual, made against the current cvs.

regards

-- 
Brian Gough

Network Theory Ltd -- Publishing Free Software Manuals
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

Index: src/library/base/man/Arithmetic.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Arithmetic.Rd,v
retrieving revision 1.11
diff -u -r1.11 Arithmetic.Rd
--- src/library/base/man/Arithmetic.Rd	2003/11/29 10:56:07	1.11
+++ src/library/base/man/Arithmetic.Rd	2003/12/12 15:44:47
@@ -30,7 +30,7 @@
   by element operations.  The elements of shorter vectors are recycled
   as necessary (with a \code{\link{warning}} when they are recycled only
   \emph{fractionally}).  The operators are \code{+} for addition,
-  \code{-} for subtraction \code{*} for multiplication, \code{/} for
+  \code{-} for subtraction, \code{*} for multiplication, \code{/} for
   division and \code{^} for exponentiation.
 
   \code{\%\%} indicates \code{x mod y} and \code{\%/\%} indicates
Index: src/library/base/man/Bessel.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Bessel.Rd,v
retrieving revision 1.14
diff -u -r1.14 Bessel.Rd
--- src/library/base/man/Bessel.Rd	2003/02/08 13:20:43	1.14
+++ src/library/base/man/Bessel.Rd	2003/12/12 15:44:47
@@ -59,7 +59,7 @@
   Chapter 9: Bessel Functions of Integer Order.
 }
 \seealso{
-  Other special mathematical functions, as the
+  Other special mathematical functions, such as
   \code{\link{gamma}}, \eqn{\Gamma(x)}, and \code{\link{beta}},
   \eqn{B(x)}.
 }
Index: src/library/base/man/DateTimeClasses.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/DateTimeClasses.Rd,v
retrieving revision 1.22
diff -u -r1.22 DateTimeClasses.Rd
--- src/library/base/man/DateTimeClasses.Rd	2003/07/19 10:00:15	1.22
+++ src/library/base/man/DateTimeClasses.Rd	2003/12/12 15:44:47
@@ -138,7 +138,7 @@
   \code{\link{weekdays.POSIXt}} for convenience extraction functions.
 }
 \section{Warning}{
-  Some Unix-like systems (especially Linux ones) do not have \code{"TZ"}
+  Some Unix-like systems (especially GNU/Linux ones) do not have \code{"TZ"}
   set, yet have internal code that expects it (as does POSIX).  We have
   tried to work around this, but if you get unexpected results try
   setting \code{"TZ"}.
Index: src/library/base/man/Extract.data.frame.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Extract.data.frame.Rd,v
retrieving revision 1.11
diff -u -r1.11 Extract.data.frame.Rd
--- src/library/base/man/Extract.data.frame.Rd	2003/08/26 13:35:55	1.11
+++ src/library/base/man/Extract.data.frame.Rd	2003/12/12 15:44:47
@@ -69,7 +69,7 @@
   list is used to replace (part of) one column, recycling the list as
   necessary.  If the columns specified by number are created, the names
   (if any) of the corresponding list elements are used to name the
-  columns.  If the replacment is not selecting rows, list values can
+  columns.  If the replacement is not selecting rows, list values can
   contain \code{NULL} elements which will cause the corresponding
   columns to be deleted.
 
@@ -125,7 +125,7 @@
 sw[4:5, 1:3] # select rows and columns
 sw[1]        # a one-column data frame
 sw[, 1, drop = FALSE]  # the same
-sw[, 1]      # a (unamed) vector
+sw[, 1]      # a (unnamed) vector
 sw[[1]]      # the same
 
 sw[1,]       # a one-row data frame
Index: src/library/base/man/NULL.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/NULL.Rd,v
retrieving revision 1.9
diff -u -r1.9 NULL.Rd
--- src/library/base/man/NULL.Rd	2003/05/13 14:14:31	1.9
+++ src/library/base/man/NULL.Rd	2003/12/12 15:44:47
@@ -22,7 +22,7 @@
 }
 \details{
   \code{is.null} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \arguments{
   \item{x}{an object to be tested or coerced.}
Index: src/library/base/man/Random.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Random.Rd,v
retrieving revision 1.40
diff -u -r1.40 Random.Rd
--- src/library/base/man/Random.Rd	2003/12/09 09:11:10	1.40
+++ src/library/base/man/Random.Rd	2003/12/12 15:44:48
@@ -147,7 +147,8 @@
   represent the type of normal generator (starting at \code{0}).
 
   In the underlying C, \code{.Random.seed[-1]} is \code{unsigned};
-  therefore in \R \code{.Random.seed[-1]} can be negative.
+  therefore in \R \code{.Random.seed[-1]} can be negative, due to
+  the coercion of an unsigned integer to a signed integer.
 
   \code{RNGkind} returns a two-element character vector of the RNG and
   normal kinds in use \emph{before} the call, invisibly if either
Index: src/library/base/man/Sys.info.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Sys.info.Rd,v
retrieving revision 1.11
diff -u -r1.11 Sys.info.Rd
--- src/library/base/man/Sys.info.Rd	2003/07/08 00:20:18	1.11
+++ src/library/base/man/Sys.info.Rd	2003/12/12 15:44:48
@@ -42,7 +42,7 @@
   The meaning of OS \dQuote{release} and \dQuote{version} is highly
   system-dependent and there is no guarantee that the node or
   login or user names will be what you might reasonably expect.
-  (In particular on some Linux distributions the login name is unknown
+  (In particular on some GNU/Linux distributions the login name is unknown
   from sessions with re-directed inputs.)
 }
 
Index: src/library/base/man/Sys.sleep.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/Sys.sleep.Rd,v
retrieving revision 1.2
diff -u -r1.2 Sys.sleep.Rd
--- src/library/base/man/Sys.sleep.Rd	2003/05/08 21:45:53	1.2
+++ src/library/base/man/Sys.sleep.Rd	2003/12/12 15:44:48
@@ -13,7 +13,7 @@
 \details{
   Using this function allows \R to be given very low priority and hence
   not to interfere with more important foreground tasks. A typical use
-  is to allow a process lauched from \R to set itself up and read its
+  is to allow a process launched from \R to set itself up and read its
   input files before \R execution is resumed.
   
   The intention is that this function suspends execution of \R
Index: src/library/base/man/UseMethod.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/UseMethod.Rd,v
retrieving revision 1.6
diff -u -r1.6 UseMethod.Rd
--- src/library/base/man/UseMethod.Rd	2003/12/09 09:11:10	1.6
+++ src/library/base/man/UseMethod.Rd	2003/12/12 15:44:48
@@ -71,7 +71,7 @@
   Name spaces can register methods for generic functions.  To support
   this, \code{UseMethod} and \code{NextMethod} search for methods in
   two places: first in the environment in which the generic function
-  is called, and then in the registration data base for the
+  is called, and then in the registration database for the
   environment in which the generic is defined (typically a name space).
   So methods for a generic function need to either be available in the
   environment of the call to the generic, or they must be registered.
Index: src/library/base/man/agrep.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/agrep.Rd,v
retrieving revision 1.4
diff -u -r1.4 agrep.Rd
--- src/library/base/man/agrep.Rd	2003/10/25 09:00:00	1.4
+++ src/library/base/man/agrep.Rd	2003/12/12 15:44:48
@@ -35,8 +35,8 @@
   }
 }
 \details{
-  The Levensthein edit distance is used as measure of approximateness:
-  it is the the total number of insertions, deletions and substitutions
+  The Levenshtein edit distance is used as measure of approximateness:
+  it is the total number of insertions, deletions and substitutions
   required to transform one string into another.
 
   The function is a simple interface to the \code{apse} library
Index: src/library/base/man/all.equal.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/all.equal.Rd,v
retrieving revision 1.13
diff -u -r1.13 all.equal.Rd
--- src/library/base/man/all.equal.Rd	2003/12/09 09:11:09	1.13
+++ src/library/base/man/all.equal.Rd	2003/12/12 15:44:48
@@ -47,7 +47,8 @@
     If \code{scale} is positive, absolute comparisons are after scaling
     (dividing) by \code{scale}.
 
-    For complex arguments, \code{\link{Mod}} of difference is used.
+    For complex arguments, the modulus \code{\link{Mod}} of the difference 
+    is used.
 
     \code{attr.all.equal} is used for comparing
     \code{\link{attributes}}, returning \code{NULL} or \code{character}.
Index: src/library/base/man/approxfun.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/approxfun.Rd,v
retrieving revision 1.17
diff -u -r1.17 approxfun.Rd
--- src/library/base/man/approxfun.Rd	2003/12/12 09:01:49	1.17
+++ src/library/base/man/approxfun.Rd	2003/12/12 15:44:48
@@ -24,10 +24,10 @@
   \item{n}{If \code{xout} is not specified, interpolation takes place at
     \code{n} equally spaced points spanning the interval [\code{min(x)},
     \code{max(x)}].}
-  \item{yleft}{the value to be returned when input \code{x} values
+  \item{yleft}{the value to be returned when input \code{x} values are
     less than \code{min(x)}. The default is defined by the value
     of \code{rule} given below.}
-  \item{yright}{the value to be returned when input \code{x} values
+  \item{yright}{the value to be returned when input \code{x} values are
     greater than \code{max(x)}. The default is defined by the value
     of \code{rule} given below.}
   \item{rule}{an integer describing how interpolation is to take place
Index: src/library/base/man/array.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/array.Rd,v
retrieving revision 1.13
diff -u -r1.13 array.Rd
--- src/library/base/man/array.Rd	2003/12/12 09:01:49	1.13
+++ src/library/base/man/array.Rd	2003/12/12 15:44:48
@@ -38,7 +38,7 @@
   \code{is.array} returns \code{TRUE} or \code{FALSE} depending on
   whether its argument is an array (i.e., has a \code{dim} attribute)
   or not. It is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/base/man/assign.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/assign.Rd,v
retrieving revision 1.18
diff -u -r1.18 assign.Rd
--- src/library/base/man/assign.Rd	2003/05/13 14:14:31	1.18
+++ src/library/base/man/assign.Rd	2003/12/12 15:44:48
@@ -32,7 +32,7 @@
   used to set elements of vectors, names, attributes, etc.
 
   Note that assignment to an attached list or data frame changes the
-  attached copy and not the orginal object: see \code{\link{attach}}.
+  attached copy and not the original object: see \code{\link{attach}}.
 }
 \value{
   This function is invoked for its side effect, which is assigning
Index: src/library/base/man/browser.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/browser.Rd,v
retrieving revision 1.7
diff -u -r1.7 browser.Rd
--- src/library/base/man/browser.Rd	2003/05/13 14:14:31	1.7
+++ src/library/base/man/browser.Rd	2003/12/12 15:44:49
@@ -15,7 +15,7 @@
   place.
 
   Local variables can be listed with \code{ls}, and manipulated with \R
-  expressions typed to this sub-interpreter.  The interpreter copy is
+  expressions typed to this sub-interpreter.  The sub-interpreter can be
   exited by typing \code{c}.  Execution then resumes at the statement
   following the call to \code{browser}.
 
Index: src/library/base/man/call.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/call.Rd,v
retrieving revision 1.11
diff -u -r1.11 call.Rd
--- src/library/base/man/call.Rd	2003/05/13 14:14:31	1.11
+++ src/library/base/man/call.Rd	2003/12/12 15:44:49
@@ -27,7 +27,7 @@
   %NO We don't differentiate between expressions and function calls.
   %NO So \code{is.call} is the same as \code{is.expression}.
   It is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
   
   Objects of mode \code{"list"} can be coerced to mode \code{"call"}.
   The first element of the list becomes the function part of the call,
Index: src/library/base/man/cbind.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/cbind.Rd,v
retrieving revision 1.22
diff -u -r1.22 cbind.Rd
--- src/library/base/man/cbind.Rd	2003/07/30 17:25:52	1.22
+++ src/library/base/man/cbind.Rd	2003/12/12 15:44:49
@@ -26,7 +26,7 @@
 
   The \code{rbind} data frame method takes the classes of the columns
   from the first
-  data frame.  Factors are have their levels expanded as necessary (in
+  data frame.  Factors have their levels expanded as necessary (in
   the order of the levels of the levelsets of the factors encountered)
   and the result is an ordered factor if and only if all the components
   were ordered factors.  (The last point differs from S-PLUS.)
Index: src/library/base/man/chartr.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/chartr.Rd,v
retrieving revision 1.7
diff -u -r1.7 chartr.Rd
--- src/library/base/man/chartr.Rd	2001/11/20 18:30:12	1.7
+++ src/library/base/man/chartr.Rd	2003/12/12 15:44:49
@@ -25,7 +25,7 @@
   \code{chartr} translates each character in \code{x} that is specified
   in \code{old} to the corresponding character specified in \code{new}.
   Ranges are supported in the specifications, but character classes and
-  repreated characters are not.  If \code{old} contains more characters
+  repeated characters are not.  If \code{old} contains more characters
   than new, an error is signaled; if it contains fewer characters, the
   extra characters at the end of \code{new} are ignored.
 
Index: src/library/base/man/commandArgs.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/commandArgs.Rd,v
retrieving revision 1.7
diff -u -r1.7 commandArgs.Rd
--- src/library/base/man/commandArgs.Rd	2003/12/09 09:26:46	1.7
+++ src/library/base/man/commandArgs.Rd	2003/12/12 15:44:49
@@ -31,7 +31,7 @@
 #endif
 \examples{
 commandArgs()
-## Spawn a copy of this  application as it was invoked.
+## Spawn a copy of this application as it was invoked.
 ## system(paste(commandArgs(), collapse=" "))
 }
 \keyword{environment}
Index: src/library/base/man/complex.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/complex.Rd,v
retrieving revision 1.17
diff -u -r1.17 complex.Rd
--- src/library/base/man/complex.Rd	2003/11/29 10:56:07	1.17
+++ src/library/base/man/complex.Rd	2003/12/12 15:44:49
@@ -60,7 +60,7 @@
   functions are available for complex values.
 
   \code{is.complex} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/base/man/connections.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/connections.Rd,v
retrieving revision 1.49
diff -u -r1.49 connections.Rd
--- src/library/base/man/connections.Rd	2003/12/09 09:11:09	1.49
+++ src/library/base/man/connections.Rd	2003/12/12 15:44:50
@@ -100,7 +100,7 @@
   \code{open}, \code{close} and \code{seek} are generic functions: the
   following applies to the methods relevant to connections.
 
-  \code{open} opens a connection.  In general functions using
+  \code{open} opens a connection.  In general, functions using
   connections will open them if they are not open, but then close them
   again, so to leave a connection open call \code{open} explicitly.
 
Index: src/library/base/man/converters.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/converters.Rd,v
retrieving revision 1.2
diff -u -r1.2 converters.Rd
--- src/library/base/man/converters.Rd	2003/07/08 00:20:18	1.2
+++ src/library/base/man/converters.Rd	2003/12/12 15:44:50
@@ -24,7 +24,7 @@
 }
 \arguments{
 \item{id}{either a number or a string identifying the element of interest in the converter
-   list. A string sis matched against the description strings for each element to identify
+   list. A string is matched against the description strings for each element to identify
    the element. Integers are specified starting at 1 (rather than 0).}
 
 \item{status}{a logical value specifying whether the element is to be considered
Index: src/library/base/man/copyright.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/copyright.Rd,v
retrieving revision 1.5
diff -u -r1.5 copyright.Rd
--- src/library/base/man/copyright.Rd	2003/07/08 00:20:18	1.5
+++ src/library/base/man/copyright.Rd	2003/12/12 15:44:50
@@ -3,7 +3,7 @@
 \alias{copyright}
 \alias{copyrights}
 \description{
-  \R is released under the \sQuote{GNU Public License}: see
+  \R is released under the \sQuote{GNU General Public License}: see
   \code{\link{license}} for details.  The license describes your right
   to use \R.  Copyright is concerned with ownership of intellectual
   rights, and some of the software used has conditions that the
Index: src/library/base/man/data.frame.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/data.frame.Rd,v
retrieving revision 1.40
diff -u -r1.40 data.frame.Rd
--- src/library/base/man/data.frame.Rd	2003/12/12 09:01:49	1.40
+++ src/library/base/man/data.frame.Rd	2003/12/12 15:44:50
@@ -25,7 +25,7 @@
     (by \code{\link{make.names}}) so that they are.}
 }
 \value{
-  A data frame, a matrix-like stucture whose columns may be of
+  A data frame, a matrix-like structure whose columns may be of
   differing types (numeric, logical, factor and character and so on).
 }
 \details{
@@ -48,7 +48,7 @@
   If row names are not supplied in the call to \code{data.frame}, the
   row names are taken from the first component that has suitable names,
   for example a named vector or a matrix with rownames or a data frame.
-  (If that component is subsequently recycled the names are discarded,
+  (If that component is subsequently recycled, the names are discarded
   with a warning.)  If \code{row.names} was supplied as \code{NULL} or no
   suitable component was found the row names are the integer sequence
   starting at one.
Index: src/library/base/man/dcf.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/dcf.Rd,v
retrieving revision 1.6
diff -u -r1.6 dcf.Rd
--- src/library/base/man/dcf.Rd	2003/12/09 20:03:38	1.6
+++ src/library/base/man/dcf.Rd	2003/12/12 15:44:50
@@ -38,13 +38,13 @@
     field may appear only once in a record.
     \item Regular lines start with a non-whitespace character.
     \item Regular lines are of form \code{tag:value}, i.e.,
-    have a name tag and a value for the field, seperated
+    have a name tag and a value for the field, separated
     by \code{:} (only the first \code{:} counts). The value can be
     empty (=whitespace only).
     \item Lines starting with whitespace are continuation lines (to the
     preceding field) if at least one character
     in the line is non-whitespace.
-    \item Records are seperated by one or more empty (=whitespace only)
+    \item Records are separated by one or more empty (=whitespace only)
     lines.
   }
 
Index: src/library/base/man/delay.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/delay.Rd,v
retrieving revision 1.8
diff -u -r1.8 delay.Rd
--- src/library/base/man/delay.Rd	2000/09/03 12:01:50	1.8
+++ src/library/base/man/delay.Rd	2003/12/12 15:44:50
@@ -31,8 +31,8 @@
     10
 })
 
-x^2#- yippee
-x^2#- simple number
+x^2 #- yippee
+x^2 #- simple number
 }
 \keyword{programming}
 \keyword{data}
Index: src/library/base/man/detach.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/detach.Rd,v
retrieving revision 1.13
diff -u -r1.13 detach.Rd
--- src/library/base/man/detach.Rd	2003/12/09 16:41:54	1.13
+++ src/library/base/man/detach.Rd	2003/12/12 15:44:50
@@ -21,7 +21,7 @@
 }
 \description{
   Detach a database, i.e., remove it from the \code{\link{search}()} path
-  of available \R objects. Usually, this either a \code{\link{data.frame}}
+  of available \R objects. Usually, this is either a \code{\link{data.frame}}
   which has been \code{\link{attach}}ed or a package which was required
   previously.
 }
Index: src/library/base/man/double.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/double.Rd,v
retrieving revision 1.13
diff -u -r1.13 double.Rd
--- src/library/base/man/double.Rd	2003/06/04 09:52:46	1.13
+++ src/library/base/man/double.Rd	2003/12/12 15:44:50
@@ -31,7 +31,7 @@
 
   \code{is.double} returns \code{TRUE} or \code{FALSE} depending on
   whether its argument is of double type or not.  It is generic:
-  you can write methods to handle of specific classes of objects,
+  you can write methods to handle specific classes of objects,
   see \link{InternalMethods}.
 }
 \note{
Index: src/library/base/man/environment.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/environment.Rd,v
retrieving revision 1.15
diff -u -r1.15 environment.Rd
--- src/library/base/man/environment.Rd	2003/12/09 09:11:10	1.15
+++ src/library/base/man/environment.Rd	2003/12/12 15:44:50
@@ -65,7 +65,7 @@
   in the near future.
 
   \code{is.environment} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \seealso{
   The \code{envir} argument of \code{\link{eval}}.
Index: src/library/base/man/eval.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/eval.Rd,v
retrieving revision 1.15
diff -u -r1.15 eval.Rd
--- src/library/base/man/eval.Rd	2003/07/08 00:20:18	1.15
+++ src/library/base/man/eval.Rd	2003/12/12 15:44:50
@@ -15,7 +15,7 @@
 local(expr, envir = new.env())
 }
 \arguments{
-  \item{expr}{object of mode \code{\link{expression}} or\code{call} or
+  \item{expr}{object of mode \code{\link{expression}} or \code{call} or
     an \dQuote{unevaluated expression}.}
   \item{envir}{the \code{\link{environment}} in which \code{expr} is to
     be evaluated.  May also be a list, a data frame, or an integer as in
Index: src/library/base/man/factor.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/factor.Rd,v
retrieving revision 1.29
diff -u -r1.29 factor.Rd
--- src/library/base/man/factor.Rd	2003/12/09 09:11:10	1.29
+++ src/library/base/man/factor.Rd	2003/12/12 15:44:51
@@ -100,7 +100,7 @@
   Under those circumstances missing values are printed as \code{<NA>}.
 
   \code{is.factor} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \section{Warning}{
   The interpretation of a factor depends on both the codes and the
Index: src/library/base/man/fft.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/fft.Rd,v
retrieving revision 1.11
diff -u -r1.11 fft.Rd
--- src/library/base/man/fft.Rd	2003/07/07 08:21:10	1.11
+++ src/library/base/man/fft.Rd	2003/12/12 15:44:51
@@ -35,7 +35,7 @@
   its discrete Fourier transform.  This is useful for analyzing
   vector-valued series.
 
-  The FFT is fastest when the length of of the series being transformed
+  The FFT is fastest when the length of the series being transformed
   is highly composite (i.e., has many factors).  If this is not the
   case, the transform may take a long time to compute and will use a
   large amount of memory.
Index: src/library/base/man/gzcon.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/gzcon.Rd,v
retrieving revision 1.2
diff -u -r1.2 gzcon.Rd
--- src/library/base/man/gzcon.Rd	2003/02/19 21:05:43	1.2
+++ src/library/base/man/gzcon.Rd	2003/12/12 15:44:51
@@ -35,9 +35,8 @@
 }
 \seealso{\code{\link{gzfile}}}
 \examples{
-\dontrun{## This example may not still be available
-## print the value to see what objects were created.
-con <- url("http://hesweb1.med.virginia.edu/biostat/s/data/sav/kprats.sav")
+\dontrun{## print the value to see what objects were created.
+con <- url("http://host/file.sav")
 print(load(con))}
 
 ## gzfile and gzcon can inter-work.
Index: src/library/base/man/integer.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/integer.Rd,v
retrieving revision 1.15
diff -u -r1.15 integer.Rd
--- src/library/base/man/integer.Rd	2003/07/26 07:15:36	1.15
+++ src/library/base/man/integer.Rd	2003/12/12 15:44:51
@@ -35,7 +35,7 @@
   \code{is.integer} returns \code{TRUE} or \code{FALSE} depending on
   whether its argument is of integer type or not.
   \code{is.integer} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
   Note that factors are true for \code{is.integer} but false for
   \code{\link{is.numeric}}.
 }
Index: src/library/base/man/is.finite.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.finite.Rd,v
retrieving revision 1.21
diff -u -r1.21 is.finite.Rd
--- src/library/base/man/is.finite.Rd	2003/07/08 00:20:18	1.21
+++ src/library/base/man/is.finite.Rd	2003/12/12 15:44:51
@@ -41,7 +41,7 @@
   since systems typically have many different NaN values.
   In most ports of \R one of these is used for the numeric missing
   value \code{NA}.  It is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \note{
   In \R, basically all mathematical functions (including basic
@@ -60,8 +60,9 @@
 %%- better ones ?!??
     ANSI/IEEE 754 Floating-Point Standard.
 
-    Currently (6/2002), Bill Metzenthen's \email{billm@suburbia.net} tutorial
-    and examples at \cr \url{http://www.suburbia.net/~billm/}
+% This link does not work any more (11/12/03)
+%    Currently (6/2002), Bill Metzenthen's \email{billm@suburbia.net} tutorial
+%    and examples at \cr \url{http://www.suburbia.net/~billm/}
 }
 \examples{
 pi / 0 ## = Inf a non-zero number divided by zero creates infinity
Index: src/library/base/man/is.function.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.function.Rd,v
retrieving revision 1.5
diff -u -r1.5 is.function.Rd
--- src/library/base/man/is.function.Rd	2003/03/12 15:51:26	1.5
+++ src/library/base/man/is.function.Rd	2003/12/12 15:44:51
@@ -8,7 +8,7 @@
 }
 \details{
   \code{is.function} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \value{\code{TRUE} if \code{x} is a function, and \code{FALSE}
   otherwise.}
Index: src/library/base/man/is.language.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.language.Rd,v
retrieving revision 1.9
diff -u -r1.9 is.language.Rd
--- src/library/base/man/is.language.Rd	2003/05/13 14:14:31	1.9
+++ src/library/base/man/is.language.Rd	2003/12/12 15:44:51
@@ -14,7 +14,7 @@
 }
 \details{
   \code{is.language} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/base/man/is.object.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.object.Rd,v
retrieving revision 1.6
diff -u -r1.6 is.object.Rd
--- src/library/base/man/is.object.Rd	2003/12/09 09:11:10	1.6
+++ src/library/base/man/is.object.Rd	2003/12/12 15:44:51
@@ -14,7 +14,7 @@
 }
 \details{
   \code{is.object} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \seealso{\code{\link[base]{class}}, and \code{\link[utils]{methods}}.}
 
Index: src/library/base/man/is.recursive.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.recursive.Rd,v
retrieving revision 1.9
diff -u -r1.9 is.recursive.Rd
--- src/library/base/man/is.recursive.Rd	2003/05/13 14:14:31	1.9
+++ src/library/base/man/is.recursive.Rd	2003/12/12 15:44:51
@@ -17,7 +17,7 @@
   \item{x}{object to be tested.}
 }
 \details{
-  These are generic: you can write methods to handle of specific classes
+  These are generic: you can write methods to handle specific classes
   of objects, see \link{InternalMethods}.
 }
 \references{
Index: src/library/base/man/is.single.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/is.single.Rd,v
retrieving revision 1.6
diff -u -r1.6 is.single.Rd
--- src/library/base/man/is.single.Rd	2003/05/13 14:14:31	1.6
+++ src/library/base/man/is.single.Rd	2003/12/12 15:44:51
@@ -11,7 +11,7 @@
 }
 \details{
   \code{is.single} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/base/man/length.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/length.Rd,v
retrieving revision 1.12
diff -u -r1.12 length.Rd
--- src/library/base/man/length.Rd	2003/08/29 21:39:07	1.12
+++ src/library/base/man/length.Rd	2003/12/12 15:44:51
@@ -19,7 +19,7 @@
   \code{length} returns \code{NA}.
 }
 \details{
-  \code{length} is generic: you can write methods to handle of specific
+  \code{length} is generic: you can write methods to handle specific
   classes of objects, see \link{InternalMethods}.
 
   The replacement form can be used to reset the length of a vector.  If
Index: src/library/base/man/library.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/library.Rd,v
retrieving revision 1.74
diff -u -r1.74 library.Rd
--- src/library/base/man/library.Rd	2003/12/09 09:11:10	1.74
+++ src/library/base/man/library.Rd	2003/12/12 15:44:52
@@ -79,7 +79,7 @@
     printed.}
   \item{quietly}{a logical.  If \code{TRUE}, no message confirming
     package loading is printed.}
-  \item{save}{logical or environment.  IF \code{TRUE}, a call to
+  \item{save}{logical or environment.  If \code{TRUE}, a call to
   \code{require} from the source for a package will save the name of
   the required package in the variable \code{".required"}, allowing
   function \code{\link{detach}} to warn if a required package is
Index: src/library/base/man/list.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/list.Rd,v
retrieving revision 1.14
diff -u -r1.14 list.Rd
--- src/library/base/man/list.Rd	2003/07/25 13:41:21	1.14
+++ src/library/base/man/list.Rd	2003/12/12 15:44:52
@@ -55,7 +55,7 @@
   whereas \code{is.pairlist} only returns \code{TRUE} in the latter case.
 
   \code{is.list} and \code{is.pairlist} are generic: you can write
-  methods to handle of specific classes of objects, see \link{InternalMethods}.
+  methods to handle specific classes of objects, see \link{InternalMethods}.
 
   An empty pairlist, \code{pairlist()} is the same as \code{NULL}.  This
   is different from \code{list()}.
Index: src/library/base/man/load.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/load.Rd,v
retrieving revision 1.13
diff -u -r1.13 load.Rd
--- src/library/base/man/load.Rd	2003/12/09 09:11:10	1.13
+++ src/library/base/man/load.Rd	2003/12/12 15:44:52
@@ -41,8 +41,7 @@
 ## restore the saved values to the user's workspace
 load("all.Rdata", .GlobalEnv)
 
-\dontrun{## This example may not still be available
-## print the value to see what objects were created.
-print(loadURL("http://hesweb1.med.virginia.edu/biostat/s/data/sav/kprats.sav"))}
+\dontrun{## print the value to see what objects were created.
+print(loadURL("http://host/file.sav"))}
 }
 \keyword{file}
Index: src/library/base/man/logical.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/logical.Rd,v
retrieving revision 1.14
diff -u -r1.14 logical.Rd
--- src/library/base/man/logical.Rd	2003/07/08 00:20:18	1.14
+++ src/library/base/man/logical.Rd	2003/12/12 15:44:52
@@ -27,7 +27,7 @@
   All four are \code{logical(1)} vectors.
 
   \code{is.logical} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \arguments{
   \item{length}{desired length.}
Index: src/library/base/man/matrix.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/matrix.Rd,v
retrieving revision 1.13
diff -u -r1.13 matrix.Rd
--- src/library/base/man/matrix.Rd	2003/12/08 20:34:30	1.13
+++ src/library/base/man/matrix.Rd	2003/12/12 15:44:52
@@ -12,7 +12,7 @@
 
   \code{is.matrix} tests if its argument is a (strict) matrix.
   It is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \usage{
 matrix(data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL)
Index: src/library/base/man/name.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/name.Rd,v
retrieving revision 1.16
diff -u -r1.16 name.Rd
--- src/library/base/man/name.Rd	2003/07/08 00:20:18	1.16
+++ src/library/base/man/name.Rd	2003/12/12 15:44:52
@@ -30,7 +30,7 @@
 }
 \details{
   \code{is.symbol} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/base/man/noquote.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/noquote.Rd,v
retrieving revision 1.9
diff -u -r1.9 noquote.Rd
--- src/library/base/man/noquote.Rd	2003/12/09 09:11:10	1.9
+++ src/library/base/man/noquote.Rd	2003/12/12 15:44:52
@@ -25,7 +25,7 @@
   \code{"noquote"}.  There is a method for \code{c()} and subscript
   method (\code{"[.noquote"}) which ensures that the class is not lost
   by subsetting.  The print method (\code{print.noquote}) prints
-  character stringss \emph{without} quotes (\code{"\dots"}).
+  character strings \emph{without} quotes (\code{"\dots"}).
 
   These functions exist both as utilities and as an example of using (S3)
   \code{\link[base]{class}} and object orientation.
Index: src/library/base/man/ns-alt.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/ns-alt.Rd,v
retrieving revision 1.4
diff -u -r1.4 ns-alt.Rd
--- src/library/base/man/ns-alt.Rd	2003/08/01 13:22:52	1.4
+++ src/library/base/man/ns-alt.Rd	2003/12/12 15:44:52
@@ -60,7 +60,7 @@
   it is used as the method.  When the method is specified as a name,
   explicitly or implicitly, the function lookup is handled lazily;
   this allows the definition to occur after the \code{.S3method}
-  declaration and also integrates with possible data base storage of
+  declaration and also integrates with possible database storage of
   package code.
 }
 \examples{
Index: src/library/base/man/ns-lowlev.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/ns-lowlev.Rd,v
retrieving revision 1.8
diff -u -r1.8 ns-lowlev.Rd
--- src/library/base/man/ns-lowlev.Rd	2003/12/06 10:46:38	1.8
+++ src/library/base/man/ns-lowlev.Rd	2003/12/12 15:44:52
@@ -29,7 +29,7 @@
   \item{package}{string naming the package/name space to load.}
   \item{lib.loc}{character vector specifying library search path.}
   \item{keep.source}{logical specifying whether to retain source.}
-  \item{partial}{logical; if true, stop just after laoding code.}
+  \item{partial}{logical; if true, stop just after loading code.}
   \item{declarativeOnly}{logical; disables \code{.Import}, etc, if true.}
   \item{compress}{option passed to \code{\link{save}}.}
 }
Index: src/library/base/man/numeric.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/numeric.Rd,v
retrieving revision 1.15
diff -u -r1.15 numeric.Rd
--- src/library/base/man/numeric.Rd	2003/07/26 07:15:36	1.15
+++ src/library/base/man/numeric.Rd	2003/12/12 15:44:52
@@ -25,7 +25,7 @@
 }
 \details{
   \code{is.numeric} is  generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
 
   Note that factors are false for \code{is.numeric} but true for
   \code{\link{is.integer}}.
Index: src/library/base/man/options.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/options.Rd,v
retrieving revision 1.72
diff -u -r1.72 options.Rd
--- src/library/base/man/options.Rd	2003/12/11 09:00:42	1.72
+++ src/library/base/man/options.Rd	2003/12/12 15:44:53
@@ -40,7 +40,7 @@
 \section{Options used in base \R}{
   \describe{
     \item{\code{prompt}:}{a string, used for \R's prompt; should usually
-      end in a blank (\code{" "}).}
+      end in a blank (\code{"~"}).}
 
     \item{\code{continue}:}{a string setting the prompt used for lines
       which continue over one line.}
@@ -276,7 +276,7 @@
     \code{na.action} \tab \code{na.omit} \tab
     \code{ts.eps} \tab \code{1e-5}\cr
     \code{error} \tab \code{NULL} \tab
-    \code{show.error.messags} \tab \code{TRUE} \cr
+    \code{show.error.messages} \tab \code{TRUE} \cr
     \code{warn} \tab \code{0}\tab
     \code{warning.length} \tab \code{1000}\cr
     \code{echo} \tab \code{TRUE} \tab
Index: src/library/base/man/package.dependencies.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/package.dependencies.Rd,v
retrieving revision 1.3
diff -u -r1.3 package.dependencies.Rd
--- src/library/base/man/package.dependencies.Rd	2003/12/09 09:11:10	1.3
+++ src/library/base/man/package.dependencies.Rd	2003/12/12 15:44:53
@@ -16,7 +16,7 @@
 }
 \details{
     Currently we only check if the package conforms with the currently
-    running version of R. IN the future we might add checks for
+    running version of R. In the future we might add checks for
     inter-package dependencies.
 }
 \seealso{\code{\link[utils]{update.packages}}}
Index: src/library/base/man/print.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/print.Rd,v
retrieving revision 1.19
diff -u -r1.19 print.Rd
--- src/library/base/man/print.Rd	2003/12/09 09:11:10	1.19
+++ src/library/base/man/print.Rd	2003/12/12 15:44:53
@@ -28,7 +28,7 @@
     printed with surrounding quotes.}
   \item{max.levels}{integer, indicating how many levels should be
     printed for a factor; if \code{0}, no extra "Levels" line will be
-    printed.  The default, \code{NULL}, entails chosing \code{max.levels}
+    printed.  The default, \code{NULL}, entails choosing \code{max.levels}
     such that the levels print on one line of width \code{width}.}
   \item{width}{only used when \code{max.levels} is NULL, see above.}
   \item{digits}{minimal number of \emph{significant} digits, see
Index: src/library/base/man/range.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/range.Rd,v
retrieving revision 1.15
diff -u -r1.15 range.Rd
--- src/library/base/man/range.Rd	2003/12/12 09:01:49	1.15
+++ src/library/base/man/range.Rd	2003/12/12 15:44:54
@@ -23,7 +23,7 @@
   directly or via the \code{\link{Summary}} group generic.
 
   If \code{na.rm} is \code{FALSE}, \code{NA}
-  and \code{NaN} values in any of the arguments will cause NA values
+  and \code{NaN} values in any of the arguments will cause \code{NA} values
   to be returned, otherwise \code{NA} values are ignored.
 
   If \code{finite} is \code{TRUE}, the minimum
Index: src/library/base/man/readBin.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/readBin.Rd,v
retrieving revision 1.13
diff -u -r1.13 readBin.Rd
--- src/library/base/man/readBin.Rd	2003/11/15 07:05:56	1.13
+++ src/library/base/man/readBin.Rd	2003/12/12 15:44:54
@@ -87,7 +87,7 @@
   is zero-padded, with a warning.
 
   If \code{readBin(what=character())} is used incorrectly on a file which
-  does not contain C-style charcter strings, warnings (usually
+  does not contain C-style character strings, warnings (usually
   many) are  given as from version 1.6.2.  The input will be broken into
   pieces of length 10000 with any final part being discarded.
 }
@@ -96,7 +96,7 @@
   For \code{readBin}, a vector of appropriate mode and length the number of
   items read (which might be less than \code{n}).
 
-  For \code{readChar}, a character vector of length the number of
+  For \code{readChar}, a character vector of length equal to the number of
   items read (which might be less than \code{length(nchars)}).
 
   For \code{writeBin} and \code{writeChar}, none.
Index: src/library/base/man/rm.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/rm.Rd,v
retrieving revision 1.6
diff -u -r1.6 rm.Rd
--- src/library/base/man/rm.Rd	2003/05/13 14:14:31	1.6
+++ src/library/base/man/rm.Rd	2003/12/12 15:44:54
@@ -24,7 +24,7 @@
   vector \code{list}, or through a combination of both.  All objects
   thus specified will be removed.
 
-  If \code{envir} is NULL then the the currently active environment is
+  If \code{envir} is NULL then the currently active environment is
   searched first.
 
   If \code{inherits} is \code{TRUE} then parents of the supplied
Index: src/library/base/man/scan.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/scan.Rd,v
retrieving revision 1.36
diff -u -r1.36 scan.Rd
--- src/library/base/man/scan.Rd	2003/09/13 08:07:30	1.36
+++ src/library/base/man/scan.Rd	2003/12/12 15:44:54
@@ -60,7 +60,7 @@
   \item{nlines}{the maximum number of lines of data to be read.}
 
   \item{na.strings}{character vector.  Elements of this vector are to be
-    interpeted as missing (\code{\link{NA}}) values.}
+    interpreted as missing (\code{\link{NA}}) values.}
 
   \item{flush}{logical: if \code{TRUE}, \code{scan} will flush to the
     end of the line after reading the last of the fields requested.
@@ -115,7 +115,7 @@
   values.
   
   If \code{sep} is the default (\code{""}), the character \code{\\}
-  in a quoted string escapes the following character, so quotes may
+  in a quoted string escapes the following character, so quotes may be
   included in the string by escaping them.
   
   If \code{sep} is non-default, the fields may be quoted in the style of
Index: src/library/base/man/seq.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/seq.Rd,v
retrieving revision 1.25
diff -u -r1.25 seq.Rd
--- src/library/base/man/seq.Rd	2003/12/12 09:01:49	1.25
+++ src/library/base/man/seq.Rd	2003/12/12 15:44:54
@@ -55,7 +55,7 @@
   If \code{from} and \code{to} are factors of the same length, then
   \code{from : to} returns the \dQuote{cross} of the two.
 
-  Very small sequences (with \code{from - to} of the order of 1e-14
+  Very small sequences (with \code{from - to} of the order of \eqn{10^{-14}}
   times the larger of the ends) will return \code{from}.
 }
 \value{
Index: src/library/base/man/sprintf.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/sprintf.Rd,v
retrieving revision 1.4
diff -u -r1.4 sprintf.Rd
--- src/library/base/man/sprintf.Rd	2003/07/08 00:20:18	1.4
+++ src/library/base/man/sprintf.Rd	2003/12/12 15:44:55
@@ -16,7 +16,8 @@
     value is read from each vector.}
 }
 \details{
-  This is a wrapper for the system's C call.  Attempts are made to
+  This is a wrapper for the system \code{sprintf} C-library function.  
+  Attempts are made to
   check that the mode of the values passed match the format supplied,
   and \R's special values (\code{NA}, \code{Inf}, \code{-Inf} and
   \code{NaN}) are handled correctly.
Index: src/library/base/man/strptime.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/strptime.Rd,v
retrieving revision 1.21
diff -u -r1.21 strptime.Rd
--- src/library/base/man/strptime.Rd	2003/11/27 11:59:12	1.21
+++ src/library/base/man/strptime.Rd	2003/12/12 15:44:55
@@ -36,7 +36,7 @@
   \item{\dots}{Further arguments to be passed from or to other methods.}
   \item{usetz}{logical.  Should the timezone be appended to the output?
     This is used in printing time, and as a workaround for problems with
-    using \code{"\%Z"} on most Linux systems.}
+    using \code{"\%Z"} on most GNU/Linux systems.}
   \item{year, month, day}{numerical values to specify a day.}
   \item{hour, min, sec}{numerical values for a time within a day.}
 }
@@ -90,7 +90,7 @@
     \item{\code{\%z}}{(output only.) Offset from Greenwich, so
       \code{-0800} is 8 hours west of Greenwich.}
     \item{\code{\%Z}}{(output only.) Time zone as a character
-      string (empty if not available).  Note: do not use this on Linux
+      string (empty if not available).  Note: do not use this on GNU/Linux
       unless the \code{TZ} environment variable is set.}
   }
   Where leading zeros are shown they will be used on output but are
@@ -189,7 +189,7 @@
 format(Sys.time(), "\%a \%b \%d \%X \%Y")
 ## we would include the timezone as in
 ## format(Sys.time(), "\%a \%b \%d \%X \%Y \%Z")
-## but this crashes some Linux systems
+## but this crashes some GNU/Linux systems
 
 ## read in date info in format 'ddmmmyyyy'
 ## This will give NA(s) in some locales; setting the C locale
Index: src/library/base/man/strwrap.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/strwrap.Rd,v
retrieving revision 1.2
diff -u -r1.2 strwrap.Rd
--- src/library/base/man/strwrap.Rd	2003/07/08 00:20:19	1.2
+++ src/library/base/man/strwrap.Rd	2003/12/12 15:44:55
@@ -30,8 +30,8 @@
 }
 \details{
   Whitespace in the input is destroyed.  Double spaces after periods
-  (thought as representing sentence ends) are preserved.  Currently, it
-  possible sentence ends at line breaks are not considerd specially.
+  (representing sentence ends) are preserved.  Currently, sentence
+  ends at line breaks are not considered specially.
   
   Indentation is relative to the number of characters in the prefix
   string.
Index: src/library/base/man/sys.parent.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/sys.parent.Rd,v
retrieving revision 1.12
diff -u -r1.12 sys.parent.Rd
--- src/library/base/man/sys.parent.Rd	2003/07/08 00:20:19	1.12
+++ src/library/base/man/sys.parent.Rd	2003/12/12 15:44:55
@@ -56,7 +56,7 @@
 
   \code{sys.nframe} returns the number of the current frame in that
   list. \code{sys.function} gives the definition of the function
-  curently being evaluated in the frame \code{n} generations back.
+  currently being evaluated in the frame \code{n} generations back.
   
   \code{sys.frames} gives a list of all the active frames and
   \code{sys.parents} gives the indices of the parent frames of each
Index: src/library/base/man/taskCallbackManager.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/taskCallbackManager.Rd,v
retrieving revision 1.3
diff -u -r1.3 taskCallbackManager.Rd
--- src/library/base/man/taskCallbackManager.Rd	2003/07/08 00:20:19	1.3
+++ src/library/base/man/taskCallbackManager.Rd	2003/12/12 15:44:55
@@ -45,7 +45,7 @@
   A list containing 6 functions:
   \item{add}{register a callback with this manager, giving the
     function, an optional 5-th argument, an optional name
-    by which the the callback is stored in the list,
+    by which the callback is stored in the list,
     and a \code{register} argument which controls whether
     the \code{evaluate} function is registered with the internal
     C-level dispatch mechanism if necessary.}
@@ -53,7 +53,7 @@
     of callbacks, either by name or position/index.}
   \item{evaluate}{the \sQuote{real} callback function that is registered
     with the C-level dispatch mechanism and which invokes each of the
-    R-leve callbacks within this manager's control.}
+    R-level callbacks within this manager's control.}
   \item{suspend}{a function to set the suspend state
     of the manager. If it is suspended, none of the callbacks will be
     invoked when a task is completed. One sets the state by specifying
Index: src/library/base/man/taskCallbackNames.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/taskCallbackNames.Rd,v
retrieving revision 1.3
diff -u -r1.3 taskCallbackNames.Rd
--- src/library/base/man/taskCallbackNames.Rd	2003/07/07 08:21:10	1.3
+++ src/library/base/man/taskCallbackNames.Rd	2003/12/12 15:44:55
@@ -5,7 +5,7 @@
   This provides a way to get the names (or identifiers)
   for the currently registered task callbacks
   that are invoked at the conclusion of each top-level task.
-  These identifies can be used to remove a callback.
+  These identifiers can be used to remove a callback.
 }
 \usage{
 getTaskCallbackNames()
Index: src/library/base/man/toString.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/toString.Rd,v
retrieving revision 1.3
diff -u -r1.3 toString.Rd
--- src/library/base/man/toString.Rd	2003/07/29 07:01:19	1.3
+++ src/library/base/man/toString.Rd	2003/12/12 15:44:55
@@ -6,7 +6,7 @@
 \description{
   This is a helper function for \code{\link{format}}. It converts its argument
   to a string. If the argument is a vector then its elements are
-  concatenated with a \code{,} as a separtor. 
+  concatenated with a \code{,} as a separator. 
   Most methods should honor the width argument. 
   The minimum value for \code{width} is six. 
 }
Index: src/library/base/man/unlink.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/unlink.Rd,v
retrieving revision 1.10
diff -u -r1.10 unlink.Rd
--- src/library/base/man/unlink.Rd	2003/05/13 14:14:31	1.10
+++ src/library/base/man/unlink.Rd	2003/12/12 15:44:55
@@ -7,13 +7,13 @@
     directories to be deleted.
     Wildcards (normally \file{*} and \file{?}) are allowed.}
   \item{recursive}{logical. Should directories be deleted
-    recusively?}
+    recursively?}
 }
 \description{
   \code{unlink} deletes the file(s) or directories specified by \code{x}.
 }
 \details{
-  If \code{recusive = FALSE} directories are not deleted,
+  If \code{recursive = FALSE} directories are not deleted,
   not even empty ones.
 
   \code{\link{file.remove}} can only remove files, but gives more
Index: src/library/base/man/unlist.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/unlist.Rd,v
retrieving revision 1.10
diff -u -r1.10 unlist.Rd
--- src/library/base/man/unlist.Rd	2003/12/09 09:11:10	1.10
+++ src/library/base/man/unlist.Rd	2003/12/12 15:44:56
@@ -17,7 +17,7 @@
 }
 \details{
   \code{unlist} is generic: you can write methods to handle
-  of specific classes of objects, see \link{InternalMethods}.
+  specific classes of objects, see \link{InternalMethods}.
   
   If \code{recursive = FALSE}, the function will not recurse beyond
   the first level items in \code{x}.
Index: src/library/base/man/writeLines.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/writeLines.Rd,v
retrieving revision 1.6
diff -u -r1.6 writeLines.Rd
--- src/library/base/man/writeLines.Rd	2003/07/15 12:13:52	1.6
+++ src/library/base/man/writeLines.Rd	2003/12/12 15:44:56
@@ -24,7 +24,7 @@
 
   Normally \code{writeLines} is used with a text connection, and the
   default separator is converted to the normal separator for that
-  platform (LF on Unix/Linux, CRLF on Windows, CR on Classic MacOS).  For
+  platform (LF on Unix, CRLF on Windows, CR on Classic MacOS).  For
   more control, open a binary connection and specify the precise value
   you want written to the file in \code{sep}.  For even more control,
   use \code{\link{writeChar}} on a binary connection.
Index: src/library/base/man/xtabs.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/xtabs.Rd,v
retrieving revision 1.15
diff -u -r1.15 xtabs.Rd
--- src/library/base/man/xtabs.Rd	2003/12/09 13:52:21	1.15
+++ src/library/base/man/xtabs.Rd	2003/12/12 15:44:56
@@ -69,7 +69,7 @@
 DF
 ## Nice for taking margins ...
 xtabs(Freq ~ Gender + Admit, DF)
-## And for testing independece ...
+## And for testing independence ...
 summary(xtabs(Freq ~ ., DF))
 
 data(warpbreaks)
Index: src/library/base/man/zMachine.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/zMachine.Rd,v
retrieving revision 1.15
diff -u -r1.15 zMachine.Rd
--- src/library/base/man/zMachine.Rd	2003/07/08 00:20:19	1.15
+++ src/library/base/man/zMachine.Rd	2003/12/12 15:44:56
@@ -68,7 +68,7 @@
     type. Will be zero if there is no such type.}
   \item{sizeof.longdouble}{the number of bytes in a C \code{long double}
     type. Will be zero if there is no such type.}
-  \item{sizeof.pointer}{the number of bytes in a C \code{SEXP}
+  \item{sizeof.pointer}{the number of bytes in a C \code{SEXP} (s-expression)
     type.}
 }
 \details{
Index: src/library/base/man/aqua/help.search.Rd
===================================================================
RCS file: /cvs/R/src/library/base/man/aqua/help.search.Rd,v
retrieving revision 1.1
diff -u -r1.1 help.search.Rd
--- src/library/base/man/aqua/help.search.Rd	2003/09/22 10:56:07	1.1
+++ src/library/base/man/aqua/help.search.Rd	2003/12/12 15:44:56
@@ -22,7 +22,7 @@
     fields.  If this is given, the arguments \code{apropos},
     \code{keyword}, and \code{whatis} are ignored.}
   \item{fields}{a character vector specifying the fields of the help
-    data bases to be searched.  The entries must be abbreviations of
+    databases to be searched.  The entries must be abbreviations of
     \code{"name"}, \code{"title"}, \code{"alias"}, \code{"concept"}, and
     \code{"keyword"}, corresponding to the help page's (file) name, its
     title, the topics and concepts it provides documentation for, and
@@ -43,9 +43,9 @@
     library trees to search through, or \code{NULL}.  The default value
     of \code{NULL} corresponds to all libraries currently known.}
   \item{help.db}{a character string giving the file path to a previously
-    built and saved help data base, or \code{NULL}.}
+    built and saved help database, or \code{NULL}.}
   \item{verbose}{logical; if \code{TRUE}, the search process is traced.}
-  \item{rebuild}{a logical indicating whether the help data base should
+  \item{rebuild}{a logical indicating whether the help database should
     be rebuilt.}
   \item{agrep}{if \code{NULL} (the default) and the character string to
     be matched consists of alphanumeric characters, whitespace or a dash
@@ -58,7 +58,7 @@
     \code{max.distance} in the documentation for \code{\link{agrep}}.}
 }
 \details{
-  Upon installation of a package, a contents data base which contains
+  Upon installation of a package, a contents database which contains
   the information on name, title, aliases and keywords and, concepts
   starting with \R 1.8, is computed from the Rd files in the package and
   serialized as \file{Rd.rds} in the \file{Meta} subdirectory of the
@@ -66,13 +66,13 @@
   \file{CONTENTS} in Debian Control Format with aliases and keywords
   collapsed to character strings in the top-level package installation
   directory).  This, or a pre-built help.search index serialized as
-  \file{hsearch.rds} in the \file{Meta} directory, is the data base
+  \file{hsearch.rds} in the \file{Meta} directory, is the database
   searched by \code{help.search()}.
 
   The arguments \code{apropos} and \code{whatis} play a role similar to
   the Unix commands with the same names.
 
-  If possible, the help data base is saved to the file \file{help.db} in
+  If possible, the help database is saved to the file \file{help.db} in
   the \file{.R} subdirectory of the user's home directory or the current
   working directory.
 
Index: src/library/graphics/man/assocplot.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/assocplot.Rd,v
retrieving revision 1.2
diff -u -r1.2 assocplot.Rd
--- src/library/graphics/man/assocplot.Rd	2003/12/09 15:53:43	1.2
+++ src/library/graphics/man/assocplot.Rd	2003/12/12 15:44:56
@@ -15,7 +15,7 @@
   \item{col}{a character vector of length two giving the colors used for
     drawing positive and negative Pearson residuals, respectively.}
   \item{space}{the amount of space (as a fraction of the average
-    rectangle width and height) left between each rectange.}
+    rectangle width and height) left between each rectangle.}
   \item{main}{overall title for the plot.}
   \item{xlab}{a label for the x axis.  Defaults to the name of the row
     variable in \code{x} if non-\code{NULL}.}
Index: src/library/graphics/man/barplot.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/barplot.Rd,v
retrieving revision 1.1
diff -u -r1.1 barplot.Rd
--- src/library/graphics/man/barplot.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/barplot.Rd	2003/12/12 15:44:57
@@ -52,7 +52,7 @@
   \item{horiz}{a logical value.  If \code{FALSE}, the bars are drawn
     vertically with the first bar to the left.  If \code{TRUE}, the
     bars are drawn horizontally with the first at the bottom.}
-  \item{density}{a vector giving the the density of shading lines, in
+  \item{density}{a vector giving the density of shading lines, in
     lines per inch, for the bars or bar components.
     The default value of \code{NULL} means that no shading lines
     are drawn. Non-positive values of \code{density} also inhibit the
@@ -81,7 +81,7 @@
 % precisely documented!) behavior!
   \item{plot}{logical.  If \code{FALSE}, nothing is plotted.}
   \item{axis.lty}{the graphics parameter \code{lty} applied to the axis
-    and tick marks of the categorical (default horzontal) axis.  Note
+    and tick marks of the categorical (default horizontal) axis.  Note
     that by default the axis is suppressed.}
   \item{\dots}{further graphical parameters (\code{\link{par}}) are
     passed to \code{\link{plot.window}()}, \code{\link{title}()} and
Index: src/library/graphics/man/boxplot.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/boxplot.Rd,v
retrieving revision 1.1
diff -u -r1.1 boxplot.Rd
--- src/library/graphics/man/boxplot.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/boxplot.Rd	2003/12/12 15:44:57
@@ -62,7 +62,7 @@
     boxplots.  The values in \code{border} are recycled if the
     length of \code{border} is less than the number of plots.}
   \item{col}{if \code{col} is non-null it is assumed to contain colors
-    to be used to col the bodies of the box plots.}
+    to be used to color the bodies of the box plots.}
   \item{log}{character indicating if x or y or both coordinates should
     be plotted in log scale.}
   \item{pars}{a list of graphical parameters; these are passed to
Index: src/library/graphics/man/boxplot.stats.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/boxplot.stats.Rd,v
retrieving revision 1.2
diff -u -r1.2 boxplot.stats.Rd
--- src/library/graphics/man/boxplot.stats.Rd	2003/12/09 09:11:10	1.2
+++ src/library/graphics/man/boxplot.stats.Rd	2003/12/12 15:44:57
@@ -27,7 +27,7 @@
   \item{stats}{a vector of length 5, containing the extreme of the
     lower whisker, the lower \dQuote{hinge}, the median, the upper \dQuote{hinge}
     and the extreme of the upper whisker.}
-  \item{n}{the number of of non-\code{NA} observations in the sample.}
+  \item{n}{the number of non-\code{NA} observations in the sample.}
   \item{conf}{the lower and upper extremes of the \dQuote{notch} (\code{if(do.conf)}).}
   \item{out}{the values of any data points which lie beyond the
     extremes of the whiskers (\code{if(do.out)}).}
Index: src/library/graphics/man/dev2bitmap.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/dev2bitmap.Rd,v
retrieving revision 1.1
diff -u -r1.1 dev2bitmap.Rd
--- src/library/graphics/man/dev2bitmap.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/dev2bitmap.Rd	2003/12/12 15:44:57
@@ -52,7 +52,7 @@
   \code{type = "pdfwrite"}, and the PDF produced is not bitmapped.
 
   For formats which contain a single image, a file specification like
-  \code{Rplots\%03d.png} can be used: this is intepreted by GhostScript.
+  \code{Rplots\%03d.png} can be used: this is interpreted by GhostScript.
 
   For \code{dev2bitmap} if just one of \code{width} and \code{height} is
   specified, the other is chosen to preserve aspect ratio of the
Index: src/library/graphics/man/filled.contour.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/filled.contour.Rd,v
retrieving revision 1.1
diff -u -r1.1 filled.contour.Rd
--- src/library/graphics/man/filled.contour.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/filled.contour.Rd	2003/12/12 15:44:58
@@ -38,7 +38,7 @@
     colors in the plot.}
  \item{col}{an explicit set of colors to be used in the plot.
     This argument overrides any palette function specification.}
- \item{plot.title}{statements which add titles the main plot.}
+ \item{plot.title}{statements which add titles to the main plot.}
  \item{plot.axes}{statements which draw axes (and a \code{\link{box}})
    on the main plot.  This overrides the default axes.}
  \item{key.title}{statements which add titles for the plot key.}
Index: src/library/graphics/man/hsv.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/hsv.Rd,v
retrieving revision 1.1
diff -u -r1.1 hsv.Rd
--- src/library/graphics/man/hsv.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/hsv.Rd	2003/12/12 15:44:58
@@ -13,7 +13,7 @@
     \dQuote{hue}, \dQuote{saturation} and \dQuote{value} to be combined
     to form a vector of colors.  Values in shorter arguments are
     recycled.}
-  \item{gamma}{a \dQuote{gamma correction}}
+  \item{gamma}{a \dQuote{gamma correction}, \eqn{\gamma}}
 }
 \value{
   This function creates a vector of \dQuote{colors} corresponding to the
@@ -23,7 +23,7 @@
 }
 \section{Gamma correction}{
   For each color, \eqn{(r,g,b)} in RGB space (with all values in \eqn{[0,1]}),
-  the final color corresponds to \eqn{(r^gamma, g^gamma, b^gamma)}.
+  the final color corresponds to \eqn{(r^{\gamma}, g^{\gamma}, b^{\gamma})}.
 }
 \seealso{
   \code{\link{rainbow}},
Index: src/library/graphics/man/layout.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/layout.Rd,v
retrieving revision 1.1
diff -u -r1.1 layout.Rd
--- src/library/graphics/man/layout.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/layout.Rd	2003/12/12 15:44:58
@@ -35,7 +35,7 @@
     latter, then it must have the same dimensions as \code{mat} and
     each value in the matrix must be either \code{0} or \code{1}.}
   \item{n}{number of figures to plot.}
-  \item{x}{a dimension to be intepreted as a number of centimetres.}
+  \item{x}{a dimension to be interpreted as a number of centimetres.}
 }
 \details{
     Figure \eqn{i} is allocated a region composed from a subset
Index: src/library/graphics/man/lines.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/lines.Rd,v
retrieving revision 1.1
diff -u -r1.1 lines.Rd
--- src/library/graphics/man/lines.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/lines.Rd	2003/12/12 15:44:58
@@ -29,7 +29,7 @@
   etc. See \code{\link{xy.coords}}.
 
   The coordinates can contain \code{NA} values. If a point contains
-  \code{NA} it either its \code{x} or \code{y} value, it is omitted from
+  \code{NA} in either its \code{x} or \code{y} value, it is omitted from
   the plot, and lines are not drawn to or from such points.  Thus
   missing values can be used to achieve breaks in lines.
 }
Index: src/library/graphics/man/mtext.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/mtext.Rd,v
retrieving revision 1.1
diff -u -r1.1 mtext.Rd
--- src/library/graphics/man/mtext.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/mtext.Rd	2003/12/12 15:44:58
@@ -15,7 +15,7 @@
   }
   \item{adj}{adjustment for each string. For strings parallel
     to the axes, \code{adj=0} means left or bottom alignment, and
-    \code{adj=1} means right or top aligment.
+    \code{adj=1} means right or top alignment.
     If \code{adj} is not a finite value (the default), the value
     \code{par("las")} determines the adjustment. For strings plotted
     parallel to the axis the default is to centre the string.}
@@ -46,7 +46,7 @@
   the device region rather than the plot region.
 
   Parameter \code{las} will determine the orientation of the string(s).
-  For strings plotted perpendicular to the axis the default justifcation
+  For strings plotted perpendicular to the axis the default justification
   is to place the end of the string nearest the axis on the specified line.
 
   Note that if the text is to be plotted perpendicular to the axis,
Index: src/library/graphics/man/pdf.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/pdf.Rd,v
retrieving revision 1.1
diff -u -r1.1 pdf.Rd
--- src/library/graphics/man/pdf.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/pdf.Rd	2003/12/12 15:44:58
@@ -62,7 +62,7 @@
 \note{
   Acrobat Reader does not use the fonts specified but rather emulates
   them from multiple-master fonts.  This can be seen in imprecise
-  centring of characters, for example the multiply and divide signs in
+  centering of characters, for example the multiply and divide signs in
   Helvetica.
 }
 \seealso{
Index: src/library/graphics/man/polygon.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/polygon.Rd,v
retrieving revision 1.1
diff -u -r1.1 polygon.Rd
--- src/library/graphics/man/polygon.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/polygon.Rd	2003/12/12 15:44:58
@@ -29,7 +29,7 @@
   \item{border}{the color to draw the border.  The default, \code{NULL},
     uses \code{\link{par}("fg")}.  Use \code{border = NA} to omit borders.
     
-    For compatibility with S, \code{border} can also be logical, it
+    For compatibility with S, \code{border} can also be logical, in
     which case \code{FALSE} is equivalent to \code{NA} (borders omitted)
     and \code{TRUE} is equivalent to \code{NULL} (use the foreground colour),
   }
@@ -60,7 +60,7 @@
 }
 \section{Bugs}{
   The present shading algorithm can produce incorrect results for
-  self-intesecting polygons.
+  self-intersecting polygons.
 }
 \author{The code implementing polygon shading was donated by
   Kevin Buhr \email{buhr@stat.wisc.edu}.}
Index: src/library/graphics/man/postscript.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/postscript.Rd,v
retrieving revision 1.3
diff -u -r1.3 postscript.Rd
--- src/library/graphics/man/postscript.Rd	2003/12/12 06:40:52	1.3
+++ src/library/graphics/man/postscript.Rd	2003/12/12 15:44:59
@@ -156,7 +156,7 @@
   \code{"NimbusSan"}, \code{"NimbusSanCond"}, \code{"CenturySch"},
   \code{"URWPalladio"} and \code{"NimbusRom"} respectively.  If your
   PostScript device is using URW fonts, you will obtain access to more
-  characters and more approriate metrics by using these names.  To make
+  characters and more appropriate metrics by using these names.  To make
   these easier to remember, \code{"URWHelvetica" == "NimbusSan"} and
   \code{"URWTimes" == "NimbusRom"} are also supported.
 
Index: src/library/graphics/man/stars.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/stars.Rd,v
retrieving revision 1.1
diff -u -r1.1 stars.Rd
--- src/library/graphics/man/stars.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/stars.Rd	2003/12/12 15:44:59
@@ -75,7 +75,7 @@
   \item{lty}{line type used for drawing.}
   \item{xpd}{logical or NA indicating if clipping should be done, see
     \code{\link{par}(xpd = .)}.}
-  \item{mar}{argument to \code{\link{par}(mar = *)}, typically chosing
+  \item{mar}{argument to \code{\link{par}(mar = *)}, typically choosing
     smaller margings than by default.}
   \item{\dots}{further arguments, passed to the first call of
     \code{plot()}, see \code{\link{plot.default}} and to
Index: src/library/graphics/man/sunflowerplot.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/sunflowerplot.Rd,v
retrieving revision 1.2
diff -u -r1.2 sunflowerplot.Rd
--- src/library/graphics/man/sunflowerplot.Rd	2003/12/09 09:11:10	1.2
+++ src/library/graphics/man/sunflowerplot.Rd	2003/12/12 15:44:59
@@ -25,7 +25,7 @@
     \code{\link{plot.default}}.}
   \item{digits}{when \code{number} is computed (i.e., not specified),
     \code{x} and \code{y} are rounded to \code{digits} significant
-    digits before multiplicities are computes.}
+    digits before multiplicities are computed.}
   \item{xlab,ylab}{character label for x-, or y-axis, respectively.}
   \item{xlim,ylim}{\code{numeric(2)} limiting the extents of the x-,
     or y-axis.}
Index: src/library/graphics/man/xy.coords.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/xy.coords.Rd,v
retrieving revision 1.2
diff -u -r1.2 xy.coords.Rd
--- src/library/graphics/man/xy.coords.Rd	2003/12/09 09:11:10	1.2
+++ src/library/graphics/man/xy.coords.Rd	2003/12/12 15:44:59
@@ -30,7 +30,7 @@
       \code{yvar} are used as x and y variables.}
 
     \item{list:}{containing components \code{x} and \code{y}, these are
-      used are assumed to define plotting coordinates.}
+      used to define plotting coordinates.}
 
     \item{time series:}{the x values are taken to be
       \code{\link[stats]{time}(x)} and the y values to be the time series.}
Index: src/library/graphics/man/xyz.coords.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/xyz.coords.Rd,v
retrieving revision 1.1
diff -u -r1.1 xyz.coords.Rd
--- src/library/graphics/man/xyz.coords.Rd	2003/12/09 07:24:22	1.1
+++ src/library/graphics/man/xyz.coords.Rd	2003/12/12 15:44:59
@@ -11,7 +11,7 @@
 }
 \arguments{
   \item{x, y, z}{the x, y and z coordinates of a set of points.
-    Alternatively, a single argument \code{x} can be be provided.
+    Alternatively, a single argument \code{x} can be provided.
     In this case, an attempt is made to interpret the
     argument in a way suitable for plotting.
 
@@ -23,7 +23,7 @@
     if the argument is a matrix with three columns, the first is
     assumed to contain the x values, etc.
 
-    Alternatively, two arguments \code{x} and \code{y} can be be provided.
+    Alternatively, two arguments \code{x} and \code{y} can be provided.
     One may be real, the other complex;
     in any other case, the arguments are coerced to vectors
     and the values plotted against their indices.
Index: src/library/graphics/man/unix/png.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/unix/png.Rd,v
retrieving revision 1.1
diff -u -r1.1 png.Rd
--- src/library/graphics/man/unix/png.Rd	2003/12/09 08:07:05	1.1
+++ src/library/graphics/man/unix/png.Rd	2003/12/12 15:45:00
@@ -60,7 +60,7 @@
 }
 \section{Warning}{
   If you plot more than one page on one of these devices and do not
-  include somthing like \code{\%d} for the sequence number in
+  include something like \code{\%d} for the sequence number in
   \code{file}, the file will contain the last page plotted.
 }
 \note{
Index: src/library/graphics/man/windows/png.Rd
===================================================================
RCS file: /cvs/R/src/library/graphics/man/windows/png.Rd,v
retrieving revision 1.1
diff -u -r1.1 png.Rd
--- src/library/graphics/man/windows/png.Rd	2003/12/09 08:07:05	1.1
+++ src/library/graphics/man/windows/png.Rd	2003/12/12 15:45:00
@@ -21,7 +21,7 @@
     characters long.)}
  \item{width}{the width of the device in pixels.}
  \item{height}{the height of the device in pixels.}
- \item{pointsize}{the default pointsize of plotted text, intepreted at
+ \item{pointsize}{the default pointsize of plotted text, interpreted at
    72 dpi, so one point is approximately one pixel.}
  \item{bg}{the initial background colour: can be overridden by setting
    par("bg").}
@@ -52,7 +52,7 @@
 }
 \section{Warning}{
   If you plot more than one page on one of these devices and do not
-  include somthing like \code{\%d} for the sequence number in
+  include something like \code{\%d} for the sequence number in
   \code{file}, the file will contain the last page plotted.
 }
 \note{
Index: src/library/methods/man/new.Rd
===================================================================
RCS file: /cvs/R/src/library/methods/man/new.Rd,v
retrieving revision 1.10
diff -u -r1.10 new.Rd
--- src/library/methods/man/new.Rd	2003/09/01 09:38:21	1.10
+++ src/library/methods/man/new.Rd	2003/12/12 15:45:00
@@ -3,7 +3,7 @@
 \alias{initialize}
 \title{ Generate an Object from a Class }
 \description{
-  Given the the name or the definition of a class, plus optionally data
+  Given the name or the definition of a class, plus optionally data
   to be included in the object, \code{new} returns an object from that
   class.
 }
Index: src/library/stats/man/anova.glm.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/anova.glm.Rd,v
retrieving revision 1.1
diff -u -r1.1 anova.glm.Rd
--- src/library/stats/man/anova.glm.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/anova.glm.Rd	2003/12/12 15:45:01
@@ -28,7 +28,7 @@
   If more than one object is specified, the table has a row for the
   residual degrees of freedom and deviance for each model.
   For all but the first model, the change in degrees of freedom and
-  deviance is also given. (This only make statistical sense if the
+  deviance is also given. (This only makes statistical sense if the
   models are nested.)  It is conventional to list the models from
   smallest to largest, but this is up to the user.
 
Index: src/library/stats/man/density.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/density.Rd,v
retrieving revision 1.1
diff -u -r1.1 density.Rd
--- src/library/stats/man/density.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/density.Rd	2003/12/12 15:45:01
@@ -99,7 +99,7 @@
   \item{N}{the sample size after elimination of missing values.}
   \item{call}{the call which produced the result.}
   \item{data.name}{the deparsed name of the \code{x} argument.}
-  \item{has.na}{logical, for compatibility (always FALSE).}
+  \item{has.na}{logical, for compatibility (always \code{FALSE}).}
 }
 \references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
Index: src/library/stats/man/df.residual.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/df.residual.Rd,v
retrieving revision 1.2
diff -u -r1.2 df.residual.Rd
--- src/library/stats/man/df.residual.Rd	2003/12/11 17:27:18	1.2
+++ src/library/stats/man/df.residual.Rd	2003/12/12 15:45:01
@@ -16,7 +16,7 @@
 \details{
   This is a generic function which can be used to extract residual
   degrees-of-freedom for fitted models.  Consult the individual modeling
-  functions for details details on how to use this function.
+  functions for details on how to use this function.
 
   The default method just extracts the \code{df.residual} component.
 }
Index: src/library/stats/man/eff.aovlist.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/eff.aovlist.Rd,v
retrieving revision 1.1
diff -u -r1.1 eff.aovlist.Rd
--- src/library/stats/man/eff.aovlist.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/eff.aovlist.Rd	2003/12/12 15:45:01
@@ -6,7 +6,7 @@
 \alias{eff.aovlist}
 \arguments{
   \item{aovlist}{
-    The result of a call to \code{aov} with a \code{Error} term.
+    The result of a call to \code{aov} with an \code{Error} term.
   }
 }
 \description{
Index: src/library/stats/man/fivenum.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/fivenum.Rd,v
retrieving revision 1.1
diff -u -r1.1 fivenum.Rd
--- src/library/stats/man/fivenum.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/fivenum.Rd	2003/12/12 15:45:01
@@ -10,7 +10,7 @@
 }
 \arguments{
   \item{x}{numeric, maybe including \code{\link{NA}}s and
-    +/-\code{\link{Inf}}s.}
+    \eqn{\pm}{+/-}\code{\link{Inf}}s.}
   \item{na.rm}{logical; if \code{TRUE}, all \code{\link{NA}} and
     \code{\link{NaN}}s are dropped, before the statistics are computed.}
 }
Index: src/library/stats/man/loglin.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/loglin.Rd,v
retrieving revision 1.1
diff -u -r1.1 loglin.Rd
--- src/library/stats/man/loglin.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/loglin.Rd	2003/12/12 15:45:02
@@ -14,7 +14,7 @@
     \code{table}.}
   \item{margin}{a list of vectors with the marginal totals to be fit.
 
-    (Hierarchical) log-linear models can be specified in term of these
+    (Hierarchical) log-linear models can be specified in terms of these
     marginal totals which give the \dQuote{maximal} factor subsets contained
     in the model.  For example, in a three-factor model,
     \code{list(c(1, 2), c(1, 3))} specifies a model which contains
Index: src/library/stats/man/mad.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/mad.Rd,v
retrieving revision 1.1
diff -u -r1.1 mad.Rd
--- src/library/stats/man/mad.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/mad.Rd	2003/12/12 15:45:02
@@ -7,7 +7,7 @@
 \alias{mad}
 \arguments{
   \item{x}{a numeric vector.}
-  \item{center}{Optionally, the centre: defauls to the median.}
+  \item{center}{Optionally, the centre: defaults to the median.}
   \item{constant}{scale factor.}
   \item{na.rm}{if \code{TRUE} then \code{NA} values are stripped
     from \code{x} before computation takes place.}
Index: src/library/stats/man/model.frame.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/model.frame.Rd,v
retrieving revision 1.2
diff -u -r1.2 model.frame.Rd
--- src/library/stats/man/model.frame.Rd	2003/12/09 16:41:55	1.2
+++ src/library/stats/man/model.frame.Rd	2003/12/12 15:45:02
@@ -27,8 +27,8 @@
 
   \item{subset}{a specification of the rows to be used: defaults to all
     rows. This can be any valid indexing vector (see
-    \code{\link{[.data.frame}} for the rows of \code{data} or if that is not
-    supplied, a data frame made up of the variables used in \code{formula}.}
+    \code{\link{data.frame}} for the rows of \code{data} or if that is not
+    supplied, a data frame made up of the variables used in \code{formula}).}
 
   \item{na.action}{how \code{NA}s are treated. The default is first,
     any \code{na.action} attribute of \code{data}, second
@@ -74,7 +74,7 @@
   are looked for first in \code{data} and then in the environment of
   \code{formula} (see the help for \code{\link{formula}()} for further
   details) and collected into a data frame. Then the \code{subset}
-  expression is evaluated, and it is is used as a row index to the data
+  expression is evaluated, and it is used as a row index to the data
   frame. Then the \code{na.action} function is applied to the data frame
   (and may well add attributes).  The levels of any factors in the data
   frame are adjusted according to the \code{drop.unused.levels} and
Index: src/library/stats/man/nafns.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/nafns.Rd,v
retrieving revision 1.1
diff -u -r1.1 nafns.Rd
--- src/library/stats/man/nafns.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/nafns.Rd	2003/12/12 15:45:02
@@ -30,11 +30,11 @@
   These are utility functions used to allow \code{\link{predict}} and
   \code{\link{resid}} methods for modelling functions to compensate for
   the removal of \code{NA}s in the fitting process.  They are used by
-  the default, \code{"lm"} and \code{"glm"} methods, and by further
+  the default \code{"lm"} and \code{"glm"} methods, and by further
   methods in packages \pkg{MASS}, \pkg{rpart} and \pkg{survival}.
 
-  The default methods do nothing.  The method for the \code{na.exclude}
-  action to pad the object with \code{NA}s in the correct positions to
+  The default methods do nothing.  The default method for the \code{na.exclude}
+  action is to pad the object with \code{NA}s in the correct positions to
   have the same number of rows as the original data frame.
 
   Currently \code{naresid} and \code{napredict} are identical, but
Index: src/library/stats/man/nlm.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/nlm.Rd,v
retrieving revision 1.2
diff -u -r1.2 nlm.Rd
--- src/library/stats/man/nlm.Rd	2003/12/11 07:16:06	1.2
+++ src/library/stats/man/nlm.Rd	2003/12/12 15:45:02
@@ -17,9 +17,9 @@
     \code{hessian} attributes, these will be used in the calculation of
     updated parameter values.  Otherwise, numerical derivatives are
     used. \code{\link{deriv}} returns a function with suitable
-    \code{gradient} attribute.  This should be a function a vector of
-    the length of \code{p} followed by any other arguments specified
-    in \code{dots}.}
+    \code{gradient} attribute.  This should be a function of a vector of
+    the length of \code{p} followed by any additional parameters specified
+    by the \code{\dots} argument.}
   \item{p}{starting parameter values for the minimization.}
   \item{hessian}{if \code{TRUE}, the hessian of \code{f}
     at the minimum is returned.}
@@ -67,7 +67,7 @@
 \value{
   A list containing the following components:
   \item{minimum}{the value of the estimated minimum of \code{f}.}
-  \item{estimate}{the point at which the mininum value of
+  \item{estimate}{the point at which the minimum value of
     \code{f} is obtained.}
   \item{gradient}{the gradient at the estimated minimum of \code{f}.}
   \item{hessian}{the hessian at the estimated minimum of \code{f} (if
Index: src/library/stats/man/optimize.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/optimize.Rd,v
retrieving revision 1.1
diff -u -r1.1 optimize.Rd
--- src/library/stats/man/optimize.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/optimize.Rd	2003/12/12 15:45:02
@@ -45,7 +45,7 @@
   and \eqn{x_0} is the final abscissa \code{optimize()$minimum}.\cr
   If \code{f} is a unimodal function and the computed values of \code{f}
   are always unimodal when separated by at least \eqn{\epsilon}{eps *}
-  \eqn{ |x| + (tol/3)}, then \eqn{x_0} approximates the abcissa of the
+  \eqn{ |x| + (tol/3)}, then \eqn{x_0} approximates the abscissa of the
   global minimum of \code{f} on the interval \code{lower,upper} with an
   error less than \eqn{\epsilon}{eps *}\eqn{ |x_0|+ tol}.\cr
   If \code{f} is not unimodal, then \code{optimize()} may approximate a
Index: src/library/stats/man/plot.lm.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/plot.lm.Rd,v
retrieving revision 1.1
diff -u -r1.1 plot.lm.Rd
--- src/library/stats/man/plot.lm.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/plot.lm.Rd	2003/12/12 15:45:03
@@ -91,7 +91,7 @@
 plot(lm.SR, id.n = NULL)               # no id's
 plot(lm.SR, id.n = 5, labels.id = NULL)# 5 id numbers
 
-## Fit a smmooth curve, where applicable:
+## Fit a smooth curve, where applicable:
 plot(lm.SR, panel = panel.smooth)
 ## Gives a smoother curve
 plot(lm.SR, panel = function(x,y) panel.smooth(x, y, span = 1))
Index: src/library/stats/man/poly.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/poly.Rd,v
retrieving revision 1.1
diff -u -r1.1 poly.Rd
--- src/library/stats/man/poly.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/poly.Rd	2003/12/12 15:45:03
@@ -31,7 +31,7 @@
   A matrix with rows corresponding to points in \code{x} and columns
   corresponding to the degree, with attributes \code{"degree"} specifying
   the degrees of the columns and \code{"coefs"} which contains the
-  centring and normalization constants used in constructing the
+  centering and normalization constants used in constructing the
   orthogonal polynomials.  The matrix is given class
   \code{c("poly", "matrix")} as from \R 1.5.0.
 
@@ -45,7 +45,7 @@
   
   The orthogonal polynomial is summarized by the coefficients, which can
   be used to evaluate it via the three-term recursion given in Kennedy
-  \& Gentle (1980, pp. 343-4), and use in the \dQuote{predict} part of
+  \& Gentle (1980, pp. 343-4), and used in the \dQuote{predict} part of
   the code.
 }
 \note{
Index: src/library/stats/man/printCoefmat.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/printCoefmat.Rd,v
retrieving revision 1.1
diff -u -r1.1 printCoefmat.Rd
--- src/library/stats/man/printCoefmat.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/printCoefmat.Rd	2003/12/12 15:45:03
@@ -43,7 +43,7 @@
     \code{TRUE} \emph{and} \code{x} has at least 4 columns \emph{and}
     the last column name of \code{x} starts with \code{"Pr("}.}
   \item{has.Pvalue}{logical; if \code{TRUE}, the last column of \code{x}
-    contains P values; in that case, it is printed \emph{iff}
+    contains P values; in that case, it is printed if and only if
     \code{P.values} (above) is true.}
   \item{eps.Pvalue}{number,..}
   \item{na.print}{a character string to code \code{\link{NA}} values in
Index: src/library/stats/man/quantile.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/quantile.Rd,v
retrieving revision 1.1
diff -u -r1.1 quantile.Rd
--- src/library/stats/man/quantile.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/quantile.Rd	2003/12/12 15:45:03
@@ -28,7 +28,7 @@
   if \code{names = TRUE}, it has a \code{\link{names}} attribute.
 
   \code{quantile(x,p)} as a function of \code{p} linearly interpolates
-  the points ( (i-1)/(n-1), ox[i] ), where
+  the points \eqn{( (i-1)/(n-1), ox[i] )}, where
   \code{ox <- sort(x)} and \code{n <- length(x)}.
 
   This gives \code{quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]}, where
Index: src/library/stats/man/read.ftable.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/read.ftable.Rd,v
retrieving revision 1.1
diff -u -r1.1 read.ftable.Rd
--- src/library/stats/man/read.ftable.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/read.ftable.Rd	2003/12/12 15:45:03
@@ -60,7 +60,7 @@
   function \code{as.table}.
 }
 \seealso{
-  \code{\link{ftable}} for more information on flat contingencty tables.
+  \code{\link{ftable}} for more information on flat contingency tables.
 }
 \references{
   Agresti, A.  (1990)
Index: src/library/stats/man/summary.glm.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/summary.glm.Rd,v
retrieving revision 1.1
diff -u -r1.1 summary.glm.Rd
--- src/library/stats/man/summary.glm.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/summary.glm.Rd	2003/12/12 15:45:03
@@ -61,7 +61,7 @@
     z-values and p-values.  Aliased coefficients are omitted.}
   \item{aliased}{named logical vector showing if the original
     coefficients are aliased.} 
-  \item{dispersion}{eother the supplied argument or the estimated
+  \item{dispersion}{either the supplied argument or the estimated
     dispersion if the latter in \code{NULL}}
   \item{df}{a 3-vector of the rank of the model and the number of
     residual degrees of freedom, plus number of non-aliased coefficients.}
Index: src/library/stats/man/symnum.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/symnum.Rd,v
retrieving revision 1.1
diff -u -r1.1 symnum.Rd
--- src/library/stats/man/symnum.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/symnum.Rd	2003/12/12 15:45:03
@@ -39,9 +39,9 @@
   \item{show.max}{if \code{TRUE}, or of mode \code{character}, the
     maximal cutpoint is coded especially.}
   \item{show.min}{if \code{TRUE}, or of mode \code{character}, the
-    minmal cutpoint is coded especially.}
+    minimal cutpoint is coded especially.}
   \item{abbr.colnames}{logical, integer or \code{NULL} indicating how
-    column names should be abbreviated (if there are); if \code{NULL}
+    column names should be abbreviated (if they are); if \code{NULL}
     (or \code{FALSE} and \code{x} has no column names),
     the column names will all be empty, i.e., \code{""}; otherwise if
     \code{abbr.colnames} is false, they are left unchanged.  If
Index: src/library/stats/man/termplot.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/termplot.Rd,v
retrieving revision 1.1
diff -u -r1.1 termplot.Rd
--- src/library/stats/man/termplot.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/termplot.Rd	2003/12/12 15:45:03
@@ -45,7 +45,7 @@
 }
 \details{
   The model object must have a \code{predict} method that accepts
-  \code{type=terms}, eg \code{\link{glm}} in the\pkg{base} package,
+  \code{type=terms}, eg \code{\link{glm}} in the \pkg{base} package,
   \code{\link[survival]{coxph}} and \code{\link[survival]{survreg}} in
   the \pkg{survival} package.
 
Index: src/library/stats/man/ts.Rd
===================================================================
RCS file: /cvs/R/src/library/stats/man/ts.Rd,v
retrieving revision 1.1
diff -u -r1.1 ts.Rd
--- src/library/stats/man/ts.Rd	2003/12/09 07:24:24	1.1
+++ src/library/stats/man/ts.Rd	2003/12/12 15:45:04
@@ -52,7 +52,7 @@
   points in time.  In the matrix case, each column of the matrix
   \code{data} is assumed to contain a single (univariate) time series.
   Time series must have an least one observation, and although they need
-  not be no numeric there is very limited support for non-numeric series.
+  not be numeric there is very limited support for non-numeric series.
 
   Class \code{"ts"} has a number of methods.  In particular arithmetic
   will attempt to align time axes, and subsetting to extract subsets of
@@ -75,7 +75,7 @@
   it has one to set the start and end times and frequency.
 
   \code{is.ts} tests if an object is a time series. It is generic: you
-  can write methods to handle of specific classes of objects,
+  can write methods to handle specific classes of objects,
   see \link{InternalMethods}.
 }
 \references{
Index: src/library/utils/man/capture.output.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/capture.output.Rd,v
retrieving revision 1.1
diff -u -r1.1 capture.output.Rd
--- src/library/utils/man/capture.output.Rd	2003/12/09 07:24:25	1.1
+++ src/library/utils/man/capture.output.Rd	2003/12/12 15:45:04
@@ -12,7 +12,7 @@
 \arguments{
   \item{\dots}{Expressions to be evaluated}
   \item{file}{A file name or a connection, or \code{NULL} to return
-    the output as a string. If the connnection is not open it will be
+    the output as a string. If the connection is not open it will be
     opened and then closed on exit.}
   \item{append}{Append or overwrite the file? }
 }
Index: src/library/utils/man/dataentry.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/dataentry.Rd,v
retrieving revision 1.1
diff -u -r1.1 dataentry.Rd
--- src/library/utils/man/dataentry.Rd	2003/12/09 07:24:25	1.1
+++ src/library/utils/man/dataentry.Rd	2003/12/12 15:45:04
@@ -73,7 +73,7 @@
   right or down will scroll the grid as needed: there is no constraint
   to the rows or columns currently in use.
 
-  The are alternative ways to navigate using the keys.  Return and
+  There are alternative ways to navigate using the keys.  Return and
   (keypad) Enter and LineFeed all move down. Tab moves right and
   Shift-Tab move left.  Home moves to the top left.
 
Index: src/library/utils/man/help.search.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/help.search.Rd,v
retrieving revision 1.1
diff -u -r1.1 help.search.Rd
--- src/library/utils/man/help.search.Rd	2003/12/09 07:24:25	1.1
+++ src/library/utils/man/help.search.Rd	2003/12/12 15:45:05
@@ -22,7 +22,7 @@
     fields.  If this is given, the arguments \code{apropos},
     \code{keyword}, and \code{whatis} are ignored.}
   \item{fields}{a character vector specifying the fields of the help
-    data bases to be searched.  The entries must be abbreviations of
+    databases to be searched.  The entries must be abbreviations of
     \code{"name"}, \code{"title"}, \code{"alias"}, \code{"concept"}, and
     \code{"keyword"}, corresponding to the help page's (file) name, its
     title, the topics and concepts it provides documentation for, and
@@ -46,9 +46,9 @@
     library trees to search through, or \code{NULL}.  The default value
     of \code{NULL} corresponds to all libraries currently known.}
   \item{help.db}{a character string giving the file path to a previously
-    built and saved help data base, or \code{NULL}.}
+    built and saved help database, or \code{NULL}.}
   \item{verbose}{logical; if \code{TRUE}, the search process is traced.}
-  \item{rebuild}{a logical indicating whether the help data base should
+  \item{rebuild}{a logical indicating whether the help database should
     be rebuilt.}
   \item{agrep}{if \code{NULL} (the default unless \code{keyword} is
     used) and the character string to
@@ -62,7 +62,7 @@
     \code{max.distance} in the documentation for \code{\link{agrep}}.}
 }
 \details{
-  Upon installation of a package, a contents data base which contains
+  Upon installation of a package, a contents database which contains
   the information on name, title, aliases and keywords and, concepts
   starting with \R 1.8.0, is computed from the Rd files in the package and
   serialized as \file{Rd.rds} in the \file{Meta} subdirectory of the
@@ -70,13 +70,13 @@
   \file{CONTENTS} in Debian Control Format with aliases and keywords
   collapsed to character strings in the top-level package installation
   directory).  This, or a pre-built help.search index serialized as
-  \file{hsearch.rds} in the \file{Meta} directory, is the data base
+  \file{hsearch.rds} in the \file{Meta} directory, is the database
   searched by \code{help.search()}.
 
   The arguments \code{apropos} and \code{whatis} play a role similar to
   the Unix commands with the same names.
 
-  If possible, the help data base is saved to the file \file{help.db} in
+  If possible, the help database is saved to the file \file{help.db} in
   the \file{.R} subdirectory of the user's home directory or the current
   working directory.
 
Index: src/library/utils/man/remove.packages.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/remove.packages.Rd,v
retrieving revision 1.1
diff -u -r1.1 remove.packages.Rd
--- src/library/utils/man/remove.packages.Rd	2003/12/09 07:24:25	1.1
+++ src/library/utils/man/remove.packages.Rd	2003/12/12 15:45:05
@@ -12,7 +12,7 @@
     removed.}
   \item{lib}{a character string giving the library directory to move the
     packages from.}
-  \item{version}{A character string specifying a specific version of the
+  \item{version}{A character string specifying a version of the
     package to remove.  If none is provided, the system will remove an
     unversioned install of the package.}
 }
Index: src/library/utils/man/update.packages.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/update.packages.Rd,v
retrieving revision 1.1
diff -u -r1.1 update.packages.Rd
--- src/library/utils/man/update.packages.Rd	2003/12/09 07:24:25	1.1
+++ src/library/utils/man/update.packages.Rd	2003/12/12 15:45:05
@@ -57,7 +57,7 @@
     install the packages.}
   \item{ask}{logical indicating to ask before packages are actually downloaded
     and installed.}
-  \item{installWithVers}{If \code{TRUE}, will invoke the install the
+  \item{installWithVers}{If \code{TRUE}, will install the
     package such that it can be referenced by package version}
 }
 \details{
Index: src/library/utils/man/unix/make.packages.html.Rd
===================================================================
RCS file: /cvs/R/src/library/utils/man/unix/make.packages.html.Rd,v
retrieving revision 1.1
diff -u -r1.1 make.packages.html.Rd
--- src/library/utils/man/unix/make.packages.html.Rd	2003/12/09 08:07:06	1.1
+++ src/library/utils/man/unix/make.packages.html.Rd	2003/12/12 15:45:05
@@ -13,7 +13,7 @@
 }
 \details{
   This sets up the links from packages in libraries to the \file{.R}
-  subdirectory of the per-sesson directory (see \code{\link{tempdir}})
+  subdirectory of the per-session directory (see \code{\link{tempdir}})
   and then creates the \file{packages.html} and \file{index.txt} files
   to point to those links.

From hb at maths.lth.se  Fri Dec 12 17:12:30 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Dec 12 17:11:14 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <3FD9DCA9.5020105@bankofcanada.ca>
Message-ID: <000c01c3c0ca$beadbdd0$e502eb82@maths.lth.se>

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Paul Gilbert
> Sent: den 12 december 2003 16:20
> To: Prof Brian Ripley
> Cc: Paul Gilbert; R-devel@stat.math.ethz.ch
> Subject: Re: [Rd] Reorganization of packages in the R distribution
> 
> 
> Prof Brian Ripley wrote:
> 
> >On Fri, 12 Dec 2003, Paul Gilbert wrote:
> >
> >  
> >
> >>Prof Brian Ripley wrote:
> >>
> >>    
> >>
> >>>There are a small number of CRAN packages that attempt to modify 
> >>>system functions and so will need updating.  (Known 
> examples are in 
> >>>dse:tframe, gregmisc and mclust and some testing code elsewhere.)
> >>>
> >>>      
> >>>
> >>Brian
> >>
> >>What do you mean by "updating?"  In tframe I modify a few
functions 
> >>like
> >>
> >>     start <- function (x, ...) if (is.Ttframed(x))
start(tframe(x),
> >>...) else UseMethod("start")
> >>
> >>If that can no longer be done then this is a serious fundamental 
> >>change
> >>that breaks all my code. I hope that is not what you mean. I'm
just 
> >>going away for a week, but will follow up when I return.
> >>    
> >>
> >
> >It's always been incorrect code, and it no longer works.  You
should 
> >not be masking system generics, as the namespace 
> registration mechanism 
> >does not work on your version.
> >  
> >
> So what would be the proper mechanism for doing something like this?

> Basically I need to do something that I believe is like multiple 
> inheritance. I need to dispatch on the class of a certain part of an

> object rather than on the object itself.  (BTW, this code has 
> worked for 
> about  ten years and  I believe predates your definition of  
> "corrrect".)
> 
> Paul

Hi, not knowing yours details, but here's an idea that might work.
Under S3/UseMethod() you can "emulate" multiple inheritance by adding
one superclass in front of the other to the class attribute. For
instance, if ClassAA inherits from ClassA and ClassBB inherits from
ClassB and MyClass inherits from ClassAA and ClassBB, then you'll get

 class(x) <- c("MyClass", "ClassAA", "ClassBB", "ClassA", "ClassB")

Of course, it is important to get the order correct, and things can
get messy if you're not careful. So, whatever function makes your
object 'x' "Ttframed", couldn't that function at the same time add the
superclass "TtframedClass" in front of the class vector before
returning the object?! 

However, I see a real problem if you do not control/own the functions
that makes an object "Ttframed".

Best wishes

Henrik Bengtsson
Lund University

From pgilbert at bank-banque-canada.ca  Fri Dec 12 18:33:38 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Dec 12 18:33:20 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <000c01c3c0ca$beadbdd0$e502eb82@maths.lth.se>
References: <000c01c3c0ca$beadbdd0$e502eb82@maths.lth.se>
Message-ID: <3FD9FBF2.5020506@bankofcanada.ca>

Henrik

Thanks for the suggestion. I am not sure that I have sufficient control 
over the functions that make an object Ttframed. I will have to explore 
a bit further to know that, and I am about to get on a plane so it will 
be awhile before I have a chance to do that. My first reaction is to 
agree with the "can get messy" observation.

Paul

Henrik Bengtsson wrote:

>>-----Original Message-----
>>From: r-devel-bounces@stat.math.ethz.ch 
>>[mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Paul Gilbert
>>Sent: den 12 december 2003 16:20
>>To: Prof Brian Ripley
>>Cc: Paul Gilbert; R-devel@stat.math.ethz.ch
>>Subject: Re: [Rd] Reorganization of packages in the R distribution
>>
>>
>>Prof Brian Ripley wrote:
>>
>>    
>>
>>>On Fri, 12 Dec 2003, Paul Gilbert wrote:
>>>
>>> 
>>>
>>>      
>>>
>>>>Prof Brian Ripley wrote:
>>>>
>>>>   
>>>>
>>>>        
>>>>
>>>>>There are a small number of CRAN packages that attempt to modify 
>>>>>system functions and so will need updating.  (Known 
>>>>>          
>>>>>
>>examples are in 
>>    
>>
>>>>>dse:tframe, gregmisc and mclust and some testing code elsewhere.)
>>>>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>Brian
>>>>
>>>>What do you mean by "updating?"  In tframe I modify a few
>>>>        
>>>>
>functions 
>  
>
>>>>like
>>>>
>>>>    start <- function (x, ...) if (is.Ttframed(x))
>>>>        
>>>>
>start(tframe(x),
>  
>
>>>>...) else UseMethod("start")
>>>>
>>>>If that can no longer be done then this is a serious fundamental 
>>>>change
>>>>that breaks all my code. I hope that is not what you mean. I'm
>>>>        
>>>>
>just 
>  
>
>>>>going away for a week, but will follow up when I return.
>>>>   
>>>>
>>>>        
>>>>
>>>It's always been incorrect code, and it no longer works.  You
>>>      
>>>
>should 
>  
>
>>>not be masking system generics, as the namespace 
>>>      
>>>
>>registration mechanism 
>>    
>>
>>>does not work on your version.
>>> 
>>>
>>>      
>>>
>>So what would be the proper mechanism for doing something like this?
>>    
>>
>
>  
>
>>Basically I need to do something that I believe is like multiple 
>>inheritance. I need to dispatch on the class of a certain part of an
>>    
>>
>
>  
>
>>object rather than on the object itself.  (BTW, this code has 
>>worked for 
>>about  ten years and  I believe predates your definition of  
>>"corrrect".)
>>
>>Paul
>>    
>>
>
>Hi, not knowing yours details, but here's an idea that might work.
>Under S3/UseMethod() you can "emulate" multiple inheritance by adding
>one superclass in front of the other to the class attribute. For
>instance, if ClassAA inherits from ClassA and ClassBB inherits from
>ClassB and MyClass inherits from ClassAA and ClassBB, then you'll get
>
> class(x) <- c("MyClass", "ClassAA", "ClassBB", "ClassA", "ClassB")
>
>Of course, it is important to get the order correct, and things can
>get messy if you're not careful. So, whatever function makes your
>object 'x' "Ttframed", couldn't that function at the same time add the
>superclass "TtframedClass" in front of the class vector before
>returning the object?! 
>
>However, I see a real problem if you do not control/own the functions
>that makes an object "Ttframed".
>
>Best wishes
>
>Henrik Bengtsson
>Lund University
>
>
>  
>

From pgilbert at bank-banque-canada.ca  Fri Dec 12 18:49:12 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Dec 12 18:49:03 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <Pine.LNX.4.44.0312121503140.13907-100000@gannet.stats>
References: <Pine.LNX.4.44.0312121503140.13907-100000@gannet.stats>
Message-ID: <3FD9FF98.1000601@bankofcanada.ca>

If  I understand this change correctly, I think is wrong for R-core to 
think it is a small change. It has much more serious consequences for me 
than any changes introduced  R 1.0. It definitely should not be 
introduced at a dot level release unless there is a fairly simple 
mechanism to deal with the implications. It breaks  6 of my 9 packages 
on CRAN at a fairly fundamental level,  2 more at a less serious level,  
and some packages I have not yet release.

Perhaps my programming technique is not correct. I always considered 
this trick to be a work-around for a short coming in R/S.   The issue is 
that the correct way to do this needs to be implemented before the trick 
that allows a work-around is eliminated.

Paul Gilbert

Prof Brian Ripley wrote:

>On Fri, 12 Dec 2003, Paul Gilbert wrote:
>
>  
>
>>Prof Brian Ripley wrote:
>>
>>    
>>
>>>There are a small number of CRAN packages that attempt to modify system
>>>functions and so will need updating.  (Known examples are in dse:tframe,
>>>gregmisc and mclust and some testing code elsewhere.)
>>>
>>>      
>>>
>>Brian
>>
>>What do you mean by "updating?"  In tframe I modify a few functions like
>>
>>     start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
>>...) else UseMethod("start")
>>
>>If that can no longer be done then this is a serious fundamental change 
>>that breaks all my code. I hope that is not what you mean. I'm just 
>>going away for a week, but will follow up when I return.
>>    
>>
>
>It's always been incorrect code, and it no longer works.  You should not
>be masking system generics, as the namespace registration mechanism does
>not work on your version.
>
>  
>

From dnp0uocoin at global.net.mt  Fri Dec 12 20:14:53 2003
From: dnp0uocoin at global.net.mt (dnp0uocoin@global.net.mt)
Date: Fri Dec 12 20:13:27 2003
Subject: [Rd] A christmas gift for you rtfeb  ybksj (PR#5734)
Message-ID: <20031212191453.6B62BFC25@slim.kubism.ku.dk>


--76_91.FB28F_3C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: base64

DQpIaSwNCg0KR3JlYXQgcmF0ZXMgZm9yIHRoZSBob2xpZGF5cyEgDQoNClJlZmluYW5jZSB0
b2RheSB0byBhcyBsb3cgYXMgMi45NSUhDQpTYXZlIHRob3VzYW5kcyBvZiBkb2xsYXJzIG9y
IGJ1eSB0aGUgDQpob21lIG9mIHlvdXIgZHJlYW1zIQ0KDQpBcHBseSB0b2RheSEgSXQgb25s
eSB0YWtlcyAyIG1pbnV0ZXMuIA0KDQp3d3cuYmVzdC1sb2FuLXNlYXJjaC5iaXoNCg0KVGhh
bmtzLA0KVHJhY3kgSmVuc2VuIA0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0Kcm12OiB3d3cu
YmVzdC1sb2FuLXNlYXJjaC5iaXovZ28gcyB4eiAgZnloIHN4c3VnZ3ENCmRtDQpibyBkdWhq
dXJpd3UgcXFmZnVjY2J4aXNmYw0KbmlxZXNkIHV0ZHdhdWZzYiB2cnogcyBvbXA=



--76_91.FB28F_3C--

From luke at stat.uiowa.edu  Sat Dec 13 02:54:38 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Sat Dec 13 02:53:15 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <3FD9FF98.1000601@bankofcanada.ca>
Message-ID: <Pine.LNX.4.44.0312121933280.15316-100000@itasca2.stat.uiowa.edu>

On Fri, 12 Dec 2003, Paul Gilbert wrote:

> If  I understand this change correctly, I think is wrong for R-core to 
> think it is a small change. It has much more serious consequences for me 
> than any changes introduced  R 1.0. It definitely should not be 
> introduced at a dot level release unless there is a fairly simple 
> mechanism to deal with the implications. It breaks  6 of my 9 packages 
> on CRAN at a fairly fundamental level,  2 more at a less serious level,  
> and some packages I have not yet release.
> 
> Perhaps my programming technique is not correct. I always considered 
> this trick to be a work-around for a short coming in R/S.   The issue is 
> that the correct way to do this needs to be implemented before the trick 
> that allows a work-around is eliminated.
> 
> Paul Gilbert
> 
> Prof Brian Ripley wrote:
> 
> >On Fri, 12 Dec 2003, Paul Gilbert wrote:
> >
> >  
> >
> >>Prof Brian Ripley wrote:
> >>
> >>    
> >>
> >>>There are a small number of CRAN packages that attempt to modify system
> >>>functions and so will need updating.  (Known examples are in dse:tframe,
> >>>gregmisc and mclust and some testing code elsewhere.)
> >>>
> >>>      
> >>>
> >>Brian
> >>
> >>What do you mean by "updating?"  In tframe I modify a few functions like
> >>
> >>     start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
> >>...) else UseMethod("start")
> >>
> >>If that can no longer be done then this is a serious fundamental change 
> >>that breaks all my code. I hope that is not what you mean. I'm just 
> >>going away for a week, but will follow up when I return.
> >>    
> >>
> >
> >It's always been incorrect code, and it no longer works.  You should not
> >be masking system generics, as the namespace registration mechanism does
> >not work on your version.
> >
> >  
> >

There are a number of options, depending on what you are trying to do.
If you want to make a definition of how the function `start' should
handle a TtFramed object in a way that should be visible to functions
defined in other packages that use the function start from the R core
packages (formarly base, not stats), then you can do that one of two
ways. The first is the disciplined and supported way: use the fact
that `start` is a generic and define a method for it, as was already
suggested.  That is the point of defining `start' as a generics.  The
undisciplined way it to change the definition in the stats package.
This can be done.  It is hard to do, and that is deliberate.

If your intent is to define a function of your own for use in your
packages that does something you want in one particular case but
otherwise defers to the function `start' in base then you can do that
too.  If this is what you want then things would be clearer if you
used a different name, like

pgStart <- function (x, ...) {
    if (is.Ttframed(x)) start(tframe(x), ...)
    else start(x, ...)
}

If for some reason you must use the smae name, even though that may
not be doing what you think it is doing, then you can explicitly defer
to the version in stats with

start <- function (x, ...) {
    if (is.Ttframed(x)) stats::start(tframe(x), ...)
    else stats::start(x, ...)
}

So we have infact implemented several nice pieces of rope for your use ...

Best,

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ripley at stats.ox.ac.uk  Sat Dec 13 08:36:27 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Dec 13 08:35:24 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <Pine.LNX.4.44.0312121933280.15316-100000@itasca2.stat.uiowa.edu>
Message-ID: <Pine.LNX.4.44.0312130653540.17011-100000@gannet.stats>

Thanks Luke for longer explanation.  I had been writing one between
meetings yesterday (in response to the original complaint), which almost
duplicated this.  Three points from mine not yet covered explicitly and
which provide further pieces of rope:

1) Objects from tframe may or may not have a class. If they do, you could 
implement start.tframe to handle them partly and otherwise call 
NextMethod().  If they do not, you could add a class (preferably) or you 
could take over start.default.  It is much safer to take over a method 
than mess with a generic.

2) Redefining the generic start() probably does not do what you think it
does since the advent of namespaces.  Now all the ts functions are in a
namespace (true since 1.7.0), all of them will use the system's start()
and not yours.  One loophole (deliberate) is that the system start()
generic does not look within the current namespace first for methods (as
normally functions are looked up), so if you redefine a method, you will
get your copy used by the system generic.  (Conversely, if you redefine a 
generic it only gets used in your code and it may well not see the 
system's methods.)

3) I am reluctant to even mention this, but you could add a namespace to 
your package, have a generic within it and register the system's methods 
as methods for your generic.  Don't go there.  And don't even think about 
redefining the system's generic in its namespace, even though there is a 
documented way to do so.

On Fri, 12 Dec 2003, Luke Tierney wrote:

> On Fri, 12 Dec 2003, Paul Gilbert wrote:
> 
> > If  I understand this change correctly, I think is wrong for R-core to 
> > think it is a small change. It has much more serious consequences for me 
> > than any changes introduced  R 1.0. It definitely should not be 
> > introduced at a dot level release unless there is a fairly simple 
> > mechanism to deal with the implications. It breaks  6 of my 9 packages 
> > on CRAN at a fairly fundamental level,  2 more at a less serious level,  
> > and some packages I have not yet release.

But there is a lack of independence: it breaks no other package on CRAN 
(all the other breakages are looking explicitly in what are now wrong 
places, in some cases calling C-level entry points which are not in the 
API).

> > Perhaps my programming technique is not correct. I always considered 
> > this trick to be a work-around for a short coming in R/S.   The issue is 
> > that the correct way to do this needs to be implemented before the trick 
> > that allows a work-around is eliminated.
> > 
> > Paul Gilbert
> > 
> > Prof Brian Ripley wrote:
> > 
> > >On Fri, 12 Dec 2003, Paul Gilbert wrote:
> > >
> > >  
> > >
> > >>Prof Brian Ripley wrote:
> > >>
> > >>    
> > >>
> > >>>There are a small number of CRAN packages that attempt to modify system
> > >>>functions and so will need updating.  (Known examples are in dse:tframe,
> > >>>gregmisc and mclust and some testing code elsewhere.)
> > >>>
> > >>>      
> > >>>
> > >>Brian
> > >>
> > >>What do you mean by "updating?"  In tframe I modify a few functions like
> > >>
> > >>     start <- function (x, ...) if (is.Ttframed(x)) start(tframe(x), 
> > >>...) else UseMethod("start")
> > >>
> > >>If that can no longer be done then this is a serious fundamental change 
> > >>that breaks all my code. I hope that is not what you mean. I'm just 
> > >>going away for a week, but will follow up when I return.
> > >>    
> > >>
> > >
> > >It's always been incorrect code, and it no longer works.  You should not
> > >be masking system generics, as the namespace registration mechanism does
> > >not work on your version.
> > >
> > >  
> > >
> 
> There are a number of options, depending on what you are trying to do.
> If you want to make a definition of how the function `start' should
> handle a TtFramed object in a way that should be visible to functions
> defined in other packages that use the function start from the R core
> packages (formarly base, not stats), then you can do that one of two
> ways. The first is the disciplined and supported way: use the fact
> that `start` is a generic and define a method for it, as was already
> suggested.  That is the point of defining `start' as a generics.  The
> undisciplined way it to change the definition in the stats package.
> This can be done.  It is hard to do, and that is deliberate.
> 
> If your intent is to define a function of your own for use in your
> packages that does something you want in one particular case but
> otherwise defers to the function `start' in base then you can do that
> too.  If this is what you want then things would be clearer if you
> used a different name, like
> 
> pgStart <- function (x, ...) {
>     if (is.Ttframed(x)) start(tframe(x), ...)
>     else start(x, ...)
> }
> 
> If for some reason you must use the smae name, even though that may
> not be doing what you think it is doing, then you can explicitly defer
> to the version in stats with
> 
> start <- function (x, ...) {
>     if (is.Ttframed(x)) stats::start(tframe(x), ...)
>     else stats::start(x, ...)
> }
> 
> So we have infact implemented several nice pieces of rope for your use ...
> 
> Best,
> 
> luke
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Sat Dec 13 11:42:36 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat Dec 13 11:41:10 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <Pine.LNX.4.44.0312130653540.17011-100000@gannet.stats>
References: <Pine.LNX.4.44.0312130653540.17011-100000@gannet.stats>
Message-ID: <x2zndxov6r.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > On Fri, 12 Dec 2003, Paul Gilbert wrote:
> > 
> > > If  I understand this change correctly, I think is wrong for R-core to 
> > > think it is a small change. It has much more serious consequences for me 
> > > than any changes introduced  R 1.0. It definitely should not be 
> > > introduced at a dot level release unless there is a fairly simple 
> > > mechanism to deal with the implications. It breaks  6 of my 9 packages 
> > > on CRAN at a fairly fundamental level,  2 more at a less serious level,  
> > > and some packages I have not yet release.
> 
> But there is a lack of independence: it breaks no other package on CRAN 
> (all the other breakages are looking explicitly in what are now wrong 
> places, in some cases calling C-level entry points which are not in the 
> API).

Just to add, re. development: The intention is 1.9.x == pre-2.0.0, so
the timing of a major restructuring is precisely right if we want as
solid a 2.0 series as possible.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From maechler at stat.math.ethz.ch  Sat Dec 13 17:47:56 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat Dec 13 17:46:29 2003
Subject: [Rd] chisq.test() and r2dtable() freezing on certain inputs
	(PR#5701)
Message-ID: <20031213164756.84E92EFB8@slim.kubism.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Thu, 11 Dec 2003 18:29:05 +0100 (CET) writes:

>>>>> "Torsten" == Torsten Hothorn <torsten@hothorn.de>
>>>>>     on Thu, 11 Dec 2003 18:03:07 +0100 (CET) writes:

    Torsten> On Thu, 11 Dec 2003, Jeffrey Chang wrote:
    >>> Hello everybody,
    >>> 
    >>> I'm running R 1.8.1 on both Linux and OS X compiled with
    >>> gcc 3.2.2 and 3.3, respectively.  The following call
    >>> seems to freeze the interpreter on both systems: >
    >>> chisq.test(matrix(c(233, 580104, 3776, 5786104), 2, 2),
    >>> simulate.p.value=TRUE)
    >>> 
    >>> By freeze, I mean, the function call never returns
    >>> (running > 10 hours so far), the process is unresponsive
    >>> to SIGINT (but I call kill it with TERM), and the
    >>> process still consumes cycles on the CPU.
    >>> 

    Torsten> This is due to calling `exp' with a very small
    Torsten> value leading to a zero return value in rcont2
    Torsten> (src/appl/rcont.c) line 70:

    MM> yes, that's correct.

However, as I have found out now, the real reason *is* integer
overflow (in multiplication), as I had guessed originally (but
didn't believe anymore for a while after your exp() underflow diagnosis).
Note that this also affects  r2dtable(), and e.g., the following
gives a segmentation fault:

M <- 50000 ; r2dtable(1, c(2*M,3), M+1:2)

Further, even if I protect against the exp() underflow, I can
still see examples which "freeze", i.e. end in an infinite loop.

-------

The fix is to ensure that integer multiplications i * j  do not happen
but rather    i * (double) j

I will commit a fix to R-patched and R-devel later this evening.

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From arnima at u.washington.edu  Mon Dec 15 05:51:12 2003
From: arnima at u.washington.edu (Arni Magnusson)
Date: Mon Dec 15 05:49:49 2003
Subject: [Rd] Re: arni.colors
In-Reply-To: <20031210014914.8B51841EBD@server1.messagingengine.com>
References: <Pine.A41.4.58.0312091353150.38686@dante36.u.washington.edu>
	<20031210014914.8B51841EBD@server1.messagingengine.com>
Message-ID: <Pine.A41.4.58.0312142006110.35268@dante02.u.washington.edu>

Thanks for those pointers, Nicholas. There is no doubt that Ross Ihaka is
the right person to take R colors into the right direction.

I have to admit I was only aware of the base color support in R, and wrote
arni.colors when I needed a rich and intuitive color palette for ordered
factors. Neither the built-in palettes nor linear args to rgb() and hsv()
satisfied my needs.

Judging from other email responses, some R users do appreciate the output
from arni.colors(), but they are probably not aware of the upcoming
goodies from Ross...

Until then,
Arni



On Wed, 10 Dec 2003, Nicholas Lewin-Koh wrote:

> Hi,
> Have you looked at Ross Ihaka's recent work? I don't think more palettes
> is the answer. Look at Ross's colorspace library at
> http://www.stat.auckland.ac.nz/~ihaka/color/
>
> And some of his graphics work:
> http://www.stat.auckland.ac.nz/~ihaka/Graphics/index.html
>
> I have a bunch of color ramps in the hexbin package on the bioconductor
> site, but I am going to scrap them if I can approximate them well with a
> good interpolater in CIELUV or LAB space.
>
> Nicholas
>

From maechler at stat.math.ethz.ch  Mon Dec 15 15:14:00 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Dec 15 15:14:05 2003
Subject: [Rd] Re: [R] cutree with agnes
In-Reply-To: <Pine.GSO.3.95q.1031211145123.398M-100000@sun35.math.uni-hamburg.de>
References: <Pine.GSO.3.95q.1031211145123.398M-100000@sun35.math.uni-hamburg.de>
Message-ID: <16349.49576.178724.69205@gargle.gargle.HOWL>

       [diverted from R-help to R-devel; please follow up on R-devel!]

>>>>> "ChrisH" == Christian Hennig <fm3a004@math.uni-hamburg.de>
>>>>>     on Thu, 11 Dec 2003 15:13:52 +0100 (MET) writes:

    ChrisH> Hi, this is rather a (presumed) bug report than a
    ChrisH> question because I can solve my personal statistical
    ChrisH> problem by working with hclust instead of agnes.

    ChrisH> I have done a complete linkage clustering on a dist
    ChrisH> object dm with 30 objects with agnes (R 1.8.0 on
    ChrisH> RedHat) and I want to obtain the partition that
    ChrisH> results from a cut at height=0.4.

    ChrisH> I run

    >> cl1a <- agnes(dm, method="complete");  cutree(cl1a,h=0.4)
    ChrisH>  [1] 1 2 3 4 5 6 3 7 3 8 9 10 3 11 12 13 14 15 3 16 17 3 18 19 20
    ChrisH> [26] 21 3 22 18 23

    ChrisH> But that's not true; correct is the solution
    ChrisH> obtained from hclust
    >> clx <- hclust(dm); cutree(clx,h=0.4)
    ChrisH>  [1] 1 2 1 2 3 4 1 2 1 3 4 5 1 4 6 7 8 4 1 5 2 1 9 2 2
    ChrisH> [26] 10 1 9 9 11

    ChrisH> as can be seen from the dendrogram plots of hclust
    ChrisH> *and* agnes.  (Note that the dendrograms of hclust
    ChrisH> and agnes are not identical due to the handling of
    ChrisH> ties in the distances, but the difference between
    ChrisH> the agnes and hclust dendrogram at h=0.4 concerns
    ChrisH> only two points.)  Specifying k instead of h in
    ChrisH> cutree for agnes seems to work properly, but that's
    ChrisH> not what I need in the general case.

If I lookup the help page for cutree, agnes and agnes.object,
nothing says that you can expect cutree to work with agnes
objects directly.  
On the contrary,  ?cutree  says about its first argument

    tree: a tree as produced by 'hclust'. 'cutree()' only expects a
          list with components 'merge', 'height', and 'labels', of
          appropriate content each.

and   ?agnes.object  mentions the   as.hclust() function that's
needed to produce an "hclust"-like object from the result of
agnes() {or diana()}.

Summarizing,
  1) You need      
     cutree(as.hclust(cl1a), h=0.4)

  2) cutree() shouldn't silently return a wrong result for agnes
     (or diana) objects.  Rather, it should return the proper thing
     or give an error.

Here I elaborate a bit on "2)" which is not entirely trivial --
hence the diversion to R-devel.
The best approach would be to make cutree() a generic function
with the `obvious' "hclust" & "twins" methods and a "default"
method which just uses something like NextMethod( as.hclust() ..).

However this breaks back-compatibility: cutree() may not work
anymore on user-constructed objects that are just list()s as
described for `tree' above.

We could alleviate this problem by try to make
as.hclust.default() much smarter, but I would tend to try not to
do it and let other people write their own as.hclust.* methods
for their own constructed objects.

Does this seem viable?  If I don't hear protest, I'll eventually
try to do this (in R-devel).

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From youngg at battelle.org  Mon Dec 15 17:35:26 2003
From: youngg at battelle.org (youngg@battelle.org)
Date: Mon Dec 15 17:33:59 2003
Subject: [Rd] rep.int (PR#5818)
Message-ID: <20031215163526.947AC102B3@slim.kubism.ku.dk>

Full_Name: Greg Young
Version: 1.8.1
OS: windows XP
Submission from: (NULL) (131.167.73.2)


There seems to be a bug in rep.POSIXct where the "times" parameter is required. 
The length.out option does not seem to be present.  See the following
example...


q<-c("2003-12-15 10:42:30 Eastern Standard Time","2003-12-15 10:45:30 Eastern
Standard Time")
z<-as.POSIXct(q)
rep(z,length.out=4)


Thanks,
Greg

From ripley at stats.ox.ac.uk  Mon Dec 15 17:57:46 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec 15 17:56:26 2003
Subject: [Rd] rep.int (PR#5818)
In-Reply-To: <20031215163526.947AC102B3@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312151653250.25020-100000@gannet.stats>

On Mon, 15 Dec 2003 youngg@battelle.org wrote:

> Full_Name: Greg Young
> Version: 1.8.1
> OS: windows XP
> Submission from: (NULL) (131.167.73.2)
> 
> 
> There seems to be a bug in rep.POSIXct where the "times" parameter is required. 
> The length.out option does not seem to be present.  See the following

Nor is it intended to be, but what does this have to do with your subject line?

> example...
> 
> 
> q<-c("2003-12-15 10:42:30 Eastern Standard Time","2003-12-15 10:45:30 Eastern
> Standard Time")
> z<-as.POSIXct(q)
> rep(z,length.out=4)

The help page says the usage is

     rep(x, times, ...)

     ## Default S3 method:
     rep(x, times, length.out, each, ...)

so your usage is not as documented: you are not using the default method, 
and you are not reporting on rep.int.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From znmeb at aracnet.com  Tue Dec 16 00:15:45 2003
From: znmeb at aracnet.com (znmeb@aracnet.com)
Date: Tue Dec 16 00:14:18 2003
Subject: [Rd] Memory issues in "aggregate" (PR#5829)
Message-ID: <20031215231545.E9D3DEDF6@slim.kubism.ku.dk>

Full_Name: Ed Borasky
Version: 1.8.1
OS: Windows XP Professional
Submission from: (NULL) (208.252.96.195)


R 1.8.1 seems to be running into a memory allocation problem in the "aggregate"
function. I have a rather large dataset (14 columns by 223,000 rows -- almost 40
megabytes) and a script that performs some processing on it. The system is a 768
MB Pentium 4. Here's the console log:

---------------------------------------------------------------------------------
R : Copyright 2003, The R Foundation for Statistical Computing
Version 1.8.1  (2003-11-21), ISBN 3-900051-00-3

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> source("script.R",echo=TRUE)

> rm(list = ls())

> cvar <- function(x) sd(x)/mean(x)

> library(sm)
Library `sm', version 2; Copyright (C) 1997, 2000 A.W.Bowman & A.Azzalini
type help(sm) for summary information

> callsperhour <- function(x) length(x)/12

> profiles <- subset(read.csv("profiles.csv"), hourofday >= 
    7 & hourofday <= 19 & dayofweek >= 1 & dayofweek <= 5)

> nrow(profiles)
[1] 100520

> attach(profiles)

> pseudo.hist <- aggregate(duration, list(Delta), length)

> colnames(pseudo.hist) <- c("Delta", "N")

> detach(profiles)

> gc()
          used (Mb) gc trigger (Mb)
Ncells  701188 18.8    2683553 71.7
Vcells 1447712 11.1    8201413 62.6

> memory.profile()
    NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP 
         1       7228     244243       3949        495        773     113819 
SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP 
       207       1177     283663       4661          0          0         49 
   REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP 
     13383          9      24870          0          0       2598          2 
  BCODESXP  EXTPTRSXP WEAKREFSXP 
         0         93          0 

> memory.size(max = TRUE)
[1] 224669696

> memory.size(max = FALSE)
[1] 81072656

> attach(pseudo.hist)

> pseudo.hist <- pseudo.hist[order(as.numeric(as.character(Delta))), 
    ]

> write.table(pseudo.hist, file = "pseudo-hist.csv", 
    sep = ",", row.names = FALSE)

> detach(pseudo.hist)

> gc()
          used (Mb) gc trigger (Mb)
Ncells  701228 18.8    2146842 57.4
Vcells 1447740 11.1    5248904 40.1

> memory.profile()
    NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP 
         1       7237     244261       3949        495        773     113819 
SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP 
       207       1177     283672       4661          0          0         49 
   REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP 
     13383          9      24870          0          0       2598          2 
  BCODESXP  EXTPTRSXP WEAKREFSXP 
         0         93          0 

> memory.size(max = TRUE)
[1] 224669696

> memory.size(max = FALSE)
[1] 81072656

> attach(profiles)

> cphs.site <- aggregate(Timestamp, list(CNumber, localdate), 
    callsperhour)

> colnames(cphs.site) <- c("CNumber", "localdate", "CallsPerHour")

> detach(profiles)

> gc()
          used (Mb) gc trigger (Mb)
Ncells  701695 18.8    2146842 57.4
Vcells 1449346 11.1    5248904 40.1

> memory.profile()
    NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP 
         1       7240     244277       3949        495        773     113819 
SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP 
       207       1177     284109       4661          0          0         51 
   REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP 
     13384          9      24877          0          0       2599          2 
  BCODESXP  EXTPTRSXP WEAKREFSXP 
         0         93          0 

> memory.size(max = TRUE)
[1] 224669696

> memory.size(max = FALSE)
[1] 82444104

> attach(cphs.site)

> cphs.site <- cphs.site[order(CNumber, localdate), 
    ]

> write.table(cphs.site, file = "cphs-site.csv", sep = ",", 
    row.names = FALSE)

> detach(cphs.site)

> gc()
          used (Mb) gc trigger (Mb)
Ncells  701701 18.8    2146842 57.4
Vcells 1449350 11.1    5248904 40.1

> memory.profile()
    NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP 
         1       7242     244279       3949        495        773     113819 
SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP 
       207       1177     284111       4661          0          0         51 
   REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP 
     13384          9      24877          0          0       2599          2 
  BCODESXP  EXTPTRSXP WEAKREFSXP 
         0         93          0 

> memory.size(max = TRUE)
[1] 224669696

> memory.size(max = FALSE)
[1] 82444104

> attach(profiles)

> cphs <- aggregate(Timestamp, list(CNumber, IP, localdate), 
    callsperhour)
Error in makeRestartList(...) : evaluation is nested too deeply: infinite
recursion?
> 
------------------------------------------------------------------------------------
"profiles.csv" is the 40 MB file. Here's the R code that generates the error:
------------------------------------------------------------------------------------
# keep a log file
#sink ("script.log")

# clean house
rm (list=ls())

# definitions, libraries
cvar<-function(x) sd(x)/mean(x); # coefficient of variation
library(sm)
callsperhour<-function(x) length(x)/12

# load data
profiles<-subset(read.csv("profiles.csv"),
	#as.character(localdate)<"2003-07-19"
	#&hourofday>=7
	hourofday>=7
	&hourofday<=19
	&dayofweek>=1
	&dayofweek<=5)
#profiles<-subset(profiles,!(localdate=="2003-07-11"&CNumber=="C132185"))
nrow(profiles)

# compute pseudo-histogram
attach(profiles)
pseudo.hist<-aggregate(duration,list(Delta),length)
colnames(pseudo.hist)<-c("Delta", "N")
detach(profiles)
gc()
memory.profile()
memory.size(max=TRUE)
memory.size(max=FALSE)

attach (pseudo.hist)
pseudo.hist<-pseudo.hist[order(as.numeric(as.character(Delta))),]
#print (pseudo.hist)
write.table (pseudo.hist, file="pseudo-hist.csv", sep=",",
	row.names=FALSE)
detach(pseudo.hist)
gc()
memory.profile()
memory.size(max=TRUE)
memory.size(max=FALSE)

# compute calls per hour for each site/date combo
attach(profiles)
cphs.site<-aggregate(Timestamp,list(CNumber,localdate),callsperhour)
colnames(cphs.site)<-c("CNumber","localdate","CallsPerHour")
detach(profiles)
gc()
memory.profile()
memory.size(max=TRUE)
memory.size(max=FALSE)

attach(cphs.site)
cphs.site<-cphs.site[order(CNumber,localdate),]
#print (cphs.site)
write.table (cphs.site, file="cphs-site.csv", sep=",",
	row.names=FALSE)
detach(cphs.site)
gc()
memory.profile()
memory.size(max=TRUE)
memory.size(max=FALSE)

# compute calls per hour for each site/IP/date combo
attach(profiles)
cphs<-aggregate(Timestamp,list(CNumber,IP,localdate),callsperhour)
colnames(cphs)<-c("CNumber","IP","localdate","CallsPerHour")
detach(profiles)
gc()
memory.profile()
memory.size(max=TRUE)
memory.size(max=FALSE)
------------------------------------------------------------------------------------
... that's as far as it gets; it croaks in the "aggregate". Before I put all the
"gc()" and other diagnostics in, it was croaking with a different error --
cannot allocate a 15 MB vector.

If you want, I'll zip up the datafile and see how big it is. I'm assuming this
is something simple that I did wrong, though. I'm going to try dropping the
extraneous columns before doing the "aggregate"; that might get the object sizes
down significantly.

From 9busova at st.fmph.uniba.sk  Tue Dec 16 08:13:18 2003
From: 9busova at st.fmph.uniba.sk (9busova@st.fmph.uniba.sk)
Date: Tue Dec 16 08:11:55 2003
Subject: [Rd] bug-gdk error (PR#5834)
Message-ID: <20031216071318.82C6CEDF1@slim.kubism.ku.dk>

Full_Name: Lenka Busova
Version: 1.8.0
OS: Linux
Submission from: (NULL) (217.67.17.234)


Greetings,
I have some problems running R with parameters --gui=gnome.
When I mark text in console, and want to copy it, R crashes
with the following note:
Gdk-ERROR **: file gdkselection.c: line 331 (gdk_string_to_compound_text):
assertion failed: (property.encoding == gdk_atom_intern ("COMPOUND_TEXT",
FALSE) && property.format == 8)
aborting...
Aborted
I've been using versions R-1.6.1 and R-1.8.0
The problem is the same no matter if I run R under kde 3.1.4 or gnome 2.4,
or if I mark with a mouse or keyboard
I've compiled it with gcc-3.2.3-r3
gdk 1.2
kernel 2.4.23_pre8-gss
I use Gentoo linux distribution

Thanks for any advice
Lenka

From ripley at stats.ox.ac.uk  Tue Dec 16 09:03:21 2003
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue Dec 16 09:02:08 2003
Subject: [Rd] Memory issues in "aggregate" (PR#5829)
In-Reply-To: <20031215231545.E9D3DEDF6@slim.kubism.ku.dk>
Message-ID: <Pine.WNT.4.44.0312160800410.352-100000@petrel>

I have read through this and been unable to find a *bug* report in it,
Please read the section on BUGS in the R FAQ and explain where the bug here
is -- as far as I can see it is that a user has managed to write code that
exceeds the memory capacity of his computer.

On Tue, 16 Dec 2003 znmeb@aracnet.com wrote:

> Full_Name: Ed Borasky
> Version: 1.8.1
> OS: Windows XP Professional
> Submission from: (NULL) (208.252.96.195)
>
>
> R 1.8.1 seems to be running into a memory allocation problem in the "aggregate"
> function. I have a rather large dataset (14 columns by 223,000 rows -- almost 40
> megabytes) and a script that performs some processing on it. The system is a 768
> MB Pentium 4. Here's the console log:
>
> ---------------------------------------------------------------------------------
> R : Copyright 2003, The R Foundation for Statistical Computing
> Version 1.8.1  (2003-11-21), ISBN 3-900051-00-3
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
>
> [Previously saved workspace restored]
>
> > source("script.R",echo=TRUE)
>
> > rm(list = ls())
>
> > cvar <- function(x) sd(x)/mean(x)
>
> > library(sm)
> Library `sm', version 2; Copyright (C) 1997, 2000 A.W.Bowman & A.Azzalini
> type help(sm) for summary information
>
> > callsperhour <- function(x) length(x)/12
>
> > profiles <- subset(read.csv("profiles.csv"), hourofday >=
>     7 & hourofday <= 19 & dayofweek >= 1 & dayofweek <= 5)
>
> > nrow(profiles)
> [1] 100520
>
> > attach(profiles)
>
> > pseudo.hist <- aggregate(duration, list(Delta), length)
>
> > colnames(pseudo.hist) <- c("Delta", "N")
>
> > detach(profiles)
>
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  701188 18.8    2683553 71.7
> Vcells 1447712 11.1    8201413 62.6
>
> > memory.profile()
>     NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP
>          1       7228     244243       3949        495        773     113819
> SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP
>        207       1177     283663       4661          0          0         49
>    REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP
>      13383          9      24870          0          0       2598          2
>   BCODESXP  EXTPTRSXP WEAKREFSXP
>          0         93          0
>
> > memory.size(max = TRUE)
> [1] 224669696
>
> > memory.size(max = FALSE)
> [1] 81072656
>
> > attach(pseudo.hist)
>
> > pseudo.hist <- pseudo.hist[order(as.numeric(as.character(Delta))),
>     ]
>
> > write.table(pseudo.hist, file = "pseudo-hist.csv",
>     sep = ",", row.names = FALSE)
>
> > detach(pseudo.hist)
>
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  701228 18.8    2146842 57.4
> Vcells 1447740 11.1    5248904 40.1
>
> > memory.profile()
>     NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP
>          1       7237     244261       3949        495        773     113819
> SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP
>        207       1177     283672       4661          0          0         49
>    REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP
>      13383          9      24870          0          0       2598          2
>   BCODESXP  EXTPTRSXP WEAKREFSXP
>          0         93          0
>
> > memory.size(max = TRUE)
> [1] 224669696
>
> > memory.size(max = FALSE)
> [1] 81072656
>
> > attach(profiles)
>
> > cphs.site <- aggregate(Timestamp, list(CNumber, localdate),
>     callsperhour)
>
> > colnames(cphs.site) <- c("CNumber", "localdate", "CallsPerHour")
>
> > detach(profiles)
>
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  701695 18.8    2146842 57.4
> Vcells 1449346 11.1    5248904 40.1
>
> > memory.profile()
>     NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP
>          1       7240     244277       3949        495        773     113819
> SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP
>        207       1177     284109       4661          0          0         51
>    REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP
>      13384          9      24877          0          0       2599          2
>   BCODESXP  EXTPTRSXP WEAKREFSXP
>          0         93          0
>
> > memory.size(max = TRUE)
> [1] 224669696
>
> > memory.size(max = FALSE)
> [1] 82444104
>
> > attach(cphs.site)
>
> > cphs.site <- cphs.site[order(CNumber, localdate),
>     ]
>
> > write.table(cphs.site, file = "cphs-site.csv", sep = ",",
>     row.names = FALSE)
>
> > detach(cphs.site)
>
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  701701 18.8    2146842 57.4
> Vcells 1449350 11.1    5248904 40.1
>
> > memory.profile()
>     NILSXP     SYMSXP    LISTSXP     CLOSXP     ENVSXP    PROMSXP    LANGSXP
>          1       7242     244279       3949        495        773     113819
> SPECIALSXP BUILTINSXP    CHARSXP     LGLSXP                           INTSXP
>        207       1177     284111       4661          0          0         51
>    REALSXP    CPLXSXP     STRSXP     DOTSXP     ANYSXP     VECSXP    EXPRSXP
>      13384          9      24877          0          0       2599          2
>   BCODESXP  EXTPTRSXP WEAKREFSXP
>          0         93          0
>
> > memory.size(max = TRUE)
> [1] 224669696
>
> > memory.size(max = FALSE)
> [1] 82444104
>
> > attach(profiles)
>
> > cphs <- aggregate(Timestamp, list(CNumber, IP, localdate),
>     callsperhour)
> Error in makeRestartList(...) : evaluation is nested too deeply: infinite
> recursion?
> >
> ------------------------------------------------------------------------------------
> "profiles.csv" is the 40 MB file. Here's the R code that generates the error:
> ------------------------------------------------------------------------------------
> # keep a log file
> #sink ("script.log")
>
> # clean house
> rm (list=ls())
>
> # definitions, libraries
> cvar<-function(x) sd(x)/mean(x); # coefficient of variation
> library(sm)
> callsperhour<-function(x) length(x)/12
>
> # load data
> profiles<-subset(read.csv("profiles.csv"),
> 	#as.character(localdate)<"2003-07-19"
> 	#&hourofday>=7
> 	hourofday>=7
> 	&hourofday<=19
> 	&dayofweek>=1
> 	&dayofweek<=5)
> #profiles<-subset(profiles,!(localdate=="2003-07-11"&CNumber=="C132185"))
> nrow(profiles)
>
> # compute pseudo-histogram
> attach(profiles)
> pseudo.hist<-aggregate(duration,list(Delta),length)
> colnames(pseudo.hist)<-c("Delta", "N")
> detach(profiles)
> gc()
> memory.profile()
> memory.size(max=TRUE)
> memory.size(max=FALSE)
>
> attach (pseudo.hist)
> pseudo.hist<-pseudo.hist[order(as.numeric(as.character(Delta))),]
> #print (pseudo.hist)
> write.table (pseudo.hist, file="pseudo-hist.csv", sep=",",
> 	row.names=FALSE)
> detach(pseudo.hist)
> gc()
> memory.profile()
> memory.size(max=TRUE)
> memory.size(max=FALSE)
>
> # compute calls per hour for each site/date combo
> attach(profiles)
> cphs.site<-aggregate(Timestamp,list(CNumber,localdate),callsperhour)
> colnames(cphs.site)<-c("CNumber","localdate","CallsPerHour")
> detach(profiles)
> gc()
> memory.profile()
> memory.size(max=TRUE)
> memory.size(max=FALSE)
>
> attach(cphs.site)
> cphs.site<-cphs.site[order(CNumber,localdate),]
> #print (cphs.site)
> write.table (cphs.site, file="cphs-site.csv", sep=",",
> 	row.names=FALSE)
> detach(cphs.site)
> gc()
> memory.profile()
> memory.size(max=TRUE)
> memory.size(max=FALSE)
>
> # compute calls per hour for each site/IP/date combo
> attach(profiles)
> cphs<-aggregate(Timestamp,list(CNumber,IP,localdate),callsperhour)
> colnames(cphs)<-c("CNumber","IP","localdate","CallsPerHour")
> detach(profiles)
> gc()
> memory.profile()
> memory.size(max=TRUE)
> memory.size(max=FALSE)
> ------------------------------------------------------------------------------------
> ... that's as far as it gets; it croaks in the "aggregate". Before I put all the
> "gc()" and other diagnostics in, it was croaking with a different error --
> cannot allocate a 15 MB vector.
>
> If you want, I'll zip up the datafile and see how big it is. I'm assuming this
> is something simple that I did wrong, though. I'm going to try dropping the
> extraneous columns before doing the "aggregate"; that might get the object sizes
> down significantly.
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jgentry at jimmy.harvard.edu  Tue Dec 16 21:17:16 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Tue Dec 16 21:14:59 2003
Subject: [Rd] Something wrong w/ R-devel?
Message-ID: <Pine.SOL.4.20.0312161515470.10122-100000@santiam.dfci.harvard.edu>

Hello ...

On both RH7.2 and Solaris 8 I'm encountering this problem - in both cases
this is from a fresh rsync of R-devel into a brand new directory (to
prevent it from me needing to 'make distclean' or the like):

building package 'ts'
mkdir -p -- ../../../library/ts/R
make[3]: Leaving directory `/misc/homes/madman/R-test/src/library/ts'
installing parsed NAMESPACE files
../../library/tools/Meta/nsInfo.rds: No such file or directory
make[2]: *** [R] Error 2
make[2]: Leaving directory `/misc/homes/madman/R-test/src/library'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/misc/homes/madman/R-test/src'
make: *** [R] Error 1


Apologies if this is a known issue already.

-J

From jgentry at jimmy.harvard.edu  Tue Dec 16 23:23:55 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Tue Dec 16 23:21:40 2003
Subject: [Rd] getOption("repositories")
Message-ID: <Pine.SOL.4.20.0312161720200.10122-100000@santiam.dfci.harvard.edu>


Out of curiosity, what happened to this?

With 1.8.1 it returns:
> getOption("repositories")
                                     CRAN 
  "http://cran.r-project.org/src/contrib" 
                                     BIOC 
"http://www.bioconductor.org/src/contrib" 

With R-devel it returns:
> getOption("repositories")
NULL

It appears to have been taken out when the changes were committed for the
base package split, from /src/library/profile/Rprofile.unix and
Rprofile.windows but I didn't see any mention of this in NEWS. 

Thanks
-J

From ripley at stats.ox.ac.uk  Tue Dec 16 23:26:56 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 16 23:25:37 2003
Subject: [Rd] Something wrong w/ R-devel?
In-Reply-To: <Pine.SOL.4.20.0312161515470.10122-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0312162224220.21789-100000@gannet.stats>

On what OS?

That's a symptom of something seen a few hours ago on Linux when I got

rm: cannot lstat `../../library/tools/Meta/nsInfo.rds': No such file or 
directory

and was due to typo in src/library/Makefile.in (rm -r should be rm -f),
and should be correct now (but rsync lags a bit behind cvs).


On Tue, 16 Dec 2003, Jeff Gentry wrote:

> Hello ...
> 
> On both RH7.2 and Solaris 8 I'm encountering this problem - in both cases
> this is from a fresh rsync of R-devel into a brand new directory (to
> prevent it from me needing to 'make distclean' or the like):
> 
> building package 'ts'
> mkdir -p -- ../../../library/ts/R
> make[3]: Leaving directory `/misc/homes/madman/R-test/src/library/ts'
> installing parsed NAMESPACE files
> ../../library/tools/Meta/nsInfo.rds: No such file or directory
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/misc/homes/madman/R-test/src/library'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/misc/homes/madman/R-test/src'
> make: *** [R] Error 1
> 
> 
> Apologies if this is a known issue already.
> 
> -J
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jgentry at jimmy.harvard.edu  Tue Dec 16 23:34:29 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Tue Dec 16 23:33:20 2003
Subject: [Rd] Something wrong w/ R-devel?
In-Reply-To: <Pine.LNX.4.44.0312162224220.21789-100000@gannet.stats>
Message-ID: <Pine.SOL.4.20.0312161733250.10122-100000@santiam.dfci.harvard.edu>

> On what OS?

This happened on both RH7.2 linux and Solaris 8.  

> and was due to typo in src/library/Makefile.in (rm -r should be rm -f),
> and should be correct now (but rsync lags a bit behind cvs).

It doesn't seem to have pushed out to rsync yet, but applying your change
by hand to my src/library/Makefile.in file on the solaris machine appears
to have fixed things.  (Haven't tried it on my linux machine yet).

Thanks
-J

From ripley at stats.ox.ac.uk  Tue Dec 16 23:33:47 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 16 23:33:33 2003
Subject: [Rd] getOption("repositories")
In-Reply-To: <Pine.SOL.4.20.0312161720200.10122-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0312162227070.21789-100000@gannet.stats>

On Tue, 16 Dec 2003, Jeff Gentry wrote:

> 
> Out of curiosity, what happened to this?
> 
> With 1.8.1 it returns:
> > getOption("repositories")
>                                      CRAN 
>   "http://cran.r-project.org/src/contrib" 
>                                      BIOC 
> "http://www.bioconductor.org/src/contrib" 
> 
> With R-devel it returns:
> > getOption("repositories")
> NULL
> 
> It appears to have been taken out when the changes were committed for the
> base package split, from /src/library/profile/Rprofile.unix and
> Rprofile.windows but I didn't see any mention of this in NEWS. 

It isn't needed to be set any more by default: it merely duplicated the
information in options CRAN and BIOC.

Rather, it seems to have been *added* without being mentioned in NEWS, and
not to be documented in ?options.  It wasn't set correctly on Windows for
a long time (which might have been noticed if it had been documented).

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jgentry at jimmy.harvard.edu  Tue Dec 16 23:44:41 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Tue Dec 16 23:43:11 2003
Subject: [Rd] getOption("repositories")
In-Reply-To: <Pine.LNX.4.44.0312162227070.21789-100000@gannet.stats>
Message-ID: <Pine.SOL.4.20.0312161740150.10122-100000@santiam.dfci.harvard.edu>

> It isn't needed to be set any more by default: it merely duplicated the
> information in options CRAN and BIOC.

IMO, it is more useful then that, however.  The nice thing about
"repositories" is that it provided one spot which could have 1->n
repositories listed.  Having a catch all "repositories" option makes it
easier to add new repositories in the future (functions written to work
against online repositories only have to work against
'getOption("repositories")' and not worry about having to hardcode any
future repositories) as well as allowing the user to add in repositories
of their own on their person setup.

-J

From ripley at stats.ox.ac.uk  Tue Dec 16 23:51:38 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 16 23:50:21 2003
Subject: [Rd] getOption("repositories")
In-Reply-To: <Pine.SOL.4.20.0312161740150.10122-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0312162246060.4051-100000@gannet.stats>

Well,

1) it is not documented and
2) if set, it works in packageStatus().

Relying on undocumented features is bound to cause problems (and I take it
as significant that you silently removed that part of my message).

Any well-weitten code will do something sensible if an option is not set, 
especially an undocumented one.

On Tue, 16 Dec 2003, Jeff Gentry wrote:

> > It isn't needed to be set any more by default: it merely duplicated the
> > information in options CRAN and BIOC.
> 
> IMO, it is more useful then that, however.  The nice thing about
> "repositories" is that it provided one spot which could have 1->n
> repositories listed.  Having a catch all "repositories" option makes it
> easier to add new repositories in the future (functions written to work
> against online repositories only have to work against
> 'getOption("repositories")' and not worry about having to hardcode any
> future repositories) as well as allowing the user to add in repositories
> of their own on their person setup.

Haivng an incorrectly set option seems to me to be worse than useless, and 
that has been the situation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From gregory_r_warnes at groton.pfizer.com  Tue Dec 16 23:53:34 2003
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Tue Dec 16 23:53:15 2003
Subject: [Rd] Reorganization of packages in the R distribution
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20680AC2D@groexmb02.pfizer.com>


Ok, to take this thread in a slightly different direction.  In my 'gregmisc'
package I redefine the R code 'lowess' function 
by moving the existing 'lowess' to 'lowess.default' and making 'lowess' a
generic. 

Is there a "proper" and "supported" way of accomplishing this task?

[Please ignore for the moment whether this is appropriate for the lowess
function.  That is a separate discussion.]

-G


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From rpeng at jhsph.edu  Wed Dec 17 20:30:06 2003
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Wed Dec 17 20:30:28 2003
Subject: [Rd] negative numbers from object.size() on 64 bit systems
Message-ID: <3FE0AEBE.3080708@jhsph.edu>

Has anyone running R 1.8.1 on a 64 bit system gotten negative numbers 
from object.size() on objects > 2GB or so?  For example, on 
Solaris/Sparc I get

 > b <- numeric(131072 * 2800)
 > object.size(b)
[1] -1358954440

I get similar behavior on the Opteron (SuSE Linux).  I'm not sure if 
this is an R problem or something wrong with the way it was compiled on 
either system.

I noticed in objectsize() in size.c, the `cnt' variable is an int, which 
I guess would max out at 2^31.  Might this be the problem?  Any hints 
would be appreciated.

Thanks,

-roger

From w.huber at dkfz-heidelberg.de  Wed Dec 17 20:43:31 2003
From: w.huber at dkfz-heidelberg.de (w.huber@dkfz-heidelberg.de)
Date: Wed Dec 17 20:43:13 2003
Subject: [Rd] negative numbers from object.size() on 64 bit systems
In-Reply-To: <3FE0AEBE.3080708@jhsph.edu>
References: <3FE0AEBE.3080708@jhsph.edu>
Message-ID: <Pine.GSO.4.53.0312172042290.1308@herkules>

Hi,
same behavior on this machine:

> b <- numeric(131072 * 2800)
> object.size(b)
[1] -1358954440
> version
         _
platform alphaev68-dec-osf4.0f
arch     alphaev68
os       osf4.0f
system   alphaev68, osf4.0f
status
major    1
minor    8.0
year     2003
month    10
day      08
language R


-------------------------------------
Wolfgang Huber
Division of Molecular Genome Analysis
German Cancer Research Center
Heidelberg, Germany
Phone: +49 6221 424709
Fax:   +49 6221 42524709
Http:  www.dkfz.de/abt0840/whuber
-------------------------------------

On Wed, 17 Dec 2003, Roger D. Peng wrote:

> Has anyone running R 1.8.1 on a 64 bit system gotten negative numbers
> from object.size() on objects > 2GB or so?  For example, on
> Solaris/Sparc I get
>
>  > b <- numeric(131072 * 2800)
>  > object.size(b)
> [1] -1358954440
>
> I get similar behavior on the Opteron (SuSE Linux).  I'm not sure if
> this is an R problem or something wrong with the way it was compiled on
> either system.
>
> I noticed in objectsize() in size.c, the `cnt' variable is an int, which
> I guess would max out at 2^31.  Might this be the problem?  Any hints
> would be appreciated.
>
> Thanks,
>
> -roger

From ripley at stats.ox.ac.uk  Wed Dec 17 20:47:43 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Dec 17 20:46:22 2003
Subject: [Rd] negative numbers from object.size() on 64 bit systems
In-Reply-To: <3FE0AEBE.3080708@jhsph.edu>
Message-ID: <Pine.LNX.4.44.0312171943350.23005-100000@gannet.stats>

On Wed, 17 Dec 2003, Roger D. Peng wrote:

> Has anyone running R 1.8.1 on a 64 bit system gotten negative numbers 
> from object.size() on objects > 2GB or so?  For example, on 
> Solaris/Sparc I get
> 
>  > b <- numeric(131072 * 2800)
>  > object.size(b)
> [1] -1358954440
> 
> I get similar behavior on the Opteron (SuSE Linux).  I'm not sure if 
> this is an R problem or something wrong with the way it was compiled on 
> either system.
> 
> I noticed in objectsize() in size.c, the `cnt' variable is an int, which 
> I guess would max out at 2^31.  Might this be the problem?  Any hints 
> would be appreciated.

Yes, and so is objectsize, and the return type is integer.  At the time
that was written R could not use more than 2Gb.

I've modified the function but have no machine with more than 2Gb to test 
it on, so could you please try R-devel in a couple of days?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jgentry at jimmy.harvard.edu  Wed Dec 17 22:50:30 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Wed Dec 17 22:48:10 2003
Subject: [Rd] Can't start R-devel
Message-ID: <Pine.SOL.4.20.0312171636440.11641-100000@santiam.dfci.harvard.edu>

Hello ...

With a new checkout of R-devel, I'm getting the following error on
startup:

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

Error in open.connection(con, "rb") : unable to open connection
In addition: Warning message: 
cannot open compressed file
`/home/jgentry/R-1.9.0/library/methods/R/all.rda' 
> search()
[1]
".GlobalEnv"       "package:stats"    "package:graphics" "package:utils"   
[5] "Autoloads"        "package:base"    
Warning message: 
package methods in options("defaultPackages") was not found 


This is happening on Linux (RH7.2, RH9.0) and Solaris 8.

Thanks
-J

From ripley at stats.ox.ac.uk  Wed Dec 17 23:09:20 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Dec 17 23:08:00 2003
Subject: [Rd] Can't start R-devel
In-Reply-To: <Pine.SOL.4.20.0312171636440.11641-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0312172202390.9084-100000@gannet.stats>

There has been a problem with (someone else's!) update to package stats.  
As with yesterday, it should already be fixed in cvs and will get fixed in
rsync. A clean build from the cvs works.

You should have seen an error message earlier in the build process.

On Wed, 17 Dec 2003, Jeff Gentry wrote:

> Hello ...
> 
> With a new checkout of R-devel, I'm getting the following error on
> startup:
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
> 
> Error in open.connection(con, "rb") : unable to open connection
> In addition: Warning message: 
> cannot open compressed file
> `/home/jgentry/R-1.9.0/library/methods/R/all.rda' 
> > search()
> [1]
> ".GlobalEnv"       "package:stats"    "package:graphics" "package:utils"   
> [5] "Autoloads"        "package:base"    
> Warning message: 
> package methods in options("defaultPackages") was not found 
> 
> 
> This is happening on Linux (RH7.2, RH9.0) and Solaris 8.

Where did you get RH9.0 from?  I don't think it exists.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bates at stat.wisc.edu  Wed Dec 17 23:10:07 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Dec 17 23:09:00 2003
Subject: [Rd] Can't start R-devel
In-Reply-To: <Pine.SOL.4.20.0312171636440.11641-100000@santiam.dfci.harvard.edu>
References: <Pine.SOL.4.20.0312171636440.11641-100000@santiam.dfci.harvard.edu>
Message-ID: <6rk74v3xkw.fsf@bates4.stat.wisc.edu>

Jeff Gentry <jgentry@jimmy.harvard.edu> writes:

> With a new checkout of R-devel, I'm getting the following error on
> startup:
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
> 
> Error in open.connection(con, "rb") : unable to open connection
> In addition: Warning message: 
> cannot open compressed file
> `/home/jgentry/R-1.9.0/library/methods/R/all.rda' 
> > search()
> [1]
> ".GlobalEnv"       "package:stats"    "package:graphics" "package:utils"   
> [5] "Autoloads"        "package:base"    
> Warning message: 
> package methods in options("defaultPackages") was not found 
> 
> 
> This is happening on Linux (RH7.2, RH9.0) and Solaris 8.

Try installing into a clean directory.  That is, remove the contents of
/home/jgenty/R-1.9.0 before installing.

Also you may want to check that you have used a delete option in your
rsync update of your sources.  Many directories have been moved
recently and having vestigial copies of some files can be problematic.

From jgentry at jimmy.harvard.edu  Wed Dec 17 23:19:05 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Wed Dec 17 23:16:46 2003
Subject: [Rd] Can't start R-devel
In-Reply-To: <Pine.LNX.4.44.0312172202390.9084-100000@gannet.stats>
Message-ID: <Pine.SOL.4.20.0312171717240.11701-100000@santiam.dfci.harvard.edu>

> There has been a problem with (someone else's!) update to package stats.  
> As with yesterday, it should already be fixed in cvs and will get fixed in
> rsync. A clean build from the cvs works.

Yeap - it is definitely working now.  I must have just grabbed an R-devel
from before the fix when I first encountered this.

> You should have seen an error message earlier in the build process.

Is this the one?

make[4]: Entering directory
`/misc/homes/madman/R-1.9.0/src/library/methods'
dumping R code in package 'methods'
Error in get(x, envir, mode, inherits) : variable "lines" was not found
Saving namespace image ... 
initializing class and method definitions now ...Error in switch(Class,
"NULL" = return(NULL), logical = , numeric = ,  : 
        couldn't find function "ts"
In addition: Warning message: 
package stats in options("defaultPackages") was not found 
Error in runHook(".onLoad", env, package.lib, package) : 
        .onLoad failed
Execution halted
make[4]: Leaving directory
`/misc/homes/madman/R-1.9.0/src/library/methods'


Thanks much
-J

From jgentry at jimmy.harvard.edu  Wed Dec 17 23:26:43 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Wed Dec 17 23:24:54 2003
Subject: [Rd] Can't start R-devel
In-Reply-To: <6rk74v3xkw.fsf@bates4.stat.wisc.edu>
Message-ID: <Pine.SOL.4.20.0312171726000.11701-100000@santiam.dfci.harvard.edu>

> Try installing into a clean directory.  That is, remove the contents of
> /home/jgenty/R-1.9.0 before installing.

Right ... this is something that I try to do before speaking up that
R-devel isn't working for me (tho sometimes I forget ...).

In this case though it sounds as if I caught my rsync images before the
proper fixes had gone in.

From rpeng at jhsph.edu  Wed Dec 17 23:57:26 2003
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Wed Dec 17 23:56:00 2003
Subject: [Rd] negative numbers from object.size() on 64 bit systems
In-Reply-To: <Pine.LNX.4.44.0312171943350.23005-100000@gannet.stats>
References: <Pine.LNX.4.44.0312171943350.23005-100000@gannet.stats>
Message-ID: <3FE0DF56.2020801@jhsph.edu>

Okay, just recompiled the version out of CVS.  Things seem fine now. 
This is what I get on the Opteron:

 > object.size(numeric(0))
[1] 56
 > b <- numeric(131072 * 2800)
 > object.size(b)
[1] 2936012856
 > object.size(b)/2^20
[1] 2800
 >

-roger

Prof Brian Ripley wrote:
> On Wed, 17 Dec 2003, Roger D. Peng wrote:
> 
> 
>>Has anyone running R 1.8.1 on a 64 bit system gotten negative numbers 
>>from object.size() on objects > 2GB or so?  For example, on 
>>Solaris/Sparc I get
>>
>> > b <- numeric(131072 * 2800)
>> > object.size(b)
>>[1] -1358954440
>>
>>I get similar behavior on the Opteron (SuSE Linux).  I'm not sure if 
>>this is an R problem or something wrong with the way it was compiled on 
>>either system.
>>
>>I noticed in objectsize() in size.c, the `cnt' variable is an int, which 
>>I guess would max out at 2^31.  Might this be the problem?  Any hints 
>>would be appreciated.
> 
> 
> Yes, and so is objectsize, and the return type is integer.  At the time
> that was written R could not use more than 2Gb.
> 
> I've modified the function but have no machine with more than 2Gb to test 
> it on, so could you please try R-devel in a couple of days?
>

From ripley at stats.ox.ac.uk  Thu Dec 18 09:01:40 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Dec 18 09:00:19 2003
Subject: [Rd] Reorganization of packages in the R distribution
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20680AC2D@groexmb02.pfizer.com>
Message-ID: <Pine.LNX.4.44.0312172209590.27526-100000@gannet.stats>

The short answer is no: there is no supported way to override an R system 
function.  The only reason we can see to do that is to correct a bug, and 
we would prefer to get the buggy original changed ASAP.

It is much preferable for package authors to name variant versions
differently: if any 1 is allowed to masquerade, then N > 1 can do so too
and their versions will conflict.

However, if you wish to engage in this activity, the way you do it is
almost as good as any.  In these days of namespaces, something like

lowess.default <- stats::lowess

is needed, so

lowess.default <-
   if(R.version$major == 1 && R.version$minor < 9) base::lowess
   else stats::lowess

looks about right (since I suspect your code is not intended for R <
1.6.0).

Nevertheless, be aware that there is no guarantee that users will get your 
version because of the namespace scoping rules.


On Tue, 16 Dec 2003, Warnes, Gregory R wrote:

> 
> Ok, to take this thread in a slightly different direction.  In my 'gregmisc'
> package I redefine the R code 'lowess' function 
> by moving the existing 'lowess' to 'lowess.default' and making 'lowess' a
> generic. 
> 
> Is there a "proper" and "supported" way of accomplishing this task?
> 
> [Please ignore for the moment whether this is appropriate for the lowess
> function.  That is a separate discussion.]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pburns at pburns.seanet.com  Thu Dec 18 13:19:21 2003
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Thu Dec 18 13:17:54 2003
Subject: [Rd] a debugging difficulty
Message-ID: <3FE19B49.9000701@pburns.seanet.com>

I had an error to debug that turned out to be essentially:

 > NULL * matrix(1:4, 2)
Error: dim<- length of dims do not match the length of object


The equivalent of the NULL was a variable that was meant
to be a scalar.  It took me a while to track down the problem
because I was focusing on looking for arrays that were different
than my expectation.

I think it could save substantial debugging time if the error message
stated the dims and the length of the object.

Also with

options(error=dump.frames)

set before the command above, we get:

 > debugger()
Message:  Error: dim<- length of dims do not match the length of object
Available environments had calls:
1:
0:

Enter an environment number, or 0 to exit  Selection: 1
Selection: 0
 >

That is, there is apparently an environment to select, but
trying to select it doesn't do anything.

This is with R version 1.8.1 on Windows and SuSe 8.2 (both precompiled).


Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

From jonathan-cran at swintons.net  Thu Dec 18 13:55:34 2003
From: jonathan-cran at swintons.net (jonathan-cran@swintons.net)
Date: Thu Dec 18 13:54:36 2003
Subject: [Rd] qbinom when probability is 1 (PR#5900)
Message-ID: <20031218125534.E3C1010434@slim.kubism.ku.dk>

Full_Name: Jonathan Swinton
Version: 1.8.0
OS: Windows 2000
Submission from: (NULL) (193.132.159.34)


Calling qbinom with a sample probability of 1 returns NaN
> qbinom(p=0.95,size=10,prob=1)
[1] NaN

I believe that this is wrong and that qbinom(p,size,prob=1) should always be
size for 0<p<=1.

The documentation says that 

 The quantile is defined as the smallest value x such that F(x) >=
     p, where F is the distribution function. 



Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 8.0
 year = 2003
 month = 10
 day = 08
 language = R

Windows 2000 Professional (build 2195) Service Pack 3.0

Search Path:
 .GlobalEnv, package:lattice, package:Hmisc, package:XML, package:graph,
package:methods, package:ctest, package:mva, package:modreg, package:nls,
package:ts, Autoloads, package:base

From ripley at stats.ox.ac.uk  Thu Dec 18 13:52:52 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Dec 18 14:06:33 2003
Subject: [Rd] a debugging difficulty
In-Reply-To: <3FE19B49.9000701@pburns.seanet.com>
Message-ID: <Pine.LNX.4.44.0312181251230.21287-100000@gannet.stats>

The error message is easy to expand, and R is a bit inconsistent as we do 
have

  error("length of dimnames[%d] not equal to array extent",i+1);

I've seen similar things debugging recently, and don't know the cause.

On Thu, 18 Dec 2003, Patrick Burns wrote:

> I had an error to debug that turned out to be essentially:
> 
>  > NULL * matrix(1:4, 2)
> Error: dim<- length of dims do not match the length of object
> 
> 
> The equivalent of the NULL was a variable that was meant
> to be a scalar.  It took me a while to track down the problem
> because I was focusing on looking for arrays that were different
> than my expectation.
> 
> I think it could save substantial debugging time if the error message
> stated the dims and the length of the object.
> 
> Also with
> 
> options(error=dump.frames)
> 
> set before the command above, we get:
> 
>  > debugger()
> Message:  Error: dim<- length of dims do not match the length of object
> Available environments had calls:
> 1:
> 0:
> 
> Enter an environment number, or 0 to exit  Selection: 1
> Selection: 0
>  >
> 
> That is, there is apparently an environment to select, but
> trying to select it doesn't do anything.
> 
> This is with R version 1.8.1 on Windows and SuSe 8.2 (both precompiled).
> 
> 
> Patrick Burns
> 
> Burns Statistics
> patrick@burns-stat.com
> +44 (0)20 8525 0696
> http://www.burns-stat.com
> (home of S Poetry and "A Guide for the Unwilling S User")
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Dec 18 15:57:44 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Dec 18 15:56:28 2003
Subject: [Rd] qbinom when probability is 1 (PR#5900)
In-Reply-To: <20031218125534.E3C1010434@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312181447300.21831-100000@gannet.stats>

The cases of prob=0 and prob=1 were specifically excluded in the code,
as well as n=0.  I've added special-case code for all of these.

On Thu, 18 Dec 2003 jonathan-cran@swintons.net wrote:

> Full_Name: Jonathan Swinton
> Version: 1.8.0
> OS: Windows 2000
> Submission from: (NULL) (193.132.159.34)
> 
> 
> Calling qbinom with a sample probability of 1 returns NaN
> > qbinom(p=0.95,size=10,prob=1)
> [1] NaN
> 
> I believe that this is wrong and that qbinom(p,size,prob=1) should always be
> size for 0<p<=1.
> 
> The documentation says that 
> 
>  The quantile is defined as the smallest value x such that F(x) >=
>      p, where F is the distribution function. 
> 
> 
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 8.0
>  year = 2003
>  month = 10
>  day = 08
>  language = R
> 
> Windows 2000 Professional (build 2195) Service Pack 3.0
> 
> Search Path:
>  .GlobalEnv, package:lattice, package:Hmisc, package:XML, package:graph,
> package:methods, package:ctest, package:mva, package:modreg, package:nls,
> package:ts, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dmurdoch at pair.com  Thu Dec 18 19:18:20 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Thu Dec 18 19:17:38 2003
Subject: [Rd] Re: [R] R GUI dies using postcript() in Windows XP Pro
	(PR#5910)
Message-ID: <20031218181820.DA5E71043E@slim.kubism.ku.dk>

On Thu, 18 Dec 2003 18:02:07 +0000, Gavin Simpson
<gavin.simpson@ucl.ac.uk> wrote :

>Dear List,
>
>My colleague has been having a problem with the following data and 
>plotting commands. The example below is part of a larger set of plots, 
>but I've isolated the problem to this example using this small dataset 
>(below), which kills rgui consistently. My version info
>
> > version
>          _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status
>major    1
>minor    8.0
>year     2003
>month    10
>day      08
>language R
>
>But this also happens in 1.8.1 on Windows XP Pro

I just tried it in 1.8.1, Win XP Pro, with no error, then tried in a
relatively recent build of r-patched and saw the crash.  I'll see if I
can track it down.

Duncan Murdoch
>
>The code seems to stop at the call to plot() in the code below, and then 
>MS's error reporting window pops up and informs us that rgui has been 
>closed.
>
>Note that the same code, but without the postcript() and dev.off() 
>commands works as expected to produce the plot on a windows device.
>
>Any ideas as to what is going on?
>
>All the best,
>
>Gav
>
>#code to run to reproduce the problem
>year <- c(1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 
>1998, 1999, 2000, 2001, 2002)
>
>avgMsr <- c(10.800000, 7.000000, 6.200000, 9.571429, 10.800000, 
>11.600000, 10.200000, 11.400000, 7.200000, 9.400000, 11.200000, 
>11.600000, 11.600000, 8.000000, 7.600000)
>
>totMsr <- c(19, 17, 13, 24, 17, 17, 21, 18, 13, 15, 19, 18, 21, 15, 11)
>
>postscript(file="invert.eps", onefile=FALSE, horizontal = FALSE, 
>pointsize = 8)
>
>op <- par(mar = c(3,4,1.5,1)+0.1,font.main=16,tcl=-0.2)
>plot(x = year, y = avgMsr, ylab = "Species richness", main = "Loch Coire 
>nan Arr", axes = FALSE, ylim = c(0,25), xlim = c(1988,2002))
>axis(2, las=1)
>axis(1)
>lines(x = year, y = avgMsr)
>points(x = year, y = totMsr , col = "black", pch = 19, type = "o")
>lines(x = year, y = totMsr)
>box()
>par(op)
>dev.off()

From gregory_r_warnes at groton.pfizer.com  Fri Dec 19 16:08:35 2003
From: gregory_r_warnes at groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Fri Dec 19 16:07:25 2003
Subject: [Rd] latex problem with \preformatted (PR#5645)
Message-ID: <20031219150835.9384C10445@slim.kubism.ku.dk>

OK.  I just tried this under the current r-patched (R-1.8.1 Patched) which I
rsynced and compiled just a few minutes ago.  The problem still persists.

-G


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Tuesday, December 09, 2003 4:43 PM
> To: gregory_r_warnes@groton.pfizer.com
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] latex problem with \preformatted (PR#5645)
> 
> 
> Have you tried the *current* version of R?
> 
> From NEWS
> 
>    o   Rd conversion to latex did not add a new line before
>        \end{Section} for the section environments, which caused
>        problems if the last thing in a section was \preformatted{}
>        (and potentially elsewhere).
> 
> 
> On Tue, 9 Dec 2003 gregory_r_warnes@groton.pfizer.com wrote:
> 
> > This message is in MIME format. Since your mail reader does 
> not understand
> > this format, some or all of this message may not be legible.
> > 
> > ------_=_NextPart_000_01C3BE9C.3FB5BC1A
> > Content-Type: text/plain; charset="iso-8859-1"
> > 
> > 
> > There is a small bug in the implementation of \preformatted 
> in R 1.8.0:
> > The closing "\end{verbatim}" needs to be followed by a 
> newline, since my
> > latex ignores everything following it on the line.
> > 
> > 
> > In an .Rd file I have:
> > 
> > 
> > \details{
> >   This function provides a thin wrapper around the Unix 
> "fork" system
> >   call, which will create a new process which is an exact 
> copy of the
> >   [...]
> >     
> > \preformatted{
> >   {
> >     pid = fork(slave=NULL) 
> >     if(pid==0) { 
> >       cat("Hi from the child process\n"); exit() 
> >     } else {
> >       cat("Hi from the parent process\n");
> >     } 
> >   } 
> > }
> > 
> > }
> > 
> > which gets translated to 
> > 
> > \begin{Details}\relax
> > This function provides a thin wrapper around the Unix "fork" system
> > call, which will create a new process which is an exact copy of the
> > [...]
> > 
> > \begin{verbatim}
> >   \{
> >     pid = fork(slave=NULL) 
> >     if(pid==0) \{ 
> >       cat("Hi from the child process\bsl{}n"); exit() 
> >     \} else \{
> >       cat("Hi from the parent process\bsl{}n");
> >     \} 
> >   \}
> > \end{verbatim}\end{Details}
> > 
> > 
> > When processed by Rd2dvi these warning messages show up in the log:
> > 
> > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 
> 2002.7.17)  9 DEC
> > 2003 16:11
> > [...]
> > 
> > LaTeX Warning: Characters dropped after `\end{verbatim}' on 
> input line 139.
> > 
> > [3] [4] [5] [6] [7] [8] [9]
> > 
> > ! LaTeX Error: \begin{list} on input line 73 ended by 
> \end{document}.
> > 
> > See the LaTeX manual or LaTeX Companion for explanation.
> > Type  H <return>  for immediate help.
> >  ...                                              
> >                                                   
> > l.437 \end{document}
> > [...]
> > 
> > The solution is to simply add an '\n' at the appropriate 
> place in Rdconv.pm:
> > 
> > gsun492: R [61]> diff -u Rdconv.pm.orig Rdconv.pm
> > --- Rdconv.pm.orig 2003-12-09 16:32:17.940846000 -0500
> > +++ Rdconv.pm 2003-12-09 16:32:32.440931000 -0500
> > @@ -2450,7 +2450,7 @@
> >      my $code = $_[0];
> >  
> >      $code = latex_code_trans ($code);
> > -    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}";
> > +    $code = "\\begin\{verbatim\}" . $code . "\\end\{verbatim\}\n";
> >      $code;
> >  }
> > 
> > after which everything works fine.
> > 
> > -Greg
> > 
> > 
> > Gregory R. Warnes, Ph.D.
> > Senior Coordinator
> > Groton Non-Clinical Statistics
> > Pfizer Global Research and Development
> >  <<Warnes, Gregory R.vcf>> 
> > 
> > 
> > LEGAL NOTICE\ Unless expressly stated otherwise, this 
> messag...{{dropped}}
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From ggrothendieck at myway.com  Fri Dec 19 21:03:44 2003
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Fri Dec 19 21:02:41 2003
Subject: [Rd] t.data.frame
Message-ID: <20031219200344.6E6A839AE@mprdmxin.myway.com>


I would like to propose that t.data.frame be changed using the
source code below.

Right now t.data.frame coerces the data frame to a matrix and then
transposes the matrix.

I would like to propose that t.data.frame be changed to:

	t.data.frame <- function( df ) { 
		ll <- NULL
		for( i in 1:nrow(df) ) ll <- append( ll, list(df[i,]) )
		ll 
	}

That would allow one to iterate, using for, over the rows of a 
data frame just as easily as the columns without using indices:

	# iterate over columns of df
	for( v in df ) ... statements involving v ...

	# iterate over rows of df
	for( u in t(df) ) ... statements involving u ...

This is less efficient than 

	for( i in 1:nrows(df) ) ... statements involving df[i,] ...

but its simpler and reduction in complexity can be more important
than raw efficiency.   Furthermore, it does not preclude the use
of the index form just cited.

One could still get the old behavior of t like this:

	t(as.matrix(df))

From Prendinha77rsi at mail.com  Sat Dec 20 18:00:05 2003
From: Prendinha77rsi at mail.com (Prendinha)
Date: Sat Dec 20 17:58:56 2003
Subject: [Rd] Fw: Re: CAMPANHA NATAL SEM BAIXARIA - PARTICIPE!
Message-ID: <E1AXkSR-0007xq-00@franz.stat.wisc.edu>

----- Mensagem Original -----=20
Eu boicotaria estas empresas s=F3 pelo fato de financiarem os enjoativos e =
rancentos Cassetas, mas me surpreendi ao descobrir que tantos produtos que =
eu costumo comprar s=E3o transg=EAnicos. Fui conferir no site do greenpeace=
 e =E9 verdade!!!!!!!!!!!!!
Boicote neles!

----- Original Message -----=20
C A M P A N H A=20
N A T A L   S E M   B A I X A R I A

VAMOS TRANSFORMAR 2003 NUM NATAL LIVRE DE PRODUTOS E EMPRESAS QUE FINANCIAM=
 O RACISMO E O PRECONCEITO

-------------------------------------
QUEM TEM ORGULHO DE SER GA=DACHO SAI DESTE PLANETA
BOICOTE AOS FINANCIADORES DO CASSETA&PLANETA
FASE III
-------------------------------------

Na p=E1gina do boicote:
* EMPRESAS QUE FINANCIAM O CASSETA&PLANETA
* FIQUE DE OLHO
  Fique atento =E0s falcatruas e golpes da Globo contra o povo ga=FAcho
* CONHE=C7A O NOSSO PROGRESSO
* COLABORE COM O BOICOTE!
  - Comerciantes, incrementem suas vendas=20
  - Ajude a colocar este programa na lista dos piores da TV=20
  - Especial para empres=E1rios concorrentes das empresas boicotadas
* PORQUE O CASSETA E PLANETA FAZ CAMPANHA CONTRA OS GA=DACHOS=20

Visite a p=E1gina do boicote:=20
http://www.pampa.alturl.com/boicote_fase_3.htm ou
http://www.pampa.cjb.net/boicote_fase_3.htm


A maioria das empresas listadas foram convidadas a interromper o financiame=
nto da trupe de difamadores, mas se recusaram, ent=E3o PODE BOICOTAR QUE EL=
ES MERECEM!
Os produtos relacionados como transg=EAnicos - e note que s=E3o muitos - co=
nstam na lista publicada pelo Greenpeace <http://www.greenpeace.org.br>. De=
veriam estar rotulados como transg=EAnicos, mas n=E3o est=E3o, pois empresa=
s que chegam ao absurdo de financiar a difama=E7=E3o dos pr=F3prios consumi=
dores s=F3 est=E3o preocupadas com lucro, e n=E3o com leis ou a sa=FAde das=
 pessoas; uma aberra=E7=E3o sem paralelo no mundo, diga-se de passagem.
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA=20
GLOBO (REDE GLOBOBO DE TELEVIADITIZA=C7=C3O)
CDs da gravadora Som Livre.
NET TV a Cabo
Sky (TV por sat=E9lite)
revistas da Editora Globo
N=E3o compre produtos que sejam anunciados nos ve=EDculos da Rede Globo.=20
Compre produtos de fabricantes regionais ou produzidos artesanalmente!
Conhe=E7a os crimes da Globo e o homossexualismo do Roberto Marinho, leia o=
s livros "Afunda=E7=E3o Roberto Marinho" e "Afunda=E7=E3o II - Uma Biografi=
a de Corrup=E7=E3o", de Rom=E9ro da Costa Machado romero@novanet.com.br (co=
mpre direto com o autor) e o livro "A Hist=F3ria Secreta da Rede Globo", de=
 Daniel Herz.
---------------------------------------------------------------------
Cancele a sua assinatura de jornais=20
e TVs da Globo/RBS e doe neste Natal,=20
na forma de alimentos, o valor de uma=20
mensalidade para uma institui=E7=E3o de caridade.
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS E SERVI=C7OS DA
RBS TV (REDE BOBO SUL DE TELEVIADITIZA=C7=C3O)
CDs da gravadora RBS discos.
Jornais Zero Hora
Di=E1rio Catarinense
Di=E1rio de Sta Maria
Pioneiro
Jornal de Santa Catarina
NET TV a cabo
R=E1dios 102 FM
Atl=E2ntida FM
Cidade FM=20
Ga=FAcha AM=20
Itapema FM
CBN AM
N=E3o compre produtos que sejam anunciados nos ve=EDculos da RBS.
Compre produtos de fabricantes regionais ou produzidos artesanalmente!=20
---------------------------------------------------------------------
Compre produtos de fabricantes regionais ou produzidos artesanalmente!
---------------------------------------------------------------------
N=C3O AP=D3IE A
CAMPANHA "ANTI-PIRATARIA"
Pagam quase todas as semanas os Casset=F3ides&Boiol=F3ides para veicular qu=
adros.
Saiba quem est=E1 por tr=E1s desta "campanha":=20
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O AP=D3IE A CAMPANHA DE
DESARMAMENTO DO CIDAD=C3O HONESTO
Estas ONGs (Organiza=E7=F5es Neo-Governamentais) pagam cerca de R$ 20.000,0=
0 por segundo (isso mesmo, por segundo!) para o Casset=F3ides&Boiol=F3ides =
veicularem quadros=20
---------------------------------------------------------------------
N=C3O COMPRE
MONSANTO TRANSG=CANICOS (MULTINACIONAL)
fale.conosco@la2.monsanto.com
0800 15 6242=20
---------------------------------------------------------------------
N=C3O COMPRE
SAND=C1LIAS GRENDENE
sac@grendene.com.br
0800 99 88 98
Sand=E1lias Ipanema, Grendha, Melissa, Ginga, Rider, etc
---------------------------------------------------------------------
N=C3O USE SERVI=C7OS DA
SEGURADORA PORTO SEGURO
0800 11 0801=20
---------------------------------------------------------------------
N=C3O USE SERVI=C7OS DO
UNIBANCO=20
sac@unibanco.com.br
0300 78 83 030 (cuidado que este banco cobra at=E9 pela liga=E7=E3o telef=
=F4nica)
N=E3o fa=E7a empr=E9stimo banc=E1rio. N=E2o compre t=EDtulos de previd=EAnc=
ia in=FAteis.
N=E3o sustente banqueiros parasitas.
---------------------------------------------------------------------
N=C3O USE SERVI=C7OS DA
CAIXA ECON=D4MICA FEDERAL
4001-4455 (capitais)=20
0800 784455 (demais cidades)
---------------------------------------------------------------------
N=C3O UTILIZE
ITA=DA BANKLINE + AOL (Multinacional)
0800 118944=20
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
FERRERO DO BRAZIL=20
Tic-tac: racismo e difama=E7=E3o acrescidos de 2 calorias
Nutella: achocolatado
---------------------------------------------------------------------
N=C3O USE A MULTINACIONAL
TIM CELULAR=20
DDG 0800 41 1404 ou 0800 48 1404=20
MENSAGEM OFICIAL DA TIM PARA OS GA=DACHOS:=20
> De:               Rafael Jose Caron Bosio rbosio@timsul.com.br
> Data:            21 Aug 2003
> Message-ID: B5B7A656F471D411A29000508B6764070DCEF685@prcta011.telecelular=
sul.com.br
>=20
> Voc=EAs fodem homossexuais!!!
> Parem de enviar esta merda..
> Ningu=E9m est=E1 preocupado com os Gayuchos!!!!
Saiba mais na p=E1gina do boicote:=20
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O USE
BRAZILTELECOM
atendimento@brasiltelecom.com.br=20
DDG 0800 6414104=20
Liga=E7=F5es de voz internacionais 100% gratuitas; acesso =E0 internet em a=
lta velocidade e sem linha telef=F4nica; a Braziltelecom est=E1 te lesando,=
 processe-a. Aprenda a se livrar da Braziltelecom PARA SEMPRE:=20
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O USE
VIVO CELULAR
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
NOKIA TELEFONES CELULARES
(11) 5681-3333=20
A opini=E3o dos consumidores n=E3o interessa =E0 esta multinacional, n=E3o =
possuem n=FAmero 0800 nem e-mail para contato.=20
Os telefones desta multinacional apresentam risco de explos=E3o.=20
Saiba mais: http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O ABASTE=C7A NA MULTINACIONAL
ESSO POSTOS DE COMBUST=CDVEIS
---------------------------------------------------------------------
N=C3O COMPRE NOS POSTOS DA TRANSG=CANICA
PETROBR=C1S
sac@petrobras.com.br
0800 25 90 01=20
N=E3o abaste=E7a em postos com a bandeira Petrobr=E1s, abaste=E7a em postos=
 com a bandeira do respeito e da dignidade.
A Petrobr=E1s =E9 a grande financiadora do Casset=F3ides&Boiol=F3ides. Doou=
 R$ 1 milh=E3o para a produ=E7=E3o do filme " A 'Tassa' do Mundo =E9 'No=E7=
a' ". Nos Estados Unidos a gasolina custa R$ 0,60/litro (sessenta centavos =
de real por litro), mas tu =E9s obrigado a pagar quatro vezes mais para que=
 a Petrobr=E1s tenha bastante lucro e possa dar bastante dinheiro para os C=
asset=F3ides difamarem a nossa cultura e o nosso povo. Explora=E7=E3o, raci=
smo, discrimina=E7=E3o e difama=E7=E3o pagas com dinheiro arrancado do noss=
o pr=F3prio bolso =E9 o que o Brasil reservou =E0 n=F3s, ga=FAchos. Ap=F3ie=
 o MOVIMENTO PELA INDEPEND=CANCIA DO PAMPA <http://www.pampa.alturl.com>, c=
ujo objetivo =E9 restaurar a independ=EAncia ga=FAcha, reestabelecendo o re=
speito =E0 nossa cultura e ao nosso povo PARA SEMPRE. Vote em candidatos qu=
e defendam nossa id=E9ias, princ=EDpios morais e cultura.
---------------------------------------------------------------------
N=C3O COMPRE A MULTINACIONAL
MARGARINA DEL=CDCIA SABORES
0800 6438899
0800 901234=20
Margarina transg=EAnica Del=EDcia (e sabores), agora tamb=E9m nos novos sab=
ores transg=EAnicos: "racismo", "difama=E7=E3o", "anti-gauchismo" e "financ=
iamento ao preconceito".
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
ELMA CHIPS
sac@elma-chips.com.br
0800 703 4444
Batata Ruffles
Salgadinhos Cheetos, Agito, etc.
Todos os produtos da Elma Chips s=E3o produzidos com transg=EAnicos.
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
KRAFT FOODS
sac@nabisco.com.br
DDG 0800 704 1940=20
Chocolates Lacta: transg=EAnicos
BISCOITO CLUB SOCIAL: transg=EAnico
Biscoito Trakinas: transg=EAnico
Produtos Royal: fermentos, gelatinas e pudins produzidos com transg=EAnicos
Clight: gelatinas e sucos
Nabisco: biscoitos e salgadinhos, todos os tipos cont=E9m transg=EAnicos
---------------------------------------------------------------------
Compre chocolates produzidos no Rio Grande e/ou artesanalmente.
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
NESTL=C9
DDG 0800-7702411=20
falecom@nestle.com.br=20
CAF=C9 NESCAF=C9: O caf=E9 com o novo, nov=EDssimo, nov=E9rrimo sabor de di=
fama=E7=E3o!
=C1gua pure life: Conhe=E7a os crimes da Nestl=E9 na cidade de S=E3o Louren=
=E7o, onde =E9 engarrafada a =E1gua "pure life", incluindo desde a adultera=
=E7=E3o qu=EDmica ilegal da =E1gua at=E9 a instala=E7=E3o de fossa s=E9ptic=
a na =E1rea.
Chamyto: leite amaldi=E7oado
Chocolates Garoto
Tostines
Bebidas lacteas e iogurtes
Produtos Purina
Produtos Maggi
Saiba mais: http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
PARMALAT=20
DDG 0800.11.22.22=20
sic@parmalat.com.br=20
Biscoitos parmalat: todos s=E3o transg=EAnicos
Kidlat bolinho: transg=EAnico
Dessert sobremesa: transg=EAnico
Pudim de chocolate: transg=EAnico
Flan: transg=EAnico
Molhos de tomate: transg=EAnicos
Molhos prontos: transg=EAnicos
Etti: Molhos e condimentos transg=EAnicos
Sucos Santal
Etc., etc.
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
UNILEVER
DDG 0800 707 7512=20
unilever.sac@higienebeleza.com.br=20
CREME DENTAL CLOSE-UP: o sorriso da difama=E7=E3o
DESODORANTES REXONA
PRODUTOS DE HIGIENE E LIMPEZA
MAIONESE HELLMAN'S: pegue o dicion=E1rio e confira, Hellmans significa "hom=
ens do inferno"
Produtos Knorr
Produtos Arisco
Karo cobertura doce
Sucos Ades
Margarinas Claybom, Doriana e Becel: nos sabores "racismo", "ran=E7o" e "di=
fama=E7=E3o".=20
Cremogema mingau
Maizena
Mazola =F3leo vegetal
Cica: molhos e condimentos
---------------------------------------------------------------------
N=C3O COMPRE
PRODUTOS AMBEV=20
DDG 0800 885 0101=20
0800 8850303
0800 8852724
brahma@brahma.com.br
faleconosco@ambev.com.br=20
sac@ambev.com.br=20
CERVEJA BRAHMA
CERVEJA ANTARCTICA=20
CERVEJA SKOL
Guaran=E1 Antarctica
Guarana Brahma
Sukita
Pepsi
Ch=E1s Ice Tea Lipton
---------------------------------------------------------------------
N=C3O COMPRE
PRODUTOS SCHINCARIOL
schin@schincariol.com.br=20
sas@schincariol.com.br
0800 551655=20
CERVEJA NOVA SCHIN
CERVEJA PRIMUS
REFRIGERANTES SCHIN
---------------------------------------------------------------------
Vers=E3o completa do boletim de boicote:=20
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O COMPRE
CAF=C9 IGUA=C7U
iguacu@iguacu.com.br
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
COCA-COLA
0800 212121
COCA-COLA
FANTA
SPRITE
GUARAN=C1 KUAT

Coca-cola assassina (mata) os concorrentes:=20
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
CAMPARI
camparibrasil@campari.com=20
Campari
Dreher conhaque
Whisky Drury's
---------------------------------------------------------------------
Compre bebidas e refrigerantes de fabricantes regionais
---------------------------------------------------------------------
N=C3O USE O MULTINACIONAL
TERRA PROVEDOR DE INTERNET
diretoria@terra.com.br

---------------------------------------------------------------------
N=C3O COMPRE NAS
LOJAS HAVAN
---------------------------------------------------------------------
N=C3O COMPRE NAS
LOJAS RENNER
---------------------------------------------------------------------
N=C3O COMPRE DA MULTIONACIONAL
VOLKSWAGEN
faleconoscosf@volkswagen.com.br
0800 - 19 57 75
Autom=F3veis Volkswagen
Autom=F3veis Audi
---------------------------------------------------------------------
N=C3O COMPRE AUTOM=D3VEIS DA MULTIONACIONAL=20
PEUGEOT
atendimento@caep.peugeot.com.br
0800-7032424
---------------------------------------------------------------------
N=E3o compre autom=F3vel. Compre um=20
cavalo, que n=E3o gasta combust=EDvel,=20
n=E3o requer manuten=E7=E3o e n=E3o paga ped=E1gio!
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
FORD
fordbyphone@ford.com.br
0800 703 3673
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
FIAT=20
0800 991000
N=E3o compre carros Fiat.
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
RENAULT
renault@renault.com.br
Autom=F3vel Sc=E9nic
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
HONDA
0800 55 22 21 / 0800 55 21 22 / 0800 11 11 17
MOTO HONDA NX4 Falcon 2004
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
JOHNSON & JOHNSON=20
sacjj@conbr.jnj.com
jnjbrasil@conbr.jnj.com
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
GILLETTE
sac@gillette.com.br=20
Gillette sensor excel azul
---------------------------------------------------------------------
N=C3O COMPRE DA MULTINACIONAL
NOVARTIS
atendimento.cliente@cibavision.novartis.com
Cataflan
Ovomaltine: produzido com transg=EAnicos
Gerber: alimento infantil transg=EAnico
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS DA MULTINACIONAL
PROCTER&GAMBLE
DDG 0800-115515 ou 0800.7015515
discpg.im@pg.com
Sab=E3o em p=F3 ACE
Sab=E3o em p=F3 Bold
Sab=E3o em p=F3 POP
Sab=E3o em p=F3 Ariel: com a exclusiva f=F3rmula Ariel Sharon, que limpa ma=
tando.=20
Pringles: batatas transg=EAnicas
Produtos Vick (para gripe)
Pepto-bismol
Hipoglos: pomada
Produtos de higiene Pumpers, Ela e Always
Shampoos Pantene, Head&Shoulders, Pert Plus
Seiva de Alfazema
---------------------------------------------------------------------
Compre sab=E3o em p=F3 de fabricantes=20
regionais, s=E3o muito eficientes e,=20
por n=E3o terem embutido um valor a=20
ser repassado para os Boiol=F3ides=20
difamadores, s=E3o muito mais baratos.
---------------------------------------------------------------------
N=C3O COMPRE PRODUTOS
FRIBOI
friboi@friboi.com.br=20
CARNE FRIBOI
SABONETES ALBANY=20
---------------------------------------------------------------------
Compre sabonetes fabricados no Rio Grande!!
---------------------------------------------------------------------
N=C3O COMPRE O MULTINACIONAL
INSETICIDA RAID
---------------------------------------------------------------------
Utilize tela OU REDE anti-mosquito, a =FAnica forma 100% eficaz de se livra=
r dos=20
mosquitos. N=E3o =E9 veneno, n=E3o oferece riscos para crian=E7as ou animai=
s, =E9=20
barata, dur=E1vel e ainda te auxilia a se livrar de grupos difamat=F3rios e=
=20
multinacionais parasitas!=20
---------------------------------------------------------------------
N=C3O COMPRE O MULTINACIONAL
INSETICIDA RODASOL
---------------------------------------------------------------------
Foi a tua participa=E7=E3o at=E9 agora que permitiu avan=E7armos nesta luta=
. Continue participando e apresente as tuas id=E9ias para aprimorarmos a no=
ssa organiza=E7=E3o e a efic=E1cia do nosso boicote.=20
SR. EMPRES=C1RIO CONCORRENTE DAS EMPRESAS SOB BOICOTE:=20
PRECISAMOS DO SEU APOIO, ENTRE EM CONTATO CONOSCO!

gauchismo@hotpop.com
---------------------------------------------------------------------
LEIA TAMB=C9M:
* Chamada ao boicote ao Casset=F3ides&Boiol=F3ides - Fase II
* Como a Globo fatura promovendo as drogas e enganando a popula=E7=E3o    (=
IMPRESSIONANTE!)
* Not=EDcias do Pampa: acompanhe a evolu=E7=E3o do boicote e as not=EDcias =
do=20
  MOVIMENTO PELA INDEPEND=CANCIA DO PAMPA
http://www.pampa.alturl.com/boicote_fase_3.htm
---------------------------------------------------------------------

	[[alternative HTML version deleted]]

From lyongu+ at cs.cmu.edu  Sun Dec 21 01:36:14 2003
From: lyongu+ at cs.cmu.edu (lyongu+@cs.cmu.edu)
Date: Sun Dec 21 01:34:43 2003
Subject: [Rd] ctrl-c/ctrl-break in windows port (PR#5970)
Message-ID: <20031221003614.B3B7110475@slim.kubism.ku.dk>

Hi,

It seems in Windows port, ctrl-c/ctrl-break in Rterm will kill the
program and this behavior is different from its unix port and what is
described in the Windows port FAQ.

These keys are supposed to stop the current computation instead of
quitting the program.

Could you please fix it in the next release?

Thanks,

Yong Lu

From ripley at stats.ox.ac.uk  Sun Dec 21 02:07:15 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Dec 21 02:06:08 2003
Subject: [Rd] ctrl-c/ctrl-break in windows port (PR#5970)
In-Reply-To: <20031221003614.B3B7110475@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312210051500.3520-100000@gannet.stats>

Let me assure you that it *does* work as documented on the developers' 
machines, and on many others.

Note that you are asked to supply R version number, OS etc when submitting
a bug, and you have omitted to do so.  This just makes it harder to help
you.  One possibility is that you are running some other application on
your machine that is intercepting Ctrl-C: indeed it is possible that the
terminal window you are running Rterm in is doing so.  You haven't
supplied any details, so we cannot even guess.

On Sun, 21 Dec 2003 lyongu+@cs.cmu.edu wrote:

> It seems in Windows port, ctrl-c/ctrl-break in Rterm will kill the
> program and this behavior is different from its unix port and what is
> described in the Windows port FAQ.
> 
> These keys are supposed to stop the current computation instead of
> quitting the program.

Yes, we can read the documentation we wrote!  (Actually, to interrupt the 
computation at the next interruptible point.)

> Could you please fix it in the next release?

Perhaps you could tell us how to `fix it' as we cannot reproduce it?  
Since you apparently can, you will be able to debug the problem and submit
a patch if it is indeed a problem in R.  (Against the R-devel sources,
please.)



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From lyongu+ at cs.cmu.edu  Sun Dec 21 02:58:16 2003
From: lyongu+ at cs.cmu.edu (Yong Lu)
Date: Sun Dec 21 02:57:04 2003
Subject: [Rd] ctrl-c/ctrl-break in windows port (PR#5970)
In-Reply-To: <Pine.LNX.4.44.0312210051500.3520-100000@gannet.stats>
References: <20031221003614.B3B7110475@slim.kubism.ku.dk>
	<Pine.LNX.4.44.0312210051500.3520-100000@gannet.stats>
Message-ID: <20031220.205816.58460755.lyongu+@cs.cmu.edu>

>>>>> "Prof" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    > Let me assure you that it *does* work as documented on the developers' 
    > machines, and on many others.

    > Note that you are asked to supply R version number, OS etc when submitting
    > a bug, and you have omitted to do so.  This just makes it harder to help
    > you.  One possibility is that you are running some other application on
    > your machine that is intercepting Ctrl-C: indeed it is possible that the
    > terminal window you are running Rterm in is doing so.  You haven't
    > supplied any details, so we cannot even guess.

It was my mistake forgetting to submit the version number.  The
version I'm using is 1.8.1.

And just found out you're right that it was another program causing
the problem.  I was running it in a cygwin bash shell, and apparently
bash caught the signal and terminated the program.  I just didn't
think of that.

    > On Sun, 21 Dec 2003 lyongu+@cs.cmu.edu wrote:

    >> It seems in Windows port, ctrl-c/ctrl-break in Rterm will kill the
    >> program and this behavior is different from its unix port and what is
    >> described in the Windows port FAQ.
    >> 
    >> These keys are supposed to stop the current computation instead of
    >> quitting the program.

    > Yes, we can read the documentation we wrote!  (Actually, to interrupt the 
    > computation at the next interruptible point.)

    >> Could you please fix it in the next release?

    > Perhaps you could tell us how to `fix it' as we cannot reproduce it?  
    > Since you apparently can, you will be able to debug the problem and submit
    > a patch if it is indeed a problem in R.  (Against the R-devel sources,
    > please.)

Hmm.. sorry for sounding a bit presumptuous here.  It turns out it's
cygwin's fault and I was blaming on the wrong people.  And thank you
for your very prompt and helpful reply!

- Yong

From sundard at pdf.com  Mon Dec 22 16:05:30 2003
From: sundard at pdf.com (sundard@pdf.com)
Date: Mon Dec 22 16:03:56 2003
Subject: [Rd] La.eigen hangs R when NaN is present (PR#6003)
Message-ID: <20031222150530.420DF104AE@slim.kubism.ku.dk>

Full_Name: Sundar Dorai-Raj
Version: 1.8.1
OS: Windows 2000 Professional
Submission from: (NULL) (12.64.199.173)


I discovered this problem when trying to use princomp in package:mva when a
column in my matrix was all zeros and I set cor = TRUE (thus division by 0).
Doing so hangs R, never to return. I have to shut down Rterm in the Task Manager
and lose all work from the current image. I tracked down the problem to using
La.eigen when the input matrix has one or more NaN. Note that eigen(x, sym =
TRUE) gives a sensible result without hanging R.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    8.1            
year     2003           
month    11             
day      21             
language R              
>
> x <- matrix(c(1, 1, 1, 0.5), 2, 2)
> x[1, 1] <- NaN
> x
     [,1] [,2]
[1,]  NaN  1.0
[2,]    1  0.5
> eigen(x, sym = TRUE)
$values
[1] NA NA

$vectors
[1] NA NA NA NA
> La.eigen(x, TRUE)
La.eigen(x, TRUE)

From ripley at stats.ox.ac.uk  Mon Dec 22 16:16:47 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec 22 16:15:32 2003
Subject: [Rd] La.eigen hangs R when NaN is present (PR#6003)
In-Reply-To: <20031222150530.420DF104AE@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312221514180.12281-100000@gannet.stats>

>From the NEWS for R-patched:

    o	Non-finite input values to eigen(), La.eigen(), svd() and
	La.svd() are now errors: they often caused infinite
	looping.  (PR#5406, PR#4366, PR#3723: the fix for 3723/4366
	returned a vector of NAs, not a matrix, for the eigenvectors.)

so this is already fixed (and your example works there).

On Mon, 22 Dec 2003 sundard@pdf.com wrote:

> Full_Name: Sundar Dorai-Raj
> Version: 1.8.1
> OS: Windows 2000 Professional
> Submission from: (NULL) (12.64.199.173)
> 
> 
> I discovered this problem when trying to use princomp in package:mva when a
> column in my matrix was all zeros and I set cor = TRUE (thus division by 0).
> Doing so hangs R, never to return. I have to shut down Rterm in the Task Manager
> and lose all work from the current image. I tracked down the problem to using
> La.eigen when the input matrix has one or more NaN. Note that eigen(x, sym =
> TRUE) gives a sensible result without hanging R.

It did give an incorrect result: the eigenvector `matrix' wasn't a matrix.


> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    8.1            
> year     2003           
> month    11             
> day      21             
> language R              
> >
> > x <- matrix(c(1, 1, 1, 0.5), 2, 2)
> > x[1, 1] <- NaN
> > x
>      [,1] [,2]
> [1,]  NaN  1.0
> [2,]    1  0.5
> > eigen(x, sym = TRUE)
> $values
> [1] NA NA
> 
> $vectors
> [1] NA NA NA NA
> > La.eigen(x, TRUE)
> La.eigen(x, TRUE)
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From wolfram at fischer-zim.ch  Mon Dec 22 17:30:49 2003
From: wolfram at fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Mon Dec 22 17:29:18 2003
Subject: [Rd] [R] lattice: levelplot: error: min not meaningful for factor
	(PR#6005)
Message-ID: <20031222163049.BFEB4104AC@slim.kubism.ku.dk>

R 1.8.1:

___COMMAND____________________________________________

levelplot( yield ~ year * variety | site, barley )


___ERROR_MESSAGE______________________________________

Error in Summary.factor(..., na.rm = na.rm) : 
        "min" not meaningful for factors

___COMMENT____________________________________________

levelplot( yield ~ as.numeric(year) * as.numeric(variety) | site, barley )
is working but the labels are nasty.

Best regards
Wolfram

From ripley at stats.ox.ac.uk  Mon Dec 22 17:52:06 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Dec 22 17:50:36 2003
Subject: (PR#6005) Re: [Rd] [R] lattice: levelplot: error: min not meaningful
In-Reply-To: <20031222163049.BFEB4104AC@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312221648390.12528-100000@gannet.stats>

>From the help page:

formula: a formula of the form 'z ~ x * y | g1 * g2 * ...', where 'z'
          is a numeric response, and 'x, y' are numeric values
          evaluated on a rectangular grid.

Please explain why you think that acting as documented necessitates a bug 
report?


On Mon, 22 Dec 2003 wolfram@fischer-zim.ch wrote:

> R 1.8.1:
> 
> ___COMMAND____________________________________________
> 
> levelplot( yield ~ year * variety | site, barley )
> 
> 
> ___ERROR_MESSAGE______________________________________
> 
> Error in Summary.factor(..., na.rm = na.rm) : 
>         "min" not meaningful for factors
> 
> ___COMMENT____________________________________________
> 
> levelplot( yield ~ as.numeric(year) * as.numeric(variety) | site, barley )
> is working but the labels are nasty.
> 
> Best regards
> Wolfram
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From deepayan at stat.wisc.edu  Mon Dec 22 18:22:25 2003
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Mon Dec 22 18:20:54 2003
Subject: (PR#6005) Re: [Rd] [R] lattice: levelplot: error: min not
	meaningful
Message-ID: <20031222172225.190A610456@slim.kubism.ku.dk>



Actually, this is supposed to work (and is given as an example in my DSC-2003 
paper), and at some point, did. It seems this was broken as a consequence of 
a careless change in panel.levelplot. The first 5 lines should have been

    label.style <- match.arg(label.style)
    x <- as.numeric(x[subscripts])
    y <- as.numeric(y[subscripts])
    minXwid <- min(diff(sort(unique(x))))
    minYwid <- min(diff(sort(unique(y))))

instead of

    label.style <- match.arg(label.style)
    minXwid <- min(diff(sort(unique(x))))
    minYwid <- min(diff(sort(unique(y))))
    x <- as.numeric(x[subscripts])
    y <- as.numeric(y[subscripts])

I'll fix it eventually, for now a workaround is to have

levelplot( yield ~ year * variety | site, barley, 
          panel = function(x, y, ...) {
              x <- as.numeric(x) 
              y <- as.numeric(y) 
              panel.levelplot(x, y, ...)
           })


Deepayan


On Monday 22 December 2003 10:52, Prof Brian Ripley wrote:
> From the help page:
>
> formula: a formula of the form 'z ~ x * y | g1 * g2 * ...', where 'z'
>           is a numeric response, and 'x, y' are numeric values
>           evaluated on a rectangular grid.
>
> Please explain why you think that acting as documented necessitates a bug
> report?
>
> On Mon, 22 Dec 2003 wolfram@fischer-zim.ch wrote:
> > R 1.8.1:
> >
> > ___COMMAND____________________________________________
> >
> > levelplot( yield ~ year * variety | site, barley )
> >
> >
> > ___ERROR_MESSAGE______________________________________
> >
> > Error in Summary.factor(..., na.rm = na.rm) :
> >         "min" not meaningful for factors
> >
> > ___COMMENT____________________________________________
> >
> > levelplot( yield ~ as.numeric(year) * as.numeric(variety) | site, barley
> > ) is working but the labels are nasty.
> >
> > Best regards
> > Wolfram
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From Simon.Urbanek at math.uni-augsburg.de  Mon Dec 22 19:53:21 2003
From: Simon.Urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Mon Dec 22 19:52:08 2003
Subject: [Rd] R-devel with Darwin: some issues (mostly due to latest
	R.framework changes)
Message-ID: <1D19D440-34B0-11D8-910D-000A957CEFBA@math.uni-augsburg.de>

Some issues with the recent R-devel (rsync today) on Darwin:

1) Recent R-devel is a bit misleading concerning the R-framework  
installation:
A new option --enable-R-framework was introduced, but  
install-Rframework ignores its absence (or --disable-R-framework for  
that matter) and tries to install the framework anyway in / which fails  
just after the R itself was copied into /Versions/.... I know, the user  
is to blame, but still, a simple check and stop (perhaps with a hint to  
use --enable-R-framework) would be nice.

2) Wrong -install_name:
configure.ac@1094:  LIBR_LDFLAGS="-dynamiclib -install_name  
${R_FRAMEWORK_DIR}/R.framework/Versions/${PACKAGE_VERSION}/Resources/ 
bin/libR.dylib -compatibility_version ${PACKAGE_VERSION}   
-current_version ${PACKAGE_VERSION}"

R_FRAMEWORK_DIR specifies the full path including the framework name,  
at least according to the previous definition:

configure.ac@154:
      if test "${want_R_framework}" = yes; then
	R_FRAMEWORK_DIR="/Library/Frameworks/R.framework"
       else
	R_FRAMEWORK_DIR="${want_R_framework}/R.framework"
	want_R_framework=yes
       fi

therefore R.framework should be removed from the path at line 1094

3) Chicken-and-egg problem:
There is a chicken-and-egg  problem if --enable-R-framework is used:
gcc -bundle -flat_namespace -undefined suppress -L/usr/local/lib -o  
R_X11.so  dataentry.lo devX11.lo rotated.lo rbitmap.lo  -lSM -lICE  
-L/usr/X11R6/lib -lX11   -framework R -lz -lreadline -lcc_dynamic  
-lncurses -lm
ld: can't locate framework for: -framework R
make[4]: *** [R_X11.so] Error 1

--enable-framework adds: LIBR="-framework R" [configure.ac@173] which  
is then used:
src/modules/X11/Makefile.in@36: R_X11_la_LIBADD = $(ALL_X_LIBS)  
$(BITMAP_LIBS) $(LIBR)

  If you installed R.framework previously, you're fine (well, fine in a  
sense that R is not compiled against its own version of the shared  
library as one would expect, but the currently installed R framework  
instead). If you have a clean system, it won't even build.

It is a touchy subject: during the compilation of R we cannot use the  
framework as-is, since there is none. On the other hand once installed,  
we want all packages to use -framework R.

A partial solution is to "fake" a non-installed framework:

Add following to the Makefile.in conditional for Darwin (probably  
somewhere around src/main/Makefile.in@160):
mkdir $(top_builddir)/bin/R.framework
ln -s ../libR.dylib $(top_builddir)/bin/R.framework/R

and add "-F$(top_builddir)/bin" to the LIBS
The addition of -F.. to LIBS should be temporary during the build of R  
only - I'm not sure if there is such a mechanism in the current R  
building process though ... if there isn't we could just add something  
like $(LIBS_BUILD) or similar to all modules that are built before  
install ...

A side note: unfortunately gcc doesn't honor DYLD_FRAMEWORK_PATH, so we  
cannot use that elegant solution :(

4) warnings - aqua module under construction?
I guess the aqua code is currently under construction, because it's  
probably compiled-in twice (in the libR and in aqua.so):
[...]
ld: warning multiple definitions of symbol _InitAquaIO
aquaconsole.lo definition of _InitAquaIO in section (__TEXT,__text)
/Work/R-builds/osx/r-devel/bin/R.framework/R(aqua.lo) definition of  
_InitAquaIO
[...many warnings of the same kind follow...]

I didn't invesitgate this further - if this is not intentional then I  
could have a look ... I suspect that this has something to do with  
Stefano's attempt to separate Carbon code (aqua+quartz) from the core R  
so it can be used from an external terminal w/o root privileges.

5) --enable vs. --with:
I have a rather general question about configure options: why use the  
name --"with"-aqua but --"enable"-R-framework ? I'm just curious: after  
--with-zlib --with-aqua I somehow expected --with-R-framework, but  
configure neither warns about an unrecognized option, nor does it take  
it as --enable-R-framework. Remember that R.framework isn't just a  
different way to install R/dylib, but in future it will also unlock the  
Obj-C code contained in the R.framework (hopefully) [i.e. to justify  
--with in case it is meant for additional stuff whereas --enable just  
pulls a lever somewhere ...].

Merry Xmas!
Simon

platform powerpc-apple-darwin7.2.0
arch     powerpc
os       darwin7.2.0
system   powerpc, darwin7.2.0
status   Under development (unstable)
major    1
minor    9.0
year     2003
month    12
day      22
language R

---
Simon Urbanek
Department of computer oriented statistics and data analysis
University of Augsburg
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2200

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From jago at mclink.it  Mon Dec 22 20:49:37 2003
From: jago at mclink.it (stefano iacus)
Date: Mon Dec 22 20:48:57 2003
Subject: [Rd] R-devel with Darwin: some issues (mostly due to latest
	R.framework changes)
In-Reply-To: <1D19D440-34B0-11D8-910D-000A957CEFBA@math.uni-augsburg.de>
Message-ID: <F9548CFA-34B7-11D8-8177-003065CC4CB8@mclink.it>


On Luned?, dic 22, 2003, at 19:53 Europe/Rome, Simon Urbanek wrote:

> Some issues with the recent R-devel (rsync today) on Darwin:
>
> 1) Recent R-devel is a bit misleading concerning the R-framework  
> installation:
> A new option --enable-R-framework was introduced, but  
> install-Rframework ignores its absence (or --disable-R-framework for  
> that matter) and tries to install the framework anyway in / which  
> fails just after the R itself was copied into /Versions/.... I know,  
> the user is to blame, but still, a simple check and stop (perhaps with  
> a hint to use --enable-R-framework) would be nice.
will do
>
> 2) Wrong -install_name:
> configure.ac@1094:  LIBR_LDFLAGS="-dynamiclib -install_name  
> ${R_FRAMEWORK_DIR}/R.framework/Versions/${PACKAGE_VERSION}/Resources/ 
> bin/libR.dylib -compatibility_version ${PACKAGE_VERSION}   
> -current_version ${PACKAGE_VERSION}"
>
> R_FRAMEWORK_DIR specifies the full path including the framework name,  
> at least according to the previous definition:
>
> configure.ac@154:
>      if test "${want_R_framework}" = yes; then
> 	R_FRAMEWORK_DIR="/Library/Frameworks/R.framework"
>       else
> 	R_FRAMEWORK_DIR="${want_R_framework}/R.framework"
> 	want_R_framework=yes
>       fi
>
> therefore R.framework should be removed from the path at line 1094
I've already fixed this
>
> 3) Chicken-and-egg problem:
> There is a chicken-and-egg  problem if --enable-R-framework is used:
> gcc -bundle -flat_namespace -undefined suppress -L/usr/local/lib -o  
> R_X11.so  dataentry.lo devX11.lo rotated.lo rbitmap.lo  -lSM -lICE  
> -L/usr/X11R6/lib -lX11   -framework R -lz -lreadline -lcc_dynamic  
> -lncurses -lm
> ld: can't locate framework for: -framework R
> make[4]: *** [R_X11.so] Error 1
>
> --enable-framework adds: LIBR="-framework R" [configure.ac@173] which  
> is then used:
> src/modules/X11/Makefile.in@36: R_X11_la_LIBADD = $(ALL_X_LIBS)  
> $(BITMAP_LIBS) $(LIBR)
>
>  If you installed R.framework previously, you're fine (well, fine in a  
> sense that R is not compiled against its own version of the shared  
> library as one would expect, but the currently installed R framework  
> instead). If you have a clean system, it won't even build.
I know that, this flag will only be inserted upon installation, I'm  
working on this.


>
> It is a touchy subject: during the compilation of R we cannot use the  
> framework as-is, since there is none. On the other hand once  
> installed, we want all packages to use -framework R.
>
> A partial solution is to "fake" a non-installed framework:
>
> Add following to the Makefile.in conditional for Darwin (probably  
> somewhere around src/main/Makefile.in@160):
> mkdir $(top_builddir)/bin/R.framework
> ln -s ../libR.dylib $(top_builddir)/bin/R.framework/R
>
> and add "-F$(top_builddir)/bin" to the LIBS
> The addition of -F.. to LIBS should be temporary during the build of R  
> only - I'm not sure if there is such a mechanism in the current R  
> building process though ... if there isn't we could just add something  
> like $(LIBS_BUILD) or similar to all modules that are built before  
> install ...
>
no, I think -framework R is only intended to be present in the R script  
which is installed inside the framework. I.e. only for an installed  
version of R. I don't like this fake solution because R uses  
$(builddir)/bin/R to build packages etc.

Kurt kindly apply these changes for me and I wasn't able to build  
R-devel these days because my machine was down and I needed a urgent  
backup.

> A side note: unfortunately gcc doesn't honor DYLD_FRAMEWORK_PATH, so  
> we cannot use that elegant solution :(
>
> 4) warnings - aqua module under construction?
> I guess the aqua code is currently under construction, because it's  
> probably compiled-in twice (in the libR and in aqua.so):
> [...]
> ld: warning multiple definitions of symbol _InitAquaIO
> aquaconsole.lo definition of _InitAquaIO in section (__TEXT,__text)
> /Work/R-builds/osx/r-devel/bin/R.framework/R(aqua.lo) definition of  
> _InitAquaIO
> [...many warnings of the same kind follow...]
>
I don?t have this. I did not apply changes yet.

> I didn't invesitgate this further - if this is not intentional then I  
> could have a look ... I suspect that this has something to do with  
> Stefano's attempt to separate Carbon code (aqua+quartz) from the core  
> R so it can be used from an external terminal w/o root privileges.
>
> 5) --enable vs. --with:
> I have a rather general question about configure options: why use the  
> name --"with"-aqua but --"enable"-R-framework ? I'm just curious:  
> after --with-zlib --with-aqua I somehow expected --with-R-framework,  
> but configure neither warns about an unrecognized option, nor does it  
> take it as --enable-R-framework. Remember that R.framework isn't just  
> a different way to install R/dylib, but in future it will also unlock  
> the Obj-C code contained in the R.framework (hopefully) [i.e. to  
> justify --with in case it is meant for additional stuff whereas  
> --enable just pulls a lever somewhere ...].
>
> Merry Xmas!
> Simon
>
> platform powerpc-apple-darwin7.2.0
> arch     powerpc
> os       darwin7.2.0
> system   powerpc, darwin7.2.0
> status   Under development (unstable)
> major    1
> minor    9.0
> year     2003
> month    12
> day      22
> language R
>
> ---
> Simon Urbanek
> Department of computer oriented statistics and data analysis
> University of Augsburg
> Universit?tsstr. 14
> 86135 Augsburg
> Germany
>
> Tel: +49-821-598-2236
> Fax: +49-821-598-2200
>
> Simon.Urbanek@Math.Uni-Augsburg.de
> http://simon.urbanek.info
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jago at mclink.it  Mon Dec 22 22:03:19 2003
From: jago at mclink.it (stefano iacus)
Date: Mon Dec 22 22:03:31 2003
Subject: [Rd] R-devel with Darwin: some issues (mostly due to latest
	R.framework changes)
In-Reply-To: <1D19D440-34B0-11D8-910D-000A957CEFBA@math.uni-augsburg.de>
Message-ID: <44FF4EEE-34C2-11D8-8177-003065CC4CB8@mclink.it>


On Luned?, dic 22, 2003, at 19:53 Europe/Rome, Simon Urbanek wrote:

> Some issues with the recent R-devel (rsync today) on Darwin:
>
> 1) Recent R-devel is a bit misleading concerning the R-framework  
> installation:
> A new option --enable-R-framework was introduced, but  
> install-Rframework ignores its absence (or --disable-R-framework for  
> that matter) and tries to install the framework anyway in / which  
> fails just after the R itself was copied into /Versions/.... I know,  
> the user is to blame, but still, a simple check and stop (perhaps with  
> a hint to use --enable-R-framework) would be nice.
>
> 2) Wrong -install_name:
> configure.ac@1094:  LIBR_LDFLAGS="-dynamiclib -install_name  
> ${R_FRAMEWORK_DIR}/R.framework/Versions/${PACKAGE_VERSION}/Resources/ 
> bin/libR.dylib -compatibility_version ${PACKAGE_VERSION}   
> -current_version ${PACKAGE_VERSION}"
>
> R_FRAMEWORK_DIR specifies the full path including the framework name,  
> at least according to the previous definition:
>
> configure.ac@154:
>      if test "${want_R_framework}" = yes; then
> 	R_FRAMEWORK_DIR="/Library/Frameworks/R.framework"
>       else
> 	R_FRAMEWORK_DIR="${want_R_framework}/R.framework"
> 	want_R_framework=yes
>       fi
>
> therefore R.framework should be removed from the path at line 1094
>
> 3) Chicken-and-egg problem:
> There is a chicken-and-egg  problem if --enable-R-framework is used:
> gcc -bundle -flat_namespace -undefined suppress -L/usr/local/lib -o  
> R_X11.so  dataentry.lo devX11.lo rotated.lo rbitmap.lo  -lSM -lICE  
> -L/usr/X11R6/lib -lX11   -framework R -lz -lreadline -lcc_dynamic  
> -lncurses -lm
> ld: can't locate framework for: -framework R
> make[4]: *** [R_X11.so] Error 1
>
> --enable-framework adds: LIBR="-framework R" [configure.ac@173] which  
> is then used:
> src/modules/X11/Makefile.in@36: R_X11_la_LIBADD = $(ALL_X_LIBS)  
> $(BITMAP_LIBS) $(LIBR)
>
>  If you installed R.framework previously, you're fine (well, fine in a  
> sense that R is not compiled against its own version of the shared  
> library as one would expect, but the currently installed R framework  
> instead). If you have a clean system, it won't even build.
>
> It is a touchy subject: during the compilation of R we cannot use the  
> framework as-is, since there is none. On the other hand once  
> installed, we want all packages to use -framework R.
>
> A partial solution is to "fake" a non-installed framework:
>
> Add following to the Makefile.in conditional for Darwin (probably  
> somewhere around src/main/Makefile.in@160):
> mkdir $(top_builddir)/bin/R.framework
> ln -s ../libR.dylib $(top_builddir)/bin/R.framework/R
>
> and add "-F$(top_builddir)/bin" to the LIBS
> The addition of -F.. to LIBS should be temporary during the build of R  
> only - I'm not sure if there is such a mechanism in the current R  
> building process though ... if there isn't we could just add something  
> like $(LIBS_BUILD) or similar to all modules that are built before  
> install ...
>
> A side note: unfortunately gcc doesn't honor DYLD_FRAMEWORK_PATH, so  
> we cannot use that elegant solution :(
>
> 4) warnings - aqua module under construction?
> I guess the aqua code is currently under construction, because it's  
> probably compiled-in twice (in the libR and in aqua.so):
> [...]
> ld: warning multiple definitions of symbol _InitAquaIO
> aquaconsole.lo definition of _InitAquaIO in section (__TEXT,__text)
> /Work/R-builds/osx/r-devel/bin/R.framework/R(aqua.lo) definition of  
> _InitAquaIO
> [...many warnings of the same kind follow...]
>

well, I forgot to mention that when building framework, R is not  
(accidentally) built a dylib, so I think this is causing what you see.  
In the strategy we have in mind, building R as a framework implies R to  
be a shlib.

stefano

> I didn't invesitgate this further - if this is not intentional then I  
> could have a look ... I suspect that this has something to do with  
> Stefano's attempt to separate Carbon code (aqua+quartz) from the core  
> R so it can be used from an external terminal w/o root privileges.
>
> 5) --enable vs. --with:
> I have a rather general question about configure options: why use the  
> name --"with"-aqua but --"enable"-R-framework ? I'm just curious:  
> after --with-zlib --with-aqua I somehow expected --with-R-framework,  
> but configure neither warns about an unrecognized option, nor does it  
> take it as --enable-R-framework. Remember that R.framework isn't just  
> a different way to install R/dylib, but in future it will also unlock  
> the Obj-C code contained in the R.framework (hopefully) [i.e. to  
> justify --with in case it is meant for additional stuff whereas  
> --enable just pulls a lever somewhere ...].
>
> Merry Xmas!
> Simon
>
> platform powerpc-apple-darwin7.2.0
> arch     powerpc
> os       darwin7.2.0
> system   powerpc, darwin7.2.0
> status   Under development (unstable)
> major    1
> minor    9.0
> year     2003
> month    12
> day      22
> language R
>
> ---
> Simon Urbanek
> Department of computer oriented statistics and data analysis
> University of Augsburg
> Universit?tsstr. 14
> 86135 Augsburg
> Germany
>
> Tel: +49-821-598-2236
> Fax: +49-821-598-2200
>
> Simon.Urbanek@Math.Uni-Augsburg.de
> http://simon.urbanek.info
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From BoersN at pac.dfo-mpo.gc.ca  Wed Dec 24 05:49:43 2003
From: BoersN at pac.dfo-mpo.gc.ca (BoersN@pac.dfo-mpo.gc.ca)
Date: Wed Dec 24 05:48:09 2003
Subject: [Rd] par(mgp) - unexpected behaviour (PR#6045)
Message-ID: <20031224044943.795451042D@slim.kubism.ku.dk>

Full_Name: Nicholas Boers
Version: 1.8.1
OS: Windows XP Home Edition, Debian GNU/Linux 3.0
Submission from: (NULL) (24.68.84.10)


mgp[2] specifies the axis labels' margin line relative to that of the axis line
(mgp[3]).  The `par' help does not document this behaviour.

The following code demonstrates my observation:
  plot.new();
  par(mgp = c(3, 2, 1));
  box();
  title(xlab = "x");
  axis(1);

Based on the R documentation, combined with S-PLUS' behaviour, I would expect R
to plot the axis labels and title at lines 2 and 3, respectively.  However, it
plots both at line 3.
 
The relevant section of the `par' documentation states:
  'mgp' The margin line (in 'mex' units) for the axis title, axis
        labels and axis line. The default is 'c(3, 1, 0)'.

Thank-you for your time and considering this bug report.

From BoersN at pac.dfo-mpo.gc.ca  Wed Dec 24 06:08:01 2003
From: BoersN at pac.dfo-mpo.gc.ca (BoersN@pac.dfo-mpo.gc.ca)
Date: Wed Dec 24 06:06:29 2003
Subject: [Rd] par(mgp) - unexpected behaviour (PR#6046)
Message-ID: <20031224050801.A9BA71042D@slim.kubism.ku.dk>

Full_Name: Nicholas Boers
Version: 1.8.1
OS: Windows XP Home Edition, Debian GNU/Linux 3.0
Submission from: (NULL) (24.68.84.10)


mgp[2] specifies the axis labels' margin line relative to that of the axis line
(mgp[3]).  The `par' help does not document this behaviour.

The following code demonstrates my observation:
  plot.new();
  par(mgp = c(3, 2, 1));
  box();
  title(xlab = "x");
  axis(1);

Based on the R documentation, combined with S-PLUS' behaviour, I would expect R
to plot the axis labels and title at lines 2 and 3, respectively.  However, it
plots both at line 3.
 
The relevant section of the `par' documentation states:
  'mgp' The margin line (in 'mex' units) for the axis title, axis
        labels and axis line. The default is 'c(3, 1, 0)'.

Thank-you for your time and considering this bug report.

From ligges at statistik.uni-dortmund.de  Wed Dec 24 13:04:09 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Dec 24 13:00:00 2003
Subject: [Rd] par(mgp) - unexpected behaviour (PR#6046)
References: <20031224050801.A9BA71042D@slim.kubism.ku.dk>
Message-ID: <3FE980B9.AFC73EF4@statistik.uni-dortmund.de>



BoersN@pac.dfo-mpo.gc.ca wrote:
> 
> Full_Name: Nicholas Boers
> Version: 1.8.1
> OS: Windows XP Home Edition, Debian GNU/Linux 3.0
> Submission from: (NULL) (24.68.84.10)
> 
> mgp[2] specifies the axis labels' margin line relative to that of the axis line
> (mgp[3]).  The `par' help does not document this behaviour.
> 
> The following code demonstrates my observation:
>   plot.new();
>   par(mgp = c(3, 2, 1));
>   box();
>   title(xlab = "x");
>   axis(1);
> 
> Based on the R documentation, combined with S-PLUS' behaviour, I would expect R
> to plot the axis labels and title at lines 2 and 3, respectively.  However, it
> plots both at line 3.
> 
> The relevant section of the `par' documentation states:
>   'mgp' The margin line (in 'mex' units) for the axis title, axis
>         labels and axis line. The default is 'c(3, 1, 0)'.
> 
> Thank-you for your time and considering this bug report.


The margin line number of axis labels is *relative* to the line number
of the axis line, hence not a bug (or if a bug, then a too sparse
documentation of par(mgp)).


Uwe Ligges

BTW: Don't submit bug reports twice (already submitted as PR#6045
before).

From ripley at stats.ox.ac.uk  Wed Dec 24 13:39:36 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Dec 24 13:38:08 2003
Subject: [Rd] par(mgp) - unexpected behaviour (PR#6045)
In-Reply-To: <3FE980B9.AFC73EF4@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.44.0312241230140.18815-100000@gannet.stats>

I think this *is* a bug in the sense that it is not as intended.  The code 
takes mgp[2] as an alternative way to specify `line' to axis().
That's not what happens in the S original, and it is not what happens with 
mgp[1] (which is always absolute).  So I've altered it to be consistent 
with S (and at least two people's reading of the documentation).

Sending two bug reports is a bug, though.

On Wed, 24 Dec 2003, Uwe Ligges wrote:

> BoersN@pac.dfo-mpo.gc.ca wrote:
> > 
> > Full_Name: Nicholas Boers
> > Version: 1.8.1
> > OS: Windows XP Home Edition, Debian GNU/Linux 3.0
> > Submission from: (NULL) (24.68.84.10)
> > 
> > mgp[2] specifies the axis labels' margin line relative to that of the axis line
> > (mgp[3]).  The `par' help does not document this behaviour.
> > 
> > The following code demonstrates my observation:
> >   plot.new();
> >   par(mgp = c(3, 2, 1));
> >   box();
> >   title(xlab = "x");
> >   axis(1);
> > 
> > Based on the R documentation, combined with S-PLUS' behaviour, I would expect R
> > to plot the axis labels and title at lines 2 and 3, respectively.  However, it
> > plots both at line 3.
> > 
> > The relevant section of the `par' documentation states:
> >   'mgp' The margin line (in 'mex' units) for the axis title, axis
> >         labels and axis line. The default is 'c(3, 1, 0)'.
> > 
> > Thank-you for your time and considering this bug report.
> 
> 
> The margin line number of axis labels is *relative* to the line number
> of the axis line, hence not a bug (or if a bug, then a too sparse
> documentation of par(mgp)).
> 
> 
> Uwe Ligges
> 
> BTW: Don't submit bug reports twice (already submitted as PR#6045
> before).
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Dec 24 13:39:41 2003
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Dec 24 13:38:27 2003
Subject: [Rd] par(mgp) - unexpected behaviour (PR#6045)
Message-ID: <20031224123941.3D95210425@slim.kubism.ku.dk>

I think this *is* a bug in the sense that it is not as intended.  The code 
takes mgp[2] as an alternative way to specify `line' to axis().
That's not what happens in the S original, and it is not what happens with 
mgp[1] (which is always absolute).  So I've altered it to be consistent 
with S (and at least two people's reading of the documentation).

Sending two bug reports is a bug, though.

On Wed, 24 Dec 2003, Uwe Ligges wrote:

> BoersN@pac.dfo-mpo.gc.ca wrote:
> > 
> > Full_Name: Nicholas Boers
> > Version: 1.8.1
> > OS: Windows XP Home Edition, Debian GNU/Linux 3.0
> > Submission from: (NULL) (24.68.84.10)
> > 
> > mgp[2] specifies the axis labels' margin line relative to that of the axis line
> > (mgp[3]).  The `par' help does not document this behaviour.
> > 
> > The following code demonstrates my observation:
> >   plot.new();
> >   par(mgp = c(3, 2, 1));
> >   box();
> >   title(xlab = "x");
> >   axis(1);
> > 
> > Based on the R documentation, combined with S-PLUS' behaviour, I would expect R
> > to plot the axis labels and title at lines 2 and 3, respectively.  However, it
> > plots both at line 3.
> > 
> > The relevant section of the `par' documentation states:
> >   'mgp' The margin line (in 'mex' units) for the axis title, axis
> >         labels and axis line. The default is 'c(3, 1, 0)'.
> > 
> > Thank-you for your time and considering this bug report.
> 
> 
> The margin line number of axis labels is *relative* to the line number
> of the axis line, hence not a bug (or if a bug, then a too sparse
> documentation of par(mgp)).
> 
> 
> Uwe Ligges
> 
> BTW: Don't submit bug reports twice (already submitted as PR#6045
> before).
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dmurdoch at pair.com  Wed Dec 24 19:57:44 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed Dec 24 19:56:25 2003
Subject: [Rd] Questions and suggestions about namespaces
Message-ID: <2jnjuv0ikq5gk5825pg3kru6ga0mprqqds@4ax.com>

I'm trying to add a namespace to my orientlib package.  It makes use
of S4 methods.

A few questions, and a couple of suggestions:

1.  Is there a way to put version dependency into the NAMESPACE file?
I need to import something from stats in r-devel, but (of course) I
get an error when using the same import directive in r-patched and
earlier versions, because there is no stats package.

2.  Without the namespace, orientlib passes Rcmd CHECK, but when I put
in the namespace in and check in r-patched or r-devel, it fails
running the first example, with the error message

>> x <- eulerzyx(psi=c(0,pi/4,0,0), theta=c(0,0,pi/4,0), phi=c(0,0,0,pi/4))
>Error in getClass(superClass) : "orientation" is not a defined class
>Execution halted

Is there something I need to do to make sure the classes get exported?

3.  Is it necessary to import(methods)?  I'm using S4 methods, but my
functions and methods don't make use of the methods package other than
in their own definition.

4.  When running CHECK in r-patched, I got the following inscrutable
errors:

>* checking S3 generic/method consistency ... WARNING
>Error in .tryQuietly({ : Error in library(package, lib.loc = lib.loc, character.
>only = TRUE, verbose = FALSE) :
>        package/namespace load failed
>Execution halted
>* checking for replacement functions with final arg not named 'value' ... WARNIN
>G
>Error in .tryQuietly({ : Error in library(package, lib.loc = lib.loc, character.
>only = TRUE, verbose = FALSE) :
>        package/namespace load failed
>Execution halted
>* checking Rd files ... OK
>* checking for missing documentation entries ... ERROR
>Error in .tryQuietly({ : Error in library(package, lib.loc = lib.loc, character.
>only = TRUE, verbose = FALSE) :

These were caused because I was trying to export a class name in
working around 2.  The package installed fine with this error, but
when trying to use it I got

>> library(orientlib)
>Error in namespaceExport(ns, exports) : undefined exports: orientation
>Error in library(orientlib) : package/namespace load failed

Suggestion:  the CHECK script should print all errors, not just the
last one, and perhaps should have a check that a namespace can load
properly.

5.  Another suggestion:  even though import(), export() etc. aren't
really functions, it would be nice if "?import" and friends worked to
bring up a man page explaining the syntax and the details.

Duncan Murdoch

From ggrothendieck at myway.com  Thu Dec 25 15:14:30 2003
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Thu Dec 25 15:13:29 2003
Subject: [Rd] problem with pipes (PR#5053)
Message-ID: <20031225141430.B41C6396E@mprdmxin.myway.com>



I gather that the pipe problem is a difficult one to solve
since its highly desirable (at least for me) to be able to
use Windows pipes yet its been outstanding since the previous
R release.

I have one idea on a possible workaround and associated 
feature and I wonder if this feature is feasible?  
I just noticed that

z <- system("c:\\a.bat", intern = TRUE, invisible = TRUE)

is similar in function to:

z <- readLines(pipe("c:\\a.bat"))

One problem is that it appears to return both stdout and stderr.
Would the underlying Windows system call that is used by
the R command, system, allow for specification of a flag 
that determines whether stdout, stderr or both are returned?
If so, adding access to this flag from the R level, e.g.

z <- system("c:\\a.bat", intern = T, invisible = T, 
                 stderr = F, stdout = T)

might be sufficient for this to be used in place of pipes
in many applications.

----
[Rd] problem with pipes (PR#5053)
ggrothendieck at myway.com ggrothendieck at myway.com 
Wed Nov 12 23:43:35 MET 2003 

Full_Name: Gabor Grothendieck
Version: 1.8.0
OS: Windows 2000 Pro
Submission from: (NULL) (67.68.47.99)



In R 1.8.0 on Windows 2000 suppose that \a.bat contains the following two
lines:

net /? 
dir \winnt

which constitutes a simple batch file which 
1. writes a help message about the built in Windows net command to stderr and 
2. does a dir on the built in Windows directory WINNT writing result to stdout

You can replace #1 with any other command which outputs to stderr and #2 with
any other command that outputs to stdout.  I just chose those commands since
they come with Windows.

If you start up R and run a pipe which executes \a.bat one gets
the following werid behavior on Windows 2000:

> readLines(pipe("\\a.bat"))
 [1] ""                                                                    
 [2] "C:\\Program Files\\R\\rw1080>net /? "                                 
 [3] "The syntax of this command is:"                                       
 [4] ""                                                                     
 [5] ""                                                                     
 [6] ""                                                                     
 [7] ""                                                                     
 [8] "NET [ ACCOUNTS | COMPUTER | CONFIG | CONTINUE | FILE | GROUP | HELP |"
 [9] "      HELPMSG | LOCALGROUP | NAME | PAUSE | PRINT | SEND | SESSION |" 
[10] "      SHARE | START | STATISTICS | STOP | TIME | USE | USER | VIEW ]" 
[11] ""                                                                     
[12] ""                                                                     
[13] "C:\\Program Files\\R\\rw1080>dir \\a.bat "                            
[14] " Volume in drive C has no label."                                     
[15] " Volume Serial Number is 07D1-011A"                                   
[16] ""                                                                     
[17] " Directory of C:\\"                                                   
[18] ""                                                                     
[19] "11/12/2003  05:07p                  20 a.bat"                         
[20] "               1 File(s)             20 bytes"                        
[21] "               0 Dir(s)     484,712,448 bytes free"  


There are several problems:

1. I am getting both the stderr (the output from net /?) and the stdout
   (the output from dir).

2. The first line contains a weird character.  This character changes if
I perform the R command multiple times.

3. Usually I get the above but sometimes I get no output from readLines at
all.

I found this when I was trying to pipe output from a command (not the above
batch file which is just an simpler example) to R and finally traced it the 
above.

The above is sufficiently serious that I can't use pipes in R currently
on Windows 2000.

I am using R 1.8.0 but R 1.7.1 gives the same.

I had previously posted a version of this to r-help just to verify whether it
was a bug or not but no one answered so I guess it is.  My r-help message
used gawk instead of a batch file to illustrate this behavior.  See:

https://www.stat.math.ethz.ch/pipermail/r-help/2003-November/040426.html

From dmurdoch at pair.com  Thu Dec 25 18:57:23 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Dec 25 18:56:03 2003
Subject: [Rd] problem with pipes (PR#5053)
In-Reply-To: <Pine.A41.4.58.0311130826560.16620@homer31.u.washington.edu>
References: <20031112224335.E312BEFB8@slim.kubism.ku.dk>
	<Pine.A41.4.58.0311130826560.16620@homer31.u.washington.edu>
Message-ID: <hr7muvgqpf02ldfligerp98t2f8a7ellb8@4ax.com>

On Thu, 13 Nov 2003 08:29:58 -0800 (PST), you wrote:

>On Wed, 12 Nov 2003 ggrothendieck@myway.com wrote:
>>
>> 3. Usually I get the above but sometimes I get no output from readLines at
>> all.
>>
>
>This last problem may be the same as PR#1140 on the Mac, where popen()
>calls sometimes got killed by an interrupt.

No, this was a Windows-specific thing.  The connection wasn't
initialized properly, so sometimes it thought a null character had
been pushed back.

I'll be committing patches to src/gnuwin32/run.c in r-patched and
r-devel shortly.

Duncan Murdoch

From dmurdoch at pair.com  Thu Dec 25 18:57:39 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Thu Dec 25 18:56:20 2003
Subject: [Rd] problem with pipes (PR#5053)
Message-ID: <20031225175739.BA8AB10426@slim.kubism.ku.dk>

On Thu, 13 Nov 2003 08:29:58 -0800 (PST), you wrote:

>On Wed, 12 Nov 2003 ggrothendieck@myway.com wrote:
>>
>> 3. Usually I get the above but sometimes I get no output from readLines at
>> all.
>>
>
>This last problem may be the same as PR#1140 on the Mac, where popen()
>calls sometimes got killed by an interrupt.

No, this was a Windows-specific thing.  The connection wasn't
initialized properly, so sometimes it thought a null character had
been pushed back.

I'll be committing patches to src/gnuwin32/run.c in r-patched and
r-devel shortly.

Duncan Murdoch

From dmurdoch at pair.com  Fri Dec 26 13:11:55 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri Dec 26 13:10:22 2003
Subject: [Rd] Questions and suggestions about namespaces
In-Reply-To: <2jnjuv0ikq5gk5825pg3kru6ga0mprqqds@4ax.com>
References: <2jnjuv0ikq5gk5825pg3kru6ga0mprqqds@4ax.com>
Message-ID: <vj5nuvgg954uadmm1qgnuba4p7ul0h39g0@4ax.com>

On Wed, 24 Dec 2003 13:57:44 -0500, I wrote:

>Is there something I need to do to make sure the classes get exported?

Yes, there are "exportClasses" and "exportMethods" directives that
need to be in the NAMESPACE file, but so far they are only documented
in messages to this list.

Duncan Murdoch

From tlumley at u.washington.edu  Fri Dec 26 19:10:38 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Dec 26 19:09:19 2003
Subject: [Rd] problem with pipes (PR#5053)
In-Reply-To: <hr7muvgqpf02ldfligerp98t2f8a7ellb8@4ax.com>
References: <20031112224335.E312BEFB8@slim.kubism.ku.dk>
	<Pine.A41.4.58.0311130826560.16620@homer31.u.washington.edu>
	<hr7muvgqpf02ldfligerp98t2f8a7ellb8@4ax.com>
Message-ID: <Pine.A41.4.58.0312261007170.35014@homer30.u.washington.edu>

On Thu, 25 Dec 2003, Duncan Murdoch wrote:

> On Thu, 13 Nov 2003 08:29:58 -0800 (PST), you wrote:
>
> >On Wed, 12 Nov 2003 ggrothendieck@myway.com wrote:
> >>
> >> 3. Usually I get the above but sometimes I get no output from readLines at
> >> all.
> >>
> >
> >This last problem may be the same as PR#1140 on the Mac, where popen()
> >calls sometimes got killed by an interrupt.
>
> No, this was a Windows-specific thing.  The connection wasn't
> initialized properly, so sometimes it thought a null character had
> been pushed back.
>

In that case the problems I have been having with system() on Win2k must
be something else (under Rgui but not Rterm the process seems to get
killed immediately -- the `dos box' window appears and disappears and the
program doesn't get as far as opening its log file).

	-thomas

From p.dalgaard at biostat.ku.dk  Sun Dec 28 20:47:18 2003
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sun Dec 28 20:47:18 2003
Subject: [Rd] Bug repository problem (PR#6167)
Message-ID: <20031228194718.822F910494@slim.kubism.ku.dk>

Full_Name: Peter Dalgaard
Version: -irrelevant-
OS: -Linux/Mozilla 1.4-
Submission from: (NULL) (80.199.16.96)


It has been reported that after sending a report and returning to the main page,
refreshing the main page (obviously a natural thing to want to do) resends the
report as a duplicate. This is an attempt at reproducing said incorrect
behaviour.

From p.dalgaard at biostat.ku.dk  Sun Dec 28 20:57:10 2003
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sun Dec 28 20:55:34 2003
Subject: [Rd] Bug repository problem (PR#6168)
Message-ID: <20031228195710.454E810495@slim.kubism.ku.dk>

Full_Name: Peter Dalgaard
Version: -irrelevant-
OS: -Linux/Mozilla 1.4-
Submission from: (NULL) (80.199.16.96)


It has been reported that after sending a report and returning to the main page,
refreshing the main page (obviously a natural thing to want to do) resends the
report as a duplicate. This is an attempt at reproducing said incorrect
behaviour.

From p.dalgaard at biostat.ku.dk  Sun Dec 28 21:03:18 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Dec 28 21:01:33 2003
Subject: [Rd] Bug repository problem (PR#6168)
In-Reply-To: <20031228195710.454E810495@slim.kubism.ku.dk>
References: <20031228195710.454E810495@slim.kubism.ku.dk>
Message-ID: <x2ekuoyak9.fsf@biostat.ku.dk>

p.dalgaard@biostat.ku.dk writes:

> Full_Name: Peter Dalgaard
> Version: -irrelevant-
> OS: -Linux/Mozilla 1.4-
> Submission from: (NULL) (80.199.16.96)
> 
> 
> It has been reported that after sending a report and returning to the main page,
> refreshing the main page (obviously a natural thing to want to do) resends the
> report as a duplicate. This is an attempt at reproducing said incorrect
> behaviour.

OK, I see it. Mozilla does give a warning about "the page contains a
POSTDATA command, if you resend ... any action will be repeated..."
though. Is this any different with other browsers? And, more
importantly, is there a (simple, please) way to avoid it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From kleiweg at let.rug.nl  Sun Dec 28 21:13:33 2003
From: kleiweg at let.rug.nl (Peter Kleiweg)
Date: Sun Dec 28 21:11:59 2003
Subject: [Rd] Bug repository problem (PR#6168)
In-Reply-To: <x2ekuoyak9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0312282106330.1095-100000@kleigh.nl>

# aldus Peter Dalgaard :

>
> OK, I see it. Mozilla does give a warning about "the page contains a
> POSTDATA command, if you resend ... any action will be repeated..."
> though. Is this any different with other browsers? And, more
> importantly, is there a (simple, please) way to avoid it?

Don't give the user a reason to use the back-button. Perhaps,
do something like:

   on.click( post(); alert("bug report sent"); history.go(-2); )


-- 
Peter Kleiweg

From p.dalgaard at biostat.ku.dk  Sun Dec 28 21:42:46 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Dec 28 21:41:00 2003
Subject: [Rd] Bug repository problem (PR#6168)
In-Reply-To: <Pine.LNX.4.44.0312282106330.1095-100000@kleigh.nl>
References: <Pine.LNX.4.44.0312282106330.1095-100000@kleigh.nl>
Message-ID: <x2ad5cy8qh.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> # aldus Peter Dalgaard :
> 
> >
> > OK, I see it. Mozilla does give a warning about "the page contains a
> > POSTDATA command, if you resend ... any action will be repeated..."
> > though. Is this any different with other browsers? And, more
> > importantly, is there a (simple, please) way to avoid it?
> 
> Don't give the user a reason to use the back-button. Perhaps,
> do something like:
> 
>    on.click( post(); alert("bug report sent"); history.go(-2); )

But this never goes near Java. It's all forms based, so the code that
does this is in a C program which says:

        < whopping big if construct>
        .....
        } else if (cgi_variable("newbug")) {
                print_title("%s - bug submission", lp_title());

                compose_bug_report();

        } else {
                print_title("%s - main page", lp_title());

                if (cgi_variable("sendbugreport")) {
                  send_bug_report();
                }
                main_page();
        }

        print_footer();

Hmm,.... send_bug_report, just sends a mail, then outputs

"<b>Submission successful</b><p>\n" 

changing the conditionals a bit and putting in an explicit "OK" button
to get back to the main page (or just put a link to the main page)
might do the trick?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From dmurdoch at pair.com  Mon Dec 29 20:40:45 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Dec 29 20:39:12 2003
Subject: [Rd] What version is sh?
Message-ID: <pk01vv4pgvelved3i5eljj0etfooen89ig@4ax.com>

I'm trying to write an automatic check of the toolset installation for
R.  It'll get all the tools to print their version numbers, and
complain if they aren't acceptable ones.

However, I can't see how to get sh to print version information.  Is
there some way to do it?

The sh I'm worried about is the one that comes with Cygwin, if there
isn't a standard approach.

Duncan Murdoch

From dmurdoch at pair.com  Tue Dec 30 01:06:00 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue Dec 30 01:04:28 2003
Subject: [Rd] What version is sh?
In-Reply-To: <pk01vv4pgvelved3i5eljj0etfooen89ig@4ax.com>
References: <pk01vv4pgvelved3i5eljj0etfooen89ig@4ax.com>
Message-ID: <nsf1vvkfj6uj5q7u99m5dqqm2jaa6r4p4d@4ax.com>

On Mon, 29 Dec 2003 14:40:45 -0500, I wrote:

>I'm trying to write an automatic check of the toolset installation for
>R.  It'll get all the tools to print their version numbers, and
>complain if they aren't acceptable ones.
>
>However, I can't see how to get sh to print version information.  Is
>there some way to do it?
>
>The sh I'm worried about is the one that comes with Cygwin, if there
>isn't a standard approach.

Several people suggested the GNU standard "--version" command line
option, which works for most of the Cygwin utilities, but not this
one.  Dirk Eddelbeuttel said

>I'd suspect that it is one of the small shells which e.g. Debian calls them
>ash and dash; these are used on boot floppies and the like where space is at
>a premium.  As a consequence, they may not support all full-blown
>command-line options. So to test the shell, you may need to run a small
>shell script containing the features you want to make use of later.

I think it must be one of those.  The executable is about 1/8 the size
of the bash executable.

Duncan Murdoch

From Nick.Efthymiou at schwab.com  Tue Dec 30 01:57:20 2003
From: Nick.Efthymiou at schwab.com (Nick.Efthymiou@schwab.com)
Date: Tue Dec 30 01:55:46 2003
Subject: [Rd] Accuracy: Correct sums in rowSums(), colSums() (PR#6196)
Message-ID: <20031230005720.9CEC71044D@slim.kubism.ku.dk>

Full_Name: Nick Efthymiou
Version: R1.5.0 and above
OS: Red Hat Linux 
Submission from: (NULL) (162.93.14.73)


With the introduction of the functions rowSums(), colSums(), rowMeans() and
colMeans() in R1.5.0, function "SEXP do_colsum(SEXP call, SEXP op, SEXP args,
SEXP rho)" was added to perform the fast summations. We have an excellent
opportunity to improve the accuracy by implementing Kahan summation here.

Kahan summation is described in 

@article{ goldberg91what,
    author = "David Goldberg",
    title = "What Every Computer Scientist Should Know About Floating-Point
Arithmetic",
    journal = "ACM Computing Surveys",
    volume = "23",
    number = "1",
    pages = "5--48",
    year = "1991",
    url = "citeseer.nj.nec.com/goldberg91what.html" }


(http://citeseer.nj.nec.com/goldberg91what.html)

and in the article "Floating-point Summation", by Evan Manning, in C/C++ User's
Journal, Sept. 1996.

The proposed improvement has been tested in !IEEE_754 mode, the patch is
attached.
It is intended to be applied against R-1.7.1/src/main/array.c

--------- Cut here ----------
*** array.c.old	Mon Dec 15 17:33:23 2003
--- array.c	Mon Dec 15 17:33:45 2003
***************
*** 1016,1022 ****
      int OP, n, p, cnt = 0, i, j, type;
      Rboolean NaRm, keepNA;
      int *ix;
!     double *rx, sum = 0.0;
  
      checkArity(op, args);
      x = CAR(args); args = CDR(args);
--- 1016,1022 ----
      int OP, n, p, cnt = 0, i, j, type;
      Rboolean NaRm, keepNA;
      int *ix;
!     double *rx, sum = 0.0, correction = 0.0;
  
      checkArity(op, args);
      x = CAR(args); args = CDR(args);
***************
*** 1046,1062 ****
  	    switch (type) {
  	    case REALSXP:
  		rx = REAL(x) + n*j;
  #ifdef IEEE_754
  		if (keepNA)
! 		    for (sum = 0., i = 0; i < n; i++) sum += *rx++;
  		else {
! 		    for (cnt = 0, sum = 0., i = 0; i < n; i++, rx++)
! 			if (!ISNAN(*rx)) {cnt++; sum += *rx;}
  			else if (keepNA) {sum = NA_REAL; break;}
  		}
  #else
! 		for (cnt = 0, sum = 0., i = 0; i < n; i++, rx++)
! 		    if (!ISNAN(*rx)) {cnt++; sum += *rx;}
  		    else if (keepNA) {sum = NA_REAL; break;}
  #endif
  		break;
--- 1046,1082 ----
  	    switch (type) {
  	    case REALSXP:
  		rx = REAL(x) + n*j;
+ 		sum = 0.;
  #ifdef IEEE_754
  		if (keepNA)
! 		    for (i = 0; i < n; i++) sum += *rx++;
  		else {
! 		    for (cnt = 0, i = 0; i < n; i++, rx++)
! 			if (!ISNAN(*rx)) {
! 				/* TODO: Kahan summation */
! 				cnt++; sum += *rx;
! 			}
  			else if (keepNA) {sum = NA_REAL; break;}
  		}
  #else
! 		i = cnt = 0;
! 		if (i < n) {
! 		    if (ISNAN(*rx)) {
! 			if (keepNA) {sum = NA_REAL; break /* switch */;}
! 		    } else {
! 			cnt++; sum = *rx;
! 		    }
! 		    i++; rx++;
! 		}
! 		for (; i < n; i++, rx++)
! 		    if (!ISNAN(*rx)) {
! 			/* Kahan summation */
! 			double yhilo = *rx - correction;
! 			double tsum = sum + yhilo;
! 			correction = (tsum - sum) - yhilo;
! 			sum = tsum;
! 			cnt++;
! 		    }
  		    else if (keepNA) {sum = NA_REAL; break;}
  #endif
  		break;
***************
*** 1121,1137 ****
  	    switch (type) {
  	    case REALSXP:
  		rx = REAL(x) + i;
  #ifdef IEEE_754
  		if (keepNA)
! 		    for (sum = 0., j = 0; j < p; j++, rx += n) sum += *rx;
  		else {
! 		    for (cnt = 0, sum = 0., j = 0; j < p; j++, rx += n)
! 			if (!ISNAN(*rx)) {cnt++; sum += *rx;}
  			else if (keepNA) {sum = NA_REAL; break;}
  		}
  #else
! 		for (cnt = 0, sum = 0., j = 0; j < p; j++, rx += n)
! 		    if (!ISNAN(*rx)) {cnt++; sum += *rx;}
  		    else if (keepNA) {sum = NA_REAL; break;}
  #endif
  		break;
--- 1141,1177 ----
  	    switch (type) {
  	    case REALSXP:
  		rx = REAL(x) + i;
+ 		sum = 0.;
  #ifdef IEEE_754
  		if (keepNA)
! 		    for (j = 0; j < p; j++, rx += n) sum += *rx;
  		else {
! 		    for (cnt = 0, j = 0; j < p; j++, rx += n)
! 			if (!ISNAN(*rx)) {
! 				/* TODO: Kahan summation */
! 				cnt++; sum += *rx;
! 			}
  			else if (keepNA) {sum = NA_REAL; break;}
  		}
  #else
! 		j = cnt = 0;
! 		if (j < p) {
! 		    if (ISNAN(*rx)) {
! 			if (keepNA) {sum = NA_REAL; break /* switch */;}
! 		    } else {
! 			cnt++; sum = *rx;
! 		    }
! 		    j++; rx += n;
! 		}
! 		for (; j < p; j++, rx += n)
! 		    if (!ISNAN(*rx)) {
! 			/* Kahan summation */
! 			double yhilo = *rx - correction;
! 			double tsum = sum + yhilo;
! 			correction = (tsum - sum) - yhilo;
! 			sum = tsum;
! 			cnt++;
! 		    }
  		    else if (keepNA) {sum = NA_REAL; break;}
  #endif
  		break;
---------end of patch -------


Since someone is certainly wondering why I bothered to bring this up - I was
trying to optimize the order of a Chebyshev approximation to a specific function
so that I accomplish the most power-efficient calculation at one ulp accuracy
(multiplications and additions consume battery power). The optimization was
based on minimizing the relative error between the true function and the
approximation. It involved a lot of sums and was not converging properly. With
the patch, I got the convergence I needed.

Thanks,

- Nick -

From ldimitro at wfubmc.edu  Tue Dec 30 03:23:59 2003
From: ldimitro at wfubmc.edu (Latchezar Dimitrov)
Date: Tue Dec 30 03:23:54 2003
Subject: [Rd] What version is sh?
Message-ID: <F160BE32A2E5E04497668BBDFE83FEDF0881A3FA@EXCHVS1.medctr.ad.wfubmc.edu>

man sh says it's ash

Latchezar

> -----Original Message-----
> From: Duncan Murdoch [mailto:dmurdoch@pair.com] 
> Sent: Monday, December 29, 2003 7:06 PM
> To: r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] What version is sh?
> 
> 
> On Mon, 29 Dec 2003 14:40:45 -0500, I wrote:
> 
> >I'm trying to write an automatic check of the toolset 
> installation for 
> >R.  It'll get all the tools to print their version numbers, and 
> >complain if they aren't acceptable ones.
> >
> >However, I can't see how to get sh to print version information.  Is 
> >there some way to do it?
> >
> >The sh I'm worried about is the one that comes with Cygwin, if there 
> >isn't a standard approach.
> 
> Several people suggested the GNU standard "--version" command 
> line option, which works for most of the Cygwin utilities, 
> but not this one.  Dirk Eddelbeuttel said
> 
> >I'd suspect that it is one of the small shells which e.g. 
> Debian calls 
> >them ash and dash; these are used on boot floppies and the 
> like where 
> >space is at a premium.  As a consequence, they may not support all 
> >full-blown command-line options. So to test the shell, you 
> may need to 
> >run a small shell script containing the features you want to 
> make use 
> >of later.
> 
> I think it must be one of those.  The executable is about 1/8 
> the size of the bash executable.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listi> nfo/r-devel
>

From ripley at stats.ox.ac.uk  Tue Dec 30 08:54:46 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 30 08:53:47 2003
Subject: [Rd] What version is sh?
In-Reply-To: <nsf1vvkfj6uj5q7u99m5dqqm2jaa6r4p4d@4ax.com>
Message-ID: <Pine.LNX.4.44.0312300748250.10626-100000@gannet.stats>

It is ash, and a quck grep through the cygwin ash sources finds the 
version only used in the packaging.

On Mon, 29 Dec 2003, Duncan Murdoch wrote:

> On Mon, 29 Dec 2003 14:40:45 -0500, I wrote:
> 
> >I'm trying to write an automatic check of the toolset installation for
> >R.  It'll get all the tools to print their version numbers, and
> >complain if they aren't acceptable ones.
> >
> >However, I can't see how to get sh to print version information.  Is
> >there some way to do it?
> >
> >The sh I'm worried about is the one that comes with Cygwin, if there
> >isn't a standard approach.
> 
> Several people suggested the GNU standard "--version" command line
> option, which works for most of the Cygwin utilities, but not this
> one.  Dirk Eddelbeuttel said
> 
> >I'd suspect that it is one of the small shells which e.g. Debian calls them
> >ash and dash; these are used on boot floppies and the like where space is at
> >a premium.  As a consequence, they may not support all full-blown
> >command-line options. So to test the shell, you may need to run a small
> >shell script containing the features you want to make use of later.
> 
> I think it must be one of those.  The executable is about 1/8 the size
> of the bash executable.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Dec 30 09:30:21 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 30 09:29:26 2003
Subject: [Rd] Accuracy: Correct sums in rowSums(), colSums() (PR#6196)
In-Reply-To: <20031230005720.9CEC71044D@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312300813410.10660-100000@gannet.stats>

Could you please prepare a patch against the current R-devel sources?
1.7.1 is several versions old.

I was puzzled as to why you are recommending improving the accuracy of the 
`fast' methods and not the slow one, applying apply() to mean() and sum().
The improvement might be larger in those cases: what Goldberg calls 
`a dramatic improvement' is from N eps down to 2 eps, and that is for the 
worst case and is only dramatic if N is dramatically bigger than 2.  It is 
also not clear that it is effective on machines with extended-precision 
registers unless N is very large.

Some of us are well aware of the issues of floating point arithmetic, but 
R is normally used for statistical computations, where errors in the data 
(rounding, measurement etc) normally are orders of magnitude bigger than 
those in floating-point arithmetic.  So implementation effort has been 
spent on handling the statistical errors first.

On Tue, 30 Dec 2003 Nick.Efthymiou@schwab.com wrote:

> Full_Name: Nick Efthymiou
> Version: R1.5.0 and above
> OS: Red Hat Linux 
> Submission from: (NULL) (162.93.14.73)
> 
> 
> With the introduction of the functions rowSums(), colSums(), rowMeans() and
> colMeans() in R1.5.0, function "SEXP do_colsum(SEXP call, SEXP op, SEXP args,
> SEXP rho)" was added to perform the fast summations. We have an excellent
> opportunity to improve the accuracy by implementing Kahan summation here.
> 
> Kahan summation is described in 
> 
> @article{ goldberg91what,
>     author = "David Goldberg",
>     title = "What Every Computer Scientist Should Know About Floating-Point
> Arithmetic",
>     journal = "ACM Computing Surveys",
>     volume = "23",
>     number = "1",
>     pages = "5--48",
>     year = "1991",
>     url = "citeseer.nj.nec.com/goldberg91what.html" }
> 
> 
> (http://citeseer.nj.nec.com/goldberg91what.html)
> 
> and in the article "Floating-point Summation", by Evan Manning, in C/C++ User's
> Journal, Sept. 1996.
> 
> The proposed improvement has been tested in !IEEE_754 mode, the patch is
> attached.
> It is intended to be applied against R-1.7.1/src/main/array.c
> 
> --------- Cut here ----------
> *** array.c.old	Mon Dec 15 17:33:23 2003
> --- array.c	Mon Dec 15 17:33:45 2003
> ***************
> *** 1016,1022 ****
>       int OP, n, p, cnt = 0, i, j, type;
>       Rboolean NaRm, keepNA;
>       int *ix;
> !     double *rx, sum = 0.0;
>   
>       checkArity(op, args);
>       x = CAR(args); args = CDR(args);
> --- 1016,1022 ----
>       int OP, n, p, cnt = 0, i, j, type;
>       Rboolean NaRm, keepNA;
>       int *ix;
> !     double *rx, sum = 0.0, correction = 0.0;
>   
>       checkArity(op, args);
>       x = CAR(args); args = CDR(args);
> ***************
> *** 1046,1062 ****
>   	    switch (type) {
>   	    case REALSXP:
>   		rx = REAL(x) + n*j;
>   #ifdef IEEE_754
>   		if (keepNA)
> ! 		    for (sum = 0., i = 0; i < n; i++) sum += *rx++;
>   		else {
> ! 		    for (cnt = 0, sum = 0., i = 0; i < n; i++, rx++)
> ! 			if (!ISNAN(*rx)) {cnt++; sum += *rx;}
>   			else if (keepNA) {sum = NA_REAL; break;}
>   		}
>   #else
> ! 		for (cnt = 0, sum = 0., i = 0; i < n; i++, rx++)
> ! 		    if (!ISNAN(*rx)) {cnt++; sum += *rx;}
>   		    else if (keepNA) {sum = NA_REAL; break;}
>   #endif
>   		break;
> --- 1046,1082 ----
>   	    switch (type) {
>   	    case REALSXP:
>   		rx = REAL(x) + n*j;
> + 		sum = 0.;
>   #ifdef IEEE_754
>   		if (keepNA)
> ! 		    for (i = 0; i < n; i++) sum += *rx++;
>   		else {
> ! 		    for (cnt = 0, i = 0; i < n; i++, rx++)
> ! 			if (!ISNAN(*rx)) {
> ! 				/* TODO: Kahan summation */
> ! 				cnt++; sum += *rx;
> ! 			}
>   			else if (keepNA) {sum = NA_REAL; break;}
>   		}
>   #else
> ! 		i = cnt = 0;
> ! 		if (i < n) {
> ! 		    if (ISNAN(*rx)) {
> ! 			if (keepNA) {sum = NA_REAL; break /* switch */;}
> ! 		    } else {
> ! 			cnt++; sum = *rx;
> ! 		    }
> ! 		    i++; rx++;
> ! 		}
> ! 		for (; i < n; i++, rx++)
> ! 		    if (!ISNAN(*rx)) {
> ! 			/* Kahan summation */
> ! 			double yhilo = *rx - correction;
> ! 			double tsum = sum + yhilo;
> ! 			correction = (tsum - sum) - yhilo;
> ! 			sum = tsum;
> ! 			cnt++;
> ! 		    }
>   		    else if (keepNA) {sum = NA_REAL; break;}
>   #endif
>   		break;
> ***************
> *** 1121,1137 ****
>   	    switch (type) {
>   	    case REALSXP:
>   		rx = REAL(x) + i;
>   #ifdef IEEE_754
>   		if (keepNA)
> ! 		    for (sum = 0., j = 0; j < p; j++, rx += n) sum += *rx;
>   		else {
> ! 		    for (cnt = 0, sum = 0., j = 0; j < p; j++, rx += n)
> ! 			if (!ISNAN(*rx)) {cnt++; sum += *rx;}
>   			else if (keepNA) {sum = NA_REAL; break;}
>   		}
>   #else
> ! 		for (cnt = 0, sum = 0., j = 0; j < p; j++, rx += n)
> ! 		    if (!ISNAN(*rx)) {cnt++; sum += *rx;}
>   		    else if (keepNA) {sum = NA_REAL; break;}
>   #endif
>   		break;
> --- 1141,1177 ----
>   	    switch (type) {
>   	    case REALSXP:
>   		rx = REAL(x) + i;
> + 		sum = 0.;
>   #ifdef IEEE_754
>   		if (keepNA)
> ! 		    for (j = 0; j < p; j++, rx += n) sum += *rx;
>   		else {
> ! 		    for (cnt = 0, j = 0; j < p; j++, rx += n)
> ! 			if (!ISNAN(*rx)) {
> ! 				/* TODO: Kahan summation */
> ! 				cnt++; sum += *rx;
> ! 			}
>   			else if (keepNA) {sum = NA_REAL; break;}
>   		}
>   #else
> ! 		j = cnt = 0;
> ! 		if (j < p) {
> ! 		    if (ISNAN(*rx)) {
> ! 			if (keepNA) {sum = NA_REAL; break /* switch */;}
> ! 		    } else {
> ! 			cnt++; sum = *rx;
> ! 		    }
> ! 		    j++; rx += n;
> ! 		}
> ! 		for (; j < p; j++, rx += n)
> ! 		    if (!ISNAN(*rx)) {
> ! 			/* Kahan summation */
> ! 			double yhilo = *rx - correction;
> ! 			double tsum = sum + yhilo;
> ! 			correction = (tsum - sum) - yhilo;
> ! 			sum = tsum;
> ! 			cnt++;
> ! 		    }
>   		    else if (keepNA) {sum = NA_REAL; break;}
>   #endif
>   		break;
> ---------end of patch -------
> 
> 
> Since someone is certainly wondering why I bothered to bring this up - I was
> trying to optimize the order of a Chebyshev approximation to a specific function
> so that I accomplish the most power-efficient calculation at one ulp accuracy
> (multiplications and additions consume battery power). The optimization was
> based on minimizing the relative error between the true function and the
> approximation. It involved a lot of sums and was not converging properly. With
> the patch, I got the convergence I needed.
> 
> Thanks,
> 
> - Nick -
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From deville.yves at wanadoo.fr  Tue Dec 30 10:27:37 2003
From: deville.yves at wanadoo.fr (deville.yves@wanadoo.fr)
Date: Tue Dec 30 10:26:01 2003
Subject: [Rd] seq.POSIXt with by="DSTday" (PR#6212)
Message-ID: <20031230092737.9197510450@slim.kubism.ku.dk>

Full_Name: Yves DEVILLE
Version: 1.7.1
OS: linux-gnu
Submission from: (NULL) (213.203.71.194)


There seems to be a problem with seq.POSIXt with by="DSTday" and length>=999. In
the result, 
NA are produced for indexes >=999 (no such problem with by="day" or "x days")  

Begins <- as.POSIXct(strptime("1995-09-03", format="%Y-%m-%d"))

## Works (whatever be Begins)
Length <- 998
Ends <- seq(from=Begins, length=Length, by="DSTday")[Length]

## returns NA in Ends (whatever be Begins)
Length <- 999
Ends <- seq(from=Begins, length=Length, by="DSTday")[Length]

## Works
Length <- 499
Ends <- seq(from=Begins, length=Length, by="2 DSTdays")[Length]

## Returns NA
Length <- 500
Ends <- seq(from=Begins, length=Length, by="2 DSTdays")[Length]

Best regards,

Yves Deville

R.version

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    7.1              
year     2003             
month    06               
day      16               
language R

From steve_koehler at securecomputing.com  Tue Dec 30 16:37:24 2003
From: steve_koehler at securecomputing.com (steve_koehler@securecomputing.com)
Date: Tue Dec 30 16:35:54 2003
Subject: [Rd] split.screen problem with jpeg/png device (PR#6223)
Message-ID: <20031230153724.7877C104AF@slim.kubism.ku.dk>

Full_Name: Steve Koehler
Version: 1.8.1
OS: Solaris and Windows
Submission from: (NULL) (192.55.214.50)


In the following program, if output is sent to X11, you get all four graphs,
but if output is sent to .jpeg, you only get the C and D graphs.  A workaround
is to do all the screen splitting at the top, before using any screens.  This
also
fails with .png output.

jpeg ("test.jpeg")
#x11()

a <- split.screen (c(2, 1))

screen (a[1])
  b <- split.screen (c(1, 2))
  screen (b[1])
  plot (1:10, main="a")
  screen (b[2])
  plot (1:10, main="b")

screen (a[2])
  d <- split.screen (c(1, 2))
  screen (d[1])
  plot (1:10, main="c")
  screen (d[2])
  plot (1:10, main="d")

close.screen (all=TRUE)

dev.off()

From simon.urbanek at math.uni-augsburg.de  Tue Dec 30 19:06:42 2003
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Tue Dec 30 19:05:19 2003
Subject: [Rd] split.screen problem with jpeg/png device (PR#6223)
In-Reply-To: <20031230153724.7877C104AF@slim.kubism.ku.dk>
References: <20031230153724.7877C104AF@slim.kubism.ku.dk>
Message-ID: <EC1B215A-3AF2-11D8-9EB3-000A959F327E@math.uni-augsburg.de>

On Dec 30, 2003, at 4:37 PM, steve_koehler@securecomputing.com wrote:

> Full_Name: Steve Koehler
> Version: 1.8.1
> OS: Solaris and Windows
> Submission from: (NULL) (192.55.214.50)
>
>
> In the following program, if output is sent to X11, you get all four 
> graphs,
> but if output is sent to .jpeg, you only get the C and D graphs.  A 
> workaround
> is to do all the screen splitting at the top, before using any 
> screens.  This
> also
> fails with .png output.
>
> jpeg ("test.jpeg")
> #x11()
>
> a <- split.screen (c(2, 1))
>
> screen (a[1])
>   b <- split.screen (c(1, 2))
>   screen (b[1])
>   plot (1:10, main="a")
>   screen (b[2])
>   plot (1:10, main="b")
>
> screen (a[2])
>   d <- split.screen (c(1, 2))

This implicitly uses erase=TRUE and will erase previous screens on the 
device (including the top one - which is probably the bug) - if you use 
erase=FLASE then you get all four plots.
(confirmed with R-devel and png device on Darwin)

>   screen (d[1])
>   plot (1:10, main="c")
>   screen (d[2])
>   plot (1:10, main="d")
>
> close.screen (all=TRUE)
>
> dev.off()
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From ripley at stats.ox.ac.uk  Tue Dec 30 19:51:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Dec 30 19:51:54 2003
Subject: [Rd] split.screen problem with jpeg/png device (PR#6223)
In-Reply-To: <20031230153724.7877C104AF@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0312301848020.10469-100000@gannet.stats>

The background colour is transparent with X11 and white with jpeg.
What you are doing is to replot over the whole screen, and it will erase 
the whole screen.  You just don't see that under X11 with the default bg 
colour.

If there is a problem at all, it is with X11: jpeg is working as 
documented.  (Hint: split.screen defaults to erase=TRUE.)


On Tue, 30 Dec 2003 steve_koehler@securecomputing.com wrote:

> Full_Name: Steve Koehler
> Version: 1.8.1
> OS: Solaris and Windows
> Submission from: (NULL) (192.55.214.50)
> 
> 
> In the following program, if output is sent to X11, you get all four graphs,
> but if output is sent to .jpeg, you only get the C and D graphs.  A workaround
> is to do all the screen splitting at the top, before using any screens.  This
> also
> fails with .png output.
> 
> jpeg ("test.jpeg")
> #x11()
> 
> a <- split.screen (c(2, 1))
> 
> screen (a[1])
>   b <- split.screen (c(1, 2))
>   screen (b[1])
>   plot (1:10, main="a")
>   screen (b[2])
>   plot (1:10, main="b")
> 
> screen (a[2])
>   d <- split.screen (c(1, 2))
>   screen (d[1])
>   plot (1:10, main="c")
>   screen (d[2])
>   plot (1:10, main="d")
> 
> close.screen (all=TRUE)
> 
> dev.off()


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From edd at debian.org  Wed Dec 31 03:53:07 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed Dec 31 03:51:50 2003
Subject: [Rd] RFC on first public draft of 'Debian R Policy'
Message-ID: <20031231025307.GA16533@sonny.eddelbuettel.com>


r-devel and debian-devel readers:

Below is a draft for a suggested policy for R packages within Debian. In the
six years that we have been maintaining R for Debian, the total number of R
related packages has grown to a full thirty -- eleven based on the main
tarball released by R Core, as well as nineteen contributed packages --
reflecting the work of five different Debian maintainers.

This draft document is concerned mostly with how we can assure the integrity
of the contributed packages. This is a timely concern: R-based archives such
as CRAN (cran.r-project.org) and BioConductor (www.bioconductor.org) are
experiencing unprecendented growth in the number of their packages. More and
more of these may eventually be turned into Debian packages. We would like
to suggest some mechansisms to ensure consistency, similar to what Debian
has achieved with add-on packages based on Perl, Python or Emacs Lisp
packages.

We're looking forward to your comments. It may be beneficial for the flow of
the discussion to carbon-copy both mailing lists.

With best regards, and Happy New Year,

Dirk Eddelbuettel and Doug Bates




			     Debian R Policy
			  Draft Proposal - v 0.1.3

		  Dirk Eddelbuettel (edd@debian.org)
		 and Douglas Bates (bates@debian.org)

			   December 30, 2003


0. Introduction:

The `r-base' package for Debian GNU/Linux (http://www.debian.org) has been
available since December 1997 and provides R (http://www.r-project.org), a
language and environment for statistical computing and graphics.  Like
Debian, R has grown considerably since then.  The r-base package is now a
small meta package that depends on several other Debian packages, including
r-base-core which provides the essential parts of the R environment.

The R system has its own concept of packages that provide base functionality
and extensions for the language.  The Debian r-base-core package installs 15
required R packages in the directory /usr/lib/R/library.  The Debian package
r-recommended installs another 13 R packages in the same directory.

The creation of user-written R packages is explicitly encouraged by the R Core
team.  The format of R packages, as documented in the manual "Writing R
Extensions", available in the Debian r-doc-html and r-doc-pdf packages, is
loosely based on the Debian packaging format.

CRAN (http://cran.r-project.org), the Comprehensive R Archive Network
(a network of global mirrors), already contains well over 300
contributed R packages.  CRAN is patterned after archive networks such as
CPAN (http://www.cpan.org) and CTAN (http://www.ctan.org).  While CRAN
constitutes the principal source of R packages, many other R packages are
available in specialized archives such as Bioconductor
(http://www.bioconductor.org), Omegahat (http://www.omegahat.org), and
Sourceforge (http://sourceforge.net) as well as private archives.  One R
package eminating from a private archive has already been released as the
Debian package r-noncran-lindsey. Debian currently contains a total of
nineteen add-on packages for R. 

The purpose of this document is to propose standards for creating Debian
packages of R packages.

0.1 Terminology:

The term "package" may mean either an R package or a Debian package.  When
necessary we will distinguish between these by using the full names "R
package" and "Debian package".

An R library is a file system directory that contains a collection of R
packages.  A search path of libraries is maintained during an R session.  The
library search path is initialized at startup from the environment variable
`R_LIBS', which (if defined) should be a colon-separated list of directories
at which R library trees are rooted. On Debian systems, R environment
variables are typically only defined inside /usr/bin/R, but can be defined by
the user if needed, as in the case of private libraries below $HOME. Starting
with the Debian pre-releases of R 1.7.0, R_LIBS was set up for three distinct
directories: user-installed packages are installed in
/usr/local/lib/R/site-library, Debian packages will install into
/usr/lib/R/site-library and the r-base-core and r-recommended packages will
use the standard /usr/lib/R/library directory. See section 2.2 below for more
details.

As described in "Writing R Extensions", an R package should contain data sets
and/or R code, and R help files in Rd (R documentation) format.  Optionally
an R package can contain C/C++/Fortran code, regression tests, and/or
expository documents, called "vignettes", that are written in a noweb format.

Source R packages are distributed as gzip'd tar files named according to the
package, version and sub-version, e.g. car_1.0-0.tar.gz.

In what follows, the R prompt, "> ", will be used to distinguish example
commands typed to the R interpreter from those typed to the shell.


1.0 Installing R packages

The primary executable installed by the Debian package r-base-core is the
shell script /usr/bin/R.  Invoked by itself it starts an R session.  It is
also the tool for managing R packages.  A source package would be installed
as

 ## install in the local system-wide packages library location
 ## note that the directory /usr/local/lib/R/site-library is now
 ## used automatically on Debian systems, see section 2.2 below
 R CMD INSTALL car_1.0-0.tar.gz

or

 ## install in a private library ~/Rlibs
 R CMD car_1.0-0.tar.gz INSTALL -l ~/Rlibs  

When run on a computer connected to the Internet, the R system provides an
interface to CRAN.  One can install or update packages by

 > install.packages("car")
 > # update currently installed packages to the latest available 
 > # version on CRAN
 > update.packages()    

Naturally, installation of an R package in a library directory requires write
permission on the library directory.

1.1 Why provide Debian packages of R packages?

One reason for providing a Debian package of an R package is to use Debian
package dependencies to ensure that any system libraries or include files
required to compile the code in the R package are available.  For example,
the Debian postgresql-dev package must be installed if the R package Rpgsql
is to be installed successfully.

The second reason is for convenience.  Someone who already uses Debian tools
such as apt-get to update the packages on a Debian system may find installing
or updating a Debian package to be more convenient than installing the r-base
Debian package plus learning to update R packages from within R or externally
using R CMD INSTALL.  Because R is beginning to be used more widely in fields
such as in biology (e.g. Bioconductor) and social sciences, we should not
count on the typical user being an R guru.  Having R packages controlled by
apt seems worth the small amount of overhead in creating the Debian
packages. This also applies to systems maintained by (presumably non-R using)
system administrators who may already be more familiar with Debian's package
mechanism. By using this system to distribute CRAN packages, another learning
curve is avoided for those who may not actually use R but simply provide it
for others.

The third reason is quality control. The CRAN team already goes to great
length to ensure the individual quality and coherence of an R package.
Embedding a binary R package in the Debian package management system provides
additional control over dependencies between required compoments or
libraries, as well as access to a fully automated system of `build daemons'
that recompile a source package for up to ten other architectures -- which
provides a good portability and quality control test.

The fourth reason is scalability. More and more users are using several
machines, or may need to share work with co-workers. Being able to create,
distribute and install identical binary packages makes it easier to keep
machines synchronised in order to provide similar environments.

The fifth reason plays on Debian's strength as a common platform for other
'derived' systems. Examples are Knoppix and its derivatives such as
Quantian. Providing Debian packages of R packages allows others to use these
in new environments.


2.0 Proposed conventions for Debian packages of R packages.

2.1 Name and version number of the Debian package

We propose that the Debian packages be named r-<Rarchive>-<Rpackage>. An R
package from a private archive can use "noncran" for the archive name
indicating that it did not come from CRAN. For example

 r-cran-car            - the car package from CRAN
 r-bioconductor-affy   - the affy (Affymetrix) package from Bioconductor.org
 r-omegahat-rgtk       - the Gtk bindings package from Omegahat.org
 r-noncran-lindsey     - a package from Jim Lindsey's private archive.

This determines the name of the binary Debian package. The Debian source
package can in most cases retain the <Rpackage> name. E.g., for the examples
above one could use car, affy, rgtk and lindsey. This makes it consistent
with the upstream archive: CRAN mirrors will have a current tar.gz file with
sources for car, and so will Debian mirrors. As general rule, Debian package
names have to be in lowercase, and any potential dots should be replaced with
hyphens.

If the potential for name-space collision with other packages is sufficient,
then the binary package name can instead be used as the source package name.

One new category 'other' may be introduced for packages not originating from
CRAN, BioConductor or OmegaHat.  We suggest to use the scheme

 r-other-$AUTHOR-$PACKAGE

for these. For example, the package by Jim Lindsey could be re-released as a
set of packages which would comprise 'r-other-lindsey-rmutil',
'r-other-lindsey-gnlm' and so on.

Version numbers should allow for a final Debian revision to permit uploads
independent of CRAN uploads.  Given that CRAN packages use a scheme `a.b-c',
adding a Debian revision d leads to scheme `a.b-c-d' which looks unusual due
to the double hyphens. Alternatively, the hyphen in the CRAN version can be
translated into a dot yielding `a.b.c-d'. Both formats are permitted.

2.2 Installation directory

Only the r-base-core and r-recommended packages should install an R package
into the library /usr/lib/R/library.  Other Debian packages should install
into the library /usr/lib/R/site-library. User-installed packages should go
into /usr/local/lib/R/site-library.

Using the default setting of
R_LIBS=${R_LIBS-'/usr/local/lib/R/site-library:/usr/lib/R/site-library:/usr/lib/R/library'}
ensures that user installations will go into /usr/local/lib/R/site-library as
this is the first directory listed in R_LIBS.  Debian packages will
explicitly set the library /usr/lib/R/site-library in their debian/rules
files (see below). Lastly, default Makefiles for R released by R Core will
continue to use /usr/lib/R/library.

One advantage of using separate libraries for separate archives is that the
packages are listed according to library directories by R's library()
function.  Note that further directories should be added to R_LIBS only after
at least some informal consultation with the Debian R maintainers.

2.3 Interaction with other package managers

In the case of a Debian system, a possible conflict exists between the
standard Debian way of managing packages with apt-get and friends, and the
common R way of using 'update.packages()'.  For example, a user may install a
package via apt-get, but later call (as root) the update.packages() function
from within R.  This could invalidate the package information stored by dpkg.

As a first line of defense, we will rely on common sense: mixing
package management system cannot be construed as a good idea.  As a
second line of defense, it is anticipated that future R versions will
add a new entry record 'Package-Manager: Debian' to the installed
DESCRIPTION file of each package.  This allows upgrade.packages() to
at a minimum warn about an attempted upgrade of Debian-installed
package, or to possibly even refuse to execute such an upgrade. On the
other hand, such a mechanism still allows for direct installation from
CRAN for packages that are not (yet ?)  available as Debian packages.


3.0 Template

The following section provides a template for the debian/ directory of a
Debian package created from an R package.  Medium-term, and with a modest
amount of effort on our part, the process of creating a Debian package from
an R package on CRAN could be automated to a large extent, leaving the
possibility of eventually providing a tool like dh-make-r akin to the
existing dh-make-perl which aids in creating Debian packages from CPAN
modules.  This has become a lot easier thank to the cdbs package and its
ability to reduce a debian/rules file to a few lines. In fact, Albrecht
Gebhardt at the University of Klagenfurt has already build a mostly complete
infrastructure to do this, and we intent to eventually provide Debian package
via apt-get'able section of the CRAN mirror network.

Packaging for Debian has become fairly exhaustively documented, for example
under the 'Packaging' section of http://www.debian.org/devel/ where the
Debian Policy manual (http://www.debian.org/doc/debian-policy) as well as the
Developers Reference (http://www.debian.org/doc/developers-reference) can be
found.  This section does not aim to be a substitute for
these. Indeed, we recommend following the policy and reference manuals if
they conflict with this section.

3.1 Overview

Sources for an R package are normally supplied as a compressed tar
archive. Converting this into a Debian package can be as easy as adding a
directory debian/ to the main directory from the untarred archive.  At a
minimum, four files must be in the debian/ directory.

One distinction (that has to be made at the beginning) relates to whether the
package will be architecture dependent or independent. R packages that do not
contain any C, C++ or Fortran source code are architecture independent, which
is reflected in the package name ending in `_all.deb'. As such, they do not
need to be rebuilt on different machine architectures by the Debian build
system. On the other hand, packages containing source code that is to be
compiled and linked must be rebuilt for different architectures.  For R
packages, the difference between the two setups concerns mostly the file
debian/control. The file debian/rules would normally be affected
too. However, in the case of R, the implicitly architecture-neutral way of
building R packages via 'R CMD INSTALL' actually bridges between both types
of packages and permits us to rely on a single template for both cases.

3.2 Discussion

Below, we discuss each of the required files briefly along with an example
from the Debian r-cran-car package of the car CRAN package. To illustrate an
architecture-dependent package, we will also show one file from the
r-cran-rodbc package.

3.2.1 debian/control

3.2.1.1 debian/control for an architecture-independent package

This file contains metainformation about the package and is similar in
spirit to the DESCRIPTION file of a R package.  The control file typically
contains two sections. 

The first section provides the name of the source package (i.e. name of the
upstream tarball stripped of its version numbers) as well as the maintainer
name and email. It also suggests both a section and priority for the Debian
archive, and finally supplies the minimum set of packages (beyond the
build-essential package) needed to build the package. Note that the field is
called 'Build-Depends-Indep' as it lists the build requirements for an
architecture-independent package, the car package.

The second section describes the resulting package(s). For each package, it
provides its name, the architecture (where 'all' signals that no recompilation
on other hardware platforms is needed), a textual description as well as the
dependencies -- in this case only R itself.

...........................................................................
Source: car
Section: math
Priority: optional
Maintainer: Dirk Eddelbuettel <edd@debian.org>
Build-Depends-Indep: debhelper (>> 4.1.0), r-base-dev (>> 1.7.1), cdbs
Standards-Version: 3.6.1.0

Package: r-cran-car
Architecture: all
Depends: r-base-core (>= 1.7.1)
Description: GNU R Companion to Applied Regression by John Fox
 This package accompanies J. Fox, An R and S-PLUS Companion to Applied 
 Regression, Sage, 2002. The package contains mostly functions for applied 
 regression, linear models, and generalized linear models, with an emphasis 
 on regression diagnostics, particularly graphical diagnostic methods. 
 There are also some utility functions.   
...........................................................................

3.2.1.2 debian/control for an architecture-dependent package

For an architecture-dependent package, the setup is similar. The build
dependencies are listed in a field 'Build-Depends'. This information is
essential for the automated build infrastructure which compiles Debian
packages for a variety of hardware platforms. The `Architecture: any' setting
shows that the package needs to be rebuilt. Dynamic libraries from standard
locations are automatically identified and inserted via the ${shlibs:Depends}
pragma. As R uses a private directory for its dynamic library, a dependency
on R has to be added explicitly.

...........................................................................
Source: rodbc
Section: math
Priority: optional
Maintainer: Dirk Eddelbuettel <edd@debian.org>
Build-Depends: debhelper (>>4.1.0), cdbs, r-base-dev (>> 1.7.1), unixodbc-dev
Standards-Version: 3.6.1.0

Package: r-cran-rodbc
Architecture: any
Depends: ${shlibs:Depends}, r-base-core (>= 1.7.1)
Suggests: odbc-postgresql, libmyodbc
Description: GNU R package for ODBC database access
 This CRAN package provides access to any Open DataBase Connectivity (ODBC)
 accessible database. 
 .
 The package should be platform independent and provide access to any
 database for which a driver exists.  It has been tested with MySQL
 and PostgreSQL on both Linux and Windows (and to those DBMSs on Linux
 hosts from R under Windows), Microsoft Access, SQL Server and Excel
 spreadsheets (read-only), and users have reported success with
 connections to Oracle and DBase.
 .
 Usage is covered in the R Data Import/Export manual (available via the 
 r-doc-pdf, r-doc-html and r-doc-info packages).
...........................................................................

3.2.2 debian/copyright

The copyright file typically consists of three sections. First,
information about the package, its author and purpose are briefly
stated. Second, the canonical source of the package is identified. Third,
the copyright information is stated. As Debian adheres to the Debian Free
Software Guidelines (http://www.debian.org/social_contract#guidelines),
only software that matches this criteria can be added to the Debian
archive.  As CRAN follows a similar spirit, most R packages should be
suitable but packagers of prospective R packages should be careful to
ensure that the R package is DFSG-free.

...........................................................................
This is the Debian GNU/Linux r-cran-car package of car, the Companion to
Applied Regression package for GNU R. Car was written by John Fox.

This package was created by Dirk Eddelbuettel <edd@debian.org>.
The sources were downloaded from 
	http://cran.us.r-project.org/src/contrib/

The package was renamed from its upstream name 'car' to 'r-cran-car'
to fit the pattern of CRAN (and non-CRAN) packages for R.

Car is copyright John Fox and released under the GNU General Public License
(GPL).

On a Debian GNU/Linux system, the GPL license is included in the file
/usr/share/common-licenses/GPL.

For reference, the upstream DESCRIPTION [with lines broken to 80 cols] file
is included below:

   Package: car
   Version: 1.0-5
   Date: 2003/5/26
   Title: Companion to Applied Regression
   Author: John Fox <jfox@mcmaster.ca>. I am grateful to Douglas Bates,
     David Firth, Michael Friendly, Georges Monette, Brian Ripley, and
     Sanford Weisberg for various suggestions.
   Maintainer: John Fox <jfox@mcmaster.ca>
   Depends: R (>= 1.7.0), modreg
   Description: 
     This package accompanies J. Fox, An R and S-PLUS Companion to Applied 
     Regression, Sage, 2002.
     The package contains mostly functions for applied regression, linear 
     models, and generalized linear models, with an emphasis on regression
     diagnostics, particularly graphical diagnostic methods. There are also
     some utility functions. 
     With some exceptions, I have tried not to duplicate capabilities in the
     basic distribution of R, nor in widely used packages. Some of the
     functions in car will use functions in the MASS package, if it is 
     present; the subsets function graphs objects produced by the regsubsets
     function in the leaps package. Where relevant, the functions in car are
     consistent with na.action = na.omit or na.exclude.
   License: GPL version 2 or newer
   URL: http://www.r-project.org, http:/www.socsci.mcmaster.ca/jfox/
...........................................................................

3.2.3 debian/changelog

This file details the changes made to the package. Command-line tools for
adding to it, as well as a full-featured Emacs mode are available.

...........................................................................
car (1.0.9-1) unstable; urgency=low

  * Upgraded to new upstream release
  * debian/rules: Minor update moving towards common cdbs file

 -- Dirk Eddelbuettel <edd@debian.org>  Wed, 10 Dec 2003 20:52:29 -0600

car (1.0.8-1) unstable; urgency=low

  * New upstream release
  * debian/rules: Updated moving towards common cdbs file
  * debian/control: Increased Standards-Version to 3.6.1.0

 -- Dirk Eddelbuettel <edd@debian.org>  Mon, 13 Oct 2003 22:25:00 -0500

car (1.0.7-1) unstable; urgency=low

  * New upstream release
  * debian/control: Standards-Version increased to 3.6.0.1
  * debian/rules: Rewritten build stage with 'R CMD INSTALL .'
  * debian/control: Build-Depends-Indep on r-base-dev (>> 1.7.1)

 -- Dirk Eddelbuettel <edd@debian.org>  Sat, 23 Aug 2003 12:41:04 -0500

car (1.0.5-1) unstable; urgency=low

  * Initial Debian Release

 -- Dirk Eddelbuettel <edd@debian.org>  Sat,  5 Jul 2003 13:48:44 -0500
...........................................................................

3.2.4 debian/rules

This file provides the nuts and bolts of the actual packaging. It is
written in the GNU Make language, and often employs additional Debian tools
such as debhelper. In a nutshell, it provides a framework for the common
'configure; make; make install; make clean' cycle of installing software.
However, the installation actually happens to a subdirectory of the actual
build directory. The resulting filesystem tree is then wrapped into a
tarball which, along with control and metainformation as well as the
possible pre- and post-installation and removal scripts, is placed into an
ar archive ending in the .deb suffix.

For our purposes, only a few key lines matter as R CMD INSTALL does all
the R package building work. Moreover, as 'R CMD INSTALL' is invoked for both
types of architecture dependent and independent, we have adapted debian/rules
accordingly.  By using the cdbs built system, we can in fact use the same
debian/rules file a variety of packages.

...........................................................................
#!/usr/bin/make -f
# 							-*- makefile -*-
# debian/rules file for the Debian/GNU Linux r-cran-car package
# Copyright 2003 by Dirk Eddelbuettel <edd@debian.org>

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/langcore.mk

## We need the CRAN (upstream) name 
cranName	:= $(shell grep Package: DESCRIPTION | cut -f2 -d" ")
## and we need to build a Debian Policy-conformant lower-case package name
cranNameLC	:= $(shell echo $(cranName) | tr "[A-Z]" "[a-z]" | tr "." "-" )
## which we can use to build the package directory 
package		:= r-cran-$(cranNameLC)
## which we use for the to-be-installed-in directory
debRlib		:=$(CURDIR)/debian/$(package)/usr/lib/R/site-library

common-install-indep:: R_any_arch
common-install-arch:: R_any_arch

R_any_arch:
		dh_installdirs		usr/lib/R/site-library
		R CMD INSTALL -l $(debRlib) --clean .
		rm -vf $(debRlib)/R.css $(debRlib)/$(cranNameLC)/COPYING
...........................................................................

The 'package' variable would need to change from `r-cran-$(cranNameLC)' to
`r-omegahat-$(cranNameLC)' for a package from Omegahat.org, and similarly for
BioConductor.

A currently open question is the desire to also run 'R CMD check' at build
time. However, as of R 1.8.1, this requires a minor upstream change in the R
tools to allow the build to proceed from directories also containing a
version number in their name. We expect to add this feature in one of the
next R releases.

3.3 Putting it all together

Invoking 'dpkg-buildpackage -rfakeroot -us -uc' from inside the top-level
directory of an expanded CRAN package will build the Debian package, along
with .dsc. .diff.gz and .changes files (see the Debian Policy manual and the
Developer Reference for more details).  The resulting .changes file can then
used for a package check via the lintian tool.


4. Acknowledgements

Comments and suggestions by Albrecht Gebhard, Frank Harrell, Kurt
Hornik, Rafael Laboissiere, Friedrich Leisch, Steffen Moeller and Tony
Rossini are gratefully acknowledged.

$Id: R-packages.txt,v 1.6 2003/12/31 02:30:21 edd Exp $





-- 
The relationship between the computed price and reality is as yet unknown.  
                                             -- From the pac(8) manual page

From efeng at cogeco.ca  Wed Dec 31 10:17:34 2003
From: efeng at cogeco.ca (Edward Feng)
Date: Wed Dec 31 10:13:48 2003
Subject: [Rd] programming with C++Builder 5
Message-ID: <001101c3cf7e$ee2a89e0$d2cf3918@fhty3>

Hi there,

I am using C++ Builder 5 to develop windows GUI interface for a R library package.  I have to pass R objects to and from C functions and also evaluate them within C functions.  But I always got linking error message of "unresolved external functions" with those internal functions or macros defined in Rinternals.h file.  I can not find the reason.

I have included R.h and Rinternals.h, generated and added R.lib and R.def to the project.  It seems no effects.  I tried to directly use structure member instead of a macro, e.g. "LENGTH(OBJ)" with "((VECSEXP) (obj))->vecsxp.length", getting an error "Symbol VECSEXP not defined".

I noticed when generating R.lib and .def file, it reported warning messages about some duplicated functions within R.dll.  But I am not sure whether it is the reason and how to solve it.

I am using C++Builder 5, R 1.7.0.1 windows version, used impdef.exe and implib.exe to generating lib and def files, and used VCL components to develop the windows interfaces.

Can you pleased to give me some advices?

Edward
	[[alternative HTML version deleted]]

From blink at informatik.uni-freiburg.de  Wed Dec 31 12:54:05 2003
From: blink at informatik.uni-freiburg.de (Bernhard R. Link)
Date: Wed Dec 31 12:53:49 2003
Subject: [Rd] Re: RFC on first public draft of 'Debian R Policy'
In-Reply-To: <20031231025307.GA16533@sonny.eddelbuettel.com>
References: <20031231025307.GA16533@sonny.eddelbuettel.com>
Message-ID: <20031231115405.GA5809@ganymed.informatik.uni-freiburg.de>

* Dirk Eddelbuettel <edd@debian.org> [031231 04:10]:
> 			     Debian R Policy
> 			  Draft Proposal - v 0.1.3
[...]
> 
> 			   December 30, 2003
[...]
> The R system has its own concept of packages that provide base functionality
> and extensions for the language.  The Debian r-base-core package installs 15
> required R packages in the directory /usr/lib/R/library.  The Debian package
> r-recommended installs another 13 R packages in the same directory.

This is just some small suggestion: Having explicit numbers without any
qualifier will demand you to adopt these with any new revision. Some
phrase like "currently (as in Dec 2003)" might cure some future
overlooks.

> 3.2.2 debian/copyright
> 
> The copyright file typically consists of three sections. First,
> information about the package, its author and purpose are briefly
> stated. Second, the canonical source of the package is identified. Third,
> the copyright information is stated. As Debian adheres to the Debian Free
> Software Guidelines (http://www.debian.org/social_contract#guidelines),
> only software that matches this criteria can be added to the Debian
> archive.  As CRAN follows a similar spirit, most R packages should be
> suitable but packagers of prospective R packages should be careful to
> ensure that the R package is DFSG-free.

Here could be added the tip to ask debian-legal, if the licence has not
be decided upon. It sometimes confused people that DFSG and OSD are
so similar but are sometimes differently interpreted.

> ...........................................................................
> This is the Debian GNU/Linux r-cran-car package of car, the Companion to
> Applied Regression package for GNU R. Car was written by John Fox.
> 
> This package was created by Dirk Eddelbuettel <edd@debian.org>.
> The sources were downloaded from 
> 	http://cran.us.r-project.org/src/contrib/
[...]
> Car is copyright John Fox and released under the GNU General Public License
> (GPL).
> 
> On a Debian GNU/Linux system, the GPL license is included in the file
> /usr/share/common-licenses/GPL.
> 
[...]
>    Author: John Fox <jfox@mcmaster.ca>. I am grateful to Douglas Bates,
>      David Firth, Michael Friendly, Georges Monette, Brian Ripley, and
>      Sanford Weisberg for various suggestions.
>    Maintainer: John Fox <jfox@mcmaster.ca>
[...]
>    License: GPL version 2 or newer
>    URL: http://www.r-project.org, http:/www.socsci.mcmaster.ca/jfox/
> ...........................................................................

I think here a bit better example could be nicer. While the information
can be found in the later trunk, some note would be nice, that the
copyright file should list:

- anyone owning copyright (not only upstream author, though that may
  be the same in most cases) best together with some way to contact
  him (i.e. the e-mail address given).
- The exact license given. The "version 2" is important information
  and the "or newer" could becaume important in the future.

Some people also demand some form with "Copyright", and C in an circle
and a year of creation as information needed by some historic
international treaty, but I think that is even historic in the US.

Hochachtungsvoll,
  Bernhard R. Link

-- 
Sendmail is like emacs: A nice operating system, but missing
an editor and a MTA.

From simon.urbanek at math.uni-augsburg.de  Wed Dec 31 14:34:52 2003
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Wed Dec 31 14:35:08 2003
Subject: [Rd] programming with C++Builder 5
In-Reply-To: <001101c3cf7e$ee2a89e0$d2cf3918@fhty3>
References: <001101c3cf7e$ee2a89e0$d2cf3918@fhty3>
Message-ID: <1CEFB920-3B96-11D8-9EB3-000A959F327E@math.uni-augsburg.de>

On Dec 31, 2003, at 10:17 AM, Edward Feng wrote:

> I am using C++ Builder 5 to develop windows GUI interface for a R 
> library package.  I have to pass R objects to and from C functions and 
> also evaluate them within C functions.  But I always got linking error 
> message of "unresolved external functions" with those internal 
> functions or macros defined in Rinternals.h file.  I can not find the 
> reason.

There are many possible reasons -  you didn't say anything about how 
you exactly access the DLL, create the R.lib etc. All I can do is to 
imagine what you did wrong, so I hope this will cover some of it.

There are following pitfalls I can think of (I omitted obvious ones 
like include paths and run-time issues like determining R_HOME etc.)

1) You should globally define Win32 in your project - depending on the 
BCC you use this may not be the default, and R relies on it

2) C vs C++:
I assume that you'll be using C++ (otherwise there's no need for C++ 
Builder ;)). R.dll exports are all in C language, most of them are also 
in the C calling convention. You must be aware of this when interfacing 
externals. Note that there are several includes that you need to wrap 
in export "C" { ... }!

If you see symbol "R_xxx" not defined then you have this C vs. C++ 
problem. If something else is wrong you should see symbol "_R_xxx" not 
defined - that's in fact an improvement!

3) R.DEF
BCC and gcc disagree about the notations in the DEF file. I assume that 
you won't use any STDCALL functions of R (it's just some bz2 func 
etc.), so I'll skip that issue.
BCC is looking for the exports of the form _function - so you need to 
modify the R.DEF supplied with R in order to be usable with BCC. You 
need to do two things:
- remove all hints (the @nnn at the end of all lines)
- mangle all function names, i.e. the line:
R_DefParams @215
should become:
_R_DefParams=R_DefParams
This can be easily done by a simple script.

4) generate a R.lib with implib -c R R.def

Now you're ready to use R.dll in your program. But before you plunge 
into writing some Win apps that interface to R, you should definitely 
look at other projects that use R.dll - there is a lot of issues you 
should be aware of, especially involving the initialization of R (Win32 
version has no Rf_initEmbeddedR).

Cheers,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2280

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From Whit.Armstrong at tudor.com  Wed Dec 31 17:19:12 2003
From: Whit.Armstrong at tudor.com (Whit Armstrong)
Date: Wed Dec 31 17:25:29 2003
Subject: [Rd] Calling primitive functions from C code
Message-ID: <CD9BF92D5B1AD611ABEB00065B386FB0031F7070@tudor.com>

Does anyone have an example of calling primitive or internal functions from
C code that they would share with me?

I am having trouble trying to figure out how to construct the proper
arguments to pass to "do_subset_dflt"

Here is the prototype:
SEXP do_subset_dflt(SEXP call, SEXP op, SEXP args, SEXP rho);

The R_FunTab from "names.c" gives some additional information on the
arguments that the function expects.

{".subset",	do_subset_dflt,	1,	1,	-1,	{PP_FUNCALL,
PREC_FN,	  0}},

However, this is a little intimidating for someone like me who doesn't do
much C programming.

I understand that args is simply the argument list: x, rowsubset, colsubset,
drop, but the other variables are a mystery to me.

I've read the Appendix A R (internal) programming miscellanea from
R_exts.pdf, but there are no examples of calling these functions from C
code.
http://cran.r-project.org/doc/manuals/R-exts.pdf
<http://cran.r-project.org/doc/manuals/R-exts.pdf> 

How does one create call, op and rho to be passed into do_subset_dflt?

Any advice on constructing a successful call to do_subset_dflt from C would
be greatly appreciated.

Thanks,
Whit Armstrong


	[[alternative HTML version deleted]]

