From edwards@beelink.com  Sat Feb  1 00:50:03 2003
From: edwards@beelink.com (edwards@beelink.com)
Date: Sat Feb  1 00:50:03 2003
Subject: [Rd] We are looking for USA's waste paper 3#,11# supplier. Order quatity:2000tons/month. (PR#2516)
Message-ID: <200301312350.AAA01798@pubhealth.ku.dk>

Dear Sir

We are a leading importer of USA's waste paper from China. We have been importing
waste paper from USA and Canada in very large quantity.

Now we are looking for the supplier who can offer 2000 tons of USA's waste paper 
3#, 11# monthly. If you could offer this item pls kindly reply us and we will negotiate
with you further.

Any quick reply from your side will be appreciated by us highly.

Best regards

Edward Zhang

-----------------------------
Hengxing Industry&Trading Co., Ltd.

Add. No.588, Jingqi Rd, Jinan, China
P.C. 250021
Tel +86-531-2903972 
Fax +86-531-2903962
Mobile Phone +86-531-6627662
E-Mail edwards@beelink.com
Homepage http://recycling-paper.ebigchina.com



























































































------------------------------------------------------------------------------------------------------------------------


============================邮件内容与以下文字无关=============================

优联网络 http://www.chinamysql.com  专业提供各类虚拟主机，不满意可获退款。

强势套餐：100M主机送顶级域名，送10个10M企业油箱，加送20个二级域名，仅需318元/年！


三龙证券投资 http://3long.sayba.com 为您提供专业理财服务。现在购买只需588元，赠送价值超过1800元的礼品！

说吧网上商城 http://shop.sayba.com 全是厂商直销的新品或折上折的商品，是您网络购物的好去处！


使用极星邮件群发，无须通过邮件服务器，直达对方邮箱，速度绝对一流！

软件下载网址：http://www.lovexin.com，更多的超酷软件等你来下载哦！


From a.stephenson@lancaster.ac.uk  Sat Feb  1 11:17:02 2003
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Sat Feb  1 11:17:02 2003
Subject: [Rd] deviance.Rd (PR#2517)
Message-ID: <200302011017.LAA03453@pubhealth.ku.dk>

The sentence
`There is no default method for this function.'
should be excluded from deviance.Rd, which documents
deviance.default, amongst others.


Alec Stephenson                            tel +44 (0) 1524 593950
Department of Mathematics and Statistics   fax +44 (0) 1524 592681
Lancaster University                  a.stephenson@lancaster.ac.uk
Lancaster LA1 4YF          http://www.maths.lancs.ac.uk/~stephena/


From a.stephenson@lancaster.ac.uk  Sat Feb  1 11:22:02 2003
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Sat Feb  1 11:22:02 2003
Subject: [Rd] AIC.default (PR#2518)
Message-ID: <200302011018.LAA03471@pubhealth.ku.dk>


There is a bug in AIC.default and AIC.lm, as illustrated below.
(I've only checked this under 1.6.1, and can't easily check if it has
already been reported since the site is down.)


> lm1 <- lm(y ~ x, list(x=1:10, y=jitter(1:10)))
> lm2 <- lm(y ~ x, list(x=1:10, y=jitter(1:10)))
> AIC(lm1, lm2)
    df        AIC
lm1  3 -18.662493
lm2  3  -7.265906
> AIC(lm1, lm2, k = 2)
Error in "row.names<-.data.frame"(*tmp*, value =
as.character(match.call()[-1])) : 
	invalid row.names length

The offending line is

row.names(val) <- as.character(match.call()[-1])

One possible (but probably overly complicated) solution is


> AIC.default
function (object, ..., k = 2) 
{
    if (length(list(...))) {
        dots <- as.list(substitute(list(...)))[-1]       ## added
        dots <- sapply(dots, function(x) deparse(x))     ## added
        rnm <- c(deparse(substitute(object)), dots)      ## added
        object <- list(object, ...)
        val <- lapply(object, logLik)
        val <- as.data.frame(t(sapply(val, function(el) c(attr(el, 
            "df"), AIC(el, k = k)))))
        names(val) <- c("df", "AIC")
        row.names(val) <- rnm                            ## altered
        val
    }
    else {
        AIC(logLik(object), k = k)
    }
}


Alec Stephenson                            tel +44 (0) 1524 593950
Department of Mathematics and Statistics   fax +44 (0) 1524 592681
Lancaster University                  a.stephenson@lancaster.ac.uk
Lancaster LA1 4YF          http://www.maths.lancs.ac.uk/~stephena/


From Kurt.Hornik@wu-wien.ac.at  Sat Feb  1 15:16:03 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sat Feb  1 15:16:03 2003
Subject: [Rd] summary.table parameter bug (PR#2514)
In-Reply-To: <x2vg05aqk8.fsf@biostat.ku.dk>
References: <Pine.GSO.4.44.0301312158310.4637-100000@auk.stats>
 <x2vg05aqk8.fsf@biostat.ku.dk>
Message-ID: <15931.36474.192487.310068@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
>> > parameter <- prod(sapply(m, length)) - (sum(sapply(m, length) - 1) + 1)
>> >
>> > Running Version 1.5-0, 2002-04-28 for Windows.
>> 
>> So that's 4 versions old already. I don't know if this has changed (you
>> don't make it easy for us by providing an example), but I do know that
>> around 170 bugs have been fixed, so please update.
>> 
>> We do expect people to test the latest version before filing a bug report.
>> It takes you less time that it takes the volunteers to process the report.

> In this case reading the code will do and it is still wrong. Not that
> I disagree with Brian's remark in general.

> [I think it has been reported before too, but today is not the day to
> ask people to check the bug repository.]

> I don't feel altogether happy with summary.table generating that test
> in the first place. Tables are not statistical model fits - not
> necessarily, anyway - so something descriptive might be better. 

> Wouldn't it be more obvious anyway to have a separate
> independence.test() (or so) for generating the test of independence?

The reason why summary.table() generates the test is the following:
S-PLUS crosstabs() does so, and chisq.test() can only deal with 2
variables, and people may find it useful to see the test performed.

I have a problem with functions for generating tables (such as table()
or xtabs()) performing a test, but personally I think that summary() can
do so.

[I would object to an independence.test() which does just the above, but
then maybe one could make it a generic with a method for tables doing
the above.]

In any case, will fix the incorrect dofs.

-k


From ripley@stats.ox.ac.uk  Sat Feb  1 21:28:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Feb  1 21:28:03 2003
Subject: [Rd] removeMethods (methods) does not work in my examples (PR#2519)
Message-ID: <200302012028.VAA05398@pubhealth.ku.dk>

R 1.6.2 (also R-devel 2003-02-01)

An example from S Programming:

library(methods)
setClass("xyloc", representation(x="numeric", y="numeric"))
setClass("fungi", representation("xyloc", species="character"))

show.fungi <- function(object) {
  tmp <- rbind(x = format(round(object@x, 2)),
               y = format(round(object@y, 2)),
               species = object@species)
  dimnames(tmp)[[2]] <- rep("", length(object@x))
  print(tmp, quote=F)
  invisible(object)
}
setMethod("show", "fungi", show.fungi)  ## works

removeMethod("show", "fungi") ## works in S4 but R gives
Error in identical(args[1], "...") : Object "fnames" not found

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jrogers@cantatapharm.com  Sat Feb  1 22:53:02 2003
From: jrogers@cantatapharm.com (jrogers@cantatapharm.com)
Date: Sat Feb  1 22:53:02 2003
Subject: [Rd] Apparent parser problem (PR#2520)
Message-ID: <200302012152.WAA05619@pubhealth.ku.dk>

Let me first admit: I am experiencing this bug on a precompiled binary
of R for windows, and I know these are not supported. I am not asking
for support, but I thought the R developers would want to know about
this. 

# Define:

foo.page <- function(x) x

# Then, 

foo.page("a")

# actually invokes the pager (!) on object named "a" (if one is
defined). 
# same thing happens if you define the function with the name
<anyname>.page.

# Interestingly, 

foo.page("a" )

# will actually act as desired (returns "a")

         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R    


Cheers, 
Jim Rogers

James A. Rogers, Ph.D. <rogers@cantatapharm.com>
Statistical Scientist
Cantata Pharmaceuticals
3-G Gill St
Woburn, MA  01801
617.225.9009
Fax 617.225.9010


From ripley@stats.ox.ac.uk  Sat Feb  1 23:11:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Feb  1 23:11:02 2003
Subject: [Rd] Apparent parser problem (PR#2520)
Message-ID: <200302012211.XAA05679@pubhealth.ku.dk>

That does not happen here, using the precompiled binary rw1062.exe (which
BTW is supported: it is the 182 addon packages which are not).

You *did* do this in a new session with --vanilla, didn't you?


On Sat, 1 Feb 2003 jrogers@cantatapharm.com wrote:

> Let me first admit: I am experiencing this bug on a precompiled binary
> of R for windows, and I know these are not supported. I am not asking
> for support, but I thought the R developers would want to know about
> this. 
> 
> # Define:
> 
> foo.page <- function(x) x
> 
> # Then, 
> 
> foo.page("a")
> 
> # actually invokes the pager (!) on object named "a" (if one is
> defined). 
> # same thing happens if you define the function with the name
> <anyname>.page.
> 
> # Interestingly, 
> 
> foo.page("a" )
> 
> # will actually act as desired (returns "a")
> 
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.2            
> year     2003           
> month    01             
> day      10             
> language R    
> 
> 
> Cheers, 
> Jim Rogers
> 
> James A. Rogers, Ph.D. <rogers@cantatapharm.com>
> Statistical Scientist
> Cantata Pharmaceuticals
> 3-G Gill St
> Woburn, MA  01801
> 617.225.9009
> Fax 617.225.9010
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From yazzzooooo@earthlink.net  Sun Feb  2 01:30:03 2003
From: yazzzooooo@earthlink.net (yazzzooooo@earthlink.net)
Date: Sun Feb  2 01:30:03 2003
Subject: [Rd] -There--'
Message-ID: <000811b3bb34$cbe52470$32141005@miwcfda.gqi>

------=_NextPart_000_00A6_11E83E1E.C0348A00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64


NkhpIHRoZXJlLCBob3cncyBpdCBnb2luZz8gV2VsbCBmb3Igc3RhcnRlcnMg
SSBtdXN0IGNvbmZlc3MgdGhhdCB0aGlzIGlzIGluZGVlZCAgcHJldHR5IGF3
a3dhcmQuIEkgbm90aWNlZCB5b3VyIHByb2ZpbGUgb25saW5lIGFuZCBmaWd1
cmVkIEknZCBkcm9wIHlhIGEgbGluZS4uLi5JIGJldCB0aGF0IGRvZXNuJ3Qg
aGFwcGVuIHRvIHlvdSBldmVyeWRheSEgSSBuZXZlciByZWFsbHkgZXZlbiB0
aG91Z2h0IGFib3V0IGl0IHVudGlsIHNvbWVvbmUgc2F3IG1pbmUgYW5kIGdv
dCBpbiB0b3VjaCBhIGxpdHRsZSB3aGlsZSBiYWNrLiBBTllXQVkhIE15IG5h
bWUgaXMgS2FyYW4sIEknbSAyMywgYW5kIEknbSBhIHNhbGUgcmVwIGZvciBh
IG1pZC1zaXplZCBwaGFybWFjZXV0aWNhbCBjb21wYW55LiBHb29kbmVzcyBJ
IGNhbid0IGdldCBvdmVyIGhvdyBzdHJhbmdlIHRoaXMgaXMhIEknbSBzdXJl
IHlvdSdyZSBwcm9iYWJseSB0aGlua2luZyB0aGUgc2FtZSB0aGluZyEgaGVo
ZS4gDQpPaCB3ZWxsLCBJIHJlYWxseSBkb24ndCB3YW50IHRvIGdvIG9uIHRv
byBmYXIuIEVzcGVjaWFsbHkgc2luY2UgSSdtIG5vdCBzdXJlICB3aGV0aGVy
IG9yIG5vdCB5b3UgaGF2ZSBhbnkyIGludGVyZXN0LiAgQnV0IGlmIHlvdSB3
b3VsZCBsaWtlIHRvIGdldCB0byBrbm93IG1vcmUgYWJvdXQgbWUsIHBsZWFz
ZSBkcm9wIG1lIGEgbGluZS4gSSdsbCBiZSBtb3JlIHRoYW4gaGFwcHkgdG8g
aW5jbHVkZSBzb21lICBwaWNzIGFzIHdlbGwuIA0KQW55dGhpbmcgYWJvdXQg
eW91IHdvdWxkIGJlIGdyZWF0bHkgYXBwcmVjaWF0ZWQgYXMgd2VsbCA6LSkg
byAgDQpXZWxsIEkgaG9wZSB0byBoZWFyIGZyb20geW91IHNvb24hIFRha2Ug
Y2FyZS4gDQoNCnhveG8sIA0KS2FyYW4gIC4uLi4uLi4uLi4NCiANClAuUy4g
RG8geW91IHVzZSBhbnkgbWVzc2VuZ2VyIHNlcnZpY2VzLCBtYXliZSB3ZSBj
YW4gY2hhdCBvbiB0aGVyZSBzb21ldGltZT8gTXkgZW1haWwgYWRkcmVzcyBp
cw0KUmlhbm5lXzE4N19HYXJjaWFAaG90bWFpbC5jb20NCg0KQmVzdCByZWdh
cmRzLCANCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0K
DQoNCg0KDQoNCg0KLg0KDQoNCg0KDQoNCg0KDQo3MTk0WUhzQzItOTY4cGdy
QzJsMTc=


From jrogers@cantatapharm.com  Sun Feb  2 02:54:03 2003
From: jrogers@cantatapharm.com (jrogers@cantatapharm.com)
Date: Sun Feb  2 02:54:03 2003
Subject: [Rd] Apparent parser problem (PR#2520)
Message-ID: <200302020154.CAA06287@pubhealth.ku.dk>

> You *did* do this in a new session with --vanilla, didn't you?

Almost. What I did was comment out all of the lines of my Rprofile, and
start with a new .Rdata (this should have the same effect as --vanilla,
right?). Doing that, I get the behavior I described, but...

I now see that I only get the problem when running R through iESS. If I
work directly with Rterm, or with Rgui, I don't get the problem. So, R
is not responsible (sorry!) and perhaps I should pursue this outside of
R-bugs. But may I ask if anyone can replicate my problem when working
through iESS?

Jim  

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
> Sent: Saturday, February 01, 2003 5:10 PM
> To: Jim Rogers
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Apparent parser problem (PR#2520)
> 
> 
> That does not happen here, using the precompiled binary 
> rw1062.exe (which BTW is supported: it is the 182 addon 
> packages which are not).
> 
> You *did* do this in a new session with --vanilla, didn't you?
> 
> 
> On Sat, 1 Feb 2003 jrogers@cantatapharm.com wrote:
> 
> > Let me first admit: I am experiencing this bug on a 
> precompiled binary 
> > of R for windows, and I know these are not supported. I am 
> not asking 
> > for support, but I thought the R developers would want to 
> know about 
> > this.
> > 
> > # Define:
> > 
> > foo.page <- function(x) x
> > 
> > # Then,
> > 
> > foo.page("a")
> > 
> > # actually invokes the pager (!) on object named "a" (if one is 
> > defined). # same thing happens if you define the function with the 
> > name <anyname>.page.
> > 
> > # Interestingly,
> > 
> > foo.page("a" )
> > 
> > # will actually act as desired (returns "a")
> > 
> >          _              
> > platform i386-pc-mingw32
> > arch     i386           
> > os       mingw32        
> > system   i386, mingw32  
> > status                  
> > major    1              
> > minor    6.2            
> > year     2003           
> > month    01             
> > day      10             
> > language R    
> > 
> > 
> > Cheers,
> > Jim Rogers
> > 
> > James A. Rogers, Ph.D. <rogers@cantatapharm.com>
> > Statistical Scientist
> > Cantata Pharmaceuticals
> > 3-G Gill St
> > Woburn, MA  01801
> > 617.225.9009
> > Fax 617.225.9010
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list 
> > http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>


From p.dalgaard@biostat.ku.dk  Mon Feb  3 17:53:05 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Feb  3 17:53:05 2003
Subject: [Rd] r-bugs web site temporarily UP
In-Reply-To: <x2wuklwe9z.fsf@biostat.ku.dk>
References: <x2wuklwe9z.fsf@biostat.ku.dk>
Message-ID: <x2isw1johl.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The machine that serves r-bugs.biostat.ku.dk has been taken off the
> net. A new machine is planned to replace it, but we need to
> reconfigure the DNS, which is not going to happen until Monday. The
> mail interface should still work.

We got swamped by ORDB pointing out that sendmail wasn't up to snuff
(if you don't know what that means, just consider yourself lucky...).
So we just put the old machine back up for now, but it will obviously
have to be taken down eventually.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From rreeve@liposcience.com  Mon Feb  3 18:43:02 2003
From: rreeve@liposcience.com (rreeve@liposcience.com)
Date: Mon Feb  3 18:43:02 2003
Subject: [Rd] summary.table bug in parameter (and fix) (PR#2526)
Message-ID: <200302031742.h13Hgd9j024833@pubhealth.ku.dk>

I sent this in with an old version, but it's in latest version as well. The fix is simple.

In the summary.table function, the parameter is calculated incorrectly
for a test of independence among all cells when the table is more than
2-way table.

Example:

Consider X:
> X
     a   b  c
1   A1  B2 C1
2   A3 BA3 C2
3   A2  B1 C4
4   A1  B2 C3
5   A3 BA3 C2
6   A1 BA3 C1
7   A2 BA3 C2
8   A1 BA3 C3
9   A1  B2 C1
10  A1 BA3 C2
11  A2  B1 C2
12  A1  B2 C3
13  A3 BA3 C4
14  A2  B1 C3
15  A2  B1 C2
16  A2 BA3 C4
17  A3 BA3 C3
18  A3 BA3 C4
19  A2 BA3 C4
20  A1  B2 C3
21  A1 BA3 C1
22  A2  B1 C2
23  A2 BA3 C3
24  A2  B1 C2
25  A2  B1 C2
26  A3  B1 C1
27  A2 BA3 C1
28  A2 BA3 C2
29  A2 BA3 C4
30  A3  B1 C2
31  A1  B1 C4
32  A2  B2 C1
33  A1  B2 C3
34  A2 BA3 C3
35  A2 BA3 C1
36  A2 BA3 C1
37  A2  B2 C2
38  A2  B2 C2
39  A2  B2 C4
40  A2  B1 C4
41  A2  B2 C4
42  A1  B1 C3
43  A2 BA3 C4
44  A2 BA3 C2
45  A2  B1 C2
46  A2  B2 C1
47  A3  B1 C3
48  A1  B2 C1
49  A2  B1 C2
50  A1  B1 C1
51  A3  B2 C4
52  A1  B2 C1
53  A3  B2 C1
54  A2 BA3 C1
55  A2  B1 C2
56  A1 BA3 C3
57  A3  B1 C2
58  A1  B1 C3
59  A2  B2 C2
60  A2 BA3 C1
61  A2  B1 C3
62  A3  B2 C2
63  A2 BA3 C2
64  A2  B1 C3
65  A1 BA3 C3
66  A2  B2 C2
67  A2  B1 C4
68  A2 BA3 C2
69  A2 BA3 C2
70  A2  B1 C3
71  A3 BA3 C2
72  A3 BA3 C3
73  A2  B2 C1
74  A2  B1 C3
75  A1 BA3 C1
76  A2 BA3 C3
77  A3  B1 C4
78  A3 BA3 C3
79  A2  B1 C3
80  A2  B1 C3
81  A2 BA3 C4
82  A2  B1 C2
83  A3 BA3 C1
84  A2 BA3 C1
85  A2 BA3 C4
86  A3 BA3 C1
87  A2 BA3 C1
88  A2  B2 C1
89  A3 BA3 C2
90  A2 BA3 C1
91  A1  B1 C4
92  A2  B1 C1
93  A2  B1 C1
94  A2  B1 C3
95  A2 BA3 C1
96  A3  B2 C1
97  A3 BA3 C4
98  A2  B1 C2
99  A2 BA3 C3
100 A2  B1 C2

> X.table <- table(X)
> X.table
, , c = C1

    b
a    B1 B2 B3
  A1  3  2  3
  A2  6  4  5
  A3  3  2  0

, , c = C2

    b
a    B1 B2 B3
  A1  0  0  1
  A2  7  7  7
  A3  3  1  3

, , c = C3

    b
a    B1 B2 B3
  A1  3  3  3
  A2  6  3  3
  A3  1  0  3

, , c = C4

    b
a    B1 B2 B3
  A1  0  0  2
  A2  2  2  7
  A3  4  1  0

Now, we construct a table from X (3x3x4):
> X.table <- table(X)
> summary(X.table)
Number of cases in table: 100 
Number of factors: 3 
Test for independence of all factors:
        Chisq = 30.232, df = 12, p-value = 0.002576
        Chi-squared approximation may be incorrect

The df is incorrect. It is calculated as 2*2*3 = 12, but should be 3*3*4 - 1  - (3-1) - (3-1) - (4-1) = 28 (df of interaction terms not in main effects only model). Now consider equivalent model tested in loglin:

> loglin(X.table, list(1,2,3))
2 iterations: deviation 3.552714e-15 
$lrt
[1] 38.32701

$pearson
[1] 30.23244

$df
[1] 28

$margin
$margin[[1]]
[1] "a"

$margin[[2]]
[1] "b"

$margin[[3]]
[1] "c"


The statistic is identical, but df different. The problem is in summary.table:

Current version of summary.table (INCORRECT VERSION):

function (object, ...) 
{
    if (!inherits(object, "table")) 
        stop("object must inherit from class table")
    n.cases <- sum(object)
    n.vars <- length(dim(object))
    y <- list(n.vars = n.vars, n.cases = n.cases)
    if (n.vars > 1) {
        m <- vector("list", length = n.vars)
        for (k in seq(along = m)) {
            m[[k]] <- apply(object, k, sum)/n.cases
        }
        expected <- apply(do.call("expand.grid", m), 1, prod) * 
            n.cases
        statistic <- sum((c(object) - expected)^2/expected)
        parameter <- prod(sapply(m, length) - 1)			#### Problem is on this line (works only for 2-way tables)
        y <- c(y, list(statistic = statistic, parameter = parameter, 
            approx.ok = all(expected >= 5), p.value = pchisq(statistic, 
                parameter, lower.tail = FALSE), call = attr(object, 
                "call")))
    }
    class(y) <- "summary.table"
    y
}

summary.table should be (CORRECTED VERSION)

function (object, ...) 
{
    if (!inherits(object, "table")) 
        stop("object must inherit from class table")
    n.cases <- sum(object)
    n.vars <- length(dim(object))
    y <- list(n.vars = n.vars, n.cases = n.cases)
    if (n.vars > 1) {
        m <- vector("list", length = n.vars)
        for (k in seq(along = m)) {
            m[[k]] <- apply(object, k, sum)/n.cases
        }
        expected <- apply(do.call("expand.grid", m), 1, prod) * 
            n.cases
        statistic <- sum((c(object) - expected)^2/expected)
        parameter <- prod(sapply(m, length)) - (sum(sapply(m, 
            length) - 1) + 1)					### This line changed (works for all multiway tables)
        y <- c(y, list(statistic = statistic, parameter = parameter, 
            approx.ok = all(expected >= 5), p.value = pchisq(statistic, 
                parameter, lower.tail = FALSE), call = attr(object, 
                "call")))
    }
    class(y) <- "summary.table"
    y
}


Using the corrected summary.table (using the correct code above):

> summary(X.table)
Number of cases in table: 100 
Number of factors: 3 
Test for independence of all factors:
        Chisq = 30.232, df = 28, p-value = 0.3522
        Chi-squared approximation may be incorrect

These are correct.

--Russell Reeve
rreeve@liposcience.com

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 6.2
 year = 2003
 month = 01
 day = 10
 language = R

Windows 2000 Professional (build 2195) Service Pack 2.0

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


From ripley@stats.ox.ac.uk  Mon Feb  3 20:38:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Feb  3 20:38:02 2003
Subject: [Rd] RE: [R] Bus error with xyplot
In-Reply-To: <3A822319EB35174CA3714066D590DCD534BC24@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0302031928001.11819-100000@gannet.stats>

On Mon, 3 Feb 2003, Liaw, Andy wrote:

> > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > 
> > >>>>> "Giovanni" == Giovanni Petris <GPetris@uark.edu>
> > >>>>>     on Mon, 3 Feb 2003 08:36:06 -0600 (CST) writes:
> > 
> >     Giovanni> Has anybody else experienced something like the 
> > example below? 
> > not recently.
> > Could it be that your version of the `grid' package (which is
> > loaded by `lattice') or `lattice' are incompatible (i.e. older
> > than) to your R version?
> > After   library(lattice), use 
> >  .path.package()
> > to see where it was loaded from.
> 
> This brings up (IIRC) a topic that was discussed on R-devel a while ago:
> Version checks for required packages.  Is this feasible?  Seems quite
> worthwhile to me...

It's not feasible.  If package A is upgraded and makes package B need an 
upgrade, there is no way for package B's maintainer to anticipate this.
Now one could be conservative and have B require exactly one version of A,
but then upgrading A makes B unusable.  (The latter is what has happened a 
few times with ghostscript and gsview/windvi.)

I have suggested before that grid be more closely integrated with R, and 
become a base package.  Then grid would only be changed when the R version 
changes, and the critical incompatibility goes away.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From andy_liaw@merck.com  Mon Feb  3 20:53:35 2003
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon Feb  3 20:53:35 2003
Subject: [Rd] RE: [R] Bus error with xyplot
Message-ID: <3A822319EB35174CA3714066D590DCD534BC2C@usrymx25.merck.com>

> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> 
> On Mon, 3 Feb 2003, Liaw, Andy wrote:
> 
> > > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > > 
> > > >>>>> "Giovanni" == Giovanni Petris <GPetris@uark.edu>
> > > >>>>>     on Mon, 3 Feb 2003 08:36:06 -0600 (CST) writes:
> > > 
> > >     Giovanni> Has anybody else experienced something like the 
> > > example below? 
> > > not recently.
> > > Could it be that your version of the `grid' package (which is
> > > loaded by `lattice') or `lattice' are incompatible (i.e. older
> > > than) to your R version?
> > > After   library(lattice), use 
> > >  .path.package()
> > > to see where it was loaded from.
> > 
> > This brings up (IIRC) a topic that was discussed on R-devel 
> a while ago:
> > Version checks for required packages.  Is this feasible?  
> Seems quite
> > worthwhile to me...
> 
> It's not feasible.  If package A is upgraded and makes 
> package B need an 
> upgrade, there is no way for package B's maintainer to 
> anticipate this.
> Now one could be conservative and have B require exactly one 
> version of A,
> but then upgrading A makes B unusable.  (The latter is what 
> has happened a 
> few times with ghostscript and gsview/windvi.)

Well, I was thinking of only one-way: much like the package requiring R
version >= something, also allow requiring package blah version >=
something.  Of course, if a new version of package blah has API changes that
breaks the package requiring it, then the maintainer should pay close
attention to the package that he/she is requiring so as to minimize this
from happening...
 
> I have suggested before that grid be more closely integrated 
> with R, and 
> become a base package.  Then grid would only be changed when 
> the R version 
> changes, and the critical incompatibility goes away.

Or, I guess, another possibilities is to have lattice/grid become conjoint
twins; i.e., make them into a package bundle.

Andy

> 
> Brian
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

------------------------------------------------------------------------------


From Kurt.Hornik@wu-wien.ac.at  Mon Feb  3 21:01:31 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon Feb  3 21:01:31 2003
Subject: [Rd] summary.table bug in parameter (and fix) (PR#2526)
In-Reply-To: <200302031742.h13Hgd9j024833@pubhealth.ku.dk>
References: <200302031742.h13Hgd9j024833@pubhealth.ku.dk>
Message-ID: <15934.46615.162502.108746@mithrandir.hornik.net>

>>>>> rreeve  writes:

> I sent this in with an old version, but it's in latest version as
> well. The fix is simple.  In the summary.table function, the parameter
> is calculated incorrectly for a test of independence among all cells
> when the table is more than 2-way table.

As I said last week, this is already fixed in r-devel.  What is the
point of sending another bug report?

-k


From p.murrell@auckland.ac.nz  Tue Feb  4 00:00:06 2003
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Tue Feb  4 00:00:06 2003
Subject: [Rd] RE: [R] Bus error with xyplot
References: <Pine.LNX.4.44.0302031928001.11819-100000@gannet.stats>
Message-ID: <3E3EF480.9040409@stat.auckland.ac.nz>

Hi


ripley@stats.ox.ac.uk wrote:
 > I have suggested before that grid be more closely integrated with R, and
 > become a base package.  Then grid would only be changed when the R 
version
 > changes, and the critical incompatibility goes away.


Some arguments against:
(i)  grid is the only thing using (i.e., testing) large parts of the 
under-development graphics API.
(ii)  Moving grid into base would bloat base;  we're keener on making 
base more slim-line right?  (Once the API is complete, we could 
theoretically move base graphics into an add-on too.  And all the 
devices ...)
(iii)  With grid as an add-on it can have asynchronous patch versions
(iv)  In practice this is happening now anyway (new minor version of 
grid and lattice only with each minor version of R)

Paul
-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul@stat.auckland.ac.nz


From mail@joeconway.com  Tue Feb  4 02:10:03 2003
From: mail@joeconway.com (Joe Conway)
Date: Tue Feb  4 02:10:03 2003
Subject: [Rd] new procedural language for PostgreSQL, PL/R
Message-ID: <3E3F1241.5070508@joeconway.com>

Hello,

First, I hope it is OK for me to post this here -- if not, please tell me 
where would be better (r-help maybe?).

I'm nearing completion of a new procedural language for PostgreSQL, PL/R. It 
provides an interface from Postgres to R. I was inspired by Duncan Temple 
Lang's REmbeddedPostgres (but pretty much started with PostgreSQL's pltcl as a 
basis). I'm developing against PostgreSQL 7.4devel and R 1.6.2, but before I'm 
done I intend (actually need) to make sure it works with PostgreSQL 7.3.x (the 
current release).

Before I post the source somewhere, I have a question or two:

1) R itself is under GPL; is the shared library libR also under GPL, or is it 
LGPL? The reason I ask is that PL/R will *possibly* be accepted into the 
PostgreSQL source tree, but *only* if I can release it under PostgreSQL's BSD 
style license. If libR is under GPL, then I'm required to release PL/R under 
GPL also, if I understand things correctly (but then again, IANAL).

2) If the answer to #1 is that PL/R must be released under GPL, I'll have to 
find a home for it. One possibility is gborg.postgresql.org (kind of a 
Postgres specific sourceforge). Any other suggestions? Would CRAN or OmegaHat 
be appropriate?

Thanks for any thoughts or comments.

Joe


From wolfram@fischer-zim.ch  Tue Feb  4 17:38:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Tue Feb  4 17:38:02 2003
Subject: [Rd] traceback {base}: new arguments: file, strip, width
Message-ID: <20030204172529.A4604@s1x.zimnet.ch>

I propose to add to traceback three new arguments:
- file : filename for output
- strip: strip each line of backtraced code to ``width'' characters
- width: the length of the stripped output text (default 76)

Below you find a proposal for the code changes.

Wolfram



traceback <- function(
#--- NEW ---
	file = "", strip = FALSE, width = 76
#---
){
    if (exists(".Traceback", env = .GlobalEnv)) 
        .Traceback <- get(".Traceback", env = .GlobalEnv)
    else .Traceback <- NULL
    if (is.null(.Traceback) || length(.Traceback) == 0) 
        cat("No traceback available\n")
    else{
		vib.append <- F
        n <- length(.Traceback)
        for (i in 1:n) {
            label <- paste(n - i + 1, ": ", sep = "")
#--- NEW ---
			if( strip ){
				cat( file=file, paste(label, substr( .Traceback[[i]][1]
						, 1, width), sep = "" )
					, sep = "\n", append=vib.append )
			}else{
#---
				if ((m <- length(.Traceback[[i]])) > 1) 
					label <- c(label, rep(substr("          ", 1, 
					  nchar(label)), m - 1))
					cat(
#--- NEW ---
						file=file,
#---
						paste(label, .Traceback[[i]], sep = ""),
						sep = "\n",append=vib.append)
#--- NEW ---
			}
#---
			vib.append <- T
        }
    }
    invisible()
}


From wolfram@fischer-zim.ch  Tue Feb  4 17:39:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Tue Feb  4 17:39:02 2003
Subject: [Rd] new function: showcolors {base}
In-Reply-To: <20030124102209.A1920@s1x.zimnet.ch>
References: <20030124102209.A1920@s1x.zimnet.ch>
Message-ID: <20030204174023.B4604@s1x.zimnet.ch>

Thanks for the inputs!

I have adjusted the function:
- it shows now  a pie  or  lines and bars (default)
- it stops if there is no match for the searched color string
- it returns the list of the colors

Below you find the proposed new code.

Wolfram


#--- showcolors.R

showcolors <-
function(
      col   = "red" # pattern string for search in colors() or vector of colors
    , index = NULL  # numeric vector for subselection
    , pie   = FALSE # display as pie, otherwise as bars and lines
    , lwd   = 1     # line width for lines
    , cex   = 1.0
    , main  = NULL
    , sub   = NULL
    , plot  = TRUE
    , ...
){
    n.colors <- length( col )
    if( n.colors > 1 ){
        main <- deparse( substitute( col ) )
        title <- qt.colors <- col
    }else{
        qx.colors <- grep( col, colors() )
        if( length( qx.colors ) == 0 )
            stop( paste(sep=""
                , "There is no color name which matches ``", col, "''.\n" ) )
        if( ! is.null( index ) ) qx.colors = qx.colors[ index ]
        else index = seq( along=qx.colors )
        if( is.null( main ) )  main <- paste( sep="", col
                , ' [', min(index), ':', max(index), ']' )
        qt.colors <- colors()[ qx.colors ]
        n.colors <- length( qt.colors )
    }

    if( plot ){
        if( pie ){
            pie( x = rep( 1, n.colors ), col = qt.colors, labels = qt.colors
                , main  = main, sub = sub, cex = cex, ... )
        }else{
            plot( type='n', x = c( -2, 2 ), y = c( 1, n.colors )
                , main = main, sub = sub, axes = FALSE, xlab = '', ylab = '' )
            text( x = rep( 0, n.colors ), y  = 1 : n.colors
                , labels= qt.colors, cex = cex )
                segments(
                      x0 = rep( -1.5, n.colors ), y0 = 1 : n.colors
                    , x1 = rep( -0.5, n.colors ), y1 = 1 : n.colors
                    , col = qt.colors, lwd = lwd, ... )
                rect(
                      xleft = rep(  0.5, n.colors )
                    , ybottom = 1 : n.colors - 0.4
                    , xright = rep( 1.5, n.colors )
                    , ytop = 1 : n.colors + 0.4
                    , col = qt.colors, ... )
        }
    }
    invisible( qt.colors )
}

#--- showcolors.Rd

\name{showcolors}
\title{Displaying Colors}
\alias{showcolors}
\synopsis{
showcolors(col="red", \dots)
}
\description{
  \code{showcolors} displays selected colors
  (by searching color names containing a text pattern
  or given by a vector of colors)
  as lines or bars or in a pie.
}
\usage{
showcolors(col="red", index=NULL, pie=FALSE, lwd=1, cex=1,
           main=NULL, sub=NULL, plot=TRUE, \dots)
}
\arguments{
  \item{col}{pattern string for search in \code{colors}.
        Alternatively, a vector of colors.}
  \item{index}{a numeric index for subselection
        in the result of \code{col}.}
  \item{pie}{logical. If \code{TRUE}, a colored pie is displayed.
        Alternatively, colored lines and bars are displayed.}
  \item{lwd}{line width for lines.}
  \item{cex}{the character size to be used for the labels.}
  \item{main}{an overall title for the plot.}
  \item{sub}{a sub title for the plot.}
  \item{plot}{logical. If \code{FALSE}, nothing is plotted.}
  \item{\dots}{graphical parameters can be given as arguments
    to \code{plot}.}
}
\details{
    If \code{col} has length of 1 then all colors a displayed
    with names containing the text string \code{col}.
    The search is done by \code{grep}.

    By default, a pie with the colors found is drawn,
    labelled by the names of the colors.
}
\value{
    A vector of the color names to show.
}
\seealso{
  \code{\link{colors}},
  \code{\link{palette}},
  \code{\link{rainbow}},
  \code{\link{grep}}.
}
\author{
    Wolfram Fischer
}
\examples{
showcolors()
showcolors( palette() )
showcolors( rainbow(24) )
showcolors( "yellow" )
showcolors( "yellow", pie=TRUE )
showcolors( "blue", index=26:50 )
}
\keyword{color}
\keyword{dplot}

#---


From m.pacey@lancaster.ac.uk  Tue Feb  4 17:54:41 2003
From: m.pacey@lancaster.ac.uk (m.pacey@lancaster.ac.uk)
Date: Tue Feb  4 17:54:41 2003
Subject: [Rd] Bug in configure script for Solaris v9 arch with libsunperf (PR#2530)
Message-ID: <200302041647.h14GlP9j006475@pubhealth.ku.dk>

System details: 
--------------

Sun Blade 1000, Solaris 8, Sun ONE Compiler Suite (rebranded Forte 7), R
versions 1.6.0 and 1.6.2 - suspect others are affected, too

Problem description: 
-------------------

Using the recommended env var setting from p.15 of the Admin Guide, the
configure script fails the sgemm sunperf test, even though the sunperf
libraries are available

Not linking with libsunperf causes drastic performance hits on some simple
benchmarks I've tried (e.g. matrix multiplication can take up to 100 times as
long for a sufficiently large matrix (n=5000))

Solution:
--------

Configure script should use the recommended flag for inclusion of the Sun
Performance Library: -xlic_lib=sunperf (ironically, the configure script sets
this flag up if the sgemm sunperf test passes!).

Quick fix: Add the recommended flag to the compiler env vars

Description:
-----------

I'm setting the following env vars before running configure, as per the admin
guide:

export PATH=/usr/ccs/bin:$PATH
export CC="cc -xarch=v9"
export CFLAGS="-xO5 -xlibmil -dalign"
export F77="f95 -xarch=v9"
export FFLAGS="-xO5 -xlibmil -dalign"
export CXX="CC"
export CXXFLAGS="-xO5 -xlibmil -dalign"

Config.log reports the following:

configure:19929: checking for sgemm_ in -lsunperf
configure:19966: cc -xarch=v9 -o conftest -xO5 -xlibmil -dalign
-I/usr/local/include -L/usr/local/
lib conftest.c -lsunperf -lsunmath -lnsl -lsocket -lreadline -ldl -ltermcap -lm
-L/usr/local/lib
 -lreadline -ldl -ltermcap -lm
-R/usr/local/packages/SUNWspro/lib/v9:/opt/SUNWspro/lib/v9 -L/usr/l
ocal/packages/SUNWspro/lib/v9 -L/usr/local/packages/SUNWspro/prod/lib/v9
-L/usr/ccs/lib/sparcv9 -L
/usr/lib/sparcv9 -lfui -lfai -lfai2 -lfsumai -lfprodai -lfminlai -lfmaxlai
-lfminvai -lfmaxvai -lf
su -lsunmath >&5
Undefined                       first referenced
 symbol                             in file
_stack_grow
/usr/local/packages/SUNWspro/prod/lib/v9/libsunperf.a(pp_sgemm.o)
ld: fatal: Symbol referencing errors. No output written to conftest


Problem is the v9 version seems to require stack_grow(); the xlic_lib=sunperf
does the extra linking work required:

fs% cc -xarch=v9 sgemm.c -xlic_lib=sunperf -#
### Note: NLSPATH =
/usr/local/bin/../packages/SUNWspro/bin/../prod/bin/../lib/locale/%L/LC_MESSAGE
S/%N.cat:/usr/local/bin/../packages/SUNWspro/bin/../prod/bin/../../lib/locale/%
L/LC_MESSAGES/%N.cat
###     command line files and options (expanded):
### -xarch=v9 sgemm.c -xlic_lib=sunperf
/usr/local/bin/../packages/SUNWspro/bin/../prod/bin/acomp -i sgemm.c -y-fbe
-y/usr/local/bin/../packages/SUNWspro/bin/../prod/bin/fbe -y-xarch=v9 -y-o
-ysgemm.o -y-s -y-verbose -y-xmemalign=8s -xarch=v9 -fparam_ir -Qy
-D__SunOS_5_8 -D__SUNPRO_C=0x540 -D__SVR4 -D__unix -D__sun -D__sparcv9
-D__sparc -D__BUILTIN_VA_ARG_INCR -Xa -D__PRAGMA_REDEFINE_EXTNAME -Dunix -Dsun
-Dsparc -D__RESTRICT -I/usr/local/packages/SUNWspro/prod/include/cc
"-g/usr/local/bin/../packages/SUNWspro/bin/../prod/bin/cc -xarch=v9
-xlic_lib=sunperf -c " -D__SUN_PREFETCH -destination_ir=yabe
### Note: LD_LIBRARY_PATH =
/usr/local/packages/globus/lib:/usr/lib:/usr/local/lib
### Note: LD_LIBRARY_PATH_64 = /usr/lib/sparcv9:/usr/local/lib/sparcv9
### Note: LD_RUN_PATH = <null>
/usr/ccs/bin/ld /usr/local/packages/SUNWspro/prod/lib/v9/crti.o
/usr/local/packages/SUNWspro/prod/lib/v9/crt1.o
/usr/local/packages/SUNWspro/prod/lib/v9/values-xa.o
/usr/local/packages/SUNWspro/prod/lib/v9/stack_grow.o sgemm.o -lsunperf -lfui
-lfai -lfsu -lsunmath -lm -Y
"P,/usr/local/packages/SUNWspro/lib/v9:/usr/local/packages/SUNWspro/prod/lib/v9
:/usr/ccs/lib/sparcv9:/usr/lib/sparcv9" -Qy
"-R/usr/local/packages/SUNWspro/lib/v9:/opt/SUNWspro/lib/v9" -lc -Bdynamic -ldl
/usr/local/packages/SUNWspro/prod/lib/v9/crtn.o

-----

Dr Mike Pacey,                         Email: M.Pacey@lancaster.ac.uk
High Performance Systems Support,      Phone: 01524 593543
Information Systems Services,            Fax: 01524 844001
Lancaster University,
Lancaster LA1 4YW


From ripley@stats.ox.ac.uk  Tue Feb  4 18:09:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Feb  4 18:09:02 2003
Subject: [Rd] Bug in configure script for Solaris v9 arch with libsunperf
 (PR#2530)
In-Reply-To: <200302041647.h14GlP9j006475@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302041658040.826-100000@gannet.stats>

It's possibly Forte 7: this has only been tested under Forte 6.2.

--with-blas="-xlic_lib=sunperf" is available to you and
appears to work under Forte 6.2.  Could you please confirm it works under 
Forte 7?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bolker@zoo.ufl.edu  Wed Feb  5 18:13:05 2003
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed Feb  5 18:13:05 2003
Subject: [Rd] RE: [R] barplot default colors
In-Reply-To: <3A822319EB35174CA3714066D590DCD534BC45@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0302051216350.11341-100000@bolker.zoo.ufl.edu>

 
  [Taking this to R-devel]

> In the danger of taking this a bit off-topic, are there any "guidelines" on
> what aspect of R should and should not be compatible with Splus?  barplot()
> in Splus does not use varying colors for the bars by default.  Meanwhile,
> lattice uses the gray background / light blue foreground theme from Trellis
> as default, for the supposed compatibility with Splus.  Personally I hated
> that color-scheme (because of my poor eye-sight and colorblind), but thought
> that compatibility with S is a rather weak reason there...

  Cf. my comments last week about test procedures for GLMs with
overdispersion.  I don't at all mind non-compatibility with S-PLUS (I
don't use it any more myself), especially for good reason; I can also
appreciate not wanting to match the changing inconsistencies of some areas
in S-PLUS.  It would be nice to be able to flag areas that are known to be
different, though.

> 
> OK, I guess enough venting for the day...
> 
> Cheers,
> Andy
> 
> [...]
> 
> ------------------------------------------------------------------------------
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-help
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From ripley@stats.ox.ac.uk  Wed Feb  5 20:48:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Feb  5 20:48:03 2003
Subject: [Rd] R/S indexing difference
Message-ID: <Pine.LNX.4.44.0302051943460.442-100000@gannet.stats>

Is this intentional?

R:
> x <- 1:7
> x[c(1, NA, 3)] <- -(4:6)
> x
[1] -4  2 -6  4  5  6  7

so NAs are treated as FALSE

S+6.1:
> x <- 1:7
> x[c(1, NA, 3)] <- -(4:6)
Warning messages:
  Replacement length not a multiple of number of elements to
	replace in: x[c(1, NA, 3)] <-  - (4:6)
> x
[1] -4  2 -5  4  5  6  7

and NAs are ignored.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard@biostat.ku.dk  Thu Feb  6 11:11:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Feb  6 11:11:03 2003
Subject: [Rd] R/S indexing difference
In-Reply-To: <Pine.LNX.4.44.0302051943460.442-100000@gannet.stats>
References: <Pine.LNX.4.44.0302051943460.442-100000@gannet.stats>
Message-ID: <x2bs1pk9c4.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> Is this intentional?
> 
> R:
> > x <- 1:7
> > x[c(1, NA, 3)] <- -(4:6)
> > x
> [1] -4  2 -6  4  5  6  7
> 
> so NAs are treated as FALSE
> 
> S+6.1:
> > x <- 1:7
> > x[c(1, NA, 3)] <- -(4:6)
> Warning messages:
>   Replacement length not a multiple of number of elements to
> 	replace in: x[c(1, NA, 3)] <-  - (4:6)
> > x
> [1] -4  2 -5  4  5  6  7
> 
> and NAs are ignored.

Hmm. Neither of the options look too safe to me...

A 3rd bit of logic would say that you should get a vector of
7 NAs since you're asking to put the -5 into an unknown location...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From roger@ysidro.econ.uiuc.edu  Thu Feb  6 14:31:02 2003
From: roger@ysidro.econ.uiuc.edu (Roger Koenker)
Date: Thu Feb  6 14:31:02 2003
Subject: [Rd] make fails for 1.7.0 on mac os x 10.1
Message-ID: <Pine.SOL.4.30.0302060704190.13865-100000@ysidro.econ.uiuc.edu>

I've been running a binary installation (kindly provided by Jan de Leeuw)
on mac G4, but was inspired this morning to try to install 1.7.0 on the G4
as well as on my desktop solaris box.

This worked smoothly on my solaris system but on the G4 the
make dies shortly after compiling lapack with:

/usr/bin/libtool: internal link edit command failed
make[4]: *** [libRlapack.dylib] Error 1
make[3]: *** [R] Error 2
make[2]: *** [R] Error 1
make[1]: *** [R] Error 1
make: *** [R] Error 1

The output from configure seemed ok...but there were lots of messages of the following
sort that I thought might also suggest that something was wrong.

/usr/include/gcc/darwin/2.95.2/g++/../machine/limits.h:7: #error architecture not supported
In file included from /usr/include/sys/signal.h:70,
                 from /usr/include/signal.h:62,
                 from ../../../src/include/Defn.h:60,
                 from sockconn.c:32:
/usr/include/machine/signal.h:31: #error architecture not supported
In file included from /usr/include/setjmp.h:25,
                 from ../../../src/include/Defn.h:61,
                 from sockconn.c:32:

Any suggestions, greatly appreciated.

url:	www.econ.uiuc.edu	Roger Koenker		Dept. of Economics UCL,
email	rkoenker@uiuc.edu	Department of Economics Drayton House,
vox: 	217-333-4558		University of Illinois	30 Gorden St,
fax:   	217-244-6678		Champaign, IL 61820	London,WC1H 0AX, UK
							vox:	020-7679-5838


From ripley@stats.ox.ac.uk  Thu Feb  6 14:42:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Feb  6 14:42:03 2003
Subject: [Rd] make fails for 1.7.0 on mac os x 10.1
In-Reply-To: <Pine.SOL.4.30.0302060704190.13865-100000@ysidro.econ.uiuc.edu>
Message-ID: <Pine.LNX.4.44.0302061334230.31686-100000@gannet.stats>

See the comment in NEWS.  We know MacOS X does not currently build *on
some installations* unless vecLib is installed (see R-admin.texi).

On Thu, 6 Feb 2003, Roger Koenker wrote:

> I've been running a binary installation (kindly provided by Jan de Leeuw)
> on mac G4, but was inspired this morning to try to install 1.7.0 on the G4

I presume you mean R-devel?  1.7.0 is not released, and this will be 
addressed before release (in a couple of months).

> as well as on my desktop solaris box.
> 
> This worked smoothly on my solaris system but on the G4 the
> make dies shortly after compiling lapack with:
> 
> /usr/bin/libtool: internal link edit command failed
> make[4]: *** [libRlapack.dylib] Error 1
> make[3]: *** [R] Error 2
> make[2]: *** [R] Error 1
> make[1]: *** [R] Error 1
> make: *** [R] Error 1
> 
> The output from configure seemed ok...but there were lots of messages of the following
> sort that I thought might also suggest that something was wrong.
> 
> /usr/include/gcc/darwin/2.95.2/g++/../machine/limits.h:7: #error architecture not supported
> In file included from /usr/include/sys/signal.h:70,
>                  from /usr/include/signal.h:62,
>                  from ../../../src/include/Defn.h:60,
>                  from sockconn.c:32:
> /usr/include/machine/signal.h:31: #error architecture not supported
> In file included from /usr/include/setjmp.h:25,
>                  from ../../../src/include/Defn.h:61,
>                  from sockconn.c:32:

I am told that is not the current gcc compiler for MacOS X (and it is way
old for gcc), and I suspect nothing before gcc 3.1 is going to work.  
R-devel needs the ability to make dynamic libraries including Fortran
code, and MacOS X seems to have troubles doing that.  Using vecLib this is
avoided, and it seems to work out of the box, and without it seems to need
a recent compiler (but Jan de Leeuw has built it).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From wolfram@fischer-zim.ch  Thu Feb  6 16:40:03 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Thu Feb  6 16:40:03 2003
Subject: [Rd] signif {base}: changes to scientific notation
Message-ID: <20030206163856.A2812@s1x.zimnet.ch>

PROBLEM
    `signif' does change to scientic notation
    at different levels depending on the number
    of significant digits in the input.

    This can generate tables where figures change
    ``irregularly'' from normal to scientific notation.


PROPOSAL
    The change to the scientific notation should
    be made only if the figure in scientific notation
    - with potentially as many significant digits as 
	given as argument to the call of `signif' -
    would be shorter than the figure in normal notation.


EXAMPLE

test.signif <- function( d=2, n=9 ){
    for( i in 1:n )
        cat( paste( sep='\t'
                , i
                , signif( 10^i * 1     , d )
                , signif( 10^i * 1.2   , d )
                , signif( 10^i * 1.23  , d )
                , signif( 10^i * 1.234 , d )
                )
            , '\n'
            )
}

> test.signif(4)
1       10      12      12.3      12.34 
2       100     120     123       123.4 
3       1000    1200    1230      1234 
4       10000   12000   12300     12340 
5       1e+05   120000  123000    123400 
6       1e+06   1200000 1230000   1234000 
7       1e+07   1.2e+07 12300000  12340000 
8       1e+08   1.2e+08 1.23e+08  123400000 
9       1e+09   1.2e+09 1.23e+09  1.234e+09

I would expect/propose that the scientific notation in this
example with 4 significant digits begins only at line 9 in 
all columns.


Wolfram


From ripley@stats.ox.ac.uk  Thu Feb  6 16:54:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Feb  6 16:54:03 2003
Subject: [Rd] signif {base}: changes to scientific notation
In-Reply-To: <20030206163856.A2812@s1x.zimnet.ch>
Message-ID: <Pine.LNX.4.44.0302061546330.2400-100000@gannet.stats>

You are confusing signif() and printing!

signif() returns a real number.

Printing does exactly what it is described to do, and has no concept of 
how the number was produced.

I guess you were looking for format(), which allows more control.

On Thu, 6 Feb 2003, Wolfram Fischer - Z/I/M wrote:

> PROBLEM
>     `signif' does change to scientic notation
>     at different levels depending on the number
>     of significant digits in the input.
> 
>     This can generate tables where figures change
>     ``irregularly'' from normal to scientific notation.
> 
> 
> PROPOSAL
>     The change to the scientific notation should
>     be made only if the figure in scientific notation
>     - with potentially as many significant digits as 
> 	given as argument to the call of `signif' -
>     would be shorter than the figure in normal notation.

This is a misunderstanding of what is happening

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jgentry@jimmy.harvard.edu  Thu Feb  6 19:12:02 2003
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Thu Feb  6 19:12:02 2003
Subject: [Rd] Verbosity when using urls in R-devel
Message-ID: <Pine.SOL.4.20.0302061303470.13994-100000@santiam.dfci.harvard.edu>

Hello ...

Using a relatively recent rsync of R-devel (it started at least after
1/16/03 as I have a copy of R-devel from then and this doesn't happen),
I've noticed a bit more chatter to the console when accessing URL
connections.

> z <- url("http://www.bioconductor.org/main.html")
> readLines(z)[1]
connected to 'www.bioconductor.org' on port 80.
<snip normal output>

This seems to be coming from R/src/modules/internet

Is this something transient for development purposes, or is it intended to
remain in the code?  If the latter, is there some way to turn it off
(outside of sinking output)?  If one has code which is accessing many url
connections, the screen can get quite spammy.

Thanks
-Jeff


From ripley@stats.ox.ac.uk  Thu Feb  6 19:40:03 2003
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu Feb  6 19:40:03 2003
Subject: [Rd] Verbosity when using urls in R-devel
In-Reply-To: <Pine.SOL.4.20.0302061303470.13994-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.WNT.4.44.0302061828520.548-100000@gannet.stats.ox.ac.uk>

On Thu, 6 Feb 2003, Jeff Gentry wrote:

> Hello ...
>
> Using a relatively recent rsync of R-devel (it started at least after
> 1/16/03 as I have a copy of R-devel from then and this doesn't happen),

Please use intelligible date formats, like R does.

> I've noticed a bit more chatter to the console when accessing URL
> connections.
>
> > z <- url("http://www.bioconductor.org/main.html")
> > readLines(z)[1]
> connected to 'www.bioconductor.org' on port 80.
> <snip normal output>
>
> This seems to be coming from R/src/modules/internet
>
> Is this something transient for development purposes, or is it intended to
> remain in the code?  If the latter, is there some way to turn it off
> (outside of sinking output)?  If one has code which is accessing many url
> connections, the screen can get quite spammy.

There is *one* extra line.
It is intended to remain in the code.
There *is* a way to control the output: RTFM.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Robert King <robert.king@newcastle.edu.au>  Fri Feb  7 00:19:02 2003
From: Robert King <robert.king@newcastle.edu.au> (Robert King)
Date: Fri Feb  7 00:19:02 2003
Subject: [Rd] 1.7.0 build error in debian stable i386
Message-ID: <Pine.LNX.4.21.0302070936430.26316-100000@tolstoy.newcastle.edu.au>

I'm running debian stable, with the addition of tcl8.4-dev, tk8.4-dev from
testing.

debian/rules build gives this ...

gcc -shared  -o methods.so do_substitute_direct.o methods_list_dispatch.o
method_meta_data.o slot.o class_support.o tests.o    -L../../../../bin -lR
mkdir -p -- ../../../../library/methods/libs
make[6]: Leaving directory `/home/king/R/source/src/library/methods/src'
make[5]: Leaving directory `/home/king/R/source/src/library/methods/src'
make[5]: Entering directory `/home/king/R/source/src/library/methods'
dumping R code in package 'methods'
initializing class and method definitions now ...Error in
.Call("R_methodsPackageMetaName", prefix, name, PACKAGE = "methods") : 
	.Call function name not in load table
Execution halted
make[5]: *** [../../../library/methods/R/all.rda] Error 1
make[5]: Leaving directory `/home/king/R/source/src/library/methods'
make[4]: *** [all] Error 2
make[4]: Leaving directory `/home/king/R/source/src/library/methods'
make[3]: *** [R] Error 1
make[3]: Leaving directory `/home/king/R/source/src/library'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/home/king/R/source/src'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/king/R/source'
make: *** [make-arch-stamp] Error 2


packages:
+++-==============-==============-============================================
ii  blas-dev       1.1-9          Basic Linear Algebra Subroutines, static
lib
ii  libgnome-dev   1.4.1.4-3      The Gnome libraries -- development
package
ii  libzvt-dev     1.4.1.4-3      The Gnome zvt (zterm) widget --
development 
ii  libgtkxmhtml-d 1.4.1.4-3      The Gnome gtkxmhtml (HTML) widget --
develop
ii  tcl8.4-dev     8.4.0-4        The Tool Command Language (TCL) v8.4 -
Devel
ii  tk8.4-dev      8.4.0-5        The Tk toolkit for TCL and X11 v8.4 -
Develo
ii  libglade-gnome 0.17-2.2       Development files for libglade (Gnome
widget
ii  bison          1.35-3         A parser generator that is compatible
with Y
ii  g77            2.95.4-14      The GNU Fortran 77 compiler.
ii  gcc            2.95.4-14      The GNU C compiler.
ii  groff-base     1.17.2-15.wood GNU troff text-formatting system (base
syste
ii  libncurses5-de 5.2.20020112a- Developer's libraries and docs for
ncurses
ii  libreadline4-d 4.2a-5         GNU readline and history libraries,
developm
ii  tetex-bin      1.0.7+20011202 teTeX binary files
ii  tetex-extra    1.0.2+20011202 extra teTeX library files
ii  debhelper      4.0.2          helper programs for debian/rules
ii  texi2html      1.64-cvs200104 Convert Texinfo files to HTML
ii  texinfo        4.1-2          Documentation system for on-line
information
ii  libbz2-dev     1.0.2-1        A high-quality block-sorting file
compressor
ii  libpcre3-dev   3.4-1.1        Development stuff for libpcre
ii  libpaperg-dev  1.1.8          Library for handling paper
characteristics (

----
Robert King, Statistics, School of Mathematical & Physical Sciences,
University of Newcastle, Australia
Room V133  ph +61 2 4921 5548
Robert.King@newcastle.edu.au   http://maths.newcastle.edu.au/~rking/


From edd@debian.org  Fri Feb  7 02:59:02 2003
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri Feb  7 02:59:02 2003
Subject: [Rd] 1.7.0 build error in debian stable i386
In-Reply-To: <Pine.LNX.4.21.0302070936430.26316-100000@tolstoy.newcastle.edu.au>
References: <Pine.LNX.4.21.0302070936430.26316-100000@tolstoy.newcastle.edu.au>
Message-ID: <20030207015822.GA26447@sonny.eddelbuettel.com>

On Fri, Feb 07, 2003 at 10:11:40AM +1100, Robert King wrote:
> I'm running debian stable, with the addition of tcl8.4-dev, tk8.4-dev from
> testing.
> 
> debian/rules build gives this ...

First off, congrats on doing it this way. Locally rebuilding a newer Debian
package against the given libraries of an older release is the Right Thing
as it gives you the full package management control.

Secondly, I suspect gcc et al are playing a role. Stable only seems to have
gcc-3.0 whereas testing has gcc-3.2.1  I am currently building 1.7.0 on
testing just to see if it works.  [ I had built the 1.6.2 packages on
unstable with gcc-3.2.2 ]

Dirk

-- 
Prediction is very difficult, especially about the future. 
				             -- Niels Bohr


From pd@pubhealth.ku.dk  Fri Feb  7 07:15:04 2003
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri Feb  7 07:15:04 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200302070615.h176F4KH022504@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0, 0.6-8
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
..Seem to be due to gcc `2.96' from RH7.3
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500
* PR# 2480 *
Subject: bug in CrossTable (package:gregmisc)
From: John_Hendrickx@yahoo.com
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
* PR# 2499 *
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
Date: Mon, 27 Jan 2003 17:28:11 +0100
..Needs to resubmit in more useful format.
* PR# 2520 *
Subject: Apparent parser problem
From: "Jim Rogers" <jrogers@cantatapharm.com>
Date: Sat, 1 Feb 2003 16:51:41 -0500
..Its an ESS or XEmacs problem. I redirected him to ESS-bugs.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
* PR# 2511 *
Subject: Possible bug in socketConnection
From: DEd@novonordisk.com
Date: Fri, 31 Jan 2003 11:04:13 +0100 (MET)
* PR# 2518 *
Subject: AIC.default
From: Alec Stephenson <a.stephenson@lancaster.ac.uk>
Date: Sat, 1 Feb 2003 10:17:10 +0000 (GMT)
* PR# 2519 *
Subject: removeMethods (methods) does not work in my examples
From: ripley@stats.ox.ac.uk
Date: Sat, 1 Feb 2003 20:27:31 +0000 (GMT)
* PR# 2534 *
Subject: (己牢堡绊)己牢甸父 焊技夸
From: durisex<durisex@hotmail.com>
Date: Thu, 6 Feb 2003 20:01:57 +0100 (MET)


From wolfram@fischer-zim.ch  Fri Feb  7 11:14:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Fri Feb  7 11:14:02 2003
Subject: [Rd] signif {base}: changes to scientific notation
In-Reply-To: <Pine.LNX.4.44.0302061546330.2400-100000@gannet.stats>
References: <20030206163856.A2812@s1x.zimnet.ch> <Pine.LNX.4.44.0302061546330.2400-100000@gannet.stats>
Message-ID: <20030207111431.A1654@s1x.zimnet.ch>

format() did not well the job I wanted.

But I arrived to solve my problem using (e.g.):
	 formatC( signif( 1.234 * 10^(1:8), 3 ), digits=7, flag='-' )


--- In reply to: ---
>Date:    06.02.03 15:53 (+0000)
>From:    ripley@stats.ox.ac.uk
>To:      To Wolfram Fischer - Z/I/M
>Cc:      r-devel@stat.math.ethz.ch
>Subject: Re: [Rd] signif {base}: changes to scientific notation
>
> You are confusing signif() and printing!
> 
> signif() returns a real number.
> 
> Printing does exactly what it is described to do, and has no concept of 
> how the number was produced.
> 
> I guess you were looking for format(), which allows more control.
> 
> On Thu, 6 Feb 2003, Wolfram Fischer - Z/I/M wrote:
> 
> > PROBLEM
> >     `signif' does change to scientic notation
> >     at different levels depending on the number
> >     of significant digits in the input.
> > 
> >     This can generate tables where figures change
> >     ``irregularly'' from normal to scientific notation.
> > 
> > 
> > PROPOSAL
> >     The change to the scientific notation should
> >     be made only if the figure in scientific notation
> >     - with potentially as many significant digits as 
> > 	given as argument to the call of `signif' -
> >     would be shorter than the figure in normal notation.
> 
> This is a misunderstanding of what is happening
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ded@novonordisk.com  Fri Feb  7 15:53:05 2003
From: ded@novonordisk.com (ded@novonordisk.com)
Date: Fri Feb  7 15:53:05 2003
Subject: [Rd] Bug in socketConnection (PR#2535)
Message-ID: <200302071453.h17ErB35019440@pubhealth.ku.dk>

Platform: Windows
Version: 1.6.2

When first called, socketConnection gives an error. On subsequent calls it
performs correctly. Thus the first call has the effect of "priming" the
connection. Eg

> socketConnection(port=50)
Error in socketConnection(port = 50) : unable to open connection In
addition: Warning message: 
localhost:50 cannot be opened 
> MIM <- socketConnection(port=50)
> 

The first call gives the error irrespective of which port number is
specified. The second call shown here requires, correctly, that a socket
connection using port 50 on the local host is available.


David Edwards, PhD, 
Principal Statistician, 
Department of Biostatistics, Novo Nordisk A/S, Bagsvrd, Denmark.
DEd@novonordisk.com <mailto:DEd@novonordisk.com> 
Tlf: +45 44 42 62 35. Fax: +45 44 42 14 80


	[[alternate HTML version deleted]]


From ripley@stats.ox.ac.uk  Fri Feb  7 16:12:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Feb  7 16:12:02 2003
Subject: [Rd] Bug in socketConnection (PR#2535)
In-Reply-To: <200302071453.h17ErB35019440@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302071504520.17748-100000@gannet.stats>

You have already reported this as PR#2511. Neither report is reproducible,
since we have no idea how to reproduce the socket connection you used.

Since you are the only one with the ability to reproduce this, could you 
please submit the patch needed to resolve it?   (It may well be a timing 
issue specific to your system, and we don't have the resources to 
debug unusual uses by commercial users on platforms very few of the 
developers use.)

On Fri, 7 Feb 2003 ded@novonordisk.com wrote:

> Platform: Windows
> Version: 1.6.2
> 
> When first called, socketConnection gives an error. On subsequent calls it
> performs correctly. Thus the first call has the effect of "priming" the
> connection. Eg
> 
> > socketConnection(port=50)
> Error in socketConnection(port = 50) : unable to open connection In
> addition: Warning message: 
> localhost:50 cannot be opened 
> > MIM <- socketConnection(port=50)
> > 
> 
> The first call gives the error irrespective of which port number is
> specified. The second call shown here requires, correctly, that a socket
> connection using port 50 on the local host is available.
> 
> 
> David Edwards, PhD, 
> Principal Statistician, 
> Department of Biostatistics, Novo Nordisk A/S, Bagsvrd, Denmark.
> DEd@novonordisk.com <mailto:DEd@novonordisk.com> 
> Tlf: +45 44 42 62 35. Fax: +45 44 42 14 80

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From edd@debian.org  Fri Feb  7 16:22:06 2003
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri Feb  7 16:22:06 2003
Subject: [Rd] 1.7.0 build error in debian stable i386
Message-ID: <E18hA9C-0002lN-00@sonny.eddelbuettel.com>

I wrote last night:

> On Fri, Feb 07, 2003 at 10:11:40AM +1100, Robert King wrote:
> > I'm running debian stable, with the addition of tcl8.4-dev, tk8.4-dev from
> > testing.
> > 
> > debian/rules build gives this ...
> 
> First off, congrats on doing it this way. Locally rebuilding a newer Debian
> package against the given libraries of an older release is the Right Thing
> as it gives you the full package management control.
> 
> Secondly, I suspect gcc et al are playing a role. Stable only seems to have

I was probably wrong here -- a few other papckages I'm involved with required
g++-3.2 due to heavier C++ usage.  This should not be an issue here.

> gcc-3.0 whereas testing has gcc-3.2.1  I am currently building 1.7.0 on
> testing just to see if it works.  [ I had built the 1.6.2 packages on
> unstable with gcc-3.2.2 ]

It failed when building the standalone math library due to NA_INTEGER 
being undefined.  As these tarballs are clearly labelled development,
I don't have a problem with that at all.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.


From ripley@stats.ox.ac.uk  Fri Feb  7 22:19:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Feb  7 22:19:02 2003
Subject: [Rd] R/S indexing difference
In-Reply-To: <x2bs1pk9c4.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0302072113170.25989-100000@gannet.stats>

The S version is at least documented (p.157 of the Green book).  I can't 
find any documentation of the R version, not even in the so-called
`R Language Definition': is there one?

On 6 Feb 2003, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > Is this intentional?
> > 
> > R:
> > > x <- 1:7
> > > x[c(1, NA, 3)] <- -(4:6)
> > > x
> > [1] -4  2 -6  4  5  6  7
> > 
> > so NAs are treated as FALSE
> > 
> > S+6.1:
> > > x <- 1:7
> > > x[c(1, NA, 3)] <- -(4:6)
> > Warning messages:
> >   Replacement length not a multiple of number of elements to
> > 	replace in: x[c(1, NA, 3)] <-  - (4:6)
> > > x
> > [1] -4  2 -5  4  5  6  7
> > 
> > and NAs are ignored.
> 
> Hmm. Neither of the options look too safe to me...
> 
> A 3rd bit of logic would say that you should get a vector of
> 7 NAs since you're asking to put the -5 into an unknown location...
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard@biostat.ku.dk  Sat Feb  8 20:05:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat Feb  8 20:05:02 2003
Subject: [Rd] Bug in socketConnection (PR#2535)
In-Reply-To: <Pine.LNX.4.44.0302071504520.17748-100000@gannet.stats>
References: <Pine.LNX.4.44.0302071504520.17748-100000@gannet.stats>
Message-ID: <x2d6m2sidn.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> You have already reported this as PR#2511. Neither report is reproducible,
> since we have no idea how to reproduce the socket connection you used.
> 
> Since you are the only one with the ability to reproduce this, could you 
> please submit the patch needed to resolve it?   (It may well be a timing 
> issue specific to your system, and we don't have the resources to 
> debug unusual uses by commercial users on platforms very few of the 
> developers use.)

Erm, Brian, you're being foiled by the .com address. This is part of
the gR project, so David is already in the process of contributing
substantially. It is not work requested by Novo.

That being said, you are of course right that we'll need a small
reproducible example (i.e. preferably not the entire MIM program...)
in order to be able to help with the problem.

(And bugs.r-project.org seems to have gone down again after I went to
Augsburg, so I think he can be excused for the double submit.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From ripley@stats.ox.ac.uk  Mon Feb 10 09:11:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Feb 10 09:11:02 2003
Subject: [Rd] building R with gcc on Solaris
Message-ID: <Pine.LNX.4.44.0302100757330.24293-100000@gannet.stats>

Both gcc 3.2.1 and 3.2.2 (the current version) have problems building R on
32-bit Solaris (that is not using the -m64 flag).  The symptoms found so
far are crashes when attempting to draw graphics and incorrect centring of
text on plots. I spent a long time debugging this and have now filed a gcc
bug report on the way clipTextCode is compiled.

It is possible to get a build that does not crash by compiling
src/main/{engine.c,graphics.c} and src/modules/X11/devX11.c without 
optimization, but I do not believe those are the only trouble spots, as
diffing postscript output against that produced on a build with gcc 3.2
shows further discrepancies.

The safest course of action seems to be to avoid gcc 3.2.1/2 on 
Sparc Solaris (and perhaps on other Sparc OSes).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bnan@umich.edu  Mon Feb 10 17:21:03 2003
From: bnan@umich.edu (bnan@umich.edu)
Date: Mon Feb 10 17:21:03 2003
Subject: [Rd] Pearson's residuals in logistic regression (PR#2539)
Message-ID: <200302101619.h1AGJ635003513@pubhealth.ku.dk>

Full_Name: Bin Nan
Version: 1.3.0
OS: Win32
Submission from: (NULL) (141.211.15.110)


The function resid(fit, "pearson") seems not giving the same Pearson's residuals
for logistic regression as what Splus does. I found the problem when I fitted
glm with family = binomial using Crowder's seed data.


From ripley@stats.ox.ac.uk  Mon Feb 10 18:04:06 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Feb 10 18:04:06 2003
Subject: [Rd] Pearson's residuals in logistic regression (PR#2539)
In-Reply-To: <200302101619.h1AGJ635003513@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302101655320.25510-100000@gannet.stats>

On Mon, 10 Feb 2003 bnan@umich.edu wrote:

> Full_Name: Bin Nan
> Version: 1.3.0
           ^^^^^

That's way, way old.  This has been changed since.
  
> OS: Win32
> Submission from: (NULL) (141.211.15.110)
> 
> 
> The function resid(fit, "pearson") seems not giving the same Pearson's residuals
> for logistic regression as what Splus does. I found the problem when I fitted
> glm with family = binomial using Crowder's seed data.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard@biostat.ku.dk  Mon Feb 10 18:44:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Feb 10 18:44:02 2003
Subject: [Rd] Pearson's residuals in logistic regression (PR#2539)
In-Reply-To: <200302101619.h1AGJ635003513@pubhealth.ku.dk>
References: <200302101619.h1AGJ635003513@pubhealth.ku.dk>
Message-ID: <x2ptq02fpt.fsf@biostat.ku.dk>

bnan@umich.edu writes:

> Full_Name: Bin Nan
> Version: 1.3.0
> OS: Win32
> Submission from: (NULL) (141.211.15.110)
> 
> 
> The function resid(fit, "pearson") seems not giving the same Pearson's residuals
> for logistic regression as what Splus does. I found the problem when I fitted
> glm with family = binomial using Crowder's seed data.

1.3.0 is almost two years old. Some problems of that kind have long
since been resolved. Do try a current version.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From rs381@wbic.cam.ac.uk  Tue Feb 11 11:45:04 2003
From: rs381@wbic.cam.ac.uk (rs381@wbic.cam.ac.uk)
Date: Tue Feb 11 11:45:04 2003
Subject: [Rd] mean function on correlation matrices (PR#2540)
Message-ID: <200302111045.h1BAjO35008214@pubhealth.ku.dk>

Full_Name: Raymond Salvador
Version: R 1.6.2
OS: Windows ME
Submission from: (NULL) (131.111.93.195)


The mean function applied on individual components of several correlation
matrices
gives a wrong result (gives the first value instead of the mean).

Here there is a simple example

x1 <- rnorm(10,1,1)
y1 <- rnorm(10,1,1)
z1 <- cbind(x1,y1)
w1 <- cor(z1)
x2 <- rnorm(10,1,1)
y2 <- rnorm(10,1,1)
z2 <- cbind(x2,y2)
w2 <- cor(z2)

w1[1,2]
w2[1,2]
mean(w1[1,2], w2[1,2])


From p.dalgaard@biostat.ku.dk  Tue Feb 11 12:24:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Feb 11 12:24:03 2003
Subject: [Rd] mean function on correlation matrices (PR#2540)
In-Reply-To: <200302111045.h1BAjO35008214@pubhealth.ku.dk>
References: <200302111045.h1BAjO35008214@pubhealth.ku.dk>
Message-ID: <x2fzqv6ox0.fsf@biostat.ku.dk>

rs381@wbic.cam.ac.uk writes:

> Full_Name: Raymond Salvador
> Version: R 1.6.2
> OS: Windows ME
> Submission from: (NULL) (131.111.93.195)
> 
> 
> The mean function applied on individual components of several correlation
> matrices
> gives a wrong result (gives the first value instead of the mean).
> 
> Here there is a simple example
> 
> x1 <- rnorm(10,1,1)
> y1 <- rnorm(10,1,1)
> z1 <- cbind(x1,y1)
> w1 <- cor(z1)
> x2 <- rnorm(10,1,1)
> y2 <- rnorm(10,1,1)
> z2 <- cbind(x2,y2)
> w2 <- cor(z2)
> 
> w1[1,2]
> w2[1,2]
> mean(w1[1,2], w2[1,2])

Yes, and? 

> mean(2,6)
[1] 2

> mean(c(2,6))
[1] 4

The mean function just doesn't work the way you expected. Please read
the help page before reporting bugs.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From jgentry@jimmy.harvard.edu  Tue Feb 11 18:03:03 2003
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Tue Feb 11 18:03:03 2003
Subject: [Rd] Ruuid package
Message-ID: <Pine.SOL.4.20.0302111157140.29842-100000@santiam.dfci.harvard.edu>

Hello ...

I would like to direct people's attention to the package "Ruuid" on the
Biconductor website
(http://www.bioconductor.org/repository/devel/package/html/Ruuid.html).

It's purpose is to generate UUID values, and has a simple R interface
(currently one function: getuuid(), with multiple options).

Under unix, it uses Theodore Ts'o's libuuid to create and manage these
values, while on a Win32 system it uses both the Win32 API and a subset of
the libuuid.

A S4 class was created to manage the UUID values in R.

Please let me know if you encounter any difficulty with this package.

Thanks
-Jeff Gentry


From jgentry@jimmy.harvard.edu  Tue Feb 11 18:40:07 2003
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Tue Feb 11 18:40:07 2003
Subject: [Rd] Re: Ruuid package
In-Reply-To: <Pine.SOL.4.20.0302111157140.29842-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.SOL.4.20.0302111231100.29842-100000@santiam.dfci.harvard.edu>

Sorry for the self-followup, but just a clarification ...

> It's purpose is to generate UUID values, and has a simple R interface
> (currently one function: getuuid(), with multiple options).

For those that are not familiar, a UUID is a "Universally Unique ID",
a value generated that is guaranteed unique until the year 3400.  The
algorithm uses the machine's MAC address/Token ID, the current time and
random seeds and generates a 128 bit value.  For those familiar with
GUID's, these are the same thing.

A draft of the UUID standard can be found at:
http://lists.research.netsol.com/pipermail/urn-nid/2002-September/000323.html
for more information.

-J


From ripley@stats.ox.ac.uk  Tue Feb 11 19:14:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Feb 11 19:14:02 2003
Subject: [Rd] Compilers on Solaris: beware!
Message-ID: <Pine.LNX.4.44.0302111758500.1124-100000@gannet.stats>

We've just upgraded our Sun compilers from (top line of cc -V)

cc: Sun WorkShop 6 update 1 C 5.2 2000/09/11

(aka Forte 6) to

cc: Forte Developer 7 C 5.4 2002/03/09

although the later seem to be known as Sun ONE these days.  A few comments
which may be helpful to other users:

1) It seems that to use C++ code (e.g. package Matrix) you now need to
add -lCstd to SHLIB_CXXLDFLAGS.  We will look into making configure do 
that automatically.

2) To get libsunperf recognized under v9 (64-bit) options you need
--with-blas="-xlic_lib=sunperf": this is already in the configure script 
for R-devel.

3) libsunperf now seems to have the LAPACK entry points which were
missing, and works well under 32-bit builds providing both BLAS and
LAPACK, although it does send the occasional error message to stderr.  
*However* it has gone from bad to worse for a 64-bit build, with 
information enquiries about workspace sizes generating errors.  (It is 
strange that they do work in 32-bit builds.)


Also gcc 3.2.2 has a fatal optimization bug on Solaris, and code generated 
with -O2 causes R's graphics devices to crash (the problem being the 
DevDesc* pointer at the end of the arg sequence is not passed correctly).
Avoiding optimization seems a partial cure, and I've reverted to gcc 3.2.


I have updated the R-admin manual, but only in R-devel.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rdiaz@cnio.es  Tue Feb 11 19:26:03 2003
From: rdiaz@cnio.es (rdiaz@cnio.es)
Date: Tue Feb 11 19:26:03 2003
Subject: [Rd] cbind rises floating point exception (PR#2541)
Message-ID: <200302111825.h1BIPc35012963@pubhealth.ku.dk>

> x <- matrix(1:10, ncol = 2)
> xc <- cor(x[, 2],  x[, 0])
> cbind(xc, vector())

Process R floating point exception at Tue Feb 11 19:16:51 2003

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.2              
year     2003             
month    01               
day      10               
language R                

-- 
Ramn Daz-Uriarte
Bioinformatics Unit
Centro Nacional de Investigaciones Oncolgicas (CNIO)
(Spanish National Cancer Center)
Melchor Fernndez Almagro, 3
28029 Madrid (Spain)
http://bioinfo.cnio.es/~rdiaz


From p.dalgaard@biostat.ku.dk  Tue Feb 11 19:43:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Feb 11 19:43:03 2003
Subject: [Rd] cbind rises floating point exception (PR#2541)
In-Reply-To: <200302111825.h1BIPc35012963@pubhealth.ku.dk>
References: <200302111825.h1BIPc35012963@pubhealth.ku.dk>
Message-ID: <x2d6ly64l0.fsf@biostat.ku.dk>

rdiaz@cnio.es writes:

> > x <- matrix(1:10, ncol = 2)
> > xc <- cor(x[, 2],  x[, 0])
> > cbind(xc, vector())

[SIGFPE]

Confirmed. Similar effect:

y <- matrix(0,1,0)
cbind(y,vector())

Actually not a floating point error but an arithmetic exception from
calculation of

i % k

with i = k = 0 at l.1123 in bind.c. Presumably the "if (length(u) >=
lenmin)" should also check that length(u) > 0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From ripley@stats.ox.ac.uk  Wed Feb 12 14:35:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Feb 12 14:35:03 2003
Subject: [Rd] Build of R-devel for Windows
Message-ID: <Pine.LNX.4.44.0302121326520.3663-100000@gannet.stats>

I have had several recent enquiries about problems with building R-devel
for Windows, so I have put a current build at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre/rw1070.exe

Please note:

1) I am not the Windows maintainer, and questions should not have been 
sent directly to me.

2) R-devel is `Under development' and it is unreasonable to expect the
sources to build on Windows at all times, and even more unreasonable to 
expect the documentation to be current.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From R-devel@stat.math.ethz.ch  Wed Feb 12 16:53:03 2003
From: R-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed Feb 12 16:53:03 2003
Subject: [Rd] Compilers on Solaris: beware!
In-Reply-To: <Pine.LNX.4.44.0302111758500.1124-100000@gannet.stats>
References: <Pine.LNX.4.44.0302111758500.1124-100000@gannet.stats>
Message-ID: <20030212155240.GA80998@spuckler.il.thewrittenword.com>

On Tue, Feb 11, 2003 at 06:13:00PM +0000, ripley@stats.ox.ac.uk wrote:
> Also gcc 3.2.2 has a fatal optimization bug on Solaris, and code generated 
> with -O2 causes R's graphics devices to crash (the problem being the 
> DevDesc* pointer at the end of the arg sequence is not passed correctly).
> Avoiding optimization seems a partial cure, and I've reverted to gcc 3.2.

Have you filed a PR with the GCC developers about this
(http://gcc.gnu.org)?

-- 
albert chin (china@thewrittenword.com)


From ripley@stats.ox.ac.uk  Wed Feb 12 17:04:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Feb 12 17:04:02 2003
Subject: [Rd] Compilers on Solaris: beware!
In-Reply-To: <20030212155240.GA80998@spuckler.il.thewrittenword.com>
Message-ID: <Pine.LNX.4.44.0302121602480.14509-100000@gannet.stats>

Yes, of course!

On Wed, 12 Feb 2003, Albert Chin wrote:

> On Tue, Feb 11, 2003 at 06:13:00PM +0000, ripley@stats.ox.ac.uk wrote:
> > Also gcc 3.2.2 has a fatal optimization bug on Solaris, and code generated 
> > with -O2 causes R's graphics devices to crash (the problem being the 
> > DevDesc* pointer at the end of the arg sequence is not passed correctly).
> > Avoiding optimization seems a partial cure, and I've reverted to gcc 3.2.
> 
> Have you filed a PR with the GCC developers about this
> (http://gcc.gnu.org)?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bert_gunter@merck.com  Thu Feb 13 15:10:05 2003
From: bert_gunter@merck.com (bert_gunter@merck.com)
Date: Thu Feb 13 15:10:05 2003
Subject: [Rd] colSums etc. documentation (PR#2545)
Message-ID: <200302131409.h1DE9j35028081@pubhealth.ku.dk>

For your consideration:

> z
     [,1] [,2]
[1,]    1   NA
[2,]    2   NA
[3,]    3   NA


> colSums(z)
[1]  6 NA

Correct, according to the documentation

> colSums(z,na.rm=T)
[1] 6 0

Surprising to me, but, as documented, correctly consistent with apply() and 
>sum(NULL)
[1] 0

The documentation for sum() explicitly notes that the sum of an empty set is
0 by definition, so that users will not get caught by this behavior (or at
least cannot complain about it if they are). I wonder if it might be wise to
include this note in the documentation for colSums, colMeans, etc. too, as
the current Help file says only:
"If there are no non-missing values in a range to be summed over, the
component of the output is set to NA."
This is obviously the case only when na.rm=F.
Cheers,
Bert Gunter
Biometrics Research
Merck & Company
PO Box 200, Rahway, NJ 07065-0900
Ph: (732) 594-7765    Fax: 594-1565

"The business of the statistician is to catalyze the scientific learning
process."    --  George E.P. Box







------------------------------------------------------------------------------


From brahm@alum.mit.edu  Thu Feb 13 15:45:05 2003
From: brahm@alum.mit.edu (David Brahm)
Date: Thu Feb 13 15:45:05 2003
Subject: [Rd] colSums etc. documentation (PR#2545)
References: <200302131409.h1DE9j35028081@pubhealth.ku.dk>
Message-ID: <15947.44840.372377.325119@gargle.gargle.HOWL>

Bert Gunter <bert_gunter@merck.com> wrote:
> > z
>      [,1] [,2]
> [1,]    1   NA
> [2,]    2   NA
> [3,]    3   NA
>
> > colSums(z,na.rm=T)
> [1] 6 0

Certainly correct (the empty set has sum 0 and product 1) and consistent with
other functions.  But you are not the first to mention being surprised by this!
A little more documentation might be helpful, how about:

  If na.rm=TRUE and there are no non-missing values in a range to be summed
  over, the resulting component of the output is 0, consistent with apply().

It seems to me that the na.rm=FALSE case obviously produces `NA', so there's no
need to document this explicitly.
-- 
                              -- David Brahm (brahm@alum.mit.edu)


From patrick@burns-stat.com  Thu Feb 13 21:57:03 2003
From: patrick@burns-stat.com (patrick@burns-stat.com)
Date: Thu Feb 13 21:57:03 2003
Subject: [Rd] error from sample if sampling length one character (PR#2546)
Message-ID: <200302132057.h1DKux35000076@pubhealth.ku.dk>

Full_Name: Patrick Burns
Version: 1.6.1
OS: Suse Linux
Submission from: (NULL) (217.36.14.68)



Sample gives an error if it is sampling a length one character
vector:

> sample('a', 1)
Error in sample(x, size, replace, prob) : invalid first argument

The fix is trivial (numeric test in first line of the body):

function (x, size, replace = FALSE, prob = NULL)
{
    if (length(x) == 1 && is.numeric(x) && x >= 1) {
        if (missing(size))
            size <- x
        .Internal(sample(x, size, replace, prob))
    }
    else {
        if (missing(size))
            size <- length(x)
        x[.Internal(sample(length(x), size, replace, prob))]
    }
}

> sample.fixed('a', 1)
[1] "a"


From steve.roberts@man.ac.uk  Fri Feb 14 09:18:03 2003
From: steve.roberts@man.ac.uk (Steve Roberts)
Date: Fri Feb 14 09:18:03 2003
Subject: [Rd] Line rendering in windows - bug?
Message-ID: <3E4CA610.26312.7001B@localhost>

Dear all, 

One for the windows graphics developers I guess.... 

I seem to have hit a bug in the line drawing in  windows (default 
device or explicit calls to win.metafile). As the line segments used 
to plot a curve get smaller (increased resolution)  the line drawn 
seems to get less smooth rather than more smooth, and starts to 
break up.. Attached is a toy example drawing a quadratic with 
increasing resolution. In my real example - a plot for publication - it 
is very difficult to find a compromise where the line segments are 
close enough to give a smooth-looking curve without the thing 
breaking down. Look like a bug or feature in plotting small line 
segments? Using pdf() seems to be OK which suggests a windows 
driver issue - I dimly recall something about wmf and maybe emf 
having an implicit resolution, despite being a vector format. I have 
also noticed that filled symbols (eg pch=16) are not always 
completely filled, but haven't an example to demonstrate this. 

Keep up the good work! 

Steve. 

------------------------example----------------------------------
 #axes and text rendered well 
plot(c(0,22),c(0,100),xlab="X-axis",ylab="Y-axis",type="n")
#lines with large segments 
x<-0:10 
y<-x^2 
for (delta in 1:4) lines(x+delta,y,lwd=delta,type="l") 
#more detailed lines 
x<-seq(0,10,by=.1) 
y<-x^2 
for (delta in 1:4) lines(x+4+delta,y,lwd=delta,type="l") 
#even more detailed lines 
x<-seq(0,10,by=.01) 
y<-x^2 
for (delta in 1:4) lines(x+8+delta,y,lwd=delta,type="l") 
-------------------------------------------------------------------------------------------- 
  Dr Steve Roberts 
  steve.roberts@man.ac.uk

Senior Lecturer in Medical Statistics,
CMMCH NHS Trust and University of Manchester Biostatistics Group,
0161 275 5192 / 0161 276 5785


From ravms@www.unipa.it  Fri Feb 14 18:57:03 2003
From: ravms@www.unipa.it (RAV AntiVirus)
Date: Fri Feb 14 18:57:03 2003
Subject: [Rd] RAV AntiVirus scan results
Message-ID: <200302141752.h1EHq2q03696@www.unipa.it>


-----------------------
This e-mail is generated by the www.unipa.it mail server to warn you that the e-mail
sent by jurispa@unipa.it to r-devel@r-project.org is infected with virus: HTML/IFrame_Exploit*.

Please contact your system administrator for further information.

If you are the sender:
-------------------
The scanned e-mail has your address in the <From> header field. Either your
computer is infected or someone's computer having your e-mail address in
the address book has been infected.

(Please note that some viruses are sending e-mails directly from your computer.
Our advise is to check your computer using an up-to-date antivirus product).

If you are the receiver:
---------------------
Please contact the sender: very probably he/she doesn't know he/she has a computer virus.

Actions taken for the infected files:
-------------------------------------


The infected file was saved to quarantine with name: 1045245122-dfh1EHq2q03689.
The file (part0000:)->(IFRAME0000) attached to mail (with subject:Honey) sent by jurispa@unipa.it to r-devel@r-project.org
is infected with virus: HTML/IFrame_Exploit*.
Cannot clean this file.
The file was successfully deleted by RAV AntiVirus.
The file (part0001:href.scr) attached to mail (with subject:Honey) sent by jurispa@unipa.it to r-devel@r-project.org
is infected with virus: Win32/Klez.H@mm.
Cannot clean this file.
The file was successfully deleted by RAV AntiVirus.
------------------------
this is a copy of the e-mail header:



RAV AntiVirus for Linux i386 version: 8.4.0 (snapshot-20020919)

Scan engine 8.9 for i386.
Last update: Fri, 14 Feb 2003 17:05:32 +01
Scanning for 78156 malwares (viruses, trojans and worms).


From murdoch@stats.uwo.ca  Fri Feb 14 20:17:02 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri Feb 14 20:17:02 2003
Subject: [Rd] plot(date, y) versus plot(y ~ date)
Message-ID: <0jdq4vo0jlrtqps8v6i7uuocp1v4k2oq3f@4ax.com>

If "time" is a POSIXlt variable and "y" is numeric, then plot(time, y)
works but plot(y ~ time) doesn't.

For example, 

 time <- as.POSIXlt( Sys.time() + 1:100)
 y <- rnorm(100)
 plot(time,y)     # succeeds
 plot(y ~ time)  # fails

The reason for this is that there's a plot.POSIXlt method that
converts time to a POSIXct variable, and most of the plotting
machinery works fine on those.  Manual conversion to POSIXct will also
make the plot(y ~ time) version work.

Should this conversion be made automatically?  It looks like doing
something in the internal implementation of model.frame would be
necessary.  It's probably not a good idea to do something specific to
POSIXlt types, but what about attempting to coerce any unrecognized
object to double?  It's easy to implement as.double.POSIXlt.

Duncan Murdoch


From dweeks@watson.hgen.pitt.edu  Fri Feb 14 21:37:02 2003
From: dweeks@watson.hgen.pitt.edu (dweeks@watson.hgen.pitt.edu)
Date: Fri Feb 14 21:37:02 2003
Subject: [Rd] eigen() error: R Version 1.6.1 on Mac OS X (PR#2550)
Message-ID: <200302142037.h1EKb235007465@pubhealth.ku.dk>

Consider this matrix:

> sg
     X1    X2    X3    X4    X5
1 3.240 2.592 2.592 2.592 2.592
2 2.592 3.240 2.592 2.592 2.592
3 2.592 2.592 3.240 2.592 2.592
4 2.592 2.592 2.592 3.240 2.592
5 2.592 2.592 2.592 2.592 3.240

If I compute the eigenvalues of the 'sg' matrix using R Version 1.5.0
(2002-04-29) under Linux (or using Version 1.4.0  (2001-12-19) under
Solaris), I obtain:

> eigen(sg)
$values
[1] 13.608  0.648  0.648  0.648  0.648

I also obtain the same eigenvalues under R Version 1.5.1  (2002-06-17) under
Mac OS X 10.2.3.

However, if I compute the eigenvalues of the 'sg' matrix using R Version
1.6.1  (2002-11-01) under Mac OS X 10.2.3, I obtain a different answer:

> eigen(sg)
$values
[1] 13.123930  0.648000  0.648000  0.648000 -1.732930
> det(sg)
[1] 2.399354
> det(sg,method="eigenvalues")
[1] -7.312317


Thanks,
 -- Dan --


From jago@mclink.it  Fri Feb 14 22:36:03 2003
From: jago@mclink.it (Stefano Iacus)
Date: Fri Feb 14 22:36:03 2003
Subject: [Rd] eigen() error: R Version 1.6.1 on Mac OS X (PR#2550)
In-Reply-To: <200302142037.h1EKb235007465@pubhealth.ku.dk>
Message-ID: <81E449CB-4064-11D7-8936-003065CC4CB8@mclink.it>

Under Darwin R 1.6.2 and R-1.6.1 I get

 > sg
       [,1]  [,2]  [,3]  [,4]  [,5]
[1,] 3.240 2.592 2.592 2.592 2.592
[2,] 2.592 3.240 2.592 2.592 2.592
[3,] 2.592 2.592 3.240 2.592 2.592
[4,] 2.592 2.592 2.592 3.240 2.592
[5,] 2.592 2.592 2.592 2.592 3.240
 > eigen(sg)$values
[1] 13.608  0.648  0.648  0.648  0.648

as well as under Carbon R 1.6.1 and 1.6.2

I cannot reproduce your behaviour.

stefano




On Venerd, feb 14, 2003, at 21:37 Europe/Rome, 
dweeks@watson.hgen.pitt.edu wrote:

> Consider this matrix:
>
>> sg
>      X1    X2    X3    X4    X5
> 1 3.240 2.592 2.592 2.592 2.592
> 2 2.592 3.240 2.592 2.592 2.592
> 3 2.592 2.592 3.240 2.592 2.592
> 4 2.592 2.592 2.592 3.240 2.592
> 5 2.592 2.592 2.592 2.592 3.240
>
> If I compute the eigenvalues of the 'sg' matrix using R Version 1.5.0
> (2002-04-29) under Linux (or using Version 1.4.0  (2001-12-19) under
> Solaris), I obtain:
>
>> eigen(sg)
> $values
> [1] 13.608  0.648  0.648  0.648  0.648
>
> I also obtain the same eigenvalues under R Version 1.5.1  (2002-06-17) 
> under
> Mac OS X 10.2.3.
>
> However, if I compute the eigenvalues of the 'sg' matrix using R 
> Version
> 1.6.1  (2002-11-01) under Mac OS X 10.2.3, I obtain a different answer:
>
>> eigen(sg)
> $values
> [1] 13.123930  0.648000  0.648000  0.648000 -1.732930
>> det(sg)
> [1] 2.399354
>> det(sg,method="eigenvalues")
> [1] -7.312317
>
>
> Thanks,
>  -- Dan --
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>


From Bernadette9502j@post-modern.org  Sun Feb 16 00:26:04 2003
From: Bernadette9502j@post-modern.org (Bernadette9502j@post-modern.org)
Date: Sun Feb 16 00:26:04 2003
Subject: [Rd] Fwd: SystemWorks 2003 Saves you time and money (PR#2553)
Message-ID: <200302152324.h1FNOk35010672@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--FC06CBE_ECD924.._7_1.
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

UNSUBSCRIBE AT THE BOTTOM
-------------------------------------------------------

Dear Subscriber/Member,

You don't need to spend hundreds of dollars on Norton
SystemWorks 2003! You can get the exact
same thing from us!

Norton SystemWorks 2003 is the most technologically
advanced method of AntiVirus and Computer Stability set
of programs ever to be offered at a public level.

Get it today and you get:
----------------------------------------------

+ Almost 240$ off of the combined retail value
+ Free Updates
+ A Virus Free Computer
+ A Stable Computer

For more information, please visit our Web Site:

http://discover-deals.net/sales/nsw14.htm




---- [ OPT-OUT ] --------------------------------------

You are receiving this email as a subscriber to our
mailing list. To remove yourself from this and related
email lists, please click here:
http://discover-deals.net/goodbye.html




g v fofmateshapwpvwhthayidtf
fla
ihl   uuqeaact yjfqqbmrmsf
--FC06CBE_ECD924.._7_1.--


From Alphonse4978t@americamail.net  Sun Feb 16 07:52:03 2003
From: Alphonse4978t@americamail.net (Alphonse4978t@americamail.net)
Date: Sun Feb 16 07:52:03 2003
Subject: [Rd] Fwd: DVDs to CDs?? (PR#2554)
Message-ID: <200302160652.h1G6qJ35011248@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--_.ED_F.4D8E_.53
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

UNSUBSCRIBE AT THE BOTTOM
--------------------------------------------------------------- 

Dear Subscriber/Member,

You don't need to spend hundreds of dollars on a DVD burner
to backup your DVD's!

DVD Professional is the most technologically advanced
method of DVD reproduction ever available and it's the only
system you will need to create backups of your DVD's that
will play in your home DVD player.

Get it Today and you get:
------------------------------

+ 70% off the Regular Price
+ Full Technical Support
+ Free Updates

For more information, please visit their Web Site:

http://www.phat-x.com/20025/


---- [ REMOVE ] -------------------------------------------------

You are receiving this email as a subscriber to our mailing list. 
To remove yourself from this and related email lists click here:
http://www.phat-x.com/cgi-bin/remove.cgi

---- [ NOTE ] ---------------------------------------------------
Please do not reply to this e-mail. Mail sent to this address 
cannot be answered.





dljjwbqtghhrgb
bb
fnenszck
sytiadnjnlibmvz gt l  r p u ppbvqhj ulzu sa
md gumpzb
  ipid poeg
--_.ED_F.4D8E_.53--


From spencer.graves@pdf.com  Tue Feb 18 02:45:03 2003
From: spencer.graves@pdf.com (Spencer Graves)
Date: Tue Feb 18 02:45:03 2003
Subject: [Rd] match.arg
References: <11025.1045351178@www67.gmx.net> <3E4ECF33.4050901@pdf.com>
Message-ID: <3E518FBB.2080405@pdf.com>

Hello:

	  I'm not on the "r-devel" list, but I just modified "match.arg" from R 
1.6.2 for Windows to accept a vector for "arg".

	  Is it appropriate that I send such things to this email address for 
consideration for inclusion in a future release?

	  I just compared this with "match.arg" in S-Plus 6.1 for Windows. 
There, I got the following:

 > match.arg(c("a","b"), c("aa", "bb"))
[1] "aa" "bb"

	  However, match.arg(c("a", "b")) in a test function with "default" = 
c("aa", "bb") returned only "a";  the following returns c("aa", "bb").

Thanks for all your hard work in developing this marvelous product.

Sincerely,
Spencer Graves

match.arg <-
function (arg, choices)
{
     if (missing(choices)) {
         formal.args <- formals(sys.function(sys.parent()))
         choices <- eval(formal.args[[deparse(substitute(arg))]])
     }
#	 cat("choices =", choices, "\n")
	 for(j in 1:length(arg)){
	    if (all(arg[j] == choices))
    	     arg[j] <- choices[1]
		 else{
		    i <- pmatch(arg[j], choices)
    		 if (is.na(i))
       		  stop(paste("ARG should be one of", paste(choices, collapse = 
", "),
          		   sep = " "))
		    if (length(i) > 1)
    		     stop("there is more than one match in match.arg")
	   	 arg[j] <- choices[i]
		}
	}
	arg
}


From spencer.graves@pdf.com  Tue Feb 18 04:41:02 2003
From: spencer.graves@pdf.com (Spencer Graves)
Date: Tue Feb 18 04:41:02 2003
Subject: [Rd] match.arg
References: <11025.1045351178@www67.gmx.net> <3E4ECF33.4050901@pdf.com>
Message-ID: <3E51AAF5.7040001@pdf.com>

Hello:

I found a way to break the "match.arg" function I sent a few hours ago. 
    The following works better, I believe.

Thanks again for your great work on the R project.
Spencer Graves
##########################
match.arg <-
function (arg = NULL, choices= NULL)
{
     if (is.null(choices)) {
         formal.args <- formals(sys.function(sys.parent()))
         choices <- eval(formal.args[[deparse(substitute(arg))]])
     }
#	 cat("choices =", choices, ";  arg =", arg, "\n")
	 if((length(arg)==length(choices)) && all(arg==choices))
			return(choices[1])
	 for(j in 1:length(arg)){
	    if (all(arg[j] == choices))
    	     arg[j] <- choices[1]
		 else{
		    i <- pmatch(arg[j], choices)
    		 if (is.na(i))
       		  stop(paste("'arg' =", arg[j],
					   "should be one of", paste(choices, collapse = ", "),
          		   sep = " "))
		    if (length(i) > 1)
    		     stop("there is more than one match in match.arg")
	   	 arg[j] <- choices[i]
		}
	}
	arg
}


From wolfram@fischer-zim.ch  Tue Feb 18 18:34:03 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Tue Feb 18 18:34:03 2003
Subject: [Rd] biplot: ylim
Message-ID: <20030218175128.A8078@s1x.zimnet.ch>

[R 1.6.1]

In biplot() there is coded:

 if (missing(xlim) && missing(ylim))
        xlim <- ylim <- rangx1 <- rangx2 <- range(rangx1, rangx2)
    else if (missing(xlim))
        xlim <- rangx1
    else ylim <- rangx2

With the code above, ylim will be overwritten
if xlim _and_ ylim are given as arguments.
To accept ylim, the code could be:

 if (missing(xlim) && missing(ylim))
        xlim <- ylim <- rangx1 <- rangx2 <- range(rangx1, rangx2)
    else{
        if (missing(xlim))
            xlim <- rangx1
        if (missing(ylim))
            ylim <- rangx2
    }


Wolfram


From vangyzen@stat.duke.edu  Tue Feb 18 23:24:02 2003
From: vangyzen@stat.duke.edu (vangyzen@stat.duke.edu)
Date: Tue Feb 18 23:24:02 2003
Subject: [Rd] R won't compile on FreeBSD 5.0 (PR#2562)
Message-ID: <200302182224.h1IMOF35003678@pubhealth.ku.dk>

Full_Name: Eric van Gyzen
Version: 1.6.2
OS: FreeBSD 5.0-RELEASE i386
Submission from: (NULL) (152.3.22.120)


When compiling R (versions 1.6.1 and 1.6.2), I get the following messages:
dumping R code in package 'methods'
Fatal error: The X11 shared library could not be loaded.
  The error was /tmp/R-1.6.2/modules/R_X11.so: Undefined symbol "R_GlobalEnv"

The compiler is GCC 3.2.1.  I'll be glad to provide more information via email.

Thanks in advance for any help!

Eric


From p.dalgaard@biostat.ku.dk  Wed Feb 19 00:15:06 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Feb 19 00:15:06 2003
Subject: [Rd] R won't compile on FreeBSD 5.0 (PR#2562)
In-Reply-To: <200302182224.h1IMOF35003678@pubhealth.ku.dk>
References: <200302182224.h1IMOF35003678@pubhealth.ku.dk>
Message-ID: <x27kbx9o5j.fsf@biostat.ku.dk>

vangyzen@stat.duke.edu writes:

> Full_Name: Eric van Gyzen
> Version: 1.6.2
> OS: FreeBSD 5.0-RELEASE i386
> Submission from: (NULL) (152.3.22.120)
> 
> 
> When compiling R (versions 1.6.1 and 1.6.2), I get the following messages:
> dumping R code in package 'methods'
> Fatal error: The X11 shared library could not be loaded.
>   The error was /tmp/R-1.6.2/modules/R_X11.so: Undefined symbol "R_GlobalEnv"
> 
> The compiler is GCC 3.2.1.  I'll be glad to provide more information via email.
> 
> Thanks in advance for any help!

Hmm. You might need to get a FreeBSD expert in on this. I guess that
it is not the methods package that has the problem; that is just the
first time anything tries to run the newly built R binary. R_GlobalEnv
is defined in R.bin so the problem is that the dyn.load mechanism is
not able to resolve this. A bit of Google'ing suggests that a
-export-dynamic (or so) flag might have fallen out of the link command
for R.bin.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From luke@stat.uiowa.edu  Wed Feb 19 00:27:03 2003
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Wed Feb 19 00:27:03 2003
Subject: [Rd] R won't compile on FreeBSD 5.0 (PR#2562)
In-Reply-To: <x27kbx9o5j.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0302181722310.31014-100000@itasca.stat.uiowa.edu>

On 19 Feb 2003, Peter Dalgaard BSA wrote:

> vangyzen@stat.duke.edu writes:
> 
> > Full_Name: Eric van Gyzen
> > Version: 1.6.2
> > OS: FreeBSD 5.0-RELEASE i386
> > Submission from: (NULL) (152.3.22.120)
> > 
> > 
> > When compiling R (versions 1.6.1 and 1.6.2), I get the following messages:
> > dumping R code in package 'methods'
> > Fatal error: The X11 shared library could not be loaded.
> >   The error was /tmp/R-1.6.2/modules/R_X11.so: Undefined symbol "R_GlobalEnv"
> > 
> > The compiler is GCC 3.2.1.  I'll be glad to provide more information via email.
> > 
> > Thanks in advance for any help!
> 
> Hmm. You might need to get a FreeBSD expert in on this. I guess that
> it is not the methods package that has the problem; that is just the
> first time anything tries to run the newly built R binary. R_GlobalEnv
> is defined in R.bin so the problem is that the dyn.load mechanism is
> not able to resolve this. A bit of Google'ing suggests that a
> -export-dynamic (or so) flag might have fallen out of the link command
> for R.bin.

That sounds right.  It may be that for some reason on this setup you
need to give gcc something like -Wl,-E instead of -export-dynamic in
the linker flags.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From Kurt.Hornik@wu-wien.ac.at  Wed Feb 19 00:35:03 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed Feb 19 00:35:03 2003
Subject: [Rd] R won't compile on FreeBSD 5.0 (PR#2562)
In-Reply-To: <x27kbx9o5j.fsf@biostat.ku.dk>
References: <200302182224.h1IMOF35003678@pubhealth.ku.dk>
 <x27kbx9o5j.fsf@biostat.ku.dk>
Message-ID: <15954.49790.675775.532175@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> vangyzen@stat.duke.edu writes:
>> Full_Name: Eric van Gyzen
>> Version: 1.6.2
>> OS: FreeBSD 5.0-RELEASE i386
>> Submission from: (NULL) (152.3.22.120)
>> 
>> 
>> When compiling R (versions 1.6.1 and 1.6.2), I get the following messages:
>> dumping R code in package 'methods'
>> Fatal error: The X11 shared library could not be loaded.
>> The error was /tmp/R-1.6.2/modules/R_X11.so: Undefined symbol "R_GlobalEnv"
>> 
>> The compiler is GCC 3.2.1.  I'll be glad to provide more information via email.
>> 
>> Thanks in advance for any help!

> Hmm. You might need to get a FreeBSD expert in on this. I guess that
> it is not the methods package that has the problem; that is just the
> first time anything tries to run the newly built R binary. R_GlobalEnv
> is defined in R.bin so the problem is that the dyn.load mechanism is
> not able to resolve this. A bit of Google'ing suggests that a
> -export-dynamic (or so) flag might have fallen out of the link command
> for R.bin.

Actually ... the configure code has

  freebsd[3-4].*)
    main_ldflags="-export-dynamic"
    shlib_ldflags="-shared"
    ;;

so does not cover freebsd5 --- maybe this should be changed?

-k


From vangyzen@stat.duke.edu  Wed Feb 19 01:05:03 2003
From: vangyzen@stat.duke.edu (Eric van Gyzen)
Date: Wed Feb 19 01:05:03 2003
Subject: [Rd] R won't compile on FreeBSD 5.0 (PR#2562)
In-Reply-To: <15954.49790.675775.532175@mithrandir.hornik.net>
References: <200302182224.h1IMOF35003678@pubhealth.ku.dk> <x27kbx9o5j.fsf@biostat.ku.dk> <15954.49790.675775.532175@mithrandir.hornik.net>
Message-ID: <200302181904.03943.vangyzen@stat.duke.edu>

Kurt Hornik wrote:
> >>>>> Peter Dalgaard BSA writes:
> >
> > vangyzen@stat.duke.edu writes:
> >> Full_Name: Eric van Gyzen
> >> Version: 1.6.2
> >> OS: FreeBSD 5.0-RELEASE i386
> >> Submission from: (NULL) (152.3.22.120)
> >>
> >>
> >> When compiling R (versions 1.6.1 and 1.6.2), I get the following
> >> messages: dumping R code in package 'methods'
> >> Fatal error: The X11 shared library could not be loaded.
> >> The error was /tmp/R-1.6.2/modules/R_X11.so: Undefined symbol
> >> "R_GlobalEnv"
> >>
> >> The compiler is GCC 3.2.1.  I'll be glad to provide more information via
> >> email.
> >>
> >> Thanks in advance for any help!
> >
> > Hmm. You might need to get a FreeBSD expert in on this. I guess that
> > it is not the methods package that has the problem; that is just the
> > first time anything tries to run the newly built R binary. R_GlobalEnv
> > is defined in R.bin so the problem is that the dyn.load mechanism is
> > not able to resolve this. A bit of Google'ing suggests that a
> > -export-dynamic (or so) flag might have fallen out of the link command
> > for R.bin.

Aha!  That would explain the rather terse dynamic symbol table in R.bin...

> Actually ... the configure code has
>
>   freebsd[3-4].*)
>     main_ldflags="-export-dynamic"
>     shlib_ldflags="-shared"
>     ;;
>
> so does not cover freebsd5 --- maybe this should be changed?

Yep.  Changing the range from 3-4 to 3-5 fixed it.

Thanks for the fast, accurate help, gentlemen.

Eric


From ostrouchovg@ornl.gov  Wed Feb 19 02:07:02 2003
From: ostrouchovg@ornl.gov (George Ostrouchov)
Date: Wed Feb 19 02:07:02 2003
Subject: [Rd] R as analysis server for very large data sets
Message-ID: <3E52D8B7.4010503@ornl.gov>

At ORNL, we are building a system, ASPECT (Adaptive Simulation Product 
Exploration and Control Toolkit), for analyzing output from massive 
simulations. It is essentially a client server type setup that reads 
netcdf and hdf files, and uses MPI for some distributed tasks. The total 
output of a simulation can be terabytes, but individual variables can be 
only a gigabyte and some relevant subsets even smaller. In theory, a 
single variable can be handled on a 64 bit machine with a few gigabytes 
of memory, say 10 GB. I understand that some folks have some success 
running R on a 64 bit machine.

In addition to some home-grown distributed data analysis codes, we have 
included a facility for calling a limited subset of R functions from 
ASPECT. Simple use of R on a large data set did not work well.  For 
example, computing a simple histogram consumed several times (I think it 
was 3 times) more memory than that required for the data itself. Some 
editing to the hist.default function fixed the problem, but reduced the 
generality of the function. The default seemed to generate a dimnames 
attribute that became as large as the data. It may be that our initial 
data matrix had some attributes we were not aware of.

It seems that generality and metadata generation in R run counter to R's 
ability to handle large data sets. Can someone comment on this?

Are there functions in R that will strip a variable of all its 
attributes, except the structure such as vector, matrix, or array? Or 
are there options to prevent generating more attributes in some 
functions? ... Perhaps an attribute to prevent further attributes?

Does it make sense to propose building (assuming that someone has time 
to do it) a "large data" subset of R?

Thanks for your help,
George

----------------------------------------------------------
George Ostrouchov
Statistics and Data Sciences Group
Computer Science and Mathematics Division
Oak Ridge National Laboratory
----------------------------------------------------------


From wolfram@fischer-zim.ch  Wed Feb 19 11:41:03 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Wed Feb 19 11:41:03 2003
Subject: [Rd] biplot(mva): argument main causes a warning
Message-ID: <20030219114438.A2292@s1x.zimnet.ch>

PROBLEM
	If `main' is given as argument to biplot() a warning appears:
	parameter "main" couldn't be set in high-level plot() function

PROPOSAL FOR A SOLUTION
	biplot.default( ....., main=NULL, ...){
		...
		plot( ......, main=main, ... )
		...
		plot( ......, main=main, ... )
		...
	}
	
Wolfram


From Trinidad983d@congomail.com  Thu Feb 20 16:00:03 2003
From: Trinidad983d@congomail.com (Trinidad983d@congomail.com)
Date: Thu Feb 20 16:00:03 2003
Subject: [Rd] Fwd: West Nile Virus < Anna Kournikova Virus, get protected. (PR#2563)
Message-ID: <200302201500.h1KF0F35022755@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--BDDF_2A_..6747BA_6_004A
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

UNSUBSCRIBE AT THE BOTTOM
-------------------------------------------------------

Dear Subscriber/Member,

You don't need to spend hundreds of dollars on Norton
SystemWorks 2003! You can get the exact
same thing from us!

Norton SystemWorks 2003 is the most technologically
advanced method of AntiVirus and Computer Stability set
of programs ever to be offered at a public level.

Get it today and you get:
----------------------------------------------

+ Almost 240$ off of the combined retail value
+ Free Updates
+ A Virus Free Computer
+ A Stable Computer

For more information, please visit our Web Site:

http://www.cyberdiscount-deals.com/sales/nsw11.htm




---- [ OPT-OUT ] --------------------------------------

You are receiving this email as a subscriber to our
mailing list. To remove yourself from this and related
email lists, please click here:
http://www.cyberdiscount-deals.com/goodbye.html




ut 
--BDDF_2A_..6747BA_6_004A--


From moreinfosfi@sbcglobal.net  Thu Feb 20 18:21:02 2003
From: moreinfosfi@sbcglobal.net (moreinfosfi@sbcglobal.net)
Date: Thu Feb 20 18:21:02 2003
Subject: [Rd] Earn Maga Money at Home (PR#2565)
Message-ID: <200302201721.h1KHL835024020@pubhealth.ku.dk>

Earning $100,000 a year is just as easy as earning $15,000 when you know how!
www.ezinfocenter.com/7832123 /FREE

DID YOU KNOW? The US Social Security Board reports that 85 out of 100 
Americans reaching age 65 dont possess as much as $250. And only 2% are
self-sustaining (the rest dependent on family, church, or the government)!
Want to know what the 2-percenters know that you dont?
http://www.quickinfo247.com/7730916/YES

Learn how to become a $100,000 earner:www.ezinfocenter.com/7832123 /FREE

The Website your boss doesnt want you to know about! (pssst...it's FREE!)
www.ezinfocenter.com/7832123 /FREE


To un subscribe from further opportunities, please by return email put in the 
subject line remove and the email will be removed from my list


From johnvisnosky@sbcglobal.net  Thu Feb 20 19:39:03 2003
From: johnvisnosky@sbcglobal.net (johnvisnosky@sbcglobal.net)
Date: Thu Feb 20 19:39:03 2003
Subject: [Rd] COMPUTER SYSTEM COME CONFIG YOUR OWN (PR#2566)
Message-ID: <200302201838.h1KIcg35024328@pubhealth.ku.dk>

       
 


http://www.ultraorders.net/


From johnvisnosky@sbcglobal.net  Fri Feb 21 00:52:02 2003
From: johnvisnosky@sbcglobal.net (johnvisnosky@sbcglobal.net)
Date: Fri Feb 21 00:52:02 2003
Subject: [Rd] Live a healthy life with VERIUNI nutritionals. Tasty liquid multivitamin (PR#2567)
Message-ID: <200302202352.h1KNqV35025430@pubhealth.ku.dk>

Live a healthy life with VERIUNI nutritionals. Tasty liquid multivitamin ensures
you'll get nearly every daily nutrient required for prolonged health.Powerful 
antioxidant unleashes the power of red wine extract and polyphenols for the 
ultimate mind and body energizer. All-natural ingredients. No sugar or artificial
preservatives. For more information, check out www.ezinfocenter.com/7832123/VNU.
 

--------------------------------------------------------------------------------
 
Energize your body and boost your mental power with VERIUNI's own liquid multivitamin
and antioxidant formulas. Gleaned solely from plants and the earth itself, 
VERIUNI's all-natural ingredients and minerals contain nearly every nutrient you
need to fuel your body, mind, and spirit. Find out more at www.ezinfocenter.com/7832123/VNU.
 

--------------------------------------------------------------------------------
 
Get your daily minerals from the source. Packed with ingredients and minerals
plucked from plants and the earth itself, VERIUNI liquid multivitamin and antioxidant
formulas offer an all-natural alternative to artificial supplements.
Check out www.ezinfocenter.com/7832123/VNU for more information.
 

--------------------------------------------------------------------------------
 

2001 Carson Services, Inc.
All rights reserved


From arnima@u.washington.edu  Fri Feb 21 06:56:03 2003
From: arnima@u.washington.edu (arnima@u.washington.edu)
Date: Fri Feb 21 06:56:03 2003
Subject: [Rd] POSIX problem in New Zealand (PR#2570)
Message-ID: <200302210555.h1L5tm35026463@pubhealth.ku.dk>

Full_Name: Arni Magnusson
Version: 1.6.2
OS: Windows XP
Submission from: (NULL) (210.48.49.68)


Hi there. I'm experiencing unexpected behaviour from as.POSIXct:

> as.POSIXct("1969-12-24")
[1] "1969-12-23 23:00:00 New Zealand Standard Time"
> as.POSIXlt("1969-12-24")
[1] "1969-12-24"
> as.POSIXlt("1969-12-24")+1
[1] "1969-12-23 23:00:01 New Zealand Standard Time"


My friend on the US West Coast tells me he has not encountered this problem.
I've read some of the glibc discussion, but I believe that's not relevant for
Windows XP. I also read that tz="GMT" could circumvent some problems, but not
mine:

> as.POSIXct("1969-12-24 12:00:00", "GMT")
[1] "1969-12-25 New Zealand Standard Time"

If I can get around this problem, I'd prefer using POSIX rather than the date or
chron classes. Perhaps a Windows environment variable is the key?

Thanks in advance,
Arni


From pd@pubhealth.ku.dk  Fri Feb 21 07:15:08 2003
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri Feb 21 07:15:08 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200302210615.h1L6F8EA005452@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0, 0.6-8
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500
* PR# 2480 *
Subject: bug in CrossTable (package:gregmisc)
From: John_Hendrickx@yahoo.com
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
* PR# 2499 *
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
Date: Mon, 27 Jan 2003 17:28:11 +0100
..Needs to resubmit in more useful format.
* PR# 2520 *
Subject: Apparent parser problem
From: "Jim Rogers" <jrogers@cantatapharm.com>
Date: Sat, 1 Feb 2003 16:51:41 -0500
..Its an ESS or XEmacs problem. I redirected him to ESS-bugs.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
* PR# 2518 *
Subject: AIC.default
From: Alec Stephenson <a.stephenson@lancaster.ac.uk>
Date: Sat, 1 Feb 2003 10:17:10 +0000 (GMT)
* PR# 2519 *
Subject: removeMethods (methods) does not work in my examples
From: ripley@stats.ox.ac.uk
Date: Sat, 1 Feb 2003 20:27:31 +0000 (GMT)
* PR# 2541 *
Subject: cbind rises floating point exception 
From: Ramon Diaz <rdiaz@cnio.es>
Date: Tue, 11 Feb 2003 19:23:53 +0100
* PR# 2545 *
Subject: colSums etc. documentation
From: "Gunter, Bert" <bert_gunter@merck.com>
Date: Thu, 13 Feb 2003 09:08:44 -0500
* PR# 2546 *
Subject: error from sample if sampling length one character
From: patrick@burns-stat.com
Date: Thu, 13 Feb 2003 21:56:58 +0100 (MET)
* PR# 2547 *
Subject: ASSISTANCE
From: "MRS MARIAM MAINASARA" <mmmainasara@netscape.net>
Date: Fri, 14 Feb 2003 04:26:46
* PR# 2548 *
Subject: Re: lose fat, gain muscle, increase energy level? skhd
From: bxdharrison <ybkwcaitlyn@juno.com>
Date: Thu, 13 Feb 2003 21:52:49 -0800
* PR# 2549 *
Subject: Divx甫 酒绞聪鳖?
From: ADULT官捞矾胶<your@mail.com>
Date: Fri, 14 Feb 2003 08:27:13 +0100 (MET)
* PR# 2550 *
Subject: eigen() error: R Version 1.6.1 on Mac OS X
From: "Daniel E. Weeks" <dweeks@watson.hgen.pitt.edu>
Date: Fri, 14 Feb 2003 15:36:15 -0500
* PR# 2551 *
Subject: (堡绊)捞哩 柳沥茄 康绢甫 舅妨靛赋聪促 @ 
From: (林)疵硅框磐<multiple73@korea.com>
Date: Sat, 15 Feb 2003 04:35:16 +0100 (MET)
* PR# 2552 *
Subject: THANKS
From: Mariam  Mobutu    <joseoph787&*^%$#@latinmail.com>
Date: Sat, 15 Feb 2003 12:27:36 +0100
* PR# 2553 *
Subject: Fwd: SystemWorks 2003 Saves you time and money
From: "Cornelia Harper" <Bernadette9502j@post-modern.org>
Date: Sun, 16 Feb 03 16:59:16 GMT
* PR# 2554 *
Subject: Fwd: DVDs to CDs??
From: "Gabriel Muller" <Alphonse4978t@americamail.net>
Date: Mon, 17 Feb 03 00:40:46 GMT
* PR# 2555 *
Subject: Re: human growth hormone - health ideas gwovr
From: yttlizeth <dbmgpriscilla@address.com>
Date: Sun, 16 Feb 2003 05:42:40 -0800
* PR# 2556 *
Subject: (堡绊)CABio客 窃膊 扒碍阑@
From: 揪俊捞官捞坷<cabio@koreamail.co.kr>
Date: Sun, 16 Feb 2003 15:15:12 +0100 (MET)
* PR# 2557 *
Subject: （堡绊） 凉诀 & 涝切 急拱篮 棵付明俊辑 ... @
From: "棵付明" <bigscale@bigscale.com>
Date: Sun, 16 Feb 2003 11:38:13 +0900
* PR# 2558 *
Subject: PARTNERSHIP
From: "DR.JIM IGBINEDION" <jimigbinedion@rediffmail.com>
Date: Mon, 17 Feb 2003 15:55:42 +0100
* PR# 2559 *
Subject: PARTNERSHIP
From: "DR.JIM IGBINEDION" <jimigbinedion@rediffmail.com>
Date: Mon, 17 Feb 2003 16:49:32 +0100
* PR# 2560 *
Subject: (己牢堡绊)己牢甸父 焊技夸
From: durisex<durisex@hotmail.com>
Date: Tue, 18 Feb 2003 21:03:29 +0100 (MET)
* PR# 2561 *
Subject: AS SEEN ON NATIONAL TV                                                                             3129Fana0-295YFzi8561fZuI9-57-27
From: <3popmeycde@yahoo.com>
Date: Tue, 18 Feb 2003 09:18:42 +1100
* PR# 2562 *
Subject: R won't compile on FreeBSD 5.0
From: vangyzen@stat.duke.edu
Date: Tue, 18 Feb 2003 23:24:14 +0100 (MET)
* PR# 2563 *
Subject: Fwd: West Nile Virus < Anna Kournikova Virus, get protected.
From: "Toby Scruggs" <Trinidad983d@congomail.com>
Date: Fri, 21 Feb 03 08:35:48 GMT
* PR# 2564 *
Subject: From Mr Patrick Bekele
From: <bek20@ecplaza.net>
Date: Thu, 20 Feb 2003 23:46:50 +0900 (KST)
* PR# 2565 *
Subject: Earn Maga Money at Home
From: "Peter Ronnau" <moreinfosfi@sbcglobal.net>
Date: Thu, 20 Feb 2003 11:19:27
* PR# 2566 *
Subject: COMPUTER SYSTEM COME CONFIG YOUR OWN
From: "Peter Ronnau" <johnvisnosky@sbcglobal.net>
Date: Thu, 20 Feb 2003 12:37:05
* PR# 2567 *
Subject: Live a healthy life with VERIUNI nutritionals. Tasty liquid multivitamin
From: "Peter Ronnau" <johnvisnosky@sbcglobal.net>
Date: Thu, 20 Feb 2003 17:50:38
* PR# 2568 *
Subject: BUSINESS CONCERN
From: "kswood77@ecplaza.net" <kswood77@ecplaza.net>
Date: vr, 21 feb 2003 03:42:00
* PR# 2569 *
Subject: PLEASE RESPOND.
From: "MPETI L. KABILA (Jnr)"   <mpeti_ka39@mal.com>
Date: Fri, 21 Mar 2003 03:41:45 +0100
* PR# 2570 *
Subject: POSIX problem in New Zealand
From: arnima@u.washington.edu
Date: Fri, 21 Feb 2003 06:55:46 +0100 (MET)


From ripley@stats.ox.ac.uk  Fri Feb 21 08:17:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Feb 21 08:17:03 2003
Subject: [Rd] POSIX problem in New Zealand (PR#2570)
In-Reply-To: <200302210555.h1L5tm35026463@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302210708350.19969-100000@gannet.stats>

What exactly is the problem?  Those appear to be the same time, in 
different time zones.  Is the problem that you are in the N Hemisphere
(your email address is) trying to use S Hemisphere times on an OS
that does not support pre-1970 times?

You seem to be confusing the time and how it is printed.  What do you 
want to do with these times?

On Fri, 21 Feb 2003 arnima@u.washington.edu wrote:

> Full_Name: Arni Magnusson
> Version: 1.6.2
> OS: Windows XP
> Submission from: (NULL) (210.48.49.68)
> 
> 
> Hi there. I'm experiencing unexpected behaviour from as.POSIXct:
> 
> > as.POSIXct("1969-12-24")
> [1] "1969-12-23 23:00:00 New Zealand Standard Time"
> > as.POSIXlt("1969-12-24")
> [1] "1969-12-24"
> > as.POSIXlt("1969-12-24")+1
> [1] "1969-12-23 23:00:01 New Zealand Standard Time"
> 
> 
> My friend on the US West Coast tells me he has not encountered this problem.
> I've read some of the glibc discussion, but I believe that's not relevant for
> Windows XP. I also read that tz="GMT" could circumvent some problems, but not
> mine:
> 
> > as.POSIXct("1969-12-24 12:00:00", "GMT")
> [1] "1969-12-25 New Zealand Standard Time"

That's correct.  You need to *print* in GMT too.

> If I can get around this problem, I'd prefer using POSIX rather than the date or
> chron classes. Perhaps a Windows environment variable is the key?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From zedshaw@zedshaw.com  Fri Feb 21 09:27:04 2003
From: zedshaw@zedshaw.com (Zed A. Shaw)
Date: Fri Feb 21 09:27:04 2003
Subject: [Rd] [ANN] ObveRsive WoRkbench MS1 Release
Message-ID: <3AE86C86-4576-11D7-A90A-00039391E298@zedshaw.com>

Hi All,

I just wanted to send out a quick note to everyone on r-devel and 
r-sig-gui list announcing that the ObveRsive WoRkbench project has  
made a milestone 1 (MS1) release.  The release is available for 
Windows, Linux (i386/PPC), and Mac OSX.  This release really does 
nothing R related yet, but it does have all the GUI elements we thought 
important.  You'll be able to play with tables, wizards, and a console 
element.

Please go to http://obversive.sourceforge.net/ and check out the 
"Downloads" section to get a release.  You can also post comments to 
the main page as comments to the top news announcement.  Also, feel 
free to e-mail me directly if you have comments or suggestions.

Enjoy!

-----
Zed A. Shaw
http://www.zedshaw.com/


From dirk@santafe.edu  Fri Feb 21 14:52:08 2003
From: dirk@santafe.edu (dirk@santafe.edu)
Date: Fri Feb 21 14:52:08 2003
Subject: [Rd] ks.test gets stuck (PR#2571)
Message-ID: <200302211351.h1LDpd35003352@pubhealth.ku.dk>

Full_Name: Michael Lachmann
Version: 1.6.1
OS: linux
Submission from: (NULL) (194.95.185.57)


ks.test enters an endless loop with repeated data. (The test is not designed for
such data, but it shouldn't get stuck...)
example:
ks.test(rep(1,3),rep(1,1))
never stops.


From murdoch@stats.uwo.ca  Fri Feb 21 17:15:04 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri Feb 21 17:15:04 2003
Subject: [Rd] Re: [R] Who to decide what a generic function should look like?
In-Reply-To: <000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>
References: <000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>
Message-ID: <1mfc5voo4gfcd7jifcgl00pit8mden1hul@4ax.com>

On Thu, 20 Feb 2003 13:05:44 +1100, you wrote in message
<000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>:

>I am not sure if what I am asking below should be discussed under r-help
>or r-devel, so please feel free to move over to r-devel. 

I've done that, I think it's a more r-devel kind of topic.

>For me a generic function should be fully generic in the sense that
>there are no requirements of arguments agreement (and therefore it
>should not be documented as a reply to Smyth's thread). 

I don't agree.  A generic function has a meaning.  Often that meaning
is expressed in terms of certain arguments.  If a user of an unknown
object knows that it supports the generic, they have a right to expect
it to behave according to the standard meaning of the generic.

>My concern is that enforcing methods to match the argument signature of
>the generic function will make packages incompatible with each other. I
>can not create a generic function called "normalize" for my microarray
>package and expect it to work together with other package defining a
>generic function with the same name. Some short-term and long-term
>outcomes from this are:

That's only a short term problem.  As namespaces arrive, it will go
away.  Your normalize will not trample on anyone else's normalize,
because your names will live in a different namespace.  Hopefully the
default behaviour will be reasonable (i.e. if I say "normalize", and
only one version is around, I'll get it; if there are two, there'll be
either a clear way to choose, or a warning or error about the
ambiguity).

>  * who is the person to decide what a generic function should look
>like, and 
>  * who owns the right to the method name "normalize"?

The author of the package makes the decisions and owns the names in
that package.

Duncan Murdoch


From ripley@stats.ox.ac.uk  Fri Feb 21 19:07:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Feb 21 19:07:02 2003
Subject: [Rd] require vs library
Message-ID: <Pine.LNX.4.44.0302211752500.28941-100000@gannet.stats>

There seems to be a widespread assumption that the way for package foo to 
require package bar is via `require(bar)'.  It isn't!

That returns a logical which is in the vast majority of cases unchecked.
So if the package is really required, the code will fail without a warning
if the package is unavailable.  You may as well call library() and let it
do the checking.  (In a few cases you can safely assume that the package 
is present, e.g. nnet can require(MASS) since they are installed 
together.)

I find it confusing if require(bar, quietly=TRUE) is used with no message.  
If you are going to change the search path, please let the end user know
you have done so.  I've had nasty surprises more than once from this by 
getting datasets from packages I did not ask to be there.

Another point: please do not call code with side effects like require, 
library or options at the top level in foo/R/foo, but do so within 
.First.lib.  This becomes important if the code is dumped or put in a 
database.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch@stats.uwo.ca  Fri Feb 21 20:50:49 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri Feb 21 20:50:49 2003
Subject: [Rd] Perl question
Message-ID: <e30d5voq9g2pb71vqqeqk1ev05jb9os5i0@4ax.com>

I'm working on the installer code, but I don't know Perl well enough.
What is a good Perl equivalent of the R statement

 if ( s %in% c('string1', 'string2', 'string3') )  ...

I can do it with 

 if (s == "string1" || s == "string2" || s == "string3")  ...

but I've got a feeling there's a better way to do it using associative
arrays.  

The real example will have about a dozen fixed strings that I want to
search a few thousand times.

Duncan Murdoch


From edd@debian.org  Fri Feb 21 21:02:03 2003
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri Feb 21 21:02:03 2003
Subject: [Rd] Perl question
Message-ID: <E18mJMb-0000Ev-00@sonny.eddelbuettel.com>


> I'm working on the installer code, but I don't know Perl well enough.
> What is a good Perl equivalent of the R statement
> 
>  if ( s %in% c('string1', 'string2', 'string3') )  ...
> 
> I can do it with 
> 
>  if (s == "string1" || s == "string2" || s == "string3")  ...

You probably wanted 'eq' instead of '=='.  The reg.exp. version is

    if (s =~ m/(string1|string2|string3)/o) {  ...

where the trailing o makes it supposedly less expensive (regexp 
only compiled once, see man perlop).

> but I've got a feeling there's a better way to do it using associative
> arrays.  

You could use grep and map on assoc. arrays, but IMHO the above is easier.

> The real example will have about a dozen fixed strings that I want to
> search a few thousand times.

That may be worth profiling / timing.

Dirk
  
-- 
According to the latest figures, 43% of all signatures are totally worthless.


From brahm@alum.mit.edu  Fri Feb 21 21:12:03 2003
From: brahm@alum.mit.edu (David Brahm)
Date: Fri Feb 21 21:12:03 2003
Subject: [Rd] Perl question
References: <e30d5voq9g2pb71vqqeqk1ev05jb9os5i0@4ax.com>
Message-ID: <15958.34766.979274.188826@gargle.gargle.HOWL>

Duncan Murdoch wrote:
> What is a good Perl equivalent of the R statement
>  if ( s %in% c('string1', 'string2', 'string3') )  ...

Dirk Eddelbuettel <edd@debian.org> replied:
  if (s =~ m/(string1|string2|string3)/o) {  ...
(I think Duncan and Dirk both meant "$s" instead of "s".)

I'd also suggest:
  @mylist = ("string1","string2","string3");
  if (grep /^$s$/, @mylist) {print "yes\n"}

(after all, There's More Than One Way To Do It.)
-- 
                              -- David Brahm (brahm@alum.mit.edu)


From rpeng@stat.ucla.edu  Fri Feb 21 21:16:03 2003
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Fri Feb 21 21:16:03 2003
Subject: [Rd] Perl question
In-Reply-To: <e30d5voq9g2pb71vqqeqk1ev05jb9os5i0@4ax.com>
Message-ID: <Pine.GSO.4.10.10302211210350.7640-100000@quetelet.stat.ucla.edu>

I sometimes hack something with a hash:

%keywords = ( "string1" => 1, "string2" => 1, "string3" => 1 )

and then do something like:

exists($keywords{$mystring}) 

which should be true if $mystring is one of "string1", "string2", or
"string3".

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Fri, 21 Feb 2003, Duncan Murdoch wrote:

> I'm working on the installer code, but I don't know Perl well enough.
> What is a good Perl equivalent of the R statement
> 
>  if ( s %in% c('string1', 'string2', 'string3') )  ...
> 
> I can do it with 
> 
>  if (s == "string1" || s == "string2" || s == "string3")  ...
> 
> but I've got a feeling there's a better way to do it using associative
> arrays.  
> 
> The real example will have about a dozen fixed strings that I want to
> search a few thousand times.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>


From lina@u.washington.edu  Fri Feb 21 21:21:02 2003
From: lina@u.washington.edu (Michael Na Li)
Date: Fri Feb 21 21:21:02 2003
Subject: [Rd] Perl question
In-Reply-To: <e30d5voq9g2pb71vqqeqk1ev05jb9os5i0@4ax.com> (Duncan Murdoch's
 message of "Fri, 21 Feb 2003 14:43:21 -0500")
References: <e30d5voq9g2pb71vqqeqk1ev05jb9os5i0@4ax.com>
Message-ID: <k4r6xs7vj.fsf@qiuranke.phony.washington.edu>

On Fri, 21 Feb 2003, Duncan Murdoch verbalised:

>  I'm working on the installer code, but I don't know Perl well enough.
>  What is a good Perl equivalent of the R statement
>  
>   if ( s %in% c('string1', 'string2', 'string3') )  ...
>  
>  I can do it with 
>  
>   if (s == "string1" || s == "string2" || s == "string3")  ...
>  
>  but I've got a feeling there's a better way to do it using associative
>  arrays.  
>  

Using association arrays,

my @strings = ( 'string1', 'string2', 'string3' );
my %stringhash = ();
@stringhash{@strings} = ( 0..$#strings );
if (exists $stringhash{$s}) ..

I wonder if it might be more efficient using regular expression instead,

if ($s =~ /^string[1-3]$/) { ...

it will depends on how 'regular' the strings are, of course.

Michael


From arnima@u.washington.edu  Sat Feb 22 06:13:11 2003
From: arnima@u.washington.edu (Arni Magnusson)
Date: Sat Feb 22 06:13:11 2003
Subject: [Rd] POSIX problem in New Zealand (PR#2570)
In-Reply-To: <Pine.LNX.4.44.0302210708350.19969-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0302211929050.95120-100000@dante24.u.washington.edu>


On Fri, 21 Feb 2003 ripley@stats.ox.ac.uk wrote:

> What exactly is the problem?  Those appear to be the same time, in
> different time zones.  Is the problem that you are in the N Hemisphere
> (your email address is) trying to use S Hemisphere times on an OS that
> does not support pre-1970 times?

Currently I'm in New Zealand working on a Windows XP machine that has
never left the country. I have not encountered problems with as.POSIXct
when working in other time zones.


> You seem to be confusing the time and how it is printed.  What do you
> want to do with these times?

I'm dealing with two kinds of problems: (1) what I see as a bug in
as.POSIXct, and (2) my own confusion with time zones. One problem at a
time:


(1) as.POSIXct

I would like the following to return similar times, except for the year,
but they don't:
 > x <- as.POSIXct("1969-12-24")
 > y <- as.POSIXct("1970-12-24")
 > x
 [1] "1969-12-23 23:00:00 New Zealand Standard Time"
 > y
 [1] "1970-12-24 New Zealand Standard Time"
 > z <- seq(x, by="year", length=2)[2]
 > difftime(y, z)
 Time difference of 1 hours

>From reading 'library/base/html/DateTimeClasses.html' I understand that R
queries Windows XP for the period 1970-2037 and uses its own C code
outside this range. To me it looks like the bug might be in the C code. I
think the problem goes deeper than print.POSIXct, because coercions are
independent of the print method as far as I understand:

 > x <- as.POSIXlt("1969-12-24")
 > y <- as.POSIXlt(as.POSIXct(x))
 > x
 [1] "1969-12-24"
 > y
 [1] "1969-12-23 23:00:00 New Zealand Standard Time"
 > x==y
 [1] FALSE


(2) Time zone confusion

This is a question of taste and implementation, but I would like POSIXct
objects in data frames and plots to display the times I entered
originally, regardless of where in the world I'm working at the moment.


(3) My solution

I've defined the environment variable tz=GMT in my R shortcut and I'll try
to remember doing so on other machines I work on. This way I avoid both
the as.POSIXct/New Zealand bug and the time zone confusion. I still think
the Kiwis would appreciate the bug being fixed :)




> On Fri, 21 Feb 2003 arnima@u.washington.edu wrote:
>
> > Full_Name: Arni Magnusson
> > Version: 1.6.2
> > OS: Windows XP
> > Submission from: (NULL) (210.48.49.68)


From hb@maths.lth.se  Sat Feb 22 10:04:03 2003
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Sat Feb 22 10:04:03 2003
Subject: [Rd] Re: [R] Who to decide what a generic function should look like?
In-Reply-To: <1mfc5voo4gfcd7jifcgl00pit8mden1hul@4ax.com>
Message-ID: <001c01c2da51$4c35de00$7341a8c0@alpha.wehi.edu.au>

> -----Original Message-----
> From: r-devel-admin@stat.math.ethz.ch 
> [mailto:r-devel-admin@stat.math.ethz.ch] On Behalf Of Duncan Murdoch
> Sent: den 22 februari 2003 03:15
> To: Henrik Bengtsson
> Cc: r-devel@stat.math.ethz.ch
> Subject: [Rd] Re: [R] Who to decide what a generic function 
> should look like?
> 
> 
> On Thu, 20 Feb 2003 13:05:44 +1100, you wrote in message
> <000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>:
> 
> >I am not sure if what I am asking below should be discussed under 
> >r-help or r-devel, so please feel free to move over to r-devel.
> 
> I've done that, I think it's a more r-devel kind of topic.
> 
> >For me a generic function should be fully generic in the sense that 
> >there are no requirements of arguments agreement (and therefore it 
> >should not be documented as a reply to Smyth's thread).
> 
> I don't agree.  A generic function has a meaning.  Often that 
> meaning is expressed in terms of certain arguments.  If a 
> user of an unknown object knows that it supports the generic, 
> they have a right to expect it to behave according to the 
> standard meaning of the generic.

I understand this viewpoint too, but I tend to think about it as
follows. Consider a hierarchy of all possible classes. Excluding
multiple heritance, they could I principle be place in a tree structure
with a root class, which all classes directly or indirectly inherits
from (this is the idea in for instance Java). In R, such a root class
could have the methods print(), as.character() and a few other methods
that you expect all R objects to have. From there on you add new
classes. With this class hierarchy I think about generic functions (as
they work today) as methods that are placed in the root object. However,
why can they not be further down the tree where they can be documented
specifically for that subtree and provide polymorphism from there on?
This should still be (be even more) intutive for the end user I think. 

So not thinking about S3 or S4, but in a longer term, is there a reason
for not going the whole way and having a method dispatching mechanism
that is totally general like in other object-oriented languages? When
asking this, I might reveal that I am not fully confortable with the
differences and pros & cons between scientific programming (with
vectors) and standard object-oriented programming.

> >My concern is that enforcing methods to match the argument 
> signature of 
> >the generic function will make packages incompatible with 
> each other. I 
> >can not create a generic function called "normalize" for my 
> microarray 
> >package and expect it to work together with other package defining a 
> >generic function with the same name. Some short-term and long-term 
> >outcomes from this are:
> 
> That's only a short term problem.  As namespaces arrive, it 
> will go away.  Your normalize will not trample on anyone 
> else's normalize, because your names will live in a different 
> namespace.  Hopefully the default behaviour will be 
> reasonable (i.e. if I say "normalize", and only one version 
> is around, I'll get it; if there are two, there'll be either 
> a clear way to choose, or a warning or error about the ambiguity).

This is promising and I am really glad to hear that the problem of
conflicts might be solved. The problem remains though if one decides to
have to different types of classes in one package both with a
normalize() method, meaning that you might have to split up your package
into a bundle of packages. However, this is a much smaller problem since
it can be controlled by the developer.

> >  * who is the person to decide what a generic function should look 
> >like, and
> >  * who owns the right to the method name "normalize"?
> 
> The author of the package makes the decisions and owns the 
> names in that package.
>
>
> Duncan Murdoch

Duncan, thanks a lot for your reply!

Henrik


From arahma1@lsu.edu  Sun Feb 23 01:43:02 2003
From: arahma1@lsu.edu (Asheka Rahman)
Date: Sun Feb 23 01:43:02 2003
Subject: [Rd] unsubscribe
Message-ID: <OF66EBDAFD.FD52C327-ON86256CD6.0003E2D8-86256CD6.0003E315@lsu.edu>

From:r-devel-admin@stat.math.ethz.ch on 02/22/2003 12:00 PM CET


Sent by: r-devel-admin@stat.math.ethz.ch

Please respond to r-devel@stat.math.ethz.ch



To:   r-devel@stat.math.ethz.ch
cc:   (bcc: Asheka Rahman/arahma1/LSU)

Subject:    R-devel digest, Vol 1 #101 - 10 msgs



Send R-devel mailing list submissions to
r-devel@stat.math.ethz.ch

To subscribe or unsubscribe via the World Wide Web, visit
http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
or, via email, send a message with subject or body 'help' to
r-devel-request@stat.math.ethz.ch

You can reach the person managing the list at
r-devel-admin@stat.math.ethz.ch

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-devel digest..."


Today's Topics:

1. ks.test gets stuck (PR#2571) (dirk@santafe.edu)
2. Re: [R] Who to decide what a generic function should look like? (Duncan
Murdoch)
3. require vs library (ripley@stats.ox.ac.uk)
4. Perl question (Duncan Murdoch)
5. Re: Perl question (Dirk Eddelbuettel)
6. Re: Perl question (David Brahm)
7. Re: Perl question (Roger Peng)
8. Re: Perl question (Michael Na Li)
9. Re: POSIX problem in New Zealand (PR#2570) (Arni Magnusson)
10. RE: Re: [R] Who to decide what a generic function should look like?
(Henrik Bengtsson)

--__--__--

Message: 1
Date: Fri, 21 Feb 2003 14:51:39 +0100 (MET)
From: dirk@santafe.edu
To: r-devel@stat.math.ethz.ch
CC: R-bugs@biostat.ku.dk
Subject: [Rd] ks.test gets stuck (PR#2571)

Full_Name: Michael Lachmann
Version: 1.6.1
OS: linux
Submission from: (NULL) (194.95.185.57)


ks.test enters an endless loop with repeated data. (The test is not
designed for
such data, but it shouldn't get stuck...)
example:
ks.test(rep(1,3),rep(1,1))
never stops.


--__--__--

Message: 2
From: Duncan Murdoch <murdoch@stats.uwo.ca>
To: "Henrik Bengtsson" <hb@maths.lth.se>
Cc: <r-devel@stat.math.ethz.ch>
Date: Fri, 21 Feb 2003 11:15:14 -0500
Subject: [Rd] Re: [R] Who to decide what a generic function should look
like?

On Thu, 20 Feb 2003 13:05:44 +1100, you wrote in message
<000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>:

>I am not sure if what I am asking below should be discussed under r-help
>or r-devel, so please feel free to move over to r-devel.

I've done that, I think it's a more r-devel kind of topic.

>For me a generic function should be fully generic in the sense that
>there are no requirements of arguments agreement (and therefore it
>should not be documented as a reply to Smyth's thread).

I don't agree.  A generic function has a meaning.  Often that meaning
is expressed in terms of certain arguments.  If a user of an unknown
object knows that it supports the generic, they have a right to expect
it to behave according to the standard meaning of the generic.

>My concern is that enforcing methods to match the argument signature of
>the generic function will make packages incompatible with each other. I
>can not create a generic function called "normalize" for my microarray
>package and expect it to work together with other package defining a
>generic function with the same name. Some short-term and long-term
>outcomes from this are:

That's only a short term problem.  As namespaces arrive, it will go
away.  Your normalize will not trample on anyone else's normalize,
because your names will live in a different namespace.  Hopefully the
default behaviour will be reasonable (i.e. if I say "normalize", and
only one version is around, I'll get it; if there are two, there'll be
either a clear way to choose, or a warning or error about the
ambiguity).

>  * who is the person to decide what a generic function should look
>like, and
>  * who owns the right to the method name "normalize"?

The author of the package makes the decisions and owns the names in
that package.

Duncan Murdoch


--__--__--

Message: 3
From: ripley@stats.ox.ac.uk
Date: Fri, 21 Feb 2003 18:06:41 +0000 (GMT)
To: R-devel@stat.math.ethz.ch
Subject: [Rd] require vs library

There seems to be a widespread assumption that the way for package foo to
require package bar is via `require(bar)'.  It isn't!

That returns a logical which is in the vast majority of cases unchecked.
So if the package is really required, the code will fail without a warning
if the package is unavailable.  You may as well call library() and let it
do the checking.  (In a few cases you can safely assume that the package
is present, e.g. nnet can require(MASS) since they are installed
together.)

I find it confusing if require(bar, quietly=TRUE) is used with no message.
If you are going to change the search path, please let the end user know
you have done so.  I've had nasty surprises more than once from this by
getting datasets from packages I did not ask to be there.

Another point: please do not call code with side effects like require,
library or options at the top level in foo/R/foo, but do so within
.First.lib.  This becomes important if the code is dumped or put in a
database.

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


--__--__--

Message: 4
From: Duncan Murdoch <murdoch@stats.uwo.ca>
To: r-devel@stat.math.ethz.ch
Date: Fri, 21 Feb 2003 14:43:21 -0500
Subject: [Rd] Perl question

I'm working on the installer code, but I don't know Perl well enough.
What is a good Perl equivalent of the R statement

if ( s %in% c('string1', 'string2', 'string3') )  ...

I can do it with

if (s == "string1" || s == "string2" || s == "string3")  ...

but I've got a feeling there's a better way to do it using associative
arrays.

The real example will have about a dozen fixed strings that I want to
search a few thousand times.

Duncan Murdoch


--__--__--

Message: 5
From: "Dirk Eddelbuettel" <edd@debian.org>
To: Duncan Murdoch <murdoch@stats.uwo.ca>, r-devel@stat.math.ethz.ch
Subject: Re: [Rd] Perl question
Date: Fri, 21 Feb 2003 14:01:41 -0600



> I'm working on the installer code, but I don't know Perl well enough.
> What is a good Perl equivalent of the R statement
>
>  if ( s %in% c('string1', 'string2', 'string3') )  ...
>
> I can do it with
>
>  if (s == "string1" || s == "string2" || s == "string3")  ...

You probably wanted 'eq' instead of '=='.  The reg.exp. version is

if (s =~ m/(string1|string2|string3)/o) {  ...

where the trailing o makes it supposedly less expensive (regexp
only compiled once, see man perlop).

> but I've got a feeling there's a better way to do it using associative
> arrays.

You could use grep and map on assoc. arrays, but IMHO the above is easier.

> The real example will have about a dozen fixed strings that I want to
> search a few thousand times.

That may be worth profiling / timing.

Dirk

--
According to the latest figures, 43% of all signatures are totally
worthless.


--__--__--

Message: 6
From: David Brahm  <brahm@alum.mit.edu>
Date: Fri, 21 Feb 2003 15:10:54 -0500
To: murdoch@stats.uwo.ca
Subject: Re: [Rd] Perl question
Cc: r-devel@stat.math.ethz.ch
Reply-To: brahm@alum.mit.edu

Duncan Murdoch wrote:
> What is a good Perl equivalent of the R statement
>  if ( s %in% c('string1', 'string2', 'string3') )  ...

Dirk Eddelbuettel <edd@debian.org> replied:
if (s =~ m/(string1|string2|string3)/o) {  ...
(I think Duncan and Dirk both meant "$s" instead of "s".)

I'd also suggest:
@mylist = ("string1","string2","string3");
if (grep /^$s$/, @mylist) {print "yes\n"}

(after all, There's More Than One Way To Do It.)
--
-- David Brahm (brahm@alum.mit.edu)


--__--__--

Message: 7
Date: Fri, 21 Feb 2003 12:15:44 -0800 (PST)
From: Roger Peng <rpeng@stat.ucla.edu>
To: Duncan Murdoch <murdoch@stats.uwo.ca>
cc: r-devel@stat.math.ethz.ch
Subject: Re: [Rd] Perl question

I sometimes hack something with a hash:

%keywords = ( "string1" => 1, "string2" => 1, "string3" => 1 )

and then do something like:

exists($keywords{$mystring})

which should be true if $mystring is one of "string1", "string2", or
"string3".

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Fri, 21 Feb 2003, Duncan Murdoch wrote:

> I'm working on the installer code, but I don't know Perl well enough.
> What is a good Perl equivalent of the R statement
>
>  if ( s %in% c('string1', 'string2', 'string3') )  ...
>
> I can do it with
>
>  if (s == "string1" || s == "string2" || s == "string3")  ...
>
> but I've got a feeling there's a better way to do it using associative
> arrays.
>
> The real example will have about a dozen fixed strings that I want to
> search a few thousand times.
>
> Duncan Murdoch
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>


--__--__--

Message: 8
To: r-devel@stat.math.ethz.ch
Subject: Re: [Rd] Perl question
From: Michael Na Li <lina@u.washington.edu>
Date: Fri, 21 Feb 2003 12:20:48 -0800

On Fri, 21 Feb 2003, Duncan Murdoch verbalised:

>  I'm working on the installer code, but I don't know Perl well enough.
>  What is a good Perl equivalent of the R statement
>
>   if ( s %in% c('string1', 'string2', 'string3') )  ...
>
>  I can do it with
>
>   if (s == "string1" || s == "string2" || s == "string3")  ...
>
>  but I've got a feeling there's a better way to do it using associative
>  arrays.
>

Using association arrays,

my @strings = ( 'string1', 'string2', 'string3' );
my %stringhash = ();
@stringhash{@strings} = ( 0..$#strings );
if (exists $stringhash{$s}) ..

I wonder if it might be more efficient using regular expression instead,

if ($s =~ /^string[1-3]$/) { ...

it will depends on how 'regular' the strings are, of course.

Michael


--__--__--

Message: 9
Date: Fri, 21 Feb 2003 21:06:33 -0800 (PST)
From: Arni Magnusson <arnima@u.washington.edu>
To: ripley@stats.ox.ac.uk
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] POSIX problem in New Zealand (PR#2570)



On Fri, 21 Feb 2003 ripley@stats.ox.ac.uk wrote:

> What exactly is the problem?  Those appear to be the same time, in
> different time zones.  Is the problem that you are in the N Hemisphere
> (your email address is) trying to use S Hemisphere times on an OS that
> does not support pre-1970 times?

Currently I'm in New Zealand working on a Windows XP machine that has
never left the country. I have not encountered problems with as.POSIXct
when working in other time zones.


> You seem to be confusing the time and how it is printed.  What do you
> want to do with these times?

I'm dealing with two kinds of problems: (1) what I see as a bug in
as.POSIXct, and (2) my own confusion with time zones. One problem at a
time:


(1) as.POSIXct

I would like the following to return similar times, except for the year,
but they don't:
> x <- as.POSIXct("1969-12-24")
> y <- as.POSIXct("1970-12-24")
> x
[1] "1969-12-23 23:00:00 New Zealand Standard Time"
> y
[1] "1970-12-24 New Zealand Standard Time"
> z <- seq(x, by="year", length=2)[2]
> difftime(y, z)
Time difference of 1 hours

>From reading 'library/base/html/DateTimeClasses.html' I understand that R
queries Windows XP for the period 1970-2037 and uses its own C code
outside this range. To me it looks like the bug might be in the C code. I
think the problem goes deeper than print.POSIXct, because coercions are
independent of the print method as far as I understand:

> x <- as.POSIXlt("1969-12-24")
> y <- as.POSIXlt(as.POSIXct(x))
> x
[1] "1969-12-24"
> y
[1] "1969-12-23 23:00:00 New Zealand Standard Time"
> x==y
[1] FALSE


(2) Time zone confusion

This is a question of taste and implementation, but I would like POSIXct
objects in data frames and plots to display the times I entered
originally, regardless of where in the world I'm working at the moment.


(3) My solution

I've defined the environment variable tz=GMT in my R shortcut and I'll try
to remember doing so on other machines I work on. This way I avoid both
the as.POSIXct/New Zealand bug and the time zone confusion. I still think
the Kiwis would appreciate the bug being fixed :)




> On Fri, 21 Feb 2003 arnima@u.washington.edu wrote:
>
> > Full_Name: Arni Magnusson
> > Version: 1.6.2
> > OS: Windows XP
> > Submission from: (NULL) (210.48.49.68)


--__--__--

Message: 10
From: "Henrik Bengtsson" <hb@maths.lth.se>
To: "'Duncan Murdoch'" <murdoch@stats.uwo.ca>
Cc: <r-devel@stat.math.ethz.ch>
Subject: RE: [Rd] Re: [R] Who to decide what a generic function should look
like?
Date: Sat, 22 Feb 2003 20:03:41 +1100

> -----Original Message-----
> From: r-devel-admin@stat.math.ethz.ch
> [mailto:r-devel-admin@stat.math.ethz.ch] On Behalf Of Duncan Murdoch
> Sent: den 22 februari 2003 03:15
> To: Henrik Bengtsson
> Cc: r-devel@stat.math.ethz.ch
> Subject: [Rd] Re: [R] Who to decide what a generic function
> should look like?
>
>
> On Thu, 20 Feb 2003 13:05:44 +1100, you wrote in message
> <000d01c2d884$98690fa0$7341a8c0@alpha.wehi.edu.au>:
>
> >I am not sure if what I am asking below should be discussed under
> >r-help or r-devel, so please feel free to move over to r-devel.
>
> I've done that, I think it's a more r-devel kind of topic.
>
> >For me a generic function should be fully generic in the sense that
> >there are no requirements of arguments agreement (and therefore it
> >should not be documented as a reply to Smyth's thread).
>
> I don't agree.  A generic function has a meaning.  Often that
> meaning is expressed in terms of certain arguments.  If a
> user of an unknown object knows that it supports the generic,
> they have a right to expect it to behave according to the
> standard meaning of the generic.

I understand this viewpoint too, but I tend to think about it as
follows. Consider a hierarchy of all possible classes. Excluding
multiple heritance, they could I principle be place in a tree structure
with a root class, which all classes directly or indirectly inherits
from (this is the idea in for instance Java). In R, such a root class
could have the methods print(), as.character() and a few other methods
that you expect all R objects to have. From there on you add new
classes. With this class hierarchy I think about generic functions (as
they work today) as methods that are placed in the root object. However,
why can they not be further down the tree where they can be documented
specifically for that subtree and provide polymorphism from there on?
This should still be (be even more) intutive for the end user I think.

So not thinking about S3 or S4, but in a longer term, is there a reason
for not going the whole way and having a method dispatching mechanism
that is totally general like in other object-oriented languages? When
asking this, I might reveal that I am not fully confortable with the
differences and pros & cons between scientific programming (with
vectors) and standard object-oriented programming.

> >My concern is that enforcing methods to match the argument
> signature of
> >the generic function will make packages incompatible with
> each other. I
> >can not create a generic function called "normalize" for my
> microarray
> >package and expect it to work together with other package defining a
> >generic function with the same name. Some short-term and long-term
> >outcomes from this are:
>
> That's only a short term problem.  As namespaces arrive, it
> will go away.  Your normalize will not trample on anyone
> else's normalize, because your names will live in a different
> namespace.  Hopefully the default behaviour will be
> reasonable (i.e. if I say "normalize", and only one version
> is around, I'll get it; if there are two, there'll be either
> a clear way to choose, or a warning or error about the ambiguity).

This is promising and I am really glad to hear that the problem of
conflicts might be solved. The problem remains though if one decides to
have to different types of classes in one package both with a
normalize() method, meaning that you might have to split up your package
into a bundle of packages. However, this is a much smaller problem since
it can be controlled by the developer.

> >  * who is the person to decide what a generic function should look
> >like, and
> >  * who owns the right to the method name "normalize"?
>
> The author of the package makes the decisions and owns the
> names in that package.
>
>
> Duncan Murdoch

Duncan, thanks a lot for your reply!

Henrik



--__--__--

_______________________________________________
R-devel mailing list  DIGESTED
R-devel@stat.math.ethz.ch
http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


End of R-devel Digest


From kjetil@entelnet.bo  Sun Feb 23 03:17:03 2003
From: kjetil@entelnet.bo (kjetil brinchmann halvorsen)
Date: Sun Feb 23 03:17:03 2003
Subject: [Rd] require vs library
In-Reply-To: <Pine.LNX.4.44.0302211752500.28941-100000@gannet.stats>
Message-ID: <3E57F664.4257.40413@localhost>

On 21 Feb 2003 at 18:06, ripley@stats.ox.ac.uk wrote:

The problem which surprised Brian Ripley (the search list being 
changed by a package without the package giving information)
occurs also with recommended packages:

(This is R1.6.2)
> search()
[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base" 

> library(nlme)
Loading required package: nls 
Loading required package: lattice 
> search()

[1] ".GlobalEnv"      "package:mva"     "package:lattice" 
"package:grid"   
[5] "package:nlme"    "package:nls"     "package:ctest"   "Autoloads" 
   [9] "package:base"  

mva and grid has been loaded without any warning. Everybody knows 
lattice requires grid, but why mva?

Restarting R:

> search()
[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base" 
> library(grid)
> search()
[1] ".GlobalEnv"    "package:grid"  "package:ctest" "Autoloads"    
[5] "package:base" 
> library(lattice)
> search()
[1] ".GlobalEnv"      "package:lattice" "package:grid"    
"package:ctest"  
[5] "Autoloads"       "package:base"   
> library(nls)
> search()
[1] ".GlobalEnv"      "package:nls"     "package:lattice" 
"package:grid"   
[5] "package:ctest"   "Autoloads"       "package:base"   
> library(nlme)
> search()
[1] ".GlobalEnv"      "package:mva"     "package:nlme"    
"package:nls"    
[5] "package:lattice" "package:grid"    "package:ctest"   "Autoloads" 
     
[9] "package:base"   

So nlme loads mva without a warning. This did'nt happen before
R1.6.0, I beleave.

On this theme, I have another question. I have a package
which needs another package (SuppDists) for only one 
function. I do require() within that function only. Is that OK, 
or should it be done within .First.lib ?

Kjetil Halvorsen

> There seems to be a widespread assumption that the way for package foo to 
> require package bar is via `require(bar)'.  It isn't!
> 
> That returns a logical which is in the vast majority of cases unchecked.
> So if the package is really required, the code will fail without a warning
> if the package is unavailable.  You may as well call library() and let it
> do the checking.  (In a few cases you can safely assume that the package 
> is present, e.g. nnet can require(MASS) since they are installed 
> together.)
> 
> I find it confusing if require(bar, quietly=TRUE) is used with no message.  
> If you are going to change the search path, please let the end user know
> you have done so.  I've had nasty surprises more than once from this by 
> getting datasets from packages I did not ask to be there.
> 
> Another point: please do not call code with side effects like require, 
> library or options at the top level in foo/R/foo, but do so within 
> .First.lib.  This becomes important if the code is dumped or put in a 
> database.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From ripley@stats.ox.ac.uk  Sun Feb 23 08:28:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun Feb 23 08:28:03 2003
Subject: [Rd] require vs library
In-Reply-To: <3E57F664.4257.40413@localhost>
Message-ID: <Pine.LNX.4.44.0302230721510.5245-100000@gannet.stats>

On Sat, 22 Feb 2003, kjetil brinchmann halvorsen wrote:

> On this theme, I have another question. I have a package
> which needs another package (SuppDists) for only one 
> function. I do require() within that function only. Is that OK, 
> or should it be done within .First.lib ?

Yes, that's fine.  I should have stressed *at the top level* below.
In one scenario we have been experimenting with the objects in a package
are dumped to a database, and then loading the package makes the objects
available as promises and no longer executes the original package code.
Another scenario is to install with --save.

> > Another point: please do not call code with side effects like require, 
> > library or options at the top level in foo/R/foo, but do so within 
> > .First.lib.  This becomes important if the code is dumped or put in a 
> > database.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Sun Feb 23 09:53:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun Feb 23 09:53:02 2003
Subject: [Rd] Re: error from sample if sampling length one character (PR#2546)
Message-ID: <200302230852.h1N8qn35011712@pubhealth.ku.dk>

> Sample gives an error if it is sampling a length one character
> vector:
>
> > sample('a', 1)
> Error in sample(x, size, replace, prob) : invalid first argument

>From the help page:

       x: Either a (numeric, complex, character or logical) vector of
          more than one element from which to choose, or a positive
          integer.

so this is as documented, hence not a bug.

[Re-created from the R-bugs page as my mail server is offline.]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Sun Feb 23 12:20:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun Feb 23 12:20:03 2003
Subject: [Rd] Re: error from sample if sampling length one character (PR#2546)
Message-ID: <200302231119.h1NBJu35012172@pubhealth.ku.dk>

Have you read the R FAQ on what a bug is?  It says

   Finally, a command's intended definition may not be best for
statistical analysis.  This is a very important sort of problem, but it is
also a matter of judgment.  Also, it is easy to come to such a conclusion
out of ignorance of some of the existing features.  It is probably best
not to complain about such a problem until you have checked the
documentation in the usual ways, feel confident that you understand it,
and know for certain that what you want is not available.

So, be honest: did you check the documentation?  If you did, why did not 
not mention that you knew it was a documented feature?

On Sun, 23 Feb 2003, Patrick Burns wrote:

> Just because it is documented does not mean it isn't a bug.
> 
> I found this in a real application that augments a character vector by 
> randomly
> selecting strings from a population.  In some circumstances that 
> population is a
> single string.
> 
> I don't see any reason not to make the change.

Let us enlighten you: programmers who read the documentation rely on the
current behaviour to catch user errors, as they are entitled to do.

I trust you have filed a bug report on the `real application' for
mis-using R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard@biostat.ku.dk  Sun Feb 23 13:05:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun Feb 23 13:05:02 2003
Subject: [Rd] require vs library
In-Reply-To: <3E57F664.4257.40413@localhost>
References: <3E57F664.4257.40413@localhost>
Message-ID: <x28yw7nque.fsf@biostat.ku.dk>

"kjetil brinchmann halvorsen" <kjetil@entelnet.bo> writes:

> mva and grid has been loaded without any warning. Everybody knows 
> lattice requires grid, but why mva?

As far as I recall it is for the dist() function, which gets used in
some spatial/longitudinal models.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From ripley@stats.ox.ac.uk  Sun Feb 23 13:53:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun Feb 23 13:53:02 2003
Subject: [Rd] require vs library
In-Reply-To: <x28yw7nque.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0302231245230.8737-100000@gannet.stats>

On 23 Feb 2003, Peter Dalgaard BSA wrote:

> "kjetil brinchmann halvorsen" <kjetil@entelnet.bo> writes:
> 
> > mva and grid has been loaded without any warning. Everybody knows 
> > lattice requires grid, but why mva?
> 
> As far as I recall it is for the dist() function, which gets used in
> some spatial/longitudinal models.

More precisely, it autoloads dist from mva, so you get mva if and only
if you use a function that uses it, and it seems that is corSpatial.

lattice autoloads loess and loess.smooth from modreg.

I don't like autoloads for this reason: they change the search path 
without warning.   Hopefully by 1.8.0 we will have better mechanisms
(import from namespaces, on-demand loading of objects from databases 
which allows all the base and recommended packages to be attached with 
negligible penalty).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From larry@cognition.wustl.edu  Sun Feb 23 23:54:02 2003
From: larry@cognition.wustl.edu (larry@cognition.wustl.edu)
Date: Sun Feb 23 23:54:02 2003
Subject: [Rd] nested assignment (PR#2575)
Message-ID: <200302232254.h1NMs135014430@pubhealth.ku.dk>

> A <- list(B=1, C=2, D=3)		# A list of 3 elements
> attach(A)				# Attach it to the search list

> assign("D", 4, pos="A")		# Assign a new value to 'D', inside 'A'


> ls()
  D					# Looks good ...

> D
  4					# Looks good ...
  
> A
  $B
  [1] 1

  $C
  [1] 1

  $D
  [1] 3					# Huh?


*Both* values of 'D' somehow live in 'A':

> detach("A")
> attach("A")
> D
  3					# Now the changed value is gone


I'd greatly appreciate if you'd let me know if I'm just doing something
silly; my email is larry@eye-hand.wustl.edu
But even if I *am* doing something silly, perhaps there's something in
the documentation that might be changed to prevent someone else from
making the same error.

Thanks!

larry
larry@eye-hand.wustl.edu



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.1
 year = 2002
 month = 11
 day = 01
 language = R

Search Path:
 .GlobalEnv, A, package:ctest, Autoloads, package:base


From p.dalgaard@biostat.ku.dk  Mon Feb 24 01:43:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Feb 24 01:43:03 2003
Subject: [Rd] nested assignment (PR#2575)
In-Reply-To: <200302232254.h1NMs135014430@pubhealth.ku.dk>
References: <200302232254.h1NMs135014430@pubhealth.ku.dk>
Message-ID: <x2of52mrqs.fsf@biostat.ku.dk>

larry@cognition.wustl.edu writes:

> > A <- list(B=1, C=2, D=3)		# A list of 3 elements
> > attach(A)				# Attach it to the search list
> 
> > assign("D", 4, pos="A")		# Assign a new value to 'D', inside 'A'
> 
> 
> > ls()
>   D					# Looks good ...
> 
> > D
>   4					# Looks good ...
>   
> > A
>   $B
>   [1] 1
> 
>   $C
>   [1] 1
> 
>   $D
>   [1] 3					# Huh?
> 
> 
> *Both* values of 'D' somehow live in 'A':
> 
> > detach("A")
> > attach("A")
> > D
>   3					# Now the changed value is gone

The explanation is that attach() attaches a *copy* of the original
list (a virtual copy, physical copying only happens if you attempt to
change one version). The help page should probably have something on
this. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From phgrosjean@sciviews.org  Mon Feb 24 10:40:03 2003
From: phgrosjean@sciviews.org (Philippe Grosjean)
Date: Mon Feb 24 10:40:03 2003
Subject: [Rd] Re: [R] Who to decide what a generic function should look like?
In-Reply-To: <1mfc5voo4gfcd7jifcgl00pit8mden1hul@4ax.com>
Message-ID: <MABBLJDICACNFOLGIHJOOEBADEAA.phgrosjean@sciviews.org>

Henrik Bengtsson wrote:
>For me a generic function should be fully generic in the sense that
>there are no requirements of arguments agreement (and therefore it
>should not be documented as a reply to Smyth's thread).

Duncan Murdoch answered:
>I don't agree.  A generic function has a meaning.  Often that meaning
>is expressed in terms of certain arguments.  If a user of an unknown
>object knows that it supports the generic, they have a right to expect
>it to behave according to the standard meaning of the generic.

I agree with both of you. I mean, a generic function has a meaning, and
probably some associated arguments... but it should apply to various
situations where very different arguments could be required. The strength of
generic functions is to tailor a specific action to the context. For
instance, the user wants to get the best plot for an object... even if he
does not know what the "best plot" is for it, he just call plot(object) and
get the result!

To obtain that, one need a certain liberty in defining the plot() generic
function. Thus, the ... argument is critical here. I don"t know much about
S4/methods (I still use old system), but I am pretty happy with this
implementation of generic functions in S-PLUS / R.
Best,

Philippe Grosjean

...........]<(({?<...............<?}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Oceanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................


From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Feb 24 15:46:02 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon Feb 24 15:46:02 2003
Subject: [Rd] match.arg
In-Reply-To: <3E518FBB.2080405@pdf.com>
References: <3E518FBB.2080405@pdf.com>
Message-ID: <15962.12269.732529.587667@gargle.gargle.HOWL>

>>>>> "Spencer" == Spencer Graves <spencer.graves@pdf.com>
>>>>>     on Mon, 17 Feb 2003 17:43:23 -0800 writes:

    Spencer> Hello: I'm not on the "r-devel" list, but I just
    Spencer> modified "match.arg" from R 1.6.2 for Windows to
    Spencer> accept a vector for "arg".

    Spencer> 	  Is it appropriate that I send such things to
    Spencer> this email address for consideration for inclusion
    Spencer> in a future release?

yes (using "R-devel" for ...). 
But why is this current proposal really useful?
Note that I can't see reason to match more than one argument to the
*same* list of choices. `choices' already is a vector typically...

Making a function more complicated makes it also more
error-prone, so I think we'd need a good motivation for it.
E.g., your proposal below quite badly fails when
length(arg) == 0, since you've used the ``well-known to be unsafe''
1:length(arg) idiom instead of the safe  seq(length= length(arg)) one.

Regards,
Martin

    Spencer> 	  I just compared this with "match.arg" in
    Spencer> S-Plus 6.1 for Windows.  There, I got the
    Spencer> following:

    >> match.arg(c("a","b"), c("aa", "bb"))
    Spencer> [1] "aa" "bb"




    Spencer> 	  However, match.arg(c("a", "b")) in a test
    Spencer> function with "default" = c("aa", "bb") returned
    Spencer> only "a"; the following returns c("aa", "bb").

    Spencer> Thanks for all your hard work in developing this
    Spencer> marvelous product.

    Spencer> Sincerely, Spencer Graves

    match.arg <-
    function (arg, choices)
    {
	 if (missing(choices)) {
	     formal.args <- formals(sys.function(sys.parent()))
	     choices <- eval(formal.args[[deparse(substitute(arg))]])
	 }
    #	 cat("choices =", choices, "\n")
	     for(j in 1:length(arg)){
		if (all(arg[j] == choices))
		 arg[j] <- choices[1]
		     else{
			i <- pmatch(arg[j], choices)
		     if (is.na(i))
		      stop(paste("ARG should be one of", paste(choices, collapse = 
    ", "),
			       sep = " "))
			if (length(i) > 1)
			 stop("there is more than one match in match.arg")
		     arg[j] <- choices[i]
		    }
	    }
	    arg
    }


From jchoi@dal.ca  Mon Feb 24 17:32:03 2003
From: jchoi@dal.ca (jchoi@dal.ca)
Date: Mon Feb 24 17:32:03 2003
Subject: [Rd] hsv producing a color intensity not in [0,1] (PR#2576)
Message-ID: <200302241632.h1OGWN35023215@pubhealth.ku.dk>

Full_Name: Jae Choi
Version: 1.6.1
OS: linux (x86)
Submission from: (NULL) (142.176.61.245)


Hello,

Any attempts to access the "hsv" function returns the following type of error:

Error in hsv(h = seq(start, ifelse(start > end, 1, 0) + end, length = n)%%1,  :

        color intensity 1.25, not in [0,1]

(the above was generated from the demo command:
> pie(rep(1, 24), col = rainbow(24), radius = 0.9) 
)

When hsv is accessed with values such as:

hsv(0.5, 0.5, 0.5, 1)   gives "#80FF40"
h3sv(0.5, 0.5, 0.49, 1) gives  "#7DFA3E"

however,  

hsv(0.5, 0.5, 0.51, 1) gives  "color intensity 1.02, not in [0,1] "

I have run the same above on the MSWindows port and the colour values are very
different:
("#408080, #3E7D7D, and #418282, respectively). On the MSWindows platform, the
colours seem well behaved and no errors are encountered. Any help would be
appreciated.

Jae


From spencer.graves@pdf.com  Mon Feb 24 17:56:05 2003
From: spencer.graves@pdf.com (Spencer Graves)
Date: Mon Feb 24 17:56:05 2003
Subject: [Rd] match.arg
References: <3E518FBB.2080405@pdf.com> <15962.12269.732529.587667@gargle.gargle.HOWL>
Message-ID: <3E5A4E34.3070009@pdf.com>

Thanks for your reply.

I'm trying to generalize the MASS function "stepAIC" to study the 
effects of hierarchy for both interactions and parabolic terms.  I 
include a new argument 'hierarchy = c("include", "exclude", "ignore")' 
being a 2-vector, with the first component for interaction and the 
second for parabolic terms:

	* "exclude" fails to consider A:B (or A^2) unless both A and B are 
currently in the model.  This is the current default for interactions 
but not for parabolic terms.

	* "include" forces A:B to be evaluated with 3 degrees of freedom if 
neither A nor B are currently in the model, 2 degrees of freedom if only 
1 are in the model, and 1 degree of freedom if both are currently in the 
model (assuming A and B are both either numerical variables or 2-level 
factors).  George Box says he invented response surface methods for a 
chemical plant that had only interactions.  The plan had gone through 
several general managers, who had done what they could with one factor 
at a time experiments.  I plan to analyze several Taguchi 3-level 
experiments in order to evaluate effect sparcity and the frequency with 
which both interactions and parabolic terms occur in industrial 
experimentation, and I need an automated way of doing this.

	* "ignore" means include or exclude the interaction independent of 
whether the main effect is in the model.  This is the current default 
for A^2.

I want to make "include" the default for both A:B and A^2.  In my 
revision of stepAIC, I call match.arg as follows;

	 hierarchy <- rep(match.arg(hierarchy), length=2)

What do you think?  I know that one example does not justify adding a 
rarely used option to a general tool.  However, it occurred to me that 
there might be other applications

#################

Thanks for reminding me about the "seq(length= length(arg))" 
construction.  After I sent that email, I discovered that problem, and 
added the following line right before the "for" loop:

	if((length(arg)==length(choices)) && all(arg==choices))
	      return(choices[1])

Since I had heard no reply, I decided not to issue a "correction" to an 
email that might go nowhere or might only irritate the recipients.

Thanks again for your comments and all your effort and creativity in the 
R project.

Best Wishes,
Spencer Graves

Martin Maechler wrote:
>>>>>>"Spencer" == Spencer Graves <spencer.graves@pdf.com>
>>>>>>    on Mon, 17 Feb 2003 17:43:23 -0800 writes:
>>>>>
> 
>     Spencer> Hello: I'm not on the "r-devel" list, but I just
>     Spencer> modified "match.arg" from R 1.6.2 for Windows to
>     Spencer> accept a vector for "arg".
> 
>     Spencer> 	  Is it appropriate that I send such things to
>     Spencer> this email address for consideration for inclusion
>     Spencer> in a future release?
> 
> yes (using "R-devel" for ...). 
> But why is this current proposal really useful?
> Note that I can't see reason to match more than one argument to the
> *same* list of choices. `choices' already is a vector typically...
> 
> Making a function more complicated makes it also more
> error-prone, so I think we'd need a good motivation for it.
> E.g., your proposal below quite badly fails when
> length(arg) == 0, since you've used the ``well-known to be unsafe''
> 1:length(arg) idiom instead of the safe  seq(length= length(arg)) one.
> 
> Regards,
> Martin
> 
>     Spencer> 	  I just compared this with "match.arg" in
>     Spencer> S-Plus 6.1 for Windows.  There, I got the
>     Spencer> following:
> 
>     >> match.arg(c("a","b"), c("aa", "bb"))
>     Spencer> [1] "aa" "bb"
> 
> 
> 
> 
>     Spencer> 	  However, match.arg(c("a", "b")) in a test
>     Spencer> function with "default" = c("aa", "bb") returned
>     Spencer> only "a"; the following returns c("aa", "bb").
> 
>     Spencer> Thanks for all your hard work in developing this
>     Spencer> marvelous product.
> 
>     Spencer> Sincerely, Spencer Graves
> 
>     match.arg <-
>     function (arg, choices)
>     {
> 	 if (missing(choices)) {
> 	     formal.args <- formals(sys.function(sys.parent()))
> 	     choices <- eval(formal.args[[deparse(substitute(arg))]])
> 	 }
>     #	 cat("choices =", choices, "\n")
> 	     for(j in 1:length(arg)){
> 		if (all(arg[j] == choices))
> 		 arg[j] <- choices[1]
> 		     else{
> 			i <- pmatch(arg[j], choices)
> 		     if (is.na(i))
> 		      stop(paste("ARG should be one of", paste(choices, collapse = 
>     ", "),
> 			       sep = " "))
> 			if (length(i) > 1)
> 			 stop("there is more than one match in match.arg")
> 		     arg[j] <- choices[i]
> 		    }
> 	    }
> 	    arg
>     }


From maechler@stat.math.ethz.ch  Mon Feb 24 17:57:03 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Feb 24 17:57:03 2003
Subject: [Rd] hsv producing a color intensity not in [0,1] (PR#2576)
Message-ID: <200302241657.h1OGvC35023333@pubhealth.ku.dk>

No bug :

>>>>> "jchoi" == jchoi  <jchoi@dal.ca>
>>>>>     on Mon, 24 Feb 2003 17:32:23 +0100 (MET) writes:

    jchoi> Full_Name: Jae Choi
    jchoi> Version: 1.6.1
    jchoi> OS: linux (x86)
    jchoi> Submission from: (NULL) (142.176.61.245)

    jchoi> Hello,

    jchoi> Any attempts to access the "hsv" function returns the
    jchoi> following type of error:

    jchoi> Error in hsv(h = seq(start, ifelse(start > end, 1, 0) + end, length = n)%%1,  :

    jchoi> color intensity 1.25, not in [0,1]

The error message shows that you are using a different  hsv()
function than the official one.

rm(hsv) will probably solver your problem

{unless it's in a bogous package you have attached..
 in that case,  find(hsv)   will show you which package}.

Regards,
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><




    jchoi> (the above was generated from the demo command:
    >> pie(rep(1, 24), col = rainbow(24), radius = 0.9) 
    jchoi> )

    jchoi> When hsv is accessed with values such as:

    jchoi> hsv(0.5, 0.5, 0.5, 1)   gives "#80FF40"
    jchoi> hsv(0.5, 0.5, 0.49, 1) gives  "#7DFA3E"

    jchoi> however,  

    jchoi> hsv(0.5, 0.5, 0.51, 1) gives  "color intensity 1.02, not in [0,1] "

    jchoi> I have run the same above on the MSWindows port and the colour values are very
    jchoi> different:
    jchoi> ("#408080, #3E7D7D, and #418282, respectively). On the MSWindows platform, the
    jchoi> colours seem well behaved and no errors are encountered. Any help would be
    jchoi> appreciated.

    jchoi> Jae


From j.c.rougier@durham.ac.uk  Mon Feb 24 18:06:02 2003
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Mon Feb 24 18:06:02 2003
Subject: [Rd] Problem with hessian in deriv3 (PR#2577)
Message-ID: <200302241702.h1OH2o35023383@pubhealth.ku.dk>

Hi Everyone,

I noticed the following in deriv3:

> deriv3(expression(x * y - b * z), c("x", "y", "z"))
expression({
    .value <- x * y - b * z
    .grad <- array(0, c(length(.value), 3), list(NULL, c("x", 
        "y", "z")))
    .hessian <- array(0, c(length(.value), 3, 3), list(NULL, 
        c("x", "y", "z"), c("x", "y", "z")))
    .grad[, "x"] <- y
    .grad[, "y"] <- x
    .grad[, "z"] <- -b
    .hessian[, "z", "z"] <- 0
    attr(.value, "gradient") <- .grad
    attr(.value, "hessian") <- .hessian
    .value
})

where the hessian is incorrectly computed as being 0 everywhere -- it
should be 1 at (x, y) and (y, x).  Interestingly, if I precede x * y
by unary minus the hessian is correct:

> deriv3(expression(- x * y - b * z), c("x", "y", "z"))
expression({
    .expr1 <- -x
    .value <- .expr1 * y - b * z
    .grad <- array(0, c(length(.value), 3), list(NULL, c("x", 
        "y", "z")))
    .hessian <- array(0, c(length(.value), 3, 3), list(NULL, 
        c("x", "y", "z"), c("x", "y", "z")))
    .grad[, "x"] <- -y
    .hessian[, "x", "x"] <- 0
    .hessian[, "x", "y"] <- .hessian[, "y", "x"] <- -1
    .hessian[, "x", "z"] <- .hessian[, "z", "x"] <- 0
    .grad[, "y"] <- .expr1
    .hessian[, "y", "y"] <- 0
    .hessian[, "y", "z"] <- .hessian[, "z", "y"] <- 0
    .grad[, "z"] <- -b
    .hessian[, "z", "z"] <- 0
    attr(.value, "gradient") <- .grad
    attr(.value, "hessian") <- .hessian
    .value
})

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.1
 year = 2002
 month = 11
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


From jerome@hivnet.ubc.ca  Mon Feb 24 18:57:05 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Mon Feb 24 18:57:05 2003
Subject: [Rd] "trace" argument in legend() (PR#2578)
Message-ID: <200302241753.h1OHrU35023583@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.2
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



Should be an easy fix...

Consider the examble below:

plot(0,0)
legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)

It gives the following trace:

> plot(0,0)
> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
  xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
  rect2(0,0, w=0.3474, h=0.2382...)
  segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
  points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)

On the line starting by "segment2", the coordinates are not separated
by a space like on the line starting by "points2".

My recommendation is to remove the option `sep = ""' in this part of
code in legend().

[...]
        if (trace)
            catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
                yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
                sep = "")
[...]

Sincerely,
Jerome Asselin


From jutans@utans.u-net.com  Tue Feb 25 00:40:04 2003
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Tue Feb 25 00:40:04 2003
Subject: [Rd] unz (PR#2579)
Message-ID: <200302242340.h1ONeL35024821@pubhealth.ku.dk>

Full_Name: j utans
Version: 1.6.2
OS: NT
Submission from: (NULL) (195.102.198.206)


unz() always fails to open a connection to files in zip archives on NT.
It looks like unz_open in dounzip.c always returns FALSE, should the
last line be return TRUE;


From deleeuw@stat.ucla.edu  Tue Feb 25 04:02:03 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue Feb 25 04:02:03 2003
Subject: [Rd] R-devel problems
Message-ID: <775C3E6A-486D-11D7-B2A3-000393860F3C@stat.ucla.edu>

The OS X configure in R-devel has been changed to use two-level 
namespaces. There
are still some problems.

1. Trunmed.c in the modreg packages defines a function heapsort(), 
while heapsort
is also defined (differently) in /usr/lib/stdlib.h. I (temporarily) 
disabled the
definition in stdlib.h.

2. If R is configured with the --without-x flag, then CPPFLAGS does not 
include
/usr/X11R6/include, while the tk.h files still tries to include 
X11/xlib.h (and
can't find it, obviously). I added -I /usr/X11R6/include to the compile 
of tcltk.o

3. Configure does not pass the $(Rexecbindir) to the Makefiles in the 
/src/library
directory, so the links cannot find the bundle_loader. I added them by 
hand for
all package links.

4. The aqua module does not work with two-level namespaces. Since it 
does
not work anyway, and Stefano will remove it soon, it may be better to 
remove
it even sooner.

5. In order to link the bundles with -bundle -bundle_loader 
/usr/local/lib/R/bin/R.bin
the /usr/local/lib/R/bin/R.bin must exist, and moreover must be an 
R-devel build.
This is a little bootstrap problem which can be easily hacked.


From ripley@stats.ox.ac.uk  Tue Feb 25 09:08:07 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Feb 25 09:08:07 2003
Subject: [Rd] R-devel problems
In-Reply-To: <775C3E6A-486D-11D7-B2A3-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0302250758180.9982-100000@gannet.stats>

On Mon, 24 Feb 2003, Jan de Leeuw wrote:

> The OS X configure in R-devel has been changed to use two-level 
> namespaces. There
> are still some problems.
> 
> 1. Trunmed.c in the modreg packages defines a function heapsort(), 
> while heapsort
> is also defined (differently) in /usr/lib/stdlib.h. I (temporarily) 
> disabled the
> definition in stdlib.h.

That's a very recent addition, and we do try to keep an eye on such
things. The R symbol has been changed now.

> 2. If R is configured with the --without-x flag, then CPPFLAGS does not 
> include
> /usr/X11R6/include, while the tk.h files still tries to include 
> X11/xlib.h (and
> can't find it, obviously). I added -I /usr/X11R6/include to the compile 
> of tcltk.o

This looks like a bug in your tkConfig.sh.  For example on Solaris it has

# -I switch(es) to use to make all of the X11 include files accessible:
TK_XINCLUDES='-I/usr/openwin/include'

and that is what R uses, specifically

  if test -n "${TK_XINCLUDES}"; then
    TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${TK_XINCLUDES}"
  else
    TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${X_CFLAGS}"
  fi

Or is tkConfig.sh not being found and you need to point configure at it?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler@stat.math.ethz.ch  Tue Feb 25 10:26:06 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Feb 25 10:26:06 2003
Subject: [Rd] "trace" argument in legend() (PR#2578)
Message-ID: <200302250921.h1P9Le35027158@pubhealth.ku.dk>

>>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
>>>>>     on Mon, 24 Feb 2003 18:53:30 +0100 (MET) writes:

	  ....

    Jerome> Should be an easy fix...

    Jerome> Consider the examble below:

    Jerome> plot(0,0)
    Jerome> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)

    Jerome> It gives the following trace:

    >> plot(0,0)
    >> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
      > xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
      > rect2(0,0, w=0.3474, h=0.2382...)
      > segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
      > points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)

    Jerome> On the line starting by "segment2", the coordinates
    Jerome> are not separated by a space like on the line
    Jerome> starting by "points2".

    Jerome> My recommendation is to remove the option `sep = ""'
    Jerome> in this part of code in legend().

    Jerome> [...]
    Jerome> if (trace)
    Jerome> catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
    Jerome> yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
    Jerome> sep = "")
    Jerome> [...]

Thank you, Jerome.
Yes, it's a buglet and your suggestion is fine.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From deleeuw@stat.ucla.edu  Tue Feb 25 17:22:03 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue Feb 25 17:22:03 2003
Subject: [Rd] R-devel problems
In-Reply-To: <Pine.LNX.4.44.0302250758180.9982-100000@gannet.stats>
Message-ID: <A0742091-1E3E-11B2-B84B-000393860F3C@stat.ucla.edu>

As for the tcl/tk, I actually configured without pointing to 
tclConfig.sh
and tkConfig.sh at all, but putting TCLTK_LIBS and TCLTK_CPPFLAGS
in the environment.

I could try to use, in addition,  --with-tclconfig and --with-tkconfig, 
but I
thought that would not be necessary if location of headers and libs are
defined explicitly.

On Tuesday, February 25, 2003, at 12:06 AM, ripley@stats.ox.ac.uk wrote:

> On Mon, 24 Feb 2003, Jan de Leeuw wrote:
>
>> The OS X configure in R-devel has been changed to use two-level
>> namespaces. There
>> are still some problems.
>>
>> 1. Trunmed.c in the modreg packages defines a function heapsort(),
>> while heapsort
>> is also defined (differently) in /usr/lib/stdlib.h. I (temporarily)
>> disabled the
>> definition in stdlib.h.
>
> That's a very recent addition, and we do try to keep an eye on such
> things. The R symbol has been changed now.
>
>> 2. If R is configured with the --without-x flag, then CPPFLAGS does 
>> not
>> include
>> /usr/X11R6/include, while the tk.h files still tries to include
>> X11/xlib.h (and
>> can't find it, obviously). I added -I /usr/X11R6/include to the 
>> compile
>> of tcltk.o
>
> This looks like a bug in your tkConfig.sh.  For example on Solaris it 
> has
>
> # -I switch(es) to use to make all of the X11 include files accessible:
> TK_XINCLUDES='-I/usr/openwin/include'
>
> and that is what R uses, specifically
>
>   if test -n "${TK_XINCLUDES}"; then
>     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${TK_XINCLUDES}"
>   else
>     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${X_CFLAGS}"
>   fi
>
> Or is tkConfig.sh not being found and you need to point configure at 
> it?
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


From ripley@stats.ox.ac.uk  Tue Feb 25 18:19:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Feb 25 18:19:02 2003
Subject: [Rd] R-devel problems
In-Reply-To: <A0742091-1E3E-11B2-B84B-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0302251717050.18232-100000@gannet.stats>

If you

1) Tell configure not to look for X includes

2) Tell it a TCLTK_CPPFLAGS omitting X includes

then I think you should expect no X includes to be found, no?

Brian

On Thu, 1 Jan 1970, Jan de Leeuw wrote:

> As for the tcl/tk, I actually configured without pointing to 
> tclConfig.sh
> and tkConfig.sh at all, but putting TCLTK_LIBS and TCLTK_CPPFLAGS
> in the environment.
> 
> I could try to use, in addition,  --with-tclconfig and --with-tkconfig, 
> but I
> thought that would not be necessary if location of headers and libs are
> defined explicitly.
> 
> On Tuesday, February 25, 2003, at 12:06 AM, ripley@stats.ox.ac.uk wrote:
> 
> > On Mon, 24 Feb 2003, Jan de Leeuw wrote:
> >
> >> The OS X configure in R-devel has been changed to use two-level
> >> namespaces. There
> >> are still some problems.
> >>
> >> 1. Trunmed.c in the modreg packages defines a function heapsort(),
> >> while heapsort
> >> is also defined (differently) in /usr/lib/stdlib.h. I (temporarily)
> >> disabled the
> >> definition in stdlib.h.
> >
> > That's a very recent addition, and we do try to keep an eye on such
> > things. The R symbol has been changed now.
> >
> >> 2. If R is configured with the --without-x flag, then CPPFLAGS does 
> >> not
> >> include
> >> /usr/X11R6/include, while the tk.h files still tries to include
> >> X11/xlib.h (and
> >> can't find it, obviously). I added -I /usr/X11R6/include to the 
> >> compile
> >> of tcltk.o
> >
> > This looks like a bug in your tkConfig.sh.  For example on Solaris it 
> > has
> >
> > # -I switch(es) to use to make all of the X11 include files accessible:
> > TK_XINCLUDES='-I/usr/openwin/include'
> >
> > and that is what R uses, specifically
> >
> >   if test -n "${TK_XINCLUDES}"; then
> >     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${TK_XINCLUDES}"
> >   else
> >     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${X_CFLAGS}"
> >   fi
> >
> > Or is tkConfig.sh not being found and you need to point configure at 
> > it?
> >
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From eglen@pcg.wustl.edu  Tue Feb 25 18:32:04 2003
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Tue Feb 25 18:32:04 2003
Subject: [Rd] typo in writeLines.Rd (PR#2580)
Message-ID: <200302251730.h1PHUf35004163@pubhealth.ku.dk>

Present in r-devel and r-patched, 
line 27 of src/library/base/man/writeLines.Rd:

  platform (LF on Unix/Linux, CRLF on Windows, LF on Macintosh).  For

I think on the Macintosh, that should be CR, not LF,
as elsewhere, e.g. in base.Rd.

Stephen


From ripley@stats.ox.ac.uk  Tue Feb 25 18:54:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Feb 25 18:54:03 2003
Subject: [Rd] typo in writeLines.Rd (PR#2580)
In-Reply-To: <200302251730.h1PHUf35004163@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302251749390.26200-100000@gannet.stats>

It seems to depend on the OS on the Mac these days, so we need to be more
specific.

On Tue, 25 Feb 2003 eglen@pcg.wustl.edu wrote:

> Present in r-devel and r-patched, 
> line 27 of src/library/base/man/writeLines.Rd:
> 
>   platform (LF on Unix/Linux, CRLF on Windows, LF on Macintosh).  For
> 
> I think on the Macintosh, that should be CR, not LF,
> as elsewhere, e.g. in base.Rd.

Which file is that?  writeLines.Rd is part of library/base/man/base.Rd, 
the only one I can find.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pburns@pburns.seanet.com  Tue Feb 25 20:02:03 2003
From: pburns@pburns.seanet.com (Patrick Burns)
Date: Tue Feb 25 20:02:03 2003
Subject: [Rd] sample (PR#2546)
Message-ID: <3E5BBE7A.3090705@pburns.seanet.com>

There is rumour that some of my mail didn't go where it should have because
I don't know how to work email.  It was suggested that I summarize here.

The issue is with sample when the first argument is length 1.  Current
behaviour is:

 > sample('a', 1)
Error in sample(x, size, replace, prob) : invalid first argument
 > sample(3+0i, 1)
Error in x >= 1 : illegal comparison with complex values
 > sample(TRUE, 1)
[1] 1
 > sample(FALSE, 1)
[1] FALSE
 > sample(NA, 1)
Error in if (length(x) == 1 && x >= 1) { :
        missing value where logical needed
 > sample(.5, 1)
[1] 0.5


The proposed behaviour is:

 > sample('a', 1)
[1] "a"
 > sample(3+0i, 1)
[1] 3+0i
 > sample(TRUE, 1)
[1] TRUE
 > sample(FALSE, 1)
[1] FALSE
 > sample(NA, 1)
[1] NA
 > sample(.5, 1)
[1] 0.5


For some reason that I haven't yet grasped, the current
behaviour seems to be preferred to the proposed behaviour.

Pat Burns

patrick@burns-stat.com


From murdoch@stats.uwo.ca  Tue Feb 25 21:43:03 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue Feb 25 21:43:03 2003
Subject: [Rd] New Windows snapshot of 1.7.0 available
Message-ID: <55ln5v05gt8uce7l92fgoh2dgmeo9gdt4i@4ax.com>

I've spent a few days revamping the Makefiles for the Windows
installer.  It looks to me as though it works, but I've probably made
some errors or omissions.  Anyone interested in testing it is invited
to download it from my web page, 

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

As the readme file on that web page says,

"I'm not doing clean builds each time, so it's possible the
distribution will include some files that don't belong there; if so,
please let me know.  (Also let me know if files are missing!)

There are likely to be numerous bugs in the snapshot.  Don't trust it
for important work."

Duncan Murdoch


From register@free-cell.tk  Wed Feb 26 02:51:02 2003
From: register@free-cell.tk (register@free-cell.tk)
Date: Wed Feb 26 02:51:02 2003
Subject: [Rd] Please activate your free cell phone. (PR#2581)
Message-ID: <200302260150.h1Q1oe35005425@pubhealth.ku.dk>

Hello, 
          You have been given a FREE cell phone with FREE shipping.
Click <a href="http://www.freecellular.com/?wm=14310">here</a> to continue to activate your new phone.
We hope to hear from you soon.


-Sales Rep.
free-cell.tk staff


From pgilbert@bank-banque-canada.ca  Wed Feb 26 05:09:03 2003
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed Feb 26 05:09:03 2003
Subject: [Rd] class(x) <- error
Message-ID: <3E5C3DEB.802D2AFB@bank-banque-canada.ca>

I think this is an error in r-devel:

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-02-25)
...
 > x <- matrix(1:9,3,3)
 > class(x)<-c("a", "matrix")
 > class(x)
[1] "a"      "matrix"
 > class(x)<-class(x)[-1]
 > class(x)
[1] "a"      "matrix"  # should be "matrix"
 > class(x)<-"matrix"
 > class(x)
[1] "a"      "matrix"  # should be "matrix"

Paul Gilbert


From activate@free-cell.tk  Wed Feb 26 05:45:03 2003
From: activate@free-cell.tk (activate@free-cell.tk)
Date: Wed Feb 26 05:45:03 2003
Subject: [Rd] Please activate your cell phone as soon as possible. (PR#2582)
Message-ID: <200302260444.h1Q4iZ35005736@pubhealth.ku.dk>

Hello,
           You have been given an oppurtunity to activate your free cell phone, with free shipping, AND free activation!
To continue to activate your free phone, please click <a href="http://www.freecellular.com/?wm=14310">here</a>.
We hope to hear from you soon!

-Samantha, 
Freecellular activation department.


From deleeuw@stat.ucla.edu  Wed Feb 26 07:49:38 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed Feb 26 07:49:38 2003
Subject: [Rd] R-devel problems
In-Reply-To: <Pine.LNX.4.44.0302251717050.18232-100000@gannet.stats>
Message-ID: <59AEC444-4955-11D7-A62A-000393BB6D36@stat.ucla.edu>

Indeed. But I was expecting it not to look for X includes. This has  
nothing to
do with R, however, only with tk.h for AquaTk.

On Tuesday, Feb 25, 2003, at 09:18 US/Pacific, ripley@stats.ox.ac.uk  
wrote:

> If you
>
> 1) Tell configure not to look for X includes
>
> 2) Tell it a TCLTK_CPPFLAGS omitting X includes
>
> then I think you should expect no X includes to be found, no?
>
> Brian
>
> On Thu, 1 Jan 1970, Jan de Leeuw wrote:
>
>> As for the tcl/tk, I actually configured without pointing to
>> tclConfig.sh
>> and tkConfig.sh at all, but putting TCLTK_LIBS and TCLTK_CPPFLAGS
>> in the environment.
>>
>> I could try to use, in addition,  --with-tclconfig and  
>> --with-tkconfig,
>> but I
>> thought that would not be necessary if location of headers and libs  
>> are
>> defined explicitly.
>>
>> On Tuesday, February 25, 2003, at 12:06 AM, ripley@stats.ox.ac.uk  
>> wrote:
>>
>>> On Mon, 24 Feb 2003, Jan de Leeuw wrote:
>>>
>>>> The OS X configure in R-devel has been changed to use two-level
>>>> namespaces. There
>>>> are still some problems.
>>>>
>>>> 1. Trunmed.c in the modreg packages defines a function heapsort(),
>>>> while heapsort
>>>> is also defined (differently) in /usr/lib/stdlib.h. I (temporarily)
>>>> disabled the
>>>> definition in stdlib.h.
>>>
>>> That's a very recent addition, and we do try to keep an eye on such
>>> things. The R symbol has been changed now.
>>>
>>>> 2. If R is configured with the --without-x flag, then CPPFLAGS does
>>>> not
>>>> include
>>>> /usr/X11R6/include, while the tk.h files still tries to include
>>>> X11/xlib.h (and
>>>> can't find it, obviously). I added -I /usr/X11R6/include to the
>>>> compile
>>>> of tcltk.o
>>>
>>> This looks like a bug in your tkConfig.sh.  For example on Solaris it
>>> has
>>>
>>> # -I switch(es) to use to make all of the X11 include files  
>>> accessible:
>>> TK_XINCLUDES='-I/usr/openwin/include'
>>>
>>> and that is what R uses, specifically
>>>
>>>   if test -n "${TK_XINCLUDES}"; then
>>>     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${TK_XINCLUDES}"
>>>   else
>>>     TCLTK_CPPFLAGS="${TCLTK_CPPFLAGS} ${X_CFLAGS}"
>>>   fi
>>>
>>> Or is tkConfig.sh not being found and you need to point configure at
>>> it?
>>>
>>> --  
>>> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>
> --  
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From Kurt.Hornik@wu-wien.ac.at  Wed Feb 26 09:13:25 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed Feb 26 09:13:25 2003
Subject: [Rd] R-devel problems
In-Reply-To: <775C3E6A-486D-11D7-B2A3-000393860F3C@stat.ucla.edu>
References: <775C3E6A-486D-11D7-B2A3-000393860F3C@stat.ucla.edu>
Message-ID: <15964.29535.513039.276555@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> The OS X configure in R-devel has been changed to use two-level
> namespaces. There are still some problems.

> 3. Configure does not pass the $(Rexecbindir) to the Makefiles in the
> /src/library directory, so the links cannot find the bundle_loader. I
> added them by hand for all package links.

I thought I had already fixed this, but maybe I am missing something
obvious.  It seems to me that e.g. ctest/src/Makefile has

R_HOME = $(top_builddir)
...
include $(top_srcdir)/share/make/shlib.mk

where the latter has

include $(R_HOME)/etc/Makeconf

which in turn has

## As we currently use
##   -bundle -bundle_loader $(Rexecbindir)/R.bin -undefined error
## for the default SHLIB_LDFLAGS on Darwin >= 5 ...
rhome = @libdir@/R
Rexecbindir = $(rhome)/bin

(in the source).  But I now see that on my system this gives

rhome = ${exec_prefix}/lib/R

for reasons maybe known to Autoconf wizards but not to me: so I will add
substitutions for prefix and exec_prefix as well.  Pls let me know if
this helps.

> 5. In order to link the bundles with -bundle -bundle_loader
> /usr/local/lib/R/bin/R.bin the /usr/local/lib/R/bin/R.bin must exist,
> and moreover must be an R-devel build.  This is a little bootstrap
> problem which can be easily hacked.

As I already tried to explain, I think there is a more substantial
problem here.  We build in say, BUILDDIR and install to INSTALLDIR, say,
and there no reason to assume for something to work in BUILDDIR that
something else has happened in INSTALLDIR.  In fact, for typical users
we cannot even do something in the default INSTALLDIR as they will have
no write permissions in /usr/local.

The only thing guaranteed to work is to use a bundle loader path in
BUILDDIR when building, and change to one in INSTALLDIR when
installing.  I assume this amounts to re-linking and hence a terrible
mess unless we use GNU libtool to provide an abstraction, and I hope we
will have this for R 2.0, but certainly not for 1.7.  Or is there a way
to change the bundle loader?

Best
-k


From ripley@stats.ox.ac.uk  Wed Feb 26 13:13:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Feb 26 13:13:02 2003
Subject: [Rd] POSIX problem in New Zealand (PR#2570)
In-Reply-To: <Pine.A41.4.44.0302211929050.95120-100000@dante24.u.washington.edu>
Message-ID: <Pine.LNX.4.44.0302261209440.21601-100000@gannet.stats>

We can't reproduce the `bug' on an XP machine in the NZ timezone!
Indeed, there is no bug in the output you present, just different time 
zones.

I did find a bug in the code which gave me different answers from you, and 
fixed it in R-devel.  Please take a look at the current R-devel snapshot 
and see if it gives you what you want.

On Fri, 21 Feb 2003, Arni Magnusson wrote:

> 
> 
> On Fri, 21 Feb 2003 ripley@stats.ox.ac.uk wrote:
> 
> > What exactly is the problem?  Those appear to be the same time, in
> > different time zones.  Is the problem that you are in the N Hemisphere
> > (your email address is) trying to use S Hemisphere times on an OS that
> > does not support pre-1970 times?
> 
> Currently I'm in New Zealand working on a Windows XP machine that has
> never left the country. I have not encountered problems with as.POSIXct
> when working in other time zones.
> 
> 
> > You seem to be confusing the time and how it is printed.  What do you
> > want to do with these times?
> 
> I'm dealing with two kinds of problems: (1) what I see as a bug in
> as.POSIXct, and (2) my own confusion with time zones. One problem at a
> time:
> 
> 
> (1) as.POSIXct
> 
> I would like the following to return similar times, except for the year,
> but they don't:
>  > x <- as.POSIXct("1969-12-24")
>  > y <- as.POSIXct("1970-12-24")
>  > x
>  [1] "1969-12-23 23:00:00 New Zealand Standard Time"
>  > y
>  [1] "1970-12-24 New Zealand Standard Time"
>  > z <- seq(x, by="year", length=2)[2]
>  > difftime(y, z)
>  Time difference of 1 hours
> 
> >From reading 'library/base/html/DateTimeClasses.html' I understand that R
> queries Windows XP for the period 1970-2037 and uses its own C code
> outside this range. To me it looks like the bug might be in the C code. I
> think the problem goes deeper than print.POSIXct, because coercions are
> independent of the print method as far as I understand:
> 
>  > x <- as.POSIXlt("1969-12-24")
>  > y <- as.POSIXlt(as.POSIXct(x))
>  > x
>  [1] "1969-12-24"
>  > y
>  [1] "1969-12-23 23:00:00 New Zealand Standard Time"
>  > x==y
>  [1] FALSE
> 
> 
> (2) Time zone confusion
> 
> This is a question of taste and implementation, but I would like POSIXct
> objects in data frames and plots to display the times I entered
> originally, regardless of where in the world I'm working at the moment.
> 
> 
> (3) My solution
> 
> I've defined the environment variable tz=GMT in my R shortcut and I'll try
> to remember doing so on other machines I work on. This way I avoid both
> the as.POSIXct/New Zealand bug and the time zone confusion. I still think
> the Kiwis would appreciate the bug being fixed :)
> 
> 
> 
> 
> > On Fri, 21 Feb 2003 arnima@u.washington.edu wrote:
> >
> > > Full_Name: Arni Magnusson
> > > Version: 1.6.2
> > > OS: Windows XP
> > > Submission from: (NULL) (210.48.49.68)
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From deleeuw@stat.ucla.edu  Wed Feb 26 18:22:03 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed Feb 26 18:22:03 2003
Subject: [Rd] R-devel problems
In-Reply-To: <15964.29535.513039.276555@mithrandir.hornik.net>
Message-ID: <C332B798-49AE-11D7-9DCB-000393BB6D36@stat.ucla.edu>

Number 3 below is fixed. Number 5 is a bootstrap problem, which
could be solved perhaps with

make bin; make install bin; make install modules packages

or by doing a real two stage build. But I agree that is a major
change in the build process.

This can also be hacked by doing a make install, wait until it breaks,
then do another make install. I am not suggesting this as an actual
solution.

It's not a problem if you have a version of R installed, at least not
if that R.bin has all the required symbols (but I think the R.bin from
1.6.2 misses one symbol needed by the 1.7.0 version of ctest,
for example). Again this does not provide a solution.

I'll see if the bundle_loader solution can be changed in any
way (for instance by using weak binding, so that the symbol
does not have to be there at link time, only at run time).



On Tuesday, Feb 25, 2003, at 23:57 US/Pacific, Kurt Hornik wrote:

>>>>>> Jan de Leeuw writes:
>
>> The OS X configure in R-devel has been changed to use two-level
>> namespaces. There are still some problems.
>
>> 3. Configure does not pass the $(Rexecbindir) to the Makefiles in the
>> /src/library directory, so the links cannot find the bundle_loader. I
>> added them by hand for all package links.
>
> I thought I had already fixed this, but maybe I am missing something
> obvious.  It seems to me that e.g. ctest/src/Makefile has
>
> R_HOME = $(top_builddir)
> ...
> include $(top_srcdir)/share/make/shlib.mk
>
> where the latter has
>
> include $(R_HOME)/etc/Makeconf
>
> which in turn has
>
> ## As we currently use
> ##   -bundle -bundle_loader $(Rexecbindir)/R.bin -undefined error
> ## for the default SHLIB_LDFLAGS on Darwin >= 5 ...
> rhome = @libdir@/R
> Rexecbindir = $(rhome)/bin
>
> (in the source).  But I now see that on my system this gives
>
> rhome = ${exec_prefix}/lib/R
>
> for reasons maybe known to Autoconf wizards but not to me: so I will  
> add
> substitutions for prefix and exec_prefix as well.  Pls let me know if
> this helps.
>
>> 5. In order to link the bundles with -bundle -bundle_loader
>> /usr/local/lib/R/bin/R.bin the /usr/local/lib/R/bin/R.bin must exist,
>> and moreover must be an R-devel build.  This is a little bootstrap
>> problem which can be easily hacked.
>
> As I already tried to explain, I think there is a more substantial
> problem here.  We build in say, BUILDDIR and install to INSTALLDIR,  
> say,
> and there no reason to assume for something to work in BUILDDIR that
> something else has happened in INSTALLDIR.  In fact, for typical users
> we cannot even do something in the default INSTALLDIR as they will have
> no write permissions in /usr/local.
>
> The only thing guaranteed to work is to use a bundle loader path in
> BUILDDIR when building, and change to one in INSTALLDIR when
> installing.  I assume this amounts to re-linking and hence a terrible
> mess unless we use GNU libtool to provide an abstraction, and I hope we
> will have this for R 2.0, but certainly not for 1.7.  Or is there a way
> to change the bundle loader?
>
> Best
> -k
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From ihaka@stat.auckland.ac.nz  Wed Feb 26 19:15:03 2003
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed Feb 26 19:15:03 2003
Subject: [Rd] class(x) <- error
References: <3E5C3DEB.802D2AFB@bank-banque-canada.ca>
Message-ID: <3E5D0404.6000502@stat.auckland.ac.nz>

Paul Gilbert wrote:
> I think this is an error in r-devel:
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.7.0 Under development (unstable) (2003-02-25)
> ...
>  > x <- matrix(1:9,3,3)
>  > class(x)<-c("a", "matrix")
>  > class(x)
> [1] "a"      "matrix"
>  > class(x)<-class(x)[-1]
>  > class(x)
> [1] "a"      "matrix"  # should be "matrix"
>  > class(x)<-"matrix"
>  > class(x)
> [1] "a"      "matrix"  # should be "matrix"

As of this minute I am seeing the correct behaviour under RedHat 7.3 Linux.

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-02-26)
...
 > x <- matrix(1:9,3,3)
 > class(x)<-c("a", "matrix")
 > class(x)
[1] "a"      "matrix"
 > class(x)<-class(x)[-1]
 > class(x)
[1] "matrix"
 > class(x)<-"matrix"
 > class(x)
[1] "matrix"

Have you redefined class<- somehow?


-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 85054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand


From jmc@research.bell-labs.com  Wed Feb 26 20:10:03 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed Feb 26 20:10:03 2003
Subject: [Rd] class(x) <- error
References: <3E5C3DEB.802D2AFB@bank-banque-canada.ca> <3E5D0404.6000502@stat.auckland.ac.nz>
Message-ID: <3E5D10E5.4EC38AB7@research.bell-labs.com>

The original report was correct.

I fixed the problem & had sent a message to r-devel to that effect, but
we may have been having delays or other problems with our mailer.

Thanks again for the report, Paul.

John Chambers


Ross Ihaka wrote:
> 
> Paul Gilbert wrote:
> > I think this is an error in r-devel:
> >
> > R : Copyright 2003, The R Development Core Team
> > Version 1.7.0 Under development (unstable) (2003-02-25)
> > ...
> >  > x <- matrix(1:9,3,3)
> >  > class(x)<-c("a", "matrix")
> >  > class(x)
> > [1] "a"      "matrix"
> >  > class(x)<-class(x)[-1]
> >  > class(x)
> > [1] "a"      "matrix"  # should be "matrix"
> >  > class(x)<-"matrix"
> >  > class(x)
> > [1] "a"      "matrix"  # should be "matrix"
> 
> As of this minute I am seeing the correct behaviour under RedHat 7.3 Linux.
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.7.0 Under development (unstable) (2003-02-26)
> ...
>  > x <- matrix(1:9,3,3)
>  > class(x)<-c("a", "matrix")
>  > class(x)
> [1] "a"      "matrix"
>  > class(x)<-class(x)[-1]
>  > class(x)
> [1] "matrix"
>  > class(x)<-"matrix"
>  > class(x)
> [1] "matrix"
> 
> Have you redefined class<- somehow?
> 
> --
> Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
> Department of Statistics           Phone:  (64-9) 373-7599 x 85054
> University of Auckland             Fax:    (64-9) 373-7018
> Private Bag 92019, Auckland
> New Zealand
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From volker.franz@tuebingen.mpg.de  Wed Feb 26 21:40:03 2003
From: volker.franz@tuebingen.mpg.de (volker.franz@tuebingen.mpg.de)
Date: Wed Feb 26 21:40:03 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off by factor sqrt(2)??? (PR#2584)
Message-ID: <200302262040.h1QKe035015790@pubhealth.ku.dk>

Full_Name: Volker Franz
Version: Version 1.6.2  (2003-01-10)
OS: Debian
Submission from: (NULL) (192.124.28.104)


Hi there, 

it seems to me that data.ellipse of package "car" (Version 1.0-1)
produces confidence interval's which are too big. To see this, do:

library(car)
plot(c(-2,2),c(-2,2),pch=0)
data.ellipse(rnorm(10000),rnorm(10000),levels=0.68,plot.points=F)
abline(v=+1)
abline(v=-1)
abline(h=+1)
abline(h=-1)

To my knowledge, this should result in a circle with radius
1. However, the circle is larger. It seems that the problem is due to
an erroneous specification of the degrees of freedom and can be fixed
with the following patch:

======================================================================
--- Ellipse.R	Wed Feb 26 17:49:43 2003
+++ Ellipse.orig	Thu Sep 19 18:20:41 2002
@@ -34,7 +34,7 @@
         stop("x and y must be vectors of the same length")
     if (plot.points & !add) plot(x, y, xlab=xlab, ylab=ylab, col=col, pch=pch,
las=las, ...)
     if (plot.points & add) points(x, y, col=col, pch=pch, ...)
-    dfn<-1
+    dfn<-2
     dfd<-length(x)-1
     if (robust) {
         require(MASS)
======================================================================

Or --- am I totally on the wrong track here?

Best 
Volker


From jfox@mcmaster.ca  Wed Feb 26 22:31:03 2003
From: jfox@mcmaster.ca (John Fox)
Date: Wed Feb 26 22:31:03 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off
 by factor sqrt(2)??? (PR#2584)
In-Reply-To: <200302262040.h1QKe035015790@pubhealth.ku.dk>
Message-ID: <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>

Dear Volker,

If the data ellipse (or, in this case, circle) is scaled so that its 
shadows (projections) on the axes each includes 68% of the data (that is of 
the marginal distribution of each variable), then the ellipse will include 
less than 68% of the data (i.e., of the joint distribution of the two 
variables). Conversely, to include 68% of the data in the ellipse, the 
shadows of the ellipse have to be larger.

Did I understand your point correctly?

John

At 09:40 PM 2/26/2003 +0100, volker.franz@tuebingen.mpg.de wrote:
>Full_Name: Volker Franz
>Version: Version 1.6.2  (2003-01-10)
>OS: Debian
>Submission from: (NULL) (192.124.28.104)
>
>
>Hi there,
>
>it seems to me that data.ellipse of package "car" (Version 1.0-1)
>produces confidence interval's which are too big. To see this, do:
>
>library(car)
>plot(c(-2,2),c(-2,2),pch=0)
>data.ellipse(rnorm(10000),rnorm(10000),levels=0.68,plot.points=F)
>abline(v=+1)
>abline(v=-1)
>abline(h=+1)
>abline(h=-1)
>
>To my knowledge, this should result in a circle with radius
>1. However, the circle is larger. It seems that the problem is due to
>an erroneous specification of the degrees of freedom and can be fixed
>with the following patch:
>
>======================================================================
>--- Ellipse.R   Wed Feb 26 17:49:43 2003
>+++ Ellipse.orig        Thu Sep 19 18:20:41 2002
>@@ -34,7 +34,7 @@
>          stop("x and y must be vectors of the same length")
>      if (plot.points & !add) plot(x, y, xlab=xlab, ylab=ylab, col=col, 
> pch=pch,
>las=las, ...)
>      if (plot.points & add) points(x, y, col=col, pch=pch, ...)
>-    dfn<-1
>+    dfn<-2
>      dfd<-length(x)-1
>      if (robust) {
>          require(MASS)
>======================================================================
>
>Or --- am I totally on the wrong track here?
>
>Best
>Volker
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>http://www.stat.math.ethz.ch/mailman/listinfo/r-devel

____________________________
John Fox
Department of Sociology
McMaster University
email: jfox@mcmaster.ca
web: http://www.socsci.mcmaster.ca/jfox


From volker.franz@tuebingen.mpg.de  Wed Feb 26 23:21:02 2003
From: volker.franz@tuebingen.mpg.de (Volker Franz)
Date: Wed Feb 26 23:21:02 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off
 by factor sqrt(2)??? (PR#2584)
In-Reply-To: <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>
References: <200302262040.h1QKe035015790@pubhealth.ku.dk>
 <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>
Message-ID: <15965.15945.810133.10708@gargle.gargle.HOWL>

Hi John, 

>>>>> "JF" == John Fox <jfox@mcmaster.ca> writes:
    JF> Dear Volker, If the data ellipse (or, in this case, circle) is
    JF> scaled so that its shadows (projections) on the axes each
    JF> includes 68% of the data (that is of the marginal distribution
    JF> of each variable), then the ellipse will include less than 68%
    JF> of the data (i.e., of the joint distribution of the two
    JF> variables). Conversely, to include 68% of the data in the
    JF> ellipse, the shadows of the ellipse have to be larger.
    JF> Did I understand your point correctly?

I am not sure. I will try to rephrase my initial request:

Let X by a one--dimensional random variable (standard normal
distribution; mean=0; std=1). The 68% confidence intervall of X will
approximately be: [-1,1]. Now, if I combine X with a stochastically
independent second random variable Y, the marginal distribution of X
should not change. Therefore, the projections of the error ellipse on
the X--axis should still be: [-1,1].

If I do this with the function data.ellipse: 

   data.ellipse(rnorm(10000),rnorm(10000),levels=0.68,plot.points=F)

I get a projection on the X-axis which is larger than [-1,1]. In fact,
it is a little bit larger than [-sqrt(2),+sqrt(2)].

My interpretation is that this is due to the construction of the
radius in data.ellipse:

   dfn<-2
   radius <- sqrt ( dfn * qf(level, dfn, dfd ))

I would expect a dfn<-1 here (such that the radius would correspond to
the t-distribution). 

Does this make sense?

Volker

-- 
___________________________________________________________

    Dr. Volker Franz
    Max-Planck-Institute for Biological Cybernetics
    Tuebingen, Germany


From deepayan@stat.wisc.edu  Wed Feb 26 23:41:02 2003
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Wed Feb 26 23:41:02 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off  by factor sqrt(2)??? (PR#2584)
In-Reply-To: <15965.15945.810133.10708@gargle.gargle.HOWL>
References: <200302262040.h1QKe035015790@pubhealth.ku.dk> <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca> <15965.15945.810133.10708@gargle.gargle.HOWL>
Message-ID: <200302261640.05449.deepayan@stat.wisc.edu>

On Wednesday 26 February 2003 04:23 pm, Volker Franz wrote:
> Hi John,
>
> >>>>> "JF" == John Fox <jfox@mcmaster.ca> writes:
>
>     JF> Dear Volker, If the data ellipse (or, in this case, circle) is
>     JF> scaled so that its shadows (projections) on the axes each
>     JF> includes 68% of the data (that is of the marginal distribution
>     JF> of each variable), then the ellipse will include less than 68%
>     JF> of the data (i.e., of the joint distribution of the two
>     JF> variables). Conversely, to include 68% of the data in the
>     JF> ellipse, the shadows of the ellipse have to be larger.
>     JF> Did I understand your point correctly?
>
> I am not sure. I will try to rephrase my initial request:
>
> Let X by a one--dimensional random variable (standard normal
> distribution; mean=0; std=1). The 68% confidence intervall of X will
> approximately be: [-1,1]. Now, if I combine X with a stochastically
> independent second random variable Y, the marginal distribution of X
> should not change. Therefore, the projections of the error ellipse on
> the X--axis should still be: [-1,1].


Why so ? Let Y be an independent copy of X (i.e., Y ~ N(0,1) too, independent 
of X). Then P(Y is in [-Inf , Inf]) = 1. Now, think of the 2-D confidence 
region [-1, 1] x [-Inf, Inf]. This will have (by independence of X and Y) 
probability 0.68.

Now, how can you expect an ellipse that will have the same X-range, that is a 
strict subset of this region, to still have joint probability 0.68 ?

Hope that helps,

Deepayan


From jfox@mcmaster.ca  Wed Feb 26 23:48:02 2003
From: jfox@mcmaster.ca (John Fox)
Date: Wed Feb 26 23:48:02 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off
 by factor sqrt(2)??? (PR#2584)
In-Reply-To: <15965.15945.810133.10708@gargle.gargle.HOWL>
References: <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>
 <200302262040.h1QKe035015790@pubhealth.ku.dk>
 <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>
Message-ID: <5.0.2.1.0.20030226173119.00b0f9d8@mcmail.cis.mcmaster.ca>

Dear Volker,

At 11:23 PM 2/26/2003 +0100, Volker Franz wrote:
>Hi John,
>
> >>>>> "JF" == John Fox <jfox@mcmaster.ca> writes:
>     JF> Dear Volker, If the data ellipse (or, in this case, circle) is
>     JF> scaled so that its shadows (projections) on the axes each
>     JF> includes 68% of the data (that is of the marginal distribution
>     JF> of each variable), then the ellipse will include less than 68%
>     JF> of the data (i.e., of the joint distribution of the two
>     JF> variables). Conversely, to include 68% of the data in the
>     JF> ellipse, the shadows of the ellipse have to be larger.
>     JF> Did I understand your point correctly?
>
>I am not sure. I will try to rephrase my initial request:
>
>Let X by a one--dimensional random variable (standard normal
>distribution; mean=0; std=1). The 68% confidence intervall of X will
>approximately be: [-1,1]. Now, if I combine X with a stochastically
>independent second random variable Y, the marginal distribution of X
>should not change. Therefore, the projections of the error ellipse on
>the X--axis should still be: [-1,1].
>
>If I do this with the function data.ellipse:
>
>    data.ellipse(rnorm(10000),rnorm(10000),levels=0.68,plot.points=F)
>
>I get a projection on the X-axis which is larger than [-1,1]. In fact,
>it is a little bit larger than [-sqrt(2),+sqrt(2)].
>
>My interpretation is that this is due to the construction of the
>radius in data.ellipse:
>
>    dfn<-2
>    radius <- sqrt ( dfn * qf(level, dfn, dfd ))
>
>I would expect a dfn<-1 here (such that the radius would correspond to
>the t-distribution).
>
>Does this make sense?

This is a data ellipse, not a confidence ellipse, but the same point arises 
in both cases: For the ellipse to enclose 68 percent of the joint 
distribution of the two variables, its projections on the axes must include 
more than 68% of each marginal distribution. Just think about projecting 
the individual points onto the axes -- there are points outside of the 
ellipse that are inside its shadow on an individual axis.

I hope that this helps,
  John

____________________________
John Fox
Department of Sociology
McMaster University
email: jfox@mcmaster.ca
web: http://www.socsci.mcmaster.ca/jfox


From volker.franz@tuebingen.mpg.de  Thu Feb 27 00:09:06 2003
From: volker.franz@tuebingen.mpg.de (Volker Franz)
Date: Thu Feb 27 00:09:06 2003
Subject: [Rd] [Package car/data.ellipse]: confidence intervals off  by factor sqrt(2)??? (PR#2584)
In-Reply-To: <200302261640.05449.deepayan@stat.wisc.edu>
References: <200302262040.h1QKe035015790@pubhealth.ku.dk>
 <5.0.2.1.0.20030226160733.00afa648@mcmail.cis.mcmaster.ca>
 <15965.15945.810133.10708@gargle.gargle.HOWL>
 <200302261640.05449.deepayan@stat.wisc.edu>
Message-ID: <15965.18811.296566.592023@gargle.gargle.HOWL>

Hi John and Deepayan, 

ok, I got your points and agree. You are right --- and I am sorry for
being too fast in sending this report.

Thank you for the help!!!
Volker
--


From dsmith@santafe.edu  Thu Feb 27 02:39:02 2003
From: dsmith@santafe.edu (dsmith@santafe.edu)
Date: Thu Feb 27 02:39:02 2003
Subject: [Rd] Alias does not label rows and columns correctly. (PR#2586)
Message-ID: <200302270138.h1R1cf35016559@pubhealth.ku.dk>

Alias does not label rows and columns correctly.  Instead of labeling the 
rows with the removed predictors, and the cols with the included predictors;
instead, it labels the columns with the first r predictors (where r is the
rank of the matrix) and the rows with the remaining predictors.

Here's an example:

                      > Y<-c(0,1,2)
                      > X1<-c(0,1,0)
                      > X2<-c(0,1,0)
                      > X3<-c(0,0,1)
                      
                      > alias(lm(Y ~ X1 + X2 + X3))
                      Model :
                      Y ~ X1 + X2 + X3
                      
                      Complete :
                         (Intercept) X1 X2
                      X3              1   


X1 and X2 are colliner, but alias reports X1 is collinear with X3.



The error is only in the assignment of names, the matrix alias prints
is correct.  Here's a fix (there may well be a better one, I'm new to R)

in function alias.lm, replace the line:

                # dimnames(beta12) <- list(dn[p1], dn[ -p1])                       

with:
                c<-object$coefficients                                             
                dimnames(beta12) <- list(names(c[!is.na(c)]), names(c[is.na(c)]))  



Derek


From deleeuw@stat.ucla.edu  Thu Feb 27 03:20:41 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu Feb 27 03:20:41 2003
Subject: [Rd] nice combo on os x
Message-ID: <EE913B7F-49F9-11D7-9DCB-000393BB6D36@stat.ucla.edu>

You need

(a) a recent OS X framework build of python, which also installs IDLE
(b) a recent OS X framework build  of AquaTk (i.e. native Tcl/Tk)
(c) a version of R compiled with AquaTk and without X11
(d) a recent version of Rpy

Now you can open IDLE and say

 >> from rpy import *
 >> r.quartz()
 >> r.library("tcltk")
 >> r.demo("tkdensity")

This all works. You get the Aqua Tk widgets and the plotting in the
quartz device. Windows can be brought to the foreground, minimized to  
the
dock, and widgets can be operated with the mouse. No X11 is required
at all.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From deleeuw@stat.ucla.edu  Thu Feb 27 03:39:02 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu Feb 27 03:39:02 2003
Subject: [Rd] bundle-loader
Message-ID: <78B06F60-49FC-11D7-9DCB-000393BB6D36@stat.ucla.edu>

I removed "-bundle_loader $(Rexecbin)/R.bin" from the configure files
but left "-undefined error". Now

1. Everything builds fine, i.e. the packages get their symbols from  
libR.dylib
just fine. This is libR.dylib in the build directory, but I think dyld  
is smart
enough to find it in the install directory as well if you were to  
remove the build
directory.

2 The methods package builds, but refuses to dump. Adding the  
bundle_loader
flag there again (manually) fixes that. Of course methods is different  
from the
others because it actually uses R.bin to dump, I guess.

3. aqua.so still gets "-bundle -undefined error" from the new shlib ld  
flag
(with bundle_loader eliminated) but also "-flat-namespace -undefined  
suppress"
from somewhere else. That's too much.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From Mark.Bravington@csiro.au  Thu Feb 27 04:11:03 2003
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu Feb 27 04:11:03 2003
Subject: [Rd] unwanted coercion of length 0 vectors (PR#2587)
Message-ID: <200302270311.h1R3B735016763@pubhealth.ku.dk>

When something is assigned to an element of a vector that was previously of
length 0, the vector is coerced to the mode of the something, regardless of
whether the coercion is necessary under normal R rules.

In particular, if NA is assigned to an element of a vector that was
previously length 0, the mode of the vector is coerced to 'logical'.

For example, here's the normal behaviour:

test> x1_ 5
test> x1[1]_ NA
test> x1
[1] NA
test> mode( x1)
[1] "numeric"

No coercion was required because 'logical' (the default mode of NA) is
"ancestral" to 'numeric'. Note also that assigning to a hitherto
non-existent element of x1, e.g. x1[2]_ NA, also does not coerce.

But:

test> x0_ numeric( 0)
test> x0[1]_ NA
test> mode( x0)
[1] "logical"

Similar things happen with vectors of mode 'complex' and even 'character':

test> xc0_ complex( 0)
test> xc0[1]_ 3
test> mode( xc0)
[1] "numeric" # should be 'complex'

test> xch0_ character(0)
test> xch0[ 1]_ 3
test> mode( xch0)
[1] "numeric"

Intriguingly, something strange happens even with lists:

test> xl1_ list( 1)
test> xl1[1]_ 3
test> xl1
[[1]]
[1] 3
test> xl0_ list()
test> xl0[1]_ 3
Error: (list) object cannot be coerced to vector type 14

cheers
Mark

mark.bravington@csiro.au

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 6.2
 year = 2003
 month = 01
 day = 10
 language = R

Windows 2000 Professional (build 2195) Service Pack 2.0

Search Path:
 .GlobalEnv, ROOT, package:handy, package:debug, mvb.session.info,
package:mvbutils, package:tcltk, Autoloads, package:base


From deleeuw@stat.ucla.edu  Thu Feb 27 05:32:02 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu Feb 27 05:32:02 2003
Subject: [Rd] R-devel/R-patched crossed with Xterm/IDLE
Message-ID: <588A4B63-4A0C-11D7-9DCB-000393BB6D36@stat.ucla.edu>

Two versions of R
	1. R-patched (compiled with X11 support, and tcl/tk for X11)
	2. R-devel (compiled with native tcl/tk support, without-x)
	
UI's
	1. Terminal.app (or an Xterm) with an X server running.
	2. IDLE (i.e. native Python GUI with native tkinter) with Rpy loaded.  
No X server.
	
Packages with "problems"
	1. tcltk
	2. methods
	
The "normal" combination is to use Terminal.app with R-patched. This  
uses
X11.  All tcltk demos work. The methods package
works. We cannot use Terminal.app with the quartz device or with
native tcltk, because the windows do not accept events (cannot be
brought to the front). I know why this does not work (Terminal.app
is the frontmost application and it does not know anything about those
windows).

IDLE/Rpy with R-devel can do some of the tcltk demos (tkcanvas,  
tkdensity, tkfaq)
but not all (tkttest,tkfindfile). And, surprisingly enough, IDLE/Rpy  
with
R-patched can do the same demos (and fails on the same demos), although
its tcltk is compiled using fink's X11 based tk. No X server is running  
in these cases.
I have no idea why some demos work and others don't. It's interesting  
that
IDLE/Rpy uses the native AquaTk provided by tkinter, and does not ask  
for
X11. In IDLE/Rpy both the quartz device window and the tk windows  
respond to
mouse and keyboard events.

IDLE/Rpy with R-patched loads the method package, but IDLE/Rpy with  
R-devel
does not. It complains about missing symbols, notably ATTRIB, in  
methods.so,
which the executable (bundle_loader) also cannot find. In R-devel  
everything
is compiled with two-level namespaces, and only the methods package uses
R.bin as bundle_loader (otherwise it does not dump). In R-patched all  
bundles
use flat namespaces.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From jerome@hivnet.ubc.ca  Thu Feb 27 20:04:56 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Thu Feb 27 20:04:56 2003
Subject: [Rd] "trace" argument in legend() (PR#2578)
Message-ID: <200302271856.h1RIuV35026608@pubhealth.ku.dk>

Oops. I forgot this one. We should also replace "...)" by ", ...)" in this 
part of the code.

[...]
        if (trace)
            catn("  points2(", x1, ",", y1, ", pch=", pch[ok],
                "...)")
[...]

Jerome

On Tuesday 25 February 2003 01:20, Martin Maechler wrote:
> >>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
> >>>>>     on Mon, 24 Feb 2003 18:53:30 +0100 (MET) writes:
>
> 	  ....
>
>     Jerome> Should be an easy fix...
>
>     Jerome> Consider the examble below:
>
>     Jerome> plot(0,0)
>     Jerome> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
>
>     Jerome> It gives the following trace:
>     >> plot(0,0)
>     >> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
>     >>
>       > xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
>       > rect2(0,0, w=0.3474, h=0.2382...)
>       > segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
>       > points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)
>
>     Jerome> On the line starting by "segment2", the coordinates
>     Jerome> are not separated by a space like on the line
>     Jerome> starting by "points2".
>
>     Jerome> My recommendation is to remove the option `sep = ""'
>     Jerome> in this part of code in legend().
>
>     Jerome> [...]
>     Jerome> if (trace)
>     Jerome> catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
>     Jerome> yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
>     Jerome> sep = "")
>     Jerome> [...]
>
> Thank you, Jerome.
> Yes, it's a buglet and your suggestion is fine.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><

-- 

Jerome Asselin (Jrme)
Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital
608 - 1081 Burrard Street
Vancouver, British Columbia
CANADA V6Z 1Y6

Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044


From oehl_list@gmx.de  Fri Feb 28 13:41:03 2003
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Fri Feb 28 13:41:03 2003
Subject: [Rd] seq() documentation bug (PR#2590)
Message-ID: <200302281241.h1SCf335003717@pubhealth.ku.dk>


The documentation of seq() states that any one-parameter call to
seq(one.parameter) is interpreted as an along= parameter. Hoewever, if one.parameter is
a vector of length 1, one.parameter is obviously interpreted as a length=
argument, see example below. This behaviour probably cannot be changed and is
the same with the prototype, however, the exception should be documented at
least.

\note{ Attention: if seq is called with one unnamed parameter like in
\code{seq(a)} AND the parameter is a vector of length 1, this parameter will NOT be
interpreted as an along= argument but as an length= argument. Try \code{for
(len in 0:10)print(seq(seq(20, length=len)))} to see this exception and
\code{for (len in 0:10)print(seq(along=seq(20, length=len)))} to avoid the
exception. As a consequence, programmers are encouraged to always name a single
parameter as in \code{seq(along=a)} }


Best


Jens Oehlschlgel


>  for (len in 0:10)print(seq(seq(20, length=len)))
numeric(0)
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
[1] 1 2
[1] 1 2 3
[1] 1 2 3 4
[1] 1 2 3 4 5
[1] 1 2 3 4 5 6
[1] 1 2 3 4 5 6 7
[1] 1 2 3 4 5 6 7 8
[1] 1 2 3 4 5 6 7 8 9
 [1]  1  2  3  4  5  6  7  8  9 10
>  for (len in 0:10)print(seq(along=seq(20, length=len)))
numeric(0)
[1] 1
[1] 1 2
[1] 1 2 3
[1] 1 2 3 4
[1] 1 2 3 4 5
[1] 1 2 3 4 5 6
[1] 1 2 3 4 5 6 7
[1] 1 2 3 4 5 6 7 8
[1] 1 2 3 4 5 6 7 8 9
 [1]  1  2  3  4  5  6  7  8  9 10


> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R



-- 

Bitte lcheln! Fotogalerie online mit GMX ohne eigene Homepage!


From p.dalgaard@biostat.ku.dk  Fri Feb 28 16:03:33 2003
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri Feb 28 16:03:33 2003
Subject: [Rd] unique turns ordered into factor (PR#2591)
Message-ID: <200302281458.h1SEw235005697@pubhealth.ku.dk>

[reported originally by Christoffer Torne]

> f <- ordered(month.name)
> f
 [1] January   February  March     April     May       June      July
 [8] August    September October   November  December
12 Levels: April < August < December < February < January < July < ... < September
> unique(f)
 [1] January   February  March     April     May       June      July
 [8] August    September October   November  December
12 Levels: April August December February January July June March ... September

this causes trouble in the internals of panel.superpose if the groups
argument is an ordered factor. In that case

           id <- (groups[subscripts] == vals[i])

gives off the warning

Incompatible methods ("Ops.ordered", "Ops.factor") for "=="

S-PLUS (6.0 at least) does not do this, so I assume the fix is to
modify unique.default in the obvious way.

[Still present in the development sources]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From maechler@stat.math.ethz.ch  Fri Feb 28 16:14:02 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Feb 28 16:14:02 2003
Subject: [Rd] unique turns ordered into factor (PR#2591)
Message-ID: <200302281514.h1SFES35005901@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk>
>>>>>     on Fri, 28 Feb 2003 15:58:02 +0100 (MET) writes:

    PD> [reported originally by Christoffer Torne]
    >> f <- ordered(month.name)
    >> f
    PD> [1] January   February  March     April     May       June      July
    PD> [8] August    September October   November  December
    PD> 12 Levels: April < August < December < February < January < July < ... < September

    >> unique(f)
    PD> [1] January   February  March     April     May       June      July
    PD> [8] August    September October   November  December
    PD> 12 Levels: April August December February January July June March ... September

    PD> this causes trouble in the internals of panel.superpose if the groups
    PD> argument is an ordered factor. In that case

    PD> id <- (groups[subscripts] == vals[i])

    PD> gives off the warning

    PD> Incompatible methods ("Ops.ordered", "Ops.factor") for "=="

    PD> S-PLUS (6.0 at least) does not do this, so I assume the fix is to
    PD> modify unique.default in the obvious way.

I think it's a clear bug (independently of other implementations ..)
Maybe it would be a bit cleaner to write an unique.factor().
The current unique.default() stems from the pre-method time,
i.e., when it was just unique().

    PD> [Still present in the development sources]

Martin


