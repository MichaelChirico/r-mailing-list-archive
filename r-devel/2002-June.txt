From felix@sprintlabs.com  Sun Jun  2 01:45:24 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:24 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1623)
Message-ID: <200206020045.CAA02832@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From felix@sprintlabs.com  Sun Jun  2 01:45:55 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:55 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020045.CAA02841@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  2 06:38:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 2 Jun 2002 07:38:13 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020538.HAA03183@pubhealth.ku.dk>

This runs correctly for me on `Solaris', using Solaris' f77.  I presume
you don't have a Fortran compiler installed on either system as you are
using the script bin/f77?  If so how did you compile cluster before?

We need a lot more information, including which compilers you have and
which configure selected.  Did you perchance set environment variables
such as FC or F77?

If you do have /usr/bin/f77 as a real Fortran compiler, tell configure so
(or edit etc/Makeconf).

On Sun, 2 Jun 2002 felix@sprintlabs.com wrote:

> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
>
>
> [R-1.5.0]
>
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>
>
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>
> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following
> line in ~R/bin/f77
>
> : ${F77='f77'}
>
> by
>
> : ${F77='/usr/bin/f77'}
>
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Jun  2 14:22:24 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 2 Jun 2002 09:22:24 -0400
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <200206020045.CAA02841@pubhealth.ku.dk>; from felix@sprintlabs.com on Sun, Jun 02, 2002 at 02:45:55AM +0200
References: <200206020045.CAA02841@pubhealth.ku.dk>
Message-ID: <20020602092224.P51@jimmy.harvard.edu>

On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
> 
> 
> [R-1.5.0]
> 
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
> 
> 
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
> 
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
> 

 I can confirm this on my FreeBSD (4.5).
 I believe that there have been a number of changes to configure for
 the 1.5 release.
 I can also confirm that the fix also seems to work.

  Thanks,

    Robert


> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following 
> line in ~R/bin/f77
> 
> : ${F77='f77'}
> 
> by
> 
> : ${F77='/usr/bin/f77'}
> 
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Jun  2 14:36:31 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 2 Jun 2002 15:36:31 +0200
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <20020602092224.P51@jimmy.harvard.edu>
References: <200206020045.CAA02841@pubhealth.ku.dk>
 <20020602092224.P51@jimmy.harvard.edu>
Message-ID: <15610.8031.910764.754414@mithrandir.hornik.net>

>>>>> Robert Gentleman writes:

> On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
>> Full_Name: Felix Hernandez-Campos
>> Version: R-1.5.0
>> OS: IRIX, FreeBSD, Solaris
>> Submission from: (NULL) (208.30.174.32)
>> 
>> 
>> [R-1.5.0]
>> 
>> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
>> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>> 
>> 
>> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>> 
>> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>> 

>  I can confirm this on my FreeBSD (4.5).
>  I believe that there have been a number of changes to configure for
>  the 1.5 release.

Yes and they are documented in the release notes.

>  I can also confirm that the fix also seems to work.

I assume the problem only occurs because R_HOME/bin is in PATH?

-k

>   Thanks,

>     Robert


>> but after a minute or two, it returns an error about an "arg list too long".
>> The
>> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
>> shows
>> that this script is calling itself endlessly (rather than invoking the f77
>> compiler).
>> I have been able to solve the problem in both platforms by changing the
>> following 
>> line in ~R/bin/f77
>> 
>> : ${F77='f77'}
>> 
>> by
>> 
>> : ${F77='/usr/bin/f77'}
>> 
>> P.S. I was always able to install the package cluster without this modification
>> in
>> R-1.4 and R-1.3.
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ca  Tue Jun  4 00:19:14 2002
From: aa056@chebucto.ca (aa056@chebucto.ca)
Date: Tue, 4 Jun 2002 01:19:14 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1630)
Message-ID: <200206032319.BAA10429@pubhealth.ku.dk>

Using the same settings in config.site as were used for R-1.4.1,
R-1.5.0 fails to build.

./configure --enable-R-shlib

Using defaults and using PPro optimizations, the build failed in
package methods:

dumping R code in package 'methods'
gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'

The command that fails is:

    ../../../bin/R --vanilla --verbose < all.R

The same failure occurs using defaults for CFLAGS, etc.

Install patches:

  zcat R-release.diff.gz | patch -p1


R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
 -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
 -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
 -mpreferred-stack-boundary=2
  C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
 -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
 -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
-mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
-malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes

The same error occurs using the patched version.

$ gdb ../../../bin/R.bin core
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i586-mandrake-linux"...
Core was generated by `/mnt/Data/src/install/R-1.5.0/bin/R.bin --vanilla --slave'.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x40015238
#0  0x403cb10d in ?? ()Cannot access memory at address 0x40015238
(gdb)


> ### The following code is only executed when dumping
> assign(".saveImage", FALSE, .GlobalEnv)
> .First.lib("methods", "methods", .GlobalEnv)

$ ../../../bin/R --debugger=gdb

(gdb) run --vanilla < all.R
[...]

Program received signal SIGSEGV, Segmentation fault.
0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
(gdb) where
#0  0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
#1  0x404f5a85 in R_initMethodDispatch ()
   from /mnt/Data/src/install/R-1.5.0/library/methods/libs/methods.so
#2  0x807c6a2 in do_dotCode () at eval.c:88
#3  0x808b032 in Rf_eval () at eval.c:88
#4  0x808beae in do_begin () at eval.c:88
#5  0x808aeaf in Rf_eval () at eval.c:88
#6  0x808b3f0 in Rf_applyClosure () at eval.c:88
#7  0x808b0aa in Rf_eval () at eval.c:88
#8  0x80a0d8d in R_ReplConsole () at eval.c:88
#9  0x80a140a in run_Rmainloop () at eval.c:88
#10 0x80a1421 in Rf_mainloop () at eval.c:88
#11 0x80f5f6d in main () at eval.c:88
#12 0x400f38a6 in __libc_start_main (main=0x80f5f58 <main>, argc=2,
    ubp_av=0xbffff354, init=0x804a564 <_init>, fini=0x81677a4 <_fini>,
    rtld_fini=0x4000b980 <_dl_fini>, stack_end=0xbffff34c)
    at ../sysdeps/generic/libc-start.c:129
(gdb)


The following information is from R-1.4.1 big.report()

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
George N. White III  <aa056@chebucto.ns.ca> Halifax, NS, Canada


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:04:25 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 04 Jun 2002 10:04:25 -0400
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu
 (PR#1630)
References: <200206032319.BAA10429@pubhealth.ku.dk>
Message-ID: <3CFCC8E9.CF35A37C@research.bell-labs.com>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:07:19 2002
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Tue, 4 Jun 2002 16:07:19 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1632)
Message-ID: <200206041407.QAA18195@pubhealth.ku.dk>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  4 15:14:38 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 Jun 2002 10:14:38 -0400
Subject: CRAN down?
Message-ID: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>

Is <cran.r-project.org> down or is it just me having trouble?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  4 17:44:11 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 4 Jun 2002 18:44:11 +0200
Subject: CRAN down?
In-Reply-To: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
References: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
Message-ID: <15612.61019.706496.498175@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Is <cran.r-project.org> down

yes it is.

Use a mirror for the moment,  typically
	cran.XY.R-project.org   
where XY is, e.g., "us" , "uk", "dk" ,...
or also "good ol'" http://lib.stat.cmu.edu/R/CRAN/

    PaulG>  or is it just me having trouble?  Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun  5 17:57:40 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 5 Jun 2002 18:57:40 +0200 (MET DST)
Subject: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206051657.SAA24357@pubhealth.ku.dk>

I just realised that the return address in my recent bug report probably 
won't work... Here it is once more:


I compiled the latest R release. Configure correctly found my Tcl/Tk 8.0.4 
installation (it searched in various tcl8.0 and tk8.0 places). However, 
when:
>library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library 
"/home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so":
  /home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so: undefined symbol: 
Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

Which is correct because I cannot find that symbol in my Tcl library!

The docs are unspecific as to the version needed (but the actions of the 
configure script suggest that 8.0 is supported!). Is this correct, or is 
this a bug in configure or the documentation?



--please do not edit the information below--

Version:
platform = i686-pc-linux-gnu
arch = i686
os = linux-gnu
system = i686, linux-gnu
status =
major = 1
minor = 5.0
year = 2002
month = 04
day = 29
language = R

Search Path:
.GlobalEnv, package:ctest, Autoloads, package:base


RenE J.V. Bertin


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206070515.g575F3P00742@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1624 *
Subject: cluster installation hangs or too many args
From: felix@sprintlabs.com
Date: Sun, 2 Jun 2002 02:45:54 +0200 (MET DST)
* PR# 1639 *
Subject:  Tcl8.0.4 missing function?! 
From: RenE JV Bertin <bertin@bola.college-de-france.fr>
Date: Wed, 5 Jun 2002 18:51:14 +0200
* PR# 1640 *
Subject: Tcl8.0.4 missing function?! 
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 05 Jun 2002 18:56:37 +0200
* PR# 1641 *
Subject: Available; Grants, Loans, Financing
From: "MG PUBLISHING" <mgpublishing@newmail.com>
Date: Wed, 5 Jun 2002 19:10:58 -0400
* PR# 1642 *
Subject: NEW Consumer TELEMARKETING List
From: Telemarketing <client2@371.net>
Date: 06 Jun 2002 02:41:09 -0700
* PR# 1643 *
Subject: NEXT OF KIN
From: "tony fred"<tonyfred@qrio.com>
Date: Thu, 06 Jun 2002 17:31:12 +0300
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ns.ca  Sat Jun  8 13:14:02 2002
From: aa056@chebucto.ns.ca (George White)
Date: Sat, 8 Jun 2002 09:14:02 -0300 (ADT)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu  (PR#1630)
In-Reply-To: <3CFCC8E9.CF35A37C@research.bell-labs.com>
Message-ID: <Pine.GSO.3.95.iB1.0.1020608090154.26862A-100000@halifax.chebucto.ns.ca>

On Tue, 4 Jun 2002, John Chambers wrote:

> aa056@chebucto.ca wrote:
> > 
> > Using the same settings in config.site as were used for R-1.4.1,
> > R-1.5.0 fails to build.
> > 
> > ./configure --enable-R-shlib
> > 
> > Using defaults and using PPro optimizations, the build failed in
> > package methods:
> > 
> > dumping R code in package 'methods'
> > gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> > gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> > 
> > The command that fails is:
> > 
> >     ../../../bin/R --vanilla --verbose < all.R
> > 
> > The same failure occurs using defaults for CFLAGS, etc.
> > 
> > Install patches:
> > 
> >   zcat R-release.diff.gz | patch -p1
> > 
> > R is now configured for i686-pc-linux-gnu
> > 
> >   Source directory:          .
> >   Installation directory:    /usr/local
> >   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
> >  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
> >  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
> >  -mpreferred-stack-boundary=2
> >   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
> >  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> >  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> > -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> > -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   X11 support:               yes
> >   Gnome support:             no
> >   Tcl/Tk support:            yes
> >   Readline support:          yes
> > 
> >   R profiling support:       yes
> >   R as a shared library:     yes
> > 
> > The same error occurs using the patched version.
> > 
> 
> I couldn't reproduce this with the --enable-R-shlib in the
> configuration, on either of my current Linux versions (Redhat 7.1, YDL
> 2.2); e.g.,

I had no problem building the default configuration.  Comparing the 
resulting Makeconf with the one for the failed build I found that
configure did not set MAIN_LDFLAGS to --export-dynamic when using my
config.site (which has the MAIN_LDFLAGS entry commented out).

If I edit Makeconf and rebuild R.bin the build finished and 
"make check" passes.  

--
George White <aa056@chebucto.ns.ca> Halifax, Nova Scotia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 10 14:55:38 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2002 15:55:38 +0200
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <x2ofejtezp.fsf@blueberry.kubism.ku.dk>


As the subject says, the core team has decided to release R-1.5.1 next
Monday, mainly to "officialize" the bug fixes in the current
r-patched. It would be helpful that you check it out and report back
if you find any bad problems, especially if you have an uncommon
platform. (Or very minor nits. The intermediate ones are "out of
bounds" at this stage.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Jun 10 17:48:08 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 10 Jun 2002 12:48:08 -0400
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <kkl9gus0i1t4m4d0i20fgcdqp2v46o3tgf@4ax.com>

On 10 Jun 2002 15:55:38 +0200, Peter Dalgaard BSA
<p.dalgaard@biostat.ku.dk> wrote:

>
>As the subject says, the core team has decided to release R-1.5.1 next
>Monday, mainly to "officialize" the bug fixes in the current
>r-patched. It would be helpful that you check it out and report back
>if you find any bad problems, especially if you have an uncommon
>platform. (Or very minor nits. The intermediate ones are "out of
>bounds" at this stage.)

For Windows users, I'll compile the current r-patched and put it on 

 http://www.cran.r-project.org/bin/windows/base/

as SetupRpatched.exe.  (It should be automatically copied to the
mirrors by the next day.)  The first version should be online later
this afternoon.  I'll put new versions up as time permits; check the
file dates to see if I have.

Please copy any bug reports about this version to
R-windows@R-project.org.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 19:12:02 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 20:12:02 +0200 (MET DST)
Subject: coplot behaviour (PR#1653)
Message-ID: <200206101812.UAA26977@pubhealth.ku.dk>

Another one, using the same data as in my previous report (PR1651, available 
as http://rjvbertin.free.fr/PR1651data.tab):

kk<-read.table(<data>)
attach(kk)
Snr<-factor(Snr)
# Now try to make a coplot using boxplots:
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) plot(x, y))
# or
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) boxplot(y~x))

This almost functions,only the boxplot matrix is shifted and right-aligned 
with the vertical (size) factor display (seems to be drawn underneath it).
This happens both with the Windows binaries and the source distribution 
compiled under Linux.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 00:42:31 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 11 Jun 2002 01:42:31 +0200 (CEST)
Subject: R search applet initialization
Message-ID: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>


R 1.5.1 is due to come out ... and I've just noticed that the R help.start
page search applet doesn't work on my Mandrake 8.2 system even though I've
upgraded mozilla to version 1.0 and I have a perfectly working java (all
right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
didn't work). I had thought the problem due to a too-old mozilla version,
but it doesn't seem to be that now.

Error messages throughout changes in versions of mozilla and java are 
consistent: the java applet doesn't get initialized.

Could this be a problem with default mandrake file permissions ?
Is it possible to download just the apple source code and a description of 
how it is supposed to work from somewhere on CRAN ?
How could I go about debugging this ?

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 17:41:00 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 18:41:00 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206101641.SAA26695@pubhealth.ku.dk>


Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
(installed from sources).

# Load the data from the attached file:
kk<-read.table("__filename__", header=1)
# attach the data:
attach(kk)
Snr<-factor(Snr)
# fool around with a call to anova.glm():
anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
# Error: object nFD not found
# Well, I thought I had attached that. Anyway:
anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
data=kk)
# Same message
# In addition, warning message:
<lots of output>
R dumps core. On Windows, it crashes in <unknown module>.

Also not that the 1st (Snr) column is not automatically converted in a
factor, despite the fact that it consists of strings!

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

>From list moderator:
     formerly binary attached dataset is now available
     as  http://rjvbertin.free.fr/PR1651data.tab
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:06:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 08:06:13 +0100 (BST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>

On Tue, 11 Jun 2002 mikalzet@libero.it wrote:

>
> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
> page search applet doesn't work on my Mandrake 8.2 system even though I've
> upgraded mozilla to version 1.0 and I have a perfectly working java (all
> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
> didn't work). I had thought the problem due to a too-old mozilla version,
> but it doesn't seem to be that now.
>
> Error messages throughout changes in versions of mozilla and java are
> consistent: the java applet doesn't get initialized.
>
> Could this be a problem with default mandrake file permissions ?

I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
0.9.9 and 1.0rc2 all worked.

> Is it possible to download just the apple source code and a description of
> how it is supposed to work from somewhere on CRAN ?

It's all in doc/html/search in the source tree (you'll need to make to get
the HTML file and something to search).

> How could I go about debugging this ?
>
> --
> Michele Alzetta
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:24:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:24:15 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110724.JAA29161@pubhealth.ku.dk>

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)

Why are you calling anova.glm on an object of class c("aovlist",
"listof")?  Also, why give the data = kk argument to anova.glm (which does
not have such an argument)?

I have no idea what you intended, but there is no anova method for
a multistratum aov fit.  I suggest you look at the print and summary
methods.

> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!

All text files are strings. It is a column of integer numbers, and so is
converted to an integer variable in R.

If you wanted something different, read ?read.table and set colClasses.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:49:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:49:18 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110749.JAA29387@pubhealth.ku.dk>

I can't reproduce the crash on Linux, nor using rterm on Windows.
With Rgui on Windows it seems due to the over-long error message that is
generated (15880 characters) as a single line.

There was a bug report (PR 902 on problems) with over-long warnings.
That was solved long ago, but there is no guarantee that the display
system will accept them.  Perhaps warning() should truncate them.

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)
> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> >From list moderator:
>      formerly binary attached dataset is now available
>      as  http://rjvbertin.free.fr/PR1651data.tab
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 11 08:53:02 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 11 Jun 2002 09:53:02 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <15621.44126.18431.298413@gargle.gargle.HOWL>

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> R 1.5.1 is due to come out ... and I've just
    Michele> noticed that the R help.start page search applet
    Michele> doesn't work on my Mandrake 8.2 system even though
    Michele> I've upgraded mozilla to version 1.0 and I have a
    Michele> perfectly working java (all right, I'm using 1.4.0
    Michele> now, but with mozilla 0.98 and java 1.3.1 it still
    Michele> didn't work). I had thought the problem due to a
    Michele> too-old mozilla version, but it doesn't seem to be
    Michele> that now.

    Michele> Error messages throughout changes in versions of
    Michele> mozilla and java are consistent: the java applet
    Michele> doesn't get initialized.

I can confirm that with Mozilla 1.0 (20020605) 
and
	help.start(browser = "mozilla")
the search applet gives the same error message and
search/keywords are not working whereas with
	help.start(browser = "netscape")
(with quite an old version of netscape) the search applet
 *does* work.

(this is a highly up-patched redhat 7.1)

    Michele> Could this be a problem with default mandrake file
    Michele> permissions ?  Is it possible to download just the
    Michele> apple source code and a description of how it is
    Michele> supposed to work from somewhere on CRAN ?  How
    Michele> could I go about debugging this ?

(I have not tried yet to debug.  Always felt  Mozilla should be able to
 work as well as old netscape ..)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 11 14:45:03 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 11 Jun 2002 15:45:03 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
Message-ID: <15621.65247.359413.955515@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Tue, 11 Jun 2002 mikalzet@libero.it wrote:
>> 
>> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
>> page search applet doesn't work on my Mandrake 8.2 system even though I've
>> upgraded mozilla to version 1.0 and I have a perfectly working java (all
>> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
>> didn't work). I had thought the problem due to a too-old mozilla version,
>> but it doesn't seem to be that now.
>> 
>> Error messages throughout changes in versions of mozilla and java are
>> consistent: the java applet doesn't get initialized.
>> 
>> Could this be a problem with default mandrake file permissions ?

> I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
> 0.9.9 and 1.0rc2 all worked.

I can confirm the problem with current Debian testing and Mozilla
0.9.9-6, whereas things work fine with Netscape 4.77-2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdm28@cornell.edu  Tue Jun 11 15:33:42 2002
From: rdm28@cornell.edu (rdm28@cornell.edu)
Date: Tue, 11 Jun 2002 16:33:42 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206111433.QAA04910@pubhealth.ku.dk>



----------------------- transcript --------------------------
$ R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> axis(1,xaxp=c(0,1,4))
> version
         _
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R
>
------------------------end transcript ---------------------

I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
problem seems to exist for axis() with a yaxp argument.

The sequence:

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> par(xaxp=c(0,1,4))
> axis(1)

does draw an axis with four intervals, though.


On R-Help, in response to my question about this, Paul Murrell
<p.murrell@auckland.ac.nz> wrote:

> This appears to be a bug.  axis() should respond to an "in-line" xaxp
> setting.
>
> I can see a place in the C code where the problem appears to be, but an
> attempted quick fix failed.
>
> Could you please submit a bug report so that I (or someone else) will
> remember to have a proper look later?
>
> Thanks
>
> Paul


Thanks,
--
Robert Merithew





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 18:52:11 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 19:52:11 +0200 (MET DST)
Subject: command line editing does not work (PR#1656)
Message-ID: <200206111752.TAA05778@pubhealth.ku.dk>

I compiled R-1.5.0 on SuSE 7.2. Everything worked out, including
make check.  However, the escape sequences generated by the arrow
keys are not correctly understood.  So, I cannot e.g. get the previous
command by up arrow.  I had the same problem, when compiled R-1.4.1
on SuSE 7.2.

The problem was not present in precompiled binary R-1.3.0.rpm for
SuSE 7.2 from CRAN, however, I need at least R-1.4.1 for randomForest.

Compiling R-1.4.1 on RedHat based system was also OK, but I have SuSE
as my basic system.

I compared the output of "strace R" for the precompiled R-1.3.0 and
R-1.5.0 compiled by myself:

The correct behaviour of R-1.3.0 may be due to the fact, that
it reads /usr/share/terminfo/x/xterm
(in strace output: open("/usr/share/terminfo/x/xterm", O_RDONLY) = 4),
while the R-1.5.0 does not read it
(no occurrence of "xterm" in strace output).

I think, it should be something simple, but I do not know how
to force R to read the terminfo file. I appreciate any help from you.

Kind regards

  Petr Savicky

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 19:20:55 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 20:20:55 +0200 (MET DST)
Subject: command line editing does not work (2) (PR#1657)
Message-ID: <200206111820.UAA05875@pubhealth.ku.dk>

I include more information to my message sent
at Tue, 11 Jun 2002 19:51:24 +0200 with the same
subject.

The config.log contains the following lines:

configure:10947: gcc -o conftest -g -O2 -I/usr/local/include -L/usr/local/lib conftest.c -lreadline  -ldl -lncurses -lm  >
/usr/i486-suse-linux/bin/ld: cannot find -lreadline
collect2: ld returned 1 exit status
configure:10950: $? = 1
configure: failed program was:
#line 10921 "configure"
#include "confdefs.h"

/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
   builtin and then its argument prototype would still apply.  */
char rl_callback_read_char ();
#ifdef F77_DUMMY_MAIN
#  ifdef __cplusplus

...

I have the readline package properly installed:
> rpm -q readline
readline-2.05-21

Thank you for any help to recognize and correct the problem.

Best wishes

  Petr

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhouston@bio.ri.ccf.org  Tue Jun 11 21:14:08 2002
From: dhouston@bio.ri.ccf.org (dhouston@bio.ri.ccf.org)
Date: Tue, 11 Jun 2002 22:14:08 +0200 (MET DST)
Subject: make install fails - index.html not found (PR#1658)
Message-ID: <200206112014.WAA06199@pubhealth.ku.dk>

Full_Name: Dale Houston
Version: 1.5.0
OS: Solaris 8
Submission from: (NULL) (192.35.79.70)


I am trying to get RT-1.5.0 installed on Solaris 8.

The programs compile fine and 'make check' seems to work.

But when I do a 'make install' I see this:

/home/dhouston/R-1.5.0 grieg> make install
installing afm ...
installing doc ...
installing doc/html ...
install:  index.html does not exist
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc/html
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc
*** Error code 1
make: Fatal error: Command failed for target `install'

I do not see index.html in doc/html. I made a fake one for testing purposes, but
when I do a make install it now fails trying to find SearchEngine.html.

I did a 'make html' but to no avail.

dale


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 11 21:19:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jun 2002 22:19:58 +0200
Subject: command line editing does not work (2) (PR#1657)
In-Reply-To: <200206111820.UAA05875@pubhealth.ku.dk>
References: <200206111820.UAA05875@pubhealth.ku.dk>
Message-ID: <x2bsahmutt.fsf@blueberry.kubism.ku.dk>

Petr.Savicky@cuni.cz writes:

> I have the readline package properly installed:
> > rpm -q readline
> readline-2.05-21
> 
> Thank you for any help to recognize and correct the problem.

The usual suspect is the readline-devel package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 21:40:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 21:40:26 +0100 (BST)
Subject: make install fails - index.html not found (PR#1658)
In-Reply-To: <200206112014.WAA06199@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206112136170.23760-100000@gannet.stats>

On Tue, 11 Jun 2002 dhouston@bio.ri.ccf.org wrote:

> Full_Name: Dale Houston
> Version: 1.5.0
> OS: Solaris 8
> Submission from: (NULL) (192.35.79.70)
>
>
> I am trying to get RT-1.5.0 installed on Solaris 8.
>
> The programs compile fine and 'make check' seems to work.
>
> But when I do a 'make install' I see this:
>
> /home/dhouston/R-1.5.0 grieg> make install
> installing afm ...
> installing doc ...
> installing doc/html ...
> install:  index.html does not exist
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc/html
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc
> *** Error code 1
> make: Fatal error: Command failed for target `install'
>
> I do not see index.html in doc/html. I made a fake one for testing purposes, but
> when I do a make install it now fails trying to find SearchEngine.html.

Those should have been generated during the build, by the Makefile's in
doc/html and doc/html/search.

Do you perchance not have Perl installed?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Jun 11 23:04:45 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 00:04:45 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206112204.AAA06587@pubhealth.ku.dk>

Hi


> ----------------------- transcript --------------------------
> $ R --vanilla
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.5.0  (2002-04-29)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > axis(1,xaxp=c(0,1,4))
> > version
>          _
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> ------------------------end transcript ---------------------
> 
> I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
> problem seems to exist for axis() with a yaxp argument.
> 
> The sequence:
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > par(xaxp=c(0,1,4))
> > axis(1)
> 
> does draw an axis with four intervals, though.
> 
> On R-Help, in response to my question about this, Paul Murrell
> <p.murrell@auckland.ac.nz> wrote:
> 
> > This appears to be a bug.  axis() should respond to an "in-line" xaxp
> > setting.
> >
> > I can see a place in the C code where the problem appears to be, but an
> > attempted quick fix failed.


For the record, the place in the C code is in plot.c in do_axis where
there appear to be two problems:  (i)  the code sets a local variable
from the dpptr(dd)->xaxp rather than the gpptr(dd)->xaxp, and (ii) the
code sets this local variable BEFORE calling ProcessInlinePars().  So
there are two obstacles to fix before do_axis will respond to an in-line
xaxp setting.  NOTE also that several other local variables are set from
dpptr(dd)-><something> in the same place, so these should be fixed as
well.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Jun 12 02:30:32 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 03:30:32 +0200 (MET DST)
Subject: mtext() alignment of perpendicular text (PR#1659)
Message-ID: <200206120130.DAA06874@pubhealth.ku.dk>


mtext() does a poor job of placing text when it is perpendicular (e.g.,
side=1, las=3) and the font size is not the default.

The following code snippet demonstrates the problem ...

plot(1:10)
abline(v=1:10, col="grey")
axis(3, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=1, las=3)
axis(3, line=-2, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-1, las=3, cex=.5)
axis(3, line=-5, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-4, las=3, cex=2)

The ugliness varies a bit across devices.

In GMtext() in graphics.c there is a hardcoded adjustment of 0.3 which
is described as "purely visual tuning".  I think this needs to be
replaced with a more general solution.

Paul


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 6.0
 year = 2002
 month = 06
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 23:59:37 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Wed, 12 Jun 2002 00:59:37 +0200 (CEST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>


By the way, this is the error message I get:

java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
at java.security.AccessController.checkPermission(AccessController.java:401)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
at java.io.File.isDirectory(File.java:698)
at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
at java.security.AccessController.doPrivileged(Native Method)
at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
at sun.applet.AppletPanel.run(AppletPanel.java:290)
at java.lang.Thread.run(Thread.java:536)

-- 
Michele Alzetta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Jun 12 11:38:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 12 Jun 2002 12:38:06 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
Message-ID: <15623.9358.372881.840891@mithrandir.hornik.net>

>>>>> mikalzet  writes:

> By the way, this is the error message I get:

I get the same, mutatis mutandis.

-k

> java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
> at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
> at java.security.AccessController.checkPermission(AccessController.java:401)
> at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
> at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
> at java.io.File.isDirectory(File.java:698)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
> at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
> at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
> at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
> at java.security.AccessController.doPrivileged(Native Method)
> at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
> at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
> at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
> at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
> at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
> at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
> at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
> at sun.applet.AppletPanel.run(AppletPanel.java:290)
> at java.lang.Thread.run(Thread.java:536)

> -- 
> Michele Alzetta



> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Jun 12 14:26:07 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 12 Jun 2002 09:26:07 -0400
Subject: help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>

(Sorry for the cross-post--- I wasn't sure which list is more
appropriate...)

Hi everyone,

I've run into segfaults when using my randomForest package on large dataset
(e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
mtry=3000).  I'm wondering if anyone can give me some hints on where to look
for the problem.

The randomForest package mainly consists of two things: rf.c contains rf(),
a C wrapper function that calls the Fortran subroutines in rfsub.f that do
most of the work (slightly altered from Breiman's original code).  All
memory allocations are done in rf.c, using S_alloc().  When I run random
forest with the data and setting as mentioned above, it was able to finish
growing the 7000 trees, but segfault when returning from rf() to R.  GDB
gave the following (gdb prompts removed):

do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
    at dotcode.c:1413
1413            break;
1845        PROTECT(ans = allocVector(VECSXP, nargs));
1846        havenames = 0;
1847        if (dup) {
1849            info.cargs = cargs;
1850            info.allArgs = args;
1851            info.nargs = nargs;
1852            info.functionName = buf;
1853            nargs = 0;
1854            for (pargs = args ; pargs != R_NilValue ; pargs =
CDR(pargs)) {
1855                if(argConverters[nargs]) {
1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
which));

Program received signal SIGSEGV, Segmentation fault.
0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
1133                    SEXP next = NEXT_NODE(s);

This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.

Any help/hints/comments are greatly appreciated!

Regards,
Andy

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 12 15:01:56 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Jun 2002 15:01:56 +0100 (BST)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <Pine.GSO.4.44.0206121453430.12434-100000@auk.stats>

(Confined to R-devel).

This almost always means that R's memory system (or malloc's) has been
corrupted by array overruns.

Sometimes gctorture(TRUE) helps.  However in your case it's more likely
those S_alloc calls, so try (temporarily) replacing them by calls to Calloc
and then use something like Purify or `Electric Fence'. to test for
overruns.

On Wed, 12 Jun 2002, Liaw, Andy wrote:

> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)

Only a few people read R-devel and not R-help.

> Hi everyone,
>
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
>
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):

This is just saying it can't allocate the copies for the returned
values of the .C arguments.  I think you might want to consider .Call
given that you are probably using quite large structures.

> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
>
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
>
> Any help/hints/comments are greatly appreciated!
>
> Regards,
> Andy
>
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
>
>
>
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
>
> ==============================================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Jun 12 15:07:57 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 12 Jun 2002 09:07:57 -0500
Subject: help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>; from andy_liaw@merck.com on Wed, Jun 12, 2002 at 09:26:07AM -0400
References: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <20020612090756.C12694@nokomis.stat.umn.edu>

These symptoms suggest that your code may be writing outside of the
data it allocates, which would trash internal data structures of the R
heap and result in a segfault at a GC.  I would try to find a malloc
debugging library, use malloc in place of S_alloc, and see if the
malloc debugging tools show any malloc heap corruption. The standard
malloc in Mac OS X has very good debugging support if you have access
to that.

luke

On Wed, Jun 12, 2002 at 09:26:07AM -0400, Liaw, Andy wrote:
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 18:54:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 19:54:10 +0200 (MET DST)
Subject: Fwd: Re: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206121754.TAA14269@pubhealth.ku.dk>




>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>To: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
>Subject: Re: Tcl8.0.4 missing function?! (PR#1640)
>Date: 12 Jun 2002 19:37:21 +0200
> >
> > From help(quantile):
> >
> > ...
> >
> >     `quantile(x,p)' as a function of `p' linearly interpolates the
> >      points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
> >      statistics'') and `n <- length(x)'.
> >
> >      This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
> >      <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
> >      ox[n]'.
> >
> > I think that what is meant is 'ox <- x[order(x)]'?! When I do that,
> > the values from the above formulae correspond to what quantile() gives
> > me...!



RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 22:01:59 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 23:01:59 +0200 (MET DST)
Subject: documentation error for quantile (PR#1660)
Message-ID: <200206122101.XAA14806@pubhealth.ku.dk>

>From the documentation to the quantile function:

...

    `quantile(x,p)' as a function of `p' linearly interpolates the
     points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
     statistics'') and `n <- length(x)'.

    This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
     <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
     ox[n]'.

I think that should be ox <- x[ order(x) ] ! At least, then the formulae 
give the same result as quantile itself!


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 07:22:43 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 08:22:43 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130622.IAA16038@pubhealth.ku.dk>

This is a bad bug as reported by Robin Hankin,
it is still in "R-patched" ...

##- From: Robin Hankin <r.hankin@auckland.ac.nz>
##- To: r-help@stat.math.ethz.ch
##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
##- Date: Thu, 13 Jun 2002 16:46:26 +1200

## .....

## Example slighlty modified (MM)

d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
               1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
               0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
               0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
               0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
               1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
               2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
               0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
               0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
               0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
             nr=50)

fisher.test(d4)
##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
##- Stack length exceeded in f3xact.
##- This problem should not occur.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jun 13 07:59:04 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 13 Jun 2002 08:59:04 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130659.IAA16339@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
> 
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
> 
> ## .....
> 
> ## Example slighlty modified (MM)
> 
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
> 
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.

Just for the record:
  repeat try(fisher.test(d4))
results in a crash after a few iterations (R-1.5.0 patched on WinNT
4.0).

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 11:17:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 12:17:08 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131017.MAA19861@pubhealth.ku.dk>

(CC'ed to R-bugs  ``for the record'')

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Jun 2002, Martin Maechler wrote:
    >> >>>>> "MM" == Martin Maechler
    >> <maechler@stat.math.ethz.ch> writes:
    >> 
    >> >>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
    >> writes:
    BDR> Martin, What makes this a `bad bug'?  Are you getting a
    BDR> seg fault?
    >>
    MM> yes, always in the half a dozen restarts I tried.
    >>  (in the mean time I had one case where it did not ..)
    >> 
    BDR> Like Uwe this works for me the first few times and I do
    BDR> then get a backtrace (in memory.c, so this is almost
    BDR> certainly an earlier overrun).
    >>
    MM> I see.  This has been different for me.
    >>
    BDR> I think we've had problems before with FEXACT
    BDR> incorrectly specifying the required sizes of its
    BDR> workspaces.
    >>  (I'm not so sure this is the problem here.)
    >> 
    >> I found that
    >> 
    >> fisher.test(d4[1:30,])
    >> 
    >> gives a direct segmentation fault (without any error
    >> message) for me.
    >> 

    BDR> I've had to compile up gdb 5.2 to get the correct
    BDR> information out of R on Linux compiled under gcc-3.1.
    BDR> That shows (on the original problem)

    BDR> Loaded symbols for
    BDR> /users/ripley/R/R-patched/library/ctest/libs/ctest.so
    BDR> #0 f3xact (nrow=0x40051074, irow=0x4005113c,
    BDR> ncol=0x40051000, icol=0x40051120, dlp=0x4041b110,
    BDR> mm=0x40050fc0, fact=0x4035f020, ico=0x4035f4dc,
    BDR> iro=0x4035f5a4, it=0x4035f66c, lb=0x4035f734,
    BDR> nr=0x4035f7fc, nt=0x4035f8c4, nu=0x4035f98c,
    BDR> itc=0x4035fa54, ist=0x40360094, stv=0x40364f18,
    BDR> alen=0x40365ba0, tol=0x4004f878) at
    BDR> /users/ripley/R/cvs/R-patched/src/library/ctest/src/fexact.c:1125
    BDR> 1125 ist[itp] = -1; (gdb) print itp $1 = -3544

    BDR> The same with your variant (except the value of itp).

Okay, I found a much smaller table  --- and a different place
for the seg.fault :
> fisher.test(cbind(0,c(0,0,1)))

Program received signal SIGSEGV, Segmentation fault.
f2xact (nrow=0x8a12ec0, ncol=0x8a12ee0, table=0x8b7bb38, ldtabl=0x8a12f00, 
    expect=0x89dad68, percnt=0x89dad90, emin=0x89dadb8, prt=0x89dade0, 
    pre=0x89dae08, fact=0x403b3020, ico=0x403b302c, iro=0x403b3038, 
    kyy=0x403b3044, idif=0x403b3050, irn=0x403b3058, key=0x403b49d4, 
    ldkey=0xbfffc398, ipoin=0x403b5d44, stp=0x403b70b0, ldstp=0xbfffc39c, 
    ifrq=0x403ffef4, dlp=0x4046d450, dsp=0x4046fb30, tm=0x40472210, 
    key2=0x404748f4, iwk=0x403b3060, rwk=0x403b3d30)
    at ../../../../../R/src/library/ctest/src/fexact.c:524
524		obs += fact[ico[j]] - dd;

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 12:16:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 13:16:34 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206131116.NAA20860@pubhealth.ku.dk>

This occurred because integer overflow was giving negative keys.

Append the following line at line 1083 of fexact.c

      if (ipn < 1) ipn += ldst; /* because key might be negative */


> fisher.test(d4)

      Fisher's Exact Test for Count Data

data:  d4
p-value = < 2.2e-16
alternative hypothesis: two.sided



On Thu, 13 Jun 2002 maechler@stat.math.ethz.ch wrote:

> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
>
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
>
> ## .....
>
> ## Example slighlty modified (MM)
>
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
>
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 13:38:32 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 08:38:32 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>

Hi all,

Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
anyone?).  The problem seemed to have gone away.

Everyone suggested using some malloc debugger (such as Electric Fence).  All
I did was following half of what BDR suggested below, i.e., changing all the
S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
problem seems to have disappeared!

As I read it from the R-exts manual, the difference between S_alloc and
Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
memory addtional to the heap.  So can anyone explain what's going on?  It's
still kind of mysterious to me...

Again, thanks very, very much for the help!

(Some day I might try to use .Call rather than .C, but I think I need to get
a bit more familiarity with .Call on simpler things before I try it with
randomForest.)

Regards,
Andy

> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 12, 2002 10:02 AM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: Re: [R] help debugging segfaults
> 
> 
> (Confined to R-devel).
> 
> This almost always means that R's memory system (or malloc's) has been
> corrupted by array overruns.
> 
> Sometimes gctorture(TRUE) helps.  However in your case it's 
> more likely
> those S_alloc calls, so try (temporarily) replacing them by 
> calls to Calloc
> and then use something like Purify or `Electric Fence'. to test for
> overruns.
> 
> On Wed, 12 Jun 2002, Liaw, Andy wrote:
> 
> > (Sorry for the cross-post--- I wasn't sure which list is more
> > appropriate...)
> 
> Only a few people read R-devel and not R-help.
> 
> > Hi everyone,
> >
> > I've run into segfaults when using my randomForest package 
> on large dataset
> > (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> > mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> > for the problem.
> >
> > The randomForest package mainly consists of two things: 
> rf.c contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> > most of the work (slightly altered from Breiman's original 
> code).  All
> > memory allocations are done in rf.c, using S_alloc().  When 
> I run random
> > forest with the data and setting as mentioned above, it was 
> able to finish
> > growing the 7000 trees, but segfault when returning from 
> rf() to R.  GDB
> > gave the following (gdb prompts removed):
> 
> This is just saying it can't allocate the copies for the returned
> values of the .C arguments.  I think you might want to consider .Call
> given that you are probably using quite large structures.
> 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = 
> CPtrToRObj(cargs[nargs], CAR(pargs),
> > which));
> >
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);
> >
> > This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> > on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled 
> from source.
> >
> > Any help/hints/comments are greatly appreciated!
> >
> > Regards,
> > Andy
> >
> > Andy I. Liaw, PhD
> > Biometrics Research          Phone: (732) 594-0820
> > Merck & Co., Inc.              Fax: (732) 594-1565
> > P.O. Box 2000, RY70-38            Rahway, NJ 07065
> > mailto:andy_liaw@merck.com
> >
> >
> >
> > 
> --------------------------------------------------------------
> ----------------
> > Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> >
> > 
> ==============================================================
> ================
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 13 14:28:36 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 13 Jun 2002 09:28:36 -0400
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <kb7hguot6ics8pl88gjeschevf8ceckvn8@4ax.com>

On Thu, 13 Jun 2002 08:38:32 -0400, you wrote in message
<51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>:

>Hi all,
>
>Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
>anyone?).  The problem seemed to have gone away.
>
>Everyone suggested using some malloc debugger (such as Electric Fence).  All
>I did was following half of what BDR suggested below, i.e., changing all the
>S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
>problem seems to have disappeared!

In my experience, that's not such good news.  The bug is probably
still there, it just doesn't have obvious symptoms in the tests you're
using.  I'd still recommend using the malloc debugger to try to track
it down.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 16:57:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 17:57:21 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131557.RAA24474@pubhealth.ku.dk>

On Thu, 13 Jun 2002, Martin Maechler wrote:

> Okay, I found a much smaller table  --- and a different place
> for the seg.fault :
> > fisher.test(cbind(0,c(0,0,1)))


That one is easy:  You (MM) have calculated fact[2], but fact is only of
length 2 (for values 0 and 1), so ico gets overwritten.

I now suspect that my fix for the original bug is merely a fix for a
symptom, so am going to replace it by an error message.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Jun 13 17:05:13 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 13 Jun 2002 09:05:13 -0700 (PDT)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <Pine.A41.4.44.0206130857300.115682-100000@homer10.u.washington.edu>

On Thu, 13 Jun 2002, Liaw, Andy wrote:
>
> Everyone suggested using some malloc debugger (such as Electric Fence).  All
> I did was following half of what BDR suggested below, i.e., changing all the
> S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
> problem seems to have disappeared!

No, the *symptoms* have disappeared. This is not necessarily an
improvement.

> As I read it from the R-exts manual, the difference between S_alloc and
> Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
> memory addtional to the heap.  So can anyone explain what's going on?  It's
> still kind of mysterious to me...

It looked as if your code was writing to/reading from memory that didn't
belong to it. What happens then depends on who the memory does belong to,
and what they are doing with it. There's no guarantee that just because it
doesn't crash today that it won't in the future, or worse, start giving
subtly wrong answers.

A segmentation fault is a good thing in this context -- it's a sign that
the operating system has protected you from the consequences of your
actions by killing the program.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 17:48:09 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 12:48:09 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC365@usrymx10.merck.com>

OK, so I linked my code against libefence and then run my test code under
gdb.  It still finishes without reporting any problem.  (This is with
Calloc() and Free(), instead of S_alloc().)  Can anyone tell me what to do
or look for next?  I'll be eternally grateful!

Regards,
Andy

> -----Original Message-----
> From: Thomas Lumley [mailto:tlumley@u.washington.edu]
> Sent: Thursday, June 13, 2002 12:05 PM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: RE: [R] help debugging segfaults
> 
> 
> On Thu, 13 Jun 2002, Liaw, Andy wrote:
> >
> > Everyone suggested using some malloc debugger (such as 
> Electric Fence).  All
> > I did was following half of what BDR suggested below, i.e., 
> changing all the
> > S_alloc() calls to Calloc() and Free().  I didn't get to 
> try efence, and the
> > problem seems to have disappeared!
> 
> No, the *symptoms* have disappeared. This is not necessarily an
> improvement.
> 
> > As I read it from the R-exts manual, the difference between 
> S_alloc and
> > Calloc is that S_alloc takes memory from the heap, whereas 
> Calloc takes
> > memory addtional to the heap.  So can anyone explain what's 
> going on?  It's
> > still kind of mysterious to me...
> 
> It looked as if your code was writing to/reading from memory 
> that didn't
> belong to it. What happens then depends on who the memory 
> does belong to,
> and what they are doing with it. There's no guarantee that 
> just because it
> doesn't crash today that it won't in the future, or worse, 
> start giving
> subtly wrong answers.
> 
> A segmentation fault is a good thing in this context -- it's 
> a sign that
> the operating system has protected you from the consequences of your
> actions by killing the program.
> 
> 	-thomas
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Jun 13 20:36:42 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 13 Jun 2002 21:36:42 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206131936.VAA25196@pubhealth.ku.dk>


There appears to be a mild bug, or at least a deficiency, in
rnorm.  The bug becomes apparent when one looks at extremes
of the squares of the values generated by rnorm; rnorm is not
generating quite enough extreme values.

The R version that I am using is 1.4.1; I never got around to installing
1.5.0, and now since 1.5.1 is about to come out ....  However, checking
the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

Version details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R

More detail regarding how the bug revealed itself:
==================================================

	For n = 100, 200, ..., 1500

	o I generated 1000 sequences of length n via rnorm(n),

	o for each sequence x, I calculated m = the max of x^2

	o I then calculated pval = 1 - pchisq(m,1)^n

	o I then calculated s.hat.n = #{pval: pval < 0.05}/1000

I then plotted s.hat.n versus n.  This ***should*** give a result
close to a horizontal straight line, at height 0.05 --- but it
didn't.  For the larger values of n, the values of s.hat.n were
displaced significantly below 0.05.

After some discussion with colleagues, I replaced the calls to rnorm()
by calls to myrnorm() defined by

	myrnorm <- function(n,mu=0,sigma=1){
		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
	}

which uses the ``(r,theta)'' method of generating random normals.

When I did so, the resulting values were indeed all ``close to'' 0.05,
as they should be.

I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
then of course taking m = max of x --- rather than max of x^2).  Again
all the resulting values were close to 0.05 as ought to be the case.
(So rchisq() appears to be OK in this regard.)

Enclosed below is a script to demonstrate the bug.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
#
# Script to demonstrate the bug in rnorm.
#
myrnorm <- function(n,mu=0,sigma=1){
	mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
}

# If RFUN <- rnorm we get ``wrong'' answers; if RFUN <- myrnorm,
# we get ``right'' answers.
RFUN <- rnorm

NSER <- 1000
set.seed(350734)
rslt <- list()

for(K in 1:15) {
	N   <- 100*K
	M   <- matrix(RFUN(NSER*N),N,NSER)
	T2  <- apply(M,2,function(x){max(x**2)})
	PV  <- 1 - pchisq(T2,1)**N
	SZ  <- sum(PV < 0.05)/NSER
	rslt[[K]] <- SZ
	cat(K,"\n")
}

rslt <- unlist(rslt)
plot(100*(1:15),rslt,ylim=c(0,0.1),xlab='n',ylab='s.hat.n')
abline(h=0.05)
error.bar(100*(1:15),rslt,lower=1.96*sqrt(0.05*0.95/1000),add=TRUE)

# Clean up:
rm(RFUN,NSER,K,N,M,T2,PV,SZ)
#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 22:59:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jun 2002 23:59:43 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206131936.VAA25196@pubhealth.ku.dk>
References: <200206131936.VAA25196@pubhealth.ku.dk>
Message-ID: <x2lm9ion5c.fsf@blueberry.kubism.ku.dk>

rolf@math.unb.ca writes:

> There appears to be a mild bug, or at least a deficiency, in
> rnorm.  The bug becomes apparent when one looks at extremes
> of the squares of the values generated by rnorm; rnorm is not
> generating quite enough extreme values.
> 
> The R version that I am using is 1.4.1; I never got around to installing
> 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

...and I see the effect too with an r-patched from a few days back.


[snip]
> After some discussion with colleagues, I replaced the calls to rnorm()
> by calls to myrnorm() defined by
> 
> 	myrnorm <- function(n,mu=0,sigma=1){
> 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> 	}
> 
> which uses the ``(r,theta)'' method of generating random normals.
> 
> When I did so, the resulting values were indeed all ``close to'' 0.05,
> as they should be.
> 
> I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> then of course taking m = max of x --- rather than max of x^2).  Again
> all the resulting values were close to 0.05 as ought to be the case.
> (So rchisq() appears to be OK in this regard.)

Also qnorm(runif(n)) seems to be closer to the target.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 23:39:58 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 14 Jun 2002 00:39:58 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206132239.AAA25804@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> rolf@math.unb.ca writes:
> 
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> > 
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
> 
> ...and I see the effect too with an r-patched from a few days back.

No I do not! My quick check code took the square of the max rather
than the max of the square...

With your script, I get a nice horizontal line both with 1.4.0 and
1.5.0-patched.

(RedHat Linux 7.1 on a PC) 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 14 02:03:16 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 13 Jun 2002 21:03:16 -0400
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206132239.AAA25804@pubhealth.ku.dk>
References: <200206132239.AAA25804@pubhealth.ku.dk>
Message-ID: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>

On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
wrote:

>With your script, I get a nice horizontal line both with 1.4.0 and
>1.5.0-patched.
>
>(RedHat Linux 7.1 on a PC) 

I get what Rolf described in 1.5.0-patched for Windows with the
default generators: 

RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"  

I switched to the Ahrens-Dieter normal RNG (using
RNGkind(,'Ahrens-Dieter')), and things were fine.  

Keeping the default normal generator but switching to the
Mersenne-Twister uniform also fixed it:

> RNGkind()
[1] "Mersenne-Twister" "Kinderman-Ramage"

Is it possible you're not using the default generators?  If you are,
this is quite weird, because we're on the same hardware.  Why would
the OS or compiler matter in a calculation like this??

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 08:24:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 09:24:14 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206140724.JAA27319@pubhealth.ku.dk>

R supplies a choice of random-number generators as well as a choice of
generating normals.  All methods are compromises, and I suspect one of the
non-default ones may be better for your purposes.  Please investigate the
choices.


On 13 Jun 2002, Peter Dalgaard BSA wrote:

> rolf@math.unb.ca writes:
>
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> >
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
>
> ...and I see the effect too with an r-patched from a few days back.
>
>
> [snip]
> > After some discussion with colleagues, I replaced the calls to rnorm()
> > by calls to myrnorm() defined by
> >
> > 	myrnorm <- function(n,mu=0,sigma=1){
> > 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> > 	}
> >
> > which uses the ``(r,theta)'' method of generating random normals.
> >
> > When I did so, the resulting values were indeed all ``close to'' 0.05,
> > as they should be.
> >
> > I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> > then of course taking m = max of x --- rather than max of x^2).  Again
> > all the resulting values were close to 0.05 as ought to be the case.
> > (So rchisq() appears to be OK in this regard.)
>
> Also qnorm(runif(n)) seems to be closer to the target.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 08:42:45 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 09:42:45 +0200 (MET DST)
Subject: homedrive in Rconsole.Rd (PR#1668)
Message-ID: <200206140742.JAA27561@pubhealth.ku.dk>

As earlier posted this day on R-help (thread: "[R] Problem about
Rconsole: R for Windows Version 1.5.0 Patched (2002-06-05 and
2002-06-12)", there seems to be a documentation bug for ?Rconsole. 

>From ?Rconsole, section Details:

   If the environment variable `R_USER' is not set, the R system sets
   it to `HOME' if that is set (stripping any trailing slash),
   otherwise to `HOMEDIR:HOMEPATH' if `HOMEDIR' is set otherwise to
   the working directory.

HOMEDIR should be replaced by HOMEDRIVE in this section:


 diff  ...../src/library/base/man/windows/Rconsole.Rd  Rconsole-new.Rd

32c32
<   slash), otherwise to \code{HOMEDIR:HOMEPATH} if \code{HOMEDIR} is
set
---
>   slash), otherwise to \code{HOMEDRIVE:HOMEPATH} if \code{HOMEDRIVE} is set


[R-1.5.0 patched (2002-06-12), Windows NT 4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 14 09:14:29 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2002 10:14:29 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
References: <200206132239.AAA25804@pubhealth.ku.dk>
 <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
Message-ID: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> wrote:
> 
> >With your script, I get a nice horizontal line both with 1.4.0 and
> >1.5.0-patched.
> >
> >(RedHat Linux 7.1 on a PC) 
> 
> I get what Rolf described in 1.5.0-patched for Windows with the
> default generators: 
> 
> RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"  
> 
> I switched to the Ahrens-Dieter normal RNG (using
> RNGkind(,'Ahrens-Dieter')), and things were fine.  
> 
> Keeping the default normal generator but switching to the
> Mersenne-Twister uniform also fixed it:
> 
> > RNGkind()
> [1] "Mersenne-Twister" "Kinderman-Ramage"
> 
> Is it possible you're not using the default generators?  If you are,
> this is quite weird, because we're on the same hardware.  Why would
> the OS or compiler matter in a calculation like this??
> 
> Duncan Murdoch
> 

Now this is pretty darn odd....

This is what happened to me yesterday with 1.4.0:

[Previously saved workspace restored]

> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 39
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 37
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 63
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 50
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51

This morning, I get

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"    
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 27
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 23
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29

with the SAME version of R. The only difference is the startup
directory, and hence the saved workspace. This contains:

> ls(all=T)
[1] ".Random.seed" "x"            "y"           
> .Random.seed
[1]     0 25300 11635 10783

..whereas 1.5.0 which now again shows trouble has

>  .Random.seed
[1]         1 196857153 319227924

and 1.4.0 in a clean dir has this after a few iterations of the above

>  .Random.seed
[1]          1 1297109091   47580530


Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
no matter what RNGkind() is telling me??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 10:03:45 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 10:03:45 +0100 (BST)
Subject: What RNGkind does (was Re: Bug in rnorm. (PR#1664))
In-Reply-To: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0206140949330.6521-100000@gannet.stats>

Just so we understand:

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> .Random.seed <- c(0, 1, 2, 3)
> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> runif(1)
[1] 0.03381877
> RNGkind()
[1] "Wichmann-Hill"    "Kinderman-Ramage"

?RNGkind says

`RNGkind' returns a two-element character vector of the RNG and
normal kinds in use before the call,
                    ^^^^^^
However, any use of the random number generators themselves loads
.Random.seed (if it exist), and that will set the types of random
numbers in use.  So if a user changes .Random.seed (for example by
loading a saved workspace) the types will change.  RNGkind() reports
retrospectively (as it is documented to), not prospectively.

Now we could alter RNGkind() to read in the current .Random.seed (if there
is one) although it is a bit tricky to decide what to do if the value is
invalid.  (The random-number generation code throws an error and
expects thse user to fix, e.g  remove, .Random.seed.)


On 14 Jun 2002, Peter Dalgaard BSA wrote:

> Duncan Murdoch <dmurdoch@pair.com> writes:
>
> > On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> > wrote:
> >
> > >With your script, I get a nice horizontal line both with 1.4.0 and
> > >1.5.0-patched.
> > >
> > >(RedHat Linux 7.1 on a PC)
> >
> > I get what Rolf described in 1.5.0-patched for Windows with the
> > default generators:
> >
> > RNGkind()
> > [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> >
> > I switched to the Ahrens-Dieter normal RNG (using
> > RNGkind(,'Ahrens-Dieter')), and things were fine.
> >
> > Keeping the default normal generator but switching to the
> > Mersenne-Twister uniform also fixed it:
> >
> > > RNGkind()
> > [1] "Mersenne-Twister" "Kinderman-Ramage"
> >
> > Is it possible you're not using the default generators?  If you are,
> > this is quite weird, because we're on the same hardware.  Why would
> > the OS or compiler matter in a calculation like this??
> >
> > Duncan Murdoch
> >
>
> Now this is pretty darn odd....
>
> This is what happened to me yesterday with 1.4.0:
>
> [Previously saved workspace restored]
>
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 39
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 37
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 63
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 50
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
>
> This morning, I get
>
> > RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 27
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 23
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
>
> with the SAME version of R. The only difference is the startup
> directory, and hence the saved workspace. This contains:
>
> > ls(all=T)
> [1] ".Random.seed" "x"            "y"
> > .Random.seed
> [1]     0 25300 11635 10783
>
> ..whereas 1.5.0 which now again shows trouble has
>
> >  .Random.seed
> [1]         1 196857153 319227924
>
> and 1.4.0 in a clean dir has this after a few iterations of the above
>
> >  .Random.seed
> [1]          1 1297109091   47580530
>
>
> Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
> no matter what RNGkind() is telling me??



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 17:50:01 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 18:50:01 +0200 (MET DST)
Subject: minor quirk in rnbinom (PR#1669)
Message-ID: <200206141650.SAA04208@pubhealth.ku.dk>

Just for the records (was on R-help).

Uwe Ligges

-------- Original Message --------
Subject: Re: [R] minor quirk in rnbinom
Date: Fri, 14 Jun 2002 18:47:59 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
To: Mike Lonergan <mel@mcs.st-and.ac.uk>
CC: r-help <r-help@stat.math.ethz.ch>
References: <NEBBJLLBCLEDFLCCBKDAEEEKCGAA.mel@mcs.st-andrews.ac.uk>

Mike Lonergan wrote:
> 
> I don't want to spoil a nice joke, and recognise it's not a bug as it does
> have the intended effect, but the error message that is returned if rnbinom
> is given four parameters is slightly obscure:
> 
> > rnbinom(0.5,0.5,0.5,0.5)
> Error in rnbinom(0.5, 0.5, 0.5, 0.5) : couldn't find function "error"


That's a bug, of course 

  error("prob and mu both specified")

should be

  stop("prob and mu both specified")

in that function.

[R-1.5.0 patched 2002-06-12, WinNT4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Jun 14 19:04:43 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 14 Jun 2002 14:04:43 -0400
Subject: pretty() sometimes isn't
Message-ID: <15626.12347.920840.33141@gargle.gargle.HOWL>

Hi all,

R> seq(-.4, .8, length=7)
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

Well that may not be a "bug", but it has this unfortunate consequence:

R> pretty(c(-.4,.8))
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

And thus my plot axes look funny unless I apply zapsmall:
R> plot(c(-.4,.8), c(-.4,.8), axes=F)
R> axis(1, at=pretty(c(-.4,.8)))               # Yuck!
R> axis(2, at=zapsmall(pretty(c(-.4,.8))))     # Better!

So here's my simple suggestion: change the last line of pretty() from:
   seq(z$l, z$u, length = z$n + 1)
to:
   zapsmall(seq(z$l, z$u, length = z$n + 1))

I'm running R-1.5.0 on platform sparc-sun-solaris2.6.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 14 20:00:27 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 14 Jun 2002 15:00:27 -0400
Subject: Methods package
Message-ID: <3D0A3D4B.E792914@research.bell-labs.com>

There is a new installation of the methods package on r-devel.  Two main
changes:

1.  generic functions are now an actual class (which extends
"function").

2.  method definitions are specific to the package associated with the
generic function, as well as with the name of the generic.

The second change will help methods fit in with name spaces and should
get over problems with conflicting generic function names.

You will have to re-install any of your own packages from source, if you
have been using the result of INSTALL --save (because the meta-object
names now include the package, for one reason).

The symptom that you need to do that is a warning about "methods object
... has no package name" when you attach your package.

Otherwise there should be no change needed for current applications.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:00:08 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:00:08 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151000.MAA06063@pubhealth.ku.dk>

Full_Name: Jeremy Fox
Version: 1.5.0
OS: Solaris 8, 64 bit
Submission from: (NULL) (171.64.232.63)



I am compiling R under Solaris and the compilation stops at this point. The
problem only happens when I link in readline. The R binary is actually compiled
and readlne works.
The main problem with the compiled  binary (other than that all the supporting
files were not
correctly installed) is that it prints out the error 

Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  

the first time I try to do something. It generally prints out only once, but may
be the
cause of the problem with the break in the make process I am worried about.

I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
Appendix
B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
definiteness, they are

CC="cc -xarch=v9"
CFLAGS="-xO5 -xlibmil -dalign"
F77="f95 -xarch=v9"
FFLAGS="-xO5 -xlibmil -dalign"
CXX=CC
CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"

Without readline, the make command exectutes fine.  Here is the actual bug

mkdir -p -- ../../../../library/methods/libs
make[5]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Entering directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
dumping R code in package 'methods'
Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  
Error in file == "" : comparison (1) is possible only for atomic types
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1


The file all.rda is not created. This may be because of this unimportant error
message
about ctest that somehow involves the readline package. I am using Readline
4.2a.

Thanks for any help, Jeremy


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 15 11:13:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 15 Jun 2002 12:13:51 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151013.MAA06104@pubhealth.ku.dk>

1) Was readline compiled under those same flags?  Was it compiled
under 64-bit mode at all?  (The manual does warn about that.)

2) You should be able to get ctest built by

(cd src/library/ctest; make)

but that should have happened anyway.

3) The actual error seems to be in interpreting the methods code.
That has nothing to do with readline (it is run in batch mode) so
there must be another difference.  It all points to problems with your
readline library.

Are you sure that there are not earlier error messages you have
overlooked/ignored?

On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:

> Full_Name: Jeremy Fox
> Version: 1.5.0
> OS: Solaris 8, 64 bit
> Submission from: (NULL) (171.64.232.63)
>
>
>
> I am compiling R under Solaris and the compilation stops at this point. The
> problem only happens when I link in readline. The R binary is actually compiled
> and readlne works.
> The main problem with the compiled  binary (other than that all the supporting
> files were not
> correctly installed) is that it prints out the error
>
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
>
> the first time I try to do something. It generally prints out only once, but may
> be the
> cause of the problem with the break in the make process I am worried about.
>
> I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> Appendix
> B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> definiteness, they are
>
> CC="cc -xarch=v9"
> CFLAGS="-xO5 -xlibmil -dalign"
> F77="f95 -xarch=v9"
> FFLAGS="-xO5 -xlibmil -dalign"
> CXX=CC
> CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
>
> Without readline, the make command exectutes fine.  Here is the actual bug
>
> mkdir -p -- ../../../../library/methods/libs
> make[5]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Entering directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> dumping R code in package 'methods'
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
> Error in file == "" : comparison (1) is possible only for atomic types
> Execution halted
> make[4]: *** [../../../library/methods/R/all.rda] Error 1
>
>
> The file all.rda is not created. This may be because of this unimportant error
> message
> about ctest that somehow involves the readline package. I am using Readline
> 4.2a.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:43:04 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:43:04 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151043.MAA06185@pubhealth.ku.dk>

Thanks for the quick reply.

On Sat, Jun 15, 2002 at 11:12:55AM +0100, ripley@stats.ox.ac.uk wrote:
> 1) Was readline compiled under those same flags?  Was it compiled
> under 64-bit mode at all?  (The manual does warn about that.)

Which manual? But anyway, I double checked and the version of readline
that I compiled uses the exact same flags. The configure script also
does not recognize readline when I do not link in the directory where
I compiled readline, so it is not a case of some other 32 bit readline
library being read in.

> 2) You should be able to get ctest built by
> 
> (cd src/library/ctest; make)
> 
> but that should have happened anyway.

It compiled fine but R does not stop its error message.

> 3) The actual error seems to be in interpreting the methods code.
> That has nothing to do with readline (it is run in batch mode) so
> there must be another difference.  It all points to problems with your
> readline library.

OK.

> Are you sure that there are not earlier error messages you have
> overlooked/ignored?

Here are the two warnings before the fatal errors. I checked the line
numbers and I would think these files are not causing the problems I
am experiencing. I am certain the X libraries and whatever is being
read in from /usr/local/include are not 64 bit, but X11() seems to
work fine anyway.

cc -xarch=v9 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H   -xO5 -xlibmil -dalign -c graphics.c -o graphics.o
"graphics.c", line 5358: warning: initializer does not fit or is out of range: -1

cc -xarch=v9 -I. -I../../../src/include -I../../../src/include -I/usr/pubsw/X11R6/include -I/usr/local/include -DHAVE_CONFIG_H  -KPIC  -xO5 -xlibmil -dalign -c devX11.c -o .libs/devX11.o
"devX11.c", line 1081: warning: statement not reached
"devX11.c", line 1095: warning: statement not reached
"devX11.c", line 1407: warning: statement not reached

Thanks, Jeremy

> On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:
> 
> > Full_Name: Jeremy Fox
> > Version: 1.5.0
> > OS: Solaris 8, 64 bit
> > Submission from: (NULL) (171.64.232.63)
> >
> >
> >
> > I am compiling R under Solaris and the compilation stops at this point. The
> > problem only happens when I link in readline. The R binary is actually compiled
> > and readlne works.
> > The main problem with the compiled  binary (other than that all the supporting
> > files were not
> > correctly installed) is that it prints out the error
> >
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> >
> > the first time I try to do something. It generally prints out only once, but may
> > be the
> > cause of the problem with the break in the make process I am worried about.
> >
> > I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> > Appendix
> > B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> > definiteness, they are
> >
> > CC="cc -xarch=v9"
> > CFLAGS="-xO5 -xlibmil -dalign"
> > F77="f95 -xarch=v9"
> > FFLAGS="-xO5 -xlibmil -dalign"
> > CXX=CC
> > CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
> >
> > Without readline, the make command exectutes fine.  Here is the actual bug
> >
> > mkdir -p -- ../../../../library/methods/libs
> > make[5]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Entering directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> > dumping R code in package 'methods'
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> > Error in file == "" : comparison (1) is possible only for atomic types
> > Execution halted
> > make[4]: *** [../../../library/methods/R/all.rda] Error 1
> >
> >
> > The file all.rda is not created. This may be because of this unimportant error
> > message
> > about ctest that somehow involves the readline package. I am using Readline
> > 4.2a.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
------------------------
Jeremy T. Fox
jerfox@stanford.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcmahill@mtl.mit.edu  Sun Jun 16 00:21:53 2002
From: mcmahill@mtl.mit.edu (mcmahill@mtl.mit.edu)
Date: Sun, 16 Jun 2002 01:21:53 +0200 (MET DST)
Subject: R configure.in makes bad alpha assumptions (PR#1676)
Message-ID: <200206152321.BAA07428@pubhealth.ku.dk>


Hi,

I was looking at configure.in for R-1.4.1 and in the
  case "${host_cpu}" in
part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
is an OSF specific, not alpha specific issue.  In particular, if someone
used f2c-f77 (shell script which emulates a fortran compiler with f2c and
the c compiler), they'd get the broken -fpe3.  I'd probably either test
for OSF before adding -fpe3


-dan




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Sun Jun 16 00:38:41 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Sun, 16 Jun 2002 01:38:41 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206152338.BAA07466@pubhealth.ku.dk>

Full_Name: Michael Peck
Version: 1.5.0 (12 Jun patch)
OS: win2k + sp2
Submission from: (NULL) (65.113.251.175)


Bookmarks from table of contents as well as links in text and index do not
work.

Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
4.0, so I downloaded the most recent version].

OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

This appears to be the same problem reported in message ID 1550 now listed in
documentation-fixed.

Michael Peck


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 16 01:34:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Jun 2002 02:34:23 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206160034.CAA07528@pubhealth.ku.dk>

This is not reproducible with a clean build from the sources of June 15
using the recommended tools.

If you still find a problem with the current R-patched, please supply
details of how exactly you built refman.pdf, including the version numbers
of pdftex, hyperref, latex, etc.

On Sun, 16 Jun 2002 mpeck1@ix.netcom.com wrote:

> Full_Name: Michael Peck
> Version: 1.5.0 (12 Jun patch)
> OS: win2k + sp2
> Submission from: (NULL) (65.113.251.175)
>
>
> Bookmarks from table of contents as well as links in text and index do not
> work.
>
> Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
> 4.0, so I downloaded the most recent version].
>
> OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

And verified by your own build on what system?  Your subject line implies
the problem is in R, not a particular binary, so we must assume that you
did build refman.pdf yourself.

> This appears to be the same problem reported in message ID 1550 now listed in
> documentation-fixed.

Please verify that by looking at the PDF file in a text editor and checking
that there is an invalid link for `(-class' (no matching right
parenthesis).  If there is, the file has not been generated by R-patched
recently.  If not, it is not the same bug.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xint@stat.rutgers.edu  Sun Jun 16 04:43:01 2002
From: xint@stat.rutgers.edu (xint@stat.rutgers.edu)
Date: Sun, 16 Jun 2002 05:43:01 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206160343.FAA07762@pubhealth.ku.dk>

Full_Name: Xin Tian
Version: 1.5.0 or 1.4.0
OS: windows 2000
Submission from: (NULL) (165.230.240.114)


I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
After installation, whenever I clicked R icon, it returned to me an
 error message:
"Rgui.exe has generated errors and will be closed by windows. You 
 will need to restart the program. 
An error log is being created."

So I could NOT start up R.

I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
But I tried to install R several times to my PC this time using windows2000 and
had the above problem.  I know R works fine in my friend's computer with windows
2000.
I have seen this problem in old R mailling list, but I don't know if
there are any solutions yet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 07:05:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 08:05:49 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206170605.IAA08603@pubhealth.ku.dk>

Those versions do run on Windows 2000, so the problem is with your
machine.  Can you send the error log?

Can we suggest reinstalling Windows?

On Sun, 16 Jun 2002 xint@stat.rutgers.edu wrote:

> Full_Name: Xin Tian
> Version: 1.5.0 or 1.4.0
> OS: windows 2000
> Submission from: (NULL) (165.230.240.114)
>
>
> I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
> After installation, whenever I clicked R icon, it returned to me an
>  error message:
> "Rgui.exe has generated errors and will be closed by windows. You
>  will need to restart the program.
> An error log is being created."
>
> So I could NOT start up R.
>
> I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
> But I tried to install R several times to my PC this time using windows2000 and
> had the above problem.  I know R works fine in my friend's computer with windows
> 2000.
> I have seen this problem in old R mailling list, but I don't know if
> there are any solutions yet.

In all cases, corrupted versions of Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Mon Jun 17 08:50:55 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Mon, 17 Jun 2002 09:50:55 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170750.JAA10383@pubhealth.ku.dk>

I sent this reply to Prof. Ripley earlier today, but failed to include his 
copy to recipients.

The issue, assuming it's not my own stupidity, is with the precompiled 
binary distribution for Windows dated 12 June that is now available on CRAN.

Looking again at his reply I see that he asked me a question that I'm 
actually equipped to answer:

> > This appears to be the same problem reported in message ID 1550 now 
> listed in
> > documentation-fixed.
>Please verify that by looking at the PDF file in a text editor and checking
>that there is an invalid link for `(-class' (no matching right

The only match I found for this string contained the text '(Rfn.(-class)' 
with white space on either side of the quoted string. There is no second 
parenthesis visible nearby.

At 17:32 6/15/2002 -0700, you wrote:
>This is not reproducible with a clean build from the sources of June 15
>using the recommended tools.
>
>If you still find a problem with the current R-patched, please supply
>details of how exactly you built refman.pdf, including the version numbers
>of pdftex, hyperref, latex, etc.

Sorry, I must not have been clear enough. I installed from the precompiled 
binary distribution for windows downloaded from CRAN. The file I installed 
from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do 
the build myself.

If this is any help here is the output of R.version:

>          _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status   Patched
>major    1
>minor    5.0
>year     2002
>month    06
>day      12
>language R

Thanks -

Michael Peck

------
Michael Peck
mpeck1@ix.netcom.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 09:09:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 10:09:11 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170809.KAA10745@pubhealth.ku.dk>

This is a reasonable clear indication that the pre-compiled version has
not be made from scratch since May 15, when PR#1550 was fixed.
The date on library/methods/latex/LanguageClasses.tex will be the clue.

The dependencies in the Makefiles do not pick up revisions of the tools
used.  I *always* do make distclean before generating a distribution.


On Mon, 17 Jun 2002 mpeck1@ix.netcom.com wrote:

> I sent this reply to Prof. Ripley earlier today, but failed to include his
> copy to recipients.
>
> The issue, assuming it's not my own stupidity, is with the precompiled
> binary distribution for Windows dated 12 June that is now available on CRAN.
>
> Looking again at his reply I see that he asked me a question that I'm
> actually equipped to answer:
>
> > > This appears to be the same problem reported in message ID 1550 now
> > listed in
> > > documentation-fixed.
> >Please verify that by looking at the PDF file in a text editor and checking
> >that there is an invalid link for `(-class' (no matching right
>
> The only match I found for this string contained the text '(Rfn.(-class)'
> with white space on either side of the quoted string. There is no second
> parenthesis visible nearby.
>
> At 17:32 6/15/2002 -0700, you wrote:
> >This is not reproducible with a clean build from the sources of June 15
> >using the recommended tools.
> >
> >If you still find a problem with the current R-patched, please supply
> >details of how exactly you built refman.pdf, including the version numbers
> >of pdftex, hyperref, latex, etc.
>
> Sorry, I must not have been clear enough. I installed from the precompiled
> binary distribution for windows downloaded from CRAN. The file I installed
> from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do
> the build myself.
>
> If this is any help here is the output of R.version:
>
> >          _
> >platform i386-pc-mingw32
> >arch     i386
> >os       mingw32
> >system   i386, mingw32
> >status   Patched
> >major    1
> >minor    5.0
> >year     2002
> >month    06
> >day      12
> >language R
>
> Thanks -
>
> Michael Peck
>
> ------
> Michael Peck
> mpeck1@ix.netcom.com
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 11:04:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 12:04:47 +0200
Subject: R configure.in makes bad alpha assumptions (PR#1676)
In-Reply-To: <200206152321.BAA07428@pubhealth.ku.dk>
References: <200206152321.BAA07428@pubhealth.ku.dk>
Message-ID: <15629.46143.876111.705355@mithrandir.hornik.net>

>>>>> mcmahill  writes:

> Hi,

> I was looking at configure.in for R-1.4.1 and in the
>   case "${host_cpu}" in
> part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
> is an OSF specific, not alpha specific issue.  In particular, if someone
> used f2c-f77 (shell script which emulates a fortran compiler with f2c and
> the c compiler), they'd get the broken -fpe3.  I'd probably either test
> for OSF before adding -fpe3

This was changed for R 1.5.0, can you pls try with this?  (Or with 1.5.1
which will be released in a few moments ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 17 14:11:20 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 17 Jun 2002 15:11:20 +0200 (MET DST)
Subject: overzealous help-links.sh script! (PR#1682)
Message-ID: <200206171311.PAA15557@pubhealth.ku.dk>

Starting html help in the current version of R has a very annoying 
side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a 
virgin copy. I discovered that when all of a sudden I got complaints about 
my startup "library" not being found.
Below is a modified version of the script that doesn't do this. It is not 
perfect yet (it shouldn't try to recreate links that already exists; there 
must be a glitch in the multi-test if lines) but it is safer than the 
previous version!

RenE Bertin


#! /bin/sh

# 20020615 RJVB : I modified this script such that it will not at each 
invocation throw away the ~/.R directory
# with all that it contains (including stuff the user might have 
installed!!)
# Instead, it will create what doesn't exist, and warn whenever an error 
occurs (= a dir can't be made because a file
# with the same name exists.
# For the links, I try to be clever, and put in only those that aren't there 
yet, but this doesn't yet function
# correctly with the single-line-2-test expression. Therefore, all output 
from ln is thrown away :)

USER_R_HOME="${HOME}/.R"
PKGLIST="${USER_R_HOME}/doc/html/packages.html"
SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
# RJVB: don't do this!!
# rm -rf ${USER_R_HOME}

dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html 
${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
for d in ${dirs}; do
# RJVB
    if [ ! -e ${d} ] ;then
	    mkdir -p ${d}
	elif [ ! -d ${d} ] ;then
		echo "Warning: ${d} already exists but is not a directory!"
	fi
done

for f in AUTHORS COPYING THANKS; do
# RJVB
  if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
    ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
  fi
done

# RJVB
if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
  ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
fi

for f in ${R_HOME}/doc/html/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
    fi
done

for f in ${R_HOME}/doc/html/search/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
    fi
done

rm -f ${PKGLIST}
rm -f ${SEARCHINDEX}
cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}

get_unique () {
  if test -r ${1}; then
    x="1"
    while test -r ${1}.${x}; do
      x=`echo "$x+1" | bc`
    done
    echo ${1}.${x}
  else
    echo $1
  fi
}


for lib in $*; do
    echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
    echo "<p><table width=\"100%\">" >> ${PKGLIST}
    if test -d ${lib}; then
      for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
	if test -d ${pkg}; then
	    pkgname=`basename ${pkg}`
	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
	    targetname=`basename ${target}`
	    ln -s ${pkg} ${target}
	    if test -r ${pkg}/TITLE; then
		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
	    else
		pkgtitle=""
	    fi
	    echo "<tr align=\"left\" valign=\"top\">
		    <td width=\"25%\"><a 
href=\"../../library/${targetname}/html/00Index.html\">
		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
		>> ${PKGLIST}

	    cat ${pkg}/CONTENTS | \
	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
	      >> ${SEARCHINDEX}


	fi
      done
    fi
    echo "</table>" >> ${PKGLIST}
    echo "" >> ${PKGLIST}
done

echo "</body></html>" >> ${PKGLIST}
ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1

### Local Variables: ***
### mode: sh ***
### sh-indentation: 2 ***
### End: ***


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jun 17 14:35:43 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 17 Jun 2002 15:35:43 +0200
Subject: grid not included in recommended
Message-ID: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>

Hi!

Looks like "grid" is not included in the recommended packages tarball
R-1.5.1-recommended.tar.gz ...

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 14:45:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 15:45:18 +0200
Subject: grid not included in recommended
In-Reply-To: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
Message-ID: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Hi!
> 
> Looks like "grid" is not included in the recommended packages tarball
> R-1.5.1-recommended.tar.gz ...

Argh! That's because it isn't in the directory on CRAN. If someone
would put it in, I'll roll up a replacement version.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 14:57:10 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 15:57:10 +0200
Subject: grid not included in recommended
In-Reply-To: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60086.374739.309422@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
>> Hi!
>> 
>> Looks like "grid" is not included in the recommended packages tarball
>> R-1.5.1-recommended.tar.gz ...

> Argh! That's because it isn't in the directory on CRAN. If someone
> would put it in, I'll roll up a replacement version.

Done.  How could this go unnoticed?  Argh ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:03:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:03:37 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60086.374739.309422@mithrandir.hornik.net>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
Message-ID: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> >> Hi!
> >> 
> >> Looks like "grid" is not included in the recommended packages tarball
> >> R-1.5.1-recommended.tar.gz ...
> 
> > Argh! That's because it isn't in the directory on CRAN. If someone
> > would put it in, I'll roll up a replacement version.
> 
> Done.  How could this go unnoticed?  Argh ...

Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 17 15:09:22 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 17 Jun 2002 16:09:22 +0200
Subject: grid not included in recommended
In-Reply-To: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>

>>>>> On 17 Jun 2002 16:03:37 +0200,
>>>>> Peter Dalgaard BSA (PDB) wrote:

  > Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
  >> >>>>> Peter Dalgaard BSA writes:
  >> 
  >> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
  >> >> Hi!
  >> >> 
  >> >> Looks like "grid" is not included in the recommended packages tarball
  >> >> R-1.5.1-recommended.tar.gz ...
  >> 
  >> > Argh! That's because it isn't in the directory on CRAN. If someone
  >> > would put it in, I'll roll up a replacement version.
  >> 
  >> Done.  How could this go unnoticed?  Argh ...

  > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

Yes he can (and did) :-)

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:17:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:17:39 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
Message-ID: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>

Friedrich.Leisch@ci.tuwien.ac.at writes:

>   >> > Argh! That's because it isn't in the directory on CRAN. If someone
>   >> > would put it in, I'll roll up a replacement version.
>   >> 
>   >> Done.  How could this go unnoticed?  Argh ...
> 
>   > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
> 
> Yes he can (and did) :-)

Thanks! It's a little irregular to have the same file released in
different versions so it was important to get everything updated
before any mirroring took place.

We need automated build and check procedures for "the whole thing". We
discussed this before and I think this little event only underlines
the need. Hopefully in 1.6.x.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 16:15:43 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 08:15:43 -0700
Subject: grid not included in recommended
In-Reply-To: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
 <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
Message-ID: <873cvmlyw0.fsf@jeeves.blindglobe.net>


Any chance we can get this re-released as 1.5.2 ?

>>>> "peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
P
    peter> Friedrich.Leisch@ci.tuwien.ac.at writes:
    >> >> > Argh! That's because it isn't in the directory on CRAN. If someone
    >> >> > would put it in, I'll roll up a replacement version.
    >> >> 
    >> >> Done.  How could this go unnoticed?  Argh ...
    >> 
    >> > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
    >> 
    >> Yes he can (and did) :-)

    peter> Thanks! It's a little irregular to have the same file released in
    peter> different versions so it was important to get everything updated
    peter> before any mirroring took place.

    peter> We need automated build and check procedures for "the whole thing". We
    peter> discussed this before and I think this little event only underlines
    peter> the need. Hopefully in 1.6.x.

    peter>         -p

    peter> -- 
    peter>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
    peter>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
    peter>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
    peter> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
    peter> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    peter> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    peter> Send "info", "help", or "[un]subscribe"
    peter> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    peter> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:24:25 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:24:25 -0400
Subject: Potential recompilation of certain packages
Message-ID: <20020617122424.A10644@jessie.research.bell-labs.com>

This applies to people working with the up-to-the-minute source taken
directly or indirectly from the CVS repository. Changes to the
mechanism for registering native (C and Fortran) routines in
DLLs/shared libraries and the package level data structures mean that
you will have to recompile any package that uses this approach to
exporting routines. These include all of the MASS packages, but few
others (yet :-)). No changes to those packages are necessary, just a
simple re-installation.

The changes allow one to specify types for the parameter of the
routines, and also whether they contain useful output values when
returned to R. These have the potential to avoid unecessary copying
and are more robust to errors in types passed to the routines.

Sorry for any inconvenience.

 Duncan

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 17:29:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 09:29:09 -0700
Subject: Potential recompilation of certain packages
In-Reply-To: <20020617122424.A10644@jessie.research.bell-labs.com>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
Message-ID: <87vg8hrhre.fsf@jeeves.blindglobe.net>


And the obvious question, given the timing, 
"does this apply to 1.5.1?"

best,
-tony

>>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    duncan> This applies to people working with the up-to-the-minute
    duncan> source taken directly or indirectly from the CVS
    duncan> repository. Changes to the mechanism for registering
    duncan> native (C and Fortran) routines in DLLs/shared libraries
    duncan> and the package level data structures mean that you will
    duncan> have to recompile any package that uses this approach to
    duncan> exporting routines. These include all of the MASS
    duncan> packages, but few others (yet :-)). No changes to those
    duncan> packages are necessary, just a simple re-installation.

    duncan> The changes allow one to specify types for the parameter
    duncan> of the routines, and also whether they contain useful
    duncan> output values when returned to R. These have the potential
    duncan> to avoid unecessary copying and are more robust to errors
    duncan> in types passed to the routines.



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 17 17:31:36 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jun 2002 18:31:36 +0200
Subject: logicals in data frames -- as.data.frame() should allow them
Message-ID: <15630.3816.296979.38378@gargle.gargle.HOWL>

Currently, as.data.frame() , i.e., at least its "matrix" method,
still coerces logicals to factors.  I think this is not desired
and not according to the changes to read.table() for R 1.4.0
which allow logicals.

Does anybody see a reason against a change which would allow
logical matrices to become data.frames with logical variables ? 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 17:36:26 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 18:36:26 +0200
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
 <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <x2znxt50c5.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

No. Bleeding edge, i.e., what might become 1.6.0, only. (Or DTL would
have made himself *very* unpopular.)

> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:36:30 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:36:30 -0400
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Mon, Jun 17, 2002 at 09:29:09AM -0700
References: <20020617122424.A10644@jessie.research.bell-labs.com> <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <20020617123630.B10644@jessie.research.bell-labs.com>

A.J. Rossini wrote:
> 
> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

Good question. No, it should not have anything to do with that.  And,
my guess is that you will notice it immediately on calling library()
on any of the affected packages with a large seg-fault. At least its
dramatic :-)

 D.

> 
> best,
> -tony
> 
> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS
>     duncan> repository. Changes to the mechanism for registering
>     duncan> native (C and Fortran) routines in DLLs/shared libraries
>     duncan> and the package level data structures mean that you will
>     duncan> have to recompile any package that uses this approach to
>     duncan> exporting routines. These include all of the MASS
>     duncan> packages, but few others (yet :-)). No changes to those
>     duncan> packages are necessary, just a simple re-installation.
> 
>     duncan> The changes allow one to specify types for the parameter
>     duncan> of the routines, and also whether they contain useful
>     duncan> output values when returned to R. These have the potential
>     duncan> to avoid unecessary copying and are more robust to errors
>     duncan> in types passed to the routines.
> 
> 
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 17:41:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 17:41:47 +0100 (BST)
Subject: logicals in data frames -- as.data.frame() should allow them
In-Reply-To: <15630.3816.296979.38378@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0206171739110.8715-100000@gannet.stats>

On Mon, 17 Jun 2002, Martin Maechler wrote:

> Currently, as.data.frame() , i.e., at least its "matrix" method,
> still coerces logicals to factors.  I think this is not desired
> and not according to the changes to read.table() for R 1.4.0
> which allow logicals.
>
> Does anybody see a reason against a change which would allow
> logical matrices to become data.frames with logical variables ?

It's what S4 does: not changing as.data.frame.matrix was an oversight on
my part.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Mon Jun 17 20:23:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Mon, 17 Jun 2002 21:23:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206171923.VAA17524@pubhealth.ku.dk>

Full_Name: Jrgen Henge-Ernst
Version: 1.5.1
OS: linux
Submission from: (NULL) (130.83.244.130)


There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
test
by running the R-check

hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
* checking for working latex ... OK
* using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'

* Installing *binary* package 'MASS' ...
* DONE (MASS)

* DONE (INSTALL)

* checking for file 'MASS/DESCRIPTION' ... OK
* checking package directory ... OK
* checking for sufficient/correct file permissions ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... OK
* checking R files for syntax errors ... ERROR
Syntax error in file



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 21:00:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 22:00:11 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206172000.WAA17620@pubhealth.ku.dk>

That's not an error in the VR bundle (sic), but it is an error *by you* in
the usage of R CMD check (sic).  From `Writing R extensions'

<p>Using <code>R CMD check</code>, the R package checker, one can test whether
<em>source</em> R packages work correctly.

and the under-qualified pilot applied it to a *binary* installed package,
despite the emphasized warning.


On Mon, 17 Jun 2002 juergen@henge-ernst.de wrote:

> Full_Name: Jrgen Henge-Ernst
> Version: 1.5.1
> OS: linux
> Submission from: (NULL) (130.83.244.130)
>
>
> There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
> test
> by running the R-check
>
> hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
> * checking for working latex ... OK
> * using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'
>
> * Installing *binary* package 'MASS' ...
> * DONE (MASS)
>
> * DONE (INSTALL)
>
> * checking for file 'MASS/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... OK
> * checking R files for syntax errors ... ERROR
> Syntax error in file
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 22:38:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 23:38:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <x2lm9d37t1.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> That's not an error in the VR bundle (sic), but it is an error *by you* in
> the usage of R CMD check (sic).  From `Writing R extensions'
> 
> <p>Using <code>R CMD check</code>, the R package checker, one can test whether
> <em>source</em> R packages work correctly.
> 
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

Or, to put it differently, what you *should* have done was

<install R + recommended packages>
tar xfz Recommended/VR_7.0-3.tar.gz 
R CMD check VR

(A couple of gotchas in that: You cannot check MASS by itself, only
the entire VR bundle, and you need the other packages installed or the
check chokes on library(nlme))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Jun 18 03:00:50 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 17 Jun 2002 21:00:50 -0500
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <20020618020050.GA20949@sonny.eddelbuettel.com>

On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

I wonder if "R CMD check ... " could abort with an error message if it is
applied to a binary package?  
 
Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 07:51:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 07:51:06 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <20020618020050.GA20949@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>

On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:

> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> > and the under-qualified pilot applied it to a *binary* installed package,
> > despite the emphasized warning.
>
> I wonder if "R CMD check ... " could abort with an error message if it is
> applied to a binary package?

I am not sure how simple that is.  It used to be hard to tell source and
binary packages apart.  What we can do is to test for Built: in the
DESCRIPTION file, which will cope with people who have built the package
recently.

The trouble with idiot-proofing is anticipating the idiot: as far as I am
aware this is a first.

In all other cases I tried the INSTALL part of R CMD check failed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Tue Jun 18 08:37:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Tue, 18 Jun 2002 09:37:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206180737.JAA19688@pubhealth.ku.dk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Tuesday 18 June 2002 08:35, you wrote:
> I seem not to have seen your apology for an incorrect report on my VR
> bundle, which was a public accusation of an error by me.
>
> Please explain why not!
I've been looking into the Docu what the R CMD check is doing or should do and 
why excatly that package is throwing that error. I've build a lot of other 
packages which seem to pass that check
e.g. GeneSOM without showing an error
The install and check ist done the following way:

unzip the tar.gz in a dirctory
cp GeneSOM/DESCRIPTION .
/usr/bin/R INSTALL -l $RPM_BUILD_ROOT/usr/lib/R/library GeneSOM
/usr/bin/R CMD check GeneSOM

But unfortunaly I haven't figured out how to use the check CMD the right way.


As there have been a lot of contib-packages which pass through that way, I 
thought there must be an error somewhere in the test-scrips.

So srory to bother you with that false alarm.

Greetings Jrgen

- -- 
 Juergen Henge-Ernst // Hauptstrasse 37 // 67591 Mlsheim // Germany
           email: juergen@henge-ernst.de        ICQ 56324358
Key fingerprint = 5FFD 89AC 6C7B 76DD 5FAC  9A3F D1A9 0C9B 3B49 67B1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQE9DuKu0akMmztJZ7ERAmW6AJwIMe90Em0TIgVlv1VY18UU7iJjqACfb9gf
3IZZ9uAz5EVgOyavdkDPvzQ=
=rqTq
-----END PGP SIGNATURE-----


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Jun 18 14:25:02 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 18 Jun 2002 09:25:02 -0400
Subject: can't find array overruns (was: help debugging segfaults)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>

Dear R-devel,

Last week I got several responses to my question about debugging segfaults
in my code (original post below).  After I changed the S_alloc() calls to
Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
did:

o  Switched to Calloc/Free.  Electric Fence did not find any problem.

o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
where arrays are accessed.  Everything ran fine.  (I did not (don't really
know easy way to) do the same thing for the Fortran subroutines (mostly
Breiman's original code) called by the C function.

o Changed to malloc()/free().  Still didn't find anything with Electric
Fence.

Can some one suggest how to proceed?  Is it still not save to assume the bug
is gone?

Regards,
Andy

> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw@merck.com]
> Sent: Wednesday, June 12, 2002 9:26 AM
> To: 'r-devel@stat.math.ethz.ch'; 'r-help@stat.math.ethz.ch'
> Subject: [R] help debugging segfaults
> 
> 
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on 
> large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c 
> contains rf(),
> a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I 
> run random
> forest with the data and setting as mentioned above, it was 
> able to finish
> growing the 7000 trees, but segfault when returning from rf() 
> to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 18 15:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2002 16:03:39 +0200
Subject: can't find array overruns (was: help debugging segfaults)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
Message-ID: <x2vg8gsmys.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Dear R-devel,
> 
> Last week I got several responses to my question about debugging segfaults
> in my code (original post below).  After I changed the S_alloc() calls to
> Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
> did:
> 
> o  Switched to Calloc/Free.  Electric Fence did not find any problem.
> 
> o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
> where arrays are accessed.  Everything ran fine.  (I did not (don't really
> know easy way to) do the same thing for the Fortran subroutines (mostly
> Breiman's original code) called by the C function.
> 
> o Changed to malloc()/free().  Still didn't find anything with Electric
> Fence.
> 
> Can some one suggest how to proceed?  Is it still not save to assume the bug
> is gone?
> 
> Regards,
> Andy

The hardcore way is to use the original code and backtrack until you
find the source of the memory corruption. I.e. in your code below, it
seems that "s" got corrupted so that NEXT_NODE(s) triggers the
segfault. So

1. Find the exact memory location with the corrupted value. 
2. Set a hardware watchpoint on that location.
3. Rerun the program with well-defined input and check whenever the
   value at the watchpoint changes. 

Very likely, the culprit will be the last change prior to the crash,
so you'd have to check the program logic carefully around that point.
If it happens at an assignment to something seemingly unrelated,
chances are that you have an array overrun. If the location changes
frequently, it can be useful to conditionalize the watchpoint (the
value of number of garbage collections can be useful for this).

The precise way to do this kind of stuff is in your friendly gdb
manual... (sorry, but it would take all day to flesh out the details)

> > The randomForest package mainly consists of two things: rf.c 
> > contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> > rfsub.f that do
> > most of the work (slightly altered from Breiman's original code).  All
> > memory allocations are done in rf.c, using S_alloc().  When I 
> > run random
> > forest with the data and setting as mentioned above, it was 
> > able to finish
> > growing the 7000 trees, but segfault when returning from rf() 
> > to R.  GDB
> > gave the following (gdb prompts removed):
> > 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> > env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> > CAR(pargs),
> > which));
> > 
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 18 16:57:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 18 Jun 2002 17:57:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
References: <20020618020050.GA20949@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
Message-ID: <15631.22606.776749.302073@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
>> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
>> > and the under-qualified pilot applied it to a *binary* installed package,
>> > despite the emphasized warning.
>> 
>> I wonder if "R CMD check ... " could abort with an error message if it is
>> applied to a binary package?

> I am not sure how simple that is.  It used to be hard to tell source
> and binary packages apart.  What we can do is to test for Built: in
> the DESCRIPTION file, which will cope with people who have built the
> package recently.

This was introduced in 1.4 I think (?) so it seems we can change the
heuristics now to rely on the correspondence Built: <-> binary.  I will
soon (once I have time again) change INSTALL accordingly.

> The trouble with idiot-proofing is anticipating the idiot: as far as I
> am aware this is a first.

> In all other cases I tried the INSTALL part of R CMD check failed.

We need better integration of INSTALL into check anyway.  But we can
have more idiot-proofing in check as well.  Something in the works is a
reorganization of INSTALL/check/build with something else needed for
creating front-matter stuff, and we also need to rethink the logic of
check (e.g., verify correctness of meta-information prior to trying to
install).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 17:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 17:33:30 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <15631.22606.776749.302073@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0206181731070.18048-100000@gannet.stats>

On Tue, 18 Jun 2002, Kurt Hornik wrote:

> >>>>> ripley  writes:
>
> > On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
> >> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> >> > and the under-qualified pilot applied it to a *binary* installed package,
> >> > despite the emphasized warning.
> >>
> >> I wonder if "R CMD check ... " could abort with an error message if it is
> >> applied to a binary package?
>
> > I am not sure how simple that is.  It used to be hard to tell source
> > and binary packages apart.  What we can do is to test for Built: in
> > the DESCRIPTION file, which will cope with people who have built the
> > package recently.
>
> This was introduced in 1.4 I think (?) so it seems we can change the
> heuristics now to rely on the correspondence Built: <-> binary.  I will
> soon (once I have time again) change INSTALL accordingly.

Not necessarily, as people do manually install packages.  I've added the
test for Built in R CMD check for 1.6.0, which should catch a lot of
misuses.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Tue Jun 18 21:51:18 2002
From: accot@free.fr (accot@free.fr)
Date: Tue, 18 Jun 2002 22:51:18 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206182051.WAA26484@pubhealth.ku.dk>

Full_Name: Johnny Accot
Version: 1.5.1
OS: Linux
Submission from: (NULL) (198.4.83.52)


Hi.

I'm having a problem with the binary read/write functions.  I'm writing a device
driver in R (why not?) and of course I have to send a couple commands to the
device.  Typically, I send one byte, receive one acknowledgement byte, send
another byte, receive an ACK, and so on.  At least this is what I would like to
do.  Instead, after writing one byte, reading its acknowledgement byte, and
writing a second byte, R hangs on the next read for an unknown reason.  I guess
this is a bug in the read/write functions.  If you have a PS/2 device you may
try to run the following code:

ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
dev <- file("/dev/psaux")
open(dev, "w+b")
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
close(dev)

which gives:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[...R hangs here...]

It first creates an ascii table, opens the PS/2 device for binary read&write,
writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
then hangs when reading the second acknowledgement byte.  If, instead, you close
the device between the two writes, it's fine:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)

This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
stick with the open-each-time strategy, but it is not very clean.

I also tried to write bytes using the writeBin command, but it says the "size=1"
is not available on my computer.  This is why I'm using the writeChar function.

Please let me know if I'm doing something wrong.  I hope not.

And thanks for the great software! :-)

Johnny

PS: if you try to run the code and don't get 250 as acknowledgement byte, it
means the PS/2 controller is not in idle state.  Very unlikely though.  Try
again as the set-default command should bring it back to its idle state.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 01:47:33 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 19 Jun 2002 02:47:33 +0200 (MET DST)
Subject: FW: [R] Problems with url/download and http_proxy (PR#1689)
Message-ID: <200206190047.CAA26946@pubhealth.ku.dk>

For the record.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, June 18, 2002 3:21 PM
To: Warnes, Gregory R
Cc: 'r-help@stat.math.ethz.ch'
Subject: RE: [R] Problems with url/download and http_proxy


The port is not supposed to be required, so rather than fix the docs can
anyone fix the problem?


On Tue, 18 Jun 2002, Warnes, Gregory R wrote:

>
> Just adding the trailing slash doesn't seem to help:
>
> 	> Sys.getenv('http_proxy')
> 	                  http_proxy
> 	"http://gproxy1.pfizer.com/"
>
> 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	connect: Cannot assign requested address
> 	unable to connect to 'gproxy1.pfizer.com'.
> 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> :
> 	        cannot open URL
> `http://cran.r-project.org/src/contrib/PACKAGES'
>
> But adding the port explicitly does:
>
> 	> Sys.getenv("http_proxy")
> 	                     http_proxy
> 	"http://gproxy1.pfizer.com:80/"
> 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	                                     description
> 	"http://cran.r-project.org/src/contrib/PACKAGES"
> 	                                           class
> 	                                           "url"
> 	                                            mode
> 	                                             "r"
> 	                                            text
> 	                                          "text"
> 	                                          opened
> 	                                        "opened"
> 	                                        can read
> 	                                           "yes"
> 	                                       can write
> 	                                            "no"
>
>
>
> even if the trailing slash is not present:
>
> > Sys.getenv("http_proxy")
>                     http_proxy
> "http://gproxy1.pfizer.com:80"
>
> > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
>                                      description
> "http://cran.r-project.org/src/contrib/PACKAGES"
>                                            class
>                                            "url"
>                                             mode
>                                              "r"
>                                             text
>                                           "text"
>                                           opened
>                                         "opened"
>                                         can read
>                                            "yes"
>                                        can write
>                                             "no"
>
>
> Perhaps the documentation for download.file should be changed to note the
> requirement of the port.  The paragraph on proxies could be changed from
>
>
>      Proxies can be specified via environment variables. Setting
>      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
>      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
>      upper-case version) is consulted and if non-empty used as a proxy
>      site.  For FTP transfers, the username and password on the proxy
>      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
>
>
> to something like:
>
>      Proxies can be specified via the environment variables `"http_proxy"'
>      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These
variables
>      must be of the form `protocol://machine.domain.tld:port'.  For FTP
>      transfers, the username and password on the proxy can be specified by
>     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
>      prevents the use of any proxy.
>
>
> -Greg
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, June 18, 2002 11:43 AM
> > To: Warnes, Gregory R
> > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > Subject: Re: [R] Problems with url/download and http_proxy
> >
> >
> > The code (which you do have available to you) says http_proxy
> >
> >  * Should be like http://myproxy/ or http://myproxy:3128/
> >
> > which yours is not, so please try that format.  The code suggests
> > that the traling / can be omitted, but the words do not.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> >
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 09:58:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jun 2002 09:58:17 +0100 (BST)
Subject: [R] Problems with url/download and http_proxy
In-Reply-To: <Pine.LNX.4.31.0206182020400.18450-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0206190956050.15670-100000@auk.stats>

It's a bug in the libxml code causing the port to be set to zero.
Comment lines like

    /*if (proxyPort != 0) {
	proxyPort = 0;
	}*/

in nanohttp.c and nanoftp.c.  (The port has already been set in the
caller.)

Please confirm that this works.


On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:

> The port is not supposed to be required, so rather than fix the docs can
> anyone fix the problem?
>
>
> On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
>
> >
> > Just adding the trailing slash doesn't seem to help:
> >
> > 	> Sys.getenv('http_proxy')
> > 	                  http_proxy
> > 	"http://gproxy1.pfizer.com/"
> >
> > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	connect: Cannot assign requested address
> > 	unable to connect to 'gproxy1.pfizer.com'.
> > 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > :
> > 	        cannot open URL
> > `http://cran.r-project.org/src/contrib/PACKAGES'
> >
> > But adding the port explicitly does:
> >
> > 	> Sys.getenv("http_proxy")
> > 	                     http_proxy
> > 	"http://gproxy1.pfizer.com:80/"
> > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	                                     description
> > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > 	                                           class
> > 	                                           "url"
> > 	                                            mode
> > 	                                             "r"
> > 	                                            text
> > 	                                          "text"
> > 	                                          opened
> > 	                                        "opened"
> > 	                                        can read
> > 	                                           "yes"
> > 	                                       can write
> > 	                                            "no"
> >
> >
> >
> > even if the trailing slash is not present:
> >
> > > Sys.getenv("http_proxy")
> >                     http_proxy
> > "http://gproxy1.pfizer.com:80"
> >
> > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> >                                      description
> > "http://cran.r-project.org/src/contrib/PACKAGES"
> >                                            class
> >                                            "url"
> >                                             mode
> >                                              "r"
> >                                             text
> >                                           "text"
> >                                           opened
> >                                         "opened"
> >                                         can read
> >                                            "yes"
> >                                        can write
> >                                             "no"
> >
> >
> > Perhaps the documentation for download.file should be changed to note the
> > requirement of the port.  The paragraph on proxies could be changed from
> >
> >
> >      Proxies can be specified via environment variables. Setting
> >      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
> >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> >      upper-case version) is consulted and if non-empty used as a proxy
> >      site.  For FTP transfers, the username and password on the proxy
> >      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
> >
> >
> > to something like:
> >
> >      Proxies can be specified via the environment variables `"http_proxy"'
> >      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These variables
> >      must be of the form `protocol://machine.domain.tld:port'.  For FTP
> >      transfers, the username and password on the proxy can be specified by
> >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
> >      prevents the use of any proxy.
> >
> >
> > -Greg
> >
> > > -----Original Message-----
> > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > To: Warnes, Gregory R
> > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > Subject: Re: [R] Problems with url/download and http_proxy
> > >
> > >
> > > The code (which you do have available to you) says http_proxy
> > >
> > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > >
> > > which yours is not, so please try that format.  The code suggests
> > > that the traling / can be omitted, but the words do not.
> > >
> > > --
> > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > > r-help-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._._._
> > >
> >
> >
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 10:15:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 11:15:41 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206190915.LAA29641@pubhealth.ku.dk>

Not a bug: check the documentation of file(), which is documented to work
for files but not for devices.  No attempt is made to cope with e.g.
blocking on non-files.

It's a pretty extreme view of the world to consider /dev/psaux to be a
file, and R is just using standard C <stdio.h> I/O.

However, this is a great opportunity for you to contribute a device()
function to R.

On Tue, 18 Jun 2002 accot@free.fr wrote:

> Full_Name: Johnny Accot
> Version: 1.5.1
> OS: Linux
> Submission from: (NULL) (198.4.83.52)
>
>
> Hi.
>
> I'm having a problem with the binary read/write functions.  I'm writing a device
> driver in R (why not?) and of course I have to send a couple commands to the
> device.  Typically, I send one byte, receive one acknowledgement byte, send
> another byte, receive an ACK, and so on.  At least this is what I would like to
> do.  Instead, after writing one byte, reading its acknowledgement byte, and
> writing a second byte, R hangs on the next read for an unknown reason.  I guess
> this is a bug in the read/write functions.  If you have a PS/2 device you may
> try to run the following code:
>
> ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> close(dev)
>
> which gives:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> > dev <- file("/dev/psaux")
> > open(dev, "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [...R hangs here...]
>
> It first creates an ascii table, opens the PS/2 device for binary read&write,
> writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
> reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
> then hangs when reading the second acknowledgement byte.  If, instead, you close
> the device between the two writes, it's fine:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
>
> This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
> 1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
> stick with the open-each-time strategy, but it is not very clean.
>
> I also tried to write bytes using the writeBin command, but it says the "size=1"
> is not available on my computer.  This is why I'm using the writeChar function.
>
> Please let me know if I'm doing something wrong.  I hope not.
>
> And thanks for the great software! :-)
>
> Johnny
>
> PS: if you try to run the code and don't get 250 as acknowledgement byte, it
> means the PS/2 controller is not in idle state.  Very unlikely though.  Try
> again as the set-default command should bring it back to its idle state.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 15:31:38 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 19 Jun 2002 10:31:38 -0400
Subject: [R] Problems with url/download and http_proxy
Message-ID: <D7A3CFD7825BD6119B880002A58F06C227E656@groexmb02.pfizer.com>

This does seem to fix my problem:

> Sys.getenv("http_proxy")
                  http_proxy 
"http://gproxy1.pfizer.com/" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

and even

> Sys.getenv("http_proxy")
                 http_proxy 
"http://gproxy1.pfizer.com" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

-Greg


> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 19, 2002 4:58 AM
> To: Warnes, Gregory R
> Cc: r-devel@stat.math.ethz.ch
> Subject: RE: [R] Problems with url/download and http_proxy
> 
> 
> It's a bug in the libxml code causing the port to be set to zero.
> Comment lines like
> 
>     /*if (proxyPort != 0) {
> 	proxyPort = 0;
> 	}*/
> 
> in nanohttp.c and nanoftp.c.  (The port has already been set in the
> caller.)
> 
> Please confirm that this works.
> 
> 
> On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:
> 
> > The port is not supposed to be required, so rather than fix 
> the docs can
> > anyone fix the problem?
> >
> >
> > On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
> >
> > >
> > > Just adding the trailing slash doesn't seem to help:
> > >
> > > 	> Sys.getenv('http_proxy')
> > > 	                  http_proxy
> > > 	"http://gproxy1.pfizer.com/"
> > >
> > > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	connect: Cannot assign requested address
> > > 	unable to connect to 'gproxy1.pfizer.com'.
> > > 	Error in 
> url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > > :
> > > 	        cannot open URL
> > > `http://cran.r-project.org/src/contrib/PACKAGES'
> > >
> > > But adding the port explicitly does:
> > >
> > > 	> Sys.getenv("http_proxy")
> > > 	                     http_proxy
> > > 	"http://gproxy1.pfizer.com:80/"
> > > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	                                     description
> > > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > > 	                                           class
> > > 	                                           "url"
> > > 	                                            mode
> > > 	                                             "r"
> > > 	                                            text
> > > 	                                          "text"
> > > 	                                          opened
> > > 	                                        "opened"
> > > 	                                        can read
> > > 	                                           "yes"
> > > 	                                       can write
> > > 	                                            "no"
> > >
> > >
> > >
> > > even if the trailing slash is not present:
> > >
> > > > Sys.getenv("http_proxy")
> > >                     http_proxy
> > > "http://gproxy1.pfizer.com:80"
> > >
> > > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > >                                      description
> > > "http://cran.r-project.org/src/contrib/PACKAGES"
> > >                                            class
> > >                                            "url"
> > >                                             mode
> > >                                              "r"
> > >                                             text
> > >                                           "text"
> > >                                           opened
> > >                                         "opened"
> > >                                         can read
> > >                                            "yes"
> > >                                        can write
> > >                                             "no"
> > >
> > >
> > > Perhaps the documentation for download.file should be 
> changed to note the
> > > requirement of the port.  The paragraph on proxies could 
> be changed from
> > >
> > >
> > >      Proxies can be specified via environment variables. Setting
> > >      `"no_proxy"' stops any proxy being tried. Otherwise 
> the setting of
> > >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> > >      upper-case version) is consulted and if non-empty 
> used as a proxy
> > >      site.  For FTP transfers, the username and password 
> on the proxy
> > >      can be specified by `"ftp_proxy_user"' and 
> `"ftp_proxy_password"'.
> > >
> > >
> > > to something like:
> > >
> > >      Proxies can be specified via the environment 
> variables `"http_proxy"'
> > >      or `"HTTP_PROXY"' and `"ftp_proxy'" or 
> `"FTP_PROXY"'.  These variables
> > >      must be of the form 
> `protocol://machine.domain.tld:port'.  For FTP
> > >      transfers, the username and password on the proxy 
> can be specified by
> > >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  
> Setting `"no_proxy"'
> > >      prevents the use of any proxy.
> > >
> > >
> > > -Greg
> > >
> > > > -----Original Message-----
> > > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > > To: Warnes, Gregory R
> > > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > > Subject: Re: [R] Problems with url/download and http_proxy
> > > >
> > > >
> > > > The code (which you do have available to you) says http_proxy
> > > >
> > > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > > >
> > > > which yours is not, so please try that format.  The 
> code suggests
> > > > that the traling / can be omitted, but the words do not.
> > > >
> > > > --
> > > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > > Professor of Applied Statistics,  
> http://www.stats.ox.ac.uk/~ripley/
> > > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > > >
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > -.-.-.-.-.-.-.-.-
> > > > r-help mailing list -- Read
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To:
> > > > r-help-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > > _._._._._._._._._
> > > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:04:56 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:04:56 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15632.42814.327732.92452@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
Message-ID: <87lm9bdzkn.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    martin> Hence we are waiting for a new patch  (:-)

In order to do that, I need to know what abbreviate.arg (the
"un-documented" argument) does.  Anyone know?    Other thant that,
it (the patch) is almost ready.

(yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
engineering...). 

best,
-tony



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 19 17:06:55 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 19 Jun 2002 18:06:55 +0200
Subject: .. add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <871yd7jsjh.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
Message-ID: <15632.44063.277697.883795@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

on April 22 --- you see I'm cleaning up pending e-mails :-)

    tony> could we add an argument to suppress printing of levels for
    tony> print.factor()?  i.e.:


    tony> print.factor <-
    tony> function (x, quote = FALSE, print.levels = TRUE, ...)    ## MODIFIED
    tony> {
    tony>  if (length(x) <= 0)
    tony>  cat("factor(0)\n")
    tony>  else print(as.character(x), quote = quote, ...)
    tony>  if (print.levels) {                                         ## ADDED
    tony>    cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    tony>  }                                                           ## ADDED
    tony>  invisible(x)
    tony> }

    tony> I've done this for my local work, but wondering if this is useful in
    tony> general?

As I said then, it is useful idea, thank you Tony.

However, as I just found out,  S+6.0 does it a bit better.
Their  print.factor() has a  'max.levels = 5' argument which
allows more than just on/off.

Here's S+6.0 help(print.factor) :

>>                         Use print() on a factor object
>>                                        
>> USAGE:
>> 
>> print.factor(x, quote = F, abbreviate.arg, ..., max.levels = 5)
>> 
>> REQUIRED ARGUMENTS:
>> 
>>    x
>>           The factor object to print
>>           
>> OPTIONAL ARGUMENTS:
>> 
>>    quote
>>           If quote is TRUE then the strings in the factors will be
>>           surrounded by quotes and all the levels will be printed.
>>           
>>    max.levels
>>           If some of the levels in a factor object are not in represented
>>           in the object (or if quote is TRUE), then the first max.levels
>>           levels will be printed.
>>           This is a method for the function print() for objects
>>           inheriting from class factor.


Hence we are waiting for a new patch  (:-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:15:28 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:15:28 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87lm9bdzkn.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
Message-ID: <87hejzdz33.fsf@jeeves.blindglobe.net>

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch  (:-)

    a> In order to do that, I need to know what abbreviate.arg (the
    a> "un-documented" argument) does.  Anyone know?    Other thant that,
    a> it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
    a> engineering...). 

And here's the hack; note that I've left my "argument" in for
backwards compatibility.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    cat("Levels: ", paste(levels(x)[1:max.levels], collapse = " "),
"\n")
  }
  invisible(x) 
} 

It's ugly but seems to work.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 19 17:58:13 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 19 Jun 2002 18:58:13 +0200 (MET DST)
Subject: levels() counter-intuitif? (PR#1693)
Message-ID: <200206191658.SAA04763@pubhealth.ku.dk>

Suppose I have a factor size with levels "small", "medium" and "large". 
Then, when I subset this factor:
>ss<-size[size!="medium"]
to get at the extremes,
>levels(ss)
....
Levels:  large medium small

The same happens with
>subset( size, size!="medium")

I understand that the resulting factor inherits the possible levels from its 
"parent", but I do not see in what that is useful. Intuitively, I would 
expect that levels(ss) return "small" and "large". For subset(), there might 
be an option to request inheritance of the number of levels.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 19 18:16:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 2002 19:16:17 +0200
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <x23cvj195q.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.

Not a bug (in any sense). Basically, you do need factors with levels
that are not present once in a while (we had a tabulation example
recently), and it is easier to remove unwanted levels than it is to
get the levels back in. E.g.

> x[-1]
[1] medium large 
Levels:  large medium small 

> x[-1,drop=T]
[1] medium large 
Levels:  large medium 

> factor(x[-1])
[1] medium large 
Levels:  large medium 

As for the usefulness, consider this

> with(subset(juul,sex==1), table(menarche))
numeric(0)
> juul$menarche <- factor(juul$menarche)
> with(subset(juul,sex==1), table(menarche))
menarche
1 2 
0 0 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:18:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:18:18 +0100 (BST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191812200.11375-100000@gannet.stats>

On Wed, 19 Jun 2002 rjvbertin@hotmail.com wrote:

> Suppose I have a factor size with levels "small", "medium" and "large".
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
>
> The same happens with
> >subset( size, size!="medium")
>
> I understand that the resulting factor inherits the possible levels from its
> "parent", but I do not see in what that is useful.

When you have enough experience you may.  Lots of R code relies on it, for
a start.  It's also essential when predicting a classifcation to know wha
the possible values were.  That's the whole point of a factor: it's an
enumeration type, and one does not change the enumeration on subsetting.

>  Intuitively, I would
> expect that levels(ss) return "small" and "large". For subset(), there might
> be an option to request inheritance of the number of levels.

There is such an option:  [, drop=TRUE].

Please DO NOT use R-bugs to document your intuition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:30:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:30:27 +0100 (BST)
Subject: overzealous help-links.sh script! (PR#1682)
In-Reply-To: <200206171311.PAA15557@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191820320.11375-100000@gannet.stats>

Not a bug.  .R is a `hidden' private directory for R's own use.
Have you been trespassing:  `including stuff the user might have
installed' suggests you have?

On Mon, 17 Jun 2002 rjvbertin@hotmail.com wrote:

> Starting html help in the current version of R has a very annoying
> side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a
> virgin copy. I discovered that when all of a sudden I got complaints about
> my startup "library" not being found.
> Below is a modified version of the script that doesn't do this. It is not
> perfect yet (it shouldn't try to recreate links that already exists; there

Why: the targets of the links may well have changed?  Remember that
R_HOME can change from invocation to invocation, and if there are
different R versions (even on different platforms) keeping anything is
completely inappropriate.  You can't even delete just what you want to
replace, as .R might have been created by a later R version and put other
things in there.

> must be a glitch in the multi-test if lines) but it is safer than the
> previous version!

Not so.  Have you read the section on BUGS in the FAQ recently?

>
> RenE Bertin
>
>
> #! /bin/sh
>
> # 20020615 RJVB : I modified this script such that it will not at each
> invocation throw away the ~/.R directory
> # with all that it contains (including stuff the user might have
> installed!!)
> # Instead, it will create what doesn't exist, and warn whenever an error
> occurs (= a dir can't be made because a file
> # with the same name exists.
> # For the links, I try to be clever, and put in only those that aren't there
> yet, but this doesn't yet function
> # correctly with the single-line-2-test expression. Therefore, all output
> from ln is thrown away :)
>
> USER_R_HOME="${HOME}/.R"
> PKGLIST="${USER_R_HOME}/doc/html/packages.html"
> SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
> # RJVB: don't do this!!
> # rm -rf ${USER_R_HOME}
>
> dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html
> ${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
> for d in ${dirs}; do
> # RJVB
>     if [ ! -e ${d} ] ;then
> 	    mkdir -p ${d}
> 	elif [ ! -d ${d} ] ;then
> 		echo "Warning: ${d} already exists but is not a directory!"
> 	fi
> done
>
> for f in AUTHORS COPYING THANKS; do
> # RJVB
>   if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
>     ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
>   fi
> done
>
> # RJVB
> if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
>   ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
> fi
>
> for f in ${R_HOME}/doc/html/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
>     fi
> done
>
> for f in ${R_HOME}/doc/html/search/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
>     fi
> done
>
> rm -f ${PKGLIST}
> rm -f ${SEARCHINDEX}
> cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
>
> get_unique () {
>   if test -r ${1}; then
>     x="1"
>     while test -r ${1}.${x}; do
>       x=`echo "$x+1" | bc`
>     done
>     echo ${1}.${x}
>   else
>     echo $1
>   fi
> }
>
>
> for lib in $*; do
>     echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
>     echo "<p><table width=\"100%\">" >> ${PKGLIST}
>     if test -d ${lib}; then
>       for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
> 	if test -d ${pkg}; then
> 	    pkgname=`basename ${pkg}`
> 	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
> 	    targetname=`basename ${target}`
> 	    ln -s ${pkg} ${target}
> 	    if test -r ${pkg}/TITLE; then
> 		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
> 	    else
> 		pkgtitle=""
> 	    fi
> 	    echo "<tr align=\"left\" valign=\"top\">
> 		    <td width=\"25%\"><a
> href=\"../../library/${targetname}/html/00Index.html\">
> 		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
> 		>> ${PKGLIST}
>
> 	    cat ${pkg}/CONTENTS | \
> 	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
> 	      >> ${SEARCHINDEX}
>
>
> 	fi
>       done
>     fi
>     echo "</table>" >> ${PKGLIST}
>     echo "" >> ${PKGLIST}
> done
>
> echo "</body></html>" >> ${PKGLIST}
> ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1
>
> ### Local Variables: ***
> ### mode: sh ***
> ### sh-indentation: 2 ***
> ### End: ***
>
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> _________________________________________________________________
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Jun 19 18:41:47 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 19 Jun 2002 19:41:47 +0200 (MEST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0206191936550.6748-100000@artemis>



> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

sure, because you didn't change the levels attribute of the factor object
ss. And there is no statement in the documentation that subsetting a
factor object touches the levels attribute. So why is this a bug? If I
remember correctly, there was a dicussion about this issue a few month ago
on this list ...

Torsten

> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.
> 
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
> 
> _________________________________________________________________
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Jun 19 18:50:07 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 19 Jun 2002 13:50:07 -0400
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <15632.50255.346546.580824@gargle.gargle.HOWL>

rjvbertin@hotmail.com writes:
> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

Try:
  R> ss <- size[size != "medium", drop=T]
  R> levels(ss)
     [1] "large" "small"

By the way, this type of question probably belongs in R-help, not R-devel, and
you will likely get grief for submitting it as a "bug".
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Wed Jun 19 19:46:46 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Wed, 19 Jun 2002 14:46:46 -0400 (EDT)
Subject: Anon CVS updates?
Message-ID: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>

Is the anonymous CVS repository for R presently broken? There haven't been
many updates coming through and the repository files seem to differ
significantly from the rsync version of R-devel...

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 19:59:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 11:59:04 -0700
Subject: Anon CVS updates?
In-Reply-To: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
Message-ID: <87hejzdrif.fsf@jeeves.blindglobe.net>

>>>>> "byron" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    byron> Is the anonymous CVS repository for R presently broken? There haven't been
    byron> many updates coming through and the repository files seem to differ
    byron> significantly from the rsync version of R-devel...

doing a cvs log on my copy suggests that it's reasonably up to date.
"today's activity":

rossini 82 > cd anoncvs/R
rossini 83 > cvs log | grep 2002/06/19
cvs server: Logging .
date: 2002/06/19 06:30:55;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 06:30:46;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 14:44:06;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 11:45:38;  author: ripley;  state: Exp;  lines: +2 -0
date: 2002/06/19 10:40:02;  author: ripley;  state: Exp;  lines: +3 -0
date: 2002/06/19 09:46:27;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 07:29:54;  author: ripley;  state: Exp;  lines: +1 -1
date: 2002/06/19 07:04:07;  author: ripley;  state: Exp;  lines: +3 -2
date: 2002/06/19 18:15:39;  author: ripley;  state: Exp;  lines: +1 -0
date: 2002/06/19 09:21:09;  author: ripley;  state: Exp;  lines: +4 -0

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 20:32:12 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 12:32:12 -0700
Subject: new version of print.factor
Message-ID: <874rfzdpz7.fsf@jeeves.blindglobe.net>


Thanks to Tony Plate for letting me know what the abbreviate.arg
option does.  I think this could be made more flexible (I.e. 
 =TRUE, =FALSE, =#, where # would be passed to the abbreviate
min.length argument).  But it follows the example I was given.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    if (abbreviate.arg) {
      cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
                            collapse = " "), "\n")
    } else {
      cat("Levels: ", paste(levels(x)[1:max.levels],
                            collapse = " "), "\n")
    }
  }
  invisible(x) 
} 
 

It definitely could be cleaned up a bit more.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 11:13:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 12:13:33 +0200
Subject: a version of source() which keeps comments ?
Message-ID: <15633.43725.738497.292166@gargle.gargle.HOWL>

I'd like to have this to be used in, e.g.,
demo() and example().

Currently, source() parse()s the entire file and then evaluates
expression by expression. ``Of course'',  parse() already loses
the comments.

An (much slower) alternative might be to the readLine() the
file, echo what we read, 
and try to parse() ``the current chunk''.
when parse() fails (when the current expression is incomplete),
we silently read the next line, etc, until the expression is complete and hence
parse() succeeds, then we eval() and print().

What do people think?

Would there be volunteers to write this?
[I think it should finalize as an optional argument to source(), 
 but for experimentation it might be easier to try with a
 function  sourceLinewise(.)
].

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 20 11:21:11 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 20 Jun 2002 12:21:11 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <15633.44183.500647.714908@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 20 Jun 2002 12:13:33 +0200,
>>>>> Martin Maechler (MM) wrote:

  > I'd like to have this to be used in, e.g.,
  > demo() and example().

  > Currently, source() parse()s the entire file and then evaluates
  > expression by expression. ``Of course'',  parse() already loses
  > the comments.

  > An (much slower) alternative might be to the readLine() the
  > file, echo what we read, 
  > and try to parse() ``the current chunk''.
  > when parse() fails (when the current expression is incomplete),
  > we silently read the next line, etc, until the expression is complete and hence
  > parse() succeeds, then we eval() and print().

  > What do people think?

  > Would there be volunteers to write this?
  > [I think it should finalize as an optional argument to source(), 
  >  but for experimentation it might be easier to try with a
  >  function  sourceLinewise(.)
  > ].

I'm not a volunteer but the feature would also be extremely useful for
Sweave (and probably most other dynamic report approaches), where we
currently loose all comments in code chunks.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 12:21:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 13:21:00 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <x2660eryar.fsf@biostat.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'd like to have this to be used in, e.g.,
> demo() and example().
> 
> Currently, source() parse()s the entire file and then evaluates
> expression by expression. ``Of course'',  parse() already loses
> the comments.
> 
> An (much slower) alternative might be to the readLine() the
> file, echo what we read, 
> and try to parse() ``the current chunk''.
> when parse() fails (when the current expression is incomplete),
> we silently read the next line, etc, until the expression is complete and hence
> parse() succeeds, then we eval() and print().
> 
> What do people think?
> 
> Would there be volunteers to write this?
> [I think it should finalize as an optional argument to source(), 
>  but for experimentation it might be easier to try with a
>  function  sourceLinewise(.)
> ].

Historically, this is what source() should have done all the time if
it were to be in keeping with other Unix programs (shift input from
stdin temporarily). The source() that we have is really "evaluate
file". I don't think we can source() an infinite stream like a pipe or
a socket, can we?

Actually, I think it can be done with a little careful file descriptor
switching. (Turn of readline processing, etc., switch stdin to file,
run till eof or error, switch back and reestablish readline.) We'd
still have the reparse-on-incomplete thing, since that also happens on
stdin -- something I suspect isn't necessary, but it takes a fairly
hard look at the grammar itself to find out. 

(This kind of stuff has long been on my might-do list of projects,
along with (re)fixing the comment issue and providing better
information on parse/eval errors. I'd better not feel possessive about
the ideas...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 12:43:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 12:43:26 +0100 (BST)
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>

On 20 Jun 2002, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> > I'd like to have this to be used in, e.g.,
> > demo() and example().
> >
> > Currently, source() parse()s the entire file and then evaluates
> > expression by expression. ``Of course'',  parse() already loses
> > the comments.
> >
> > An (much slower) alternative might be to the readLine() the
> > file, echo what we read,
> > and try to parse() ``the current chunk''.
> > when parse() fails (when the current expression is incomplete),
> > we silently read the next line, etc, until the expression is complete and hence
> > parse() succeeds, then we eval() and print().
> >
> > What do people think?
> >
> > Would there be volunteers to write this?
> > [I think it should finalize as an optional argument to source(),
> >  but for experimentation it might be easier to try with a
> >  function  sourceLinewise(.)
> > ].
>
> Historically, this is what source() should have done all the time if
> it were to be in keeping with other Unix programs (shift input from
> stdin temporarily). The source() that we have is really "evaluate
> file". I don't think we can source() an infinite stream like a pipe or
> a socket, can we?
>
> Actually, I think it can be done with a little careful file descriptor
> switching. (Turn of readline processing, etc., switch stdin to file,
> run till eof or error, switch back and reestablish readline.) We'd

Rather, connection-switching.  The Green book describes sink() as being
capable of switching the input connection, but it isn't like that
in any version of S-PLUS I have ever seen.  I haven't thought through the
ramifications.


> still have the reparse-on-incomplete thing, since that also happens on
> stdin -- something I suspect isn't necessary, but it takes a fairly
> hard look at the grammar itself to find out.
>
> (This kind of stuff has long been on my might-do list of projects,
> along with (re)fixing the comment issue and providing better
> information on parse/eval errors. I'd better not feel possessive about
> the ideas...)
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jun 20 12:58:05 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 20 Jun 2002 07:58:05 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Thu, Jun 20, 2002 at 12:43:26PM +0100
References: <x2660eryar.fsf@biostat.ku.dk> <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>
Message-ID: <20020620075805.B18932@jessie.research.bell-labs.com>

ripley@stats.ox.ac.uk wrote:
> On 20 Jun 2002, Peter Dalgaard BSA wrote:
> 
> > Martin Maechler <maechler@stat.math.ethz.ch> writes:
> >
> > > I'd like to have this to be used in, e.g.,
> > > demo() and example().
> > >
> > > Currently, source() parse()s the entire file and then evaluates
> > > expression by expression. ``Of course'',  parse() already loses
> > > the comments.
> > >
> > > An (much slower) alternative might be to the readLine() the
> > > file, echo what we read,
> > > and try to parse() ``the current chunk''.
> > > when parse() fails (when the current expression is incomplete),
> > > we silently read the next line, etc, until the expression is complete and hence
> > > parse() succeeds, then we eval() and print().
> > >
> > > What do people think?
> > >
> > > Would there be volunteers to write this?
> > > [I think it should finalize as an optional argument to source(),
> > >  but for experimentation it might be easier to try with a
> > >  function  sourceLinewise(.)
> > > ].
> >
> > Historically, this is what source() should have done all the time if
> > it were to be in keeping with other Unix programs (shift input from
> > stdin temporarily). The source() that we have is really "evaluate
> > file". I don't think we can source() an infinite stream like a pipe or
> > a socket, can we?
> >
> > Actually, I think it can be done with a little careful file descriptor
> > switching. (Turn of readline processing, etc., switch stdin to file,
> > run till eof or error, switch back and reestablish readline.) We'd
> 
> Rather, connection-switching.  The Green book describes sink() as being
> capable of switching the input connection, but it isn't like that
> in any version of S-PLUS I have ever seen.  I haven't thought through the
> ramifications.


And I'll make a further distinction (again based on S4 and hopefully
very soon to be R): specifically we should be able to switch `reader'
on a connection. In S4 one can associate an S function with a
connection so that when input becomes available on the connection's
file descriptor, the S function is invoked. This is a reader.

We can support this on Unix using the AddInputHandler, but we need to
add a method to the C level connection structure to get its file
descriptor.  Additionally, I'm in the middle of experimenting with
different event loops (e.g. those of Tcl/Tk and Gtk) and allowing them
to be run as the main R event loop. We get timers (monitors in S4) and
file descriptor notification for "free" in both of these.  I intend to
have an RFC for this and an implementation for sliding it into R next
week. (Anyone's welcome to the code now if they are interested.)

> 
> 
> > still have the reparse-on-incomplete thing, since that also happens on
> > stdin -- something I suspect isn't necessary, but it takes a fairly
> > hard look at the grammar itself to find out.
> >
> > (This kind of stuff has long been on my might-do list of projects,
> > along with (re)fixing the comment issue and providing better
> > information on parse/eval errors. I'd better not feel possessive about
> > the ideas...)
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 13:04:28 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 14:04:28 +0200
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87hejzdz33.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
Message-ID: <15633.50380.961465.204023@gargle.gargle.HOWL>


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    ....

hmm, are you serious ?
I mean it's not a very good reason to introduce an extra
argument, not S back-compatible, just because you had a local
hack with it?

I'm about to do the version withOUT the `print.levels'.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 13:05:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 14:05:00 +0200 (MET DST)
Subject: [R] cut with infinite values -> NA (PR#1694)
Message-ID: <200206201205.OAA11945@pubhealth.ku.dk>

You are correct in your expectations.  This is a bug: the C code does not
cover the cases +/-Inf (because it uses R_FINITE to exclude them).

I'll fix it in R-patched: filing with R-bugs for the record.

On 20 Jun 2002, Markus [ISO-8859-1] Jntti wrote:

> I am doing work on changes in establishment sizes and came across
> behavior that is quite understandable and easily worked around but
> a little surprising. On R 1.5.1 on Debian unstable (see below for
> R.version output):
>
> > cut.off <- c(-Inf, 0, Inf)
> > x <- c(-Inf, -10, 0, 10, Inf)
> > is.numeric(x)
> [1] TRUE
> > is.double(x)
> [1] TRUE
> > # but
> > cut(x, cut.off, include.lowest=T)
> [1] <NA>     [-Inf,0] [-Inf,0] (0,Inf]  <NA>
>
> The reason I am surprised is that standard logical operations on
> Inf generate expected results and storage.mode(Inf) is double and
> so on, so I was expecteing -Inf to belong to the lowest factor level and
> Inf to belong the highest.
>
> [For what it is worth, I am classifying establishments by their growth
> across years and one that in t1 has 0 workers and >0 in the next
> has infinite growth. This is easily worked around, but I am
> a little curious.]
>
> Regards,
>
> Markus
> code:
>
>  cut.off <- c(-Inf, 0, Inf)
> x <- c(-Inf, -10, 0, 10, Inf)
> is.numeric(x)
> is.double(x)
> # but
> cut(x, cut.off, include.lowest=T)
>
> > R.version
>          _
> platform i386-pc-linux-gnu
> arch     i386
> os       linux-gnu
> system   i386, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> --
> Markus Jantti
> Statistics Finland and University of Tampere
> markus.jantti@iki.fi
> http://www.iki.fi/~mjantti
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Jun 20 13:16:31 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 20 Jun 2002 08:16:31 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
References: <15633.43725.738497.292166@gargle.gargle.HOWL> <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <gbh3huoam6f5g5kir9jt73a72q6t9fru61@4ax.com>

On 20 Jun 2002 13:21:00 +0200, you wrote:
>
>(This kind of stuff has long been on my might-do list of projects,
>along with (re)fixing the comment issue and providing better
>information on parse/eval errors. I'd better not feel possessive about
>the ideas...)

If this were done, it would be nice to do it in a way that would allow
better debugging hooks sometime in the future.  Specifically:

 - the error mechanism should know the filename and line number that
was being parsed when the error occurred, and should report them.

 - as functions are being defined the filename and line numbers
corresponding to (the start of) each statement should be saveable, so
a debugger could work on the source file, instead of on the deparsed
version.

 - it should be possible to set a (conditional?) breakpoint on a line
number in a file.

I'm not saying that we should hold off on getting source() right until
we can do all of the above, just that if possible those things should
be kept in mind as source is being fixed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jun 20 15:11:48 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Jun 2002 07:11:48 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15633.50380.961465.204023@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
 <15633.50380.961465.204023@gargle.gargle.HOWL>
Message-ID: <87znxqxcnv.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    martin>     ....

    martin> hmm, are you serious ?

Actually, I am, since I'll keep it as my local version :-).  Note that
this is backwards compatible to a historic point (my April email :-).

    martin> I mean it's not a very good reason to introduce an extra
    martin> argument, not S back-compatible, just because you had a local
    martin> hack with it?

I think that's sensible (for others and R :-).

    martin> I'm about to do the version withOUT the `print.levels'.

And that is fine.  Something needs to be fixed with respect to the
abbreviate.arg; I think that there is a better way.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Thu Jun 20 17:08:47 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 20 Jun 2002 10:08:47 -0600
Subject: new version of print.factor
In-Reply-To: <874rfzdpz7.fsf@jeeves.blindglobe.net>
Message-ID: <5.1.0.14.2.20020620095015.00aab050@mailhost.blackmesacapital.com>

Here's what S-plus 6.0 does with abbreviate.arg:

# S-plus 6.0
 > print(factor(c("fooooooo","baaaaaar")))
[1] fooooooo baaaaaar
 > print(factor(c("fooooooo","baaaaaar")), quote=T)
[1] "fooooooo" "baaaaaar"
Levels:
[1] "baaaaaar" "fooooooo"
 > print(factor(c("fooooooo","baaaaaar")),abbreviate.arg=T, quote=T)
fooooooo baaaaaar
"fooo" "baar"
Levels:
[1] "baar" "fooo"

(The function below does not abbreviate vector contents when given 
abbreviate.arg==TRUE, which may be more or less suitable depending on the 
task at hand.  Also, S-plus doesn't print levels unless quote==TRUE or "If 
some of the levels in a factor object are not in represented in the 
object", but this difference was already present in the R.1.5.0 version of 
print.factor.)

-- Tony Plate

At 12:32 PM 6/19/2002 -0700, A.J. Rossini wrote:

>Thanks to Tony Plate for letting me know what the abbreviate.arg
>option does.  I think this could be made more flexible (I.e.
>  =TRUE, =FALSE, =#, where # would be passed to the abbreviate
>min.length argument).  But it follows the example I was given.
>
>"print.factor" <-
>   function (x, quote = FALSE, max.levels=5, print.levels = {if
>(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
>{
>   if (length(x) <= 0)
>     cat("factor(0)\n")
>   else print(as.character(x), quote = quote, ...)
>   if (print.levels) {
>     if (abbreviate.arg) {
>       cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
>                             collapse = " "), "\n")
>     } else {
>       cat("Levels: ", paste(levels(x)[1:max.levels],
>                             collapse = " "), "\n")
>     }
>   }
>   invisible(x)
>}
>
>
>It definitely could be cleaned up a bit more.
>
>best,
>-tony
>
>--
>A.J. Rossini                            Rsrch. Asst. Prof. of Biostatistics
>U. of Washington Biostatistics          rossini@u.washington.edu
>FHCRC/SCHARP/HIV Vaccine Trials Net     rossini@scharp.org
>-------------- http://software.biostat.washington.edu/ ----------------
>FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
>UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
>(my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bcooper@hsph.harvard.edu  Thu Jun 20 17:59:36 2002
From: bcooper@hsph.harvard.edu (bcooper@hsph.harvard.edu)
Date: Thu, 20 Jun 2002 18:59:36 +0200 (MET DST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
Message-ID: <200206201659.SAA15080@pubhealth.ku.dk>

Full_Name: Ben Cooper
Version: 1.5.0
OS: linux
Submission from: (NULL) (134.174.187.90)


The help page for glm.nb (in MASS package) says that it takes "Any other
arguments for the glm() function except family"

One such argument is   start   "starting values for the parameters in the linear
predictor."

However, when called with starting values glm.nb returns:

   Error in model.frame(formula, rownames, variables, varnames, extras,
extranames,  : 
	  variable lengths differ

So it looks like this is either a bug, the documentation is inaccurate, or I'm
missing something (or some combination of the above).


An example:
________________________________________________________________


library(MASS)

y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)

lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)

lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)

lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)


># first a poisson model which is OK 
>glm(y~lag1+lag2+lag3,family=poisson(link=identity))
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #therefore try:
> glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))

# and this works. However, negative binomial model is not OK:

> glm.nb(y~lag1+lag2+lag3,link=identity)
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #so try
> glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
 : 
	variable lengths differ

________________________________________________________________



I can get glm.nb to work with starting values with the following hack to the
glm.nb code:

i)

change the line
 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <- m$... <- NULL

 to 

 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <-m$start <- m$... <- NULL


[i.e. insert m$start]

ii) 

remove the line:

start <- model.extract(m, start)


iii)

change the line

fit <- glm.fitter(x = X, y = Y, w = w, etastart = start, 
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

to
   fit <- glm.fitter(x = X, y = Y, w = w, start=start,
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

iv) change default value of start to NULL (as in glm) rather than eta when
glm.nb is called.

newglm.nb with these changes then works.

But no doubt there  are reasons for things being the way they are and these
changes screw other things up.

$platform
[1] "i686-pc-linux-gnu"
$arch
[1] "i686"
$os
[1] "linux-gnu"
$system
[1] "i686, linux-gnu"
$status
[1] ""
$major
[1] "1"
$minor
[1] "5.0"
$year
[1] "2002"
$month
[1] "04"
$day
[1] "29"
$language
[1] "R"

I also tried this with version 1.4.1 under Windows and had the same probelm.

cheers

Ben




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 18:33:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 18:33:42 +0100 (BST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
In-Reply-To: <200206201659.SAA15080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201827030.26128-100000@gannet.stats>

It's an R/S incompatibility issue. `start' should be interpreted in S's
sense, which is R's etastart.

Why R chose to be gratuitously incompatible has always puzzled me.

Remember MASS was written for S (actually before R), and not every
statement has been checked for R/S discrepancies.

On Thu, 20 Jun 2002 bcooper@hsph.harvard.edu wrote:

> Full_Name: Ben Cooper
> Version: 1.5.0
> OS: linux
> Submission from: (NULL) (134.174.187.90)
>
>
> The help page for glm.nb (in MASS package) says that it takes "Any other
> arguments for the glm() function except family"
>
> One such argument is   start   "starting values for the parameters in the linear
> predictor."
>
> However, when called with starting values glm.nb returns:
>
>    Error in model.frame(formula, rownames, variables, varnames, extras,
> extranames,  :
> 	  variable lengths differ
>
> So it looks like this is either a bug, the documentation is inaccurate, or I'm
> missing something (or some combination of the above).
>
>
> An example:
> ________________________________________________________________
>
>
> library(MASS)
>
> y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)
>
> lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)
>
> lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)
>
> lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)
>
>
> ># first a poisson model which is OK
> >glm(y~lag1+lag2+lag3,family=poisson(link=identity))
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #therefore try:
> > glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))
>
> # and this works. However, negative binomial model is not OK:
>
> > glm.nb(y~lag1+lag2+lag3,link=identity)
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #so try
> > glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
> Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
>  :
> 	variable lengths differ
>
> ________________________________________________________________
>
>
>
> I can get glm.nb to work with starting values with the following hack to the
> glm.nb code:
>
> i)
>
> change the line
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <- m$... <- NULL
>
>  to
>
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <-m$start <- m$... <- NULL
>
>
> [i.e. insert m$start]
>
> ii)
>
> remove the line:
>
> start <- model.extract(m, start)
>
>
> iii)
>
> change the line
>
> fit <- glm.fitter(x = X, y = Y, w = w, etastart = start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> to
>    fit <- glm.fitter(x = X, y = Y, w = w, start=start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> iv) change default value of start to NULL (as in glm) rather than eta when
> glm.nb is called.
>
> newglm.nb with these changes then works.
>
> But no doubt there  are reasons for things being the way they are and these
> changes screw other things up.
>
> $platform
> [1] "i686-pc-linux-gnu"
> $arch
> [1] "i686"
> $os
> [1] "linux-gnu"
> $system
> [1] "i686, linux-gnu"
> $status
> [1] ""
> $major
> [1] "1"
> $minor
> [1] "5.0"
> $year
> [1] "2002"
> $month
> [1] "04"
> $day
> [1] "29"
> $language
> [1] "R"
>
> I also tried this with version 1.4.1 under Windows and had the same probelm.
>
> cheers
>
> Ben
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Thu Jun 20 19:07:51 2002
From: accot@free.fr (accot@free.fr)
Date: Thu, 20 Jun 2002 20:07:51 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201807.UAA15266@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------010901020707080002040305
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Prof Brian D Ripley wrote:
> Not a bug: check the documentation of file(), which is documented to work
> for files but not for devices.  No attempt is made to cope with e.g.
> blocking on non-files.
> 
> It's a pretty extreme view of the world to consider /dev/psaux to be a
> file, and R is just using standard C <stdio.h> I/O.
> 
> However, this is a great opportunity for you to contribute a device()
> function to R.

I finally checked the code and "wrote" the functions to "handle devices".
Well, in fact I more or less duplicated the code for FIFOs, removed the
option for encoding, added an option for synchronous I/O, and added a
test to check that the file is indeed a character or block special file.
This works great for me but I'm afraid it is a bit simple and does not
cover much of device handling in general.  Especially I don't know if
anybody would want to use it for block devices, and what they would need.
The psaux device is one of the simplest device one could think of, that's
why it works so well.  For other devices one would need at least an
ioctl function, which I didn't write.  But still I have no idea whether
anybody would use it and what for.  Anyway.  Please let me know if you
think this is useful.  If yes, I will try to familiarize myself with
the structure of the R code and make the device handling more general.

Thanks,
Johnny

--------------010901020707080002040305
Content-Type: text/plain;
 name="R-1.5.1-device.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="R-1.5.1-device.patch"

diff -ur R-1.5.1.orig/configure R-1.5.1/configure
--- R-1.5.1.orig/configure	2002-06-17 04:20:30.000000000 -0700
+++ R-1.5.1/configure	2002-06-19 19:33:22.000000000 -0700
@@ -17238,8 +17238,9 @@
 
 
 
+
 for ac_func in access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
diff -ur R-1.5.1.orig/configure.ac R-1.5.1/configure.ac
--- R-1.5.1.orig/configure.ac	2002-04-30 11:04:05.000000000 -0700
+++ R-1.5.1/configure.ac	2002-06-19 19:25:04.000000000 -0700
@@ -982,7 +982,7 @@
 
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv)
 ## <NOTE>
 ## No need checking for bcopy bzero memcpy mempcpy even though ifnames
diff -ur R-1.5.1.orig/src/include/config.h.in R-1.5.1/src/include/config.h.in
--- R-1.5.1.orig/src/include/config.h.in	2002-04-24 02:54:05.000000000 -0700
+++ R-1.5.1/src/include/config.h.in	2002-06-19 19:35:10.000000000 -0700
@@ -216,6 +216,9 @@
 /* Define to 1 if you have the `mkfifo' function. */
 #undef HAVE_MKFIFO
 
+/* Define to 1 if you have the `mknod' function. */
+#undef HAVE_MKNOD
+
 /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
 #undef HAVE_NDIR_H
 
diff -ur R-1.5.1.orig/src/include/Internal.h R-1.5.1/src/include/Internal.h
--- R-1.5.1.orig/src/include/Internal.h	2002-04-03 22:51:04.000000000 -0800
+++ R-1.5.1/src/include/Internal.h	2002-06-19 19:25:06.000000000 -0700
@@ -439,6 +439,7 @@
 SEXP do_isseekable(SEXP, SEXP, SEXP, SEXP);
 SEXP do_close(SEXP, SEXP, SEXP, SEXP);
 SEXP do_fifo(SEXP, SEXP, SEXP, SEXP);
+SEXP do_device(SEXP, SEXP, SEXP, SEXP);
 SEXP do_pipe(SEXP, SEXP, SEXP, SEXP);
 SEXP do_url(SEXP, SEXP, SEXP, SEXP);
 SEXP do_gzfile(SEXP, SEXP, SEXP, SEXP);
diff -ur R-1.5.1.orig/src/include/Rconnections.h R-1.5.1/src/include/Rconnections.h
--- R-1.5.1.orig/src/include/Rconnections.h	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/include/Rconnections.h	2002-06-19 20:09:26.000000000 -0700
@@ -28,7 +28,7 @@
     char* class;
     char* description;
     char mode[5];
-    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking;
+    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking, sync;
     Rboolean (*open)(struct Rconn *);
     void (*close)(struct Rconn *); /* routine closing after auto open */
     void (*destroy)(struct Rconn *); /* when closing connection */
@@ -58,6 +58,10 @@
     int fd;
 } *Rfifoconn;
 
+typedef struct deviceconn {
+    int fd;
+} *Rdeviceconn;
+
 typedef struct gzfileconn {
     void *fp;
     int cp;
diff -ur R-1.5.1.orig/src/library/base/man/connections.Rd R-1.5.1/src/library/base/man/connections.Rd
--- R-1.5.1.orig/src/library/base/man/connections.Rd	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/library/base/man/connections.Rd	2002-06-20 10:48:13.000000000 -0700
@@ -4,6 +4,7 @@
 \alias{file}
 \alias{pipe}
 \alias{fifo}
+\alias{device}
 \alias{gzfile}
 \alias{unz}
 \alias{bzfile}
@@ -31,6 +32,7 @@
 pipe(description, open = "", encoding = getOption("encoding"))
 fifo(description = "", open = "", blocking = FALSE,
      encoding = getOption("encoding"))
+device(description = "", open = "", blocking = TRUE, sync = TRUE)
 gzfile(description, open = "", encoding = getOption("encoding"),
        compression = 6)
 unz(description, filename, open = "", encoding = getOption("encoding"))
@@ -62,6 +64,7 @@
   \item{open}{character.  A description of how to open the connection
     (if at all). See Details for possible values.}
   \item{blocking}{logical.  See `Blocking' section below.}
+  \item{sync}{logical.  Should the device be opened for synchronous I/O?}
   \item{encoding}{An integer vector of length 256.}
   \item{compression}{integer in 0--9.  The amount of compression to be
     applied when writing, from none to maximal.  The default is a good
@@ -74,7 +77,7 @@
   \item{\dots}{arguments passed to or from other methods.}
 }
 \details{
-  The first eight functions create connections.  By default the
+  The first nine functions create connections.  By default the
   connection is not opened (except for \code{socketConnection}), but may
   be opened by setting a non-empty value of argument \code{open}.
 
@@ -135,8 +138,8 @@
   characters are mapped to a space in these encodings.
 }
 \value{
-  \code{file}, \code{pipe}, \code{fifo}, \code{url}, \code{gzfile} and
-  \code{socketConnection} return a connection object
+  \code{file}, \code{pipe}, \code{fifo}, \code{device}, \code{url},
+  \code{gzfile} and \code{socketConnection} return a connection object
   which inherits from class \code{"connection"} and has a first more
   specific class.
 
diff -ur R-1.5.1.orig/src/main/connections.c R-1.5.1/src/main/connections.c
--- R-1.5.1.orig/src/main/connections.c	2002-04-30 04:04:02.000000000 -0700
+++ R-1.5.1/src/main/connections.c	2002-06-19 20:12:34.000000000 -0700
@@ -640,6 +640,181 @@
 #endif
 }
 
+/* ------------------- device connections --------------------- */
+
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+
+#ifdef HAVE_STAT
+# ifndef Macintosh
+#  ifdef HAVE_SYS_TYPES_H
+#   include <sys/types.h>
+#  endif
+#  ifdef HAVE_SYS_STAT_H
+#   include <sys/stat.h>
+#  endif
+# else /* Macintosh */
+#  include <types.h>
+#  ifndef __MRC__
+#   include <stat.h>
+#  else
+#   include <mpw_stat.h>
+#  endif
+# endif /* Macintosh */
+#endif /* HAVE_STAT */
+
+#ifdef HAVE_ERRNO_H
+# include <errno.h>
+#endif
+
+static Rboolean device_open(Rconnection con)
+{
+    char *name;
+    Rdeviceconn this = con->private;
+    int fd, flags, res;
+    int mlen = strlen(con->mode);
+    struct stat sb;
+
+    name = R_ExpandFileName(con->description);
+    con->canwrite = (con->mode[0] == 'w' || con->mode[0] == 'a');
+    con->canread = !con->canwrite;
+    if(mlen >= 2 && con->mode[1] == '+') con->canread = TRUE;
+
+    /* check if the device exists and if it is a character or block device */
+    if(con->canwrite) {
+	res = stat(name, &sb);
+	if(res) { /* error, does not exist? */
+	    if(errno == ENOENT) warning("device `%s' does not exist", name);
+	    else warning("cannot find device `%s'", name);
+	    return FALSE;
+	} else {
+	    if(!(sb.st_mode & S_IFCHR) && !(sb.st_mode & S_IFBLK)) {
+		warning("`%s' exists but is neither a character special file nor a block special file", name);
+		return FALSE;
+	    }
+	}
+    }
+
+    if(con->canread && con->canwrite) flags = O_RDWR;
+    else if(con->canread) flags = O_RDONLY;
+    else flags = O_WRONLY;
+    if(!con->blocking) flags |= O_NONBLOCK;
+    if(con->sync) flags |= O_SYNC;
+    if(con->mode[0] == 'a') flags |= O_APPEND;
+    fd = open(name, flags);
+    if(fd < 0) {
+	if(errno == ENXIO) warning("device `%s' is not ready", name);
+	else warning("cannot open device `%s'", name);
+	return FALSE;
+    }
+    
+    this->fd = fd;
+    con->isopen = TRUE;
+
+    if(mlen >= 2 && con->mode[mlen-1] == 'b') con->text = FALSE;
+    else con->text = TRUE;
+    con->save = -1000;
+    return TRUE;
+}
+
+static int device_fgetc(Rconnection con)
+{
+    Rdeviceconn this = (Rdeviceconn)con->private;
+    unsigned char c;
+    int n;
+  
+    n = read(this->fd, (char *)&c, 1);
+    return (n == 1) ? c : R_EOF;
+}
+
+static Rconnection newdevice(char *description, char *mode)
+{
+    Rconnection new;
+    new = (Rconnection) malloc(sizeof(struct Rconn));
+    if(!new) error("allocation of device connection failed");
+    new->class = (char *) malloc(strlen("device") + 1);
+    if(!new->class) {
+	free(new);
+	error("allocation of device connection failed");
+    }
+    strcpy(new->class, "device");
+    new->description = (char *) malloc(strlen(description) + 1);
+    if(!new->description) {
+	free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    init_con(new, description, mode);
+    new->open = &device_open;
+    new->close = &fifo_close;
+    new->vfprintf = &dummy_vfprintf;
+    new->fgetc = &device_fgetc;
+    new->seek = &null_seek;
+    new->truncate = &null_truncate;
+    new->fflush = &null_fflush;
+    new->read = &fifo_read;
+    new->write = &fifo_write;
+    new->private = (void *) malloc(sizeof(struct deviceconn));
+    if(!new->private) {
+	free(new->description); free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    return new;
+}
+#endif
+
+SEXP do_device(SEXP call, SEXP op, SEXP args, SEXP env)
+{
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+    SEXP sfile, sopen, ans, class;
+    char *file, *open;
+    int i, ncon, block, sync;
+    Rconnection con = NULL;
+
+    checkArity(op, args);
+    sfile = CAR(args);
+    if(!isString(sfile) || length(sfile) < 1)
+	errorcall(call, "invalid `description' argument");
+    if(length(sfile) > 1)
+	warning("only first element of `description' argument used");
+    file = CHAR(STRING_ELT(sfile, 0));
+    sopen = CADR(args);
+    if(!isString(sopen) || length(sopen) != 1)
+	error("invalid `open' argument");
+    block = asLogical(CADDR(args));
+    if(block == NA_LOGICAL)
+	error("invalid `block' argument");
+    sync = asLogical(CADDDR(args));
+    if(sync == NA_LOGICAL)
+	error("invalid `sync' argument");
+    open = CHAR(STRING_ELT(sopen, 0));
+    ncon = NextConnection();
+    con = Connections[ncon] = newdevice(file, strlen(open) ? open : "r");
+    con->blocking = block;
+    con->sync = sync;
+
+    /* open it if desired */
+    if(strlen(open)) {
+	Rboolean success = con->open(con);
+	if(!success) {
+	    con_close(ncon);
+	    error("unable to open connection");
+	}
+    }
+
+    PROTECT(ans = allocVector(INTSXP, 1));
+    INTEGER(ans)[0] = ncon;
+    PROTECT(class = allocVector(STRSXP, 2));
+    SET_STRING_ELT(class, 0, mkChar("device"));
+    SET_STRING_ELT(class, 1, mkChar("connection"));
+    classgets(ans, class);
+    UNPROTECT(2);
+
+    return ans;
+#else
+    error("device connections are not available on this system");
+    return R_NilValue;		/* -Wall */
+#endif
+}
+
 /* ------------------- pipe connections --------------------- */
 
 #ifdef HAVE_POPEN
diff -ur R-1.5.1.orig/src/main/names.c R-1.5.1/src/main/names.c
--- R-1.5.1.orig/src/main/names.c	2002-04-04 14:11:31.000000000 -0800
+++ R-1.5.1/src/main/names.c	2002-06-20 10:38:39.000000000 -0700
@@ -692,9 +692,6 @@
 {"dev.control",	do_devcontrol,	0,	111,	0,	PP_FUNCALL},
 {"dev.copy",	do_devcopy,	0,	111,	1,	PP_FUNCALL},
 {"dev.cur",	do_devcur,	0,	111,	0,	PP_FUNCALL},
-/*
-{"device",	do_device,	0,	111,	3,	PP_FUNCALL},
-*/
 {"dev.next",	do_devnext,	0,	111,	1,	PP_FUNCALL},
 {"dev.off",	do_devoff,	0,	111,	1,	PP_FUNCALL},
 {"dev.prev",	do_devprev,	0,	111,	1,	PP_FUNCALL},
@@ -793,6 +790,7 @@
 {"url", 	do_url,		0,      11,     4,      PP_FUNCALL},
 {"pipe", 	do_pipe,	0,      11,     3,      PP_FUNCALL},
 {"fifo", 	do_fifo,	0,      11,     4,      PP_FUNCALL},
+{"device", 	do_device,	0,      11,     4,      PP_FUNCALL},
 {"gzfile", 	do_gzfile,	0,      11,     4,      PP_FUNCALL},
 {"unz", 	do_unz,		0,      11,     3,      PP_FUNCALL},
 {"bzfile", 	do_bzfile,	0,      11,     3,      PP_FUNCALL},

--------------010901020707080002040305--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 19:44:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 20:44:04 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201844.UAA15381@pubhealth.ku.dk>

On Thu, 20 Jun 2002, Johnny Accot wrote:

> Hello,
>
> Prof Brian D Ripley wrote:
> > Not a bug: check the documentation of file(), which is documented to work
> > for files but not for devices.  No attempt is made to cope with e.g.
> > blocking on non-files.
> >
> > It's a pretty extreme view of the world to consider /dev/psaux to be a
> > file, and R is just using standard C <stdio.h> I/O.
> >
> > However, this is a great opportunity for you to contribute a device()
> > function to R.
>
> I finally checked the code and "wrote" the functions to "handle devices".
> Well, in fact I more or less duplicated the code for FIFOs, removed the
> option for encoding, added an option for synchronous I/O, and added a
> test to check that the file is indeed a character or block special file.
> This works great for me but I'm afraid it is a bit simple and does not
> cover much of device handling in general.  Especially I don't know if
> anybody would want to use it for block devices, and what they would need.
> The psaux device is one of the simplest device one could think of, that's
> why it works so well.  For other devices one would need at least an
> ioctl function, which I didn't write.  But still I have no idea whether
> anybody would use it and what for.  Anyway.  Please let me know if you
> think this is useful.  If yes, I will try to familiarize myself with
> the structure of the R code and make the device handling more general.

Yes, I do think it would be useful, but I know little about it,
Thank you for the offer.

>
> Thanks,
> Johnny
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Jun 20 20:16:55 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 20 Jun 2002 21:16:55 +0200 (MET DST)
Subject: documentation fix for hclust.Rd (PR#1696)
Message-ID: <200206201916.VAA15452@pubhealth.ku.dk>


R-1.5.1/src/library/mva/man/hclust.Rd, line 92:

 The \code{plclust()} function is basically the same * the plot method,

I think the word "as" should be inserted at *

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 20 21:28:30 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 20 Jun 2002 22:28:30 +0200 (MET DST)
Subject: Bug in printing symbolic derivative (PR#1697)
Message-ID: <200206202028.WAA15677@pubhealth.ku.dk>

A colleague pointed out the following error in D():

 f  <- expression(exp(-2*x*y))
 Dx <- D(f, 'x')
 Dy <- D(f,'y')
 Dxy <- D(Dx, 'y')
 Dyx <- D(Dy, 'x')

Then 

>  Dx    # this is right
-exp(-2 * x * y) * (2 * y)
>  Dy    # this is right
exp(-2 * x * y) * (-2 * x)
>  Dxy   # this is wrong in the sign of the second term!!!
-exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2
>  Dyx   # this is also wrong in the sign of the second term!!!
-exp(-2 * x * y) * 2 + exp(-2 * x * y) * (2 * y) * (-2 * x)

In both cases, the answer would be correct if the initial sign were
applied to the whole expression; is this just a case of not printing
some parentheses?  Let's experiment...

> x <- 1
> y <- 2
> eval(Dxy)
[1] 0.1098938  # this is right
> eval(Dyx)
[1] 0.1098938  # this is right
> -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
[1] 0.1831564  # this is wrong!!
> -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
[1] 0.1098938  # this is right

Looks like that's it...

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From petr.savicky@ff.cuni.cz  Thu Jun 20 21:35:04 2002
From: petr.savicky@ff.cuni.cz (petr.savicky@ff.cuni.cz)
Date: Thu, 20 Jun 2002 22:35:04 +0200 (MET DST)
Subject: tree construction crashes (PR#1698)
Message-ID: <200206202035.WAA15713@pubhealth.ku.dk>

Full_Name: Petr Savicky
Version: 1.5.0
OS: SuSE 7.2
Submission from: (NULL) (147.231.6.1)


The function tree() from the tree package crashes for certain input data.
All the information needed to reproduce the error (data, script, expected
error message) may be found at
http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz

Exactly the same error appeared at another computer running some RedHat
and R-1.4.1.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 21:52:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 22:52:41 +0200
Subject: Bug in printing symbolic derivative (PR#1697)
In-Reply-To: <200206202028.WAA15677@pubhealth.ku.dk>
References: <200206202028.WAA15677@pubhealth.ku.dk>
Message-ID: <x2k7ot4qqu.fsf@biostat.ku.dk>

murdoch@stats.uwo.ca writes:


> > eval(Dxy)
> [1] 0.1098938  # this is right
> > eval(Dyx)
> [1] 0.1098938  # this is right
> > -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
> [1] 0.1831564  # this is wrong!!
> > -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
> [1] 0.1098938  # this is right
> 
> Looks like that's it...

Yep. This is another long-standing item on the parse/deparse TODO
list. A more minimalistic version is

> "*"(5,2+3)
[1] 25
> quote("*"(5,2+3))
5 * 2 + 3
> eval(quote("*"(5,2+3)))
[1] 25

There are really two issues: we don't strip parentheses when parsing
and we don't insert them where needed on deparsing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206210515.g5L5F3i19356@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1673 *
Subject: Late Make Problem with Readline
From: jerfox@stanford.edu
Date: Sat, 15 Jun 2002 12:00:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1682 *
Subject: overzealous help-links.sh script!
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 17 Jun 2002 15:10:18 +0200
* PR# 1693 *
Subject: levels() counter-intuitif?
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 19 Jun 2002 18:57:13 +0200
* PR# 1694 *
Subject: Re: [R] cut with infinite values -> NA
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 20 Jun 2002 13:04:08 +0100 (BST)
* PR# 1695 *
Subject: Possible bug with glm.nb and starting values 
From: bcooper@hsph.harvard.edu
Date: Thu, 20 Jun 2002 18:59:35 +0200 (MET DST)
* PR# 1696 *
Subject: documentation fix for hclust.Rd
From: Stephen Eglen <eglen@pcg.wustl.edu>
Date: Thu, 20 Jun 2002 14:16:28 -0500 (CDT)
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
* PR# 1698 *
Subject: tree construction crashes
From: petr.savicky@ff.cuni.cz
Date: Thu, 20 Jun 2002 22:35:03 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 08:57:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 08:57:33 +0100 (BST)
Subject: Behaviour of library() in R-devel
Message-ID: <Pine.LNX.4.31.0206210850490.12872-100000@gannet.stats>

In an attempt to help newbie confusion with (not) installing packages,
library() in R-devel will only load a package if

1) It contains a DESCRIPTION file and
2) That DESCRIPTION file contains a Built: line.

Because the standard packages have only had Built: lines for a few days,
2) is currently a warning.  If you see it on standard packages, do `make
clean; make' in R-devel.  (It should not be necessary, but Sun make failed
to rebuild the DESCRPTION files on one of my systems.)  Before the release
of 1.6.0 it will become an error (and is documented as such now).

2) will not apply to the Carbon MacOS port, which does not have an
automated INSTALL script (AFAIK).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Fri Jun 21 17:54:44 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Fri, 21 Jun 2002 18:54:44 +0200 (MET DST)
Subject: The title function does not always work properly when used to add a global title to a figure containing several plots.
Message-ID: <200206211654.SAA14292@luc.ac.be>

Hi everyone,
  The following problem occurs with R-1.5.1 on an Intel laptop running
RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
still currently have installed). The complete of these three different
platforms can be found at the end of my email.
  The problem is the following. I am trying to add a global title to a
figure which contains several plots. Although I am not convince the
method I am using (see below) is the best way to achieve this, I
noticed that it failed to add the title in certain cases but not in
others. I included below some examples where it works and where it
does not work for me. As the same behavior occurs on all three
platforms I have access to, I guess that everyone (perhaps not does on
MS-Windows or on a Mac) should be able to see the problem by running
my code (if this is not the case, please let me know and I shall
provide some postscript files illustrating the problem).
  Unfortunately, the c-code to print text to the graphic window is
very complex and I am not familiar with it. As I thought that the
problem was related with the "title" function, I started by looking at
the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
to call the subroutine "clipText" to print the text to the canvas (but
I could already be wrong about this...). But in any case, I was not
able to trace down the problem as each of these subroutines appears to
get entered as expected with parameters containing the expected values
but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
which I longer understand... On the other hand, I no longer think that
the problem is actually coming from the "title" function but rather
from a global variable (or perhaps a "par" option) that is not always
reset (or initialized) properly... by at least functions such as
"title" and plot.default with options "axis", "ylab", "xlab", or
"main" when the option "mfrow" is not set to "c(1,1)" in the "par"
options.
  I hope that this is understandable... but in any case, the following
examples should clarify things up.

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)",axes=F)
axis(1)
axis(2)
box()
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Strange... but can perhaps help in identifying the problem.
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")
title(main="This should be the title of this figure.",outer=TRUE)
title(main="This should be the title of this figure.")

  Please, let me know if I can be of any further help in tracing down
the problem.

Thanks,
Patrick

PS: Note that there is for the moment a work around which is the
following:

# Work-around
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)

-----------------------------------------------------------------

> R.version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                

> R.version  
         _                   
platform alphaev6-dec-osf4.0f
arch     alphaev6            
os       osf4.0f             
system   alphaev6, osf4.0f   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

> R.version
         _               
platform mips-sgi-irix6.5
arch     mips            
os       irix6.5         
system   mips, irix6.5   
status                   
major    1               
minor    5.0             
year     2002            
month    04              
day      29              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 18:18:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 18:18:38 +0100 (BST)
Subject: The title function does not always work properly when used to
 add a global title to a figure containing several plots.
In-Reply-To: <200206211654.SAA14292@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0206211809200.2626-100000@gannet.stats>

Try

par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
title(main="This should be the title of this figure.", outer=TRUE)

which is how it is intended that this be done.

All your examples work (as I expect from S) for me that way.

Basically, after par(mfrow=c(1,1),oma=c(0,0,0,0)) you have no outer
margin nor do you have a plot region set yet (and the next call which
does would clear the screen).  So your call to title() should probably
fail as in

> title(main="This should be the title of this figure.")
Error in title(main = "This should be the title of this figure.") :
        plot.new has not been called yet

It would be desirable if it either gave an error message or worked.

On Fri, 21 Jun 2002, Patrick Lindsey wrote:

> Hi everyone,
>   The following problem occurs with R-1.5.1 on an Intel laptop running
> RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
> SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
> only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
> still currently have installed). The complete of these three different
> platforms can be found at the end of my email.
>   The problem is the following. I am trying to add a global title to a
> figure which contains several plots. Although I am not convince the
> method I am using (see below) is the best way to achieve this, I
> noticed that it failed to add the title in certain cases but not in
> others. I included below some examples where it works and where it
> does not work for me. As the same behavior occurs on all three
> platforms I have access to, I guess that everyone (perhaps not does on
> MS-Windows or on a Mac) should be able to see the problem by running
> my code (if this is not the case, please let me know and I shall
> provide some postscript files illustrating the problem).
>   Unfortunately, the c-code to print text to the graphic window is
> very complex and I am not familiar with it. As I thought that the
> problem was related with the "title" function, I started by looking at
> the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
> to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
> to call the subroutine "clipText" to print the text to the canvas (but
> I could already be wrong about this...). But in any case, I was not
> able to trace down the problem as each of these subroutines appears to
> get entered as expected with parameters containing the expected values
> but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
> which I longer understand... On the other hand, I no longer think that
> the problem is actually coming from the "title" function but rather
> from a global variable (or perhaps a "par" option) that is not always
> reset (or initialized) properly... by at least functions such as
> "title" and plot.default with options "axis", "ylab", "xlab", or
> "main" when the option "mfrow" is not set to "c(1,1)" in the "par"
> options.
>   I hope that this is understandable... but in any case, the following
> examples should clarify things up.
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)",axes=F)
> axis(1)
> axis(2)
> box()
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Strange... but can perhaps help in identifying the problem.
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
> title(main="This should be the title of this figure.",outer=TRUE)
> title(main="This should be the title of this figure.")
>
>   Please, let me know if I can be of any further help in tracing down
> the problem.
>
> Thanks,
> Patrick
>
> PS: Note that there is for the moment a work around which is the
> following:
>
> # Work-around
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)
>
> -----------------------------------------------------------------
>
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> > R.version
>          _
> platform alphaev6-dec-osf4.0f
> arch     alphaev6
> os       osf4.0f
> system   alphaev6, osf4.0f
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > R.version
>          _
> platform mips-sgi-irix6.5
> arch     mips
> os       irix6.5
> system   mips, irix6.5
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 00:26:52 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 01:26:52 +0200
Subject: AdaBoost for R
Message-ID: <3D16593C.2010101@ti.com>

I'm going to implement AdaBoost algorithm in R. Just wanted to ensure
that there is no implementation of any boosting algorithm in R... don't 
want
to reinvent the wheel...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 24 07:45:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 24 Jun 2002 08:45:18 +0200
Subject: AdaBoost for R
In-Reply-To: <3D16593C.2010101@ti.com>
References: <3D16593C.2010101@ti.com>
Message-ID: <15638.49150.232455.920097@gargle.gargle.HOWL>

>>>>> "AlexS" == Sirotkin, Alexander <demiurg@ti.com> writes:

    AlexS> I'm going to implement AdaBoost algorithm in R. Just
    AlexS> wanted to ensure that there is no implementation of
    AlexS> any boosting algorithm in R... don't want to reinvent
    AlexS> the wheel...

you might be reinventing.
Marcel Dettling from here has written a  LogitBoost Package
which is linked to a paper -- all available from

      http://stat.ethz.ch/~dettling/boosting 

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 22:03:10 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 23:03:10 +0200
Subject: AdaBoost for R
References: <15638.60248.317098.313167@gargle.gargle.HOWL>
Message-ID: <3D17890E.7020303@ti.com>

Hi.

Thanks a lot.  LogitBoost is cool, but for my current problem
I need  a multiclass (not binary) algorithm. Is this what you call
 Descrete AdaBoost ?

Marcel Dettling wrote:

>Dear Alexander,
>
>AlexS> I'm going to implement AdaBoost algorithm in R. Just
>AlexS> wanted to ensure that there is no implementation of
>AlexS> any boosting algorithm in R... don't want to reinvent
>AlexS> the wheel...
>
>Besides my LogitBoost-Package, I could also provide R-Code for
>Discrete and Real AdaBoost.
>
>Cheers,
>
>Marcel
>
>_____________________________________________________________
>
>Marcel Dettling		       
>ETH Zrich
>Seminar fr Statistik
>LEO C 12.2
>8092 Zrich
>Phone:  ++41 1 632 53 19
>E-Mail: dettling@stat.math.ethz.ch
>Web:    http://stat.ethz.ch/~dettling/	
>_____________________________________________________________
>  
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 09:41:04 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 09:41:04 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
Message-ID: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>


Dear All, 

No-one seemed to know about this on r-help, so I'm trying here.... 

I'm having problems at the configure stage when trying to build R on
Solaris 5.8. configure finds everything it needs but when it runs
config.status to make all the Makefiles and headers, I get a huge slew of
errors like this:

config.status: creating src/extra/zlib/Makefile
sed: -e expression #1, char 329: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
config.status: creating src/include/Makefile
sed: -e expression #1, char 323: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command

...and so on. I have tried replacing Solaris's native sed with GNU sed (in
fact the above messages are from GNU sed but Solaris sed fails in a
similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
to force configure not to use solaris's cheesy /bin/sh . No success, so
now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
(and of course there is no problem on my Linux box!)

Any ideas welcome.

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 25 10:02:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Jun 2002 10:02:05 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>
Message-ID: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>

Probably none of us know about it, because it has worked for lots of us
out of the box. So it would seem to be specific to your environment.

BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
blame it, especially as ksh gets used on Solaris.  Those messages are from
config.status, which on one of my Solaris systems starts

#! /bin/ksh
# Generated by configure.
# Run this file to recreate the current configuration.
# Compiler output produced by configure, useful for debugging
# configure, is in config.log if it exists.

debug=false
SHELL=${CONFIG_SHELL-/bin/ksh}

Try actually using /bin/sh, which is guaranteed standard-conforming
(it is the standard).

On Tue, 25 Jun 2002, H C Pumphrey wrote:

>
> Dear All,
>
> No-one seemed to know about this on r-help, so I'm trying here....
>
> I'm having problems at the configure stage when trying to build R on
> Solaris 5.8. configure finds everything it needs but when it runs
> config.status to make all the Makefiles and headers, I get a huge slew of
> errors like this:
>
> config.status: creating src/extra/zlib/Makefile
> sed: -e expression #1, char 329: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
> config.status: creating src/include/Makefile
> sed: -e expression #1, char 323: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
>
> ...and so on. I have tried replacing Solaris's native sed with GNU sed (in
> fact the above messages are from GNU sed but Solaris sed fails in a
> similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
> to force configure not to use solaris's cheesy /bin/sh . No success, so
> now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
> (and of course there is no problem on my Linux box!)
>
> Any ideas welcome.
>
> Hugh
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 12:30:53 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 12:30:53 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10206251219540.13517-100000@humilis>

On Tue, 25 Jun 2002 ripley@stats.ox.ac.uk wrote:

> Probably none of us know about it, because it has worked for lots of us
> out of the box. So it would seem to be specific to your environment.

You were right -- and yes, it was _really_ stupid. I had a function in
.bashrc to set the window title to the CWD and it left some garbage in
config.status . I removed the offending function and R now seems to be
building normally. Odd that it hasn't broken a build before ..... 
 
> BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
> blame it, especially as ksh gets used on Solaris.  Those messages are from
> config.status, which on one of my Solaris systems starts [with refs to
> ksh]

.... but /bin/sh did At least one program (and I can't recall which)
wouldn't build on Solaris until I forced it to use bash instead of
/bin/sh. But that wasn't the problem here (even though configure had
chosen to use /bin/sh and not /bin/ksh).

Bah. Sorry to bother everyone and many thanks for the help.

Hugh




============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lauri.Mehtatalo@metla.fi  Wed Jun 26 11:06:28 2002
From: Lauri.Mehtatalo@metla.fi (Lauri.Mehtatalo@metla.fi)
Date: Wed, 26 Jun 2002 12:06:28 +0200 (MET DST)
Subject: Bug? (PR#1710)
Message-ID: <200206261006.MAA20618@pubhealth.ku.dk>

Hi,

I tried to do a multiple linear model from the example 
dataset Formaldehyde. However, the function lm() did not 
estimate the coefficient of the term carb^2. The same 
problem occurred with the (nlme)dataset Pixel with both 
function lme() and lm(). I am using the windows version of 
R 1.5.1

Lauri Mehtatalo

The Formaldehyde example:
> data(Formaldehyde)
> lm(optden~carb+carb^2,data=Formaldehyde)

Call:
lm(formula = optden ~ carb + carb^2, data = 
Formaldehyde)

Coefficients:
(Intercept)         carb  
   0.005086     0.876286  

The Pixel example:

> {pkg <- select.list(sort(.packages(all.available = TRUE)))
+ if(nchar(pkg)) library(pkg, character.only=TRUE)}
Loading required package: nls 
Loading required package: lattice 
> data(Pixel)
>coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
~day,Side=~1)))
     (Intercept)         day
1/L     1048.995  0.32564928
1/R     1043.659  0.32564928
10/L    1144.898 -0.63867455
10/R    1099.883 -0.63867455
2/L     1054.011  0.65786288
2/R     1048.726  0.65786288
3/L     1065.000  0.45552014
3/R     1075.759  0.45552014
4/L     1088.173  0.93300591
4/R     1088.854  0.93300591
5/L     1125.918 -0.91429707
5/R     1129.309 -0.91429707
6/L     1112.721 -0.72735611
6/R     1094.164 -0.72735611
7/L     1133.443 -1.69593549
7/R     1156.943 -1.69593549
8/L     1101.205  0.05435070
8/R     1087.689  0.05435070
9/L     1093.513  0.05987474
9/R     1071.482  0.05987474
> coef(lm(pixel~day+day^2,data=Pixel))
(Intercept)         day 
1076.820678    1.341873  
- - - - - - - - - - - - -
Lauri Mehttalo
Metsntutkimuslaitos
Joensuun tutkimuskeskus
PL 68 (Yliopistokatu 7)
80101 JOENSUU
lauri.mehtatalo@metla.fi
p. 013-251 4110
- - - - - - - - - - - - -

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 12:34:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 26 Jun 2002 12:34:21 +0100 (BST)
Subject: Bug? (PR#1710)
In-Reply-To: <200206261006.MAA20618@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206261229110.10422-100000@gannet.stats>

This is NOT A BUG.

If you want a squared term, you need to include I(carb^2).  See ?formula
or even `An Introduction to R'.

Please

1) Use an informative subject line, as only the subject appears in the
BUGS summary file.

2) Read the Bugs section in the FAQ, and only post to R-bugs if you
are absolutely sure you understand.

On Wed, 26 Jun 2002 Lauri.Mehtatalo@metla.fi wrote:

> Hi,
>
> I tried to do a multiple linear model from the example
> dataset Formaldehyde. However, the function lm() did not
> estimate the coefficient of the term carb^2. The same
> problem occurred with the (nlme)dataset Pixel with both
> function lme() and lm(). I am using the windows version of
> R 1.5.1
>
> Lauri Mehtatalo
>
> The Formaldehyde example:
> > data(Formaldehyde)
> > lm(optden~carb+carb^2,data=Formaldehyde)
>
> Call:
> lm(formula = optden ~ carb + carb^2, data =
> Formaldehyde)
>
> Coefficients:
> (Intercept)         carb
>    0.005086     0.876286
>
> The Pixel example:
>
> > {pkg <- select.list(sort(.packages(all.available = TRUE)))
> + if(nchar(pkg)) library(pkg, character.only=TRUE)}
> Loading required package: nls
> Loading required package: lattice
> > data(Pixel)
> >coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
> ~day,Side=~1)))
>      (Intercept)         day
> 1/L     1048.995  0.32564928
> 1/R     1043.659  0.32564928
> 10/L    1144.898 -0.63867455
> 10/R    1099.883 -0.63867455
> 2/L     1054.011  0.65786288
> 2/R     1048.726  0.65786288
> 3/L     1065.000  0.45552014
> 3/R     1075.759  0.45552014
> 4/L     1088.173  0.93300591
> 4/R     1088.854  0.93300591
> 5/L     1125.918 -0.91429707
> 5/R     1129.309 -0.91429707
> 6/L     1112.721 -0.72735611
> 6/R     1094.164 -0.72735611
> 7/L     1133.443 -1.69593549
> 7/R     1156.943 -1.69593549
> 8/L     1101.205  0.05435070
> 8/R     1087.689  0.05435070
> 9/L     1093.513  0.05987474
> 9/R     1071.482  0.05987474
> > coef(lm(pixel~day+day^2,data=Pixel))
> (Intercept)         day
> 1076.820678    1.341873
> - - - - - - - - - - - - -
> Lauri Mehttalo
> Metsntutkimuslaitos
> Joensuun tutkimuskeskus
> PL 68 (Yliopistokatu 7)
> 80101 JOENSUU
> lauri.mehtatalo@metla.fi
> p. 013-251 4110
> - - - - - - - - - - - - -
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 13:35:52 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jun 2002 13:35:52 +0100 (BST)
Subject: tree construction crashes (PR#1698)
In-Reply-To: <200206202035.WAA15713@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206261324340.13559-100000@auk.stats>

!) the construction does not `crash', it terminates with an error message,
and you could have used the standard R debugging tools to investigate. Your
incorrect report wasted my quite a lot of my time setting up a debugging
environment to catch a crash.

2) The problem is that you are asking for an exact fit to a large dataset,
and you have integer overflow on your 32-bit (I presume) machine.
What you are doing is not within the design specifcation of tree (nor
rpart). From the help page:

     To produce a tree that fits the data perfectly, set `mindev = 0'
     and `minsize = 2', if the limit on tree depth allows such a tree.

so this is even something discussed on the help page.

3) Reports on contributed packages should be sent or at least copied to
the maintainers, who do not in general have access to R-bugs nor read
R-devel.  In any case, it would be simple good manners.


On Thu, 20 Jun 2002 petr.savicky@ff.cuni.cz wrote:

> Full_Name: Petr Savicky
> Version: 1.5.0
> OS: SuSE 7.2
> Submission from: (NULL) (147.231.6.1)
>
>
> The function tree() from the tree package crashes for certain input data.
> All the information needed to reproduce the error (data, script, expected
> error message) may be found at
> http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz
>
> Exactly the same error appeared at another computer running some RedHat
> and R-1.4.1.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jun 27 08:53:12 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 27 Jun 2002 09:53:12 +0200 (MEST)
Subject: F90 in packages
Message-ID: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>


Hi, 

did anybody manage to compile F90 sources in an R-package? The major
problem is, at least in my opinion, that non of the "free" F90 -> F77
converters is working correctly, at least for the F90 sources
I need to compile. 

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 27 09:14:47 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Jun 2002 10:14:47 +0200
Subject: F90 in packages
In-Reply-To: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
References: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
Message-ID: <15642.51575.625436.892867@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> did anybody manage to compile F90 sources in an
    Torsten> R-package? The major problem is, at least in my
    Torsten> opinion, that non of the "free" F90 -> F77
    Torsten> converters is working correctly, at least for the
    Torsten> F90 sources I need to compile.

yes, exactly, and there's no mature GNU fortran 90 or even 95,
yet.  I've recently read about a "g95" {GNU Fortran 95} development
effort, but haven't taken the time to find out how far they are.

The f2c translator has been supporting some (minor) 
f90 extensions; you might investigate further there.

My consequence: 
   Encourage people using C (or C++ if it really makes sense),
   instead.  
But I know this is no real option for some in the
Numerical-Analysis Community, unfortunately.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socrates@mail.ru  Thu Jun 27 09:30:52 2002
From: socrates@mail.ru (socrates@mail.ru)
Date: Thu, 27 Jun 2002 10:30:52 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206270830.KAA29465@pubhealth.ku.dk>

Full_Name: Socrates Alikhanidi
Version: 1.5.1
OS: Windows 2000
Submission from: (NULL) (133.15.3.28)


During resizing of 'R Console' windows the fatal error of forbidden memory
access appears.
To reproduce that with a guaranty, resize windows by mouse with small steps.
Probably the faster computer is, the earlier that event appears. I have PIV 1.8
GHz.
Waiting time was near 1 second.

Thank you for great product.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 09:59:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 09:59:54 +0100 (BST)
Subject: GUI bug (PR#1711)
In-Reply-To: <200206270830.KAA29465@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>

Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
or an AthlonXP 1800.  If it were a common problem I am sure we would hear
about it often.

Why are you resizing the console at all?  You can set a suitable size in
the preferences.

On Thu, 27 Jun 2002 socrates@mail.ru wrote:

> Full_Name: Socrates Alikhanidi
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (133.15.3.28)
>
>
> During resizing of 'R Console' windows the fatal error of forbidden memory
> access appears.
> To reproduce that with a guaranty, resize windows by mouse with small steps.
> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
> GHz.
> Waiting time was near 1 second.
>
> Thank you for great product.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 14:21:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 14:21:42 +0100 (BST)
Subject: Testing for platform type
Message-ID: <Pine.LNX.4.31.0206271414520.22911-100000@gannet.stats>

The recommended way to test for a platform type is via .Platform$OS.type.
machine() has provided equivalent information, but will be deprecated in
1.6.0.

Using R.Version()$os == "Win32" does not work as the OS name is subject to
change, and is never `Win32' in R 1.5.x, where autoconf was used to make
the config.h file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 27 15:16:00 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 27 Jun 2002 16:16:00 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206271416.QAA04430@pubhealth.ku.dk>

I can reproduce it in Win98 on a fairly slow machine.  It looks to me
as though the routine that's handling the WM_SIZE messages is being
interrupted by the new resize requests, and eventually the stack
overflows.  It would be best to ignore such requests while one is
active.  I don't understand graphapp well enough to know where to fix
this.

Duncan Murdoch

On Thu, 27 Jun 2002 09:59:54 +0100 (BST), you wrote in message
<Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>:

>Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
>or an AthlonXP 1800.  If it were a common problem I am sure we would hear
>about it often.
>
>Why are you resizing the console at all?  You can set a suitable size in
>the preferences.
>
>On Thu, 27 Jun 2002 socrates@mail.ru wrote:
>
>> Full_Name: Socrates Alikhanidi
>> Version: 1.5.1
>> OS: Windows 2000
>> Submission from: (NULL) (133.15.3.28)
>>
>>
>> During resizing of 'R Console' windows the fatal error of forbidden memory
>> access appears.
>> To reproduce that with a guaranty, resize windows by mouse with small steps.
>> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
>> GHz.
>> Waiting time was near 1 second.
>>
>> Thank you for great product.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Jun 27 17:13:53 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 27 Jun 2002 18:13:53 +0200 (MET DST)
Subject: data.frame does not recycle consistently (PR#1713)
Message-ID: <200206271613.SAA05140@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)



Note that the examples below do work in S (S-Plus 2000).

It appears that data.frame does not recycle text strings.  Maybe has something
to do with coercion to factors???

> data.frame(x=1:2,y=1)
  x y
1 1 1
2 2 1

> data.frame(x=c("A","B"),y=T)
  x    y
1 A TRUE
2 B TRUE

> data.frame(x=c("A","B"),y="C")
Error in data.frame(x = c("A", "B"), y = "C") : 
        arguments imply differing number of rows: 2, 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 17:52:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 17:52:42 +0100 (BST)
Subject: data.frame does not recycle consistently (PR#1713)
In-Reply-To: <200206271613.SAA05140@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206271737430.23373-100000@gannet.stats>

On Thu, 27 Jun 2002 Kevin.Wright@pioneer.com wrote:

> Full_Name: Kevin Wright
> Version: 1.5.1
> OS: Windows 95
> Submission from: (NULL) (170.54.59.160)
>
>
>
> Note that the examples below do work in S (S-Plus 2000).
>
> It appears that data.frame does not recycle text strings.  Maybe has something
> to do with coercion to factors???

Yes, it is.  Not sure why that makes it inconsistent, though.
Vectors are recycled, other objects are not, and that is determined after
conversion to a column of a data frame.  We could fairly easily allow
factors and simple "AsIs" objects to be recycled.

BTW, S-PLUS 2000 is not S, and its data frame code is quite a lot
different from the original S code.  It also makes mistakes: compare

> data.frame(x=c("A","B"),y=I("C"))
> data.frame(x=c("A","B"),y=I(rep("C", 2)))


>
> > data.frame(x=1:2,y=1)
>   x y
> 1 1 1
> 2 2 1
>
> > data.frame(x=c("A","B"),y=T)
>   x    y
> 1 A TRUE
> 2 B TRUE
>
> > data.frame(x=c("A","B"),y="C")
> Error in data.frame(x = c("A", "B"), y = "C") :
>         arguments imply differing number of rows: 2, 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bruno.White@ubs-oconnor.com  Thu Jun 27 21:17:14 2002
From: Bruno.White@ubs-oconnor.com (Bruno.White@ubs-oconnor.com)
Date: Thu, 27 Jun 2002 16:17:14 -0400
Subject: 1.5.1 docs on handling errors when embedding R ?
Message-ID: <50982B69B3D6E44F854E5B040B882073064C6C@NSTMC005PEX1.ubsgs.ubsgroup.net>

Hello all,

I have a system in which I embed R, currently it
is running using 1.3.1 release, and I would like to
upgrade to 1.5.1. 

I need to trap and report any errors during evaluation.
Previously I was installing my own ErrorHook to capture
error messages and over-riding jump_now to call
Rf_resetStack(1). I know there has been some massive work
in this area so things have changed (i.e. my old code doesn't
compile ). I am sure I can figure it out by looking 
at the code, but are there some docs somewhere about this stuff ? 

Thanks,

Bruno

PS: great work, embedding R is so so cool :)



The information contained in and accompanying this communication is strictly
confidential and intended solely for the use of the intended recipient.  If you
are not the intended recipient, you should not disseminate, distribute or copy
this communication or any attachments.  Additionally, please delete/destroy all
copies of this communication and attachments and notify the sender of the error
by email as soon as possible.

Emails may be interfered with, may contain computer viruses or other defects
and may not be successfully replicated on other systems.  UBS O'Connor gives no
warranties in relation to these matters.  If you have any doubts about the
authenticity of an email purportedly sent by UBS O'Connor, please contact us
immediately.  This email has been prepared by a representative of UBS O'Connor
and is for your general information and should not be construed as a
solicitation or offer to buy or sell any securities or financial related
products.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 06:51:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 28 Jun 2002 07:51:43 +0200 (MET DST)
Subject: package `methods' has persistent effects even if detached (PR#1715)
Message-ID: <200206280551.HAA06028@pubhealth.ku.dk>

This came from an error in reg-tests-1.R

> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"
> library(methods)
> detach("package:methods")
> search()
[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"      "character"

My reading is that this should not happen.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jaitchis@hwy.com.au  Fri Jun 28 06:52:46 2002
From: jaitchis@hwy.com.au (jaitchis@hwy.com.au)
Date: Fri, 28 Jun 2002 07:52:46 +0200 (MET DST)
Subject: rdiscrete in e1071 fails when n==1 (PR#1716)
Message-ID: <200206280552.HAA06066@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################





<<insert bug report here>>


in e0171 the routine rdiscrete fails when n==1

the first few lines of code make it obvious why

> rdiscrete
function (n, probs, values = 1:length(probs), method = "inverse", 
    aliasmatrix = NULL) 
{
    if (length(probs) != length(values)) 
        stop("rdiscrete: probs and values must have the same 
length.")
    if (sum(probs < 0) > 0) 
        stop("rdiscrete: probs must not contain negative values.")
    if (n == 1) 
        return(values[sum(runif(1) > p) + 1])   ???? p is undefined at 
this point
    else {




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows 98 SE 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:e1071, package:ctest, Autoloads, 
package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 09:28:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jun 2002 09:28:57 +0100 (BST)
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <200206280551.HAA06028@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>

Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.

> class
.Primitive("class")
> find("class")
[1] "package:base"
> library(methods)
> class
.Primitive("dataClass")
> find("class")
[1] "package:methods" "package:base"
> get("class", "package:base")
.Primitive("dataClass")
> detach("package:methods")
> class
.Primitive("dataClass")

so attaching methods is altering the class object *in base*.
Related to namespaces?

On Fri, 28 Jun 2002 ripley@stats.ox.ac.uk wrote:

> This came from an error in reg-tests-1.R
>
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"
> > library(methods)
> > detach("package:methods")
> > search()
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"      "character"
>
> My reading is that this should not happen.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 10:17:36 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 11:17:36 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
Message-ID: <15644.10672.168515.693504@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>> class
> .Primitive("class")
>> find("class")
> [1] "package:base"
>> library(methods)
>> class
> .Primitive("dataClass")
>> find("class")
> [1] "package:methods" "package:base"
>> get("class", "package:base")
> .Primitive("dataClass")
>> detach("package:methods")
>> class
> .Primitive("dataClass")

> so attaching methods is altering the class object *in base*.
> Related to namespaces?

A problem in library(), maybe?

All I see is

R/class.R:class <- dataClass

but surely assignments should be in methods and not in base?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Fri Jun 28 10:53:31 2002
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Fri, 28 Jun 2002 11:53:31 +0200 (MET DST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
Message-ID: <200206280953.LAA09404@pubhealth.ku.dk>

Full_Name: Jrg Polzehl
Version: 1.5.1 
OS: Windows 2000
Submission from: (NULL) (193.175.148.198)


When calculating MLE's in a variance component model using constrained
optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
behaviour in cases where
the likelihood function was evalueted at the constraint. Parameters and value of
the
function at the constraint seem to be returned in this case.
I've tried to reproduce the effect in a very simple example:

###############################################################################
fn <- function(par,x,y){
ind <- 1:(length(x)/2)
alpha <- par[1]
beta <- par[2]
sigmaq1 <- par[3]
sigmaq2 <- par[4]
sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
}

set.seed(3)
n <- 5
x1 <- runif(n)
x2 <- runif(n)
y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
x <- c(x1,x2)
par <- c(0,0,1,1)
z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
####################################################################################

Note that the effect vanishes in case of other constraints for par[3:4].

here is what happens with trace=1 :

z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 4118799.069149
final  value 4118799.069149 
converged
----------------------------------------------------------------------------------
and the essential part with trace = 6 :

4  variables are free at GCP on iteration 11
LINE SEARCH 1 times; norm of step = 1.19245
X = -3.34057 6.34639 1.18546 15.2136 
G = -1.08654 -1.14056 1.42527 -0.307525 
Iteration    11

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the next break point =  8.3175e-001
Distance to the stationary point =  1.4763e-001

GCP found in this segment
Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the stationary point =  1.4763e-001
Cauchy X =  -3.18017 6.51477 0.97505 15.259 

---------------- exit CAUCHY----------------------

4  variables are free at GCP on iteration 12                #  
!!!!!!!!!!!!!!!!!!!!!!
LINE SEARCH 0 times; norm of step = 2.30637
X = -3.90499 7.26709 1e-006 16.8712 
G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468 

iterations 12
function evaluations 15
segments explored during Cauchy searches 12
BFGS updates skipped 0
active bounds at final generalized Cauchy point 0
norm of the final projected gradient 4.1147e+009
final function value 4.1188e+006

X = -3.90499 7.26709 1e-006 16.8712 
F = 4.1188e+006
final  value 4118799.069149 
converged


See especially the line marked with !!!!!!!!!!

Regards,

Jrg Polzehl


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 28 10:58:10 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 28 Jun 2002 11:58:10 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.10672.168515.693504@mithrandir.hornik.net>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
Message-ID: <15644.13106.766528.617696@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
    >>> class
    >> .Primitive("class")
    >>> find("class")
    >> [1] "package:base"
    >>> library(methods)
    >>> class
    >> .Primitive("dataClass")
    >>> find("class")
    >> [1] "package:methods" "package:base"
    >>> get("class", "package:base")
    >> .Primitive("dataClass")
    >>> detach("package:methods")
    >>> class
    >> .Primitive("dataClass")

    >> so attaching methods is altering the class object *in base*.
    >> Related to namespaces?

    KH> A problem in library(), maybe?

    KH> All I see is

    KH> R/class.R:class <- dataClass

    KH> but surely assignments should be in methods and not in base?

I think JMC mentioned something about the reasons for this, 
and will again (?) when `morning has broken' at the East cost
(and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

My guess is: This is *necessary* now that base is a namespaced,
   since everything in base is using class() as defined in base!
   {use it's own name space first!}.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 11:19:23 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 12:19:23 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.13106.766528.617696@gargle.gargle.HOWL>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL>
Message-ID: <15644.14379.430320.396271@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>>>>> Prof Brian D Ripley writes:
>>> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>>>> class
>>> .Primitive("class")
>>>> find("class")
>>> [1] "package:base"
>>>> library(methods)
>>>> class
>>> .Primitive("dataClass")
>>>> find("class")
>>> [1] "package:methods" "package:base"
>>>> get("class", "package:base")
>>> .Primitive("dataClass")
>>>> detach("package:methods")
>>>> class
>>> .Primitive("dataClass")

>>> so attaching methods is altering the class object *in base*.
>>> Related to namespaces?

KH> A problem in library(), maybe?

KH> All I see is

KH> R/class.R:class <- dataClass

KH> but surely assignments should be in methods and not in base?

> I think JMC mentioned something about the reasons for this, 
> and will again (?) when `morning has broken' at the East cost
> (and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

> My guess is: This is *necessary* now that base is a namespaced,
>    since everything in base is using class() as defined in base!
>    {use it's own name space first!}.

Again, not my understanding of Luke's paper.

The culprit is

    for(i in rev(seq(along = search())))
      cacheMetaData(as.environment(i), TRUE)
    if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
        # if base is using a name space then any replacements for functions
        # in base defined in methods need to be installed directly into base
        # or they will not be visible to base code.
        for (n in ls(env = where))
            if (exists(n, env = NULL))
                assign(n, get(n, env = where), env = NULL)
    }

in .First.lib() of methods.

There is a general issue here: base should conceptually be considered as
sealed.  If we really need to unlock the bindings when attaching methods
then we should restore the original ones when detaching but it does not
feel right to do this at all.  Luke will have more to say, I am sure.

-k

> Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jechacon@unex.es  Fri Jun 28 12:53:06 2002
From: jechacon@unex.es (jechacon@unex.es)
Date: Fri, 28 Jun 2002 13:53:06 +0200 (MET DST)
Subject: integrate function fails! (PR#1718)
Message-ID: <200206281153.NAA11196@pubhealth.ku.dk>

Full_Name: Jos Enrique Chacn
Version: 1.5.0 and 1.3.1
OS: Windows Millenium
Submission from: (NULL) (158.49.28.155)


Dear reader:
I was trying to evaluate the L2 error produced when estimating the density
function N(0,1) from a sample of size 100 using a kernel density estimate. It
produced a strange value. You can reproduce the process by typing

samp<-rnorm(100)
fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
integrand<-function(x){(fker(x,5)-dnorm(x))^2}
err<-integrate(integrand,-Inf,Inf)

This value err of the L2 error is generally far from accurate. fker is the
kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
a very large choice far from the optimum which is around 0.4, but it makes it
more clear to see the failure. You just have to evaluate integrand(0); then, you
know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
which was usually around 0.1. But the value that integrate gives is around 1.6!
Anyway, there is a library called rmutil (I don't remember where I got it, but I
found it searching in the forums) which contains a function called int that
works well.

I hope this problem can be solved.

Best regards,
  Jos Enrique Chacn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 28 13:21:33 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 28 Jun 2002 08:21:33 -0400
Subject: (PR#1715) Re: package `methods' has persistent effects even
 ifdetached
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL> <15644.14379.430320.396271@mithrandir.hornik.net>
Message-ID: <3D1C54CD.33E9D5D2@research.bell-labs.com>

Kurt Hornik wrote:
....................................................
> 
> The culprit is
> 
>     for(i in rev(seq(along = search())))
>       cacheMetaData(as.environment(i), TRUE)
>     if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
>         # if base is using a name space then any replacements for functions
>         # in base defined in methods need to be installed directly into base
>         # or they will not be visible to base code.
>         for (n in ls(env = where))
>             if (exists(n, env = NULL))
>                 assign(n, get(n, env = where), env = NULL)
>     }
> 
> in .First.lib() of methods.
> 
> There is a general issue here: base should conceptually be considered as
> sealed.  If we really need to unlock the bindings when attaching methods
> then we should restore the original ones when detaching but it does not
> feel right to do this at all.  Luke will have more to say, I am sure.
> 
> -k
> 
> > Martin

Yes, definitely a general question here.  And it's related to Martin's
earlier report about all.equal.

As I mentioned, the inconsistency there resulted from data.class (in
base) behaving differently when the methods package was attached, with
its different version of class.


Intuitively, the code added to .First.lib seems to contradict the
namespace idea.  The issue may be whether any code in base breaks if it
continues to use the base version of class() when the methods package is
attached.  Luke will know better, but my feeling is that we should fix
any problems of that sort directly, and undo the change to .First.lib.

(There are some other redefinitions in methods, including plot with a
"y" argument.  But it's class and class<- that seem likely to be used by
other code in base.)

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Fri Jun 28 15:37:29 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Fri, 28 Jun 2002 16:37:29 +0200 (MET DST)
Subject: rw1051 binary dist missing dyn.load documentation (PR#1719)
Message-ID: <200206281437.QAA12910@pubhealth.ku.dk>

The binary package (version of 6/17)  of rw1051 for Windows is missing
html documentation for dyn.load()  The file is present in
$R_HOME/library/base/html, but has zero bytes.  dyn.load help IS
accessible through the windows help system.

platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jun 28 19:31:25 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 28 Jun 2002 11:31:25 -0700 (PDT)
Subject: integrate function fails! (PR#1718)
In-Reply-To: <200206281153.NAA11196@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0206281125370.123502-100000@homer04.u.washington.edu>

On Fri, 28 Jun 2002 jechacon@unex.es wrote:

> Full_Name: Jos Enrique Chacn
> Version: 1.5.0 and 1.3.1
> OS: Windows Millenium
> Submission from: (NULL) (158.49.28.155)
>
>
> Dear reader:
> I was trying to evaluate the L2 error produced when estimating the density
> function N(0,1) from a sample of size 100 using a kernel density estimate. It
> produced a strange value. You can reproduce the process by typing
>
> samp<-rnorm(100)
> fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
> integrand<-function(x){(fker(x,5)-dnorm(x))^2}
> err<-integrate(integrand,-Inf,Inf)
>
> This value err of the L2 error is generally far from accurate. fker is the
> kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
> a very large choice far from the optimum which is around 0.4, but it makes it
> more clear to see the failure. You just have to evaluate integrand(0); then, you
> know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
> which was usually around 0.1. But the value that integrate gives is around 1.6!
> Anyway, there is a library called rmutil (I don't remember where I got it, but I
> found it searching in the forums) which contains a function called int that
> works well.

This may illustrate what's going on...

> x<-seq(-1,1,length=10)
> sapply(x,integrand)
 [1] 0.02741093 0.04742150 0.06987683 0.08968701 0.10136155 0.10132284
 [7] 0.08957798 0.06971705 0.04723830 0.02723325
> integrand(x)
 [1] 0.2865455 0.2327631 0.1895539 0.1599095 0.1449956 0.1449956 0.1599095
 [8] 0.1895539 0.2327631 0.2865455


If you look a the help page for integrate you see

       f: An R function taking a numeric first argument and returning a
          numeric vector the same length. Returning a non-finite
          element will generate an error.

so the function must be properly vectorised for integrate to work. Your
function isn't.  There is a check in integrate() that the return value is
the right length, but there's really no way to check that the value is
correct.

If you make the function vectorised it does seem to work
> correct.integrand<-function(x) sapply(x,integrand)
> integrate(correct.integrand,-Inf,Inf)
0.1839647 with absolute error < 8.9e-08


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Fri Jun 28 23:45:41 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Sat, 29 Jun 2002 00:45:41 +0200 (MET DST)
Subject: possible typo in Control.Rd (PR#1720)
Message-ID: <200206282245.AAA14470@pubhealth.ku.dk>

line 36/37 of src/library/base/man/Control.Rd has:

\seealso{
  \code{\link{Syntax}} for the basis \R syntax and operators,

Should that be "basic" rather than "basis"?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jun 29 01:07:51 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 29 Jun 2002 02:07:51 +0200 (MET DST)
Subject: [R] browser/debug and for loop (PR#1721)
Message-ID: <200206290007.CAA14575@pubhealth.ku.dk>

On Fri, 28 Jun 2002, Vadim Ogranovich wrote:

> Dear R-Users,
>
> It seems like once one invokes browser() inside a loop and steps through the
> body using 'n' any subsequent loop will be "intercepted" by debug()
> function. Here is exactly what I mean
>
> # fresh R session
> # run a loop that has browser() inside the body
> > for (i in seq(5)) { browser(); print(i) }
> for (i in seq(5)) { browser(); print(i) }
> Called from: NULL
> Browse[1]> n
> n
> debug: print(i)
> Browse[1]> Q
> Q
>
> #  remove browser(), debug() is still there
> > for (i in seq(5)) { print(i) }
> for (i in seq(5)) { print(i) }
> debug: i
> Browse[1]> Q
> Q
>
> My guess is that when I was stepping through some function got flagged for
> debugging. I tried to undebug "for", but that didn't work.

This is quite interesting.  Note that the label at the start of the
browser session changes from
  Called from: NULL
to
  debug: i

This indicates that the DEBUG() flag has got set on an environment (the
global environment in this case). It happens only when you do "n" and then
"Q" in the browser.

I think the fix is to SET_DEBUG(rho,0) when responding to "Q" in
main.c:ParseBrowser, but I'm not certain.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 30 18:57:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 30 Jun 2002 18:57:38 +0100 (BST)
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <20020630124930.1820aaf1.fharrell@virginia.edu>
Message-ID: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>

On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:

> On 30 Jun 2002 09:12:31 -0700
> "A.J. Rossini" <rossini@blindglobe.net> wrote:
>
> > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> >
> >     john> The equal sign has already been provided as an alternative assignment
> >     john> operator in R.
> >
> > And I feel the same way about "=" as I do about "_".  Yech.
>
> I'll second that.  And we've already seen the big trouble that can be
caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
envisioned by the developers.  -Frank Harrell

Frank,

Was that actually in R (where very few people use =)?  Unlike S4, = is not
a general-purpose assignment operator, and this sort of thing *was*
`envisioned by the developers'.  For example, if(sex = "male") is a syntax
error in R.  (Some more insidious ones, such as using assignment in the
a function call, are also disallowed.)

If there is evidence that this is regularly causing trouble we would want
to re-consider its scope, but the availability of `=' is hardly publicised
(and not even the editor of the Programmer's Niche remembered about it).

Brian

(Moved to R-devel, as maybe R-help should be spared this source of
confusion.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Jun 30 19:42:49 2002
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Sun, 30 Jun 2002 14:42:49 -0400
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
References: <20020630124930.1820aaf1.fharrell@virginia.edu>
 <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
Message-ID: <20020630144249.21739e6e.fharrell@virginia.edu>

On Sun, 30 Jun 2002 18:57:38 +0100 (BST)
ripley@stats.ox.ac.uk wrote:

> On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:
> 
> > On 30 Jun 2002 09:12:31 -0700
> > "A.J. Rossini" <rossini@blindglobe.net> wrote:
> >
> > > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> > >
> > >     john> The equal sign has already been provided as an alternative assignment
> > >     john> operator in R.
> > >
> > > And I feel the same way about "=" as I do about "_".  Yech.
> >
> > I'll second that.  And we've already seen the big trouble that can be
> caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
> envisioned by the developers.  -Frank Harrell
> 
> Frank,
> 
> Was that actually in R (where very few people use =)?  Unlike S4, = is not
> a general-purpose assignment operator, and this sort of thing *was*
> `envisioned by the developers'.  For example, if(sex = "male") is a syntax
> error in R.  (Some more insidious ones, such as using assignment in the
> a function call, are also disallowed.)

It was probably S-Plus.  I have trouble keeping S-Plus and R separate sometimes.
I hope that R also provides safeguards about "=" when it appears in an argument to a function.

> 
> If there is evidence that this is regularly causing trouble we would want
> to re-consider its scope, but the availability of `=' is hardly publicised
> (and not even the editor of the Programmer's Niche remembered about it).
> 
> Brian
> 
> (Moved to R-devel, as maybe R-help should be spared this source of
> confusion.)

Sure.  Thanks Brian  -Frank

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From felix@sprintlabs.com  Sun Jun  2 01:45:24 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:24 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1623)
Message-ID: <200206020045.CAA02832@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From felix@sprintlabs.com  Sun Jun  2 01:45:55 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:55 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020045.CAA02841@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  2 06:38:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 2 Jun 2002 07:38:13 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020538.HAA03183@pubhealth.ku.dk>

This runs correctly for me on `Solaris', using Solaris' f77.  I presume
you don't have a Fortran compiler installed on either system as you are
using the script bin/f77?  If so how did you compile cluster before?

We need a lot more information, including which compilers you have and
which configure selected.  Did you perchance set environment variables
such as FC or F77?

If you do have /usr/bin/f77 as a real Fortran compiler, tell configure so
(or edit etc/Makeconf).

On Sun, 2 Jun 2002 felix@sprintlabs.com wrote:

> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
>
>
> [R-1.5.0]
>
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>
>
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>
> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following
> line in ~R/bin/f77
>
> : ${F77='f77'}
>
> by
>
> : ${F77='/usr/bin/f77'}
>
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Jun  2 14:22:24 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 2 Jun 2002 09:22:24 -0400
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <200206020045.CAA02841@pubhealth.ku.dk>; from felix@sprintlabs.com on Sun, Jun 02, 2002 at 02:45:55AM +0200
References: <200206020045.CAA02841@pubhealth.ku.dk>
Message-ID: <20020602092224.P51@jimmy.harvard.edu>

On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
> 
> 
> [R-1.5.0]
> 
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
> 
> 
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
> 
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
> 

 I can confirm this on my FreeBSD (4.5).
 I believe that there have been a number of changes to configure for
 the 1.5 release.
 I can also confirm that the fix also seems to work.

  Thanks,

    Robert


> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following 
> line in ~R/bin/f77
> 
> : ${F77='f77'}
> 
> by
> 
> : ${F77='/usr/bin/f77'}
> 
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Jun  2 14:36:31 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 2 Jun 2002 15:36:31 +0200
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <20020602092224.P51@jimmy.harvard.edu>
References: <200206020045.CAA02841@pubhealth.ku.dk>
 <20020602092224.P51@jimmy.harvard.edu>
Message-ID: <15610.8031.910764.754414@mithrandir.hornik.net>

>>>>> Robert Gentleman writes:

> On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
>> Full_Name: Felix Hernandez-Campos
>> Version: R-1.5.0
>> OS: IRIX, FreeBSD, Solaris
>> Submission from: (NULL) (208.30.174.32)
>> 
>> 
>> [R-1.5.0]
>> 
>> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
>> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>> 
>> 
>> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>> 
>> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>> 

>  I can confirm this on my FreeBSD (4.5).
>  I believe that there have been a number of changes to configure for
>  the 1.5 release.

Yes and they are documented in the release notes.

>  I can also confirm that the fix also seems to work.

I assume the problem only occurs because R_HOME/bin is in PATH?

-k

>   Thanks,

>     Robert


>> but after a minute or two, it returns an error about an "arg list too long".
>> The
>> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
>> shows
>> that this script is calling itself endlessly (rather than invoking the f77
>> compiler).
>> I have been able to solve the problem in both platforms by changing the
>> following 
>> line in ~R/bin/f77
>> 
>> : ${F77='f77'}
>> 
>> by
>> 
>> : ${F77='/usr/bin/f77'}
>> 
>> P.S. I was always able to install the package cluster without this modification
>> in
>> R-1.4 and R-1.3.
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ca  Tue Jun  4 00:19:14 2002
From: aa056@chebucto.ca (aa056@chebucto.ca)
Date: Tue, 4 Jun 2002 01:19:14 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1630)
Message-ID: <200206032319.BAA10429@pubhealth.ku.dk>

Using the same settings in config.site as were used for R-1.4.1,
R-1.5.0 fails to build.

./configure --enable-R-shlib

Using defaults and using PPro optimizations, the build failed in
package methods:

dumping R code in package 'methods'
gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'

The command that fails is:

    ../../../bin/R --vanilla --verbose < all.R

The same failure occurs using defaults for CFLAGS, etc.

Install patches:

  zcat R-release.diff.gz | patch -p1


R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
 -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
 -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
 -mpreferred-stack-boundary=2
  C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
 -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
 -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
-mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
-malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes

The same error occurs using the patched version.

$ gdb ../../../bin/R.bin core
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i586-mandrake-linux"...
Core was generated by `/mnt/Data/src/install/R-1.5.0/bin/R.bin --vanilla --slave'.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x40015238
#0  0x403cb10d in ?? ()Cannot access memory at address 0x40015238
(gdb)


> ### The following code is only executed when dumping
> assign(".saveImage", FALSE, .GlobalEnv)
> .First.lib("methods", "methods", .GlobalEnv)

$ ../../../bin/R --debugger=gdb

(gdb) run --vanilla < all.R
[...]

Program received signal SIGSEGV, Segmentation fault.
0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
(gdb) where
#0  0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
#1  0x404f5a85 in R_initMethodDispatch ()
   from /mnt/Data/src/install/R-1.5.0/library/methods/libs/methods.so
#2  0x807c6a2 in do_dotCode () at eval.c:88
#3  0x808b032 in Rf_eval () at eval.c:88
#4  0x808beae in do_begin () at eval.c:88
#5  0x808aeaf in Rf_eval () at eval.c:88
#6  0x808b3f0 in Rf_applyClosure () at eval.c:88
#7  0x808b0aa in Rf_eval () at eval.c:88
#8  0x80a0d8d in R_ReplConsole () at eval.c:88
#9  0x80a140a in run_Rmainloop () at eval.c:88
#10 0x80a1421 in Rf_mainloop () at eval.c:88
#11 0x80f5f6d in main () at eval.c:88
#12 0x400f38a6 in __libc_start_main (main=0x80f5f58 <main>, argc=2,
    ubp_av=0xbffff354, init=0x804a564 <_init>, fini=0x81677a4 <_fini>,
    rtld_fini=0x4000b980 <_dl_fini>, stack_end=0xbffff34c)
    at ../sysdeps/generic/libc-start.c:129
(gdb)


The following information is from R-1.4.1 big.report()

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
George N. White III  <aa056@chebucto.ns.ca> Halifax, NS, Canada


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:04:25 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 04 Jun 2002 10:04:25 -0400
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu
 (PR#1630)
References: <200206032319.BAA10429@pubhealth.ku.dk>
Message-ID: <3CFCC8E9.CF35A37C@research.bell-labs.com>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:07:19 2002
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Tue, 4 Jun 2002 16:07:19 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1632)
Message-ID: <200206041407.QAA18195@pubhealth.ku.dk>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  4 15:14:38 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 Jun 2002 10:14:38 -0400
Subject: CRAN down?
Message-ID: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>

Is <cran.r-project.org> down or is it just me having trouble?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  4 17:44:11 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 4 Jun 2002 18:44:11 +0200
Subject: CRAN down?
In-Reply-To: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
References: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
Message-ID: <15612.61019.706496.498175@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Is <cran.r-project.org> down

yes it is.

Use a mirror for the moment,  typically
	cran.XY.R-project.org   
where XY is, e.g., "us" , "uk", "dk" ,...
or also "good ol'" http://lib.stat.cmu.edu/R/CRAN/

    PaulG>  or is it just me having trouble?  Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun  5 17:57:40 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 5 Jun 2002 18:57:40 +0200 (MET DST)
Subject: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206051657.SAA24357@pubhealth.ku.dk>

I just realised that the return address in my recent bug report probably 
won't work... Here it is once more:


I compiled the latest R release. Configure correctly found my Tcl/Tk 8.0.4 
installation (it searched in various tcl8.0 and tk8.0 places). However, 
when:
>library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library 
"/home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so":
  /home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so: undefined symbol: 
Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

Which is correct because I cannot find that symbol in my Tcl library!

The docs are unspecific as to the version needed (but the actions of the 
configure script suggest that 8.0 is supported!). Is this correct, or is 
this a bug in configure or the documentation?



--please do not edit the information below--

Version:
platform = i686-pc-linux-gnu
arch = i686
os = linux-gnu
system = i686, linux-gnu
status =
major = 1
minor = 5.0
year = 2002
month = 04
day = 29
language = R

Search Path:
.GlobalEnv, package:ctest, Autoloads, package:base


RenE J.V. Bertin


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206070515.g575F3P00742@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1624 *
Subject: cluster installation hangs or too many args
From: felix@sprintlabs.com
Date: Sun, 2 Jun 2002 02:45:54 +0200 (MET DST)
* PR# 1639 *
Subject:  Tcl8.0.4 missing function?! 
From: RenE JV Bertin <bertin@bola.college-de-france.fr>
Date: Wed, 5 Jun 2002 18:51:14 +0200
* PR# 1640 *
Subject: Tcl8.0.4 missing function?! 
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 05 Jun 2002 18:56:37 +0200
* PR# 1641 *
Subject: Available; Grants, Loans, Financing
From: "MG PUBLISHING" <mgpublishing@newmail.com>
Date: Wed, 5 Jun 2002 19:10:58 -0400
* PR# 1642 *
Subject: NEW Consumer TELEMARKETING List
From: Telemarketing <client2@371.net>
Date: 06 Jun 2002 02:41:09 -0700
* PR# 1643 *
Subject: NEXT OF KIN
From: "tony fred"<tonyfred@qrio.com>
Date: Thu, 06 Jun 2002 17:31:12 +0300
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ns.ca  Sat Jun  8 13:14:02 2002
From: aa056@chebucto.ns.ca (George White)
Date: Sat, 8 Jun 2002 09:14:02 -0300 (ADT)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu  (PR#1630)
In-Reply-To: <3CFCC8E9.CF35A37C@research.bell-labs.com>
Message-ID: <Pine.GSO.3.95.iB1.0.1020608090154.26862A-100000@halifax.chebucto.ns.ca>

On Tue, 4 Jun 2002, John Chambers wrote:

> aa056@chebucto.ca wrote:
> > 
> > Using the same settings in config.site as were used for R-1.4.1,
> > R-1.5.0 fails to build.
> > 
> > ./configure --enable-R-shlib
> > 
> > Using defaults and using PPro optimizations, the build failed in
> > package methods:
> > 
> > dumping R code in package 'methods'
> > gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> > gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> > 
> > The command that fails is:
> > 
> >     ../../../bin/R --vanilla --verbose < all.R
> > 
> > The same failure occurs using defaults for CFLAGS, etc.
> > 
> > Install patches:
> > 
> >   zcat R-release.diff.gz | patch -p1
> > 
> > R is now configured for i686-pc-linux-gnu
> > 
> >   Source directory:          .
> >   Installation directory:    /usr/local
> >   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
> >  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
> >  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
> >  -mpreferred-stack-boundary=2
> >   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
> >  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> >  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> > -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> > -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   X11 support:               yes
> >   Gnome support:             no
> >   Tcl/Tk support:            yes
> >   Readline support:          yes
> > 
> >   R profiling support:       yes
> >   R as a shared library:     yes
> > 
> > The same error occurs using the patched version.
> > 
> 
> I couldn't reproduce this with the --enable-R-shlib in the
> configuration, on either of my current Linux versions (Redhat 7.1, YDL
> 2.2); e.g.,

I had no problem building the default configuration.  Comparing the 
resulting Makeconf with the one for the failed build I found that
configure did not set MAIN_LDFLAGS to --export-dynamic when using my
config.site (which has the MAIN_LDFLAGS entry commented out).

If I edit Makeconf and rebuild R.bin the build finished and 
"make check" passes.  

--
George White <aa056@chebucto.ns.ca> Halifax, Nova Scotia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 10 14:55:38 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2002 15:55:38 +0200
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <x2ofejtezp.fsf@blueberry.kubism.ku.dk>


As the subject says, the core team has decided to release R-1.5.1 next
Monday, mainly to "officialize" the bug fixes in the current
r-patched. It would be helpful that you check it out and report back
if you find any bad problems, especially if you have an uncommon
platform. (Or very minor nits. The intermediate ones are "out of
bounds" at this stage.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Jun 10 17:48:08 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 10 Jun 2002 12:48:08 -0400
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <kkl9gus0i1t4m4d0i20fgcdqp2v46o3tgf@4ax.com>

On 10 Jun 2002 15:55:38 +0200, Peter Dalgaard BSA
<p.dalgaard@biostat.ku.dk> wrote:

>
>As the subject says, the core team has decided to release R-1.5.1 next
>Monday, mainly to "officialize" the bug fixes in the current
>r-patched. It would be helpful that you check it out and report back
>if you find any bad problems, especially if you have an uncommon
>platform. (Or very minor nits. The intermediate ones are "out of
>bounds" at this stage.)

For Windows users, I'll compile the current r-patched and put it on 

 http://www.cran.r-project.org/bin/windows/base/

as SetupRpatched.exe.  (It should be automatically copied to the
mirrors by the next day.)  The first version should be online later
this afternoon.  I'll put new versions up as time permits; check the
file dates to see if I have.

Please copy any bug reports about this version to
R-windows@R-project.org.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 19:12:02 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 20:12:02 +0200 (MET DST)
Subject: coplot behaviour (PR#1653)
Message-ID: <200206101812.UAA26977@pubhealth.ku.dk>

Another one, using the same data as in my previous report (PR1651, available 
as http://rjvbertin.free.fr/PR1651data.tab):

kk<-read.table(<data>)
attach(kk)
Snr<-factor(Snr)
# Now try to make a coplot using boxplots:
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) plot(x, y))
# or
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) boxplot(y~x))

This almost functions,only the boxplot matrix is shifted and right-aligned 
with the vertical (size) factor display (seems to be drawn underneath it).
This happens both with the Windows binaries and the source distribution 
compiled under Linux.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 00:42:31 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 11 Jun 2002 01:42:31 +0200 (CEST)
Subject: R search applet initialization
Message-ID: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>


R 1.5.1 is due to come out ... and I've just noticed that the R help.start
page search applet doesn't work on my Mandrake 8.2 system even though I've
upgraded mozilla to version 1.0 and I have a perfectly working java (all
right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
didn't work). I had thought the problem due to a too-old mozilla version,
but it doesn't seem to be that now.

Error messages throughout changes in versions of mozilla and java are 
consistent: the java applet doesn't get initialized.

Could this be a problem with default mandrake file permissions ?
Is it possible to download just the apple source code and a description of 
how it is supposed to work from somewhere on CRAN ?
How could I go about debugging this ?

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 17:41:00 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 18:41:00 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206101641.SAA26695@pubhealth.ku.dk>


Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
(installed from sources).

# Load the data from the attached file:
kk<-read.table("__filename__", header=1)
# attach the data:
attach(kk)
Snr<-factor(Snr)
# fool around with a call to anova.glm():
anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
# Error: object nFD not found
# Well, I thought I had attached that. Anyway:
anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
data=kk)
# Same message
# In addition, warning message:
<lots of output>
R dumps core. On Windows, it crashes in <unknown module>.

Also not that the 1st (Snr) column is not automatically converted in a
factor, despite the fact that it consists of strings!

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

>From list moderator:
     formerly binary attached dataset is now available
     as  http://rjvbertin.free.fr/PR1651data.tab
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:06:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 08:06:13 +0100 (BST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>

On Tue, 11 Jun 2002 mikalzet@libero.it wrote:

>
> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
> page search applet doesn't work on my Mandrake 8.2 system even though I've
> upgraded mozilla to version 1.0 and I have a perfectly working java (all
> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
> didn't work). I had thought the problem due to a too-old mozilla version,
> but it doesn't seem to be that now.
>
> Error messages throughout changes in versions of mozilla and java are
> consistent: the java applet doesn't get initialized.
>
> Could this be a problem with default mandrake file permissions ?

I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
0.9.9 and 1.0rc2 all worked.

> Is it possible to download just the apple source code and a description of
> how it is supposed to work from somewhere on CRAN ?

It's all in doc/html/search in the source tree (you'll need to make to get
the HTML file and something to search).

> How could I go about debugging this ?
>
> --
> Michele Alzetta
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:24:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:24:15 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110724.JAA29161@pubhealth.ku.dk>

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)

Why are you calling anova.glm on an object of class c("aovlist",
"listof")?  Also, why give the data = kk argument to anova.glm (which does
not have such an argument)?

I have no idea what you intended, but there is no anova method for
a multistratum aov fit.  I suggest you look at the print and summary
methods.

> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!

All text files are strings. It is a column of integer numbers, and so is
converted to an integer variable in R.

If you wanted something different, read ?read.table and set colClasses.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:49:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:49:18 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110749.JAA29387@pubhealth.ku.dk>

I can't reproduce the crash on Linux, nor using rterm on Windows.
With Rgui on Windows it seems due to the over-long error message that is
generated (15880 characters) as a single line.

There was a bug report (PR 902 on problems) with over-long warnings.
That was solved long ago, but there is no guarantee that the display
system will accept them.  Perhaps warning() should truncate them.

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)
> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> >From list moderator:
>      formerly binary attached dataset is now available
>      as  http://rjvbertin.free.fr/PR1651data.tab
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 11 08:53:02 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 11 Jun 2002 09:53:02 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <15621.44126.18431.298413@gargle.gargle.HOWL>

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> R 1.5.1 is due to come out ... and I've just
    Michele> noticed that the R help.start page search applet
    Michele> doesn't work on my Mandrake 8.2 system even though
    Michele> I've upgraded mozilla to version 1.0 and I have a
    Michele> perfectly working java (all right, I'm using 1.4.0
    Michele> now, but with mozilla 0.98 and java 1.3.1 it still
    Michele> didn't work). I had thought the problem due to a
    Michele> too-old mozilla version, but it doesn't seem to be
    Michele> that now.

    Michele> Error messages throughout changes in versions of
    Michele> mozilla and java are consistent: the java applet
    Michele> doesn't get initialized.

I can confirm that with Mozilla 1.0 (20020605) 
and
	help.start(browser = "mozilla")
the search applet gives the same error message and
search/keywords are not working whereas with
	help.start(browser = "netscape")
(with quite an old version of netscape) the search applet
 *does* work.

(this is a highly up-patched redhat 7.1)

    Michele> Could this be a problem with default mandrake file
    Michele> permissions ?  Is it possible to download just the
    Michele> apple source code and a description of how it is
    Michele> supposed to work from somewhere on CRAN ?  How
    Michele> could I go about debugging this ?

(I have not tried yet to debug.  Always felt  Mozilla should be able to
 work as well as old netscape ..)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 11 14:45:03 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 11 Jun 2002 15:45:03 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
Message-ID: <15621.65247.359413.955515@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Tue, 11 Jun 2002 mikalzet@libero.it wrote:
>> 
>> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
>> page search applet doesn't work on my Mandrake 8.2 system even though I've
>> upgraded mozilla to version 1.0 and I have a perfectly working java (all
>> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
>> didn't work). I had thought the problem due to a too-old mozilla version,
>> but it doesn't seem to be that now.
>> 
>> Error messages throughout changes in versions of mozilla and java are
>> consistent: the java applet doesn't get initialized.
>> 
>> Could this be a problem with default mandrake file permissions ?

> I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
> 0.9.9 and 1.0rc2 all worked.

I can confirm the problem with current Debian testing and Mozilla
0.9.9-6, whereas things work fine with Netscape 4.77-2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdm28@cornell.edu  Tue Jun 11 15:33:42 2002
From: rdm28@cornell.edu (rdm28@cornell.edu)
Date: Tue, 11 Jun 2002 16:33:42 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206111433.QAA04910@pubhealth.ku.dk>



----------------------- transcript --------------------------
$ R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> axis(1,xaxp=c(0,1,4))
> version
         _
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R
>
------------------------end transcript ---------------------

I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
problem seems to exist for axis() with a yaxp argument.

The sequence:

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> par(xaxp=c(0,1,4))
> axis(1)

does draw an axis with four intervals, though.


On R-Help, in response to my question about this, Paul Murrell
<p.murrell@auckland.ac.nz> wrote:

> This appears to be a bug.  axis() should respond to an "in-line" xaxp
> setting.
>
> I can see a place in the C code where the problem appears to be, but an
> attempted quick fix failed.
>
> Could you please submit a bug report so that I (or someone else) will
> remember to have a proper look later?
>
> Thanks
>
> Paul


Thanks,
--
Robert Merithew





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 18:52:11 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 19:52:11 +0200 (MET DST)
Subject: command line editing does not work (PR#1656)
Message-ID: <200206111752.TAA05778@pubhealth.ku.dk>

I compiled R-1.5.0 on SuSE 7.2. Everything worked out, including
make check.  However, the escape sequences generated by the arrow
keys are not correctly understood.  So, I cannot e.g. get the previous
command by up arrow.  I had the same problem, when compiled R-1.4.1
on SuSE 7.2.

The problem was not present in precompiled binary R-1.3.0.rpm for
SuSE 7.2 from CRAN, however, I need at least R-1.4.1 for randomForest.

Compiling R-1.4.1 on RedHat based system was also OK, but I have SuSE
as my basic system.

I compared the output of "strace R" for the precompiled R-1.3.0 and
R-1.5.0 compiled by myself:

The correct behaviour of R-1.3.0 may be due to the fact, that
it reads /usr/share/terminfo/x/xterm
(in strace output: open("/usr/share/terminfo/x/xterm", O_RDONLY) = 4),
while the R-1.5.0 does not read it
(no occurrence of "xterm" in strace output).

I think, it should be something simple, but I do not know how
to force R to read the terminfo file. I appreciate any help from you.

Kind regards

  Petr Savicky

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 19:20:55 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 20:20:55 +0200 (MET DST)
Subject: command line editing does not work (2) (PR#1657)
Message-ID: <200206111820.UAA05875@pubhealth.ku.dk>

I include more information to my message sent
at Tue, 11 Jun 2002 19:51:24 +0200 with the same
subject.

The config.log contains the following lines:

configure:10947: gcc -o conftest -g -O2 -I/usr/local/include -L/usr/local/lib conftest.c -lreadline  -ldl -lncurses -lm  >
/usr/i486-suse-linux/bin/ld: cannot find -lreadline
collect2: ld returned 1 exit status
configure:10950: $? = 1
configure: failed program was:
#line 10921 "configure"
#include "confdefs.h"

/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
   builtin and then its argument prototype would still apply.  */
char rl_callback_read_char ();
#ifdef F77_DUMMY_MAIN
#  ifdef __cplusplus

...

I have the readline package properly installed:
> rpm -q readline
readline-2.05-21

Thank you for any help to recognize and correct the problem.

Best wishes

  Petr

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhouston@bio.ri.ccf.org  Tue Jun 11 21:14:08 2002
From: dhouston@bio.ri.ccf.org (dhouston@bio.ri.ccf.org)
Date: Tue, 11 Jun 2002 22:14:08 +0200 (MET DST)
Subject: make install fails - index.html not found (PR#1658)
Message-ID: <200206112014.WAA06199@pubhealth.ku.dk>

Full_Name: Dale Houston
Version: 1.5.0
OS: Solaris 8
Submission from: (NULL) (192.35.79.70)


I am trying to get RT-1.5.0 installed on Solaris 8.

The programs compile fine and 'make check' seems to work.

But when I do a 'make install' I see this:

/home/dhouston/R-1.5.0 grieg> make install
installing afm ...
installing doc ...
installing doc/html ...
install:  index.html does not exist
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc/html
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc
*** Error code 1
make: Fatal error: Command failed for target `install'

I do not see index.html in doc/html. I made a fake one for testing purposes, but
when I do a make install it now fails trying to find SearchEngine.html.

I did a 'make html' but to no avail.

dale


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 11 21:19:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jun 2002 22:19:58 +0200
Subject: command line editing does not work (2) (PR#1657)
In-Reply-To: <200206111820.UAA05875@pubhealth.ku.dk>
References: <200206111820.UAA05875@pubhealth.ku.dk>
Message-ID: <x2bsahmutt.fsf@blueberry.kubism.ku.dk>

Petr.Savicky@cuni.cz writes:

> I have the readline package properly installed:
> > rpm -q readline
> readline-2.05-21
> 
> Thank you for any help to recognize and correct the problem.

The usual suspect is the readline-devel package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 21:40:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 21:40:26 +0100 (BST)
Subject: make install fails - index.html not found (PR#1658)
In-Reply-To: <200206112014.WAA06199@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206112136170.23760-100000@gannet.stats>

On Tue, 11 Jun 2002 dhouston@bio.ri.ccf.org wrote:

> Full_Name: Dale Houston
> Version: 1.5.0
> OS: Solaris 8
> Submission from: (NULL) (192.35.79.70)
>
>
> I am trying to get RT-1.5.0 installed on Solaris 8.
>
> The programs compile fine and 'make check' seems to work.
>
> But when I do a 'make install' I see this:
>
> /home/dhouston/R-1.5.0 grieg> make install
> installing afm ...
> installing doc ...
> installing doc/html ...
> install:  index.html does not exist
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc/html
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc
> *** Error code 1
> make: Fatal error: Command failed for target `install'
>
> I do not see index.html in doc/html. I made a fake one for testing purposes, but
> when I do a make install it now fails trying to find SearchEngine.html.

Those should have been generated during the build, by the Makefile's in
doc/html and doc/html/search.

Do you perchance not have Perl installed?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Jun 11 23:04:45 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 00:04:45 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206112204.AAA06587@pubhealth.ku.dk>

Hi


> ----------------------- transcript --------------------------
> $ R --vanilla
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.5.0  (2002-04-29)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > axis(1,xaxp=c(0,1,4))
> > version
>          _
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> ------------------------end transcript ---------------------
> 
> I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
> problem seems to exist for axis() with a yaxp argument.
> 
> The sequence:
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > par(xaxp=c(0,1,4))
> > axis(1)
> 
> does draw an axis with four intervals, though.
> 
> On R-Help, in response to my question about this, Paul Murrell
> <p.murrell@auckland.ac.nz> wrote:
> 
> > This appears to be a bug.  axis() should respond to an "in-line" xaxp
> > setting.
> >
> > I can see a place in the C code where the problem appears to be, but an
> > attempted quick fix failed.


For the record, the place in the C code is in plot.c in do_axis where
there appear to be two problems:  (i)  the code sets a local variable
from the dpptr(dd)->xaxp rather than the gpptr(dd)->xaxp, and (ii) the
code sets this local variable BEFORE calling ProcessInlinePars().  So
there are two obstacles to fix before do_axis will respond to an in-line
xaxp setting.  NOTE also that several other local variables are set from
dpptr(dd)-><something> in the same place, so these should be fixed as
well.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Jun 12 02:30:32 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 03:30:32 +0200 (MET DST)
Subject: mtext() alignment of perpendicular text (PR#1659)
Message-ID: <200206120130.DAA06874@pubhealth.ku.dk>


mtext() does a poor job of placing text when it is perpendicular (e.g.,
side=1, las=3) and the font size is not the default.

The following code snippet demonstrates the problem ...

plot(1:10)
abline(v=1:10, col="grey")
axis(3, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=1, las=3)
axis(3, line=-2, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-1, las=3, cex=.5)
axis(3, line=-5, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-4, las=3, cex=2)

The ugliness varies a bit across devices.

In GMtext() in graphics.c there is a hardcoded adjustment of 0.3 which
is described as "purely visual tuning".  I think this needs to be
replaced with a more general solution.

Paul


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 6.0
 year = 2002
 month = 06
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 23:59:37 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Wed, 12 Jun 2002 00:59:37 +0200 (CEST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>


By the way, this is the error message I get:

java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
at java.security.AccessController.checkPermission(AccessController.java:401)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
at java.io.File.isDirectory(File.java:698)
at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
at java.security.AccessController.doPrivileged(Native Method)
at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
at sun.applet.AppletPanel.run(AppletPanel.java:290)
at java.lang.Thread.run(Thread.java:536)

-- 
Michele Alzetta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Jun 12 11:38:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 12 Jun 2002 12:38:06 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
Message-ID: <15623.9358.372881.840891@mithrandir.hornik.net>

>>>>> mikalzet  writes:

> By the way, this is the error message I get:

I get the same, mutatis mutandis.

-k

> java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
> at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
> at java.security.AccessController.checkPermission(AccessController.java:401)
> at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
> at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
> at java.io.File.isDirectory(File.java:698)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
> at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
> at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
> at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
> at java.security.AccessController.doPrivileged(Native Method)
> at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
> at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
> at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
> at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
> at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
> at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
> at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
> at sun.applet.AppletPanel.run(AppletPanel.java:290)
> at java.lang.Thread.run(Thread.java:536)

> -- 
> Michele Alzetta



> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Jun 12 14:26:07 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 12 Jun 2002 09:26:07 -0400
Subject: help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>

(Sorry for the cross-post--- I wasn't sure which list is more
appropriate...)

Hi everyone,

I've run into segfaults when using my randomForest package on large dataset
(e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
mtry=3000).  I'm wondering if anyone can give me some hints on where to look
for the problem.

The randomForest package mainly consists of two things: rf.c contains rf(),
a C wrapper function that calls the Fortran subroutines in rfsub.f that do
most of the work (slightly altered from Breiman's original code).  All
memory allocations are done in rf.c, using S_alloc().  When I run random
forest with the data and setting as mentioned above, it was able to finish
growing the 7000 trees, but segfault when returning from rf() to R.  GDB
gave the following (gdb prompts removed):

do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
    at dotcode.c:1413
1413            break;
1845        PROTECT(ans = allocVector(VECSXP, nargs));
1846        havenames = 0;
1847        if (dup) {
1849            info.cargs = cargs;
1850            info.allArgs = args;
1851            info.nargs = nargs;
1852            info.functionName = buf;
1853            nargs = 0;
1854            for (pargs = args ; pargs != R_NilValue ; pargs =
CDR(pargs)) {
1855                if(argConverters[nargs]) {
1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
which));

Program received signal SIGSEGV, Segmentation fault.
0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
1133                    SEXP next = NEXT_NODE(s);

This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.

Any help/hints/comments are greatly appreciated!

Regards,
Andy

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 12 15:01:56 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Jun 2002 15:01:56 +0100 (BST)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <Pine.GSO.4.44.0206121453430.12434-100000@auk.stats>

(Confined to R-devel).

This almost always means that R's memory system (or malloc's) has been
corrupted by array overruns.

Sometimes gctorture(TRUE) helps.  However in your case it's more likely
those S_alloc calls, so try (temporarily) replacing them by calls to Calloc
and then use something like Purify or `Electric Fence'. to test for
overruns.

On Wed, 12 Jun 2002, Liaw, Andy wrote:

> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)

Only a few people read R-devel and not R-help.

> Hi everyone,
>
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
>
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):

This is just saying it can't allocate the copies for the returned
values of the .C arguments.  I think you might want to consider .Call
given that you are probably using quite large structures.

> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
>
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
>
> Any help/hints/comments are greatly appreciated!
>
> Regards,
> Andy
>
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
>
>
>
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
>
> ==============================================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Jun 12 15:07:57 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 12 Jun 2002 09:07:57 -0500
Subject: help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>; from andy_liaw@merck.com on Wed, Jun 12, 2002 at 09:26:07AM -0400
References: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <20020612090756.C12694@nokomis.stat.umn.edu>

These symptoms suggest that your code may be writing outside of the
data it allocates, which would trash internal data structures of the R
heap and result in a segfault at a GC.  I would try to find a malloc
debugging library, use malloc in place of S_alloc, and see if the
malloc debugging tools show any malloc heap corruption. The standard
malloc in Mac OS X has very good debugging support if you have access
to that.

luke

On Wed, Jun 12, 2002 at 09:26:07AM -0400, Liaw, Andy wrote:
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 18:54:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 19:54:10 +0200 (MET DST)
Subject: Fwd: Re: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206121754.TAA14269@pubhealth.ku.dk>




>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>To: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
>Subject: Re: Tcl8.0.4 missing function?! (PR#1640)
>Date: 12 Jun 2002 19:37:21 +0200
> >
> > From help(quantile):
> >
> > ...
> >
> >     `quantile(x,p)' as a function of `p' linearly interpolates the
> >      points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
> >      statistics'') and `n <- length(x)'.
> >
> >      This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
> >      <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
> >      ox[n]'.
> >
> > I think that what is meant is 'ox <- x[order(x)]'?! When I do that,
> > the values from the above formulae correspond to what quantile() gives
> > me...!



RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 22:01:59 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 23:01:59 +0200 (MET DST)
Subject: documentation error for quantile (PR#1660)
Message-ID: <200206122101.XAA14806@pubhealth.ku.dk>

>From the documentation to the quantile function:

...

    `quantile(x,p)' as a function of `p' linearly interpolates the
     points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
     statistics'') and `n <- length(x)'.

    This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
     <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
     ox[n]'.

I think that should be ox <- x[ order(x) ] ! At least, then the formulae 
give the same result as quantile itself!


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 07:22:43 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 08:22:43 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130622.IAA16038@pubhealth.ku.dk>

This is a bad bug as reported by Robin Hankin,
it is still in "R-patched" ...

##- From: Robin Hankin <r.hankin@auckland.ac.nz>
##- To: r-help@stat.math.ethz.ch
##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
##- Date: Thu, 13 Jun 2002 16:46:26 +1200

## .....

## Example slighlty modified (MM)

d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
               1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
               0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
               0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
               0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
               1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
               2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
               0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
               0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
               0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
             nr=50)

fisher.test(d4)
##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
##- Stack length exceeded in f3xact.
##- This problem should not occur.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jun 13 07:59:04 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 13 Jun 2002 08:59:04 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130659.IAA16339@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
> 
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
> 
> ## .....
> 
> ## Example slighlty modified (MM)
> 
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
> 
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.

Just for the record:
  repeat try(fisher.test(d4))
results in a crash after a few iterations (R-1.5.0 patched on WinNT
4.0).

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 11:17:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 12:17:08 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131017.MAA19861@pubhealth.ku.dk>

(CC'ed to R-bugs  ``for the record'')

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Jun 2002, Martin Maechler wrote:
    >> >>>>> "MM" == Martin Maechler
    >> <maechler@stat.math.ethz.ch> writes:
    >> 
    >> >>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
    >> writes:
    BDR> Martin, What makes this a `bad bug'?  Are you getting a
    BDR> seg fault?
    >>
    MM> yes, always in the half a dozen restarts I tried.
    >>  (in the mean time I had one case where it did not ..)
    >> 
    BDR> Like Uwe this works for me the first few times and I do
    BDR> then get a backtrace (in memory.c, so this is almost
    BDR> certainly an earlier overrun).
    >>
    MM> I see.  This has been different for me.
    >>
    BDR> I think we've had problems before with FEXACT
    BDR> incorrectly specifying the required sizes of its
    BDR> workspaces.
    >>  (I'm not so sure this is the problem here.)
    >> 
    >> I found that
    >> 
    >> fisher.test(d4[1:30,])
    >> 
    >> gives a direct segmentation fault (without any error
    >> message) for me.
    >> 

    BDR> I've had to compile up gdb 5.2 to get the correct
    BDR> information out of R on Linux compiled under gcc-3.1.
    BDR> That shows (on the original problem)

    BDR> Loaded symbols for
    BDR> /users/ripley/R/R-patched/library/ctest/libs/ctest.so
    BDR> #0 f3xact (nrow=0x40051074, irow=0x4005113c,
    BDR> ncol=0x40051000, icol=0x40051120, dlp=0x4041b110,
    BDR> mm=0x40050fc0, fact=0x4035f020, ico=0x4035f4dc,
    BDR> iro=0x4035f5a4, it=0x4035f66c, lb=0x4035f734,
    BDR> nr=0x4035f7fc, nt=0x4035f8c4, nu=0x4035f98c,
    BDR> itc=0x4035fa54, ist=0x40360094, stv=0x40364f18,
    BDR> alen=0x40365ba0, tol=0x4004f878) at
    BDR> /users/ripley/R/cvs/R-patched/src/library/ctest/src/fexact.c:1125
    BDR> 1125 ist[itp] = -1; (gdb) print itp $1 = -3544

    BDR> The same with your variant (except the value of itp).

Okay, I found a much smaller table  --- and a different place
for the seg.fault :
> fisher.test(cbind(0,c(0,0,1)))

Program received signal SIGSEGV, Segmentation fault.
f2xact (nrow=0x8a12ec0, ncol=0x8a12ee0, table=0x8b7bb38, ldtabl=0x8a12f00, 
    expect=0x89dad68, percnt=0x89dad90, emin=0x89dadb8, prt=0x89dade0, 
    pre=0x89dae08, fact=0x403b3020, ico=0x403b302c, iro=0x403b3038, 
    kyy=0x403b3044, idif=0x403b3050, irn=0x403b3058, key=0x403b49d4, 
    ldkey=0xbfffc398, ipoin=0x403b5d44, stp=0x403b70b0, ldstp=0xbfffc39c, 
    ifrq=0x403ffef4, dlp=0x4046d450, dsp=0x4046fb30, tm=0x40472210, 
    key2=0x404748f4, iwk=0x403b3060, rwk=0x403b3d30)
    at ../../../../../R/src/library/ctest/src/fexact.c:524
524		obs += fact[ico[j]] - dd;

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 12:16:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 13:16:34 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206131116.NAA20860@pubhealth.ku.dk>

This occurred because integer overflow was giving negative keys.

Append the following line at line 1083 of fexact.c

      if (ipn < 1) ipn += ldst; /* because key might be negative */


> fisher.test(d4)

      Fisher's Exact Test for Count Data

data:  d4
p-value = < 2.2e-16
alternative hypothesis: two.sided



On Thu, 13 Jun 2002 maechler@stat.math.ethz.ch wrote:

> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
>
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
>
> ## .....
>
> ## Example slighlty modified (MM)
>
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
>
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 13:38:32 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 08:38:32 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>

Hi all,

Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
anyone?).  The problem seemed to have gone away.

Everyone suggested using some malloc debugger (such as Electric Fence).  All
I did was following half of what BDR suggested below, i.e., changing all the
S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
problem seems to have disappeared!

As I read it from the R-exts manual, the difference between S_alloc and
Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
memory addtional to the heap.  So can anyone explain what's going on?  It's
still kind of mysterious to me...

Again, thanks very, very much for the help!

(Some day I might try to use .Call rather than .C, but I think I need to get
a bit more familiarity with .Call on simpler things before I try it with
randomForest.)

Regards,
Andy

> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 12, 2002 10:02 AM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: Re: [R] help debugging segfaults
> 
> 
> (Confined to R-devel).
> 
> This almost always means that R's memory system (or malloc's) has been
> corrupted by array overruns.
> 
> Sometimes gctorture(TRUE) helps.  However in your case it's 
> more likely
> those S_alloc calls, so try (temporarily) replacing them by 
> calls to Calloc
> and then use something like Purify or `Electric Fence'. to test for
> overruns.
> 
> On Wed, 12 Jun 2002, Liaw, Andy wrote:
> 
> > (Sorry for the cross-post--- I wasn't sure which list is more
> > appropriate...)
> 
> Only a few people read R-devel and not R-help.
> 
> > Hi everyone,
> >
> > I've run into segfaults when using my randomForest package 
> on large dataset
> > (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> > mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> > for the problem.
> >
> > The randomForest package mainly consists of two things: 
> rf.c contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> > most of the work (slightly altered from Breiman's original 
> code).  All
> > memory allocations are done in rf.c, using S_alloc().  When 
> I run random
> > forest with the data and setting as mentioned above, it was 
> able to finish
> > growing the 7000 trees, but segfault when returning from 
> rf() to R.  GDB
> > gave the following (gdb prompts removed):
> 
> This is just saying it can't allocate the copies for the returned
> values of the .C arguments.  I think you might want to consider .Call
> given that you are probably using quite large structures.
> 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = 
> CPtrToRObj(cargs[nargs], CAR(pargs),
> > which));
> >
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);
> >
> > This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> > on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled 
> from source.
> >
> > Any help/hints/comments are greatly appreciated!
> >
> > Regards,
> > Andy
> >
> > Andy I. Liaw, PhD
> > Biometrics Research          Phone: (732) 594-0820
> > Merck & Co., Inc.              Fax: (732) 594-1565
> > P.O. Box 2000, RY70-38            Rahway, NJ 07065
> > mailto:andy_liaw@merck.com
> >
> >
> >
> > 
> --------------------------------------------------------------
> ----------------
> > Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> >
> > 
> ==============================================================
> ================
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 13 14:28:36 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 13 Jun 2002 09:28:36 -0400
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <kb7hguot6ics8pl88gjeschevf8ceckvn8@4ax.com>

On Thu, 13 Jun 2002 08:38:32 -0400, you wrote in message
<51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>:

>Hi all,
>
>Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
>anyone?).  The problem seemed to have gone away.
>
>Everyone suggested using some malloc debugger (such as Electric Fence).  All
>I did was following half of what BDR suggested below, i.e., changing all the
>S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
>problem seems to have disappeared!

In my experience, that's not such good news.  The bug is probably
still there, it just doesn't have obvious symptoms in the tests you're
using.  I'd still recommend using the malloc debugger to try to track
it down.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 16:57:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 17:57:21 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131557.RAA24474@pubhealth.ku.dk>

On Thu, 13 Jun 2002, Martin Maechler wrote:

> Okay, I found a much smaller table  --- and a different place
> for the seg.fault :
> > fisher.test(cbind(0,c(0,0,1)))


That one is easy:  You (MM) have calculated fact[2], but fact is only of
length 2 (for values 0 and 1), so ico gets overwritten.

I now suspect that my fix for the original bug is merely a fix for a
symptom, so am going to replace it by an error message.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Jun 13 17:05:13 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 13 Jun 2002 09:05:13 -0700 (PDT)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <Pine.A41.4.44.0206130857300.115682-100000@homer10.u.washington.edu>

On Thu, 13 Jun 2002, Liaw, Andy wrote:
>
> Everyone suggested using some malloc debugger (such as Electric Fence).  All
> I did was following half of what BDR suggested below, i.e., changing all the
> S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
> problem seems to have disappeared!

No, the *symptoms* have disappeared. This is not necessarily an
improvement.

> As I read it from the R-exts manual, the difference between S_alloc and
> Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
> memory addtional to the heap.  So can anyone explain what's going on?  It's
> still kind of mysterious to me...

It looked as if your code was writing to/reading from memory that didn't
belong to it. What happens then depends on who the memory does belong to,
and what they are doing with it. There's no guarantee that just because it
doesn't crash today that it won't in the future, or worse, start giving
subtly wrong answers.

A segmentation fault is a good thing in this context -- it's a sign that
the operating system has protected you from the consequences of your
actions by killing the program.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 17:48:09 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 12:48:09 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC365@usrymx10.merck.com>

OK, so I linked my code against libefence and then run my test code under
gdb.  It still finishes without reporting any problem.  (This is with
Calloc() and Free(), instead of S_alloc().)  Can anyone tell me what to do
or look for next?  I'll be eternally grateful!

Regards,
Andy

> -----Original Message-----
> From: Thomas Lumley [mailto:tlumley@u.washington.edu]
> Sent: Thursday, June 13, 2002 12:05 PM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: RE: [R] help debugging segfaults
> 
> 
> On Thu, 13 Jun 2002, Liaw, Andy wrote:
> >
> > Everyone suggested using some malloc debugger (such as 
> Electric Fence).  All
> > I did was following half of what BDR suggested below, i.e., 
> changing all the
> > S_alloc() calls to Calloc() and Free().  I didn't get to 
> try efence, and the
> > problem seems to have disappeared!
> 
> No, the *symptoms* have disappeared. This is not necessarily an
> improvement.
> 
> > As I read it from the R-exts manual, the difference between 
> S_alloc and
> > Calloc is that S_alloc takes memory from the heap, whereas 
> Calloc takes
> > memory addtional to the heap.  So can anyone explain what's 
> going on?  It's
> > still kind of mysterious to me...
> 
> It looked as if your code was writing to/reading from memory 
> that didn't
> belong to it. What happens then depends on who the memory 
> does belong to,
> and what they are doing with it. There's no guarantee that 
> just because it
> doesn't crash today that it won't in the future, or worse, 
> start giving
> subtly wrong answers.
> 
> A segmentation fault is a good thing in this context -- it's 
> a sign that
> the operating system has protected you from the consequences of your
> actions by killing the program.
> 
> 	-thomas
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Jun 13 20:36:42 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 13 Jun 2002 21:36:42 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206131936.VAA25196@pubhealth.ku.dk>


There appears to be a mild bug, or at least a deficiency, in
rnorm.  The bug becomes apparent when one looks at extremes
of the squares of the values generated by rnorm; rnorm is not
generating quite enough extreme values.

The R version that I am using is 1.4.1; I never got around to installing
1.5.0, and now since 1.5.1 is about to come out ....  However, checking
the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

Version details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R

More detail regarding how the bug revealed itself:
==================================================

	For n = 100, 200, ..., 1500

	o I generated 1000 sequences of length n via rnorm(n),

	o for each sequence x, I calculated m = the max of x^2

	o I then calculated pval = 1 - pchisq(m,1)^n

	o I then calculated s.hat.n = #{pval: pval < 0.05}/1000

I then plotted s.hat.n versus n.  This ***should*** give a result
close to a horizontal straight line, at height 0.05 --- but it
didn't.  For the larger values of n, the values of s.hat.n were
displaced significantly below 0.05.

After some discussion with colleagues, I replaced the calls to rnorm()
by calls to myrnorm() defined by

	myrnorm <- function(n,mu=0,sigma=1){
		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
	}

which uses the ``(r,theta)'' method of generating random normals.

When I did so, the resulting values were indeed all ``close to'' 0.05,
as they should be.

I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
then of course taking m = max of x --- rather than max of x^2).  Again
all the resulting values were close to 0.05 as ought to be the case.
(So rchisq() appears to be OK in this regard.)

Enclosed below is a script to demonstrate the bug.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
#
# Script to demonstrate the bug in rnorm.
#
myrnorm <- function(n,mu=0,sigma=1){
	mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
}

# If RFUN <- rnorm we get ``wrong'' answers; if RFUN <- myrnorm,
# we get ``right'' answers.
RFUN <- rnorm

NSER <- 1000
set.seed(350734)
rslt <- list()

for(K in 1:15) {
	N   <- 100*K
	M   <- matrix(RFUN(NSER*N),N,NSER)
	T2  <- apply(M,2,function(x){max(x**2)})
	PV  <- 1 - pchisq(T2,1)**N
	SZ  <- sum(PV < 0.05)/NSER
	rslt[[K]] <- SZ
	cat(K,"\n")
}

rslt <- unlist(rslt)
plot(100*(1:15),rslt,ylim=c(0,0.1),xlab='n',ylab='s.hat.n')
abline(h=0.05)
error.bar(100*(1:15),rslt,lower=1.96*sqrt(0.05*0.95/1000),add=TRUE)

# Clean up:
rm(RFUN,NSER,K,N,M,T2,PV,SZ)
#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 22:59:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jun 2002 23:59:43 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206131936.VAA25196@pubhealth.ku.dk>
References: <200206131936.VAA25196@pubhealth.ku.dk>
Message-ID: <x2lm9ion5c.fsf@blueberry.kubism.ku.dk>

rolf@math.unb.ca writes:

> There appears to be a mild bug, or at least a deficiency, in
> rnorm.  The bug becomes apparent when one looks at extremes
> of the squares of the values generated by rnorm; rnorm is not
> generating quite enough extreme values.
> 
> The R version that I am using is 1.4.1; I never got around to installing
> 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

...and I see the effect too with an r-patched from a few days back.


[snip]
> After some discussion with colleagues, I replaced the calls to rnorm()
> by calls to myrnorm() defined by
> 
> 	myrnorm <- function(n,mu=0,sigma=1){
> 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> 	}
> 
> which uses the ``(r,theta)'' method of generating random normals.
> 
> When I did so, the resulting values were indeed all ``close to'' 0.05,
> as they should be.
> 
> I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> then of course taking m = max of x --- rather than max of x^2).  Again
> all the resulting values were close to 0.05 as ought to be the case.
> (So rchisq() appears to be OK in this regard.)

Also qnorm(runif(n)) seems to be closer to the target.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 23:39:58 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 14 Jun 2002 00:39:58 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206132239.AAA25804@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> rolf@math.unb.ca writes:
> 
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> > 
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
> 
> ...and I see the effect too with an r-patched from a few days back.

No I do not! My quick check code took the square of the max rather
than the max of the square...

With your script, I get a nice horizontal line both with 1.4.0 and
1.5.0-patched.

(RedHat Linux 7.1 on a PC) 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 14 02:03:16 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 13 Jun 2002 21:03:16 -0400
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206132239.AAA25804@pubhealth.ku.dk>
References: <200206132239.AAA25804@pubhealth.ku.dk>
Message-ID: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>

On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
wrote:

>With your script, I get a nice horizontal line both with 1.4.0 and
>1.5.0-patched.
>
>(RedHat Linux 7.1 on a PC) 

I get what Rolf described in 1.5.0-patched for Windows with the
default generators: 

RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"  

I switched to the Ahrens-Dieter normal RNG (using
RNGkind(,'Ahrens-Dieter')), and things were fine.  

Keeping the default normal generator but switching to the
Mersenne-Twister uniform also fixed it:

> RNGkind()
[1] "Mersenne-Twister" "Kinderman-Ramage"

Is it possible you're not using the default generators?  If you are,
this is quite weird, because we're on the same hardware.  Why would
the OS or compiler matter in a calculation like this??

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 08:24:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 09:24:14 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206140724.JAA27319@pubhealth.ku.dk>

R supplies a choice of random-number generators as well as a choice of
generating normals.  All methods are compromises, and I suspect one of the
non-default ones may be better for your purposes.  Please investigate the
choices.


On 13 Jun 2002, Peter Dalgaard BSA wrote:

> rolf@math.unb.ca writes:
>
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> >
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
>
> ...and I see the effect too with an r-patched from a few days back.
>
>
> [snip]
> > After some discussion with colleagues, I replaced the calls to rnorm()
> > by calls to myrnorm() defined by
> >
> > 	myrnorm <- function(n,mu=0,sigma=1){
> > 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> > 	}
> >
> > which uses the ``(r,theta)'' method of generating random normals.
> >
> > When I did so, the resulting values were indeed all ``close to'' 0.05,
> > as they should be.
> >
> > I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> > then of course taking m = max of x --- rather than max of x^2).  Again
> > all the resulting values were close to 0.05 as ought to be the case.
> > (So rchisq() appears to be OK in this regard.)
>
> Also qnorm(runif(n)) seems to be closer to the target.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 08:42:45 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 09:42:45 +0200 (MET DST)
Subject: homedrive in Rconsole.Rd (PR#1668)
Message-ID: <200206140742.JAA27561@pubhealth.ku.dk>

As earlier posted this day on R-help (thread: "[R] Problem about
Rconsole: R for Windows Version 1.5.0 Patched (2002-06-05 and
2002-06-12)", there seems to be a documentation bug for ?Rconsole. 

>From ?Rconsole, section Details:

   If the environment variable `R_USER' is not set, the R system sets
   it to `HOME' if that is set (stripping any trailing slash),
   otherwise to `HOMEDIR:HOMEPATH' if `HOMEDIR' is set otherwise to
   the working directory.

HOMEDIR should be replaced by HOMEDRIVE in this section:


 diff  ...../src/library/base/man/windows/Rconsole.Rd  Rconsole-new.Rd

32c32
<   slash), otherwise to \code{HOMEDIR:HOMEPATH} if \code{HOMEDIR} is
set
---
>   slash), otherwise to \code{HOMEDRIVE:HOMEPATH} if \code{HOMEDRIVE} is set


[R-1.5.0 patched (2002-06-12), Windows NT 4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 14 09:14:29 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2002 10:14:29 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
References: <200206132239.AAA25804@pubhealth.ku.dk>
 <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
Message-ID: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> wrote:
> 
> >With your script, I get a nice horizontal line both with 1.4.0 and
> >1.5.0-patched.
> >
> >(RedHat Linux 7.1 on a PC) 
> 
> I get what Rolf described in 1.5.0-patched for Windows with the
> default generators: 
> 
> RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"  
> 
> I switched to the Ahrens-Dieter normal RNG (using
> RNGkind(,'Ahrens-Dieter')), and things were fine.  
> 
> Keeping the default normal generator but switching to the
> Mersenne-Twister uniform also fixed it:
> 
> > RNGkind()
> [1] "Mersenne-Twister" "Kinderman-Ramage"
> 
> Is it possible you're not using the default generators?  If you are,
> this is quite weird, because we're on the same hardware.  Why would
> the OS or compiler matter in a calculation like this??
> 
> Duncan Murdoch
> 

Now this is pretty darn odd....

This is what happened to me yesterday with 1.4.0:

[Previously saved workspace restored]

> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 39
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 37
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 63
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 50
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51

This morning, I get

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"    
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 27
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 23
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29

with the SAME version of R. The only difference is the startup
directory, and hence the saved workspace. This contains:

> ls(all=T)
[1] ".Random.seed" "x"            "y"           
> .Random.seed
[1]     0 25300 11635 10783

..whereas 1.5.0 which now again shows trouble has

>  .Random.seed
[1]         1 196857153 319227924

and 1.4.0 in a clean dir has this after a few iterations of the above

>  .Random.seed
[1]          1 1297109091   47580530


Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
no matter what RNGkind() is telling me??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 10:03:45 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 10:03:45 +0100 (BST)
Subject: What RNGkind does (was Re: Bug in rnorm. (PR#1664))
In-Reply-To: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0206140949330.6521-100000@gannet.stats>

Just so we understand:

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> .Random.seed <- c(0, 1, 2, 3)
> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> runif(1)
[1] 0.03381877
> RNGkind()
[1] "Wichmann-Hill"    "Kinderman-Ramage"

?RNGkind says

`RNGkind' returns a two-element character vector of the RNG and
normal kinds in use before the call,
                    ^^^^^^
However, any use of the random number generators themselves loads
.Random.seed (if it exist), and that will set the types of random
numbers in use.  So if a user changes .Random.seed (for example by
loading a saved workspace) the types will change.  RNGkind() reports
retrospectively (as it is documented to), not prospectively.

Now we could alter RNGkind() to read in the current .Random.seed (if there
is one) although it is a bit tricky to decide what to do if the value is
invalid.  (The random-number generation code throws an error and
expects thse user to fix, e.g  remove, .Random.seed.)


On 14 Jun 2002, Peter Dalgaard BSA wrote:

> Duncan Murdoch <dmurdoch@pair.com> writes:
>
> > On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> > wrote:
> >
> > >With your script, I get a nice horizontal line both with 1.4.0 and
> > >1.5.0-patched.
> > >
> > >(RedHat Linux 7.1 on a PC)
> >
> > I get what Rolf described in 1.5.0-patched for Windows with the
> > default generators:
> >
> > RNGkind()
> > [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> >
> > I switched to the Ahrens-Dieter normal RNG (using
> > RNGkind(,'Ahrens-Dieter')), and things were fine.
> >
> > Keeping the default normal generator but switching to the
> > Mersenne-Twister uniform also fixed it:
> >
> > > RNGkind()
> > [1] "Mersenne-Twister" "Kinderman-Ramage"
> >
> > Is it possible you're not using the default generators?  If you are,
> > this is quite weird, because we're on the same hardware.  Why would
> > the OS or compiler matter in a calculation like this??
> >
> > Duncan Murdoch
> >
>
> Now this is pretty darn odd....
>
> This is what happened to me yesterday with 1.4.0:
>
> [Previously saved workspace restored]
>
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 39
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 37
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 63
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 50
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
>
> This morning, I get
>
> > RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 27
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 23
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
>
> with the SAME version of R. The only difference is the startup
> directory, and hence the saved workspace. This contains:
>
> > ls(all=T)
> [1] ".Random.seed" "x"            "y"
> > .Random.seed
> [1]     0 25300 11635 10783
>
> ..whereas 1.5.0 which now again shows trouble has
>
> >  .Random.seed
> [1]         1 196857153 319227924
>
> and 1.4.0 in a clean dir has this after a few iterations of the above
>
> >  .Random.seed
> [1]          1 1297109091   47580530
>
>
> Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
> no matter what RNGkind() is telling me??



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 17:50:01 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 18:50:01 +0200 (MET DST)
Subject: minor quirk in rnbinom (PR#1669)
Message-ID: <200206141650.SAA04208@pubhealth.ku.dk>

Just for the records (was on R-help).

Uwe Ligges

-------- Original Message --------
Subject: Re: [R] minor quirk in rnbinom
Date: Fri, 14 Jun 2002 18:47:59 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
To: Mike Lonergan <mel@mcs.st-and.ac.uk>
CC: r-help <r-help@stat.math.ethz.ch>
References: <NEBBJLLBCLEDFLCCBKDAEEEKCGAA.mel@mcs.st-andrews.ac.uk>

Mike Lonergan wrote:
> 
> I don't want to spoil a nice joke, and recognise it's not a bug as it does
> have the intended effect, but the error message that is returned if rnbinom
> is given four parameters is slightly obscure:
> 
> > rnbinom(0.5,0.5,0.5,0.5)
> Error in rnbinom(0.5, 0.5, 0.5, 0.5) : couldn't find function "error"


That's a bug, of course 

  error("prob and mu both specified")

should be

  stop("prob and mu both specified")

in that function.

[R-1.5.0 patched 2002-06-12, WinNT4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Jun 14 19:04:43 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 14 Jun 2002 14:04:43 -0400
Subject: pretty() sometimes isn't
Message-ID: <15626.12347.920840.33141@gargle.gargle.HOWL>

Hi all,

R> seq(-.4, .8, length=7)
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

Well that may not be a "bug", but it has this unfortunate consequence:

R> pretty(c(-.4,.8))
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

And thus my plot axes look funny unless I apply zapsmall:
R> plot(c(-.4,.8), c(-.4,.8), axes=F)
R> axis(1, at=pretty(c(-.4,.8)))               # Yuck!
R> axis(2, at=zapsmall(pretty(c(-.4,.8))))     # Better!

So here's my simple suggestion: change the last line of pretty() from:
   seq(z$l, z$u, length = z$n + 1)
to:
   zapsmall(seq(z$l, z$u, length = z$n + 1))

I'm running R-1.5.0 on platform sparc-sun-solaris2.6.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 14 20:00:27 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 14 Jun 2002 15:00:27 -0400
Subject: Methods package
Message-ID: <3D0A3D4B.E792914@research.bell-labs.com>

There is a new installation of the methods package on r-devel.  Two main
changes:

1.  generic functions are now an actual class (which extends
"function").

2.  method definitions are specific to the package associated with the
generic function, as well as with the name of the generic.

The second change will help methods fit in with name spaces and should
get over problems with conflicting generic function names.

You will have to re-install any of your own packages from source, if you
have been using the result of INSTALL --save (because the meta-object
names now include the package, for one reason).

The symptom that you need to do that is a warning about "methods object
... has no package name" when you attach your package.

Otherwise there should be no change needed for current applications.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:00:08 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:00:08 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151000.MAA06063@pubhealth.ku.dk>

Full_Name: Jeremy Fox
Version: 1.5.0
OS: Solaris 8, 64 bit
Submission from: (NULL) (171.64.232.63)



I am compiling R under Solaris and the compilation stops at this point. The
problem only happens when I link in readline. The R binary is actually compiled
and readlne works.
The main problem with the compiled  binary (other than that all the supporting
files were not
correctly installed) is that it prints out the error 

Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  

the first time I try to do something. It generally prints out only once, but may
be the
cause of the problem with the break in the make process I am worried about.

I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
Appendix
B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
definiteness, they are

CC="cc -xarch=v9"
CFLAGS="-xO5 -xlibmil -dalign"
F77="f95 -xarch=v9"
FFLAGS="-xO5 -xlibmil -dalign"
CXX=CC
CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"

Without readline, the make command exectutes fine.  Here is the actual bug

mkdir -p -- ../../../../library/methods/libs
make[5]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Entering directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
dumping R code in package 'methods'
Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  
Error in file == "" : comparison (1) is possible only for atomic types
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1


The file all.rda is not created. This may be because of this unimportant error
message
about ctest that somehow involves the readline package. I am using Readline
4.2a.

Thanks for any help, Jeremy


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 15 11:13:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 15 Jun 2002 12:13:51 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151013.MAA06104@pubhealth.ku.dk>

1) Was readline compiled under those same flags?  Was it compiled
under 64-bit mode at all?  (The manual does warn about that.)

2) You should be able to get ctest built by

(cd src/library/ctest; make)

but that should have happened anyway.

3) The actual error seems to be in interpreting the methods code.
That has nothing to do with readline (it is run in batch mode) so
there must be another difference.  It all points to problems with your
readline library.

Are you sure that there are not earlier error messages you have
overlooked/ignored?

On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:

> Full_Name: Jeremy Fox
> Version: 1.5.0
> OS: Solaris 8, 64 bit
> Submission from: (NULL) (171.64.232.63)
>
>
>
> I am compiling R under Solaris and the compilation stops at this point. The
> problem only happens when I link in readline. The R binary is actually compiled
> and readlne works.
> The main problem with the compiled  binary (other than that all the supporting
> files were not
> correctly installed) is that it prints out the error
>
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
>
> the first time I try to do something. It generally prints out only once, but may
> be the
> cause of the problem with the break in the make process I am worried about.
>
> I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> Appendix
> B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> definiteness, they are
>
> CC="cc -xarch=v9"
> CFLAGS="-xO5 -xlibmil -dalign"
> F77="f95 -xarch=v9"
> FFLAGS="-xO5 -xlibmil -dalign"
> CXX=CC
> CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
>
> Without readline, the make command exectutes fine.  Here is the actual bug
>
> mkdir -p -- ../../../../library/methods/libs
> make[5]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Entering directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> dumping R code in package 'methods'
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
> Error in file == "" : comparison (1) is possible only for atomic types
> Execution halted
> make[4]: *** [../../../library/methods/R/all.rda] Error 1
>
>
> The file all.rda is not created. This may be because of this unimportant error
> message
> about ctest that somehow involves the readline package. I am using Readline
> 4.2a.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:43:04 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:43:04 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151043.MAA06185@pubhealth.ku.dk>

Thanks for the quick reply.

On Sat, Jun 15, 2002 at 11:12:55AM +0100, ripley@stats.ox.ac.uk wrote:
> 1) Was readline compiled under those same flags?  Was it compiled
> under 64-bit mode at all?  (The manual does warn about that.)

Which manual? But anyway, I double checked and the version of readline
that I compiled uses the exact same flags. The configure script also
does not recognize readline when I do not link in the directory where
I compiled readline, so it is not a case of some other 32 bit readline
library being read in.

> 2) You should be able to get ctest built by
> 
> (cd src/library/ctest; make)
> 
> but that should have happened anyway.

It compiled fine but R does not stop its error message.

> 3) The actual error seems to be in interpreting the methods code.
> That has nothing to do with readline (it is run in batch mode) so
> there must be another difference.  It all points to problems with your
> readline library.

OK.

> Are you sure that there are not earlier error messages you have
> overlooked/ignored?

Here are the two warnings before the fatal errors. I checked the line
numbers and I would think these files are not causing the problems I
am experiencing. I am certain the X libraries and whatever is being
read in from /usr/local/include are not 64 bit, but X11() seems to
work fine anyway.

cc -xarch=v9 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H   -xO5 -xlibmil -dalign -c graphics.c -o graphics.o
"graphics.c", line 5358: warning: initializer does not fit or is out of range: -1

cc -xarch=v9 -I. -I../../../src/include -I../../../src/include -I/usr/pubsw/X11R6/include -I/usr/local/include -DHAVE_CONFIG_H  -KPIC  -xO5 -xlibmil -dalign -c devX11.c -o .libs/devX11.o
"devX11.c", line 1081: warning: statement not reached
"devX11.c", line 1095: warning: statement not reached
"devX11.c", line 1407: warning: statement not reached

Thanks, Jeremy

> On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:
> 
> > Full_Name: Jeremy Fox
> > Version: 1.5.0
> > OS: Solaris 8, 64 bit
> > Submission from: (NULL) (171.64.232.63)
> >
> >
> >
> > I am compiling R under Solaris and the compilation stops at this point. The
> > problem only happens when I link in readline. The R binary is actually compiled
> > and readlne works.
> > The main problem with the compiled  binary (other than that all the supporting
> > files were not
> > correctly installed) is that it prints out the error
> >
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> >
> > the first time I try to do something. It generally prints out only once, but may
> > be the
> > cause of the problem with the break in the make process I am worried about.
> >
> > I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> > Appendix
> > B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> > definiteness, they are
> >
> > CC="cc -xarch=v9"
> > CFLAGS="-xO5 -xlibmil -dalign"
> > F77="f95 -xarch=v9"
> > FFLAGS="-xO5 -xlibmil -dalign"
> > CXX=CC
> > CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
> >
> > Without readline, the make command exectutes fine.  Here is the actual bug
> >
> > mkdir -p -- ../../../../library/methods/libs
> > make[5]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Entering directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> > dumping R code in package 'methods'
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> > Error in file == "" : comparison (1) is possible only for atomic types
> > Execution halted
> > make[4]: *** [../../../library/methods/R/all.rda] Error 1
> >
> >
> > The file all.rda is not created. This may be because of this unimportant error
> > message
> > about ctest that somehow involves the readline package. I am using Readline
> > 4.2a.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
------------------------
Jeremy T. Fox
jerfox@stanford.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcmahill@mtl.mit.edu  Sun Jun 16 00:21:53 2002
From: mcmahill@mtl.mit.edu (mcmahill@mtl.mit.edu)
Date: Sun, 16 Jun 2002 01:21:53 +0200 (MET DST)
Subject: R configure.in makes bad alpha assumptions (PR#1676)
Message-ID: <200206152321.BAA07428@pubhealth.ku.dk>


Hi,

I was looking at configure.in for R-1.4.1 and in the
  case "${host_cpu}" in
part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
is an OSF specific, not alpha specific issue.  In particular, if someone
used f2c-f77 (shell script which emulates a fortran compiler with f2c and
the c compiler), they'd get the broken -fpe3.  I'd probably either test
for OSF before adding -fpe3


-dan




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Sun Jun 16 00:38:41 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Sun, 16 Jun 2002 01:38:41 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206152338.BAA07466@pubhealth.ku.dk>

Full_Name: Michael Peck
Version: 1.5.0 (12 Jun patch)
OS: win2k + sp2
Submission from: (NULL) (65.113.251.175)


Bookmarks from table of contents as well as links in text and index do not
work.

Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
4.0, so I downloaded the most recent version].

OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

This appears to be the same problem reported in message ID 1550 now listed in
documentation-fixed.

Michael Peck


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 16 01:34:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Jun 2002 02:34:23 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206160034.CAA07528@pubhealth.ku.dk>

This is not reproducible with a clean build from the sources of June 15
using the recommended tools.

If you still find a problem with the current R-patched, please supply
details of how exactly you built refman.pdf, including the version numbers
of pdftex, hyperref, latex, etc.

On Sun, 16 Jun 2002 mpeck1@ix.netcom.com wrote:

> Full_Name: Michael Peck
> Version: 1.5.0 (12 Jun patch)
> OS: win2k + sp2
> Submission from: (NULL) (65.113.251.175)
>
>
> Bookmarks from table of contents as well as links in text and index do not
> work.
>
> Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
> 4.0, so I downloaded the most recent version].
>
> OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

And verified by your own build on what system?  Your subject line implies
the problem is in R, not a particular binary, so we must assume that you
did build refman.pdf yourself.

> This appears to be the same problem reported in message ID 1550 now listed in
> documentation-fixed.

Please verify that by looking at the PDF file in a text editor and checking
that there is an invalid link for `(-class' (no matching right
parenthesis).  If there is, the file has not been generated by R-patched
recently.  If not, it is not the same bug.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xint@stat.rutgers.edu  Sun Jun 16 04:43:01 2002
From: xint@stat.rutgers.edu (xint@stat.rutgers.edu)
Date: Sun, 16 Jun 2002 05:43:01 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206160343.FAA07762@pubhealth.ku.dk>

Full_Name: Xin Tian
Version: 1.5.0 or 1.4.0
OS: windows 2000
Submission from: (NULL) (165.230.240.114)


I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
After installation, whenever I clicked R icon, it returned to me an
 error message:
"Rgui.exe has generated errors and will be closed by windows. You 
 will need to restart the program. 
An error log is being created."

So I could NOT start up R.

I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
But I tried to install R several times to my PC this time using windows2000 and
had the above problem.  I know R works fine in my friend's computer with windows
2000.
I have seen this problem in old R mailling list, but I don't know if
there are any solutions yet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 07:05:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 08:05:49 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206170605.IAA08603@pubhealth.ku.dk>

Those versions do run on Windows 2000, so the problem is with your
machine.  Can you send the error log?

Can we suggest reinstalling Windows?

On Sun, 16 Jun 2002 xint@stat.rutgers.edu wrote:

> Full_Name: Xin Tian
> Version: 1.5.0 or 1.4.0
> OS: windows 2000
> Submission from: (NULL) (165.230.240.114)
>
>
> I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
> After installation, whenever I clicked R icon, it returned to me an
>  error message:
> "Rgui.exe has generated errors and will be closed by windows. You
>  will need to restart the program.
> An error log is being created."
>
> So I could NOT start up R.
>
> I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
> But I tried to install R several times to my PC this time using windows2000 and
> had the above problem.  I know R works fine in my friend's computer with windows
> 2000.
> I have seen this problem in old R mailling list, but I don't know if
> there are any solutions yet.

In all cases, corrupted versions of Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Mon Jun 17 08:50:55 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Mon, 17 Jun 2002 09:50:55 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170750.JAA10383@pubhealth.ku.dk>

I sent this reply to Prof. Ripley earlier today, but failed to include his 
copy to recipients.

The issue, assuming it's not my own stupidity, is with the precompiled 
binary distribution for Windows dated 12 June that is now available on CRAN.

Looking again at his reply I see that he asked me a question that I'm 
actually equipped to answer:

> > This appears to be the same problem reported in message ID 1550 now 
> listed in
> > documentation-fixed.
>Please verify that by looking at the PDF file in a text editor and checking
>that there is an invalid link for `(-class' (no matching right

The only match I found for this string contained the text '(Rfn.(-class)' 
with white space on either side of the quoted string. There is no second 
parenthesis visible nearby.

At 17:32 6/15/2002 -0700, you wrote:
>This is not reproducible with a clean build from the sources of June 15
>using the recommended tools.
>
>If you still find a problem with the current R-patched, please supply
>details of how exactly you built refman.pdf, including the version numbers
>of pdftex, hyperref, latex, etc.

Sorry, I must not have been clear enough. I installed from the precompiled 
binary distribution for windows downloaded from CRAN. The file I installed 
from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do 
the build myself.

If this is any help here is the output of R.version:

>          _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status   Patched
>major    1
>minor    5.0
>year     2002
>month    06
>day      12
>language R

Thanks -

Michael Peck

------
Michael Peck
mpeck1@ix.netcom.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 09:09:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 10:09:11 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170809.KAA10745@pubhealth.ku.dk>

This is a reasonable clear indication that the pre-compiled version has
not be made from scratch since May 15, when PR#1550 was fixed.
The date on library/methods/latex/LanguageClasses.tex will be the clue.

The dependencies in the Makefiles do not pick up revisions of the tools
used.  I *always* do make distclean before generating a distribution.


On Mon, 17 Jun 2002 mpeck1@ix.netcom.com wrote:

> I sent this reply to Prof. Ripley earlier today, but failed to include his
> copy to recipients.
>
> The issue, assuming it's not my own stupidity, is with the precompiled
> binary distribution for Windows dated 12 June that is now available on CRAN.
>
> Looking again at his reply I see that he asked me a question that I'm
> actually equipped to answer:
>
> > > This appears to be the same problem reported in message ID 1550 now
> > listed in
> > > documentation-fixed.
> >Please verify that by looking at the PDF file in a text editor and checking
> >that there is an invalid link for `(-class' (no matching right
>
> The only match I found for this string contained the text '(Rfn.(-class)'
> with white space on either side of the quoted string. There is no second
> parenthesis visible nearby.
>
> At 17:32 6/15/2002 -0700, you wrote:
> >This is not reproducible with a clean build from the sources of June 15
> >using the recommended tools.
> >
> >If you still find a problem with the current R-patched, please supply
> >details of how exactly you built refman.pdf, including the version numbers
> >of pdftex, hyperref, latex, etc.
>
> Sorry, I must not have been clear enough. I installed from the precompiled
> binary distribution for windows downloaded from CRAN. The file I installed
> from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do
> the build myself.
>
> If this is any help here is the output of R.version:
>
> >          _
> >platform i386-pc-mingw32
> >arch     i386
> >os       mingw32
> >system   i386, mingw32
> >status   Patched
> >major    1
> >minor    5.0
> >year     2002
> >month    06
> >day      12
> >language R
>
> Thanks -
>
> Michael Peck
>
> ------
> Michael Peck
> mpeck1@ix.netcom.com
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 11:04:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 12:04:47 +0200
Subject: R configure.in makes bad alpha assumptions (PR#1676)
In-Reply-To: <200206152321.BAA07428@pubhealth.ku.dk>
References: <200206152321.BAA07428@pubhealth.ku.dk>
Message-ID: <15629.46143.876111.705355@mithrandir.hornik.net>

>>>>> mcmahill  writes:

> Hi,

> I was looking at configure.in for R-1.4.1 and in the
>   case "${host_cpu}" in
> part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
> is an OSF specific, not alpha specific issue.  In particular, if someone
> used f2c-f77 (shell script which emulates a fortran compiler with f2c and
> the c compiler), they'd get the broken -fpe3.  I'd probably either test
> for OSF before adding -fpe3

This was changed for R 1.5.0, can you pls try with this?  (Or with 1.5.1
which will be released in a few moments ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 17 14:11:20 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 17 Jun 2002 15:11:20 +0200 (MET DST)
Subject: overzealous help-links.sh script! (PR#1682)
Message-ID: <200206171311.PAA15557@pubhealth.ku.dk>

Starting html help in the current version of R has a very annoying 
side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a 
virgin copy. I discovered that when all of a sudden I got complaints about 
my startup "library" not being found.
Below is a modified version of the script that doesn't do this. It is not 
perfect yet (it shouldn't try to recreate links that already exists; there 
must be a glitch in the multi-test if lines) but it is safer than the 
previous version!

RenE Bertin


#! /bin/sh

# 20020615 RJVB : I modified this script such that it will not at each 
invocation throw away the ~/.R directory
# with all that it contains (including stuff the user might have 
installed!!)
# Instead, it will create what doesn't exist, and warn whenever an error 
occurs (= a dir can't be made because a file
# with the same name exists.
# For the links, I try to be clever, and put in only those that aren't there 
yet, but this doesn't yet function
# correctly with the single-line-2-test expression. Therefore, all output 
from ln is thrown away :)

USER_R_HOME="${HOME}/.R"
PKGLIST="${USER_R_HOME}/doc/html/packages.html"
SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
# RJVB: don't do this!!
# rm -rf ${USER_R_HOME}

dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html 
${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
for d in ${dirs}; do
# RJVB
    if [ ! -e ${d} ] ;then
	    mkdir -p ${d}
	elif [ ! -d ${d} ] ;then
		echo "Warning: ${d} already exists but is not a directory!"
	fi
done

for f in AUTHORS COPYING THANKS; do
# RJVB
  if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
    ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
  fi
done

# RJVB
if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
  ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
fi

for f in ${R_HOME}/doc/html/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
    fi
done

for f in ${R_HOME}/doc/html/search/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
    fi
done

rm -f ${PKGLIST}
rm -f ${SEARCHINDEX}
cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}

get_unique () {
  if test -r ${1}; then
    x="1"
    while test -r ${1}.${x}; do
      x=`echo "$x+1" | bc`
    done
    echo ${1}.${x}
  else
    echo $1
  fi
}


for lib in $*; do
    echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
    echo "<p><table width=\"100%\">" >> ${PKGLIST}
    if test -d ${lib}; then
      for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
	if test -d ${pkg}; then
	    pkgname=`basename ${pkg}`
	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
	    targetname=`basename ${target}`
	    ln -s ${pkg} ${target}
	    if test -r ${pkg}/TITLE; then
		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
	    else
		pkgtitle=""
	    fi
	    echo "<tr align=\"left\" valign=\"top\">
		    <td width=\"25%\"><a 
href=\"../../library/${targetname}/html/00Index.html\">
		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
		>> ${PKGLIST}

	    cat ${pkg}/CONTENTS | \
	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
	      >> ${SEARCHINDEX}


	fi
      done
    fi
    echo "</table>" >> ${PKGLIST}
    echo "" >> ${PKGLIST}
done

echo "</body></html>" >> ${PKGLIST}
ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1

### Local Variables: ***
### mode: sh ***
### sh-indentation: 2 ***
### End: ***


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jun 17 14:35:43 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 17 Jun 2002 15:35:43 +0200
Subject: grid not included in recommended
Message-ID: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>

Hi!

Looks like "grid" is not included in the recommended packages tarball
R-1.5.1-recommended.tar.gz ...

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 14:45:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 15:45:18 +0200
Subject: grid not included in recommended
In-Reply-To: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
Message-ID: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Hi!
> 
> Looks like "grid" is not included in the recommended packages tarball
> R-1.5.1-recommended.tar.gz ...

Argh! That's because it isn't in the directory on CRAN. If someone
would put it in, I'll roll up a replacement version.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 14:57:10 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 15:57:10 +0200
Subject: grid not included in recommended
In-Reply-To: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60086.374739.309422@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
>> Hi!
>> 
>> Looks like "grid" is not included in the recommended packages tarball
>> R-1.5.1-recommended.tar.gz ...

> Argh! That's because it isn't in the directory on CRAN. If someone
> would put it in, I'll roll up a replacement version.

Done.  How could this go unnoticed?  Argh ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:03:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:03:37 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60086.374739.309422@mithrandir.hornik.net>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
Message-ID: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> >> Hi!
> >> 
> >> Looks like "grid" is not included in the recommended packages tarball
> >> R-1.5.1-recommended.tar.gz ...
> 
> > Argh! That's because it isn't in the directory on CRAN. If someone
> > would put it in, I'll roll up a replacement version.
> 
> Done.  How could this go unnoticed?  Argh ...

Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 17 15:09:22 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 17 Jun 2002 16:09:22 +0200
Subject: grid not included in recommended
In-Reply-To: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>

>>>>> On 17 Jun 2002 16:03:37 +0200,
>>>>> Peter Dalgaard BSA (PDB) wrote:

  > Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
  >> >>>>> Peter Dalgaard BSA writes:
  >> 
  >> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
  >> >> Hi!
  >> >> 
  >> >> Looks like "grid" is not included in the recommended packages tarball
  >> >> R-1.5.1-recommended.tar.gz ...
  >> 
  >> > Argh! That's because it isn't in the directory on CRAN. If someone
  >> > would put it in, I'll roll up a replacement version.
  >> 
  >> Done.  How could this go unnoticed?  Argh ...

  > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

Yes he can (and did) :-)

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:17:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:17:39 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
Message-ID: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>

Friedrich.Leisch@ci.tuwien.ac.at writes:

>   >> > Argh! That's because it isn't in the directory on CRAN. If someone
>   >> > would put it in, I'll roll up a replacement version.
>   >> 
>   >> Done.  How could this go unnoticed?  Argh ...
> 
>   > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
> 
> Yes he can (and did) :-)

Thanks! It's a little irregular to have the same file released in
different versions so it was important to get everything updated
before any mirroring took place.

We need automated build and check procedures for "the whole thing". We
discussed this before and I think this little event only underlines
the need. Hopefully in 1.6.x.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 16:15:43 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 08:15:43 -0700
Subject: grid not included in recommended
In-Reply-To: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
 <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
Message-ID: <873cvmlyw0.fsf@jeeves.blindglobe.net>


Any chance we can get this re-released as 1.5.2 ?

>>>> "peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
P
    peter> Friedrich.Leisch@ci.tuwien.ac.at writes:
    >> >> > Argh! That's because it isn't in the directory on CRAN. If someone
    >> >> > would put it in, I'll roll up a replacement version.
    >> >> 
    >> >> Done.  How could this go unnoticed?  Argh ...
    >> 
    >> > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
    >> 
    >> Yes he can (and did) :-)

    peter> Thanks! It's a little irregular to have the same file released in
    peter> different versions so it was important to get everything updated
    peter> before any mirroring took place.

    peter> We need automated build and check procedures for "the whole thing". We
    peter> discussed this before and I think this little event only underlines
    peter> the need. Hopefully in 1.6.x.

    peter>         -p

    peter> -- 
    peter>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
    peter>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
    peter>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
    peter> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
    peter> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    peter> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    peter> Send "info", "help", or "[un]subscribe"
    peter> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    peter> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:24:25 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:24:25 -0400
Subject: Potential recompilation of certain packages
Message-ID: <20020617122424.A10644@jessie.research.bell-labs.com>

This applies to people working with the up-to-the-minute source taken
directly or indirectly from the CVS repository. Changes to the
mechanism for registering native (C and Fortran) routines in
DLLs/shared libraries and the package level data structures mean that
you will have to recompile any package that uses this approach to
exporting routines. These include all of the MASS packages, but few
others (yet :-)). No changes to those packages are necessary, just a
simple re-installation.

The changes allow one to specify types for the parameter of the
routines, and also whether they contain useful output values when
returned to R. These have the potential to avoid unecessary copying
and are more robust to errors in types passed to the routines.

Sorry for any inconvenience.

 Duncan

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 17:29:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 09:29:09 -0700
Subject: Potential recompilation of certain packages
In-Reply-To: <20020617122424.A10644@jessie.research.bell-labs.com>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
Message-ID: <87vg8hrhre.fsf@jeeves.blindglobe.net>


And the obvious question, given the timing, 
"does this apply to 1.5.1?"

best,
-tony

>>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    duncan> This applies to people working with the up-to-the-minute
    duncan> source taken directly or indirectly from the CVS
    duncan> repository. Changes to the mechanism for registering
    duncan> native (C and Fortran) routines in DLLs/shared libraries
    duncan> and the package level data structures mean that you will
    duncan> have to recompile any package that uses this approach to
    duncan> exporting routines. These include all of the MASS
    duncan> packages, but few others (yet :-)). No changes to those
    duncan> packages are necessary, just a simple re-installation.

    duncan> The changes allow one to specify types for the parameter
    duncan> of the routines, and also whether they contain useful
    duncan> output values when returned to R. These have the potential
    duncan> to avoid unecessary copying and are more robust to errors
    duncan> in types passed to the routines.



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 17 17:31:36 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jun 2002 18:31:36 +0200
Subject: logicals in data frames -- as.data.frame() should allow them
Message-ID: <15630.3816.296979.38378@gargle.gargle.HOWL>

Currently, as.data.frame() , i.e., at least its "matrix" method,
still coerces logicals to factors.  I think this is not desired
and not according to the changes to read.table() for R 1.4.0
which allow logicals.

Does anybody see a reason against a change which would allow
logical matrices to become data.frames with logical variables ? 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 17:36:26 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 18:36:26 +0200
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
 <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <x2znxt50c5.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

No. Bleeding edge, i.e., what might become 1.6.0, only. (Or DTL would
have made himself *very* unpopular.)

> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:36:30 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:36:30 -0400
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Mon, Jun 17, 2002 at 09:29:09AM -0700
References: <20020617122424.A10644@jessie.research.bell-labs.com> <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <20020617123630.B10644@jessie.research.bell-labs.com>

A.J. Rossini wrote:
> 
> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

Good question. No, it should not have anything to do with that.  And,
my guess is that you will notice it immediately on calling library()
on any of the affected packages with a large seg-fault. At least its
dramatic :-)

 D.

> 
> best,
> -tony
> 
> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS
>     duncan> repository. Changes to the mechanism for registering
>     duncan> native (C and Fortran) routines in DLLs/shared libraries
>     duncan> and the package level data structures mean that you will
>     duncan> have to recompile any package that uses this approach to
>     duncan> exporting routines. These include all of the MASS
>     duncan> packages, but few others (yet :-)). No changes to those
>     duncan> packages are necessary, just a simple re-installation.
> 
>     duncan> The changes allow one to specify types for the parameter
>     duncan> of the routines, and also whether they contain useful
>     duncan> output values when returned to R. These have the potential
>     duncan> to avoid unecessary copying and are more robust to errors
>     duncan> in types passed to the routines.
> 
> 
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 17:41:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 17:41:47 +0100 (BST)
Subject: logicals in data frames -- as.data.frame() should allow them
In-Reply-To: <15630.3816.296979.38378@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0206171739110.8715-100000@gannet.stats>

On Mon, 17 Jun 2002, Martin Maechler wrote:

> Currently, as.data.frame() , i.e., at least its "matrix" method,
> still coerces logicals to factors.  I think this is not desired
> and not according to the changes to read.table() for R 1.4.0
> which allow logicals.
>
> Does anybody see a reason against a change which would allow
> logical matrices to become data.frames with logical variables ?

It's what S4 does: not changing as.data.frame.matrix was an oversight on
my part.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Mon Jun 17 20:23:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Mon, 17 Jun 2002 21:23:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206171923.VAA17524@pubhealth.ku.dk>

Full_Name: Jrgen Henge-Ernst
Version: 1.5.1
OS: linux
Submission from: (NULL) (130.83.244.130)


There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
test
by running the R-check

hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
* checking for working latex ... OK
* using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'

* Installing *binary* package 'MASS' ...
* DONE (MASS)

* DONE (INSTALL)

* checking for file 'MASS/DESCRIPTION' ... OK
* checking package directory ... OK
* checking for sufficient/correct file permissions ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... OK
* checking R files for syntax errors ... ERROR
Syntax error in file



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 21:00:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 22:00:11 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206172000.WAA17620@pubhealth.ku.dk>

That's not an error in the VR bundle (sic), but it is an error *by you* in
the usage of R CMD check (sic).  From `Writing R extensions'

<p>Using <code>R CMD check</code>, the R package checker, one can test whether
<em>source</em> R packages work correctly.

and the under-qualified pilot applied it to a *binary* installed package,
despite the emphasized warning.


On Mon, 17 Jun 2002 juergen@henge-ernst.de wrote:

> Full_Name: Jrgen Henge-Ernst
> Version: 1.5.1
> OS: linux
> Submission from: (NULL) (130.83.244.130)
>
>
> There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
> test
> by running the R-check
>
> hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
> * checking for working latex ... OK
> * using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'
>
> * Installing *binary* package 'MASS' ...
> * DONE (MASS)
>
> * DONE (INSTALL)
>
> * checking for file 'MASS/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... OK
> * checking R files for syntax errors ... ERROR
> Syntax error in file
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 22:38:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 23:38:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <x2lm9d37t1.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> That's not an error in the VR bundle (sic), but it is an error *by you* in
> the usage of R CMD check (sic).  From `Writing R extensions'
> 
> <p>Using <code>R CMD check</code>, the R package checker, one can test whether
> <em>source</em> R packages work correctly.
> 
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

Or, to put it differently, what you *should* have done was

<install R + recommended packages>
tar xfz Recommended/VR_7.0-3.tar.gz 
R CMD check VR

(A couple of gotchas in that: You cannot check MASS by itself, only
the entire VR bundle, and you need the other packages installed or the
check chokes on library(nlme))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Jun 18 03:00:50 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 17 Jun 2002 21:00:50 -0500
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <20020618020050.GA20949@sonny.eddelbuettel.com>

On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

I wonder if "R CMD check ... " could abort with an error message if it is
applied to a binary package?  
 
Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 07:51:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 07:51:06 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <20020618020050.GA20949@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>

On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:

> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> > and the under-qualified pilot applied it to a *binary* installed package,
> > despite the emphasized warning.
>
> I wonder if "R CMD check ... " could abort with an error message if it is
> applied to a binary package?

I am not sure how simple that is.  It used to be hard to tell source and
binary packages apart.  What we can do is to test for Built: in the
DESCRIPTION file, which will cope with people who have built the package
recently.

The trouble with idiot-proofing is anticipating the idiot: as far as I am
aware this is a first.

In all other cases I tried the INSTALL part of R CMD check failed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Tue Jun 18 08:37:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Tue, 18 Jun 2002 09:37:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206180737.JAA19688@pubhealth.ku.dk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Tuesday 18 June 2002 08:35, you wrote:
> I seem not to have seen your apology for an incorrect report on my VR
> bundle, which was a public accusation of an error by me.
>
> Please explain why not!
I've been looking into the Docu what the R CMD check is doing or should do and 
why excatly that package is throwing that error. I've build a lot of other 
packages which seem to pass that check
e.g. GeneSOM without showing an error
The install and check ist done the following way:

unzip the tar.gz in a dirctory
cp GeneSOM/DESCRIPTION .
/usr/bin/R INSTALL -l $RPM_BUILD_ROOT/usr/lib/R/library GeneSOM
/usr/bin/R CMD check GeneSOM

But unfortunaly I haven't figured out how to use the check CMD the right way.


As there have been a lot of contib-packages which pass through that way, I 
thought there must be an error somewhere in the test-scrips.

So srory to bother you with that false alarm.

Greetings Jrgen

- -- 
 Juergen Henge-Ernst // Hauptstrasse 37 // 67591 Mlsheim // Germany
           email: juergen@henge-ernst.de        ICQ 56324358
Key fingerprint = 5FFD 89AC 6C7B 76DD 5FAC  9A3F D1A9 0C9B 3B49 67B1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQE9DuKu0akMmztJZ7ERAmW6AJwIMe90Em0TIgVlv1VY18UU7iJjqACfb9gf
3IZZ9uAz5EVgOyavdkDPvzQ=
=rqTq
-----END PGP SIGNATURE-----


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Jun 18 14:25:02 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 18 Jun 2002 09:25:02 -0400
Subject: can't find array overruns (was: help debugging segfaults)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>

Dear R-devel,

Last week I got several responses to my question about debugging segfaults
in my code (original post below).  After I changed the S_alloc() calls to
Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
did:

o  Switched to Calloc/Free.  Electric Fence did not find any problem.

o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
where arrays are accessed.  Everything ran fine.  (I did not (don't really
know easy way to) do the same thing for the Fortran subroutines (mostly
Breiman's original code) called by the C function.

o Changed to malloc()/free().  Still didn't find anything with Electric
Fence.

Can some one suggest how to proceed?  Is it still not save to assume the bug
is gone?

Regards,
Andy

> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw@merck.com]
> Sent: Wednesday, June 12, 2002 9:26 AM
> To: 'r-devel@stat.math.ethz.ch'; 'r-help@stat.math.ethz.ch'
> Subject: [R] help debugging segfaults
> 
> 
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on 
> large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c 
> contains rf(),
> a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I 
> run random
> forest with the data and setting as mentioned above, it was 
> able to finish
> growing the 7000 trees, but segfault when returning from rf() 
> to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 18 15:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2002 16:03:39 +0200
Subject: can't find array overruns (was: help debugging segfaults)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
Message-ID: <x2vg8gsmys.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Dear R-devel,
> 
> Last week I got several responses to my question about debugging segfaults
> in my code (original post below).  After I changed the S_alloc() calls to
> Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
> did:
> 
> o  Switched to Calloc/Free.  Electric Fence did not find any problem.
> 
> o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
> where arrays are accessed.  Everything ran fine.  (I did not (don't really
> know easy way to) do the same thing for the Fortran subroutines (mostly
> Breiman's original code) called by the C function.
> 
> o Changed to malloc()/free().  Still didn't find anything with Electric
> Fence.
> 
> Can some one suggest how to proceed?  Is it still not save to assume the bug
> is gone?
> 
> Regards,
> Andy

The hardcore way is to use the original code and backtrack until you
find the source of the memory corruption. I.e. in your code below, it
seems that "s" got corrupted so that NEXT_NODE(s) triggers the
segfault. So

1. Find the exact memory location with the corrupted value. 
2. Set a hardware watchpoint on that location.
3. Rerun the program with well-defined input and check whenever the
   value at the watchpoint changes. 

Very likely, the culprit will be the last change prior to the crash,
so you'd have to check the program logic carefully around that point.
If it happens at an assignment to something seemingly unrelated,
chances are that you have an array overrun. If the location changes
frequently, it can be useful to conditionalize the watchpoint (the
value of number of garbage collections can be useful for this).

The precise way to do this kind of stuff is in your friendly gdb
manual... (sorry, but it would take all day to flesh out the details)

> > The randomForest package mainly consists of two things: rf.c 
> > contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> > rfsub.f that do
> > most of the work (slightly altered from Breiman's original code).  All
> > memory allocations are done in rf.c, using S_alloc().  When I 
> > run random
> > forest with the data and setting as mentioned above, it was 
> > able to finish
> > growing the 7000 trees, but segfault when returning from rf() 
> > to R.  GDB
> > gave the following (gdb prompts removed):
> > 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> > env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> > CAR(pargs),
> > which));
> > 
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 18 16:57:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 18 Jun 2002 17:57:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
References: <20020618020050.GA20949@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
Message-ID: <15631.22606.776749.302073@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
>> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
>> > and the under-qualified pilot applied it to a *binary* installed package,
>> > despite the emphasized warning.
>> 
>> I wonder if "R CMD check ... " could abort with an error message if it is
>> applied to a binary package?

> I am not sure how simple that is.  It used to be hard to tell source
> and binary packages apart.  What we can do is to test for Built: in
> the DESCRIPTION file, which will cope with people who have built the
> package recently.

This was introduced in 1.4 I think (?) so it seems we can change the
heuristics now to rely on the correspondence Built: <-> binary.  I will
soon (once I have time again) change INSTALL accordingly.

> The trouble with idiot-proofing is anticipating the idiot: as far as I
> am aware this is a first.

> In all other cases I tried the INSTALL part of R CMD check failed.

We need better integration of INSTALL into check anyway.  But we can
have more idiot-proofing in check as well.  Something in the works is a
reorganization of INSTALL/check/build with something else needed for
creating front-matter stuff, and we also need to rethink the logic of
check (e.g., verify correctness of meta-information prior to trying to
install).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 17:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 17:33:30 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <15631.22606.776749.302073@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0206181731070.18048-100000@gannet.stats>

On Tue, 18 Jun 2002, Kurt Hornik wrote:

> >>>>> ripley  writes:
>
> > On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
> >> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> >> > and the under-qualified pilot applied it to a *binary* installed package,
> >> > despite the emphasized warning.
> >>
> >> I wonder if "R CMD check ... " could abort with an error message if it is
> >> applied to a binary package?
>
> > I am not sure how simple that is.  It used to be hard to tell source
> > and binary packages apart.  What we can do is to test for Built: in
> > the DESCRIPTION file, which will cope with people who have built the
> > package recently.
>
> This was introduced in 1.4 I think (?) so it seems we can change the
> heuristics now to rely on the correspondence Built: <-> binary.  I will
> soon (once I have time again) change INSTALL accordingly.

Not necessarily, as people do manually install packages.  I've added the
test for Built in R CMD check for 1.6.0, which should catch a lot of
misuses.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Tue Jun 18 21:51:18 2002
From: accot@free.fr (accot@free.fr)
Date: Tue, 18 Jun 2002 22:51:18 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206182051.WAA26484@pubhealth.ku.dk>

Full_Name: Johnny Accot
Version: 1.5.1
OS: Linux
Submission from: (NULL) (198.4.83.52)


Hi.

I'm having a problem with the binary read/write functions.  I'm writing a device
driver in R (why not?) and of course I have to send a couple commands to the
device.  Typically, I send one byte, receive one acknowledgement byte, send
another byte, receive an ACK, and so on.  At least this is what I would like to
do.  Instead, after writing one byte, reading its acknowledgement byte, and
writing a second byte, R hangs on the next read for an unknown reason.  I guess
this is a bug in the read/write functions.  If you have a PS/2 device you may
try to run the following code:

ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
dev <- file("/dev/psaux")
open(dev, "w+b")
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
close(dev)

which gives:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[...R hangs here...]

It first creates an ascii table, opens the PS/2 device for binary read&write,
writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
then hangs when reading the second acknowledgement byte.  If, instead, you close
the device between the two writes, it's fine:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)

This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
stick with the open-each-time strategy, but it is not very clean.

I also tried to write bytes using the writeBin command, but it says the "size=1"
is not available on my computer.  This is why I'm using the writeChar function.

Please let me know if I'm doing something wrong.  I hope not.

And thanks for the great software! :-)

Johnny

PS: if you try to run the code and don't get 250 as acknowledgement byte, it
means the PS/2 controller is not in idle state.  Very unlikely though.  Try
again as the set-default command should bring it back to its idle state.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 01:47:33 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 19 Jun 2002 02:47:33 +0200 (MET DST)
Subject: FW: [R] Problems with url/download and http_proxy (PR#1689)
Message-ID: <200206190047.CAA26946@pubhealth.ku.dk>

For the record.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, June 18, 2002 3:21 PM
To: Warnes, Gregory R
Cc: 'r-help@stat.math.ethz.ch'
Subject: RE: [R] Problems with url/download and http_proxy


The port is not supposed to be required, so rather than fix the docs can
anyone fix the problem?


On Tue, 18 Jun 2002, Warnes, Gregory R wrote:

>
> Just adding the trailing slash doesn't seem to help:
>
> 	> Sys.getenv('http_proxy')
> 	                  http_proxy
> 	"http://gproxy1.pfizer.com/"
>
> 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	connect: Cannot assign requested address
> 	unable to connect to 'gproxy1.pfizer.com'.
> 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> :
> 	        cannot open URL
> `http://cran.r-project.org/src/contrib/PACKAGES'
>
> But adding the port explicitly does:
>
> 	> Sys.getenv("http_proxy")
> 	                     http_proxy
> 	"http://gproxy1.pfizer.com:80/"
> 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	                                     description
> 	"http://cran.r-project.org/src/contrib/PACKAGES"
> 	                                           class
> 	                                           "url"
> 	                                            mode
> 	                                             "r"
> 	                                            text
> 	                                          "text"
> 	                                          opened
> 	                                        "opened"
> 	                                        can read
> 	                                           "yes"
> 	                                       can write
> 	                                            "no"
>
>
>
> even if the trailing slash is not present:
>
> > Sys.getenv("http_proxy")
>                     http_proxy
> "http://gproxy1.pfizer.com:80"
>
> > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
>                                      description
> "http://cran.r-project.org/src/contrib/PACKAGES"
>                                            class
>                                            "url"
>                                             mode
>                                              "r"
>                                             text
>                                           "text"
>                                           opened
>                                         "opened"
>                                         can read
>                                            "yes"
>                                        can write
>                                             "no"
>
>
> Perhaps the documentation for download.file should be changed to note the
> requirement of the port.  The paragraph on proxies could be changed from
>
>
>      Proxies can be specified via environment variables. Setting
>      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
>      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
>      upper-case version) is consulted and if non-empty used as a proxy
>      site.  For FTP transfers, the username and password on the proxy
>      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
>
>
> to something like:
>
>      Proxies can be specified via the environment variables `"http_proxy"'
>      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These
variables
>      must be of the form `protocol://machine.domain.tld:port'.  For FTP
>      transfers, the username and password on the proxy can be specified by
>     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
>      prevents the use of any proxy.
>
>
> -Greg
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, June 18, 2002 11:43 AM
> > To: Warnes, Gregory R
> > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > Subject: Re: [R] Problems with url/download and http_proxy
> >
> >
> > The code (which you do have available to you) says http_proxy
> >
> >  * Should be like http://myproxy/ or http://myproxy:3128/
> >
> > which yours is not, so please try that format.  The code suggests
> > that the traling / can be omitted, but the words do not.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> >
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 09:58:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jun 2002 09:58:17 +0100 (BST)
Subject: [R] Problems with url/download and http_proxy
In-Reply-To: <Pine.LNX.4.31.0206182020400.18450-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0206190956050.15670-100000@auk.stats>

It's a bug in the libxml code causing the port to be set to zero.
Comment lines like

    /*if (proxyPort != 0) {
	proxyPort = 0;
	}*/

in nanohttp.c and nanoftp.c.  (The port has already been set in the
caller.)

Please confirm that this works.


On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:

> The port is not supposed to be required, so rather than fix the docs can
> anyone fix the problem?
>
>
> On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
>
> >
> > Just adding the trailing slash doesn't seem to help:
> >
> > 	> Sys.getenv('http_proxy')
> > 	                  http_proxy
> > 	"http://gproxy1.pfizer.com/"
> >
> > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	connect: Cannot assign requested address
> > 	unable to connect to 'gproxy1.pfizer.com'.
> > 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > :
> > 	        cannot open URL
> > `http://cran.r-project.org/src/contrib/PACKAGES'
> >
> > But adding the port explicitly does:
> >
> > 	> Sys.getenv("http_proxy")
> > 	                     http_proxy
> > 	"http://gproxy1.pfizer.com:80/"
> > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	                                     description
> > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > 	                                           class
> > 	                                           "url"
> > 	                                            mode
> > 	                                             "r"
> > 	                                            text
> > 	                                          "text"
> > 	                                          opened
> > 	                                        "opened"
> > 	                                        can read
> > 	                                           "yes"
> > 	                                       can write
> > 	                                            "no"
> >
> >
> >
> > even if the trailing slash is not present:
> >
> > > Sys.getenv("http_proxy")
> >                     http_proxy
> > "http://gproxy1.pfizer.com:80"
> >
> > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> >                                      description
> > "http://cran.r-project.org/src/contrib/PACKAGES"
> >                                            class
> >                                            "url"
> >                                             mode
> >                                              "r"
> >                                             text
> >                                           "text"
> >                                           opened
> >                                         "opened"
> >                                         can read
> >                                            "yes"
> >                                        can write
> >                                             "no"
> >
> >
> > Perhaps the documentation for download.file should be changed to note the
> > requirement of the port.  The paragraph on proxies could be changed from
> >
> >
> >      Proxies can be specified via environment variables. Setting
> >      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
> >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> >      upper-case version) is consulted and if non-empty used as a proxy
> >      site.  For FTP transfers, the username and password on the proxy
> >      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
> >
> >
> > to something like:
> >
> >      Proxies can be specified via the environment variables `"http_proxy"'
> >      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These variables
> >      must be of the form `protocol://machine.domain.tld:port'.  For FTP
> >      transfers, the username and password on the proxy can be specified by
> >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
> >      prevents the use of any proxy.
> >
> >
> > -Greg
> >
> > > -----Original Message-----
> > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > To: Warnes, Gregory R
> > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > Subject: Re: [R] Problems with url/download and http_proxy
> > >
> > >
> > > The code (which you do have available to you) says http_proxy
> > >
> > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > >
> > > which yours is not, so please try that format.  The code suggests
> > > that the traling / can be omitted, but the words do not.
> > >
> > > --
> > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > > r-help-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._._._
> > >
> >
> >
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 10:15:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 11:15:41 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206190915.LAA29641@pubhealth.ku.dk>

Not a bug: check the documentation of file(), which is documented to work
for files but not for devices.  No attempt is made to cope with e.g.
blocking on non-files.

It's a pretty extreme view of the world to consider /dev/psaux to be a
file, and R is just using standard C <stdio.h> I/O.

However, this is a great opportunity for you to contribute a device()
function to R.

On Tue, 18 Jun 2002 accot@free.fr wrote:

> Full_Name: Johnny Accot
> Version: 1.5.1
> OS: Linux
> Submission from: (NULL) (198.4.83.52)
>
>
> Hi.
>
> I'm having a problem with the binary read/write functions.  I'm writing a device
> driver in R (why not?) and of course I have to send a couple commands to the
> device.  Typically, I send one byte, receive one acknowledgement byte, send
> another byte, receive an ACK, and so on.  At least this is what I would like to
> do.  Instead, after writing one byte, reading its acknowledgement byte, and
> writing a second byte, R hangs on the next read for an unknown reason.  I guess
> this is a bug in the read/write functions.  If you have a PS/2 device you may
> try to run the following code:
>
> ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> close(dev)
>
> which gives:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> > dev <- file("/dev/psaux")
> > open(dev, "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [...R hangs here...]
>
> It first creates an ascii table, opens the PS/2 device for binary read&write,
> writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
> reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
> then hangs when reading the second acknowledgement byte.  If, instead, you close
> the device between the two writes, it's fine:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
>
> This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
> 1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
> stick with the open-each-time strategy, but it is not very clean.
>
> I also tried to write bytes using the writeBin command, but it says the "size=1"
> is not available on my computer.  This is why I'm using the writeChar function.
>
> Please let me know if I'm doing something wrong.  I hope not.
>
> And thanks for the great software! :-)
>
> Johnny
>
> PS: if you try to run the code and don't get 250 as acknowledgement byte, it
> means the PS/2 controller is not in idle state.  Very unlikely though.  Try
> again as the set-default command should bring it back to its idle state.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 15:31:38 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 19 Jun 2002 10:31:38 -0400
Subject: [R] Problems with url/download and http_proxy
Message-ID: <D7A3CFD7825BD6119B880002A58F06C227E656@groexmb02.pfizer.com>

This does seem to fix my problem:

> Sys.getenv("http_proxy")
                  http_proxy 
"http://gproxy1.pfizer.com/" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

and even

> Sys.getenv("http_proxy")
                 http_proxy 
"http://gproxy1.pfizer.com" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

-Greg


> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 19, 2002 4:58 AM
> To: Warnes, Gregory R
> Cc: r-devel@stat.math.ethz.ch
> Subject: RE: [R] Problems with url/download and http_proxy
> 
> 
> It's a bug in the libxml code causing the port to be set to zero.
> Comment lines like
> 
>     /*if (proxyPort != 0) {
> 	proxyPort = 0;
> 	}*/
> 
> in nanohttp.c and nanoftp.c.  (The port has already been set in the
> caller.)
> 
> Please confirm that this works.
> 
> 
> On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:
> 
> > The port is not supposed to be required, so rather than fix 
> the docs can
> > anyone fix the problem?
> >
> >
> > On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
> >
> > >
> > > Just adding the trailing slash doesn't seem to help:
> > >
> > > 	> Sys.getenv('http_proxy')
> > > 	                  http_proxy
> > > 	"http://gproxy1.pfizer.com/"
> > >
> > > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	connect: Cannot assign requested address
> > > 	unable to connect to 'gproxy1.pfizer.com'.
> > > 	Error in 
> url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > > :
> > > 	        cannot open URL
> > > `http://cran.r-project.org/src/contrib/PACKAGES'
> > >
> > > But adding the port explicitly does:
> > >
> > > 	> Sys.getenv("http_proxy")
> > > 	                     http_proxy
> > > 	"http://gproxy1.pfizer.com:80/"
> > > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	                                     description
> > > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > > 	                                           class
> > > 	                                           "url"
> > > 	                                            mode
> > > 	                                             "r"
> > > 	                                            text
> > > 	                                          "text"
> > > 	                                          opened
> > > 	                                        "opened"
> > > 	                                        can read
> > > 	                                           "yes"
> > > 	                                       can write
> > > 	                                            "no"
> > >
> > >
> > >
> > > even if the trailing slash is not present:
> > >
> > > > Sys.getenv("http_proxy")
> > >                     http_proxy
> > > "http://gproxy1.pfizer.com:80"
> > >
> > > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > >                                      description
> > > "http://cran.r-project.org/src/contrib/PACKAGES"
> > >                                            class
> > >                                            "url"
> > >                                             mode
> > >                                              "r"
> > >                                             text
> > >                                           "text"
> > >                                           opened
> > >                                         "opened"
> > >                                         can read
> > >                                            "yes"
> > >                                        can write
> > >                                             "no"
> > >
> > >
> > > Perhaps the documentation for download.file should be 
> changed to note the
> > > requirement of the port.  The paragraph on proxies could 
> be changed from
> > >
> > >
> > >      Proxies can be specified via environment variables. Setting
> > >      `"no_proxy"' stops any proxy being tried. Otherwise 
> the setting of
> > >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> > >      upper-case version) is consulted and if non-empty 
> used as a proxy
> > >      site.  For FTP transfers, the username and password 
> on the proxy
> > >      can be specified by `"ftp_proxy_user"' and 
> `"ftp_proxy_password"'.
> > >
> > >
> > > to something like:
> > >
> > >      Proxies can be specified via the environment 
> variables `"http_proxy"'
> > >      or `"HTTP_PROXY"' and `"ftp_proxy'" or 
> `"FTP_PROXY"'.  These variables
> > >      must be of the form 
> `protocol://machine.domain.tld:port'.  For FTP
> > >      transfers, the username and password on the proxy 
> can be specified by
> > >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  
> Setting `"no_proxy"'
> > >      prevents the use of any proxy.
> > >
> > >
> > > -Greg
> > >
> > > > -----Original Message-----
> > > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > > To: Warnes, Gregory R
> > > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > > Subject: Re: [R] Problems with url/download and http_proxy
> > > >
> > > >
> > > > The code (which you do have available to you) says http_proxy
> > > >
> > > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > > >
> > > > which yours is not, so please try that format.  The 
> code suggests
> > > > that the traling / can be omitted, but the words do not.
> > > >
> > > > --
> > > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > > Professor of Applied Statistics,  
> http://www.stats.ox.ac.uk/~ripley/
> > > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > > >
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > -.-.-.-.-.-.-.-.-
> > > > r-help mailing list -- Read
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To:
> > > > r-help-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > > _._._._._._._._._
> > > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:04:56 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:04:56 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15632.42814.327732.92452@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
Message-ID: <87lm9bdzkn.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    martin> Hence we are waiting for a new patch  (:-)

In order to do that, I need to know what abbreviate.arg (the
"un-documented" argument) does.  Anyone know?    Other thant that,
it (the patch) is almost ready.

(yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
engineering...). 

best,
-tony



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 19 17:06:55 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 19 Jun 2002 18:06:55 +0200
Subject: .. add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <871yd7jsjh.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
Message-ID: <15632.44063.277697.883795@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

on April 22 --- you see I'm cleaning up pending e-mails :-)

    tony> could we add an argument to suppress printing of levels for
    tony> print.factor()?  i.e.:


    tony> print.factor <-
    tony> function (x, quote = FALSE, print.levels = TRUE, ...)    ## MODIFIED
    tony> {
    tony>  if (length(x) <= 0)
    tony>  cat("factor(0)\n")
    tony>  else print(as.character(x), quote = quote, ...)
    tony>  if (print.levels) {                                         ## ADDED
    tony>    cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    tony>  }                                                           ## ADDED
    tony>  invisible(x)
    tony> }

    tony> I've done this for my local work, but wondering if this is useful in
    tony> general?

As I said then, it is useful idea, thank you Tony.

However, as I just found out,  S+6.0 does it a bit better.
Their  print.factor() has a  'max.levels = 5' argument which
allows more than just on/off.

Here's S+6.0 help(print.factor) :

>>                         Use print() on a factor object
>>                                        
>> USAGE:
>> 
>> print.factor(x, quote = F, abbreviate.arg, ..., max.levels = 5)
>> 
>> REQUIRED ARGUMENTS:
>> 
>>    x
>>           The factor object to print
>>           
>> OPTIONAL ARGUMENTS:
>> 
>>    quote
>>           If quote is TRUE then the strings in the factors will be
>>           surrounded by quotes and all the levels will be printed.
>>           
>>    max.levels
>>           If some of the levels in a factor object are not in represented
>>           in the object (or if quote is TRUE), then the first max.levels
>>           levels will be printed.
>>           This is a method for the function print() for objects
>>           inheriting from class factor.


Hence we are waiting for a new patch  (:-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:15:28 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:15:28 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87lm9bdzkn.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
Message-ID: <87hejzdz33.fsf@jeeves.blindglobe.net>

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch  (:-)

    a> In order to do that, I need to know what abbreviate.arg (the
    a> "un-documented" argument) does.  Anyone know?    Other thant that,
    a> it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
    a> engineering...). 

And here's the hack; note that I've left my "argument" in for
backwards compatibility.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    cat("Levels: ", paste(levels(x)[1:max.levels], collapse = " "),
"\n")
  }
  invisible(x) 
} 

It's ugly but seems to work.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 19 17:58:13 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 19 Jun 2002 18:58:13 +0200 (MET DST)
Subject: levels() counter-intuitif? (PR#1693)
Message-ID: <200206191658.SAA04763@pubhealth.ku.dk>

Suppose I have a factor size with levels "small", "medium" and "large". 
Then, when I subset this factor:
>ss<-size[size!="medium"]
to get at the extremes,
>levels(ss)
....
Levels:  large medium small

The same happens with
>subset( size, size!="medium")

I understand that the resulting factor inherits the possible levels from its 
"parent", but I do not see in what that is useful. Intuitively, I would 
expect that levels(ss) return "small" and "large". For subset(), there might 
be an option to request inheritance of the number of levels.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 19 18:16:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 2002 19:16:17 +0200
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <x23cvj195q.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.

Not a bug (in any sense). Basically, you do need factors with levels
that are not present once in a while (we had a tabulation example
recently), and it is easier to remove unwanted levels than it is to
get the levels back in. E.g.

> x[-1]
[1] medium large 
Levels:  large medium small 

> x[-1,drop=T]
[1] medium large 
Levels:  large medium 

> factor(x[-1])
[1] medium large 
Levels:  large medium 

As for the usefulness, consider this

> with(subset(juul,sex==1), table(menarche))
numeric(0)
> juul$menarche <- factor(juul$menarche)
> with(subset(juul,sex==1), table(menarche))
menarche
1 2 
0 0 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:18:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:18:18 +0100 (BST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191812200.11375-100000@gannet.stats>

On Wed, 19 Jun 2002 rjvbertin@hotmail.com wrote:

> Suppose I have a factor size with levels "small", "medium" and "large".
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
>
> The same happens with
> >subset( size, size!="medium")
>
> I understand that the resulting factor inherits the possible levels from its
> "parent", but I do not see in what that is useful.

When you have enough experience you may.  Lots of R code relies on it, for
a start.  It's also essential when predicting a classifcation to know wha
the possible values were.  That's the whole point of a factor: it's an
enumeration type, and one does not change the enumeration on subsetting.

>  Intuitively, I would
> expect that levels(ss) return "small" and "large". For subset(), there might
> be an option to request inheritance of the number of levels.

There is such an option:  [, drop=TRUE].

Please DO NOT use R-bugs to document your intuition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:30:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:30:27 +0100 (BST)
Subject: overzealous help-links.sh script! (PR#1682)
In-Reply-To: <200206171311.PAA15557@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191820320.11375-100000@gannet.stats>

Not a bug.  .R is a `hidden' private directory for R's own use.
Have you been trespassing:  `including stuff the user might have
installed' suggests you have?

On Mon, 17 Jun 2002 rjvbertin@hotmail.com wrote:

> Starting html help in the current version of R has a very annoying
> side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a
> virgin copy. I discovered that when all of a sudden I got complaints about
> my startup "library" not being found.
> Below is a modified version of the script that doesn't do this. It is not
> perfect yet (it shouldn't try to recreate links that already exists; there

Why: the targets of the links may well have changed?  Remember that
R_HOME can change from invocation to invocation, and if there are
different R versions (even on different platforms) keeping anything is
completely inappropriate.  You can't even delete just what you want to
replace, as .R might have been created by a later R version and put other
things in there.

> must be a glitch in the multi-test if lines) but it is safer than the
> previous version!

Not so.  Have you read the section on BUGS in the FAQ recently?

>
> RenE Bertin
>
>
> #! /bin/sh
>
> # 20020615 RJVB : I modified this script such that it will not at each
> invocation throw away the ~/.R directory
> # with all that it contains (including stuff the user might have
> installed!!)
> # Instead, it will create what doesn't exist, and warn whenever an error
> occurs (= a dir can't be made because a file
> # with the same name exists.
> # For the links, I try to be clever, and put in only those that aren't there
> yet, but this doesn't yet function
> # correctly with the single-line-2-test expression. Therefore, all output
> from ln is thrown away :)
>
> USER_R_HOME="${HOME}/.R"
> PKGLIST="${USER_R_HOME}/doc/html/packages.html"
> SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
> # RJVB: don't do this!!
> # rm -rf ${USER_R_HOME}
>
> dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html
> ${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
> for d in ${dirs}; do
> # RJVB
>     if [ ! -e ${d} ] ;then
> 	    mkdir -p ${d}
> 	elif [ ! -d ${d} ] ;then
> 		echo "Warning: ${d} already exists but is not a directory!"
> 	fi
> done
>
> for f in AUTHORS COPYING THANKS; do
> # RJVB
>   if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
>     ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
>   fi
> done
>
> # RJVB
> if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
>   ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
> fi
>
> for f in ${R_HOME}/doc/html/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
>     fi
> done
>
> for f in ${R_HOME}/doc/html/search/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
>     fi
> done
>
> rm -f ${PKGLIST}
> rm -f ${SEARCHINDEX}
> cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
>
> get_unique () {
>   if test -r ${1}; then
>     x="1"
>     while test -r ${1}.${x}; do
>       x=`echo "$x+1" | bc`
>     done
>     echo ${1}.${x}
>   else
>     echo $1
>   fi
> }
>
>
> for lib in $*; do
>     echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
>     echo "<p><table width=\"100%\">" >> ${PKGLIST}
>     if test -d ${lib}; then
>       for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
> 	if test -d ${pkg}; then
> 	    pkgname=`basename ${pkg}`
> 	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
> 	    targetname=`basename ${target}`
> 	    ln -s ${pkg} ${target}
> 	    if test -r ${pkg}/TITLE; then
> 		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
> 	    else
> 		pkgtitle=""
> 	    fi
> 	    echo "<tr align=\"left\" valign=\"top\">
> 		    <td width=\"25%\"><a
> href=\"../../library/${targetname}/html/00Index.html\">
> 		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
> 		>> ${PKGLIST}
>
> 	    cat ${pkg}/CONTENTS | \
> 	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
> 	      >> ${SEARCHINDEX}
>
>
> 	fi
>       done
>     fi
>     echo "</table>" >> ${PKGLIST}
>     echo "" >> ${PKGLIST}
> done
>
> echo "</body></html>" >> ${PKGLIST}
> ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1
>
> ### Local Variables: ***
> ### mode: sh ***
> ### sh-indentation: 2 ***
> ### End: ***
>
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> _________________________________________________________________
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Jun 19 18:41:47 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 19 Jun 2002 19:41:47 +0200 (MEST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0206191936550.6748-100000@artemis>



> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

sure, because you didn't change the levels attribute of the factor object
ss. And there is no statement in the documentation that subsetting a
factor object touches the levels attribute. So why is this a bug? If I
remember correctly, there was a dicussion about this issue a few month ago
on this list ...

Torsten

> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.
> 
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
> 
> _________________________________________________________________
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Jun 19 18:50:07 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 19 Jun 2002 13:50:07 -0400
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <15632.50255.346546.580824@gargle.gargle.HOWL>

rjvbertin@hotmail.com writes:
> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

Try:
  R> ss <- size[size != "medium", drop=T]
  R> levels(ss)
     [1] "large" "small"

By the way, this type of question probably belongs in R-help, not R-devel, and
you will likely get grief for submitting it as a "bug".
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Wed Jun 19 19:46:46 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Wed, 19 Jun 2002 14:46:46 -0400 (EDT)
Subject: Anon CVS updates?
Message-ID: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>

Is the anonymous CVS repository for R presently broken? There haven't been
many updates coming through and the repository files seem to differ
significantly from the rsync version of R-devel...

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 19:59:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 11:59:04 -0700
Subject: Anon CVS updates?
In-Reply-To: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
Message-ID: <87hejzdrif.fsf@jeeves.blindglobe.net>

>>>>> "byron" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    byron> Is the anonymous CVS repository for R presently broken? There haven't been
    byron> many updates coming through and the repository files seem to differ
    byron> significantly from the rsync version of R-devel...

doing a cvs log on my copy suggests that it's reasonably up to date.
"today's activity":

rossini 82 > cd anoncvs/R
rossini 83 > cvs log | grep 2002/06/19
cvs server: Logging .
date: 2002/06/19 06:30:55;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 06:30:46;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 14:44:06;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 11:45:38;  author: ripley;  state: Exp;  lines: +2 -0
date: 2002/06/19 10:40:02;  author: ripley;  state: Exp;  lines: +3 -0
date: 2002/06/19 09:46:27;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 07:29:54;  author: ripley;  state: Exp;  lines: +1 -1
date: 2002/06/19 07:04:07;  author: ripley;  state: Exp;  lines: +3 -2
date: 2002/06/19 18:15:39;  author: ripley;  state: Exp;  lines: +1 -0
date: 2002/06/19 09:21:09;  author: ripley;  state: Exp;  lines: +4 -0

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 20:32:12 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 12:32:12 -0700
Subject: new version of print.factor
Message-ID: <874rfzdpz7.fsf@jeeves.blindglobe.net>


Thanks to Tony Plate for letting me know what the abbreviate.arg
option does.  I think this could be made more flexible (I.e. 
 =TRUE, =FALSE, =#, where # would be passed to the abbreviate
min.length argument).  But it follows the example I was given.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    if (abbreviate.arg) {
      cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
                            collapse = " "), "\n")
    } else {
      cat("Levels: ", paste(levels(x)[1:max.levels],
                            collapse = " "), "\n")
    }
  }
  invisible(x) 
} 
 

It definitely could be cleaned up a bit more.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 11:13:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 12:13:33 +0200
Subject: a version of source() which keeps comments ?
Message-ID: <15633.43725.738497.292166@gargle.gargle.HOWL>

I'd like to have this to be used in, e.g.,
demo() and example().

Currently, source() parse()s the entire file and then evaluates
expression by expression. ``Of course'',  parse() already loses
the comments.

An (much slower) alternative might be to the readLine() the
file, echo what we read, 
and try to parse() ``the current chunk''.
when parse() fails (when the current expression is incomplete),
we silently read the next line, etc, until the expression is complete and hence
parse() succeeds, then we eval() and print().

What do people think?

Would there be volunteers to write this?
[I think it should finalize as an optional argument to source(), 
 but for experimentation it might be easier to try with a
 function  sourceLinewise(.)
].

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 20 11:21:11 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 20 Jun 2002 12:21:11 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <15633.44183.500647.714908@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 20 Jun 2002 12:13:33 +0200,
>>>>> Martin Maechler (MM) wrote:

  > I'd like to have this to be used in, e.g.,
  > demo() and example().

  > Currently, source() parse()s the entire file and then evaluates
  > expression by expression. ``Of course'',  parse() already loses
  > the comments.

  > An (much slower) alternative might be to the readLine() the
  > file, echo what we read, 
  > and try to parse() ``the current chunk''.
  > when parse() fails (when the current expression is incomplete),
  > we silently read the next line, etc, until the expression is complete and hence
  > parse() succeeds, then we eval() and print().

  > What do people think?

  > Would there be volunteers to write this?
  > [I think it should finalize as an optional argument to source(), 
  >  but for experimentation it might be easier to try with a
  >  function  sourceLinewise(.)
  > ].

I'm not a volunteer but the feature would also be extremely useful for
Sweave (and probably most other dynamic report approaches), where we
currently loose all comments in code chunks.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 12:21:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 13:21:00 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <x2660eryar.fsf@biostat.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'd like to have this to be used in, e.g.,
> demo() and example().
> 
> Currently, source() parse()s the entire file and then evaluates
> expression by expression. ``Of course'',  parse() already loses
> the comments.
> 
> An (much slower) alternative might be to the readLine() the
> file, echo what we read, 
> and try to parse() ``the current chunk''.
> when parse() fails (when the current expression is incomplete),
> we silently read the next line, etc, until the expression is complete and hence
> parse() succeeds, then we eval() and print().
> 
> What do people think?
> 
> Would there be volunteers to write this?
> [I think it should finalize as an optional argument to source(), 
>  but for experimentation it might be easier to try with a
>  function  sourceLinewise(.)
> ].

Historically, this is what source() should have done all the time if
it were to be in keeping with other Unix programs (shift input from
stdin temporarily). The source() that we have is really "evaluate
file". I don't think we can source() an infinite stream like a pipe or
a socket, can we?

Actually, I think it can be done with a little careful file descriptor
switching. (Turn of readline processing, etc., switch stdin to file,
run till eof or error, switch back and reestablish readline.) We'd
still have the reparse-on-incomplete thing, since that also happens on
stdin -- something I suspect isn't necessary, but it takes a fairly
hard look at the grammar itself to find out. 

(This kind of stuff has long been on my might-do list of projects,
along with (re)fixing the comment issue and providing better
information on parse/eval errors. I'd better not feel possessive about
the ideas...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 12:43:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 12:43:26 +0100 (BST)
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>

On 20 Jun 2002, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> > I'd like to have this to be used in, e.g.,
> > demo() and example().
> >
> > Currently, source() parse()s the entire file and then evaluates
> > expression by expression. ``Of course'',  parse() already loses
> > the comments.
> >
> > An (much slower) alternative might be to the readLine() the
> > file, echo what we read,
> > and try to parse() ``the current chunk''.
> > when parse() fails (when the current expression is incomplete),
> > we silently read the next line, etc, until the expression is complete and hence
> > parse() succeeds, then we eval() and print().
> >
> > What do people think?
> >
> > Would there be volunteers to write this?
> > [I think it should finalize as an optional argument to source(),
> >  but for experimentation it might be easier to try with a
> >  function  sourceLinewise(.)
> > ].
>
> Historically, this is what source() should have done all the time if
> it were to be in keeping with other Unix programs (shift input from
> stdin temporarily). The source() that we have is really "evaluate
> file". I don't think we can source() an infinite stream like a pipe or
> a socket, can we?
>
> Actually, I think it can be done with a little careful file descriptor
> switching. (Turn of readline processing, etc., switch stdin to file,
> run till eof or error, switch back and reestablish readline.) We'd

Rather, connection-switching.  The Green book describes sink() as being
capable of switching the input connection, but it isn't like that
in any version of S-PLUS I have ever seen.  I haven't thought through the
ramifications.


> still have the reparse-on-incomplete thing, since that also happens on
> stdin -- something I suspect isn't necessary, but it takes a fairly
> hard look at the grammar itself to find out.
>
> (This kind of stuff has long been on my might-do list of projects,
> along with (re)fixing the comment issue and providing better
> information on parse/eval errors. I'd better not feel possessive about
> the ideas...)
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jun 20 12:58:05 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 20 Jun 2002 07:58:05 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Thu, Jun 20, 2002 at 12:43:26PM +0100
References: <x2660eryar.fsf@biostat.ku.dk> <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>
Message-ID: <20020620075805.B18932@jessie.research.bell-labs.com>

ripley@stats.ox.ac.uk wrote:
> On 20 Jun 2002, Peter Dalgaard BSA wrote:
> 
> > Martin Maechler <maechler@stat.math.ethz.ch> writes:
> >
> > > I'd like to have this to be used in, e.g.,
> > > demo() and example().
> > >
> > > Currently, source() parse()s the entire file and then evaluates
> > > expression by expression. ``Of course'',  parse() already loses
> > > the comments.
> > >
> > > An (much slower) alternative might be to the readLine() the
> > > file, echo what we read,
> > > and try to parse() ``the current chunk''.
> > > when parse() fails (when the current expression is incomplete),
> > > we silently read the next line, etc, until the expression is complete and hence
> > > parse() succeeds, then we eval() and print().
> > >
> > > What do people think?
> > >
> > > Would there be volunteers to write this?
> > > [I think it should finalize as an optional argument to source(),
> > >  but for experimentation it might be easier to try with a
> > >  function  sourceLinewise(.)
> > > ].
> >
> > Historically, this is what source() should have done all the time if
> > it were to be in keeping with other Unix programs (shift input from
> > stdin temporarily). The source() that we have is really "evaluate
> > file". I don't think we can source() an infinite stream like a pipe or
> > a socket, can we?
> >
> > Actually, I think it can be done with a little careful file descriptor
> > switching. (Turn of readline processing, etc., switch stdin to file,
> > run till eof or error, switch back and reestablish readline.) We'd
> 
> Rather, connection-switching.  The Green book describes sink() as being
> capable of switching the input connection, but it isn't like that
> in any version of S-PLUS I have ever seen.  I haven't thought through the
> ramifications.


And I'll make a further distinction (again based on S4 and hopefully
very soon to be R): specifically we should be able to switch `reader'
on a connection. In S4 one can associate an S function with a
connection so that when input becomes available on the connection's
file descriptor, the S function is invoked. This is a reader.

We can support this on Unix using the AddInputHandler, but we need to
add a method to the C level connection structure to get its file
descriptor.  Additionally, I'm in the middle of experimenting with
different event loops (e.g. those of Tcl/Tk and Gtk) and allowing them
to be run as the main R event loop. We get timers (monitors in S4) and
file descriptor notification for "free" in both of these.  I intend to
have an RFC for this and an implementation for sliding it into R next
week. (Anyone's welcome to the code now if they are interested.)

> 
> 
> > still have the reparse-on-incomplete thing, since that also happens on
> > stdin -- something I suspect isn't necessary, but it takes a fairly
> > hard look at the grammar itself to find out.
> >
> > (This kind of stuff has long been on my might-do list of projects,
> > along with (re)fixing the comment issue and providing better
> > information on parse/eval errors. I'd better not feel possessive about
> > the ideas...)
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 13:04:28 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 14:04:28 +0200
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87hejzdz33.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
Message-ID: <15633.50380.961465.204023@gargle.gargle.HOWL>


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    ....

hmm, are you serious ?
I mean it's not a very good reason to introduce an extra
argument, not S back-compatible, just because you had a local
hack with it?

I'm about to do the version withOUT the `print.levels'.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 13:05:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 14:05:00 +0200 (MET DST)
Subject: [R] cut with infinite values -> NA (PR#1694)
Message-ID: <200206201205.OAA11945@pubhealth.ku.dk>

You are correct in your expectations.  This is a bug: the C code does not
cover the cases +/-Inf (because it uses R_FINITE to exclude them).

I'll fix it in R-patched: filing with R-bugs for the record.

On 20 Jun 2002, Markus [ISO-8859-1] Jntti wrote:

> I am doing work on changes in establishment sizes and came across
> behavior that is quite understandable and easily worked around but
> a little surprising. On R 1.5.1 on Debian unstable (see below for
> R.version output):
>
> > cut.off <- c(-Inf, 0, Inf)
> > x <- c(-Inf, -10, 0, 10, Inf)
> > is.numeric(x)
> [1] TRUE
> > is.double(x)
> [1] TRUE
> > # but
> > cut(x, cut.off, include.lowest=T)
> [1] <NA>     [-Inf,0] [-Inf,0] (0,Inf]  <NA>
>
> The reason I am surprised is that standard logical operations on
> Inf generate expected results and storage.mode(Inf) is double and
> so on, so I was expecteing -Inf to belong to the lowest factor level and
> Inf to belong the highest.
>
> [For what it is worth, I am classifying establishments by their growth
> across years and one that in t1 has 0 workers and >0 in the next
> has infinite growth. This is easily worked around, but I am
> a little curious.]
>
> Regards,
>
> Markus
> code:
>
>  cut.off <- c(-Inf, 0, Inf)
> x <- c(-Inf, -10, 0, 10, Inf)
> is.numeric(x)
> is.double(x)
> # but
> cut(x, cut.off, include.lowest=T)
>
> > R.version
>          _
> platform i386-pc-linux-gnu
> arch     i386
> os       linux-gnu
> system   i386, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> --
> Markus Jantti
> Statistics Finland and University of Tampere
> markus.jantti@iki.fi
> http://www.iki.fi/~mjantti
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Jun 20 13:16:31 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 20 Jun 2002 08:16:31 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
References: <15633.43725.738497.292166@gargle.gargle.HOWL> <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <gbh3huoam6f5g5kir9jt73a72q6t9fru61@4ax.com>

On 20 Jun 2002 13:21:00 +0200, you wrote:
>
>(This kind of stuff has long been on my might-do list of projects,
>along with (re)fixing the comment issue and providing better
>information on parse/eval errors. I'd better not feel possessive about
>the ideas...)

If this were done, it would be nice to do it in a way that would allow
better debugging hooks sometime in the future.  Specifically:

 - the error mechanism should know the filename and line number that
was being parsed when the error occurred, and should report them.

 - as functions are being defined the filename and line numbers
corresponding to (the start of) each statement should be saveable, so
a debugger could work on the source file, instead of on the deparsed
version.

 - it should be possible to set a (conditional?) breakpoint on a line
number in a file.

I'm not saying that we should hold off on getting source() right until
we can do all of the above, just that if possible those things should
be kept in mind as source is being fixed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jun 20 15:11:48 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Jun 2002 07:11:48 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15633.50380.961465.204023@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
 <15633.50380.961465.204023@gargle.gargle.HOWL>
Message-ID: <87znxqxcnv.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    martin>     ....

    martin> hmm, are you serious ?

Actually, I am, since I'll keep it as my local version :-).  Note that
this is backwards compatible to a historic point (my April email :-).

    martin> I mean it's not a very good reason to introduce an extra
    martin> argument, not S back-compatible, just because you had a local
    martin> hack with it?

I think that's sensible (for others and R :-).

    martin> I'm about to do the version withOUT the `print.levels'.

And that is fine.  Something needs to be fixed with respect to the
abbreviate.arg; I think that there is a better way.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Thu Jun 20 17:08:47 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 20 Jun 2002 10:08:47 -0600
Subject: new version of print.factor
In-Reply-To: <874rfzdpz7.fsf@jeeves.blindglobe.net>
Message-ID: <5.1.0.14.2.20020620095015.00aab050@mailhost.blackmesacapital.com>

Here's what S-plus 6.0 does with abbreviate.arg:

# S-plus 6.0
 > print(factor(c("fooooooo","baaaaaar")))
[1] fooooooo baaaaaar
 > print(factor(c("fooooooo","baaaaaar")), quote=T)
[1] "fooooooo" "baaaaaar"
Levels:
[1] "baaaaaar" "fooooooo"
 > print(factor(c("fooooooo","baaaaaar")),abbreviate.arg=T, quote=T)
fooooooo baaaaaar
"fooo" "baar"
Levels:
[1] "baar" "fooo"

(The function below does not abbreviate vector contents when given 
abbreviate.arg==TRUE, which may be more or less suitable depending on the 
task at hand.  Also, S-plus doesn't print levels unless quote==TRUE or "If 
some of the levels in a factor object are not in represented in the 
object", but this difference was already present in the R.1.5.0 version of 
print.factor.)

-- Tony Plate

At 12:32 PM 6/19/2002 -0700, A.J. Rossini wrote:

>Thanks to Tony Plate for letting me know what the abbreviate.arg
>option does.  I think this could be made more flexible (I.e.
>  =TRUE, =FALSE, =#, where # would be passed to the abbreviate
>min.length argument).  But it follows the example I was given.
>
>"print.factor" <-
>   function (x, quote = FALSE, max.levels=5, print.levels = {if
>(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
>{
>   if (length(x) <= 0)
>     cat("factor(0)\n")
>   else print(as.character(x), quote = quote, ...)
>   if (print.levels) {
>     if (abbreviate.arg) {
>       cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
>                             collapse = " "), "\n")
>     } else {
>       cat("Levels: ", paste(levels(x)[1:max.levels],
>                             collapse = " "), "\n")
>     }
>   }
>   invisible(x)
>}
>
>
>It definitely could be cleaned up a bit more.
>
>best,
>-tony
>
>--
>A.J. Rossini                            Rsrch. Asst. Prof. of Biostatistics
>U. of Washington Biostatistics          rossini@u.washington.edu
>FHCRC/SCHARP/HIV Vaccine Trials Net     rossini@scharp.org
>-------------- http://software.biostat.washington.edu/ ----------------
>FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
>UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
>(my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bcooper@hsph.harvard.edu  Thu Jun 20 17:59:36 2002
From: bcooper@hsph.harvard.edu (bcooper@hsph.harvard.edu)
Date: Thu, 20 Jun 2002 18:59:36 +0200 (MET DST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
Message-ID: <200206201659.SAA15080@pubhealth.ku.dk>

Full_Name: Ben Cooper
Version: 1.5.0
OS: linux
Submission from: (NULL) (134.174.187.90)


The help page for glm.nb (in MASS package) says that it takes "Any other
arguments for the glm() function except family"

One such argument is   start   "starting values for the parameters in the linear
predictor."

However, when called with starting values glm.nb returns:

   Error in model.frame(formula, rownames, variables, varnames, extras,
extranames,  : 
	  variable lengths differ

So it looks like this is either a bug, the documentation is inaccurate, or I'm
missing something (or some combination of the above).


An example:
________________________________________________________________


library(MASS)

y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)

lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)

lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)

lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)


># first a poisson model which is OK 
>glm(y~lag1+lag2+lag3,family=poisson(link=identity))
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #therefore try:
> glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))

# and this works. However, negative binomial model is not OK:

> glm.nb(y~lag1+lag2+lag3,link=identity)
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #so try
> glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
 : 
	variable lengths differ

________________________________________________________________



I can get glm.nb to work with starting values with the following hack to the
glm.nb code:

i)

change the line
 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <- m$... <- NULL

 to 

 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <-m$start <- m$... <- NULL


[i.e. insert m$start]

ii) 

remove the line:

start <- model.extract(m, start)


iii)

change the line

fit <- glm.fitter(x = X, y = Y, w = w, etastart = start, 
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

to
   fit <- glm.fitter(x = X, y = Y, w = w, start=start,
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

iv) change default value of start to NULL (as in glm) rather than eta when
glm.nb is called.

newglm.nb with these changes then works.

But no doubt there  are reasons for things being the way they are and these
changes screw other things up.

$platform
[1] "i686-pc-linux-gnu"
$arch
[1] "i686"
$os
[1] "linux-gnu"
$system
[1] "i686, linux-gnu"
$status
[1] ""
$major
[1] "1"
$minor
[1] "5.0"
$year
[1] "2002"
$month
[1] "04"
$day
[1] "29"
$language
[1] "R"

I also tried this with version 1.4.1 under Windows and had the same probelm.

cheers

Ben




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 18:33:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 18:33:42 +0100 (BST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
In-Reply-To: <200206201659.SAA15080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201827030.26128-100000@gannet.stats>

It's an R/S incompatibility issue. `start' should be interpreted in S's
sense, which is R's etastart.

Why R chose to be gratuitously incompatible has always puzzled me.

Remember MASS was written for S (actually before R), and not every
statement has been checked for R/S discrepancies.

On Thu, 20 Jun 2002 bcooper@hsph.harvard.edu wrote:

> Full_Name: Ben Cooper
> Version: 1.5.0
> OS: linux
> Submission from: (NULL) (134.174.187.90)
>
>
> The help page for glm.nb (in MASS package) says that it takes "Any other
> arguments for the glm() function except family"
>
> One such argument is   start   "starting values for the parameters in the linear
> predictor."
>
> However, when called with starting values glm.nb returns:
>
>    Error in model.frame(formula, rownames, variables, varnames, extras,
> extranames,  :
> 	  variable lengths differ
>
> So it looks like this is either a bug, the documentation is inaccurate, or I'm
> missing something (or some combination of the above).
>
>
> An example:
> ________________________________________________________________
>
>
> library(MASS)
>
> y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)
>
> lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)
>
> lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)
>
> lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)
>
>
> ># first a poisson model which is OK
> >glm(y~lag1+lag2+lag3,family=poisson(link=identity))
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #therefore try:
> > glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))
>
> # and this works. However, negative binomial model is not OK:
>
> > glm.nb(y~lag1+lag2+lag3,link=identity)
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #so try
> > glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
> Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
>  :
> 	variable lengths differ
>
> ________________________________________________________________
>
>
>
> I can get glm.nb to work with starting values with the following hack to the
> glm.nb code:
>
> i)
>
> change the line
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <- m$... <- NULL
>
>  to
>
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <-m$start <- m$... <- NULL
>
>
> [i.e. insert m$start]
>
> ii)
>
> remove the line:
>
> start <- model.extract(m, start)
>
>
> iii)
>
> change the line
>
> fit <- glm.fitter(x = X, y = Y, w = w, etastart = start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> to
>    fit <- glm.fitter(x = X, y = Y, w = w, start=start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> iv) change default value of start to NULL (as in glm) rather than eta when
> glm.nb is called.
>
> newglm.nb with these changes then works.
>
> But no doubt there  are reasons for things being the way they are and these
> changes screw other things up.
>
> $platform
> [1] "i686-pc-linux-gnu"
> $arch
> [1] "i686"
> $os
> [1] "linux-gnu"
> $system
> [1] "i686, linux-gnu"
> $status
> [1] ""
> $major
> [1] "1"
> $minor
> [1] "5.0"
> $year
> [1] "2002"
> $month
> [1] "04"
> $day
> [1] "29"
> $language
> [1] "R"
>
> I also tried this with version 1.4.1 under Windows and had the same probelm.
>
> cheers
>
> Ben
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Thu Jun 20 19:07:51 2002
From: accot@free.fr (accot@free.fr)
Date: Thu, 20 Jun 2002 20:07:51 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201807.UAA15266@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------010901020707080002040305
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Prof Brian D Ripley wrote:
> Not a bug: check the documentation of file(), which is documented to work
> for files but not for devices.  No attempt is made to cope with e.g.
> blocking on non-files.
> 
> It's a pretty extreme view of the world to consider /dev/psaux to be a
> file, and R is just using standard C <stdio.h> I/O.
> 
> However, this is a great opportunity for you to contribute a device()
> function to R.

I finally checked the code and "wrote" the functions to "handle devices".
Well, in fact I more or less duplicated the code for FIFOs, removed the
option for encoding, added an option for synchronous I/O, and added a
test to check that the file is indeed a character or block special file.
This works great for me but I'm afraid it is a bit simple and does not
cover much of device handling in general.  Especially I don't know if
anybody would want to use it for block devices, and what they would need.
The psaux device is one of the simplest device one could think of, that's
why it works so well.  For other devices one would need at least an
ioctl function, which I didn't write.  But still I have no idea whether
anybody would use it and what for.  Anyway.  Please let me know if you
think this is useful.  If yes, I will try to familiarize myself with
the structure of the R code and make the device handling more general.

Thanks,
Johnny

--------------010901020707080002040305
Content-Type: text/plain;
 name="R-1.5.1-device.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="R-1.5.1-device.patch"

diff -ur R-1.5.1.orig/configure R-1.5.1/configure
--- R-1.5.1.orig/configure	2002-06-17 04:20:30.000000000 -0700
+++ R-1.5.1/configure	2002-06-19 19:33:22.000000000 -0700
@@ -17238,8 +17238,9 @@
 
 
 
+
 for ac_func in access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
diff -ur R-1.5.1.orig/configure.ac R-1.5.1/configure.ac
--- R-1.5.1.orig/configure.ac	2002-04-30 11:04:05.000000000 -0700
+++ R-1.5.1/configure.ac	2002-06-19 19:25:04.000000000 -0700
@@ -982,7 +982,7 @@
 
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv)
 ## <NOTE>
 ## No need checking for bcopy bzero memcpy mempcpy even though ifnames
diff -ur R-1.5.1.orig/src/include/config.h.in R-1.5.1/src/include/config.h.in
--- R-1.5.1.orig/src/include/config.h.in	2002-04-24 02:54:05.000000000 -0700
+++ R-1.5.1/src/include/config.h.in	2002-06-19 19:35:10.000000000 -0700
@@ -216,6 +216,9 @@
 /* Define to 1 if you have the `mkfifo' function. */
 #undef HAVE_MKFIFO
 
+/* Define to 1 if you have the `mknod' function. */
+#undef HAVE_MKNOD
+
 /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
 #undef HAVE_NDIR_H
 
diff -ur R-1.5.1.orig/src/include/Internal.h R-1.5.1/src/include/Internal.h
--- R-1.5.1.orig/src/include/Internal.h	2002-04-03 22:51:04.000000000 -0800
+++ R-1.5.1/src/include/Internal.h	2002-06-19 19:25:06.000000000 -0700
@@ -439,6 +439,7 @@
 SEXP do_isseekable(SEXP, SEXP, SEXP, SEXP);
 SEXP do_close(SEXP, SEXP, SEXP, SEXP);
 SEXP do_fifo(SEXP, SEXP, SEXP, SEXP);
+SEXP do_device(SEXP, SEXP, SEXP, SEXP);
 SEXP do_pipe(SEXP, SEXP, SEXP, SEXP);
 SEXP do_url(SEXP, SEXP, SEXP, SEXP);
 SEXP do_gzfile(SEXP, SEXP, SEXP, SEXP);
diff -ur R-1.5.1.orig/src/include/Rconnections.h R-1.5.1/src/include/Rconnections.h
--- R-1.5.1.orig/src/include/Rconnections.h	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/include/Rconnections.h	2002-06-19 20:09:26.000000000 -0700
@@ -28,7 +28,7 @@
     char* class;
     char* description;
     char mode[5];
-    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking;
+    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking, sync;
     Rboolean (*open)(struct Rconn *);
     void (*close)(struct Rconn *); /* routine closing after auto open */
     void (*destroy)(struct Rconn *); /* when closing connection */
@@ -58,6 +58,10 @@
     int fd;
 } *Rfifoconn;
 
+typedef struct deviceconn {
+    int fd;
+} *Rdeviceconn;
+
 typedef struct gzfileconn {
     void *fp;
     int cp;
diff -ur R-1.5.1.orig/src/library/base/man/connections.Rd R-1.5.1/src/library/base/man/connections.Rd
--- R-1.5.1.orig/src/library/base/man/connections.Rd	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/library/base/man/connections.Rd	2002-06-20 10:48:13.000000000 -0700
@@ -4,6 +4,7 @@
 \alias{file}
 \alias{pipe}
 \alias{fifo}
+\alias{device}
 \alias{gzfile}
 \alias{unz}
 \alias{bzfile}
@@ -31,6 +32,7 @@
 pipe(description, open = "", encoding = getOption("encoding"))
 fifo(description = "", open = "", blocking = FALSE,
      encoding = getOption("encoding"))
+device(description = "", open = "", blocking = TRUE, sync = TRUE)
 gzfile(description, open = "", encoding = getOption("encoding"),
        compression = 6)
 unz(description, filename, open = "", encoding = getOption("encoding"))
@@ -62,6 +64,7 @@
   \item{open}{character.  A description of how to open the connection
     (if at all). See Details for possible values.}
   \item{blocking}{logical.  See `Blocking' section below.}
+  \item{sync}{logical.  Should the device be opened for synchronous I/O?}
   \item{encoding}{An integer vector of length 256.}
   \item{compression}{integer in 0--9.  The amount of compression to be
     applied when writing, from none to maximal.  The default is a good
@@ -74,7 +77,7 @@
   \item{\dots}{arguments passed to or from other methods.}
 }
 \details{
-  The first eight functions create connections.  By default the
+  The first nine functions create connections.  By default the
   connection is not opened (except for \code{socketConnection}), but may
   be opened by setting a non-empty value of argument \code{open}.
 
@@ -135,8 +138,8 @@
   characters are mapped to a space in these encodings.
 }
 \value{
-  \code{file}, \code{pipe}, \code{fifo}, \code{url}, \code{gzfile} and
-  \code{socketConnection} return a connection object
+  \code{file}, \code{pipe}, \code{fifo}, \code{device}, \code{url},
+  \code{gzfile} and \code{socketConnection} return a connection object
   which inherits from class \code{"connection"} and has a first more
   specific class.
 
diff -ur R-1.5.1.orig/src/main/connections.c R-1.5.1/src/main/connections.c
--- R-1.5.1.orig/src/main/connections.c	2002-04-30 04:04:02.000000000 -0700
+++ R-1.5.1/src/main/connections.c	2002-06-19 20:12:34.000000000 -0700
@@ -640,6 +640,181 @@
 #endif
 }
 
+/* ------------------- device connections --------------------- */
+
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+
+#ifdef HAVE_STAT
+# ifndef Macintosh
+#  ifdef HAVE_SYS_TYPES_H
+#   include <sys/types.h>
+#  endif
+#  ifdef HAVE_SYS_STAT_H
+#   include <sys/stat.h>
+#  endif
+# else /* Macintosh */
+#  include <types.h>
+#  ifndef __MRC__
+#   include <stat.h>
+#  else
+#   include <mpw_stat.h>
+#  endif
+# endif /* Macintosh */
+#endif /* HAVE_STAT */
+
+#ifdef HAVE_ERRNO_H
+# include <errno.h>
+#endif
+
+static Rboolean device_open(Rconnection con)
+{
+    char *name;
+    Rdeviceconn this = con->private;
+    int fd, flags, res;
+    int mlen = strlen(con->mode);
+    struct stat sb;
+
+    name = R_ExpandFileName(con->description);
+    con->canwrite = (con->mode[0] == 'w' || con->mode[0] == 'a');
+    con->canread = !con->canwrite;
+    if(mlen >= 2 && con->mode[1] == '+') con->canread = TRUE;
+
+    /* check if the device exists and if it is a character or block device */
+    if(con->canwrite) {
+	res = stat(name, &sb);
+	if(res) { /* error, does not exist? */
+	    if(errno == ENOENT) warning("device `%s' does not exist", name);
+	    else warning("cannot find device `%s'", name);
+	    return FALSE;
+	} else {
+	    if(!(sb.st_mode & S_IFCHR) && !(sb.st_mode & S_IFBLK)) {
+		warning("`%s' exists but is neither a character special file nor a block special file", name);
+		return FALSE;
+	    }
+	}
+    }
+
+    if(con->canread && con->canwrite) flags = O_RDWR;
+    else if(con->canread) flags = O_RDONLY;
+    else flags = O_WRONLY;
+    if(!con->blocking) flags |= O_NONBLOCK;
+    if(con->sync) flags |= O_SYNC;
+    if(con->mode[0] == 'a') flags |= O_APPEND;
+    fd = open(name, flags);
+    if(fd < 0) {
+	if(errno == ENXIO) warning("device `%s' is not ready", name);
+	else warning("cannot open device `%s'", name);
+	return FALSE;
+    }
+    
+    this->fd = fd;
+    con->isopen = TRUE;
+
+    if(mlen >= 2 && con->mode[mlen-1] == 'b') con->text = FALSE;
+    else con->text = TRUE;
+    con->save = -1000;
+    return TRUE;
+}
+
+static int device_fgetc(Rconnection con)
+{
+    Rdeviceconn this = (Rdeviceconn)con->private;
+    unsigned char c;
+    int n;
+  
+    n = read(this->fd, (char *)&c, 1);
+    return (n == 1) ? c : R_EOF;
+}
+
+static Rconnection newdevice(char *description, char *mode)
+{
+    Rconnection new;
+    new = (Rconnection) malloc(sizeof(struct Rconn));
+    if(!new) error("allocation of device connection failed");
+    new->class = (char *) malloc(strlen("device") + 1);
+    if(!new->class) {
+	free(new);
+	error("allocation of device connection failed");
+    }
+    strcpy(new->class, "device");
+    new->description = (char *) malloc(strlen(description) + 1);
+    if(!new->description) {
+	free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    init_con(new, description, mode);
+    new->open = &device_open;
+    new->close = &fifo_close;
+    new->vfprintf = &dummy_vfprintf;
+    new->fgetc = &device_fgetc;
+    new->seek = &null_seek;
+    new->truncate = &null_truncate;
+    new->fflush = &null_fflush;
+    new->read = &fifo_read;
+    new->write = &fifo_write;
+    new->private = (void *) malloc(sizeof(struct deviceconn));
+    if(!new->private) {
+	free(new->description); free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    return new;
+}
+#endif
+
+SEXP do_device(SEXP call, SEXP op, SEXP args, SEXP env)
+{
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+    SEXP sfile, sopen, ans, class;
+    char *file, *open;
+    int i, ncon, block, sync;
+    Rconnection con = NULL;
+
+    checkArity(op, args);
+    sfile = CAR(args);
+    if(!isString(sfile) || length(sfile) < 1)
+	errorcall(call, "invalid `description' argument");
+    if(length(sfile) > 1)
+	warning("only first element of `description' argument used");
+    file = CHAR(STRING_ELT(sfile, 0));
+    sopen = CADR(args);
+    if(!isString(sopen) || length(sopen) != 1)
+	error("invalid `open' argument");
+    block = asLogical(CADDR(args));
+    if(block == NA_LOGICAL)
+	error("invalid `block' argument");
+    sync = asLogical(CADDDR(args));
+    if(sync == NA_LOGICAL)
+	error("invalid `sync' argument");
+    open = CHAR(STRING_ELT(sopen, 0));
+    ncon = NextConnection();
+    con = Connections[ncon] = newdevice(file, strlen(open) ? open : "r");
+    con->blocking = block;
+    con->sync = sync;
+
+    /* open it if desired */
+    if(strlen(open)) {
+	Rboolean success = con->open(con);
+	if(!success) {
+	    con_close(ncon);
+	    error("unable to open connection");
+	}
+    }
+
+    PROTECT(ans = allocVector(INTSXP, 1));
+    INTEGER(ans)[0] = ncon;
+    PROTECT(class = allocVector(STRSXP, 2));
+    SET_STRING_ELT(class, 0, mkChar("device"));
+    SET_STRING_ELT(class, 1, mkChar("connection"));
+    classgets(ans, class);
+    UNPROTECT(2);
+
+    return ans;
+#else
+    error("device connections are not available on this system");
+    return R_NilValue;		/* -Wall */
+#endif
+}
+
 /* ------------------- pipe connections --------------------- */
 
 #ifdef HAVE_POPEN
diff -ur R-1.5.1.orig/src/main/names.c R-1.5.1/src/main/names.c
--- R-1.5.1.orig/src/main/names.c	2002-04-04 14:11:31.000000000 -0800
+++ R-1.5.1/src/main/names.c	2002-06-20 10:38:39.000000000 -0700
@@ -692,9 +692,6 @@
 {"dev.control",	do_devcontrol,	0,	111,	0,	PP_FUNCALL},
 {"dev.copy",	do_devcopy,	0,	111,	1,	PP_FUNCALL},
 {"dev.cur",	do_devcur,	0,	111,	0,	PP_FUNCALL},
-/*
-{"device",	do_device,	0,	111,	3,	PP_FUNCALL},
-*/
 {"dev.next",	do_devnext,	0,	111,	1,	PP_FUNCALL},
 {"dev.off",	do_devoff,	0,	111,	1,	PP_FUNCALL},
 {"dev.prev",	do_devprev,	0,	111,	1,	PP_FUNCALL},
@@ -793,6 +790,7 @@
 {"url", 	do_url,		0,      11,     4,      PP_FUNCALL},
 {"pipe", 	do_pipe,	0,      11,     3,      PP_FUNCALL},
 {"fifo", 	do_fifo,	0,      11,     4,      PP_FUNCALL},
+{"device", 	do_device,	0,      11,     4,      PP_FUNCALL},
 {"gzfile", 	do_gzfile,	0,      11,     4,      PP_FUNCALL},
 {"unz", 	do_unz,		0,      11,     3,      PP_FUNCALL},
 {"bzfile", 	do_bzfile,	0,      11,     3,      PP_FUNCALL},

--------------010901020707080002040305--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 19:44:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 20:44:04 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201844.UAA15381@pubhealth.ku.dk>

On Thu, 20 Jun 2002, Johnny Accot wrote:

> Hello,
>
> Prof Brian D Ripley wrote:
> > Not a bug: check the documentation of file(), which is documented to work
> > for files but not for devices.  No attempt is made to cope with e.g.
> > blocking on non-files.
> >
> > It's a pretty extreme view of the world to consider /dev/psaux to be a
> > file, and R is just using standard C <stdio.h> I/O.
> >
> > However, this is a great opportunity for you to contribute a device()
> > function to R.
>
> I finally checked the code and "wrote" the functions to "handle devices".
> Well, in fact I more or less duplicated the code for FIFOs, removed the
> option for encoding, added an option for synchronous I/O, and added a
> test to check that the file is indeed a character or block special file.
> This works great for me but I'm afraid it is a bit simple and does not
> cover much of device handling in general.  Especially I don't know if
> anybody would want to use it for block devices, and what they would need.
> The psaux device is one of the simplest device one could think of, that's
> why it works so well.  For other devices one would need at least an
> ioctl function, which I didn't write.  But still I have no idea whether
> anybody would use it and what for.  Anyway.  Please let me know if you
> think this is useful.  If yes, I will try to familiarize myself with
> the structure of the R code and make the device handling more general.

Yes, I do think it would be useful, but I know little about it,
Thank you for the offer.

>
> Thanks,
> Johnny
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Jun 20 20:16:55 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 20 Jun 2002 21:16:55 +0200 (MET DST)
Subject: documentation fix for hclust.Rd (PR#1696)
Message-ID: <200206201916.VAA15452@pubhealth.ku.dk>


R-1.5.1/src/library/mva/man/hclust.Rd, line 92:

 The \code{plclust()} function is basically the same * the plot method,

I think the word "as" should be inserted at *

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 20 21:28:30 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 20 Jun 2002 22:28:30 +0200 (MET DST)
Subject: Bug in printing symbolic derivative (PR#1697)
Message-ID: <200206202028.WAA15677@pubhealth.ku.dk>

A colleague pointed out the following error in D():

 f  <- expression(exp(-2*x*y))
 Dx <- D(f, 'x')
 Dy <- D(f,'y')
 Dxy <- D(Dx, 'y')
 Dyx <- D(Dy, 'x')

Then 

>  Dx    # this is right
-exp(-2 * x * y) * (2 * y)
>  Dy    # this is right
exp(-2 * x * y) * (-2 * x)
>  Dxy   # this is wrong in the sign of the second term!!!
-exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2
>  Dyx   # this is also wrong in the sign of the second term!!!
-exp(-2 * x * y) * 2 + exp(-2 * x * y) * (2 * y) * (-2 * x)

In both cases, the answer would be correct if the initial sign were
applied to the whole expression; is this just a case of not printing
some parentheses?  Let's experiment...

> x <- 1
> y <- 2
> eval(Dxy)
[1] 0.1098938  # this is right
> eval(Dyx)
[1] 0.1098938  # this is right
> -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
[1] 0.1831564  # this is wrong!!
> -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
[1] 0.1098938  # this is right

Looks like that's it...

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From petr.savicky@ff.cuni.cz  Thu Jun 20 21:35:04 2002
From: petr.savicky@ff.cuni.cz (petr.savicky@ff.cuni.cz)
Date: Thu, 20 Jun 2002 22:35:04 +0200 (MET DST)
Subject: tree construction crashes (PR#1698)
Message-ID: <200206202035.WAA15713@pubhealth.ku.dk>

Full_Name: Petr Savicky
Version: 1.5.0
OS: SuSE 7.2
Submission from: (NULL) (147.231.6.1)


The function tree() from the tree package crashes for certain input data.
All the information needed to reproduce the error (data, script, expected
error message) may be found at
http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz

Exactly the same error appeared at another computer running some RedHat
and R-1.4.1.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 21:52:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 22:52:41 +0200
Subject: Bug in printing symbolic derivative (PR#1697)
In-Reply-To: <200206202028.WAA15677@pubhealth.ku.dk>
References: <200206202028.WAA15677@pubhealth.ku.dk>
Message-ID: <x2k7ot4qqu.fsf@biostat.ku.dk>

murdoch@stats.uwo.ca writes:


> > eval(Dxy)
> [1] 0.1098938  # this is right
> > eval(Dyx)
> [1] 0.1098938  # this is right
> > -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
> [1] 0.1831564  # this is wrong!!
> > -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
> [1] 0.1098938  # this is right
> 
> Looks like that's it...

Yep. This is another long-standing item on the parse/deparse TODO
list. A more minimalistic version is

> "*"(5,2+3)
[1] 25
> quote("*"(5,2+3))
5 * 2 + 3
> eval(quote("*"(5,2+3)))
[1] 25

There are really two issues: we don't strip parentheses when parsing
and we don't insert them where needed on deparsing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206210515.g5L5F3i19356@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1673 *
Subject: Late Make Problem with Readline
From: jerfox@stanford.edu
Date: Sat, 15 Jun 2002 12:00:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1682 *
Subject: overzealous help-links.sh script!
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 17 Jun 2002 15:10:18 +0200
* PR# 1693 *
Subject: levels() counter-intuitif?
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 19 Jun 2002 18:57:13 +0200
* PR# 1694 *
Subject: Re: [R] cut with infinite values -> NA
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 20 Jun 2002 13:04:08 +0100 (BST)
* PR# 1695 *
Subject: Possible bug with glm.nb and starting values 
From: bcooper@hsph.harvard.edu
Date: Thu, 20 Jun 2002 18:59:35 +0200 (MET DST)
* PR# 1696 *
Subject: documentation fix for hclust.Rd
From: Stephen Eglen <eglen@pcg.wustl.edu>
Date: Thu, 20 Jun 2002 14:16:28 -0500 (CDT)
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
* PR# 1698 *
Subject: tree construction crashes
From: petr.savicky@ff.cuni.cz
Date: Thu, 20 Jun 2002 22:35:03 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 08:57:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 08:57:33 +0100 (BST)
Subject: Behaviour of library() in R-devel
Message-ID: <Pine.LNX.4.31.0206210850490.12872-100000@gannet.stats>

In an attempt to help newbie confusion with (not) installing packages,
library() in R-devel will only load a package if

1) It contains a DESCRIPTION file and
2) That DESCRIPTION file contains a Built: line.

Because the standard packages have only had Built: lines for a few days,
2) is currently a warning.  If you see it on standard packages, do `make
clean; make' in R-devel.  (It should not be necessary, but Sun make failed
to rebuild the DESCRPTION files on one of my systems.)  Before the release
of 1.6.0 it will become an error (and is documented as such now).

2) will not apply to the Carbon MacOS port, which does not have an
automated INSTALL script (AFAIK).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Fri Jun 21 17:54:44 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Fri, 21 Jun 2002 18:54:44 +0200 (MET DST)
Subject: The title function does not always work properly when used to add a global title to a figure containing several plots.
Message-ID: <200206211654.SAA14292@luc.ac.be>

Hi everyone,
  The following problem occurs with R-1.5.1 on an Intel laptop running
RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
still currently have installed). The complete of these three different
platforms can be found at the end of my email.
  The problem is the following. I am trying to add a global title to a
figure which contains several plots. Although I am not convince the
method I am using (see below) is the best way to achieve this, I
noticed that it failed to add the title in certain cases but not in
others. I included below some examples where it works and where it
does not work for me. As the same behavior occurs on all three
platforms I have access to, I guess that everyone (perhaps not does on
MS-Windows or on a Mac) should be able to see the problem by running
my code (if this is not the case, please let me know and I shall
provide some postscript files illustrating the problem).
  Unfortunately, the c-code to print text to the graphic window is
very complex and I am not familiar with it. As I thought that the
problem was related with the "title" function, I started by looking at
the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
to call the subroutine "clipText" to print the text to the canvas (but
I could already be wrong about this...). But in any case, I was not
able to trace down the problem as each of these subroutines appears to
get entered as expected with parameters containing the expected values
but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
which I longer understand... On the other hand, I no longer think that
the problem is actually coming from the "title" function but rather
from a global variable (or perhaps a "par" option) that is not always
reset (or initialized) properly... by at least functions such as
"title" and plot.default with options "axis", "ylab", "xlab", or
"main" when the option "mfrow" is not set to "c(1,1)" in the "par"
options.
  I hope that this is understandable... but in any case, the following
examples should clarify things up.

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)",axes=F)
axis(1)
axis(2)
box()
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Strange... but can perhaps help in identifying the problem.
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")
title(main="This should be the title of this figure.",outer=TRUE)
title(main="This should be the title of this figure.")

  Please, let me know if I can be of any further help in tracing down
the problem.

Thanks,
Patrick

PS: Note that there is for the moment a work around which is the
following:

# Work-around
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)

-----------------------------------------------------------------

> R.version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                

> R.version  
         _                   
platform alphaev6-dec-osf4.0f
arch     alphaev6            
os       osf4.0f             
system   alphaev6, osf4.0f   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

> R.version
         _               
platform mips-sgi-irix6.5
arch     mips            
os       irix6.5         
system   mips, irix6.5   
status                   
major    1               
minor    5.0             
year     2002            
month    04              
day      29              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 18:18:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 18:18:38 +0100 (BST)
Subject: The title function does not always work properly when used to
 add a global title to a figure containing several plots.
In-Reply-To: <200206211654.SAA14292@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0206211809200.2626-100000@gannet.stats>

Try

par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
title(main="This should be the title of this figure.", outer=TRUE)

which is how it is intended that this be done.

All your examples work (as I expect from S) for me that way.

Basically, after par(mfrow=c(1,1),oma=c(0,0,0,0)) you have no outer
margin nor do you have a plot region set yet (and the next call which
does would clear the screen).  So your call to title() should probably
fail as in

> title(main="This should be the title of this figure.")
Error in title(main = "This should be the title of this figure.") :
        plot.new has not been called yet

It would be desirable if it either gave an error message or worked.

On Fri, 21 Jun 2002, Patrick Lindsey wrote:

> Hi everyone,
>   The following problem occurs with R-1.5.1 on an Intel laptop running
> RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
> SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
> only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
> still currently have installed). The complete of these three different
> platforms can be found at the end of my email.
>   The problem is the following. I am trying to add a global title to a
> figure which contains several plots. Although I am not convince the
> method I am using (see below) is the best way to achieve this, I
> noticed that it failed to add the title in certain cases but not in
> others. I included below some examples where it works and where it
> does not work for me. As the same behavior occurs on all three
> platforms I have access to, I guess that everyone (perhaps not does on
> MS-Windows or on a Mac) should be able to see the problem by running
> my code (if this is not the case, please let me know and I shall
> provide some postscript files illustrating the problem).
>   Unfortunately, the c-code to print text to the graphic window is
> very complex and I am not familiar with it. As I thought that the
> problem was related with the "title" function, I started by looking at
> the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
> to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
> to call the subroutine "clipText" to print the text to the canvas (but
> I could already be wrong about this...). But in any case, I was not
> able to trace down the problem as each of these subroutines appears to
> get entered as expected with parameters containing the expected values
> but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
> which I longer understand... On the other hand, I no longer think that
> the problem is actually coming from the "title" function but rather
> from a global variable (or perhaps a "par" option) that is not always
> reset (or initialized) properly... by at least functions such as
> "title" and plot.default with options "axis", "ylab", "xlab", or
> "main" when the option "mfrow" is not set to "c(1,1)" in the "par"
> options.
>   I hope that this is understandable... but in any case, the following
> examples should clarify things up.
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)",axes=F)
> axis(1)
> axis(2)
> box()
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Strange... but can perhaps help in identifying the problem.
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
> title(main="This should be the title of this figure.",outer=TRUE)
> title(main="This should be the title of this figure.")
>
>   Please, let me know if I can be of any further help in tracing down
> the problem.
>
> Thanks,
> Patrick
>
> PS: Note that there is for the moment a work around which is the
> following:
>
> # Work-around
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)
>
> -----------------------------------------------------------------
>
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> > R.version
>          _
> platform alphaev6-dec-osf4.0f
> arch     alphaev6
> os       osf4.0f
> system   alphaev6, osf4.0f
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > R.version
>          _
> platform mips-sgi-irix6.5
> arch     mips
> os       irix6.5
> system   mips, irix6.5
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 00:26:52 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 01:26:52 +0200
Subject: AdaBoost for R
Message-ID: <3D16593C.2010101@ti.com>

I'm going to implement AdaBoost algorithm in R. Just wanted to ensure
that there is no implementation of any boosting algorithm in R... don't 
want
to reinvent the wheel...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 24 07:45:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 24 Jun 2002 08:45:18 +0200
Subject: AdaBoost for R
In-Reply-To: <3D16593C.2010101@ti.com>
References: <3D16593C.2010101@ti.com>
Message-ID: <15638.49150.232455.920097@gargle.gargle.HOWL>

>>>>> "AlexS" == Sirotkin, Alexander <demiurg@ti.com> writes:

    AlexS> I'm going to implement AdaBoost algorithm in R. Just
    AlexS> wanted to ensure that there is no implementation of
    AlexS> any boosting algorithm in R... don't want to reinvent
    AlexS> the wheel...

you might be reinventing.
Marcel Dettling from here has written a  LogitBoost Package
which is linked to a paper -- all available from

      http://stat.ethz.ch/~dettling/boosting 

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 22:03:10 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 23:03:10 +0200
Subject: AdaBoost for R
References: <15638.60248.317098.313167@gargle.gargle.HOWL>
Message-ID: <3D17890E.7020303@ti.com>

Hi.

Thanks a lot.  LogitBoost is cool, but for my current problem
I need  a multiclass (not binary) algorithm. Is this what you call
 Descrete AdaBoost ?

Marcel Dettling wrote:

>Dear Alexander,
>
>AlexS> I'm going to implement AdaBoost algorithm in R. Just
>AlexS> wanted to ensure that there is no implementation of
>AlexS> any boosting algorithm in R... don't want to reinvent
>AlexS> the wheel...
>
>Besides my LogitBoost-Package, I could also provide R-Code for
>Discrete and Real AdaBoost.
>
>Cheers,
>
>Marcel
>
>_____________________________________________________________
>
>Marcel Dettling		       
>ETH Zrich
>Seminar fr Statistik
>LEO C 12.2
>8092 Zrich
>Phone:  ++41 1 632 53 19
>E-Mail: dettling@stat.math.ethz.ch
>Web:    http://stat.ethz.ch/~dettling/	
>_____________________________________________________________
>  
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 09:41:04 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 09:41:04 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
Message-ID: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>


Dear All, 

No-one seemed to know about this on r-help, so I'm trying here.... 

I'm having problems at the configure stage when trying to build R on
Solaris 5.8. configure finds everything it needs but when it runs
config.status to make all the Makefiles and headers, I get a huge slew of
errors like this:

config.status: creating src/extra/zlib/Makefile
sed: -e expression #1, char 329: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
config.status: creating src/include/Makefile
sed: -e expression #1, char 323: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command

...and so on. I have tried replacing Solaris's native sed with GNU sed (in
fact the above messages are from GNU sed but Solaris sed fails in a
similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
to force configure not to use solaris's cheesy /bin/sh . No success, so
now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
(and of course there is no problem on my Linux box!)

Any ideas welcome.

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 25 10:02:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Jun 2002 10:02:05 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>
Message-ID: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>

Probably none of us know about it, because it has worked for lots of us
out of the box. So it would seem to be specific to your environment.

BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
blame it, especially as ksh gets used on Solaris.  Those messages are from
config.status, which on one of my Solaris systems starts

#! /bin/ksh
# Generated by configure.
# Run this file to recreate the current configuration.
# Compiler output produced by configure, useful for debugging
# configure, is in config.log if it exists.

debug=false
SHELL=${CONFIG_SHELL-/bin/ksh}

Try actually using /bin/sh, which is guaranteed standard-conforming
(it is the standard).

On Tue, 25 Jun 2002, H C Pumphrey wrote:

>
> Dear All,
>
> No-one seemed to know about this on r-help, so I'm trying here....
>
> I'm having problems at the configure stage when trying to build R on
> Solaris 5.8. configure finds everything it needs but when it runs
> config.status to make all the Makefiles and headers, I get a huge slew of
> errors like this:
>
> config.status: creating src/extra/zlib/Makefile
> sed: -e expression #1, char 329: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
> config.status: creating src/include/Makefile
> sed: -e expression #1, char 323: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
>
> ...and so on. I have tried replacing Solaris's native sed with GNU sed (in
> fact the above messages are from GNU sed but Solaris sed fails in a
> similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
> to force configure not to use solaris's cheesy /bin/sh . No success, so
> now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
> (and of course there is no problem on my Linux box!)
>
> Any ideas welcome.
>
> Hugh
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 12:30:53 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 12:30:53 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10206251219540.13517-100000@humilis>

On Tue, 25 Jun 2002 ripley@stats.ox.ac.uk wrote:

> Probably none of us know about it, because it has worked for lots of us
> out of the box. So it would seem to be specific to your environment.

You were right -- and yes, it was _really_ stupid. I had a function in
.bashrc to set the window title to the CWD and it left some garbage in
config.status . I removed the offending function and R now seems to be
building normally. Odd that it hasn't broken a build before ..... 
 
> BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
> blame it, especially as ksh gets used on Solaris.  Those messages are from
> config.status, which on one of my Solaris systems starts [with refs to
> ksh]

.... but /bin/sh did At least one program (and I can't recall which)
wouldn't build on Solaris until I forced it to use bash instead of
/bin/sh. But that wasn't the problem here (even though configure had
chosen to use /bin/sh and not /bin/ksh).

Bah. Sorry to bother everyone and many thanks for the help.

Hugh




============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lauri.Mehtatalo@metla.fi  Wed Jun 26 11:06:28 2002
From: Lauri.Mehtatalo@metla.fi (Lauri.Mehtatalo@metla.fi)
Date: Wed, 26 Jun 2002 12:06:28 +0200 (MET DST)
Subject: Bug? (PR#1710)
Message-ID: <200206261006.MAA20618@pubhealth.ku.dk>

Hi,

I tried to do a multiple linear model from the example 
dataset Formaldehyde. However, the function lm() did not 
estimate the coefficient of the term carb^2. The same 
problem occurred with the (nlme)dataset Pixel with both 
function lme() and lm(). I am using the windows version of 
R 1.5.1

Lauri Mehtatalo

The Formaldehyde example:
> data(Formaldehyde)
> lm(optden~carb+carb^2,data=Formaldehyde)

Call:
lm(formula = optden ~ carb + carb^2, data = 
Formaldehyde)

Coefficients:
(Intercept)         carb  
   0.005086     0.876286  

The Pixel example:

> {pkg <- select.list(sort(.packages(all.available = TRUE)))
+ if(nchar(pkg)) library(pkg, character.only=TRUE)}
Loading required package: nls 
Loading required package: lattice 
> data(Pixel)
>coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
~day,Side=~1)))
     (Intercept)         day
1/L     1048.995  0.32564928
1/R     1043.659  0.32564928
10/L    1144.898 -0.63867455
10/R    1099.883 -0.63867455
2/L     1054.011  0.65786288
2/R     1048.726  0.65786288
3/L     1065.000  0.45552014
3/R     1075.759  0.45552014
4/L     1088.173  0.93300591
4/R     1088.854  0.93300591
5/L     1125.918 -0.91429707
5/R     1129.309 -0.91429707
6/L     1112.721 -0.72735611
6/R     1094.164 -0.72735611
7/L     1133.443 -1.69593549
7/R     1156.943 -1.69593549
8/L     1101.205  0.05435070
8/R     1087.689  0.05435070
9/L     1093.513  0.05987474
9/R     1071.482  0.05987474
> coef(lm(pixel~day+day^2,data=Pixel))
(Intercept)         day 
1076.820678    1.341873  
- - - - - - - - - - - - -
Lauri Mehttalo
Metsntutkimuslaitos
Joensuun tutkimuskeskus
PL 68 (Yliopistokatu 7)
80101 JOENSUU
lauri.mehtatalo@metla.fi
p. 013-251 4110
- - - - - - - - - - - - -

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 12:34:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 26 Jun 2002 12:34:21 +0100 (BST)
Subject: Bug? (PR#1710)
In-Reply-To: <200206261006.MAA20618@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206261229110.10422-100000@gannet.stats>

This is NOT A BUG.

If you want a squared term, you need to include I(carb^2).  See ?formula
or even `An Introduction to R'.

Please

1) Use an informative subject line, as only the subject appears in the
BUGS summary file.

2) Read the Bugs section in the FAQ, and only post to R-bugs if you
are absolutely sure you understand.

On Wed, 26 Jun 2002 Lauri.Mehtatalo@metla.fi wrote:

> Hi,
>
> I tried to do a multiple linear model from the example
> dataset Formaldehyde. However, the function lm() did not
> estimate the coefficient of the term carb^2. The same
> problem occurred with the (nlme)dataset Pixel with both
> function lme() and lm(). I am using the windows version of
> R 1.5.1
>
> Lauri Mehtatalo
>
> The Formaldehyde example:
> > data(Formaldehyde)
> > lm(optden~carb+carb^2,data=Formaldehyde)
>
> Call:
> lm(formula = optden ~ carb + carb^2, data =
> Formaldehyde)
>
> Coefficients:
> (Intercept)         carb
>    0.005086     0.876286
>
> The Pixel example:
>
> > {pkg <- select.list(sort(.packages(all.available = TRUE)))
> + if(nchar(pkg)) library(pkg, character.only=TRUE)}
> Loading required package: nls
> Loading required package: lattice
> > data(Pixel)
> >coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
> ~day,Side=~1)))
>      (Intercept)         day
> 1/L     1048.995  0.32564928
> 1/R     1043.659  0.32564928
> 10/L    1144.898 -0.63867455
> 10/R    1099.883 -0.63867455
> 2/L     1054.011  0.65786288
> 2/R     1048.726  0.65786288
> 3/L     1065.000  0.45552014
> 3/R     1075.759  0.45552014
> 4/L     1088.173  0.93300591
> 4/R     1088.854  0.93300591
> 5/L     1125.918 -0.91429707
> 5/R     1129.309 -0.91429707
> 6/L     1112.721 -0.72735611
> 6/R     1094.164 -0.72735611
> 7/L     1133.443 -1.69593549
> 7/R     1156.943 -1.69593549
> 8/L     1101.205  0.05435070
> 8/R     1087.689  0.05435070
> 9/L     1093.513  0.05987474
> 9/R     1071.482  0.05987474
> > coef(lm(pixel~day+day^2,data=Pixel))
> (Intercept)         day
> 1076.820678    1.341873
> - - - - - - - - - - - - -
> Lauri Mehttalo
> Metsntutkimuslaitos
> Joensuun tutkimuskeskus
> PL 68 (Yliopistokatu 7)
> 80101 JOENSUU
> lauri.mehtatalo@metla.fi
> p. 013-251 4110
> - - - - - - - - - - - - -
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 13:35:52 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jun 2002 13:35:52 +0100 (BST)
Subject: tree construction crashes (PR#1698)
In-Reply-To: <200206202035.WAA15713@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206261324340.13559-100000@auk.stats>

!) the construction does not `crash', it terminates with an error message,
and you could have used the standard R debugging tools to investigate. Your
incorrect report wasted my quite a lot of my time setting up a debugging
environment to catch a crash.

2) The problem is that you are asking for an exact fit to a large dataset,
and you have integer overflow on your 32-bit (I presume) machine.
What you are doing is not within the design specifcation of tree (nor
rpart). From the help page:

     To produce a tree that fits the data perfectly, set `mindev = 0'
     and `minsize = 2', if the limit on tree depth allows such a tree.

so this is even something discussed on the help page.

3) Reports on contributed packages should be sent or at least copied to
the maintainers, who do not in general have access to R-bugs nor read
R-devel.  In any case, it would be simple good manners.


On Thu, 20 Jun 2002 petr.savicky@ff.cuni.cz wrote:

> Full_Name: Petr Savicky
> Version: 1.5.0
> OS: SuSE 7.2
> Submission from: (NULL) (147.231.6.1)
>
>
> The function tree() from the tree package crashes for certain input data.
> All the information needed to reproduce the error (data, script, expected
> error message) may be found at
> http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz
>
> Exactly the same error appeared at another computer running some RedHat
> and R-1.4.1.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jun 27 08:53:12 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 27 Jun 2002 09:53:12 +0200 (MEST)
Subject: F90 in packages
Message-ID: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>


Hi, 

did anybody manage to compile F90 sources in an R-package? The major
problem is, at least in my opinion, that non of the "free" F90 -> F77
converters is working correctly, at least for the F90 sources
I need to compile. 

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 27 09:14:47 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Jun 2002 10:14:47 +0200
Subject: F90 in packages
In-Reply-To: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
References: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
Message-ID: <15642.51575.625436.892867@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> did anybody manage to compile F90 sources in an
    Torsten> R-package? The major problem is, at least in my
    Torsten> opinion, that non of the "free" F90 -> F77
    Torsten> converters is working correctly, at least for the
    Torsten> F90 sources I need to compile.

yes, exactly, and there's no mature GNU fortran 90 or even 95,
yet.  I've recently read about a "g95" {GNU Fortran 95} development
effort, but haven't taken the time to find out how far they are.

The f2c translator has been supporting some (minor) 
f90 extensions; you might investigate further there.

My consequence: 
   Encourage people using C (or C++ if it really makes sense),
   instead.  
But I know this is no real option for some in the
Numerical-Analysis Community, unfortunately.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socrates@mail.ru  Thu Jun 27 09:30:52 2002
From: socrates@mail.ru (socrates@mail.ru)
Date: Thu, 27 Jun 2002 10:30:52 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206270830.KAA29465@pubhealth.ku.dk>

Full_Name: Socrates Alikhanidi
Version: 1.5.1
OS: Windows 2000
Submission from: (NULL) (133.15.3.28)


During resizing of 'R Console' windows the fatal error of forbidden memory
access appears.
To reproduce that with a guaranty, resize windows by mouse with small steps.
Probably the faster computer is, the earlier that event appears. I have PIV 1.8
GHz.
Waiting time was near 1 second.

Thank you for great product.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 09:59:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 09:59:54 +0100 (BST)
Subject: GUI bug (PR#1711)
In-Reply-To: <200206270830.KAA29465@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>

Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
or an AthlonXP 1800.  If it were a common problem I am sure we would hear
about it often.

Why are you resizing the console at all?  You can set a suitable size in
the preferences.

On Thu, 27 Jun 2002 socrates@mail.ru wrote:

> Full_Name: Socrates Alikhanidi
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (133.15.3.28)
>
>
> During resizing of 'R Console' windows the fatal error of forbidden memory
> access appears.
> To reproduce that with a guaranty, resize windows by mouse with small steps.
> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
> GHz.
> Waiting time was near 1 second.
>
> Thank you for great product.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 14:21:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 14:21:42 +0100 (BST)
Subject: Testing for platform type
Message-ID: <Pine.LNX.4.31.0206271414520.22911-100000@gannet.stats>

The recommended way to test for a platform type is via .Platform$OS.type.
machine() has provided equivalent information, but will be deprecated in
1.6.0.

Using R.Version()$os == "Win32" does not work as the OS name is subject to
change, and is never `Win32' in R 1.5.x, where autoconf was used to make
the config.h file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 27 15:16:00 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 27 Jun 2002 16:16:00 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206271416.QAA04430@pubhealth.ku.dk>

I can reproduce it in Win98 on a fairly slow machine.  It looks to me
as though the routine that's handling the WM_SIZE messages is being
interrupted by the new resize requests, and eventually the stack
overflows.  It would be best to ignore such requests while one is
active.  I don't understand graphapp well enough to know where to fix
this.

Duncan Murdoch

On Thu, 27 Jun 2002 09:59:54 +0100 (BST), you wrote in message
<Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>:

>Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
>or an AthlonXP 1800.  If it were a common problem I am sure we would hear
>about it often.
>
>Why are you resizing the console at all?  You can set a suitable size in
>the preferences.
>
>On Thu, 27 Jun 2002 socrates@mail.ru wrote:
>
>> Full_Name: Socrates Alikhanidi
>> Version: 1.5.1
>> OS: Windows 2000
>> Submission from: (NULL) (133.15.3.28)
>>
>>
>> During resizing of 'R Console' windows the fatal error of forbidden memory
>> access appears.
>> To reproduce that with a guaranty, resize windows by mouse with small steps.
>> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
>> GHz.
>> Waiting time was near 1 second.
>>
>> Thank you for great product.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Jun 27 17:13:53 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 27 Jun 2002 18:13:53 +0200 (MET DST)
Subject: data.frame does not recycle consistently (PR#1713)
Message-ID: <200206271613.SAA05140@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)



Note that the examples below do work in S (S-Plus 2000).

It appears that data.frame does not recycle text strings.  Maybe has something
to do with coercion to factors???

> data.frame(x=1:2,y=1)
  x y
1 1 1
2 2 1

> data.frame(x=c("A","B"),y=T)
  x    y
1 A TRUE
2 B TRUE

> data.frame(x=c("A","B"),y="C")
Error in data.frame(x = c("A", "B"), y = "C") : 
        arguments imply differing number of rows: 2, 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 17:52:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 17:52:42 +0100 (BST)
Subject: data.frame does not recycle consistently (PR#1713)
In-Reply-To: <200206271613.SAA05140@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206271737430.23373-100000@gannet.stats>

On Thu, 27 Jun 2002 Kevin.Wright@pioneer.com wrote:

> Full_Name: Kevin Wright
> Version: 1.5.1
> OS: Windows 95
> Submission from: (NULL) (170.54.59.160)
>
>
>
> Note that the examples below do work in S (S-Plus 2000).
>
> It appears that data.frame does not recycle text strings.  Maybe has something
> to do with coercion to factors???

Yes, it is.  Not sure why that makes it inconsistent, though.
Vectors are recycled, other objects are not, and that is determined after
conversion to a column of a data frame.  We could fairly easily allow
factors and simple "AsIs" objects to be recycled.

BTW, S-PLUS 2000 is not S, and its data frame code is quite a lot
different from the original S code.  It also makes mistakes: compare

> data.frame(x=c("A","B"),y=I("C"))
> data.frame(x=c("A","B"),y=I(rep("C", 2)))


>
> > data.frame(x=1:2,y=1)
>   x y
> 1 1 1
> 2 2 1
>
> > data.frame(x=c("A","B"),y=T)
>   x    y
> 1 A TRUE
> 2 B TRUE
>
> > data.frame(x=c("A","B"),y="C")
> Error in data.frame(x = c("A", "B"), y = "C") :
>         arguments imply differing number of rows: 2, 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bruno.White@ubs-oconnor.com  Thu Jun 27 21:17:14 2002
From: Bruno.White@ubs-oconnor.com (Bruno.White@ubs-oconnor.com)
Date: Thu, 27 Jun 2002 16:17:14 -0400
Subject: 1.5.1 docs on handling errors when embedding R ?
Message-ID: <50982B69B3D6E44F854E5B040B882073064C6C@NSTMC005PEX1.ubsgs.ubsgroup.net>

Hello all,

I have a system in which I embed R, currently it
is running using 1.3.1 release, and I would like to
upgrade to 1.5.1. 

I need to trap and report any errors during evaluation.
Previously I was installing my own ErrorHook to capture
error messages and over-riding jump_now to call
Rf_resetStack(1). I know there has been some massive work
in this area so things have changed (i.e. my old code doesn't
compile ). I am sure I can figure it out by looking 
at the code, but are there some docs somewhere about this stuff ? 

Thanks,

Bruno

PS: great work, embedding R is so so cool :)



The information contained in and accompanying this communication is strictly
confidential and intended solely for the use of the intended recipient.  If you
are not the intended recipient, you should not disseminate, distribute or copy
this communication or any attachments.  Additionally, please delete/destroy all
copies of this communication and attachments and notify the sender of the error
by email as soon as possible.

Emails may be interfered with, may contain computer viruses or other defects
and may not be successfully replicated on other systems.  UBS O'Connor gives no
warranties in relation to these matters.  If you have any doubts about the
authenticity of an email purportedly sent by UBS O'Connor, please contact us
immediately.  This email has been prepared by a representative of UBS O'Connor
and is for your general information and should not be construed as a
solicitation or offer to buy or sell any securities or financial related
products.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 06:51:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 28 Jun 2002 07:51:43 +0200 (MET DST)
Subject: package `methods' has persistent effects even if detached (PR#1715)
Message-ID: <200206280551.HAA06028@pubhealth.ku.dk>

This came from an error in reg-tests-1.R

> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"
> library(methods)
> detach("package:methods")
> search()
[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"      "character"

My reading is that this should not happen.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jaitchis@hwy.com.au  Fri Jun 28 06:52:46 2002
From: jaitchis@hwy.com.au (jaitchis@hwy.com.au)
Date: Fri, 28 Jun 2002 07:52:46 +0200 (MET DST)
Subject: rdiscrete in e1071 fails when n==1 (PR#1716)
Message-ID: <200206280552.HAA06066@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################





<<insert bug report here>>


in e0171 the routine rdiscrete fails when n==1

the first few lines of code make it obvious why

> rdiscrete
function (n, probs, values = 1:length(probs), method = "inverse", 
    aliasmatrix = NULL) 
{
    if (length(probs) != length(values)) 
        stop("rdiscrete: probs and values must have the same 
length.")
    if (sum(probs < 0) > 0) 
        stop("rdiscrete: probs must not contain negative values.")
    if (n == 1) 
        return(values[sum(runif(1) > p) + 1])   ???? p is undefined at 
this point
    else {




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows 98 SE 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:e1071, package:ctest, Autoloads, 
package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 09:28:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jun 2002 09:28:57 +0100 (BST)
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <200206280551.HAA06028@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>

Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.

> class
.Primitive("class")
> find("class")
[1] "package:base"
> library(methods)
> class
.Primitive("dataClass")
> find("class")
[1] "package:methods" "package:base"
> get("class", "package:base")
.Primitive("dataClass")
> detach("package:methods")
> class
.Primitive("dataClass")

so attaching methods is altering the class object *in base*.
Related to namespaces?

On Fri, 28 Jun 2002 ripley@stats.ox.ac.uk wrote:

> This came from an error in reg-tests-1.R
>
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"
> > library(methods)
> > detach("package:methods")
> > search()
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"      "character"
>
> My reading is that this should not happen.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 10:17:36 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 11:17:36 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
Message-ID: <15644.10672.168515.693504@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>> class
> .Primitive("class")
>> find("class")
> [1] "package:base"
>> library(methods)
>> class
> .Primitive("dataClass")
>> find("class")
> [1] "package:methods" "package:base"
>> get("class", "package:base")
> .Primitive("dataClass")
>> detach("package:methods")
>> class
> .Primitive("dataClass")

> so attaching methods is altering the class object *in base*.
> Related to namespaces?

A problem in library(), maybe?

All I see is

R/class.R:class <- dataClass

but surely assignments should be in methods and not in base?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Fri Jun 28 10:53:31 2002
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Fri, 28 Jun 2002 11:53:31 +0200 (MET DST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
Message-ID: <200206280953.LAA09404@pubhealth.ku.dk>

Full_Name: Jrg Polzehl
Version: 1.5.1 
OS: Windows 2000
Submission from: (NULL) (193.175.148.198)


When calculating MLE's in a variance component model using constrained
optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
behaviour in cases where
the likelihood function was evalueted at the constraint. Parameters and value of
the
function at the constraint seem to be returned in this case.
I've tried to reproduce the effect in a very simple example:

###############################################################################
fn <- function(par,x,y){
ind <- 1:(length(x)/2)
alpha <- par[1]
beta <- par[2]
sigmaq1 <- par[3]
sigmaq2 <- par[4]
sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
}

set.seed(3)
n <- 5
x1 <- runif(n)
x2 <- runif(n)
y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
x <- c(x1,x2)
par <- c(0,0,1,1)
z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
####################################################################################

Note that the effect vanishes in case of other constraints for par[3:4].

here is what happens with trace=1 :

z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 4118799.069149
final  value 4118799.069149 
converged
----------------------------------------------------------------------------------
and the essential part with trace = 6 :

4  variables are free at GCP on iteration 11
LINE SEARCH 1 times; norm of step = 1.19245
X = -3.34057 6.34639 1.18546 15.2136 
G = -1.08654 -1.14056 1.42527 -0.307525 
Iteration    11

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the next break point =  8.3175e-001
Distance to the stationary point =  1.4763e-001

GCP found in this segment
Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the stationary point =  1.4763e-001
Cauchy X =  -3.18017 6.51477 0.97505 15.259 

---------------- exit CAUCHY----------------------

4  variables are free at GCP on iteration 12                #  
!!!!!!!!!!!!!!!!!!!!!!
LINE SEARCH 0 times; norm of step = 2.30637
X = -3.90499 7.26709 1e-006 16.8712 
G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468 

iterations 12
function evaluations 15
segments explored during Cauchy searches 12
BFGS updates skipped 0
active bounds at final generalized Cauchy point 0
norm of the final projected gradient 4.1147e+009
final function value 4.1188e+006

X = -3.90499 7.26709 1e-006 16.8712 
F = 4.1188e+006
final  value 4118799.069149 
converged


See especially the line marked with !!!!!!!!!!

Regards,

Jrg Polzehl


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 28 10:58:10 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 28 Jun 2002 11:58:10 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.10672.168515.693504@mithrandir.hornik.net>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
Message-ID: <15644.13106.766528.617696@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
    >>> class
    >> .Primitive("class")
    >>> find("class")
    >> [1] "package:base"
    >>> library(methods)
    >>> class
    >> .Primitive("dataClass")
    >>> find("class")
    >> [1] "package:methods" "package:base"
    >>> get("class", "package:base")
    >> .Primitive("dataClass")
    >>> detach("package:methods")
    >>> class
    >> .Primitive("dataClass")

    >> so attaching methods is altering the class object *in base*.
    >> Related to namespaces?

    KH> A problem in library(), maybe?

    KH> All I see is

    KH> R/class.R:class <- dataClass

    KH> but surely assignments should be in methods and not in base?

I think JMC mentioned something about the reasons for this, 
and will again (?) when `morning has broken' at the East cost
(and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

My guess is: This is *necessary* now that base is a namespaced,
   since everything in base is using class() as defined in base!
   {use it's own name space first!}.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 11:19:23 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 12:19:23 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.13106.766528.617696@gargle.gargle.HOWL>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL>
Message-ID: <15644.14379.430320.396271@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>>>>> Prof Brian D Ripley writes:
>>> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>>>> class
>>> .Primitive("class")
>>>> find("class")
>>> [1] "package:base"
>>>> library(methods)
>>>> class
>>> .Primitive("dataClass")
>>>> find("class")
>>> [1] "package:methods" "package:base"
>>>> get("class", "package:base")
>>> .Primitive("dataClass")
>>>> detach("package:methods")
>>>> class
>>> .Primitive("dataClass")

>>> so attaching methods is altering the class object *in base*.
>>> Related to namespaces?

KH> A problem in library(), maybe?

KH> All I see is

KH> R/class.R:class <- dataClass

KH> but surely assignments should be in methods and not in base?

> I think JMC mentioned something about the reasons for this, 
> and will again (?) when `morning has broken' at the East cost
> (and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

> My guess is: This is *necessary* now that base is a namespaced,
>    since everything in base is using class() as defined in base!
>    {use it's own name space first!}.

Again, not my understanding of Luke's paper.

The culprit is

    for(i in rev(seq(along = search())))
      cacheMetaData(as.environment(i), TRUE)
    if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
        # if base is using a name space then any replacements for functions
        # in base defined in methods need to be installed directly into base
        # or they will not be visible to base code.
        for (n in ls(env = where))
            if (exists(n, env = NULL))
                assign(n, get(n, env = where), env = NULL)
    }

in .First.lib() of methods.

There is a general issue here: base should conceptually be considered as
sealed.  If we really need to unlock the bindings when attaching methods
then we should restore the original ones when detaching but it does not
feel right to do this at all.  Luke will have more to say, I am sure.

-k

> Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jechacon@unex.es  Fri Jun 28 12:53:06 2002
From: jechacon@unex.es (jechacon@unex.es)
Date: Fri, 28 Jun 2002 13:53:06 +0200 (MET DST)
Subject: integrate function fails! (PR#1718)
Message-ID: <200206281153.NAA11196@pubhealth.ku.dk>

Full_Name: Jos Enrique Chacn
Version: 1.5.0 and 1.3.1
OS: Windows Millenium
Submission from: (NULL) (158.49.28.155)


Dear reader:
I was trying to evaluate the L2 error produced when estimating the density
function N(0,1) from a sample of size 100 using a kernel density estimate. It
produced a strange value. You can reproduce the process by typing

samp<-rnorm(100)
fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
integrand<-function(x){(fker(x,5)-dnorm(x))^2}
err<-integrate(integrand,-Inf,Inf)

This value err of the L2 error is generally far from accurate. fker is the
kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
a very large choice far from the optimum which is around 0.4, but it makes it
more clear to see the failure. You just have to evaluate integrand(0); then, you
know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
which was usually around 0.1. But the value that integrate gives is around 1.6!
Anyway, there is a library called rmutil (I don't remember where I got it, but I
found it searching in the forums) which contains a function called int that
works well.

I hope this problem can be solved.

Best regards,
  Jos Enrique Chacn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 28 13:21:33 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 28 Jun 2002 08:21:33 -0400
Subject: (PR#1715) Re: package `methods' has persistent effects even
 ifdetached
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL> <15644.14379.430320.396271@mithrandir.hornik.net>
Message-ID: <3D1C54CD.33E9D5D2@research.bell-labs.com>

Kurt Hornik wrote:
....................................................
> 
> The culprit is
> 
>     for(i in rev(seq(along = search())))
>       cacheMetaData(as.environment(i), TRUE)
>     if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
>         # if base is using a name space then any replacements for functions
>         # in base defined in methods need to be installed directly into base
>         # or they will not be visible to base code.
>         for (n in ls(env = where))
>             if (exists(n, env = NULL))
>                 assign(n, get(n, env = where), env = NULL)
>     }
> 
> in .First.lib() of methods.
> 
> There is a general issue here: base should conceptually be considered as
> sealed.  If we really need to unlock the bindings when attaching methods
> then we should restore the original ones when detaching but it does not
> feel right to do this at all.  Luke will have more to say, I am sure.
> 
> -k
> 
> > Martin

Yes, definitely a general question here.  And it's related to Martin's
earlier report about all.equal.

As I mentioned, the inconsistency there resulted from data.class (in
base) behaving differently when the methods package was attached, with
its different version of class.


Intuitively, the code added to .First.lib seems to contradict the
namespace idea.  The issue may be whether any code in base breaks if it
continues to use the base version of class() when the methods package is
attached.  Luke will know better, but my feeling is that we should fix
any problems of that sort directly, and undo the change to .First.lib.

(There are some other redefinitions in methods, including plot with a
"y" argument.  But it's class and class<- that seem likely to be used by
other code in base.)

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Fri Jun 28 15:37:29 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Fri, 28 Jun 2002 16:37:29 +0200 (MET DST)
Subject: rw1051 binary dist missing dyn.load documentation (PR#1719)
Message-ID: <200206281437.QAA12910@pubhealth.ku.dk>

The binary package (version of 6/17)  of rw1051 for Windows is missing
html documentation for dyn.load()  The file is present in
$R_HOME/library/base/html, but has zero bytes.  dyn.load help IS
accessible through the windows help system.

platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jun 28 19:31:25 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 28 Jun 2002 11:31:25 -0700 (PDT)
Subject: integrate function fails! (PR#1718)
In-Reply-To: <200206281153.NAA11196@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0206281125370.123502-100000@homer04.u.washington.edu>

On Fri, 28 Jun 2002 jechacon@unex.es wrote:

> Full_Name: Jos Enrique Chacn
> Version: 1.5.0 and 1.3.1
> OS: Windows Millenium
> Submission from: (NULL) (158.49.28.155)
>
>
> Dear reader:
> I was trying to evaluate the L2 error produced when estimating the density
> function N(0,1) from a sample of size 100 using a kernel density estimate. It
> produced a strange value. You can reproduce the process by typing
>
> samp<-rnorm(100)
> fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
> integrand<-function(x){(fker(x,5)-dnorm(x))^2}
> err<-integrate(integrand,-Inf,Inf)
>
> This value err of the L2 error is generally far from accurate. fker is the
> kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
> a very large choice far from the optimum which is around 0.4, but it makes it
> more clear to see the failure. You just have to evaluate integrand(0); then, you
> know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
> which was usually around 0.1. But the value that integrate gives is around 1.6!
> Anyway, there is a library called rmutil (I don't remember where I got it, but I
> found it searching in the forums) which contains a function called int that
> works well.

This may illustrate what's going on...

> x<-seq(-1,1,length=10)
> sapply(x,integrand)
 [1] 0.02741093 0.04742150 0.06987683 0.08968701 0.10136155 0.10132284
 [7] 0.08957798 0.06971705 0.04723830 0.02723325
> integrand(x)
 [1] 0.2865455 0.2327631 0.1895539 0.1599095 0.1449956 0.1449956 0.1599095
 [8] 0.1895539 0.2327631 0.2865455


If you look a the help page for integrate you see

       f: An R function taking a numeric first argument and returning a
          numeric vector the same length. Returning a non-finite
          element will generate an error.

so the function must be properly vectorised for integrate to work. Your
function isn't.  There is a check in integrate() that the return value is
the right length, but there's really no way to check that the value is
correct.

If you make the function vectorised it does seem to work
> correct.integrand<-function(x) sapply(x,integrand)
> integrate(correct.integrand,-Inf,Inf)
0.1839647 with absolute error < 8.9e-08


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Fri Jun 28 23:45:41 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Sat, 29 Jun 2002 00:45:41 +0200 (MET DST)
Subject: possible typo in Control.Rd (PR#1720)
Message-ID: <200206282245.AAA14470@pubhealth.ku.dk>

line 36/37 of src/library/base/man/Control.Rd has:

\seealso{
  \code{\link{Syntax}} for the basis \R syntax and operators,

Should that be "basic" rather than "basis"?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jun 29 01:07:51 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 29 Jun 2002 02:07:51 +0200 (MET DST)
Subject: [R] browser/debug and for loop (PR#1721)
Message-ID: <200206290007.CAA14575@pubhealth.ku.dk>

On Fri, 28 Jun 2002, Vadim Ogranovich wrote:

> Dear R-Users,
>
> It seems like once one invokes browser() inside a loop and steps through the
> body using 'n' any subsequent loop will be "intercepted" by debug()
> function. Here is exactly what I mean
>
> # fresh R session
> # run a loop that has browser() inside the body
> > for (i in seq(5)) { browser(); print(i) }
> for (i in seq(5)) { browser(); print(i) }
> Called from: NULL
> Browse[1]> n
> n
> debug: print(i)
> Browse[1]> Q
> Q
>
> #  remove browser(), debug() is still there
> > for (i in seq(5)) { print(i) }
> for (i in seq(5)) { print(i) }
> debug: i
> Browse[1]> Q
> Q
>
> My guess is that when I was stepping through some function got flagged for
> debugging. I tried to undebug "for", but that didn't work.

This is quite interesting.  Note that the label at the start of the
browser session changes from
  Called from: NULL
to
  debug: i

This indicates that the DEBUG() flag has got set on an environment (the
global environment in this case). It happens only when you do "n" and then
"Q" in the browser.

I think the fix is to SET_DEBUG(rho,0) when responding to "Q" in
main.c:ParseBrowser, but I'm not certain.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 30 18:57:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 30 Jun 2002 18:57:38 +0100 (BST)
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <20020630124930.1820aaf1.fharrell@virginia.edu>
Message-ID: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>

On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:

> On 30 Jun 2002 09:12:31 -0700
> "A.J. Rossini" <rossini@blindglobe.net> wrote:
>
> > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> >
> >     john> The equal sign has already been provided as an alternative assignment
> >     john> operator in R.
> >
> > And I feel the same way about "=" as I do about "_".  Yech.
>
> I'll second that.  And we've already seen the big trouble that can be
caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
envisioned by the developers.  -Frank Harrell

Frank,

Was that actually in R (where very few people use =)?  Unlike S4, = is not
a general-purpose assignment operator, and this sort of thing *was*
`envisioned by the developers'.  For example, if(sex = "male") is a syntax
error in R.  (Some more insidious ones, such as using assignment in the
a function call, are also disallowed.)

If there is evidence that this is regularly causing trouble we would want
to re-consider its scope, but the availability of `=' is hardly publicised
(and not even the editor of the Programmer's Niche remembered about it).

Brian

(Moved to R-devel, as maybe R-help should be spared this source of
confusion.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Jun 30 19:42:49 2002
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Sun, 30 Jun 2002 14:42:49 -0400
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
References: <20020630124930.1820aaf1.fharrell@virginia.edu>
 <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
Message-ID: <20020630144249.21739e6e.fharrell@virginia.edu>

On Sun, 30 Jun 2002 18:57:38 +0100 (BST)
ripley@stats.ox.ac.uk wrote:

> On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:
> 
> > On 30 Jun 2002 09:12:31 -0700
> > "A.J. Rossini" <rossini@blindglobe.net> wrote:
> >
> > > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> > >
> > >     john> The equal sign has already been provided as an alternative assignment
> > >     john> operator in R.
> > >
> > > And I feel the same way about "=" as I do about "_".  Yech.
> >
> > I'll second that.  And we've already seen the big trouble that can be
> caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
> envisioned by the developers.  -Frank Harrell
> 
> Frank,
> 
> Was that actually in R (where very few people use =)?  Unlike S4, = is not
> a general-purpose assignment operator, and this sort of thing *was*
> `envisioned by the developers'.  For example, if(sex = "male") is a syntax
> error in R.  (Some more insidious ones, such as using assignment in the
> a function call, are also disallowed.)

It was probably S-Plus.  I have trouble keeping S-Plus and R separate sometimes.
I hope that R also provides safeguards about "=" when it appears in an argument to a function.

> 
> If there is evidence that this is regularly causing trouble we would want
> to re-consider its scope, but the availability of `=' is hardly publicised
> (and not even the editor of the Programmer's Niche remembered about it).
> 
> Brian
> 
> (Moved to R-devel, as maybe R-help should be spared this source of
> confusion.)

Sure.  Thanks Brian  -Frank

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From felix@sprintlabs.com  Sun Jun  2 01:45:24 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:24 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1623)
Message-ID: <200206020045.CAA02832@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From felix@sprintlabs.com  Sun Jun  2 01:45:55 2002
From: felix@sprintlabs.com (felix@sprintlabs.com)
Date: Sun, 2 Jun 2002 02:45:55 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020045.CAA02841@pubhealth.ku.dk>

Full_Name: Felix Hernandez-Campos
Version: R-1.5.0
OS: IRIX, FreeBSD, Solaris
Submission from: (NULL) (208.30.174.32)


[R-1.5.0]

The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
(but it works fine for Solaris). In FreeBSD, the installation hangs right after


f77   -fPIC  -g -O2 -c clara.f -o clara.o

(the first FORTRAN compile). In IRIX, the program also hangs at the same point,

but after a minute or two, it returns an error about an "arg list too long".
The
problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
shows
that this script is calling itself endlessly (rather than invoking the f77
compiler).
I have been able to solve the problem in both platforms by changing the
following 
line in ~R/bin/f77

: ${F77='f77'}

by

: ${F77='/usr/bin/f77'}

P.S. I was always able to install the package cluster without this modification
in
R-1.4 and R-1.3.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  2 06:38:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 2 Jun 2002 07:38:13 +0200 (MET DST)
Subject: cluster installation hangs or too many args (PR#1624)
Message-ID: <200206020538.HAA03183@pubhealth.ku.dk>

This runs correctly for me on `Solaris', using Solaris' f77.  I presume
you don't have a Fortran compiler installed on either system as you are
using the script bin/f77?  If so how did you compile cluster before?

We need a lot more information, including which compilers you have and
which configure selected.  Did you perchance set environment variables
such as FC or F77?

If you do have /usr/bin/f77 as a real Fortran compiler, tell configure so
(or edit etc/Makeconf).

On Sun, 2 Jun 2002 felix@sprintlabs.com wrote:

> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
>
>
> [R-1.5.0]
>
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>
>
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>
> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following
> line in ~R/bin/f77
>
> : ${F77='f77'}
>
> by
>
> : ${F77='/usr/bin/f77'}
>
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Jun  2 14:22:24 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 2 Jun 2002 09:22:24 -0400
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <200206020045.CAA02841@pubhealth.ku.dk>; from felix@sprintlabs.com on Sun, Jun 02, 2002 at 02:45:55AM +0200
References: <200206020045.CAA02841@pubhealth.ku.dk>
Message-ID: <20020602092224.P51@jimmy.harvard.edu>

On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
> Full_Name: Felix Hernandez-Campos
> Version: R-1.5.0
> OS: IRIX, FreeBSD, Solaris
> Submission from: (NULL) (208.30.174.32)
> 
> 
> [R-1.5.0]
> 
> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
> 
> 
> f77   -fPIC  -g -O2 -c clara.f -o clara.o
> 
> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
> 

 I can confirm this on my FreeBSD (4.5).
 I believe that there have been a number of changes to configure for
 the 1.5 release.
 I can also confirm that the fix also seems to work.

  Thanks,

    Robert


> but after a minute or two, it returns an error about an "arg list too long".
> The
> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
> shows
> that this script is calling itself endlessly (rather than invoking the f77
> compiler).
> I have been able to solve the problem in both platforms by changing the
> following 
> line in ~R/bin/f77
> 
> : ${F77='f77'}
> 
> by
> 
> : ${F77='/usr/bin/f77'}
> 
> P.S. I was always able to install the package cluster without this modification
> in
> R-1.4 and R-1.3.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Jun  2 14:36:31 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 2 Jun 2002 15:36:31 +0200
Subject: cluster installation hangs or too many args (PR#1624)
In-Reply-To: <20020602092224.P51@jimmy.harvard.edu>
References: <200206020045.CAA02841@pubhealth.ku.dk>
 <20020602092224.P51@jimmy.harvard.edu>
Message-ID: <15610.8031.910764.754414@mithrandir.hornik.net>

>>>>> Robert Gentleman writes:

> On Sun, Jun 02, 2002 at 02:45:55AM +0200, felix@sprintlabs.com wrote:
>> Full_Name: Felix Hernandez-Campos
>> Version: R-1.5.0
>> OS: IRIX, FreeBSD, Solaris
>> Submission from: (NULL) (208.30.174.32)
>> 
>> 
>> [R-1.5.0]
>> 
>> The installation of the package cluster fails in FreeBSD (4.2) and IRIX (6.5)
>> (but it works fine for Solaris). In FreeBSD, the installation hangs right after
>> 
>> 
>> f77   -fPIC  -g -O2 -c clara.f -o clara.o
>> 
>> (the first FORTRAN compile). In IRIX, the program also hangs at the same point,
>> 

>  I can confirm this on my FreeBSD (4.5).
>  I believe that there have been a number of changes to configure for
>  the 1.5 release.

Yes and they are documented in the release notes.

>  I can also confirm that the fix also seems to work.

I assume the problem only occurs because R_HOME/bin is in PATH?

-k

>   Thanks,

>     Robert


>> but after a minute or two, it returns an error about an "arg list too long".
>> The
>> problem is in ~R/bin/f77. I added a print out statement in ~R/bin/f77 and it
>> shows
>> that this script is calling itself endlessly (rather than invoking the f77
>> compiler).
>> I have been able to solve the problem in both platforms by changing the
>> following 
>> line in ~R/bin/f77
>> 
>> : ${F77='f77'}
>> 
>> by
>> 
>> : ${F77='/usr/bin/f77'}
>> 
>> P.S. I was always able to install the package cluster without this modification
>> in
>> R-1.4 and R-1.3.
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ca  Tue Jun  4 00:19:14 2002
From: aa056@chebucto.ca (aa056@chebucto.ca)
Date: Tue, 4 Jun 2002 01:19:14 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1630)
Message-ID: <200206032319.BAA10429@pubhealth.ku.dk>

Using the same settings in config.site as were used for R-1.4.1,
R-1.5.0 fails to build.

./configure --enable-R-shlib

Using defaults and using PPro optimizations, the build failed in
package methods:

dumping R code in package 'methods'
gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'

The command that fails is:

    ../../../bin/R --vanilla --verbose < all.R

The same failure occurs using defaults for CFLAGS, etc.

Install patches:

  zcat R-release.diff.gz | patch -p1


R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
 -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
 -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
 -mpreferred-stack-boundary=2
  C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
 -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
 -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
-mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
-malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes

The same error occurs using the patched version.

$ gdb ../../../bin/R.bin core
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i586-mandrake-linux"...
Core was generated by `/mnt/Data/src/install/R-1.5.0/bin/R.bin --vanilla --slave'.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x40015238
#0  0x403cb10d in ?? ()Cannot access memory at address 0x40015238
(gdb)


> ### The following code is only executed when dumping
> assign(".saveImage", FALSE, .GlobalEnv)
> .First.lib("methods", "methods", .GlobalEnv)

$ ../../../bin/R --debugger=gdb

(gdb) run --vanilla < all.R
[...]

Program received signal SIGSEGV, Segmentation fault.
0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
(gdb) where
#0  0x403cb10d in Rf_install () from /mnt/Data/src/install/R-1.5.0/bin/libR.so
#1  0x404f5a85 in R_initMethodDispatch ()
   from /mnt/Data/src/install/R-1.5.0/library/methods/libs/methods.so
#2  0x807c6a2 in do_dotCode () at eval.c:88
#3  0x808b032 in Rf_eval () at eval.c:88
#4  0x808beae in do_begin () at eval.c:88
#5  0x808aeaf in Rf_eval () at eval.c:88
#6  0x808b3f0 in Rf_applyClosure () at eval.c:88
#7  0x808b0aa in Rf_eval () at eval.c:88
#8  0x80a0d8d in R_ReplConsole () at eval.c:88
#9  0x80a140a in run_Rmainloop () at eval.c:88
#10 0x80a1421 in Rf_mainloop () at eval.c:88
#11 0x80f5f6d in main () at eval.c:88
#12 0x400f38a6 in __libc_start_main (main=0x80f5f58 <main>, argc=2,
    ubp_av=0xbffff354, init=0x804a564 <_init>, fini=0x81677a4 <_fini>,
    rtld_fini=0x4000b980 <_dl_fini>, stack_end=0xbffff34c)
    at ../sysdeps/generic/libc-start.c:129
(gdb)


The following information is from R-1.4.1 big.report()

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
George N. White III  <aa056@chebucto.ns.ca> Halifax, NS, Canada


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:04:25 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 04 Jun 2002 10:04:25 -0400
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu
 (PR#1630)
References: <200206032319.BAA10429@pubhealth.ku.dk>
Message-ID: <3CFCC8E9.CF35A37C@research.bell-labs.com>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jun  4 15:07:19 2002
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Tue, 4 Jun 2002 16:07:19 +0200 (MET DST)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu (PR#1632)
Message-ID: <200206041407.QAA18195@pubhealth.ku.dk>

aa056@chebucto.ca wrote:
> 
> Using the same settings in config.site as were used for R-1.4.1,
> R-1.5.0 fails to build.
> 
> ./configure --enable-R-shlib
> 
> Using defaults and using PPro optimizations, the build failed in
> package methods:
> 
> dumping R code in package 'methods'
> gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> 
> The command that fails is:
> 
>     ../../../bin/R --vanilla --verbose < all.R
> 
> The same failure occurs using defaults for CFLAGS, etc.
> 
> Install patches:
> 
>   zcat R-release.diff.gz | patch -p1
> 
> R is now configured for i686-pc-linux-gnu
> 
>   Source directory:          .
>   Installation directory:    /usr/local
>   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
>  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
>  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
>  -mpreferred-stack-boundary=2
>   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
>  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
>  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
> 
>   R profiling support:       yes
>   R as a shared library:     yes
> 
> The same error occurs using the patched version.
> 

I couldn't reproduce this with the --enable-R-shlib in the
configuration, on either of my current Linux versions (Redhat 7.1, YDL
2.2); e.g.,

R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -g
  C++ compiler:              g++  -mieee-fp -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     yes



-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  4 15:14:38 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 Jun 2002 10:14:38 -0400
Subject: CRAN down?
Message-ID: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>

Is <cran.r-project.org> down or is it just me having trouble?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  4 17:44:11 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 4 Jun 2002 18:44:11 +0200
Subject: CRAN down?
In-Reply-To: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
References: <3CFCCB4E.9ECD7069@bank-banque-canada.ca>
Message-ID: <15612.61019.706496.498175@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Is <cran.r-project.org> down

yes it is.

Use a mirror for the moment,  typically
	cran.XY.R-project.org   
where XY is, e.g., "us" , "uk", "dk" ,...
or also "good ol'" http://lib.stat.cmu.edu/R/CRAN/

    PaulG>  or is it just me having trouble?  Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun  5 17:57:40 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 5 Jun 2002 18:57:40 +0200 (MET DST)
Subject: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206051657.SAA24357@pubhealth.ku.dk>

I just realised that the return address in my recent bug report probably 
won't work... Here it is once more:


I compiled the latest R release. Configure correctly found my Tcl/Tk 8.0.4 
installation (it searched in various tcl8.0 and tk8.0 places). However, 
when:
>library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library 
"/home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so":
  /home/local/src/R-1.5.0/library/tcltk/libs/tcltk.so: undefined symbol: 
Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

Which is correct because I cannot find that symbol in my Tcl library!

The docs are unspecific as to the version needed (but the actions of the 
configure script suggest that 8.0 is supported!). Is this correct, or is 
this a bug in configure or the documentation?



--please do not edit the information below--

Version:
platform = i686-pc-linux-gnu
arch = i686
os = linux-gnu
system = i686, linux-gnu
status =
major = 1
minor = 5.0
year = 2002
month = 04
day = 29
language = R

Search Path:
.GlobalEnv, package:ctest, Autoloads, package:base


RenE J.V. Bertin


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206070515.g575F3P00742@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1624 *
Subject: cluster installation hangs or too many args
From: felix@sprintlabs.com
Date: Sun, 2 Jun 2002 02:45:54 +0200 (MET DST)
* PR# 1639 *
Subject:  Tcl8.0.4 missing function?! 
From: RenE JV Bertin <bertin@bola.college-de-france.fr>
Date: Wed, 5 Jun 2002 18:51:14 +0200
* PR# 1640 *
Subject: Tcl8.0.4 missing function?! 
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 05 Jun 2002 18:56:37 +0200
* PR# 1641 *
Subject: Available; Grants, Loans, Financing
From: "MG PUBLISHING" <mgpublishing@newmail.com>
Date: Wed, 5 Jun 2002 19:10:58 -0400
* PR# 1642 *
Subject: NEW Consumer TELEMARKETING List
From: Telemarketing <client2@371.net>
Date: 06 Jun 2002 02:41:09 -0700
* PR# 1643 *
Subject: NEXT OF KIN
From: "tony fred"<tonyfred@qrio.com>
Date: Thu, 06 Jun 2002 17:31:12 +0300
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa056@chebucto.ns.ca  Sat Jun  8 13:14:02 2002
From: aa056@chebucto.ns.ca (George White)
Date: Sat, 8 Jun 2002 09:14:02 -0300 (ADT)
Subject: build fails dumping R code in 'methods' on i686-pc-linux-gnu  (PR#1630)
In-Reply-To: <3CFCC8E9.CF35A37C@research.bell-labs.com>
Message-ID: <Pine.GSO.3.95.iB1.0.1020608090154.26862A-100000@halifax.chebucto.ns.ca>

On Tue, 4 Jun 2002, John Chambers wrote:

> aa056@chebucto.ca wrote:
> > 
> > Using the same settings in config.site as were used for R-1.4.1,
> > R-1.5.0 fails to build.
> > 
> > ./configure --enable-R-shlib
> > 
> > Using defaults and using PPro optimizations, the build failed in
> > package methods:
> > 
> > dumping R code in package 'methods'
> > gmake[4]: *** [../../../library/methods/R/all.rda] Error 139
> > gmake[4]: Leaving directory `/mnt/Data/src/install/R-1.5.0/src/library/methods'
> > 
> > The command that fails is:
> > 
> >     ../../../bin/R --vanilla --verbose < all.R
> > 
> > The same failure occurs using defaults for CFLAGS, etc.
> > 
> > Install patches:
> > 
> >   zcat R-release.diff.gz | patch -p1
> > 
> > R is now configured for i686-pc-linux-gnu
> > 
> >   Source directory:          .
> >   Installation directory:    /usr/local
> >   C compiler:                gcc  -D__NO_MATH_INLINES -mieee-fp -O2 \
> >  -pipe -s -mpentiumpro -mcpu=pentiumpro -march=pentiumpro -mieee-fp \
> >  -malign-loops=2 -malign-jumps=2 -malign-functions=2 \
> >  -mpreferred-stack-boundary=2
> >   C++ compiler:              g++  -mieee-fp -O2 -pipe -s  -mpentiumpro \
> >  -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> >  -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   FORTRAN compiler:          g77  -O2 -pipe -s -mpentiumpro \
> > -mcpu=pentiumpro -march=pentiumpro -mieee-fp -malign-loops=2 \
> > -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2
> >   X11 support:               yes
> >   Gnome support:             no
> >   Tcl/Tk support:            yes
> >   Readline support:          yes
> > 
> >   R profiling support:       yes
> >   R as a shared library:     yes
> > 
> > The same error occurs using the patched version.
> > 
> 
> I couldn't reproduce this with the --enable-R-shlib in the
> configuration, on either of my current Linux versions (Redhat 7.1, YDL
> 2.2); e.g.,

I had no problem building the default configuration.  Comparing the 
resulting Makeconf with the one for the failed build I found that
configure did not set MAIN_LDFLAGS to --export-dynamic when using my
config.site (which has the MAIN_LDFLAGS entry commented out).

If I edit Makeconf and rebuild R.bin the build finished and 
"make check" passes.  

--
George White <aa056@chebucto.ns.ca> Halifax, Nova Scotia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 10 14:55:38 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2002 15:55:38 +0200
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <x2ofejtezp.fsf@blueberry.kubism.ku.dk>


As the subject says, the core team has decided to release R-1.5.1 next
Monday, mainly to "officialize" the bug fixes in the current
r-patched. It would be helpful that you check it out and report back
if you find any bad problems, especially if you have an uncommon
platform. (Or very minor nits. The intermediate ones are "out of
bounds" at this stage.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Jun 10 17:48:08 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 10 Jun 2002 12:48:08 -0400
Subject: R-1.5.1 scheduled for Monday, June 17
Message-ID: <kkl9gus0i1t4m4d0i20fgcdqp2v46o3tgf@4ax.com>

On 10 Jun 2002 15:55:38 +0200, Peter Dalgaard BSA
<p.dalgaard@biostat.ku.dk> wrote:

>
>As the subject says, the core team has decided to release R-1.5.1 next
>Monday, mainly to "officialize" the bug fixes in the current
>r-patched. It would be helpful that you check it out and report back
>if you find any bad problems, especially if you have an uncommon
>platform. (Or very minor nits. The intermediate ones are "out of
>bounds" at this stage.)

For Windows users, I'll compile the current r-patched and put it on 

 http://www.cran.r-project.org/bin/windows/base/

as SetupRpatched.exe.  (It should be automatically copied to the
mirrors by the next day.)  The first version should be online later
this afternoon.  I'll put new versions up as time permits; check the
file dates to see if I have.

Please copy any bug reports about this version to
R-windows@R-project.org.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 19:12:02 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 20:12:02 +0200 (MET DST)
Subject: coplot behaviour (PR#1653)
Message-ID: <200206101812.UAA26977@pubhealth.ku.dk>

Another one, using the same data as in my previous report (PR1651, available 
as http://rjvbertin.free.fr/PR1651data.tab):

kk<-read.table(<data>)
attach(kk)
Snr<-factor(Snr)
# Now try to make a coplot using boxplots:
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) plot(x, y))
# or
coplot(nFD~Modality|Type+size, panel = function(x, y, ...) boxplot(y~x))

This almost functions,only the boxplot matrix is shifted and right-aligned 
with the vertical (size) factor display (seems to be drawn underneath it).
This happens both with the Windows binaries and the source distribution 
compiled under Linux.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 00:42:31 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 11 Jun 2002 01:42:31 +0200 (CEST)
Subject: R search applet initialization
Message-ID: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>


R 1.5.1 is due to come out ... and I've just noticed that the R help.start
page search applet doesn't work on my Mandrake 8.2 system even though I've
upgraded mozilla to version 1.0 and I have a perfectly working java (all
right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
didn't work). I had thought the problem due to a too-old mozilla version,
but it doesn't seem to be that now.

Error messages throughout changes in versions of mozilla and java are 
consistent: the java applet doesn't get initialized.

Could this be a problem with default mandrake file permissions ?
Is it possible to download just the apple source code and a description of 
how it is supposed to work from somewhere on CRAN ?
How could I go about debugging this ?

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 10 17:41:00 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 10 Jun 2002 18:41:00 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206101641.SAA26695@pubhealth.ku.dk>


Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
(installed from sources).

# Load the data from the attached file:
kk<-read.table("__filename__", header=1)
# attach the data:
attach(kk)
Snr<-factor(Snr)
# fool around with a call to anova.glm():
anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
# Error: object nFD not found
# Well, I thought I had attached that. Anyway:
anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
data=kk)
# Same message
# In addition, warning message:
<lots of output>
R dumps core. On Windows, it crashes in <unknown module>.

Also not that the 1st (Snr) column is not automatically converted in a
factor, despite the fact that it consists of strings!

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

>From list moderator:
     formerly binary attached dataset is now available
     as  http://rjvbertin.free.fr/PR1651data.tab
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:06:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 08:06:13 +0100 (BST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>

On Tue, 11 Jun 2002 mikalzet@libero.it wrote:

>
> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
> page search applet doesn't work on my Mandrake 8.2 system even though I've
> upgraded mozilla to version 1.0 and I have a perfectly working java (all
> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
> didn't work). I had thought the problem due to a too-old mozilla version,
> but it doesn't seem to be that now.
>
> Error messages throughout changes in versions of mozilla and java are
> consistent: the java applet doesn't get initialized.
>
> Could this be a problem with default mandrake file permissions ?

I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
0.9.9 and 1.0rc2 all worked.

> Is it possible to download just the apple source code and a description of
> how it is supposed to work from somewhere on CRAN ?

It's all in doc/html/search in the source tree (you'll need to make to get
the HTML file and something to search).

> How could I go about debugging this ?
>
> --
> Michele Alzetta
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:24:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:24:15 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110724.JAA29161@pubhealth.ku.dk>

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)

Why are you calling anova.glm on an object of class c("aovlist",
"listof")?  Also, why give the data = kk argument to anova.glm (which does
not have such an argument)?

I have no idea what you intended, but there is no anova method for
a multistratum aov fit.  I suggest you look at the print and summary
methods.

> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!

All text files are strings. It is a column of integer numbers, and so is
converted to an integer variable in R.

If you wanted something different, read ?read.table and set colClasses.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 08:49:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 09:49:18 +0200 (MET DST)
Subject: Crashing R (PR#1651)
Message-ID: <200206110749.JAA29387@pubhealth.ku.dk>

I can't reproduce the crash on Linux, nor using rterm on Windows.
With Rgui on Windows it seems due to the over-long error message that is
generated (15880 characters) as a single line.

There was a bug report (PR 902 on problems) with over-long warnings.
That was solved long ago, but there is no guarantee that the display
system will accept them.  Perhaps warning() should truncate them.

On Mon, 10 Jun 2002 rjvbertin@hotmail.com wrote:

>
> Concerns: R 1.5.0 gui version, Windows (downloaded binary) and Linux
> (installed from sources).
>
> # Load the data from the attached file:
> kk<-read.table("__filename__", header=1)
> # attach the data:
> attach(kk)
> Snr<-factor(Snr)
> # fool around with a call to anova.glm():
> anova.glm( aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality)) ) )
> # Error: object nFD not found
> # Well, I thought I had attached that. Anyway:
> anova.glm(aov( nFD~Type+size+Modality+Error(Snr/(Type+size+Modality))),
> data=kk)
> # Same message
> # In addition, warning message:
> <lots of output>
> R dumps core. On Windows, it crashes in <unknown module>.
>
> Also not that the 1st (Snr) column is not automatically converted in a
> factor, despite the fact that it consists of strings!
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> >From list moderator:
>      formerly binary attached dataset is now available
>      as  http://rjvbertin.free.fr/PR1651data.tab
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 11 08:53:02 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 11 Jun 2002 09:53:02 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <15621.44126.18431.298413@gargle.gargle.HOWL>

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> R 1.5.1 is due to come out ... and I've just
    Michele> noticed that the R help.start page search applet
    Michele> doesn't work on my Mandrake 8.2 system even though
    Michele> I've upgraded mozilla to version 1.0 and I have a
    Michele> perfectly working java (all right, I'm using 1.4.0
    Michele> now, but with mozilla 0.98 and java 1.3.1 it still
    Michele> didn't work). I had thought the problem due to a
    Michele> too-old mozilla version, but it doesn't seem to be
    Michele> that now.

    Michele> Error messages throughout changes in versions of
    Michele> mozilla and java are consistent: the java applet
    Michele> doesn't get initialized.

I can confirm that with Mozilla 1.0 (20020605) 
and
	help.start(browser = "mozilla")
the search applet gives the same error message and
search/keywords are not working whereas with
	help.start(browser = "netscape")
(with quite an old version of netscape) the search applet
 *does* work.

(this is a highly up-patched redhat 7.1)

    Michele> Could this be a problem with default mandrake file
    Michele> permissions ?  Is it possible to download just the
    Michele> apple source code and a description of how it is
    Michele> supposed to work from somewhere on CRAN ?  How
    Michele> could I go about debugging this ?

(I have not tried yet to debug.  Always felt  Mozilla should be able to
 work as well as old netscape ..)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 11 14:45:03 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 11 Jun 2002 15:45:03 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.31.0206110758280.5279-100000@gannet.stats>
Message-ID: <15621.65247.359413.955515@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Tue, 11 Jun 2002 mikalzet@libero.it wrote:
>> 
>> R 1.5.1 is due to come out ... and I've just noticed that the R help.start
>> page search applet doesn't work on my Mandrake 8.2 system even though I've
>> upgraded mozilla to version 1.0 and I have a perfectly working java (all
>> right, I'm using 1.4.0 now, but with mozilla 0.98 and java 1.3.1 it still
>> didn't work). I had thought the problem due to a too-old mozilla version,
>> but it doesn't seem to be that now.
>> 
>> Error messages throughout changes in versions of mozilla and java are
>> consistent: the java applet doesn't get initialized.
>> 
>> Could this be a problem with default mandrake file permissions ?

> I've never seen anything like this in RedHat 7.2, where Mozilla 0.9.6,
> 0.9.9 and 1.0rc2 all worked.

I can confirm the problem with current Debian testing and Mozilla
0.9.9-6, whereas things work fine with Netscape 4.77-2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdm28@cornell.edu  Tue Jun 11 15:33:42 2002
From: rdm28@cornell.edu (rdm28@cornell.edu)
Date: Tue, 11 Jun 2002 16:33:42 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206111433.QAA04910@pubhealth.ku.dk>



----------------------- transcript --------------------------
$ R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> axis(1,xaxp=c(0,1,4))
> version
         _
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R
>
------------------------end transcript ---------------------

I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
problem seems to exist for axis() with a yaxp argument.

The sequence:

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> par(xaxp=c(0,1,4))
> axis(1)

does draw an axis with four intervals, though.


On R-Help, in response to my question about this, Paul Murrell
<p.murrell@auckland.ac.nz> wrote:

> This appears to be a bug.  axis() should respond to an "in-line" xaxp
> setting.
>
> I can see a place in the C code where the problem appears to be, but an
> attempted quick fix failed.
>
> Could you please submit a bug report so that I (or someone else) will
> remember to have a proper look later?
>
> Thanks
>
> Paul


Thanks,
--
Robert Merithew





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 18:52:11 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 19:52:11 +0200 (MET DST)
Subject: command line editing does not work (PR#1656)
Message-ID: <200206111752.TAA05778@pubhealth.ku.dk>

I compiled R-1.5.0 on SuSE 7.2. Everything worked out, including
make check.  However, the escape sequences generated by the arrow
keys are not correctly understood.  So, I cannot e.g. get the previous
command by up arrow.  I had the same problem, when compiled R-1.4.1
on SuSE 7.2.

The problem was not present in precompiled binary R-1.3.0.rpm for
SuSE 7.2 from CRAN, however, I need at least R-1.4.1 for randomForest.

Compiling R-1.4.1 on RedHat based system was also OK, but I have SuSE
as my basic system.

I compared the output of "strace R" for the precompiled R-1.3.0 and
R-1.5.0 compiled by myself:

The correct behaviour of R-1.3.0 may be due to the fact, that
it reads /usr/share/terminfo/x/xterm
(in strace output: open("/usr/share/terminfo/x/xterm", O_RDONLY) = 4),
while the R-1.5.0 does not read it
(no occurrence of "xterm" in strace output).

I think, it should be something simple, but I do not know how
to force R to read the terminfo file. I appreciate any help from you.

Kind regards

  Petr Savicky

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Petr.Savicky@cuni.cz  Tue Jun 11 19:20:55 2002
From: Petr.Savicky@cuni.cz (Petr.Savicky@cuni.cz)
Date: Tue, 11 Jun 2002 20:20:55 +0200 (MET DST)
Subject: command line editing does not work (2) (PR#1657)
Message-ID: <200206111820.UAA05875@pubhealth.ku.dk>

I include more information to my message sent
at Tue, 11 Jun 2002 19:51:24 +0200 with the same
subject.

The config.log contains the following lines:

configure:10947: gcc -o conftest -g -O2 -I/usr/local/include -L/usr/local/lib conftest.c -lreadline  -ldl -lncurses -lm  >
/usr/i486-suse-linux/bin/ld: cannot find -lreadline
collect2: ld returned 1 exit status
configure:10950: $? = 1
configure: failed program was:
#line 10921 "configure"
#include "confdefs.h"

/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
   builtin and then its argument prototype would still apply.  */
char rl_callback_read_char ();
#ifdef F77_DUMMY_MAIN
#  ifdef __cplusplus

...

I have the readline package properly installed:
> rpm -q readline
readline-2.05-21

Thank you for any help to recognize and correct the problem.

Best wishes

  Petr

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhouston@bio.ri.ccf.org  Tue Jun 11 21:14:08 2002
From: dhouston@bio.ri.ccf.org (dhouston@bio.ri.ccf.org)
Date: Tue, 11 Jun 2002 22:14:08 +0200 (MET DST)
Subject: make install fails - index.html not found (PR#1658)
Message-ID: <200206112014.WAA06199@pubhealth.ku.dk>

Full_Name: Dale Houston
Version: 1.5.0
OS: Solaris 8
Submission from: (NULL) (192.35.79.70)


I am trying to get RT-1.5.0 installed on Solaris 8.

The programs compile fine and 'make check' seems to work.

But when I do a 'make install' I see this:

/home/dhouston/R-1.5.0 grieg> make install
installing afm ...
installing doc ...
installing doc/html ...
install:  index.html does not exist
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc/html
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc
*** Error code 1
make: Fatal error: Command failed for target `install'

I do not see index.html in doc/html. I made a fake one for testing purposes, but
when I do a make install it now fails trying to find SearchEngine.html.

I did a 'make html' but to no avail.

dale


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 11 21:19:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jun 2002 22:19:58 +0200
Subject: command line editing does not work (2) (PR#1657)
In-Reply-To: <200206111820.UAA05875@pubhealth.ku.dk>
References: <200206111820.UAA05875@pubhealth.ku.dk>
Message-ID: <x2bsahmutt.fsf@blueberry.kubism.ku.dk>

Petr.Savicky@cuni.cz writes:

> I have the readline package properly installed:
> > rpm -q readline
> readline-2.05-21
> 
> Thank you for any help to recognize and correct the problem.

The usual suspect is the readline-devel package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 11 21:40:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 11 Jun 2002 21:40:26 +0100 (BST)
Subject: make install fails - index.html not found (PR#1658)
In-Reply-To: <200206112014.WAA06199@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206112136170.23760-100000@gannet.stats>

On Tue, 11 Jun 2002 dhouston@bio.ri.ccf.org wrote:

> Full_Name: Dale Houston
> Version: 1.5.0
> OS: Solaris 8
> Submission from: (NULL) (192.35.79.70)
>
>
> I am trying to get RT-1.5.0 installed on Solaris 8.
>
> The programs compile fine and 'make check' seems to work.
>
> But when I do a 'make install' I see this:
>
> /home/dhouston/R-1.5.0 grieg> make install
> installing afm ...
> installing doc ...
> installing doc/html ...
> install:  index.html does not exist
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc/html
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc
> *** Error code 1
> make: Fatal error: Command failed for target `install'
>
> I do not see index.html in doc/html. I made a fake one for testing purposes, but
> when I do a make install it now fails trying to find SearchEngine.html.

Those should have been generated during the build, by the Makefile's in
doc/html and doc/html/search.

Do you perchance not have Perl installed?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Jun 11 23:04:45 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 00:04:45 +0200 (MET DST)
Subject: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
Message-ID: <200206112204.AAA06587@pubhealth.ku.dk>

Hi


> ----------------------- transcript --------------------------
> $ R --vanilla
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.5.0  (2002-04-29)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > axis(1,xaxp=c(0,1,4))
> > version
>          _
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> ------------------------end transcript ---------------------
> 
> I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
> problem seems to exist for axis() with a yaxp argument.
> 
> The sequence:
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > par(xaxp=c(0,1,4))
> > axis(1)
> 
> does draw an axis with four intervals, though.
> 
> On R-Help, in response to my question about this, Paul Murrell
> <p.murrell@auckland.ac.nz> wrote:
> 
> > This appears to be a bug.  axis() should respond to an "in-line" xaxp
> > setting.
> >
> > I can see a place in the C code where the problem appears to be, but an
> > attempted quick fix failed.


For the record, the place in the C code is in plot.c in do_axis where
there appear to be two problems:  (i)  the code sets a local variable
from the dpptr(dd)->xaxp rather than the gpptr(dd)->xaxp, and (ii) the
code sets this local variable BEFORE calling ProcessInlinePars().  So
there are two obstacles to fix before do_axis will respond to an in-line
xaxp setting.  NOTE also that several other local variables are set from
dpptr(dd)-><something> in the same place, so these should be fixed as
well.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Jun 12 02:30:32 2002
From: p.murrell@auckland.ac.nz (p.murrell@auckland.ac.nz)
Date: Wed, 12 Jun 2002 03:30:32 +0200 (MET DST)
Subject: mtext() alignment of perpendicular text (PR#1659)
Message-ID: <200206120130.DAA06874@pubhealth.ku.dk>


mtext() does a poor job of placing text when it is perpendicular (e.g.,
side=1, las=3) and the font size is not the default.

The following code snippet demonstrates the problem ...

plot(1:10)
abline(v=1:10, col="grey")
axis(3, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=1, las=3)
axis(3, line=-2, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-1, las=3, cex=.5)
axis(3, line=-5, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-4, las=3, cex=2)

The ugliness varies a bit across devices.

In GMtext() in graphics.c there is a hardcoded adjustment of 0.3 which
is described as "purely visual tuning".  I think this needs to be
replaced with a more general solution.

Paul


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 6.0
 year = 2002
 month = 06
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Jun 11 23:59:37 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Wed, 12 Jun 2002 00:59:37 +0200 (CEST)
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
Message-ID: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>


By the way, this is the error message I get:

java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
at java.security.AccessController.checkPermission(AccessController.java:401)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
at java.io.File.isDirectory(File.java:698)
at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
at java.security.AccessController.doPrivileged(Native Method)
at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
at sun.applet.AppletPanel.run(AppletPanel.java:290)
at java.lang.Thread.run(Thread.java:536)

-- 
Michele Alzetta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Jun 12 11:38:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 12 Jun 2002 12:38:06 +0200
Subject: R search applet initialization
In-Reply-To: <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
References: <Pine.LNX.4.44.0206110134470.2007-100000@macchinetta.miadimora>
 <Pine.LNX.4.44.0206120057100.2669-100000@macchinetta.miadimora>
Message-ID: <15623.9358.372881.840891@mithrandir.hornik.net>

>>>>> mikalzet  writes:

> By the way, this is the error message I get:

I get the same, mutatis mutandis.

-k

> java.security.AccessControlException: access denied (java.io.FilePermission /home/mike/.R/doc/html/search/SearchEngine.class read)
> at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)
> at java.security.AccessController.checkPermission(AccessController.java:401)
> at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)
> at java.lang.SecurityManager.checkRead(SecurityManager.java:887)
> at java.io.File.isDirectory(File.java:698)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.connect(PluginFileURLConnection.java:69)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.initializeHeaders(PluginFileURLConnection.java:87)
> at sun.plugin.net.protocol.file.PluginFileURLConnection.getContentLength(PluginFileURLConnection.java:136)
> at sun.applet.AppletClassLoader.getBytes(AppletClassLoader.java:227)
> at sun.applet.AppletClassLoader.access$100(AppletClassLoader.java:40)
> at sun.applet.AppletClassLoader$1.run(AppletClassLoader.java:141)
> at java.security.AccessController.doPrivileged(Native Method)
> at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:138)
> at sun.plugin.security.PluginClassLoader.findClass(PluginClassLoader.java:189)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
> at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:112)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:262)
> at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:473)
> at sun.applet.AppletPanel.createApplet(AppletPanel.java:548)
> at sun.plugin.AppletViewer.createApplet(AppletViewer.java:1621)
> at sun.applet.AppletPanel.runLoader(AppletPanel.java:477)
> at sun.applet.AppletPanel.run(AppletPanel.java:290)
> at java.lang.Thread.run(Thread.java:536)

> -- 
> Michele Alzetta



> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Jun 12 14:26:07 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 12 Jun 2002 09:26:07 -0400
Subject: help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>

(Sorry for the cross-post--- I wasn't sure which list is more
appropriate...)

Hi everyone,

I've run into segfaults when using my randomForest package on large dataset
(e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
mtry=3000).  I'm wondering if anyone can give me some hints on where to look
for the problem.

The randomForest package mainly consists of two things: rf.c contains rf(),
a C wrapper function that calls the Fortran subroutines in rfsub.f that do
most of the work (slightly altered from Breiman's original code).  All
memory allocations are done in rf.c, using S_alloc().  When I run random
forest with the data and setting as mentioned above, it was able to finish
growing the 7000 trees, but segfault when returning from rf() to R.  GDB
gave the following (gdb prompts removed):

do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
    at dotcode.c:1413
1413            break;
1845        PROTECT(ans = allocVector(VECSXP, nargs));
1846        havenames = 0;
1847        if (dup) {
1849            info.cargs = cargs;
1850            info.allArgs = args;
1851            info.nargs = nargs;
1852            info.functionName = buf;
1853            nargs = 0;
1854            for (pargs = args ; pargs != R_NilValue ; pargs =
CDR(pargs)) {
1855                if(argConverters[nargs]) {
1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
which));

Program received signal SIGSEGV, Segmentation fault.
0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
1133                    SEXP next = NEXT_NODE(s);

This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.

Any help/hints/comments are greatly appreciated!

Regards,
Andy

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 12 15:01:56 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Jun 2002 15:01:56 +0100 (BST)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <Pine.GSO.4.44.0206121453430.12434-100000@auk.stats>

(Confined to R-devel).

This almost always means that R's memory system (or malloc's) has been
corrupted by array overruns.

Sometimes gctorture(TRUE) helps.  However in your case it's more likely
those S_alloc calls, so try (temporarily) replacing them by calls to Calloc
and then use something like Purify or `Electric Fence'. to test for
overruns.

On Wed, 12 Jun 2002, Liaw, Andy wrote:

> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)

Only a few people read R-devel and not R-help.

> Hi everyone,
>
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
>
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):

This is just saying it can't allocate the copies for the returned
values of the .C arguments.  I think you might want to consider .Call
given that you are probably using quite large structures.

> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
>
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
>
> Any help/hints/comments are greatly appreciated!
>
> Regards,
> Andy
>
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
>
>
>
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
>
> ==============================================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Jun 12 15:07:57 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 12 Jun 2002 09:07:57 -0500
Subject: help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>; from andy_liaw@merck.com on Wed, Jun 12, 2002 at 09:26:07AM -0400
References: <51F9C42DA15CD311BD220008C707D81906FFC351@usrymx10.merck.com>
Message-ID: <20020612090756.C12694@nokomis.stat.umn.edu>

These symptoms suggest that your code may be writing outside of the
data it allocates, which would trash internal data structures of the R
heap and result in a segfault at a GC.  I would try to find a malloc
debugging library, use malloc in place of S_alloc, and see if the
malloc debugging tools show any malloc heap corruption. The standard
malloc in Mac OS X has very good debugging support if you have access
to that.

luke

On Wed, Jun 12, 2002 at 09:26:07AM -0400, Liaw, Andy wrote:
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c contains rf(),
> a C wrapper function that calls the Fortran subroutines in rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I run random
> forest with the data and setting as mentioned above, it was able to finish
> growing the 7000 trees, but segfault when returning from rf() to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 18:54:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 19:54:10 +0200 (MET DST)
Subject: Fwd: Re: Tcl8.0.4 missing function?! (PR#1640)
Message-ID: <200206121754.TAA14269@pubhealth.ku.dk>




>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>To: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
>Subject: Re: Tcl8.0.4 missing function?! (PR#1640)
>Date: 12 Jun 2002 19:37:21 +0200
> >
> > From help(quantile):
> >
> > ...
> >
> >     `quantile(x,p)' as a function of `p' linearly interpolates the
> >      points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
> >      statistics'') and `n <- length(x)'.
> >
> >      This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
> >      <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
> >      ox[n]'.
> >
> > I think that what is meant is 'ox <- x[order(x)]'?! When I do that,
> > the values from the above formulae correspond to what quantile() gives
> > me...!



RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 12 22:01:59 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 12 Jun 2002 23:01:59 +0200 (MET DST)
Subject: documentation error for quantile (PR#1660)
Message-ID: <200206122101.XAA14806@pubhealth.ku.dk>

>From the documentation to the quantile function:

...

    `quantile(x,p)' as a function of `p' linearly interpolates the
     points ( (i-1)/(n-1), ox[i] ), where `ox <- order(x)' (the ``order
     statistics'') and `n <- length(x)'.

    This gives `quantile(x, p) == (1-f)*ox[i] + f*ox[i+1]', where `r
     <- 1 + (n-1)*p', `i <- floor(r)', `f <- r - i' and `ox[n+1] :=
     ox[n]'.

I think that should be ox <- x[ order(x) ] ! At least, then the formulae 
give the same result as quantile itself!


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 07:22:43 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 08:22:43 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130622.IAA16038@pubhealth.ku.dk>

This is a bad bug as reported by Robin Hankin,
it is still in "R-patched" ...

##- From: Robin Hankin <r.hankin@auckland.ac.nz>
##- To: r-help@stat.math.ethz.ch
##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
##- Date: Thu, 13 Jun 2002 16:46:26 +1200

## .....

## Example slighlty modified (MM)

d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
               1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
               0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
               0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
               0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
               1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
               2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
               0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
               0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
               0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
             nr=50)

fisher.test(d4)
##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
##- Stack length exceeded in f3xact.
##- This problem should not occur.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jun 13 07:59:04 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 13 Jun 2002 08:59:04 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206130659.IAA16339@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
> 
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
> 
> ## .....
> 
> ## Example slighlty modified (MM)
> 
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
> 
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.

Just for the record:
  repeat try(fisher.test(d4))
results in a crash after a few iterations (R-1.5.0 patched on WinNT
4.0).

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Jun 13 11:17:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 13 Jun 2002 12:17:08 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131017.MAA19861@pubhealth.ku.dk>

(CC'ed to R-bugs  ``for the record'')

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Jun 2002, Martin Maechler wrote:
    >> >>>>> "MM" == Martin Maechler
    >> <maechler@stat.math.ethz.ch> writes:
    >> 
    >> >>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
    >> writes:
    BDR> Martin, What makes this a `bad bug'?  Are you getting a
    BDR> seg fault?
    >>
    MM> yes, always in the half a dozen restarts I tried.
    >>  (in the mean time I had one case where it did not ..)
    >> 
    BDR> Like Uwe this works for me the first few times and I do
    BDR> then get a backtrace (in memory.c, so this is almost
    BDR> certainly an earlier overrun).
    >>
    MM> I see.  This has been different for me.
    >>
    BDR> I think we've had problems before with FEXACT
    BDR> incorrectly specifying the required sizes of its
    BDR> workspaces.
    >>  (I'm not so sure this is the problem here.)
    >> 
    >> I found that
    >> 
    >> fisher.test(d4[1:30,])
    >> 
    >> gives a direct segmentation fault (without any error
    >> message) for me.
    >> 

    BDR> I've had to compile up gdb 5.2 to get the correct
    BDR> information out of R on Linux compiled under gcc-3.1.
    BDR> That shows (on the original problem)

    BDR> Loaded symbols for
    BDR> /users/ripley/R/R-patched/library/ctest/libs/ctest.so
    BDR> #0 f3xact (nrow=0x40051074, irow=0x4005113c,
    BDR> ncol=0x40051000, icol=0x40051120, dlp=0x4041b110,
    BDR> mm=0x40050fc0, fact=0x4035f020, ico=0x4035f4dc,
    BDR> iro=0x4035f5a4, it=0x4035f66c, lb=0x4035f734,
    BDR> nr=0x4035f7fc, nt=0x4035f8c4, nu=0x4035f98c,
    BDR> itc=0x4035fa54, ist=0x40360094, stv=0x40364f18,
    BDR> alen=0x40365ba0, tol=0x4004f878) at
    BDR> /users/ripley/R/cvs/R-patched/src/library/ctest/src/fexact.c:1125
    BDR> 1125 ist[itp] = -1; (gdb) print itp $1 = -3544

    BDR> The same with your variant (except the value of itp).

Okay, I found a much smaller table  --- and a different place
for the seg.fault :
> fisher.test(cbind(0,c(0,0,1)))

Program received signal SIGSEGV, Segmentation fault.
f2xact (nrow=0x8a12ec0, ncol=0x8a12ee0, table=0x8b7bb38, ldtabl=0x8a12f00, 
    expect=0x89dad68, percnt=0x89dad90, emin=0x89dadb8, prt=0x89dade0, 
    pre=0x89dae08, fact=0x403b3020, ico=0x403b302c, iro=0x403b3038, 
    kyy=0x403b3044, idif=0x403b3050, irn=0x403b3058, key=0x403b49d4, 
    ldkey=0xbfffc398, ipoin=0x403b5d44, stp=0x403b70b0, ldstp=0xbfffc39c, 
    ifrq=0x403ffef4, dlp=0x4046d450, dsp=0x4046fb30, tm=0x40472210, 
    key2=0x404748f4, iwk=0x403b3060, rwk=0x403b3d30)
    at ../../../../../R/src/library/ctest/src/fexact.c:524
524		obs += fact[ico[j]] - dd;

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 12:16:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 13:16:34 +0200 (MET DST)
Subject: fisher.test FEXACT memory bug "should not occur" (PR#1662)
Message-ID: <200206131116.NAA20860@pubhealth.ku.dk>

This occurred because integer overflow was giving negative keys.

Append the following line at line 1083 of fexact.c

      if (ipn < 1) ipn += ldst; /* because key might be negative */


> fisher.test(d4)

      Fisher's Exact Test for Count Data

data:  d4
p-value = < 2.2e-16
alternative hypothesis: two.sided



On Thu, 13 Jun 2002 maechler@stat.math.ethz.ch wrote:

> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
>
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
>
> ## .....
>
> ## Example slighlty modified (MM)
>
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
>
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 13:38:32 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 08:38:32 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>

Hi all,

Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
anyone?).  The problem seemed to have gone away.

Everyone suggested using some malloc debugger (such as Electric Fence).  All
I did was following half of what BDR suggested below, i.e., changing all the
S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
problem seems to have disappeared!

As I read it from the R-exts manual, the difference between S_alloc and
Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
memory addtional to the heap.  So can anyone explain what's going on?  It's
still kind of mysterious to me...

Again, thanks very, very much for the help!

(Some day I might try to use .Call rather than .C, but I think I need to get
a bit more familiarity with .Call on simpler things before I try it with
randomForest.)

Regards,
Andy

> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 12, 2002 10:02 AM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: Re: [R] help debugging segfaults
> 
> 
> (Confined to R-devel).
> 
> This almost always means that R's memory system (or malloc's) has been
> corrupted by array overruns.
> 
> Sometimes gctorture(TRUE) helps.  However in your case it's 
> more likely
> those S_alloc calls, so try (temporarily) replacing them by 
> calls to Calloc
> and then use something like Purify or `Electric Fence'. to test for
> overruns.
> 
> On Wed, 12 Jun 2002, Liaw, Andy wrote:
> 
> > (Sorry for the cross-post--- I wasn't sure which list is more
> > appropriate...)
> 
> Only a few people read R-devel and not R-help.
> 
> > Hi everyone,
> >
> > I've run into segfaults when using my randomForest package 
> on large dataset
> > (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> > mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> > for the problem.
> >
> > The randomForest package mainly consists of two things: 
> rf.c contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> > most of the work (slightly altered from Breiman's original 
> code).  All
> > memory allocations are done in rf.c, using S_alloc().  When 
> I run random
> > forest with the data and setting as mentioned above, it was 
> able to finish
> > growing the 7000 trees, but segfault when returning from 
> rf() to R.  GDB
> > gave the following (gdb prompts removed):
> 
> This is just saying it can't allocate the copies for the returned
> values of the .C arguments.  I think you might want to consider .Call
> given that you are probably using quite large structures.
> 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = 
> CPtrToRObj(cargs[nargs], CAR(pargs),
> > which));
> >
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);
> >
> > This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> > on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled 
> from source.
> >
> > Any help/hints/comments are greatly appreciated!
> >
> > Regards,
> > Andy
> >
> > Andy I. Liaw, PhD
> > Biometrics Research          Phone: (732) 594-0820
> > Merck & Co., Inc.              Fax: (732) 594-1565
> > P.O. Box 2000, RY70-38            Rahway, NJ 07065
> > mailto:andy_liaw@merck.com
> >
> >
> >
> > 
> --------------------------------------------------------------
> ----------------
> > Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> >
> > 
> ==============================================================
> ================
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 13 14:28:36 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 13 Jun 2002 09:28:36 -0400
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <kb7hguot6ics8pl88gjeschevf8ceckvn8@4ax.com>

On Thu, 13 Jun 2002 08:38:32 -0400, you wrote in message
<51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>:

>Hi all,
>
>Thanks to Prof. Ripley, Prof. Gentleman, and Simon Wood (did I miss
>anyone?).  The problem seemed to have gone away.
>
>Everyone suggested using some malloc debugger (such as Electric Fence).  All
>I did was following half of what BDR suggested below, i.e., changing all the
>S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
>problem seems to have disappeared!

In my experience, that's not such good news.  The bug is probably
still there, it just doesn't have obvious symptoms in the tests you're
using.  I'd still recommend using the malloc debugger to try to track
it down.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 13 16:57:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jun 2002 17:57:21 +0200 (MET DST)
Subject: bad fisher.test() bug (PR#1662)
Message-ID: <200206131557.RAA24474@pubhealth.ku.dk>

On Thu, 13 Jun 2002, Martin Maechler wrote:

> Okay, I found a much smaller table  --- and a different place
> for the seg.fault :
> > fisher.test(cbind(0,c(0,0,1)))


That one is easy:  You (MM) have calculated fact[2], but fact is only of
length 2 (for values 0 and 1), so ico gets overwritten.

I now suspect that my fix for the original bug is merely a fix for a
symptom, so am going to replace it by an error message.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Jun 13 17:05:13 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 13 Jun 2002 09:05:13 -0700 (PDT)
Subject: [R] help debugging segfaults
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC35C@usrymx10.merck.com>
Message-ID: <Pine.A41.4.44.0206130857300.115682-100000@homer10.u.washington.edu>

On Thu, 13 Jun 2002, Liaw, Andy wrote:
>
> Everyone suggested using some malloc debugger (such as Electric Fence).  All
> I did was following half of what BDR suggested below, i.e., changing all the
> S_alloc() calls to Calloc() and Free().  I didn't get to try efence, and the
> problem seems to have disappeared!

No, the *symptoms* have disappeared. This is not necessarily an
improvement.

> As I read it from the R-exts manual, the difference between S_alloc and
> Calloc is that S_alloc takes memory from the heap, whereas Calloc takes
> memory addtional to the heap.  So can anyone explain what's going on?  It's
> still kind of mysterious to me...

It looked as if your code was writing to/reading from memory that didn't
belong to it. What happens then depends on who the memory does belong to,
and what they are doing with it. There's no guarantee that just because it
doesn't crash today that it won't in the future, or worse, start giving
subtly wrong answers.

A segmentation fault is a good thing in this context -- it's a sign that
the operating system has protected you from the consequences of your
actions by killing the program.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Jun 13 17:48:09 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 13 Jun 2002 12:48:09 -0400
Subject: [R] help debugging segfaults
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC365@usrymx10.merck.com>

OK, so I linked my code against libefence and then run my test code under
gdb.  It still finishes without reporting any problem.  (This is with
Calloc() and Free(), instead of S_alloc().)  Can anyone tell me what to do
or look for next?  I'll be eternally grateful!

Regards,
Andy

> -----Original Message-----
> From: Thomas Lumley [mailto:tlumley@u.washington.edu]
> Sent: Thursday, June 13, 2002 12:05 PM
> To: Liaw, Andy
> Cc: 'r-devel@stat.math.ethz.ch'
> Subject: RE: [R] help debugging segfaults
> 
> 
> On Thu, 13 Jun 2002, Liaw, Andy wrote:
> >
> > Everyone suggested using some malloc debugger (such as 
> Electric Fence).  All
> > I did was following half of what BDR suggested below, i.e., 
> changing all the
> > S_alloc() calls to Calloc() and Free().  I didn't get to 
> try efence, and the
> > problem seems to have disappeared!
> 
> No, the *symptoms* have disappeared. This is not necessarily an
> improvement.
> 
> > As I read it from the R-exts manual, the difference between 
> S_alloc and
> > Calloc is that S_alloc takes memory from the heap, whereas 
> Calloc takes
> > memory addtional to the heap.  So can anyone explain what's 
> going on?  It's
> > still kind of mysterious to me...
> 
> It looked as if your code was writing to/reading from memory 
> that didn't
> belong to it. What happens then depends on who the memory 
> does belong to,
> and what they are doing with it. There's no guarantee that 
> just because it
> doesn't crash today that it won't in the future, or worse, 
> start giving
> subtly wrong answers.
> 
> A segmentation fault is a good thing in this context -- it's 
> a sign that
> the operating system has protected you from the consequences of your
> actions by killing the program.
> 
> 	-thomas
> 
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Jun 13 20:36:42 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 13 Jun 2002 21:36:42 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206131936.VAA25196@pubhealth.ku.dk>


There appears to be a mild bug, or at least a deficiency, in
rnorm.  The bug becomes apparent when one looks at extremes
of the squares of the values generated by rnorm; rnorm is not
generating quite enough extreme values.

The R version that I am using is 1.4.1; I never got around to installing
1.5.0, and now since 1.5.1 is about to come out ....  However, checking
the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

Version details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R

More detail regarding how the bug revealed itself:
==================================================

	For n = 100, 200, ..., 1500

	o I generated 1000 sequences of length n via rnorm(n),

	o for each sequence x, I calculated m = the max of x^2

	o I then calculated pval = 1 - pchisq(m,1)^n

	o I then calculated s.hat.n = #{pval: pval < 0.05}/1000

I then plotted s.hat.n versus n.  This ***should*** give a result
close to a horizontal straight line, at height 0.05 --- but it
didn't.  For the larger values of n, the values of s.hat.n were
displaced significantly below 0.05.

After some discussion with colleagues, I replaced the calls to rnorm()
by calls to myrnorm() defined by

	myrnorm <- function(n,mu=0,sigma=1){
		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
	}

which uses the ``(r,theta)'' method of generating random normals.

When I did so, the resulting values were indeed all ``close to'' 0.05,
as they should be.

I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
then of course taking m = max of x --- rather than max of x^2).  Again
all the resulting values were close to 0.05 as ought to be the case.
(So rchisq() appears to be OK in this regard.)

Enclosed below is a script to demonstrate the bug.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
#
# Script to demonstrate the bug in rnorm.
#
myrnorm <- function(n,mu=0,sigma=1){
	mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
}

# If RFUN <- rnorm we get ``wrong'' answers; if RFUN <- myrnorm,
# we get ``right'' answers.
RFUN <- rnorm

NSER <- 1000
set.seed(350734)
rslt <- list()

for(K in 1:15) {
	N   <- 100*K
	M   <- matrix(RFUN(NSER*N),N,NSER)
	T2  <- apply(M,2,function(x){max(x**2)})
	PV  <- 1 - pchisq(T2,1)**N
	SZ  <- sum(PV < 0.05)/NSER
	rslt[[K]] <- SZ
	cat(K,"\n")
}

rslt <- unlist(rslt)
plot(100*(1:15),rslt,ylim=c(0,0.1),xlab='n',ylab='s.hat.n')
abline(h=0.05)
error.bar(100*(1:15),rslt,lower=1.96*sqrt(0.05*0.95/1000),add=TRUE)

# Clean up:
rm(RFUN,NSER,K,N,M,T2,PV,SZ)
#==+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 22:59:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jun 2002 23:59:43 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206131936.VAA25196@pubhealth.ku.dk>
References: <200206131936.VAA25196@pubhealth.ku.dk>
Message-ID: <x2lm9ion5c.fsf@blueberry.kubism.ku.dk>

rolf@math.unb.ca writes:

> There appears to be a mild bug, or at least a deficiency, in
> rnorm.  The bug becomes apparent when one looks at extremes
> of the squares of the values generated by rnorm; rnorm is not
> generating quite enough extreme values.
> 
> The R version that I am using is 1.4.1; I never got around to installing
> 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.

...and I see the effect too with an r-patched from a few days back.


[snip]
> After some discussion with colleagues, I replaced the calls to rnorm()
> by calls to myrnorm() defined by
> 
> 	myrnorm <- function(n,mu=0,sigma=1){
> 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> 	}
> 
> which uses the ``(r,theta)'' method of generating random normals.
> 
> When I did so, the resulting values were indeed all ``close to'' 0.05,
> as they should be.
> 
> I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> then of course taking m = max of x --- rather than max of x^2).  Again
> all the resulting values were close to 0.05 as ought to be the case.
> (So rchisq() appears to be OK in this regard.)

Also qnorm(runif(n)) seems to be closer to the target.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 13 23:39:58 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 14 Jun 2002 00:39:58 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206132239.AAA25804@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> rolf@math.unb.ca writes:
> 
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> > 
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
> 
> ...and I see the effect too with an r-patched from a few days back.

No I do not! My quick check code took the square of the max rather
than the max of the square...

With your script, I get a nice horizontal line both with 1.4.0 and
1.5.0-patched.

(RedHat Linux 7.1 on a PC) 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 14 02:03:16 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 13 Jun 2002 21:03:16 -0400
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <200206132239.AAA25804@pubhealth.ku.dk>
References: <200206132239.AAA25804@pubhealth.ku.dk>
Message-ID: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>

On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
wrote:

>With your script, I get a nice horizontal line both with 1.4.0 and
>1.5.0-patched.
>
>(RedHat Linux 7.1 on a PC) 

I get what Rolf described in 1.5.0-patched for Windows with the
default generators: 

RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"  

I switched to the Ahrens-Dieter normal RNG (using
RNGkind(,'Ahrens-Dieter')), and things were fine.  

Keeping the default normal generator but switching to the
Mersenne-Twister uniform also fixed it:

> RNGkind()
[1] "Mersenne-Twister" "Kinderman-Ramage"

Is it possible you're not using the default generators?  If you are,
this is quite weird, because we're on the same hardware.  Why would
the OS or compiler matter in a calculation like this??

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 08:24:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 09:24:14 +0200 (MET DST)
Subject: Bug in rnorm. (PR#1664)
Message-ID: <200206140724.JAA27319@pubhealth.ku.dk>

R supplies a choice of random-number generators as well as a choice of
generating normals.  All methods are compromises, and I suspect one of the
non-default ones may be better for your purposes.  Please investigate the
choices.


On 13 Jun 2002, Peter Dalgaard BSA wrote:

> rolf@math.unb.ca writes:
>
> > There appears to be a mild bug, or at least a deficiency, in
> > rnorm.  The bug becomes apparent when one looks at extremes
> > of the squares of the values generated by rnorm; rnorm is not
> > generating quite enough extreme values.
> >
> > The R version that I am using is 1.4.1; I never got around to installing
> > 1.5.0, and now since 1.5.1 is about to come out ....  However, checking
> > the 1.5.0 release notes revealed no mention of fixing a bug in rnorm.
>
> ...and I see the effect too with an r-patched from a few days back.
>
>
> [snip]
> > After some discussion with colleagues, I replaced the calls to rnorm()
> > by calls to myrnorm() defined by
> >
> > 	myrnorm <- function(n,mu=0,sigma=1){
> > 		mu + sigma*cos(2*pi*runif(n))*sqrt(-2*log(runif(n)))
> > 	}
> >
> > which uses the ``(r,theta)'' method of generating random normals.
> >
> > When I did so, the resulting values were indeed all ``close to'' 0.05,
> > as they should be.
> >
> > I also tried the experiment using rchisq(n,1) instead of rnorm(n) (and
> > then of course taking m = max of x --- rather than max of x^2).  Again
> > all the resulting values were close to 0.05 as ought to be the case.
> > (So rchisq() appears to be OK in this regard.)
>
> Also qnorm(runif(n)) seems to be closer to the target.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 08:42:45 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 09:42:45 +0200 (MET DST)
Subject: homedrive in Rconsole.Rd (PR#1668)
Message-ID: <200206140742.JAA27561@pubhealth.ku.dk>

As earlier posted this day on R-help (thread: "[R] Problem about
Rconsole: R for Windows Version 1.5.0 Patched (2002-06-05 and
2002-06-12)", there seems to be a documentation bug for ?Rconsole. 

>From ?Rconsole, section Details:

   If the environment variable `R_USER' is not set, the R system sets
   it to `HOME' if that is set (stripping any trailing slash),
   otherwise to `HOMEDIR:HOMEPATH' if `HOMEDIR' is set otherwise to
   the working directory.

HOMEDIR should be replaced by HOMEDRIVE in this section:


 diff  ...../src/library/base/man/windows/Rconsole.Rd  Rconsole-new.Rd

32c32
<   slash), otherwise to \code{HOMEDIR:HOMEPATH} if \code{HOMEDIR} is
set
---
>   slash), otherwise to \code{HOMEDRIVE:HOMEPATH} if \code{HOMEDRIVE} is set


[R-1.5.0 patched (2002-06-12), Windows NT 4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 14 09:14:29 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2002 10:14:29 +0200
Subject: Bug in rnorm. (PR#1664)
In-Reply-To: <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
References: <200206132239.AAA25804@pubhealth.ku.dk>
 <vueigucgpfqqvp7p8smsnn29cvgit5icka@4ax.com>
Message-ID: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> wrote:
> 
> >With your script, I get a nice horizontal line both with 1.4.0 and
> >1.5.0-patched.
> >
> >(RedHat Linux 7.1 on a PC) 
> 
> I get what Rolf described in 1.5.0-patched for Windows with the
> default generators: 
> 
> RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"  
> 
> I switched to the Ahrens-Dieter normal RNG (using
> RNGkind(,'Ahrens-Dieter')), and things were fine.  
> 
> Keeping the default normal generator but switching to the
> Mersenne-Twister uniform also fixed it:
> 
> > RNGkind()
> [1] "Mersenne-Twister" "Kinderman-Ramage"
> 
> Is it possible you're not using the default generators?  If you are,
> this is quite weird, because we're on the same hardware.  Why would
> the OS or compiler matter in a calculation like this??
> 
> Duncan Murdoch
> 

Now this is pretty darn odd....

This is what happened to me yesterday with 1.4.0:

[Previously saved workspace restored]

> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 39
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 37
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 63
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 50
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 51

This morning, I get

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"    
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 27
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 23
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29
> m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> sum( 1 - pchisq(m,1)^1500 < .05)
[1] 29

with the SAME version of R. The only difference is the startup
directory, and hence the saved workspace. This contains:

> ls(all=T)
[1] ".Random.seed" "x"            "y"           
> .Random.seed
[1]     0 25300 11635 10783

..whereas 1.5.0 which now again shows trouble has

>  .Random.seed
[1]         1 196857153 319227924

and 1.4.0 in a clean dir has this after a few iterations of the above

>  .Random.seed
[1]          1 1297109091   47580530


Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
no matter what RNGkind() is telling me??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 14 10:03:45 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 14 Jun 2002 10:03:45 +0100 (BST)
Subject: What RNGkind does (was Re: Bug in rnorm. (PR#1664))
In-Reply-To: <x27kl2cm56.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0206140949330.6521-100000@gannet.stats>

Just so we understand:

> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> .Random.seed <- c(0, 1, 2, 3)
> RNGkind()
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> runif(1)
[1] 0.03381877
> RNGkind()
[1] "Wichmann-Hill"    "Kinderman-Ramage"

?RNGkind says

`RNGkind' returns a two-element character vector of the RNG and
normal kinds in use before the call,
                    ^^^^^^
However, any use of the random number generators themselves loads
.Random.seed (if it exist), and that will set the types of random
numbers in use.  So if a user changes .Random.seed (for example by
loading a saved workspace) the types will change.  RNGkind() reports
retrospectively (as it is documented to), not prospectively.

Now we could alter RNGkind() to read in the current .Random.seed (if there
is one) although it is a bit tricky to decide what to do if the value is
invalid.  (The random-number generation code throws an error and
expects thse user to fix, e.g  remove, .Random.seed.)


On 14 Jun 2002, Peter Dalgaard BSA wrote:

> Duncan Murdoch <dmurdoch@pair.com> writes:
>
> > On Fri, 14 Jun 2002 00:39:58 +0200 (MET DST), p.dalgaard@biostat.ku.dk
> > wrote:
> >
> > >With your script, I get a nice horizontal line both with 1.4.0 and
> > >1.5.0-patched.
> > >
> > >(RedHat Linux 7.1 on a PC)
> >
> > I get what Rolf described in 1.5.0-patched for Windows with the
> > default generators:
> >
> > RNGkind()
> > [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> >
> > I switched to the Ahrens-Dieter normal RNG (using
> > RNGkind(,'Ahrens-Dieter')), and things were fine.
> >
> > Keeping the default normal generator but switching to the
> > Mersenne-Twister uniform also fixed it:
> >
> > > RNGkind()
> > [1] "Mersenne-Twister" "Kinderman-Ramage"
> >
> > Is it possible you're not using the default generators?  If you are,
> > this is quite weird, because we're on the same hardware.  Why would
> > the OS or compiler matter in a calculation like this??
> >
> > Duncan Murdoch
> >
>
> Now this is pretty darn odd....
>
> This is what happened to me yesterday with 1.4.0:
>
> [Previously saved workspace restored]
>
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 39
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 37
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 63
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 50
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 51
>
> This morning, I get
>
> > RNGkind()
> [1] "Marsaglia-Multicarry" "Kinderman-Ramage"
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 27
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 23
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
> > m <- sapply(1:1000, function(i)max(rnorm(1500)^2))
> > sum( 1 - pchisq(m,1)^1500 < .05)
> [1] 29
>
> with the SAME version of R. The only difference is the startup
> directory, and hence the saved workspace. This contains:
>
> > ls(all=T)
> [1] ".Random.seed" "x"            "y"
> > .Random.seed
> [1]     0 25300 11635 10783
>
> ..whereas 1.5.0 which now again shows trouble has
>
> >  .Random.seed
> [1]         1 196857153 319227924
>
> and 1.4.0 in a clean dir has this after a few iterations of the above
>
> >  .Random.seed
> [1]          1 1297109091   47580530
>
>
> Oho! I think I get it: the "1" in the seed actually *defines* the RNG,
> no matter what RNGkind() is telling me??



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jun 14 17:50:01 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 14 Jun 2002 18:50:01 +0200 (MET DST)
Subject: minor quirk in rnbinom (PR#1669)
Message-ID: <200206141650.SAA04208@pubhealth.ku.dk>

Just for the records (was on R-help).

Uwe Ligges

-------- Original Message --------
Subject: Re: [R] minor quirk in rnbinom
Date: Fri, 14 Jun 2002 18:47:59 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
To: Mike Lonergan <mel@mcs.st-and.ac.uk>
CC: r-help <r-help@stat.math.ethz.ch>
References: <NEBBJLLBCLEDFLCCBKDAEEEKCGAA.mel@mcs.st-andrews.ac.uk>

Mike Lonergan wrote:
> 
> I don't want to spoil a nice joke, and recognise it's not a bug as it does
> have the intended effect, but the error message that is returned if rnbinom
> is given four parameters is slightly obscure:
> 
> > rnbinom(0.5,0.5,0.5,0.5)
> Error in rnbinom(0.5, 0.5, 0.5, 0.5) : couldn't find function "error"


That's a bug, of course 

  error("prob and mu both specified")

should be

  stop("prob and mu both specified")

in that function.

[R-1.5.0 patched 2002-06-12, WinNT4.0]

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Jun 14 19:04:43 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 14 Jun 2002 14:04:43 -0400
Subject: pretty() sometimes isn't
Message-ID: <15626.12347.920840.33141@gargle.gargle.HOWL>

Hi all,

R> seq(-.4, .8, length=7)
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

Well that may not be a "bug", but it has this unfortunate consequence:

R> pretty(c(-.4,.8))
  [1] -4.000000e-01 -2.000000e-01  5.551115e-17  2.000000e-01  4.000000e-01
  [6]  6.000000e-01  8.000000e-01

And thus my plot axes look funny unless I apply zapsmall:
R> plot(c(-.4,.8), c(-.4,.8), axes=F)
R> axis(1, at=pretty(c(-.4,.8)))               # Yuck!
R> axis(2, at=zapsmall(pretty(c(-.4,.8))))     # Better!

So here's my simple suggestion: change the last line of pretty() from:
   seq(z$l, z$u, length = z$n + 1)
to:
   zapsmall(seq(z$l, z$u, length = z$n + 1))

I'm running R-1.5.0 on platform sparc-sun-solaris2.6.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 14 20:00:27 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 14 Jun 2002 15:00:27 -0400
Subject: Methods package
Message-ID: <3D0A3D4B.E792914@research.bell-labs.com>

There is a new installation of the methods package on r-devel.  Two main
changes:

1.  generic functions are now an actual class (which extends
"function").

2.  method definitions are specific to the package associated with the
generic function, as well as with the name of the generic.

The second change will help methods fit in with name spaces and should
get over problems with conflicting generic function names.

You will have to re-install any of your own packages from source, if you
have been using the result of INSTALL --save (because the meta-object
names now include the package, for one reason).

The symptom that you need to do that is a warning about "methods object
... has no package name" when you attach your package.

Otherwise there should be no change needed for current applications.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:00:08 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:00:08 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151000.MAA06063@pubhealth.ku.dk>

Full_Name: Jeremy Fox
Version: 1.5.0
OS: Solaris 8, 64 bit
Submission from: (NULL) (171.64.232.63)



I am compiling R under Solaris and the compilation stops at this point. The
problem only happens when I link in readline. The R binary is actually compiled
and readlne works.
The main problem with the compiled  binary (other than that all the supporting
files were not
correctly installed) is that it prints out the error 

Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  

the first time I try to do something. It generally prints out only once, but may
be the
cause of the problem with the break in the make process I am worried about.

I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
Appendix
B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
definiteness, they are

CC="cc -xarch=v9"
CFLAGS="-xO5 -xlibmil -dalign"
F77="f95 -xarch=v9"
FFLAGS="-xO5 -xlibmil -dalign"
CXX=CC
CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"

Without readline, the make command exectutes fine.  Here is the actual bug

mkdir -p -- ../../../../library/methods/libs
make[5]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Leaving directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
make[4]: Entering directory
`/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
dumping R code in package 'methods'
Warning message: 
There is no package called `ctest' in: library(package, char = TRUE, logical =
TRUE, warn.conflicts = warn.conflicts,  
Error in file == "" : comparison (1) is possible only for atomic types
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1


The file all.rda is not created. This may be because of this unimportant error
message
about ctest that somehow involves the readline package. I am using Readline
4.2a.

Thanks for any help, Jeremy


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 15 11:13:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 15 Jun 2002 12:13:51 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151013.MAA06104@pubhealth.ku.dk>

1) Was readline compiled under those same flags?  Was it compiled
under 64-bit mode at all?  (The manual does warn about that.)

2) You should be able to get ctest built by

(cd src/library/ctest; make)

but that should have happened anyway.

3) The actual error seems to be in interpreting the methods code.
That has nothing to do with readline (it is run in batch mode) so
there must be another difference.  It all points to problems with your
readline library.

Are you sure that there are not earlier error messages you have
overlooked/ignored?

On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:

> Full_Name: Jeremy Fox
> Version: 1.5.0
> OS: Solaris 8, 64 bit
> Submission from: (NULL) (171.64.232.63)
>
>
>
> I am compiling R under Solaris and the compilation stops at this point. The
> problem only happens when I link in readline. The R binary is actually compiled
> and readlne works.
> The main problem with the compiled  binary (other than that all the supporting
> files were not
> correctly installed) is that it prints out the error
>
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
>
> the first time I try to do something. It generally prints out only once, but may
> be the
> cause of the problem with the break in the make process I am worried about.
>
> I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> Appendix
> B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> definiteness, they are
>
> CC="cc -xarch=v9"
> CFLAGS="-xO5 -xlibmil -dalign"
> F77="f95 -xarch=v9"
> FFLAGS="-xO5 -xlibmil -dalign"
> CXX=CC
> CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
>
> Without readline, the make command exectutes fine.  Here is the actual bug
>
> mkdir -p -- ../../../../library/methods/libs
> make[5]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Leaving directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> make[4]: Entering directory
> `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> dumping R code in package 'methods'
> Warning message:
> There is no package called `ctest' in: library(package, char = TRUE, logical =
> TRUE, warn.conflicts = warn.conflicts,
> Error in file == "" : comparison (1) is possible only for atomic types
> Execution halted
> make[4]: *** [../../../library/methods/R/all.rda] Error 1
>
>
> The file all.rda is not created. This may be because of this unimportant error
> message
> about ctest that somehow involves the readline package. I am using Readline
> 4.2a.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerfox@stanford.edu  Sat Jun 15 11:43:04 2002
From: jerfox@stanford.edu (jerfox@stanford.edu)
Date: Sat, 15 Jun 2002 12:43:04 +0200 (MET DST)
Subject: Late Make Problem with Readline (PR#1673)
Message-ID: <200206151043.MAA06185@pubhealth.ku.dk>

Thanks for the quick reply.

On Sat, Jun 15, 2002 at 11:12:55AM +0100, ripley@stats.ox.ac.uk wrote:
> 1) Was readline compiled under those same flags?  Was it compiled
> under 64-bit mode at all?  (The manual does warn about that.)

Which manual? But anyway, I double checked and the version of readline
that I compiled uses the exact same flags. The configure script also
does not recognize readline when I do not link in the directory where
I compiled readline, so it is not a case of some other 32 bit readline
library being read in.

> 2) You should be able to get ctest built by
> 
> (cd src/library/ctest; make)
> 
> but that should have happened anyway.

It compiled fine but R does not stop its error message.

> 3) The actual error seems to be in interpreting the methods code.
> That has nothing to do with readline (it is run in batch mode) so
> there must be another difference.  It all points to problems with your
> readline library.

OK.

> Are you sure that there are not earlier error messages you have
> overlooked/ignored?

Here are the two warnings before the fatal errors. I checked the line
numbers and I would think these files are not causing the problems I
am experiencing. I am certain the X libraries and whatever is being
read in from /usr/local/include are not 64 bit, but X11() seems to
work fine anyway.

cc -xarch=v9 -I. -I../../src/include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H   -xO5 -xlibmil -dalign -c graphics.c -o graphics.o
"graphics.c", line 5358: warning: initializer does not fit or is out of range: -1

cc -xarch=v9 -I. -I../../../src/include -I../../../src/include -I/usr/pubsw/X11R6/include -I/usr/local/include -DHAVE_CONFIG_H  -KPIC  -xO5 -xlibmil -dalign -c devX11.c -o .libs/devX11.o
"devX11.c", line 1081: warning: statement not reached
"devX11.c", line 1095: warning: statement not reached
"devX11.c", line 1407: warning: statement not reached

Thanks, Jeremy

> On Sat, 15 Jun 2002 jerfox@stanford.edu wrote:
> 
> > Full_Name: Jeremy Fox
> > Version: 1.5.0
> > OS: Solaris 8, 64 bit
> > Submission from: (NULL) (171.64.232.63)
> >
> >
> >
> > I am compiling R under Solaris and the compilation stops at this point. The
> > problem only happens when I link in readline. The R binary is actually compiled
> > and readlne works.
> > The main problem with the compiled  binary (other than that all the supporting
> > files were not
> > correctly installed) is that it prints out the error
> >
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> >
> > the first time I try to do something. It generally prints out only once, but may
> > be the
> > cause of the problem with the break in the make process I am worried about.
> >
> > I am using 64 bit Solaris, with the 64 bit with Sun Forte flags as advocated in
> > Appendix
> > B. 7.2 of the Installation Guide. I compiled readline with the same flags. For
> > definiteness, they are
> >
> > CC="cc -xarch=v9"
> > CFLAGS="-xO5 -xlibmil -dalign"
> > F77="f95 -xarch=v9"
> > FFLAGS="-xO5 -xlibmil -dalign"
> > CXX=CC
> > CXXFLAGS="-xO5 -xlibmil -dalign -xarch=v9"
> >
> > Without readline, the make command exectutes fine.  Here is the actual bug
> >
> > mkdir -p -- ../../../../library/methods/libs
> > make[5]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Leaving directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods/src'
> > make[4]: Entering directory
> > `/afs/ir.stanford.edu/users/w/o/wolak/jerfox/RProj/R-1.5.0/src/library/methods'
> > dumping R code in package 'methods'
> > Warning message:
> > There is no package called `ctest' in: library(package, char = TRUE, logical =
> > TRUE, warn.conflicts = warn.conflicts,
> > Error in file == "" : comparison (1) is possible only for atomic types
> > Execution halted
> > make[4]: *** [../../../library/methods/R/all.rda] Error 1
> >
> >
> > The file all.rda is not created. This may be because of this unimportant error
> > message
> > about ctest that somehow involves the readline package. I am using Readline
> > 4.2a.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
------------------------
Jeremy T. Fox
jerfox@stanford.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcmahill@mtl.mit.edu  Sun Jun 16 00:21:53 2002
From: mcmahill@mtl.mit.edu (mcmahill@mtl.mit.edu)
Date: Sun, 16 Jun 2002 01:21:53 +0200 (MET DST)
Subject: R configure.in makes bad alpha assumptions (PR#1676)
Message-ID: <200206152321.BAA07428@pubhealth.ku.dk>


Hi,

I was looking at configure.in for R-1.4.1 and in the
  case "${host_cpu}" in
part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
is an OSF specific, not alpha specific issue.  In particular, if someone
used f2c-f77 (shell script which emulates a fortran compiler with f2c and
the c compiler), they'd get the broken -fpe3.  I'd probably either test
for OSF before adding -fpe3


-dan




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Sun Jun 16 00:38:41 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Sun, 16 Jun 2002 01:38:41 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206152338.BAA07466@pubhealth.ku.dk>

Full_Name: Michael Peck
Version: 1.5.0 (12 Jun patch)
OS: win2k + sp2
Submission from: (NULL) (65.113.251.175)


Bookmarks from table of contents as well as links in text and index do not
work.

Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
4.0, so I downloaded the most recent version].

OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

This appears to be the same problem reported in message ID 1550 now listed in
documentation-fixed.

Michael Peck


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 16 01:34:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Jun 2002 02:34:23 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206160034.CAA07528@pubhealth.ku.dk>

This is not reproducible with a clean build from the sources of June 15
using the recommended tools.

If you still find a problem with the current R-patched, please supply
details of how exactly you built refman.pdf, including the version numbers
of pdftex, hyperref, latex, etc.

On Sun, 16 Jun 2002 mpeck1@ix.netcom.com wrote:

> Full_Name: Michael Peck
> Version: 1.5.0 (12 Jun patch)
> OS: win2k + sp2
> Submission from: (NULL) (65.113.251.175)
>
>
> Bookmarks from table of contents as well as links in text and index do not
> work.
>
> Using Acrobat Reader 5.0.5 9/24/01. [Same behavior was noted in Acrobat reader
> 4.0, so I downloaded the most recent version].
>
> OS is Win 2k, R was installed from SetupRpatched.exe dated 12 June 02.

And verified by your own build on what system?  Your subject line implies
the problem is in R, not a particular binary, so we must assume that you
did build refman.pdf yourself.

> This appears to be the same problem reported in message ID 1550 now listed in
> documentation-fixed.

Please verify that by looking at the PDF file in a text editor and checking
that there is an invalid link for `(-class' (no matching right
parenthesis).  If there is, the file has not been generated by R-patched
recently.  If not, it is not the same bug.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xint@stat.rutgers.edu  Sun Jun 16 04:43:01 2002
From: xint@stat.rutgers.edu (xint@stat.rutgers.edu)
Date: Sun, 16 Jun 2002 05:43:01 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206160343.FAA07762@pubhealth.ku.dk>

Full_Name: Xin Tian
Version: 1.5.0 or 1.4.0
OS: windows 2000
Submission from: (NULL) (165.230.240.114)


I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
After installation, whenever I clicked R icon, it returned to me an
 error message:
"Rgui.exe has generated errors and will be closed by windows. You 
 will need to restart the program. 
An error log is being created."

So I could NOT start up R.

I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
But I tried to install R several times to my PC this time using windows2000 and
had the above problem.  I know R works fine in my friend's computer with windows
2000.
I have seen this problem in old R mailling list, but I don't know if
there are any solutions yet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 07:05:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 08:05:49 +0200 (MET DST)
Subject: Can NOT start R in windows2000 (PR#1678)
Message-ID: <200206170605.IAA08603@pubhealth.ku.dk>

Those versions do run on Windows 2000, so the problem is with your
machine.  Can you send the error log?

Can we suggest reinstalling Windows?

On Sun, 16 Jun 2002 xint@stat.rutgers.edu wrote:

> Full_Name: Xin Tian
> Version: 1.5.0 or 1.4.0
> OS: windows 2000
> Submission from: (NULL) (165.230.240.114)
>
>
> I tried to install R 1.5.0 or R 1.4.0 to my PC with windows2000.
> After installation, whenever I clicked R icon, it returned to me an
>  error message:
> "Rgui.exe has generated errors and will be closed by windows. You
>  will need to restart the program.
> An error log is being created."
>
> So I could NOT start up R.
>
> I have installed R 1.5.0 in the same PC (amd CPU) before when I used windows98.
> But I tried to install R several times to my PC this time using windows2000 and
> had the above problem.  I know R works fine in my friend's computer with windows
> 2000.
> I have seen this problem in old R mailling list, but I don't know if
> there are any solutions yet.

In all cases, corrupted versions of Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mpeck1@ix.netcom.com  Mon Jun 17 08:50:55 2002
From: mpeck1@ix.netcom.com (mpeck1@ix.netcom.com)
Date: Mon, 17 Jun 2002 09:50:55 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170750.JAA10383@pubhealth.ku.dk>

I sent this reply to Prof. Ripley earlier today, but failed to include his 
copy to recipients.

The issue, assuming it's not my own stupidity, is with the precompiled 
binary distribution for Windows dated 12 June that is now available on CRAN.

Looking again at his reply I see that he asked me a question that I'm 
actually equipped to answer:

> > This appears to be the same problem reported in message ID 1550 now 
> listed in
> > documentation-fixed.
>Please verify that by looking at the PDF file in a text editor and checking
>that there is an invalid link for `(-class' (no matching right

The only match I found for this string contained the text '(Rfn.(-class)' 
with white space on either side of the quoted string. There is no second 
parenthesis visible nearby.

At 17:32 6/15/2002 -0700, you wrote:
>This is not reproducible with a clean build from the sources of June 15
>using the recommended tools.
>
>If you still find a problem with the current R-patched, please supply
>details of how exactly you built refman.pdf, including the version numbers
>of pdftex, hyperref, latex, etc.

Sorry, I must not have been clear enough. I installed from the precompiled 
binary distribution for windows downloaded from CRAN. The file I installed 
from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do 
the build myself.

If this is any help here is the output of R.version:

>          _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status   Patched
>major    1
>minor    5.0
>year     2002
>month    06
>day      12
>language R

Thanks -

Michael Peck

------
Michael Peck
mpeck1@ix.netcom.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 09:09:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 10:09:11 +0200 (MET DST)
Subject: refman.pdf - bookmarks & links broken (PR#1677)
Message-ID: <200206170809.KAA10745@pubhealth.ku.dk>

This is a reasonable clear indication that the pre-compiled version has
not be made from scratch since May 15, when PR#1550 was fixed.
The date on library/methods/latex/LanguageClasses.tex will be the clue.

The dependencies in the Makefiles do not pick up revisions of the tools
used.  I *always* do make distclean before generating a distribution.


On Mon, 17 Jun 2002 mpeck1@ix.netcom.com wrote:

> I sent this reply to Prof. Ripley earlier today, but failed to include his
> copy to recipients.
>
> The issue, assuming it's not my own stupidity, is with the precompiled
> binary distribution for Windows dated 12 June that is now available on CRAN.
>
> Looking again at his reply I see that he asked me a question that I'm
> actually equipped to answer:
>
> > > This appears to be the same problem reported in message ID 1550 now
> > listed in
> > > documentation-fixed.
> >Please verify that by looking at the PDF file in a text editor and checking
> >that there is an invalid link for `(-class' (no matching right
>
> The only match I found for this string contained the text '(Rfn.(-class)'
> with white space on either side of the quoted string. There is no second
> parenthesis visible nearby.
>
> At 17:32 6/15/2002 -0700, you wrote:
> >This is not reproducible with a clean build from the sources of June 15
> >using the recommended tools.
> >
> >If you still find a problem with the current R-patched, please supply
> >details of how exactly you built refman.pdf, including the version numbers
> >of pdftex, hyperref, latex, etc.
>
> Sorry, I must not have been clear enough. I installed from the precompiled
> binary distribution for windows downloaded from CRAN. The file I installed
> from was "SetupRpatched.exe" located in '/bin/Windows/base'. I did not do
> the build myself.
>
> If this is any help here is the output of R.version:
>
> >          _
> >platform i386-pc-mingw32
> >arch     i386
> >os       mingw32
> >system   i386, mingw32
> >status   Patched
> >major    1
> >minor    5.0
> >year     2002
> >month    06
> >day      12
> >language R
>
> Thanks -
>
> Michael Peck
>
> ------
> Michael Peck
> mpeck1@ix.netcom.com
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 11:04:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 12:04:47 +0200
Subject: R configure.in makes bad alpha assumptions (PR#1676)
In-Reply-To: <200206152321.BAA07428@pubhealth.ku.dk>
References: <200206152321.BAA07428@pubhealth.ku.dk>
Message-ID: <15629.46143.876111.705355@mithrandir.hornik.net>

>>>>> mcmahill  writes:

> Hi,

> I was looking at configure.in for R-1.4.1 and in the
>   case "${host_cpu}" in
> part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
> is an OSF specific, not alpha specific issue.  In particular, if someone
> used f2c-f77 (shell script which emulates a fortran compiler with f2c and
> the c compiler), they'd get the broken -fpe3.  I'd probably either test
> for OSF before adding -fpe3

This was changed for R 1.5.0, can you pls try with this?  (Or with 1.5.1
which will be released in a few moments ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Mon Jun 17 14:11:20 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Mon, 17 Jun 2002 15:11:20 +0200 (MET DST)
Subject: overzealous help-links.sh script! (PR#1682)
Message-ID: <200206171311.PAA15557@pubhealth.ku.dk>

Starting html help in the current version of R has a very annoying 
side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a 
virgin copy. I discovered that when all of a sudden I got complaints about 
my startup "library" not being found.
Below is a modified version of the script that doesn't do this. It is not 
perfect yet (it shouldn't try to recreate links that already exists; there 
must be a glitch in the multi-test if lines) but it is safer than the 
previous version!

RenE Bertin


#! /bin/sh

# 20020615 RJVB : I modified this script such that it will not at each 
invocation throw away the ~/.R directory
# with all that it contains (including stuff the user might have 
installed!!)
# Instead, it will create what doesn't exist, and warn whenever an error 
occurs (= a dir can't be made because a file
# with the same name exists.
# For the links, I try to be clever, and put in only those that aren't there 
yet, but this doesn't yet function
# correctly with the single-line-2-test expression. Therefore, all output 
from ln is thrown away :)

USER_R_HOME="${HOME}/.R"
PKGLIST="${USER_R_HOME}/doc/html/packages.html"
SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
# RJVB: don't do this!!
# rm -rf ${USER_R_HOME}

dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html 
${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
for d in ${dirs}; do
# RJVB
    if [ ! -e ${d} ] ;then
	    mkdir -p ${d}
	elif [ ! -d ${d} ] ;then
		echo "Warning: ${d} already exists but is not a directory!"
	fi
done

for f in AUTHORS COPYING THANKS; do
# RJVB
  if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
    ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
  fi
done

# RJVB
if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
  ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
fi

for f in ${R_HOME}/doc/html/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
    fi
done

for f in ${R_HOME}/doc/html/search/*; do
# RJVB
    if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
    fi
done

rm -f ${PKGLIST}
rm -f ${SEARCHINDEX}
cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}

get_unique () {
  if test -r ${1}; then
    x="1"
    while test -r ${1}.${x}; do
      x=`echo "$x+1" | bc`
    done
    echo ${1}.${x}
  else
    echo $1
  fi
}


for lib in $*; do
    echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
    echo "<p><table width=\"100%\">" >> ${PKGLIST}
    if test -d ${lib}; then
      for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
	if test -d ${pkg}; then
	    pkgname=`basename ${pkg}`
	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
	    targetname=`basename ${target}`
	    ln -s ${pkg} ${target}
	    if test -r ${pkg}/TITLE; then
		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
	    else
		pkgtitle=""
	    fi
	    echo "<tr align=\"left\" valign=\"top\">
		    <td width=\"25%\"><a 
href=\"../../library/${targetname}/html/00Index.html\">
		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
		>> ${PKGLIST}

	    cat ${pkg}/CONTENTS | \
	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
	      >> ${SEARCHINDEX}


	fi
      done
    fi
    echo "</table>" >> ${PKGLIST}
    echo "" >> ${PKGLIST}
done

echo "</body></html>" >> ${PKGLIST}
ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1

### Local Variables: ***
### mode: sh ***
### sh-indentation: 2 ***
### End: ***


RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jun 17 14:35:43 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 17 Jun 2002 15:35:43 +0200
Subject: grid not included in recommended
Message-ID: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>

Hi!

Looks like "grid" is not included in the recommended packages tarball
R-1.5.1-recommended.tar.gz ...

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 14:45:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 15:45:18 +0200
Subject: grid not included in recommended
In-Reply-To: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
Message-ID: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Hi!
> 
> Looks like "grid" is not included in the recommended packages tarball
> R-1.5.1-recommended.tar.gz ...

Argh! That's because it isn't in the directory on CRAN. If someone
would put it in, I'll roll up a replacement version.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Jun 17 14:57:10 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 17 Jun 2002 15:57:10 +0200
Subject: grid not included in recommended
In-Reply-To: <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60086.374739.309422@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
>> Hi!
>> 
>> Looks like "grid" is not included in the recommended packages tarball
>> R-1.5.1-recommended.tar.gz ...

> Argh! That's because it isn't in the directory on CRAN. If someone
> would put it in, I'll roll up a replacement version.

Done.  How could this go unnoticed?  Argh ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:03:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:03:37 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60086.374739.309422@mithrandir.hornik.net>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
Message-ID: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> >> Hi!
> >> 
> >> Looks like "grid" is not included in the recommended packages tarball
> >> R-1.5.1-recommended.tar.gz ...
> 
> > Argh! That's because it isn't in the directory on CRAN. If someone
> > would put it in, I'll roll up a replacement version.
> 
> Done.  How could this go unnoticed?  Argh ...

Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 17 15:09:22 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 17 Jun 2002 16:09:22 +0200
Subject: grid not included in recommended
In-Reply-To: <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
Message-ID: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>

>>>>> On 17 Jun 2002 16:03:37 +0200,
>>>>> Peter Dalgaard BSA (PDB) wrote:

  > Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
  >> >>>>> Peter Dalgaard BSA writes:
  >> 
  >> > Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
  >> >> Hi!
  >> >> 
  >> >> Looks like "grid" is not included in the recommended packages tarball
  >> >> R-1.5.1-recommended.tar.gz ...
  >> 
  >> > Argh! That's because it isn't in the directory on CRAN. If someone
  >> > would put it in, I'll roll up a replacement version.
  >> 
  >> Done.  How could this go unnoticed?  Argh ...

  > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?

Yes he can (and did) :-)

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 15:17:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 16:17:39 +0200
Subject: grid not included in recommended
In-Reply-To: <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
Message-ID: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>

Friedrich.Leisch@ci.tuwien.ac.at writes:

>   >> > Argh! That's because it isn't in the directory on CRAN. If someone
>   >> > would put it in, I'll roll up a replacement version.
>   >> 
>   >> Done.  How could this go unnoticed?  Argh ...
> 
>   > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
> 
> Yes he can (and did) :-)

Thanks! It's a little irregular to have the same file released in
different versions so it was important to get everything updated
before any mirroring took place.

We need automated build and check procedures for "the whole thing". We
discussed this before and I think this little event only underlines
the need. Hopefully in 1.6.x.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 16:15:43 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 08:15:43 -0700
Subject: grid not included in recommended
In-Reply-To: <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
References: <3D0DE5AF.7BC6BBAD@statistik.uni-dortmund.de>
 <x2660i6mtt.fsf@blueberry.kubism.ku.dk>
 <15629.60086.374739.309422@mithrandir.hornik.net>
 <x2wusy57eu.fsf@blueberry.kubism.ku.dk>
 <15629.60818.163051.942166@galadriel.ci.tuwien.ac.at>
 <x2sn3m56rg.fsf@blueberry.kubism.ku.dk>
Message-ID: <873cvmlyw0.fsf@jeeves.blindglobe.net>


Any chance we can get this re-released as 1.5.2 ?

>>>> "peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
P
    peter> Friedrich.Leisch@ci.tuwien.ac.at writes:
    >> >> > Argh! That's because it isn't in the directory on CRAN. If someone
    >> >> > would put it in, I'll roll up a replacement version.
    >> >> 
    >> >> Done.  How could this go unnoticed?  Argh ...
    >> 
    >> > Updated version on the ftp site now. Can Fritz please update CRAN ASAP?
    >> 
    >> Yes he can (and did) :-)

    peter> Thanks! It's a little irregular to have the same file released in
    peter> different versions so it was important to get everything updated
    peter> before any mirroring took place.

    peter> We need automated build and check procedures for "the whole thing". We
    peter> discussed this before and I think this little event only underlines
    peter> the need. Hopefully in 1.6.x.

    peter>         -p

    peter> -- 
    peter>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
    peter>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
    peter>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
    peter> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
    peter> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
    peter> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
    peter> Send "info", "help", or "[un]subscribe"
    peter> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
    peter> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:24:25 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:24:25 -0400
Subject: Potential recompilation of certain packages
Message-ID: <20020617122424.A10644@jessie.research.bell-labs.com>

This applies to people working with the up-to-the-minute source taken
directly or indirectly from the CVS repository. Changes to the
mechanism for registering native (C and Fortran) routines in
DLLs/shared libraries and the package level data structures mean that
you will have to recompile any package that uses this approach to
exporting routines. These include all of the MASS packages, but few
others (yet :-)). No changes to those packages are necessary, just a
simple re-installation.

The changes allow one to specify types for the parameter of the
routines, and also whether they contain useful output values when
returned to R. These have the potential to avoid unecessary copying
and are more robust to errors in types passed to the routines.

Sorry for any inconvenience.

 Duncan

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jun 17 17:29:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 17 Jun 2002 09:29:09 -0700
Subject: Potential recompilation of certain packages
In-Reply-To: <20020617122424.A10644@jessie.research.bell-labs.com>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
Message-ID: <87vg8hrhre.fsf@jeeves.blindglobe.net>


And the obvious question, given the timing, 
"does this apply to 1.5.1?"

best,
-tony

>>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    duncan> This applies to people working with the up-to-the-minute
    duncan> source taken directly or indirectly from the CVS
    duncan> repository. Changes to the mechanism for registering
    duncan> native (C and Fortran) routines in DLLs/shared libraries
    duncan> and the package level data structures mean that you will
    duncan> have to recompile any package that uses this approach to
    duncan> exporting routines. These include all of the MASS
    duncan> packages, but few others (yet :-)). No changes to those
    duncan> packages are necessary, just a simple re-installation.

    duncan> The changes allow one to specify types for the parameter
    duncan> of the routines, and also whether they contain useful
    duncan> output values when returned to R. These have the potential
    duncan> to avoid unecessary copying and are more robust to errors
    duncan> in types passed to the routines.



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 17 17:31:36 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jun 2002 18:31:36 +0200
Subject: logicals in data frames -- as.data.frame() should allow them
Message-ID: <15630.3816.296979.38378@gargle.gargle.HOWL>

Currently, as.data.frame() , i.e., at least its "matrix" method,
still coerces logicals to factors.  I think this is not desired
and not according to the changes to read.table() for R 1.4.0
which allow logicals.

Does anybody see a reason against a change which would allow
logical matrices to become data.frames with logical variables ? 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 17:36:26 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 18:36:26 +0200
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>
References: <20020617122424.A10644@jessie.research.bell-labs.com>
 <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <x2znxt50c5.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

No. Bleeding edge, i.e., what might become 1.6.0, only. (Or DTL would
have made himself *very* unpopular.)

> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Jun 17 17:36:30 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 17 Jun 2002 12:36:30 -0400
Subject: Potential recompilation of certain packages
In-Reply-To: <87vg8hrhre.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Mon, Jun 17, 2002 at 09:29:09AM -0700
References: <20020617122424.A10644@jessie.research.bell-labs.com> <87vg8hrhre.fsf@jeeves.blindglobe.net>
Message-ID: <20020617123630.B10644@jessie.research.bell-labs.com>

A.J. Rossini wrote:
> 
> And the obvious question, given the timing, 
> "does this apply to 1.5.1?"

Good question. No, it should not have anything to do with that.  And,
my guess is that you will notice it immediately on calling library()
on any of the affected packages with a large seg-fault. At least its
dramatic :-)

 D.

> 
> best,
> -tony
> 
> >>>>> "duncan" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:
> 
>     duncan> This applies to people working with the up-to-the-minute
>     duncan> source taken directly or indirectly from the CVS
>     duncan> repository. Changes to the mechanism for registering
>     duncan> native (C and Fortran) routines in DLLs/shared libraries
>     duncan> and the package level data structures mean that you will
>     duncan> have to recompile any package that uses this approach to
>     duncan> exporting routines. These include all of the MASS
>     duncan> packages, but few others (yet :-)). No changes to those
>     duncan> packages are necessary, just a simple re-installation.
> 
>     duncan> The changes allow one to specify types for the parameter
>     duncan> of the routines, and also whether they contain useful
>     duncan> output values when returned to R. These have the potential
>     duncan> to avoid unecessary copying and are more robust to errors
>     duncan> in types passed to the routines.
> 
> 
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 17:41:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 17:41:47 +0100 (BST)
Subject: logicals in data frames -- as.data.frame() should allow them
In-Reply-To: <15630.3816.296979.38378@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0206171739110.8715-100000@gannet.stats>

On Mon, 17 Jun 2002, Martin Maechler wrote:

> Currently, as.data.frame() , i.e., at least its "matrix" method,
> still coerces logicals to factors.  I think this is not desired
> and not according to the changes to read.table() for R 1.4.0
> which allow logicals.
>
> Does anybody see a reason against a change which would allow
> logical matrices to become data.frames with logical variables ?

It's what S4 does: not changing as.data.frame.matrix was an oversight on
my part.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Mon Jun 17 20:23:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Mon, 17 Jun 2002 21:23:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206171923.VAA17524@pubhealth.ku.dk>

Full_Name: Jrgen Henge-Ernst
Version: 1.5.1
OS: linux
Submission from: (NULL) (130.83.244.130)


There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
test
by running the R-check

hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
* checking for working latex ... OK
* using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'

* Installing *binary* package 'MASS' ...
* DONE (MASS)

* DONE (INSTALL)

* checking for file 'MASS/DESCRIPTION' ... OK
* checking package directory ... OK
* checking for sufficient/correct file permissions ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... OK
* checking R files for syntax errors ... ERROR
Syntax error in file



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 17 21:00:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Jun 2002 22:00:11 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206172000.WAA17620@pubhealth.ku.dk>

That's not an error in the VR bundle (sic), but it is an error *by you* in
the usage of R CMD check (sic).  From `Writing R extensions'

<p>Using <code>R CMD check</code>, the R package checker, one can test whether
<em>source</em> R packages work correctly.

and the under-qualified pilot applied it to a *binary* installed package,
despite the emphasized warning.


On Mon, 17 Jun 2002 juergen@henge-ernst.de wrote:

> Full_Name: Jrgen Henge-Ernst
> Version: 1.5.1
> OS: linux
> Submission from: (NULL) (130.83.244.130)
>
>
> There seems to be a error in the VR-packages/ 7.0-3 which leads don't pass the
> test
> by running the R-check
>
> hernst@laptop:~/R/R-1.5.1> R CMD check /usr/lib/R/library/MASS/
> * checking for working latex ... OK
> * using log directory '/home/hernst/R/R-1.5.1/MASS.Rcheck'
>
> * Installing *binary* package 'MASS' ...
> * DONE (MASS)
>
> * DONE (INSTALL)
>
> * checking for file 'MASS/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... OK
> * checking R files for syntax errors ... ERROR
> Syntax error in file
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 17 22:38:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 2002 23:38:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <x2lm9d37t1.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> That's not an error in the VR bundle (sic), but it is an error *by you* in
> the usage of R CMD check (sic).  From `Writing R extensions'
> 
> <p>Using <code>R CMD check</code>, the R package checker, one can test whether
> <em>source</em> R packages work correctly.
> 
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

Or, to put it differently, what you *should* have done was

<install R + recommended packages>
tar xfz Recommended/VR_7.0-3.tar.gz 
R CMD check VR

(A couple of gotchas in that: You cannot check MASS by itself, only
the entire VR bundle, and you need the other packages installed or the
check chokes on library(nlme))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Jun 18 03:00:50 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 17 Jun 2002 21:00:50 -0500
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <200206172000.WAA17620@pubhealth.ku.dk>
References: <200206172000.WAA17620@pubhealth.ku.dk>
Message-ID: <20020618020050.GA20949@sonny.eddelbuettel.com>

On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> and the under-qualified pilot applied it to a *binary* installed package,
> despite the emphasized warning.

I wonder if "R CMD check ... " could abort with an error message if it is
applied to a binary package?  
 
Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 07:51:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 07:51:06 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <20020618020050.GA20949@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>

On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:

> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> > and the under-qualified pilot applied it to a *binary* installed package,
> > despite the emphasized warning.
>
> I wonder if "R CMD check ... " could abort with an error message if it is
> applied to a binary package?

I am not sure how simple that is.  It used to be hard to tell source and
binary packages apart.  What we can do is to test for Built: in the
DESCRIPTION file, which will cope with people who have built the package
recently.

The trouble with idiot-proofing is anticipating the idiot: as far as I am
aware this is a first.

In all other cases I tried the INSTALL part of R CMD check failed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From juergen@henge-ernst.de  Tue Jun 18 08:37:54 2002
From: juergen@henge-ernst.de (juergen@henge-ernst.de)
Date: Tue, 18 Jun 2002 09:37:54 +0200 (MET DST)
Subject: R chek of package VR is broken (PR#1683)
Message-ID: <200206180737.JAA19688@pubhealth.ku.dk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Tuesday 18 June 2002 08:35, you wrote:
> I seem not to have seen your apology for an incorrect report on my VR
> bundle, which was a public accusation of an error by me.
>
> Please explain why not!
I've been looking into the Docu what the R CMD check is doing or should do and 
why excatly that package is throwing that error. I've build a lot of other 
packages which seem to pass that check
e.g. GeneSOM without showing an error
The install and check ist done the following way:

unzip the tar.gz in a dirctory
cp GeneSOM/DESCRIPTION .
/usr/bin/R INSTALL -l $RPM_BUILD_ROOT/usr/lib/R/library GeneSOM
/usr/bin/R CMD check GeneSOM

But unfortunaly I haven't figured out how to use the check CMD the right way.


As there have been a lot of contib-packages which pass through that way, I 
thought there must be an error somewhere in the test-scrips.

So srory to bother you with that false alarm.

Greetings Jrgen

- -- 
 Juergen Henge-Ernst // Hauptstrasse 37 // 67591 Mlsheim // Germany
           email: juergen@henge-ernst.de        ICQ 56324358
Key fingerprint = 5FFD 89AC 6C7B 76DD 5FAC  9A3F D1A9 0C9B 3B49 67B1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQE9DuKu0akMmztJZ7ERAmW6AJwIMe90Em0TIgVlv1VY18UU7iJjqACfb9gf
3IZZ9uAz5EVgOyavdkDPvzQ=
=rqTq
-----END PGP SIGNATURE-----


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Jun 18 14:25:02 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 18 Jun 2002 09:25:02 -0400
Subject: can't find array overruns (was: help debugging segfaults)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>

Dear R-devel,

Last week I got several responses to my question about debugging segfaults
in my code (original post below).  After I changed the S_alloc() calls to
Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
did:

o  Switched to Calloc/Free.  Electric Fence did not find any problem.

o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
where arrays are accessed.  Everything ran fine.  (I did not (don't really
know easy way to) do the same thing for the Fortran subroutines (mostly
Breiman's original code) called by the C function.

o Changed to malloc()/free().  Still didn't find anything with Electric
Fence.

Can some one suggest how to proceed?  Is it still not save to assume the bug
is gone?

Regards,
Andy

> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw@merck.com]
> Sent: Wednesday, June 12, 2002 9:26 AM
> To: 'r-devel@stat.math.ethz.ch'; 'r-help@stat.math.ethz.ch'
> Subject: [R] help debugging segfaults
> 
> 
> (Sorry for the cross-post--- I wasn't sure which list is more
> appropriate...)
> 
> Hi everyone,
> 
> I've run into segfaults when using my randomForest package on 
> large dataset
> (e.g., 100 x 15200) and large number of trees (e.g., ntree=7000 and
> mtry=3000).  I'm wondering if anyone can give me some hints 
> on where to look
> for the problem.
> 
> The randomForest package mainly consists of two things: rf.c 
> contains rf(),
> a C wrapper function that calls the Fortran subroutines in 
> rfsub.f that do
> most of the work (slightly altered from Breiman's original code).  All
> memory allocations are done in rf.c, using S_alloc().  When I 
> run random
> forest with the data and setting as mentioned above, it was 
> able to finish
> growing the 7000 trees, but segfault when returning from rf() 
> to R.  GDB
> gave the following (gdb prompts removed):
> 
> do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> env=0x86fd0a4)
>     at dotcode.c:1413
> 1413            break;
> 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> 1846        havenames = 0;
> 1847        if (dup) {
> 1849            info.cargs = cargs;
> 1850            info.allArgs = args;
> 1851            info.nargs = nargs;
> 1852            info.functionName = buf;
> 1853            nargs = 0;
> 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> CDR(pargs)) {
> 1855                if(argConverters[nargs]) {
> 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> CAR(pargs),
> which));
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> 1133                    SEXP next = NEXT_NODE(s);
> 
> This is obtained on Linux (Mandrake 8.2 w/enterprise kernel 
> 2.4.8) running
> on dual P3-866 Xeon with 2GB RAM, using R-1.5.0 compiled from source.
> 
> Any help/hints/comments are greatly appreciated!
> 
> Regards,
> Andy
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
> --------------------------------------------------------------
> ----------------
> Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message. If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> 
> ==============================================================
> ================
> 


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 18 15:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2002 16:03:39 +0200
Subject: can't find array overruns (was: help debugging segfaults)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC389@usrymx10.merck.com>
Message-ID: <x2vg8gsmys.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Dear R-devel,
> 
> Last week I got several responses to my question about debugging segfaults
> in my code (original post below).  After I changed the S_alloc() calls to
> Calloc()/Free(), the symptom was gone, but I was told to keep looking.  So I
> did:
> 
> o  Switched to Calloc/Free.  Electric Fence did not find any problem.
> 
> o  Put assert(index < bound); assert(index >=0); everywhere in the C routine
> where arrays are accessed.  Everything ran fine.  (I did not (don't really
> know easy way to) do the same thing for the Fortran subroutines (mostly
> Breiman's original code) called by the C function.
> 
> o Changed to malloc()/free().  Still didn't find anything with Electric
> Fence.
> 
> Can some one suggest how to proceed?  Is it still not save to assume the bug
> is gone?
> 
> Regards,
> Andy

The hardcore way is to use the original code and backtrack until you
find the source of the memory corruption. I.e. in your code below, it
seems that "s" got corrupted so that NEXT_NODE(s) triggers the
segfault. So

1. Find the exact memory location with the corrupted value. 
2. Set a hardware watchpoint on that location.
3. Rerun the program with well-defined input and check whenever the
   value at the watchpoint changes. 

Very likely, the culprit will be the last change prior to the crash,
so you'd have to check the program logic carefully around that point.
If it happens at an assignment to something seemingly unrelated,
chances are that you have an array overrun. If the location changes
frequently, it can be useful to conditionalize the watchpoint (the
value of number of garbage collections can be useful for this).

The precise way to do this kind of stuff is in your friendly gdb
manual... (sorry, but it would take all day to flesh out the details)

> > The randomForest package mainly consists of two things: rf.c 
> > contains rf(),
> > a C wrapper function that calls the Fortran subroutines in 
> > rfsub.f that do
> > most of the work (slightly altered from Breiman's original code).  All
> > memory allocations are done in rf.c, using S_alloc().  When I 
> > run random
> > forest with the data and setting as mentioned above, it was 
> > able to finish
> > growing the 7000 trees, but segfault when returning from rf() 
> > to R.  GDB
> > gave the following (gdb prompts removed):
> > 
> > do_dotCode (call=0x873aff4, op=0x8a5f620, args=0x8a5d010, 
> > env=0x86fd0a4)
> >     at dotcode.c:1413
> > 1413            break;
> > 1845        PROTECT(ans = allocVector(VECSXP, nargs));
> > 1846        havenames = 0;
> > 1847        if (dup) {
> > 1849            info.cargs = cargs;
> > 1850            info.allArgs = args;
> > 1851            info.nargs = nargs;
> > 1852            info.functionName = buf;
> > 1853            nargs = 0;
> > 1854            for (pargs = args ; pargs != R_NilValue ; pargs =
> > CDR(pargs)) {
> > 1855                if(argConverters[nargs]) {
> > 1864                    PROTECT(s = CPtrToRObj(cargs[nargs], 
> > CAR(pargs),
> > which));
> > 
> > Program received signal SIGSEGV, Segmentation fault.
> > 0x080ddc6a in RunGenCollect (size_needed=1515400) at memory.c:1133
> > 1133                    SEXP next = NEXT_NODE(s);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Jun 18 16:57:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 18 Jun 2002 17:57:02 +0200
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
References: <20020618020050.GA20949@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0206180742560.12426-100000@gannet.stats>
Message-ID: <15631.22606.776749.302073@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
>> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
>> > and the under-qualified pilot applied it to a *binary* installed package,
>> > despite the emphasized warning.
>> 
>> I wonder if "R CMD check ... " could abort with an error message if it is
>> applied to a binary package?

> I am not sure how simple that is.  It used to be hard to tell source
> and binary packages apart.  What we can do is to test for Built: in
> the DESCRIPTION file, which will cope with people who have built the
> package recently.

This was introduced in 1.4 I think (?) so it seems we can change the
heuristics now to rely on the correspondence Built: <-> binary.  I will
soon (once I have time again) change INSTALL accordingly.

> The trouble with idiot-proofing is anticipating the idiot: as far as I
> am aware this is a first.

> In all other cases I tried the INSTALL part of R CMD check failed.

We need better integration of INSTALL into check anyway.  But we can
have more idiot-proofing in check as well.  Something in the works is a
reorganization of INSTALL/check/build with something else needed for
creating front-matter stuff, and we also need to rethink the logic of
check (e.g., verify correctness of meta-information prior to trying to
install).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 18 17:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 18 Jun 2002 17:33:30 +0100 (BST)
Subject: R chek of package VR is broken (PR#1683)
In-Reply-To: <15631.22606.776749.302073@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0206181731070.18048-100000@gannet.stats>

On Tue, 18 Jun 2002, Kurt Hornik wrote:

> >>>>> ripley  writes:
>
> > On Mon, 17 Jun 2002, Dirk Eddelbuettel wrote:
> >> On Mon, Jun 17, 2002 at 10:00:11PM +0200, ripley@stats.ox.ac.uk wrote:
> >> > and the under-qualified pilot applied it to a *binary* installed package,
> >> > despite the emphasized warning.
> >>
> >> I wonder if "R CMD check ... " could abort with an error message if it is
> >> applied to a binary package?
>
> > I am not sure how simple that is.  It used to be hard to tell source
> > and binary packages apart.  What we can do is to test for Built: in
> > the DESCRIPTION file, which will cope with people who have built the
> > package recently.
>
> This was introduced in 1.4 I think (?) so it seems we can change the
> heuristics now to rely on the correspondence Built: <-> binary.  I will
> soon (once I have time again) change INSTALL accordingly.

Not necessarily, as people do manually install packages.  I've added the
test for Built in R CMD check for 1.6.0, which should catch a lot of
misuses.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Tue Jun 18 21:51:18 2002
From: accot@free.fr (accot@free.fr)
Date: Tue, 18 Jun 2002 22:51:18 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206182051.WAA26484@pubhealth.ku.dk>

Full_Name: Johnny Accot
Version: 1.5.1
OS: Linux
Submission from: (NULL) (198.4.83.52)


Hi.

I'm having a problem with the binary read/write functions.  I'm writing a device
driver in R (why not?) and of course I have to send a couple commands to the
device.  Typically, I send one byte, receive one acknowledgement byte, send
another byte, receive an ACK, and so on.  At least this is what I would like to
do.  Instead, after writing one byte, reading its acknowledgement byte, and
writing a second byte, R hangs on the next read for an unknown reason.  I guess
this is a bug in the read/write functions.  If you have a PS/2 device you may
try to run the following code:

ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
dev <- file("/dev/psaux")
open(dev, "w+b")
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
close(dev)

which gives:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[...R hangs here...]

It first creates an ascii table, opens the PS/2 device for binary read&write,
writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
then hangs when reading the second acknowledgement byte.  If, instead, you close
the device between the two writes, it's fine:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)

This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
stick with the open-each-time strategy, but it is not very clean.

I also tried to write bytes using the writeBin command, but it says the "size=1"
is not available on my computer.  This is why I'm using the writeChar function.

Please let me know if I'm doing something wrong.  I hope not.

And thanks for the great software! :-)

Johnny

PS: if you try to run the code and don't get 250 as acknowledgement byte, it
means the PS/2 controller is not in idle state.  Very unlikely though.  Try
again as the set-default command should bring it back to its idle state.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 01:47:33 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 19 Jun 2002 02:47:33 +0200 (MET DST)
Subject: FW: [R] Problems with url/download and http_proxy (PR#1689)
Message-ID: <200206190047.CAA26946@pubhealth.ku.dk>

For the record.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, June 18, 2002 3:21 PM
To: Warnes, Gregory R
Cc: 'r-help@stat.math.ethz.ch'
Subject: RE: [R] Problems with url/download and http_proxy


The port is not supposed to be required, so rather than fix the docs can
anyone fix the problem?


On Tue, 18 Jun 2002, Warnes, Gregory R wrote:

>
> Just adding the trailing slash doesn't seem to help:
>
> 	> Sys.getenv('http_proxy')
> 	                  http_proxy
> 	"http://gproxy1.pfizer.com/"
>
> 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	connect: Cannot assign requested address
> 	unable to connect to 'gproxy1.pfizer.com'.
> 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> :
> 	        cannot open URL
> `http://cran.r-project.org/src/contrib/PACKAGES'
>
> But adding the port explicitly does:
>
> 	> Sys.getenv("http_proxy")
> 	                     http_proxy
> 	"http://gproxy1.pfizer.com:80/"
> 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> 	                                     description
> 	"http://cran.r-project.org/src/contrib/PACKAGES"
> 	                                           class
> 	                                           "url"
> 	                                            mode
> 	                                             "r"
> 	                                            text
> 	                                          "text"
> 	                                          opened
> 	                                        "opened"
> 	                                        can read
> 	                                           "yes"
> 	                                       can write
> 	                                            "no"
>
>
>
> even if the trailing slash is not present:
>
> > Sys.getenv("http_proxy")
>                     http_proxy
> "http://gproxy1.pfizer.com:80"
>
> > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
>                                      description
> "http://cran.r-project.org/src/contrib/PACKAGES"
>                                            class
>                                            "url"
>                                             mode
>                                              "r"
>                                             text
>                                           "text"
>                                           opened
>                                         "opened"
>                                         can read
>                                            "yes"
>                                        can write
>                                             "no"
>
>
> Perhaps the documentation for download.file should be changed to note the
> requirement of the port.  The paragraph on proxies could be changed from
>
>
>      Proxies can be specified via environment variables. Setting
>      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
>      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
>      upper-case version) is consulted and if non-empty used as a proxy
>      site.  For FTP transfers, the username and password on the proxy
>      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
>
>
> to something like:
>
>      Proxies can be specified via the environment variables `"http_proxy"'
>      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These
variables
>      must be of the form `protocol://machine.domain.tld:port'.  For FTP
>      transfers, the username and password on the proxy can be specified by
>     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
>      prevents the use of any proxy.
>
>
> -Greg
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, June 18, 2002 11:43 AM
> > To: Warnes, Gregory R
> > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > Subject: Re: [R] Problems with url/download and http_proxy
> >
> >
> > The code (which you do have available to you) says http_proxy
> >
> >  * Should be like http://myproxy/ or http://myproxy:3128/
> >
> > which yours is not, so please try that format.  The code suggests
> > that the traling / can be omitted, but the words do not.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> >
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 09:58:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jun 2002 09:58:17 +0100 (BST)
Subject: [R] Problems with url/download and http_proxy
In-Reply-To: <Pine.LNX.4.31.0206182020400.18450-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0206190956050.15670-100000@auk.stats>

It's a bug in the libxml code causing the port to be set to zero.
Comment lines like

    /*if (proxyPort != 0) {
	proxyPort = 0;
	}*/

in nanohttp.c and nanoftp.c.  (The port has already been set in the
caller.)

Please confirm that this works.


On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:

> The port is not supposed to be required, so rather than fix the docs can
> anyone fix the problem?
>
>
> On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
>
> >
> > Just adding the trailing slash doesn't seem to help:
> >
> > 	> Sys.getenv('http_proxy')
> > 	                  http_proxy
> > 	"http://gproxy1.pfizer.com/"
> >
> > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	connect: Cannot assign requested address
> > 	unable to connect to 'gproxy1.pfizer.com'.
> > 	Error in url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > :
> > 	        cannot open URL
> > `http://cran.r-project.org/src/contrib/PACKAGES'
> >
> > But adding the port explicitly does:
> >
> > 	> Sys.getenv("http_proxy")
> > 	                     http_proxy
> > 	"http://gproxy1.pfizer.com:80/"
> > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > 	                                     description
> > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > 	                                           class
> > 	                                           "url"
> > 	                                            mode
> > 	                                             "r"
> > 	                                            text
> > 	                                          "text"
> > 	                                          opened
> > 	                                        "opened"
> > 	                                        can read
> > 	                                           "yes"
> > 	                                       can write
> > 	                                            "no"
> >
> >
> >
> > even if the trailing slash is not present:
> >
> > > Sys.getenv("http_proxy")
> >                     http_proxy
> > "http://gproxy1.pfizer.com:80"
> >
> > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> >                                      description
> > "http://cran.r-project.org/src/contrib/PACKAGES"
> >                                            class
> >                                            "url"
> >                                             mode
> >                                              "r"
> >                                             text
> >                                           "text"
> >                                           opened
> >                                         "opened"
> >                                         can read
> >                                            "yes"
> >                                        can write
> >                                             "no"
> >
> >
> > Perhaps the documentation for download.file should be changed to note the
> > requirement of the port.  The paragraph on proxies could be changed from
> >
> >
> >      Proxies can be specified via environment variables. Setting
> >      `"no_proxy"' stops any proxy being tried. Otherwise the setting of
> >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> >      upper-case version) is consulted and if non-empty used as a proxy
> >      site.  For FTP transfers, the username and password on the proxy
> >      can be specified by `"ftp_proxy_user"' and `"ftp_proxy_password"'.
> >
> >
> > to something like:
> >
> >      Proxies can be specified via the environment variables `"http_proxy"'
> >      or `"HTTP_PROXY"' and `"ftp_proxy'" or `"FTP_PROXY"'.  These variables
> >      must be of the form `protocol://machine.domain.tld:port'.  For FTP
> >      transfers, the username and password on the proxy can be specified by
> >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  Setting `"no_proxy"'
> >      prevents the use of any proxy.
> >
> >
> > -Greg
> >
> > > -----Original Message-----
> > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > To: Warnes, Gregory R
> > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > Subject: Re: [R] Problems with url/download and http_proxy
> > >
> > >
> > > The code (which you do have available to you) says http_proxy
> > >
> > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > >
> > > which yours is not, so please try that format.  The code suggests
> > > that the traling / can be omitted, but the words do not.
> > >
> > > --
> > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > > r-help-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._._._
> > >
> >
> >
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 10:15:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 11:15:41 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206190915.LAA29641@pubhealth.ku.dk>

Not a bug: check the documentation of file(), which is documented to work
for files but not for devices.  No attempt is made to cope with e.g.
blocking on non-files.

It's a pretty extreme view of the world to consider /dev/psaux to be a
file, and R is just using standard C <stdio.h> I/O.

However, this is a great opportunity for you to contribute a device()
function to R.

On Tue, 18 Jun 2002 accot@free.fr wrote:

> Full_Name: Johnny Accot
> Version: 1.5.1
> OS: Linux
> Submission from: (NULL) (198.4.83.52)
>
>
> Hi.
>
> I'm having a problem with the binary read/write functions.  I'm writing a device
> driver in R (why not?) and of course I have to send a couple commands to the
> device.  Typically, I send one byte, receive one acknowledgement byte, send
> another byte, receive an ACK, and so on.  At least this is what I would like to
> do.  Instead, after writing one byte, reading its acknowledgement byte, and
> writing a second byte, R hangs on the next read for an unknown reason.  I guess
> this is a bug in the read/write functions.  If you have a PS/2 device you may
> try to run the following code:
>
> ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> close(dev)
>
> which gives:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> > dev <- file("/dev/psaux")
> > open(dev, "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [...R hangs here...]
>
> It first creates an ascii table, opens the PS/2 device for binary read&write,
> writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
> reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
> then hangs when reading the second acknowledgement byte.  If, instead, you close
> the device between the two writes, it's fine:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
>
> This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
> 1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
> stick with the open-each-time strategy, but it is not very clean.
>
> I also tried to write bytes using the writeBin command, but it says the "size=1"
> is not available on my computer.  This is why I'm using the writeChar function.
>
> Please let me know if I'm doing something wrong.  I hope not.
>
> And thanks for the great software! :-)
>
> Johnny
>
> PS: if you try to run the code and don't get 250 as acknowledgement byte, it
> means the PS/2 controller is not in idle state.  Very unlikely though.  Try
> again as the set-default command should bring it back to its idle state.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jun 19 15:31:38 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 19 Jun 2002 10:31:38 -0400
Subject: [R] Problems with url/download and http_proxy
Message-ID: <D7A3CFD7825BD6119B880002A58F06C227E656@groexmb02.pfizer.com>

This does seem to fix my problem:

> Sys.getenv("http_proxy")
                  http_proxy 
"http://gproxy1.pfizer.com/" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

and even

> Sys.getenv("http_proxy")
                 http_proxy 
"http://gproxy1.pfizer.com" 


> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
                                     description 
"http://cran.r-project.org/src/contrib/PACKAGES" 
                                           class 
                                           "url" 
                                            mode 
                                             "r" 
                                            text 
                                          "text" 
                                          opened 
                                        "opened" 
                                        can read 
                                           "yes" 
                                       can write 
                                            "no" 

-Greg


> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, June 19, 2002 4:58 AM
> To: Warnes, Gregory R
> Cc: r-devel@stat.math.ethz.ch
> Subject: RE: [R] Problems with url/download and http_proxy
> 
> 
> It's a bug in the libxml code causing the port to be set to zero.
> Comment lines like
> 
>     /*if (proxyPort != 0) {
> 	proxyPort = 0;
> 	}*/
> 
> in nanohttp.c and nanoftp.c.  (The port has already been set in the
> caller.)
> 
> Please confirm that this works.
> 
> 
> On Tue, 18 Jun 2002 ripley@stats.ox.ac.uk wrote:
> 
> > The port is not supposed to be required, so rather than fix 
> the docs can
> > anyone fix the problem?
> >
> >
> > On Tue, 18 Jun 2002, Warnes, Gregory R wrote:
> >
> > >
> > > Just adding the trailing slash doesn't seem to help:
> > >
> > > 	> Sys.getenv('http_proxy')
> > > 	                  http_proxy
> > > 	"http://gproxy1.pfizer.com/"
> > >
> > > 	> url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	connect: Cannot assign requested address
> > > 	unable to connect to 'gproxy1.pfizer.com'.
> > > 	Error in 
> url("http://cran.r-project.org/src/contrib/PACKAGES", "r")
> > > :
> > > 	        cannot open URL
> > > `http://cran.r-project.org/src/contrib/PACKAGES'
> > >
> > > But adding the port explicitly does:
> > >
> > > 	> Sys.getenv("http_proxy")
> > > 	                     http_proxy
> > > 	"http://gproxy1.pfizer.com:80/"
> > > 	>  url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > > 	                                     description
> > > 	"http://cran.r-project.org/src/contrib/PACKAGES"
> > > 	                                           class
> > > 	                                           "url"
> > > 	                                            mode
> > > 	                                             "r"
> > > 	                                            text
> > > 	                                          "text"
> > > 	                                          opened
> > > 	                                        "opened"
> > > 	                                        can read
> > > 	                                           "yes"
> > > 	                                       can write
> > > 	                                            "no"
> > >
> > >
> > >
> > > even if the trailing slash is not present:
> > >
> > > > Sys.getenv("http_proxy")
> > >                     http_proxy
> > > "http://gproxy1.pfizer.com:80"
> > >
> > > > url("http://cran.r-project.org/src/contrib/PACKAGES",'r')
> > >                                      description
> > > "http://cran.r-project.org/src/contrib/PACKAGES"
> > >                                            class
> > >                                            "url"
> > >                                             mode
> > >                                              "r"
> > >                                             text
> > >                                           "text"
> > >                                           opened
> > >                                         "opened"
> > >                                         can read
> > >                                            "yes"
> > >                                        can write
> > >                                             "no"
> > >
> > >
> > > Perhaps the documentation for download.file should be 
> changed to note the
> > > requirement of the port.  The paragraph on proxies could 
> be changed from
> > >
> > >
> > >      Proxies can be specified via environment variables. Setting
> > >      `"no_proxy"' stops any proxy being tried. Otherwise 
> the setting of
> > >      `"http_proxy"' or `"ftp_proxy"' (or failing that, the all
> > >      upper-case version) is consulted and if non-empty 
> used as a proxy
> > >      site.  For FTP transfers, the username and password 
> on the proxy
> > >      can be specified by `"ftp_proxy_user"' and 
> `"ftp_proxy_password"'.
> > >
> > >
> > > to something like:
> > >
> > >      Proxies can be specified via the environment 
> variables `"http_proxy"'
> > >      or `"HTTP_PROXY"' and `"ftp_proxy'" or 
> `"FTP_PROXY"'.  These variables
> > >      must be of the form 
> `protocol://machine.domain.tld:port'.  For FTP
> > >      transfers, the username and password on the proxy 
> can be specified by
> > >     `"ftp_proxy_user"' and `"ftp_proxy_password"'.  
> Setting `"no_proxy"'
> > >      prevents the use of any proxy.
> > >
> > >
> > > -Greg
> > >
> > > > -----Original Message-----
> > > > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > > > Sent: Tuesday, June 18, 2002 11:43 AM
> > > > To: Warnes, Gregory R
> > > > Cc: 'r-help@stat.math.ethz.ch'; 'bioconductor@stat.math.ethz.ch'
> > > > Subject: Re: [R] Problems with url/download and http_proxy
> > > >
> > > >
> > > > The code (which you do have available to you) says http_proxy
> > > >
> > > >  * Should be like http://myproxy/ or http://myproxy:3128/
> > > >
> > > > which yours is not, so please try that format.  The 
> code suggests
> > > > that the traling / can be omitted, but the words do not.
> > > >
> > > > --
> > > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > > Professor of Applied Statistics,  
> http://www.stats.ox.ac.uk/~ripley/
> > > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > > >
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > -.-.-.-.-.-.-.-.-
> > > > r-help mailing list -- Read
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To:
> > > > r-help-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > > _._._._._._._._._
> > > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request@stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:04:56 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:04:56 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15632.42814.327732.92452@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
Message-ID: <87lm9bdzkn.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    martin> Hence we are waiting for a new patch  (:-)

In order to do that, I need to know what abbreviate.arg (the
"un-documented" argument) does.  Anyone know?    Other thant that,
it (the patch) is almost ready.

(yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
engineering...). 

best,
-tony



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 19 17:06:55 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 19 Jun 2002 18:06:55 +0200
Subject: .. add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <871yd7jsjh.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
Message-ID: <15632.44063.277697.883795@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

on April 22 --- you see I'm cleaning up pending e-mails :-)

    tony> could we add an argument to suppress printing of levels for
    tony> print.factor()?  i.e.:


    tony> print.factor <-
    tony> function (x, quote = FALSE, print.levels = TRUE, ...)    ## MODIFIED
    tony> {
    tony>  if (length(x) <= 0)
    tony>  cat("factor(0)\n")
    tony>  else print(as.character(x), quote = quote, ...)
    tony>  if (print.levels) {                                         ## ADDED
    tony>    cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    tony>  }                                                           ## ADDED
    tony>  invisible(x)
    tony> }

    tony> I've done this for my local work, but wondering if this is useful in
    tony> general?

As I said then, it is useful idea, thank you Tony.

However, as I just found out,  S+6.0 does it a bit better.
Their  print.factor() has a  'max.levels = 5' argument which
allows more than just on/off.

Here's S+6.0 help(print.factor) :

>>                         Use print() on a factor object
>>                                        
>> USAGE:
>> 
>> print.factor(x, quote = F, abbreviate.arg, ..., max.levels = 5)
>> 
>> REQUIRED ARGUMENTS:
>> 
>>    x
>>           The factor object to print
>>           
>> OPTIONAL ARGUMENTS:
>> 
>>    quote
>>           If quote is TRUE then the strings in the factors will be
>>           surrounded by quotes and all the levels will be printed.
>>           
>>    max.levels
>>           If some of the levels in a factor object are not in represented
>>           in the object (or if quote is TRUE), then the first max.levels
>>           levels will be printed.
>>           This is a method for the function print() for objects
>>           inheriting from class factor.


Hence we are waiting for a new patch  (:-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 17:15:28 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 09:15:28 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87lm9bdzkn.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
Message-ID: <87hejzdz33.fsf@jeeves.blindglobe.net>

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch  (:-)

    a> In order to do that, I need to know what abbreviate.arg (the
    a> "un-documented" argument) does.  Anyone know?    Other thant that,
    a> it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when doing reverse
    a> engineering...). 

And here's the hack; note that I've left my "argument" in for
backwards compatibility.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    cat("Levels: ", paste(levels(x)[1:max.levels], collapse = " "),
"\n")
  }
  invisible(x) 
} 

It's ugly but seems to work.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Jun 19 17:58:13 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 19 Jun 2002 18:58:13 +0200 (MET DST)
Subject: levels() counter-intuitif? (PR#1693)
Message-ID: <200206191658.SAA04763@pubhealth.ku.dk>

Suppose I have a factor size with levels "small", "medium" and "large". 
Then, when I subset this factor:
>ss<-size[size!="medium"]
to get at the extremes,
>levels(ss)
....
Levels:  large medium small

The same happens with
>subset( size, size!="medium")

I understand that the resulting factor inherits the possible levels from its 
"parent", but I do not see in what that is useful. Intuitively, I would 
expect that levels(ss) return "small" and "large". For subset(), there might 
be an option to request inheritance of the number of levels.

RenE J.V. Bertin
College de France/LPPA
11, place Marcelin Berthelot
75005 Paris, France

_________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 19 18:16:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 2002 19:16:17 +0200
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <x23cvj195q.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.

Not a bug (in any sense). Basically, you do need factors with levels
that are not present once in a while (we had a tabulation example
recently), and it is easier to remove unwanted levels than it is to
get the levels back in. E.g.

> x[-1]
[1] medium large 
Levels:  large medium small 

> x[-1,drop=T]
[1] medium large 
Levels:  large medium 

> factor(x[-1])
[1] medium large 
Levels:  large medium 

As for the usefulness, consider this

> with(subset(juul,sex==1), table(menarche))
numeric(0)
> juul$menarche <- factor(juul$menarche)
> with(subset(juul,sex==1), table(menarche))
menarche
1 2 
0 0 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:18:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:18:18 +0100 (BST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191812200.11375-100000@gannet.stats>

On Wed, 19 Jun 2002 rjvbertin@hotmail.com wrote:

> Suppose I have a factor size with levels "small", "medium" and "large".
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small
>
> The same happens with
> >subset( size, size!="medium")
>
> I understand that the resulting factor inherits the possible levels from its
> "parent", but I do not see in what that is useful.

When you have enough experience you may.  Lots of R code relies on it, for
a start.  It's also essential when predicting a classifcation to know wha
the possible values were.  That's the whole point of a factor: it's an
enumeration type, and one does not change the enumeration on subsetting.

>  Intuitively, I would
> expect that levels(ss) return "small" and "large". For subset(), there might
> be an option to request inheritance of the number of levels.

There is such an option:  [, drop=TRUE].

Please DO NOT use R-bugs to document your intuition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 19 18:30:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Jun 2002 18:30:27 +0100 (BST)
Subject: overzealous help-links.sh script! (PR#1682)
In-Reply-To: <200206171311.PAA15557@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206191820320.11375-100000@gannet.stats>

Not a bug.  .R is a `hidden' private directory for R's own use.
Have you been trespassing:  `including stuff the user might have
installed' suggests you have?

On Mon, 17 Jun 2002 rjvbertin@hotmail.com wrote:

> Starting html help in the current version of R has a very annoying
> side-effect. It indiscriminantly removes $HOME/.R, and replaces it with a
> virgin copy. I discovered that when all of a sudden I got complaints about
> my startup "library" not being found.
> Below is a modified version of the script that doesn't do this. It is not
> perfect yet (it shouldn't try to recreate links that already exists; there

Why: the targets of the links may well have changed?  Remember that
R_HOME can change from invocation to invocation, and if there are
different R versions (even on different platforms) keeping anything is
completely inappropriate.  You can't even delete just what you want to
replace, as .R might have been created by a later R version and put other
things in there.

> must be a glitch in the multi-test if lines) but it is safer than the
> previous version!

Not so.  Have you read the section on BUGS in the FAQ recently?

>
> RenE Bertin
>
>
> #! /bin/sh
>
> # 20020615 RJVB : I modified this script such that it will not at each
> invocation throw away the ~/.R directory
> # with all that it contains (including stuff the user might have
> installed!!)
> # Instead, it will create what doesn't exist, and warn whenever an error
> occurs (= a dir can't be made because a file
> # with the same name exists.
> # For the links, I try to be clever, and put in only those that aren't there
> yet, but this doesn't yet function
> # correctly with the single-line-2-test expression. Therefore, all output
> from ln is thrown away :)
>
> USER_R_HOME="${HOME}/.R"
> PKGLIST="${USER_R_HOME}/doc/html/packages.html"
> SEARCHINDEX="${USER_R_HOME}/doc/html/search/index.txt"
> # RJVB: don't do this!!
> # rm -rf ${USER_R_HOME}
>
> dirs="${USER_R_HOME} ${USER_R_HOME}/doc ${USER_R_HOME}/doc/html
> ${USER_R_HOME}/doc/html/search ${USER_R_HOME}/library"
> for d in ${dirs}; do
> # RJVB
>     if [ ! -e ${d} ] ;then
> 	    mkdir -p ${d}
> 	elif [ ! -d ${d} ] ;then
> 		echo "Warning: ${d} already exists but is not a directory!"
> 	fi
> done
>
> for f in AUTHORS COPYING THANKS; do
> # RJVB
>   if [ -f ${R_HOME}/${f} -a ! -e ${USER_R_HOME}/${f} ] ;then
>     ln -s ${R_HOME}/${f} ${USER_R_HOME}/${f}
>   fi
> done
>
> # RJVB
> if [ -d ${R_HOME}/doc/manual -a ! -e ${USER_R_HOME}/doc/manual ] ;then
>   ln -s ${R_HOME}/doc/manual ${USER_R_HOME}/doc/manual
> fi
>
> for f in ${R_HOME}/doc/html/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html 1>/dev/null 2>1
>     fi
> done
>
> for f in ${R_HOME}/doc/html/search/*; do
> # RJVB
>     if [ -f $f -a ! -e ${USER_R_HOME}/doc/html/search/${f} ] ;then
> 	ln -s ${f} ${USER_R_HOME}/doc/html/search 1>/dev/null 2>1
>     fi
> done
>
> rm -f ${PKGLIST}
> rm -f ${SEARCHINDEX}
> cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
>
> get_unique () {
>   if test -r ${1}; then
>     x="1"
>     while test -r ${1}.${x}; do
>       x=`echo "$x+1" | bc`
>     done
>     echo ${1}.${x}
>   else
>     echo $1
>   fi
> }
>
>
> for lib in $*; do
>     echo "<p><h3>Packages in ${lib}</h3>" >> ${PKGLIST}
>     echo "<p><table width=\"100%\">" >> ${PKGLIST}
>     if test -d ${lib}; then
>       for pkg in `ls -d ${lib}/* | sed '/CVS$/d; /profile$/d'`; do
> 	if test -d ${pkg}; then
> 	    pkgname=`basename ${pkg}`
> 	    target=`get_unique ${USER_R_HOME}/library/${pkgname}`
> 	    targetname=`basename ${target}`
> 	    ln -s ${pkg} ${target}
> 	    if test -r ${pkg}/TITLE; then
> 		pkgtitle=`cat ${pkg}/TITLE | sed "s/^${pkgname}//"`
> 	    else
> 		pkgtitle=""
> 	    fi
> 	    echo "<tr align=\"left\" valign=\"top\">
> 		    <td width=\"25%\"><a
> href=\"../../library/${targetname}/html/00Index.html\">
> 		    ${pkgname}</a><td>${pkgtitle}</td></tr>" \
> 		>> ${PKGLIST}
>
> 	    cat ${pkg}/CONTENTS | \
> 	      sed "s/\/library\/${pkgname}\//\/library\/${targetname}\//;" \
> 	      >> ${SEARCHINDEX}
>
>
> 	fi
>       done
>     fi
>     echo "</table>" >> ${PKGLIST}
>     echo "" >> ${PKGLIST}
> done
>
> echo "</body></html>" >> ${PKGLIST}
> ln -s ${R_HOME}/doc/html/R.css ${USER_R_HOME}/library 1>/dev/null 2>1
>
> ### Local Variables: ***
> ### mode: sh ***
> ### sh-indentation: 2 ***
> ### End: ***
>
>
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
>
> _________________________________________________________________
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Jun 19 18:41:47 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 19 Jun 2002 19:41:47 +0200 (MEST)
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0206191936550.6748-100000@artemis>



> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

sure, because you didn't change the levels attribute of the factor object
ss. And there is no statement in the documentation that subsetting a
factor object touches the levels attribute. So why is this a bug? If I
remember correctly, there was a dicussion about this issue a few month ago
on this list ...

Torsten

> 
> The same happens with
> >subset( size, size!="medium")
> 
> I understand that the resulting factor inherits the possible levels from its 
> "parent", but I do not see in what that is useful. Intuitively, I would 
> expect that levels(ss) return "small" and "large". For subset(), there might 
> be an option to request inheritance of the number of levels.
> 
> RenE J.V. Bertin
> College de France/LPPA
> 11, place Marcelin Berthelot
> 75005 Paris, France
> 
> _________________________________________________________________
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Jun 19 18:50:07 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 19 Jun 2002 13:50:07 -0400
Subject: levels() counter-intuitif? (PR#1693)
In-Reply-To: <200206191658.SAA04763@pubhealth.ku.dk>
References: <200206191658.SAA04763@pubhealth.ku.dk>
Message-ID: <15632.50255.346546.580824@gargle.gargle.HOWL>

rjvbertin@hotmail.com writes:
> Suppose I have a factor size with levels "small", "medium" and "large". 
> Then, when I subset this factor:
> >ss<-size[size!="medium"]
> to get at the extremes,
> >levels(ss)
> ....
> Levels:  large medium small

Try:
  R> ss <- size[size != "medium", drop=T]
  R> levels(ss)
     [1] "large" "small"

By the way, this type of question probably belongs in R-help, not R-devel, and
you will likely get grief for submitting it as a "bug".
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Wed Jun 19 19:46:46 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Wed, 19 Jun 2002 14:46:46 -0400 (EDT)
Subject: Anon CVS updates?
Message-ID: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>

Is the anonymous CVS repository for R presently broken? There haven't been
many updates coming through and the repository files seem to differ
significantly from the rsync version of R-devel...

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 19:59:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 11:59:04 -0700
Subject: Anon CVS updates?
In-Reply-To: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10206191438520.4284-100000@hsph.harvard.edu>
Message-ID: <87hejzdrif.fsf@jeeves.blindglobe.net>

>>>>> "byron" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    byron> Is the anonymous CVS repository for R presently broken? There haven't been
    byron> many updates coming through and the repository files seem to differ
    byron> significantly from the rsync version of R-devel...

doing a cvs log on my copy suggests that it's reasonably up to date.
"today's activity":

rossini 82 > cd anoncvs/R
rossini 83 > cvs log | grep 2002/06/19
cvs server: Logging .
date: 2002/06/19 06:30:55;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 06:30:46;  author: hornik;  state: Exp;  lines: +3 -4
date: 2002/06/19 14:44:06;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 11:45:38;  author: ripley;  state: Exp;  lines: +2 -0
date: 2002/06/19 10:40:02;  author: ripley;  state: Exp;  lines: +3 -0
date: 2002/06/19 09:46:27;  author: ripley;  state: Exp;  lines: +4 -0
date: 2002/06/19 07:29:54;  author: ripley;  state: Exp;  lines: +1 -1
date: 2002/06/19 07:04:07;  author: ripley;  state: Exp;  lines: +3 -2
date: 2002/06/19 18:15:39;  author: ripley;  state: Exp;  lines: +1 -0
date: 2002/06/19 09:21:09;  author: ripley;  state: Exp;  lines: +4 -0

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Jun 19 20:32:12 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Jun 2002 12:32:12 -0700
Subject: new version of print.factor
Message-ID: <874rfzdpz7.fsf@jeeves.blindglobe.net>


Thanks to Tony Plate for letting me know what the abbreviate.arg
option does.  I think this could be made more flexible (I.e. 
 =TRUE, =FALSE, =#, where # would be passed to the abbreviate
min.length argument).  But it follows the example I was given.

"print.factor" <- 
  function (x, quote = FALSE, max.levels=5, print.levels = {if
(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
{ 
  if (length(x) <= 0) 
    cat("factor(0)\n") 
  else print(as.character(x), quote = quote, ...) 
  if (print.levels) {
    if (abbreviate.arg) {
      cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
                            collapse = " "), "\n")
    } else {
      cat("Levels: ", paste(levels(x)[1:max.levels],
                            collapse = " "), "\n")
    }
  }
  invisible(x) 
} 
 

It definitely could be cleaned up a bit more.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 11:13:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 12:13:33 +0200
Subject: a version of source() which keeps comments ?
Message-ID: <15633.43725.738497.292166@gargle.gargle.HOWL>

I'd like to have this to be used in, e.g.,
demo() and example().

Currently, source() parse()s the entire file and then evaluates
expression by expression. ``Of course'',  parse() already loses
the comments.

An (much slower) alternative might be to the readLine() the
file, echo what we read, 
and try to parse() ``the current chunk''.
when parse() fails (when the current expression is incomplete),
we silently read the next line, etc, until the expression is complete and hence
parse() succeeds, then we eval() and print().

What do people think?

Would there be volunteers to write this?
[I think it should finalize as an optional argument to source(), 
 but for experimentation it might be easier to try with a
 function  sourceLinewise(.)
].

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 20 11:21:11 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 20 Jun 2002 12:21:11 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <15633.44183.500647.714908@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 20 Jun 2002 12:13:33 +0200,
>>>>> Martin Maechler (MM) wrote:

  > I'd like to have this to be used in, e.g.,
  > demo() and example().

  > Currently, source() parse()s the entire file and then evaluates
  > expression by expression. ``Of course'',  parse() already loses
  > the comments.

  > An (much slower) alternative might be to the readLine() the
  > file, echo what we read, 
  > and try to parse() ``the current chunk''.
  > when parse() fails (when the current expression is incomplete),
  > we silently read the next line, etc, until the expression is complete and hence
  > parse() succeeds, then we eval() and print().

  > What do people think?

  > Would there be volunteers to write this?
  > [I think it should finalize as an optional argument to source(), 
  >  but for experimentation it might be easier to try with a
  >  function  sourceLinewise(.)
  > ].

I'm not a volunteer but the feature would also be extremely useful for
Sweave (and probably most other dynamic report approaches), where we
currently loose all comments in code chunks.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 12:21:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 13:21:00 +0200
Subject: a version of source() which keeps comments ?
In-Reply-To: <15633.43725.738497.292166@gargle.gargle.HOWL>
References: <15633.43725.738497.292166@gargle.gargle.HOWL>
Message-ID: <x2660eryar.fsf@biostat.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'd like to have this to be used in, e.g.,
> demo() and example().
> 
> Currently, source() parse()s the entire file and then evaluates
> expression by expression. ``Of course'',  parse() already loses
> the comments.
> 
> An (much slower) alternative might be to the readLine() the
> file, echo what we read, 
> and try to parse() ``the current chunk''.
> when parse() fails (when the current expression is incomplete),
> we silently read the next line, etc, until the expression is complete and hence
> parse() succeeds, then we eval() and print().
> 
> What do people think?
> 
> Would there be volunteers to write this?
> [I think it should finalize as an optional argument to source(), 
>  but for experimentation it might be easier to try with a
>  function  sourceLinewise(.)
> ].

Historically, this is what source() should have done all the time if
it were to be in keeping with other Unix programs (shift input from
stdin temporarily). The source() that we have is really "evaluate
file". I don't think we can source() an infinite stream like a pipe or
a socket, can we?

Actually, I think it can be done with a little careful file descriptor
switching. (Turn of readline processing, etc., switch stdin to file,
run till eof or error, switch back and reestablish readline.) We'd
still have the reparse-on-incomplete thing, since that also happens on
stdin -- something I suspect isn't necessary, but it takes a fairly
hard look at the grammar itself to find out. 

(This kind of stuff has long been on my might-do list of projects,
along with (re)fixing the comment issue and providing better
information on parse/eval errors. I'd better not feel possessive about
the ideas...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 12:43:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 12:43:26 +0100 (BST)
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>

On 20 Jun 2002, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> > I'd like to have this to be used in, e.g.,
> > demo() and example().
> >
> > Currently, source() parse()s the entire file and then evaluates
> > expression by expression. ``Of course'',  parse() already loses
> > the comments.
> >
> > An (much slower) alternative might be to the readLine() the
> > file, echo what we read,
> > and try to parse() ``the current chunk''.
> > when parse() fails (when the current expression is incomplete),
> > we silently read the next line, etc, until the expression is complete and hence
> > parse() succeeds, then we eval() and print().
> >
> > What do people think?
> >
> > Would there be volunteers to write this?
> > [I think it should finalize as an optional argument to source(),
> >  but for experimentation it might be easier to try with a
> >  function  sourceLinewise(.)
> > ].
>
> Historically, this is what source() should have done all the time if
> it were to be in keeping with other Unix programs (shift input from
> stdin temporarily). The source() that we have is really "evaluate
> file". I don't think we can source() an infinite stream like a pipe or
> a socket, can we?
>
> Actually, I think it can be done with a little careful file descriptor
> switching. (Turn of readline processing, etc., switch stdin to file,
> run till eof or error, switch back and reestablish readline.) We'd

Rather, connection-switching.  The Green book describes sink() as being
capable of switching the input connection, but it isn't like that
in any version of S-PLUS I have ever seen.  I haven't thought through the
ramifications.


> still have the reparse-on-incomplete thing, since that also happens on
> stdin -- something I suspect isn't necessary, but it takes a fairly
> hard look at the grammar itself to find out.
>
> (This kind of stuff has long been on my might-do list of projects,
> along with (re)fixing the comment issue and providing better
> information on parse/eval errors. I'd better not feel possessive about
> the ideas...)
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jun 20 12:58:05 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 20 Jun 2002 07:58:05 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Thu, Jun 20, 2002 at 12:43:26PM +0100
References: <x2660eryar.fsf@biostat.ku.dk> <Pine.LNX.4.31.0206201234540.18504-100000@gannet.stats>
Message-ID: <20020620075805.B18932@jessie.research.bell-labs.com>

ripley@stats.ox.ac.uk wrote:
> On 20 Jun 2002, Peter Dalgaard BSA wrote:
> 
> > Martin Maechler <maechler@stat.math.ethz.ch> writes:
> >
> > > I'd like to have this to be used in, e.g.,
> > > demo() and example().
> > >
> > > Currently, source() parse()s the entire file and then evaluates
> > > expression by expression. ``Of course'',  parse() already loses
> > > the comments.
> > >
> > > An (much slower) alternative might be to the readLine() the
> > > file, echo what we read,
> > > and try to parse() ``the current chunk''.
> > > when parse() fails (when the current expression is incomplete),
> > > we silently read the next line, etc, until the expression is complete and hence
> > > parse() succeeds, then we eval() and print().
> > >
> > > What do people think?
> > >
> > > Would there be volunteers to write this?
> > > [I think it should finalize as an optional argument to source(),
> > >  but for experimentation it might be easier to try with a
> > >  function  sourceLinewise(.)
> > > ].
> >
> > Historically, this is what source() should have done all the time if
> > it were to be in keeping with other Unix programs (shift input from
> > stdin temporarily). The source() that we have is really "evaluate
> > file". I don't think we can source() an infinite stream like a pipe or
> > a socket, can we?
> >
> > Actually, I think it can be done with a little careful file descriptor
> > switching. (Turn of readline processing, etc., switch stdin to file,
> > run till eof or error, switch back and reestablish readline.) We'd
> 
> Rather, connection-switching.  The Green book describes sink() as being
> capable of switching the input connection, but it isn't like that
> in any version of S-PLUS I have ever seen.  I haven't thought through the
> ramifications.


And I'll make a further distinction (again based on S4 and hopefully
very soon to be R): specifically we should be able to switch `reader'
on a connection. In S4 one can associate an S function with a
connection so that when input becomes available on the connection's
file descriptor, the S function is invoked. This is a reader.

We can support this on Unix using the AddInputHandler, but we need to
add a method to the C level connection structure to get its file
descriptor.  Additionally, I'm in the middle of experimenting with
different event loops (e.g. those of Tcl/Tk and Gtk) and allowing them
to be run as the main R event loop. We get timers (monitors in S4) and
file descriptor notification for "free" in both of these.  I intend to
have an RFC for this and an implementation for sliding it into R next
week. (Anyone's welcome to the code now if they are interested.)

> 
> 
> > still have the reparse-on-incomplete thing, since that also happens on
> > stdin -- something I suspect isn't necessary, but it takes a fairly
> > hard look at the grammar itself to find out.
> >
> > (This kind of stuff has long been on my might-do list of projects,
> > along with (re)fixing the comment issue and providing better
> > information on parse/eval errors. I'd better not feel possessive about
> > the ideas...)
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 20 13:04:28 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 20 Jun 2002 14:04:28 +0200
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <87hejzdz33.fsf@jeeves.blindglobe.net>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
Message-ID: <15633.50380.961465.204023@gargle.gargle.HOWL>


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    ....

hmm, are you serious ?
I mean it's not a very good reason to introduce an extra
argument, not S back-compatible, just because you had a local
hack with it?

I'm about to do the version withOUT the `print.levels'.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 13:05:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 14:05:00 +0200 (MET DST)
Subject: [R] cut with infinite values -> NA (PR#1694)
Message-ID: <200206201205.OAA11945@pubhealth.ku.dk>

You are correct in your expectations.  This is a bug: the C code does not
cover the cases +/-Inf (because it uses R_FINITE to exclude them).

I'll fix it in R-patched: filing with R-bugs for the record.

On 20 Jun 2002, Markus [ISO-8859-1] Jntti wrote:

> I am doing work on changes in establishment sizes and came across
> behavior that is quite understandable and easily worked around but
> a little surprising. On R 1.5.1 on Debian unstable (see below for
> R.version output):
>
> > cut.off <- c(-Inf, 0, Inf)
> > x <- c(-Inf, -10, 0, 10, Inf)
> > is.numeric(x)
> [1] TRUE
> > is.double(x)
> [1] TRUE
> > # but
> > cut(x, cut.off, include.lowest=T)
> [1] <NA>     [-Inf,0] [-Inf,0] (0,Inf]  <NA>
>
> The reason I am surprised is that standard logical operations on
> Inf generate expected results and storage.mode(Inf) is double and
> so on, so I was expecteing -Inf to belong to the lowest factor level and
> Inf to belong the highest.
>
> [For what it is worth, I am classifying establishments by their growth
> across years and one that in t1 has 0 workers and >0 in the next
> has infinite growth. This is easily worked around, but I am
> a little curious.]
>
> Regards,
>
> Markus
> code:
>
>  cut.off <- c(-Inf, 0, Inf)
> x <- c(-Inf, -10, 0, 10, Inf)
> is.numeric(x)
> is.double(x)
> # but
> cut(x, cut.off, include.lowest=T)
>
> > R.version
>          _
> platform i386-pc-linux-gnu
> arch     i386
> os       linux-gnu
> system   i386, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> --
> Markus Jantti
> Statistics Finland and University of Tampere
> markus.jantti@iki.fi
> http://www.iki.fi/~mjantti
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Jun 20 13:16:31 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 20 Jun 2002 08:16:31 -0400
Subject: a version of source() which keeps comments ?
In-Reply-To: <x2660eryar.fsf@biostat.ku.dk>
References: <15633.43725.738497.292166@gargle.gargle.HOWL> <x2660eryar.fsf@biostat.ku.dk>
Message-ID: <gbh3huoam6f5g5kir9jt73a72q6t9fru61@4ax.com>

On 20 Jun 2002 13:21:00 +0200, you wrote:
>
>(This kind of stuff has long been on my might-do list of projects,
>along with (re)fixing the comment issue and providing better
>information on parse/eval errors. I'd better not feel possessive about
>the ideas...)

If this were done, it would be nice to do it in a way that would allow
better debugging hooks sometime in the future.  Specifically:

 - the error mechanism should know the filename and line number that
was being parsed when the error occurred, and should report them.

 - as functions are being defined the filename and line numbers
corresponding to (the start of) each statement should be saveable, so
a debugger could work on the source file, instead of on the deparsed
version.

 - it should be possible to set a (conditional?) breakpoint on a line
number in a file.

I'm not saying that we should hold off on getting source() right until
we can do all of the above, just that if possible those things should
be kept in mind as source is being fixed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jun 20 15:11:48 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Jun 2002 07:11:48 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
In-Reply-To: <15633.50380.961465.204023@gargle.gargle.HOWL>
References: <871yd7jsjh.fsf@jeeves.blindglobe.net>
 <15632.42814.327732.92452@gargle.gargle.HOWL>
 <87lm9bdzkn.fsf@jeeves.blindglobe.net>
 <87hejzdz33.fsf@jeeves.blindglobe.net>
 <15633.50380.961465.204023@gargle.gargle.HOWL>
Message-ID: <87znxqxcnv.fsf@jeeves.blindglobe.net>

>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "a" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    martin> Hence we are waiting for a new patch (:-)

    a> In order to do that, I need to know what abbreviate.arg
    a> (the "un-documented" argument) does.  Anyone know?  Other
    a> thant that, it (the patch) is almost ready.

    a> (yes, I'm silly -- I'd rather not fire up S-PLUS 6 when
    a> doing reverse engineering...).

    tony> And here's the hack; note that I've left my "argument"
    tony> in for backwards compatibility.

    martin>     ....

    martin> hmm, are you serious ?

Actually, I am, since I'll keep it as my local version :-).  Note that
this is backwards compatible to a historic point (my April email :-).

    martin> I mean it's not a very good reason to introduce an extra
    martin> argument, not S back-compatible, just because you had a local
    martin> hack with it?

I think that's sensible (for others and R :-).

    martin> I'm about to do the version withOUT the `print.levels'.

And that is fine.  Something needs to be fixed with respect to the
abbreviate.arg; I think that there is a better way.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Thu Jun 20 17:08:47 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 20 Jun 2002 10:08:47 -0600
Subject: new version of print.factor
In-Reply-To: <874rfzdpz7.fsf@jeeves.blindglobe.net>
Message-ID: <5.1.0.14.2.20020620095015.00aab050@mailhost.blackmesacapital.com>

Here's what S-plus 6.0 does with abbreviate.arg:

# S-plus 6.0
 > print(factor(c("fooooooo","baaaaaar")))
[1] fooooooo baaaaaar
 > print(factor(c("fooooooo","baaaaaar")), quote=T)
[1] "fooooooo" "baaaaaar"
Levels:
[1] "baaaaaar" "fooooooo"
 > print(factor(c("fooooooo","baaaaaar")),abbreviate.arg=T, quote=T)
fooooooo baaaaaar
"fooo" "baar"
Levels:
[1] "baar" "fooo"

(The function below does not abbreviate vector contents when given 
abbreviate.arg==TRUE, which may be more or less suitable depending on the 
task at hand.  Also, S-plus doesn't print levels unless quote==TRUE or "If 
some of the levels in a factor object are not in represented in the 
object", but this difference was already present in the R.1.5.0 version of 
print.factor.)

-- Tony Plate

At 12:32 PM 6/19/2002 -0700, A.J. Rossini wrote:

>Thanks to Tony Plate for letting me know what the abbreviate.arg
>option does.  I think this could be made more flexible (I.e.
>  =TRUE, =FALSE, =#, where # would be passed to the abbreviate
>min.length argument).  But it follows the example I was given.
>
>"print.factor" <-
>   function (x, quote = FALSE, max.levels=5, print.levels = {if
>(max.levels==0) FALSE else TRUE}, abbreviate.arg=FALSE, ...)
>{
>   if (length(x) <= 0)
>     cat("factor(0)\n")
>   else print(as.character(x), quote = quote, ...)
>   if (print.levels) {
>     if (abbreviate.arg) {
>       cat("Levels: ", paste(abbreviate(levels(x)[1:max.levels]),
>                             collapse = " "), "\n")
>     } else {
>       cat("Levels: ", paste(levels(x)[1:max.levels],
>                             collapse = " "), "\n")
>     }
>   }
>   invisible(x)
>}
>
>
>It definitely could be cleaned up a bit more.
>
>best,
>-tony
>
>--
>A.J. Rossini                            Rsrch. Asst. Prof. of Biostatistics
>U. of Washington Biostatistics          rossini@u.washington.edu
>FHCRC/SCHARP/HIV Vaccine Trials Net     rossini@scharp.org
>-------------- http://software.biostat.washington.edu/ ----------------
>FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
>UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
>(my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bcooper@hsph.harvard.edu  Thu Jun 20 17:59:36 2002
From: bcooper@hsph.harvard.edu (bcooper@hsph.harvard.edu)
Date: Thu, 20 Jun 2002 18:59:36 +0200 (MET DST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
Message-ID: <200206201659.SAA15080@pubhealth.ku.dk>

Full_Name: Ben Cooper
Version: 1.5.0
OS: linux
Submission from: (NULL) (134.174.187.90)


The help page for glm.nb (in MASS package) says that it takes "Any other
arguments for the glm() function except family"

One such argument is   start   "starting values for the parameters in the linear
predictor."

However, when called with starting values glm.nb returns:

   Error in model.frame(formula, rownames, variables, varnames, extras,
extranames,  : 
	  variable lengths differ

So it looks like this is either a bug, the documentation is inaccurate, or I'm
missing something (or some combination of the above).


An example:
________________________________________________________________


library(MASS)

y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)

lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)

lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)

lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)


># first a poisson model which is OK 
>glm(y~lag1+lag2+lag3,family=poisson(link=identity))
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #therefore try:
> glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))

# and this works. However, negative binomial model is not OK:

> glm.nb(y~lag1+lag2+lag3,link=identity)
Error: no valid set of coefficients has been found:please supply starting
values
In addition: Warning message: 
NaNs produced in: log(x) 

> #so try
> glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
 : 
	variable lengths differ

________________________________________________________________



I can get glm.nb to work with starting values with the following hack to the
glm.nb code:

i)

change the line
 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <- m$... <- NULL

 to 

 m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
<- m$link <-m$start <- m$... <- NULL


[i.e. insert m$start]

ii) 

remove the line:

start <- model.extract(m, start)


iii)

change the line

fit <- glm.fitter(x = X, y = Y, w = w, etastart = start, 
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

to
   fit <- glm.fitter(x = X, y = Y, w = w, start=start,
        offset = offset, family = fam0, control = list(maxit = control$maxit, 
            epsilon = control$epsilon, trace = control$trace > 
                1))

iv) change default value of start to NULL (as in glm) rather than eta when
glm.nb is called.

newglm.nb with these changes then works.

But no doubt there  are reasons for things being the way they are and these
changes screw other things up.

$platform
[1] "i686-pc-linux-gnu"
$arch
[1] "i686"
$os
[1] "linux-gnu"
$system
[1] "i686, linux-gnu"
$status
[1] ""
$major
[1] "1"
$minor
[1] "5.0"
$year
[1] "2002"
$month
[1] "04"
$day
[1] "29"
$language
[1] "R"

I also tried this with version 1.4.1 under Windows and had the same probelm.

cheers

Ben




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 18:33:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 18:33:42 +0100 (BST)
Subject: Possible bug with glm.nb and starting values (PR#1695)
In-Reply-To: <200206201659.SAA15080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206201827030.26128-100000@gannet.stats>

It's an R/S incompatibility issue. `start' should be interpreted in S's
sense, which is R's etastart.

Why R chose to be gratuitously incompatible has always puzzled me.

Remember MASS was written for S (actually before R), and not every
statement has been checked for R/S discrepancies.

On Thu, 20 Jun 2002 bcooper@hsph.harvard.edu wrote:

> Full_Name: Ben Cooper
> Version: 1.5.0
> OS: linux
> Submission from: (NULL) (134.174.187.90)
>
>
> The help page for glm.nb (in MASS package) says that it takes "Any other
> arguments for the glm() function except family"
>
> One such argument is   start   "starting values for the parameters in the linear
> predictor."
>
> However, when called with starting values glm.nb returns:
>
>    Error in model.frame(formula, rownames, variables, varnames, extras,
> extranames,  :
> 	  variable lengths differ
>
> So it looks like this is either a bug, the documentation is inaccurate, or I'm
> missing something (or some combination of the above).
>
>
> An example:
> ________________________________________________________________
>
>
> library(MASS)
>
> y<-c(7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3,4)
>
> lag1<-c(0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3,3)
>
> lag2<-c(0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5,3)
>
> lag3<-c(0,0,0,7,5,4,7,5,2,11,5,5,4,2,3,4,3,5,9,6,7,10,6,
> 12,6,3,5,3,9,13,0,6,1,2,0,1,0,0,4,5,1,5)
>
>
> ># first a poisson model which is OK
> >glm(y~lag1+lag2+lag3,family=poisson(link=identity))
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #therefore try:
> > glm(y~lag1+lag2+lag3,family=poisson(link=identity),start=c(2,0.1,0.1,0.1))
>
> # and this works. However, negative binomial model is not OK:
>
> > glm.nb(y~lag1+lag2+lag3,link=identity)
> Error: no valid set of coefficients has been found:please supply starting
> values
> In addition: Warning message:
> NaNs produced in: log(x)
>
> > #so try
> > glm.nb(y~lag1+lag2+lag3,link=identity,start=c(2,0.1,0.1,0.1))
> Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
>  :
> 	variable lengths differ
>
> ________________________________________________________________
>
>
>
> I can get glm.nb to work with starting values with the following hack to the
> glm.nb code:
>
> i)
>
> change the line
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <- m$... <- NULL
>
>  to
>
>  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- m$init.theta
> <- m$link <-m$start <- m$... <- NULL
>
>
> [i.e. insert m$start]
>
> ii)
>
> remove the line:
>
> start <- model.extract(m, start)
>
>
> iii)
>
> change the line
>
> fit <- glm.fitter(x = X, y = Y, w = w, etastart = start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> to
>    fit <- glm.fitter(x = X, y = Y, w = w, start=start,
>         offset = offset, family = fam0, control = list(maxit = control$maxit,
>             epsilon = control$epsilon, trace = control$trace >
>                 1))
>
> iv) change default value of start to NULL (as in glm) rather than eta when
> glm.nb is called.
>
> newglm.nb with these changes then works.
>
> But no doubt there  are reasons for things being the way they are and these
> changes screw other things up.
>
> $platform
> [1] "i686-pc-linux-gnu"
> $arch
> [1] "i686"
> $os
> [1] "linux-gnu"
> $system
> [1] "i686, linux-gnu"
> $status
> [1] ""
> $major
> [1] "1"
> $minor
> [1] "5.0"
> $year
> [1] "2002"
> $month
> [1] "04"
> $day
> [1] "29"
> $language
> [1] "R"
>
> I also tried this with version 1.4.1 under Windows and had the same probelm.
>
> cheers
>
> Ben
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From accot@free.fr  Thu Jun 20 19:07:51 2002
From: accot@free.fr (accot@free.fr)
Date: Thu, 20 Jun 2002 20:07:51 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201807.UAA15266@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------010901020707080002040305
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Prof Brian D Ripley wrote:
> Not a bug: check the documentation of file(), which is documented to work
> for files but not for devices.  No attempt is made to cope with e.g.
> blocking on non-files.
> 
> It's a pretty extreme view of the world to consider /dev/psaux to be a
> file, and R is just using standard C <stdio.h> I/O.
> 
> However, this is a great opportunity for you to contribute a device()
> function to R.

I finally checked the code and "wrote" the functions to "handle devices".
Well, in fact I more or less duplicated the code for FIFOs, removed the
option for encoding, added an option for synchronous I/O, and added a
test to check that the file is indeed a character or block special file.
This works great for me but I'm afraid it is a bit simple and does not
cover much of device handling in general.  Especially I don't know if
anybody would want to use it for block devices, and what they would need.
The psaux device is one of the simplest device one could think of, that's
why it works so well.  For other devices one would need at least an
ioctl function, which I didn't write.  But still I have no idea whether
anybody would use it and what for.  Anyway.  Please let me know if you
think this is useful.  If yes, I will try to familiarize myself with
the structure of the R code and make the device handling more general.

Thanks,
Johnny

--------------010901020707080002040305
Content-Type: text/plain;
 name="R-1.5.1-device.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="R-1.5.1-device.patch"

diff -ur R-1.5.1.orig/configure R-1.5.1/configure
--- R-1.5.1.orig/configure	2002-06-17 04:20:30.000000000 -0700
+++ R-1.5.1/configure	2002-06-19 19:33:22.000000000 -0700
@@ -17238,8 +17238,9 @@
 
 
 
+
 for ac_func in access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
diff -ur R-1.5.1.orig/configure.ac R-1.5.1/configure.ac
--- R-1.5.1.orig/configure.ac	2002-04-30 11:04:05.000000000 -0700
+++ R-1.5.1/configure.ac	2002-06-19 19:25:04.000000000 -0700
@@ -982,7 +982,7 @@
 
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv)
 ## <NOTE>
 ## No need checking for bcopy bzero memcpy mempcpy even though ifnames
diff -ur R-1.5.1.orig/src/include/config.h.in R-1.5.1/src/include/config.h.in
--- R-1.5.1.orig/src/include/config.h.in	2002-04-24 02:54:05.000000000 -0700
+++ R-1.5.1/src/include/config.h.in	2002-06-19 19:35:10.000000000 -0700
@@ -216,6 +216,9 @@
 /* Define to 1 if you have the `mkfifo' function. */
 #undef HAVE_MKFIFO
 
+/* Define to 1 if you have the `mknod' function. */
+#undef HAVE_MKNOD
+
 /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
 #undef HAVE_NDIR_H
 
diff -ur R-1.5.1.orig/src/include/Internal.h R-1.5.1/src/include/Internal.h
--- R-1.5.1.orig/src/include/Internal.h	2002-04-03 22:51:04.000000000 -0800
+++ R-1.5.1/src/include/Internal.h	2002-06-19 19:25:06.000000000 -0700
@@ -439,6 +439,7 @@
 SEXP do_isseekable(SEXP, SEXP, SEXP, SEXP);
 SEXP do_close(SEXP, SEXP, SEXP, SEXP);
 SEXP do_fifo(SEXP, SEXP, SEXP, SEXP);
+SEXP do_device(SEXP, SEXP, SEXP, SEXP);
 SEXP do_pipe(SEXP, SEXP, SEXP, SEXP);
 SEXP do_url(SEXP, SEXP, SEXP, SEXP);
 SEXP do_gzfile(SEXP, SEXP, SEXP, SEXP);
diff -ur R-1.5.1.orig/src/include/Rconnections.h R-1.5.1/src/include/Rconnections.h
--- R-1.5.1.orig/src/include/Rconnections.h	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/include/Rconnections.h	2002-06-19 20:09:26.000000000 -0700
@@ -28,7 +28,7 @@
     char* class;
     char* description;
     char mode[5];
-    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking;
+    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking, sync;
     Rboolean (*open)(struct Rconn *);
     void (*close)(struct Rconn *); /* routine closing after auto open */
     void (*destroy)(struct Rconn *); /* when closing connection */
@@ -58,6 +58,10 @@
     int fd;
 } *Rfifoconn;
 
+typedef struct deviceconn {
+    int fd;
+} *Rdeviceconn;
+
 typedef struct gzfileconn {
     void *fp;
     int cp;
diff -ur R-1.5.1.orig/src/library/base/man/connections.Rd R-1.5.1/src/library/base/man/connections.Rd
--- R-1.5.1.orig/src/library/base/man/connections.Rd	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/library/base/man/connections.Rd	2002-06-20 10:48:13.000000000 -0700
@@ -4,6 +4,7 @@
 \alias{file}
 \alias{pipe}
 \alias{fifo}
+\alias{device}
 \alias{gzfile}
 \alias{unz}
 \alias{bzfile}
@@ -31,6 +32,7 @@
 pipe(description, open = "", encoding = getOption("encoding"))
 fifo(description = "", open = "", blocking = FALSE,
      encoding = getOption("encoding"))
+device(description = "", open = "", blocking = TRUE, sync = TRUE)
 gzfile(description, open = "", encoding = getOption("encoding"),
        compression = 6)
 unz(description, filename, open = "", encoding = getOption("encoding"))
@@ -62,6 +64,7 @@
   \item{open}{character.  A description of how to open the connection
     (if at all). See Details for possible values.}
   \item{blocking}{logical.  See `Blocking' section below.}
+  \item{sync}{logical.  Should the device be opened for synchronous I/O?}
   \item{encoding}{An integer vector of length 256.}
   \item{compression}{integer in 0--9.  The amount of compression to be
     applied when writing, from none to maximal.  The default is a good
@@ -74,7 +77,7 @@
   \item{\dots}{arguments passed to or from other methods.}
 }
 \details{
-  The first eight functions create connections.  By default the
+  The first nine functions create connections.  By default the
   connection is not opened (except for \code{socketConnection}), but may
   be opened by setting a non-empty value of argument \code{open}.
 
@@ -135,8 +138,8 @@
   characters are mapped to a space in these encodings.
 }
 \value{
-  \code{file}, \code{pipe}, \code{fifo}, \code{url}, \code{gzfile} and
-  \code{socketConnection} return a connection object
+  \code{file}, \code{pipe}, \code{fifo}, \code{device}, \code{url},
+  \code{gzfile} and \code{socketConnection} return a connection object
   which inherits from class \code{"connection"} and has a first more
   specific class.
 
diff -ur R-1.5.1.orig/src/main/connections.c R-1.5.1/src/main/connections.c
--- R-1.5.1.orig/src/main/connections.c	2002-04-30 04:04:02.000000000 -0700
+++ R-1.5.1/src/main/connections.c	2002-06-19 20:12:34.000000000 -0700
@@ -640,6 +640,181 @@
 #endif
 }
 
+/* ------------------- device connections --------------------- */
+
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+
+#ifdef HAVE_STAT
+# ifndef Macintosh
+#  ifdef HAVE_SYS_TYPES_H
+#   include <sys/types.h>
+#  endif
+#  ifdef HAVE_SYS_STAT_H
+#   include <sys/stat.h>
+#  endif
+# else /* Macintosh */
+#  include <types.h>
+#  ifndef __MRC__
+#   include <stat.h>
+#  else
+#   include <mpw_stat.h>
+#  endif
+# endif /* Macintosh */
+#endif /* HAVE_STAT */
+
+#ifdef HAVE_ERRNO_H
+# include <errno.h>
+#endif
+
+static Rboolean device_open(Rconnection con)
+{
+    char *name;
+    Rdeviceconn this = con->private;
+    int fd, flags, res;
+    int mlen = strlen(con->mode);
+    struct stat sb;
+
+    name = R_ExpandFileName(con->description);
+    con->canwrite = (con->mode[0] == 'w' || con->mode[0] == 'a');
+    con->canread = !con->canwrite;
+    if(mlen >= 2 && con->mode[1] == '+') con->canread = TRUE;
+
+    /* check if the device exists and if it is a character or block device */
+    if(con->canwrite) {
+	res = stat(name, &sb);
+	if(res) { /* error, does not exist? */
+	    if(errno == ENOENT) warning("device `%s' does not exist", name);
+	    else warning("cannot find device `%s'", name);
+	    return FALSE;
+	} else {
+	    if(!(sb.st_mode & S_IFCHR) && !(sb.st_mode & S_IFBLK)) {
+		warning("`%s' exists but is neither a character special file nor a block special file", name);
+		return FALSE;
+	    }
+	}
+    }
+
+    if(con->canread && con->canwrite) flags = O_RDWR;
+    else if(con->canread) flags = O_RDONLY;
+    else flags = O_WRONLY;
+    if(!con->blocking) flags |= O_NONBLOCK;
+    if(con->sync) flags |= O_SYNC;
+    if(con->mode[0] == 'a') flags |= O_APPEND;
+    fd = open(name, flags);
+    if(fd < 0) {
+	if(errno == ENXIO) warning("device `%s' is not ready", name);
+	else warning("cannot open device `%s'", name);
+	return FALSE;
+    }
+    
+    this->fd = fd;
+    con->isopen = TRUE;
+
+    if(mlen >= 2 && con->mode[mlen-1] == 'b') con->text = FALSE;
+    else con->text = TRUE;
+    con->save = -1000;
+    return TRUE;
+}
+
+static int device_fgetc(Rconnection con)
+{
+    Rdeviceconn this = (Rdeviceconn)con->private;
+    unsigned char c;
+    int n;
+  
+    n = read(this->fd, (char *)&c, 1);
+    return (n == 1) ? c : R_EOF;
+}
+
+static Rconnection newdevice(char *description, char *mode)
+{
+    Rconnection new;
+    new = (Rconnection) malloc(sizeof(struct Rconn));
+    if(!new) error("allocation of device connection failed");
+    new->class = (char *) malloc(strlen("device") + 1);
+    if(!new->class) {
+	free(new);
+	error("allocation of device connection failed");
+    }
+    strcpy(new->class, "device");
+    new->description = (char *) malloc(strlen(description) + 1);
+    if(!new->description) {
+	free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    init_con(new, description, mode);
+    new->open = &device_open;
+    new->close = &fifo_close;
+    new->vfprintf = &dummy_vfprintf;
+    new->fgetc = &device_fgetc;
+    new->seek = &null_seek;
+    new->truncate = &null_truncate;
+    new->fflush = &null_fflush;
+    new->read = &fifo_read;
+    new->write = &fifo_write;
+    new->private = (void *) malloc(sizeof(struct deviceconn));
+    if(!new->private) {
+	free(new->description); free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    return new;
+}
+#endif
+
+SEXP do_device(SEXP call, SEXP op, SEXP args, SEXP env)
+{
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+    SEXP sfile, sopen, ans, class;
+    char *file, *open;
+    int i, ncon, block, sync;
+    Rconnection con = NULL;
+
+    checkArity(op, args);
+    sfile = CAR(args);
+    if(!isString(sfile) || length(sfile) < 1)
+	errorcall(call, "invalid `description' argument");
+    if(length(sfile) > 1)
+	warning("only first element of `description' argument used");
+    file = CHAR(STRING_ELT(sfile, 0));
+    sopen = CADR(args);
+    if(!isString(sopen) || length(sopen) != 1)
+	error("invalid `open' argument");
+    block = asLogical(CADDR(args));
+    if(block == NA_LOGICAL)
+	error("invalid `block' argument");
+    sync = asLogical(CADDDR(args));
+    if(sync == NA_LOGICAL)
+	error("invalid `sync' argument");
+    open = CHAR(STRING_ELT(sopen, 0));
+    ncon = NextConnection();
+    con = Connections[ncon] = newdevice(file, strlen(open) ? open : "r");
+    con->blocking = block;
+    con->sync = sync;
+
+    /* open it if desired */
+    if(strlen(open)) {
+	Rboolean success = con->open(con);
+	if(!success) {
+	    con_close(ncon);
+	    error("unable to open connection");
+	}
+    }
+
+    PROTECT(ans = allocVector(INTSXP, 1));
+    INTEGER(ans)[0] = ncon;
+    PROTECT(class = allocVector(STRSXP, 2));
+    SET_STRING_ELT(class, 0, mkChar("device"));
+    SET_STRING_ELT(class, 1, mkChar("connection"));
+    classgets(ans, class);
+    UNPROTECT(2);
+
+    return ans;
+#else
+    error("device connections are not available on this system");
+    return R_NilValue;		/* -Wall */
+#endif
+}
+
 /* ------------------- pipe connections --------------------- */
 
 #ifdef HAVE_POPEN
diff -ur R-1.5.1.orig/src/main/names.c R-1.5.1/src/main/names.c
--- R-1.5.1.orig/src/main/names.c	2002-04-04 14:11:31.000000000 -0800
+++ R-1.5.1/src/main/names.c	2002-06-20 10:38:39.000000000 -0700
@@ -692,9 +692,6 @@
 {"dev.control",	do_devcontrol,	0,	111,	0,	PP_FUNCALL},
 {"dev.copy",	do_devcopy,	0,	111,	1,	PP_FUNCALL},
 {"dev.cur",	do_devcur,	0,	111,	0,	PP_FUNCALL},
-/*
-{"device",	do_device,	0,	111,	3,	PP_FUNCALL},
-*/
 {"dev.next",	do_devnext,	0,	111,	1,	PP_FUNCALL},
 {"dev.off",	do_devoff,	0,	111,	1,	PP_FUNCALL},
 {"dev.prev",	do_devprev,	0,	111,	1,	PP_FUNCALL},
@@ -793,6 +790,7 @@
 {"url", 	do_url,		0,      11,     4,      PP_FUNCALL},
 {"pipe", 	do_pipe,	0,      11,     3,      PP_FUNCALL},
 {"fifo", 	do_fifo,	0,      11,     4,      PP_FUNCALL},
+{"device", 	do_device,	0,      11,     4,      PP_FUNCALL},
 {"gzfile", 	do_gzfile,	0,      11,     4,      PP_FUNCALL},
 {"unz", 	do_unz,		0,      11,     3,      PP_FUNCALL},
 {"bzfile", 	do_bzfile,	0,      11,     3,      PP_FUNCALL},

--------------010901020707080002040305--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 20 19:44:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Jun 2002 20:44:04 +0200 (MET DST)
Subject: Maybe a problem in binary read/write (PR#1688)
Message-ID: <200206201844.UAA15381@pubhealth.ku.dk>

On Thu, 20 Jun 2002, Johnny Accot wrote:

> Hello,
>
> Prof Brian D Ripley wrote:
> > Not a bug: check the documentation of file(), which is documented to work
> > for files but not for devices.  No attempt is made to cope with e.g.
> > blocking on non-files.
> >
> > It's a pretty extreme view of the world to consider /dev/psaux to be a
> > file, and R is just using standard C <stdio.h> I/O.
> >
> > However, this is a great opportunity for you to contribute a device()
> > function to R.
>
> I finally checked the code and "wrote" the functions to "handle devices".
> Well, in fact I more or less duplicated the code for FIFOs, removed the
> option for encoding, added an option for synchronous I/O, and added a
> test to check that the file is indeed a character or block special file.
> This works great for me but I'm afraid it is a bit simple and does not
> cover much of device handling in general.  Especially I don't know if
> anybody would want to use it for block devices, and what they would need.
> The psaux device is one of the simplest device one could think of, that's
> why it works so well.  For other devices one would need at least an
> ioctl function, which I didn't write.  But still I have no idea whether
> anybody would use it and what for.  Anyway.  Please let me know if you
> think this is useful.  If yes, I will try to familiarize myself with
> the structure of the R code and make the device handling more general.

Yes, I do think it would be useful, but I know little about it,
Thank you for the offer.

>
> Thanks,
> Johnny
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Jun 20 20:16:55 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 20 Jun 2002 21:16:55 +0200 (MET DST)
Subject: documentation fix for hclust.Rd (PR#1696)
Message-ID: <200206201916.VAA15452@pubhealth.ku.dk>


R-1.5.1/src/library/mva/man/hclust.Rd, line 92:

 The \code{plclust()} function is basically the same * the plot method,

I think the word "as" should be inserted at *

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 20 21:28:30 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 20 Jun 2002 22:28:30 +0200 (MET DST)
Subject: Bug in printing symbolic derivative (PR#1697)
Message-ID: <200206202028.WAA15677@pubhealth.ku.dk>

A colleague pointed out the following error in D():

 f  <- expression(exp(-2*x*y))
 Dx <- D(f, 'x')
 Dy <- D(f,'y')
 Dxy <- D(Dx, 'y')
 Dyx <- D(Dy, 'x')

Then 

>  Dx    # this is right
-exp(-2 * x * y) * (2 * y)
>  Dy    # this is right
exp(-2 * x * y) * (-2 * x)
>  Dxy   # this is wrong in the sign of the second term!!!
-exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2
>  Dyx   # this is also wrong in the sign of the second term!!!
-exp(-2 * x * y) * 2 + exp(-2 * x * y) * (2 * y) * (-2 * x)

In both cases, the answer would be correct if the initial sign were
applied to the whole expression; is this just a case of not printing
some parentheses?  Let's experiment...

> x <- 1
> y <- 2
> eval(Dxy)
[1] 0.1098938  # this is right
> eval(Dyx)
[1] 0.1098938  # this is right
> -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
[1] 0.1831564  # this is wrong!!
> -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
[1] 0.1098938  # this is right

Looks like that's it...

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From petr.savicky@ff.cuni.cz  Thu Jun 20 21:35:04 2002
From: petr.savicky@ff.cuni.cz (petr.savicky@ff.cuni.cz)
Date: Thu, 20 Jun 2002 22:35:04 +0200 (MET DST)
Subject: tree construction crashes (PR#1698)
Message-ID: <200206202035.WAA15713@pubhealth.ku.dk>

Full_Name: Petr Savicky
Version: 1.5.0
OS: SuSE 7.2
Submission from: (NULL) (147.231.6.1)


The function tree() from the tree package crashes for certain input data.
All the information needed to reproduce the error (data, script, expected
error message) may be found at
http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz

Exactly the same error appeared at another computer running some RedHat
and R-1.4.1.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 20 21:52:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jun 2002 22:52:41 +0200
Subject: Bug in printing symbolic derivative (PR#1697)
In-Reply-To: <200206202028.WAA15677@pubhealth.ku.dk>
References: <200206202028.WAA15677@pubhealth.ku.dk>
Message-ID: <x2k7ot4qqu.fsf@biostat.ku.dk>

murdoch@stats.uwo.ca writes:


> > eval(Dxy)
> [1] 0.1098938  # this is right
> > eval(Dyx)
> [1] 0.1098938  # this is right
> > -exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2 # this is how Dxy prints
> [1] 0.1831564  # this is wrong!!
> > -(exp(-2 * x * y) * (-2 * x) * (2 * y) + exp(-2 * x * y) * 2) # this is how it should print
> [1] 0.1098938  # this is right
> 
> Looks like that's it...

Yep. This is another long-standing item on the parse/deparse TODO
list. A more minimalistic version is

> "*"(5,2+3)
[1] 25
> quote("*"(5,2+3))
5 * 2 + 3
> eval(quote("*"(5,2+3)))
[1] 25

There are really two issues: we don't strip parentheses when parsing
and we don't insert them where needed on deparsing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Jun 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jun 2002 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200206210515.g5L5F3i19356@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1673 *
Subject: Late Make Problem with Readline
From: jerfox@stanford.edu
Date: Sat, 15 Jun 2002 12:00:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1682 *
Subject: overzealous help-links.sh script!
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 17 Jun 2002 15:10:18 +0200
* PR# 1693 *
Subject: levels() counter-intuitif?
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Wed, 19 Jun 2002 18:57:13 +0200
* PR# 1694 *
Subject: Re: [R] cut with infinite values -> NA
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 20 Jun 2002 13:04:08 +0100 (BST)
* PR# 1695 *
Subject: Possible bug with glm.nb and starting values 
From: bcooper@hsph.harvard.edu
Date: Thu, 20 Jun 2002 18:59:35 +0200 (MET DST)
* PR# 1696 *
Subject: documentation fix for hclust.Rd
From: Stephen Eglen <eglen@pcg.wustl.edu>
Date: Thu, 20 Jun 2002 14:16:28 -0500 (CDT)
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
* PR# 1698 *
Subject: tree construction crashes
From: petr.savicky@ff.cuni.cz
Date: Thu, 20 Jun 2002 22:35:03 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 08:57:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 08:57:33 +0100 (BST)
Subject: Behaviour of library() in R-devel
Message-ID: <Pine.LNX.4.31.0206210850490.12872-100000@gannet.stats>

In an attempt to help newbie confusion with (not) installing packages,
library() in R-devel will only load a package if

1) It contains a DESCRIPTION file and
2) That DESCRIPTION file contains a Built: line.

Because the standard packages have only had Built: lines for a few days,
2) is currently a warning.  If you see it on standard packages, do `make
clean; make' in R-devel.  (It should not be necessary, but Sun make failed
to rebuild the DESCRPTION files on one of my systems.)  Before the release
of 1.6.0 it will become an error (and is documented as such now).

2) will not apply to the Carbon MacOS port, which does not have an
automated INSTALL script (AFAIK).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Fri Jun 21 17:54:44 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Fri, 21 Jun 2002 18:54:44 +0200 (MET DST)
Subject: The title function does not always work properly when used to add a global title to a figure containing several plots.
Message-ID: <200206211654.SAA14292@luc.ac.be>

Hi everyone,
  The following problem occurs with R-1.5.1 on an Intel laptop running
RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
still currently have installed). The complete of these three different
platforms can be found at the end of my email.
  The problem is the following. I am trying to add a global title to a
figure which contains several plots. Although I am not convince the
method I am using (see below) is the best way to achieve this, I
noticed that it failed to add the title in certain cases but not in
others. I included below some examples where it works and where it
does not work for me. As the same behavior occurs on all three
platforms I have access to, I guess that everyone (perhaps not does on
MS-Windows or on a Mac) should be able to see the problem by running
my code (if this is not the case, please let me know and I shall
provide some postscript files illustrating the problem).
  Unfortunately, the c-code to print text to the graphic window is
very complex and I am not familiar with it. As I thought that the
problem was related with the "title" function, I started by looking at
the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
to call the subroutine "clipText" to print the text to the canvas (but
I could already be wrong about this...). But in any case, I was not
able to trace down the problem as each of these subroutines appears to
get entered as expected with parameters containing the expected values
but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
which I longer understand... On the other hand, I no longer think that
the problem is actually coming from the "title" function but rather
from a global variable (or perhaps a "par" option) that is not always
reset (or initialized) properly... by at least functions such as
"title" and plot.default with options "axis", "ylab", "xlab", or
"main" when the option "mfrow" is not set to "c(1,1)" in the "par"
options.
  I hope that this is understandable... but in any case, the following
examples should clarify things up.

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Not OK (global title not at all printed)
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# OK
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)",axes=F)
axis(1)
axis(2)
box()
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")

# Strange... but can perhaps help in identifying the problem.
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
title(main="This should be the title of this figure.")
title(main="This should be the title of this figure.",outer=TRUE)
title(main="This should be the title of this figure.")

  Please, let me know if I can be of any further help in tracing down
the problem.

Thanks,
Patrick

PS: Note that there is for the moment a work around which is the
following:

# Work-around
par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="This is the x-axis label.",
     ylab="This is the y-axis label.",main="a)")
par(mfrow=c(1,1),oma=c(0,0,0,0))
mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)

-----------------------------------------------------------------

> R.version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                

> R.version  
         _                   
platform alphaev6-dec-osf4.0f
arch     alphaev6            
os       osf4.0f             
system   alphaev6, osf4.0f   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

> R.version
         _               
platform mips-sgi-irix6.5
arch     mips            
os       irix6.5         
system   mips, irix6.5   
status                   
major    1               
minor    5.0             
year     2002            
month    04              
day      29              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 21 18:18:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Jun 2002 18:18:38 +0100 (BST)
Subject: The title function does not always work properly when used to
 add a global title to a figure containing several plots.
In-Reply-To: <200206211654.SAA14292@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0206211809200.2626-100000@gannet.stats>

Try

par(mfrow=c(2,2),oma=c(0,0,4,0))
plot(1:3,1:3,xlab="",ylab="",main="")
title(main="This should be the title of this figure.", outer=TRUE)

which is how it is intended that this be done.

All your examples work (as I expect from S) for me that way.

Basically, after par(mfrow=c(1,1),oma=c(0,0,0,0)) you have no outer
margin nor do you have a plot region set yet (and the next call which
does would clear the screen).  So your call to title() should probably
fail as in

> title(main="This should be the title of this figure.")
Error in title(main = "This should be the title of this figure.") :
        plot.new has not been called yet

It would be desirable if it either gave an error message or worked.

On Fri, 21 Jun 2002, Patrick Lindsey wrote:

> Hi everyone,
>   The following problem occurs with R-1.5.1 on an Intel laptop running
> RedHat 7.2, with R-1.5.0 on an Alpha server running OSF 4.0 and on a
> SGI server running IRIX 6.5, and with version of R as old as 1.2.3 (I
> only tried older version under RedHat 7.2 and R-1.2.3 is the oldest I
> still currently have installed). The complete of these three different
> platforms can be found at the end of my email.
>   The problem is the following. I am trying to add a global title to a
> figure which contains several plots. Although I am not convince the
> method I am using (see below) is the best way to achieve this, I
> noticed that it failed to add the title in certain cases but not in
> others. I included below some examples where it works and where it
> does not work for me. As the same behavior occurs on all three
> platforms I have access to, I guess that everyone (perhaps not does on
> MS-Windows or on a Mac) should be able to see the problem by running
> my code (if this is not the case, please let me know and I shall
> provide some postscript files illustrating the problem).
>   Unfortunately, the c-code to print text to the graphic window is
> very complex and I am not familiar with it. As I thought that the
> problem was related with the "title" function, I started by looking at
> the "do_title" subroutine (R_HOME/src/main/plot.c). From there, I went
> to the "GText" subroutine (R_HOME/src/main/graphics.c) which appears
> to call the subroutine "clipText" to print the text to the canvas (but
> I could already be wrong about this...). But in any case, I was not
> able to trace down the problem as each of these subroutines appears to
> get entered as expected with parameters containing the expected values
> but then "clipText" appears to call ((GEDevDesc*) dd)->dev->text(...)
> which I longer understand... On the other hand, I no longer think that
> the problem is actually coming from the "title" function but rather
> from a global variable (or perhaps a "par" option) that is not always
> reset (or initialized) properly... by at least functions such as
> "title" and plot.default with options "axis", "ylab", "xlab", or
> "main" when the option "mfrow" is not set to "c(1,1)" in the "par"
> options.
>   I hope that this is understandable... but in any case, the following
> examples should clarify things up.
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",ylab="",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="",ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Not OK (global title not at all printed)
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # OK
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)",axes=F)
> axis(1)
> axis(2)
> box()
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
>
> # Strange... but can perhaps help in identifying the problem.
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> title(main="This should be the title of this figure.")
> title(main="This should be the title of this figure.",outer=TRUE)
> title(main="This should be the title of this figure.")
>
>   Please, let me know if I can be of any further help in tracing down
> the problem.
>
> Thanks,
> Patrick
>
> PS: Note that there is for the moment a work around which is the
> following:
>
> # Work-around
> par(mfrow=c(2,2),oma=c(0,0,4,0))
> plot(1:3,1:3,xlab="This is the x-axis label.",
>      ylab="This is the y-axis label.",main="a)")
> par(mfrow=c(1,1),oma=c(0,0,0,0))
> mtext("This should be the title of this figure.",line=2,font=2,cex=1.2)
>
> -----------------------------------------------------------------
>
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
> > R.version
>          _
> platform alphaev6-dec-osf4.0f
> arch     alphaev6
> os       osf4.0f
> system   alphaev6, osf4.0f
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > R.version
>          _
> platform mips-sgi-irix6.5
> arch     mips
> os       irix6.5
> system   mips, irix6.5
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 00:26:52 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 01:26:52 +0200
Subject: AdaBoost for R
Message-ID: <3D16593C.2010101@ti.com>

I'm going to implement AdaBoost algorithm in R. Just wanted to ensure
that there is no implementation of any boosting algorithm in R... don't 
want
to reinvent the wheel...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 24 07:45:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 24 Jun 2002 08:45:18 +0200
Subject: AdaBoost for R
In-Reply-To: <3D16593C.2010101@ti.com>
References: <3D16593C.2010101@ti.com>
Message-ID: <15638.49150.232455.920097@gargle.gargle.HOWL>

>>>>> "AlexS" == Sirotkin, Alexander <demiurg@ti.com> writes:

    AlexS> I'm going to implement AdaBoost algorithm in R. Just
    AlexS> wanted to ensure that there is no implementation of
    AlexS> any boosting algorithm in R... don't want to reinvent
    AlexS> the wheel...

you might be reinventing.
Marcel Dettling from here has written a  LogitBoost Package
which is linked to a paper -- all available from

      http://stat.ethz.ch/~dettling/boosting 

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From demiurg@ti.com  Mon Jun 24 22:03:10 2002
From: demiurg@ti.com (Sirotkin, Alexander)
Date: Mon, 24 Jun 2002 23:03:10 +0200
Subject: AdaBoost for R
References: <15638.60248.317098.313167@gargle.gargle.HOWL>
Message-ID: <3D17890E.7020303@ti.com>

Hi.

Thanks a lot.  LogitBoost is cool, but for my current problem
I need  a multiclass (not binary) algorithm. Is this what you call
 Descrete AdaBoost ?

Marcel Dettling wrote:

>Dear Alexander,
>
>AlexS> I'm going to implement AdaBoost algorithm in R. Just
>AlexS> wanted to ensure that there is no implementation of
>AlexS> any boosting algorithm in R... don't want to reinvent
>AlexS> the wheel...
>
>Besides my LogitBoost-Package, I could also provide R-Code for
>Discrete and Real AdaBoost.
>
>Cheers,
>
>Marcel
>
>_____________________________________________________________
>
>Marcel Dettling		       
>ETH Zrich
>Seminar fr Statistik
>LEO C 12.2
>8092 Zrich
>Phone:  ++41 1 632 53 19
>E-Mail: dettling@stat.math.ethz.ch
>Web:    http://stat.ethz.ch/~dettling/	
>_____________________________________________________________
>  
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 09:41:04 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 09:41:04 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
Message-ID: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>


Dear All, 

No-one seemed to know about this on r-help, so I'm trying here.... 

I'm having problems at the configure stage when trying to build R on
Solaris 5.8. configure finds everything it needs but when it runs
config.status to make all the Makefiles and headers, I get a huge slew of
errors like this:

config.status: creating src/extra/zlib/Makefile
sed: -e expression #1, char 329: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
config.status: creating src/include/Makefile
sed: -e expression #1, char 323: Unterminated `s' command
sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command

...and so on. I have tried replacing Solaris's native sed with GNU sed (in
fact the above messages are from GNU sed but Solaris sed fails in a
similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
to force configure not to use solaris's cheesy /bin/sh . No success, so
now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
(and of course there is no problem on my Linux box!)

Any ideas welcome.

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 25 10:02:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Jun 2002 10:02:05 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.GSO.4.10.10206250939470.18455-100000@humilis>
Message-ID: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>

Probably none of us know about it, because it has worked for lots of us
out of the box. So it would seem to be specific to your environment.

BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
blame it, especially as ksh gets used on Solaris.  Those messages are from
config.status, which on one of my Solaris systems starts

#! /bin/ksh
# Generated by configure.
# Run this file to recreate the current configuration.
# Compiler output produced by configure, useful for debugging
# configure, is in config.log if it exists.

debug=false
SHELL=${CONFIG_SHELL-/bin/ksh}

Try actually using /bin/sh, which is guaranteed standard-conforming
(it is the standard).

On Tue, 25 Jun 2002, H C Pumphrey wrote:

>
> Dear All,
>
> No-one seemed to know about this on r-help, so I'm trying here....
>
> I'm having problems at the configure stage when trying to build R on
> Solaris 5.8. configure finds everything it needs but when it runs
> config.status to make all the Makefiles and headers, I get a huge slew of
> errors like this:
>
> config.status: creating src/extra/zlib/Makefile
> sed: -e expression #1, char 329: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
> config.status: creating src/include/Makefile
> sed: -e expression #1, char 323: Unterminated `s' command
> sed: file /tmp/cs6134-11745/subs-1.sed line 38: Unterminated `s' command
>
> ...and so on. I have tried replacing Solaris's native sed with GNU sed (in
> fact the above messages are from GNU sed but Solaris sed fails in a
> similar way). I have also tried setting CONFIG_SHELL to /foo/bar/bin/bash
> to force configure not to use solaris's cheesy /bin/sh . No success, so
> now I am at a loss. The problem occurs with R-1.5.0 but not with R-1.4.1
> (and of course there is no problem on my Linux box!)
>
> Any ideas welcome.
>
> Hugh
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Tue Jun 25 12:30:53 2002
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Tue, 25 Jun 2002 12:30:53 +0100 (BST)
Subject: configure for R 1.5.x on Solaris (fwd)
In-Reply-To: <Pine.LNX.4.31.0206250953150.26378-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10206251219540.13517-100000@humilis>

On Tue, 25 Jun 2002 ripley@stats.ox.ac.uk wrote:

> Probably none of us know about it, because it has worked for lots of us
> out of the box. So it would seem to be specific to your environment.

You were right -- and yes, it was _really_ stupid. I had a function in
.bashrc to set the window title to the CWD and it left some garbage in
config.status . I removed the offending function and R now seems to be
building normally. Odd that it hasn't broken a build before ..... 
 
> BTW, Solaris' `cheesy /bin/sh' is the archetypal Bourne shell, so don't
> blame it, especially as ksh gets used on Solaris.  Those messages are from
> config.status, which on one of my Solaris systems starts [with refs to
> ksh]

.... but /bin/sh did At least one program (and I can't recall which)
wouldn't build on Solaris until I forced it to use bash instead of
/bin/sh. But that wasn't the problem here (even though configure had
chosen to use /bin/sh and not /bin/ksh).

Bah. Sorry to bother everyone and many thanks for the help.

Hugh




============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lauri.Mehtatalo@metla.fi  Wed Jun 26 11:06:28 2002
From: Lauri.Mehtatalo@metla.fi (Lauri.Mehtatalo@metla.fi)
Date: Wed, 26 Jun 2002 12:06:28 +0200 (MET DST)
Subject: Bug? (PR#1710)
Message-ID: <200206261006.MAA20618@pubhealth.ku.dk>

Hi,

I tried to do a multiple linear model from the example 
dataset Formaldehyde. However, the function lm() did not 
estimate the coefficient of the term carb^2. The same 
problem occurred with the (nlme)dataset Pixel with both 
function lme() and lm(). I am using the windows version of 
R 1.5.1

Lauri Mehtatalo

The Formaldehyde example:
> data(Formaldehyde)
> lm(optden~carb+carb^2,data=Formaldehyde)

Call:
lm(formula = optden ~ carb + carb^2, data = 
Formaldehyde)

Coefficients:
(Intercept)         carb  
   0.005086     0.876286  

The Pixel example:

> {pkg <- select.list(sort(.packages(all.available = TRUE)))
+ if(nchar(pkg)) library(pkg, character.only=TRUE)}
Loading required package: nls 
Loading required package: lattice 
> data(Pixel)
>coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
~day,Side=~1)))
     (Intercept)         day
1/L     1048.995  0.32564928
1/R     1043.659  0.32564928
10/L    1144.898 -0.63867455
10/R    1099.883 -0.63867455
2/L     1054.011  0.65786288
2/R     1048.726  0.65786288
3/L     1065.000  0.45552014
3/R     1075.759  0.45552014
4/L     1088.173  0.93300591
4/R     1088.854  0.93300591
5/L     1125.918 -0.91429707
5/R     1129.309 -0.91429707
6/L     1112.721 -0.72735611
6/R     1094.164 -0.72735611
7/L     1133.443 -1.69593549
7/R     1156.943 -1.69593549
8/L     1101.205  0.05435070
8/R     1087.689  0.05435070
9/L     1093.513  0.05987474
9/R     1071.482  0.05987474
> coef(lm(pixel~day+day^2,data=Pixel))
(Intercept)         day 
1076.820678    1.341873  
- - - - - - - - - - - - -
Lauri Mehttalo
Metsntutkimuslaitos
Joensuun tutkimuskeskus
PL 68 (Yliopistokatu 7)
80101 JOENSUU
lauri.mehtatalo@metla.fi
p. 013-251 4110
- - - - - - - - - - - - -

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 12:34:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 26 Jun 2002 12:34:21 +0100 (BST)
Subject: Bug? (PR#1710)
In-Reply-To: <200206261006.MAA20618@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206261229110.10422-100000@gannet.stats>

This is NOT A BUG.

If you want a squared term, you need to include I(carb^2).  See ?formula
or even `An Introduction to R'.

Please

1) Use an informative subject line, as only the subject appears in the
BUGS summary file.

2) Read the Bugs section in the FAQ, and only post to R-bugs if you
are absolutely sure you understand.

On Wed, 26 Jun 2002 Lauri.Mehtatalo@metla.fi wrote:

> Hi,
>
> I tried to do a multiple linear model from the example
> dataset Formaldehyde. However, the function lm() did not
> estimate the coefficient of the term carb^2. The same
> problem occurred with the (nlme)dataset Pixel with both
> function lme() and lm(). I am using the windows version of
> R 1.5.1
>
> Lauri Mehtatalo
>
> The Formaldehyde example:
> > data(Formaldehyde)
> > lm(optden~carb+carb^2,data=Formaldehyde)
>
> Call:
> lm(formula = optden ~ carb + carb^2, data =
> Formaldehyde)
>
> Coefficients:
> (Intercept)         carb
>    0.005086     0.876286
>
> The Pixel example:
>
> > {pkg <- select.list(sort(.packages(all.available = TRUE)))
> + if(nchar(pkg)) library(pkg, character.only=TRUE)}
> Loading required package: nls
> Loading required package: lattice
> > data(Pixel)
> >coef(lme(pixel~day+day^2,data=Pixel,random=list(Dog=
> ~day,Side=~1)))
>      (Intercept)         day
> 1/L     1048.995  0.32564928
> 1/R     1043.659  0.32564928
> 10/L    1144.898 -0.63867455
> 10/R    1099.883 -0.63867455
> 2/L     1054.011  0.65786288
> 2/R     1048.726  0.65786288
> 3/L     1065.000  0.45552014
> 3/R     1075.759  0.45552014
> 4/L     1088.173  0.93300591
> 4/R     1088.854  0.93300591
> 5/L     1125.918 -0.91429707
> 5/R     1129.309 -0.91429707
> 6/L     1112.721 -0.72735611
> 6/R     1094.164 -0.72735611
> 7/L     1133.443 -1.69593549
> 7/R     1156.943 -1.69593549
> 8/L     1101.205  0.05435070
> 8/R     1087.689  0.05435070
> 9/L     1093.513  0.05987474
> 9/R     1071.482  0.05987474
> > coef(lm(pixel~day+day^2,data=Pixel))
> (Intercept)         day
> 1076.820678    1.341873
> - - - - - - - - - - - - -
> Lauri Mehttalo
> Metsntutkimuslaitos
> Joensuun tutkimuskeskus
> PL 68 (Yliopistokatu 7)
> 80101 JOENSUU
> lauri.mehtatalo@metla.fi
> p. 013-251 4110
> - - - - - - - - - - - - -
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 26 13:35:52 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jun 2002 13:35:52 +0100 (BST)
Subject: tree construction crashes (PR#1698)
In-Reply-To: <200206202035.WAA15713@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206261324340.13559-100000@auk.stats>

!) the construction does not `crash', it terminates with an error message,
and you could have used the standard R debugging tools to investigate. Your
incorrect report wasted my quite a lot of my time setting up a debugging
environment to catch a crash.

2) The problem is that you are asking for an exact fit to a large dataset,
and you have integer overflow on your 32-bit (I presume) machine.
What you are doing is not within the design specifcation of tree (nor
rpart). From the help page:

     To produce a tree that fits the data perfectly, set `mindev = 0'
     and `minsize = 2', if the limit on tree depth allows such a tree.

so this is even something discussed on the help page.

3) Reports on contributed packages should be sent or at least copied to
the maintainers, who do not in general have access to R-bugs nor read
R-devel.  In any case, it would be simple good manners.


On Thu, 20 Jun 2002 petr.savicky@ff.cuni.cz wrote:

> Full_Name: Petr Savicky
> Version: 1.5.0
> OS: SuSE 7.2
> Submission from: (NULL) (147.231.6.1)
>
>
> The function tree() from the tree package crashes for certain input data.
> All the information needed to reproduce the error (data, script, expected
> error message) may be found at
> http://www.cs.cas.cz/~savicky/tree_error/tree_error.tgz
>
> Exactly the same error appeared at another computer running some RedHat
> and R-1.4.1.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jun 27 08:53:12 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 27 Jun 2002 09:53:12 +0200 (MEST)
Subject: F90 in packages
Message-ID: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>


Hi, 

did anybody manage to compile F90 sources in an R-package? The major
problem is, at least in my opinion, that non of the "free" F90 -> F77
converters is working correctly, at least for the F90 sources
I need to compile. 

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 27 09:14:47 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Jun 2002 10:14:47 +0200
Subject: F90 in packages
In-Reply-To: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
References: <Pine.LNX.4.21.0206270946380.4376-100000@artemis>
Message-ID: <15642.51575.625436.892867@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> did anybody manage to compile F90 sources in an
    Torsten> R-package? The major problem is, at least in my
    Torsten> opinion, that non of the "free" F90 -> F77
    Torsten> converters is working correctly, at least for the
    Torsten> F90 sources I need to compile.

yes, exactly, and there's no mature GNU fortran 90 or even 95,
yet.  I've recently read about a "g95" {GNU Fortran 95} development
effort, but haven't taken the time to find out how far they are.

The f2c translator has been supporting some (minor) 
f90 extensions; you might investigate further there.

My consequence: 
   Encourage people using C (or C++ if it really makes sense),
   instead.  
But I know this is no real option for some in the
Numerical-Analysis Community, unfortunately.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socrates@mail.ru  Thu Jun 27 09:30:52 2002
From: socrates@mail.ru (socrates@mail.ru)
Date: Thu, 27 Jun 2002 10:30:52 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206270830.KAA29465@pubhealth.ku.dk>

Full_Name: Socrates Alikhanidi
Version: 1.5.1
OS: Windows 2000
Submission from: (NULL) (133.15.3.28)


During resizing of 'R Console' windows the fatal error of forbidden memory
access appears.
To reproduce that with a guaranty, resize windows by mouse with small steps.
Probably the faster computer is, the earlier that event appears. I have PIV 1.8
GHz.
Waiting time was near 1 second.

Thank you for great product.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 09:59:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 09:59:54 +0100 (BST)
Subject: GUI bug (PR#1711)
In-Reply-To: <200206270830.KAA29465@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>

Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
or an AthlonXP 1800.  If it were a common problem I am sure we would hear
about it often.

Why are you resizing the console at all?  You can set a suitable size in
the preferences.

On Thu, 27 Jun 2002 socrates@mail.ru wrote:

> Full_Name: Socrates Alikhanidi
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (133.15.3.28)
>
>
> During resizing of 'R Console' windows the fatal error of forbidden memory
> access appears.
> To reproduce that with a guaranty, resize windows by mouse with small steps.
> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
> GHz.
> Waiting time was near 1 second.
>
> Thank you for great product.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 14:21:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 14:21:42 +0100 (BST)
Subject: Testing for platform type
Message-ID: <Pine.LNX.4.31.0206271414520.22911-100000@gannet.stats>

The recommended way to test for a platform type is via .Platform$OS.type.
machine() has provided equivalent information, but will be deprecated in
1.6.0.

Using R.Version()$os == "Win32" does not work as the OS name is subject to
change, and is never `Win32' in R 1.5.x, where autoconf was used to make
the config.h file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 27 15:16:00 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 27 Jun 2002 16:16:00 +0200 (MET DST)
Subject: GUI bug (PR#1711)
Message-ID: <200206271416.QAA04430@pubhealth.ku.dk>

I can reproduce it in Win98 on a fairly slow machine.  It looks to me
as though the routine that's handling the WM_SIZE messages is being
interrupted by the new resize requests, and eventually the stack
overflows.  It would be best to ignore such requests while one is
active.  I don't understand graphapp well enough to know where to fix
this.

Duncan Murdoch

On Thu, 27 Jun 2002 09:59:54 +0100 (BST), you wrote in message
<Pine.LNX.4.31.0206270956340.17120-100000@gannet.stats>:

>Sorry, I cannot reproduce that on Windows XP, on either a P4 1.4MHz
>or an AthlonXP 1800.  If it were a common problem I am sure we would hear
>about it often.
>
>Why are you resizing the console at all?  You can set a suitable size in
>the preferences.
>
>On Thu, 27 Jun 2002 socrates@mail.ru wrote:
>
>> Full_Name: Socrates Alikhanidi
>> Version: 1.5.1
>> OS: Windows 2000
>> Submission from: (NULL) (133.15.3.28)
>>
>>
>> During resizing of 'R Console' windows the fatal error of forbidden memory
>> access appears.
>> To reproduce that with a guaranty, resize windows by mouse with small steps.
>> Probably the faster computer is, the earlier that event appears. I have PIV 1.8
>> GHz.
>> Waiting time was near 1 second.
>>
>> Thank you for great product.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Jun 27 17:13:53 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 27 Jun 2002 18:13:53 +0200 (MET DST)
Subject: data.frame does not recycle consistently (PR#1713)
Message-ID: <200206271613.SAA05140@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)



Note that the examples below do work in S (S-Plus 2000).

It appears that data.frame does not recycle text strings.  Maybe has something
to do with coercion to factors???

> data.frame(x=1:2,y=1)
  x y
1 1 1
2 2 1

> data.frame(x=c("A","B"),y=T)
  x    y
1 A TRUE
2 B TRUE

> data.frame(x=c("A","B"),y="C")
Error in data.frame(x = c("A", "B"), y = "C") : 
        arguments imply differing number of rows: 2, 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 27 17:52:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 27 Jun 2002 17:52:42 +0100 (BST)
Subject: data.frame does not recycle consistently (PR#1713)
In-Reply-To: <200206271613.SAA05140@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206271737430.23373-100000@gannet.stats>

On Thu, 27 Jun 2002 Kevin.Wright@pioneer.com wrote:

> Full_Name: Kevin Wright
> Version: 1.5.1
> OS: Windows 95
> Submission from: (NULL) (170.54.59.160)
>
>
>
> Note that the examples below do work in S (S-Plus 2000).
>
> It appears that data.frame does not recycle text strings.  Maybe has something
> to do with coercion to factors???

Yes, it is.  Not sure why that makes it inconsistent, though.
Vectors are recycled, other objects are not, and that is determined after
conversion to a column of a data frame.  We could fairly easily allow
factors and simple "AsIs" objects to be recycled.

BTW, S-PLUS 2000 is not S, and its data frame code is quite a lot
different from the original S code.  It also makes mistakes: compare

> data.frame(x=c("A","B"),y=I("C"))
> data.frame(x=c("A","B"),y=I(rep("C", 2)))


>
> > data.frame(x=1:2,y=1)
>   x y
> 1 1 1
> 2 2 1
>
> > data.frame(x=c("A","B"),y=T)
>   x    y
> 1 A TRUE
> 2 B TRUE
>
> > data.frame(x=c("A","B"),y="C")
> Error in data.frame(x = c("A", "B"), y = "C") :
>         arguments imply differing number of rows: 2, 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bruno.White@ubs-oconnor.com  Thu Jun 27 21:17:14 2002
From: Bruno.White@ubs-oconnor.com (Bruno.White@ubs-oconnor.com)
Date: Thu, 27 Jun 2002 16:17:14 -0400
Subject: 1.5.1 docs on handling errors when embedding R ?
Message-ID: <50982B69B3D6E44F854E5B040B882073064C6C@NSTMC005PEX1.ubsgs.ubsgroup.net>

Hello all,

I have a system in which I embed R, currently it
is running using 1.3.1 release, and I would like to
upgrade to 1.5.1. 

I need to trap and report any errors during evaluation.
Previously I was installing my own ErrorHook to capture
error messages and over-riding jump_now to call
Rf_resetStack(1). I know there has been some massive work
in this area so things have changed (i.e. my old code doesn't
compile ). I am sure I can figure it out by looking 
at the code, but are there some docs somewhere about this stuff ? 

Thanks,

Bruno

PS: great work, embedding R is so so cool :)



The information contained in and accompanying this communication is strictly
confidential and intended solely for the use of the intended recipient.  If you
are not the intended recipient, you should not disseminate, distribute or copy
this communication or any attachments.  Additionally, please delete/destroy all
copies of this communication and attachments and notify the sender of the error
by email as soon as possible.

Emails may be interfered with, may contain computer viruses or other defects
and may not be successfully replicated on other systems.  UBS O'Connor gives no
warranties in relation to these matters.  If you have any doubts about the
authenticity of an email purportedly sent by UBS O'Connor, please contact us
immediately.  This email has been prepared by a representative of UBS O'Connor
and is for your general information and should not be construed as a
solicitation or offer to buy or sell any securities or financial related
products.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 06:51:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 28 Jun 2002 07:51:43 +0200 (MET DST)
Subject: package `methods' has persistent effects even if detached (PR#1715)
Message-ID: <200206280551.HAA06028@pubhealth.ku.dk>

This came from an error in reg-tests-1.R

> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"
> library(methods)
> detach("package:methods")
> search()
[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> x <- as.data.frame(x=I("C"))[[1]]
> class(x)
[1] "AsIs"      "character"

My reading is that this should not happen.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jaitchis@hwy.com.au  Fri Jun 28 06:52:46 2002
From: jaitchis@hwy.com.au (jaitchis@hwy.com.au)
Date: Fri, 28 Jun 2002 07:52:46 +0200 (MET DST)
Subject: rdiscrete in e1071 fails when n==1 (PR#1716)
Message-ID: <200206280552.HAA06066@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################





<<insert bug report here>>


in e0171 the routine rdiscrete fails when n==1

the first few lines of code make it obvious why

> rdiscrete
function (n, probs, values = 1:length(probs), method = "inverse", 
    aliasmatrix = NULL) 
{
    if (length(probs) != length(values)) 
        stop("rdiscrete: probs and values must have the same 
length.")
    if (sum(probs < 0) > 0) 
        stop("rdiscrete: probs must not contain negative values.")
    if (n == 1) 
        return(values[sum(runif(1) > p) + 1])   ???? p is undefined at 
this point
    else {




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows 98 SE 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:e1071, package:ctest, Autoloads, 
package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 28 09:28:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jun 2002 09:28:57 +0100 (BST)
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <200206280551.HAA06028@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>

Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.

> class
.Primitive("class")
> find("class")
[1] "package:base"
> library(methods)
> class
.Primitive("dataClass")
> find("class")
[1] "package:methods" "package:base"
> get("class", "package:base")
.Primitive("dataClass")
> detach("package:methods")
> class
.Primitive("dataClass")

so attaching methods is altering the class object *in base*.
Related to namespaces?

On Fri, 28 Jun 2002 ripley@stats.ox.ac.uk wrote:

> This came from an error in reg-tests-1.R
>
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"
> > library(methods)
> > detach("package:methods")
> > search()
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > x <- as.data.frame(x=I("C"))[[1]]
> > class(x)
> [1] "AsIs"      "character"
>
> My reading is that this should not happen.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 10:17:36 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 11:17:36 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
Message-ID: <15644.10672.168515.693504@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>> class
> .Primitive("class")
>> find("class")
> [1] "package:base"
>> library(methods)
>> class
> .Primitive("dataClass")
>> find("class")
> [1] "package:methods" "package:base"
>> get("class", "package:base")
> .Primitive("dataClass")
>> detach("package:methods")
>> class
> .Primitive("dataClass")

> so attaching methods is altering the class object *in base*.
> Related to namespaces?

A problem in library(), maybe?

All I see is

R/class.R:class <- dataClass

but surely assignments should be in methods and not in base?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Fri Jun 28 10:53:31 2002
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Fri, 28 Jun 2002 11:53:31 +0200 (MET DST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
Message-ID: <200206280953.LAA09404@pubhealth.ku.dk>

Full_Name: Jrg Polzehl
Version: 1.5.1 
OS: Windows 2000
Submission from: (NULL) (193.175.148.198)


When calculating MLE's in a variance component model using constrained
optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
behaviour in cases where
the likelihood function was evalueted at the constraint. Parameters and value of
the
function at the constraint seem to be returned in this case.
I've tried to reproduce the effect in a very simple example:

###############################################################################
fn <- function(par,x,y){
ind <- 1:(length(x)/2)
alpha <- par[1]
beta <- par[2]
sigmaq1 <- par[3]
sigmaq2 <- par[4]
sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
}

set.seed(3)
n <- 5
x1 <- runif(n)
x2 <- runif(n)
y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
x <- c(x1,x2)
par <- c(0,0,1,1)
z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
####################################################################################

Note that the effect vanishes in case of other constraints for par[3:4].

here is what happens with trace=1 :

z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 4118799.069149
final  value 4118799.069149 
converged
----------------------------------------------------------------------------------
and the essential part with trace = 6 :

4  variables are free at GCP on iteration 11
LINE SEARCH 1 times; norm of step = 1.19245
X = -3.34057 6.34639 1.18546 15.2136 
G = -1.08654 -1.14056 1.42527 -0.307525 
Iteration    11

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the next break point =  8.3175e-001
Distance to the stationary point =  1.4763e-001

GCP found in this segment
Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
Distance to the stationary point =  1.4763e-001
Cauchy X =  -3.18017 6.51477 0.97505 15.259 

---------------- exit CAUCHY----------------------

4  variables are free at GCP on iteration 12                #  
!!!!!!!!!!!!!!!!!!!!!!
LINE SEARCH 0 times; norm of step = 2.30637
X = -3.90499 7.26709 1e-006 16.8712 
G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468 

iterations 12
function evaluations 15
segments explored during Cauchy searches 12
BFGS updates skipped 0
active bounds at final generalized Cauchy point 0
norm of the final projected gradient 4.1147e+009
final function value 4.1188e+006

X = -3.90499 7.26709 1e-006 16.8712 
F = 4.1188e+006
final  value 4118799.069149 
converged


See especially the line marked with !!!!!!!!!!

Regards,

Jrg Polzehl


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 28 10:58:10 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 28 Jun 2002 11:58:10 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.10672.168515.693504@mithrandir.hornik.net>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
Message-ID: <15644.13106.766528.617696@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
    >>> class
    >> .Primitive("class")
    >>> find("class")
    >> [1] "package:base"
    >>> library(methods)
    >>> class
    >> .Primitive("dataClass")
    >>> find("class")
    >> [1] "package:methods" "package:base"
    >>> get("class", "package:base")
    >> .Primitive("dataClass")
    >>> detach("package:methods")
    >>> class
    >> .Primitive("dataClass")

    >> so attaching methods is altering the class object *in base*.
    >> Related to namespaces?

    KH> A problem in library(), maybe?

    KH> All I see is

    KH> R/class.R:class <- dataClass

    KH> but surely assignments should be in methods and not in base?

I think JMC mentioned something about the reasons for this, 
and will again (?) when `morning has broken' at the East cost
(and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

My guess is: This is *necessary* now that base is a namespaced,
   since everything in base is using class() as defined in base!
   {use it's own name space first!}.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Jun 28 11:19:23 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 28 Jun 2002 12:19:23 +0200
Subject: (PR#1715) Re: package `methods' has persistent effects even if
 detached
In-Reply-To: <15644.13106.766528.617696@gargle.gargle.HOWL>
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL>
Message-ID: <15644.14379.430320.396271@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>>>>> Prof Brian D Ripley writes:
>>> Sorry, forgot to say this is in R-devel (2002-06-27) but not in 1.5.1.
>>>> class
>>> .Primitive("class")
>>>> find("class")
>>> [1] "package:base"
>>>> library(methods)
>>>> class
>>> .Primitive("dataClass")
>>>> find("class")
>>> [1] "package:methods" "package:base"
>>>> get("class", "package:base")
>>> .Primitive("dataClass")
>>>> detach("package:methods")
>>>> class
>>> .Primitive("dataClass")

>>> so attaching methods is altering the class object *in base*.
>>> Related to namespaces?

KH> A problem in library(), maybe?

KH> All I see is

KH> R/class.R:class <- dataClass

KH> but surely assignments should be in methods and not in base?

> I think JMC mentioned something about the reasons for this, 
> and will again (?) when `morning has broken' at the East cost
> (and Luke can chime in a bit later ... when the sun touches Midwest.. :-)

> My guess is: This is *necessary* now that base is a namespaced,
>    since everything in base is using class() as defined in base!
>    {use it's own name space first!}.

Again, not my understanding of Luke's paper.

The culprit is

    for(i in rev(seq(along = search())))
      cacheMetaData(as.environment(i), TRUE)
    if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
        # if base is using a name space then any replacements for functions
        # in base defined in methods need to be installed directly into base
        # or they will not be visible to base code.
        for (n in ls(env = where))
            if (exists(n, env = NULL))
                assign(n, get(n, env = where), env = NULL)
    }

in .First.lib() of methods.

There is a general issue here: base should conceptually be considered as
sealed.  If we really need to unlock the bindings when attaching methods
then we should restore the original ones when detaching but it does not
feel right to do this at all.  Luke will have more to say, I am sure.

-k

> Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jechacon@unex.es  Fri Jun 28 12:53:06 2002
From: jechacon@unex.es (jechacon@unex.es)
Date: Fri, 28 Jun 2002 13:53:06 +0200 (MET DST)
Subject: integrate function fails! (PR#1718)
Message-ID: <200206281153.NAA11196@pubhealth.ku.dk>

Full_Name: Jos Enrique Chacn
Version: 1.5.0 and 1.3.1
OS: Windows Millenium
Submission from: (NULL) (158.49.28.155)


Dear reader:
I was trying to evaluate the L2 error produced when estimating the density
function N(0,1) from a sample of size 100 using a kernel density estimate. It
produced a strange value. You can reproduce the process by typing

samp<-rnorm(100)
fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
integrand<-function(x){(fker(x,5)-dnorm(x))^2}
err<-integrate(integrand,-Inf,Inf)

This value err of the L2 error is generally far from accurate. fker is the
kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
a very large choice far from the optimum which is around 0.4, but it makes it
more clear to see the failure. You just have to evaluate integrand(0); then, you
know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
which was usually around 0.1. But the value that integrate gives is around 1.6!
Anyway, there is a library called rmutil (I don't remember where I got it, but I
found it searching in the forums) which contains a function called int that
works well.

I hope this problem can be solved.

Best regards,
  Jos Enrique Chacn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Jun 28 13:21:33 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 28 Jun 2002 08:21:33 -0400
Subject: (PR#1715) Re: package `methods' has persistent effects even
 ifdetached
References: <200206280551.HAA06028@pubhealth.ku.dk>
 <Pine.GSO.4.44.0206280919500.23166-100000@auk.stats>
 <15644.10672.168515.693504@mithrandir.hornik.net>
 <15644.13106.766528.617696@gargle.gargle.HOWL> <15644.14379.430320.396271@mithrandir.hornik.net>
Message-ID: <3D1C54CD.33E9D5D2@research.bell-labs.com>

Kurt Hornik wrote:
....................................................
> 
> The culprit is
> 
>     for(i in rev(seq(along = search())))
>       cacheMetaData(as.environment(i), TRUE)
>     if (! identical(environment(log), .GlobalEnv)) { # check if namespace used
>         # if base is using a name space then any replacements for functions
>         # in base defined in methods need to be installed directly into base
>         # or they will not be visible to base code.
>         for (n in ls(env = where))
>             if (exists(n, env = NULL))
>                 assign(n, get(n, env = where), env = NULL)
>     }
> 
> in .First.lib() of methods.
> 
> There is a general issue here: base should conceptually be considered as
> sealed.  If we really need to unlock the bindings when attaching methods
> then we should restore the original ones when detaching but it does not
> feel right to do this at all.  Luke will have more to say, I am sure.
> 
> -k
> 
> > Martin

Yes, definitely a general question here.  And it's related to Martin's
earlier report about all.equal.

As I mentioned, the inconsistency there resulted from data.class (in
base) behaving differently when the methods package was attached, with
its different version of class.


Intuitively, the code added to .First.lib seems to contradict the
namespace idea.  The issue may be whether any code in base breaks if it
continues to use the base version of class() when the methods package is
attached.  Luke will know better, but my feeling is that we should fix
any problems of that sort directly, and undo the change to .First.lib.

(There are some other redefinitions in methods, including plot with a
"y" argument.  But it's class and class<- that seem likely to be used by
other code in base.)

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Fri Jun 28 15:37:29 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Fri, 28 Jun 2002 16:37:29 +0200 (MET DST)
Subject: rw1051 binary dist missing dyn.load documentation (PR#1719)
Message-ID: <200206281437.QAA12910@pubhealth.ku.dk>

The binary package (version of 6/17)  of rw1051 for Windows is missing
html documentation for dyn.load()  The file is present in
$R_HOME/library/base/html, but has zero bytes.  dyn.load help IS
accessible through the windows help system.

platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jun 28 19:31:25 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 28 Jun 2002 11:31:25 -0700 (PDT)
Subject: integrate function fails! (PR#1718)
In-Reply-To: <200206281153.NAA11196@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0206281125370.123502-100000@homer04.u.washington.edu>

On Fri, 28 Jun 2002 jechacon@unex.es wrote:

> Full_Name: Jos Enrique Chacn
> Version: 1.5.0 and 1.3.1
> OS: Windows Millenium
> Submission from: (NULL) (158.49.28.155)
>
>
> Dear reader:
> I was trying to evaluate the L2 error produced when estimating the density
> function N(0,1) from a sample of size 100 using a kernel density estimate. It
> produced a strange value. You can reproduce the process by typing
>
> samp<-rnorm(100)
> fker<-function(x,h){sum(dnorm((rep(x,100)-samp)/h))/(100*h)}
> integrand<-function(x){(fker(x,5)-dnorm(x))^2}
> err<-integrate(integrand,-Inf,Inf)
>
> This value err of the L2 error is generally far from accurate. fker is the
> kernel density estimate with bandwidth h and Gaussian kernel. Obviously, h=5 is
> a very large choice far from the optimum which is around 0.4, but it makes it
> more clear to see the failure. You just have to evaluate integrand(0); then, you
> know that the integral between -0.5 and 0.5 cannot be larger than integrand(0),
> which was usually around 0.1. But the value that integrate gives is around 1.6!
> Anyway, there is a library called rmutil (I don't remember where I got it, but I
> found it searching in the forums) which contains a function called int that
> works well.

This may illustrate what's going on...

> x<-seq(-1,1,length=10)
> sapply(x,integrand)
 [1] 0.02741093 0.04742150 0.06987683 0.08968701 0.10136155 0.10132284
 [7] 0.08957798 0.06971705 0.04723830 0.02723325
> integrand(x)
 [1] 0.2865455 0.2327631 0.1895539 0.1599095 0.1449956 0.1449956 0.1599095
 [8] 0.1895539 0.2327631 0.2865455


If you look a the help page for integrate you see

       f: An R function taking a numeric first argument and returning a
          numeric vector the same length. Returning a non-finite
          element will generate an error.

so the function must be properly vectorised for integrate to work. Your
function isn't.  There is a check in integrate() that the return value is
the right length, but there's really no way to check that the value is
correct.

If you make the function vectorised it does seem to work
> correct.integrand<-function(x) sapply(x,integrand)
> integrate(correct.integrand,-Inf,Inf)
0.1839647 with absolute error < 8.9e-08


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Fri Jun 28 23:45:41 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Sat, 29 Jun 2002 00:45:41 +0200 (MET DST)
Subject: possible typo in Control.Rd (PR#1720)
Message-ID: <200206282245.AAA14470@pubhealth.ku.dk>

line 36/37 of src/library/base/man/Control.Rd has:

\seealso{
  \code{\link{Syntax}} for the basis \R syntax and operators,

Should that be "basic" rather than "basis"?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jun 29 01:07:51 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 29 Jun 2002 02:07:51 +0200 (MET DST)
Subject: [R] browser/debug and for loop (PR#1721)
Message-ID: <200206290007.CAA14575@pubhealth.ku.dk>

On Fri, 28 Jun 2002, Vadim Ogranovich wrote:

> Dear R-Users,
>
> It seems like once one invokes browser() inside a loop and steps through the
> body using 'n' any subsequent loop will be "intercepted" by debug()
> function. Here is exactly what I mean
>
> # fresh R session
> # run a loop that has browser() inside the body
> > for (i in seq(5)) { browser(); print(i) }
> for (i in seq(5)) { browser(); print(i) }
> Called from: NULL
> Browse[1]> n
> n
> debug: print(i)
> Browse[1]> Q
> Q
>
> #  remove browser(), debug() is still there
> > for (i in seq(5)) { print(i) }
> for (i in seq(5)) { print(i) }
> debug: i
> Browse[1]> Q
> Q
>
> My guess is that when I was stepping through some function got flagged for
> debugging. I tried to undebug "for", but that didn't work.

This is quite interesting.  Note that the label at the start of the
browser session changes from
  Called from: NULL
to
  debug: i

This indicates that the DEBUG() flag has got set on an environment (the
global environment in this case). It happens only when you do "n" and then
"Q" in the browser.

I think the fix is to SET_DEBUG(rho,0) when responding to "Q" in
main.c:ParseBrowser, but I'm not certain.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 30 18:57:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 30 Jun 2002 18:57:38 +0100 (BST)
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <20020630124930.1820aaf1.fharrell@virginia.edu>
Message-ID: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>

On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:

> On 30 Jun 2002 09:12:31 -0700
> "A.J. Rossini" <rossini@blindglobe.net> wrote:
>
> > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> >
> >     john> The equal sign has already been provided as an alternative assignment
> >     john> operator in R.
> >
> > And I feel the same way about "=" as I do about "_".  Yech.
>
> I'll second that.  And we've already seen the big trouble that can be
caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
envisioned by the developers.  -Frank Harrell

Frank,

Was that actually in R (where very few people use =)?  Unlike S4, = is not
a general-purpose assignment operator, and this sort of thing *was*
`envisioned by the developers'.  For example, if(sex = "male") is a syntax
error in R.  (Some more insidious ones, such as using assignment in the
a function call, are also disallowed.)

If there is evidence that this is regularly causing trouble we would want
to re-consider its scope, but the availability of `=' is hardly publicised
(and not even the editor of the Programmer's Niche remembered about it).

Brian

(Moved to R-devel, as maybe R-help should be spared this source of
confusion.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Jun 30 19:42:49 2002
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Sun, 30 Jun 2002 14:42:49 -0400
Subject: Assignment operators (was [R] modifying a vector)
In-Reply-To: <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
References: <20020630124930.1820aaf1.fharrell@virginia.edu>
 <Pine.LNX.4.31.0206301835430.1814-100000@gannet.stats>
Message-ID: <20020630144249.21739e6e.fharrell@virginia.edu>

On Sun, 30 Jun 2002 18:57:38 +0100 (BST)
ripley@stats.ox.ac.uk wrote:

> On Sun, 30 Jun 2002, Frank E Harrell Jr wrote:
> 
> > On 30 Jun 2002 09:12:31 -0700
> > "A.J. Rossini" <rossini@blindglobe.net> wrote:
> >
> > > >>>>> "john" == John Fox <jfox@mcmail.cis.mcmaster.ca> writes:
> > >
> > >     john> The equal sign has already been provided as an alternative assignment
> > >     john> operator in R.
> > >
> > > And I feel the same way about "=" as I do about "_".  Yech.
> >
> > I'll second that.  And we've already seen the big trouble that can be
> caused by "=" (e.g., mistyping sex=='male' as sex='male') that was not
> envisioned by the developers.  -Frank Harrell
> 
> Frank,
> 
> Was that actually in R (where very few people use =)?  Unlike S4, = is not
> a general-purpose assignment operator, and this sort of thing *was*
> `envisioned by the developers'.  For example, if(sex = "male") is a syntax
> error in R.  (Some more insidious ones, such as using assignment in the
> a function call, are also disallowed.)

It was probably S-Plus.  I have trouble keeping S-Plus and R separate sometimes.
I hope that R also provides safeguards about "=" when it appears in an argument to a function.

> 
> If there is evidence that this is regularly causing trouble we would want
> to re-consider its scope, but the availability of `=' is hardly publicised
> (and not even the editor of the Programmer's Niche remembered about it).
> 
> Brian
> 
> (Moved to R-devel, as maybe R-help should be spared this source of
> confusion.)

Sure.  Thanks Brian  -Frank

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

