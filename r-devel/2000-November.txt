From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  1 07:29:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Nov 2000 08:29:24 +0100
Subject: [Rd] desiderata for data manipulation
In-Reply-To: <87snpceqsz.fsf@jeeves.blindglobe.net>
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net>
 <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
Message-ID: <14847.50772.578389.86697@gargle.gargle.HOWL>

[diverted from R-help to R-devel]

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........
    ZC> But how do you exchange datafiles? Dump to ascii and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.  (at
    tony> least until R gets a nice set of longitudinal macros, I'll
    tony> continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

Dear Tony,
can you elaborate what you are missing here for R?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 13:42:15 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 05:42:15 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <14847.50772.578389.86697@gargle.gargle.HOWL>
 (Martin Maechler's message of "Wed, 1 Nov 2000 08:29:24 +0100")
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
 <14847.50772.578389.86697@gargle.gargle.HOWL>
Message-ID: <87k8ang66g.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> [diverted from R-help to R-devel]
>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........  But how do you exchange datafiles? Dump to ascii
    ZC> and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.
    tony> (at least until R gets a nice set of longitudinal macros,
    tony> I'll continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

    MM> Dear Tony, can you elaborate what you are missing here for R?

In R, it would be a simple command to reshape a dataframe, from a
single-observation per individual (or other unit having repeated
measurements) to multiple lines (one per measurement).  Quite often,
in building models, I'll switch between wide/long versions of the data
set to build useful variables for modeling.


Here's the help file of my favorite (missing from R) data manipulation
command:

-------------------------------------------------------------------------------
help for reshape                                         (manual:  [R] reshape)
-------------------------------------------------------------------------------

Convert data from wide to long and vice versa
---------------------------------------------

Basic syntax:

        reshape wide varnames, i(varlist) [ j(varname [values]) ... ]
        reshape long varnames, i(varlist) [ j(varname [values]) ... ]

        reshape wide
        reshape long

        reshape error

        where
                values is           #[-#] [#[-#] ...]
                ... is              string atwl(chars)

        Both are seldom specified.
        
        
Advanced syntax:
        
        reshape i   varlist
        reshape j   varname [#[-#] [#[-#] ...]] [, string]
        reshape xij fvarnames [, atwl(chars)]
        reshape xi  [varlist]
        
        reshape [query]
        
        reshape wide
        reshape long
        
        reshape error
        
        reshape clear
        
        where fvarnames are either varnames, varnames with @ characters, or a
                mix of the two.  The @ character denotes where the # (j) suffix
                appears.
                
Description
-----------
        
reshape converts data from wide to long form and vice versa.  Think of the data
as a collection of observations x_ij.  One such collection might be
        
                 (wide form)                          (long form)
        
        -i-       ------- x_ij --------         -i-  -j-         -x_ij-
        id  sex   inc80   inc81   inc82         id   year   sex    inc
        -------------------------------         ----------------------
         1    0    5000    5500    6000          1     80     0   5000
         2    1    2000    2200    3300          1     81     0   5500
         3    0    3000    2000    1000          1     82     0   6000
                                                 2     80     1   2000
                                                 2     81     1   2200
                                                 2     82     1   3300
                                                 3     80     0   3000
                                                 3     81     0   2000
                                                 3     82     0   1000
        
reshape converts data from one form to the other:
        
        . reshape long inc, i(id) j(year)      (goes from left-form to right)
        . reshape wide inc, i(id) j(year)      (goes from right-form to left)
        
See [R] reshape for a detailed discussion and examples for both the basic and
advanced syntax.
        
        
Options 
------- 
        
i(varlist) specifies the variable(s) whose unique values denote a logical
    observation.
        
j(varname [values]) specifies the variable whose unique values denote a sub-
    observation.  values list the unique values to be used from varname and
    typically is not explicitly stated since reshape will determine them
    automatically from the data.
        
string specifies that the j() may contain string values.
       
atwl(chars) specifies that chars should be substituted for the @ character when
    converting the data to the long form.
        
        
Examples
--------
        
 . reshape long inc ue, i(id) j(year)             converts from wide to long
 . reshape wide                                   converts back to wide
        
 . reshape ..., i(id)                             one i() variable
 . reshape ..., i(hid pid)                        two i() variables
        
 . reshape long inc, i(id) j(year 80-82 85)       specifying j() values
        
 . reshape long inc, i(id) j(sex) string          allow string var. in j()
        
        


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 14:32:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 15:32:07 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: rossini@blindglobe.net's message of "01 Nov 2000 05:42:15 -0800"
References: <20001030222745.B11703@ps2-4.ucl-41> <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41> <87snpceqsz.fsf@jeeves.blindglobe.net> <14847.50772.578389.86697@gargle.gargle.HOWL> <87k8ang66g.fsf@jeeves.blindglobe.net>
Message-ID: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

>     MM> Dear Tony, can you elaborate what you are missing here for R?
> 
> In R, it would be a simple command to reshape a dataframe, from a
> single-observation per individual (or other unit having repeated
> measurements) to multiple lines (one per measurement).  Quite often,
> in building models, I'll switch between wide/long versions of the data
> set to build useful variables for modeling.

Almost, but not quite stack()/unstack()...

The basic cases of "reshape long" looks like it would be a piece of
cake to model over the subset() and stack() functions. "reshape wide"
looks a little more tricky, unless you want to brutally assume that
you're dealing with the result of a previous "reshape long".

(The problem would be that in principle you'd know what to do with

A B Y             
1 1 0.1           A Y1 Y2
1 2 0.3    ---->  1 0.1 0.3
2 1 0.7           2 0.7 0.9
2 2 0.9

but suppose there's a fifth line as in

A B Y  
1 1 0.1
1 2 0.3
2 1 0.7
2 2 0.9
2 2 1.1

Then you'd have two candidates for the value of Y2 for A==2 and it
wouldn't help to assume that there are really two cases with A==2,
because you can't really be sure about to which case the Y1 should
belong.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  1 15:05:19 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 1 Nov 2000 10:05:19 -0500 (EST)
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>


  What does Stata do in this case?
  I suppose you could generate an error, or give the user the choice to
duplicate Y1/assume Y1 was the first or last case and put in NAs for the
others.

On 1 Nov 2000, Peter Dalgaard BSA wrote:

> (The problem would be that in principle you'd know what to do with
> 
> A B Y             
> 1 1 0.1           A Y1 Y2
> 1 2 0.3    ---->  1 0.1 0.3
> 2 1 0.7           2 0.7 0.9
> 2 2 0.9
> 
> but suppose there's a fifth line as in
> 
> A B Y  
> 1 1 0.1
> 1 2 0.3
> 2 1 0.7
> 2 2 0.9
> 2 2 1.1
> 
> Then you'd have two candidates for the value of Y2 for A==2 and it
> wouldn't help to assume that there are really two cases with A==2,
> because you can't really be sure about to which case the Y1 should
> belong.)
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 15:30:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 16:30:45 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: ben@zoo.ufl.edu's message of "Wed, 1 Nov 2000 10:05:19 -0500 (EST)"
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>

ben@zoo.ufl.edu writes:

>   What does Stata do in this case?
>   I suppose you could generate an error, or give the user the choice to
> duplicate Y1/assume Y1 was the first or last case and put in NAs for the
> others.

>From the help file Tony sent, I would assume that it keeps reshaping
information around, since you can just say "reshape wide". If you
start with data in the long format, I'm not quite sure what it does.

If you assume that the variable to "unreshape" on is of the form

 1 2 ... n 1 2 ... n 1 2 ... n ...

and that everything except the response variables is constant within
blocks, then things are reasonably simple, I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 15:47:21 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 07:47:21 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "01 Nov 2000 16:30:45 +0100")
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
 <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0lbu22e.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> ben@zoo.ufl.edu writes:
    >> What does Stata do in this case?  I suppose you could generate
    >> an error, or give the user the choice to duplicate Y1/assume Y1
    >> was the first or last case and put in NAs for the others.

    >> From the help file Tony sent, I would assume that it keeps
    >> reshaping
    PDB> information around, since you can just say "reshape wide". If
    PDB> you start with data in the long format, I'm not quite sure
    PDB> what it does.

    PDB> If you assume that the variable to "unreshape" on is of the
    PDB> form

    PDB>  1 2 ... n 1 2 ... n 1 2 ... n ...

    PDB> and that everything except the response variables is constant
    PDB> within blocks, then things are reasonably simple, I suppose.

I'll have to check, but I think it repeats the first value.

Thanks for the pointer to stack/unstack -- now, having been reminded,
I think I'd seen these float through on the list (still doesn't solve
the missing modeling routines (parametric GLMMs, some of the
econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
sometime, I assume).

One more interesting point -- Stata only has the equivalent of one
data frame (and is optimized for that, another reason for smaller
footprint for stata objects than R; makes some sense if you are only
analysing data in a traditional manner, but increases thought-required
(and need for tricks) for things like (multiple) imputation and
bootstrapping, if you want to reuse generated data from multiple sets.

This also means that the reshape command does interesting things to
your (single) data set structure, since it changes the number of
observations while preserving information for returning to the initial
state.


best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Nov  1 16:01:36 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 1 Nov 2000 16:01:36 +0000 (GMT)
Subject: [Rd] Re: desiderata for data manipulation
Message-ID: <200011011601.QAA03969@toucan.stats.ox.ac.uk>

> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 01 Nov 2000 07:47:21 -0800

[...]

> Thanks for the pointer to stack/unstack -- now, having been reminded,
> I think I'd seen these float through on the list (still doesn't solve
> the missing modeling routines (parametric GLMMs, some of the
> econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
> sometime, I assume).

Only if someone is interested enough to write them....  Actually,
I thought parametric GLMMs were an unsolved research problem in
general, even in, say, the logistic case.  I know there are
suggestions in special cases (and there is a glmm function in one
of Jim Lindsey's packages) but all the simple ones can be seriously
incorrect AFAIK.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:09:59 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:09:59 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Wed, 1 Nov 2000 16:01:36 +0000 (GMT)")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
Message-ID: <877l6nu10o.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> Only if someone is interested enough to write them....

Exactly, that's why I said eventually. 

    PBR> Actually, I thought parametric GLMMs were an unsolved
    PBR> research problem in general, even in, say, the logistic case.
    PBR> I know there are suggestions in special cases (and there is a
    PBR> glmm function in one of Jim Lindsey's packages) but all the
    PBR> simple ones can be seriously incorrect AFAIK.

I'll have to follow up on Jim's packages, which have always seemed
daunting, and run some comparisons.

As far as research problems -- yes, how to fit the semiparametric
version of the GLMMs is open, but for a fully parametric version,
there isn't much of an issue.

You are right that interpretation is severely problematic and needs
to be handled with care (Thomas has a nice presentation on that) but
they can be useful tools during data analysis.

Okay, maybe I should just take off a day or two in the next week and
see if most of Stata can be replaced by R :-), since we've made good
progress on a number of issues I had previously thought were
unresolved...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Nov  1 16:13:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Nov 2000 10:13:34 -0600
Subject: [Rd] J. of Comp. and Graph. Statist., Sept. 2000
Message-ID: <6rzojjhdqp.fsf@franz.stat.wisc.edu>

Members of R-devel may be interested in the special Sept. 2000 issue
of J. of Comp. and Graph. Statist.
       http://www.amstat.org/publications/asajournals.html#jcgs
on Systems and Languages.  It features two articles by Robert
Gentleman and Ross Ihaka on "Java and Dylan" and "Lexical Scope and
Statistical Computing", an article by Paul Murrell and Ross Ihaka on
"An Approach to Providing Mathematical Annotation on Plots", an
article by John Chambers on "Users, Programmers, and Statistical
Software", an article by Duncan Temple Lang on "The Omegahat
Environment", an article by Luke Tierney on "Connecting Lisp-Stat to
COM", and an article co-authored by Thomas Lumley on "Orca: A
Visualization Toolkit for High-Dimensional Data".

All of the authors mentioned above are members of R-core.  Some of
these articles deal directly with R - for example, Gentleman and Ihaka
on lexical scoping should be of interest to anyone doing advanced R
development.  Other articles describe some related interests of R-core
members.

This is one of the few issues of an academic journal that I will read
cover-to-cover.  There's lots of good material in there.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:55:39 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:55:39 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <877l6nu10o.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "01 Nov 2000 08:09:59 -0800")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 <877l6nu10o.fsf@jeeves.blindglobe.net>
Message-ID: <87em0vskc4.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

    AJR> As far as research problems -- yes, how to fit the
    AJR> semiparametric version of the GLMMs is open, but for a fully
    AJR> parametric version, there isn't much of an issue.

And I should've said -- for those models I'm interested in (which of
course, are in the simpler class).

Red-faced with foot-in-mouth...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov  1 20:11:43 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 01 Nov 2000 15:11:43 -0500
Subject: [Rd] seg fault in R-devel
Message-ID: <3A0078FF.D60FAC4B@bank-banque-canada.ca>

I've been getting a seg fault with R-devel. It was happening in the
snapshot from a few weeks ago and I just tried today's snapshot hoping
it had been found and fixed, but it persists. The problem seems to be
with garbage collection as it does not always happen in the same place,
but happens regularly with some tests which use a lot of memory.

Sorry I cannot provide more details as I have not been able to pin it
down any better than this. If this is not a known problem and someone
will suggest how to proceed then I can try, but I'm over my head with
this sort of problem.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:46 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:46 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#719)
Message-ID: <200011020541.GAA01291@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:45 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:45 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#718)
Message-ID: <200011020541.GAA01282@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:48 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:48 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#720)
Message-ID: <200011020541.GAA01295@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:51 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:51 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#723)
Message-ID: <200011020541.GAA01307@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:49 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:49 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#721)
Message-ID: <200011020541.GAA01299@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:40 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:40 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
Message-ID: <200011020541.GAA01217@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:42 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:42 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#717)
Message-ID: <200011020541.GAA01240@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:50 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:50 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#722)
Message-ID: <200011020541.GAA01303@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov  2 07:10:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Nov 2000 08:10:18 +0100 (CET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
In-Reply-To: <200011020541.GAA01217@pubhealth.ku.dk>
References: <200011020541.GAA01217@pubhealth.ku.dk>
Message-ID: <14849.4954.98724.583840@mithrandir.hornik.net>

>>>>> shalabhgandhi  writes:

> I want to use var.test function of ctest library. I was able to
> generate the output from R on the input given by rnorm. But when I
> store the same data set provided by rnorm into a file, and then read a
> file into a dataframe, then on using the dataframe as a parameter to
> var.test function - it gives an error "not enough x observations".

> I'll explain the above mentioned problem of mine for which I am
> mentioning 2 cases CaseA and CaseB. CaseA is working but CaseB is not.

> (CaseA) Following are 4 commands I gave:

> R
> library(ctest)
> x<-rnorm(50)
> y<-rnorm(30)
> var.test(x,y) 

> The output generated by R was:
> 	 F test to compare two variances 

> data:  x and y 
> F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
> alternative hypothesis: true ratio of variances is not equal to 1 
> 95 percent confidence interval:
>  0.4675884 1.8646602 
> sample estimates:
> ratio of variances 
>           0.950451 


> (CaseB) Now I want R to give me the same output as above, when I read it from
> a file. The commands I gave are:

> R
> library(ctest)
> x<-read.table("input1.txt", header = FALSE)
> y<-read.table("input2.txt", header = FALSE)
> var.test(x,y)

> The output generated by R is an error:
> "not enough x observations"

> I want to know why is this error coming, since I am creating the
> input1.txt from rnorm(50) and input2.txt from rnorm(30),which should
> mean the same?

> Pl. see if you can provide any help on this.

First, why send 8 *DIFFERENT* bug reports with the same content?

Second, why is this a bug report?  Have you read the FAQ first?  You do
not give enough information to help us reproduce your problem, as you do
not describe what your "input1.txt" and "input2.txt" look like.  I would
assume that reading x back from your input file failed somehow, which
should explain the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 13:22:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 05:22:48 -0800
Subject: [Rd] RSPerl...
Message-ID: <871ywufqzb.fsf@jeeves.blindglobe.net>


Duncan -
(but sent to R-devel, for any other thoughts?)

How do you envision RSPerl being used?  Without having seen the
details, I can think of playing with strings; is there a preferred
incantation for stringification of R objects (serialization)?

(actually, the main problem I'm having is that I know how I want to code
something like: 
     Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
which might be something like:
     Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
but sort of what I'm having problems with thinking about is along the
lines of  
     Robject <- eval(.Perl("perlfunctionhackery",
                           RToString(InitialRObject)))

and my brain isn't kicking into gear).   While I know how to transfer
data as arrays, and the docs suggest I can transfer tables, and that's
fine, I'm wondering how to transfer and contort objects, and if the
above might be a reasonable general sketch, or if there might be
another approach?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Thu Nov  2 13:53:29 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Thu, 2 Nov 2000 14:53:29 +0100 (MET)
Subject: [Rd] t.test and n = 2 (PR#724)
Message-ID: <200011021353.OAA08851@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


> t.test(rnorm(2))
Error in t.test(rnorm(2)) : not enough x observations

Is this just a bug (the tests in lines 34 and 49 of the code should be "< 2"
rather than "<= 2") or is it some sort of bondage and dicipline political
correctness
for the user's own good?  If the latter, I don't approve.  If the procedure
makes
mathematical sense, then R should do it.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Nov  2 13:53:31 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 2 Nov 2000 08:53:31 -0500 (EST)
Subject: [Rd] RSPerl...
Message-ID: <200011021353.IAA08695@jessie.research.bell-labs.com>



Well, I hadn't got around to announcing it, but seeing as it is
mentioned here....

 There is a first round of a package named RSPerl available
at 
    http://www.omegahat.org/RSPerl/

which provides several .C like functions but to Perl.  So one can call
Perl subroutines and object methods directly from R. Also, one can
evaluate Perl scripts in the form of strings or files.  Aside from
having access to all of the Perl modules, a benefit of this approach
is that the Perl interpreter lives in the R process.  We avoid the
expense of spawning a Perl process each call via the system()
function. But more importantly, we can use Perl in the form of an
interactive session as we do R, and so values created in one call are
available to future calls rather than disappearing along with the Perl
sub-process. So one can execute Perl commands incrementally.

At the moment, I have only tested this using the latest development
version of R (i.e. the snapshot of the unreleased 1.2 available from
CRAN).


Now, for Tony's question. 

Playing with strings is one way, but not one
I recommend. How can one sensibly serialize an e.g. lm object in a way
that Perl could understand it without having extra code on the other
side. Instead of serializing the contents of an object, the general
mechanism used in the Java and CORBA modules is to leave the R object
in R and send a reference to it over to Perl. This makes sense for
Perl methods that expect an object which have methods. So, Perl might
call residuals() on its argument. If this were an R reference to an lm
object, the Perl value would have a method residuals() which would
call the corresponding R function with the lm object as its primary
argument.

As I say, this is identical to the way we export Perl objects to R and
also how the exchange of references is done in the CORBA and Java
packages. However, in the latter two, this can be done automatically
(via reflectance).  I am still trying to develop a general, automated
way of doing this in Perl and that is the last piece.  Any suggestions
from those who know Perl better than I do (almost everyone who has
ever used it :-)) is very welcome.

Basically what would happen is a call of the form
      .Perl("perlfunctionhackery", matrix(rnorm(100),10,10)), .sigs="Matrix")
would generate a new Perl class named RMatrixReference which has the
same methods as the Perl class Matrix (read and generated by
reflectance). We would then create an instance of this class by
passing it an identifier for  matrix(...) in the argument, and passing
the matrix itself.
One method in this new class might be dim().  The RMatrixReference
object would implement this as
  R::callReference(idForMatrix, "dim")
and this ends up calling 
     dim(the.real.matrix)

The basic philosophy is compute on the object in the language in which
it is defined, make calls to those methods from any language.

As the package stands now, it is primarily a one-directional
communication mechanism (like the simple version of the .C
(i.e. without the call_R())).  That provides quite a lot of
functionality, and without any real coding effort by other users.


Hope that helps.

 D.



> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 02 Nov 2000 05:22:48 -0800
> Lines: 36
> User-Agent: T-gnus/6.14.5 (based on Gnus v5.8.7) (revision 03) EMY/1.13.8 (Tastes differ) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 12) (Channel Islands) (i386-debian-linux)
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> 
> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?
> 
> (actually, the main problem I'm having is that I know how I want to code
> something like: 
>      Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
> which might be something like:
>      Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
> but sort of what I'm having problems with thinking about is along the
> lines of  
>      Robject <- eval(.Perl("perlfunctionhackery",
>                            RToString(InitialRObject)))
> 
> and my brain isn't kicking into gear).   While I know how to transfer
> data as arrays, and the docs suggest I can transfer tables, and that's
> fine, I'm wondering how to transfer and contort objects, and if the
> above might be a reasonable general sketch, or if there might be
> another approach?
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> BlindGlobe Networks (home/default)	rossini@blindglobe.net	
> UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> 
> FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
> CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
> UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 



-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  2 14:04:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 2000 15:04:53 +0100
Subject: [Rd] RSPerl...
In-Reply-To: rossini@blindglobe.net's message of "02 Nov 2000 05:22:48 -0800"
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
Message-ID: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?

I don't know if it's preferred, but the default thing you get if you
edit() an R object is that the editor is started on the results of
dput() and the result is subjected to eval(parse(...)). Perl might
just be smart enough to handle data in that form.

Another idea would be to use mechanisms like in .Tcl.args where
there's a layer that stringifies R objects (into what? Perl code?)
before passing them to Perl. With Perl's well-known ojections to fixed
rules, that might be tricky, but who knows?

Seeing some sketches of the functionality you want to achieve might be
fruitful. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 14:25:28 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 06:25:28 -0800
Subject: [Rd] RSPerl...
In-Reply-To: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "02 Nov 2000 15:04:53 +0100")
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
 <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
Message-ID: <87u29q30yv.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


    PDB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Duncan - (but sent to R-devel, for any other thoughts?)
    >> 
    >> How do you envision RSPerl being used?  Without having seen the
    >> details, I can think of playing with strings; is there a
    >> preferred incantation for stringification of R objects
    >> (serialization)?

    PDB> I don't know if it's preferred, but the default thing you get
    PDB> if you edit() an R object is that the editor is started on
    PDB> the results of dput() and the result is subjected to
    PDB> eval(parse(...)). Perl might just be smart enough to handle
    PDB> data in that form.

    PDB> Another idea would be to use mechanisms like in .Tcl.args
    PDB> where there's a layer that stringifies R objects (into what? 
    PDB> Perl code?)  before passing them to Perl. With Perl's
    PDB> well-known ojections to fixed rules, that might be tricky,
    PDB> but who knows?

    PDB> Seeing some sketches of the functionality you want to achieve
    PDB> might be fruitful.

Peter, here's 2 of the simpler examples (silly, but please scale for
rationale) of what I'm wondering about:

I'd like to do:

lm.output <- .Perl("PerlToSplitAndFormatLMandUseWebDAVtoPostToMyWWWSite",
                   lm(y~x))

or similarly,

NewData  <- .Perl("GrabAndMerge2CriticalDataSetsFromTheWWW",
                  NHANES.19xx,
                  NHANES.19yy)

where NHANES.zzzz is a list describing the location and
characteristics of a particular data set.

Everything is trivial in the mathematician's sense to me, except for
getting Perl to parse and/or manipulate the R object. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 19:45:27 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 11:45:27 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
Message-ID: <87itq617l4.fsf@jeeves.blindglobe.net>


Is there a simple way to determine at run-time the directory with HTML
version of help pages?

(to see where I'm heading here, if you've got w3 installed under
(X)Emacs on Unix _or_ a Microsoft OS, do 
        w3-find-file 
and load
        $(R_HOME)/library/html/whateverfunction.html

It's slightly nicer than the standard ESS text-help.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov  2 19:58:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 2 Nov 2000 19:58:06 +0000 (GMT)
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <87itq617l4.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>

On 2 Nov 2000, A.J. Rossini wrote:

> Is there a simple way to determine at run-time the directory with HTML
> version of help pages?

The short answer is `no', for the directory depends on the help page!

> (to see where I'm heading here, if you've got w3 installed under
> (X)Emacs on Unix _or_ a Microsoft OS, do 
>         w3-find-file 
> and load
>         $(R_HOME)/library/html/whateverfunction.html

But it's whateverlibrary/package/html/whateverfunction.html

You both overlooked the package part and the possibility of multiple
libraries. (To make sure we have the terminology straight, in R there
are libraries of packages, and in S libraries of sections (S3) or chapters
(S4).  I didn't invent this ....)

Since ESS apparently asks R for the text help page (or it does it just grab
the contents?), it could in principle do the same for the html help page.
That is, help could be asked when running under ESS to return the filename,
not send the file to the OS to be viewed (Windows) or call `browser -remote
"openURL(foo.html)' on it.

As far as I can see only the running R session can do this correctly, and
it tooks several goes to get it right (if we have).  What the right file is
depends on the history of the R session.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 20:05:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 12:05:09 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
 (Prof Brian D Ripley's message of "Thu, 2 Nov 2000 19:58:06 +0000 (GMT)")
References: <87itq617l4.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
Message-ID: <87em0u16oa.fsf@jeeves.blindglobe.net>

>>>>> "PBDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    PBDR> But it's whateverlibrary/package/html/whateverfunction.html

Correct, I'm slipping.

    PBDR> You both overlooked the package part and the possibility of
    PBDR> multiple libraries. (To make sure we have the terminology
    PBDR> straight, in R there are libraries of packages, and in S
    PBDR> libraries of sections (S3) or chapters (S4).  I didn't
    PBDR> invent this ....)

    PBDR> Since ESS apparently asks R for the text help page (or it
    PBDR> does it just grab the contents?), it could in principle do
    PBDR> the same for the html help page.  That is, help could be
    PBDR> asked when running under ESS to return the filename, not
    PBDR> send the file to the OS to be viewed (Windows) or call
    PBDR> `browser -remote "openURL(foo.html)' on it.

ESS does the equivalent of cut-and-paste between the prompts.

So if there was an option to return the html, Emacs could render it
(provided W3 was installed).

This would be an adequate solution, and easier that the one I
proposed. 

    PBDR> As far as I can see only the running R session can do this
    PBDR> correctly, and it tooks several goes to get it right (if we
    PBDR> have).  What the right file is depends on the history of the
    PBDR> R session.

Which was part of the point of querying the session (I think I
mis-stated run-time, but I meant at the time point of the 
        help() 
call.

Thanks, this helps.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov  3 16:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Nov 2000 17:48:16 +0100
Subject: [Rd] bound checking (for "x[] <-") now in R-devel
In-Reply-To: <14849.11678.445464.595856@gargle.gargle.HOWL>
References: <B625EB23.69E2%pflugshaupt@geobot.umnw.ethz.ch>
 <3A006648.EB91FE51@ucsd.edu>
 <14849.11678.445464.595856@gargle.gargle.HOWL>
Message-ID: <14850.60496.903173.357918@gargle.gargle.HOWL>

I'm following a `discussion on R-help'
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "Peter" == Peter Perkins <pperkins@ucsd.edu> writes:
    >>> AUcap30<-0 
    >>> for(i in 1:length(AU)) AUcap30[i] <- min(30,AU[i])

    Peter> am i right in thinking that this is an implicit version of

    Peter> for(i in 1:length(AU)) AUcap30 <- c(AUcap30, min(30,AU[i])) ?

    MM> yes (as others have said on this thread).

    Peter> huh.  i guess i'm surprised that this even works at all.  i
    Peter> don't see any specific mention in section 3 of the FAQ, and a
    Peter> quick look at the R intro documents turned up no mention either.

    MM> (really, I thought it *was* there;  no time to search now..)

    Peter> but i seem to remember that it would not work in S (not that
    Peter> that is necessarily a reason for it not to work in R).

    MM> yes, it has been working in S `since ever' (even before there was S+).

    Peter> i kind of _like_ having array bounds checking -- is "array
    Peter> extension on out of bounds indexing" really the default in R,

    MM> yes (and will be)

    Peter> and is there a way to enforce array bounds checking?

    MM> not currently, but probably, there will be, by

    MM>        options(check.bound = TRUE)

    MM> which is (only partly implemented) in the current development
    MM> version.

Okay.
In today's development version of R 
(use rsync or tomorrow's or Sunday's snapshot R-devel.tar.gz),
there's now in help(options)

 check.bounds: logical, defaulting to `FALSE'.  If true, a warning is
	   produced whenever a ``generalized vector'' (atomic or `list')
	   is extended, by something like `x <- 1:3; x[5] <- 6'.

and here's an example :

    > x <- 1:3 ; x[5] <- 6
				# no warning

    > options(check.bounds = TRUE)
    > x <- 1:3 ; x[5] <- 6
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 5) 
    >


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From montero@kingkong.me.berkeley.edu  Fri Nov  3 20:48:06 2000
From: montero@kingkong.me.berkeley.edu (montero@kingkong.me.berkeley.edu)
Date: Fri, 3 Nov 2000 21:48:06 +0100 (MET)
Subject: [Rd] nls() function is not found (PR#725)
Message-ID: <200011032048.VAA25260@pubhealth.ku.dk>

Full_Name: Michael Montero
Version: 1011
OS: NT4.0
Submission from: (NULL) (128.32.148.191)


I haven't been able to use the nls() function because of the following error:

Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "nls"


Apparently nls() is no where to be found, in the /library directory nls exists
with all its files..

need help..

thanks

mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  3 22:32:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 3 Nov 2000 22:32:00 +0000 (GMT)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011032229380.17193-100000@auk.stats>

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..

But did you load it by library(nls)?

> need help..

If you want to post a bug report, please read the section on bugs in
the FAQ first.  There's nothing here that is reproducible.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Nov  3 22:41:35 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 3 Nov 2000 17:41:35 -0500 (EST)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10011031739410.14656-100000@bolker.zoo.ufl.edu>


  Sorry if this is restating the obvious but: did you load the library by
doing library(nls)?  Do you have nls in the right place -- does library()
list nls?

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..
> 
> need help..
> 
> thanks
> 
> mike
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sat Nov  4 21:23:18 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sat, 4 Nov 2000 21:23:18 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <200010311957.OAA26707@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Tue, Oct 31, 2000 at 02:57:36PM -0500
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com>
Message-ID: <20001104212318.A829@ps2-4.ucl-41>


--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii

On Tue, Oct 31, 2000 at 02:57:36PM -0500, Duncan Temple Lang wrote:
> Just a quick thought....

> many of them are in the R executable (R.bin). Perhaps the linking and
> loading mechanisms in Hurd do not export these symbols from the
> application in a way that shared libraries can find them.  Or it may
> be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
> (although that shouldn't matter).

There is something with the hurd ld.so, but I do not know, what. But I 

1) run 'make test' with --gui=none. It went up till dies with
 
> library("eda") # returns invisibly
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
  /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
Error in library("eda") : .First.lib failed
Execution halted

Everything goes well in Linux with the same source (R-1.1.1)

2) compared the configure.log-s from the Hurd and Linux. There are similar
errors in both (due to the missing tcl/tk and atlas [what is this? I have not
found it anywhere] libraries, and that ld can not find -lmoto and -lz, and
others), but also ones special to the Hurd. Here they are:

--
configure:7358: (Each undeclared identifier is reported only once
configure:7358: for each function it appears in.)
configure:7358: parse error before `me'
configure: failed program was:
#line 7343 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
--
int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
--
configure:7406: gcc -o conftest -g -O2 -I/usr/local/include  conftest.c -lipc  -ldl -lncurses -lm -L/usr/local/lib 1>&5
/usr/bin/ld: cannot find -lipc
collect2: ld returned 1 exit status
configure: failed program was:
#line 7395 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */


3) sent a message to the Hurd folks. One reply was this:

<quote on>

The correct linker options for this sort of issue are the same as on Linux.
Perhaps their build scripts behave differently on Linux than on Hurd.  It
sounds like they expect to link the main executable with --export-dynamic
(aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
are defined in the executable on Linux and on Hurd.

<quote off>

I did this (nm) for both the Hurd and Linux. The resulting list is significantly
different, with a 33k list for Linux and a 3k list for the Hurd. I enclose the
latter (I suppose the previous is correct and reproducible).

General remark:

I use Debian 2.2 (potato) with the stable tools. The hurd uses woody tools.
The only difference apart from this that I use f2c in Linux, bug f77 in the
Hurd. (I will try f2s on the Hurd as well)

Next step?

Thanks,
Zsombor

--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="Rsym.hurd"

08174cfc A _DYNAMIC
08174b04 A _GLOBAL_OFFSET_TABLE_
08174db4 A __bss_start
08174de0 B __ctype_b
08174dc4 B __ctype_tolower
08174ddc B __ctype_toupper
0816cac0 D __data_start
         w __deregister_frame_info
08174dc8 B __environ
         w __gmon_start__
         U __h_errno_location
08174dc0 B __hurd_sigthread_stack_base
08174dd8 B __hurd_sigthread_stack_end
08174de8 B __hurd_sigthread_variables
08174dcc B __hurd_threadvar_stack_mask
08174dd0 B __hurd_threadvar_stack_offset
         U __libc_clk_tck
         U __libc_start_main
         w __register_frame_info
         U __sigsetjmp
         U __strdup
         U __strtod_internal
         U __strtol_internal
         U __xstat
08174db4 A _edata
081a7e40 A _end
08174dc8 V _environ
08106f58 A _etext
08106f3c ? _fini
08049b8c ? _init
         U abort
         U accept
         U acos
         U acosh
         U asin
         U asinh
         U atan
         U atan2
         U atanh
         U bind
         U calloc
         U ceil
         U chdir
         U clearerr
         U close
         U closedir
         U connect
         U cos
         U cosh
         U ctime
         U dlclose
         U dlerror
         U dlopen
         U dlsym
08174dc8 V environ
         U exit
         U exp
         U fclose
         U fflush
         U fgetc
         U fgets
         U fileno
         U finite
         U floor
         U fmod
         U fopen
         U fork
         U fprintf
         U fputc
         U fputs
         U fread
         U free
         U fscanf
         U fwrite
         U getcwd
         U getenv
         U gethostbyaddr
         U gethostbyname
         U getpid
         U hypot
         U isatty
         U isnan
         U listen
         U log
         U log10
         U malloc
0804a730 T matherr
         U memcpy
         U modf
         U opendir
         U pclose
         U popen
         U pow
         U printf
         U rand
080ba6e0 T re_compile_fastmap
080bc884 T re_compile_pattern
080bacd0 T re_match
080bacf4 T re_match_2
081734ec D re_max_failures
080baa8c T re_search
080baab4 T re_search_2
080baa40 T re_set_registers
080b7e90 T re_set_syntax
081734a4 D re_syntax_options
         U readdir
         U realloc
         U recv
080bc8b4 T regcomp
080bcb00 T regerror
080bc9d8 T regexec
080bcb7c T regfree
         U remove
         U select
         U send
         U setlocale
         U sigaction
         U sigaddset
         U sigemptyset
         U siglongjmp
         U signal
081a7e3c B signgam
         U sigprocmask
         U sin
         U sinh
         U socket
         U sprintf
         U sqrt
         U sscanf
08174de4 B stdin
08174dd4 B stdout
         U strcat
         U strchr
         U strcmp
         U strcoll
         U strcpy
         U strncat
         U strncmp
         U strncpy
         U strrchr
         U strtok
         U system
         U tan
         U tanh
         U time
         U times
         U tmpnam
         U ungetc
         U unlink
         U vfprintf
         U vsnprintf
         U vsprintf
         U waitpid
         U xdr_bytes
         U xdr_double
         U xdr_int
         U xdr_string
         U xdrstdio_create

--7JfCtLOvnd9MIVvH--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov  5 00:43:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Nov 2000 01:43:49 +0100
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: Zsombor Cseres-Gergely's message of "Sat, 4 Nov 2000 21:23:18 +0000"
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41>
Message-ID: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>

Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

> There is something with the hurd ld.so, but I do not know, what. But I 
> 
> 1) run 'make test' with --gui=none. It went up till dies with
>  
> > library("eda") # returns invisibly
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
> 	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>   /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
> Error in library("eda") : .First.lib failed
> Execution halted

OK, so that shows that dynamic loading doesn't work.

> 3) sent a message to the Hurd folks. One reply was this:
> 
> <quote on>
> 
> The correct linker options for this sort of issue are the same as on Linux.
> Perhaps their build scripts behave differently on Linux than on Hurd.  It
> sounds like they expect to link the main executable with --export-dynamic
> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
> are defined in the executable on Linux and on Hurd.
> 
> <quote off>

Aha... Actually watching the link step during make would probably show
that -export-dynamic is not among the options. The codes that inserts
that flag during configure would seem to be (in configure or configure.in)

  *linux*)
    main_ldflags="-export-dynamic"
    ;;

which likely will not trigger on the Hurd... In the longer run we
should fix configure, but on a short term, you can fix this by setting

MAIN_LDFLAGS = -export-dynamic

in Makeconf. (It would seem to be spelled with a single hyphen, for
some oddball reason).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov  5 08:06:25 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Nov 2000 09:06:25 +0100 (CET)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
References: <20001031193640.B1043@ps2-4.ucl-41>
 <200010311957.OAA26707@jessie.research.bell-labs.com>
 <20001104212318.A829@ps2-4.ucl-41>
 <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
Message-ID: <14853.5377.881692.164218@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:
>> There is something with the hurd ld.so, but I do not know, what. But I 
>> 
>> 1) run 'make test' with --gui=none. It went up till dies with
>> 
>> > library("eda") # returns invisibly
>> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>> unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>> /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
>> Error in library("eda") : .First.lib failed
>> Execution halted

> OK, so that shows that dynamic loading doesn't work.

>> 3) sent a message to the Hurd folks. One reply was this:
>> 
>> <quote on>
>> 
>> The correct linker options for this sort of issue are the same as on Linux.
>> Perhaps their build scripts behave differently on Linux than on Hurd.  It
>> sounds like they expect to link the main executable with --export-dynamic
>> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
>> are defined in the executable on Linux and on Hurd.
>> 
>> <quote off>

> Aha... Actually watching the link step during make would probably show
> that -export-dynamic is not among the options. The codes that inserts
> that flag during configure would seem to be (in configure or configure.in)

>   *linux*)
>     main_ldflags="-export-dynamic"
>     ;;

> which likely will not trigger on the Hurd... In the longer run we
> should fix configure, but on a short term, you can fix this by setting

> MAIN_LDFLAGS = -export-dynamic

> in Makeconf. (It would seem to be spelled with a single hyphen, for
> some oddball reason).

Actually, can you try a current snapshot of R-devel?

I am in the process of converting all shlib stuff to GNU libtool which
is now used by default ... and I think this change should make Peter's
suggestion happen automagically ...

Thanks && waiting for your findings,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011070615.HAA20961@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 725 *
Subject: nls() function is not found
From: montero@kingkong.me.berkeley.edu
Date: Fri, 3 Nov 2000 21:48:05 +0100 (MET)
* PR# 713 *
Subject: median(c(NA,NA),na.rm=T) fails
From: gnw3@acm.org
Date: Sun, 29 Oct 2000 14:48:09 +0100 (MET)
* PR# 716 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 714 *
Subject: prop.test and x = 0
From: charlie@stat.umn.edu
Date: Sun, 29 Oct 2000 16:29:56 +0100 (MET)
* PR# 719 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 718 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 717 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 721 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:26 MST
* PR# 720 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 724 *
Subject: t.test and n = 2
From: charlie@stat.umn.edu
Date: Thu, 2 Nov 2000 14:53:26 +0100 (MET)
* PR# 723 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 722 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:31 MST
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov  7 12:03:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Nov 2000 13:03:48 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071203.NAA19946@pubhealth.ku.dk>

For R Version 1.1.1 and R-devel (Linux)...

Sorry, there's no time to fix myself now
{e.g., after starting a new device} :

    par(las=3); plot(1:10); par(las=1) ; mtext("mtext")

Gives a left-adjusted (as for  adj = 0)  mtext,
even if  par("adj") is still 0.5

Note that I'm also not convinced that  mtext() should follow  par("las")
as it does in the following {2nd bug ?} :


    par(las=3); plot(1:10); mtext("mtext")

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Nov  7 13:43:59 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 7 Nov 2000 14:43:59 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071343.OAA21680@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> For R Version 1.1.1 and R-devel (Linux)...
> 
> Sorry, there's no time to fix myself now
> {e.g., after starting a new device} :
> 
>     par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
>
> Gives a left-adjusted (as for  adj = 0)  mtext,
> even if  par("adj") is still 0.5


That's not a bug, I suppose. From help of mtext():

adj  adjustment for each string. [......]
     If adj is not a finite value (the default), 
                                       ^^^^^^^ = NA, not from par("adj")
     the value par("las") determines the adjustment. 
     For strings plotted parallel to the axis the default is to centre
the string. 
 

> Note that I'm also not convinced that  mtext() should follow  par("las")
> as it does in the following {2nd bug ?} :
> 
>     par(las=3); plot(1:10); mtext("mtext")


Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a second
bug ...



But I think most users don't expect the behavior of mtext(). Maybe some
changes are useful:

1. The above described "bug", maybe centre all strings as the default
(and not only those strings plotted parallel to the axis), so there are
not so much dependencies between the settings of "adj" and "las".

2. Have a look at:

      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2)
      mtext("text2", adj=0.8)

This is intended (from the help), but I would expect (without reading
the help at first) the following result:
 
      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2, at=5.5)
      mtext("text2", adj=0.8, at=5.5)


Additionally: The argument "adj" in mtext() does not support adj=c(x, y)
as described in ?par.



Regards,
Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Nov 20 09:45:12 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Nov 2000 04:45:12 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
Message-ID: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>


  That's true, but I was looking for a more comprehensive solution (which
would be harder to implement, and have the potential to gobble memory like
crazy) of being able to retrieve an list of past values -- "oh, that
third-to-last answer is the one I needed, I'll take that and put it in
this expression"
  (Besides which, 4 characters are better than 11 but worse than 1 or 2)

  I've moved this to R-devel.

On Tue, 7 Nov 2000, Mark Myatt wrote:

> Yves Gauvreau <cyg@sympatico.ca> writes:
> >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> >
> >Would be nice to have something simpler than .Last.value
> 
> Perhaps I am stating the obvious or being extremely stupid but you can
> create a function:
> 
>         lv <- function()
>          {
>          .Last.value
>          }
> 
> And then use lv() whenever you need .Last.value.
> 
> Mark
> 
> --
> Mark Myatt
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark@myatt.demon.co.uk  Tue Nov  7 16:15:35 2000
From: mark@myatt.demon.co.uk (Mark Myatt)
Date: Tue, 7 Nov 2000 16:15:35 +0000
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
References: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
 <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <AueIzBAnqCC6Ewit@myatt.demon.co.uk>

ben@zoo.ufl.edu writes:
>
>  That's true, but I was looking for a more comprehensive solution (which
>would be harder to implement, and have the potential to gobble memory like
>crazy) of being able to retrieve an list of past values -- "oh, that
>third-to-last answer is the one I needed, I'll take that and put it in
>this expression"
>  (Besides which, 4 characters are better than 11 but worse than 1 or 2)
>
>  I've moved this to R-devel.
>

That is an interesting idea. I have yet to use anything like a stack in
R but I guess that it should be easy enough to do (it might even be
there already). Seems to me that something like the way Forth works ...
with a stack and reverse polish notation might suit you.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Nov  7 18:41:42 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Tue, 7 Nov 2000 10:41:42 -0800 (PST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>


ESS comes fairly close to providing this capability:

M-p  plays comint-previous-input

C-u number M-p plays goes back thru 'number' inputs

comint-previous-input clobbers the existing command line, so to get

> abc(<k-th last command line>)

you would need to type

abc( RET C-u k M-p )

or 

abc( RET M-p ... M-p )

hitting M-p k times

Admittedly, this is NOT the same as having a stack of objects...

Chuck Berry

On Mon, 20 Nov 2000 ben@zoo.ufl.edu wrote:

> 
>   That's true, but I was looking for a more comprehensive solution (which
> would be harder to implement, and have the potential to gobble memory like
> crazy) of being able to retrieve an list of past values -- "oh, that
> third-to-last answer is the one I needed, I'll take that and put it in
> this expression"
>   (Besides which, 4 characters are better than 11 but worse than 1 or 2)
> 
>   I've moved this to R-devel.
> 
> On Tue, 7 Nov 2000, Mark Myatt wrote:
> 
> > Yves Gauvreau <cyg@sympatico.ca> writes:
> > >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> > >
> > >Would be nice to have something simpler than .Last.value
> > 
> > Perhaps I am stating the obvious or being extremely stupid but you can
> > create a function:
> > 
> >         lv <- function()
> >          {
> >          .Last.value
> >          }
> > 
> > And then use lv() whenever you need .Last.value.
> > 
> > Mark
> > 
> > --
> > Mark Myatt
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> > 
> 
> -- 
> 318 Carr Hall                                bolker@zoo.ufl.edu
> Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
> Box 118525                                   (ph)  352-392-5697
> Gainesville, FL 32611-8525                   (fax) 352-392-3704
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Nov  7 19:10:36 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 7 Nov 2000 11:10:36 -0800
Subject: [Rd] error handling
Message-ID: <MPEHJEGLNPNFGJFOJMKNCEIICAAA.Don.Wingate@IntelliChem.com>

Hello R developers,

Platform: Windows 2000.
Compiler: GNU GCC - 2.95.2 (CRTDLL)

I have a C function for evaluating commands using eval(SEXP,SEXP) which is
included in a personal make of R.dll. (Similiar to R_Proxy_evaluate() in
rproxy_impl.c)  Using SETJMP to catch errors works but there is a problem.
For example, the following code:

if (SETJMP(R_ToplevelContext->cjmpbuf)) //  R_ToplevelContext->cjmpbuf
R_GlobalContext->cjmpbuf
	return FALSE;
R_CurrentExpr = eval(R_CurrentExpr , rho);

will appear to work the first time there is an error, but the second error
causes an infinite loop. I have identified the location where the loop
occurs. It is in the function jump_to_toplevel() in errors.c inside the for
loop:

	for (c = R_GlobalContext; c; c = c->nextcontext) { ... }

I have found a work around for this but is seems cludgy and I don't know the
POTENTIAL PROBLEMS that might be introduced. It involves setting up a
context and forcing R_GlobalContext's nextcontext to 0, as in the following
(by the way, this same approach doesn't work in the example above, which is
why I set up a context):

begincontext(&thiscontext, 0, CTXT_GENERIC, R_NilValue, R_NilValue,
R_NilValue);
R_GlobalContext->nextcontext = 0;
if (!SETJMP(thiscontext.cjmpbuf))
	R_CurrentExpr = eval(R_CurrentExpr , rho);
endcontext(&thiscontext);

This code solves my problem, however, in certain cases my calling C++ client
application cannot catch the error (exception?) that is generated, and my
program hard crashes. (A bug in Visual Studio, I think.) For this reason,
using SETJMP(R_ToplevelContext->cjmpbuf) as in the first example would
probably be preferable in my case because it doesn't generate an exception
which must be caught by the C++ client.

Note: I am forcing an error to test this by simply calling matrix(x) on a
variable x which doesn't exist.

I realize that R is meant to run in its own event loop and that this is not
a straight-forward problem. However, if anyone able to provide any insight
into what might be going or how to handle it on I would be greatful.

Thanks,
Don Wingate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Tue Nov  7 20:12:37 2000
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Tue, 7 Nov 2000 21:12:37 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072012.VAA25242@pubhealth.ku.dk>

Hi,

By going through the mailing list archives, I noticed that people use
the arrows() command to add error bars to their plots.  I think there
is a problem when trying to draw arrows of zero length.  In the
following code, certainly the x driver produces an odd-angled line.
In the postscript device, NaNQ values are generated; when the
postscript file is viewed in Ghostview, an error is then generated.

Sample run:

postscript(file="test.ps")
x <- c(0, 1, 2)
y <- c(0, -0.5, 0.3)
s <- c(0, 0.1, 0.1)
plot(x,y)
arrows(x, y-s, x, y+s, code=3, angle=90)
dev.off()

Looking in the file test.ps I see the following (around line 160):

np
103.58 354.24 m
103.58 354.24 l
o
np
NaNQ NaNQ m
103.58 354.24 l
NaNQ NaNQ l

This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).



Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  7 21:58:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Nov 2000 22:58:35 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072158.WAA25628@pubhealth.ku.dk>

On Tue, 7 Nov 2000 stephen@cogsci.ed.ac.uk wrote:

> Hi,
> 
> By going through the mailing list archives, I noticed that people use
> the arrows() command to add error bars to their plots.  I think there
> is a problem when trying to draw arrows of zero length.  In the
> following code, certainly the x driver produces an odd-angled line.
> In the postscript device, NaNQ values are generated; when the
> postscript file is viewed in Ghostview, an error is then generated.
> 
> Sample run:
> 
> postscript(file="test.ps")
> x <- c(0, 1, 2)
> y <- c(0, -0.5, 0.3)
> s <- c(0, 0.1, 0.1)
> plot(x,y)
> arrows(x, y-s, x, y+s, code=3, angle=90)
> dev.off()
> 
> Looking in the file test.ps I see the following (around line 160):
> 
> np
> 103.58 354.24 m
> 103.58 354.24 l
> o
> np
> NaNQ NaNQ m
> 103.58 354.24 l
> NaNQ NaNQ l
> 
> This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).

OS-specific (most OSes do sensible things), and already solved in the
development version.  There was some discussion of this (Christian Ritter)
on R-help AFAIR a while back.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 00:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 01:53:37 +0100
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: "Charles C. Berry"'s message of "Tue, 7 Nov 2000 10:41:42 -0800 (PST)"
References: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>
Message-ID: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>

"Charles C. Berry" <cberry@tajo.ucsd.edu> writes:

> Admittedly, this is NOT the same as having a stack of objects...

It would be no big deal to create a stack of objects resulting from
the last N expressions. What I'm not too sure about is whether you'd
really want that. Notice that it could imply keeping several copies of
a data set in memory. E.g. the value of an assignment like "data <-
transform(data, logx=log(x))" is the value of the RHS.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.e.brown@lancaster.ac.uk  Wed Nov  8 10:56:50 2000
From: p.e.brown@lancaster.ac.uk (p.e.brown@lancaster.ac.uk)
Date: Wed, 8 Nov 2000 11:56:50 +0100 (MET)
Subject: [Rd] installing R on solaris (PR#728)
Message-ID: <200011081056.LAA01780@pubhealth.ku.dk>

Hi.  Our computer guy had some adventures installing R on a solaris
machine, but it's working now.  I'm sending you his mails, please pass
them on to whoever deals with this stuff.

ta.
Patrick

From: Kev Buckley <k.buckley@lancaster.ac.uk>

Trying to install R-1.1.1 on Solaris RCC for you. Looks as though I
meant to before, as I had a TGZ of the previous release lying around.

Anyway, if you have any sway at all with folk who write this package,
can you drop them a line on my behalf (The FAQ says feedback is
welcome, but of course there's no e-mail address to send it to !!!)
saying that:

They ought to document what environmental variables you can use to
override the compilers. We use the SUNWSpro stuff but have the GNU
stuff there as well and I have had to wade through the 'configure.in'
to find out (guess) how to set these.

Turns out to be CC, CXX and FC (for C, C++ and FORTRAN resp.) giving 
me the rather enormous configure line of

CC="/usr/local/packages/SUN/SUNWspro/bin/cc" \
FC="/usr/local/packages/SUN/SUNWspro/bin/f77" \
CXX="/usr/local/packages/SUN/SUNWspro/bin/CC -compat" \
./configure --prefix=/usr/local/packages/R-1.1.1

I suppose CC FC and CXX are pretty standard but other, less savvy folk
aren't going to know this, so it wouldn't do any harm for them, to
mention it.

Anyway it has configured, so lets see if I can build it.

-- 
Regards,

From: Kev Buckley <k.buckley@lancaster.ac.uk>

As for R, you may also like to pass this on:

The following lines in the Makefile blow "make install" out of 
the water

#       @for f in `ls bin/*.$(SHLIBEXT)`; do \
#         $(INSTALL_PROGRAM) $${f} $(rhome)/bin; \
#       done              

There are no files bin/*.$(SHLIBEXT) ( ie bin/*.so )

but once they are commented out, it installs OK and I get an R> prompt
when I type

/usr/local/packages/R-1.1.1/bin/R 

on titanic, so I guess it works

I'll set it up so it appears on the compute nodes and you can try and
submit a job to test it out in batch. Use the path as above when you
invoke it.

Get back to you when you can have a go.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov  8 11:27:39 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 8 Nov 2000 12:27:39 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011081127.MAA02281@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> maechler@stat.math.ethz.ch wrote:
    >>  For R Version 1.1.1 and R-devel (Linux)...
    >> 
    >> Sorry, there's no time to fix myself now {e.g., after starting a new
    >> device} :
    >> 
    >> par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
    >> 
    >> Gives a left-adjusted (as for adj = 0) mtext, even if par("adj") is
    >> still 0.5


    Uwe> That's not a bug, I suppose. From help of mtext():

    Uwe> adj adjustment for each string. [......]  If adj is not a finite
    Uwe> value (the default), ^^^^^^^ = NA, not from par("adj") the value
    Uwe> par("las") determines the adjustment.  For strings plotted
    Uwe> parallel to the axis the default is to centre the string.
 
Yes, it *is* one!

Note that above, I had already reset  "par(las = 1)"
*before* doing  mtext(.) !

--------

    >> Note that I'm also not convinced that mtext() should follow
    >> par("las") as it does in the following {2nd bug ?} :
    >> 
    >> par(las=3); plot(1:10); mtext("mtext")


    Uwe> Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a
    Uwe> second bug ...

yes, and I didn't say so, I said
"not convinced that mtext() should ..."

I think you have good  points below :

    Uwe> But I think most users don't expect the behavior of mtext(). Maybe
    Uwe> some changes are useful:

    Uwe> 1. The above described "bug", maybe centre all strings as the
    Uwe> default (and not only those strings plotted parallel to the axis),
    Uwe> so there are not so much dependencies between the settings of
    Uwe> "adj" and "las".

    Uwe> 2. Have a look at:

    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2)
    Uwe> mtext("text2", adj=0.8)

    Uwe> This is intended (from the help), but I would expect (without reading
    Uwe> the help at first) the following result:
 
    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2, at=5.5)
    Uwe> mtext("text2", adj=0.8, at=5.5)

Request for comments :  
Shouldn't we change the behavior() of mtext() here?

----


    Uwe> Additionally: The argument "adj" in mtext() does not support
    Uwe> adj=c(x, y) as described in ?par.

yes, but the `adj' argument of mtext()  *is*  documented explicitly,
(partly for that reason!).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  8 13:16:56 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 8 Nov 2000 08:16:56 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011080814470.2899-100000@bolker.zoo.ufl.edu>


  I see that this simple solution has troubles.
  I think part of the way Mathematica deals with is by doing slick things
with storage, not storing multiple copies of identical objects.  I
understand that .Alias is scary, but would there be any way of using the
same mechanism to keep a buffer/stack/list/whatever of links to previous
answers?

On 8 Nov 2000, Peter Dalgaard BSA wrote:

> "Charles C. Berry" <cberry@tajo.ucsd.edu> writes:
> 
> > Admittedly, this is NOT the same as having a stack of objects...
> 
> It would be no big deal to create a stack of objects resulting from
> the last N expressions. What I'm not too sure about is whether you'd
> really want that. Notice that it could imply keeping several copies of
> a data set in memory. E.g. the value of an assignment like "data <-
> transform(data, logx=log(x))" is the value of the RHS.
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:09:10 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 17:09:10 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
Message-ID: <200011081609.RAA06781@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >I'm not at all happy with this:
> >
> >Solaris :
> >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> >[1] 15.0524 15.3403
> 
> Hm, OK, so it isn't just me.... I guess it is time to file a bug report,
> should I do it, or will you take care of it?

Done...

(This kind of behaviour has been observed on various platforms and
various compilers, sometimes getting stuck around 15.15 and sometimes
around 14.5. Others report no problems. Very strange. I've seen one
case where it apparently shifted from one regime to the other.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 16:23:12 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Wed, 8 Nov 2000 17:23:12 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081623.RAA06926@pubhealth.ku.dk>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>Done...

Great!

>(This kind of behaviour has been observed on various platforms and
>various compilers, sometimes getting stuck around 15.15 and sometimes
>around 14.5. Others report no problems. Very strange. I've seen one
>case where it apparently shifted from one regime to the other.)

Yes, it does that here too.... The following is a verbatim excerpt from my
session:
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.999031  2.000444  3.002296  3.997795  4.998880  5.995267  7.001894
 [8]  7.999983  9.000267  9.513537 10.507142 11.502634 12.498944 13.498615
[15] 14.502410
> rpois
function (n, lambda)
.Internal(rpois(n, lambda))
> version
         _
platform alphaev6-dec-osf4.0e
arch     alphaev6
os       osf4.0e
system   alphaev6, osf4.0e
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> plot(sapply(1:15, function(n) mean(rpois(1000000, n))), t='l')
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.997961  1.999509  3.000748  3.999825  5.002983  6.004424  6.998825
 [8]  7.997999  8.998341  9.766942 10.781751 11.817181 12.856154 13.900369
[15] 14.999378

And from looking at 11, it is apparent that something happened... Also, by
inspecting the graph produced by plot, it may seem as if it happens in the
plot call... But this is really hard to see, but you might want to have a
look.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:51:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 17:51:04 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: kjetil.kjernsmo@astro.uio.no's message of "Wed, 8 Nov 2000 17:23:12 +0100 (MET)"
References: <200011081623.RAA06926@pubhealth.ku.dk>
Message-ID: <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>

kjetil.kjernsmo@astro.uio.no writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >Done...
> 
> Great!

However, be careful not to reply to the version of the mail without a
PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
repository...

I've poked around a bit and it seems that the problem has to do with
the code that tries to save time by reusing calculations if mu ==
muprev: 

> range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
[1] 14.8692 15.1200

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov  8 16:57:36 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 8 Nov 2000 17:57:36 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
In-Reply-To: <200011081609.RAA06781@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0011081752470.4067-100000@artemis.imbe.med.uni-erlangen.de>



> Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >I'm not at all happy with this:
> > >
> > >Solaris :
> > >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> > >[1] 15.0524 15.3403

I get

> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
[1] 14.3702 14.6212

on SuSE Linux 4.3

hothorn@artemis:~ > gcc -v
Reading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specs
gcc version 2.95.2 19991024 (release)

Torsten

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 17:51:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 18:51:59 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: Peter Dalgaard BSA's message of "08 Nov 2000 17:51:04 +0100"
References: <200011081623.RAA06926@pubhealth.ku.dk> <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> kjetil.kjernsmo@astro.uio.no writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >Done...
> > 
> > Great!
> 
> However, be careful not to reply to the version of the mail without a
> PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
> repository...
> 
> I've poked around a bit and it seems that the problem has to do with
> the code that tries to save time by reusing calculations if mu ==
> muprev: 
> 
> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> [1] 14.8692 15.1200

AHA! Spotted, I think. It is possible to return from rpois in step N,
in which case the initialisations in step P are not performed in that
invokation and not the next times either because it thinks that it has
been done previously.

I'm not quite sure what is the best way to fix it, though. Either kill
muprev when exiting in step N, or make the initialisations currently
in step P before entering step N. Or maybe save two versions of muprev
.. yes, that might be it - will try.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 17:54:30 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Wed, 8 Nov 2000 18:54:30 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.30.0011081852210.24652-100000@alnair.uio.no>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
>> [1] 14.8692 15.1200
>
>AHA! Spotted, I think.

Wow! Great, that was fast!

>It is possible to return from rpois in step N,
>in which case the initialisations in step P are not performed in that
>invokation and not the next times either because it thinks that it has
>been done previously.

Ah, I tried to poke at the code, but got confused rather fast...

>I'm not quite sure what is the best way to fix it, though. Either kill
>muprev when exiting in step N, or make the initialisations currently
>in step P before entering step N. Or maybe save two versions of muprev
>... yes, that might be it - will try.

Great! Thanks, I hope it'll work out. And thanks to all who responded!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 18:07:31 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 19:07:31 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081807.TAA08883@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> >> [1] 14.8692 15.1200
> >
> >AHA! Spotted, I think.
> 
> Wow! Great, that was fast!
> 
> >It is possible to return from rpois in step N,
> >in which case the initialisations in step P are not performed in that
> >invokation and not the next times either because it thinks that it has
> >been done previously.
> 
> Ah, I tried to poke at the code, but got confused rather fast...
> 
> >I'm not quite sure what is the best way to fix it, though. Either kill
> >muprev when exiting in step N, or make the initialisations currently
> >in step P before entering step N. Or maybe save two versions of muprev
> >... yes, that might be it - will try.
> 
> Great! Thanks, I hope it'll work out. And thanks to all who responded!

Seems to have done the trick:

> sapply(1:20,function(n) mean(rpois(100000, n)) )
 [1]  1.00021  1.99588  2.99987  4.00364  4.98532  6.00528  7.00402  8.00046
 [9]  8.98958 10.00336 10.99647 12.00490 13.00697 14.01364 14.99357 15.99705
[17] 16.97901 17.99855 19.00363 20.02180


This is the patch (will commit to r-devel shortly)

[pd@blueberry R]$ cvs diff -u src/nmath/rpois.c 
Index: src/nmath/rpois.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/nmath/rpois.c,v
retrieving revision 1.11
diff -u -r1.11 rpois.c
--- src/nmath/rpois.c   2000/08/30 16:45:16     1.11
+++ src/nmath/rpois.c   2000/11/08 18:09:34
@@ -65,7 +65,7 @@
 
     static double big_l;/* integer "w/o overflow" */
     static int l, m;
-    static double muprev = 0.;/*, muold         = 0.*/
+    static double muprev = 0., muprev2 = 0.;/*, muold   = 0.*/
 
     /* Local Vars  [initialize some for -Wall]: */
     double del, difmuk= 0., E= 0., fk= 0., fx, fy, g, px, py, t, u= 0., v, x;
@@ -160,7 +160,11 @@
     /* Step P. preparations for steps Q and H.
        (recalculations of parameters if necessary) */
 
-    if (new_big_mu) {
+    if (new_big_mu || mu != muprev2) {
+        /* Careful! muprev2 is not always == muprev
+          because one might have exited in step I or S
+          */
+        muprev2 = mu; 
        omega = M_1_SQRT_2PI / s;
        /* The quantities b1, b2, c3, c2, c1, c0 are for the Hermite
         * approximations to the discrete normal probabilities fk. */

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Wed Nov  8 18:59:06 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Wed, 8 Nov 2000 19:59:06 +0100 (MET)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
Message-ID: <200011081859.TAA09094@pubhealth.ku.dk>

viz.


> (function(x,y=a) substitute(x$y))(x)
x$a
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$a
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$x$y


The behavior I expect and want is like that in Splus 3.4:

> (function(x,y=a) substitute(x$y))(x)
x$y
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$y
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$y

Is there a workaround to achieve this behavior under fairly general
circumstances, i.e. when one does not know whether to expect an object
with a component, but encounters one?

Chuck Berry
--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:bqtl, Autoloads, package:base
> 

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov  8 19:33:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 8 Nov 2000 11:33:23 -0800 (PST)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: <200011081859.TAA09094@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>

On Wed, 8 Nov 2000 cberry@tajo.ucsd.edu wrote:

> viz.
> 
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$a
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$a
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$x$y
> 
> 
> The behavior I expect and want is like that in Splus 3.4:
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$y
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$y
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$y


I don't think this is a bug - substitute is performing as intended and as
documented -- but it is an incompatibility.  There are two issues here,
one easy and one difficult.

In your first two examples the problem is that you want to substitute only
for x (though in the second example I don't see why you expect this to
happen).  If you want to substitute only for x you can do
	substitute(x$y,list(x=x))


In the third example you want to perform substitution on the value of a
variable.  This is a useful thing to want to do, and I don't know how to
do it.

eg
     z<-quote(x$y)
     x<-list(y=1:3)
and you want to produce
     list(y=1:3)$y

Suggestions?

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 19:55:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 20:55:20 +0100
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: Thomas Lumley's message of "Wed, 8 Nov 2000 11:33:23 -0800 (PST)"
References: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>
Message-ID: <x2hf5itf13.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

>      z<-quote(x$y)
>      x<-list(y=1:3)
> and you want to produce
>      list(y=1:3)$y
> 
> Suggestions?

Double substitute and eval, but there's a hitch:

> eval(substitute(substitute(z,list(x=x)),list(z=z)))
structure(list(y = c(1, 2, 3)), .Names = "y")$y

which is hardly avoidable since

> dput(x)   
structure(list(y = c(1, 2, 3)), .Names = "y")

However, 

> x<-quote(list(y=1:3))
> eval(substitute(substitute(z,list(x=x)),list(z=z)))
list(y = 1:3)$y


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Nov  8 21:32:49 2000
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 8 Nov 2000 22:32:49 +0100 (MET)
Subject: [Rd] R with redhat 7 (PR#732)
Message-ID: <200011082132.WAA09844@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.1.0 and 1.1.1
OS: Redhat 7 Linux (intel)
Submission from: (NULL) (129.100.45.161)


Hi, I am not sure this is well know problem but I could not find anyone mention
it. 
The problem is related to build R on redhat 7. After got src.rpm and tried to
rebuild it, it failed on testing accuracy. Further it shows that under R,
.Machine gives some numbers that maybe are not correct. I also tried the most
recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
comes with powertools of redhat 7 has exactly the same problem. All three R
gives the same results for .Machine. See the following outputs. 

Thanks
Hao Yu

PS. One system has Pentium III 600Mhz and 256RDRAM, Intel CC820 motherboard;
    Another has Pentium III 800Mhz and 256 SDRAM, ASUS BX motherboard.

***************************************************************************** 
R : Copyright 2000, The R Development Core Team
Version 1.1.1 Patched (November 6, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> .Machine
$double.eps
[1] 1.084202e-19

$double.neg.eps
[1] 5.421011e-20

$double.xmin
[1] 0.25

$double.xmax
[1] 0.5

$double.base
[1] 2

$double.digits
[1] 64

$double.rounding
[1] 5

$double.guard
[1] 0

$double.ulp.digits
[1] -63

$double.neg.ulp.digits
[1] -64

$double.exponent
[1] 1

$double.min.exp
[1] -2

$double.max.exp
[1] -2

$integer.max
[1] 2147483647

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 22:45:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 23:45:06 +0100
Subject: [Rd] R with redhat 7 (PR#732)
In-Reply-To: hyu@stats.uwo.ca's message of "Wed, 8 Nov 2000 22:32:49 +0100 (MET)"
References: <200011082132.WAA09844@pubhealth.ku.dk>
Message-ID: <x2vgtyytfx.fsf@blueberry.kubism.ku.dk>

hyu@stats.uwo.ca writes:

> Full_Name: Hao Yu
> Version: 1.1.0 and 1.1.1
> OS: Redhat 7 Linux (intel)
> Submission from: (NULL) (129.100.45.161)
> 
> 
> Hi, I am not sure this is well know problem but I could not find anyone mention
> it. 
> The problem is related to build R on redhat 7. After got src.rpm and tried to
> rebuild it, it failed on testing accuracy. Further it shows that under R,
> .Machine gives some numbers that maybe are not correct. I also tried the most
> recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
> comes with powertools of redhat 7 has exactly the same problem. All three R
> gives the same results for .Machine. See the following outputs. 

We (R-core + Martyn Plummer who builds the RPM files on CRAN)
discussed this earlier today. It is a problem with the RedHat
"unofficical 2.96" gcc compiler which seems to be overly zealous on
some optimizations. The build is said to work if you build R
unoptimized.

We're strongly considering to say that R *requires* another gcc
compiler rather than trying to work around bugs in a compiler that
should never have been released.

The powertools version appears to have been built by disabling the
regression test (make check)! It might be worth filing a formal bug
report with RedHat on that matter. (It is not merely a matter of
cosmetics, those machine constants actually get used for determining
convergence criteria and the like. Having them set too low could send
algorithms into infinite loops.)

I think Martyn Plummer is about to produce a working RPM based on a
better compiler. However, if you want to compile add-on packages, it
might still be a good idea to install an alternative compiler for
yourself. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 10:41:02 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 11:41:02 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <00be01c049c4$9ce317c0$175dd882@stat.auckland.ac.nz>
Message-ID: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>



Hi Paul,

thank you for responding. I indeed overlooked, that units="inch" gives
stable results, independent of resizing the graphics window on the screen.
And indeed I would find some way fiddling around to get my graphic done.

However I see a general problem here and I would like a general solution:
Obviously we are dealing with two coordinate systems: the graphics device
size (call it representation layer) and the window size on the screen (call
it presentation layer). If I do any graphics programming, I do not want to
depend on arbitrary window sizes. It is nice to know my device has 8 inches
and that text x needs y inches in width. But the adress space in which
plotting is done are the "user" coordinates. So, for the simplest example,
specifying xlim=c(0,1) generates a stable reference WHICH DOES NOT CHANGE ON
RESIZING THE GRAPHICS WINDOW. As strwidth(units="user") DOES CHANGE ON
RESIZING THE GRAPHICS WINDOW the units arguably ARE NOT the user
coordinates.

I tend to believe this is a BUG. Same for units="figure".

I also tend to believe, that resizing a graphics window should rescale the
font size used ON SCREEN, because currently we have the following mixup of
representation layer and presentation layer: if a certain text in cex=1
fills 50% width of my user coordinates on the device, and I decrease window
size, with stable screen font size the same text now fills more than 50%
width. This 'more' is reflected in strwidth(units='user'), but as said
before, the units strwidth(units='user') gives are not user but
user*(device/window). So if a special strwidth measure is needed which
refers to the presentation layer it should be named accordingly. Those
units='user' and units='figure' should return stable measures refering to
the representation layer.

Regards


Jens


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 17:39:00 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 18:39:00 +0100
Subject: [Rd] Another inconsistency concerning device-size vs. window-size
Message-ID: <000701c04a73$f2283670$c10616ac@bbdo.de>


Here is an inconsitency. I guess one of the two is a bug (the latter one).

> x11(width=5, height=5, pointsize=8)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 5.000000 4.989583
> # din unchanged
> dev.off()
null device
          1

> x11(width=5, height=5, pointsize=8)
> plot(0,0)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 2.781250 4.989583
> # din changed  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
> dev.off()
null device
          1

What is din?
Representation layer (device size)?
Presentation layer (window size)?

To my understanding it should be representation layer,
and I really hope a window IS NOT directly a device!

Regards


--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Thu Nov  9 21:22:40 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 10 Nov 2000 10:22:40 +1300
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
References: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>
Message-ID: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>

Hi

[This also a reply to "[Rd] Another inconsistency concerning device-size vs.
window-size"]

I will try to give a brief overview of the way R graphics devices
(conceptually at least) work (to me at least).

Yes a window (x11 or win32) is a device.  Other devices are:  postscript,
png, jpeg, pictex, bmp.  Windows are different to these other devices
because they can be interactively resized.  R treats a change in window size
as a change in the (absolute) physical size of the device.  Perhaps another
way to respond to a window resize would be to retain the same physical
device size and have scroll bars on the window, but I don't think this is
still what you would want (?)

Text size is most often specified (ultmately) as a physical (absolute)
pointsize.  The reason for this (I think) is that ultimately text has to be
big enough to read.  Thus strwidth() will return the same answer in any
absolute set of units (e.g., "inch").  The correct interpretation of
strwidth(mytext, "user") is that it is the physical size of the text
_converted_ into user coordinates.

Automatic resizing of text is a tricky issue.  The text size is
automatically resized by R in some cases (e.g., for multiple figures), but
scaling text size continuously (e.g., with window size) does not tend to
produce useful results (e.g., it is too easy to produce text which is too
small to read).

I suspect that I'm not providing you with the answer you want;  I guess I'm
trying to explain how R works so that you can do what you need to.  Perhaps
it would help me to help you more if you described the graphics task you are
trying to achieve (?).

With respect to the par("din") inconsistency, that _is_ undesirable
behaviour.  The correct behaviour is the second one.  Could you please
submit a bug report for this (including your example).

Thanks

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Fri Nov 10 00:07:05 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Fri, 10 Nov 2000 00:07:05 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <14855.49734.826008.444589@mithrandir.hornik.net>; from Kurt.Hornik@ci.tuwien.ac.at on Tue, Nov 07, 2000 at 09:50:14AM +0100
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001110000705.A1401@ps2-4.ucl-41>

On Tue, Nov 07, 2000 at 09:50:14AM +0100, Kurt Hornik wrote:
> Ok.  You should actually try once more tomorrow.  I had to remove
> libtool support, but the export-dynamic should now happen via a
> platform specific override for GNU Hurd.

It compiled fine, and works fine (ESS does not work fine, but that is another
issue).

> Much better than r-release, as we are getting close to release time.

Great! But if I try to compile it on Potato (Linux), it dies after a long
command with a multitude of .o files with:
xxxpr.o: In function `intpr_':
..... xxxpr.c:28: undefined reference to `i_len'

and many more like this in line 53,78 plus others. I did not have this under
the Hurd. What is this?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olav@melvin.jordforsk.no  Fri Nov 10 09:56:53 2000
From: olav@melvin.jordforsk.no (olav@melvin.jordforsk.no)
Date: Fri, 10 Nov 2000 10:56:53 +0100 (MET)
Subject: [Rd] gnome-support problems (PR#733)
Message-ID: <200011100956.KAA27154@pubhealth.ku.dk>

The compilation fails in <libintl.h>, because some function definitions was
changed in <libgnome/gnome-i18n.h>.
I inserted
#define ENABLE_NLS
before '#include "gnome.h" in devGNOME.c and devGTK.c, and then the 
compilation went ok.

There was also an error in configure, it couldn't find libglade-config.

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status =
 major = 1
 minor = 1.1

by the way: the function "bug.report(...)" failed with the message:
Error in paste("-s '", subject, "' -c", ccaddress, address, "<", file,  : 
	Object "support" not found


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:33:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:33:51 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
Message-ID: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>

Can I suggest that in cov and cor the lines

    if (is.data.frame(x)) 
        x <- as.matrix(x)
    if (is.data.frame(y)) 
        y <- as.matrix(y)

be replaced by 

    if (is.data.frame(x)) 
        x <- data.matrix(x) # coerce logical and factors
    if (is.data.frame(y)) 
        y <- data.matrix(y) # likewise

This would allow things like

> data(iris)
> cor(iris)

which seems like a reasonable thing to do (certainly to my students!).  It
would also give a more informative error message:

> iris$Species <- as.character(iris$Species)
> cor(iris) # modified function
Error in data.matrix(x) : non-numeric data type in frame

as opposed to

> cor(iris) # original function
Error in cor(iris) : missing observations in cov/cor
In addition: Warning message: 
NAs introduced by coercion 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 10 15:52:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 2000 16:52:40 +0100
Subject: [Rd] Modification to cov and cor
In-Reply-To: Jonathan Rougier's message of "Fri, 10 Nov 2000 15:33:51 +0000 (GMT)"
References: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>
Message-ID: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Can I suggest that in cov and cor the lines
> 
>     if (is.data.frame(x)) 
>         x <- as.matrix(x)
>     if (is.data.frame(y)) 
>         y <- as.matrix(y)
> 
> be replaced by 
> 
>     if (is.data.frame(x)) 
>         x <- data.matrix(x) # coerce logical and factors
>     if (is.data.frame(y)) 
>         y <- data.matrix(y) # likewise

I'd oppose that, especially for factors. Correlations between factors
are as likely to be nonsens as remotely meaningful.  

With the current definition of data.matrix (using codes(f)), even more so:

> data.matrix(data.frame(a=1:3,b=factor(c("mild","medium","severe"))))
  a b
1 1 2
2 2 1
3 3 3

!!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:59:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:59:40 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
In-Reply-To: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0011101556040.8632-100000@laplace>

On 10 Nov 2000, Peter Dalgaard BSA wrote:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> 
> > Can I suggest that in cov and cor the lines
> > 
> >     if (is.data.frame(x)) 
> >         x <- as.matrix(x)
> >     if (is.data.frame(y)) 
> >         y <- as.matrix(y)
> > 
> > be replaced by 
> > 
> >     if (is.data.frame(x)) 
> >         x <- data.matrix(x) # coerce logical and factors
> >     if (is.data.frame(y)) 
> >         y <- data.matrix(y) # likewise
> 
> I'd oppose that, especially for factors. Correlations between factors
> are as likely to be nonsens as remotely meaningful.  

I agree with that.  I was thinking that a warning would be
helpful.  Perhaps something along the lines of

if (any(sapply(x, is.factor))) warning("Coercing factor to numeric")

J.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 16:00:18 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 10 Nov 2000 17:00:18 +0100 (MET)
Subject: [Rd] Assigning into a dataframe (PR#734)
Message-ID: <200011101600.RAA03890@pubhealth.ku.dk>

I am not sure whether this is a bug or a feature, but I thought
that these two would have identical effects ...

> data(iris)
> iris[, 5] <- as.character(iris[, 5])
> is.factor(iris[, 5])
[1] TRUE
> is.factor(iris$Species)
[1] TRUE
> data(iris)
> iris$Species <- as.character(iris$Species)
> is.factor(iris[, 5])
[1] FALSE
> is.factor(iris$Species)
[1] FALSE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:patches, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sun Nov 12 23:16:37 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sun, 12 Nov 2000 23:16:37 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <87u29gejck.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Thu, Nov 09, 2000 at 04:55:39PM -0800
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001112231637.A493@ps2-4.ucl-41>

On Thu, Nov 09, 2000 at 04:55:39PM -0800, A.J. Rossini wrote:
> and is there anything emacs-lisp specific that needs to be fixed?

I do not really know. Installing ESS (5.1.18 or 5.1.13) gives an error message
during the config process. When I try to use them (M-x R), they say
'Deselecting deleted buffer' or something like this. I have no other
experience. :(

Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 14 13:11:44 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Nov 2000 14:11:44 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
References: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
Message-ID: <14865.14864.656323.333048@gargle.gargle.HOWL>

The following becomes more and more a topic for an R mailing list,
possibly R-devel.

R for Windows crashes are important and should be discussed and debugged
with the experts -- which are not reading ESS-help  AFAIK.

Martin

>>>>> "ColCun" == Cunningham, Colin A <colin.a.cunningham@intel.com> writes:

    ColCun> In my very brief exposure to R, I have experienced the very
    ColCun> same crash experience when displaying graphics.  I haven't
    ColCun> tried the fixes yet however.

    ColCun> I also am running W2K.  I installed the binary distribution of
    ColCun> R 1.1.1 for Windows.  I'm hopeful of deploying application
    ColCun> engines here and there on W2K and NT servers.  Let me know if
    ColCun> there are tests I can run for the group.  I have several
    ColCun> machines available to me here that run variants of the W2K OS.

    ColCun> Colin

    >> Colin Cunningham
    >> Sr Software Engineer 
    >> Internet Data Analysis 
    >> Business Intelligence & Data Services
    >> Intel Online Services, OSS New Capabilities
    >> *     503.696.7648
    >> * colin.a.cunningham@intel.com
    >> 


    ColCun> -----Original Message-----
    ColCun> From: rossini@blindglobe.net [mailto:rossini@blindglobe.net]
    ColCun> Sent: Friday, November 10, 2000 4:51 PM
    ColCun> To: Erich Neuwirth
    ColCun> Cc: stockton@neptuneandco.com; Goran Arnoldsson;
    ColCun> ess-help@stat.math.ethz.ch
    ColCun> Subject: Re: Gnuserv, NTEmacs, Windows 2000 and R

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> as far as i know, we still have an rterm and especially rgui
    EN> problem under win2k.  on my athlon win2k machine, rterm and
    EN> rgui still crash when i try to do graphics.  a simple
    EN> plot(1:10) crashes both.

    EN> so even after guido's and brian's fix (thanks to both of them)
    EN> there still are some unsolved problems which might be part of
    EN> the emacs ess r problem.

     AJR> Erich - 

     AJR> I'd not seen this posted to R-devel; have you mentioned that to
     AJR> them?  I'll have to get my wife to try R on her new machine (my
     AJR> only access to Win2k, thanks to all the Gods...).

okay now it finally went to R-devel -- quite a bit late so,...

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 14 13:46:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 14 Nov 2000 13:46:43 +0000 (GMT)
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <14865.14864.656323.333048@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>

On Tue, 14 Nov 2000, Martin Maechler wrote:

> The following becomes more and more a topic for an R mailing list,
> possibly R-devel.
> 
> R for Windows crashes are important and should be discussed and debugged
> with the experts -- which are not reading ESS-help  AFAIK.

Yes, but this one is not reproducible even on another W2K Athlon machine (I
had access to one over the w/end).  There are known problems with Athlon
motherboards and particular disks under W2K, for example, so I am not at
all sure this is an R problem.  It's frustrating for Erich I know, but
there is nothing I can see we can do to help.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 14 14:12:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Nov 2000 15:12:17 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: Prof Brian D Ripley's message of "Tue, 14 Nov 2000 13:46:43 +0000 (GMT)"
References: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>
Message-ID: <x28zqmve0u.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Tue, 14 Nov 2000, Martin Maechler wrote:
> 
> > The following becomes more and more a topic for an R mailing list,
> > possibly R-devel.
> > 
> > R for Windows crashes are important and should be discussed and debugged
> > with the experts -- which are not reading ESS-help  AFAIK.
> 
> Yes, but this one is not reproducible even on another W2K Athlon machine (I
> had access to one over the w/end).  There are known problems with Athlon
> motherboards and particular disks under W2K, for example, so I am not at
> all sure this is an R problem.  It's frustrating for Erich I know, but
> there is nothing I can see we can do to help.
> 
> [...]

There are some intermittent problems on other platforms too, and
there's the off chance that this machine is tickling the bug in just
the right way to make it happen more frequently. So gathering
information on Erichs and Colins cases might still be worth it. Don't
hold your breath though...

We're not getting many clues to go by, anyway. Is there a stack trace
or does it just freeze, for instance? What are the symptoms of a
crash? 

[Those Windows dumps are a pest, but if one gets really stubborn, they
make it possible to decipher where in the program the fault occurred.
This is done by disassembling the object files and using a memory map
of the binary. Not that I'm volunteering...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 07:30:29 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 08:30:29 +0100
Subject: [Rd] Re: removing elements that aren't there -- options(check.bounds)
In-Reply-To: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
References: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
Message-ID: <14866.15253.287734.846993@gargle.gargle.HOWL>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
(to R-core,  but MM thinks  R-devel'ers might want to contribute ..)

    TL> Now we have option$check.bounds

{in R 1.2 (unstable) aka "R-devel"}

    TL> could we consider allowing negative
    TL> subscripts outside the array bounds:
    TL> x <- 1:3
    TL> x[-4]
    TL> is an error in R but not in S.

    TL> I think there is a much stronger case for x[-4] to succeed than for
    TL> x[4], which we do allow.

I tend to agree.

Note that currently,  options(check.bounds = TRUE)
only affects `sub-assignment', i.e. the "[<-" functions,
and not `sub-setting' (aka "[") :

    > options(check.bounds = TRUE)
    > x[4]
    [1] NA
    > x[-4]
    Error: subscript out of bounds
    > x[4] <- 4
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 4) 
    > x[-5]
    Error: subscript out of bounds
    > x[5]
    [1] NA

I tend to think that   options(check.bounds = TRUE)
should
	- also warn when  `subsetting' outside given bounds

	- only warn in the above x[-4] case
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 10:31:47 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 11:31:47 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
Message-ID: <002101c04eef$42838640$c10616ac@bbdo.de>



Hi Paul,
Dear R developers,

you wrote

> Yes a window (x11 or win32) is a device.
[snipped]
> R treats a change in window size as a change in the (absolute) physical
size of the device.

Well, as to be expected by Murphy's law, this is the worst possible case.

[snipped]
> With respect to the par("din") inconsistency, that _is_ undesirable
> behaviour.  The correct behaviour is the second one.  Could you please
> submit a bug report for this (including your example).

Paul, I'd not like to submit a bug report to resolve the par("din")
inconsistency by making it consistently 'the second one'. Rather I try to
convince you (and r-devel) making it consistently 'the first one'. I
consider the following features to be indispensable:

1) presentation-layer vs. representation-layer
Keep physical size of the device striktly seperated from window size,
i.e. do not change par("din") with window resizing.

2) Text size
Keep text size stable with respect to device size,
i.e. resize text size with window size

3) strwidth() and strheight()
those should consistently refer to the representation layer, or to be more
general: the R-user/R-programmer should always work within the context of
the representation layer, and he should be isolated against the presentation
layer (where obvioulsy some C-Coding is acting, to put things on screen).

Here is the resoning for this:

a)
Let's start with a rather abstract reason: proper separation of 'layers' is
one of the cornerstones of professional software design. A good example is
the current/old thrive for seperation of content and layout (XML/LaTeX).
Currently R blends representation and presentation, which is no good.

b)
For a more practical reason. Seperating the layers gives more options, more
degrees of freedom to use the software. Currently there is no way to layout
a big device like DIN A3, because the windows always is smaller and it gets
impossible to create a DIN A3 device which can be changed INTERACTIVELY
(i.e. x11()). Seperating layers allows everything which currently works plus
more. For example Font sizes. You argue, that resizing fonts with window
size could result in smalls too small to read. Well, it could. But you would
be free to create a device of exactly the window size, and you would be free
to specify any font size when creating the device. To put ot more
provocative: Currently R has an MS like approach of software trying to be
more intelligent than it's user, something I always hated about products
like MS Word. Currently there are situations without any resonable
workaround in R. Seperating layers gives you every option and full control.
As you suggest, adding something like scrolling or zooming to windows would
be a nice extension. However, proper seperation of layers should have
priority: it's a must.

c)
For a reason of authority and compatibility: the prototype DOES layer
seperation, DOES rescaling of fonts with window size. Let's dare to be as
good as the prototype, or better ...

I hope all this is convincing. As the graphics flexibility of R is one of
the reasons to use it, having reduced degrees of freedom is disappointing.
To put it provocative:

tool or toy, that's the question here

Please give feedback

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 15 10:18:41 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Nov 2000 11:18:41 +0100
Subject: [Rd] standardized add-on package configuration
Message-ID: <14866.25345.561674.760076@mithrandir.hornik.net>

Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
configure script which tries to find headers and libraries required by
the package.  I was wondering whether we could/should standardize how
this is done.

In what follows, suppose package FOO needs functionality BAR.

* One approach would be via command-line arguments to configure.  There
  seems to be no standard for this.  GNOME uses

	--with-FOO-prefix
	--with-FOO-exec-prefix

  in several of its components.  However, this, assumes that the GNU
  standards are followed in the sense that headers go into

	FOO-prefix/include

  and libs go into

	FOO-exec-prefix/lib

  which might not necessarily be the case.

  Alternatively, we could have

	--with-FOO-libraries
	--with-FOO-libs

  and

	--with-FOO-includes
	--with-FOO-headers

  (one of each only, of course).

* The other possibility would be via environment variables, such as
  CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
  package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)

I think the simplest solution would be via CPPFLAGS and LIBS because it
is not package-specific.  So installation would happen via

	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

(did not check if this works now).

Now I did not check all packages, so is there something I may be
overlooking?

(Once we agree on a standard, I would like to document it in R-exts.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 13:18:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 14:18:05 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <002101c04eef$42838640$c10616ac@bbdo.de>
References: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
 <002101c04eef$42838640$c10616ac@bbdo.de>
Message-ID: <14866.36109.332324.617921@gargle.gargle.HOWL>

       .............
       ...........
    Jens> c)

    Jens> For a reason of authority and compatibility: the prototype DOES
    Jens> layer seperation, DOES rescaling of fonts with window size. 
			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
absolutely not!
{unless you are talking Axum graphics which I hardly know and which
 definitely are *NOT* part of the prototype!}

    Jens> Let's dare to be as good as the prototype, or better ...

That has been one of the major motivations behind R development
and I think we *are* slightly better in lower level graphics

    Jens> I hope all this is convincing.
more or less. 
I think there is more than one way of layer separation and we *are* more or
less adhering to one..

Our problem has been to try to remain prototype compatible in many ways and
still do well.  In the realm of graphics this is close to impossible if you
look closely...


    Jens> As the graphics flexibility of R
    Jens> is one of the reasons to use it, having reduced degrees of
    Jens> freedom is disappointing.  To put it provocative:

    Jens>	   tool or toy, that's the question here

  (you could be somewhat kinder here ...)

    Jens> Please give feedback

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 14:18:16 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 15:18:16 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <14866.36109.332324.617921@gargle.gargle.HOWL>
Message-ID: <002401c04f0e$e5f4dc60$c10616ac@bbdo.de>



Hi Martin,

thanks for giving feedback.
>     Jens> For a reason of authority and compatibility: the
> prototype DOES
>     Jens> layer seperation, DOES rescaling of fonts with window size.
> 			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> absolutely not!
> {unless you are talking Axum graphics which I hardly know and which
>  definitely are *NOT* part of the prototype!}

well, my experience with the prototype is somewhat outdated (WinS+3.3 DID
not change device size with window resizing and DID rescaling of fonts with
window size)

> I think there is more than one way of layer separation and we
> *are* more or
> less adhering to one..

well, the dependance of strwidth() on actual windowsize somehow is an
counter-example, don't you think?

>     Jens> As the graphics flexibility of R
>     Jens> is one of the reasons to use it, having reduced degrees of
>     Jens> freedom is disappointing.  To put it provocative:
>
>     Jens>	   tool or toy, that's the question here
>
>   (you could be somewhat kinder here ...)

Definitely. I know that R is an incredible usefull and serious piece of
software, and my hope is to tickle people to make it better. It's not my
intention to really provoke someone. However, I think it is a serious issue,
and the current implementation seriously restricts R's usefullness as an
universal tools for creating data-driven graphs. And, as I tried to explain,
there is no need for this restriction.

More feedback welcome.


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 15:47:45 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 16:47:45 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <200011151434.OAA22205@toucan.stats.ox.ac.uk>
Message-ID: <002501c04f1b$6639a8e0$c10616ac@bbdo.de>



Dear Prof. Brian Ripley,

thank you for answering.

> Can we step back a bit?  I think we could probably do better
> than we do.
> No one envisaged people resizing graphics windows when the system was
> designed (as far as I can see), and locking aspect ratios (which
> S-PLUS now does) when re-sizing looks sensible to me.  We
> might seriously
> want to consider scrollable canvases on graphics devices, too.
>
> I'm afraid I don't fully grasp Jens' points, in part because he is
> coming from a different usage experience (mainly Windows, I believe)
> than I am.  And now (the run up to 1.2.0) is not a good time to think
> about such changes.  But if Jens could put together a proposal for the
> wishlist on R-bugs, we can return to it.

I am willing to do that, but let me now explain the problem, which triggered
my conclusions.

BTW, I'm also on linux and under linux I face the same trouble.

I had to optimize a very complex graph which was representing some
underlying data structure.

1) It required DIN-A3 (bigger than screen)
2) It required programming and use of strwidth(), as I needed an automated
way to transform data-to-graph
3) It required interacting based on locator() to change the underlying data
basis and replotting data-to-graph
4) (Thus) It required seeing the whole device during interaction, thus
probably scroll_bars/zooming would not help.
5) It required some fine tuning (text wrapping, font size and other
parameters) ON SCREEN before printing.

E.g. there was text surrounded by boxes, and the text had to fit within
boxes tightly. Relatively to the DIN-A3-device the text was small, but it
had to be that size to get a realistic impression of space needs.

Does my point get clear now?

However, beside this particular problem, I'm convinced that a proper
seperation between device features and window features would be very
usefull.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov 15 15:53:06 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 15 Nov 2000 16:53:06 +0100 (MET)
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <14866.25345.561674.760076@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>


On Wed, 15 Nov 2000, Kurt Hornik wrote:

> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
> configure script which tries to find headers and libraries required by
> the package.  I was wondering whether we could/should standardize how
> this is done.

IMO the main problem is that header files and libraries are not in
/usr/include or /usr/lib but, for example, for mysql in
/usr/local/mysql/{include,lib} by default. A package should build without
interaction if headers and libs are in their default place. 

> 
> In what follows, suppose package FOO needs functionality BAR.
> 
> * One approach would be via command-line arguments to configure.  There
>   seems to be no standard for this.  GNOME uses
> 
> 	--with-FOO-prefix
> 	--with-FOO-exec-prefix
> 
>   in several of its components.  However, this, assumes that the GNU
>   standards are followed in the sense that headers go into
> 
> 	FOO-prefix/include
> 
>   and libs go into
> 
> 	FOO-exec-prefix/lib
> 
>   which might not necessarily be the case.
> 
>   Alternatively, we could have
> 
> 	--with-FOO-libraries
> 	--with-FOO-libs
> 
>   and
> 
> 	--with-FOO-includes
> 	--with-FOO-headers
> 
>   (one of each only, of course).

Can one define default values here?

> 
> * The other possibility would be via environment variables, such as
>   CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>   package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
> 
> I think the simplest solution would be via CPPFLAGS and LIBS because it
> is not package-specific.  So installation would happen via
> 
> 	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

Maybe it is possible to check if CPPFLAGS is empty (replace it with a
default value) or not (try to build the package and give an error message
if it failed, pointing to the appropriate environment variable)?

> 
> (did not check if this works now).
> 
> Now I did not check all packages, so is there something I may be
> overlooking?
> 
> (Once we agree on a standard, I would like to document it in R-exts.)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Nov 16 08:32:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Nov 2000 09:32:35 +0100
Subject: [Rd] Re: [S] How to make tiny postscript files
In-Reply-To: <3A12E8BB.C4CE6709@virginia.edu>
References: <3A12E8BB.C4CE6709@virginia.edu>
Message-ID: <14867.39843.10568.102988@gargle.gargle.HOWL>

>>>>> "Frank" == Frank E Harrell <fharrell@virginia.edu> writes:

    Frank> I am using S-Plus 6.0 Release 1 on Linux and want to make
    Frank> an encapsulated postscript graphics file of width 2 inches
    Frank> and height 0.5 inch.  When I use 

    Frank> postscript(filename, height=.5,width=2,hor=F)

    Frank> I get 

    Frank> GR-Z Error from Routine zzpltz
....

    Frank> I have also tried onefile=T, print.it=F, maximize=T but this does not
    Frank> seem to make a difference.  Has anyone had luck producing tiny
    Frank> postscript files who would share the commands they used?  Thanks.

The above works in R  __when__ you additionally say

  par(mex = .5) #or something like it,  par(mar =...),  par(mgp= ...)

in order to ensure that the outer margins do not reduce the plot region to
non-positive extents..

IMHO this is another example of basic design deficiciencies of S graphics
(including R and S-plus)...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 16 09:47:41 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 16 Nov 2000 10:47:41 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001116091623.A12130@stat1.stat.auckland.ac.nz>
Message-ID: <002601c04fb2$441c9230$c10616ac@bbdo.de>



Hello Ross,

thank you for entering this discussion.

> Every version of Splus I've looked at (I've not seen 2000 yet) simply
> lied about the device size.  The device remains the size it
> was when it
> was created.  I presume that the rendering code just carries out a
> stretch of coordinates.  If you do the following
>
> 	par("din")
> 	# stretch the window with the mouse
> 	par("din")
>
> you'll see that there is no change.  As far as I could tell,
> the initial
> size of the device is used for ever.

Yes, and for me this behaviour would be great: you create a bigger than
screen device like DIN A3, you can see it at the screen at whatever
windowsize you want and it alway tells the truth about it's real size: DIN
A3. This TRUTH becomes a LIE only, if one considers representation layer and
presentation layer to be the same.

> The results of this are unfortunate when you are relying on having
> equal units in the x and y directions.  Drawing maps or displaying
> the results of some sort of ordination can be badly affected.  Also,
> there can be obviously incorrect drawing of tickmarks and annotation
> (this is usually only apparent for extreme reshaping).

This is where aspect ratio locking would help (for the whole device, not
only for the plot area).

> The philosophy in R is that when a window is resized, the graph should
> be redrawn so that it will appear as it would if it had been created
> in a window with the new size.

This makes it IMPOSSIBLE to work on a device bigger than the screen.

> If we are going to change the graphics, let's please throw the present
> system out completely.

If you are going to change graphics from scratch, PLEASE do use this
opportunity to really seperate representation layer from screen
presentation.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Nov 17 09:40:31 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 17 Nov 2000 22:40:31 +1300
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: =?iso-8859-1?Q?=3C002601c04fb2$441c9230$c10616ac=40bbdo=2Ede=3E=3B_from_?=
 =?iso-8859-1?Q?Jens_Oehlschl=E4gel_on_Thu=2C_Nov_16=2C_2000_at_10:47:41A?=
 =?iso-8859-1?Q?M_+0100?=
References: <20001116091623.A12130@stat1.stat.auckland.ac.nz> <002601c04fb2$441c9230$c10616ac@bbdo.de>
Message-ID: <20001117224031.A21008@stat1.stat.auckland.ac.nz>

On Thu, Nov 16, 2000 at 10:47:41AM +0100, Jens Oehlschlgel wrote:
> 
> Hello Ross,
> 
> thank you for entering this discussion.
> 
> [ some burbling by Ross omitted ... ]
> 
> Yes, and for me this behaviour would be great: you create a bigger than
> screen device like DIN A3, you can see it at the screen at whatever
> windowsize you want and it alway tells the truth about it's real size: DIN
> A3. This TRUTH becomes a LIE only, if one considers representation layer and
> presentation layer to be the same.
> 
> > The results of this are unfortunate when you are relying on having
> > equal units in the x and y directions.  Drawing maps or displaying
> > the results of some sort of ordination can be badly affected.  Also,
> > there can be obviously incorrect drawing of tickmarks and annotation
> > (this is usually only apparent for extreme reshaping).
> 
> This is where aspect ratio locking would help (for the whole device, not
> only for the plot area).
> 
> > The philosophy in R is that when a window is resized, the graph should
> > be redrawn so that it will appear as it would if it had been created
> > in a window with the new size.
> 
> This makes it IMPOSSIBLE to work on a device bigger than the screen.


  Paul and I talked a little about this today.

  The issue is really just a Gui one, not one for the underlying graphics
  system.  Both the scrollbar approach and the window content scaling
  one can be handled in a very superficial way by device drivers without
  any changes at all to the underlying R graphics system.  (I suspect
  that this is how Splus adresses the problem).

  The behavior I want requires a deeper interaction with the graphics
  system, but it is the behavior already in place.

  Enabling the behaviors you and Brian prefer is just a matter of flicking
  a switch in the driver so that it no longer tells the graphics system
  when there has been a change in the window configuration and having
  the driver handle the scaling or scrolling.

  So, everyone can have what they want ...

  The real problem is that we don't have enough of a Gui (yet) to make
  the behavior happen in a cross-platform way.

Ros
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Fri Nov 17 10:25:39 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Fri, 17 Nov 2000 11:25:39 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001117224031.A21008@stat1.stat.auckland.ac.nz>
Message-ID: <002901c05080$bc00f830$c10616ac@bbdo.de>



Dear Ross, Dear Paul,

thank you very much for this good news.

I am deeply impressed about the speed with which my suggestion has been
discussed and improvements are planned.
I can neither remember nor imagine this to happen with any piece of
commercial software.

I wish a relaxed weekend to all of you at r-devel who contribute to such an
important system.
Regards


Jens


>   Paul and I talked a little about this today.
>
>   The issue is really just a Gui one, not one for the
> underlying graphics
>   system.  Both the scrollbar approach and the window content scaling
>   one can be handled in a very superficial way by device
> drivers without
>   any changes at all to the underlying R graphics system.  (I suspect
>   that this is how Splus adresses the problem).
>
>   The behavior I want requires a deeper interaction with the graphics
>   system, but it is the behavior already in place.
>
>   Enabling the behaviors you and Brian prefer is just a
> matter of flicking
>   a switch in the driver so that it no longer tells the
> graphics system
>   when there has been a change in the window configuration and having
>   the driver handle the scaling or scrolling.
>
>   So, everyone can have what they want ...
>
>   The real problem is that we don't have enough of a Gui (yet) to make
>   the behavior happen in a cross-platform way.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Nov 17 14:43:41 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 17 Nov 2000 09:43:41 -0500
Subject: [Rd] Crash from windres in WinME
Message-ID: <3a184329.343746558@fisher.stats.uwo.ca>

In preparation for doing a bit more work on RStreams, I installed the
recommended Windows tools to compile R.  When the makefile got to a
line calling "windres" (a resource compiler?), it crashed, and left
WinME unstable (even more than usually!).  Windres is one of the GNU
binutils, so I installed the newest build, but got the same crash.

Has anyone else seen this particular problem before elsewhere, and
knows a workaround, or is this just one more reason not to use WinME?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 17 15:05:27 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 17 Nov 2000 15:05:27 +0000 (GMT)
Subject: [Rd] Crash from windres in WinME
Message-ID: <200011171505.PAA29537@toucan.stats.ox.ac.uk>


> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Fri, 17 Nov 2000 09:43:41 -0500
> 
> In preparation for doing a bit more work on RStreams, I installed the
> recommended Windows tools to compile R.  When the makefile got to a
> line calling "windres" (a resource compiler?), it crashed, and left
> WinME unstable (even more than usually!).  Windres is one of the GNU
> binutils, so I installed the newest build, but got the same crash.
> 
> Has anyone else seen this particular problem before elsewhere, and
> knows a workaround, or is this just one more reason not to use WinME?

Neither NT4 nor 98SE give me any problems.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov 17 15:35:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Nov 2000 16:35:05 +0100
Subject: [Rd] Re: convolve() design bug
In-Reply-To: <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
References: <3A1407B5.9CE04DD@noaa.gov>
 <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
Message-ID: <14869.20521.353429.289639@gargle.gargle.HOWL>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes   --- on R-help :

      ...

  Bill> Use convolve().  Here is an example:
  Bill> #Bracewell The Fourier transform and its applications, chap 3 (p.32 in 2nd
  Bill> #edition): {2 2 3 3 4} * {1 1 2} = {2 4 9 10 13 10 8}
  Bill> x<-c(2,2,3,3,4)
  Bill> h<-c(1,1,2)
  Bill> out<-convolve(x,rev(h),type="o") #need to do rev due to fault in R code

  Bill> I pointed it out several times to the R-developers that
  Bill> convolve() should do convolution by default! However they prefer
  Bill> it to do correlation by default (which makes no sense to
  Bill> me). Anyway the workaround is to use rev(h).

Dear Bill,
as one of those not too responsive way back, here are some 
non-convincing reasons: 

  At that time, we had density rely on convolve's behavior back then,
  and the it was old legacy R code on which others might have relied, 
  etc, etc

But then, I must admit I had forgotten for a while and later never felt
urged anymore.

Can we have something like a ``survey'' ?
Does anybody heavily rely on convolve()'s current behavior ?
{teaching / packages / ...}

Bill, can you (again, I know, exuse us!) detail your suggested changes,
ideally by sending patches against the current *.R and *.Rd files ?
Thank you.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frost@pocketmail.com  Fri Nov 17 19:46:00 2000
From: frost@pocketmail.com (frost@pocketmail.com)
Date: Fri, 17 Nov 2000 20:46:00 +0100 (MET)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
Message-ID: <200011171946.UAA11423@pubhealth.ku.dk>

Full_Name: Keith L. Frost
Version: 1.1.1
OS: Linux Mandrake 7.1
Submission from: (NULL) (199.182.77.3)


x <- 1:256;
dim(x) <- c(16,16);
image(x,col=gray(0:255/255));
dev.print();

Sometimes errored out with a complaint about hp not defined.  I looked at the 
source code for dev.print, and found that in 3--4 places, variable names for 
paper width and height were mistakenly named wp and wh, instead of wp and hp.
Changing references to wh to references to hp fixed the problem.
Here is the new version of dev.print:

function (device = postscript, ...)
{
    current.device <- dev.cur()
    nm <- names(current.device)[1]
    if (nm == "null device")
        stop("no device to print from")
    if (nm != "X11" && nm != "windows" && nm != "gtk" && nm !=
        "gnome")
        stop("can only print from screen device")
    oc <- match.call()
    oc[[1]] <- as.name("dev.copy")
    oc$device <- device
    din <- par("din")
    w <- din[1]
    h <- din[2]
    if (missing(device)) {
        if (is.null(oc$file))
            oc$file <- ""
        hz <- oc$horizontal
        wp <- 8
        hp <- 10
        paper <- oc$paper
        if (is.null(paper))
            paper <- ps.options()$paper
        if (paper == "default")
            paper <- getOption("papersize")
        paper <- tolower(paper)
        if (paper == "a4") {
            wp <- 8
            hp <- 14 - 0.5
        }
        if (paper == "legal") {
            wp <- 8.27 - 0.5
            hp <- 11.69 - 0.5
        }
        if (paper == "executive") {
            wp <- 7.25 - 0.5
            hp <- 10.5 - 0.5
        }
        if (is.null(hz))
            hz <- ps.options()$horizontal
        if (w > wp && w < hp && h < wp) {
            horizontal <- TRUE
        }
        else if (h > wp && h < hp && w < wp) {
            horizontal <- FALSE
        }
        else {
            h0 <- ifelse(hz, wp, hp)
            if (h > h0) {
                w <- w * h0/h
                h <- h0
            }
            w0 <- ifelse(hz, hp, wp)
            if (w > w0) {
                h <- h * w0/w
                w <- w0
            }
        }
        if (is.null(oc$pointsize)) {
            pt <- ps.options()$pointsize
            oc$pointsize <- pt * w/din[1]
        }
    }
    if (is.null(oc$width))
        oc$width <- w
    if (is.null(oc$height))
        oc$height <- h
    dev.off(eval.parent(oc))
    dev.set(current.device)
} 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 17 21:28:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Nov 2000 21:28:03 +0000 (GMT)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
In-Reply-To: <200011171946.UAA11423@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011172127100.16709-100000@auk.stats>

On Fri, 17 Nov 2000 frost@pocketmail.com wrote:

> Full_Name: Keith L. Frost
> Version: 1.1.1
> OS: Linux Mandrake 7.1
> Submission from: (NULL) (199.182.77.3)
> 
> 
> x <- 1:256;
> dim(x) <- c(16,16);
> image(x,col=gray(0:255/255));
> dev.print();
> 
> Sometimes errored out with a complaint about hp not defined.  I looked at the 
> source code for dev.print, and found that in 3--4 places, variable names for 
> paper width and height were mistakenly named wp and wh, instead of wp and hp.
> Changing references to wh to references to hp fixed the problem.
> Here is the new version of dev.print:

Already fixed (and more) for 1.2.0 in the development version.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Nov 18 09:39:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 18 Nov 2000 10:39:00 +0100
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
References: <14866.25345.561674.760076@mithrandir.hornik.net>
 <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14870.20020.229105.127267@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> On Wed, 15 Nov 2000, Kurt Hornik wrote:

>> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
>> configure script which tries to find headers and libraries required by
>> the package.  I was wondering whether we could/should standardize how
>> this is done.

> IMO the main problem is that header files and libraries are not in
> /usr/include or /usr/lib but, for example, for mysql in
> /usr/local/mysql/{include,lib} by default. A package should build
> without interaction if headers and libs are in their default place.

Your mileage may vary on what `default' places are.  Basically, there
are two philosophies.  The more traditional one would be to have a
package/type layout, as you indicate above.  The modern style, used and
recommended e.g. in the GNU, Debian, and TeX/MF standards, is to have
type/package or type instead.

E.g., when I install mysql on Debian, I get the libraries in /usr/lib
and the headers in /usr/include/mysql.

>> 
>> In what follows, suppose package FOO needs functionality BAR.
>> 
>> * One approach would be via command-line arguments to configure.  There
>> seems to be no standard for this.  GNOME uses
>> 
>> --with-FOO-prefix
>> --with-FOO-exec-prefix
>> 
>> in several of its components.  However, this, assumes that the GNU
>> standards are followed in the sense that headers go into
>> 
>> FOO-prefix/include
>> 
>> and libs go into
>> 
>> FOO-exec-prefix/lib
>> 
>> which might not necessarily be the case.
>> 
>> Alternatively, we could have
>> 
>> --with-FOO-libraries
>> --with-FOO-libs
>> 
>> and
>> 
>> --with-FOO-includes
>> --with-FOO-headers
>> 
>> (one of each only, of course).

> Can one define default values here?

Yes, of course.

>> 
>> * The other possibility would be via environment variables, such as
>> CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>> package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
>> 
>> I think the simplest solution would be via CPPFLAGS and LIBS because it
>> is not package-specific.  So installation would happen via
>> 
>> CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

> Maybe it is possible to check if CPPFLAGS is empty (replace it with a
> default value) or not (try to build the package and give an error
> message if it failed, pointing to the appropriate environment
> variable)?

That'w what I had in mind.

The above should be

* much nicer to use than doing something like

	R CMD INSTALL \
	  --configure-args="--with-foo-libs=/some/path ..." \
	  /path/to/pkg.tar.gz

* would be consistent with what is used to configure the R base system

* and would be uniform across packages.

On the other hand, it is a bit dangerous .. hmm, as we actually have
PKG_CPPFLAGS and PKG_LIBS, maybe we should use these variables instead?

Will think some more about this.

>> 
>> (did not check if this works now).
>> 
>> Now I did not check all packages, so is there something I may be
>> overlooking?
>> 
>> (Once we agree on a standard, I would like to document it in R-exts.)
>> 
>> -k

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 15:07:29 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 15:07:29 GMT
Subject: [Rd] Windres problem resolved
Message-ID: <3a169abb.5459260@smtp1.sympatico.ca>

I reported the other day that the utility "windres" crashed in Windows
ME.  I've determined that the problem is an incompatibility with the
Norton Anti-virus software that was installed on my machine.  With
that package disabled, windres works fine.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Nov 18 21:01:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Nov 2000 15:01:02 -0600
Subject: [Rd] PostgreSQL book
Message-ID: <6rem09q9kh.fsf@franz.stat.wisc.edu>

Bruce Momjian has just published a book on PostgreSQL that should be
available from bookstores in the next month or so.  It can be
downloaded as a PDF file now from
              http://www.postgresql.org/docs/awbook.html

I found the book to be well written and informative.  I recommend it.

Especially if you have to deal with large data sets, the combination
of relational databases and R is very useful.  Currently I am working
on a project where we have information on 3.5 million subjects
amounting to a total of 10.5 million records.  Processing these in
MySQL and PostgreSQL is much, much more efficient than what my
colleagues were doing with SAS and SPSS.  We took a sample of 180,000
subjects (550,000 records) and fit multilevel (linear mixed-effects)
models using lme in R after accessing the data from the relational
database.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 23:15:26 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 23:15:26 GMT
Subject: [Rd] Getting debug information in DLL?
Message-ID: <3a1707ff.2857190@smtp1.sympatico.ca>

The rw-faq says that 

  make DEBUG=T pkg-Rstreams

should make a copy of the Rstreams.dll with debugging information
included.  However, the DLL that gets produced is byte-by-byte
identical to the one without debug information, and gdb doesn't appear
to be able to see any symbols or source code.

Any suggestions?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Sun Nov 19 07:57:14 2000
From: tdye@lava.net (tdye@lava.net)
Date: Sun, 19 Nov 2000 08:57:14 +0100 (MET)
Subject: [Rd] Bug in stars function (PR#738)
Message-ID: <200011190757.IAA15668@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi all,

I've discovered and (hopefully) fixed a bug in the stars function I wrote
some time ago.  A corrected function is attached.

Please let me know if you have any questions or comments.

Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
Content-Description: bug fix
Content-Disposition: attachment; filename="new-stars.r"

ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM
LCBrZXkubG9jID0gTlVMTCwga2V5LmxhYmVscyA9IE5VTEwsIGRyYXcuc2Vn
bWVudHMgPSBGQUxTRSwgDQogICAgICAgICAgICBkcmF3LmF4ZXMgPSBGQUxT
RSwgLi4uKSANCnsNCiAgaWYgKGlzLmRhdGEuZnJhbWUoeCkpIA0KICAgIHgg
PC0gYXMubWF0cml4KHgpDQogIGVsc2UgaWYgKCFpcy5tYXRyaXgoeCkpIA0K
ICAgIHN0b3AoInggbXVzdCBiZSBhIG1hdHJpeCBvciBhIGRhdGEgZnJhbWUi
KQ0KICBpZiAoIWlzLm51bWVyaWMoeCkpIA0KICAgIHN0b3AoImRhdGEgaW4g
eCBtdXN0IGJlIG51bWVyaWMiKQ0KICBuLmxvYyA8LSBucm93KHgpDQogIG4u
c2VnIDwtIG5jb2woeCkNCiAgZGVnIDwtIHBpLzE4MA0KICBzZWcuY29sb3Jz
IDwtIGlmICghaXMubnVsbChjb2xvcnMpKSANCiAgICBjb2xvcnMNCiAgZWxz
ZSAxOm4uc2VnDQogIGlmIChpcy5udWxsKGxvY2F0aW9ucykpIHsNCiAgICBt
YXQuZGltIDwtIGNlaWxpbmcoc3FydChuLmxvYykpDQogICAgdGVtcC5sb2Mu
MSA8LSByZXAoeCA9IDIuMSAqIDE6bWF0LmRpbSwgdGltZXMgPSBtYXQuZGlt
LCANCiAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBuLmxvYykNCiAg
ICB0ZW1wLmxvYy4yIDwtIHJlcCh4ID0gMi4xICogbWF0LmRpbToxLCByZXAo
eCA9IG1hdC5kaW0sIA0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZXMg
PSBtYXQuZGltKSwgbGVuZ3RoID0gbi5sb2MpDQogICAgbG9jIDwtIG1hdHJp
eChkYXRhID0gYyh0ZW1wLmxvYy4xLCB0ZW1wLmxvYy4yKSwgbmNvbCA9IDIp
DQogIH0NCiAgZWxzZSB7DQogICAgaWYgKCFpcy5tYXRyaXgobG9jYXRpb25z
KSB8fCBuY29sKGxvY2F0aW9ucykgIT0gMikgDQogICAgICBzdG9wKCJsb2Nh
dGlvbnMgbXVzdCBiZSBhIDItY29sdW1uIG1hdHJpeC4iKQ0KICAgIGxvYyA8
LSAuQWxpYXMobG9jYXRpb25zKQ0KICB9DQogIGlmIChuLmxvYyAhPSBucm93
KGxvYykpIA0KICAgIHN0b3AoIm51bWJlciBvZiByb3dzIG9mIGxvY2F0aW9u
cyBhbmQgeCBtdXN0IGJlIGVxdWFsLiIpDQogIGFuZ2xlcyA8LSBpZiAoZnVs
bCkgDQogICAgc2VxKDAsIDIgKiBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVst
KG4uc2VnICsgMSldDQogIGVsc2UgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAg
IHNlcSgwLCBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVstKG4uc2VnICsgMSld
DQogIGVsc2Ugc2VxKDAsIHBpLCBsZW5ndGggPSBuLnNlZykNCiAgaWYgKGxl
bmd0aChhbmdsZXMpICE9IG4uc2VnKSANCiAgICBzdG9wKCJsZW5ndGgoYW5n
bGVzKSBtdXN0IGJlIHRoZSBzYW1lIGFzIG5jb2woeCkiKQ0KICB4W2lzLm5h
KHgpXSA8LSAwDQogIGlmIChzY2FsZSkgDQogICAgeCA8LSBzd2VlcCh4LCAy
LCBhcHBseSh4LCAyLCBtYXgpLCBGVU4gPSAiLyIpDQojIENvbHVtbnMgb2Yg
MHMgd2lsbCBwdXQgTkFzIGluIHgsIG5leHQgbGluZSBnZXRzIHJpZCBvZiB0
aGVtDQogIHhbaXMubmEoeCldIDwtIDANCiAgeCA8LSB4ICogbGVuDQogIHRl
bXAueGxpbSA8LSBpZiAoaXMubnVsbCh4bGltaXQpKSANCiAgICByYW5nZShs
b2NbLCAxXSArIG1heCh4KSwgbG9jWywgMV0gLSBtYXgoeCkpDQogIGVsc2Ug
eGxpbWl0DQogIHRlbXAueWxpbSA8LSBpZiAoaXMubnVsbCh5bGltaXQpKSAN
CiAgICByYW5nZShsb2NbLCAyXSArIG1heCh4KSwgbG9jWywgMl0gLSBtYXgo
eCkpDQogIGVsc2UgeWxpbWl0DQogIG9wYXIgPC0gcGFyKG5vLnJlYWRvbmx5
ID0gVFJVRSkNCiAgb24uZXhpdChwYXIob3BhcikpDQogIHBsb3QoMCwgdHlw
ZSA9ICJuIiwgLi4uLCB4bGltID0gdGVtcC54bGltLCB5bGltID0gdGVtcC55
bGltLCANCiAgICAgICB4bGFiID0gIiIsIHlsYWIgPSAiIiwgYXNwID0gMSwg
YXhlcyA9IGRyYXcuYXhlcykNCiAgaWYgKGRyYXcuc2VnbWVudHMpIHsNCiAg
ICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAgcG9seS54IDwtIE5BDQog
ICAgICBwb2x5LnkgPC0gTkENCiAgICAgIHN0YXJ0LnguY29vcmQgPC0geFtp
LCBdICogY29zKGFuZ2xlcykgKyBsb2NbaSwgMV0NCiAgICAgIHN0YXJ0Lnku
Y29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xlcykgKyBsb2NbaSwgMl0NCiAg
ICAgIGZvciAoaiBpbiAxOm4uc2VnKSB7DQogICAgICAgIHBvbHkueCA8LSBj
KHBvbHkueCwgbG9jW2ksIDFdLCBzdGFydC54LmNvb3JkW2pdKQ0KICAgICAg
ICBwb2x5LnkgPC0gYyhwb2x5LnksIGxvY1tpLCAyXSwgc3RhcnQueS5jb29y
ZFtqXSkNCiAgICAgICAgbmV4dC5hbmdsZSA8LSBpZiAoaiA8IG4uc2VnKSAN
CiAgICAgICAgICBhbmdsZXNbaiArIDFdDQogICAgICAgIGVsc2UgKGlmIChm
dWxsKSANCiAgICAgICAgICAgICAgMzYwDQogICAgICAgIGVsc2UgMTgwKSAq
IGRlZw0KICAgICAgICBrIDwtIHNlcShmcm9tID0gYW5nbGVzW2pdLCB0byA9
IG5leHQuYW5nbGUsIGJ5ID0gZGVnKQ0KICAgICAgICBwb2x5LnggPC0gYyhw
b2x5LngsIHhbaSwgal0gKiBjb3MoaykgKyBsb2NbaSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXSwg
TkEpDQogICAgICAgIHBvbHkueSA8LSBjKHBvbHkueSwgeFtpLCBqXSAqIHNp
bihrKSArIGxvY1tpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDJdLCBOQSkNCiAgICAgIH0NCiAgICAg
IHBhcihsd2QgPSAwLjI1KQ0KICAgICAgcG9seWdvbihwb2x5LngsIHBvbHku
eSwgY29sID0gc2VnLmNvbG9ycykNCiAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgaWYgKCFpcy5udWxsKGxhYmVscykpIA0KICAgICAgICB0ZXh0KGxvY1tp
LCAxXSwgbG9jW2ksIDJdIC0gaWYgKGZ1bGwpIA0KICAgICAgICAgICAgIG1h
eCh4KQ0KICAgICAgICBlbHNlIDAuMSAqIG1heCh4KSwgbGFiZWxzW2ldLCBj
ZXggPSAwLjUsIGFkaiA9IGMoMC41LCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEpKQ0KICAgIH0NCiAg
fQ0KICBlbHNlIHsNCiAgICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAg
dGVtcC54LmNvb3JkIDwtIHhbaSwgXSAqIGNvcyhhbmdsZXMpICsgbG9jW2ks
IDFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xl
cykgKyBsb2NbaSwgMl0NCiAgICAgIGlmIChyYWRpdXMpIHsNCiAgICAgICAg
cGFyKGx3ZCA9IDAuMjUpDQogICAgICAgIHNlZ21lbnRzKHJlcChsb2NbaSwg
MV0sIG4uc2VnKSwgcmVwKGxvY1tpLCAyXSwgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2VnKSwgdGVtcC54LmNv
b3JkLCB0ZW1wLnkuY29vcmQpDQogICAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgfQ0KICAgICAgbGluZXMoYyh0ZW1wLnguY29vcmQsIHRlbXAueC5jb29y
ZFsxXSksIGModGVtcC55LmNvb3JkLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAueS5jb29yZFsxXSks
IGx3ZCA9IDAuMjUpDQogICAgICBpZiAoIWlzLm51bGwobGFiZWxzKSkgDQog
ICAgICAgIHRleHQobG9jW2ksIDFdLCBsb2NbaSwgMl0gLSBpZiAoZnVsbCkg
DQogICAgICAgICAgICAgbWF4KHgpDQogICAgICAgIGVsc2UgMC4xICogbWF4
KHgpLCBsYWJlbHNbaV0sIGNleCA9IDAuNSwgYWRqID0gYygwLjUsIA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgMSkpDQogICAgfQ0KICB9DQogIGlmICghaXMubnVsbChrZXkubG9jKSkg
ew0KICAgIGlmIChkcmF3LnNlZ21lbnRzKSB7DQogICAgICBrZXkueCA8LSBO
QQ0KICAgICAga2V5LnkgPC0gTkENCiAgICAgIGtleS54LmNvb3JkIDwtIGNv
cyhhbmdsZXMpICogbGVuICsga2V5LmxvY1sxXQ0KICAgICAga2V5LnkuY29v
cmQgPC0gc2luKGFuZ2xlcykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBm
b3IgKGogaW4gMTpuLnNlZykgew0KICAgICAgICBrZXkueCA8LSBjKGtleS54
LCBrZXkubG9jWzFdLCBrZXkueC5jb29yZFtqXSkNCiAgICAgICAga2V5Lnkg
PC0gYyhrZXkueSwga2V5LmxvY1syXSwga2V5LnkuY29vcmRbal0pDQogICAg
ICAgIGsgPC0gYW5nbGVzW2pdICsgZGVnDQogICAgICAgIG5leHQuYW5nbGUg
PC0gaWYgKGogPCBuLnNlZykgDQogICAgICAgICAgYW5nbGVzW2ogKyAxXQ0K
ICAgICAgICBlbHNlIChpZiAoZnVsbCkgDQogICAgICAgICAgICAgIDM2MA0K
ICAgICAgICBlbHNlIDE4MCkgKiBkZWcNCiAgICAgICAgd2hpbGUgKGsgPCBu
ZXh0LmFuZ2xlKSB7DQogICAgICAgICAga2V5LnggPC0gYyhrZXkueCwgbGVu
ICogY29zKGspICsga2V5LmxvY1sxXSkNCiAgICAgICAgICBrZXkueSA8LSBj
KGtleS55LCBsZW4gKiBzaW4oaykgKyBrZXkubG9jWzJdKQ0KICAgICAgICAg
IGsgPC0gayArIGRlZw0KICAgICAgICB9DQogICAgICAgIGtleS54IDwtIGMo
a2V5LngsIGxlbiAqIGNvcyhuZXh0LmFuZ2xlKSArIGtleS5sb2NbMV0sIA0K
ICAgICAgICAgICAgICAgICAgIE5BKQ0KICAgICAgICBrZXkueSA8LSBjKGtl
eS55LCBsZW4gKiBzaW4obmV4dC5hbmdsZSkgKyBrZXkubG9jWzJdLCANCiAg
ICAgICAgICAgICAgICAgICBOQSkNCiAgICAgIH0NCiAgICAgIHBhcihsd2Qg
PSAwLjI1KQ0KICAgICAgcG9seWdvbihrZXkueCwga2V5LnksIGNvbCA9IHNl
Zy5jb2xvcnMpDQogICAgICBwYXIobHdkID0gMSkNCiAgICB9DQogICAgZWxz
ZSB7DQogICAgICB0ZW1wLnguY29vcmQgPC0gY29zKGFuZ2xlcykgKiBsZW4g
KyBrZXkubG9jWzFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0gc2luKGFuZ2xl
cykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBwYXIobHdkID0gMC4yNSkN
CiAgICAgIGlmIChyYWRpdXMpIA0KICAgICAgICBzZWdtZW50cyhyZXAoa2V5
LmxvY1sxXSwgbi5zZWcpLCByZXAoa2V5LmxvY1syXSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNlZyksIHRl
bXAueC5jb29yZCwgdGVtcC55LmNvb3JkKQ0KICAgICAgbGluZXMoYyh0ZW1w
LnguY29vcmQsIHRlbXAueC5jb29yZFsxXSksIGModGVtcC55LmNvb3JkLCAN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHRlbXAueS5jb29yZFsxXSkpDQogICAgICBwYXIobHdkID0gMSkNCiAg
ICB9DQogICAgaWYgKGlzLm51bGwoa2V5LmxhYmVscykpIA0KICAgICAga2V5
LmxhYmVscyA8LSBkaW1uYW1lcyh4KVtbMl1dDQogICAgbGFiLmFuZ2wgPC0g
YW5nbGVzICsgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAgICAgKGFuZ2xlc1sy
XSAtIGFuZ2xlc1sxXSkvMg0KICAgIGVsc2UgMA0KICAgIGxhYmVsLnguY29v
cmQgPC0gY29zKGxhYi5hbmdsKSAqIGxlbiAqIDEuMSArIGtleS5sb2NbMV0N
CiAgICBsYWJlbC55LmNvb3JkIDwtIHNpbihsYWIuYW5nbCkgKiBsZW4gKiAx
LjEgKyBrZXkubG9jWzJdDQogICAgZm9yIChrIGluIDE6bi5zZWcpIHsNCiAg
ICAgIHRleHQuYWRqIDwtIGlmIChsYWIuYW5nbFtrXSA8ICg5MCAqIGRlZykg
fHwgbGFiLmFuZ2xba10gPiANCiAgICAgICAgICAgICAgICAgICAgICAoMjcw
ICogZGVnKSkgDQogICAgICAgIDANCiAgICAgIGVsc2UgaWYgKGxhYi5hbmds
W2tdID4gKDkwICogZGVnKSAmJiBsYWIuYW5nbFtrXSA8IA0KICAgICAgICAg
ICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICAxDQogICAgICBlbHNlIDAu
NQ0KICAgICAgaWYgKGxhYi5hbmdsW2tdIDw9ICg5MCAqIGRlZykpIA0KICAg
ICAgICB0ZXh0LmFkaiA8LSBjKHRleHQuYWRqLCAwLjUgKiAoMSAtIGxhYi5h
bmdsW2tdLyg5MCAqIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkZWcpKSkNCiAgICAgIGVsc2Ug
aWYgKGxhYi5hbmdsW2tdID4gKDkwICogZGVnKSAmIGxhYi5hbmdsW2tdIDw9
IA0KICAgICAgICAgICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICB0ZXh0
LmFkaiA8LSBjKHRleHQuYWRqLCAobGFiLmFuZ2xba10gLSAoOTAgKiANCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlZykpLygxODAgKiBkZWcpKQ0KICAgICAgZWxzZSBpZiAobGFiLmFuZ2xb
a10gPiAoMjcwICogZGVnKSkgDQogICAgICAgIHRleHQuYWRqIDwtIGModGV4
dC5hZGosIDEgLSAoMC41ICogKGxhYi5hbmdsW2tdIC0gDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyNzAgKiBkZWcp
KS8oOTAgKiBkZWcpKSkNCiAgICAgIHRleHQuZGVmYXVsdCh4ID0gbGFiZWwu
eC5jb29yZFtrXSwgeSA9IGxhYmVsLnkuY29vcmRba10sIA0KICAgICAgICAg
ICAgICAgICAgIGxhYmVscyA9IGtleS5sYWJlbHNba10sIGNleCA9IDAuNSwg
YWRqID0gdGV4dC5hZGopDQogICAgfQ0KICB9DQogIGludmlzaWJsZSgpDQp9
DQo=
--1465796871-645734172-974620647=:18687--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 19 10:59:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Nov 2000 11:59:07 +0100
Subject: [Rd] Bug in stars function (PR#738)
In-Reply-To: tdye@lava.net's message of "Sun, 19 Nov 2000 08:57:14 +0100 (MET)"
References: <200011190757.IAA15668@pubhealth.ku.dk>
Message-ID: <x2n1ew1b44.fsf@blueberry.kubism.ku.dk>


Please don't use MIME attachments when reporting bugs. The resending
mechanism renders them undecodable when seen on r-devel. 

tdye@lava.net writes:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII
> 
> Hi all,
> 
> I've discovered and (hopefully) fixed a bug in the stars function I wrote
> some time ago.  A corrected function is attached.
> 
> Please let me know if you have any questions or comments.
> 
> Tom
> 
> Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
> Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
> Work: International Archaeological Research Institute, Inc., 2081 Young St.,
>       Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
> Content-Description: bug fix
> Content-Disposition: attachment; filename="new-stars.r"
> 
> ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
> cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
> ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
> ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 19 21:47:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 19 Nov 2000 21:47:27 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18497a.27609952@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Nov 20 01:37:10 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 20 Nov 2000 01:37:10 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18803b.4789690@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 07:48:03 2000
From: tdye@lava.net (tdye@lava.net)
Date: Mon, 20 Nov 2000 08:48:03 +0100 (MET)
Subject: [Rd] Bug in stars.R (PR#739)
Message-ID: <200011200748.IAA19481@pubhealth.ku.dk>

Hi all,

Please let me know if this isn't the correct place to report bugs in
contributed code.  Otherwise, the following code contains one additional
line and a short comment above it.  The extra line of code catches the
unusual situation where a data column contains all 0 values.

The corrected code is below the signature.

Thanks for your help.
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

function (x, full = TRUE, scale = TRUE, radius = TRUE, labels = dimnames(x)[[1]], 
            locations = NULL, xlimit = NULL, ylimit = NULL, len = 1, 
            colors = NULL, key.loc = NULL, key.labels = NULL, draw.segments = FALSE, 
            draw.axes = FALSE, ...) 
{
  if (is.data.frame(x)) 
    x <- as.matrix(x)
  else if (!is.matrix(x)) 
    stop("x must be a matrix or a data frame")
  if (!is.numeric(x)) 
    stop("data in x must be numeric")
  n.loc <- nrow(x)
  n.seg <- ncol(x)
  deg <- pi/180
  seg.colors <- if (!is.null(colors)) 
    colors
  else 1:n.seg
  if (is.null(locations)) {
    mat.dim <- ceiling(sqrt(n.loc))
    temp.loc.1 <- rep(x = 2.1 * 1:mat.dim, times = mat.dim, 
                      length = n.loc)
    temp.loc.2 <- rep(x = 2.1 * mat.dim:1, rep(x = mat.dim, 
                        times = mat.dim), length = n.loc)
    loc <- matrix(data = c(temp.loc.1, temp.loc.2), ncol = 2)
  }
  else {
    if (!is.matrix(locations) || ncol(locations) != 2) 
      stop("locations must be a 2-column matrix.")
    loc <- .Alias(locations)
  }
  if (n.loc != nrow(loc)) 
    stop("number of rows of locations and x must be equal.")
  angles <- if (full) 
    seq(0, 2 * pi, length = n.seg + 1)[-(n.seg + 1)]
  else if (draw.segments) 
    seq(0, pi, length = n.seg + 1)[-(n.seg + 1)]
  else seq(0, pi, length = n.seg)
  if (length(angles) != n.seg) 
    stop("length(angles) must be the same as ncol(x)")
  x[is.na(x)] <- 0
  if (scale) 
    x <- sweep(x, 2, apply(x, 2, max), FUN = "/")
# Columns of 0s will put NAs in x, next line gets rid of them
  x[is.na(x)] <- 0
  x <- x * len
  temp.xlim <- if (is.null(xlimit)) 
    range(loc[, 1] + max(x), loc[, 1] - max(x))
  else xlimit
  temp.ylim <- if (is.null(ylimit)) 
    range(loc[, 2] + max(x), loc[, 2] - max(x))
  else ylimit
  opar <- par(no.readonly = TRUE)
  on.exit(par(opar))
  plot(0, type = "n", ..., xlim = temp.xlim, ylim = temp.ylim, 
       xlab = "", ylab = "", asp = 1, axes = draw.axes)
  if (draw.segments) {
    for (i in 1:n.loc) {
      poly.x <- NA
      poly.y <- NA
      start.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      start.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      for (j in 1:n.seg) {
        poly.x <- c(poly.x, loc[i, 1], start.x.coord[j])
        poly.y <- c(poly.y, loc[i, 2], start.y.coord[j])
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        k <- seq(from = angles[j], to = next.angle, by = deg)
        poly.x <- c(poly.x, x[i, j] * cos(k) + loc[i, 
                                                   1], NA)
        poly.y <- c(poly.y, x[i, j] * sin(k) + loc[i, 
                                                   2], NA)
      }
      par(lwd = 0.25)
      polygon(poly.x, poly.y, col = seg.colors)
      par(lwd = 1)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  else {
    for (i in 1:n.loc) {
      temp.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      temp.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      if (radius) {
        par(lwd = 0.25)
        segments(rep(loc[i, 1], n.seg), rep(loc[i, 2], 
                                            n.seg), temp.x.coord, temp.y.coord)
        par(lwd = 1)
      }
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]), lwd = 0.25)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  if (!is.null(key.loc)) {
    if (draw.segments) {
      key.x <- NA
      key.y <- NA
      key.x.coord <- cos(angles) * len + key.loc[1]
      key.y.coord <- sin(angles) * len + key.loc[2]
      for (j in 1:n.seg) {
        key.x <- c(key.x, key.loc[1], key.x.coord[j])
        key.y <- c(key.y, key.loc[2], key.y.coord[j])
        k <- angles[j] + deg
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        while (k < next.angle) {
          key.x <- c(key.x, len * cos(k) + key.loc[1])
          key.y <- c(key.y, len * sin(k) + key.loc[2])
          k <- k + deg
        }
        key.x <- c(key.x, len * cos(next.angle) + key.loc[1], 
                   NA)
        key.y <- c(key.y, len * sin(next.angle) + key.loc[2], 
                   NA)
      }
      par(lwd = 0.25)
      polygon(key.x, key.y, col = seg.colors)
      par(lwd = 1)
    }
    else {
      temp.x.coord <- cos(angles) * len + key.loc[1]
      temp.y.coord <- sin(angles) * len + key.loc[2]
      par(lwd = 0.25)
      if (radius) 
        segments(rep(key.loc[1], n.seg), rep(key.loc[2], 
                                             n.seg), temp.x.coord, temp.y.coord)
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]))
      par(lwd = 1)
    }
    if (is.null(key.labels)) 
      key.labels <- dimnames(x)[[2]]
    lab.angl <- angles + if (draw.segments) 
      (angles[2] - angles[1])/2
    else 0
    label.x.coord <- cos(lab.angl) * len * 1.1 + key.loc[1]
    label.y.coord <- sin(lab.angl) * len * 1.1 + key.loc[2]
    for (k in 1:n.seg) {
      text.adj <- if (lab.angl[k] < (90 * deg) || lab.angl[k] > 
                      (270 * deg)) 
        0
      else if (lab.angl[k] > (90 * deg) && lab.angl[k] < 
               (270 * deg)) 
        1
      else 0.5
      if (lab.angl[k] <= (90 * deg)) 
        text.adj <- c(text.adj, 0.5 * (1 - lab.angl[k]/(90 * 
                                                        deg)))
      else if (lab.angl[k] > (90 * deg) & lab.angl[k] <= 
               (270 * deg)) 
        text.adj <- c(text.adj, (lab.angl[k] - (90 * 
                                                deg))/(180 * deg))
      else if (lab.angl[k] > (270 * deg)) 
        text.adj <- c(text.adj, 1 - (0.5 * (lab.angl[k] - 
                                            (270 * deg))/(90 * deg)))
      text.default(x = label.x.coord[k], y = label.y.coord[k], 
                   labels = key.labels[k], cex = 0.5, adj = text.adj)
    }
  }
  invisible()
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 20 16:09:30 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Nov 2000 17:09:30 +0100
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011200748.IAA19481@pubhealth.ku.dk>
References: <200011200748.IAA19481@pubhealth.ku.dk>
Message-ID: <200011201609.RAA06263@lynne.ethz.ch>

>>>>> "tdye" == tdye  <tdye@lava.net> writes:

    tdye> Hi all, Please let me know if this isn't the correct place to
    tdye> report bugs in contributed code.  Otherwise, the following code
    tdye> contains one additional line and a short comment above it.  The
    tdye> extra line of code catches the unusual situation where a data
    tdye> column contains all 0 values.

    tdye> The corrected code is below the signature.

    tdye> Thanks for your help.  Tom

    tdye> Thomas S. Dye, Ph.D.  http://www.tsdye.com Home: 812A 19th
    tdye> Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
    tdye> Work: International Archaeological Research Institute, Inc., 2081
    tdye> Young St., Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax
    tdye> 943-0716.

Dear Thomas,
thank you for the bug report and fix.
Since you *are* the original contributor of this R function,
I took the time and carefully looked at the (mass of) code you sent...

3 remarks:
  - you fixed the "installed code", not the source code,
	which *is*  <R_TOPDIR>/src/library/base/R/stars.R
    i.e. your version had dropped all the comments

  - it would have been much easier had you only sent the result of
    "diff -c  oldfile newfile"

  - After looking at your change, it seems clear that it is only needed
    inside the  if(scale) { .. } clause.

This all amounts to

diff -u -b -B -w -r1.3 stars.R
--- src/library/base/R/stars.R	1999/11/01 10:02:17	1.3
+++ src/library/base/R/stars.R	2000/11/20 14:36:20
@@ -54,8 +53,11 @@
     ## Missing values are treated as 0
     x[is.na(x)] <- 0
 
-    if (scale)
+    if (scale) {
 	x <- sweep(x,2,apply(x,2,max),FUN="/")
+	## Columns of 0s will put NAs in x, next line gets rid of them
+	x[is.na(x)] <- 0
+    }
 
     x <- x * len
 
-----

which will be in R 1.2.

Thank you again for stars()!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 18:22:31 2000
From: tdye@lava.net (Tom Dye)
Date: Mon, 20 Nov 2000 08:22:31 -1000 (HST)
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011201609.RAA06263@lynne.ethz.ch>
Message-ID: <Pine.BSI.4.10.10011200819580.29349-100000@malasada.lava.net>

Hi Martin,

Thank you for the instructions how to send bug fixes.  I spent some time
searching for this information iin the R documentation but couldn't find
it.  

Thanks for your help with the stars() function.

All the best,
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011210615.HAA24700@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 739 *
Subject: Bug in stars.R
From: Tom Dye <tdye@lava.net>
Date: Sun, 19 Nov 2000 21:48:16 -1000 (HST)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 735 *
Subject: Online marketing success increase sales
From: namesmktingcd@virgin.net
Date: Mon, 13 Nov 00 22:26:39 EST
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 738 *
Subject: Bug in stars function
From: Tom Dye <tdye@lava.net>
Date: Sat, 18 Nov 2000 21:57:27 -1000 (HST)
* PR# 737 *
Subject: Bug in R 1.1.1 dev.print() with fix
From: frost@pocketmail.com
Date: Fri, 17 Nov 2000 20:45:58 +0100 (MET)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Nov 21 08:58:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 21 Nov 2000 09:58:26 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011210858.JAA02617@pubhealth.ku.dk>

A minor point, but the specification of the contour function is
lagging behind the ?contour file:

> args(contour)

function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), add = FALSE, ...) 

> ?contour

     contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
             z,
             nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
             xlim = range(x, finite = TRUE),
             ylim = range(y, finite = TRUE),
             zlim = range(z, finite = TRUE),
             labcex = 0.6, drawlabels = TRUE, method = "flattest", 
             vfont = c("sans serif", "plain"),
             col = par("fg"), lty = par("lty"), lwd = par("lwd"),
             add = FALSE, ...)

In particular the function default arguments should apparently be
"labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
of course that the help file is more up-to-date than the function
definition.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Nov 21 14:01:59 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 21 Nov 2000 14:01:59 GMT
Subject: [Rd] How do you construct a function from a list?
Message-ID: <3a1a7d56.44981237@smtp1.sympatico.ca>

I'm trying to get a data.restore function to work on functions.  One
thing I can't figure out:  how do you construct a function from it's
component parts?

For example, I can construct a for loop as

forloop <-
as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

which results in 

 for (i in 1) junk()

But how do I put that in a function?  For example, I'd like the
function

  function()  for (i in 1) junk()

but  as.function(list(forloop)) results in

 function () 
 list(for (i in 1) junk())

which returns the for loop in a list, it doesn't execute it.  How do I
construct the function?

(This might be a bug in as.function, because 

  as.function(c(alist(a=,b=2),forloop))

returns the expected function

 function (a, b = 2) 
 for (i in 1) junk()

It's just that I can't seem to find a way to do it when there are no
arguments.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 21 14:51:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Nov 2000 15:51:08 +0100
Subject: [Rd] Re: precision, incorrect(?) tapply() NA's
In-Reply-To: <200011201516.KAA26803@jessie.research.bell-labs.com>
References: <200011201516.KAA26803@jessie.research.bell-labs.com>
Message-ID: <14874.35804.101468.347291@gargle.gargle.HOWL>


>>>>> "DJ" == David James <dj@research.bell-labs.com> writes:

{diverted from R-help to R-devel }

    DJ> Summary:

    DJ> I ran into some unexpected behavior in approx() and tapply() that
    DJ> introduced NA's in "clean" data due to (?) numerical accuracy/round
    DJ> off.  The culprit seems to be in match() that coerces it's
    DJ> arguments to character, loosing precision in the process.

yes, definitely!
match() shouldn't do the character coercion!  
==> This is a bug; I'll send a report

	...........

    DJ> Thus match() seems to be introducing the round off as it coerces its 
    DJ> arguments to character:

    >> match
    DJ> function (x, table, nomatch = NA) 
    DJ> .Internal(match(as.character(x), as.character(table), nomatch))

	.......

If you look at R's source { do_match() in src/main/unique.c },
it becomes clear that the .Internal(match(.))
does not rely at all on character inputs,
and

    match <- function (x, table, nomatch = NA) 
	   .Internal(match(x, table, nomatch))

*seems* to work alright.
But, alas, it only *seems*, since the above change
breaks 
       "make check"

more concretely,
     example(relevel)
leads to an error {when the above changed  match() function is used}
which can be diagnosed to  factor(.,.) not working anymore with the changed 
match() function.  I've seen how to fix factor(.,.) as well,
but this is coming involved.

I think that the above change is *really* what we should use,
but we the consequences must be taken care as well.
Expect a fix for R 1.2,
and thank you very much for your useful report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 21 15:15:19 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Nov 2000 16:15:19 +0100 (MET)
Subject: [Rd] match() is not correct for "close numerics" (PR#741)
Message-ID: <200011211515.QAA10625@pubhealth.ku.dk>

(thank to  David James <dj@research.bell-labs.com> )

This is for R versions <= 1.1.1  and also R-devel as of yesterday..

  > pi0 <- pi + 2*.Machine$double.eps
  > pi != pi0
  [1] TRUE

  > ## but
  > match(c(1,pi,pi0), pi)
  [1] NA  1  1

The explanation is

  > match
  function(x, table, nomatch=NA)
      .Internal(match(as.character(x), as.character(table), nomatch))

and using

  > match <- function(x, table, nomatch=NA) .Internal(match(x, table, nomatch))

would solve the above problem
*but* gives new ones: e.g., factor() has to be modified !

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 22 12:08:26 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Nov 2000 13:08:26 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <3a1a7d56.44981237@smtp1.sympatico.ca>
References: <3a1a7d56.44981237@smtp1.sympatico.ca>
Message-ID: <14875.46906.371747.98635@mithrandir.hornik.net>

>>>>> Duncan Murdoch writes:

> I'm trying to get a data.restore function to work on functions.  One
> thing I can't figure out:  how do you construct a function from it's
> component parts?

> For example, I can construct a for loop as

> forloop <-
> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

> which results in 

>  for (i in 1) junk()

> But how do I put that in a function?  For example, I'd like the
> function

>   function()  for (i in 1) junk()

> but  as.function(list(forloop)) results in

>  function () 
>  list(for (i in 1) junk())

> which returns the for loop in a list, it doesn't execute it.  How do I
> construct the function?

> (This might be a bug in as.function, because 

>   as.function(c(alist(a=,b=2),forloop))

> returns the expected function

>  function (a, b = 2) 
>  for (i in 1) junk()

> It's just that I can't seem to find a way to do it when there are no
> arguments.)

Duncan,

I think the easiest approach is to do

	foo <- function() {}
	body(foo) <- forloop

Re the above, I guess Peter would know more about this but is currently
swamped with other work.  I also observe that

R> as.function(alist(forloop))
function () 
list(forloop)
R> as.function(list(forloop))
function () 
list(for (i in 1) junk())

which does not seem right.

-k
	
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 22 12:35:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 2000 13:35:47 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: Kurt Hornik's message of "Wed, 22 Nov 2000 13:08:26 +0100"
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net>
Message-ID: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > (This might be a bug in as.function, because 
> 
> >   as.function(c(alist(a=,b=2),forloop))
> 
> > returns the expected function
....
> Re the above, I guess Peter would know more about this but is currently
> swamped with other work.

He is, but this (do_asfunction in coerce.c) looks wrong:

    if( n == 1 )
        args =  mkCLOSXP(args, arglist, envir);
    else
        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
    UNPROTECT(1);

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Nov 22 12:56:56 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Wed, 22 Nov 2000 13:56:56 +0100 (MET)
Subject: [Rd] How do you construct a function from a list? (PR#743)
Message-ID: <200011221256.NAA20882@pubhealth.ku.dk>

On Wed, 22 Nov 2000 13:08:26 +0100, Kurt Hornik wrote:
.
>>>>> Duncan Murdoch writes:
>> I'm trying to get a data.restore function to work on functions.  One
>> thing I can't figure out:  how do you construct a function from it's
>> component parts?
 ...
>> forloop <-
>> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))
.
>
>I think the easiest approach is to do
>
>	foo <- function() {}
>	body(foo) <- forloop

That one gives me the same as "as.function(list(forloop))", i.e. 

 function () 
 list(for (i in 1) junk())

I'm running this in 1.1.1 on Windows, but I tried a Nov 14 development
snapshot, and got the same results.

I think this is a bug in as.function.default, because of these two
examples:

For a function with arguments, as.function undoes as.list:

 > options(keep.source=F)
 > withargs <- function(x) for (i in 1) junk()
 > withargs
 function (x) 
 for (i in 1) junk()
 > as.function(as.list(withargs))
 function (x) 
 for (i in 1) junk()

For a function with no arguments, it doesn't:
 
 > noargs <- function() for (i in 1) junk()
 > noargs
 function () 
 for (i in 1) junk()
 > as.function(as.list(noargs))
 function () 
 list(for (i in 1) junk())

I looked at the source (do_asfunction in main/coerce.c), but couldn't
understand what was going on well enough to figure out the bug.

Duncan Murdoch


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.90 (build 3000)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Nov 22 14:24:49 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 22 Nov 2000 09:24:49 -0500
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net> <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
Message-ID: <3a1bd676.166453340@fisher.stats.uwo.ca>

On 22 Nov 2000 13:35:47 +0100, Peter Dalgaard  wrote in message
<x2n1esp4kc.fsf@blueberry.kubism.ku.dk>:

>He is, but this (do_asfunction in coerce.c) looks wrong:
>
>    if( n == 1 )
>        args =  mkCLOSXP(args, arglist, envir);
>    else
>        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
>    UNPROTECT(1);

I just posted a bug report about how
"as.function(as.list(somefunction))" doesn't return the function
properly.  Sometimes it does:

 > options(keep.source = F) 
 > noarg _ function() 1
 > noarg
 function () 
 1
 > as.function(as.list(noarg))
 function () 
 1

So it depends on the type of body whether as.function works properly.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Wed Nov 22 20:29:00 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Wed, 22 Nov 2000 21:29:00 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222029.VAA25688@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.1.1
OS: Windows NT
Submission from: (NULL) (63.91.145.254)



Hi,

I have a data frame with 11 observations and 603 variables.

When I call,

    willRaw.fit <- lm( performance ~ ., data=willRaw )

lm() runs without problems, but computes coefficients for
only the first 10 variables.  The remaining variables
get a coefficient of NA.

There are no NA values in the data frame.  performance
is one of the columns of the data frame.  I'd be happy
to email the data file (gzip'd or zip'd).

My apologies if I've done some stupid (yes, I know it's
not wise to fit a model to 603 variables, but I was
just playing around).

Mark

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Wed Nov 22 20:53:43 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 23 Nov 2000 06:53:43 +1000
Subject: [Rd] lm() appears to fail with large number of variables (PR#
 744)
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20402A9@roper-cv.qld.cmis.CSIRO.AU>

This is not a bug, only evidence that the least squares fitting procedure is
more numerically robust than I had expected.

With 11 observations you can only estimate 11 linearly independent
regression coefficients (at best).  That's what you got (intercept + first
10 variables).  How many did you expect to get estimates for?

In summary: no bug, lm is working as advertised.

> -----Original Message-----
> From: r@marksmucker.com [mailto:r@marksmucker.com]
> Sent: Thursday, 23 November 2000 6:29
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() appears to fail with large number of variables
> (PR#744)
> 
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> 
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).
> 
> Mark
> 
>  
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Nov 22 21:02:17 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 22 Nov 2000 22:02:17 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222102.WAA25841@pubhealth.ku.dk>

r@marksmucker.com wrote:
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).

That's not a bug!
What do you think about the degrees of freedom, if you have got 11
observations and 603 variables? !!!

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Thu Nov 23 10:12:30 2000
From: jago@mclink.it (Stefano Iacus)
Date: Thu, 23 Nov 2000 11:12:30 +0100
Subject: [Rd] A pre-alpha version of R-1.1.1 for Mac READY !
Message-ID: <a04330106b6429c5dfc95@[159.149.74.61]>

Dear all,

thanks to Ross I. (that gave me a version for Macintosh device), 
Martin M. (he encouraged me a lot), Guido M. (he answer to a lot of 
my silly questions on R, poor him :) ) a pre-alpha version of R-1.1.1 
for MacOS is now ready.

The official page is

http://www.eco-dip.unimi.it/R

For whom who has already downloaded it before Nov 23 (before the 
official announcement) I encourage them to download the latest 
version of the binaries (libraries has not been changed). I fixed an 
important bug concerning IEEE numerics.

It would be a pleasure to receive feedback from Mac R users and/or developers.

I hope to see a link to the mentioned pages, in the download section 
of the official R-Project site.


I hope this is a good lace where to announce it.

Regards to the Core Team!

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 10:59:38 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 11:59:38 +0100
Subject: [Rd] RE: [R] boxplot grouped by two variables: general issue
In-Reply-To: <Pine.GSO.4.20.0011211651590.14553-100000@laplace>
Message-ID: <000801c0553c$799c0280$c10616ac@bbdo.de>


> On Tue, 21 Nov 2000, Vadik Kutsyy wrote:
>
> > Is there a quick way to make boxplots groups by two
> variables?  By that
> > I mean, that if x axes have values ("A","B","C"), than at
> each value
> > there would be a few boxplots each for a value of second
> variable (say
> > ("1","2","3")).
>
> If I understand you correctly you want to try the
> "interaction" function
> in a boxplot.  Your data needs to be organised into a data.frame with
> appropriate factors.  Here's a simple example ...

I'd rather prefer to have something like

  coplot(breaks | wool * tension, data = warpbreaks, panel=function(x, y,
...)boxplot(x))

but there are three problems:

1) coplot doesn't seem to support univariate panel functions
2) coplot doesn't seem to support synchronization options for xlim= and
ylim= across panels
3) plot functions appear to be EITHER panel functions OR high level plot
functions. Needing two versions for each plot function is a little bit
complicated. Rather have ONLY panel functions and a one-panel high level
wrapper.

Here are my questions:

a) Any plans to implement trellis?
b) Are there any other solutions in R which offer simple trellis
functionality?
c) Do you think, attacking these problems leads to reinventing trellis with
all it's complexity?

If the answers turn out to be c(a=NO,b=NO,c=NO) I would like  to ask in more
detail:

Is it possible to write plot functions to properly behave as high level AND
as panel functions?
Are there any issues that NEED to be addressed beyond 1) to 3) ?
Any recommendations? Any related work in progress? Any volunteers?

If nobody else is attacking this, I will think about a solution (r-devel:
AFTER the strwidth() issue has been resolved)


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 13:13:09 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 14:13:09 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <14877.749.266796.685755@gargle.gargle.HOWL>
Message-ID: <001101c0554f$20c36eb0$c10616ac@bbdo.de>



Hi Martin,

Thank you.

> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?

Yes. Paul already mentioned this and I already checked it and I already said
that none of these options help. None of them lies, but none of them does
the job. The crucial point is, that resizing the window does NOT CHANGE the
font size, does CHANGE par("fin") and thus does CHANGE the proportion of the
device needed to show the text (under linux AND under windows).

This means that resizing a window (keep in mind that big devices are
automatically resized at creation time) causes

strwidth("sometext", units="user")   to report CHANGED     space
requirements in user coordinates
strwidth("sometext", units="figure") to report CHANGED     space
requirements as fraction of par("fin")[1]
strwidth("sometext", units="inches") to report NON-CHANGED space
requirements in inches

None of those tells you, which space requirements "sometext" would have
relatively to the originally intended device size or it's user coordinates.
(Yes, I know that I could calculate that, by administering two versions of
device sizes, by calculating two versions of all text sizes, but it is quite
nonsense to have the user do all that).

As I understood Ross Ihaka's mail, this will be improved in one of the
future versions of R, so that we get a real separation of representation
(device) and presentation (screen window), such layer separation has prooved
to be useful in other systems like LaTeX.

BTW: this was a thread on r-devel, not on r-help.

Regards


Jens



> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Thursday, November 23, 2000 12:44 PM
> To: jens.oehlschlaegel@bbdo-interone.de
> Cc: R-help@stat.math.ethz.ch
> Subject: Re: [R] Graphics-Device-Size vs. Window-Size
>
>
> >>>>> "Jens" == Jens Oehlschlaegel
> <jens.oehlschlaegel@bbdo-interone.de> writes:
>
> on Wed, 8 Nov 2000 11:52:38 +0100
>
>     Jens> I want to layout on screen a graphic bigger than the screen
>     Jens> (width=16.53543, height=11.69291) but strwidth()
> and strheight()
>     Jens> give wrong results.
>
>     >> x11(width=42/2.54, height=29.7/2.54, pointsize=12)
>     >> plot(1,1, type="n", xlim=c(0, 1), ylim=c(-1, 0),
> xlab="", ylab="",
>     Jens> axes=FALSE)
>     >> strwidth("Whatever")
>     Jens> [1] 0.08471151
>     >> # Now resize the window and repeat
>     >> strwidth("Whatever")
>     Jens> [1] 0.1856643
>
>     Jens> strwidth() obviously tells me how much space a text
> needs ON THE
>     Jens> SCREEN, not on the desired device size. Can someone
> enlighten
>     Jens> what is the best way to solve this?
>
> Since you are mentioning this again:
>
> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 23 15:11:41 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 23 Nov 2000 16:11:41 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011231511.QAA06027@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> A minor point, but the specification of the contour function is
    JonR> lagging behind the ?contour file:

    >> args(contour)

    JonR> function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    JonR> z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    JonR> xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    JonR> zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    JonR> method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    JonR> lwd = par("lwd"), add = FALSE, ...) 

    >> ?contour

    JonR> contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
    JonR> z,
    JonR> nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
    JonR> xlim = range(x, finite = TRUE),
    JonR> ylim = range(y, finite = TRUE),
    JonR> zlim = range(z, finite = TRUE),
    JonR> labcex = 0.6, drawlabels = TRUE, method = "flattest", 
    JonR> vfont = c("sans serif", "plain"),
    JonR> col = par("fg"), lty = par("lty"), lwd = par("lwd"),
    JonR> add = FALSE, ...)

    JonR> In particular the function default arguments should apparently be
    JonR> "labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
    JonR> of course that the help file is more up-to-date than the function
    JonR> definition.

:-)   {the source code  is the truth ..}

Actually, I think you are right:
I think we *should* change the current defaults :

  labcex = 0.4  is really too small

and vector fonts are infinitely better for most instances of contour().

Anybody against the change ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Fri Nov 24 12:31:25 2000
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Fri, 24 Nov 2000 13:31:25 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241231.NAA14426@pubhealth.ku.dk>

This looks to me like a bug in the print method for lists.  In printing 
"test.list" below, the labels $A$subset and $B$subset fail to appear.

I find the same behaviour under linux and Windows (using R 1.1.1 -- 
for version info see below) with R --vanilla.

Regards -- David
David Firth                        Phone +44 1865 278544
Nuffield College                   Fax   +44 1865 278621
Oxford OX1 1NF                     Secretary +44 1865 278612
United Kingdom                     Email david.firth@nuffield.oxford.ac.uk


> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
> test.list$A
$formula
Y ~ X

$subset
[1] TRUE

> test.list
$A
$A$formula
Y ~ X


[1] TRUE


$B
$B$formula
Y ~ X


[1] TRUE


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R    

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Nov 24 13:06:08 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Nov 2000 14:06:08 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241306.OAA15475@pubhealth.ku.dk>

>>>>> "david" == david firth <david.firth@nuffield.oxford.ac.uk> writes:

    david> This looks to me like a bug in the print method for lists.
(which is hidden in C)

    david> In printing "test.list" below, the labels $A$subset and $B$subset
    david> fail to appear.

    david> I find the same behaviour under linux and Windows (using R 1.1.1 -- 
    david> for version info see below) with R --vanilla.

    >> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
    >> test.list$A
    david> $formula
    david> Y ~ X

    david> $subset
    david> [1] TRUE

    >> test.list
    david> $A
    david> $A$formula
    david> Y ~ X


    david> [1] TRUE


    david> $B
    david> $B$formula
    david> Y ~ X


    david> [1] TRUE


    >> version
    david> _                
    david> platform i686-pc-linux-gnu
    david> arch     i686             
    david> os       linux-gnu        
    david> system   i686, linux-gnu  
    david> status                    
    david> major    1                
    david> minor    1.1              
    david> year     2000             
    david> month    August           
    david> day      15               
    david> language R    

Bug confirmed, with the current "R-devel"opment version.
Another slight variation on the theme:

> list(A=list(bla="Y~X",no2=TRUE), B=list(blu=Y~X,no2=TRUE))
$A
$A$bla
[1] "Y~X"

$A$no2
[1] TRUE


$B
$B$blu
Y ~ X


[1] TRUE


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 26 20:01:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Nov 2000 20:01:28 +0000 (GMT)
Subject: [Rd] RODBC
Message-ID: <Pine.GSO.4.05.10011261954030.5359-100000@auk.stats>

Several of you have kindly sent me examples of bugs in RODBC, but none
of them reproduce on my systems.  I am fairly sure I know what is
happening, and that it is client-specific.  (Do empty strings get returned 
as "", NULL or skipped?)   Also, empty character fields were getting mapped
to NA.  There's a comment in the code that fields need to set to a null
string, and that was only being done for the first row.

If my diagnosis is right, I have a fix (and have simpilfied the code a
lot en route).

http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)

I'd be grateful for confirmation (or otherwise).

BTW, although I have altered the code to compile under R-devel, it does not
work correctly for me as yet.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 26 20:12:13 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Sun, 26 Nov 2000 21:12:13 +0100 (MET)
Subject: [Rd] Bug in args with no defaults (PR#747)
Message-ID: <200011262012.VAA23844@pubhealth.ku.dk>

This turned up in the same context as #743, i.e. writing data.restore.

Two bugs, I think:

The way arguments with no defaults are stored appears to be as a
zero-length name:

 > test <- function(x) 1
 > as.list(test)$x

 > mode(as.list(test)$x)
 [1] "name"
 > as.character(as.list(test)$x)
 [1] ""

However, I'm not allowed to create one of those:

 > as.name("")
 Error in as.name("") : attempt to use zero-length variable name

If I'm sneaky, I can create one, but I can't do anything with it:

 > badvar <- as.list(test)$x
 > badvar
 Error: Argument "badvar" is missing, with no default
 > junk <- badvar
 Error: Argument "badvar" is missing, with no default
 > junk
 Error: Object "junk" not found

For now, the workaround I'm using when building up functions like
"test" above is to create them as

 function(x = stop("argument x is missing")) 1

but this is ugly.

Duncan Murdoch

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun Nov 26 20:21:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 26 Nov 2000 21:21:23 +0100 (MET)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
Message-ID: <200011262021.VAA23880@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.1.1.1 (patched the rpois :-))
OS: osf4.0e
Submission from: (NULL) (129.240.28.227)


Dear all,

I have just gotten through a debugging session of my code, being confused
for a few days. I sent what I thought was a straightforward matrix to
chisq.test() and once in a while got the error message:
> chisq.test(t2)
Error in chisq.test(t2) : missing value where logical needed

Now, it turned out that a fairly deep bug in my code occasionally produced
NAs in the matrix, and that was the source of the confusion. Looking at
the code, it is apparent that the test
    if (any(x < 0) || any(is.na(x)))
        stop("all entries of x must be nonnegative and finite")
was designed to catch this, but it doesn't seem to, because the first
any()-call is NA and so when using the operator ||, well, I bet you
understand this better than I... :-)

I figured, perhaps turn this around:
    if (any(is.na(x)) || any(x < 0))
        stop("all entries of x must be nonnegative and finite")
That seems to work: 
> chisq.test(t2)
Error in chisq.test(t2) : all entries of x must be nonnegative and finite

Now, I hope this was a true bug, not just one of my misunderstandings, and that
this is a real fix too.... :-)

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Nov 26 21:13:55 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 26 Nov 2000 13:13:55 -0800 (PST)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
In-Reply-To: <200011262021.VAA23880@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011261255320.12852-100000@atlas.biostat.washington.edu>

On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> 
> 
> Now, it turned out that a fairly deep bug in my code occasionally produced
> NAs in the matrix, and that was the source of the confusion. Looking at
> the code, it is apparent that the test
>     if (any(x < 0) || any(is.na(x)))
>         stop("all entries of x must be nonnegative and finite")
> was designed to catch this, but it doesn't seem to, because the first
> any()-call is NA and so when using the operator ||, well, I bet you
> understand this better than I... :-)
> 
> I figured, perhaps turn this around:
>     if (any(is.na(x)) || any(x < 0))
>         stop("all entries of x must be nonnegative and finite")
> That seems to work: 
> > chisq.test(t2)
> Error in chisq.test(t2) : all entries of x must be nonnegative and finite
> 
> Now, I hope this was a true bug, not just one of my misunderstandings, and that
> this is a real fix too.... :-)

This is a real fix; it may be a real bug.

any(x<0) correctly returns NA with NAs in x, that is, it doesn't know
whether there are any negative entries because some are missing.

any(x<0) || any(is.na(x)) returns NA because of short-circuit
evaluation.  That is, we do sequential if()s on each element from left to
right. The first one fails because of NAs.  Reversing the expression is
more sensible because you would expect to rule out NAs before testing
for x<0.

However, it would also be reasonable for NA || B to evaluate B and return
TRUE or NA depending on the value.  This is what S-PLUS 5 does, so at
least it's an incompatibility. 

The R documentation says 
    The longer form [ie ||]evaluates left to right examining only the first
    element of each vector.  Evaluation proceeds only until the result
    is determined. 
which at least seems incomplete as NA | TRUE gives TRUE, but
NA || TRUE gives an error.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 08:25:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 09:25:48 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011270825.JAA26026@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

on Subject: Re: [Rd] Problem with NAs using chisq.test() (PR#748)
which I've changed, since it is another bug we are talking about now

    TL> On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:
    >> Full_Name: Kjetil Kjernsmo

    ..............
    ..............

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL>>  The longer form [ie ||] evaluates left to right examining only the
    TL>>  first element of each vector.  Evaluation 
    TL>>  proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

Looks over-cautious to me as well.
We should reach a conclusion here, asap [to be effective for R 1.2].

Either

1)	NA || x
  (and	NA && y )

  continue to give errors, and we should strongly emphasize it in the
  documentation -- and in the FAQ list of differences to S

or

2) really do the same as S, not only Splus 5.x, but also 3.4 which used to
   be our prototype, namely

    > NA || TRUE
    [1] TRUE
    > NA && FALSE
    [1] FALSE
    > NA && TRUE
    [1] NA
    > NA || FALSE
    [1] NA

The advantage of "1)" is to catch programming errors early in some cases,
however for consistency (with "|" and "&") and compatibility,
I'm voting for a change to "2)" behaviour.

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 08:34:46 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 08:34:46 -0000
Subject: R: [Rd] RODBC
Message-ID: <006301c0584c$e6d98df0$0a00a8c0@bellview>

Under which version of R is it supposed to run ?
With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
cannot get the name of the tables, every query I execute returns with "No
Data".
I'm surely doing something wrong ...

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

>Several of you have kindly sent me examples of bugs in RODBC, but none
>of them reproduce on my systems.  I am fairly sure I know what is
>happening, and that it is client-specific.  (Do empty strings get returned
>as "", NULL or skipped?)   Also, empty character fields were getting mapped
>to NA.  There's a comment in the code that fields need to set to a null
>string, and that was only being done for the first row.
>
>If my diagnosis is right, I have a fix (and have simpilfied the code a
>lot en route).
>
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)
>
>I'd be grateful for confirmation (or otherwise).
>
>BTW, although I have altered the code to compile under R-devel, it does not
>work correctly for me as yet.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:05:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:05:28 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <006301c0584c$e6d98df0$0a00a8c0@bellview>
Message-ID: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>

On Mon, 27 Nov 2000, Federico Spinazzi wrote:

> Under which version of R is it supposed to run ?
> With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> cannot get the name of the tables, every query I execute returns with "No
> Data".
> I'm surely doing something wrong ...

Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
that case wrong.  I can fake it, though, and will report back when I
have.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:36:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:36:52 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>
Message-ID: <Pine.GSO.4.05.10011271035100.12059-100000@toucan.stats>

On Mon, 27 Nov 2000, Prof Brian Ripley wrote:

> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
> 
> > Under which version of R is it supposed to run ?
> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> > cannot get the name of the tables, every query I execute returns with "No
> > Data".
> > I'm surely doing something wrong ...
> 
> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
> that case wrong.  I can fake it, though, and will report back when I
> have.

Yes, I can reproduce this: I left a piece of debugging code in, sorry.
That version needs the max number of rows set to > 0 if the database does
not tell you.  I've just uploaded a replacement that should not have
the problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 15:28:19 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 15:28:19 -0000
Subject: R: R: [Rd] RODBC
Message-ID: <00b701c05886$ad551470$0a00a8c0@bellview>

It seems to work smoothly now.

Thank you very much.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Prof Brian Ripley <ripley@stats.ox.ac.uk>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: R-devel@r-project.org <R-devel@r-project.org>
Data: luned 27 novembre 2000 11.03
Oggetto: Re: R: [Rd] RODBC


>On Mon, 27 Nov 2000, Prof Brian Ripley wrote:
>
>> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
>>
>> > Under which version of R is it supposed to run ?
>> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't
work, I
>> > cannot get the name of the tables, every query I execute returns with
"No
>> > Data".
>> > I'm surely doing something wrong ...
>>
>> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
>> that case wrong.  I can fake it, though, and will report back when I
>> have.
>
>Yes, I can reproduce this: I left a piece of debugging code in, sorry.
>That version needs the max number of rows set to > 0 if the database does
>not tell you.  I've just uploaded a replacement that should not have
>the problem.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 17:27:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 18:27:06 +0100 (MET)
Subject: [Rd] abline() does not obey "xpd" (clipping rules) (PR#750)
Message-ID: <200011271727.SAA04871@pubhealth.ku.dk>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mavip1@inet.polyu.edu.hk  Tue Nov 28 05:25:26 2000
From: mavip1@inet.polyu.edu.hk (mavip1@inet.polyu.edu.hk)
Date: Tue, 28 Nov 2000 06:25:26 +0100 (MET)
Subject: [Rd] BUG: polyroot() (PR#751)
Message-ID: <200011280525.GAA06952@pubhealth.ku.dk>

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Nov 28 19:42:55 2000
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 28 Nov 2000 20:42:55 +0100 (MET)
Subject: [Rd] non-centrality parameter in pf() (PR#752)
Message-ID: <200011281942.UAA17414@pubhealth.ku.dk>


Bug Description:

Problem with the function pf() when the non-centrality
parameter is large. Here is a sample command. You should
see a smooth line from 0 to about 55, and then the values
of pf() go crazy from 55 to 100.
############################
ncp <- seq(0,100,length=200)
plot(ncp,pf(5,7,2,ncp=ncp))
############################

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 13:02:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 14:02:51 +0100 (MET)
Subject: [Rd] abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200011291302.OAA24761@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 15:17:16 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 16:17:16 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011291517.QAA27271@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL> The longer form [ie ||] evaluates left to right examining only the
    TL> first element of each vector.  Evaluation 
    TL> proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

    MM> Looks over-cautious to me as well.

    ........

    MM> 2) really do the same as S, not only Splus 5.x, but also 3.4 which
    MM> used to be our prototype, namely

    >> NA || TRUE
    MM> [1] TRUE
    >> NA && FALSE
    MM> [1] FALSE
    >> NA && TRUE
    MM> [1] NA
    >> NA || FALSE
    MM> [1] NA

    MM> The advantage of "1)" is to catch programming errors early in some
    MM> cases, however for consistency (with "|" and "&") and
    MM> compatibility, I'm voting for a change to "2)" behaviour.

This is now in "R-devel" aka  ``R 1.2 to be''  (slightly less than 20 days)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 29 18:30:33 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 29 Nov 2000 19:30:33 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#753)
Message-ID: <200011291830.TAA28473@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arto.luoma@uta.fi  Thu Nov 30 13:02:56 2000
From: arto.luoma@uta.fi (arto.luoma@uta.fi)
Date: Thu, 30 Nov 2000 14:02:56 +0100 (MET)
Subject: [Rd] means in arima0 (PR#754)
Message-ID: <200011301302.OAA07911@pubhealth.ku.dk>

Full_Name: Arto Luoma
Version: 1.1.0
OS: Windows 98
Submission from: (NULL) (153.1.53.119)


In arima0 it is possible to specify whether the mean of the original series is
included in the model or not. However, it is not possible to specify whether the
mean of the differenced series is included. It seems that it is not included.
However, if differencing is used to eliminate trend, the mean of the differenced
series is not zero. In my opinion, this leads to errors both in estimation and
prediction problems. The uncertainty in the estimation of the mean of the
differenced series should be also included  in the standard errors of
prediction. 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 14:38:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 14:38:12 +0000 (GMT)
Subject: [Rd] means in arima0 (PR#754)
In-Reply-To: <200011301302.OAA07911@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011301430150.26037-100000@auk.stats>

On Thu, 30 Nov 2000 arto.luoma@uta.fi wrote:

> Full_Name: Arto Luoma
> Version: 1.1.0
> OS: Windows 98
> Submission from: (NULL) (153.1.53.119)
> 
> 
> In arima0 it is possible to specify whether the mean of the original series is
> included in the model or not. However, it is not possible to specify whether the
> mean of the differenced series is included. It seems that it is not included.

Right, ARMA processes have zero mean, by definition, and the definition is
on the help page.  I don't see any room for ambiguity in what is written
there.

> However, if differencing is used to eliminate trend, the mean of the differenced
> series is not zero. In my opinion, this leads to errors both in estimation and
> prediction problems. The uncertainty in the estimation of the mean of the
> differenced series should be also included  in the standard errors of
> prediction. 

This is not a bug: the function works as described.  If you want it to work
differently, please contribute code to enhance it.  Note that arima0 is
explicitly described as a preliminary version, and it is planned one day to
replace it. So, please supply what you see as a better version as a
candidate for replacement.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 18:41:46 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 04:41:46 +1000 (EST)
Subject: [Rd] Optimisation methods
Message-ID: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>

I don't want to re-invent the wheel, and I'm trying to code up something
that does a Nelder-Mead simplex method to minimise a non-linear objective
function.  (I'm porting something I originally wrote in matlab, using the 
optimisation toolbox funciton fmins).

Is there already something available to do this included in R?
Do people have suggestions on the best way to do this?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Nov 30 18:39:54 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 30 Nov 2000 10:39:54 -0800 (PST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.21.0011301039250.28740-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?

Yes. help(optim).

	-thomas
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 18:48:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 18:48:28 +0000 (GMT)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?
> Do people have suggestions on the best way to do this?

optim(method="Nelder-Mead")

Now how did this not come up in a search: perhaps because of the way you
spell optimization?  I have

> help.search("optimisation")
No help files found with name or title matching `optimisation'
> help.search("optimization")
Help files with name or title matching `optimization':

partition(multiv)          Partitioning by Iterative Optimization 
lmeScale(nlme)             Scale for lme Optimization
portfolio.optim(tseries)   Portfolio Optimization
optim(base)                General-purpose Optimization
optimize(base)             One Dimensional Optimization

which shows we probably need to find a way to check variant spellings.

(BTW: just in case anyone tells me the British spell with an `ise', the
Oxford English Dictionary does not.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov 30 20:31:58 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 30 Nov 2000 21:31:58 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <14886.47422.630186.442419@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> I don't want to re-invent the wheel, and I'm trying to code up something
>> that does a Nelder-Mead simplex method to minimise a non-linear objective
>> function.  (I'm porting something I originally wrote in matlab, using the 
>> optimisation toolbox funciton fmins).
>> 
>> Is there already something available to do this included in R?
>> Do people have suggestions on the best way to do this?

> optim(method="Nelder-Mead")

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have

>> help.search("optimisation")
> No help files found with name or title matching `optimisation'
>> help.search("optimization")
> Help files with name or title matching `optimization':

> partition(multiv)          Partitioning by Iterative Optimization 
> lmeScale(nlme)             Scale for lme Optimization
> portfolio.optim(tseries)   Portfolio Optimization
> optim(base)                General-purpose Optimization
> optimize(base)             One Dimensional Optimization

> which shows we probably need to find a way to check variant spellings.

I am not sure how easy it would be to use different dicitionaries.  But
a fuzzy grep which also returns near matches should be good enough for
what we need.  Not that I have such a beast readily available, though.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 22:09:22 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 08:09:22 +1000 (EST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>

On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
> 
> > I don't want to re-invent the wheel, and I'm trying to code up something
> > that does a Nelder-Mead simplex method to minimise a non-linear objective
> > function.  (I'm porting something I originally wrote in matlab, using the 
> > optimisation toolbox funciton fmins).
> 
> optim(method="Nelder-Mead")
 
Thanks.  Perhaps I should just learn to spell like the OED :-) 

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have
 
> which shows we probably need to find a way to check variant spellings.
> 
> (BTW: just in case anyone tells me the British spell with an `ise', the
> Oxford English Dictionary does not.)

I guess this means I should change the spelling of the parameterisation
in the gld package functions.  What do people think of adding extra
arguments to functions to take account of different spellings like this:

example.fn _ function(parameterisation="fing",parameterization=NULL)
{
if (is.null(parameterization)) {parameterization_parameterisation}
else {parameterisation_parameterization}
print(parameterisation)
}

Is there a better way?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  1 07:29:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Nov 2000 08:29:24 +0100
Subject: [Rd] desiderata for data manipulation
In-Reply-To: <87snpceqsz.fsf@jeeves.blindglobe.net>
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net>
 <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
Message-ID: <14847.50772.578389.86697@gargle.gargle.HOWL>

[diverted from R-help to R-devel]

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........
    ZC> But how do you exchange datafiles? Dump to ascii and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.  (at
    tony> least until R gets a nice set of longitudinal macros, I'll
    tony> continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

Dear Tony,
can you elaborate what you are missing here for R?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 13:42:15 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 05:42:15 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <14847.50772.578389.86697@gargle.gargle.HOWL>
 (Martin Maechler's message of "Wed, 1 Nov 2000 08:29:24 +0100")
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
 <14847.50772.578389.86697@gargle.gargle.HOWL>
Message-ID: <87k8ang66g.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> [diverted from R-help to R-devel]
>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........  But how do you exchange datafiles? Dump to ascii
    ZC> and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.
    tony> (at least until R gets a nice set of longitudinal macros,
    tony> I'll continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

    MM> Dear Tony, can you elaborate what you are missing here for R?

In R, it would be a simple command to reshape a dataframe, from a
single-observation per individual (or other unit having repeated
measurements) to multiple lines (one per measurement).  Quite often,
in building models, I'll switch between wide/long versions of the data
set to build useful variables for modeling.


Here's the help file of my favorite (missing from R) data manipulation
command:

-------------------------------------------------------------------------------
help for reshape                                         (manual:  [R] reshape)
-------------------------------------------------------------------------------

Convert data from wide to long and vice versa
---------------------------------------------

Basic syntax:

        reshape wide varnames, i(varlist) [ j(varname [values]) ... ]
        reshape long varnames, i(varlist) [ j(varname [values]) ... ]

        reshape wide
        reshape long

        reshape error

        where
                values is           #[-#] [#[-#] ...]
                ... is              string atwl(chars)

        Both are seldom specified.
        
        
Advanced syntax:
        
        reshape i   varlist
        reshape j   varname [#[-#] [#[-#] ...]] [, string]
        reshape xij fvarnames [, atwl(chars)]
        reshape xi  [varlist]
        
        reshape [query]
        
        reshape wide
        reshape long
        
        reshape error
        
        reshape clear
        
        where fvarnames are either varnames, varnames with @ characters, or a
                mix of the two.  The @ character denotes where the # (j) suffix
                appears.
                
Description
-----------
        
reshape converts data from wide to long form and vice versa.  Think of the data
as a collection of observations x_ij.  One such collection might be
        
                 (wide form)                          (long form)
        
        -i-       ------- x_ij --------         -i-  -j-         -x_ij-
        id  sex   inc80   inc81   inc82         id   year   sex    inc
        -------------------------------         ----------------------
         1    0    5000    5500    6000          1     80     0   5000
         2    1    2000    2200    3300          1     81     0   5500
         3    0    3000    2000    1000          1     82     0   6000
                                                 2     80     1   2000
                                                 2     81     1   2200
                                                 2     82     1   3300
                                                 3     80     0   3000
                                                 3     81     0   2000
                                                 3     82     0   1000
        
reshape converts data from one form to the other:
        
        . reshape long inc, i(id) j(year)      (goes from left-form to right)
        . reshape wide inc, i(id) j(year)      (goes from right-form to left)
        
See [R] reshape for a detailed discussion and examples for both the basic and
advanced syntax.
        
        
Options 
------- 
        
i(varlist) specifies the variable(s) whose unique values denote a logical
    observation.
        
j(varname [values]) specifies the variable whose unique values denote a sub-
    observation.  values list the unique values to be used from varname and
    typically is not explicitly stated since reshape will determine them
    automatically from the data.
        
string specifies that the j() may contain string values.
       
atwl(chars) specifies that chars should be substituted for the @ character when
    converting the data to the long form.
        
        
Examples
--------
        
 . reshape long inc ue, i(id) j(year)             converts from wide to long
 . reshape wide                                   converts back to wide
        
 . reshape ..., i(id)                             one i() variable
 . reshape ..., i(hid pid)                        two i() variables
        
 . reshape long inc, i(id) j(year 80-82 85)       specifying j() values
        
 . reshape long inc, i(id) j(sex) string          allow string var. in j()
        
        


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 14:32:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 15:32:07 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: rossini@blindglobe.net's message of "01 Nov 2000 05:42:15 -0800"
References: <20001030222745.B11703@ps2-4.ucl-41> <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41> <87snpceqsz.fsf@jeeves.blindglobe.net> <14847.50772.578389.86697@gargle.gargle.HOWL> <87k8ang66g.fsf@jeeves.blindglobe.net>
Message-ID: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

>     MM> Dear Tony, can you elaborate what you are missing here for R?
> 
> In R, it would be a simple command to reshape a dataframe, from a
> single-observation per individual (or other unit having repeated
> measurements) to multiple lines (one per measurement).  Quite often,
> in building models, I'll switch between wide/long versions of the data
> set to build useful variables for modeling.

Almost, but not quite stack()/unstack()...

The basic cases of "reshape long" looks like it would be a piece of
cake to model over the subset() and stack() functions. "reshape wide"
looks a little more tricky, unless you want to brutally assume that
you're dealing with the result of a previous "reshape long".

(The problem would be that in principle you'd know what to do with

A B Y             
1 1 0.1           A Y1 Y2
1 2 0.3    ---->  1 0.1 0.3
2 1 0.7           2 0.7 0.9
2 2 0.9

but suppose there's a fifth line as in

A B Y  
1 1 0.1
1 2 0.3
2 1 0.7
2 2 0.9
2 2 1.1

Then you'd have two candidates for the value of Y2 for A==2 and it
wouldn't help to assume that there are really two cases with A==2,
because you can't really be sure about to which case the Y1 should
belong.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  1 15:05:19 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 1 Nov 2000 10:05:19 -0500 (EST)
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>


  What does Stata do in this case?
  I suppose you could generate an error, or give the user the choice to
duplicate Y1/assume Y1 was the first or last case and put in NAs for the
others.

On 1 Nov 2000, Peter Dalgaard BSA wrote:

> (The problem would be that in principle you'd know what to do with
> 
> A B Y             
> 1 1 0.1           A Y1 Y2
> 1 2 0.3    ---->  1 0.1 0.3
> 2 1 0.7           2 0.7 0.9
> 2 2 0.9
> 
> but suppose there's a fifth line as in
> 
> A B Y  
> 1 1 0.1
> 1 2 0.3
> 2 1 0.7
> 2 2 0.9
> 2 2 1.1
> 
> Then you'd have two candidates for the value of Y2 for A==2 and it
> wouldn't help to assume that there are really two cases with A==2,
> because you can't really be sure about to which case the Y1 should
> belong.)
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 15:30:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 16:30:45 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: ben@zoo.ufl.edu's message of "Wed, 1 Nov 2000 10:05:19 -0500 (EST)"
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>

ben@zoo.ufl.edu writes:

>   What does Stata do in this case?
>   I suppose you could generate an error, or give the user the choice to
> duplicate Y1/assume Y1 was the first or last case and put in NAs for the
> others.

>From the help file Tony sent, I would assume that it keeps reshaping
information around, since you can just say "reshape wide". If you
start with data in the long format, I'm not quite sure what it does.

If you assume that the variable to "unreshape" on is of the form

 1 2 ... n 1 2 ... n 1 2 ... n ...

and that everything except the response variables is constant within
blocks, then things are reasonably simple, I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 15:47:21 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 07:47:21 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "01 Nov 2000 16:30:45 +0100")
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
 <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0lbu22e.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> ben@zoo.ufl.edu writes:
    >> What does Stata do in this case?  I suppose you could generate
    >> an error, or give the user the choice to duplicate Y1/assume Y1
    >> was the first or last case and put in NAs for the others.

    >> From the help file Tony sent, I would assume that it keeps
    >> reshaping
    PDB> information around, since you can just say "reshape wide". If
    PDB> you start with data in the long format, I'm not quite sure
    PDB> what it does.

    PDB> If you assume that the variable to "unreshape" on is of the
    PDB> form

    PDB>  1 2 ... n 1 2 ... n 1 2 ... n ...

    PDB> and that everything except the response variables is constant
    PDB> within blocks, then things are reasonably simple, I suppose.

I'll have to check, but I think it repeats the first value.

Thanks for the pointer to stack/unstack -- now, having been reminded,
I think I'd seen these float through on the list (still doesn't solve
the missing modeling routines (parametric GLMMs, some of the
econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
sometime, I assume).

One more interesting point -- Stata only has the equivalent of one
data frame (and is optimized for that, another reason for smaller
footprint for stata objects than R; makes some sense if you are only
analysing data in a traditional manner, but increases thought-required
(and need for tricks) for things like (multiple) imputation and
bootstrapping, if you want to reuse generated data from multiple sets.

This also means that the reshape command does interesting things to
your (single) data set structure, since it changes the number of
observations while preserving information for returning to the initial
state.


best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Nov  1 16:01:36 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 1 Nov 2000 16:01:36 +0000 (GMT)
Subject: [Rd] Re: desiderata for data manipulation
Message-ID: <200011011601.QAA03969@toucan.stats.ox.ac.uk>

> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 01 Nov 2000 07:47:21 -0800

[...]

> Thanks for the pointer to stack/unstack -- now, having been reminded,
> I think I'd seen these float through on the list (still doesn't solve
> the missing modeling routines (parametric GLMMs, some of the
> econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
> sometime, I assume).

Only if someone is interested enough to write them....  Actually,
I thought parametric GLMMs were an unsolved research problem in
general, even in, say, the logistic case.  I know there are
suggestions in special cases (and there is a glmm function in one
of Jim Lindsey's packages) but all the simple ones can be seriously
incorrect AFAIK.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:09:59 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:09:59 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Wed, 1 Nov 2000 16:01:36 +0000 (GMT)")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
Message-ID: <877l6nu10o.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> Only if someone is interested enough to write them....

Exactly, that's why I said eventually. 

    PBR> Actually, I thought parametric GLMMs were an unsolved
    PBR> research problem in general, even in, say, the logistic case.
    PBR> I know there are suggestions in special cases (and there is a
    PBR> glmm function in one of Jim Lindsey's packages) but all the
    PBR> simple ones can be seriously incorrect AFAIK.

I'll have to follow up on Jim's packages, which have always seemed
daunting, and run some comparisons.

As far as research problems -- yes, how to fit the semiparametric
version of the GLMMs is open, but for a fully parametric version,
there isn't much of an issue.

You are right that interpretation is severely problematic and needs
to be handled with care (Thomas has a nice presentation on that) but
they can be useful tools during data analysis.

Okay, maybe I should just take off a day or two in the next week and
see if most of Stata can be replaced by R :-), since we've made good
progress on a number of issues I had previously thought were
unresolved...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Nov  1 16:13:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Nov 2000 10:13:34 -0600
Subject: [Rd] J. of Comp. and Graph. Statist., Sept. 2000
Message-ID: <6rzojjhdqp.fsf@franz.stat.wisc.edu>

Members of R-devel may be interested in the special Sept. 2000 issue
of J. of Comp. and Graph. Statist.
       http://www.amstat.org/publications/asajournals.html#jcgs
on Systems and Languages.  It features two articles by Robert
Gentleman and Ross Ihaka on "Java and Dylan" and "Lexical Scope and
Statistical Computing", an article by Paul Murrell and Ross Ihaka on
"An Approach to Providing Mathematical Annotation on Plots", an
article by John Chambers on "Users, Programmers, and Statistical
Software", an article by Duncan Temple Lang on "The Omegahat
Environment", an article by Luke Tierney on "Connecting Lisp-Stat to
COM", and an article co-authored by Thomas Lumley on "Orca: A
Visualization Toolkit for High-Dimensional Data".

All of the authors mentioned above are members of R-core.  Some of
these articles deal directly with R - for example, Gentleman and Ihaka
on lexical scoping should be of interest to anyone doing advanced R
development.  Other articles describe some related interests of R-core
members.

This is one of the few issues of an academic journal that I will read
cover-to-cover.  There's lots of good material in there.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:55:39 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:55:39 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <877l6nu10o.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "01 Nov 2000 08:09:59 -0800")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 <877l6nu10o.fsf@jeeves.blindglobe.net>
Message-ID: <87em0vskc4.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

    AJR> As far as research problems -- yes, how to fit the
    AJR> semiparametric version of the GLMMs is open, but for a fully
    AJR> parametric version, there isn't much of an issue.

And I should've said -- for those models I'm interested in (which of
course, are in the simpler class).

Red-faced with foot-in-mouth...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov  1 20:11:43 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 01 Nov 2000 15:11:43 -0500
Subject: [Rd] seg fault in R-devel
Message-ID: <3A0078FF.D60FAC4B@bank-banque-canada.ca>

I've been getting a seg fault with R-devel. It was happening in the
snapshot from a few weeks ago and I just tried today's snapshot hoping
it had been found and fixed, but it persists. The problem seems to be
with garbage collection as it does not always happen in the same place,
but happens regularly with some tests which use a lot of memory.

Sorry I cannot provide more details as I have not been able to pin it
down any better than this. If this is not a known problem and someone
will suggest how to proceed then I can try, but I'm over my head with
this sort of problem.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:46 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:46 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#719)
Message-ID: <200011020541.GAA01291@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:45 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:45 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#718)
Message-ID: <200011020541.GAA01282@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:48 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:48 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#720)
Message-ID: <200011020541.GAA01295@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:51 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:51 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#723)
Message-ID: <200011020541.GAA01307@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:49 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:49 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#721)
Message-ID: <200011020541.GAA01299@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:40 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:40 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
Message-ID: <200011020541.GAA01217@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:42 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:42 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#717)
Message-ID: <200011020541.GAA01240@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:50 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:50 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#722)
Message-ID: <200011020541.GAA01303@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov  2 07:10:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Nov 2000 08:10:18 +0100 (CET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
In-Reply-To: <200011020541.GAA01217@pubhealth.ku.dk>
References: <200011020541.GAA01217@pubhealth.ku.dk>
Message-ID: <14849.4954.98724.583840@mithrandir.hornik.net>

>>>>> shalabhgandhi  writes:

> I want to use var.test function of ctest library. I was able to
> generate the output from R on the input given by rnorm. But when I
> store the same data set provided by rnorm into a file, and then read a
> file into a dataframe, then on using the dataframe as a parameter to
> var.test function - it gives an error "not enough x observations".

> I'll explain the above mentioned problem of mine for which I am
> mentioning 2 cases CaseA and CaseB. CaseA is working but CaseB is not.

> (CaseA) Following are 4 commands I gave:

> R
> library(ctest)
> x<-rnorm(50)
> y<-rnorm(30)
> var.test(x,y) 

> The output generated by R was:
> 	 F test to compare two variances 

> data:  x and y 
> F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
> alternative hypothesis: true ratio of variances is not equal to 1 
> 95 percent confidence interval:
>  0.4675884 1.8646602 
> sample estimates:
> ratio of variances 
>           0.950451 


> (CaseB) Now I want R to give me the same output as above, when I read it from
> a file. The commands I gave are:

> R
> library(ctest)
> x<-read.table("input1.txt", header = FALSE)
> y<-read.table("input2.txt", header = FALSE)
> var.test(x,y)

> The output generated by R is an error:
> "not enough x observations"

> I want to know why is this error coming, since I am creating the
> input1.txt from rnorm(50) and input2.txt from rnorm(30),which should
> mean the same?

> Pl. see if you can provide any help on this.

First, why send 8 *DIFFERENT* bug reports with the same content?

Second, why is this a bug report?  Have you read the FAQ first?  You do
not give enough information to help us reproduce your problem, as you do
not describe what your "input1.txt" and "input2.txt" look like.  I would
assume that reading x back from your input file failed somehow, which
should explain the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 13:22:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 05:22:48 -0800
Subject: [Rd] RSPerl...
Message-ID: <871ywufqzb.fsf@jeeves.blindglobe.net>


Duncan -
(but sent to R-devel, for any other thoughts?)

How do you envision RSPerl being used?  Without having seen the
details, I can think of playing with strings; is there a preferred
incantation for stringification of R objects (serialization)?

(actually, the main problem I'm having is that I know how I want to code
something like: 
     Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
which might be something like:
     Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
but sort of what I'm having problems with thinking about is along the
lines of  
     Robject <- eval(.Perl("perlfunctionhackery",
                           RToString(InitialRObject)))

and my brain isn't kicking into gear).   While I know how to transfer
data as arrays, and the docs suggest I can transfer tables, and that's
fine, I'm wondering how to transfer and contort objects, and if the
above might be a reasonable general sketch, or if there might be
another approach?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Thu Nov  2 13:53:29 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Thu, 2 Nov 2000 14:53:29 +0100 (MET)
Subject: [Rd] t.test and n = 2 (PR#724)
Message-ID: <200011021353.OAA08851@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


> t.test(rnorm(2))
Error in t.test(rnorm(2)) : not enough x observations

Is this just a bug (the tests in lines 34 and 49 of the code should be "< 2"
rather than "<= 2") or is it some sort of bondage and dicipline political
correctness
for the user's own good?  If the latter, I don't approve.  If the procedure
makes
mathematical sense, then R should do it.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Nov  2 13:53:31 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 2 Nov 2000 08:53:31 -0500 (EST)
Subject: [Rd] RSPerl...
Message-ID: <200011021353.IAA08695@jessie.research.bell-labs.com>



Well, I hadn't got around to announcing it, but seeing as it is
mentioned here....

 There is a first round of a package named RSPerl available
at 
    http://www.omegahat.org/RSPerl/

which provides several .C like functions but to Perl.  So one can call
Perl subroutines and object methods directly from R. Also, one can
evaluate Perl scripts in the form of strings or files.  Aside from
having access to all of the Perl modules, a benefit of this approach
is that the Perl interpreter lives in the R process.  We avoid the
expense of spawning a Perl process each call via the system()
function. But more importantly, we can use Perl in the form of an
interactive session as we do R, and so values created in one call are
available to future calls rather than disappearing along with the Perl
sub-process. So one can execute Perl commands incrementally.

At the moment, I have only tested this using the latest development
version of R (i.e. the snapshot of the unreleased 1.2 available from
CRAN).


Now, for Tony's question. 

Playing with strings is one way, but not one
I recommend. How can one sensibly serialize an e.g. lm object in a way
that Perl could understand it without having extra code on the other
side. Instead of serializing the contents of an object, the general
mechanism used in the Java and CORBA modules is to leave the R object
in R and send a reference to it over to Perl. This makes sense for
Perl methods that expect an object which have methods. So, Perl might
call residuals() on its argument. If this were an R reference to an lm
object, the Perl value would have a method residuals() which would
call the corresponding R function with the lm object as its primary
argument.

As I say, this is identical to the way we export Perl objects to R and
also how the exchange of references is done in the CORBA and Java
packages. However, in the latter two, this can be done automatically
(via reflectance).  I am still trying to develop a general, automated
way of doing this in Perl and that is the last piece.  Any suggestions
from those who know Perl better than I do (almost everyone who has
ever used it :-)) is very welcome.

Basically what would happen is a call of the form
      .Perl("perlfunctionhackery", matrix(rnorm(100),10,10)), .sigs="Matrix")
would generate a new Perl class named RMatrixReference which has the
same methods as the Perl class Matrix (read and generated by
reflectance). We would then create an instance of this class by
passing it an identifier for  matrix(...) in the argument, and passing
the matrix itself.
One method in this new class might be dim().  The RMatrixReference
object would implement this as
  R::callReference(idForMatrix, "dim")
and this ends up calling 
     dim(the.real.matrix)

The basic philosophy is compute on the object in the language in which
it is defined, make calls to those methods from any language.

As the package stands now, it is primarily a one-directional
communication mechanism (like the simple version of the .C
(i.e. without the call_R())).  That provides quite a lot of
functionality, and without any real coding effort by other users.


Hope that helps.

 D.



> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 02 Nov 2000 05:22:48 -0800
> Lines: 36
> User-Agent: T-gnus/6.14.5 (based on Gnus v5.8.7) (revision 03) EMY/1.13.8 (Tastes differ) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 12) (Channel Islands) (i386-debian-linux)
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> 
> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?
> 
> (actually, the main problem I'm having is that I know how I want to code
> something like: 
>      Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
> which might be something like:
>      Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
> but sort of what I'm having problems with thinking about is along the
> lines of  
>      Robject <- eval(.Perl("perlfunctionhackery",
>                            RToString(InitialRObject)))
> 
> and my brain isn't kicking into gear).   While I know how to transfer
> data as arrays, and the docs suggest I can transfer tables, and that's
> fine, I'm wondering how to transfer and contort objects, and if the
> above might be a reasonable general sketch, or if there might be
> another approach?
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> BlindGlobe Networks (home/default)	rossini@blindglobe.net	
> UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> 
> FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
> CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
> UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 



-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  2 14:04:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 2000 15:04:53 +0100
Subject: [Rd] RSPerl...
In-Reply-To: rossini@blindglobe.net's message of "02 Nov 2000 05:22:48 -0800"
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
Message-ID: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?

I don't know if it's preferred, but the default thing you get if you
edit() an R object is that the editor is started on the results of
dput() and the result is subjected to eval(parse(...)). Perl might
just be smart enough to handle data in that form.

Another idea would be to use mechanisms like in .Tcl.args where
there's a layer that stringifies R objects (into what? Perl code?)
before passing them to Perl. With Perl's well-known ojections to fixed
rules, that might be tricky, but who knows?

Seeing some sketches of the functionality you want to achieve might be
fruitful. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 14:25:28 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 06:25:28 -0800
Subject: [Rd] RSPerl...
In-Reply-To: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "02 Nov 2000 15:04:53 +0100")
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
 <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
Message-ID: <87u29q30yv.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


    PDB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Duncan - (but sent to R-devel, for any other thoughts?)
    >> 
    >> How do you envision RSPerl being used?  Without having seen the
    >> details, I can think of playing with strings; is there a
    >> preferred incantation for stringification of R objects
    >> (serialization)?

    PDB> I don't know if it's preferred, but the default thing you get
    PDB> if you edit() an R object is that the editor is started on
    PDB> the results of dput() and the result is subjected to
    PDB> eval(parse(...)). Perl might just be smart enough to handle
    PDB> data in that form.

    PDB> Another idea would be to use mechanisms like in .Tcl.args
    PDB> where there's a layer that stringifies R objects (into what? 
    PDB> Perl code?)  before passing them to Perl. With Perl's
    PDB> well-known ojections to fixed rules, that might be tricky,
    PDB> but who knows?

    PDB> Seeing some sketches of the functionality you want to achieve
    PDB> might be fruitful.

Peter, here's 2 of the simpler examples (silly, but please scale for
rationale) of what I'm wondering about:

I'd like to do:

lm.output <- .Perl("PerlToSplitAndFormatLMandUseWebDAVtoPostToMyWWWSite",
                   lm(y~x))

or similarly,

NewData  <- .Perl("GrabAndMerge2CriticalDataSetsFromTheWWW",
                  NHANES.19xx,
                  NHANES.19yy)

where NHANES.zzzz is a list describing the location and
characteristics of a particular data set.

Everything is trivial in the mathematician's sense to me, except for
getting Perl to parse and/or manipulate the R object. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 19:45:27 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 11:45:27 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
Message-ID: <87itq617l4.fsf@jeeves.blindglobe.net>


Is there a simple way to determine at run-time the directory with HTML
version of help pages?

(to see where I'm heading here, if you've got w3 installed under
(X)Emacs on Unix _or_ a Microsoft OS, do 
        w3-find-file 
and load
        $(R_HOME)/library/html/whateverfunction.html

It's slightly nicer than the standard ESS text-help.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov  2 19:58:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 2 Nov 2000 19:58:06 +0000 (GMT)
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <87itq617l4.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>

On 2 Nov 2000, A.J. Rossini wrote:

> Is there a simple way to determine at run-time the directory with HTML
> version of help pages?

The short answer is `no', for the directory depends on the help page!

> (to see where I'm heading here, if you've got w3 installed under
> (X)Emacs on Unix _or_ a Microsoft OS, do 
>         w3-find-file 
> and load
>         $(R_HOME)/library/html/whateverfunction.html

But it's whateverlibrary/package/html/whateverfunction.html

You both overlooked the package part and the possibility of multiple
libraries. (To make sure we have the terminology straight, in R there
are libraries of packages, and in S libraries of sections (S3) or chapters
(S4).  I didn't invent this ....)

Since ESS apparently asks R for the text help page (or it does it just grab
the contents?), it could in principle do the same for the html help page.
That is, help could be asked when running under ESS to return the filename,
not send the file to the OS to be viewed (Windows) or call `browser -remote
"openURL(foo.html)' on it.

As far as I can see only the running R session can do this correctly, and
it tooks several goes to get it right (if we have).  What the right file is
depends on the history of the R session.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 20:05:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 12:05:09 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
 (Prof Brian D Ripley's message of "Thu, 2 Nov 2000 19:58:06 +0000 (GMT)")
References: <87itq617l4.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
Message-ID: <87em0u16oa.fsf@jeeves.blindglobe.net>

>>>>> "PBDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    PBDR> But it's whateverlibrary/package/html/whateverfunction.html

Correct, I'm slipping.

    PBDR> You both overlooked the package part and the possibility of
    PBDR> multiple libraries. (To make sure we have the terminology
    PBDR> straight, in R there are libraries of packages, and in S
    PBDR> libraries of sections (S3) or chapters (S4).  I didn't
    PBDR> invent this ....)

    PBDR> Since ESS apparently asks R for the text help page (or it
    PBDR> does it just grab the contents?), it could in principle do
    PBDR> the same for the html help page.  That is, help could be
    PBDR> asked when running under ESS to return the filename, not
    PBDR> send the file to the OS to be viewed (Windows) or call
    PBDR> `browser -remote "openURL(foo.html)' on it.

ESS does the equivalent of cut-and-paste between the prompts.

So if there was an option to return the html, Emacs could render it
(provided W3 was installed).

This would be an adequate solution, and easier that the one I
proposed. 

    PBDR> As far as I can see only the running R session can do this
    PBDR> correctly, and it tooks several goes to get it right (if we
    PBDR> have).  What the right file is depends on the history of the
    PBDR> R session.

Which was part of the point of querying the session (I think I
mis-stated run-time, but I meant at the time point of the 
        help() 
call.

Thanks, this helps.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov  3 16:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Nov 2000 17:48:16 +0100
Subject: [Rd] bound checking (for "x[] <-") now in R-devel
In-Reply-To: <14849.11678.445464.595856@gargle.gargle.HOWL>
References: <B625EB23.69E2%pflugshaupt@geobot.umnw.ethz.ch>
 <3A006648.EB91FE51@ucsd.edu>
 <14849.11678.445464.595856@gargle.gargle.HOWL>
Message-ID: <14850.60496.903173.357918@gargle.gargle.HOWL>

I'm following a `discussion on R-help'
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "Peter" == Peter Perkins <pperkins@ucsd.edu> writes:
    >>> AUcap30<-0 
    >>> for(i in 1:length(AU)) AUcap30[i] <- min(30,AU[i])

    Peter> am i right in thinking that this is an implicit version of

    Peter> for(i in 1:length(AU)) AUcap30 <- c(AUcap30, min(30,AU[i])) ?

    MM> yes (as others have said on this thread).

    Peter> huh.  i guess i'm surprised that this even works at all.  i
    Peter> don't see any specific mention in section 3 of the FAQ, and a
    Peter> quick look at the R intro documents turned up no mention either.

    MM> (really, I thought it *was* there;  no time to search now..)

    Peter> but i seem to remember that it would not work in S (not that
    Peter> that is necessarily a reason for it not to work in R).

    MM> yes, it has been working in S `since ever' (even before there was S+).

    Peter> i kind of _like_ having array bounds checking -- is "array
    Peter> extension on out of bounds indexing" really the default in R,

    MM> yes (and will be)

    Peter> and is there a way to enforce array bounds checking?

    MM> not currently, but probably, there will be, by

    MM>        options(check.bound = TRUE)

    MM> which is (only partly implemented) in the current development
    MM> version.

Okay.
In today's development version of R 
(use rsync or tomorrow's or Sunday's snapshot R-devel.tar.gz),
there's now in help(options)

 check.bounds: logical, defaulting to `FALSE'.  If true, a warning is
	   produced whenever a ``generalized vector'' (atomic or `list')
	   is extended, by something like `x <- 1:3; x[5] <- 6'.

and here's an example :

    > x <- 1:3 ; x[5] <- 6
				# no warning

    > options(check.bounds = TRUE)
    > x <- 1:3 ; x[5] <- 6
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 5) 
    >


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From montero@kingkong.me.berkeley.edu  Fri Nov  3 20:48:06 2000
From: montero@kingkong.me.berkeley.edu (montero@kingkong.me.berkeley.edu)
Date: Fri, 3 Nov 2000 21:48:06 +0100 (MET)
Subject: [Rd] nls() function is not found (PR#725)
Message-ID: <200011032048.VAA25260@pubhealth.ku.dk>

Full_Name: Michael Montero
Version: 1011
OS: NT4.0
Submission from: (NULL) (128.32.148.191)


I haven't been able to use the nls() function because of the following error:

Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "nls"


Apparently nls() is no where to be found, in the /library directory nls exists
with all its files..

need help..

thanks

mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  3 22:32:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 3 Nov 2000 22:32:00 +0000 (GMT)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011032229380.17193-100000@auk.stats>

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..

But did you load it by library(nls)?

> need help..

If you want to post a bug report, please read the section on bugs in
the FAQ first.  There's nothing here that is reproducible.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Nov  3 22:41:35 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 3 Nov 2000 17:41:35 -0500 (EST)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10011031739410.14656-100000@bolker.zoo.ufl.edu>


  Sorry if this is restating the obvious but: did you load the library by
doing library(nls)?  Do you have nls in the right place -- does library()
list nls?

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..
> 
> need help..
> 
> thanks
> 
> mike
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sat Nov  4 21:23:18 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sat, 4 Nov 2000 21:23:18 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <200010311957.OAA26707@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Tue, Oct 31, 2000 at 02:57:36PM -0500
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com>
Message-ID: <20001104212318.A829@ps2-4.ucl-41>


--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii

On Tue, Oct 31, 2000 at 02:57:36PM -0500, Duncan Temple Lang wrote:
> Just a quick thought....

> many of them are in the R executable (R.bin). Perhaps the linking and
> loading mechanisms in Hurd do not export these symbols from the
> application in a way that shared libraries can find them.  Or it may
> be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
> (although that shouldn't matter).

There is something with the hurd ld.so, but I do not know, what. But I 

1) run 'make test' with --gui=none. It went up till dies with
 
> library("eda") # returns invisibly
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
  /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
Error in library("eda") : .First.lib failed
Execution halted

Everything goes well in Linux with the same source (R-1.1.1)

2) compared the configure.log-s from the Hurd and Linux. There are similar
errors in both (due to the missing tcl/tk and atlas [what is this? I have not
found it anywhere] libraries, and that ld can not find -lmoto and -lz, and
others), but also ones special to the Hurd. Here they are:

--
configure:7358: (Each undeclared identifier is reported only once
configure:7358: for each function it appears in.)
configure:7358: parse error before `me'
configure: failed program was:
#line 7343 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
--
int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
--
configure:7406: gcc -o conftest -g -O2 -I/usr/local/include  conftest.c -lipc  -ldl -lncurses -lm -L/usr/local/lib 1>&5
/usr/bin/ld: cannot find -lipc
collect2: ld returned 1 exit status
configure: failed program was:
#line 7395 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */


3) sent a message to the Hurd folks. One reply was this:

<quote on>

The correct linker options for this sort of issue are the same as on Linux.
Perhaps their build scripts behave differently on Linux than on Hurd.  It
sounds like they expect to link the main executable with --export-dynamic
(aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
are defined in the executable on Linux and on Hurd.

<quote off>

I did this (nm) for both the Hurd and Linux. The resulting list is significantly
different, with a 33k list for Linux and a 3k list for the Hurd. I enclose the
latter (I suppose the previous is correct and reproducible).

General remark:

I use Debian 2.2 (potato) with the stable tools. The hurd uses woody tools.
The only difference apart from this that I use f2c in Linux, bug f77 in the
Hurd. (I will try f2s on the Hurd as well)

Next step?

Thanks,
Zsombor

--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="Rsym.hurd"

08174cfc A _DYNAMIC
08174b04 A _GLOBAL_OFFSET_TABLE_
08174db4 A __bss_start
08174de0 B __ctype_b
08174dc4 B __ctype_tolower
08174ddc B __ctype_toupper
0816cac0 D __data_start
         w __deregister_frame_info
08174dc8 B __environ
         w __gmon_start__
         U __h_errno_location
08174dc0 B __hurd_sigthread_stack_base
08174dd8 B __hurd_sigthread_stack_end
08174de8 B __hurd_sigthread_variables
08174dcc B __hurd_threadvar_stack_mask
08174dd0 B __hurd_threadvar_stack_offset
         U __libc_clk_tck
         U __libc_start_main
         w __register_frame_info
         U __sigsetjmp
         U __strdup
         U __strtod_internal
         U __strtol_internal
         U __xstat
08174db4 A _edata
081a7e40 A _end
08174dc8 V _environ
08106f58 A _etext
08106f3c ? _fini
08049b8c ? _init
         U abort
         U accept
         U acos
         U acosh
         U asin
         U asinh
         U atan
         U atan2
         U atanh
         U bind
         U calloc
         U ceil
         U chdir
         U clearerr
         U close
         U closedir
         U connect
         U cos
         U cosh
         U ctime
         U dlclose
         U dlerror
         U dlopen
         U dlsym
08174dc8 V environ
         U exit
         U exp
         U fclose
         U fflush
         U fgetc
         U fgets
         U fileno
         U finite
         U floor
         U fmod
         U fopen
         U fork
         U fprintf
         U fputc
         U fputs
         U fread
         U free
         U fscanf
         U fwrite
         U getcwd
         U getenv
         U gethostbyaddr
         U gethostbyname
         U getpid
         U hypot
         U isatty
         U isnan
         U listen
         U log
         U log10
         U malloc
0804a730 T matherr
         U memcpy
         U modf
         U opendir
         U pclose
         U popen
         U pow
         U printf
         U rand
080ba6e0 T re_compile_fastmap
080bc884 T re_compile_pattern
080bacd0 T re_match
080bacf4 T re_match_2
081734ec D re_max_failures
080baa8c T re_search
080baab4 T re_search_2
080baa40 T re_set_registers
080b7e90 T re_set_syntax
081734a4 D re_syntax_options
         U readdir
         U realloc
         U recv
080bc8b4 T regcomp
080bcb00 T regerror
080bc9d8 T regexec
080bcb7c T regfree
         U remove
         U select
         U send
         U setlocale
         U sigaction
         U sigaddset
         U sigemptyset
         U siglongjmp
         U signal
081a7e3c B signgam
         U sigprocmask
         U sin
         U sinh
         U socket
         U sprintf
         U sqrt
         U sscanf
08174de4 B stdin
08174dd4 B stdout
         U strcat
         U strchr
         U strcmp
         U strcoll
         U strcpy
         U strncat
         U strncmp
         U strncpy
         U strrchr
         U strtok
         U system
         U tan
         U tanh
         U time
         U times
         U tmpnam
         U ungetc
         U unlink
         U vfprintf
         U vsnprintf
         U vsprintf
         U waitpid
         U xdr_bytes
         U xdr_double
         U xdr_int
         U xdr_string
         U xdrstdio_create

--7JfCtLOvnd9MIVvH--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov  5 00:43:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Nov 2000 01:43:49 +0100
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: Zsombor Cseres-Gergely's message of "Sat, 4 Nov 2000 21:23:18 +0000"
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41>
Message-ID: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>

Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

> There is something with the hurd ld.so, but I do not know, what. But I 
> 
> 1) run 'make test' with --gui=none. It went up till dies with
>  
> > library("eda") # returns invisibly
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
> 	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>   /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
> Error in library("eda") : .First.lib failed
> Execution halted

OK, so that shows that dynamic loading doesn't work.

> 3) sent a message to the Hurd folks. One reply was this:
> 
> <quote on>
> 
> The correct linker options for this sort of issue are the same as on Linux.
> Perhaps their build scripts behave differently on Linux than on Hurd.  It
> sounds like they expect to link the main executable with --export-dynamic
> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
> are defined in the executable on Linux and on Hurd.
> 
> <quote off>

Aha... Actually watching the link step during make would probably show
that -export-dynamic is not among the options. The codes that inserts
that flag during configure would seem to be (in configure or configure.in)

  *linux*)
    main_ldflags="-export-dynamic"
    ;;

which likely will not trigger on the Hurd... In the longer run we
should fix configure, but on a short term, you can fix this by setting

MAIN_LDFLAGS = -export-dynamic

in Makeconf. (It would seem to be spelled with a single hyphen, for
some oddball reason).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov  5 08:06:25 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Nov 2000 09:06:25 +0100 (CET)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
References: <20001031193640.B1043@ps2-4.ucl-41>
 <200010311957.OAA26707@jessie.research.bell-labs.com>
 <20001104212318.A829@ps2-4.ucl-41>
 <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
Message-ID: <14853.5377.881692.164218@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:
>> There is something with the hurd ld.so, but I do not know, what. But I 
>> 
>> 1) run 'make test' with --gui=none. It went up till dies with
>> 
>> > library("eda") # returns invisibly
>> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>> unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>> /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
>> Error in library("eda") : .First.lib failed
>> Execution halted

> OK, so that shows that dynamic loading doesn't work.

>> 3) sent a message to the Hurd folks. One reply was this:
>> 
>> <quote on>
>> 
>> The correct linker options for this sort of issue are the same as on Linux.
>> Perhaps their build scripts behave differently on Linux than on Hurd.  It
>> sounds like they expect to link the main executable with --export-dynamic
>> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
>> are defined in the executable on Linux and on Hurd.
>> 
>> <quote off>

> Aha... Actually watching the link step during make would probably show
> that -export-dynamic is not among the options. The codes that inserts
> that flag during configure would seem to be (in configure or configure.in)

>   *linux*)
>     main_ldflags="-export-dynamic"
>     ;;

> which likely will not trigger on the Hurd... In the longer run we
> should fix configure, but on a short term, you can fix this by setting

> MAIN_LDFLAGS = -export-dynamic

> in Makeconf. (It would seem to be spelled with a single hyphen, for
> some oddball reason).

Actually, can you try a current snapshot of R-devel?

I am in the process of converting all shlib stuff to GNU libtool which
is now used by default ... and I think this change should make Peter's
suggestion happen automagically ...

Thanks && waiting for your findings,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011070615.HAA20961@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 725 *
Subject: nls() function is not found
From: montero@kingkong.me.berkeley.edu
Date: Fri, 3 Nov 2000 21:48:05 +0100 (MET)
* PR# 713 *
Subject: median(c(NA,NA),na.rm=T) fails
From: gnw3@acm.org
Date: Sun, 29 Oct 2000 14:48:09 +0100 (MET)
* PR# 716 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 714 *
Subject: prop.test and x = 0
From: charlie@stat.umn.edu
Date: Sun, 29 Oct 2000 16:29:56 +0100 (MET)
* PR# 719 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 718 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 717 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 721 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:26 MST
* PR# 720 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 724 *
Subject: t.test and n = 2
From: charlie@stat.umn.edu
Date: Thu, 2 Nov 2000 14:53:26 +0100 (MET)
* PR# 723 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 722 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:31 MST
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov  7 12:03:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Nov 2000 13:03:48 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071203.NAA19946@pubhealth.ku.dk>

For R Version 1.1.1 and R-devel (Linux)...

Sorry, there's no time to fix myself now
{e.g., after starting a new device} :

    par(las=3); plot(1:10); par(las=1) ; mtext("mtext")

Gives a left-adjusted (as for  adj = 0)  mtext,
even if  par("adj") is still 0.5

Note that I'm also not convinced that  mtext() should follow  par("las")
as it does in the following {2nd bug ?} :


    par(las=3); plot(1:10); mtext("mtext")

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Nov  7 13:43:59 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 7 Nov 2000 14:43:59 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071343.OAA21680@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> For R Version 1.1.1 and R-devel (Linux)...
> 
> Sorry, there's no time to fix myself now
> {e.g., after starting a new device} :
> 
>     par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
>
> Gives a left-adjusted (as for  adj = 0)  mtext,
> even if  par("adj") is still 0.5


That's not a bug, I suppose. From help of mtext():

adj  adjustment for each string. [......]
     If adj is not a finite value (the default), 
                                       ^^^^^^^ = NA, not from par("adj")
     the value par("las") determines the adjustment. 
     For strings plotted parallel to the axis the default is to centre
the string. 
 

> Note that I'm also not convinced that  mtext() should follow  par("las")
> as it does in the following {2nd bug ?} :
> 
>     par(las=3); plot(1:10); mtext("mtext")


Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a second
bug ...



But I think most users don't expect the behavior of mtext(). Maybe some
changes are useful:

1. The above described "bug", maybe centre all strings as the default
(and not only those strings plotted parallel to the axis), so there are
not so much dependencies between the settings of "adj" and "las".

2. Have a look at:

      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2)
      mtext("text2", adj=0.8)

This is intended (from the help), but I would expect (without reading
the help at first) the following result:
 
      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2, at=5.5)
      mtext("text2", adj=0.8, at=5.5)


Additionally: The argument "adj" in mtext() does not support adj=c(x, y)
as described in ?par.



Regards,
Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Nov 20 09:45:12 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Nov 2000 04:45:12 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
Message-ID: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>


  That's true, but I was looking for a more comprehensive solution (which
would be harder to implement, and have the potential to gobble memory like
crazy) of being able to retrieve an list of past values -- "oh, that
third-to-last answer is the one I needed, I'll take that and put it in
this expression"
  (Besides which, 4 characters are better than 11 but worse than 1 or 2)

  I've moved this to R-devel.

On Tue, 7 Nov 2000, Mark Myatt wrote:

> Yves Gauvreau <cyg@sympatico.ca> writes:
> >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> >
> >Would be nice to have something simpler than .Last.value
> 
> Perhaps I am stating the obvious or being extremely stupid but you can
> create a function:
> 
>         lv <- function()
>          {
>          .Last.value
>          }
> 
> And then use lv() whenever you need .Last.value.
> 
> Mark
> 
> --
> Mark Myatt
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark@myatt.demon.co.uk  Tue Nov  7 16:15:35 2000
From: mark@myatt.demon.co.uk (Mark Myatt)
Date: Tue, 7 Nov 2000 16:15:35 +0000
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
References: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
 <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <AueIzBAnqCC6Ewit@myatt.demon.co.uk>

ben@zoo.ufl.edu writes:
>
>  That's true, but I was looking for a more comprehensive solution (which
>would be harder to implement, and have the potential to gobble memory like
>crazy) of being able to retrieve an list of past values -- "oh, that
>third-to-last answer is the one I needed, I'll take that and put it in
>this expression"
>  (Besides which, 4 characters are better than 11 but worse than 1 or 2)
>
>  I've moved this to R-devel.
>

That is an interesting idea. I have yet to use anything like a stack in
R but I guess that it should be easy enough to do (it might even be
there already). Seems to me that something like the way Forth works ...
with a stack and reverse polish notation might suit you.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Nov  7 18:41:42 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Tue, 7 Nov 2000 10:41:42 -0800 (PST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>


ESS comes fairly close to providing this capability:

M-p  plays comint-previous-input

C-u number M-p plays goes back thru 'number' inputs

comint-previous-input clobbers the existing command line, so to get

> abc(<k-th last command line>)

you would need to type

abc( RET C-u k M-p )

or 

abc( RET M-p ... M-p )

hitting M-p k times

Admittedly, this is NOT the same as having a stack of objects...

Chuck Berry

On Mon, 20 Nov 2000 ben@zoo.ufl.edu wrote:

> 
>   That's true, but I was looking for a more comprehensive solution (which
> would be harder to implement, and have the potential to gobble memory like
> crazy) of being able to retrieve an list of past values -- "oh, that
> third-to-last answer is the one I needed, I'll take that and put it in
> this expression"
>   (Besides which, 4 characters are better than 11 but worse than 1 or 2)
> 
>   I've moved this to R-devel.
> 
> On Tue, 7 Nov 2000, Mark Myatt wrote:
> 
> > Yves Gauvreau <cyg@sympatico.ca> writes:
> > >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> > >
> > >Would be nice to have something simpler than .Last.value
> > 
> > Perhaps I am stating the obvious or being extremely stupid but you can
> > create a function:
> > 
> >         lv <- function()
> >          {
> >          .Last.value
> >          }
> > 
> > And then use lv() whenever you need .Last.value.
> > 
> > Mark
> > 
> > --
> > Mark Myatt
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> > 
> 
> -- 
> 318 Carr Hall                                bolker@zoo.ufl.edu
> Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
> Box 118525                                   (ph)  352-392-5697
> Gainesville, FL 32611-8525                   (fax) 352-392-3704
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Nov  7 19:10:36 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 7 Nov 2000 11:10:36 -0800
Subject: [Rd] error handling
Message-ID: <MPEHJEGLNPNFGJFOJMKNCEIICAAA.Don.Wingate@IntelliChem.com>

Hello R developers,

Platform: Windows 2000.
Compiler: GNU GCC - 2.95.2 (CRTDLL)

I have a C function for evaluating commands using eval(SEXP,SEXP) which is
included in a personal make of R.dll. (Similiar to R_Proxy_evaluate() in
rproxy_impl.c)  Using SETJMP to catch errors works but there is a problem.
For example, the following code:

if (SETJMP(R_ToplevelContext->cjmpbuf)) //  R_ToplevelContext->cjmpbuf
R_GlobalContext->cjmpbuf
	return FALSE;
R_CurrentExpr = eval(R_CurrentExpr , rho);

will appear to work the first time there is an error, but the second error
causes an infinite loop. I have identified the location where the loop
occurs. It is in the function jump_to_toplevel() in errors.c inside the for
loop:

	for (c = R_GlobalContext; c; c = c->nextcontext) { ... }

I have found a work around for this but is seems cludgy and I don't know the
POTENTIAL PROBLEMS that might be introduced. It involves setting up a
context and forcing R_GlobalContext's nextcontext to 0, as in the following
(by the way, this same approach doesn't work in the example above, which is
why I set up a context):

begincontext(&thiscontext, 0, CTXT_GENERIC, R_NilValue, R_NilValue,
R_NilValue);
R_GlobalContext->nextcontext = 0;
if (!SETJMP(thiscontext.cjmpbuf))
	R_CurrentExpr = eval(R_CurrentExpr , rho);
endcontext(&thiscontext);

This code solves my problem, however, in certain cases my calling C++ client
application cannot catch the error (exception?) that is generated, and my
program hard crashes. (A bug in Visual Studio, I think.) For this reason,
using SETJMP(R_ToplevelContext->cjmpbuf) as in the first example would
probably be preferable in my case because it doesn't generate an exception
which must be caught by the C++ client.

Note: I am forcing an error to test this by simply calling matrix(x) on a
variable x which doesn't exist.

I realize that R is meant to run in its own event loop and that this is not
a straight-forward problem. However, if anyone able to provide any insight
into what might be going or how to handle it on I would be greatful.

Thanks,
Don Wingate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Tue Nov  7 20:12:37 2000
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Tue, 7 Nov 2000 21:12:37 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072012.VAA25242@pubhealth.ku.dk>

Hi,

By going through the mailing list archives, I noticed that people use
the arrows() command to add error bars to their plots.  I think there
is a problem when trying to draw arrows of zero length.  In the
following code, certainly the x driver produces an odd-angled line.
In the postscript device, NaNQ values are generated; when the
postscript file is viewed in Ghostview, an error is then generated.

Sample run:

postscript(file="test.ps")
x <- c(0, 1, 2)
y <- c(0, -0.5, 0.3)
s <- c(0, 0.1, 0.1)
plot(x,y)
arrows(x, y-s, x, y+s, code=3, angle=90)
dev.off()

Looking in the file test.ps I see the following (around line 160):

np
103.58 354.24 m
103.58 354.24 l
o
np
NaNQ NaNQ m
103.58 354.24 l
NaNQ NaNQ l

This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).



Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  7 21:58:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Nov 2000 22:58:35 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072158.WAA25628@pubhealth.ku.dk>

On Tue, 7 Nov 2000 stephen@cogsci.ed.ac.uk wrote:

> Hi,
> 
> By going through the mailing list archives, I noticed that people use
> the arrows() command to add error bars to their plots.  I think there
> is a problem when trying to draw arrows of zero length.  In the
> following code, certainly the x driver produces an odd-angled line.
> In the postscript device, NaNQ values are generated; when the
> postscript file is viewed in Ghostview, an error is then generated.
> 
> Sample run:
> 
> postscript(file="test.ps")
> x <- c(0, 1, 2)
> y <- c(0, -0.5, 0.3)
> s <- c(0, 0.1, 0.1)
> plot(x,y)
> arrows(x, y-s, x, y+s, code=3, angle=90)
> dev.off()
> 
> Looking in the file test.ps I see the following (around line 160):
> 
> np
> 103.58 354.24 m
> 103.58 354.24 l
> o
> np
> NaNQ NaNQ m
> 103.58 354.24 l
> NaNQ NaNQ l
> 
> This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).

OS-specific (most OSes do sensible things), and already solved in the
development version.  There was some discussion of this (Christian Ritter)
on R-help AFAIR a while back.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 00:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 01:53:37 +0100
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: "Charles C. Berry"'s message of "Tue, 7 Nov 2000 10:41:42 -0800 (PST)"
References: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>
Message-ID: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>

"Charles C. Berry" <cberry@tajo.ucsd.edu> writes:

> Admittedly, this is NOT the same as having a stack of objects...

It would be no big deal to create a stack of objects resulting from
the last N expressions. What I'm not too sure about is whether you'd
really want that. Notice that it could imply keeping several copies of
a data set in memory. E.g. the value of an assignment like "data <-
transform(data, logx=log(x))" is the value of the RHS.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.e.brown@lancaster.ac.uk  Wed Nov  8 10:56:50 2000
From: p.e.brown@lancaster.ac.uk (p.e.brown@lancaster.ac.uk)
Date: Wed, 8 Nov 2000 11:56:50 +0100 (MET)
Subject: [Rd] installing R on solaris (PR#728)
Message-ID: <200011081056.LAA01780@pubhealth.ku.dk>

Hi.  Our computer guy had some adventures installing R on a solaris
machine, but it's working now.  I'm sending you his mails, please pass
them on to whoever deals with this stuff.

ta.
Patrick

From: Kev Buckley <k.buckley@lancaster.ac.uk>

Trying to install R-1.1.1 on Solaris RCC for you. Looks as though I
meant to before, as I had a TGZ of the previous release lying around.

Anyway, if you have any sway at all with folk who write this package,
can you drop them a line on my behalf (The FAQ says feedback is
welcome, but of course there's no e-mail address to send it to !!!)
saying that:

They ought to document what environmental variables you can use to
override the compilers. We use the SUNWSpro stuff but have the GNU
stuff there as well and I have had to wade through the 'configure.in'
to find out (guess) how to set these.

Turns out to be CC, CXX and FC (for C, C++ and FORTRAN resp.) giving 
me the rather enormous configure line of

CC="/usr/local/packages/SUN/SUNWspro/bin/cc" \
FC="/usr/local/packages/SUN/SUNWspro/bin/f77" \
CXX="/usr/local/packages/SUN/SUNWspro/bin/CC -compat" \
./configure --prefix=/usr/local/packages/R-1.1.1

I suppose CC FC and CXX are pretty standard but other, less savvy folk
aren't going to know this, so it wouldn't do any harm for them, to
mention it.

Anyway it has configured, so lets see if I can build it.

-- 
Regards,

From: Kev Buckley <k.buckley@lancaster.ac.uk>

As for R, you may also like to pass this on:

The following lines in the Makefile blow "make install" out of 
the water

#       @for f in `ls bin/*.$(SHLIBEXT)`; do \
#         $(INSTALL_PROGRAM) $${f} $(rhome)/bin; \
#       done              

There are no files bin/*.$(SHLIBEXT) ( ie bin/*.so )

but once they are commented out, it installs OK and I get an R> prompt
when I type

/usr/local/packages/R-1.1.1/bin/R 

on titanic, so I guess it works

I'll set it up so it appears on the compute nodes and you can try and
submit a job to test it out in batch. Use the path as above when you
invoke it.

Get back to you when you can have a go.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov  8 11:27:39 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 8 Nov 2000 12:27:39 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011081127.MAA02281@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> maechler@stat.math.ethz.ch wrote:
    >>  For R Version 1.1.1 and R-devel (Linux)...
    >> 
    >> Sorry, there's no time to fix myself now {e.g., after starting a new
    >> device} :
    >> 
    >> par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
    >> 
    >> Gives a left-adjusted (as for adj = 0) mtext, even if par("adj") is
    >> still 0.5


    Uwe> That's not a bug, I suppose. From help of mtext():

    Uwe> adj adjustment for each string. [......]  If adj is not a finite
    Uwe> value (the default), ^^^^^^^ = NA, not from par("adj") the value
    Uwe> par("las") determines the adjustment.  For strings plotted
    Uwe> parallel to the axis the default is to centre the string.
 
Yes, it *is* one!

Note that above, I had already reset  "par(las = 1)"
*before* doing  mtext(.) !

--------

    >> Note that I'm also not convinced that mtext() should follow
    >> par("las") as it does in the following {2nd bug ?} :
    >> 
    >> par(las=3); plot(1:10); mtext("mtext")


    Uwe> Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a
    Uwe> second bug ...

yes, and I didn't say so, I said
"not convinced that mtext() should ..."

I think you have good  points below :

    Uwe> But I think most users don't expect the behavior of mtext(). Maybe
    Uwe> some changes are useful:

    Uwe> 1. The above described "bug", maybe centre all strings as the
    Uwe> default (and not only those strings plotted parallel to the axis),
    Uwe> so there are not so much dependencies between the settings of
    Uwe> "adj" and "las".

    Uwe> 2. Have a look at:

    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2)
    Uwe> mtext("text2", adj=0.8)

    Uwe> This is intended (from the help), but I would expect (without reading
    Uwe> the help at first) the following result:
 
    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2, at=5.5)
    Uwe> mtext("text2", adj=0.8, at=5.5)

Request for comments :  
Shouldn't we change the behavior() of mtext() here?

----


    Uwe> Additionally: The argument "adj" in mtext() does not support
    Uwe> adj=c(x, y) as described in ?par.

yes, but the `adj' argument of mtext()  *is*  documented explicitly,
(partly for that reason!).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  8 13:16:56 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 8 Nov 2000 08:16:56 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011080814470.2899-100000@bolker.zoo.ufl.edu>


  I see that this simple solution has troubles.
  I think part of the way Mathematica deals with is by doing slick things
with storage, not storing multiple copies of identical objects.  I
understand that .Alias is scary, but would there be any way of using the
same mechanism to keep a buffer/stack/list/whatever of links to previous
answers?

On 8 Nov 2000, Peter Dalgaard BSA wrote:

> "Charles C. Berry" <cberry@tajo.ucsd.edu> writes:
> 
> > Admittedly, this is NOT the same as having a stack of objects...
> 
> It would be no big deal to create a stack of objects resulting from
> the last N expressions. What I'm not too sure about is whether you'd
> really want that. Notice that it could imply keeping several copies of
> a data set in memory. E.g. the value of an assignment like "data <-
> transform(data, logx=log(x))" is the value of the RHS.
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:09:10 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 17:09:10 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
Message-ID: <200011081609.RAA06781@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >I'm not at all happy with this:
> >
> >Solaris :
> >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> >[1] 15.0524 15.3403
> 
> Hm, OK, so it isn't just me.... I guess it is time to file a bug report,
> should I do it, or will you take care of it?

Done...

(This kind of behaviour has been observed on various platforms and
various compilers, sometimes getting stuck around 15.15 and sometimes
around 14.5. Others report no problems. Very strange. I've seen one
case where it apparently shifted from one regime to the other.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 16:23:12 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Wed, 8 Nov 2000 17:23:12 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081623.RAA06926@pubhealth.ku.dk>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>Done...

Great!

>(This kind of behaviour has been observed on various platforms and
>various compilers, sometimes getting stuck around 15.15 and sometimes
>around 14.5. Others report no problems. Very strange. I've seen one
>case where it apparently shifted from one regime to the other.)

Yes, it does that here too.... The following is a verbatim excerpt from my
session:
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.999031  2.000444  3.002296  3.997795  4.998880  5.995267  7.001894
 [8]  7.999983  9.000267  9.513537 10.507142 11.502634 12.498944 13.498615
[15] 14.502410
> rpois
function (n, lambda)
.Internal(rpois(n, lambda))
> version
         _
platform alphaev6-dec-osf4.0e
arch     alphaev6
os       osf4.0e
system   alphaev6, osf4.0e
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> plot(sapply(1:15, function(n) mean(rpois(1000000, n))), t='l')
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.997961  1.999509  3.000748  3.999825  5.002983  6.004424  6.998825
 [8]  7.997999  8.998341  9.766942 10.781751 11.817181 12.856154 13.900369
[15] 14.999378

And from looking at 11, it is apparent that something happened... Also, by
inspecting the graph produced by plot, it may seem as if it happens in the
plot call... But this is really hard to see, but you might want to have a
look.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:51:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 17:51:04 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: kjetil.kjernsmo@astro.uio.no's message of "Wed, 8 Nov 2000 17:23:12 +0100 (MET)"
References: <200011081623.RAA06926@pubhealth.ku.dk>
Message-ID: <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>

kjetil.kjernsmo@astro.uio.no writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >Done...
> 
> Great!

However, be careful not to reply to the version of the mail without a
PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
repository...

I've poked around a bit and it seems that the problem has to do with
the code that tries to save time by reusing calculations if mu ==
muprev: 

> range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
[1] 14.8692 15.1200

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov  8 16:57:36 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 8 Nov 2000 17:57:36 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
In-Reply-To: <200011081609.RAA06781@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0011081752470.4067-100000@artemis.imbe.med.uni-erlangen.de>



> Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >I'm not at all happy with this:
> > >
> > >Solaris :
> > >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> > >[1] 15.0524 15.3403

I get

> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
[1] 14.3702 14.6212

on SuSE Linux 4.3

hothorn@artemis:~ > gcc -v
Reading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specs
gcc version 2.95.2 19991024 (release)

Torsten

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 17:51:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 18:51:59 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: Peter Dalgaard BSA's message of "08 Nov 2000 17:51:04 +0100"
References: <200011081623.RAA06926@pubhealth.ku.dk> <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> kjetil.kjernsmo@astro.uio.no writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >Done...
> > 
> > Great!
> 
> However, be careful not to reply to the version of the mail without a
> PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
> repository...
> 
> I've poked around a bit and it seems that the problem has to do with
> the code that tries to save time by reusing calculations if mu ==
> muprev: 
> 
> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> [1] 14.8692 15.1200

AHA! Spotted, I think. It is possible to return from rpois in step N,
in which case the initialisations in step P are not performed in that
invokation and not the next times either because it thinks that it has
been done previously.

I'm not quite sure what is the best way to fix it, though. Either kill
muprev when exiting in step N, or make the initialisations currently
in step P before entering step N. Or maybe save two versions of muprev
.. yes, that might be it - will try.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 17:54:30 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Wed, 8 Nov 2000 18:54:30 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.30.0011081852210.24652-100000@alnair.uio.no>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
>> [1] 14.8692 15.1200
>
>AHA! Spotted, I think.

Wow! Great, that was fast!

>It is possible to return from rpois in step N,
>in which case the initialisations in step P are not performed in that
>invokation and not the next times either because it thinks that it has
>been done previously.

Ah, I tried to poke at the code, but got confused rather fast...

>I'm not quite sure what is the best way to fix it, though. Either kill
>muprev when exiting in step N, or make the initialisations currently
>in step P before entering step N. Or maybe save two versions of muprev
>... yes, that might be it - will try.

Great! Thanks, I hope it'll work out. And thanks to all who responded!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 18:07:31 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 19:07:31 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081807.TAA08883@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> >> [1] 14.8692 15.1200
> >
> >AHA! Spotted, I think.
> 
> Wow! Great, that was fast!
> 
> >It is possible to return from rpois in step N,
> >in which case the initialisations in step P are not performed in that
> >invokation and not the next times either because it thinks that it has
> >been done previously.
> 
> Ah, I tried to poke at the code, but got confused rather fast...
> 
> >I'm not quite sure what is the best way to fix it, though. Either kill
> >muprev when exiting in step N, or make the initialisations currently
> >in step P before entering step N. Or maybe save two versions of muprev
> >... yes, that might be it - will try.
> 
> Great! Thanks, I hope it'll work out. And thanks to all who responded!

Seems to have done the trick:

> sapply(1:20,function(n) mean(rpois(100000, n)) )
 [1]  1.00021  1.99588  2.99987  4.00364  4.98532  6.00528  7.00402  8.00046
 [9]  8.98958 10.00336 10.99647 12.00490 13.00697 14.01364 14.99357 15.99705
[17] 16.97901 17.99855 19.00363 20.02180


This is the patch (will commit to r-devel shortly)

[pd@blueberry R]$ cvs diff -u src/nmath/rpois.c 
Index: src/nmath/rpois.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/nmath/rpois.c,v
retrieving revision 1.11
diff -u -r1.11 rpois.c
--- src/nmath/rpois.c   2000/08/30 16:45:16     1.11
+++ src/nmath/rpois.c   2000/11/08 18:09:34
@@ -65,7 +65,7 @@
 
     static double big_l;/* integer "w/o overflow" */
     static int l, m;
-    static double muprev = 0.;/*, muold         = 0.*/
+    static double muprev = 0., muprev2 = 0.;/*, muold   = 0.*/
 
     /* Local Vars  [initialize some for -Wall]: */
     double del, difmuk= 0., E= 0., fk= 0., fx, fy, g, px, py, t, u= 0., v, x;
@@ -160,7 +160,11 @@
     /* Step P. preparations for steps Q and H.
        (recalculations of parameters if necessary) */
 
-    if (new_big_mu) {
+    if (new_big_mu || mu != muprev2) {
+        /* Careful! muprev2 is not always == muprev
+          because one might have exited in step I or S
+          */
+        muprev2 = mu; 
        omega = M_1_SQRT_2PI / s;
        /* The quantities b1, b2, c3, c2, c1, c0 are for the Hermite
         * approximations to the discrete normal probabilities fk. */

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Wed Nov  8 18:59:06 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Wed, 8 Nov 2000 19:59:06 +0100 (MET)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
Message-ID: <200011081859.TAA09094@pubhealth.ku.dk>

viz.


> (function(x,y=a) substitute(x$y))(x)
x$a
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$a
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$x$y


The behavior I expect and want is like that in Splus 3.4:

> (function(x,y=a) substitute(x$y))(x)
x$y
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$y
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$y

Is there a workaround to achieve this behavior under fairly general
circumstances, i.e. when one does not know whether to expect an object
with a component, but encounters one?

Chuck Berry
--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:bqtl, Autoloads, package:base
> 

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov  8 19:33:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 8 Nov 2000 11:33:23 -0800 (PST)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: <200011081859.TAA09094@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>

On Wed, 8 Nov 2000 cberry@tajo.ucsd.edu wrote:

> viz.
> 
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$a
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$a
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$x$y
> 
> 
> The behavior I expect and want is like that in Splus 3.4:
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$y
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$y
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$y


I don't think this is a bug - substitute is performing as intended and as
documented -- but it is an incompatibility.  There are two issues here,
one easy and one difficult.

In your first two examples the problem is that you want to substitute only
for x (though in the second example I don't see why you expect this to
happen).  If you want to substitute only for x you can do
	substitute(x$y,list(x=x))


In the third example you want to perform substitution on the value of a
variable.  This is a useful thing to want to do, and I don't know how to
do it.

eg
     z<-quote(x$y)
     x<-list(y=1:3)
and you want to produce
     list(y=1:3)$y

Suggestions?

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 19:55:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 20:55:20 +0100
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: Thomas Lumley's message of "Wed, 8 Nov 2000 11:33:23 -0800 (PST)"
References: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>
Message-ID: <x2hf5itf13.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

>      z<-quote(x$y)
>      x<-list(y=1:3)
> and you want to produce
>      list(y=1:3)$y
> 
> Suggestions?

Double substitute and eval, but there's a hitch:

> eval(substitute(substitute(z,list(x=x)),list(z=z)))
structure(list(y = c(1, 2, 3)), .Names = "y")$y

which is hardly avoidable since

> dput(x)   
structure(list(y = c(1, 2, 3)), .Names = "y")

However, 

> x<-quote(list(y=1:3))
> eval(substitute(substitute(z,list(x=x)),list(z=z)))
list(y = 1:3)$y


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Nov  8 21:32:49 2000
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 8 Nov 2000 22:32:49 +0100 (MET)
Subject: [Rd] R with redhat 7 (PR#732)
Message-ID: <200011082132.WAA09844@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.1.0 and 1.1.1
OS: Redhat 7 Linux (intel)
Submission from: (NULL) (129.100.45.161)


Hi, I am not sure this is well know problem but I could not find anyone mention
it. 
The problem is related to build R on redhat 7. After got src.rpm and tried to
rebuild it, it failed on testing accuracy. Further it shows that under R,
.Machine gives some numbers that maybe are not correct. I also tried the most
recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
comes with powertools of redhat 7 has exactly the same problem. All three R
gives the same results for .Machine. See the following outputs. 

Thanks
Hao Yu

PS. One system has Pentium III 600Mhz and 256RDRAM, Intel CC820 motherboard;
    Another has Pentium III 800Mhz and 256 SDRAM, ASUS BX motherboard.

***************************************************************************** 
R : Copyright 2000, The R Development Core Team
Version 1.1.1 Patched (November 6, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> .Machine
$double.eps
[1] 1.084202e-19

$double.neg.eps
[1] 5.421011e-20

$double.xmin
[1] 0.25

$double.xmax
[1] 0.5

$double.base
[1] 2

$double.digits
[1] 64

$double.rounding
[1] 5

$double.guard
[1] 0

$double.ulp.digits
[1] -63

$double.neg.ulp.digits
[1] -64

$double.exponent
[1] 1

$double.min.exp
[1] -2

$double.max.exp
[1] -2

$integer.max
[1] 2147483647

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 22:45:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 23:45:06 +0100
Subject: [Rd] R with redhat 7 (PR#732)
In-Reply-To: hyu@stats.uwo.ca's message of "Wed, 8 Nov 2000 22:32:49 +0100 (MET)"
References: <200011082132.WAA09844@pubhealth.ku.dk>
Message-ID: <x2vgtyytfx.fsf@blueberry.kubism.ku.dk>

hyu@stats.uwo.ca writes:

> Full_Name: Hao Yu
> Version: 1.1.0 and 1.1.1
> OS: Redhat 7 Linux (intel)
> Submission from: (NULL) (129.100.45.161)
> 
> 
> Hi, I am not sure this is well know problem but I could not find anyone mention
> it. 
> The problem is related to build R on redhat 7. After got src.rpm and tried to
> rebuild it, it failed on testing accuracy. Further it shows that under R,
> .Machine gives some numbers that maybe are not correct. I also tried the most
> recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
> comes with powertools of redhat 7 has exactly the same problem. All three R
> gives the same results for .Machine. See the following outputs. 

We (R-core + Martyn Plummer who builds the RPM files on CRAN)
discussed this earlier today. It is a problem with the RedHat
"unofficical 2.96" gcc compiler which seems to be overly zealous on
some optimizations. The build is said to work if you build R
unoptimized.

We're strongly considering to say that R *requires* another gcc
compiler rather than trying to work around bugs in a compiler that
should never have been released.

The powertools version appears to have been built by disabling the
regression test (make check)! It might be worth filing a formal bug
report with RedHat on that matter. (It is not merely a matter of
cosmetics, those machine constants actually get used for determining
convergence criteria and the like. Having them set too low could send
algorithms into infinite loops.)

I think Martyn Plummer is about to produce a working RPM based on a
better compiler. However, if you want to compile add-on packages, it
might still be a good idea to install an alternative compiler for
yourself. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 10:41:02 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 11:41:02 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <00be01c049c4$9ce317c0$175dd882@stat.auckland.ac.nz>
Message-ID: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>



Hi Paul,

thank you for responding. I indeed overlooked, that units="inch" gives
stable results, independent of resizing the graphics window on the screen.
And indeed I would find some way fiddling around to get my graphic done.

However I see a general problem here and I would like a general solution:
Obviously we are dealing with two coordinate systems: the graphics device
size (call it representation layer) and the window size on the screen (call
it presentation layer). If I do any graphics programming, I do not want to
depend on arbitrary window sizes. It is nice to know my device has 8 inches
and that text x needs y inches in width. But the adress space in which
plotting is done are the "user" coordinates. So, for the simplest example,
specifying xlim=c(0,1) generates a stable reference WHICH DOES NOT CHANGE ON
RESIZING THE GRAPHICS WINDOW. As strwidth(units="user") DOES CHANGE ON
RESIZING THE GRAPHICS WINDOW the units arguably ARE NOT the user
coordinates.

I tend to believe this is a BUG. Same for units="figure".

I also tend to believe, that resizing a graphics window should rescale the
font size used ON SCREEN, because currently we have the following mixup of
representation layer and presentation layer: if a certain text in cex=1
fills 50% width of my user coordinates on the device, and I decrease window
size, with stable screen font size the same text now fills more than 50%
width. This 'more' is reflected in strwidth(units='user'), but as said
before, the units strwidth(units='user') gives are not user but
user*(device/window). So if a special strwidth measure is needed which
refers to the presentation layer it should be named accordingly. Those
units='user' and units='figure' should return stable measures refering to
the representation layer.

Regards


Jens


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 17:39:00 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 18:39:00 +0100
Subject: [Rd] Another inconsistency concerning device-size vs. window-size
Message-ID: <000701c04a73$f2283670$c10616ac@bbdo.de>


Here is an inconsitency. I guess one of the two is a bug (the latter one).

> x11(width=5, height=5, pointsize=8)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 5.000000 4.989583
> # din unchanged
> dev.off()
null device
          1

> x11(width=5, height=5, pointsize=8)
> plot(0,0)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 2.781250 4.989583
> # din changed  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
> dev.off()
null device
          1

What is din?
Representation layer (device size)?
Presentation layer (window size)?

To my understanding it should be representation layer,
and I really hope a window IS NOT directly a device!

Regards


--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Thu Nov  9 21:22:40 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 10 Nov 2000 10:22:40 +1300
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
References: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>
Message-ID: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>

Hi

[This also a reply to "[Rd] Another inconsistency concerning device-size vs.
window-size"]

I will try to give a brief overview of the way R graphics devices
(conceptually at least) work (to me at least).

Yes a window (x11 or win32) is a device.  Other devices are:  postscript,
png, jpeg, pictex, bmp.  Windows are different to these other devices
because they can be interactively resized.  R treats a change in window size
as a change in the (absolute) physical size of the device.  Perhaps another
way to respond to a window resize would be to retain the same physical
device size and have scroll bars on the window, but I don't think this is
still what you would want (?)

Text size is most often specified (ultmately) as a physical (absolute)
pointsize.  The reason for this (I think) is that ultimately text has to be
big enough to read.  Thus strwidth() will return the same answer in any
absolute set of units (e.g., "inch").  The correct interpretation of
strwidth(mytext, "user") is that it is the physical size of the text
_converted_ into user coordinates.

Automatic resizing of text is a tricky issue.  The text size is
automatically resized by R in some cases (e.g., for multiple figures), but
scaling text size continuously (e.g., with window size) does not tend to
produce useful results (e.g., it is too easy to produce text which is too
small to read).

I suspect that I'm not providing you with the answer you want;  I guess I'm
trying to explain how R works so that you can do what you need to.  Perhaps
it would help me to help you more if you described the graphics task you are
trying to achieve (?).

With respect to the par("din") inconsistency, that _is_ undesirable
behaviour.  The correct behaviour is the second one.  Could you please
submit a bug report for this (including your example).

Thanks

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Fri Nov 10 00:07:05 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Fri, 10 Nov 2000 00:07:05 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <14855.49734.826008.444589@mithrandir.hornik.net>; from Kurt.Hornik@ci.tuwien.ac.at on Tue, Nov 07, 2000 at 09:50:14AM +0100
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001110000705.A1401@ps2-4.ucl-41>

On Tue, Nov 07, 2000 at 09:50:14AM +0100, Kurt Hornik wrote:
> Ok.  You should actually try once more tomorrow.  I had to remove
> libtool support, but the export-dynamic should now happen via a
> platform specific override for GNU Hurd.

It compiled fine, and works fine (ESS does not work fine, but that is another
issue).

> Much better than r-release, as we are getting close to release time.

Great! But if I try to compile it on Potato (Linux), it dies after a long
command with a multitude of .o files with:
xxxpr.o: In function `intpr_':
..... xxxpr.c:28: undefined reference to `i_len'

and many more like this in line 53,78 plus others. I did not have this under
the Hurd. What is this?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olav@melvin.jordforsk.no  Fri Nov 10 09:56:53 2000
From: olav@melvin.jordforsk.no (olav@melvin.jordforsk.no)
Date: Fri, 10 Nov 2000 10:56:53 +0100 (MET)
Subject: [Rd] gnome-support problems (PR#733)
Message-ID: <200011100956.KAA27154@pubhealth.ku.dk>

The compilation fails in <libintl.h>, because some function definitions was
changed in <libgnome/gnome-i18n.h>.
I inserted
#define ENABLE_NLS
before '#include "gnome.h" in devGNOME.c and devGTK.c, and then the 
compilation went ok.

There was also an error in configure, it couldn't find libglade-config.

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status =
 major = 1
 minor = 1.1

by the way: the function "bug.report(...)" failed with the message:
Error in paste("-s '", subject, "' -c", ccaddress, address, "<", file,  : 
	Object "support" not found


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:33:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:33:51 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
Message-ID: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>

Can I suggest that in cov and cor the lines

    if (is.data.frame(x)) 
        x <- as.matrix(x)
    if (is.data.frame(y)) 
        y <- as.matrix(y)

be replaced by 

    if (is.data.frame(x)) 
        x <- data.matrix(x) # coerce logical and factors
    if (is.data.frame(y)) 
        y <- data.matrix(y) # likewise

This would allow things like

> data(iris)
> cor(iris)

which seems like a reasonable thing to do (certainly to my students!).  It
would also give a more informative error message:

> iris$Species <- as.character(iris$Species)
> cor(iris) # modified function
Error in data.matrix(x) : non-numeric data type in frame

as opposed to

> cor(iris) # original function
Error in cor(iris) : missing observations in cov/cor
In addition: Warning message: 
NAs introduced by coercion 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 10 15:52:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 2000 16:52:40 +0100
Subject: [Rd] Modification to cov and cor
In-Reply-To: Jonathan Rougier's message of "Fri, 10 Nov 2000 15:33:51 +0000 (GMT)"
References: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>
Message-ID: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Can I suggest that in cov and cor the lines
> 
>     if (is.data.frame(x)) 
>         x <- as.matrix(x)
>     if (is.data.frame(y)) 
>         y <- as.matrix(y)
> 
> be replaced by 
> 
>     if (is.data.frame(x)) 
>         x <- data.matrix(x) # coerce logical and factors
>     if (is.data.frame(y)) 
>         y <- data.matrix(y) # likewise

I'd oppose that, especially for factors. Correlations between factors
are as likely to be nonsens as remotely meaningful.  

With the current definition of data.matrix (using codes(f)), even more so:

> data.matrix(data.frame(a=1:3,b=factor(c("mild","medium","severe"))))
  a b
1 1 2
2 2 1
3 3 3

!!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:59:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:59:40 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
In-Reply-To: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0011101556040.8632-100000@laplace>

On 10 Nov 2000, Peter Dalgaard BSA wrote:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> 
> > Can I suggest that in cov and cor the lines
> > 
> >     if (is.data.frame(x)) 
> >         x <- as.matrix(x)
> >     if (is.data.frame(y)) 
> >         y <- as.matrix(y)
> > 
> > be replaced by 
> > 
> >     if (is.data.frame(x)) 
> >         x <- data.matrix(x) # coerce logical and factors
> >     if (is.data.frame(y)) 
> >         y <- data.matrix(y) # likewise
> 
> I'd oppose that, especially for factors. Correlations between factors
> are as likely to be nonsens as remotely meaningful.  

I agree with that.  I was thinking that a warning would be
helpful.  Perhaps something along the lines of

if (any(sapply(x, is.factor))) warning("Coercing factor to numeric")

J.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 16:00:18 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 10 Nov 2000 17:00:18 +0100 (MET)
Subject: [Rd] Assigning into a dataframe (PR#734)
Message-ID: <200011101600.RAA03890@pubhealth.ku.dk>

I am not sure whether this is a bug or a feature, but I thought
that these two would have identical effects ...

> data(iris)
> iris[, 5] <- as.character(iris[, 5])
> is.factor(iris[, 5])
[1] TRUE
> is.factor(iris$Species)
[1] TRUE
> data(iris)
> iris$Species <- as.character(iris$Species)
> is.factor(iris[, 5])
[1] FALSE
> is.factor(iris$Species)
[1] FALSE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:patches, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sun Nov 12 23:16:37 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sun, 12 Nov 2000 23:16:37 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <87u29gejck.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Thu, Nov 09, 2000 at 04:55:39PM -0800
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001112231637.A493@ps2-4.ucl-41>

On Thu, Nov 09, 2000 at 04:55:39PM -0800, A.J. Rossini wrote:
> and is there anything emacs-lisp specific that needs to be fixed?

I do not really know. Installing ESS (5.1.18 or 5.1.13) gives an error message
during the config process. When I try to use them (M-x R), they say
'Deselecting deleted buffer' or something like this. I have no other
experience. :(

Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 14 13:11:44 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Nov 2000 14:11:44 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
References: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
Message-ID: <14865.14864.656323.333048@gargle.gargle.HOWL>

The following becomes more and more a topic for an R mailing list,
possibly R-devel.

R for Windows crashes are important and should be discussed and debugged
with the experts -- which are not reading ESS-help  AFAIK.

Martin

>>>>> "ColCun" == Cunningham, Colin A <colin.a.cunningham@intel.com> writes:

    ColCun> In my very brief exposure to R, I have experienced the very
    ColCun> same crash experience when displaying graphics.  I haven't
    ColCun> tried the fixes yet however.

    ColCun> I also am running W2K.  I installed the binary distribution of
    ColCun> R 1.1.1 for Windows.  I'm hopeful of deploying application
    ColCun> engines here and there on W2K and NT servers.  Let me know if
    ColCun> there are tests I can run for the group.  I have several
    ColCun> machines available to me here that run variants of the W2K OS.

    ColCun> Colin

    >> Colin Cunningham
    >> Sr Software Engineer 
    >> Internet Data Analysis 
    >> Business Intelligence & Data Services
    >> Intel Online Services, OSS New Capabilities
    >> *     503.696.7648
    >> * colin.a.cunningham@intel.com
    >> 


    ColCun> -----Original Message-----
    ColCun> From: rossini@blindglobe.net [mailto:rossini@blindglobe.net]
    ColCun> Sent: Friday, November 10, 2000 4:51 PM
    ColCun> To: Erich Neuwirth
    ColCun> Cc: stockton@neptuneandco.com; Goran Arnoldsson;
    ColCun> ess-help@stat.math.ethz.ch
    ColCun> Subject: Re: Gnuserv, NTEmacs, Windows 2000 and R

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> as far as i know, we still have an rterm and especially rgui
    EN> problem under win2k.  on my athlon win2k machine, rterm and
    EN> rgui still crash when i try to do graphics.  a simple
    EN> plot(1:10) crashes both.

    EN> so even after guido's and brian's fix (thanks to both of them)
    EN> there still are some unsolved problems which might be part of
    EN> the emacs ess r problem.

     AJR> Erich - 

     AJR> I'd not seen this posted to R-devel; have you mentioned that to
     AJR> them?  I'll have to get my wife to try R on her new machine (my
     AJR> only access to Win2k, thanks to all the Gods...).

okay now it finally went to R-devel -- quite a bit late so,...

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 14 13:46:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 14 Nov 2000 13:46:43 +0000 (GMT)
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <14865.14864.656323.333048@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>

On Tue, 14 Nov 2000, Martin Maechler wrote:

> The following becomes more and more a topic for an R mailing list,
> possibly R-devel.
> 
> R for Windows crashes are important and should be discussed and debugged
> with the experts -- which are not reading ESS-help  AFAIK.

Yes, but this one is not reproducible even on another W2K Athlon machine (I
had access to one over the w/end).  There are known problems with Athlon
motherboards and particular disks under W2K, for example, so I am not at
all sure this is an R problem.  It's frustrating for Erich I know, but
there is nothing I can see we can do to help.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 14 14:12:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Nov 2000 15:12:17 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: Prof Brian D Ripley's message of "Tue, 14 Nov 2000 13:46:43 +0000 (GMT)"
References: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>
Message-ID: <x28zqmve0u.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Tue, 14 Nov 2000, Martin Maechler wrote:
> 
> > The following becomes more and more a topic for an R mailing list,
> > possibly R-devel.
> > 
> > R for Windows crashes are important and should be discussed and debugged
> > with the experts -- which are not reading ESS-help  AFAIK.
> 
> Yes, but this one is not reproducible even on another W2K Athlon machine (I
> had access to one over the w/end).  There are known problems with Athlon
> motherboards and particular disks under W2K, for example, so I am not at
> all sure this is an R problem.  It's frustrating for Erich I know, but
> there is nothing I can see we can do to help.
> 
> [...]

There are some intermittent problems on other platforms too, and
there's the off chance that this machine is tickling the bug in just
the right way to make it happen more frequently. So gathering
information on Erichs and Colins cases might still be worth it. Don't
hold your breath though...

We're not getting many clues to go by, anyway. Is there a stack trace
or does it just freeze, for instance? What are the symptoms of a
crash? 

[Those Windows dumps are a pest, but if one gets really stubborn, they
make it possible to decipher where in the program the fault occurred.
This is done by disassembling the object files and using a memory map
of the binary. Not that I'm volunteering...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 07:30:29 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 08:30:29 +0100
Subject: [Rd] Re: removing elements that aren't there -- options(check.bounds)
In-Reply-To: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
References: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
Message-ID: <14866.15253.287734.846993@gargle.gargle.HOWL>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
(to R-core,  but MM thinks  R-devel'ers might want to contribute ..)

    TL> Now we have option$check.bounds

{in R 1.2 (unstable) aka "R-devel"}

    TL> could we consider allowing negative
    TL> subscripts outside the array bounds:
    TL> x <- 1:3
    TL> x[-4]
    TL> is an error in R but not in S.

    TL> I think there is a much stronger case for x[-4] to succeed than for
    TL> x[4], which we do allow.

I tend to agree.

Note that currently,  options(check.bounds = TRUE)
only affects `sub-assignment', i.e. the "[<-" functions,
and not `sub-setting' (aka "[") :

    > options(check.bounds = TRUE)
    > x[4]
    [1] NA
    > x[-4]
    Error: subscript out of bounds
    > x[4] <- 4
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 4) 
    > x[-5]
    Error: subscript out of bounds
    > x[5]
    [1] NA

I tend to think that   options(check.bounds = TRUE)
should
	- also warn when  `subsetting' outside given bounds

	- only warn in the above x[-4] case
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 10:31:47 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 11:31:47 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
Message-ID: <002101c04eef$42838640$c10616ac@bbdo.de>



Hi Paul,
Dear R developers,

you wrote

> Yes a window (x11 or win32) is a device.
[snipped]
> R treats a change in window size as a change in the (absolute) physical
size of the device.

Well, as to be expected by Murphy's law, this is the worst possible case.

[snipped]
> With respect to the par("din") inconsistency, that _is_ undesirable
> behaviour.  The correct behaviour is the second one.  Could you please
> submit a bug report for this (including your example).

Paul, I'd not like to submit a bug report to resolve the par("din")
inconsistency by making it consistently 'the second one'. Rather I try to
convince you (and r-devel) making it consistently 'the first one'. I
consider the following features to be indispensable:

1) presentation-layer vs. representation-layer
Keep physical size of the device striktly seperated from window size,
i.e. do not change par("din") with window resizing.

2) Text size
Keep text size stable with respect to device size,
i.e. resize text size with window size

3) strwidth() and strheight()
those should consistently refer to the representation layer, or to be more
general: the R-user/R-programmer should always work within the context of
the representation layer, and he should be isolated against the presentation
layer (where obvioulsy some C-Coding is acting, to put things on screen).

Here is the resoning for this:

a)
Let's start with a rather abstract reason: proper separation of 'layers' is
one of the cornerstones of professional software design. A good example is
the current/old thrive for seperation of content and layout (XML/LaTeX).
Currently R blends representation and presentation, which is no good.

b)
For a more practical reason. Seperating the layers gives more options, more
degrees of freedom to use the software. Currently there is no way to layout
a big device like DIN A3, because the windows always is smaller and it gets
impossible to create a DIN A3 device which can be changed INTERACTIVELY
(i.e. x11()). Seperating layers allows everything which currently works plus
more. For example Font sizes. You argue, that resizing fonts with window
size could result in smalls too small to read. Well, it could. But you would
be free to create a device of exactly the window size, and you would be free
to specify any font size when creating the device. To put ot more
provocative: Currently R has an MS like approach of software trying to be
more intelligent than it's user, something I always hated about products
like MS Word. Currently there are situations without any resonable
workaround in R. Seperating layers gives you every option and full control.
As you suggest, adding something like scrolling or zooming to windows would
be a nice extension. However, proper seperation of layers should have
priority: it's a must.

c)
For a reason of authority and compatibility: the prototype DOES layer
seperation, DOES rescaling of fonts with window size. Let's dare to be as
good as the prototype, or better ...

I hope all this is convincing. As the graphics flexibility of R is one of
the reasons to use it, having reduced degrees of freedom is disappointing.
To put it provocative:

tool or toy, that's the question here

Please give feedback

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 15 10:18:41 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Nov 2000 11:18:41 +0100
Subject: [Rd] standardized add-on package configuration
Message-ID: <14866.25345.561674.760076@mithrandir.hornik.net>

Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
configure script which tries to find headers and libraries required by
the package.  I was wondering whether we could/should standardize how
this is done.

In what follows, suppose package FOO needs functionality BAR.

* One approach would be via command-line arguments to configure.  There
  seems to be no standard for this.  GNOME uses

	--with-FOO-prefix
	--with-FOO-exec-prefix

  in several of its components.  However, this, assumes that the GNU
  standards are followed in the sense that headers go into

	FOO-prefix/include

  and libs go into

	FOO-exec-prefix/lib

  which might not necessarily be the case.

  Alternatively, we could have

	--with-FOO-libraries
	--with-FOO-libs

  and

	--with-FOO-includes
	--with-FOO-headers

  (one of each only, of course).

* The other possibility would be via environment variables, such as
  CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
  package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)

I think the simplest solution would be via CPPFLAGS and LIBS because it
is not package-specific.  So installation would happen via

	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

(did not check if this works now).

Now I did not check all packages, so is there something I may be
overlooking?

(Once we agree on a standard, I would like to document it in R-exts.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 13:18:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 14:18:05 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <002101c04eef$42838640$c10616ac@bbdo.de>
References: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
 <002101c04eef$42838640$c10616ac@bbdo.de>
Message-ID: <14866.36109.332324.617921@gargle.gargle.HOWL>

       .............
       ...........
    Jens> c)

    Jens> For a reason of authority and compatibility: the prototype DOES
    Jens> layer seperation, DOES rescaling of fonts with window size. 
			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
absolutely not!
{unless you are talking Axum graphics which I hardly know and which
 definitely are *NOT* part of the prototype!}

    Jens> Let's dare to be as good as the prototype, or better ...

That has been one of the major motivations behind R development
and I think we *are* slightly better in lower level graphics

    Jens> I hope all this is convincing.
more or less. 
I think there is more than one way of layer separation and we *are* more or
less adhering to one..

Our problem has been to try to remain prototype compatible in many ways and
still do well.  In the realm of graphics this is close to impossible if you
look closely...


    Jens> As the graphics flexibility of R
    Jens> is one of the reasons to use it, having reduced degrees of
    Jens> freedom is disappointing.  To put it provocative:

    Jens>	   tool or toy, that's the question here

  (you could be somewhat kinder here ...)

    Jens> Please give feedback

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 14:18:16 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 15:18:16 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <14866.36109.332324.617921@gargle.gargle.HOWL>
Message-ID: <002401c04f0e$e5f4dc60$c10616ac@bbdo.de>



Hi Martin,

thanks for giving feedback.
>     Jens> For a reason of authority and compatibility: the
> prototype DOES
>     Jens> layer seperation, DOES rescaling of fonts with window size.
> 			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> absolutely not!
> {unless you are talking Axum graphics which I hardly know and which
>  definitely are *NOT* part of the prototype!}

well, my experience with the prototype is somewhat outdated (WinS+3.3 DID
not change device size with window resizing and DID rescaling of fonts with
window size)

> I think there is more than one way of layer separation and we
> *are* more or
> less adhering to one..

well, the dependance of strwidth() on actual windowsize somehow is an
counter-example, don't you think?

>     Jens> As the graphics flexibility of R
>     Jens> is one of the reasons to use it, having reduced degrees of
>     Jens> freedom is disappointing.  To put it provocative:
>
>     Jens>	   tool or toy, that's the question here
>
>   (you could be somewhat kinder here ...)

Definitely. I know that R is an incredible usefull and serious piece of
software, and my hope is to tickle people to make it better. It's not my
intention to really provoke someone. However, I think it is a serious issue,
and the current implementation seriously restricts R's usefullness as an
universal tools for creating data-driven graphs. And, as I tried to explain,
there is no need for this restriction.

More feedback welcome.


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 15:47:45 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 16:47:45 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <200011151434.OAA22205@toucan.stats.ox.ac.uk>
Message-ID: <002501c04f1b$6639a8e0$c10616ac@bbdo.de>



Dear Prof. Brian Ripley,

thank you for answering.

> Can we step back a bit?  I think we could probably do better
> than we do.
> No one envisaged people resizing graphics windows when the system was
> designed (as far as I can see), and locking aspect ratios (which
> S-PLUS now does) when re-sizing looks sensible to me.  We
> might seriously
> want to consider scrollable canvases on graphics devices, too.
>
> I'm afraid I don't fully grasp Jens' points, in part because he is
> coming from a different usage experience (mainly Windows, I believe)
> than I am.  And now (the run up to 1.2.0) is not a good time to think
> about such changes.  But if Jens could put together a proposal for the
> wishlist on R-bugs, we can return to it.

I am willing to do that, but let me now explain the problem, which triggered
my conclusions.

BTW, I'm also on linux and under linux I face the same trouble.

I had to optimize a very complex graph which was representing some
underlying data structure.

1) It required DIN-A3 (bigger than screen)
2) It required programming and use of strwidth(), as I needed an automated
way to transform data-to-graph
3) It required interacting based on locator() to change the underlying data
basis and replotting data-to-graph
4) (Thus) It required seeing the whole device during interaction, thus
probably scroll_bars/zooming would not help.
5) It required some fine tuning (text wrapping, font size and other
parameters) ON SCREEN before printing.

E.g. there was text surrounded by boxes, and the text had to fit within
boxes tightly. Relatively to the DIN-A3-device the text was small, but it
had to be that size to get a realistic impression of space needs.

Does my point get clear now?

However, beside this particular problem, I'm convinced that a proper
seperation between device features and window features would be very
usefull.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov 15 15:53:06 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 15 Nov 2000 16:53:06 +0100 (MET)
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <14866.25345.561674.760076@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>


On Wed, 15 Nov 2000, Kurt Hornik wrote:

> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
> configure script which tries to find headers and libraries required by
> the package.  I was wondering whether we could/should standardize how
> this is done.

IMO the main problem is that header files and libraries are not in
/usr/include or /usr/lib but, for example, for mysql in
/usr/local/mysql/{include,lib} by default. A package should build without
interaction if headers and libs are in their default place. 

> 
> In what follows, suppose package FOO needs functionality BAR.
> 
> * One approach would be via command-line arguments to configure.  There
>   seems to be no standard for this.  GNOME uses
> 
> 	--with-FOO-prefix
> 	--with-FOO-exec-prefix
> 
>   in several of its components.  However, this, assumes that the GNU
>   standards are followed in the sense that headers go into
> 
> 	FOO-prefix/include
> 
>   and libs go into
> 
> 	FOO-exec-prefix/lib
> 
>   which might not necessarily be the case.
> 
>   Alternatively, we could have
> 
> 	--with-FOO-libraries
> 	--with-FOO-libs
> 
>   and
> 
> 	--with-FOO-includes
> 	--with-FOO-headers
> 
>   (one of each only, of course).

Can one define default values here?

> 
> * The other possibility would be via environment variables, such as
>   CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>   package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
> 
> I think the simplest solution would be via CPPFLAGS and LIBS because it
> is not package-specific.  So installation would happen via
> 
> 	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

Maybe it is possible to check if CPPFLAGS is empty (replace it with a
default value) or not (try to build the package and give an error message
if it failed, pointing to the appropriate environment variable)?

> 
> (did not check if this works now).
> 
> Now I did not check all packages, so is there something I may be
> overlooking?
> 
> (Once we agree on a standard, I would like to document it in R-exts.)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Nov 16 08:32:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Nov 2000 09:32:35 +0100
Subject: [Rd] Re: [S] How to make tiny postscript files
In-Reply-To: <3A12E8BB.C4CE6709@virginia.edu>
References: <3A12E8BB.C4CE6709@virginia.edu>
Message-ID: <14867.39843.10568.102988@gargle.gargle.HOWL>

>>>>> "Frank" == Frank E Harrell <fharrell@virginia.edu> writes:

    Frank> I am using S-Plus 6.0 Release 1 on Linux and want to make
    Frank> an encapsulated postscript graphics file of width 2 inches
    Frank> and height 0.5 inch.  When I use 

    Frank> postscript(filename, height=.5,width=2,hor=F)

    Frank> I get 

    Frank> GR-Z Error from Routine zzpltz
....

    Frank> I have also tried onefile=T, print.it=F, maximize=T but this does not
    Frank> seem to make a difference.  Has anyone had luck producing tiny
    Frank> postscript files who would share the commands they used?  Thanks.

The above works in R  __when__ you additionally say

  par(mex = .5) #or something like it,  par(mar =...),  par(mgp= ...)

in order to ensure that the outer margins do not reduce the plot region to
non-positive extents..

IMHO this is another example of basic design deficiciencies of S graphics
(including R and S-plus)...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 16 09:47:41 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 16 Nov 2000 10:47:41 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001116091623.A12130@stat1.stat.auckland.ac.nz>
Message-ID: <002601c04fb2$441c9230$c10616ac@bbdo.de>



Hello Ross,

thank you for entering this discussion.

> Every version of Splus I've looked at (I've not seen 2000 yet) simply
> lied about the device size.  The device remains the size it
> was when it
> was created.  I presume that the rendering code just carries out a
> stretch of coordinates.  If you do the following
>
> 	par("din")
> 	# stretch the window with the mouse
> 	par("din")
>
> you'll see that there is no change.  As far as I could tell,
> the initial
> size of the device is used for ever.

Yes, and for me this behaviour would be great: you create a bigger than
screen device like DIN A3, you can see it at the screen at whatever
windowsize you want and it alway tells the truth about it's real size: DIN
A3. This TRUTH becomes a LIE only, if one considers representation layer and
presentation layer to be the same.

> The results of this are unfortunate when you are relying on having
> equal units in the x and y directions.  Drawing maps or displaying
> the results of some sort of ordination can be badly affected.  Also,
> there can be obviously incorrect drawing of tickmarks and annotation
> (this is usually only apparent for extreme reshaping).

This is where aspect ratio locking would help (for the whole device, not
only for the plot area).

> The philosophy in R is that when a window is resized, the graph should
> be redrawn so that it will appear as it would if it had been created
> in a window with the new size.

This makes it IMPOSSIBLE to work on a device bigger than the screen.

> If we are going to change the graphics, let's please throw the present
> system out completely.

If you are going to change graphics from scratch, PLEASE do use this
opportunity to really seperate representation layer from screen
presentation.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Nov 17 09:40:31 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 17 Nov 2000 22:40:31 +1300
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: =?iso-8859-1?Q?=3C002601c04fb2$441c9230$c10616ac=40bbdo=2Ede=3E=3B_from_?=
 =?iso-8859-1?Q?Jens_Oehlschl=E4gel_on_Thu=2C_Nov_16=2C_2000_at_10:47:41A?=
 =?iso-8859-1?Q?M_+0100?=
References: <20001116091623.A12130@stat1.stat.auckland.ac.nz> <002601c04fb2$441c9230$c10616ac@bbdo.de>
Message-ID: <20001117224031.A21008@stat1.stat.auckland.ac.nz>

On Thu, Nov 16, 2000 at 10:47:41AM +0100, Jens Oehlschlgel wrote:
> 
> Hello Ross,
> 
> thank you for entering this discussion.
> 
> [ some burbling by Ross omitted ... ]
> 
> Yes, and for me this behaviour would be great: you create a bigger than
> screen device like DIN A3, you can see it at the screen at whatever
> windowsize you want and it alway tells the truth about it's real size: DIN
> A3. This TRUTH becomes a LIE only, if one considers representation layer and
> presentation layer to be the same.
> 
> > The results of this are unfortunate when you are relying on having
> > equal units in the x and y directions.  Drawing maps or displaying
> > the results of some sort of ordination can be badly affected.  Also,
> > there can be obviously incorrect drawing of tickmarks and annotation
> > (this is usually only apparent for extreme reshaping).
> 
> This is where aspect ratio locking would help (for the whole device, not
> only for the plot area).
> 
> > The philosophy in R is that when a window is resized, the graph should
> > be redrawn so that it will appear as it would if it had been created
> > in a window with the new size.
> 
> This makes it IMPOSSIBLE to work on a device bigger than the screen.


  Paul and I talked a little about this today.

  The issue is really just a Gui one, not one for the underlying graphics
  system.  Both the scrollbar approach and the window content scaling
  one can be handled in a very superficial way by device drivers without
  any changes at all to the underlying R graphics system.  (I suspect
  that this is how Splus adresses the problem).

  The behavior I want requires a deeper interaction with the graphics
  system, but it is the behavior already in place.

  Enabling the behaviors you and Brian prefer is just a matter of flicking
  a switch in the driver so that it no longer tells the graphics system
  when there has been a change in the window configuration and having
  the driver handle the scaling or scrolling.

  So, everyone can have what they want ...

  The real problem is that we don't have enough of a Gui (yet) to make
  the behavior happen in a cross-platform way.

Ros
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Fri Nov 17 10:25:39 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Fri, 17 Nov 2000 11:25:39 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001117224031.A21008@stat1.stat.auckland.ac.nz>
Message-ID: <002901c05080$bc00f830$c10616ac@bbdo.de>



Dear Ross, Dear Paul,

thank you very much for this good news.

I am deeply impressed about the speed with which my suggestion has been
discussed and improvements are planned.
I can neither remember nor imagine this to happen with any piece of
commercial software.

I wish a relaxed weekend to all of you at r-devel who contribute to such an
important system.
Regards


Jens


>   Paul and I talked a little about this today.
>
>   The issue is really just a Gui one, not one for the
> underlying graphics
>   system.  Both the scrollbar approach and the window content scaling
>   one can be handled in a very superficial way by device
> drivers without
>   any changes at all to the underlying R graphics system.  (I suspect
>   that this is how Splus adresses the problem).
>
>   The behavior I want requires a deeper interaction with the graphics
>   system, but it is the behavior already in place.
>
>   Enabling the behaviors you and Brian prefer is just a
> matter of flicking
>   a switch in the driver so that it no longer tells the
> graphics system
>   when there has been a change in the window configuration and having
>   the driver handle the scaling or scrolling.
>
>   So, everyone can have what they want ...
>
>   The real problem is that we don't have enough of a Gui (yet) to make
>   the behavior happen in a cross-platform way.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Nov 17 14:43:41 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 17 Nov 2000 09:43:41 -0500
Subject: [Rd] Crash from windres in WinME
Message-ID: <3a184329.343746558@fisher.stats.uwo.ca>

In preparation for doing a bit more work on RStreams, I installed the
recommended Windows tools to compile R.  When the makefile got to a
line calling "windres" (a resource compiler?), it crashed, and left
WinME unstable (even more than usually!).  Windres is one of the GNU
binutils, so I installed the newest build, but got the same crash.

Has anyone else seen this particular problem before elsewhere, and
knows a workaround, or is this just one more reason not to use WinME?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 17 15:05:27 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 17 Nov 2000 15:05:27 +0000 (GMT)
Subject: [Rd] Crash from windres in WinME
Message-ID: <200011171505.PAA29537@toucan.stats.ox.ac.uk>


> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Fri, 17 Nov 2000 09:43:41 -0500
> 
> In preparation for doing a bit more work on RStreams, I installed the
> recommended Windows tools to compile R.  When the makefile got to a
> line calling "windres" (a resource compiler?), it crashed, and left
> WinME unstable (even more than usually!).  Windres is one of the GNU
> binutils, so I installed the newest build, but got the same crash.
> 
> Has anyone else seen this particular problem before elsewhere, and
> knows a workaround, or is this just one more reason not to use WinME?

Neither NT4 nor 98SE give me any problems.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov 17 15:35:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Nov 2000 16:35:05 +0100
Subject: [Rd] Re: convolve() design bug
In-Reply-To: <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
References: <3A1407B5.9CE04DD@noaa.gov>
 <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
Message-ID: <14869.20521.353429.289639@gargle.gargle.HOWL>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes   --- on R-help :

      ...

  Bill> Use convolve().  Here is an example:
  Bill> #Bracewell The Fourier transform and its applications, chap 3 (p.32 in 2nd
  Bill> #edition): {2 2 3 3 4} * {1 1 2} = {2 4 9 10 13 10 8}
  Bill> x<-c(2,2,3,3,4)
  Bill> h<-c(1,1,2)
  Bill> out<-convolve(x,rev(h),type="o") #need to do rev due to fault in R code

  Bill> I pointed it out several times to the R-developers that
  Bill> convolve() should do convolution by default! However they prefer
  Bill> it to do correlation by default (which makes no sense to
  Bill> me). Anyway the workaround is to use rev(h).

Dear Bill,
as one of those not too responsive way back, here are some 
non-convincing reasons: 

  At that time, we had density rely on convolve's behavior back then,
  and the it was old legacy R code on which others might have relied, 
  etc, etc

But then, I must admit I had forgotten for a while and later never felt
urged anymore.

Can we have something like a ``survey'' ?
Does anybody heavily rely on convolve()'s current behavior ?
{teaching / packages / ...}

Bill, can you (again, I know, exuse us!) detail your suggested changes,
ideally by sending patches against the current *.R and *.Rd files ?
Thank you.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frost@pocketmail.com  Fri Nov 17 19:46:00 2000
From: frost@pocketmail.com (frost@pocketmail.com)
Date: Fri, 17 Nov 2000 20:46:00 +0100 (MET)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
Message-ID: <200011171946.UAA11423@pubhealth.ku.dk>

Full_Name: Keith L. Frost
Version: 1.1.1
OS: Linux Mandrake 7.1
Submission from: (NULL) (199.182.77.3)


x <- 1:256;
dim(x) <- c(16,16);
image(x,col=gray(0:255/255));
dev.print();

Sometimes errored out with a complaint about hp not defined.  I looked at the 
source code for dev.print, and found that in 3--4 places, variable names for 
paper width and height were mistakenly named wp and wh, instead of wp and hp.
Changing references to wh to references to hp fixed the problem.
Here is the new version of dev.print:

function (device = postscript, ...)
{
    current.device <- dev.cur()
    nm <- names(current.device)[1]
    if (nm == "null device")
        stop("no device to print from")
    if (nm != "X11" && nm != "windows" && nm != "gtk" && nm !=
        "gnome")
        stop("can only print from screen device")
    oc <- match.call()
    oc[[1]] <- as.name("dev.copy")
    oc$device <- device
    din <- par("din")
    w <- din[1]
    h <- din[2]
    if (missing(device)) {
        if (is.null(oc$file))
            oc$file <- ""
        hz <- oc$horizontal
        wp <- 8
        hp <- 10
        paper <- oc$paper
        if (is.null(paper))
            paper <- ps.options()$paper
        if (paper == "default")
            paper <- getOption("papersize")
        paper <- tolower(paper)
        if (paper == "a4") {
            wp <- 8
            hp <- 14 - 0.5
        }
        if (paper == "legal") {
            wp <- 8.27 - 0.5
            hp <- 11.69 - 0.5
        }
        if (paper == "executive") {
            wp <- 7.25 - 0.5
            hp <- 10.5 - 0.5
        }
        if (is.null(hz))
            hz <- ps.options()$horizontal
        if (w > wp && w < hp && h < wp) {
            horizontal <- TRUE
        }
        else if (h > wp && h < hp && w < wp) {
            horizontal <- FALSE
        }
        else {
            h0 <- ifelse(hz, wp, hp)
            if (h > h0) {
                w <- w * h0/h
                h <- h0
            }
            w0 <- ifelse(hz, hp, wp)
            if (w > w0) {
                h <- h * w0/w
                w <- w0
            }
        }
        if (is.null(oc$pointsize)) {
            pt <- ps.options()$pointsize
            oc$pointsize <- pt * w/din[1]
        }
    }
    if (is.null(oc$width))
        oc$width <- w
    if (is.null(oc$height))
        oc$height <- h
    dev.off(eval.parent(oc))
    dev.set(current.device)
} 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 17 21:28:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Nov 2000 21:28:03 +0000 (GMT)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
In-Reply-To: <200011171946.UAA11423@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011172127100.16709-100000@auk.stats>

On Fri, 17 Nov 2000 frost@pocketmail.com wrote:

> Full_Name: Keith L. Frost
> Version: 1.1.1
> OS: Linux Mandrake 7.1
> Submission from: (NULL) (199.182.77.3)
> 
> 
> x <- 1:256;
> dim(x) <- c(16,16);
> image(x,col=gray(0:255/255));
> dev.print();
> 
> Sometimes errored out with a complaint about hp not defined.  I looked at the 
> source code for dev.print, and found that in 3--4 places, variable names for 
> paper width and height were mistakenly named wp and wh, instead of wp and hp.
> Changing references to wh to references to hp fixed the problem.
> Here is the new version of dev.print:

Already fixed (and more) for 1.2.0 in the development version.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Nov 18 09:39:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 18 Nov 2000 10:39:00 +0100
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
References: <14866.25345.561674.760076@mithrandir.hornik.net>
 <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14870.20020.229105.127267@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> On Wed, 15 Nov 2000, Kurt Hornik wrote:

>> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
>> configure script which tries to find headers and libraries required by
>> the package.  I was wondering whether we could/should standardize how
>> this is done.

> IMO the main problem is that header files and libraries are not in
> /usr/include or /usr/lib but, for example, for mysql in
> /usr/local/mysql/{include,lib} by default. A package should build
> without interaction if headers and libs are in their default place.

Your mileage may vary on what `default' places are.  Basically, there
are two philosophies.  The more traditional one would be to have a
package/type layout, as you indicate above.  The modern style, used and
recommended e.g. in the GNU, Debian, and TeX/MF standards, is to have
type/package or type instead.

E.g., when I install mysql on Debian, I get the libraries in /usr/lib
and the headers in /usr/include/mysql.

>> 
>> In what follows, suppose package FOO needs functionality BAR.
>> 
>> * One approach would be via command-line arguments to configure.  There
>> seems to be no standard for this.  GNOME uses
>> 
>> --with-FOO-prefix
>> --with-FOO-exec-prefix
>> 
>> in several of its components.  However, this, assumes that the GNU
>> standards are followed in the sense that headers go into
>> 
>> FOO-prefix/include
>> 
>> and libs go into
>> 
>> FOO-exec-prefix/lib
>> 
>> which might not necessarily be the case.
>> 
>> Alternatively, we could have
>> 
>> --with-FOO-libraries
>> --with-FOO-libs
>> 
>> and
>> 
>> --with-FOO-includes
>> --with-FOO-headers
>> 
>> (one of each only, of course).

> Can one define default values here?

Yes, of course.

>> 
>> * The other possibility would be via environment variables, such as
>> CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>> package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
>> 
>> I think the simplest solution would be via CPPFLAGS and LIBS because it
>> is not package-specific.  So installation would happen via
>> 
>> CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

> Maybe it is possible to check if CPPFLAGS is empty (replace it with a
> default value) or not (try to build the package and give an error
> message if it failed, pointing to the appropriate environment
> variable)?

That'w what I had in mind.

The above should be

* much nicer to use than doing something like

	R CMD INSTALL \
	  --configure-args="--with-foo-libs=/some/path ..." \
	  /path/to/pkg.tar.gz

* would be consistent with what is used to configure the R base system

* and would be uniform across packages.

On the other hand, it is a bit dangerous .. hmm, as we actually have
PKG_CPPFLAGS and PKG_LIBS, maybe we should use these variables instead?

Will think some more about this.

>> 
>> (did not check if this works now).
>> 
>> Now I did not check all packages, so is there something I may be
>> overlooking?
>> 
>> (Once we agree on a standard, I would like to document it in R-exts.)
>> 
>> -k

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 15:07:29 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 15:07:29 GMT
Subject: [Rd] Windres problem resolved
Message-ID: <3a169abb.5459260@smtp1.sympatico.ca>

I reported the other day that the utility "windres" crashed in Windows
ME.  I've determined that the problem is an incompatibility with the
Norton Anti-virus software that was installed on my machine.  With
that package disabled, windres works fine.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Nov 18 21:01:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Nov 2000 15:01:02 -0600
Subject: [Rd] PostgreSQL book
Message-ID: <6rem09q9kh.fsf@franz.stat.wisc.edu>

Bruce Momjian has just published a book on PostgreSQL that should be
available from bookstores in the next month or so.  It can be
downloaded as a PDF file now from
              http://www.postgresql.org/docs/awbook.html

I found the book to be well written and informative.  I recommend it.

Especially if you have to deal with large data sets, the combination
of relational databases and R is very useful.  Currently I am working
on a project where we have information on 3.5 million subjects
amounting to a total of 10.5 million records.  Processing these in
MySQL and PostgreSQL is much, much more efficient than what my
colleagues were doing with SAS and SPSS.  We took a sample of 180,000
subjects (550,000 records) and fit multilevel (linear mixed-effects)
models using lme in R after accessing the data from the relational
database.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 23:15:26 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 23:15:26 GMT
Subject: [Rd] Getting debug information in DLL?
Message-ID: <3a1707ff.2857190@smtp1.sympatico.ca>

The rw-faq says that 

  make DEBUG=T pkg-Rstreams

should make a copy of the Rstreams.dll with debugging information
included.  However, the DLL that gets produced is byte-by-byte
identical to the one without debug information, and gdb doesn't appear
to be able to see any symbols or source code.

Any suggestions?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Sun Nov 19 07:57:14 2000
From: tdye@lava.net (tdye@lava.net)
Date: Sun, 19 Nov 2000 08:57:14 +0100 (MET)
Subject: [Rd] Bug in stars function (PR#738)
Message-ID: <200011190757.IAA15668@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi all,

I've discovered and (hopefully) fixed a bug in the stars function I wrote
some time ago.  A corrected function is attached.

Please let me know if you have any questions or comments.

Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
Content-Description: bug fix
Content-Disposition: attachment; filename="new-stars.r"

ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM
LCBrZXkubG9jID0gTlVMTCwga2V5LmxhYmVscyA9IE5VTEwsIGRyYXcuc2Vn
bWVudHMgPSBGQUxTRSwgDQogICAgICAgICAgICBkcmF3LmF4ZXMgPSBGQUxT
RSwgLi4uKSANCnsNCiAgaWYgKGlzLmRhdGEuZnJhbWUoeCkpIA0KICAgIHgg
PC0gYXMubWF0cml4KHgpDQogIGVsc2UgaWYgKCFpcy5tYXRyaXgoeCkpIA0K
ICAgIHN0b3AoInggbXVzdCBiZSBhIG1hdHJpeCBvciBhIGRhdGEgZnJhbWUi
KQ0KICBpZiAoIWlzLm51bWVyaWMoeCkpIA0KICAgIHN0b3AoImRhdGEgaW4g
eCBtdXN0IGJlIG51bWVyaWMiKQ0KICBuLmxvYyA8LSBucm93KHgpDQogIG4u
c2VnIDwtIG5jb2woeCkNCiAgZGVnIDwtIHBpLzE4MA0KICBzZWcuY29sb3Jz
IDwtIGlmICghaXMubnVsbChjb2xvcnMpKSANCiAgICBjb2xvcnMNCiAgZWxz
ZSAxOm4uc2VnDQogIGlmIChpcy5udWxsKGxvY2F0aW9ucykpIHsNCiAgICBt
YXQuZGltIDwtIGNlaWxpbmcoc3FydChuLmxvYykpDQogICAgdGVtcC5sb2Mu
MSA8LSByZXAoeCA9IDIuMSAqIDE6bWF0LmRpbSwgdGltZXMgPSBtYXQuZGlt
LCANCiAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBuLmxvYykNCiAg
ICB0ZW1wLmxvYy4yIDwtIHJlcCh4ID0gMi4xICogbWF0LmRpbToxLCByZXAo
eCA9IG1hdC5kaW0sIA0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZXMg
PSBtYXQuZGltKSwgbGVuZ3RoID0gbi5sb2MpDQogICAgbG9jIDwtIG1hdHJp
eChkYXRhID0gYyh0ZW1wLmxvYy4xLCB0ZW1wLmxvYy4yKSwgbmNvbCA9IDIp
DQogIH0NCiAgZWxzZSB7DQogICAgaWYgKCFpcy5tYXRyaXgobG9jYXRpb25z
KSB8fCBuY29sKGxvY2F0aW9ucykgIT0gMikgDQogICAgICBzdG9wKCJsb2Nh
dGlvbnMgbXVzdCBiZSBhIDItY29sdW1uIG1hdHJpeC4iKQ0KICAgIGxvYyA8
LSAuQWxpYXMobG9jYXRpb25zKQ0KICB9DQogIGlmIChuLmxvYyAhPSBucm93
KGxvYykpIA0KICAgIHN0b3AoIm51bWJlciBvZiByb3dzIG9mIGxvY2F0aW9u
cyBhbmQgeCBtdXN0IGJlIGVxdWFsLiIpDQogIGFuZ2xlcyA8LSBpZiAoZnVs
bCkgDQogICAgc2VxKDAsIDIgKiBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVst
KG4uc2VnICsgMSldDQogIGVsc2UgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAg
IHNlcSgwLCBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVstKG4uc2VnICsgMSld
DQogIGVsc2Ugc2VxKDAsIHBpLCBsZW5ndGggPSBuLnNlZykNCiAgaWYgKGxl
bmd0aChhbmdsZXMpICE9IG4uc2VnKSANCiAgICBzdG9wKCJsZW5ndGgoYW5n
bGVzKSBtdXN0IGJlIHRoZSBzYW1lIGFzIG5jb2woeCkiKQ0KICB4W2lzLm5h
KHgpXSA8LSAwDQogIGlmIChzY2FsZSkgDQogICAgeCA8LSBzd2VlcCh4LCAy
LCBhcHBseSh4LCAyLCBtYXgpLCBGVU4gPSAiLyIpDQojIENvbHVtbnMgb2Yg
MHMgd2lsbCBwdXQgTkFzIGluIHgsIG5leHQgbGluZSBnZXRzIHJpZCBvZiB0
aGVtDQogIHhbaXMubmEoeCldIDwtIDANCiAgeCA8LSB4ICogbGVuDQogIHRl
bXAueGxpbSA8LSBpZiAoaXMubnVsbCh4bGltaXQpKSANCiAgICByYW5nZShs
b2NbLCAxXSArIG1heCh4KSwgbG9jWywgMV0gLSBtYXgoeCkpDQogIGVsc2Ug
eGxpbWl0DQogIHRlbXAueWxpbSA8LSBpZiAoaXMubnVsbCh5bGltaXQpKSAN
CiAgICByYW5nZShsb2NbLCAyXSArIG1heCh4KSwgbG9jWywgMl0gLSBtYXgo
eCkpDQogIGVsc2UgeWxpbWl0DQogIG9wYXIgPC0gcGFyKG5vLnJlYWRvbmx5
ID0gVFJVRSkNCiAgb24uZXhpdChwYXIob3BhcikpDQogIHBsb3QoMCwgdHlw
ZSA9ICJuIiwgLi4uLCB4bGltID0gdGVtcC54bGltLCB5bGltID0gdGVtcC55
bGltLCANCiAgICAgICB4bGFiID0gIiIsIHlsYWIgPSAiIiwgYXNwID0gMSwg
YXhlcyA9IGRyYXcuYXhlcykNCiAgaWYgKGRyYXcuc2VnbWVudHMpIHsNCiAg
ICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAgcG9seS54IDwtIE5BDQog
ICAgICBwb2x5LnkgPC0gTkENCiAgICAgIHN0YXJ0LnguY29vcmQgPC0geFtp
LCBdICogY29zKGFuZ2xlcykgKyBsb2NbaSwgMV0NCiAgICAgIHN0YXJ0Lnku
Y29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xlcykgKyBsb2NbaSwgMl0NCiAg
ICAgIGZvciAoaiBpbiAxOm4uc2VnKSB7DQogICAgICAgIHBvbHkueCA8LSBj
KHBvbHkueCwgbG9jW2ksIDFdLCBzdGFydC54LmNvb3JkW2pdKQ0KICAgICAg
ICBwb2x5LnkgPC0gYyhwb2x5LnksIGxvY1tpLCAyXSwgc3RhcnQueS5jb29y
ZFtqXSkNCiAgICAgICAgbmV4dC5hbmdsZSA8LSBpZiAoaiA8IG4uc2VnKSAN
CiAgICAgICAgICBhbmdsZXNbaiArIDFdDQogICAgICAgIGVsc2UgKGlmIChm
dWxsKSANCiAgICAgICAgICAgICAgMzYwDQogICAgICAgIGVsc2UgMTgwKSAq
IGRlZw0KICAgICAgICBrIDwtIHNlcShmcm9tID0gYW5nbGVzW2pdLCB0byA9
IG5leHQuYW5nbGUsIGJ5ID0gZGVnKQ0KICAgICAgICBwb2x5LnggPC0gYyhw
b2x5LngsIHhbaSwgal0gKiBjb3MoaykgKyBsb2NbaSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXSwg
TkEpDQogICAgICAgIHBvbHkueSA8LSBjKHBvbHkueSwgeFtpLCBqXSAqIHNp
bihrKSArIGxvY1tpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDJdLCBOQSkNCiAgICAgIH0NCiAgICAg
IHBhcihsd2QgPSAwLjI1KQ0KICAgICAgcG9seWdvbihwb2x5LngsIHBvbHku
eSwgY29sID0gc2VnLmNvbG9ycykNCiAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgaWYgKCFpcy5udWxsKGxhYmVscykpIA0KICAgICAgICB0ZXh0KGxvY1tp
LCAxXSwgbG9jW2ksIDJdIC0gaWYgKGZ1bGwpIA0KICAgICAgICAgICAgIG1h
eCh4KQ0KICAgICAgICBlbHNlIDAuMSAqIG1heCh4KSwgbGFiZWxzW2ldLCBj
ZXggPSAwLjUsIGFkaiA9IGMoMC41LCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEpKQ0KICAgIH0NCiAg
fQ0KICBlbHNlIHsNCiAgICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAg
dGVtcC54LmNvb3JkIDwtIHhbaSwgXSAqIGNvcyhhbmdsZXMpICsgbG9jW2ks
IDFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xl
cykgKyBsb2NbaSwgMl0NCiAgICAgIGlmIChyYWRpdXMpIHsNCiAgICAgICAg
cGFyKGx3ZCA9IDAuMjUpDQogICAgICAgIHNlZ21lbnRzKHJlcChsb2NbaSwg
MV0sIG4uc2VnKSwgcmVwKGxvY1tpLCAyXSwgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2VnKSwgdGVtcC54LmNv
b3JkLCB0ZW1wLnkuY29vcmQpDQogICAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgfQ0KICAgICAgbGluZXMoYyh0ZW1wLnguY29vcmQsIHRlbXAueC5jb29y
ZFsxXSksIGModGVtcC55LmNvb3JkLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAueS5jb29yZFsxXSks
IGx3ZCA9IDAuMjUpDQogICAgICBpZiAoIWlzLm51bGwobGFiZWxzKSkgDQog
ICAgICAgIHRleHQobG9jW2ksIDFdLCBsb2NbaSwgMl0gLSBpZiAoZnVsbCkg
DQogICAgICAgICAgICAgbWF4KHgpDQogICAgICAgIGVsc2UgMC4xICogbWF4
KHgpLCBsYWJlbHNbaV0sIGNleCA9IDAuNSwgYWRqID0gYygwLjUsIA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgMSkpDQogICAgfQ0KICB9DQogIGlmICghaXMubnVsbChrZXkubG9jKSkg
ew0KICAgIGlmIChkcmF3LnNlZ21lbnRzKSB7DQogICAgICBrZXkueCA8LSBO
QQ0KICAgICAga2V5LnkgPC0gTkENCiAgICAgIGtleS54LmNvb3JkIDwtIGNv
cyhhbmdsZXMpICogbGVuICsga2V5LmxvY1sxXQ0KICAgICAga2V5LnkuY29v
cmQgPC0gc2luKGFuZ2xlcykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBm
b3IgKGogaW4gMTpuLnNlZykgew0KICAgICAgICBrZXkueCA8LSBjKGtleS54
LCBrZXkubG9jWzFdLCBrZXkueC5jb29yZFtqXSkNCiAgICAgICAga2V5Lnkg
PC0gYyhrZXkueSwga2V5LmxvY1syXSwga2V5LnkuY29vcmRbal0pDQogICAg
ICAgIGsgPC0gYW5nbGVzW2pdICsgZGVnDQogICAgICAgIG5leHQuYW5nbGUg
PC0gaWYgKGogPCBuLnNlZykgDQogICAgICAgICAgYW5nbGVzW2ogKyAxXQ0K
ICAgICAgICBlbHNlIChpZiAoZnVsbCkgDQogICAgICAgICAgICAgIDM2MA0K
ICAgICAgICBlbHNlIDE4MCkgKiBkZWcNCiAgICAgICAgd2hpbGUgKGsgPCBu
ZXh0LmFuZ2xlKSB7DQogICAgICAgICAga2V5LnggPC0gYyhrZXkueCwgbGVu
ICogY29zKGspICsga2V5LmxvY1sxXSkNCiAgICAgICAgICBrZXkueSA8LSBj
KGtleS55LCBsZW4gKiBzaW4oaykgKyBrZXkubG9jWzJdKQ0KICAgICAgICAg
IGsgPC0gayArIGRlZw0KICAgICAgICB9DQogICAgICAgIGtleS54IDwtIGMo
a2V5LngsIGxlbiAqIGNvcyhuZXh0LmFuZ2xlKSArIGtleS5sb2NbMV0sIA0K
ICAgICAgICAgICAgICAgICAgIE5BKQ0KICAgICAgICBrZXkueSA8LSBjKGtl
eS55LCBsZW4gKiBzaW4obmV4dC5hbmdsZSkgKyBrZXkubG9jWzJdLCANCiAg
ICAgICAgICAgICAgICAgICBOQSkNCiAgICAgIH0NCiAgICAgIHBhcihsd2Qg
PSAwLjI1KQ0KICAgICAgcG9seWdvbihrZXkueCwga2V5LnksIGNvbCA9IHNl
Zy5jb2xvcnMpDQogICAgICBwYXIobHdkID0gMSkNCiAgICB9DQogICAgZWxz
ZSB7DQogICAgICB0ZW1wLnguY29vcmQgPC0gY29zKGFuZ2xlcykgKiBsZW4g
KyBrZXkubG9jWzFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0gc2luKGFuZ2xl
cykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBwYXIobHdkID0gMC4yNSkN
CiAgICAgIGlmIChyYWRpdXMpIA0KICAgICAgICBzZWdtZW50cyhyZXAoa2V5
LmxvY1sxXSwgbi5zZWcpLCByZXAoa2V5LmxvY1syXSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNlZyksIHRl
bXAueC5jb29yZCwgdGVtcC55LmNvb3JkKQ0KICAgICAgbGluZXMoYyh0ZW1w
LnguY29vcmQsIHRlbXAueC5jb29yZFsxXSksIGModGVtcC55LmNvb3JkLCAN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHRlbXAueS5jb29yZFsxXSkpDQogICAgICBwYXIobHdkID0gMSkNCiAg
ICB9DQogICAgaWYgKGlzLm51bGwoa2V5LmxhYmVscykpIA0KICAgICAga2V5
LmxhYmVscyA8LSBkaW1uYW1lcyh4KVtbMl1dDQogICAgbGFiLmFuZ2wgPC0g
YW5nbGVzICsgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAgICAgKGFuZ2xlc1sy
XSAtIGFuZ2xlc1sxXSkvMg0KICAgIGVsc2UgMA0KICAgIGxhYmVsLnguY29v
cmQgPC0gY29zKGxhYi5hbmdsKSAqIGxlbiAqIDEuMSArIGtleS5sb2NbMV0N
CiAgICBsYWJlbC55LmNvb3JkIDwtIHNpbihsYWIuYW5nbCkgKiBsZW4gKiAx
LjEgKyBrZXkubG9jWzJdDQogICAgZm9yIChrIGluIDE6bi5zZWcpIHsNCiAg
ICAgIHRleHQuYWRqIDwtIGlmIChsYWIuYW5nbFtrXSA8ICg5MCAqIGRlZykg
fHwgbGFiLmFuZ2xba10gPiANCiAgICAgICAgICAgICAgICAgICAgICAoMjcw
ICogZGVnKSkgDQogICAgICAgIDANCiAgICAgIGVsc2UgaWYgKGxhYi5hbmds
W2tdID4gKDkwICogZGVnKSAmJiBsYWIuYW5nbFtrXSA8IA0KICAgICAgICAg
ICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICAxDQogICAgICBlbHNlIDAu
NQ0KICAgICAgaWYgKGxhYi5hbmdsW2tdIDw9ICg5MCAqIGRlZykpIA0KICAg
ICAgICB0ZXh0LmFkaiA8LSBjKHRleHQuYWRqLCAwLjUgKiAoMSAtIGxhYi5h
bmdsW2tdLyg5MCAqIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkZWcpKSkNCiAgICAgIGVsc2Ug
aWYgKGxhYi5hbmdsW2tdID4gKDkwICogZGVnKSAmIGxhYi5hbmdsW2tdIDw9
IA0KICAgICAgICAgICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICB0ZXh0
LmFkaiA8LSBjKHRleHQuYWRqLCAobGFiLmFuZ2xba10gLSAoOTAgKiANCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlZykpLygxODAgKiBkZWcpKQ0KICAgICAgZWxzZSBpZiAobGFiLmFuZ2xb
a10gPiAoMjcwICogZGVnKSkgDQogICAgICAgIHRleHQuYWRqIDwtIGModGV4
dC5hZGosIDEgLSAoMC41ICogKGxhYi5hbmdsW2tdIC0gDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyNzAgKiBkZWcp
KS8oOTAgKiBkZWcpKSkNCiAgICAgIHRleHQuZGVmYXVsdCh4ID0gbGFiZWwu
eC5jb29yZFtrXSwgeSA9IGxhYmVsLnkuY29vcmRba10sIA0KICAgICAgICAg
ICAgICAgICAgIGxhYmVscyA9IGtleS5sYWJlbHNba10sIGNleCA9IDAuNSwg
YWRqID0gdGV4dC5hZGopDQogICAgfQ0KICB9DQogIGludmlzaWJsZSgpDQp9
DQo=
--1465796871-645734172-974620647=:18687--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 19 10:59:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Nov 2000 11:59:07 +0100
Subject: [Rd] Bug in stars function (PR#738)
In-Reply-To: tdye@lava.net's message of "Sun, 19 Nov 2000 08:57:14 +0100 (MET)"
References: <200011190757.IAA15668@pubhealth.ku.dk>
Message-ID: <x2n1ew1b44.fsf@blueberry.kubism.ku.dk>


Please don't use MIME attachments when reporting bugs. The resending
mechanism renders them undecodable when seen on r-devel. 

tdye@lava.net writes:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII
> 
> Hi all,
> 
> I've discovered and (hopefully) fixed a bug in the stars function I wrote
> some time ago.  A corrected function is attached.
> 
> Please let me know if you have any questions or comments.
> 
> Tom
> 
> Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
> Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
> Work: International Archaeological Research Institute, Inc., 2081 Young St.,
>       Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
> Content-Description: bug fix
> Content-Disposition: attachment; filename="new-stars.r"
> 
> ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
> cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
> ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
> ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 19 21:47:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 19 Nov 2000 21:47:27 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18497a.27609952@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Nov 20 01:37:10 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 20 Nov 2000 01:37:10 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18803b.4789690@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 07:48:03 2000
From: tdye@lava.net (tdye@lava.net)
Date: Mon, 20 Nov 2000 08:48:03 +0100 (MET)
Subject: [Rd] Bug in stars.R (PR#739)
Message-ID: <200011200748.IAA19481@pubhealth.ku.dk>

Hi all,

Please let me know if this isn't the correct place to report bugs in
contributed code.  Otherwise, the following code contains one additional
line and a short comment above it.  The extra line of code catches the
unusual situation where a data column contains all 0 values.

The corrected code is below the signature.

Thanks for your help.
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

function (x, full = TRUE, scale = TRUE, radius = TRUE, labels = dimnames(x)[[1]], 
            locations = NULL, xlimit = NULL, ylimit = NULL, len = 1, 
            colors = NULL, key.loc = NULL, key.labels = NULL, draw.segments = FALSE, 
            draw.axes = FALSE, ...) 
{
  if (is.data.frame(x)) 
    x <- as.matrix(x)
  else if (!is.matrix(x)) 
    stop("x must be a matrix or a data frame")
  if (!is.numeric(x)) 
    stop("data in x must be numeric")
  n.loc <- nrow(x)
  n.seg <- ncol(x)
  deg <- pi/180
  seg.colors <- if (!is.null(colors)) 
    colors
  else 1:n.seg
  if (is.null(locations)) {
    mat.dim <- ceiling(sqrt(n.loc))
    temp.loc.1 <- rep(x = 2.1 * 1:mat.dim, times = mat.dim, 
                      length = n.loc)
    temp.loc.2 <- rep(x = 2.1 * mat.dim:1, rep(x = mat.dim, 
                        times = mat.dim), length = n.loc)
    loc <- matrix(data = c(temp.loc.1, temp.loc.2), ncol = 2)
  }
  else {
    if (!is.matrix(locations) || ncol(locations) != 2) 
      stop("locations must be a 2-column matrix.")
    loc <- .Alias(locations)
  }
  if (n.loc != nrow(loc)) 
    stop("number of rows of locations and x must be equal.")
  angles <- if (full) 
    seq(0, 2 * pi, length = n.seg + 1)[-(n.seg + 1)]
  else if (draw.segments) 
    seq(0, pi, length = n.seg + 1)[-(n.seg + 1)]
  else seq(0, pi, length = n.seg)
  if (length(angles) != n.seg) 
    stop("length(angles) must be the same as ncol(x)")
  x[is.na(x)] <- 0
  if (scale) 
    x <- sweep(x, 2, apply(x, 2, max), FUN = "/")
# Columns of 0s will put NAs in x, next line gets rid of them
  x[is.na(x)] <- 0
  x <- x * len
  temp.xlim <- if (is.null(xlimit)) 
    range(loc[, 1] + max(x), loc[, 1] - max(x))
  else xlimit
  temp.ylim <- if (is.null(ylimit)) 
    range(loc[, 2] + max(x), loc[, 2] - max(x))
  else ylimit
  opar <- par(no.readonly = TRUE)
  on.exit(par(opar))
  plot(0, type = "n", ..., xlim = temp.xlim, ylim = temp.ylim, 
       xlab = "", ylab = "", asp = 1, axes = draw.axes)
  if (draw.segments) {
    for (i in 1:n.loc) {
      poly.x <- NA
      poly.y <- NA
      start.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      start.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      for (j in 1:n.seg) {
        poly.x <- c(poly.x, loc[i, 1], start.x.coord[j])
        poly.y <- c(poly.y, loc[i, 2], start.y.coord[j])
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        k <- seq(from = angles[j], to = next.angle, by = deg)
        poly.x <- c(poly.x, x[i, j] * cos(k) + loc[i, 
                                                   1], NA)
        poly.y <- c(poly.y, x[i, j] * sin(k) + loc[i, 
                                                   2], NA)
      }
      par(lwd = 0.25)
      polygon(poly.x, poly.y, col = seg.colors)
      par(lwd = 1)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  else {
    for (i in 1:n.loc) {
      temp.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      temp.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      if (radius) {
        par(lwd = 0.25)
        segments(rep(loc[i, 1], n.seg), rep(loc[i, 2], 
                                            n.seg), temp.x.coord, temp.y.coord)
        par(lwd = 1)
      }
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]), lwd = 0.25)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  if (!is.null(key.loc)) {
    if (draw.segments) {
      key.x <- NA
      key.y <- NA
      key.x.coord <- cos(angles) * len + key.loc[1]
      key.y.coord <- sin(angles) * len + key.loc[2]
      for (j in 1:n.seg) {
        key.x <- c(key.x, key.loc[1], key.x.coord[j])
        key.y <- c(key.y, key.loc[2], key.y.coord[j])
        k <- angles[j] + deg
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        while (k < next.angle) {
          key.x <- c(key.x, len * cos(k) + key.loc[1])
          key.y <- c(key.y, len * sin(k) + key.loc[2])
          k <- k + deg
        }
        key.x <- c(key.x, len * cos(next.angle) + key.loc[1], 
                   NA)
        key.y <- c(key.y, len * sin(next.angle) + key.loc[2], 
                   NA)
      }
      par(lwd = 0.25)
      polygon(key.x, key.y, col = seg.colors)
      par(lwd = 1)
    }
    else {
      temp.x.coord <- cos(angles) * len + key.loc[1]
      temp.y.coord <- sin(angles) * len + key.loc[2]
      par(lwd = 0.25)
      if (radius) 
        segments(rep(key.loc[1], n.seg), rep(key.loc[2], 
                                             n.seg), temp.x.coord, temp.y.coord)
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]))
      par(lwd = 1)
    }
    if (is.null(key.labels)) 
      key.labels <- dimnames(x)[[2]]
    lab.angl <- angles + if (draw.segments) 
      (angles[2] - angles[1])/2
    else 0
    label.x.coord <- cos(lab.angl) * len * 1.1 + key.loc[1]
    label.y.coord <- sin(lab.angl) * len * 1.1 + key.loc[2]
    for (k in 1:n.seg) {
      text.adj <- if (lab.angl[k] < (90 * deg) || lab.angl[k] > 
                      (270 * deg)) 
        0
      else if (lab.angl[k] > (90 * deg) && lab.angl[k] < 
               (270 * deg)) 
        1
      else 0.5
      if (lab.angl[k] <= (90 * deg)) 
        text.adj <- c(text.adj, 0.5 * (1 - lab.angl[k]/(90 * 
                                                        deg)))
      else if (lab.angl[k] > (90 * deg) & lab.angl[k] <= 
               (270 * deg)) 
        text.adj <- c(text.adj, (lab.angl[k] - (90 * 
                                                deg))/(180 * deg))
      else if (lab.angl[k] > (270 * deg)) 
        text.adj <- c(text.adj, 1 - (0.5 * (lab.angl[k] - 
                                            (270 * deg))/(90 * deg)))
      text.default(x = label.x.coord[k], y = label.y.coord[k], 
                   labels = key.labels[k], cex = 0.5, adj = text.adj)
    }
  }
  invisible()
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 20 16:09:30 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Nov 2000 17:09:30 +0100
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011200748.IAA19481@pubhealth.ku.dk>
References: <200011200748.IAA19481@pubhealth.ku.dk>
Message-ID: <200011201609.RAA06263@lynne.ethz.ch>

>>>>> "tdye" == tdye  <tdye@lava.net> writes:

    tdye> Hi all, Please let me know if this isn't the correct place to
    tdye> report bugs in contributed code.  Otherwise, the following code
    tdye> contains one additional line and a short comment above it.  The
    tdye> extra line of code catches the unusual situation where a data
    tdye> column contains all 0 values.

    tdye> The corrected code is below the signature.

    tdye> Thanks for your help.  Tom

    tdye> Thomas S. Dye, Ph.D.  http://www.tsdye.com Home: 812A 19th
    tdye> Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
    tdye> Work: International Archaeological Research Institute, Inc., 2081
    tdye> Young St., Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax
    tdye> 943-0716.

Dear Thomas,
thank you for the bug report and fix.
Since you *are* the original contributor of this R function,
I took the time and carefully looked at the (mass of) code you sent...

3 remarks:
  - you fixed the "installed code", not the source code,
	which *is*  <R_TOPDIR>/src/library/base/R/stars.R
    i.e. your version had dropped all the comments

  - it would have been much easier had you only sent the result of
    "diff -c  oldfile newfile"

  - After looking at your change, it seems clear that it is only needed
    inside the  if(scale) { .. } clause.

This all amounts to

diff -u -b -B -w -r1.3 stars.R
--- src/library/base/R/stars.R	1999/11/01 10:02:17	1.3
+++ src/library/base/R/stars.R	2000/11/20 14:36:20
@@ -54,8 +53,11 @@
     ## Missing values are treated as 0
     x[is.na(x)] <- 0
 
-    if (scale)
+    if (scale) {
 	x <- sweep(x,2,apply(x,2,max),FUN="/")
+	## Columns of 0s will put NAs in x, next line gets rid of them
+	x[is.na(x)] <- 0
+    }
 
     x <- x * len
 
-----

which will be in R 1.2.

Thank you again for stars()!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 18:22:31 2000
From: tdye@lava.net (Tom Dye)
Date: Mon, 20 Nov 2000 08:22:31 -1000 (HST)
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011201609.RAA06263@lynne.ethz.ch>
Message-ID: <Pine.BSI.4.10.10011200819580.29349-100000@malasada.lava.net>

Hi Martin,

Thank you for the instructions how to send bug fixes.  I spent some time
searching for this information iin the R documentation but couldn't find
it.  

Thanks for your help with the stars() function.

All the best,
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011210615.HAA24700@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 739 *
Subject: Bug in stars.R
From: Tom Dye <tdye@lava.net>
Date: Sun, 19 Nov 2000 21:48:16 -1000 (HST)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 735 *
Subject: Online marketing success increase sales
From: namesmktingcd@virgin.net
Date: Mon, 13 Nov 00 22:26:39 EST
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 738 *
Subject: Bug in stars function
From: Tom Dye <tdye@lava.net>
Date: Sat, 18 Nov 2000 21:57:27 -1000 (HST)
* PR# 737 *
Subject: Bug in R 1.1.1 dev.print() with fix
From: frost@pocketmail.com
Date: Fri, 17 Nov 2000 20:45:58 +0100 (MET)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Nov 21 08:58:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 21 Nov 2000 09:58:26 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011210858.JAA02617@pubhealth.ku.dk>

A minor point, but the specification of the contour function is
lagging behind the ?contour file:

> args(contour)

function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), add = FALSE, ...) 

> ?contour

     contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
             z,
             nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
             xlim = range(x, finite = TRUE),
             ylim = range(y, finite = TRUE),
             zlim = range(z, finite = TRUE),
             labcex = 0.6, drawlabels = TRUE, method = "flattest", 
             vfont = c("sans serif", "plain"),
             col = par("fg"), lty = par("lty"), lwd = par("lwd"),
             add = FALSE, ...)

In particular the function default arguments should apparently be
"labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
of course that the help file is more up-to-date than the function
definition.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Nov 21 14:01:59 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 21 Nov 2000 14:01:59 GMT
Subject: [Rd] How do you construct a function from a list?
Message-ID: <3a1a7d56.44981237@smtp1.sympatico.ca>

I'm trying to get a data.restore function to work on functions.  One
thing I can't figure out:  how do you construct a function from it's
component parts?

For example, I can construct a for loop as

forloop <-
as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

which results in 

 for (i in 1) junk()

But how do I put that in a function?  For example, I'd like the
function

  function()  for (i in 1) junk()

but  as.function(list(forloop)) results in

 function () 
 list(for (i in 1) junk())

which returns the for loop in a list, it doesn't execute it.  How do I
construct the function?

(This might be a bug in as.function, because 

  as.function(c(alist(a=,b=2),forloop))

returns the expected function

 function (a, b = 2) 
 for (i in 1) junk()

It's just that I can't seem to find a way to do it when there are no
arguments.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 21 14:51:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Nov 2000 15:51:08 +0100
Subject: [Rd] Re: precision, incorrect(?) tapply() NA's
In-Reply-To: <200011201516.KAA26803@jessie.research.bell-labs.com>
References: <200011201516.KAA26803@jessie.research.bell-labs.com>
Message-ID: <14874.35804.101468.347291@gargle.gargle.HOWL>


>>>>> "DJ" == David James <dj@research.bell-labs.com> writes:

{diverted from R-help to R-devel }

    DJ> Summary:

    DJ> I ran into some unexpected behavior in approx() and tapply() that
    DJ> introduced NA's in "clean" data due to (?) numerical accuracy/round
    DJ> off.  The culprit seems to be in match() that coerces it's
    DJ> arguments to character, loosing precision in the process.

yes, definitely!
match() shouldn't do the character coercion!  
==> This is a bug; I'll send a report

	...........

    DJ> Thus match() seems to be introducing the round off as it coerces its 
    DJ> arguments to character:

    >> match
    DJ> function (x, table, nomatch = NA) 
    DJ> .Internal(match(as.character(x), as.character(table), nomatch))

	.......

If you look at R's source { do_match() in src/main/unique.c },
it becomes clear that the .Internal(match(.))
does not rely at all on character inputs,
and

    match <- function (x, table, nomatch = NA) 
	   .Internal(match(x, table, nomatch))

*seems* to work alright.
But, alas, it only *seems*, since the above change
breaks 
       "make check"

more concretely,
     example(relevel)
leads to an error {when the above changed  match() function is used}
which can be diagnosed to  factor(.,.) not working anymore with the changed 
match() function.  I've seen how to fix factor(.,.) as well,
but this is coming involved.

I think that the above change is *really* what we should use,
but we the consequences must be taken care as well.
Expect a fix for R 1.2,
and thank you very much for your useful report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 21 15:15:19 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Nov 2000 16:15:19 +0100 (MET)
Subject: [Rd] match() is not correct for "close numerics" (PR#741)
Message-ID: <200011211515.QAA10625@pubhealth.ku.dk>

(thank to  David James <dj@research.bell-labs.com> )

This is for R versions <= 1.1.1  and also R-devel as of yesterday..

  > pi0 <- pi + 2*.Machine$double.eps
  > pi != pi0
  [1] TRUE

  > ## but
  > match(c(1,pi,pi0), pi)
  [1] NA  1  1

The explanation is

  > match
  function(x, table, nomatch=NA)
      .Internal(match(as.character(x), as.character(table), nomatch))

and using

  > match <- function(x, table, nomatch=NA) .Internal(match(x, table, nomatch))

would solve the above problem
*but* gives new ones: e.g., factor() has to be modified !

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 22 12:08:26 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Nov 2000 13:08:26 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <3a1a7d56.44981237@smtp1.sympatico.ca>
References: <3a1a7d56.44981237@smtp1.sympatico.ca>
Message-ID: <14875.46906.371747.98635@mithrandir.hornik.net>

>>>>> Duncan Murdoch writes:

> I'm trying to get a data.restore function to work on functions.  One
> thing I can't figure out:  how do you construct a function from it's
> component parts?

> For example, I can construct a for loop as

> forloop <-
> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

> which results in 

>  for (i in 1) junk()

> But how do I put that in a function?  For example, I'd like the
> function

>   function()  for (i in 1) junk()

> but  as.function(list(forloop)) results in

>  function () 
>  list(for (i in 1) junk())

> which returns the for loop in a list, it doesn't execute it.  How do I
> construct the function?

> (This might be a bug in as.function, because 

>   as.function(c(alist(a=,b=2),forloop))

> returns the expected function

>  function (a, b = 2) 
>  for (i in 1) junk()

> It's just that I can't seem to find a way to do it when there are no
> arguments.)

Duncan,

I think the easiest approach is to do

	foo <- function() {}
	body(foo) <- forloop

Re the above, I guess Peter would know more about this but is currently
swamped with other work.  I also observe that

R> as.function(alist(forloop))
function () 
list(forloop)
R> as.function(list(forloop))
function () 
list(for (i in 1) junk())

which does not seem right.

-k
	
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 22 12:35:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 2000 13:35:47 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: Kurt Hornik's message of "Wed, 22 Nov 2000 13:08:26 +0100"
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net>
Message-ID: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > (This might be a bug in as.function, because 
> 
> >   as.function(c(alist(a=,b=2),forloop))
> 
> > returns the expected function
....
> Re the above, I guess Peter would know more about this but is currently
> swamped with other work.

He is, but this (do_asfunction in coerce.c) looks wrong:

    if( n == 1 )
        args =  mkCLOSXP(args, arglist, envir);
    else
        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
    UNPROTECT(1);

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Nov 22 12:56:56 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Wed, 22 Nov 2000 13:56:56 +0100 (MET)
Subject: [Rd] How do you construct a function from a list? (PR#743)
Message-ID: <200011221256.NAA20882@pubhealth.ku.dk>

On Wed, 22 Nov 2000 13:08:26 +0100, Kurt Hornik wrote:
.
>>>>> Duncan Murdoch writes:
>> I'm trying to get a data.restore function to work on functions.  One
>> thing I can't figure out:  how do you construct a function from it's
>> component parts?
 ...
>> forloop <-
>> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))
.
>
>I think the easiest approach is to do
>
>	foo <- function() {}
>	body(foo) <- forloop

That one gives me the same as "as.function(list(forloop))", i.e. 

 function () 
 list(for (i in 1) junk())

I'm running this in 1.1.1 on Windows, but I tried a Nov 14 development
snapshot, and got the same results.

I think this is a bug in as.function.default, because of these two
examples:

For a function with arguments, as.function undoes as.list:

 > options(keep.source=F)
 > withargs <- function(x) for (i in 1) junk()
 > withargs
 function (x) 
 for (i in 1) junk()
 > as.function(as.list(withargs))
 function (x) 
 for (i in 1) junk()

For a function with no arguments, it doesn't:
 
 > noargs <- function() for (i in 1) junk()
 > noargs
 function () 
 for (i in 1) junk()
 > as.function(as.list(noargs))
 function () 
 list(for (i in 1) junk())

I looked at the source (do_asfunction in main/coerce.c), but couldn't
understand what was going on well enough to figure out the bug.

Duncan Murdoch


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.90 (build 3000)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Nov 22 14:24:49 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 22 Nov 2000 09:24:49 -0500
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net> <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
Message-ID: <3a1bd676.166453340@fisher.stats.uwo.ca>

On 22 Nov 2000 13:35:47 +0100, Peter Dalgaard  wrote in message
<x2n1esp4kc.fsf@blueberry.kubism.ku.dk>:

>He is, but this (do_asfunction in coerce.c) looks wrong:
>
>    if( n == 1 )
>        args =  mkCLOSXP(args, arglist, envir);
>    else
>        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
>    UNPROTECT(1);

I just posted a bug report about how
"as.function(as.list(somefunction))" doesn't return the function
properly.  Sometimes it does:

 > options(keep.source = F) 
 > noarg _ function() 1
 > noarg
 function () 
 1
 > as.function(as.list(noarg))
 function () 
 1

So it depends on the type of body whether as.function works properly.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Wed Nov 22 20:29:00 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Wed, 22 Nov 2000 21:29:00 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222029.VAA25688@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.1.1
OS: Windows NT
Submission from: (NULL) (63.91.145.254)



Hi,

I have a data frame with 11 observations and 603 variables.

When I call,

    willRaw.fit <- lm( performance ~ ., data=willRaw )

lm() runs without problems, but computes coefficients for
only the first 10 variables.  The remaining variables
get a coefficient of NA.

There are no NA values in the data frame.  performance
is one of the columns of the data frame.  I'd be happy
to email the data file (gzip'd or zip'd).

My apologies if I've done some stupid (yes, I know it's
not wise to fit a model to 603 variables, but I was
just playing around).

Mark

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Wed Nov 22 20:53:43 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 23 Nov 2000 06:53:43 +1000
Subject: [Rd] lm() appears to fail with large number of variables (PR#
 744)
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20402A9@roper-cv.qld.cmis.CSIRO.AU>

This is not a bug, only evidence that the least squares fitting procedure is
more numerically robust than I had expected.

With 11 observations you can only estimate 11 linearly independent
regression coefficients (at best).  That's what you got (intercept + first
10 variables).  How many did you expect to get estimates for?

In summary: no bug, lm is working as advertised.

> -----Original Message-----
> From: r@marksmucker.com [mailto:r@marksmucker.com]
> Sent: Thursday, 23 November 2000 6:29
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() appears to fail with large number of variables
> (PR#744)
> 
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> 
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).
> 
> Mark
> 
>  
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Nov 22 21:02:17 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 22 Nov 2000 22:02:17 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222102.WAA25841@pubhealth.ku.dk>

r@marksmucker.com wrote:
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).

That's not a bug!
What do you think about the degrees of freedom, if you have got 11
observations and 603 variables? !!!

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Thu Nov 23 10:12:30 2000
From: jago@mclink.it (Stefano Iacus)
Date: Thu, 23 Nov 2000 11:12:30 +0100
Subject: [Rd] A pre-alpha version of R-1.1.1 for Mac READY !
Message-ID: <a04330106b6429c5dfc95@[159.149.74.61]>

Dear all,

thanks to Ross I. (that gave me a version for Macintosh device), 
Martin M. (he encouraged me a lot), Guido M. (he answer to a lot of 
my silly questions on R, poor him :) ) a pre-alpha version of R-1.1.1 
for MacOS is now ready.

The official page is

http://www.eco-dip.unimi.it/R

For whom who has already downloaded it before Nov 23 (before the 
official announcement) I encourage them to download the latest 
version of the binaries (libraries has not been changed). I fixed an 
important bug concerning IEEE numerics.

It would be a pleasure to receive feedback from Mac R users and/or developers.

I hope to see a link to the mentioned pages, in the download section 
of the official R-Project site.


I hope this is a good lace where to announce it.

Regards to the Core Team!

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 10:59:38 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 11:59:38 +0100
Subject: [Rd] RE: [R] boxplot grouped by two variables: general issue
In-Reply-To: <Pine.GSO.4.20.0011211651590.14553-100000@laplace>
Message-ID: <000801c0553c$799c0280$c10616ac@bbdo.de>


> On Tue, 21 Nov 2000, Vadik Kutsyy wrote:
>
> > Is there a quick way to make boxplots groups by two
> variables?  By that
> > I mean, that if x axes have values ("A","B","C"), than at
> each value
> > there would be a few boxplots each for a value of second
> variable (say
> > ("1","2","3")).
>
> If I understand you correctly you want to try the
> "interaction" function
> in a boxplot.  Your data needs to be organised into a data.frame with
> appropriate factors.  Here's a simple example ...

I'd rather prefer to have something like

  coplot(breaks | wool * tension, data = warpbreaks, panel=function(x, y,
...)boxplot(x))

but there are three problems:

1) coplot doesn't seem to support univariate panel functions
2) coplot doesn't seem to support synchronization options for xlim= and
ylim= across panels
3) plot functions appear to be EITHER panel functions OR high level plot
functions. Needing two versions for each plot function is a little bit
complicated. Rather have ONLY panel functions and a one-panel high level
wrapper.

Here are my questions:

a) Any plans to implement trellis?
b) Are there any other solutions in R which offer simple trellis
functionality?
c) Do you think, attacking these problems leads to reinventing trellis with
all it's complexity?

If the answers turn out to be c(a=NO,b=NO,c=NO) I would like  to ask in more
detail:

Is it possible to write plot functions to properly behave as high level AND
as panel functions?
Are there any issues that NEED to be addressed beyond 1) to 3) ?
Any recommendations? Any related work in progress? Any volunteers?

If nobody else is attacking this, I will think about a solution (r-devel:
AFTER the strwidth() issue has been resolved)


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 13:13:09 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 14:13:09 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <14877.749.266796.685755@gargle.gargle.HOWL>
Message-ID: <001101c0554f$20c36eb0$c10616ac@bbdo.de>



Hi Martin,

Thank you.

> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?

Yes. Paul already mentioned this and I already checked it and I already said
that none of these options help. None of them lies, but none of them does
the job. The crucial point is, that resizing the window does NOT CHANGE the
font size, does CHANGE par("fin") and thus does CHANGE the proportion of the
device needed to show the text (under linux AND under windows).

This means that resizing a window (keep in mind that big devices are
automatically resized at creation time) causes

strwidth("sometext", units="user")   to report CHANGED     space
requirements in user coordinates
strwidth("sometext", units="figure") to report CHANGED     space
requirements as fraction of par("fin")[1]
strwidth("sometext", units="inches") to report NON-CHANGED space
requirements in inches

None of those tells you, which space requirements "sometext" would have
relatively to the originally intended device size or it's user coordinates.
(Yes, I know that I could calculate that, by administering two versions of
device sizes, by calculating two versions of all text sizes, but it is quite
nonsense to have the user do all that).

As I understood Ross Ihaka's mail, this will be improved in one of the
future versions of R, so that we get a real separation of representation
(device) and presentation (screen window), such layer separation has prooved
to be useful in other systems like LaTeX.

BTW: this was a thread on r-devel, not on r-help.

Regards


Jens



> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Thursday, November 23, 2000 12:44 PM
> To: jens.oehlschlaegel@bbdo-interone.de
> Cc: R-help@stat.math.ethz.ch
> Subject: Re: [R] Graphics-Device-Size vs. Window-Size
>
>
> >>>>> "Jens" == Jens Oehlschlaegel
> <jens.oehlschlaegel@bbdo-interone.de> writes:
>
> on Wed, 8 Nov 2000 11:52:38 +0100
>
>     Jens> I want to layout on screen a graphic bigger than the screen
>     Jens> (width=16.53543, height=11.69291) but strwidth()
> and strheight()
>     Jens> give wrong results.
>
>     >> x11(width=42/2.54, height=29.7/2.54, pointsize=12)
>     >> plot(1,1, type="n", xlim=c(0, 1), ylim=c(-1, 0),
> xlab="", ylab="",
>     Jens> axes=FALSE)
>     >> strwidth("Whatever")
>     Jens> [1] 0.08471151
>     >> # Now resize the window and repeat
>     >> strwidth("Whatever")
>     Jens> [1] 0.1856643
>
>     Jens> strwidth() obviously tells me how much space a text
> needs ON THE
>     Jens> SCREEN, not on the desired device size. Can someone
> enlighten
>     Jens> what is the best way to solve this?
>
> Since you are mentioning this again:
>
> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 23 15:11:41 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 23 Nov 2000 16:11:41 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011231511.QAA06027@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> A minor point, but the specification of the contour function is
    JonR> lagging behind the ?contour file:

    >> args(contour)

    JonR> function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    JonR> z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    JonR> xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    JonR> zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    JonR> method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    JonR> lwd = par("lwd"), add = FALSE, ...) 

    >> ?contour

    JonR> contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
    JonR> z,
    JonR> nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
    JonR> xlim = range(x, finite = TRUE),
    JonR> ylim = range(y, finite = TRUE),
    JonR> zlim = range(z, finite = TRUE),
    JonR> labcex = 0.6, drawlabels = TRUE, method = "flattest", 
    JonR> vfont = c("sans serif", "plain"),
    JonR> col = par("fg"), lty = par("lty"), lwd = par("lwd"),
    JonR> add = FALSE, ...)

    JonR> In particular the function default arguments should apparently be
    JonR> "labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
    JonR> of course that the help file is more up-to-date than the function
    JonR> definition.

:-)   {the source code  is the truth ..}

Actually, I think you are right:
I think we *should* change the current defaults :

  labcex = 0.4  is really too small

and vector fonts are infinitely better for most instances of contour().

Anybody against the change ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Fri Nov 24 12:31:25 2000
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Fri, 24 Nov 2000 13:31:25 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241231.NAA14426@pubhealth.ku.dk>

This looks to me like a bug in the print method for lists.  In printing 
"test.list" below, the labels $A$subset and $B$subset fail to appear.

I find the same behaviour under linux and Windows (using R 1.1.1 -- 
for version info see below) with R --vanilla.

Regards -- David
David Firth                        Phone +44 1865 278544
Nuffield College                   Fax   +44 1865 278621
Oxford OX1 1NF                     Secretary +44 1865 278612
United Kingdom                     Email david.firth@nuffield.oxford.ac.uk


> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
> test.list$A
$formula
Y ~ X

$subset
[1] TRUE

> test.list
$A
$A$formula
Y ~ X


[1] TRUE


$B
$B$formula
Y ~ X


[1] TRUE


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R    

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Nov 24 13:06:08 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Nov 2000 14:06:08 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241306.OAA15475@pubhealth.ku.dk>

>>>>> "david" == david firth <david.firth@nuffield.oxford.ac.uk> writes:

    david> This looks to me like a bug in the print method for lists.
(which is hidden in C)

    david> In printing "test.list" below, the labels $A$subset and $B$subset
    david> fail to appear.

    david> I find the same behaviour under linux and Windows (using R 1.1.1 -- 
    david> for version info see below) with R --vanilla.

    >> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
    >> test.list$A
    david> $formula
    david> Y ~ X

    david> $subset
    david> [1] TRUE

    >> test.list
    david> $A
    david> $A$formula
    david> Y ~ X


    david> [1] TRUE


    david> $B
    david> $B$formula
    david> Y ~ X


    david> [1] TRUE


    >> version
    david> _                
    david> platform i686-pc-linux-gnu
    david> arch     i686             
    david> os       linux-gnu        
    david> system   i686, linux-gnu  
    david> status                    
    david> major    1                
    david> minor    1.1              
    david> year     2000             
    david> month    August           
    david> day      15               
    david> language R    

Bug confirmed, with the current "R-devel"opment version.
Another slight variation on the theme:

> list(A=list(bla="Y~X",no2=TRUE), B=list(blu=Y~X,no2=TRUE))
$A
$A$bla
[1] "Y~X"

$A$no2
[1] TRUE


$B
$B$blu
Y ~ X


[1] TRUE


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 26 20:01:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Nov 2000 20:01:28 +0000 (GMT)
Subject: [Rd] RODBC
Message-ID: <Pine.GSO.4.05.10011261954030.5359-100000@auk.stats>

Several of you have kindly sent me examples of bugs in RODBC, but none
of them reproduce on my systems.  I am fairly sure I know what is
happening, and that it is client-specific.  (Do empty strings get returned 
as "", NULL or skipped?)   Also, empty character fields were getting mapped
to NA.  There's a comment in the code that fields need to set to a null
string, and that was only being done for the first row.

If my diagnosis is right, I have a fix (and have simpilfied the code a
lot en route).

http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)

I'd be grateful for confirmation (or otherwise).

BTW, although I have altered the code to compile under R-devel, it does not
work correctly for me as yet.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 26 20:12:13 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Sun, 26 Nov 2000 21:12:13 +0100 (MET)
Subject: [Rd] Bug in args with no defaults (PR#747)
Message-ID: <200011262012.VAA23844@pubhealth.ku.dk>

This turned up in the same context as #743, i.e. writing data.restore.

Two bugs, I think:

The way arguments with no defaults are stored appears to be as a
zero-length name:

 > test <- function(x) 1
 > as.list(test)$x

 > mode(as.list(test)$x)
 [1] "name"
 > as.character(as.list(test)$x)
 [1] ""

However, I'm not allowed to create one of those:

 > as.name("")
 Error in as.name("") : attempt to use zero-length variable name

If I'm sneaky, I can create one, but I can't do anything with it:

 > badvar <- as.list(test)$x
 > badvar
 Error: Argument "badvar" is missing, with no default
 > junk <- badvar
 Error: Argument "badvar" is missing, with no default
 > junk
 Error: Object "junk" not found

For now, the workaround I'm using when building up functions like
"test" above is to create them as

 function(x = stop("argument x is missing")) 1

but this is ugly.

Duncan Murdoch

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun Nov 26 20:21:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 26 Nov 2000 21:21:23 +0100 (MET)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
Message-ID: <200011262021.VAA23880@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.1.1.1 (patched the rpois :-))
OS: osf4.0e
Submission from: (NULL) (129.240.28.227)


Dear all,

I have just gotten through a debugging session of my code, being confused
for a few days. I sent what I thought was a straightforward matrix to
chisq.test() and once in a while got the error message:
> chisq.test(t2)
Error in chisq.test(t2) : missing value where logical needed

Now, it turned out that a fairly deep bug in my code occasionally produced
NAs in the matrix, and that was the source of the confusion. Looking at
the code, it is apparent that the test
    if (any(x < 0) || any(is.na(x)))
        stop("all entries of x must be nonnegative and finite")
was designed to catch this, but it doesn't seem to, because the first
any()-call is NA and so when using the operator ||, well, I bet you
understand this better than I... :-)

I figured, perhaps turn this around:
    if (any(is.na(x)) || any(x < 0))
        stop("all entries of x must be nonnegative and finite")
That seems to work: 
> chisq.test(t2)
Error in chisq.test(t2) : all entries of x must be nonnegative and finite

Now, I hope this was a true bug, not just one of my misunderstandings, and that
this is a real fix too.... :-)

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Nov 26 21:13:55 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 26 Nov 2000 13:13:55 -0800 (PST)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
In-Reply-To: <200011262021.VAA23880@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011261255320.12852-100000@atlas.biostat.washington.edu>

On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> 
> 
> Now, it turned out that a fairly deep bug in my code occasionally produced
> NAs in the matrix, and that was the source of the confusion. Looking at
> the code, it is apparent that the test
>     if (any(x < 0) || any(is.na(x)))
>         stop("all entries of x must be nonnegative and finite")
> was designed to catch this, but it doesn't seem to, because the first
> any()-call is NA and so when using the operator ||, well, I bet you
> understand this better than I... :-)
> 
> I figured, perhaps turn this around:
>     if (any(is.na(x)) || any(x < 0))
>         stop("all entries of x must be nonnegative and finite")
> That seems to work: 
> > chisq.test(t2)
> Error in chisq.test(t2) : all entries of x must be nonnegative and finite
> 
> Now, I hope this was a true bug, not just one of my misunderstandings, and that
> this is a real fix too.... :-)

This is a real fix; it may be a real bug.

any(x<0) correctly returns NA with NAs in x, that is, it doesn't know
whether there are any negative entries because some are missing.

any(x<0) || any(is.na(x)) returns NA because of short-circuit
evaluation.  That is, we do sequential if()s on each element from left to
right. The first one fails because of NAs.  Reversing the expression is
more sensible because you would expect to rule out NAs before testing
for x<0.

However, it would also be reasonable for NA || B to evaluate B and return
TRUE or NA depending on the value.  This is what S-PLUS 5 does, so at
least it's an incompatibility. 

The R documentation says 
    The longer form [ie ||]evaluates left to right examining only the first
    element of each vector.  Evaluation proceeds only until the result
    is determined. 
which at least seems incomplete as NA | TRUE gives TRUE, but
NA || TRUE gives an error.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 08:25:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 09:25:48 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011270825.JAA26026@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

on Subject: Re: [Rd] Problem with NAs using chisq.test() (PR#748)
which I've changed, since it is another bug we are talking about now

    TL> On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:
    >> Full_Name: Kjetil Kjernsmo

    ..............
    ..............

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL>>  The longer form [ie ||] evaluates left to right examining only the
    TL>>  first element of each vector.  Evaluation 
    TL>>  proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

Looks over-cautious to me as well.
We should reach a conclusion here, asap [to be effective for R 1.2].

Either

1)	NA || x
  (and	NA && y )

  continue to give errors, and we should strongly emphasize it in the
  documentation -- and in the FAQ list of differences to S

or

2) really do the same as S, not only Splus 5.x, but also 3.4 which used to
   be our prototype, namely

    > NA || TRUE
    [1] TRUE
    > NA && FALSE
    [1] FALSE
    > NA && TRUE
    [1] NA
    > NA || FALSE
    [1] NA

The advantage of "1)" is to catch programming errors early in some cases,
however for consistency (with "|" and "&") and compatibility,
I'm voting for a change to "2)" behaviour.

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 08:34:46 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 08:34:46 -0000
Subject: R: [Rd] RODBC
Message-ID: <006301c0584c$e6d98df0$0a00a8c0@bellview>

Under which version of R is it supposed to run ?
With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
cannot get the name of the tables, every query I execute returns with "No
Data".
I'm surely doing something wrong ...

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

>Several of you have kindly sent me examples of bugs in RODBC, but none
>of them reproduce on my systems.  I am fairly sure I know what is
>happening, and that it is client-specific.  (Do empty strings get returned
>as "", NULL or skipped?)   Also, empty character fields were getting mapped
>to NA.  There's a comment in the code that fields need to set to a null
>string, and that was only being done for the first row.
>
>If my diagnosis is right, I have a fix (and have simpilfied the code a
>lot en route).
>
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)
>
>I'd be grateful for confirmation (or otherwise).
>
>BTW, although I have altered the code to compile under R-devel, it does not
>work correctly for me as yet.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:05:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:05:28 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <006301c0584c$e6d98df0$0a00a8c0@bellview>
Message-ID: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>

On Mon, 27 Nov 2000, Federico Spinazzi wrote:

> Under which version of R is it supposed to run ?
> With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> cannot get the name of the tables, every query I execute returns with "No
> Data".
> I'm surely doing something wrong ...

Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
that case wrong.  I can fake it, though, and will report back when I
have.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:36:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:36:52 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>
Message-ID: <Pine.GSO.4.05.10011271035100.12059-100000@toucan.stats>

On Mon, 27 Nov 2000, Prof Brian Ripley wrote:

> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
> 
> > Under which version of R is it supposed to run ?
> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> > cannot get the name of the tables, every query I execute returns with "No
> > Data".
> > I'm surely doing something wrong ...
> 
> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
> that case wrong.  I can fake it, though, and will report back when I
> have.

Yes, I can reproduce this: I left a piece of debugging code in, sorry.
That version needs the max number of rows set to > 0 if the database does
not tell you.  I've just uploaded a replacement that should not have
the problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 15:28:19 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 15:28:19 -0000
Subject: R: R: [Rd] RODBC
Message-ID: <00b701c05886$ad551470$0a00a8c0@bellview>

It seems to work smoothly now.

Thank you very much.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Prof Brian Ripley <ripley@stats.ox.ac.uk>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: R-devel@r-project.org <R-devel@r-project.org>
Data: luned 27 novembre 2000 11.03
Oggetto: Re: R: [Rd] RODBC


>On Mon, 27 Nov 2000, Prof Brian Ripley wrote:
>
>> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
>>
>> > Under which version of R is it supposed to run ?
>> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't
work, I
>> > cannot get the name of the tables, every query I execute returns with
"No
>> > Data".
>> > I'm surely doing something wrong ...
>>
>> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
>> that case wrong.  I can fake it, though, and will report back when I
>> have.
>
>Yes, I can reproduce this: I left a piece of debugging code in, sorry.
>That version needs the max number of rows set to > 0 if the database does
>not tell you.  I've just uploaded a replacement that should not have
>the problem.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 17:27:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 18:27:06 +0100 (MET)
Subject: [Rd] abline() does not obey "xpd" (clipping rules) (PR#750)
Message-ID: <200011271727.SAA04871@pubhealth.ku.dk>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mavip1@inet.polyu.edu.hk  Tue Nov 28 05:25:26 2000
From: mavip1@inet.polyu.edu.hk (mavip1@inet.polyu.edu.hk)
Date: Tue, 28 Nov 2000 06:25:26 +0100 (MET)
Subject: [Rd] BUG: polyroot() (PR#751)
Message-ID: <200011280525.GAA06952@pubhealth.ku.dk>

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Nov 28 19:42:55 2000
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 28 Nov 2000 20:42:55 +0100 (MET)
Subject: [Rd] non-centrality parameter in pf() (PR#752)
Message-ID: <200011281942.UAA17414@pubhealth.ku.dk>


Bug Description:

Problem with the function pf() when the non-centrality
parameter is large. Here is a sample command. You should
see a smooth line from 0 to about 55, and then the values
of pf() go crazy from 55 to 100.
############################
ncp <- seq(0,100,length=200)
plot(ncp,pf(5,7,2,ncp=ncp))
############################

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 13:02:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 14:02:51 +0100 (MET)
Subject: [Rd] abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200011291302.OAA24761@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 15:17:16 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 16:17:16 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011291517.QAA27271@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL> The longer form [ie ||] evaluates left to right examining only the
    TL> first element of each vector.  Evaluation 
    TL> proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

    MM> Looks over-cautious to me as well.

    ........

    MM> 2) really do the same as S, not only Splus 5.x, but also 3.4 which
    MM> used to be our prototype, namely

    >> NA || TRUE
    MM> [1] TRUE
    >> NA && FALSE
    MM> [1] FALSE
    >> NA && TRUE
    MM> [1] NA
    >> NA || FALSE
    MM> [1] NA

    MM> The advantage of "1)" is to catch programming errors early in some
    MM> cases, however for consistency (with "|" and "&") and
    MM> compatibility, I'm voting for a change to "2)" behaviour.

This is now in "R-devel" aka  ``R 1.2 to be''  (slightly less than 20 days)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 29 18:30:33 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 29 Nov 2000 19:30:33 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#753)
Message-ID: <200011291830.TAA28473@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arto.luoma@uta.fi  Thu Nov 30 13:02:56 2000
From: arto.luoma@uta.fi (arto.luoma@uta.fi)
Date: Thu, 30 Nov 2000 14:02:56 +0100 (MET)
Subject: [Rd] means in arima0 (PR#754)
Message-ID: <200011301302.OAA07911@pubhealth.ku.dk>

Full_Name: Arto Luoma
Version: 1.1.0
OS: Windows 98
Submission from: (NULL) (153.1.53.119)


In arima0 it is possible to specify whether the mean of the original series is
included in the model or not. However, it is not possible to specify whether the
mean of the differenced series is included. It seems that it is not included.
However, if differencing is used to eliminate trend, the mean of the differenced
series is not zero. In my opinion, this leads to errors both in estimation and
prediction problems. The uncertainty in the estimation of the mean of the
differenced series should be also included  in the standard errors of
prediction. 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 14:38:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 14:38:12 +0000 (GMT)
Subject: [Rd] means in arima0 (PR#754)
In-Reply-To: <200011301302.OAA07911@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011301430150.26037-100000@auk.stats>

On Thu, 30 Nov 2000 arto.luoma@uta.fi wrote:

> Full_Name: Arto Luoma
> Version: 1.1.0
> OS: Windows 98
> Submission from: (NULL) (153.1.53.119)
> 
> 
> In arima0 it is possible to specify whether the mean of the original series is
> included in the model or not. However, it is not possible to specify whether the
> mean of the differenced series is included. It seems that it is not included.

Right, ARMA processes have zero mean, by definition, and the definition is
on the help page.  I don't see any room for ambiguity in what is written
there.

> However, if differencing is used to eliminate trend, the mean of the differenced
> series is not zero. In my opinion, this leads to errors both in estimation and
> prediction problems. The uncertainty in the estimation of the mean of the
> differenced series should be also included  in the standard errors of
> prediction. 

This is not a bug: the function works as described.  If you want it to work
differently, please contribute code to enhance it.  Note that arima0 is
explicitly described as a preliminary version, and it is planned one day to
replace it. So, please supply what you see as a better version as a
candidate for replacement.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 18:41:46 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 04:41:46 +1000 (EST)
Subject: [Rd] Optimisation methods
Message-ID: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>

I don't want to re-invent the wheel, and I'm trying to code up something
that does a Nelder-Mead simplex method to minimise a non-linear objective
function.  (I'm porting something I originally wrote in matlab, using the 
optimisation toolbox funciton fmins).

Is there already something available to do this included in R?
Do people have suggestions on the best way to do this?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Nov 30 18:39:54 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 30 Nov 2000 10:39:54 -0800 (PST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.21.0011301039250.28740-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?

Yes. help(optim).

	-thomas
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 18:48:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 18:48:28 +0000 (GMT)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?
> Do people have suggestions on the best way to do this?

optim(method="Nelder-Mead")

Now how did this not come up in a search: perhaps because of the way you
spell optimization?  I have

> help.search("optimisation")
No help files found with name or title matching `optimisation'
> help.search("optimization")
Help files with name or title matching `optimization':

partition(multiv)          Partitioning by Iterative Optimization 
lmeScale(nlme)             Scale for lme Optimization
portfolio.optim(tseries)   Portfolio Optimization
optim(base)                General-purpose Optimization
optimize(base)             One Dimensional Optimization

which shows we probably need to find a way to check variant spellings.

(BTW: just in case anyone tells me the British spell with an `ise', the
Oxford English Dictionary does not.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov 30 20:31:58 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 30 Nov 2000 21:31:58 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <14886.47422.630186.442419@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> I don't want to re-invent the wheel, and I'm trying to code up something
>> that does a Nelder-Mead simplex method to minimise a non-linear objective
>> function.  (I'm porting something I originally wrote in matlab, using the 
>> optimisation toolbox funciton fmins).
>> 
>> Is there already something available to do this included in R?
>> Do people have suggestions on the best way to do this?

> optim(method="Nelder-Mead")

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have

>> help.search("optimisation")
> No help files found with name or title matching `optimisation'
>> help.search("optimization")
> Help files with name or title matching `optimization':

> partition(multiv)          Partitioning by Iterative Optimization 
> lmeScale(nlme)             Scale for lme Optimization
> portfolio.optim(tseries)   Portfolio Optimization
> optim(base)                General-purpose Optimization
> optimize(base)             One Dimensional Optimization

> which shows we probably need to find a way to check variant spellings.

I am not sure how easy it would be to use different dicitionaries.  But
a fuzzy grep which also returns near matches should be good enough for
what we need.  Not that I have such a beast readily available, though.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 22:09:22 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 08:09:22 +1000 (EST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>

On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
> 
> > I don't want to re-invent the wheel, and I'm trying to code up something
> > that does a Nelder-Mead simplex method to minimise a non-linear objective
> > function.  (I'm porting something I originally wrote in matlab, using the 
> > optimisation toolbox funciton fmins).
> 
> optim(method="Nelder-Mead")
 
Thanks.  Perhaps I should just learn to spell like the OED :-) 

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have
 
> which shows we probably need to find a way to check variant spellings.
> 
> (BTW: just in case anyone tells me the British spell with an `ise', the
> Oxford English Dictionary does not.)

I guess this means I should change the spelling of the parameterisation
in the gld package functions.  What do people think of adding extra
arguments to functions to take account of different spellings like this:

example.fn _ function(parameterisation="fing",parameterization=NULL)
{
if (is.null(parameterization)) {parameterization_parameterisation}
else {parameterisation_parameterization}
print(parameterisation)
}

Is there a better way?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  1 07:29:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Nov 2000 08:29:24 +0100
Subject: [Rd] desiderata for data manipulation
In-Reply-To: <87snpceqsz.fsf@jeeves.blindglobe.net>
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net>
 <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
Message-ID: <14847.50772.578389.86697@gargle.gargle.HOWL>

[diverted from R-help to R-devel]

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........
    ZC> But how do you exchange datafiles? Dump to ascii and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.  (at
    tony> least until R gets a nice set of longitudinal macros, I'll
    tony> continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

Dear Tony,
can you elaborate what you are missing here for R?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 13:42:15 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 05:42:15 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <14847.50772.578389.86697@gargle.gargle.HOWL>
 (Martin Maechler's message of "Wed, 1 Nov 2000 08:29:24 +0100")
References: <20001030222745.B11703@ps2-4.ucl-41>
 <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41>
 <87snpceqsz.fsf@jeeves.blindglobe.net>
 <14847.50772.578389.86697@gargle.gargle.HOWL>
Message-ID: <87k8ang66g.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> [diverted from R-help to R-devel]
>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "ZC" == Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

    ZC> .........  But how do you exchange datafiles? Dump to ascii
    ZC> and infile?

    tony> Required helpful R-related content:

    tony> Much, much easier.  Look for the stataread package at CRAN.
    tony> (at least until R gets a nice set of longitudinal macros,
    tony> I'll continue to enjoy Stata's "reshape" command for data
    tony> manipulation)

    MM> Dear Tony, can you elaborate what you are missing here for R?

In R, it would be a simple command to reshape a dataframe, from a
single-observation per individual (or other unit having repeated
measurements) to multiple lines (one per measurement).  Quite often,
in building models, I'll switch between wide/long versions of the data
set to build useful variables for modeling.


Here's the help file of my favorite (missing from R) data manipulation
command:

-------------------------------------------------------------------------------
help for reshape                                         (manual:  [R] reshape)
-------------------------------------------------------------------------------

Convert data from wide to long and vice versa
---------------------------------------------

Basic syntax:

        reshape wide varnames, i(varlist) [ j(varname [values]) ... ]
        reshape long varnames, i(varlist) [ j(varname [values]) ... ]

        reshape wide
        reshape long

        reshape error

        where
                values is           #[-#] [#[-#] ...]
                ... is              string atwl(chars)

        Both are seldom specified.
        
        
Advanced syntax:
        
        reshape i   varlist
        reshape j   varname [#[-#] [#[-#] ...]] [, string]
        reshape xij fvarnames [, atwl(chars)]
        reshape xi  [varlist]
        
        reshape [query]
        
        reshape wide
        reshape long
        
        reshape error
        
        reshape clear
        
        where fvarnames are either varnames, varnames with @ characters, or a
                mix of the two.  The @ character denotes where the # (j) suffix
                appears.
                
Description
-----------
        
reshape converts data from wide to long form and vice versa.  Think of the data
as a collection of observations x_ij.  One such collection might be
        
                 (wide form)                          (long form)
        
        -i-       ------- x_ij --------         -i-  -j-         -x_ij-
        id  sex   inc80   inc81   inc82         id   year   sex    inc
        -------------------------------         ----------------------
         1    0    5000    5500    6000          1     80     0   5000
         2    1    2000    2200    3300          1     81     0   5500
         3    0    3000    2000    1000          1     82     0   6000
                                                 2     80     1   2000
                                                 2     81     1   2200
                                                 2     82     1   3300
                                                 3     80     0   3000
                                                 3     81     0   2000
                                                 3     82     0   1000
        
reshape converts data from one form to the other:
        
        . reshape long inc, i(id) j(year)      (goes from left-form to right)
        . reshape wide inc, i(id) j(year)      (goes from right-form to left)
        
See [R] reshape for a detailed discussion and examples for both the basic and
advanced syntax.
        
        
Options 
------- 
        
i(varlist) specifies the variable(s) whose unique values denote a logical
    observation.
        
j(varname [values]) specifies the variable whose unique values denote a sub-
    observation.  values list the unique values to be used from varname and
    typically is not explicitly stated since reshape will determine them
    automatically from the data.
        
string specifies that the j() may contain string values.
       
atwl(chars) specifies that chars should be substituted for the @ character when
    converting the data to the long form.
        
        
Examples
--------
        
 . reshape long inc ue, i(id) j(year)             converts from wide to long
 . reshape wide                                   converts back to wide
        
 . reshape ..., i(id)                             one i() variable
 . reshape ..., i(hid pid)                        two i() variables
        
 . reshape long inc, i(id) j(year 80-82 85)       specifying j() values
        
 . reshape long inc, i(id) j(sex) string          allow string var. in j()
        
        


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 14:32:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 15:32:07 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: rossini@blindglobe.net's message of "01 Nov 2000 05:42:15 -0800"
References: <20001030222745.B11703@ps2-4.ucl-41> <877l6qylxd.fsf@jeeves.blindglobe.net> <20001031192804.A1043@ps2-4.ucl-41> <87snpceqsz.fsf@jeeves.blindglobe.net> <14847.50772.578389.86697@gargle.gargle.HOWL> <87k8ang66g.fsf@jeeves.blindglobe.net>
Message-ID: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

>     MM> Dear Tony, can you elaborate what you are missing here for R?
> 
> In R, it would be a simple command to reshape a dataframe, from a
> single-observation per individual (or other unit having repeated
> measurements) to multiple lines (one per measurement).  Quite often,
> in building models, I'll switch between wide/long versions of the data
> set to build useful variables for modeling.

Almost, but not quite stack()/unstack()...

The basic cases of "reshape long" looks like it would be a piece of
cake to model over the subset() and stack() functions. "reshape wide"
looks a little more tricky, unless you want to brutally assume that
you're dealing with the result of a previous "reshape long".

(The problem would be that in principle you'd know what to do with

A B Y             
1 1 0.1           A Y1 Y2
1 2 0.3    ---->  1 0.1 0.3
2 1 0.7           2 0.7 0.9
2 2 0.9

but suppose there's a fifth line as in

A B Y  
1 1 0.1
1 2 0.3
2 1 0.7
2 2 0.9
2 2 1.1

Then you'd have two candidates for the value of Y2 for A==2 and it
wouldn't help to assume that there are really two cases with A==2,
because you can't really be sure about to which case the Y1 should
belong.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  1 15:05:19 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 1 Nov 2000 10:05:19 -0500 (EST)
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2u29rhifs.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>


  What does Stata do in this case?
  I suppose you could generate an error, or give the user the choice to
duplicate Y1/assume Y1 was the first or last case and put in NAs for the
others.

On 1 Nov 2000, Peter Dalgaard BSA wrote:

> (The problem would be that in principle you'd know what to do with
> 
> A B Y             
> 1 1 0.1           A Y1 Y2
> 1 2 0.3    ---->  1 0.1 0.3
> 2 1 0.7           2 0.7 0.9
> 2 2 0.9
> 
> but suppose there's a fifth line as in
> 
> A B Y  
> 1 1 0.1
> 1 2 0.3
> 2 1 0.7
> 2 2 0.9
> 2 2 1.1
> 
> Then you'd have two candidates for the value of Y2 for A==2 and it
> wouldn't help to assume that there are really two cases with A==2,
> because you can't really be sure about to which case the Y1 should
> belong.)
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  1 15:30:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 2000 16:30:45 +0100
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: ben@zoo.ufl.edu's message of "Wed, 1 Nov 2000 10:05:19 -0500 (EST)"
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>

ben@zoo.ufl.edu writes:

>   What does Stata do in this case?
>   I suppose you could generate an error, or give the user the choice to
> duplicate Y1/assume Y1 was the first or last case and put in NAs for the
> others.

>From the help file Tony sent, I would assume that it keeps reshaping
information around, since you can just say "reshape wide". If you
start with data in the long format, I'm not quite sure what it does.

If you assume that the variable to "unreshape" on is of the form

 1 2 ... n 1 2 ... n 1 2 ... n ...

and that everything except the response variables is constant within
blocks, then things are reasonably simple, I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 15:47:21 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 07:47:21 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "01 Nov 2000 16:30:45 +0100")
References: <Pine.LNX.4.10.10011011002570.12003-100000@bolker.zoo.ufl.edu>
 <x2ofzzhfq2.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0lbu22e.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> ben@zoo.ufl.edu writes:
    >> What does Stata do in this case?  I suppose you could generate
    >> an error, or give the user the choice to duplicate Y1/assume Y1
    >> was the first or last case and put in NAs for the others.

    >> From the help file Tony sent, I would assume that it keeps
    >> reshaping
    PDB> information around, since you can just say "reshape wide". If
    PDB> you start with data in the long format, I'm not quite sure
    PDB> what it does.

    PDB> If you assume that the variable to "unreshape" on is of the
    PDB> form

    PDB>  1 2 ... n 1 2 ... n 1 2 ... n ...

    PDB> and that everything except the response variables is constant
    PDB> within blocks, then things are reasonably simple, I suppose.

I'll have to check, but I think it repeats the first value.

Thanks for the pointer to stack/unstack -- now, having been reminded,
I think I'd seen these float through on the list (still doesn't solve
the missing modeling routines (parametric GLMMs, some of the
econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
sometime, I assume).

One more interesting point -- Stata only has the equivalent of one
data frame (and is optimized for that, another reason for smaller
footprint for stata objects than R; makes some sense if you are only
analysing data in a traditional manner, but increases thought-required
(and need for tricks) for things like (multiple) imputation and
bootstrapping, if you want to reuse generated data from multiple sets.

This also means that the reshape command does interesting things to
your (single) data set structure, since it changes the number of
observations while preserving information for returning to the initial
state.


best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Nov  1 16:01:36 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 1 Nov 2000 16:01:36 +0000 (GMT)
Subject: [Rd] Re: desiderata for data manipulation
Message-ID: <200011011601.QAA03969@toucan.stats.ox.ac.uk>

> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 01 Nov 2000 07:47:21 -0800

[...]

> Thanks for the pointer to stack/unstack -- now, having been reminded,
> I think I'd seen these float through on the list (still doesn't solve
> the missing modeling routines (parametric GLMMs, some of the
> econometrics stuff -- does R _easily_ do 3SLS?), but they'll appear
> sometime, I assume).

Only if someone is interested enough to write them....  Actually,
I thought parametric GLMMs were an unsolved research problem in
general, even in, say, the logistic case.  I know there are
suggestions in special cases (and there is a glmm function in one
of Jim Lindsey's packages) but all the simple ones can be seriously
incorrect AFAIK.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:09:59 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:09:59 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Wed, 1 Nov 2000 16:01:36 +0000 (GMT)")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
Message-ID: <877l6nu10o.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> Only if someone is interested enough to write them....

Exactly, that's why I said eventually. 

    PBR> Actually, I thought parametric GLMMs were an unsolved
    PBR> research problem in general, even in, say, the logistic case.
    PBR> I know there are suggestions in special cases (and there is a
    PBR> glmm function in one of Jim Lindsey's packages) but all the
    PBR> simple ones can be seriously incorrect AFAIK.

I'll have to follow up on Jim's packages, which have always seemed
daunting, and run some comparisons.

As far as research problems -- yes, how to fit the semiparametric
version of the GLMMs is open, but for a fully parametric version,
there isn't much of an issue.

You are right that interpretation is severely problematic and needs
to be handled with care (Thomas has a nice presentation on that) but
they can be useful tools during data analysis.

Okay, maybe I should just take off a day or two in the next week and
see if most of Stata can be replaced by R :-), since we've made good
progress on a number of issues I had previously thought were
unresolved...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Nov  1 16:13:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Nov 2000 10:13:34 -0600
Subject: [Rd] J. of Comp. and Graph. Statist., Sept. 2000
Message-ID: <6rzojjhdqp.fsf@franz.stat.wisc.edu>

Members of R-devel may be interested in the special Sept. 2000 issue
of J. of Comp. and Graph. Statist.
       http://www.amstat.org/publications/asajournals.html#jcgs
on Systems and Languages.  It features two articles by Robert
Gentleman and Ross Ihaka on "Java and Dylan" and "Lexical Scope and
Statistical Computing", an article by Paul Murrell and Ross Ihaka on
"An Approach to Providing Mathematical Annotation on Plots", an
article by John Chambers on "Users, Programmers, and Statistical
Software", an article by Duncan Temple Lang on "The Omegahat
Environment", an article by Luke Tierney on "Connecting Lisp-Stat to
COM", and an article co-authored by Thomas Lumley on "Orca: A
Visualization Toolkit for High-Dimensional Data".

All of the authors mentioned above are members of R-core.  Some of
these articles deal directly with R - for example, Gentleman and Ihaka
on lexical scoping should be of interest to anyone doing advanced R
development.  Other articles describe some related interests of R-core
members.

This is one of the few issues of an academic journal that I will read
cover-to-cover.  There's lots of good material in there.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Nov  1 16:55:39 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 01 Nov 2000 08:55:39 -0800
Subject: [Rd] Re: desiderata for data manipulation
In-Reply-To: <877l6nu10o.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "01 Nov 2000 08:09:59 -0800")
References: <200011011601.QAA03969@toucan.stats.ox.ac.uk>
 <877l6nu10o.fsf@jeeves.blindglobe.net>
Message-ID: <87em0vskc4.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

    AJR> As far as research problems -- yes, how to fit the
    AJR> semiparametric version of the GLMMs is open, but for a fully
    AJR> parametric version, there isn't much of an issue.

And I should've said -- for those models I'm interested in (which of
course, are in the simpler class).

Red-faced with foot-in-mouth...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov  1 20:11:43 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 01 Nov 2000 15:11:43 -0500
Subject: [Rd] seg fault in R-devel
Message-ID: <3A0078FF.D60FAC4B@bank-banque-canada.ca>

I've been getting a seg fault with R-devel. It was happening in the
snapshot from a few weeks ago and I just tried today's snapshot hoping
it had been found and fixed, but it persists. The problem seems to be
with garbage collection as it does not always happen in the same place,
but happens regularly with some tests which use a lot of memory.

Sorry I cannot provide more details as I have not been able to pin it
down any better than this. If this is not a known problem and someone
will suggest how to proceed then I can try, but I'm over my head with
this sort of problem.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:46 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:46 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#719)
Message-ID: <200011020541.GAA01291@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:45 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:45 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#718)
Message-ID: <200011020541.GAA01282@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:48 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:48 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#720)
Message-ID: <200011020541.GAA01295@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:51 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:51 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#723)
Message-ID: <200011020541.GAA01307@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:49 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:49 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#721)
Message-ID: <200011020541.GAA01299@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:40 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:40 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
Message-ID: <200011020541.GAA01217@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:42 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:42 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#717)
Message-ID: <200011020541.GAA01240@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From shalabhgandhi@usa.net  Thu Nov  2 05:41:50 2000
From: shalabhgandhi@usa.net (shalabhgandhi@usa.net)
Date: Thu, 2 Nov 2000 06:41:50 +0100 (MET)
Subject: [Rd] Pl. provide and Input for var.test (PR#722)
Message-ID: <200011020541.GAA01303@pubhealth.ku.dk>


I want to use var.test function of ctest library. I was able to generate the
output from R on the input given by rnorm. But when I store the same data set
provided by rnorm into a file, and then read a file into a dataframe, then on
using the dataframe as a parameter to var.test function - it gives an error
"not enough x observations".

I'll explain the above mentioned problem of mine for which I am mentioning 2
cases CaseA and CaseB. CaseA is working but CaseB is not.

(CaseA) Following are 4 commands I gave:

R
library(ctest)
x<-rnorm(50)
y<-rnorm(30)
var.test(x,y) 

The output generated by R was:
	 F test to compare two variances 

data:  x and y 
F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
alternative hypothesis: true ratio of variances is not equal to 1 
95 percent confidence interval:
 0.4675884 1.8646602 
sample estimates:
ratio of variances 
          0.950451 


(CaseB) Now I want R to give me the same output as above, when I read it from
a file. The commands I gave are:

R
library(ctest)
x<-read.table("input1.txt", header = FALSE)
y<-read.table("input2.txt", header = FALSE)
var.test(x,y)

The output generated by R is an error:
"not enough x observations"

I want to know why is this error coming, since I am creating the input1.txt
from rnorm(50) and input2.txt from rnorm(30),which should mean the same? 

Pl. see if you can provide any help on this. 

regards
shalabh gandhi 

____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1


____________________________________________________________________
Get free email and a permanent address at http://www.netaddress.com/?N=1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov  2 07:10:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Nov 2000 08:10:18 +0100 (CET)
Subject: [Rd] Pl. provide and Input for var.test (PR#716)
In-Reply-To: <200011020541.GAA01217@pubhealth.ku.dk>
References: <200011020541.GAA01217@pubhealth.ku.dk>
Message-ID: <14849.4954.98724.583840@mithrandir.hornik.net>

>>>>> shalabhgandhi  writes:

> I want to use var.test function of ctest library. I was able to
> generate the output from R on the input given by rnorm. But when I
> store the same data set provided by rnorm into a file, and then read a
> file into a dataframe, then on using the dataframe as a parameter to
> var.test function - it gives an error "not enough x observations".

> I'll explain the above mentioned problem of mine for which I am
> mentioning 2 cases CaseA and CaseB. CaseA is working but CaseB is not.

> (CaseA) Following are 4 commands I gave:

> R
> library(ctest)
> x<-rnorm(50)
> y<-rnorm(30)
> var.test(x,y) 

> The output generated by R was:
> 	 F test to compare two variances 

> data:  x and y 
> F = 0.9505, num df = 39, denom df = 29, p-value = 0.8707 
> alternative hypothesis: true ratio of variances is not equal to 1 
> 95 percent confidence interval:
>  0.4675884 1.8646602 
> sample estimates:
> ratio of variances 
>           0.950451 


> (CaseB) Now I want R to give me the same output as above, when I read it from
> a file. The commands I gave are:

> R
> library(ctest)
> x<-read.table("input1.txt", header = FALSE)
> y<-read.table("input2.txt", header = FALSE)
> var.test(x,y)

> The output generated by R is an error:
> "not enough x observations"

> I want to know why is this error coming, since I am creating the
> input1.txt from rnorm(50) and input2.txt from rnorm(30),which should
> mean the same?

> Pl. see if you can provide any help on this.

First, why send 8 *DIFFERENT* bug reports with the same content?

Second, why is this a bug report?  Have you read the FAQ first?  You do
not give enough information to help us reproduce your problem, as you do
not describe what your "input1.txt" and "input2.txt" look like.  I would
assume that reading x back from your input file failed somehow, which
should explain the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 13:22:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 05:22:48 -0800
Subject: [Rd] RSPerl...
Message-ID: <871ywufqzb.fsf@jeeves.blindglobe.net>


Duncan -
(but sent to R-devel, for any other thoughts?)

How do you envision RSPerl being used?  Without having seen the
details, I can think of playing with strings; is there a preferred
incantation for stringification of R objects (serialization)?

(actually, the main problem I'm having is that I know how I want to code
something like: 
     Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
which might be something like:
     Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
but sort of what I'm having problems with thinking about is along the
lines of  
     Robject <- eval(.Perl("perlfunctionhackery",
                           RToString(InitialRObject)))

and my brain isn't kicking into gear).   While I know how to transfer
data as arrays, and the docs suggest I can transfer tables, and that's
fine, I'm wondering how to transfer and contort objects, and if the
above might be a reasonable general sketch, or if there might be
another approach?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Thu Nov  2 13:53:29 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Thu, 2 Nov 2000 14:53:29 +0100 (MET)
Subject: [Rd] t.test and n = 2 (PR#724)
Message-ID: <200011021353.OAA08851@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


> t.test(rnorm(2))
Error in t.test(rnorm(2)) : not enough x observations

Is this just a bug (the tests in lines 34 and 49 of the code should be "< 2"
rather than "<= 2") or is it some sort of bondage and dicipline political
correctness
for the user's own good?  If the latter, I don't approve.  If the procedure
makes
mathematical sense, then R should do it.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Nov  2 13:53:31 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 2 Nov 2000 08:53:31 -0500 (EST)
Subject: [Rd] RSPerl...
Message-ID: <200011021353.IAA08695@jessie.research.bell-labs.com>



Well, I hadn't got around to announcing it, but seeing as it is
mentioned here....

 There is a first round of a package named RSPerl available
at 
    http://www.omegahat.org/RSPerl/

which provides several .C like functions but to Perl.  So one can call
Perl subroutines and object methods directly from R. Also, one can
evaluate Perl scripts in the form of strings or files.  Aside from
having access to all of the Perl modules, a benefit of this approach
is that the Perl interpreter lives in the R process.  We avoid the
expense of spawning a Perl process each call via the system()
function. But more importantly, we can use Perl in the form of an
interactive session as we do R, and so values created in one call are
available to future calls rather than disappearing along with the Perl
sub-process. So one can execute Perl commands incrementally.

At the moment, I have only tested this using the latest development
version of R (i.e. the snapshot of the unreleased 1.2 available from
CRAN).


Now, for Tony's question. 

Playing with strings is one way, but not one
I recommend. How can one sensibly serialize an e.g. lm object in a way
that Perl could understand it without having extra code on the other
side. Instead of serializing the contents of an object, the general
mechanism used in the Java and CORBA modules is to leave the R object
in R and send a reference to it over to Perl. This makes sense for
Perl methods that expect an object which have methods. So, Perl might
call residuals() on its argument. If this were an R reference to an lm
object, the Perl value would have a method residuals() which would
call the corresponding R function with the lm object as its primary
argument.

As I say, this is identical to the way we export Perl objects to R and
also how the exchange of references is done in the CORBA and Java
packages. However, in the latter two, this can be done automatically
(via reflectance).  I am still trying to develop a general, automated
way of doing this in Perl and that is the last piece.  Any suggestions
from those who know Perl better than I do (almost everyone who has
ever used it :-)) is very welcome.

Basically what would happen is a call of the form
      .Perl("perlfunctionhackery", matrix(rnorm(100),10,10)), .sigs="Matrix")
would generate a new Perl class named RMatrixReference which has the
same methods as the Perl class Matrix (read and generated by
reflectance). We would then create an instance of this class by
passing it an identifier for  matrix(...) in the argument, and passing
the matrix itself.
One method in this new class might be dim().  The RMatrixReference
object would implement this as
  R::callReference(idForMatrix, "dim")
and this ends up calling 
     dim(the.real.matrix)

The basic philosophy is compute on the object in the language in which
it is defined, make calls to those methods from any language.

As the package stands now, it is primarily a one-directional
communication mechanism (like the simple version of the .C
(i.e. without the call_R())).  That provides quite a lot of
functionality, and without any real coding effort by other users.


Hope that helps.

 D.



> From: rossini@blindglobe.net (A.J. Rossini)
> Date: 02 Nov 2000 05:22:48 -0800
> Lines: 36
> User-Agent: T-gnus/6.14.5 (based on Gnus v5.8.7) (revision 03) EMY/1.13.8 (Tastes differ) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 12) (Channel Islands) (i386-debian-linux)
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> 
> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?
> 
> (actually, the main problem I'm having is that I know how I want to code
> something like: 
>      Robject <- .Perl("perlfunctionhackery", "stringifedRObjectToHack")
> which might be something like:
>      Robject <- eval(.Perl("perlfunctionhackery","stringifedRObjectToHack"))
> but sort of what I'm having problems with thinking about is along the
> lines of  
>      Robject <- eval(.Perl("perlfunctionhackery",
>                            RToString(InitialRObject)))
> 
> and my brain isn't kicking into gear).   While I know how to transfer
> data as arrays, and the docs suggest I can transfer tables, and that's
> fine, I'm wondering how to transfer and contort objects, and if the
> above might be a reasonable general sketch, or if there might be
> another approach?
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> BlindGlobe Networks (home/default)	rossini@blindglobe.net	
> UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> 
> FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
> CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
> UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 



-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  2 14:04:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 2000 15:04:53 +0100
Subject: [Rd] RSPerl...
In-Reply-To: rossini@blindglobe.net's message of "02 Nov 2000 05:22:48 -0800"
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
Message-ID: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> Duncan -
> (but sent to R-devel, for any other thoughts?)
> 
> How do you envision RSPerl being used?  Without having seen the
> details, I can think of playing with strings; is there a preferred
> incantation for stringification of R objects (serialization)?

I don't know if it's preferred, but the default thing you get if you
edit() an R object is that the editor is started on the results of
dput() and the result is subjected to eval(parse(...)). Perl might
just be smart enough to handle data in that form.

Another idea would be to use mechanisms like in .Tcl.args where
there's a layer that stringifies R objects (into what? Perl code?)
before passing them to Perl. With Perl's well-known ojections to fixed
rules, that might be tricky, but who knows?

Seeing some sketches of the functionality you want to achieve might be
fruitful. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 14:25:28 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 06:25:28 -0800
Subject: [Rd] RSPerl...
In-Reply-To: <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
 (Peter Dalgaard BSA's message of "02 Nov 2000 15:04:53 +0100")
References: <871ywufqzb.fsf@jeeves.blindglobe.net>
 <x2bsvyfp16.fsf@blueberry.kubism.ku.dk>
Message-ID: <87u29q30yv.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


    PDB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Duncan - (but sent to R-devel, for any other thoughts?)
    >> 
    >> How do you envision RSPerl being used?  Without having seen the
    >> details, I can think of playing with strings; is there a
    >> preferred incantation for stringification of R objects
    >> (serialization)?

    PDB> I don't know if it's preferred, but the default thing you get
    PDB> if you edit() an R object is that the editor is started on
    PDB> the results of dput() and the result is subjected to
    PDB> eval(parse(...)). Perl might just be smart enough to handle
    PDB> data in that form.

    PDB> Another idea would be to use mechanisms like in .Tcl.args
    PDB> where there's a layer that stringifies R objects (into what? 
    PDB> Perl code?)  before passing them to Perl. With Perl's
    PDB> well-known ojections to fixed rules, that might be tricky,
    PDB> but who knows?

    PDB> Seeing some sketches of the functionality you want to achieve
    PDB> might be fruitful.

Peter, here's 2 of the simpler examples (silly, but please scale for
rationale) of what I'm wondering about:

I'd like to do:

lm.output <- .Perl("PerlToSplitAndFormatLMandUseWebDAVtoPostToMyWWWSite",
                   lm(y~x))

or similarly,

NewData  <- .Perl("GrabAndMerge2CriticalDataSetsFromTheWWW",
                  NHANES.19xx,
                  NHANES.19yy)

where NHANES.zzzz is a list describing the location and
characteristics of a particular data set.

Everything is trivial in the mathematician's sense to me, except for
getting Perl to parse and/or manipulate the R object. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 19:45:27 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 11:45:27 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
Message-ID: <87itq617l4.fsf@jeeves.blindglobe.net>


Is there a simple way to determine at run-time the directory with HTML
version of help pages?

(to see where I'm heading here, if you've got w3 installed under
(X)Emacs on Unix _or_ a Microsoft OS, do 
        w3-find-file 
and load
        $(R_HOME)/library/html/whateverfunction.html

It's slightly nicer than the standard ESS text-help.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov  2 19:58:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 2 Nov 2000 19:58:06 +0000 (GMT)
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <87itq617l4.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>

On 2 Nov 2000, A.J. Rossini wrote:

> Is there a simple way to determine at run-time the directory with HTML
> version of help pages?

The short answer is `no', for the directory depends on the help page!

> (to see where I'm heading here, if you've got w3 installed under
> (X)Emacs on Unix _or_ a Microsoft OS, do 
>         w3-find-file 
> and load
>         $(R_HOME)/library/html/whateverfunction.html

But it's whateverlibrary/package/html/whateverfunction.html

You both overlooked the package part and the possibility of multiple
libraries. (To make sure we have the terminology straight, in R there
are libraries of packages, and in S libraries of sections (S3) or chapters
(S4).  I didn't invent this ....)

Since ESS apparently asks R for the text help page (or it does it just grab
the contents?), it could in principle do the same for the html help page.
That is, help could be asked when running under ESS to return the filename,
not send the file to the OS to be viewed (Windows) or call `browser -remote
"openURL(foo.html)' on it.

As far as I can see only the running R session can do this correctly, and
it tooks several goes to get it right (if we have).  What the right file is
depends on the history of the R session.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Nov  2 20:05:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 02 Nov 2000 12:05:09 -0800
Subject: [Rd] how to extract directory with HTML version of help pages?
In-Reply-To: <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
 (Prof Brian D Ripley's message of "Thu, 2 Nov 2000 19:58:06 +0000 (GMT)")
References: <87itq617l4.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10011021946290.29410-100000@auk.stats>
Message-ID: <87em0u16oa.fsf@jeeves.blindglobe.net>

>>>>> "PBDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    PBDR> But it's whateverlibrary/package/html/whateverfunction.html

Correct, I'm slipping.

    PBDR> You both overlooked the package part and the possibility of
    PBDR> multiple libraries. (To make sure we have the terminology
    PBDR> straight, in R there are libraries of packages, and in S
    PBDR> libraries of sections (S3) or chapters (S4).  I didn't
    PBDR> invent this ....)

    PBDR> Since ESS apparently asks R for the text help page (or it
    PBDR> does it just grab the contents?), it could in principle do
    PBDR> the same for the html help page.  That is, help could be
    PBDR> asked when running under ESS to return the filename, not
    PBDR> send the file to the OS to be viewed (Windows) or call
    PBDR> `browser -remote "openURL(foo.html)' on it.

ESS does the equivalent of cut-and-paste between the prompts.

So if there was an option to return the html, Emacs could render it
(provided W3 was installed).

This would be an adequate solution, and easier that the one I
proposed. 

    PBDR> As far as I can see only the running R session can do this
    PBDR> correctly, and it tooks several goes to get it right (if we
    PBDR> have).  What the right file is depends on the history of the
    PBDR> R session.

Which was part of the point of querying the session (I think I
mis-stated run-time, but I meant at the time point of the 
        help() 
call.

Thanks, this helps.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov  3 16:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Nov 2000 17:48:16 +0100
Subject: [Rd] bound checking (for "x[] <-") now in R-devel
In-Reply-To: <14849.11678.445464.595856@gargle.gargle.HOWL>
References: <B625EB23.69E2%pflugshaupt@geobot.umnw.ethz.ch>
 <3A006648.EB91FE51@ucsd.edu>
 <14849.11678.445464.595856@gargle.gargle.HOWL>
Message-ID: <14850.60496.903173.357918@gargle.gargle.HOWL>

I'm following a `discussion on R-help'
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "Peter" == Peter Perkins <pperkins@ucsd.edu> writes:
    >>> AUcap30<-0 
    >>> for(i in 1:length(AU)) AUcap30[i] <- min(30,AU[i])

    Peter> am i right in thinking that this is an implicit version of

    Peter> for(i in 1:length(AU)) AUcap30 <- c(AUcap30, min(30,AU[i])) ?

    MM> yes (as others have said on this thread).

    Peter> huh.  i guess i'm surprised that this even works at all.  i
    Peter> don't see any specific mention in section 3 of the FAQ, and a
    Peter> quick look at the R intro documents turned up no mention either.

    MM> (really, I thought it *was* there;  no time to search now..)

    Peter> but i seem to remember that it would not work in S (not that
    Peter> that is necessarily a reason for it not to work in R).

    MM> yes, it has been working in S `since ever' (even before there was S+).

    Peter> i kind of _like_ having array bounds checking -- is "array
    Peter> extension on out of bounds indexing" really the default in R,

    MM> yes (and will be)

    Peter> and is there a way to enforce array bounds checking?

    MM> not currently, but probably, there will be, by

    MM>        options(check.bound = TRUE)

    MM> which is (only partly implemented) in the current development
    MM> version.

Okay.
In today's development version of R 
(use rsync or tomorrow's or Sunday's snapshot R-devel.tar.gz),
there's now in help(options)

 check.bounds: logical, defaulting to `FALSE'.  If true, a warning is
	   produced whenever a ``generalized vector'' (atomic or `list')
	   is extended, by something like `x <- 1:3; x[5] <- 6'.

and here's an example :

    > x <- 1:3 ; x[5] <- 6
				# no warning

    > options(check.bounds = TRUE)
    > x <- 1:3 ; x[5] <- 6
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 5) 
    >


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From montero@kingkong.me.berkeley.edu  Fri Nov  3 20:48:06 2000
From: montero@kingkong.me.berkeley.edu (montero@kingkong.me.berkeley.edu)
Date: Fri, 3 Nov 2000 21:48:06 +0100 (MET)
Subject: [Rd] nls() function is not found (PR#725)
Message-ID: <200011032048.VAA25260@pubhealth.ku.dk>

Full_Name: Michael Montero
Version: 1011
OS: NT4.0
Submission from: (NULL) (128.32.148.191)


I haven't been able to use the nls() function because of the following error:

Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "nls"


Apparently nls() is no where to be found, in the /library directory nls exists
with all its files..

need help..

thanks

mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  3 22:32:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 3 Nov 2000 22:32:00 +0000 (GMT)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011032229380.17193-100000@auk.stats>

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..

But did you load it by library(nls)?

> need help..

If you want to post a bug report, please read the section on bugs in
the FAQ first.  There's nothing here that is reproducible.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Nov  3 22:41:35 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 3 Nov 2000 17:41:35 -0500 (EST)
Subject: [Rd] nls() function is not found (PR#725)
In-Reply-To: <200011032048.VAA25260@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10011031739410.14656-100000@bolker.zoo.ufl.edu>


  Sorry if this is restating the obvious but: did you load the library by
doing library(nls)?  Do you have nls in the right place -- does library()
list nls?

On Fri, 3 Nov 2000 montero@kingkong.me.berkeley.edu wrote:

> Full_Name: Michael Montero
> Version: 1011
> OS: NT4.0
> Submission from: (NULL) (128.32.148.191)
> 
> 
> I haven't been able to use the nls() function because of the following error:
> 
> Error in eval.with.vis(expr, envir, enclos) : 
>         couldn't find function "nls"
> 
> 
> Apparently nls() is no where to be found, in the /library directory nls exists
> with all its files..
> 
> need help..
> 
> thanks
> 
> mike
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sat Nov  4 21:23:18 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sat, 4 Nov 2000 21:23:18 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <200010311957.OAA26707@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Tue, Oct 31, 2000 at 02:57:36PM -0500
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com>
Message-ID: <20001104212318.A829@ps2-4.ucl-41>


--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii

On Tue, Oct 31, 2000 at 02:57:36PM -0500, Duncan Temple Lang wrote:
> Just a quick thought....

> many of them are in the R executable (R.bin). Perhaps the linking and
> loading mechanisms in Hurd do not export these symbols from the
> application in a way that shared libraries can find them.  Or it may
> be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
> (although that shouldn't matter).

There is something with the hurd ld.so, but I do not know, what. But I 

1) run 'make test' with --gui=none. It went up till dies with
 
> library("eda") # returns invisibly
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
  /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
Error in library("eda") : .First.lib failed
Execution halted

Everything goes well in Linux with the same source (R-1.1.1)

2) compared the configure.log-s from the Hurd and Linux. There are similar
errors in both (due to the missing tcl/tk and atlas [what is this? I have not
found it anywhere] libraries, and that ld can not find -lmoto and -lz, and
others), but also ones special to the Hurd. Here they are:

--
configure:7358: (Each undeclared identifier is reported only once
configure:7358: for each function it appears in.)
configure:7358: parse error before `me'
configure: failed program was:
#line 7343 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
--
int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
--
configure:7406: gcc -o conftest -g -O2 -I/usr/local/include  conftest.c -lipc  -ldl -lncurses -lm -L/usr/local/lib 1>&5
/usr/bin/ld: cannot find -lipc
collect2: ld returned 1 exit status
configure: failed program was:
#line 7395 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */


3) sent a message to the Hurd folks. One reply was this:

<quote on>

The correct linker options for this sort of issue are the same as on Linux.
Perhaps their build scripts behave differently on Linux than on Hurd.  It
sounds like they expect to link the main executable with --export-dynamic
(aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
are defined in the executable on Linux and on Hurd.

<quote off>

I did this (nm) for both the Hurd and Linux. The resulting list is significantly
different, with a 33k list for Linux and a 3k list for the Hurd. I enclose the
latter (I suppose the previous is correct and reproducible).

General remark:

I use Debian 2.2 (potato) with the stable tools. The hurd uses woody tools.
The only difference apart from this that I use f2c in Linux, bug f77 in the
Hurd. (I will try f2s on the Hurd as well)

Next step?

Thanks,
Zsombor

--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="Rsym.hurd"

08174cfc A _DYNAMIC
08174b04 A _GLOBAL_OFFSET_TABLE_
08174db4 A __bss_start
08174de0 B __ctype_b
08174dc4 B __ctype_tolower
08174ddc B __ctype_toupper
0816cac0 D __data_start
         w __deregister_frame_info
08174dc8 B __environ
         w __gmon_start__
         U __h_errno_location
08174dc0 B __hurd_sigthread_stack_base
08174dd8 B __hurd_sigthread_stack_end
08174de8 B __hurd_sigthread_variables
08174dcc B __hurd_threadvar_stack_mask
08174dd0 B __hurd_threadvar_stack_offset
         U __libc_clk_tck
         U __libc_start_main
         w __register_frame_info
         U __sigsetjmp
         U __strdup
         U __strtod_internal
         U __strtol_internal
         U __xstat
08174db4 A _edata
081a7e40 A _end
08174dc8 V _environ
08106f58 A _etext
08106f3c ? _fini
08049b8c ? _init
         U abort
         U accept
         U acos
         U acosh
         U asin
         U asinh
         U atan
         U atan2
         U atanh
         U bind
         U calloc
         U ceil
         U chdir
         U clearerr
         U close
         U closedir
         U connect
         U cos
         U cosh
         U ctime
         U dlclose
         U dlerror
         U dlopen
         U dlsym
08174dc8 V environ
         U exit
         U exp
         U fclose
         U fflush
         U fgetc
         U fgets
         U fileno
         U finite
         U floor
         U fmod
         U fopen
         U fork
         U fprintf
         U fputc
         U fputs
         U fread
         U free
         U fscanf
         U fwrite
         U getcwd
         U getenv
         U gethostbyaddr
         U gethostbyname
         U getpid
         U hypot
         U isatty
         U isnan
         U listen
         U log
         U log10
         U malloc
0804a730 T matherr
         U memcpy
         U modf
         U opendir
         U pclose
         U popen
         U pow
         U printf
         U rand
080ba6e0 T re_compile_fastmap
080bc884 T re_compile_pattern
080bacd0 T re_match
080bacf4 T re_match_2
081734ec D re_max_failures
080baa8c T re_search
080baab4 T re_search_2
080baa40 T re_set_registers
080b7e90 T re_set_syntax
081734a4 D re_syntax_options
         U readdir
         U realloc
         U recv
080bc8b4 T regcomp
080bcb00 T regerror
080bc9d8 T regexec
080bcb7c T regfree
         U remove
         U select
         U send
         U setlocale
         U sigaction
         U sigaddset
         U sigemptyset
         U siglongjmp
         U signal
081a7e3c B signgam
         U sigprocmask
         U sin
         U sinh
         U socket
         U sprintf
         U sqrt
         U sscanf
08174de4 B stdin
08174dd4 B stdout
         U strcat
         U strchr
         U strcmp
         U strcoll
         U strcpy
         U strncat
         U strncmp
         U strncpy
         U strrchr
         U strtok
         U system
         U tan
         U tanh
         U time
         U times
         U tmpnam
         U ungetc
         U unlink
         U vfprintf
         U vsnprintf
         U vsprintf
         U waitpid
         U xdr_bytes
         U xdr_double
         U xdr_int
         U xdr_string
         U xdrstdio_create

--7JfCtLOvnd9MIVvH--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov  5 00:43:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Nov 2000 01:43:49 +0100
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: Zsombor Cseres-Gergely's message of "Sat, 4 Nov 2000 21:23:18 +0000"
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41>
Message-ID: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>

Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:

> There is something with the hurd ld.so, but I do not know, what. But I 
> 
> 1) run 'make test' with --gui=none. It went up till dies with
>  
> > library("eda") # returns invisibly
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
> 	unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>   /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
> Error in library("eda") : .First.lib failed
> Execution halted

OK, so that shows that dynamic loading doesn't work.

> 3) sent a message to the Hurd folks. One reply was this:
> 
> <quote on>
> 
> The correct linker options for this sort of issue are the same as on Linux.
> Perhaps their build scripts behave differently on Linux than on Hurd.  It
> sounds like they expect to link the main executable with --export-dynamic
> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
> are defined in the executable on Linux and on Hurd.
> 
> <quote off>

Aha... Actually watching the link step during make would probably show
that -export-dynamic is not among the options. The codes that inserts
that flag during configure would seem to be (in configure or configure.in)

  *linux*)
    main_ldflags="-export-dynamic"
    ;;

which likely will not trigger on the Hurd... In the longer run we
should fix configure, but on a short term, you can fix this by setting

MAIN_LDFLAGS = -export-dynamic

in Makeconf. (It would seem to be spelled with a single hyphen, for
some oddball reason).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov  5 08:06:25 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Nov 2000 09:06:25 +0100 (CET)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
References: <20001031193640.B1043@ps2-4.ucl-41>
 <200010311957.OAA26707@jessie.research.bell-labs.com>
 <20001104212318.A829@ps2-4.ucl-41>
 <x28zqzjliy.fsf@blueberry.kubism.ku.dk>
Message-ID: <14853.5377.881692.164218@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk> writes:
>> There is something with the hurd ld.so, but I do not know, what. But I 
>> 
>> 1) run 'make test' with --gui=none. It went up till dies with
>> 
>> > library("eda") # returns invisibly
>> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>> unable to load shared library "/home/zs/R-1.1.1/library/eda/libs/eda.so":
>> /home/zs/R-1.1.1/library/eda/libs/eda.so: undefined symbol: R_rsort
>> Error in library("eda") : .First.lib failed
>> Execution halted

> OK, so that shows that dynamic loading doesn't work.

>> 3) sent a message to the Hurd folks. One reply was this:
>> 
>> <quote on>
>> 
>> The correct linker options for this sort of issue are the same as on Linux.
>> Perhaps their build scripts behave differently on Linux than on Hurd.  It
>> sounds like they expect to link the main executable with --export-dynamic
>> (aka -E).  Use nm --dynamic or objdump --dynamic-syms to see what symbols
>> are defined in the executable on Linux and on Hurd.
>> 
>> <quote off>

> Aha... Actually watching the link step during make would probably show
> that -export-dynamic is not among the options. The codes that inserts
> that flag during configure would seem to be (in configure or configure.in)

>   *linux*)
>     main_ldflags="-export-dynamic"
>     ;;

> which likely will not trigger on the Hurd... In the longer run we
> should fix configure, but on a short term, you can fix this by setting

> MAIN_LDFLAGS = -export-dynamic

> in Makeconf. (It would seem to be spelled with a single hyphen, for
> some oddball reason).

Actually, can you try a current snapshot of R-devel?

I am in the process of converting all shlib stuff to GNU libtool which
is now used by default ... and I think this change should make Peter's
suggestion happen automagically ...

Thanks && waiting for your findings,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011070615.HAA20961@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 725 *
Subject: nls() function is not found
From: montero@kingkong.me.berkeley.edu
Date: Fri, 3 Nov 2000 21:48:05 +0100 (MET)
* PR# 713 *
Subject: median(c(NA,NA),na.rm=T) fails
From: gnw3@acm.org
Date: Sun, 29 Oct 2000 14:48:09 +0100 (MET)
* PR# 716 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 714 *
Subject: prop.test and x = 0
From: charlie@stat.umn.edu
Date: Sun, 29 Oct 2000 16:29:56 +0100 (MET)
* PR# 719 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 718 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 717 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:32 MST
* PR# 721 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:26 MST
* PR# 720 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 724 *
Subject: t.test and n = 2
From: charlie@stat.umn.edu
Date: Thu, 2 Nov 2000 14:53:26 +0100 (MET)
* PR# 723 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:27 MST
* PR# 722 *
Subject: Pl. provide and Input for var.test
From: Shalabh Gandhi <shalabhgandhi@usa.net>
Date:  1 Nov 00 22:41:31 MST
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov  7 12:03:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Nov 2000 13:03:48 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071203.NAA19946@pubhealth.ku.dk>

For R Version 1.1.1 and R-devel (Linux)...

Sorry, there's no time to fix myself now
{e.g., after starting a new device} :

    par(las=3); plot(1:10); par(las=1) ; mtext("mtext")

Gives a left-adjusted (as for  adj = 0)  mtext,
even if  par("adj") is still 0.5

Note that I'm also not convinced that  mtext() should follow  par("las")
as it does in the following {2nd bug ?} :


    par(las=3); plot(1:10); mtext("mtext")

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Nov  7 13:43:59 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 7 Nov 2000 14:43:59 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011071343.OAA21680@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> For R Version 1.1.1 and R-devel (Linux)...
> 
> Sorry, there's no time to fix myself now
> {e.g., after starting a new device} :
> 
>     par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
>
> Gives a left-adjusted (as for  adj = 0)  mtext,
> even if  par("adj") is still 0.5


That's not a bug, I suppose. From help of mtext():

adj  adjustment for each string. [......]
     If adj is not a finite value (the default), 
                                       ^^^^^^^ = NA, not from par("adj")
     the value par("las") determines the adjustment. 
     For strings plotted parallel to the axis the default is to centre
the string. 
 

> Note that I'm also not convinced that  mtext() should follow  par("las")
> as it does in the following {2nd bug ?} :
> 
>     par(las=3); plot(1:10); mtext("mtext")


Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a second
bug ...



But I think most users don't expect the behavior of mtext(). Maybe some
changes are useful:

1. The above described "bug", maybe centre all strings as the default
(and not only those strings plotted parallel to the axis), so there are
not so much dependencies between the settings of "adj" and "las".

2. Have a look at:

      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2)
      mtext("text2", adj=0.8)

This is intended (from the help), but I would expect (without reading
the help at first) the following result:
 
      par("las"=3)
      plot(1:10)
      mtext("text1", adj=0.2, at=5.5)
      mtext("text2", adj=0.8, at=5.5)


Additionally: The argument "adj" in mtext() does not support adj=c(x, y)
as described in ?par.



Regards,
Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Nov 20 09:45:12 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Nov 2000 04:45:12 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
Message-ID: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>


  That's true, but I was looking for a more comprehensive solution (which
would be harder to implement, and have the potential to gobble memory like
crazy) of being able to retrieve an list of past values -- "oh, that
third-to-last answer is the one I needed, I'll take that and put it in
this expression"
  (Besides which, 4 characters are better than 11 but worse than 1 or 2)

  I've moved this to R-devel.

On Tue, 7 Nov 2000, Mark Myatt wrote:

> Yves Gauvreau <cyg@sympatico.ca> writes:
> >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> >
> >Would be nice to have something simpler than .Last.value
> 
> Perhaps I am stating the obvious or being extremely stupid but you can
> create a function:
> 
>         lv <- function()
>          {
>          .Last.value
>          }
> 
> And then use lv() whenever you need .Last.value.
> 
> Mark
> 
> --
> Mark Myatt
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark@myatt.demon.co.uk  Tue Nov  7 16:15:35 2000
From: mark@myatt.demon.co.uk (Mark Myatt)
Date: Tue, 7 Nov 2000 16:15:35 +0000
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
References: <286l3cA2bAC6Ewkg@myatt.demon.co.uk>
 <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <AueIzBAnqCC6Ewit@myatt.demon.co.uk>

ben@zoo.ufl.edu writes:
>
>  That's true, but I was looking for a more comprehensive solution (which
>would be harder to implement, and have the potential to gobble memory like
>crazy) of being able to retrieve an list of past values -- "oh, that
>third-to-last answer is the one I needed, I'll take that and put it in
>this expression"
>  (Besides which, 4 characters are better than 11 but worse than 1 or 2)
>
>  I've moved this to R-devel.
>

That is an interesting idea. I have yet to use anything like a stack in
R but I guess that it should be easy enough to do (it might even be
there already). Seems to me that something like the way Forth works ...
with a stack and reverse polish notation might suit you.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Nov  7 18:41:42 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Tue, 7 Nov 2000 10:41:42 -0800 (PST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <Pine.LNX.4.10.10011200441280.1937-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>


ESS comes fairly close to providing this capability:

M-p  plays comint-previous-input

C-u number M-p plays goes back thru 'number' inputs

comint-previous-input clobbers the existing command line, so to get

> abc(<k-th last command line>)

you would need to type

abc( RET C-u k M-p )

or 

abc( RET M-p ... M-p )

hitting M-p k times

Admittedly, this is NOT the same as having a stack of objects...

Chuck Berry

On Mon, 20 Nov 2000 ben@zoo.ufl.edu wrote:

> 
>   That's true, but I was looking for a more comprehensive solution (which
> would be harder to implement, and have the potential to gobble memory like
> crazy) of being able to retrieve an list of past values -- "oh, that
> third-to-last answer is the one I needed, I'll take that and put it in
> this expression"
>   (Besides which, 4 characters are better than 11 but worse than 1 or 2)
> 
>   I've moved this to R-devel.
> 
> On Tue, 7 Nov 2000, Mark Myatt wrote:
> 
> > Yves Gauvreau <cyg@sympatico.ca> writes:
> > >... and Matlab uses "ans" and Mathematica effectively uses %, %%
> > >
> > >Would be nice to have something simpler than .Last.value
> > 
> > Perhaps I am stating the obvious or being extremely stupid but you can
> > create a function:
> > 
> >         lv <- function()
> >          {
> >          .Last.value
> >          }
> > 
> > And then use lv() whenever you need .Last.value.
> > 
> > Mark
> > 
> > --
> > Mark Myatt
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> > 
> 
> -- 
> 318 Carr Hall                                bolker@zoo.ufl.edu
> Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
> Box 118525                                   (ph)  352-392-5697
> Gainesville, FL 32611-8525                   (fax) 352-392-3704
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Nov  7 19:10:36 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 7 Nov 2000 11:10:36 -0800
Subject: [Rd] error handling
Message-ID: <MPEHJEGLNPNFGJFOJMKNCEIICAAA.Don.Wingate@IntelliChem.com>

Hello R developers,

Platform: Windows 2000.
Compiler: GNU GCC - 2.95.2 (CRTDLL)

I have a C function for evaluating commands using eval(SEXP,SEXP) which is
included in a personal make of R.dll. (Similiar to R_Proxy_evaluate() in
rproxy_impl.c)  Using SETJMP to catch errors works but there is a problem.
For example, the following code:

if (SETJMP(R_ToplevelContext->cjmpbuf)) //  R_ToplevelContext->cjmpbuf
R_GlobalContext->cjmpbuf
	return FALSE;
R_CurrentExpr = eval(R_CurrentExpr , rho);

will appear to work the first time there is an error, but the second error
causes an infinite loop. I have identified the location where the loop
occurs. It is in the function jump_to_toplevel() in errors.c inside the for
loop:

	for (c = R_GlobalContext; c; c = c->nextcontext) { ... }

I have found a work around for this but is seems cludgy and I don't know the
POTENTIAL PROBLEMS that might be introduced. It involves setting up a
context and forcing R_GlobalContext's nextcontext to 0, as in the following
(by the way, this same approach doesn't work in the example above, which is
why I set up a context):

begincontext(&thiscontext, 0, CTXT_GENERIC, R_NilValue, R_NilValue,
R_NilValue);
R_GlobalContext->nextcontext = 0;
if (!SETJMP(thiscontext.cjmpbuf))
	R_CurrentExpr = eval(R_CurrentExpr , rho);
endcontext(&thiscontext);

This code solves my problem, however, in certain cases my calling C++ client
application cannot catch the error (exception?) that is generated, and my
program hard crashes. (A bug in Visual Studio, I think.) For this reason,
using SETJMP(R_ToplevelContext->cjmpbuf) as in the first example would
probably be preferable in my case because it doesn't generate an exception
which must be caught by the C++ client.

Note: I am forcing an error to test this by simply calling matrix(x) on a
variable x which doesn't exist.

I realize that R is meant to run in its own event loop and that this is not
a straight-forward problem. However, if anyone able to provide any insight
into what might be going or how to handle it on I would be greatful.

Thanks,
Don Wingate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Tue Nov  7 20:12:37 2000
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Tue, 7 Nov 2000 21:12:37 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072012.VAA25242@pubhealth.ku.dk>

Hi,

By going through the mailing list archives, I noticed that people use
the arrows() command to add error bars to their plots.  I think there
is a problem when trying to draw arrows of zero length.  In the
following code, certainly the x driver produces an odd-angled line.
In the postscript device, NaNQ values are generated; when the
postscript file is viewed in Ghostview, an error is then generated.

Sample run:

postscript(file="test.ps")
x <- c(0, 1, 2)
y <- c(0, -0.5, 0.3)
s <- c(0, 0.1, 0.1)
plot(x,y)
arrows(x, y-s, x, y+s, code=3, angle=90)
dev.off()

Looking in the file test.ps I see the following (around line 160):

np
103.58 354.24 m
103.58 354.24 l
o
np
NaNQ NaNQ m
103.58 354.24 l
NaNQ NaNQ l

This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).



Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  7 21:58:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Nov 2000 22:58:35 +0100 (MET)
Subject: [Rd] arrows() doesn't like zero-length arrows (PR#727)
Message-ID: <200011072158.WAA25628@pubhealth.ku.dk>

On Tue, 7 Nov 2000 stephen@cogsci.ed.ac.uk wrote:

> Hi,
> 
> By going through the mailing list archives, I noticed that people use
> the arrows() command to add error bars to their plots.  I think there
> is a problem when trying to draw arrows of zero length.  In the
> following code, certainly the x driver produces an odd-angled line.
> In the postscript device, NaNQ values are generated; when the
> postscript file is viewed in Ghostview, an error is then generated.
> 
> Sample run:
> 
> postscript(file="test.ps")
> x <- c(0, 1, 2)
> y <- c(0, -0.5, 0.3)
> s <- c(0, 0.1, 0.1)
> plot(x,y)
> arrows(x, y-s, x, y+s, code=3, angle=90)
> dev.off()
> 
> Looking in the file test.ps I see the following (around line 160):
> 
> np
> 103.58 354.24 m
> 103.58 354.24 l
> o
> np
> NaNQ NaNQ m
> 103.58 354.24 l
> NaNQ NaNQ l
> 
> This was with R Version 1.1.1  (August 15, 2000) (running on OSF/1).

OS-specific (most OSes do sensible things), and already solved in the
development version.  There was some discussion of this (Christian Ritter)
on R-help AFAIR a while back.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 00:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 01:53:37 +0100
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: "Charles C. Berry"'s message of "Tue, 7 Nov 2000 10:41:42 -0800 (PST)"
References: <Pine.GSO.4.05.10011071028180.317-100000@tajo.ucsd.edu>
Message-ID: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>

"Charles C. Berry" <cberry@tajo.ucsd.edu> writes:

> Admittedly, this is NOT the same as having a stack of objects...

It would be no big deal to create a stack of objects resulting from
the last N expressions. What I'm not too sure about is whether you'd
really want that. Notice that it could imply keeping several copies of
a data set in memory. E.g. the value of an assignment like "data <-
transform(data, logx=log(x))" is the value of the RHS.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.e.brown@lancaster.ac.uk  Wed Nov  8 10:56:50 2000
From: p.e.brown@lancaster.ac.uk (p.e.brown@lancaster.ac.uk)
Date: Wed, 8 Nov 2000 11:56:50 +0100 (MET)
Subject: [Rd] installing R on solaris (PR#728)
Message-ID: <200011081056.LAA01780@pubhealth.ku.dk>

Hi.  Our computer guy had some adventures installing R on a solaris
machine, but it's working now.  I'm sending you his mails, please pass
them on to whoever deals with this stuff.

ta.
Patrick

From: Kev Buckley <k.buckley@lancaster.ac.uk>

Trying to install R-1.1.1 on Solaris RCC for you. Looks as though I
meant to before, as I had a TGZ of the previous release lying around.

Anyway, if you have any sway at all with folk who write this package,
can you drop them a line on my behalf (The FAQ says feedback is
welcome, but of course there's no e-mail address to send it to !!!)
saying that:

They ought to document what environmental variables you can use to
override the compilers. We use the SUNWSpro stuff but have the GNU
stuff there as well and I have had to wade through the 'configure.in'
to find out (guess) how to set these.

Turns out to be CC, CXX and FC (for C, C++ and FORTRAN resp.) giving 
me the rather enormous configure line of

CC="/usr/local/packages/SUN/SUNWspro/bin/cc" \
FC="/usr/local/packages/SUN/SUNWspro/bin/f77" \
CXX="/usr/local/packages/SUN/SUNWspro/bin/CC -compat" \
./configure --prefix=/usr/local/packages/R-1.1.1

I suppose CC FC and CXX are pretty standard but other, less savvy folk
aren't going to know this, so it wouldn't do any harm for them, to
mention it.

Anyway it has configured, so lets see if I can build it.

-- 
Regards,

From: Kev Buckley <k.buckley@lancaster.ac.uk>

As for R, you may also like to pass this on:

The following lines in the Makefile blow "make install" out of 
the water

#       @for f in `ls bin/*.$(SHLIBEXT)`; do \
#         $(INSTALL_PROGRAM) $${f} $(rhome)/bin; \
#       done              

There are no files bin/*.$(SHLIBEXT) ( ie bin/*.so )

but once they are commented out, it installs OK and I get an R> prompt
when I type

/usr/local/packages/R-1.1.1/bin/R 

on titanic, so I guess it works

I'll set it up so it appears on the compute nodes and you can try and
submit a job to test it out in batch. Use the path as above when you
invoke it.

Get back to you when you can have a go.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov  8 11:27:39 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 8 Nov 2000 12:27:39 +0100 (MET)
Subject: [Rd] par(las=.)  gives wrong "adj" for mtext() (PR#726)
Message-ID: <200011081127.MAA02281@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> maechler@stat.math.ethz.ch wrote:
    >>  For R Version 1.1.1 and R-devel (Linux)...
    >> 
    >> Sorry, there's no time to fix myself now {e.g., after starting a new
    >> device} :
    >> 
    >> par(las=3); plot(1:10); par(las=1) ; mtext("mtext")
    >> 
    >> Gives a left-adjusted (as for adj = 0) mtext, even if par("adj") is
    >> still 0.5


    Uwe> That's not a bug, I suppose. From help of mtext():

    Uwe> adj adjustment for each string. [......]  If adj is not a finite
    Uwe> value (the default), ^^^^^^^ = NA, not from par("adj") the value
    Uwe> par("las") determines the adjustment.  For strings plotted
    Uwe> parallel to the axis the default is to centre the string.
 
Yes, it *is* one!

Note that above, I had already reset  "par(las = 1)"
*before* doing  mtext(.) !

--------

    >> Note that I'm also not convinced that mtext() should follow
    >> par("las") as it does in the following {2nd bug ?} :
    >> 
    >> par(las=3); plot(1:10); mtext("mtext")


    Uwe> Everything is vertical, here (R-1.1.1, WinNT4.0). I don't see a
    Uwe> second bug ...

yes, and I didn't say so, I said
"not convinced that mtext() should ..."

I think you have good  points below :

    Uwe> But I think most users don't expect the behavior of mtext(). Maybe
    Uwe> some changes are useful:

    Uwe> 1. The above described "bug", maybe centre all strings as the
    Uwe> default (and not only those strings plotted parallel to the axis),
    Uwe> so there are not so much dependencies between the settings of
    Uwe> "adj" and "las".

    Uwe> 2. Have a look at:

    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2)
    Uwe> mtext("text2", adj=0.8)

    Uwe> This is intended (from the help), but I would expect (without reading
    Uwe> the help at first) the following result:
 
    Uwe> par("las"=3)
    Uwe> plot(1:10)
    Uwe> mtext("text1", adj=0.2, at=5.5)
    Uwe> mtext("text2", adj=0.8, at=5.5)

Request for comments :  
Shouldn't we change the behavior() of mtext() here?

----


    Uwe> Additionally: The argument "adj" in mtext() does not support
    Uwe> adj=c(x, y) as described in ?par.

yes, but the `adj' argument of mtext()  *is*  documented explicitly,
(partly for that reason!).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Nov  8 13:16:56 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 8 Nov 2000 08:16:56 -0500 (EST)
Subject: [Rd] Re: [R] .Last.value or % or ANS or ... (was unix)
In-Reply-To: <x27l6f5lny.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10011080814470.2899-100000@bolker.zoo.ufl.edu>


  I see that this simple solution has troubles.
  I think part of the way Mathematica deals with is by doing slick things
with storage, not storing multiple copies of identical objects.  I
understand that .Alias is scary, but would there be any way of using the
same mechanism to keep a buffer/stack/list/whatever of links to previous
answers?

On 8 Nov 2000, Peter Dalgaard BSA wrote:

> "Charles C. Berry" <cberry@tajo.ucsd.edu> writes:
> 
> > Admittedly, this is NOT the same as having a stack of objects...
> 
> It would be no big deal to create a stack of objects resulting from
> the last N expressions. What I'm not too sure about is whether you'd
> really want that. Notice that it could imply keeping several copies of
> a data set in memory. E.g. the value of an assignment like "data <-
> transform(data, logx=log(x))" is the value of the RHS.
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:09:10 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 17:09:10 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
Message-ID: <200011081609.RAA06781@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >I'm not at all happy with this:
> >
> >Solaris :
> >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> >[1] 15.0524 15.3403
> 
> Hm, OK, so it isn't just me.... I guess it is time to file a bug report,
> should I do it, or will you take care of it?

Done...

(This kind of behaviour has been observed on various platforms and
various compilers, sometimes getting stuck around 15.15 and sometimes
around 14.5. Others report no problems. Very strange. I've seen one
case where it apparently shifted from one regime to the other.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 16:23:12 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Wed, 8 Nov 2000 17:23:12 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081623.RAA06926@pubhealth.ku.dk>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>Done...

Great!

>(This kind of behaviour has been observed on various platforms and
>various compilers, sometimes getting stuck around 15.15 and sometimes
>around 14.5. Others report no problems. Very strange. I've seen one
>case where it apparently shifted from one regime to the other.)

Yes, it does that here too.... The following is a verbatim excerpt from my
session:
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.999031  2.000444  3.002296  3.997795  4.998880  5.995267  7.001894
 [8]  7.999983  9.000267  9.513537 10.507142 11.502634 12.498944 13.498615
[15] 14.502410
> rpois
function (n, lambda)
.Internal(rpois(n, lambda))
> version
         _
platform alphaev6-dec-osf4.0e
arch     alphaev6
os       osf4.0e
system   alphaev6, osf4.0e
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> plot(sapply(1:15, function(n) mean(rpois(1000000, n))), t='l')
> sapply(1:15, function(n) mean(rpois(1000000, n)))
 [1]  0.997961  1.999509  3.000748  3.999825  5.002983  6.004424  6.998825
 [8]  7.997999  8.998341  9.766942 10.781751 11.817181 12.856154 13.900369
[15] 14.999378

And from looking at 11, it is apparent that something happened... Also, by
inspecting the graph produced by plot, it may seem as if it happens in the
plot call... But this is really hard to see, but you might want to have a
look.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 16:51:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 17:51:04 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: kjetil.kjernsmo@astro.uio.no's message of "Wed, 8 Nov 2000 17:23:12 +0100 (MET)"
References: <200011081623.RAA06926@pubhealth.ku.dk>
Message-ID: <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>

kjetil.kjernsmo@astro.uio.no writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >Done...
> 
> Great!

However, be careful not to reply to the version of the mail without a
PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
repository...

I've poked around a bit and it seems that the problem has to do with
the code that tries to save time by reusing calculations if mu ==
muprev: 

> range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
[1] 14.8692 15.1200

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov  8 16:57:36 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 8 Nov 2000 17:57:36 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#729)
In-Reply-To: <200011081609.RAA06781@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0011081752470.4067-100000@artemis.imbe.med.uni-erlangen.de>



> Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >I'm not at all happy with this:
> > >
> > >Solaris :
> > >> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
> > >[1] 15.0524 15.3403

I get

> range(sapply(1:2000, function(n) mean(rpois(10000, 15.0))))
[1] 14.3702 14.6212

on SuSE Linux 4.3

hothorn@artemis:~ > gcc -v
Reading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specs
gcc version 2.95.2 19991024 (release)

Torsten

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 17:51:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 18:51:59 +0100
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: Peter Dalgaard BSA's message of "08 Nov 2000 17:51:04 +0100"
References: <200011081623.RAA06926@pubhealth.ku.dk> <x2ofzqtnk7.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> kjetil.kjernsmo@astro.uio.no writes:
> 
> > On 8 Nov 2000, Peter Dalgaard BSA wrote:
> > 
> > >Done...
> > 
> > Great!
> 
> However, be careful not to reply to the version of the mail without a
> PR# if there's a Cc: to R-bugs. Now there are *two* reports in the
> repository...
> 
> I've poked around a bit and it seems that the problem has to do with
> the code that tries to save time by reusing calculations if mu ==
> muprev: 
> 
> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> [1] 14.8692 15.1200

AHA! Spotted, I think. It is possible to return from rpois in step N,
in which case the initialisations in step P are not performed in that
invokation and not the next times either because it thinks that it has
been done previously.

I'm not quite sure what is the best way to fix it, though. Either kill
muprev when exiting in step N, or make the initialisations currently
in step P before entering step N. Or maybe save two versions of muprev
.. yes, that might be it - will try.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Wed Nov  8 17:54:30 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Wed, 8 Nov 2000 18:54:30 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
In-Reply-To: <x2itpytkqo.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.30.0011081852210.24652-100000@alnair.uio.no>

On 8 Nov 2000, Peter Dalgaard BSA wrote:

>> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
>> [1] 14.8692 15.1200
>
>AHA! Spotted, I think.

Wow! Great, that was fast!

>It is possible to return from rpois in step N,
>in which case the initialisations in step P are not performed in that
>invokation and not the next times either because it thinks that it has
>been done previously.

Ah, I tried to poke at the code, but got confused rather fast...

>I'm not quite sure what is the best way to fix it, though. Either kill
>muprev when exiting in step N, or make the initialisations currently
>in step P before entering step N. Or maybe save two versions of muprev
>... yes, that might be it - will try.

Great! Thanks, I hope it'll work out. And thanks to all who responded!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 18:07:31 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Nov 2000 19:07:31 +0100 (MET)
Subject: [Rd] Re: [R] Strange means of numbers drawn from rpois (PR#730)
Message-ID: <200011081807.TAA08883@pubhealth.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

> On 8 Nov 2000, Peter Dalgaard BSA wrote:
> 
> >> > range(sapply(1:2000, function(n) mean(rpois(10000, c(15,15+1e-8)))))
> >> [1] 14.8692 15.1200
> >
> >AHA! Spotted, I think.
> 
> Wow! Great, that was fast!
> 
> >It is possible to return from rpois in step N,
> >in which case the initialisations in step P are not performed in that
> >invokation and not the next times either because it thinks that it has
> >been done previously.
> 
> Ah, I tried to poke at the code, but got confused rather fast...
> 
> >I'm not quite sure what is the best way to fix it, though. Either kill
> >muprev when exiting in step N, or make the initialisations currently
> >in step P before entering step N. Or maybe save two versions of muprev
> >... yes, that might be it - will try.
> 
> Great! Thanks, I hope it'll work out. And thanks to all who responded!

Seems to have done the trick:

> sapply(1:20,function(n) mean(rpois(100000, n)) )
 [1]  1.00021  1.99588  2.99987  4.00364  4.98532  6.00528  7.00402  8.00046
 [9]  8.98958 10.00336 10.99647 12.00490 13.00697 14.01364 14.99357 15.99705
[17] 16.97901 17.99855 19.00363 20.02180


This is the patch (will commit to r-devel shortly)

[pd@blueberry R]$ cvs diff -u src/nmath/rpois.c 
Index: src/nmath/rpois.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/nmath/rpois.c,v
retrieving revision 1.11
diff -u -r1.11 rpois.c
--- src/nmath/rpois.c   2000/08/30 16:45:16     1.11
+++ src/nmath/rpois.c   2000/11/08 18:09:34
@@ -65,7 +65,7 @@
 
     static double big_l;/* integer "w/o overflow" */
     static int l, m;
-    static double muprev = 0.;/*, muold         = 0.*/
+    static double muprev = 0., muprev2 = 0.;/*, muold   = 0.*/
 
     /* Local Vars  [initialize some for -Wall]: */
     double del, difmuk= 0., E= 0., fk= 0., fx, fy, g, px, py, t, u= 0., v, x;
@@ -160,7 +160,11 @@
     /* Step P. preparations for steps Q and H.
        (recalculations of parameters if necessary) */
 
-    if (new_big_mu) {
+    if (new_big_mu || mu != muprev2) {
+        /* Careful! muprev2 is not always == muprev
+          because one might have exited in step I or S
+          */
+        muprev2 = mu; 
        omega = M_1_SQRT_2PI / s;
        /* The quantities b1, b2, c3, c2, c1, c0 are for the Hermite
         * approximations to the discrete normal probabilities fk. */

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Wed Nov  8 18:59:06 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Wed, 8 Nov 2000 19:59:06 +0100 (MET)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
Message-ID: <200011081859.TAA09094@pubhealth.ku.dk>

viz.


> (function(x,y=a) substitute(x$y))(x)
x$a
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$a
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$x$y


The behavior I expect and want is like that in Splus 3.4:

> (function(x,y=a) substitute(x$y))(x)
x$y
> (function(x,y=a) substitute(x$y))(list(y=1:3))
list(y = 1:3)$y
> (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
list(y = 1:3)$y

Is there a workaround to achieve this behavior under fairly general
circumstances, i.e. when one does not know whether to expect an object
with a component, but encounters one?

Chuck Berry
--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:bqtl, Autoloads, package:base
> 

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov  8 19:33:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 8 Nov 2000 11:33:23 -0800 (PST)
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: <200011081859.TAA09094@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>

On Wed, 8 Nov 2000 cberry@tajo.ucsd.edu wrote:

> viz.
> 
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$a
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$a
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$x$y
> 
> 
> The behavior I expect and want is like that in Splus 3.4:
> 
> > (function(x,y=a) substitute(x$y))(x)
> x$y
> > (function(x,y=a) substitute(x$y))(list(y=1:3))
> list(y = 1:3)$y
> > (function(x,y) eval(substitute(substitute(y))))(x=list(y=1:3),y=x$y)
> list(y = 1:3)$y


I don't think this is a bug - substitute is performing as intended and as
documented -- but it is an incompatibility.  There are two issues here,
one easy and one difficult.

In your first two examples the problem is that you want to substitute only
for x (though in the second example I don't see why you expect this to
happen).  If you want to substitute only for x you can do
	substitute(x$y,list(x=x))


In the third example you want to perform substitution on the value of a
variable.  This is a useful thing to want to do, and I don't know how to
do it.

eg
     z<-quote(x$y)
     x<-list(y=1:3)
and you want to produce
     list(y=1:3)$y

Suggestions?

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 19:55:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 20:55:20 +0100
Subject: [Rd] substitute(x$y)) corrupts 'y' component (PR#731)
In-Reply-To: Thomas Lumley's message of "Wed, 8 Nov 2000 11:33:23 -0800 (PST)"
References: <Pine.GSO.4.21.0011081128020.3414-100000@atlas.biostat.washington.edu>
Message-ID: <x2hf5itf13.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

>      z<-quote(x$y)
>      x<-list(y=1:3)
> and you want to produce
>      list(y=1:3)$y
> 
> Suggestions?

Double substitute and eval, but there's a hitch:

> eval(substitute(substitute(z,list(x=x)),list(z=z)))
structure(list(y = c(1, 2, 3)), .Names = "y")$y

which is hardly avoidable since

> dput(x)   
structure(list(y = c(1, 2, 3)), .Names = "y")

However, 

> x<-quote(list(y=1:3))
> eval(substitute(substitute(z,list(x=x)),list(z=z)))
list(y = 1:3)$y


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Nov  8 21:32:49 2000
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 8 Nov 2000 22:32:49 +0100 (MET)
Subject: [Rd] R with redhat 7 (PR#732)
Message-ID: <200011082132.WAA09844@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.1.0 and 1.1.1
OS: Redhat 7 Linux (intel)
Submission from: (NULL) (129.100.45.161)


Hi, I am not sure this is well know problem but I could not find anyone mention
it. 
The problem is related to build R on redhat 7. After got src.rpm and tried to
rebuild it, it failed on testing accuracy. Further it shows that under R,
.Machine gives some numbers that maybe are not correct. I also tried the most
recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
comes with powertools of redhat 7 has exactly the same problem. All three R
gives the same results for .Machine. See the following outputs. 

Thanks
Hao Yu

PS. One system has Pentium III 600Mhz and 256RDRAM, Intel CC820 motherboard;
    Another has Pentium III 800Mhz and 256 SDRAM, ASUS BX motherboard.

***************************************************************************** 
R : Copyright 2000, The R Development Core Team
Version 1.1.1 Patched (November 6, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> .Machine
$double.eps
[1] 1.084202e-19

$double.neg.eps
[1] 5.421011e-20

$double.xmin
[1] 0.25

$double.xmax
[1] 0.5

$double.base
[1] 2

$double.digits
[1] 64

$double.rounding
[1] 5

$double.guard
[1] 0

$double.ulp.digits
[1] -63

$double.neg.ulp.digits
[1] -64

$double.exponent
[1] 1

$double.min.exp
[1] -2

$double.max.exp
[1] -2

$integer.max
[1] 2147483647

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  8 22:45:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Nov 2000 23:45:06 +0100
Subject: [Rd] R with redhat 7 (PR#732)
In-Reply-To: hyu@stats.uwo.ca's message of "Wed, 8 Nov 2000 22:32:49 +0100 (MET)"
References: <200011082132.WAA09844@pubhealth.ku.dk>
Message-ID: <x2vgtyytfx.fsf@blueberry.kubism.ku.dk>

hyu@stats.uwo.ca writes:

> Full_Name: Hao Yu
> Version: 1.1.0 and 1.1.1
> OS: Redhat 7 Linux (intel)
> Submission from: (NULL) (129.100.45.161)
> 
> 
> Hi, I am not sure this is well know problem but I could not find anyone mention
> it. 
> The problem is related to build R on redhat 7. After got src.rpm and tried to
> rebuild it, it failed on testing accuracy. Further it shows that under R,
> .Machine gives some numbers that maybe are not correct. I also tried the most
> recent one (November 6) and failed. The strange thing is that the R (1.1.0) that
> comes with powertools of redhat 7 has exactly the same problem. All three R
> gives the same results for .Machine. See the following outputs. 

We (R-core + Martyn Plummer who builds the RPM files on CRAN)
discussed this earlier today. It is a problem with the RedHat
"unofficical 2.96" gcc compiler which seems to be overly zealous on
some optimizations. The build is said to work if you build R
unoptimized.

We're strongly considering to say that R *requires* another gcc
compiler rather than trying to work around bugs in a compiler that
should never have been released.

The powertools version appears to have been built by disabling the
regression test (make check)! It might be worth filing a formal bug
report with RedHat on that matter. (It is not merely a matter of
cosmetics, those machine constants actually get used for determining
convergence criteria and the like. Having them set too low could send
algorithms into infinite loops.)

I think Martyn Plummer is about to produce a working RPM based on a
better compiler. However, if you want to compile add-on packages, it
might still be a good idea to install an alternative compiler for
yourself. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 10:41:02 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 11:41:02 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <00be01c049c4$9ce317c0$175dd882@stat.auckland.ac.nz>
Message-ID: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>



Hi Paul,

thank you for responding. I indeed overlooked, that units="inch" gives
stable results, independent of resizing the graphics window on the screen.
And indeed I would find some way fiddling around to get my graphic done.

However I see a general problem here and I would like a general solution:
Obviously we are dealing with two coordinate systems: the graphics device
size (call it representation layer) and the window size on the screen (call
it presentation layer). If I do any graphics programming, I do not want to
depend on arbitrary window sizes. It is nice to know my device has 8 inches
and that text x needs y inches in width. But the adress space in which
plotting is done are the "user" coordinates. So, for the simplest example,
specifying xlim=c(0,1) generates a stable reference WHICH DOES NOT CHANGE ON
RESIZING THE GRAPHICS WINDOW. As strwidth(units="user") DOES CHANGE ON
RESIZING THE GRAPHICS WINDOW the units arguably ARE NOT the user
coordinates.

I tend to believe this is a BUG. Same for units="figure".

I also tend to believe, that resizing a graphics window should rescale the
font size used ON SCREEN, because currently we have the following mixup of
representation layer and presentation layer: if a certain text in cex=1
fills 50% width of my user coordinates on the device, and I decrease window
size, with stable screen font size the same text now fills more than 50%
width. This 'more' is reflected in strwidth(units='user'), but as said
before, the units strwidth(units='user') gives are not user but
user*(device/window). So if a special strwidth measure is needed which
refers to the presentation layer it should be named accordingly. Those
units='user' and units='figure' should return stable measures refering to
the representation layer.

Regards


Jens


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov  9 17:39:00 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 9 Nov 2000 18:39:00 +0100
Subject: [Rd] Another inconsistency concerning device-size vs. window-size
Message-ID: <000701c04a73$f2283670$c10616ac@bbdo.de>


Here is an inconsitency. I guess one of the two is a bug (the latter one).

> x11(width=5, height=5, pointsize=8)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 5.000000 4.989583
> # din unchanged
> dev.off()
null device
          1

> x11(width=5, height=5, pointsize=8)
> plot(0,0)
> par("din")
[1] 5.000000 4.989583
# now resize window to be narrower
> par("din")
[1] 2.781250 4.989583
> # din changed  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
> dev.off()
null device
          1

What is din?
Representation layer (device size)?
Presentation layer (window size)?

To my understanding it should be representation layer,
and I really hope a window IS NOT directly a device!

Regards


--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Thu Nov  9 21:22:40 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 10 Nov 2000 10:22:40 +1300
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
References: <000201c04a39$8eed6dd0$c10616ac@bbdo.de>
Message-ID: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>

Hi

[This also a reply to "[Rd] Another inconsistency concerning device-size vs.
window-size"]

I will try to give a brief overview of the way R graphics devices
(conceptually at least) work (to me at least).

Yes a window (x11 or win32) is a device.  Other devices are:  postscript,
png, jpeg, pictex, bmp.  Windows are different to these other devices
because they can be interactively resized.  R treats a change in window size
as a change in the (absolute) physical size of the device.  Perhaps another
way to respond to a window resize would be to retain the same physical
device size and have scroll bars on the window, but I don't think this is
still what you would want (?)

Text size is most often specified (ultmately) as a physical (absolute)
pointsize.  The reason for this (I think) is that ultimately text has to be
big enough to read.  Thus strwidth() will return the same answer in any
absolute set of units (e.g., "inch").  The correct interpretation of
strwidth(mytext, "user") is that it is the physical size of the text
_converted_ into user coordinates.

Automatic resizing of text is a tricky issue.  The text size is
automatically resized by R in some cases (e.g., for multiple figures), but
scaling text size continuously (e.g., with window size) does not tend to
produce useful results (e.g., it is too easy to produce text which is too
small to read).

I suspect that I'm not providing you with the answer you want;  I guess I'm
trying to explain how R works so that you can do what you need to.  Perhaps
it would help me to help you more if you described the graphics task you are
trying to achieve (?).

With respect to the par("din") inconsistency, that _is_ undesirable
behaviour.  The correct behaviour is the second one.  Could you please
submit a bug report for this (including your example).

Thanks

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Fri Nov 10 00:07:05 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Fri, 10 Nov 2000 00:07:05 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <14855.49734.826008.444589@mithrandir.hornik.net>; from Kurt.Hornik@ci.tuwien.ac.at on Tue, Nov 07, 2000 at 09:50:14AM +0100
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001110000705.A1401@ps2-4.ucl-41>

On Tue, Nov 07, 2000 at 09:50:14AM +0100, Kurt Hornik wrote:
> Ok.  You should actually try once more tomorrow.  I had to remove
> libtool support, but the export-dynamic should now happen via a
> platform specific override for GNU Hurd.

It compiled fine, and works fine (ESS does not work fine, but that is another
issue).

> Much better than r-release, as we are getting close to release time.

Great! But if I try to compile it on Potato (Linux), it dies after a long
command with a multitude of .o files with:
xxxpr.o: In function `intpr_':
..... xxxpr.c:28: undefined reference to `i_len'

and many more like this in line 53,78 plus others. I did not have this under
the Hurd. What is this?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olav@melvin.jordforsk.no  Fri Nov 10 09:56:53 2000
From: olav@melvin.jordforsk.no (olav@melvin.jordforsk.no)
Date: Fri, 10 Nov 2000 10:56:53 +0100 (MET)
Subject: [Rd] gnome-support problems (PR#733)
Message-ID: <200011100956.KAA27154@pubhealth.ku.dk>

The compilation fails in <libintl.h>, because some function definitions was
changed in <libgnome/gnome-i18n.h>.
I inserted
#define ENABLE_NLS
before '#include "gnome.h" in devGNOME.c and devGTK.c, and then the 
compilation went ok.

There was also an error in configure, it couldn't find libglade-config.

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status =
 major = 1
 minor = 1.1

by the way: the function "bug.report(...)" failed with the message:
Error in paste("-s '", subject, "' -c", ccaddress, address, "<", file,  : 
	Object "support" not found


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:33:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:33:51 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
Message-ID: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>

Can I suggest that in cov and cor the lines

    if (is.data.frame(x)) 
        x <- as.matrix(x)
    if (is.data.frame(y)) 
        y <- as.matrix(y)

be replaced by 

    if (is.data.frame(x)) 
        x <- data.matrix(x) # coerce logical and factors
    if (is.data.frame(y)) 
        y <- data.matrix(y) # likewise

This would allow things like

> data(iris)
> cor(iris)

which seems like a reasonable thing to do (certainly to my students!).  It
would also give a more informative error message:

> iris$Species <- as.character(iris$Species)
> cor(iris) # modified function
Error in data.matrix(x) : non-numeric data type in frame

as opposed to

> cor(iris) # original function
Error in cor(iris) : missing observations in cov/cor
In addition: Warning message: 
NAs introduced by coercion 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 10 15:52:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 2000 16:52:40 +0100
Subject: [Rd] Modification to cov and cor
In-Reply-To: Jonathan Rougier's message of "Fri, 10 Nov 2000 15:33:51 +0000 (GMT)"
References: <Pine.GSO.4.20.0011101506480.8632-100000@laplace>
Message-ID: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Can I suggest that in cov and cor the lines
> 
>     if (is.data.frame(x)) 
>         x <- as.matrix(x)
>     if (is.data.frame(y)) 
>         y <- as.matrix(y)
> 
> be replaced by 
> 
>     if (is.data.frame(x)) 
>         x <- data.matrix(x) # coerce logical and factors
>     if (is.data.frame(y)) 
>         y <- data.matrix(y) # likewise

I'd oppose that, especially for factors. Correlations between factors
are as likely to be nonsens as remotely meaningful.  

With the current definition of data.matrix (using codes(f)), even more so:

> data.matrix(data.frame(a=1:3,b=factor(c("mild","medium","severe"))))
  a b
1 1 2
2 2 1
3 3 3

!!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 15:59:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 10 Nov 2000 15:59:40 +0000 (GMT)
Subject: [Rd] Modification to cov and cor
In-Reply-To: <x2n1f7g6yf.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0011101556040.8632-100000@laplace>

On 10 Nov 2000, Peter Dalgaard BSA wrote:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> 
> > Can I suggest that in cov and cor the lines
> > 
> >     if (is.data.frame(x)) 
> >         x <- as.matrix(x)
> >     if (is.data.frame(y)) 
> >         y <- as.matrix(y)
> > 
> > be replaced by 
> > 
> >     if (is.data.frame(x)) 
> >         x <- data.matrix(x) # coerce logical and factors
> >     if (is.data.frame(y)) 
> >         y <- data.matrix(y) # likewise
> 
> I'd oppose that, especially for factors. Correlations between factors
> are as likely to be nonsens as remotely meaningful.  

I agree with that.  I was thinking that a warning would be
helpful.  Perhaps something along the lines of

if (any(sapply(x, is.factor))) warning("Coercing factor to numeric")

J.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Nov 10 16:00:18 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 10 Nov 2000 17:00:18 +0100 (MET)
Subject: [Rd] Assigning into a dataframe (PR#734)
Message-ID: <200011101600.RAA03890@pubhealth.ku.dk>

I am not sure whether this is a bug or a feature, but I thought
that these two would have identical effects ...

> data(iris)
> iris[, 5] <- as.character(iris[, 5])
> is.factor(iris[, 5])
[1] TRUE
> is.factor(iris$Species)
[1] TRUE
> data(iris)
> iris$Species <- as.character(iris$Species)
> is.factor(iris[, 5])
[1] FALSE
> is.factor(iris$Species)
[1] FALSE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:patches, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Sun Nov 12 23:16:37 2000
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Sun, 12 Nov 2000 23:16:37 +0000
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <87u29gejck.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Thu, Nov 09, 2000 at 04:55:39PM -0800
References: <20001031193640.B1043@ps2-4.ucl-41> <200010311957.OAA26707@jessie.research.bell-labs.com> <20001104212318.A829@ps2-4.ucl-41> <x28zqzjliy.fsf@blueberry.kubism.ku.dk> <14853.5377.881692.164218@mithrandir.hornik.net> <20001107022201.A20159@ps2-4.
Message-ID: <20001112231637.A493@ps2-4.ucl-41>

On Thu, Nov 09, 2000 at 04:55:39PM -0800, A.J. Rossini wrote:
> and is there anything emacs-lisp specific that needs to be fixed?

I do not really know. Installing ESS (5.1.18 or 5.1.13) gives an error message
during the config process. When I try to use them (M-x R), they say
'Deselecting deleted buffer' or something like this. I have no other
experience. :(

Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 14 13:11:44 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Nov 2000 14:11:44 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
References: <75F7304BB41CD411B06600A0C98414FCCF0BD9@ORSMSX54>
Message-ID: <14865.14864.656323.333048@gargle.gargle.HOWL>

The following becomes more and more a topic for an R mailing list,
possibly R-devel.

R for Windows crashes are important and should be discussed and debugged
with the experts -- which are not reading ESS-help  AFAIK.

Martin

>>>>> "ColCun" == Cunningham, Colin A <colin.a.cunningham@intel.com> writes:

    ColCun> In my very brief exposure to R, I have experienced the very
    ColCun> same crash experience when displaying graphics.  I haven't
    ColCun> tried the fixes yet however.

    ColCun> I also am running W2K.  I installed the binary distribution of
    ColCun> R 1.1.1 for Windows.  I'm hopeful of deploying application
    ColCun> engines here and there on W2K and NT servers.  Let me know if
    ColCun> there are tests I can run for the group.  I have several
    ColCun> machines available to me here that run variants of the W2K OS.

    ColCun> Colin

    >> Colin Cunningham
    >> Sr Software Engineer 
    >> Internet Data Analysis 
    >> Business Intelligence & Data Services
    >> Intel Online Services, OSS New Capabilities
    >> *     503.696.7648
    >> * colin.a.cunningham@intel.com
    >> 


    ColCun> -----Original Message-----
    ColCun> From: rossini@blindglobe.net [mailto:rossini@blindglobe.net]
    ColCun> Sent: Friday, November 10, 2000 4:51 PM
    ColCun> To: Erich Neuwirth
    ColCun> Cc: stockton@neptuneandco.com; Goran Arnoldsson;
    ColCun> ess-help@stat.math.ethz.ch
    ColCun> Subject: Re: Gnuserv, NTEmacs, Windows 2000 and R

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> as far as i know, we still have an rterm and especially rgui
    EN> problem under win2k.  on my athlon win2k machine, rterm and
    EN> rgui still crash when i try to do graphics.  a simple
    EN> plot(1:10) crashes both.

    EN> so even after guido's and brian's fix (thanks to both of them)
    EN> there still are some unsolved problems which might be part of
    EN> the emacs ess r problem.

     AJR> Erich - 

     AJR> I'd not seen this posted to R-devel; have you mentioned that to
     AJR> them?  I'll have to get my wife to try R on her new machine (my
     AJR> only access to Win2k, thanks to all the Gods...).

okay now it finally went to R-devel -- quite a bit late so,...

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 14 13:46:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 14 Nov 2000 13:46:43 +0000 (GMT)
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: <14865.14864.656323.333048@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>

On Tue, 14 Nov 2000, Martin Maechler wrote:

> The following becomes more and more a topic for an R mailing list,
> possibly R-devel.
> 
> R for Windows crashes are important and should be discussed and debugged
> with the experts -- which are not reading ESS-help  AFAIK.

Yes, but this one is not reproducible even on another W2K Athlon machine (I
had access to one over the w/end).  There are known problems with Athlon
motherboards and particular disks under W2K, for example, so I am not at
all sure this is an R problem.  It's frustrating for Erich I know, but
there is nothing I can see we can do to help.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 14 14:12:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Nov 2000 15:12:17 +0100
Subject: [Rd] RE: Gnuserv, NTEmacs, Windows 2000 and R
In-Reply-To: Prof Brian D Ripley's message of "Tue, 14 Nov 2000 13:46:43 +0000 (GMT)"
References: <Pine.GSO.4.05.10011141342250.24277-100000@auk.stats>
Message-ID: <x28zqmve0u.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Tue, 14 Nov 2000, Martin Maechler wrote:
> 
> > The following becomes more and more a topic for an R mailing list,
> > possibly R-devel.
> > 
> > R for Windows crashes are important and should be discussed and debugged
> > with the experts -- which are not reading ESS-help  AFAIK.
> 
> Yes, but this one is not reproducible even on another W2K Athlon machine (I
> had access to one over the w/end).  There are known problems with Athlon
> motherboards and particular disks under W2K, for example, so I am not at
> all sure this is an R problem.  It's frustrating for Erich I know, but
> there is nothing I can see we can do to help.
> 
> [...]

There are some intermittent problems on other platforms too, and
there's the off chance that this machine is tickling the bug in just
the right way to make it happen more frequently. So gathering
information on Erichs and Colins cases might still be worth it. Don't
hold your breath though...

We're not getting many clues to go by, anyway. Is there a stack trace
or does it just freeze, for instance? What are the symptoms of a
crash? 

[Those Windows dumps are a pest, but if one gets really stubborn, they
make it possible to decipher where in the program the fault occurred.
This is done by disassembling the object files and using a memory map
of the binary. Not that I'm volunteering...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 07:30:29 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 08:30:29 +0100
Subject: [Rd] Re: removing elements that aren't there -- options(check.bounds)
In-Reply-To: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
References: <Pine.GSO.4.21.0011140904290.6597-100000@atlas.biostat.washington.edu>
Message-ID: <14866.15253.287734.846993@gargle.gargle.HOWL>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
(to R-core,  but MM thinks  R-devel'ers might want to contribute ..)

    TL> Now we have option$check.bounds

{in R 1.2 (unstable) aka "R-devel"}

    TL> could we consider allowing negative
    TL> subscripts outside the array bounds:
    TL> x <- 1:3
    TL> x[-4]
    TL> is an error in R but not in S.

    TL> I think there is a much stronger case for x[-4] to succeed than for
    TL> x[4], which we do allow.

I tend to agree.

Note that currently,  options(check.bounds = TRUE)
only affects `sub-assignment', i.e. the "[<-" functions,
and not `sub-setting' (aka "[") :

    > options(check.bounds = TRUE)
    > x[4]
    [1] NA
    > x[-4]
    Error: subscript out of bounds
    > x[4] <- 4
    Warning message: 
    assignment outside vector/list limits (extending from 3 to 4) 
    > x[-5]
    Error: subscript out of bounds
    > x[5]
    [1] NA

I tend to think that   options(check.bounds = TRUE)
should
	- also warn when  `subsetting' outside given bounds

	- only warn in the above x[-4] case
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 10:31:47 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 11:31:47 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
Message-ID: <002101c04eef$42838640$c10616ac@bbdo.de>



Hi Paul,
Dear R developers,

you wrote

> Yes a window (x11 or win32) is a device.
[snipped]
> R treats a change in window size as a change in the (absolute) physical
size of the device.

Well, as to be expected by Murphy's law, this is the worst possible case.

[snipped]
> With respect to the par("din") inconsistency, that _is_ undesirable
> behaviour.  The correct behaviour is the second one.  Could you please
> submit a bug report for this (including your example).

Paul, I'd not like to submit a bug report to resolve the par("din")
inconsistency by making it consistently 'the second one'. Rather I try to
convince you (and r-devel) making it consistently 'the first one'. I
consider the following features to be indispensable:

1) presentation-layer vs. representation-layer
Keep physical size of the device striktly seperated from window size,
i.e. do not change par("din") with window resizing.

2) Text size
Keep text size stable with respect to device size,
i.e. resize text size with window size

3) strwidth() and strheight()
those should consistently refer to the representation layer, or to be more
general: the R-user/R-programmer should always work within the context of
the representation layer, and he should be isolated against the presentation
layer (where obvioulsy some C-Coding is acting, to put things on screen).

Here is the resoning for this:

a)
Let's start with a rather abstract reason: proper separation of 'layers' is
one of the cornerstones of professional software design. A good example is
the current/old thrive for seperation of content and layout (XML/LaTeX).
Currently R blends representation and presentation, which is no good.

b)
For a more practical reason. Seperating the layers gives more options, more
degrees of freedom to use the software. Currently there is no way to layout
a big device like DIN A3, because the windows always is smaller and it gets
impossible to create a DIN A3 device which can be changed INTERACTIVELY
(i.e. x11()). Seperating layers allows everything which currently works plus
more. For example Font sizes. You argue, that resizing fonts with window
size could result in smalls too small to read. Well, it could. But you would
be free to create a device of exactly the window size, and you would be free
to specify any font size when creating the device. To put ot more
provocative: Currently R has an MS like approach of software trying to be
more intelligent than it's user, something I always hated about products
like MS Word. Currently there are situations without any resonable
workaround in R. Seperating layers gives you every option and full control.
As you suggest, adding something like scrolling or zooming to windows would
be a nice extension. However, proper seperation of layers should have
priority: it's a must.

c)
For a reason of authority and compatibility: the prototype DOES layer
seperation, DOES rescaling of fonts with window size. Let's dare to be as
good as the prototype, or better ...

I hope all this is convincing. As the graphics flexibility of R is one of
the reasons to use it, having reduced degrees of freedom is disappointing.
To put it provocative:

tool or toy, that's the question here

Please give feedback

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 15 10:18:41 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Nov 2000 11:18:41 +0100
Subject: [Rd] standardized add-on package configuration
Message-ID: <14866.25345.561674.760076@mithrandir.hornik.net>

Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
configure script which tries to find headers and libraries required by
the package.  I was wondering whether we could/should standardize how
this is done.

In what follows, suppose package FOO needs functionality BAR.

* One approach would be via command-line arguments to configure.  There
  seems to be no standard for this.  GNOME uses

	--with-FOO-prefix
	--with-FOO-exec-prefix

  in several of its components.  However, this, assumes that the GNU
  standards are followed in the sense that headers go into

	FOO-prefix/include

  and libs go into

	FOO-exec-prefix/lib

  which might not necessarily be the case.

  Alternatively, we could have

	--with-FOO-libraries
	--with-FOO-libs

  and

	--with-FOO-includes
	--with-FOO-headers

  (one of each only, of course).

* The other possibility would be via environment variables, such as
  CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
  package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)

I think the simplest solution would be via CPPFLAGS and LIBS because it
is not package-specific.  So installation would happen via

	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

(did not check if this works now).

Now I did not check all packages, so is there something I may be
overlooking?

(Once we agree on a standard, I would like to document it in R-exts.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 15 13:18:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Nov 2000 14:18:05 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <002101c04eef$42838640$c10616ac@bbdo.de>
References: <00d901c04a93$30cdde60$175dd882@stat.auckland.ac.nz>
 <002101c04eef$42838640$c10616ac@bbdo.de>
Message-ID: <14866.36109.332324.617921@gargle.gargle.HOWL>

       .............
       ...........
    Jens> c)

    Jens> For a reason of authority and compatibility: the prototype DOES
    Jens> layer seperation, DOES rescaling of fonts with window size. 
			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
absolutely not!
{unless you are talking Axum graphics which I hardly know and which
 definitely are *NOT* part of the prototype!}

    Jens> Let's dare to be as good as the prototype, or better ...

That has been one of the major motivations behind R development
and I think we *are* slightly better in lower level graphics

    Jens> I hope all this is convincing.
more or less. 
I think there is more than one way of layer separation and we *are* more or
less adhering to one..

Our problem has been to try to remain prototype compatible in many ways and
still do well.  In the realm of graphics this is close to impossible if you
look closely...


    Jens> As the graphics flexibility of R
    Jens> is one of the reasons to use it, having reduced degrees of
    Jens> freedom is disappointing.  To put it provocative:

    Jens>	   tool or toy, that's the question here

  (you could be somewhat kinder here ...)

    Jens> Please give feedback

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 14:18:16 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 15:18:16 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <14866.36109.332324.617921@gargle.gargle.HOWL>
Message-ID: <002401c04f0e$e5f4dc60$c10616ac@bbdo.de>



Hi Martin,

thanks for giving feedback.
>     Jens> For a reason of authority and compatibility: the
> prototype DOES
>     Jens> layer seperation, DOES rescaling of fonts with window size.
> 			    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> absolutely not!
> {unless you are talking Axum graphics which I hardly know and which
>  definitely are *NOT* part of the prototype!}

well, my experience with the prototype is somewhat outdated (WinS+3.3 DID
not change device size with window resizing and DID rescaling of fonts with
window size)

> I think there is more than one way of layer separation and we
> *are* more or
> less adhering to one..

well, the dependance of strwidth() on actual windowsize somehow is an
counter-example, don't you think?

>     Jens> As the graphics flexibility of R
>     Jens> is one of the reasons to use it, having reduced degrees of
>     Jens> freedom is disappointing.  To put it provocative:
>
>     Jens>	   tool or toy, that's the question here
>
>   (you could be somewhat kinder here ...)

Definitely. I know that R is an incredible usefull and serious piece of
software, and my hope is to tickle people to make it better. It's not my
intention to really provoke someone. However, I think it is a serious issue,
and the current implementation seriously restricts R's usefullness as an
universal tools for creating data-driven graphs. And, as I tried to explain,
there is no need for this restriction.

More feedback welcome.


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Nov 15 15:47:45 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 15 Nov 2000 16:47:45 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <200011151434.OAA22205@toucan.stats.ox.ac.uk>
Message-ID: <002501c04f1b$6639a8e0$c10616ac@bbdo.de>



Dear Prof. Brian Ripley,

thank you for answering.

> Can we step back a bit?  I think we could probably do better
> than we do.
> No one envisaged people resizing graphics windows when the system was
> designed (as far as I can see), and locking aspect ratios (which
> S-PLUS now does) when re-sizing looks sensible to me.  We
> might seriously
> want to consider scrollable canvases on graphics devices, too.
>
> I'm afraid I don't fully grasp Jens' points, in part because he is
> coming from a different usage experience (mainly Windows, I believe)
> than I am.  And now (the run up to 1.2.0) is not a good time to think
> about such changes.  But if Jens could put together a proposal for the
> wishlist on R-bugs, we can return to it.

I am willing to do that, but let me now explain the problem, which triggered
my conclusions.

BTW, I'm also on linux and under linux I face the same trouble.

I had to optimize a very complex graph which was representing some
underlying data structure.

1) It required DIN-A3 (bigger than screen)
2) It required programming and use of strwidth(), as I needed an automated
way to transform data-to-graph
3) It required interacting based on locator() to change the underlying data
basis and replotting data-to-graph
4) (Thus) It required seeing the whole device during interaction, thus
probably scroll_bars/zooming would not help.
5) It required some fine tuning (text wrapping, font size and other
parameters) ON SCREEN before printing.

E.g. there was text surrounded by boxes, and the text had to fit within
boxes tightly. Relatively to the DIN-A3-device the text was small, but it
had to be that size to get a realistic impression of space needs.

Does my point get clear now?

However, beside this particular problem, I'm convinced that a proper
seperation between device features and window features would be very
usefull.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Nov 15 15:53:06 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 15 Nov 2000 16:53:06 +0100 (MET)
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <14866.25345.561674.760076@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>


On Wed, 15 Nov 2000, Kurt Hornik wrote:

> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
> configure script which tries to find headers and libraries required by
> the package.  I was wondering whether we could/should standardize how
> this is done.

IMO the main problem is that header files and libraries are not in
/usr/include or /usr/lib but, for example, for mysql in
/usr/local/mysql/{include,lib} by default. A package should build without
interaction if headers and libs are in their default place. 

> 
> In what follows, suppose package FOO needs functionality BAR.
> 
> * One approach would be via command-line arguments to configure.  There
>   seems to be no standard for this.  GNOME uses
> 
> 	--with-FOO-prefix
> 	--with-FOO-exec-prefix
> 
>   in several of its components.  However, this, assumes that the GNU
>   standards are followed in the sense that headers go into
> 
> 	FOO-prefix/include
> 
>   and libs go into
> 
> 	FOO-exec-prefix/lib
> 
>   which might not necessarily be the case.
> 
>   Alternatively, we could have
> 
> 	--with-FOO-libraries
> 	--with-FOO-libs
> 
>   and
> 
> 	--with-FOO-includes
> 	--with-FOO-headers
> 
>   (one of each only, of course).

Can one define default values here?

> 
> * The other possibility would be via environment variables, such as
>   CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>   package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
> 
> I think the simplest solution would be via CPPFLAGS and LIBS because it
> is not package-specific.  So installation would happen via
> 
> 	CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

Maybe it is possible to check if CPPFLAGS is empty (replace it with a
default value) or not (try to build the package and give an error message
if it failed, pointing to the appropriate environment variable)?

> 
> (did not check if this works now).
> 
> Now I did not check all packages, so is there something I may be
> overlooking?
> 
> (Once we agree on a standard, I would like to document it in R-exts.)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Nov 16 08:32:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Nov 2000 09:32:35 +0100
Subject: [Rd] Re: [S] How to make tiny postscript files
In-Reply-To: <3A12E8BB.C4CE6709@virginia.edu>
References: <3A12E8BB.C4CE6709@virginia.edu>
Message-ID: <14867.39843.10568.102988@gargle.gargle.HOWL>

>>>>> "Frank" == Frank E Harrell <fharrell@virginia.edu> writes:

    Frank> I am using S-Plus 6.0 Release 1 on Linux and want to make
    Frank> an encapsulated postscript graphics file of width 2 inches
    Frank> and height 0.5 inch.  When I use 

    Frank> postscript(filename, height=.5,width=2,hor=F)

    Frank> I get 

    Frank> GR-Z Error from Routine zzpltz
....

    Frank> I have also tried onefile=T, print.it=F, maximize=T but this does not
    Frank> seem to make a difference.  Has anyone had luck producing tiny
    Frank> postscript files who would share the commands they used?  Thanks.

The above works in R  __when__ you additionally say

  par(mex = .5) #or something like it,  par(mar =...),  par(mgp= ...)

in order to ensure that the outer margins do not reduce the plot region to
non-positive extents..

IMHO this is another example of basic design deficiciencies of S graphics
(including R and S-plus)...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 16 09:47:41 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 16 Nov 2000 10:47:41 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001116091623.A12130@stat1.stat.auckland.ac.nz>
Message-ID: <002601c04fb2$441c9230$c10616ac@bbdo.de>



Hello Ross,

thank you for entering this discussion.

> Every version of Splus I've looked at (I've not seen 2000 yet) simply
> lied about the device size.  The device remains the size it
> was when it
> was created.  I presume that the rendering code just carries out a
> stretch of coordinates.  If you do the following
>
> 	par("din")
> 	# stretch the window with the mouse
> 	par("din")
>
> you'll see that there is no change.  As far as I could tell,
> the initial
> size of the device is used for ever.

Yes, and for me this behaviour would be great: you create a bigger than
screen device like DIN A3, you can see it at the screen at whatever
windowsize you want and it alway tells the truth about it's real size: DIN
A3. This TRUTH becomes a LIE only, if one considers representation layer and
presentation layer to be the same.

> The results of this are unfortunate when you are relying on having
> equal units in the x and y directions.  Drawing maps or displaying
> the results of some sort of ordination can be badly affected.  Also,
> there can be obviously incorrect drawing of tickmarks and annotation
> (this is usually only apparent for extreme reshaping).

This is where aspect ratio locking would help (for the whole device, not
only for the plot area).

> The philosophy in R is that when a window is resized, the graph should
> be redrawn so that it will appear as it would if it had been created
> in a window with the new size.

This makes it IMPOSSIBLE to work on a device bigger than the screen.

> If we are going to change the graphics, let's please throw the present
> system out completely.

If you are going to change graphics from scratch, PLEASE do use this
opportunity to really seperate representation layer from screen
presentation.

Regards


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Nov 17 09:40:31 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 17 Nov 2000 22:40:31 +1300
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: =?iso-8859-1?Q?=3C002601c04fb2$441c9230$c10616ac=40bbdo=2Ede=3E=3B_from_?=
 =?iso-8859-1?Q?Jens_Oehlschl=E4gel_on_Thu=2C_Nov_16=2C_2000_at_10:47:41A?=
 =?iso-8859-1?Q?M_+0100?=
References: <20001116091623.A12130@stat1.stat.auckland.ac.nz> <002601c04fb2$441c9230$c10616ac@bbdo.de>
Message-ID: <20001117224031.A21008@stat1.stat.auckland.ac.nz>

On Thu, Nov 16, 2000 at 10:47:41AM +0100, Jens Oehlschlgel wrote:
> 
> Hello Ross,
> 
> thank you for entering this discussion.
> 
> [ some burbling by Ross omitted ... ]
> 
> Yes, and for me this behaviour would be great: you create a bigger than
> screen device like DIN A3, you can see it at the screen at whatever
> windowsize you want and it alway tells the truth about it's real size: DIN
> A3. This TRUTH becomes a LIE only, if one considers representation layer and
> presentation layer to be the same.
> 
> > The results of this are unfortunate when you are relying on having
> > equal units in the x and y directions.  Drawing maps or displaying
> > the results of some sort of ordination can be badly affected.  Also,
> > there can be obviously incorrect drawing of tickmarks and annotation
> > (this is usually only apparent for extreme reshaping).
> 
> This is where aspect ratio locking would help (for the whole device, not
> only for the plot area).
> 
> > The philosophy in R is that when a window is resized, the graph should
> > be redrawn so that it will appear as it would if it had been created
> > in a window with the new size.
> 
> This makes it IMPOSSIBLE to work on a device bigger than the screen.


  Paul and I talked a little about this today.

  The issue is really just a Gui one, not one for the underlying graphics
  system.  Both the scrollbar approach and the window content scaling
  one can be handled in a very superficial way by device drivers without
  any changes at all to the underlying R graphics system.  (I suspect
  that this is how Splus adresses the problem).

  The behavior I want requires a deeper interaction with the graphics
  system, but it is the behavior already in place.

  Enabling the behaviors you and Brian prefer is just a matter of flicking
  a switch in the driver so that it no longer tells the graphics system
  when there has been a change in the window configuration and having
  the driver handle the scaling or scrolling.

  So, everyone can have what they want ...

  The real problem is that we don't have enough of a Gui (yet) to make
  the behavior happen in a cross-platform way.

Ros
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Fri Nov 17 10:25:39 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Fri, 17 Nov 2000 11:25:39 +0100
Subject: [Rd] Graphics-Device-Size vs. Window-Size: R design flaw
In-Reply-To: <20001117224031.A21008@stat1.stat.auckland.ac.nz>
Message-ID: <002901c05080$bc00f830$c10616ac@bbdo.de>



Dear Ross, Dear Paul,

thank you very much for this good news.

I am deeply impressed about the speed with which my suggestion has been
discussed and improvements are planned.
I can neither remember nor imagine this to happen with any piece of
commercial software.

I wish a relaxed weekend to all of you at r-devel who contribute to such an
important system.
Regards


Jens


>   Paul and I talked a little about this today.
>
>   The issue is really just a Gui one, not one for the
> underlying graphics
>   system.  Both the scrollbar approach and the window content scaling
>   one can be handled in a very superficial way by device
> drivers without
>   any changes at all to the underlying R graphics system.  (I suspect
>   that this is how Splus adresses the problem).
>
>   The behavior I want requires a deeper interaction with the graphics
>   system, but it is the behavior already in place.
>
>   Enabling the behaviors you and Brian prefer is just a
> matter of flicking
>   a switch in the driver so that it no longer tells the
> graphics system
>   when there has been a change in the window configuration and having
>   the driver handle the scaling or scrolling.
>
>   So, everyone can have what they want ...
>
>   The real problem is that we don't have enough of a Gui (yet) to make
>   the behavior happen in a cross-platform way.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Nov 17 14:43:41 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 17 Nov 2000 09:43:41 -0500
Subject: [Rd] Crash from windres in WinME
Message-ID: <3a184329.343746558@fisher.stats.uwo.ca>

In preparation for doing a bit more work on RStreams, I installed the
recommended Windows tools to compile R.  When the makefile got to a
line calling "windres" (a resource compiler?), it crashed, and left
WinME unstable (even more than usually!).  Windres is one of the GNU
binutils, so I installed the newest build, but got the same crash.

Has anyone else seen this particular problem before elsewhere, and
knows a workaround, or is this just one more reason not to use WinME?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 17 15:05:27 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 17 Nov 2000 15:05:27 +0000 (GMT)
Subject: [Rd] Crash from windres in WinME
Message-ID: <200011171505.PAA29537@toucan.stats.ox.ac.uk>


> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Fri, 17 Nov 2000 09:43:41 -0500
> 
> In preparation for doing a bit more work on RStreams, I installed the
> recommended Windows tools to compile R.  When the makefile got to a
> line calling "windres" (a resource compiler?), it crashed, and left
> WinME unstable (even more than usually!).  Windres is one of the GNU
> binutils, so I installed the newest build, but got the same crash.
> 
> Has anyone else seen this particular problem before elsewhere, and
> knows a workaround, or is this just one more reason not to use WinME?

Neither NT4 nor 98SE give me any problems.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Nov 17 15:35:05 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Nov 2000 16:35:05 +0100
Subject: [Rd] Re: convolve() design bug
In-Reply-To: <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
References: <3A1407B5.9CE04DD@noaa.gov>
 <Pine.LNX.4.10.10011170910170.5743-100000@localhost.localdomain>
Message-ID: <14869.20521.353429.289639@gargle.gargle.HOWL>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes   --- on R-help :

      ...

  Bill> Use convolve().  Here is an example:
  Bill> #Bracewell The Fourier transform and its applications, chap 3 (p.32 in 2nd
  Bill> #edition): {2 2 3 3 4} * {1 1 2} = {2 4 9 10 13 10 8}
  Bill> x<-c(2,2,3,3,4)
  Bill> h<-c(1,1,2)
  Bill> out<-convolve(x,rev(h),type="o") #need to do rev due to fault in R code

  Bill> I pointed it out several times to the R-developers that
  Bill> convolve() should do convolution by default! However they prefer
  Bill> it to do correlation by default (which makes no sense to
  Bill> me). Anyway the workaround is to use rev(h).

Dear Bill,
as one of those not too responsive way back, here are some 
non-convincing reasons: 

  At that time, we had density rely on convolve's behavior back then,
  and the it was old legacy R code on which others might have relied, 
  etc, etc

But then, I must admit I had forgotten for a while and later never felt
urged anymore.

Can we have something like a ``survey'' ?
Does anybody heavily rely on convolve()'s current behavior ?
{teaching / packages / ...}

Bill, can you (again, I know, exuse us!) detail your suggested changes,
ideally by sending patches against the current *.R and *.Rd files ?
Thank you.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frost@pocketmail.com  Fri Nov 17 19:46:00 2000
From: frost@pocketmail.com (frost@pocketmail.com)
Date: Fri, 17 Nov 2000 20:46:00 +0100 (MET)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
Message-ID: <200011171946.UAA11423@pubhealth.ku.dk>

Full_Name: Keith L. Frost
Version: 1.1.1
OS: Linux Mandrake 7.1
Submission from: (NULL) (199.182.77.3)


x <- 1:256;
dim(x) <- c(16,16);
image(x,col=gray(0:255/255));
dev.print();

Sometimes errored out with a complaint about hp not defined.  I looked at the 
source code for dev.print, and found that in 3--4 places, variable names for 
paper width and height were mistakenly named wp and wh, instead of wp and hp.
Changing references to wh to references to hp fixed the problem.
Here is the new version of dev.print:

function (device = postscript, ...)
{
    current.device <- dev.cur()
    nm <- names(current.device)[1]
    if (nm == "null device")
        stop("no device to print from")
    if (nm != "X11" && nm != "windows" && nm != "gtk" && nm !=
        "gnome")
        stop("can only print from screen device")
    oc <- match.call()
    oc[[1]] <- as.name("dev.copy")
    oc$device <- device
    din <- par("din")
    w <- din[1]
    h <- din[2]
    if (missing(device)) {
        if (is.null(oc$file))
            oc$file <- ""
        hz <- oc$horizontal
        wp <- 8
        hp <- 10
        paper <- oc$paper
        if (is.null(paper))
            paper <- ps.options()$paper
        if (paper == "default")
            paper <- getOption("papersize")
        paper <- tolower(paper)
        if (paper == "a4") {
            wp <- 8
            hp <- 14 - 0.5
        }
        if (paper == "legal") {
            wp <- 8.27 - 0.5
            hp <- 11.69 - 0.5
        }
        if (paper == "executive") {
            wp <- 7.25 - 0.5
            hp <- 10.5 - 0.5
        }
        if (is.null(hz))
            hz <- ps.options()$horizontal
        if (w > wp && w < hp && h < wp) {
            horizontal <- TRUE
        }
        else if (h > wp && h < hp && w < wp) {
            horizontal <- FALSE
        }
        else {
            h0 <- ifelse(hz, wp, hp)
            if (h > h0) {
                w <- w * h0/h
                h <- h0
            }
            w0 <- ifelse(hz, hp, wp)
            if (w > w0) {
                h <- h * w0/w
                w <- w0
            }
        }
        if (is.null(oc$pointsize)) {
            pt <- ps.options()$pointsize
            oc$pointsize <- pt * w/din[1]
        }
    }
    if (is.null(oc$width))
        oc$width <- w
    if (is.null(oc$height))
        oc$height <- h
    dev.off(eval.parent(oc))
    dev.set(current.device)
} 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 17 21:28:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Nov 2000 21:28:03 +0000 (GMT)
Subject: [Rd] Bug in R 1.1.1 dev.print() with fix (PR#737)
In-Reply-To: <200011171946.UAA11423@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011172127100.16709-100000@auk.stats>

On Fri, 17 Nov 2000 frost@pocketmail.com wrote:

> Full_Name: Keith L. Frost
> Version: 1.1.1
> OS: Linux Mandrake 7.1
> Submission from: (NULL) (199.182.77.3)
> 
> 
> x <- 1:256;
> dim(x) <- c(16,16);
> image(x,col=gray(0:255/255));
> dev.print();
> 
> Sometimes errored out with a complaint about hp not defined.  I looked at the 
> source code for dev.print, and found that in 3--4 places, variable names for 
> paper width and height were mistakenly named wp and wh, instead of wp and hp.
> Changing references to wh to references to hp fixed the problem.
> Here is the new version of dev.print:

Already fixed (and more) for 1.2.0 in the development version.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Nov 18 09:39:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 18 Nov 2000 10:39:00 +0100
Subject: [Rd] standardized add-on package configuration
In-Reply-To: <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
References: <14866.25345.561674.760076@mithrandir.hornik.net>
 <Pine.LNX.4.21.0011151645220.12115-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14870.20020.229105.127267@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> On Wed, 15 Nov 2000, Kurt Hornik wrote:

>> Several add-on packages (e.g., most DBMS ones, XML, ...) come with a
>> configure script which tries to find headers and libraries required by
>> the package.  I was wondering whether we could/should standardize how
>> this is done.

> IMO the main problem is that header files and libraries are not in
> /usr/include or /usr/lib but, for example, for mysql in
> /usr/local/mysql/{include,lib} by default. A package should build
> without interaction if headers and libs are in their default place.

Your mileage may vary on what `default' places are.  Basically, there
are two philosophies.  The more traditional one would be to have a
package/type layout, as you indicate above.  The modern style, used and
recommended e.g. in the GNU, Debian, and TeX/MF standards, is to have
type/package or type instead.

E.g., when I install mysql on Debian, I get the libraries in /usr/lib
and the headers in /usr/include/mysql.

>> 
>> In what follows, suppose package FOO needs functionality BAR.
>> 
>> * One approach would be via command-line arguments to configure.  There
>> seems to be no standard for this.  GNOME uses
>> 
>> --with-FOO-prefix
>> --with-FOO-exec-prefix
>> 
>> in several of its components.  However, this, assumes that the GNU
>> standards are followed in the sense that headers go into
>> 
>> FOO-prefix/include
>> 
>> and libs go into
>> 
>> FOO-exec-prefix/lib
>> 
>> which might not necessarily be the case.
>> 
>> Alternatively, we could have
>> 
>> --with-FOO-libraries
>> --with-FOO-libs
>> 
>> and
>> 
>> --with-FOO-includes
>> --with-FOO-headers
>> 
>> (one of each only, of course).

> Can one define default values here?

Yes, of course.

>> 
>> * The other possibility would be via environment variables, such as
>> CPPFLAGS and LIBS or maybe FOO_CPPFLAGS and FOO_LIBS.  (E.g., for
>> package XML we would use LIBXML_CPPFLAGS and LIBXML_LIBS.)
>> 
>> I think the simplest solution would be via CPPFLAGS and LIBS because it
>> is not package-specific.  So installation would happen via
>> 
>> CPPFLAGS=... LIBS=... R CMD INSTALL /path/to/pkg.tar.gz

> Maybe it is possible to check if CPPFLAGS is empty (replace it with a
> default value) or not (try to build the package and give an error
> message if it failed, pointing to the appropriate environment
> variable)?

That'w what I had in mind.

The above should be

* much nicer to use than doing something like

	R CMD INSTALL \
	  --configure-args="--with-foo-libs=/some/path ..." \
	  /path/to/pkg.tar.gz

* would be consistent with what is used to configure the R base system

* and would be uniform across packages.

On the other hand, it is a bit dangerous .. hmm, as we actually have
PKG_CPPFLAGS and PKG_LIBS, maybe we should use these variables instead?

Will think some more about this.

>> 
>> (did not check if this works now).
>> 
>> Now I did not check all packages, so is there something I may be
>> overlooking?
>> 
>> (Once we agree on a standard, I would like to document it in R-exts.)
>> 
>> -k

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 15:07:29 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 15:07:29 GMT
Subject: [Rd] Windres problem resolved
Message-ID: <3a169abb.5459260@smtp1.sympatico.ca>

I reported the other day that the utility "windres" crashed in Windows
ME.  I've determined that the problem is an incompatibility with the
Norton Anti-virus software that was installed on my machine.  With
that package disabled, windres works fine.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Nov 18 21:01:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Nov 2000 15:01:02 -0600
Subject: [Rd] PostgreSQL book
Message-ID: <6rem09q9kh.fsf@franz.stat.wisc.edu>

Bruce Momjian has just published a book on PostgreSQL that should be
available from bookstores in the next month or so.  It can be
downloaded as a PDF file now from
              http://www.postgresql.org/docs/awbook.html

I found the book to be well written and informative.  I recommend it.

Especially if you have to deal with large data sets, the combination
of relational databases and R is very useful.  Currently I am working
on a project where we have information on 3.5 million subjects
amounting to a total of 10.5 million records.  Processing these in
MySQL and PostgreSQL is much, much more efficient than what my
colleagues were doing with SAS and SPSS.  We took a sample of 180,000
subjects (550,000 records) and fit multilevel (linear mixed-effects)
models using lme in R after accessing the data from the relational
database.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Nov 18 23:15:26 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 18 Nov 2000 23:15:26 GMT
Subject: [Rd] Getting debug information in DLL?
Message-ID: <3a1707ff.2857190@smtp1.sympatico.ca>

The rw-faq says that 

  make DEBUG=T pkg-Rstreams

should make a copy of the Rstreams.dll with debugging information
included.  However, the DLL that gets produced is byte-by-byte
identical to the one without debug information, and gdb doesn't appear
to be able to see any symbols or source code.

Any suggestions?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Sun Nov 19 07:57:14 2000
From: tdye@lava.net (tdye@lava.net)
Date: Sun, 19 Nov 2000 08:57:14 +0100 (MET)
Subject: [Rd] Bug in stars function (PR#738)
Message-ID: <200011190757.IAA15668@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi all,

I've discovered and (hopefully) fixed a bug in the stars function I wrote
some time ago.  A corrected function is attached.

Please let me know if you have any questions or comments.

Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

--1465796871-645734172-974620647=:18687
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
Content-Description: bug fix
Content-Disposition: attachment; filename="new-stars.r"

ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM
LCBrZXkubG9jID0gTlVMTCwga2V5LmxhYmVscyA9IE5VTEwsIGRyYXcuc2Vn
bWVudHMgPSBGQUxTRSwgDQogICAgICAgICAgICBkcmF3LmF4ZXMgPSBGQUxT
RSwgLi4uKSANCnsNCiAgaWYgKGlzLmRhdGEuZnJhbWUoeCkpIA0KICAgIHgg
PC0gYXMubWF0cml4KHgpDQogIGVsc2UgaWYgKCFpcy5tYXRyaXgoeCkpIA0K
ICAgIHN0b3AoInggbXVzdCBiZSBhIG1hdHJpeCBvciBhIGRhdGEgZnJhbWUi
KQ0KICBpZiAoIWlzLm51bWVyaWMoeCkpIA0KICAgIHN0b3AoImRhdGEgaW4g
eCBtdXN0IGJlIG51bWVyaWMiKQ0KICBuLmxvYyA8LSBucm93KHgpDQogIG4u
c2VnIDwtIG5jb2woeCkNCiAgZGVnIDwtIHBpLzE4MA0KICBzZWcuY29sb3Jz
IDwtIGlmICghaXMubnVsbChjb2xvcnMpKSANCiAgICBjb2xvcnMNCiAgZWxz
ZSAxOm4uc2VnDQogIGlmIChpcy5udWxsKGxvY2F0aW9ucykpIHsNCiAgICBt
YXQuZGltIDwtIGNlaWxpbmcoc3FydChuLmxvYykpDQogICAgdGVtcC5sb2Mu
MSA8LSByZXAoeCA9IDIuMSAqIDE6bWF0LmRpbSwgdGltZXMgPSBtYXQuZGlt
LCANCiAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBuLmxvYykNCiAg
ICB0ZW1wLmxvYy4yIDwtIHJlcCh4ID0gMi4xICogbWF0LmRpbToxLCByZXAo
eCA9IG1hdC5kaW0sIA0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZXMg
PSBtYXQuZGltKSwgbGVuZ3RoID0gbi5sb2MpDQogICAgbG9jIDwtIG1hdHJp
eChkYXRhID0gYyh0ZW1wLmxvYy4xLCB0ZW1wLmxvYy4yKSwgbmNvbCA9IDIp
DQogIH0NCiAgZWxzZSB7DQogICAgaWYgKCFpcy5tYXRyaXgobG9jYXRpb25z
KSB8fCBuY29sKGxvY2F0aW9ucykgIT0gMikgDQogICAgICBzdG9wKCJsb2Nh
dGlvbnMgbXVzdCBiZSBhIDItY29sdW1uIG1hdHJpeC4iKQ0KICAgIGxvYyA8
LSAuQWxpYXMobG9jYXRpb25zKQ0KICB9DQogIGlmIChuLmxvYyAhPSBucm93
KGxvYykpIA0KICAgIHN0b3AoIm51bWJlciBvZiByb3dzIG9mIGxvY2F0aW9u
cyBhbmQgeCBtdXN0IGJlIGVxdWFsLiIpDQogIGFuZ2xlcyA8LSBpZiAoZnVs
bCkgDQogICAgc2VxKDAsIDIgKiBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVst
KG4uc2VnICsgMSldDQogIGVsc2UgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAg
IHNlcSgwLCBwaSwgbGVuZ3RoID0gbi5zZWcgKyAxKVstKG4uc2VnICsgMSld
DQogIGVsc2Ugc2VxKDAsIHBpLCBsZW5ndGggPSBuLnNlZykNCiAgaWYgKGxl
bmd0aChhbmdsZXMpICE9IG4uc2VnKSANCiAgICBzdG9wKCJsZW5ndGgoYW5n
bGVzKSBtdXN0IGJlIHRoZSBzYW1lIGFzIG5jb2woeCkiKQ0KICB4W2lzLm5h
KHgpXSA8LSAwDQogIGlmIChzY2FsZSkgDQogICAgeCA8LSBzd2VlcCh4LCAy
LCBhcHBseSh4LCAyLCBtYXgpLCBGVU4gPSAiLyIpDQojIENvbHVtbnMgb2Yg
MHMgd2lsbCBwdXQgTkFzIGluIHgsIG5leHQgbGluZSBnZXRzIHJpZCBvZiB0
aGVtDQogIHhbaXMubmEoeCldIDwtIDANCiAgeCA8LSB4ICogbGVuDQogIHRl
bXAueGxpbSA8LSBpZiAoaXMubnVsbCh4bGltaXQpKSANCiAgICByYW5nZShs
b2NbLCAxXSArIG1heCh4KSwgbG9jWywgMV0gLSBtYXgoeCkpDQogIGVsc2Ug
eGxpbWl0DQogIHRlbXAueWxpbSA8LSBpZiAoaXMubnVsbCh5bGltaXQpKSAN
CiAgICByYW5nZShsb2NbLCAyXSArIG1heCh4KSwgbG9jWywgMl0gLSBtYXgo
eCkpDQogIGVsc2UgeWxpbWl0DQogIG9wYXIgPC0gcGFyKG5vLnJlYWRvbmx5
ID0gVFJVRSkNCiAgb24uZXhpdChwYXIob3BhcikpDQogIHBsb3QoMCwgdHlw
ZSA9ICJuIiwgLi4uLCB4bGltID0gdGVtcC54bGltLCB5bGltID0gdGVtcC55
bGltLCANCiAgICAgICB4bGFiID0gIiIsIHlsYWIgPSAiIiwgYXNwID0gMSwg
YXhlcyA9IGRyYXcuYXhlcykNCiAgaWYgKGRyYXcuc2VnbWVudHMpIHsNCiAg
ICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAgcG9seS54IDwtIE5BDQog
ICAgICBwb2x5LnkgPC0gTkENCiAgICAgIHN0YXJ0LnguY29vcmQgPC0geFtp
LCBdICogY29zKGFuZ2xlcykgKyBsb2NbaSwgMV0NCiAgICAgIHN0YXJ0Lnku
Y29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xlcykgKyBsb2NbaSwgMl0NCiAg
ICAgIGZvciAoaiBpbiAxOm4uc2VnKSB7DQogICAgICAgIHBvbHkueCA8LSBj
KHBvbHkueCwgbG9jW2ksIDFdLCBzdGFydC54LmNvb3JkW2pdKQ0KICAgICAg
ICBwb2x5LnkgPC0gYyhwb2x5LnksIGxvY1tpLCAyXSwgc3RhcnQueS5jb29y
ZFtqXSkNCiAgICAgICAgbmV4dC5hbmdsZSA8LSBpZiAoaiA8IG4uc2VnKSAN
CiAgICAgICAgICBhbmdsZXNbaiArIDFdDQogICAgICAgIGVsc2UgKGlmIChm
dWxsKSANCiAgICAgICAgICAgICAgMzYwDQogICAgICAgIGVsc2UgMTgwKSAq
IGRlZw0KICAgICAgICBrIDwtIHNlcShmcm9tID0gYW5nbGVzW2pdLCB0byA9
IG5leHQuYW5nbGUsIGJ5ID0gZGVnKQ0KICAgICAgICBwb2x5LnggPC0gYyhw
b2x5LngsIHhbaSwgal0gKiBjb3MoaykgKyBsb2NbaSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXSwg
TkEpDQogICAgICAgIHBvbHkueSA8LSBjKHBvbHkueSwgeFtpLCBqXSAqIHNp
bihrKSArIGxvY1tpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDJdLCBOQSkNCiAgICAgIH0NCiAgICAg
IHBhcihsd2QgPSAwLjI1KQ0KICAgICAgcG9seWdvbihwb2x5LngsIHBvbHku
eSwgY29sID0gc2VnLmNvbG9ycykNCiAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgaWYgKCFpcy5udWxsKGxhYmVscykpIA0KICAgICAgICB0ZXh0KGxvY1tp
LCAxXSwgbG9jW2ksIDJdIC0gaWYgKGZ1bGwpIA0KICAgICAgICAgICAgIG1h
eCh4KQ0KICAgICAgICBlbHNlIDAuMSAqIG1heCh4KSwgbGFiZWxzW2ldLCBj
ZXggPSAwLjUsIGFkaiA9IGMoMC41LCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEpKQ0KICAgIH0NCiAg
fQ0KICBlbHNlIHsNCiAgICBmb3IgKGkgaW4gMTpuLmxvYykgew0KICAgICAg
dGVtcC54LmNvb3JkIDwtIHhbaSwgXSAqIGNvcyhhbmdsZXMpICsgbG9jW2ks
IDFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0geFtpLCBdICogc2luKGFuZ2xl
cykgKyBsb2NbaSwgMl0NCiAgICAgIGlmIChyYWRpdXMpIHsNCiAgICAgICAg
cGFyKGx3ZCA9IDAuMjUpDQogICAgICAgIHNlZ21lbnRzKHJlcChsb2NbaSwg
MV0sIG4uc2VnKSwgcmVwKGxvY1tpLCAyXSwgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2VnKSwgdGVtcC54LmNv
b3JkLCB0ZW1wLnkuY29vcmQpDQogICAgICAgIHBhcihsd2QgPSAxKQ0KICAg
ICAgfQ0KICAgICAgbGluZXMoYyh0ZW1wLnguY29vcmQsIHRlbXAueC5jb29y
ZFsxXSksIGModGVtcC55LmNvb3JkLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAueS5jb29yZFsxXSks
IGx3ZCA9IDAuMjUpDQogICAgICBpZiAoIWlzLm51bGwobGFiZWxzKSkgDQog
ICAgICAgIHRleHQobG9jW2ksIDFdLCBsb2NbaSwgMl0gLSBpZiAoZnVsbCkg
DQogICAgICAgICAgICAgbWF4KHgpDQogICAgICAgIGVsc2UgMC4xICogbWF4
KHgpLCBsYWJlbHNbaV0sIGNleCA9IDAuNSwgYWRqID0gYygwLjUsIA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgMSkpDQogICAgfQ0KICB9DQogIGlmICghaXMubnVsbChrZXkubG9jKSkg
ew0KICAgIGlmIChkcmF3LnNlZ21lbnRzKSB7DQogICAgICBrZXkueCA8LSBO
QQ0KICAgICAga2V5LnkgPC0gTkENCiAgICAgIGtleS54LmNvb3JkIDwtIGNv
cyhhbmdsZXMpICogbGVuICsga2V5LmxvY1sxXQ0KICAgICAga2V5LnkuY29v
cmQgPC0gc2luKGFuZ2xlcykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBm
b3IgKGogaW4gMTpuLnNlZykgew0KICAgICAgICBrZXkueCA8LSBjKGtleS54
LCBrZXkubG9jWzFdLCBrZXkueC5jb29yZFtqXSkNCiAgICAgICAga2V5Lnkg
PC0gYyhrZXkueSwga2V5LmxvY1syXSwga2V5LnkuY29vcmRbal0pDQogICAg
ICAgIGsgPC0gYW5nbGVzW2pdICsgZGVnDQogICAgICAgIG5leHQuYW5nbGUg
PC0gaWYgKGogPCBuLnNlZykgDQogICAgICAgICAgYW5nbGVzW2ogKyAxXQ0K
ICAgICAgICBlbHNlIChpZiAoZnVsbCkgDQogICAgICAgICAgICAgIDM2MA0K
ICAgICAgICBlbHNlIDE4MCkgKiBkZWcNCiAgICAgICAgd2hpbGUgKGsgPCBu
ZXh0LmFuZ2xlKSB7DQogICAgICAgICAga2V5LnggPC0gYyhrZXkueCwgbGVu
ICogY29zKGspICsga2V5LmxvY1sxXSkNCiAgICAgICAgICBrZXkueSA8LSBj
KGtleS55LCBsZW4gKiBzaW4oaykgKyBrZXkubG9jWzJdKQ0KICAgICAgICAg
IGsgPC0gayArIGRlZw0KICAgICAgICB9DQogICAgICAgIGtleS54IDwtIGMo
a2V5LngsIGxlbiAqIGNvcyhuZXh0LmFuZ2xlKSArIGtleS5sb2NbMV0sIA0K
ICAgICAgICAgICAgICAgICAgIE5BKQ0KICAgICAgICBrZXkueSA8LSBjKGtl
eS55LCBsZW4gKiBzaW4obmV4dC5hbmdsZSkgKyBrZXkubG9jWzJdLCANCiAg
ICAgICAgICAgICAgICAgICBOQSkNCiAgICAgIH0NCiAgICAgIHBhcihsd2Qg
PSAwLjI1KQ0KICAgICAgcG9seWdvbihrZXkueCwga2V5LnksIGNvbCA9IHNl
Zy5jb2xvcnMpDQogICAgICBwYXIobHdkID0gMSkNCiAgICB9DQogICAgZWxz
ZSB7DQogICAgICB0ZW1wLnguY29vcmQgPC0gY29zKGFuZ2xlcykgKiBsZW4g
KyBrZXkubG9jWzFdDQogICAgICB0ZW1wLnkuY29vcmQgPC0gc2luKGFuZ2xl
cykgKiBsZW4gKyBrZXkubG9jWzJdDQogICAgICBwYXIobHdkID0gMC4yNSkN
CiAgICAgIGlmIChyYWRpdXMpIA0KICAgICAgICBzZWdtZW50cyhyZXAoa2V5
LmxvY1sxXSwgbi5zZWcpLCByZXAoa2V5LmxvY1syXSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNlZyksIHRl
bXAueC5jb29yZCwgdGVtcC55LmNvb3JkKQ0KICAgICAgbGluZXMoYyh0ZW1w
LnguY29vcmQsIHRlbXAueC5jb29yZFsxXSksIGModGVtcC55LmNvb3JkLCAN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHRlbXAueS5jb29yZFsxXSkpDQogICAgICBwYXIobHdkID0gMSkNCiAg
ICB9DQogICAgaWYgKGlzLm51bGwoa2V5LmxhYmVscykpIA0KICAgICAga2V5
LmxhYmVscyA8LSBkaW1uYW1lcyh4KVtbMl1dDQogICAgbGFiLmFuZ2wgPC0g
YW5nbGVzICsgaWYgKGRyYXcuc2VnbWVudHMpIA0KICAgICAgKGFuZ2xlc1sy
XSAtIGFuZ2xlc1sxXSkvMg0KICAgIGVsc2UgMA0KICAgIGxhYmVsLnguY29v
cmQgPC0gY29zKGxhYi5hbmdsKSAqIGxlbiAqIDEuMSArIGtleS5sb2NbMV0N
CiAgICBsYWJlbC55LmNvb3JkIDwtIHNpbihsYWIuYW5nbCkgKiBsZW4gKiAx
LjEgKyBrZXkubG9jWzJdDQogICAgZm9yIChrIGluIDE6bi5zZWcpIHsNCiAg
ICAgIHRleHQuYWRqIDwtIGlmIChsYWIuYW5nbFtrXSA8ICg5MCAqIGRlZykg
fHwgbGFiLmFuZ2xba10gPiANCiAgICAgICAgICAgICAgICAgICAgICAoMjcw
ICogZGVnKSkgDQogICAgICAgIDANCiAgICAgIGVsc2UgaWYgKGxhYi5hbmds
W2tdID4gKDkwICogZGVnKSAmJiBsYWIuYW5nbFtrXSA8IA0KICAgICAgICAg
ICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICAxDQogICAgICBlbHNlIDAu
NQ0KICAgICAgaWYgKGxhYi5hbmdsW2tdIDw9ICg5MCAqIGRlZykpIA0KICAg
ICAgICB0ZXh0LmFkaiA8LSBjKHRleHQuYWRqLCAwLjUgKiAoMSAtIGxhYi5h
bmdsW2tdLyg5MCAqIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkZWcpKSkNCiAgICAgIGVsc2Ug
aWYgKGxhYi5hbmdsW2tdID4gKDkwICogZGVnKSAmIGxhYi5hbmdsW2tdIDw9
IA0KICAgICAgICAgICAgICAgKDI3MCAqIGRlZykpIA0KICAgICAgICB0ZXh0
LmFkaiA8LSBjKHRleHQuYWRqLCAobGFiLmFuZ2xba10gLSAoOTAgKiANCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlZykpLygxODAgKiBkZWcpKQ0KICAgICAgZWxzZSBpZiAobGFiLmFuZ2xb
a10gPiAoMjcwICogZGVnKSkgDQogICAgICAgIHRleHQuYWRqIDwtIGModGV4
dC5hZGosIDEgLSAoMC41ICogKGxhYi5hbmdsW2tdIC0gDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyNzAgKiBkZWcp
KS8oOTAgKiBkZWcpKSkNCiAgICAgIHRleHQuZGVmYXVsdCh4ID0gbGFiZWwu
eC5jb29yZFtrXSwgeSA9IGxhYmVsLnkuY29vcmRba10sIA0KICAgICAgICAg
ICAgICAgICAgIGxhYmVscyA9IGtleS5sYWJlbHNba10sIGNleCA9IDAuNSwg
YWRqID0gdGV4dC5hZGopDQogICAgfQ0KICB9DQogIGludmlzaWJsZSgpDQp9
DQo=
--1465796871-645734172-974620647=:18687--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 19 10:59:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Nov 2000 11:59:07 +0100
Subject: [Rd] Bug in stars function (PR#738)
In-Reply-To: tdye@lava.net's message of "Sun, 19 Nov 2000 08:57:14 +0100 (MET)"
References: <200011190757.IAA15668@pubhealth.ku.dk>
Message-ID: <x2n1ew1b44.fsf@blueberry.kubism.ku.dk>


Please don't use MIME attachments when reporting bugs. The resending
mechanism renders them undecodable when seen on r-devel. 

tdye@lava.net writes:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII
> 
> Hi all,
> 
> I've discovered and (hopefully) fixed a bug in the stars function I wrote
> some time ago.  A corrected function is attached.
> 
> Please let me know if you have any questions or comments.
> 
> Tom
> 
> Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
> Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
> Work: International Archaeological Research Institute, Inc., 2081 Young St.,
>       Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.
> 
> --1465796871-645734172-974620647=:18687
> Content-Type: TEXT/PLAIN; charset=US-ASCII; name="new-stars.r"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.BSI.4.10.10011182157270.18687@malasada.lava.net>
> Content-Description: bug fix
> Content-Disposition: attachment; filename="new-stars.r"
> 
> ZnVuY3Rpb24gKHgsIGZ1bGwgPSBUUlVFLCBzY2FsZSA9IFRSVUUsIHJhZGl1
> cyA9IFRSVUUsIGxhYmVscyA9IGRpbW5hbWVzKHgpW1sxXV0sIA0KICAgICAg
> ICAgICAgbG9jYXRpb25zID0gTlVMTCwgeGxpbWl0ID0gTlVMTCwgeWxpbWl0
> ID0gTlVMTCwgbGVuID0gMSwgDQogICAgICAgICAgICBjb2xvcnMgPSBOVUxM


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 19 21:47:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 19 Nov 2000 21:47:27 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18497a.27609952@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Nov 20 01:37:10 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 20 Nov 2000 01:37:10 GMT
Subject: [Rd] gdb problem resolved
Message-ID: <3a18803b.4789690@smtp1.sympatico.ca>

I've discovered the problem I had with DEBUG=T in building a package.
I had deleted the DLL from the target directory before rebuilding with
DEBUG=T, but that doesn't recompile everything, it apparently just
copies it from the source directory.  To make the DEBUG=T flag have an
effect, I needed to touch the source file to force a recompile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 07:48:03 2000
From: tdye@lava.net (tdye@lava.net)
Date: Mon, 20 Nov 2000 08:48:03 +0100 (MET)
Subject: [Rd] Bug in stars.R (PR#739)
Message-ID: <200011200748.IAA19481@pubhealth.ku.dk>

Hi all,

Please let me know if this isn't the correct place to report bugs in
contributed code.  Otherwise, the following code contains one additional
line and a short comment above it.  The extra line of code catches the
unusual situation where a data column contains all 0 values.

The corrected code is below the signature.

Thanks for your help.
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

function (x, full = TRUE, scale = TRUE, radius = TRUE, labels = dimnames(x)[[1]], 
            locations = NULL, xlimit = NULL, ylimit = NULL, len = 1, 
            colors = NULL, key.loc = NULL, key.labels = NULL, draw.segments = FALSE, 
            draw.axes = FALSE, ...) 
{
  if (is.data.frame(x)) 
    x <- as.matrix(x)
  else if (!is.matrix(x)) 
    stop("x must be a matrix or a data frame")
  if (!is.numeric(x)) 
    stop("data in x must be numeric")
  n.loc <- nrow(x)
  n.seg <- ncol(x)
  deg <- pi/180
  seg.colors <- if (!is.null(colors)) 
    colors
  else 1:n.seg
  if (is.null(locations)) {
    mat.dim <- ceiling(sqrt(n.loc))
    temp.loc.1 <- rep(x = 2.1 * 1:mat.dim, times = mat.dim, 
                      length = n.loc)
    temp.loc.2 <- rep(x = 2.1 * mat.dim:1, rep(x = mat.dim, 
                        times = mat.dim), length = n.loc)
    loc <- matrix(data = c(temp.loc.1, temp.loc.2), ncol = 2)
  }
  else {
    if (!is.matrix(locations) || ncol(locations) != 2) 
      stop("locations must be a 2-column matrix.")
    loc <- .Alias(locations)
  }
  if (n.loc != nrow(loc)) 
    stop("number of rows of locations and x must be equal.")
  angles <- if (full) 
    seq(0, 2 * pi, length = n.seg + 1)[-(n.seg + 1)]
  else if (draw.segments) 
    seq(0, pi, length = n.seg + 1)[-(n.seg + 1)]
  else seq(0, pi, length = n.seg)
  if (length(angles) != n.seg) 
    stop("length(angles) must be the same as ncol(x)")
  x[is.na(x)] <- 0
  if (scale) 
    x <- sweep(x, 2, apply(x, 2, max), FUN = "/")
# Columns of 0s will put NAs in x, next line gets rid of them
  x[is.na(x)] <- 0
  x <- x * len
  temp.xlim <- if (is.null(xlimit)) 
    range(loc[, 1] + max(x), loc[, 1] - max(x))
  else xlimit
  temp.ylim <- if (is.null(ylimit)) 
    range(loc[, 2] + max(x), loc[, 2] - max(x))
  else ylimit
  opar <- par(no.readonly = TRUE)
  on.exit(par(opar))
  plot(0, type = "n", ..., xlim = temp.xlim, ylim = temp.ylim, 
       xlab = "", ylab = "", asp = 1, axes = draw.axes)
  if (draw.segments) {
    for (i in 1:n.loc) {
      poly.x <- NA
      poly.y <- NA
      start.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      start.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      for (j in 1:n.seg) {
        poly.x <- c(poly.x, loc[i, 1], start.x.coord[j])
        poly.y <- c(poly.y, loc[i, 2], start.y.coord[j])
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        k <- seq(from = angles[j], to = next.angle, by = deg)
        poly.x <- c(poly.x, x[i, j] * cos(k) + loc[i, 
                                                   1], NA)
        poly.y <- c(poly.y, x[i, j] * sin(k) + loc[i, 
                                                   2], NA)
      }
      par(lwd = 0.25)
      polygon(poly.x, poly.y, col = seg.colors)
      par(lwd = 1)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  else {
    for (i in 1:n.loc) {
      temp.x.coord <- x[i, ] * cos(angles) + loc[i, 1]
      temp.y.coord <- x[i, ] * sin(angles) + loc[i, 2]
      if (radius) {
        par(lwd = 0.25)
        segments(rep(loc[i, 1], n.seg), rep(loc[i, 2], 
                                            n.seg), temp.x.coord, temp.y.coord)
        par(lwd = 1)
      }
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]), lwd = 0.25)
      if (!is.null(labels)) 
        text(loc[i, 1], loc[i, 2] - if (full) 
             max(x)
        else 0.1 * max(x), labels[i], cex = 0.5, adj = c(0.5, 
                                                   1))
    }
  }
  if (!is.null(key.loc)) {
    if (draw.segments) {
      key.x <- NA
      key.y <- NA
      key.x.coord <- cos(angles) * len + key.loc[1]
      key.y.coord <- sin(angles) * len + key.loc[2]
      for (j in 1:n.seg) {
        key.x <- c(key.x, key.loc[1], key.x.coord[j])
        key.y <- c(key.y, key.loc[2], key.y.coord[j])
        k <- angles[j] + deg
        next.angle <- if (j < n.seg) 
          angles[j + 1]
        else (if (full) 
              360
        else 180) * deg
        while (k < next.angle) {
          key.x <- c(key.x, len * cos(k) + key.loc[1])
          key.y <- c(key.y, len * sin(k) + key.loc[2])
          k <- k + deg
        }
        key.x <- c(key.x, len * cos(next.angle) + key.loc[1], 
                   NA)
        key.y <- c(key.y, len * sin(next.angle) + key.loc[2], 
                   NA)
      }
      par(lwd = 0.25)
      polygon(key.x, key.y, col = seg.colors)
      par(lwd = 1)
    }
    else {
      temp.x.coord <- cos(angles) * len + key.loc[1]
      temp.y.coord <- sin(angles) * len + key.loc[2]
      par(lwd = 0.25)
      if (radius) 
        segments(rep(key.loc[1], n.seg), rep(key.loc[2], 
                                             n.seg), temp.x.coord, temp.y.coord)
      lines(c(temp.x.coord, temp.x.coord[1]), c(temp.y.coord, 
                                                temp.y.coord[1]))
      par(lwd = 1)
    }
    if (is.null(key.labels)) 
      key.labels <- dimnames(x)[[2]]
    lab.angl <- angles + if (draw.segments) 
      (angles[2] - angles[1])/2
    else 0
    label.x.coord <- cos(lab.angl) * len * 1.1 + key.loc[1]
    label.y.coord <- sin(lab.angl) * len * 1.1 + key.loc[2]
    for (k in 1:n.seg) {
      text.adj <- if (lab.angl[k] < (90 * deg) || lab.angl[k] > 
                      (270 * deg)) 
        0
      else if (lab.angl[k] > (90 * deg) && lab.angl[k] < 
               (270 * deg)) 
        1
      else 0.5
      if (lab.angl[k] <= (90 * deg)) 
        text.adj <- c(text.adj, 0.5 * (1 - lab.angl[k]/(90 * 
                                                        deg)))
      else if (lab.angl[k] > (90 * deg) & lab.angl[k] <= 
               (270 * deg)) 
        text.adj <- c(text.adj, (lab.angl[k] - (90 * 
                                                deg))/(180 * deg))
      else if (lab.angl[k] > (270 * deg)) 
        text.adj <- c(text.adj, 1 - (0.5 * (lab.angl[k] - 
                                            (270 * deg))/(90 * deg)))
      text.default(x = label.x.coord[k], y = label.y.coord[k], 
                   labels = key.labels[k], cex = 0.5, adj = text.adj)
    }
  }
  invisible()
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 20 16:09:30 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Nov 2000 17:09:30 +0100
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011200748.IAA19481@pubhealth.ku.dk>
References: <200011200748.IAA19481@pubhealth.ku.dk>
Message-ID: <200011201609.RAA06263@lynne.ethz.ch>

>>>>> "tdye" == tdye  <tdye@lava.net> writes:

    tdye> Hi all, Please let me know if this isn't the correct place to
    tdye> report bugs in contributed code.  Otherwise, the following code
    tdye> contains one additional line and a short comment above it.  The
    tdye> extra line of code catches the unusual situation where a data
    tdye> column contains all 0 values.

    tdye> The corrected code is below the signature.

    tdye> Thanks for your help.  Tom

    tdye> Thomas S. Dye, Ph.D.  http://www.tsdye.com Home: 812A 19th
    tdye> Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
    tdye> Work: International Archaeological Research Institute, Inc., 2081
    tdye> Young St., Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax
    tdye> 943-0716.

Dear Thomas,
thank you for the bug report and fix.
Since you *are* the original contributor of this R function,
I took the time and carefully looked at the (mass of) code you sent...

3 remarks:
  - you fixed the "installed code", not the source code,
	which *is*  <R_TOPDIR>/src/library/base/R/stars.R
    i.e. your version had dropped all the comments

  - it would have been much easier had you only sent the result of
    "diff -c  oldfile newfile"

  - After looking at your change, it seems clear that it is only needed
    inside the  if(scale) { .. } clause.

This all amounts to

diff -u -b -B -w -r1.3 stars.R
--- src/library/base/R/stars.R	1999/11/01 10:02:17	1.3
+++ src/library/base/R/stars.R	2000/11/20 14:36:20
@@ -54,8 +53,11 @@
     ## Missing values are treated as 0
     x[is.na(x)] <- 0
 
-    if (scale)
+    if (scale) {
 	x <- sweep(x,2,apply(x,2,max),FUN="/")
+	## Columns of 0s will put NAs in x, next line gets rid of them
+	x[is.na(x)] <- 0
+    }
 
     x <- x * len
 
-----

which will be in R 1.2.

Thank you again for stars()!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tdye@lava.net  Mon Nov 20 18:22:31 2000
From: tdye@lava.net (Tom Dye)
Date: Mon, 20 Nov 2000 08:22:31 -1000 (HST)
Subject: [Rd] Bug in stars.R (PR#739)
In-Reply-To: <200011201609.RAA06263@lynne.ethz.ch>
Message-ID: <Pine.BSI.4.10.10011200819580.29349-100000@malasada.lava.net>

Hi Martin,

Thank you for the instructions how to send bug fixes.  I spent some time
searching for this information iin the R documentation but couldn't find
it.  

Thanks for your help with the stars() function.

All the best,
Tom

Thomas S. Dye, Ph.D.                                    http://www.tsdye.com
Home: 812A 19th Avenue, Honolulu, Hawaii 96816.  (808) 739-1367 or 387-9352.
Work: International Archaeological Research Institute, Inc., 2081 Young St.,
      Honolulu, Hawaii 96826. Voice (808) 946-2548; Fax 943-0716.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Nov 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Nov 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200011210615.HAA24700@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
--accuracy issues in pnorm
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 739 *
Subject: Bug in stars.R
From: Tom Dye <tdye@lava.net>
Date: Sun, 19 Nov 2000 21:48:16 -1000 (HST)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 735 *
Subject: Online marketing success increase sales
From: namesmktingcd@virgin.net
Date: Mon, 13 Nov 00 22:26:39 EST
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 738 *
Subject: Bug in stars function
From: Tom Dye <tdye@lava.net>
Date: Sat, 18 Nov 2000 21:57:27 -1000 (HST)
* PR# 737 *
Subject: Bug in R 1.1.1 dev.print() with fix
From: frost@pocketmail.com
Date: Fri, 17 Nov 2000 20:45:58 +0100 (MET)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Nov 21 08:58:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 21 Nov 2000 09:58:26 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011210858.JAA02617@pubhealth.ku.dk>

A minor point, but the specification of the contour function is
lagging behind the ?contour file:

> args(contour)

function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), add = FALSE, ...) 

> ?contour

     contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
             z,
             nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
             xlim = range(x, finite = TRUE),
             ylim = range(y, finite = TRUE),
             zlim = range(z, finite = TRUE),
             labcex = 0.6, drawlabels = TRUE, method = "flattest", 
             vfont = c("sans serif", "plain"),
             col = par("fg"), lty = par("lty"), lwd = par("lwd"),
             add = FALSE, ...)

In particular the function default arguments should apparently be
"labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
of course that the help file is more up-to-date than the function
definition.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Nov 21 14:01:59 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 21 Nov 2000 14:01:59 GMT
Subject: [Rd] How do you construct a function from a list?
Message-ID: <3a1a7d56.44981237@smtp1.sympatico.ca>

I'm trying to get a data.restore function to work on functions.  One
thing I can't figure out:  how do you construct a function from it's
component parts?

For example, I can construct a for loop as

forloop <-
as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

which results in 

 for (i in 1) junk()

But how do I put that in a function?  For example, I'd like the
function

  function()  for (i in 1) junk()

but  as.function(list(forloop)) results in

 function () 
 list(for (i in 1) junk())

which returns the for loop in a list, it doesn't execute it.  How do I
construct the function?

(This might be a bug in as.function, because 

  as.function(c(alist(a=,b=2),forloop))

returns the expected function

 function (a, b = 2) 
 for (i in 1) junk()

It's just that I can't seem to find a way to do it when there are no
arguments.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov 21 14:51:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Nov 2000 15:51:08 +0100
Subject: [Rd] Re: precision, incorrect(?) tapply() NA's
In-Reply-To: <200011201516.KAA26803@jessie.research.bell-labs.com>
References: <200011201516.KAA26803@jessie.research.bell-labs.com>
Message-ID: <14874.35804.101468.347291@gargle.gargle.HOWL>


>>>>> "DJ" == David James <dj@research.bell-labs.com> writes:

{diverted from R-help to R-devel }

    DJ> Summary:

    DJ> I ran into some unexpected behavior in approx() and tapply() that
    DJ> introduced NA's in "clean" data due to (?) numerical accuracy/round
    DJ> off.  The culprit seems to be in match() that coerces it's
    DJ> arguments to character, loosing precision in the process.

yes, definitely!
match() shouldn't do the character coercion!  
==> This is a bug; I'll send a report

	...........

    DJ> Thus match() seems to be introducing the round off as it coerces its 
    DJ> arguments to character:

    >> match
    DJ> function (x, table, nomatch = NA) 
    DJ> .Internal(match(as.character(x), as.character(table), nomatch))

	.......

If you look at R's source { do_match() in src/main/unique.c },
it becomes clear that the .Internal(match(.))
does not rely at all on character inputs,
and

    match <- function (x, table, nomatch = NA) 
	   .Internal(match(x, table, nomatch))

*seems* to work alright.
But, alas, it only *seems*, since the above change
breaks 
       "make check"

more concretely,
     example(relevel)
leads to an error {when the above changed  match() function is used}
which can be diagnosed to  factor(.,.) not working anymore with the changed 
match() function.  I've seen how to fix factor(.,.) as well,
but this is coming involved.

I think that the above change is *really* what we should use,
but we the consequences must be taken care as well.
Expect a fix for R 1.2,
and thank you very much for your useful report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 21 15:15:19 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Nov 2000 16:15:19 +0100 (MET)
Subject: [Rd] match() is not correct for "close numerics" (PR#741)
Message-ID: <200011211515.QAA10625@pubhealth.ku.dk>

(thank to  David James <dj@research.bell-labs.com> )

This is for R versions <= 1.1.1  and also R-devel as of yesterday..

  > pi0 <- pi + 2*.Machine$double.eps
  > pi != pi0
  [1] TRUE

  > ## but
  > match(c(1,pi,pi0), pi)
  [1] NA  1  1

The explanation is

  > match
  function(x, table, nomatch=NA)
      .Internal(match(as.character(x), as.character(table), nomatch))

and using

  > match <- function(x, table, nomatch=NA) .Internal(match(x, table, nomatch))

would solve the above problem
*but* gives new ones: e.g., factor() has to be modified !

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 22 12:08:26 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Nov 2000 13:08:26 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <3a1a7d56.44981237@smtp1.sympatico.ca>
References: <3a1a7d56.44981237@smtp1.sympatico.ca>
Message-ID: <14875.46906.371747.98635@mithrandir.hornik.net>

>>>>> Duncan Murdoch writes:

> I'm trying to get a data.restore function to work on functions.  One
> thing I can't figure out:  how do you construct a function from it's
> component parts?

> For example, I can construct a for loop as

> forloop <-
> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))

> which results in 

>  for (i in 1) junk()

> But how do I put that in a function?  For example, I'd like the
> function

>   function()  for (i in 1) junk()

> but  as.function(list(forloop)) results in

>  function () 
>  list(for (i in 1) junk())

> which returns the for loop in a list, it doesn't execute it.  How do I
> construct the function?

> (This might be a bug in as.function, because 

>   as.function(c(alist(a=,b=2),forloop))

> returns the expected function

>  function (a, b = 2) 
>  for (i in 1) junk()

> It's just that I can't seem to find a way to do it when there are no
> arguments.)

Duncan,

I think the easiest approach is to do

	foo <- function() {}
	body(foo) <- forloop

Re the above, I guess Peter would know more about this but is currently
swamped with other work.  I also observe that

R> as.function(alist(forloop))
function () 
list(forloop)
R> as.function(list(forloop))
function () 
list(for (i in 1) junk())

which does not seem right.

-k
	
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 22 12:35:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 2000 13:35:47 +0100
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: Kurt Hornik's message of "Wed, 22 Nov 2000 13:08:26 +0100"
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net>
Message-ID: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > (This might be a bug in as.function, because 
> 
> >   as.function(c(alist(a=,b=2),forloop))
> 
> > returns the expected function
....
> Re the above, I guess Peter would know more about this but is currently
> swamped with other work.

He is, but this (do_asfunction in coerce.c) looks wrong:

    if( n == 1 )
        args =  mkCLOSXP(args, arglist, envir);
    else
        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
    UNPROTECT(1);

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Nov 22 12:56:56 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Wed, 22 Nov 2000 13:56:56 +0100 (MET)
Subject: [Rd] How do you construct a function from a list? (PR#743)
Message-ID: <200011221256.NAA20882@pubhealth.ku.dk>

On Wed, 22 Nov 2000 13:08:26 +0100, Kurt Hornik wrote:
.
>>>>> Duncan Murdoch writes:
>> I'm trying to get a data.restore function to work on functions.  One
>> thing I can't figure out:  how do you construct a function from it's
>> component parts?
 ...
>> forloop <-
>> as.call(list(as.name('for'),as.name('i'),1,as.call(list(as.name('junk')))))
.
>
>I think the easiest approach is to do
>
>	foo <- function() {}
>	body(foo) <- forloop

That one gives me the same as "as.function(list(forloop))", i.e. 

 function () 
 list(for (i in 1) junk())

I'm running this in 1.1.1 on Windows, but I tried a Nov 14 development
snapshot, and got the same results.

I think this is a bug in as.function.default, because of these two
examples:

For a function with arguments, as.function undoes as.list:

 > options(keep.source=F)
 > withargs <- function(x) for (i in 1) junk()
 > withargs
 function (x) 
 for (i in 1) junk()
 > as.function(as.list(withargs))
 function (x) 
 for (i in 1) junk()

For a function with no arguments, it doesn't:
 
 > noargs <- function() for (i in 1) junk()
 > noargs
 function () 
 for (i in 1) junk()
 > as.function(as.list(noargs))
 function () 
 list(for (i in 1) junk())

I looked at the source (do_asfunction in main/coerce.c), but couldn't
understand what was going on well enough to figure out the bug.

Duncan Murdoch


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.90 (build 3000)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Nov 22 14:24:49 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 22 Nov 2000 09:24:49 -0500
Subject: [Rd] How do you construct a function from a list?
In-Reply-To: <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
References: <3a1a7d56.44981237@smtp1.sympatico.ca> <14875.46906.371747.98635@mithrandir.hornik.net> <x2n1esp4kc.fsf@blueberry.kubism.ku.dk>
Message-ID: <3a1bd676.166453340@fisher.stats.uwo.ca>

On 22 Nov 2000 13:35:47 +0100, Peter Dalgaard  wrote in message
<x2n1esp4kc.fsf@blueberry.kubism.ku.dk>:

>He is, but this (do_asfunction in coerce.c) looks wrong:
>
>    if( n == 1 )
>        args =  mkCLOSXP(args, arglist, envir);
>    else
>        args =  mkCLOSXP(args, VECTOR_ELT(arglist, n - 1), envir);
>    UNPROTECT(1);

I just posted a bug report about how
"as.function(as.list(somefunction))" doesn't return the function
properly.  Sometimes it does:

 > options(keep.source = F) 
 > noarg _ function() 1
 > noarg
 function () 
 1
 > as.function(as.list(noarg))
 function () 
 1

So it depends on the type of body whether as.function works properly.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Wed Nov 22 20:29:00 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Wed, 22 Nov 2000 21:29:00 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222029.VAA25688@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.1.1
OS: Windows NT
Submission from: (NULL) (63.91.145.254)



Hi,

I have a data frame with 11 observations and 603 variables.

When I call,

    willRaw.fit <- lm( performance ~ ., data=willRaw )

lm() runs without problems, but computes coefficients for
only the first 10 variables.  The remaining variables
get a coefficient of NA.

There are no NA values in the data frame.  performance
is one of the columns of the data frame.  I'd be happy
to email the data file (gzip'd or zip'd).

My apologies if I've done some stupid (yes, I know it's
not wise to fit a model to 603 variables, but I was
just playing around).

Mark

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Wed Nov 22 20:53:43 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 23 Nov 2000 06:53:43 +1000
Subject: [Rd] lm() appears to fail with large number of variables (PR#
 744)
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20402A9@roper-cv.qld.cmis.CSIRO.AU>

This is not a bug, only evidence that the least squares fitting procedure is
more numerically robust than I had expected.

With 11 observations you can only estimate 11 linearly independent
regression coefficients (at best).  That's what you got (intercept + first
10 variables).  How many did you expect to get estimates for?

In summary: no bug, lm is working as advertised.

> -----Original Message-----
> From: r@marksmucker.com [mailto:r@marksmucker.com]
> Sent: Thursday, 23 November 2000 6:29
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() appears to fail with large number of variables
> (PR#744)
> 
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> 
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).
> 
> Mark
> 
>  
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Nov 22 21:02:17 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 22 Nov 2000 22:02:17 +0100 (MET)
Subject: [Rd] lm() appears to fail with large number of variables (PR#744)
Message-ID: <200011222102.WAA25841@pubhealth.ku.dk>

r@marksmucker.com wrote:
> 
> Full_Name: Mark Smucker
> Version: 1.1.1
> OS: Windows NT
> Submission from: (NULL) (63.91.145.254)
> 
> Hi,
> 
> I have a data frame with 11 observations and 603 variables.
> 
> When I call,
> 
>     willRaw.fit <- lm( performance ~ ., data=willRaw )
> 
> lm() runs without problems, but computes coefficients for
> only the first 10 variables.  The remaining variables
> get a coefficient of NA.
> 
> There are no NA values in the data frame.  performance
> is one of the columns of the data frame.  I'd be happy
> to email the data file (gzip'd or zip'd).
> 
> My apologies if I've done some stupid (yes, I know it's
> not wise to fit a model to 603 variables, but I was
> just playing around).

That's not a bug!
What do you think about the degrees of freedom, if you have got 11
observations and 603 variables? !!!

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Thu Nov 23 10:12:30 2000
From: jago@mclink.it (Stefano Iacus)
Date: Thu, 23 Nov 2000 11:12:30 +0100
Subject: [Rd] A pre-alpha version of R-1.1.1 for Mac READY !
Message-ID: <a04330106b6429c5dfc95@[159.149.74.61]>

Dear all,

thanks to Ross I. (that gave me a version for Macintosh device), 
Martin M. (he encouraged me a lot), Guido M. (he answer to a lot of 
my silly questions on R, poor him :) ) a pre-alpha version of R-1.1.1 
for MacOS is now ready.

The official page is

http://www.eco-dip.unimi.it/R

For whom who has already downloaded it before Nov 23 (before the 
official announcement) I encourage them to download the latest 
version of the binaries (libraries has not been changed). I fixed an 
important bug concerning IEEE numerics.

It would be a pleasure to receive feedback from Mac R users and/or developers.

I hope to see a link to the mentioned pages, in the download section 
of the official R-Project site.


I hope this is a good lace where to announce it.

Regards to the Core Team!

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 10:59:38 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 11:59:38 +0100
Subject: [Rd] RE: [R] boxplot grouped by two variables: general issue
In-Reply-To: <Pine.GSO.4.20.0011211651590.14553-100000@laplace>
Message-ID: <000801c0553c$799c0280$c10616ac@bbdo.de>


> On Tue, 21 Nov 2000, Vadik Kutsyy wrote:
>
> > Is there a quick way to make boxplots groups by two
> variables?  By that
> > I mean, that if x axes have values ("A","B","C"), than at
> each value
> > there would be a few boxplots each for a value of second
> variable (say
> > ("1","2","3")).
>
> If I understand you correctly you want to try the
> "interaction" function
> in a boxplot.  Your data needs to be organised into a data.frame with
> appropriate factors.  Here's a simple example ...

I'd rather prefer to have something like

  coplot(breaks | wool * tension, data = warpbreaks, panel=function(x, y,
...)boxplot(x))

but there are three problems:

1) coplot doesn't seem to support univariate panel functions
2) coplot doesn't seem to support synchronization options for xlim= and
ylim= across panels
3) plot functions appear to be EITHER panel functions OR high level plot
functions. Needing two versions for each plot function is a little bit
complicated. Rather have ONLY panel functions and a one-panel high level
wrapper.

Here are my questions:

a) Any plans to implement trellis?
b) Are there any other solutions in R which offer simple trellis
functionality?
c) Do you think, attacking these problems leads to reinventing trellis with
all it's complexity?

If the answers turn out to be c(a=NO,b=NO,c=NO) I would like  to ask in more
detail:

Is it possible to write plot functions to properly behave as high level AND
as panel functions?
Are there any issues that NEED to be addressed beyond 1) to 3) ?
Any recommendations? Any related work in progress? Any volunteers?

If nobody else is attacking this, I will think about a solution (r-devel:
AFTER the strwidth() issue has been resolved)


Jens


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Thu Nov 23 13:13:09 2000
From: jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 23 Nov 2000 14:13:09 +0100
Subject: [Rd] RE: [R] Graphics-Device-Size vs. Window-Size
In-Reply-To: <14877.749.266796.685755@gargle.gargle.HOWL>
Message-ID: <001101c0554f$20c36eb0$c10616ac@bbdo.de>



Hi Martin,

Thank you.

> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?

Yes. Paul already mentioned this and I already checked it and I already said
that none of these options help. None of them lies, but none of them does
the job. The crucial point is, that resizing the window does NOT CHANGE the
font size, does CHANGE par("fin") and thus does CHANGE the proportion of the
device needed to show the text (under linux AND under windows).

This means that resizing a window (keep in mind that big devices are
automatically resized at creation time) causes

strwidth("sometext", units="user")   to report CHANGED     space
requirements in user coordinates
strwidth("sometext", units="figure") to report CHANGED     space
requirements as fraction of par("fin")[1]
strwidth("sometext", units="inches") to report NON-CHANGED space
requirements in inches

None of those tells you, which space requirements "sometext" would have
relatively to the originally intended device size or it's user coordinates.
(Yes, I know that I could calculate that, by administering two versions of
device sizes, by calculating two versions of all text sizes, but it is quite
nonsense to have the user do all that).

As I understood Ross Ihaka's mail, this will be improved in one of the
future versions of R, so that we get a real separation of representation
(device) and presentation (screen window), such layer separation has prooved
to be useful in other systems like LaTeX.

BTW: this was a thread on r-devel, not on r-help.

Regards


Jens



> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Thursday, November 23, 2000 12:44 PM
> To: jens.oehlschlaegel@bbdo-interone.de
> Cc: R-help@stat.math.ethz.ch
> Subject: Re: [R] Graphics-Device-Size vs. Window-Size
>
>
> >>>>> "Jens" == Jens Oehlschlaegel
> <jens.oehlschlaegel@bbdo-interone.de> writes:
>
> on Wed, 8 Nov 2000 11:52:38 +0100
>
>     Jens> I want to layout on screen a graphic bigger than the screen
>     Jens> (width=16.53543, height=11.69291) but strwidth()
> and strheight()
>     Jens> give wrong results.
>
>     >> x11(width=42/2.54, height=29.7/2.54, pointsize=12)
>     >> plot(1,1, type="n", xlim=c(0, 1), ylim=c(-1, 0),
> xlab="", ylab="",
>     Jens> axes=FALSE)
>     >> strwidth("Whatever")
>     Jens> [1] 0.08471151
>     >> # Now resize the window and repeat
>     >> strwidth("Whatever")
>     Jens> [1] 0.1856643
>
>     Jens> strwidth() obviously tells me how much space a text
> needs ON THE
>     Jens> SCREEN, not on the desired device size. Can someone
> enlighten
>     Jens> what is the best way to solve this?
>
> Since you are mentioning this again:
>
> Have you looked at  help(strwidth)
> and seen the three different kinds of units that you can ask for ?
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 23 15:11:41 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 23 Nov 2000 16:11:41 +0100 (MET)
Subject: [Rd] contour documentation (PR#740)
Message-ID: <200011231511.QAA06027@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> A minor point, but the specification of the contour function is
    JonR> lagging behind the ?contour file:

    >> args(contour)

    JonR> function (x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)), 
    JonR> z, nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL, 
    JonR> xlim = range(x, finite = TRUE), ylim = range(y, finite = TRUE), 
    JonR> zlim = range(z, finite = TRUE), labcex = 0.4, drawlabels = TRUE, 
    JonR> method = "flattest", vfont = NULL, col = par("fg"), lty = par("lty"), 
    JonR> lwd = par("lwd"), add = FALSE, ...) 

    >> ?contour

    JonR> contour(x = seq(0, 1, len = nrow(z)), y = seq(0, 1, len = ncol(z)),
    JonR> z,
    JonR> nlevels = 10, levels = pretty(zlim, nlevels), labels = NULL,
    JonR> xlim = range(x, finite = TRUE),
    JonR> ylim = range(y, finite = TRUE),
    JonR> zlim = range(z, finite = TRUE),
    JonR> labcex = 0.6, drawlabels = TRUE, method = "flattest", 
    JonR> vfont = c("sans serif", "plain"),
    JonR> col = par("fg"), lty = par("lty"), lwd = par("lwd"),
    JonR> add = FALSE, ...)

    JonR> In particular the function default arguments should apparently be
    JonR> "labcex = 0.6" and "vfont = c("sans serif", "plain")", assuming
    JonR> of course that the help file is more up-to-date than the function
    JonR> definition.

:-)   {the source code  is the truth ..}

Actually, I think you are right:
I think we *should* change the current defaults :

  labcex = 0.4  is really too small

and vector fonts are infinitely better for most instances of contour().

Anybody against the change ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Fri Nov 24 12:31:25 2000
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Fri, 24 Nov 2000 13:31:25 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241231.NAA14426@pubhealth.ku.dk>

This looks to me like a bug in the print method for lists.  In printing 
"test.list" below, the labels $A$subset and $B$subset fail to appear.

I find the same behaviour under linux and Windows (using R 1.1.1 -- 
for version info see below) with R --vanilla.

Regards -- David
David Firth                        Phone +44 1865 278544
Nuffield College                   Fax   +44 1865 278621
Oxford OX1 1NF                     Secretary +44 1865 278612
United Kingdom                     Email david.firth@nuffield.oxford.ac.uk


> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
> test.list$A
$formula
Y ~ X

$subset
[1] TRUE

> test.list
$A
$A$formula
Y ~ X


[1] TRUE


$B
$B$formula
Y ~ X


[1] TRUE


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R    

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Nov 24 13:06:08 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Nov 2000 14:06:08 +0100 (MET)
Subject: [Rd] printing of lists (PR#746)
Message-ID: <200011241306.OAA15475@pubhealth.ku.dk>

>>>>> "david" == david firth <david.firth@nuffield.oxford.ac.uk> writes:

    david> This looks to me like a bug in the print method for lists.
(which is hidden in C)

    david> In printing "test.list" below, the labels $A$subset and $B$subset
    david> fail to appear.

    david> I find the same behaviour under linux and Windows (using R 1.1.1 -- 
    david> for version info see below) with R --vanilla.

    >> test.list<-list(A=list(formula=Y~X,subset=TRUE), B=list(formula=Y~X,subset=TRUE))
    >> test.list$A
    david> $formula
    david> Y ~ X

    david> $subset
    david> [1] TRUE

    >> test.list
    david> $A
    david> $A$formula
    david> Y ~ X


    david> [1] TRUE


    david> $B
    david> $B$formula
    david> Y ~ X


    david> [1] TRUE


    >> version
    david> _                
    david> platform i686-pc-linux-gnu
    david> arch     i686             
    david> os       linux-gnu        
    david> system   i686, linux-gnu  
    david> status                    
    david> major    1                
    david> minor    1.1              
    david> year     2000             
    david> month    August           
    david> day      15               
    david> language R    

Bug confirmed, with the current "R-devel"opment version.
Another slight variation on the theme:

> list(A=list(bla="Y~X",no2=TRUE), B=list(blu=Y~X,no2=TRUE))
$A
$A$bla
[1] "Y~X"

$A$no2
[1] TRUE


$B
$B$blu
Y ~ X


[1] TRUE


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 26 20:01:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Nov 2000 20:01:28 +0000 (GMT)
Subject: [Rd] RODBC
Message-ID: <Pine.GSO.4.05.10011261954030.5359-100000@auk.stats>

Several of you have kindly sent me examples of bugs in RODBC, but none
of them reproduce on my systems.  I am fairly sure I know what is
happening, and that it is client-specific.  (Do empty strings get returned 
as "", NULL or skipped?)   Also, empty character fields were getting mapped
to NA.  There's a comment in the code that fields need to set to a null
string, and that was only being done for the first row.

If my diagnosis is right, I have a fix (and have simpilfied the code a
lot en route).

http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)

I'd be grateful for confirmation (or otherwise).

BTW, although I have altered the code to compile under R-devel, it does not
work correctly for me as yet.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Nov 26 20:12:13 2000
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Sun, 26 Nov 2000 21:12:13 +0100 (MET)
Subject: [Rd] Bug in args with no defaults (PR#747)
Message-ID: <200011262012.VAA23844@pubhealth.ku.dk>

This turned up in the same context as #743, i.e. writing data.restore.

Two bugs, I think:

The way arguments with no defaults are stored appears to be as a
zero-length name:

 > test <- function(x) 1
 > as.list(test)$x

 > mode(as.list(test)$x)
 [1] "name"
 > as.character(as.list(test)$x)
 [1] ""

However, I'm not allowed to create one of those:

 > as.name("")
 Error in as.name("") : attempt to use zero-length variable name

If I'm sneaky, I can create one, but I can't do anything with it:

 > badvar <- as.list(test)$x
 > badvar
 Error: Argument "badvar" is missing, with no default
 > junk <- badvar
 Error: Argument "badvar" is missing, with no default
 > junk
 Error: Object "junk" not found

For now, the workaround I'm using when building up functions like
"test" above is to create them as

 function(x = stop("argument x is missing")) 1

but this is ugly.

Duncan Murdoch

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun Nov 26 20:21:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 26 Nov 2000 21:21:23 +0100 (MET)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
Message-ID: <200011262021.VAA23880@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.1.1.1 (patched the rpois :-))
OS: osf4.0e
Submission from: (NULL) (129.240.28.227)


Dear all,

I have just gotten through a debugging session of my code, being confused
for a few days. I sent what I thought was a straightforward matrix to
chisq.test() and once in a while got the error message:
> chisq.test(t2)
Error in chisq.test(t2) : missing value where logical needed

Now, it turned out that a fairly deep bug in my code occasionally produced
NAs in the matrix, and that was the source of the confusion. Looking at
the code, it is apparent that the test
    if (any(x < 0) || any(is.na(x)))
        stop("all entries of x must be nonnegative and finite")
was designed to catch this, but it doesn't seem to, because the first
any()-call is NA and so when using the operator ||, well, I bet you
understand this better than I... :-)

I figured, perhaps turn this around:
    if (any(is.na(x)) || any(x < 0))
        stop("all entries of x must be nonnegative and finite")
That seems to work: 
> chisq.test(t2)
Error in chisq.test(t2) : all entries of x must be nonnegative and finite

Now, I hope this was a true bug, not just one of my misunderstandings, and that
this is a real fix too.... :-)

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Nov 26 21:13:55 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 26 Nov 2000 13:13:55 -0800 (PST)
Subject: [Rd] Problem with NAs using chisq.test() (PR#748)
In-Reply-To: <200011262021.VAA23880@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0011261255320.12852-100000@atlas.biostat.washington.edu>

On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> 
> 
> Now, it turned out that a fairly deep bug in my code occasionally produced
> NAs in the matrix, and that was the source of the confusion. Looking at
> the code, it is apparent that the test
>     if (any(x < 0) || any(is.na(x)))
>         stop("all entries of x must be nonnegative and finite")
> was designed to catch this, but it doesn't seem to, because the first
> any()-call is NA and so when using the operator ||, well, I bet you
> understand this better than I... :-)
> 
> I figured, perhaps turn this around:
>     if (any(is.na(x)) || any(x < 0))
>         stop("all entries of x must be nonnegative and finite")
> That seems to work: 
> > chisq.test(t2)
> Error in chisq.test(t2) : all entries of x must be nonnegative and finite
> 
> Now, I hope this was a true bug, not just one of my misunderstandings, and that
> this is a real fix too.... :-)

This is a real fix; it may be a real bug.

any(x<0) correctly returns NA with NAs in x, that is, it doesn't know
whether there are any negative entries because some are missing.

any(x<0) || any(is.na(x)) returns NA because of short-circuit
evaluation.  That is, we do sequential if()s on each element from left to
right. The first one fails because of NAs.  Reversing the expression is
more sensible because you would expect to rule out NAs before testing
for x<0.

However, it would also be reasonable for NA || B to evaluate B and return
TRUE or NA depending on the value.  This is what S-PLUS 5 does, so at
least it's an incompatibility. 

The R documentation says 
    The longer form [ie ||]evaluates left to right examining only the first
    element of each vector.  Evaluation proceeds only until the result
    is determined. 
which at least seems incomplete as NA | TRUE gives TRUE, but
NA || TRUE gives an error.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 08:25:48 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 09:25:48 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011270825.JAA26026@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

on Subject: Re: [Rd] Problem with NAs using chisq.test() (PR#748)
which I've changed, since it is another bug we are talking about now

    TL> On Sun, 26 Nov 2000 kjetikj@astro.uio.no wrote:
    >> Full_Name: Kjetil Kjernsmo

    ..............
    ..............

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL>>  The longer form [ie ||] evaluates left to right examining only the
    TL>>  first element of each vector.  Evaluation 
    TL>>  proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

Looks over-cautious to me as well.
We should reach a conclusion here, asap [to be effective for R 1.2].

Either

1)	NA || x
  (and	NA && y )

  continue to give errors, and we should strongly emphasize it in the
  documentation -- and in the FAQ list of differences to S

or

2) really do the same as S, not only Splus 5.x, but also 3.4 which used to
   be our prototype, namely

    > NA || TRUE
    [1] TRUE
    > NA && FALSE
    [1] FALSE
    > NA && TRUE
    [1] NA
    > NA || FALSE
    [1] NA

The advantage of "1)" is to catch programming errors early in some cases,
however for consistency (with "|" and "&") and compatibility,
I'm voting for a change to "2)" behaviour.

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 08:34:46 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 08:34:46 -0000
Subject: R: [Rd] RODBC
Message-ID: <006301c0584c$e6d98df0$0a00a8c0@bellview>

Under which version of R is it supposed to run ?
With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
cannot get the name of the tables, every query I execute returns with "No
Data".
I'm surely doing something wrong ...

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

>Several of you have kindly sent me examples of bugs in RODBC, but none
>of them reproduce on my systems.  I am fairly sure I know what is
>happening, and that it is client-specific.  (Do empty strings get returned
>as "", NULL or skipped?)   Also, empty character fields were getting mapped
>to NA.  There's a comment in the code that fields need to set to a null
>string, and that was only being done for the first row.
>
>If my diagnosis is right, I have a fix (and have simpilfied the code a
>lot en route).
>
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC_0.7-2.tar.gz  (source)
>http://www.stats.ox.ac.uk/pub/bdr/RODBC/RODBC.zip  (Windows)
>
>I'd be grateful for confirmation (or otherwise).
>
>BTW, although I have altered the code to compile under R-devel, it does not
>work correctly for me as yet.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:05:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:05:28 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <006301c0584c$e6d98df0$0a00a8c0@bellview>
Message-ID: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>

On Mon, 27 Nov 2000, Federico Spinazzi wrote:

> Under which version of R is it supposed to run ?
> With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> cannot get the name of the tables, every query I execute returns with "No
> Data".
> I'm surely doing something wrong ...

Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
that case wrong.  I can fake it, though, and will report back when I
have.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 27 10:36:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 27 Nov 2000 10:36:52 +0000 (GMT)
Subject: R: [Rd] RODBC
In-Reply-To: <Pine.GSO.4.05.10011271002440.11942-100000@toucan.stats>
Message-ID: <Pine.GSO.4.05.10011271035100.12059-100000@toucan.stats>

On Mon, 27 Nov 2000, Prof Brian Ripley wrote:

> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
> 
> > Under which version of R is it supposed to run ?
> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't work, I
> > cannot get the name of the tables, every query I execute returns with "No
> > Data".
> > I'm surely doing something wrong ...
> 
> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
> that case wrong.  I can fake it, though, and will report back when I
> have.

Yes, I can reproduce this: I left a piece of debugging code in, sorry.
That version needs the max number of rows set to > 0 if the database does
not tell you.  I've just uploaded a replacement that should not have
the problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Nov 27 15:28:19 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 27 Nov 2000 15:28:19 -0000
Subject: R: R: [Rd] RODBC
Message-ID: <00b701c05886$ad551470$0a00a8c0@bellview>

It seems to work smoothly now.

Thank you very much.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Prof Brian Ripley <ripley@stats.ox.ac.uk>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: R-devel@r-project.org <R-devel@r-project.org>
Data: luned 27 novembre 2000 11.03
Oggetto: Re: R: [Rd] RODBC


>On Mon, 27 Nov 2000, Prof Brian Ripley wrote:
>
>> On Mon, 27 Nov 2000, Federico Spinazzi wrote:
>>
>> > Under which version of R is it supposed to run ?
>> > With 1.1.0 under windows NT 4.0 against Access databases it doesn't
work, I
>> > cannot get the name of the tables, every query I execute returns with
"No
>> > Data".
>> > I'm surely doing something wrong ...
>>
>> Not necessarily.  I tried under 1.1.1, and don't have Access, so may have
>> that case wrong.  I can fake it, though, and will report back when I
>> have.
>
>Yes, I can reproduce this: I left a piece of debugging code in, sorry.
>That version needs the max number of rows set to > 0 if the database does
>not tell you.  I've just uploaded a replacement that should not have
>the problem.
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Nov 27 17:27:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 27 Nov 2000 18:27:06 +0100 (MET)
Subject: [Rd] abline() does not obey "xpd" (clipping rules) (PR#750)
Message-ID: <200011271727.SAA04871@pubhealth.ku.dk>

This is not a bug in the very strict sense,
but for consistency,  
I feel that
    abline() 
should obey  par("xpd") setting, even by ...-argument.
The following code shows how  lines() ``works'' and abline() does not :

  par(mfrow=c(2,1))
  plot(1:4)
  plot(1:10)
  par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
  ## or even
  abline(v=1:10, xpd = NA, col = "purple")
  ## lines() *does* work with xpd arg:
  lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
  lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
  lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
  text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
  text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mavip1@inet.polyu.edu.hk  Tue Nov 28 05:25:26 2000
From: mavip1@inet.polyu.edu.hk (mavip1@inet.polyu.edu.hk)
Date: Tue, 28 Nov 2000 06:25:26 +0100 (MET)
Subject: [Rd] BUG: polyroot() (PR#751)
Message-ID: <200011280525.GAA06952@pubhealth.ku.dk>

I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Nov 28 19:42:55 2000
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 28 Nov 2000 20:42:55 +0100 (MET)
Subject: [Rd] non-centrality parameter in pf() (PR#752)
Message-ID: <200011281942.UAA17414@pubhealth.ku.dk>


Bug Description:

Problem with the function pf() when the non-centrality
parameter is large. Here is a sample command. You should
see a smooth line from 0 to about 55, and then the values
of pf() go crazy from 55 to 100.
############################
ncp <- seq(0,100,length=200)
plot(ncp,pf(5,7,2,ncp=ncp))
############################

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 13:02:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 14:02:51 +0100 (MET)
Subject: [Rd] abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200011291302.OAA24761@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> This is not a bug in the very strict sense,
    MM> but for consistency,  
    MM> I feel that
    MM> abline() 
    MM> should obey  par("xpd") setting, even by ...-argument.
    MM> The following code shows how  lines() ``works'' and abline() does not :

    MM> par(mfrow=c(2,1))
    MM> plot(1:4)
    MM> plot(1:10)
    MM> par(xpd=NA); abline(v=1:10); par(xpd=FALSE)
    MM> ## or even
    MM> abline(v=1:10, xpd = NA, col = "purple")
    MM> ## lines() *does* work with xpd arg:
    MM> lines(4:5,c(1,40), col = 2, xpd = FALSE)# clip to plot
    MM> lines(5:6,c(1,40), col = 3, xpd = TRUE)# clip to figure
    MM> lines(6:7,c(1,20), col = 4, xpd = NA)# clip to device 
    MM> text(4:6, 10.5, "xpd =", xpd = TRUE, col = 2:4)
    MM> text(4:6, 10, c("FALSE","TRUE","NA"), col = 2:4, adj = 0)

Also, 
      rect() 
fails similarly.
This gives funny legend()s :

 plot(1:10)
 legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 op <- par(xpd = NA)
 legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
 ## pch = 1 also doesn't ?!?? ?? why??  It does here :
 points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
 ## and other pch's do here
 legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
 par(op)

## Note that there seems another peculiar clipping bug 
##       with pch = 1 in legend

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Nov 29 15:17:16 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 29 Nov 2000 16:17:16 +0100 (MET)
Subject: [Rd] (NA || x) and (NA && y)  {another "bug" } (PR#749)
Message-ID: <200011291517.QAA27271@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> However, it would also be reasonable for NA || B to evaluate B and
    TL> return TRUE or NA depending on the value.  This is what S-PLUS 5
    TL> does, so at least it's an incompatibility.

    TL> The R documentation says 

    TL> The longer form [ie ||] evaluates left to right examining only the
    TL> first element of each vector.  Evaluation 
    TL> proceeds only until the result is determined. 

    TL> which at least seems incomplete as NA | TRUE gives TRUE, but
    TL> NA || TRUE gives an error.

    MM> Looks over-cautious to me as well.

    ........

    MM> 2) really do the same as S, not only Splus 5.x, but also 3.4 which
    MM> used to be our prototype, namely

    >> NA || TRUE
    MM> [1] TRUE
    >> NA && FALSE
    MM> [1] FALSE
    >> NA && TRUE
    MM> [1] NA
    >> NA || FALSE
    MM> [1] NA

    MM> The advantage of "1)" is to catch programming errors early in some
    MM> cases, however for consistency (with "|" and "&") and
    MM> compatibility, I'm voting for a change to "2)" behaviour.

This is now in "R-devel" aka  ``R 1.2 to be''  (slightly less than 20 days)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 29 18:30:33 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 29 Nov 2000 19:30:33 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#753)
Message-ID: <200011291830.TAA28473@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arto.luoma@uta.fi  Thu Nov 30 13:02:56 2000
From: arto.luoma@uta.fi (arto.luoma@uta.fi)
Date: Thu, 30 Nov 2000 14:02:56 +0100 (MET)
Subject: [Rd] means in arima0 (PR#754)
Message-ID: <200011301302.OAA07911@pubhealth.ku.dk>

Full_Name: Arto Luoma
Version: 1.1.0
OS: Windows 98
Submission from: (NULL) (153.1.53.119)


In arima0 it is possible to specify whether the mean of the original series is
included in the model or not. However, it is not possible to specify whether the
mean of the differenced series is included. It seems that it is not included.
However, if differencing is used to eliminate trend, the mean of the differenced
series is not zero. In my opinion, this leads to errors both in estimation and
prediction problems. The uncertainty in the estimation of the mean of the
differenced series should be also included  in the standard errors of
prediction. 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 14:38:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 14:38:12 +0000 (GMT)
Subject: [Rd] means in arima0 (PR#754)
In-Reply-To: <200011301302.OAA07911@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10011301430150.26037-100000@auk.stats>

On Thu, 30 Nov 2000 arto.luoma@uta.fi wrote:

> Full_Name: Arto Luoma
> Version: 1.1.0
> OS: Windows 98
> Submission from: (NULL) (153.1.53.119)
> 
> 
> In arima0 it is possible to specify whether the mean of the original series is
> included in the model or not. However, it is not possible to specify whether the
> mean of the differenced series is included. It seems that it is not included.

Right, ARMA processes have zero mean, by definition, and the definition is
on the help page.  I don't see any room for ambiguity in what is written
there.

> However, if differencing is used to eliminate trend, the mean of the differenced
> series is not zero. In my opinion, this leads to errors both in estimation and
> prediction problems. The uncertainty in the estimation of the mean of the
> differenced series should be also included  in the standard errors of
> prediction. 

This is not a bug: the function works as described.  If you want it to work
differently, please contribute code to enhance it.  Note that arima0 is
explicitly described as a preliminary version, and it is planned one day to
replace it. So, please supply what you see as a better version as a
candidate for replacement.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 18:41:46 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 04:41:46 +1000 (EST)
Subject: [Rd] Optimisation methods
Message-ID: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>

I don't want to re-invent the wheel, and I'm trying to code up something
that does a Nelder-Mead simplex method to minimise a non-linear objective
function.  (I'm porting something I originally wrote in matlab, using the 
optimisation toolbox funciton fmins).

Is there already something available to do this included in R?
Do people have suggestions on the best way to do this?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Nov 30 18:39:54 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 30 Nov 2000 10:39:54 -0800 (PST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.21.0011301039250.28740-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?

Yes. help(optim).

	-thomas
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 30 18:48:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Nov 2000 18:48:28 +0000 (GMT)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>

On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:

> I don't want to re-invent the wheel, and I'm trying to code up something
> that does a Nelder-Mead simplex method to minimise a non-linear objective
> function.  (I'm porting something I originally wrote in matlab, using the 
> optimisation toolbox funciton fmins).
> 
> Is there already something available to do this included in R?
> Do people have suggestions on the best way to do this?

optim(method="Nelder-Mead")

Now how did this not come up in a search: perhaps because of the way you
spell optimization?  I have

> help.search("optimisation")
No help files found with name or title matching `optimisation'
> help.search("optimization")
Help files with name or title matching `optimization':

partition(multiv)          Partitioning by Iterative Optimization 
lmeScale(nlme)             Scale for lme Optimization
portfolio.optim(tseries)   Portfolio Optimization
optim(base)                General-purpose Optimization
optimize(base)             One Dimensional Optimization

which shows we probably need to find a way to check variant spellings.

(BTW: just in case anyone tells me the British spell with an `ise', the
Oxford English Dictionary does not.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Nov 30 20:31:58 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 30 Nov 2000 21:31:58 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <14886.47422.630186.442419@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> I don't want to re-invent the wheel, and I'm trying to code up something
>> that does a Nelder-Mead simplex method to minimise a non-linear objective
>> function.  (I'm porting something I originally wrote in matlab, using the 
>> optimisation toolbox funciton fmins).
>> 
>> Is there already something available to do this included in R?
>> Do people have suggestions on the best way to do this?

> optim(method="Nelder-Mead")

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have

>> help.search("optimisation")
> No help files found with name or title matching `optimisation'
>> help.search("optimization")
> Help files with name or title matching `optimization':

> partition(multiv)          Partitioning by Iterative Optimization 
> lmeScale(nlme)             Scale for lme Optimization
> portfolio.optim(tseries)   Portfolio Optimization
> optim(base)                General-purpose Optimization
> optimize(base)             One Dimensional Optimization

> which shows we probably need to find a way to check variant spellings.

I am not sure how easy it would be to use different dicitionaries.  But
a fuzzy grep which also returns near matches should be good enough for
what we need.  Not that I have such a beast readily available, though.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Robert.King@mailbox.gu.edu.au  Thu Nov 30 22:09:22 2000
From: Robert.King@mailbox.gu.edu.au (Robert.King@mailbox.gu.edu.au)
Date: Fri, 1 Dec 2000 08:09:22 +1000 (EST)
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>

On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:

> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
> 
> > I don't want to re-invent the wheel, and I'm trying to code up something
> > that does a Nelder-Mead simplex method to minimise a non-linear objective
> > function.  (I'm porting something I originally wrote in matlab, using the 
> > optimisation toolbox funciton fmins).
> 
> optim(method="Nelder-Mead")
 
Thanks.  Perhaps I should just learn to spell like the OED :-) 

> Now how did this not come up in a search: perhaps because of the way you
> spell optimization?  I have
 
> which shows we probably need to find a way to check variant spellings.
> 
> (BTW: just in case anyone tells me the British spell with an `ise', the
> Oxford English Dictionary does not.)

I guess this means I should change the spelling of the parameterisation
in the gld package functions.  What do people think of adding extra
arguments to functions to take account of different spellings like this:

example.fn _ function(parameterisation="fing",parameterization=NULL)
{
if (is.null(parameterization)) {parameterization_parameterisation}
else {parameterisation_parameterization}
print(parameterisation)
}

Is there a better way?

Thanks,
Robert.
----
Robert King, Australian Environmental Studies, Griffith University, Australia
Currently on Research leave (returning to Australia, end of January 2001)
contact me by email
Robert.King@mailbox.gu.edu.au   http://www.ens.gu.edu.au/robertk/

linux: because a PC is a terrible thing to waste
(ksh@cis.ufl.edu put this on Tshirts in '93)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

