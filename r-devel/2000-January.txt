From mgd@swarm.org  Sat Jan 29 00:40:09 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 28 Jan 2000 16:40:09 -0800
Subject: HDF5 as a module
Message-ID: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>


--=-=-=


Included below are:

  1) Diffs to to remove HDF5 from R

  2) Diffs to pass thru --with-* options to a module's configure
     script during "R INSTALL".  (To reiterate a plea for this
     capability...)  This applies only to Unix, the Windows (mingw32 in
     my case) build approach of passing in make variables like
     *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
     Windows install is that I had to drop the `bundle' wrapper, which
     was useful for Unix in order to give the package a recognizable
     name with version number (Rhdf5-0.0), but the installed package
     with R a minimal name (hdf5).

  3) The module itself, as an attachment.


Index: aclocal.m4
===================================================================
RCS file: /home/rcvs/src/R/aclocal.m4,v
retrieving revision 1.30
diff -c -r1.30 aclocal.m4
*** aclocal.m4	2000/01/21 07:49:19	1.30
--- aclocal.m4	2000/01/29 00:22:35
***************
*** 543,570 ****
      AC_MSG_WARN([I found f2c but not libf2c, or libF77 and libI77])
    fi])
  dnl
- dnl R_LIB_HDF5
- dnl
- AC_DEFUN(R_LIB_HDF5,
-   [ AC_CHECK_LIB(hdf5, main,
-       [ ac_save_LIBS="${LIBS}"
- 	LIBS="-lhdf5 ${LIBS}"
- 	AC_CACHE_CHECK([for HDF5 version >= 1.2],
- 	  r_cv_lib_hdf5,
- 	  AC_TRY_LINK(
- 	    [#include <hdf5.h>],
- 	    [ H5T_pers_t convtype = H5T_PERS_SOFT;
- 	      H5Tclose ((hid_t) 0);],
- 	    r_cv_lib_hdf5=yes,
- 	    r_cv_lib_hdf5=no))
- 	if test "${r_cv_lib_hdf5}" = yes; then
- 	  AC_DEFINE(HAVE_HDF5)
- 	else
- 	  LIBS=${ac_save_LIBS}
- 	fi
-       ])
-   ])
- dnl
  dnl R_FUNC___SETFPUCW
  dnl
  AC_DEFUN(R_FUNC___SETFPUCW,
--- 543,548 ----
Index: configure.in
===================================================================
RCS file: /home/rcvs/src/R/configure.in,v
retrieving revision 1.159
diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/29 00:22:50
***************
*** 342,348 ****
  ))
  AC_CHECK_LIB(dl, dlopen)
  AC_CHECK_LIB(z, main)
- R_LIB_HDF5
  BLAS="blas.o"
  if ${use_dxml}; then
    AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
--- 342,347 ----
***************
*** 394,400 ****
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   hdf5.h ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
--- 393,399 ----
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
Index: src/main/Makefile.in
===================================================================
RCS file: /home/rcvs/src/R/src/main/Makefile.in,v
retrieving revision 1.51
diff -c -r1.51 Makefile.in
*** src/main/Makefile.in	2000/01/27 05:42:06	1.51
--- src/main/Makefile.in	2000/01/29 00:23:10
***************
*** 45,51 ****
  	gram.c \
  	gram-ex.c \
  	graphics.c \
- 	hdf5.c \
  	iosupport.c \
  	list.c \
  	logic.c \
--- 45,50 ----
Index: src/main/names.c
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.c,v
retrieving revision 1.119
diff -c -r1.119 names.c
*** src/main/names.c	2000/01/27 05:41:22	1.119
--- src/main/names.c	2000/01/29 00:23:18
***************
*** 515,522 ****
  {"parse",	do_parse,	0,	11,	4,	PP_FUNCALL},
  {"save",	do_save,	0,	111,	4,	PP_FUNCALL},
  {"load",	do_load,	0,	111,	2,	PP_FUNCALL},
- {"hdf5save",	do_hdf5save,	0,	0,	-1,	PP_FUNCALL},
- {"hdf5load",	do_hdf5load,	0,	11,	 2,	PP_FUNCALL},
  {"deparse",	do_deparse,	0,	11,	2,	PP_FUNCALL},
  {"dput",	do_dput,	0,	111,	2,	PP_FUNCALL},
  {"dump",	do_dump,	0,	111,	2,	PP_FUNCALL},
--- 515,520 ----
Index: src/main/names.h
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.h,v
retrieving revision 1.51
diff -c -r1.51 names.h
*** src/main/names.h	2000/01/21 17:54:06	1.51
--- src/main/names.h	2000/01/29 00:23:19
***************
*** 181,188 ****
  SEXP do_gray(SEXP, SEXP, SEXP, SEXP);
  SEXP do_grep(SEXP, SEXP, SEXP, SEXP);
  SEXP do_gsub(SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5save (SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5load (SEXP, SEXP, SEXP, SEXP);
  SEXP do_hsv(SEXP, SEXP, SEXP, SEXP);
  SEXP do_identify(SEXP, SEXP, SEXP, SEXP);
  SEXP do_if(SEXP, SEXP, SEXP, SEXP);
--- 181,186 ----

Index: src/scripts/INSTALL.in
===================================================================
RCS file: /home/rcvs/src/R/src/scripts/INSTALL.in,v
retrieving revision 1.29
diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/29 00:23:21
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then


--=-=-=
Content-Type: application/octet-stream
Content-Disposition: attachment; filename=Rhdf5-0.1.tar.gz
Content-Transfer-Encoding: base64
Content-Description: HDF5 module for R

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
f/Hv/wH51ZhiAGgBAA==
--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jan 29 10:04:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 29 Jan 2000 11:04:27 +0100 (MET)
Subject: [Rd] Re: E-mail to R-devel will have prefix, ok?
In-Reply-To: <14478.51270.541011.369015@gargle.gargle.HOWL>
References: <14478.51270.541011.369015@gargle.gargle.HOWL>
Message-ID: <14482.47915.762101.343163@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A short "private" discussion revealed that several people desire to
    MM> get a prefix in the "subject:"s of R-devel mailings.

    MM> I'd propose to set "[R-d]" as I've done it (manually, this time!)
    MM> above.  Unless I hear load protests, I'll set this.

    MM> your mailing list maintainer: Martin Maechler

We had no public feedback.  
Private feedback was
	 << Can't people sort by "Sender/From.." ? >>
Long prefixes are a nuisance because they obscure more of the real "Subject".

As a minimal compromise,  I've now added  "[Rd]"
   (+ the space, still makes 5 valuable characters..)
Martin

---------

R-lists maintainer
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon Jan 31 04:21:28 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 31 Jan 2000 15:21:28 +1100
Subject: [Rd] Interest in R plotting capabilities
Message-ID: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>

I'm a scheme and C user generally, I'm a bit wary of the large FORTRAN
content of the R language but aside from that issue it seems nice and simple
and easy to use.

What I want to do is find some GPL software to replace gnuplot,
and since R does all the calculating stuff that gnuplot does (probably
R is faster though I haven't tested) plus R has quite decent
plotting capabilities I thought that R might make a good candidate
for a plotting program.

I had a few problems in some particular areas though... gnuplot
can produce mesh plots of a 3D surface from regular grid samples in x,y,z
coordintes. Does R have a package that does anything like that?
Also, gnuplot supports both hidden-line mode (very slow but gets there)
and non-hidden line mode.

Another thing gnuplot can do is generate 2D contours from regular
grid samples of a 3D function. Is there any contour generation system
for R?

One final question, I looked over the GNU libplot library and it seems
to have excellent device handling capabilities and some decent font
selections but the actual plotting side of things is not nearly as good
as R. It seems kind of logical to add a module to R that provides all
the libplot devices as R devices since this would give the best of both
worlds and should require only ``glue'' code. Anyone thought of something
like this already?

By the way, I put some of my notes together as I was learning R and they
are at:

	http://www.progsoc.uts.edu.au/~telford/samples/R/

Hopefully I'll add to it as I figure things out but it could provide a
good place for beginners to start since it includes all the really
simple stuff that I had to figure out (I have no S reference). If someone
is writing an R tutorial, and if it will be under GPL, then they can grab
whatever they like from my notes.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Mon Jan 31 10:16:05 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Mon, 31 Jan 2000 10:16:05 +0000 (GMT)
Subject: [Rd] Interest in R plotting capabilities
In-Reply-To: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.LNX.4.10.10001311009440.690-100000@localhost.localdomain>

> 
> I had a few problems in some particular areas though... gnuplot
> can produce mesh plots of a 3D surface from regular grid samples in x,y,z
> coordintes. Does R have a package that does anything like that?
> Also, gnuplot supports both hidden-line mode (very slow but gets there)
> and non-hidden line mode.
try persp(). Here's an example:
x<-seq(1,3)
y<-seq(1,3)
z<-seq(1,9)
data<-data.frame(x,y,z) 	#or read dataframe from disk file
x<-unique(data$x)
y<-unique(data$y)
z<-matrix(data$z,length(y),length(x))
image(x,y,z, col=gray(0:19/19),xlab="x", ylab="y")
contour(x,y,z,xlab="x", ylab="y")
persp(x,y,z, col="gray")

> Another thing gnuplot can do is generate 2D contours from regular
> grid samples of a 3D function. Is there any contour generation system
> for R?
contour() also filled.contour()
see above.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 10:07:16 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 11:07:16 +0100
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
References: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
Message-ID: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> Included below are:

>   1) Diffs to to remove HDF5 from R

>   2) Diffs to pass thru --with-* options to a module's configure
>      script during "R INSTALL".  (To reiterate a plea for this
>      capability...)  This applies only to Unix, the Windows (mingw32 in
>      my case) build approach of passing in make variables like
>      *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
>      Windows install is that I had to drop the `bundle' wrapper, which
>      was useful for Unix in order to give the package a recognizable
>      name with version number (Rhdf5-0.0), but the installed package
>      with R a minimal name (hdf5).

>   3) The module itself, as an attachment.

I made the changes to the R sources, and removed the obsolete files.

Re INSTALL, I had already committed the new `--configure-opts=' option,
which I still think is preferable to having `--with-*' explicitly.

Re the module, I have several comments.

* It would be nice to merge this into Doug Bates' foreign package.

* I think this should be one package, not a bundle.  Also, the version
info in DESCRIPTION does not match the actual number used.

* Makevars.in should not use LDFLAGS.  Instead, the -L flags should be
in PKG_LIBS (as explained in R-exts.texi).  Also, linking against the
libraries should only happen if these were found.  In general, I am not
sure how the package will install in case the libs are not there.

* The include statements in hdf5.c should conform to the new header file
structure.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jan 31 15:25:13 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 31 Jan 2000 16:25:13 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000131162513.plummer@iarc.fr>

On 31-Jan-00 Kurt Hornik wrote:
 
> * It would be nice to merge this into Doug Bates' foreign package.

I would prefer if you didn't do this.  The dependence of hdf5 on external
libraries causes problems when you distribute binary versions of R.
We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
difference between the two is that the latter is linked against libhdf5
and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
in a separate package means that we can distribute a single RPM for
R-base, and provide the extra functionality of access to hdf5 files in
a separate add-on package. Merging hdf5 and foreign would put us back
in the original position.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 31 15:21:10 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 31 Jan 2000 16:21:10 +0100 (MET)
Subject: [Rd] Feature requests for princomp(.) : Allow cor() specifications
Message-ID: <14485.43110.405973.902333@gargle.gargle.HOWL>

(all in subject).

If I want to do a PC analysis in a situation with missing data,
I may want to have same flexibility as with "cor(.)",
e.g., I may want

      princomp(x, ...,  use.obs = "pairwise.complete")


Actually, I may want even more flexibility.
Currently,
	princomp(.) 
has

    if (cor) 
        cv <- get("cor", envir = .GlobalEnv)(z)
    else cv <- cov(z)
    edc <- eigen(cv)

and If may want it to use a robust covariance or correlation matrix instead,
e.g.,

    princomp(x, cv = cov.mve(x), .....)

Note that for prcomp() which works on the SVD rather than the
correlation/cov. matrix,  similar flexibility may be required.

Opinions?
Volunteers?

(either one is sufficient to answer!)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 15:26:24 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 16:26:24 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <XFMail.000131162513.plummer@iarc.fr>
References: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
 <XFMail.000131162513.plummer@iarc.fr>
Message-ID: <14485.43424.783759.935990@fangorn.ci.tuwien.ac.at>

>>>>> Martyn Plummer writes:

> On 31-Jan-00 Kurt Hornik wrote:
>> * It would be nice to merge this into Doug Bates' foreign package.

> I would prefer if you didn't do this.  The dependence of hdf5 on external
> libraries causes problems when you distribute binary versions of R.
> We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
> difference between the two is that the latter is linked against libhdf5
> and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
> in a separate package means that we can distribute a single RPM for
> R-base, and provide the extra functionality of access to hdf5 files in
> a separate add-on package. Merging hdf5 and foreign would put us back
> in the original position.

But only if foreign is part of R, no?

(But I have no problem if hdf5 stays separate.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jan  1 15:40:50 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Jan 2000 16:40:50 +0100 (CET)
Subject: Segfault in dataentry() (PR#391)
In-Reply-To: <199912311709.SAA12673@pubhealth.ku.dk>
References: <199912311709.SAA12673@pubhealth.ku.dk>
Message-ID: <14446.8194.975894.184062@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:
>>> dataentry(0,0)

PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
PD> (TYPEOF(s)) {

PD> Apparently that one doesn't get trapped by the no-segfault checks.
PD> Martin?

> There's a not-so-short  "stop.list" of functions which are *NOT* tested for
> segfaults.   dataentry (w/ and w/o ".") is among them.
> all the interactive ones are, actually.
> [[remember:   The list was quite a bit shorter, and there were R core
> 	      members who complained...]] 

> Look in  ..../tests/make-no-segfault.R for the statements starting with

>  edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
>  misc.int <- c("browser", "bug.report", "menu")
>  stop.list[["base"]] <-
>     ..

> to find all the functions which are *not* tested for seg.faults.

> Maybe we (R-core) we should really always have
>       R_TESTLOTS=yes
> in our environments?

Actually, I'd prefer having some means of markup in the Rd source code
to indicate whether an object should not be employed for the no-segfault
testing.  We could still keep the R_TESTLOTS, though ...

E.g, the socket docs would have something correspding to \dontrun in the
examples section.

This should be cleaner than having to change the script in tests.

(Confusion arose when Fritz added old.packages() two days ago ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Jan  3 21:45:19 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 3 Jan 2000 22:45:19 +0100 (MET)
Subject: links in faq file broken (PR#393)
Message-ID: <200001032145.WAA29247@pubhealth.ku.dk>

Full_Name: A.I. McLeod
Version: 0.091
OS: NT
Submission from: (NULL) (129.100.45.131)


links are broken or missing in:

http://cran.r-project.org/doc/FAQ/R-FAQ.html

In the following section:

5.5 How can I create an R package?

This does not work:
See Creating R packages, for more information. 

since

http://cran.r-project.org/doc/FAQ/R-exts.html#Creating%20R%20pkgs

is missing.

There are many other missing links as well.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 09:37:03 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Tue, 4 Jan 2000 10:37:03 +0100 (MET)
Subject: formatC (bug and fix) (PR#394)
Message-ID: <200001040937.KAA02096@pubhealth.ku.dk>


OK:

> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"


NOT OK:

> formatC(as.integer(c(1,0,NA)))
[1] "0"          "1072693248" "NA"

> formatC(as.integer(c(0,1,NA)))
[1] "0"  "0"  "NA"


BUG TRACED TO R-code of formatC()

where

        x[!Ok] <- 0

unintendedly changes the storage.mode of x to double, while variable mode
still signifies 'integer'. Thus the following is probably ok as bug fix

        ProperZero <- 0
        storage.mode(ProperZero) <- mode
        x[!Ok] <- ProperZero


At least the following tests are positive using this fix

> formatC(as.integer(c(1,0,NA)))
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


Best regards


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 15:47:57 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 15:47:57 +0000 (GMT)
Subject: set functions
Message-ID: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>

I wonder if we might also include an "equiv" function along with the other
set functions (ie "union", "intersect", etc), perhaps along the lines of

"equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

(which I think might be the quickest implementation).  I use this type of
function quite frequently: is there some reason why it is not in the base?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 15:08:35 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 4 Jan 2000 16:08:35 +0100
Subject: format.char() speedup
Message-ID: <000901bf56c5$9357e3e0$a9021aac@joelschlaegel>



Happy new Year!

Here is a slightly changed version of format.char(), which really speeds up
for big data.


Regards


Jens Oehlschlgel-Akiyoshi


format.char.old <- format.char

format.char <-
function (x, width = NULL, flag = "-")
{
    if (is.null(x))
        return("")
    if (!is.character(x)) {
        warning("format.char: coercing 'x' to 'character'")
        x <- as.character(x)
    }
    if (is.null(width) && flag == "-")
        return(format(x))
    at <- attributes(x)
    nc <- nchar(x)
    if (is.null(width))
        width <- max(nc)
    else if (width < 0) {
        flag <- "-"
        width <- -width
    }
    # start of accelerate
    no <- pmax(0, width - nc)
    tab <- unique(no)
    tabpad <- sapply(tab+1, function(no) paste(character(no), collapse = "
"))
    pad <- tabpad[match(no, tab)]
    # end of accelerate
    r <- if (flag == "-")
        paste(x, pad, sep = "")
    else paste(pad, x, sep = "")
    if (!is.null(at))
        attributes(r) <- at
    r
}

> system.time(format.char(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA
> system.time(format.char.old(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA

> system.time(format.char(character(100000), width=30))
[1] 3.90 0.02 3.92   NA   NA
> system.time(format.char.old(character(100000), width=30))
[1] 92.33  0.35 92.69    NA    NA

> system.time(format.char(character(1000), width=1:1000))
[1] 2.69 0.00 2.68   NA   NA
> system.time(format.char.old(character(1000), width=1:1000))
[1] 2.55 0.00 2.55   NA   NA

> system.time(format.char(character(100000), width=1:1000))
[1] 28.71  0.00 28.72    NA    NA
> system.time(format.char.old(character(100000), width=1:1000))
Error: heap memory (65536 Kb) exhausted [needed 0 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 269.1 0.28 269.56 NA NA




--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:16:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:16:48 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 15:47:57 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>
Message-ID: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> I wonder if we might also include an "equiv" function along with the other
> set functions (ie "union", "intersect", etc), perhaps along the lines of
> 
> "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> (which I think might be the quickest implementation).  I use this type of
> function quite frequently: is there some reason why it is not in the base?

length(setdiff(x,y))==0 appears to be about twice as fast....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:17:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:17:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

> length(setdiff(x,y))==0 appears to be about twice as fast....

But I don't think that would be right!

length(setdiff(1:4, 1:5))==0	# is TRUE
equiv(1:4, 1:5)			# clearly FALSE

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:39:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:39:58 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:17:33 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>
Message-ID: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> On 4 Jan 2000, Peter Dalgaard BSA wrote:
> 
> > > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> > length(setdiff(x,y))==0 appears to be about twice as fast....
> 
> But I don't think that would be right!
> 
> length(setdiff(1:4, 1:5))==0	# is TRUE
> equiv(1:4, 1:5)			# clearly FALSE

Argh. I was thinking of the symmetric set difference. So you'd need 
setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
as twice as fast....

However:

equiv<-function(x,y) 
    length(x<-unique(x))==length(y<-unique(y)) && 
    all(sort(x)==sort(y)) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:55:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:55:02 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:45:12 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>
Message-ID: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> > equiv<-function(x,y) 
> >     length(x<-unique(x))==length(y<-unique(y)) && 
> >     all(sort(x)==sort(y)) 
> 
> Yes, I wondered about that, and also about
> 
> "equiv" <-
> function(x, y) {
>   x <- unique(x)
>   y <- unique(y)
>   length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
> }
> 
> but I thought that perhaps a sort would be more expensive than a second
> call to match, and more so for two sorts.  Cheers, Jonathan.

Watch:

> x<-1:50000
> y<-x[order(runif(50000))]
> "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> equiv<-function(x,y) 
+     length(x<-unique(x))==length(y<-unique(y)) && 
+     all(sort(x)==sort(y)) 
> system.time(equiv2(x,y))
[1] 3.10 0.02 3.00 0.00 0.00
> system.time(equiv(x,y))
[1] 0.77 0.00 1.00 0.00 0.00
> 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:45:12 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:45:12 +0000 (GMT)
Subject: set functions
In-Reply-To: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > length(setdiff(1:4, 1:5))==0	# is TRUE
> > equiv(1:4, 1:5)			# clearly FALSE
> 
> Argh. I was thinking of the symmetric set difference. So you'd need 
> setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
> as twice as fast....
> 
> However:
> 
> equiv<-function(x,y) 
>     length(x<-unique(x))==length(y<-unique(y)) && 
>     all(sort(x)==sort(y)) 

Yes, I wondered about that, and also about

"equiv" <-
function(x, y) {
  x <- unique(x)
  y <- unique(y)
  length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
}

but I thought that perhaps a sort would be more expensive than a second
call to match, and more so for two sorts.  Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:59:45 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:59:45 +0000 (GMT)
Subject: set functions
In-Reply-To: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> Watch:
> 
> > x<-1:50000
> > y<-x[order(runif(50000))]
> > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> > equiv<-function(x,y) 
> +     length(x<-unique(x))==length(y<-unique(y)) && 
> +     all(sort(x)==sort(y)) 
> > system.time(equiv2(x,y))
> [1] 3.10 0.02 3.00 0.00 0.00
> > system.time(equiv(x,y))
> [1] 0.77 0.00 1.00 0.00 0.00

Yup -- that's much quicker!  To re-ask the original question, would it be
reasonable to include such a function along with the other set functions?
Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sino123@hotmail.com  Wed Jan  5 03:16:22 2000
From: sino123@hotmail.com (sino123@hotmail.com)
Date: Wed, 05 Jan 2000 11:16:22 +0800
Subject: Welcome to post your business and trade offers in sino trade Leads wwwboard!
Message-ID: <36530.469699421292800.85126@localhost>

http://tradeleads.heha.net

Do you want to reach 20,000,000 worldwide manufacturers and traders ?! 
Do you want to find your product a buyer within hours ?! 
Do you want to explore foreign market ?! 

Welcome to post your business and trade offers in trade Leads wwwboard!

http://tradeleads.heha.net

is a professional Trade BBS where you can post and search worldwide trade and
business information. 
--------------------------------------------------------------------------------
This is not Spamming, you receive this email because you have subscribe or post
to one of our business Netowrk website's information services. 
To be removed from this NEWSLETTER, please send emailto: sino123@sinoleads.com
--------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  5 09:50:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Jan 2000 10:50:11 +0100 (MET)
Subject: set functions
In-Reply-To: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
References: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
 <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
Message-ID: <14451.5075.867165.954414@gargle.gargle.HOWL>


 On 4 Jan 2000, Peter Dalgaard BSA wrote:
 > Watch:
 > 
 > > x<-1:50000
 > > y<-x[order(runif(50000))]
 > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
 > > equiv<-function(x,y) 
 > +     length(x<-unique(x))==length(y<-unique(y)) && 
 > +     all(sort(x)==sort(y)) 
 > > system.time(equiv2(x,y))
 > [1] 3.10 0.02 3.00 0.00 0.00
 > > system.time(equiv(x,y))
 > [1] 0.77 0.00 1.00 0.00 0.00

    JonR> Yup -- that's much quicker!  To re-ask the original question,
    JonR> would it be reasonable to include such a function along with the
    JonR> other set functions?  Cheers, Jonathan.

quite a good idea, particularly, since we all have now learned that it is
non-trivial to write really efficiently.

However, I think "equiv" is not specific enough (could mean "equivalence of
arbitrary R objects").
Wouldn't  "setequiv" or "setequal" be better ?

((and would you provide (to R-core)  patches to
    src/library/base/R/sets.R and src/library/base/man/sets.Rd))

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  5 10:21:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 5 Jan 2000 10:21:24 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001051017030.10525-100000@auk.stats>

On Wed, 5 Jan 2000, Martin Maechler wrote:

>  On 4 Jan 2000, Peter Dalgaard BSA wrote:
>  > Watch:
>  > 
>  > > x<-1:50000
>  > > y<-x[order(runif(50000))]
>  > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
>  > > equiv<-function(x,y) 
>  > +     length(x<-unique(x))==length(y<-unique(y)) && 
>  > +     all(sort(x)==sort(y)) 
>  > > system.time(equiv2(x,y))
>  > [1] 3.10 0.02 3.00 0.00 0.00
>  > > system.time(equiv(x,y))
>  > [1] 0.77 0.00 1.00 0.00 0.00
> 
>     JonR> Yup -- that's much quicker!  To re-ask the original question,
>     JonR> would it be reasonable to include such a function along with the
>     JonR> other set functions?  Cheers, Jonathan.
> 
> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

Some of us knew that. What worries me a bit is that optimizing code for the
current R may not be a good idea. R currently spends a lot of its
time on garbage collection (30 to 50% on my profiling) and it is planned to 
alter the memory allocator real soon now.  When hashing of environments
was introduced it made a lot of difference to some code, and little to
others.  That's not to say that we should not optimize, but
trying hard may be a waste of time. (Says he having learnt the hard way
across S-PLUS versions.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan  5 12:10:19 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 5 Jan 2000 12:10:19 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001051145270.21562-100000@laplace>

On Wed, 5 Jan 2000, Martin Maechler wrote:

> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

And I've just noticed that Peter's ultra-quick sorting algorithm stumbles
over NAs:

"setequal" <- function(x,y)
  length(x<-unique(x))==length(y<-unique(y)) && all(sort(x)==sort(y))

"setequal2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

setequal(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal2(c(NA, 1:4), c(1:4, NA))	# TRUE

setequal(c(NA, 1:4), c(1:4, 5))		# FALSE plus warning message
setequal2(c(NA, 1:4), c(1:4, 5))	# FALSE

Putting na.last=TRUE in sort does not help, as then there is a missing
logical for the && following the call to all.  Might I suggest, in the
light of Brian's comments, that setequal2 is more in the spirit of the
other set functions?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Wed Jan  5 18:08:28 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Wed, 5 Jan 2000 19:08:28 +0100 (MET)
Subject: bug in glm.fit (PR#395)
Message-ID: <200001051808.TAA22156@pubhealth.ku.dk>

Dear R-team

There seems to be a bug in glm.fit - I got the following error message:

> > > + Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null
else glm.fit)(x = X, y = Y,
  
> > traceback()
[1] "names<-.default(*tmp*, value = ynames)"                                  
[2] "names<-(*tmp*, value = ynames)"                                          
[3] "(if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y, "      
[4] "    weights = weights, start = start, offset = offset, family = family, "
[5] "    control = control, intercept = attr(mt, \"intercept\") > 0)"         
[6] "glm(SKR.ein.aus ~ MWSQUAL + FAC.M1 + FAC.M2 + FAC.A1 + FAC.A2 + "        
[7] "    MLDR + TAGNR, family = binomial, data = daten[rows, ])"              


Debugging glm.fit I found the following: when some elements of the vector
`good' are FALSE then `w' has no more "full" length:

  w <- sqrt((weights * mu.eta.val^2)[good]/variance(mu)[good])

which leads to problems close to the end of the function:

  names(w) <- ynames

as `ynames' has "full" length.

The same problem is with:

  names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", nobs - 
        fit$rank))

as `fit$effects' has same length as `w'.

That's all I found out. I hope it helps.

I am sorry for not sending the data but as it is secret it would take some
effort to "disguise" it, so it that's not necessary I would be quite
grateful... 

Thanks, Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan  5 18:49:56 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 Jan 2000 13:49:56 -0500
Subject: anoncvs
Message-ID: <38739254.30002A77@bank-banque-canada.ca>

I'm trying to do

cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

and I get "authorization failed...rejected access" with the previously
advertised password (anoncvs). Has the access been changed or is anyone
else having this problem? I'm not very familiar with cvs so I may be
making some mistake.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan  5 19:00:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Jan 2000 13:00:42 -0600
Subject: network outage 1/9/2000 05:00 - 09:30 CST
Message-ID: <6rembwfin9.fsf@franz.stat.wisc.edu>

The University of Wisconsin - Madison has scheduled another period of
network down time for Sun, Jan 9, 2000, 05:00 - 09:30 local time
(2000/01/09 11:00 - 15:30 GMT).  This will affect the r-project.org,
omegahat.org and madisonlinux.org domains.  The primary nameservers
for those domains and some of the http servers will be inaccessible.

------- Start of forwarded message -------
To: cs-announce@cs.wisc.edu
Subject: campus/internet network outage 1/9/2000 05:00 - 09:30
Date: Wed, 05 Jan 2000 12:48:59 -0600

>From DoIT Network Engineering:

     OUTAGE REMINDER FOR 1/9/2000
     We have a major outage scheduled for this Sunday starting 5AM and 
     estimated end time of 9:30AM.
     
     Here's some details for those of you interested.
     1)  Upgrade Ethernet switch code across the entire backbone.
     2)  Upgrade ATM switch code across the entire backbone.
     3)  BIGMACC router will be getting a new chassis allowing it to become 
     "two" routers.  A code upgrade will be performed one of the BigMacc 
     routers.
     4)  All Routers will be receiving upgraded ATM interfaces.
     
     This outage will affect all campus users that need campus backbone and 
     internet access during this time period.  
     
     The length of the outage will vary for each customer and the whole 
     outage period will be needed.
     

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From 1hotbuy@4-charity.org  Wed Jan  5 19:05:26 2000
From: 1hotbuy@4-charity.org (1hotbuy@4-charity.org)
Date: Wed, 05 Jan 2000 19:05:26
Subject: stock idea dvdt
References: 0A2E82C38
Message-ID: <200001052338.PAA09097@romulus.netpage.com>

<HTML><FONT  SIZE=3 PTSIZE=10><B>Press Release</B><BR>
<BR>
Stockreporter Announces Investment Opinion on Digital Video Display Technology Corp.; Strong Buy Recommendation and Share Price Target of $6.00 in First Year <BR>
NEW YORK, Oct 21, 1999 (BUSINESS WIRE) -- Digital Video Display Technology Corp. (OTCBB:DVDT) received a strong buy recommendation today from Stockreporter, a leading European financial Internet publication at <A HREF="http://www.stockreporter.de">http://
<BR>
Stockreporter specializes in the coverage of micro caps and undervalued OTC and BB companies and is the first international analyst to cover DVDT and publish an investment opinion. Stockreporter very conservatively values DVDT stock at $6.00 per share in
Stockreporter has an extraordinary record of successful buy recommendations, with unusual share price appreciation following its coverage. Examples are: FutureLink Distribution (FLNK), Teltran International (TLTG) and Geotele.com Inc.(GEOL).<BR>
<BR>
Dennis C. Hass of Stockreporter commented on the recommendation: "DVDT represents an extraordinary investment opportunity! Buying its stock is not just investing in a business that is ready to experience outstanding success with a product line that will r
<BR>
For More Information on DVDT Visit:<BR>
<A HREF="http://www.dvdtinvestors.com">www.dvdtinvestors.com</A><BR>
<A HREF="http://www.market-info.com">www.market-info.com</A><BR>
<BR>
Copyright (C) 1999 Business Wire. All rights reserved.<BR>
Distributed via COMTEX. <BR>
CONTACT:     <BR>
Stockreporter.de, Hamburg, Germany<BR>
Mr. Dennis C. Hass, +49-172-4062621<BR>
Email:<A HREF="mail to:contact@stockreporter.de">contact@stockreporter.de</A><BR>
Homepage:<A HREF="www.stockreporter.de">www.stockreporter.de</A><BR>
WEB PAGE:<A HREF="http://www.businesswire.com">http://www.businesswire.com</A><BR>
GEOGRAPHY:NEW YORK INTERNATIONAL EUROPE<BR>
INDUSTRY CODE: INVESTMENT OPINION<BR>
Today's News On The Net - Business Wire's full file on the Internet<BR>
with Hyperlinks to your home page. <BR>
<B><BR>
Disclaimer:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>This publication contains forward-looking statements within the meaning of Section 27A of the Securities Act of 1933 and Section 21E of the Securities Exchange Act of 1934. The Company's actual results could differ materially
This message is sent in compliance of the new e-mail bill: SECTION 301, Paragraph (a)(2) (C) of S. 1618 <BR>
Sender: 4-you.com, 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004 <BR>
To be removed form this mailing list, simply reply with remove in subject line: <A HREF="mailto:4-charity@4-charity.org">4-charity@4-charity.org</A><BR>
</FONT><FONT  SIZE=3 PTSIZE=10><BR>
<B>Disclosure:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>4-you.com, Inc publishes information regarding selected companies involved in many different industries, which those interested in these companies may use as information relating to their interests or investments. Many compan
<A HREF="mailto:4-charity@4charity.org">mailto:4-charity@4-charity.org</A> , 4-you.com, Inc. 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004<BR>
</HTML>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  6 08:41:19 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Jan 2000 09:41:19 +0100 (MET)
Subject: anoncvs -- use rsync !
In-Reply-To: <38739254.30002A77@bank-banque-canada.ca>
References: <38739254.30002A77@bank-banque-canada.ca>
Message-ID: <14452.21807.441840.482333@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I'm trying to do cvs -d
    PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

    PaulG> and I get "authorization failed...rejected access" with the
    PaulG> previously advertised password (anoncvs). Has the access been
    PaulG> changed or is anyone else having this problem? I'm not very
    PaulG> familiar with cvs so I may be making some mistake.

hmm,  I thought we finally *didn't* allow anonymous cvs,
{one reason being the log files publicity?},

but rather recommend and advertize  rsync (which also works for CRAN, btw).

I have cron jobs calling shell scripts like

#---------------------------------------
RSYNC=/usr/local/bin/rsync

cd /usr/local/app/R/R-devel
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-devel .
cd /usr/local/app/R/R-release-patched
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-release-patched .
#---------------------------------------

rsync   is available in  Linux ("any newer distribution", probably),
or from

   ftp://samba.anu.edu.au/pub/rsync/

Excerpts from its README:

>> WHAT IS RSYNC?
>> --------------
>> 
>> rsync is a replacement for rcp that has many more features.
>> 
>> rsync uses the "rsync algorithm" which provides a very fast method for
>> bringing remote files into sync. It does this by sending just the
>> differences in the files across the link, without requiring that both
>> sets of files are present at one of the ends of the link beforehand.
>> At first glance this may seem impossible because the calculation of
>> diffs between two files normally requires local access to both
>> files. 
>> 
>> .....
>> 
>> RSYNC SERVERS
>> -------------
>> 
>> rsync can also talk to "rsync servers" which can provide anonymous or
>> authenticated rsync. See the rsyncd.conf(5) man page for details on how
>> to setup a rsync server. See the rsync(1) man page for info on how to
>> connect to a rsync server.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jan  6 09:19:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 6 Jan 2000 09:19:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001060904580.22904-100000@laplace>

Hi Martin,

> However, I think "equiv" is not specific enough (could mean "equivalence of
> arbitrary R objects").
> Wouldn't  "setequiv" or "setequal" be better ?
> 
> ((and would you provide (to R-core)  patches to
>     src/library/base/R/sets.R and src/library/base/man/sets.Rd))

I think, after all of the discussion, particularly Brian's helpful
interventions, the original function prevails, although Peter's suggested
sorting function was very instructive.

"setequal" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

The help function needs the following modifications:

\alias{setequal}

\description{Performs set union, intersection, difference, equality and
membership on two vectors.}

\usage{
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(x, y)
}

%% There appears to be an extra tab or other white space in the arguments
%% field.

\examples{
x <- sample(1:20, 10)
y <- sample(3:23, 7)
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(y, x)
}

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 14:28:46 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 08:28:46 -0600
Subject: anoncvs -- use rsync !
In-Reply-To: Martin Maechler's message of "Thu, 6 Jan 2000 09:41:19 +0100 (MET)"
References: <38739254.30002A77@bank-banque-canada.ca> <14452.21807.441840.482333@gargle.gargle.HOWL>
Message-ID: <6r7lhns28x.fsf@franz.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
>     PaulG> I'm trying to do cvs -d
>     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> 
>     PaulG> and I get "authorization failed...rejected access" with the
>     PaulG> previously advertised password (anoncvs). Has the access been
>     PaulG> changed or is anyone else having this problem? I'm not very
>     PaulG> familiar with cvs so I may be making some mistake.
> 
> hmm,  I thought we finally *didn't* allow anonymous cvs,
> {one reason being the log files publicity?},
> 
> but rather recommend and advertize  rsync (which also works for CRAN, btw).

We were providing anonymous cvs access in addition to anonymous rsync
access but now the configuration for the anonymous pserver account
seems to be botched up.  I don't know enough about the anonymous cvs
setup to fix it right now and don't have time to learn about it.  If
Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
fixed.  Otherwise I recommend we discontinue anonymous cvs.  

Most everything people want from anonymous cvs can be accomplished
much more cleanly with anonymous rsync.  The only advantages of
anonymous cvs are for people who do want to read the log files or want
to check out copies of earlier versions.

Since any checkouts by the anonymous user must be able to update the
history files, the anonymous CVS tree is actually a copy of the
production CVS tree.  

I would recommend using anonymous rsync.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@stat.berkeley.edu  Thu Jan  6 16:27:50 2000
From: duncan@stat.berkeley.edu (Duncan Temple Lang)
Date: Thu, 6 Jan 2000 08:27:50 -0800 (PST)
Subject: anoncvs -- use rsync !
In-Reply-To: <6r7lhns28x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>



On 6 Jan 2000, Douglas Bates wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> > 
> >     PaulG> I'm trying to do cvs -d
> >     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> > 
> >     PaulG> and I get "authorization failed...rejected access" with the
> >     PaulG> previously advertised password (anoncvs). Has the access been
> >     PaulG> changed or is anyone else having this problem? I'm not very
> >     PaulG> familiar with cvs so I may be making some mistake.
> > 
> > hmm,  I thought we finally *didn't* allow anonymous cvs,
> > {one reason being the log files publicity?},
> > 
> > but rather recommend and advertize  rsync (which also works for CRAN, btw).
> 
> We were providing anonymous cvs access in addition to anonymous rsync
> access but now the configuration for the anonymous pserver account
> seems to be botched up.  I don't know enough about the anonymous cvs
> setup to fix it right now and don't have time to learn about it.  If
> Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
> fixed.  Otherwise I recommend we discontinue anonymous cvs.  
> 
> Most everything people want from anonymous cvs can be accomplished
> much more cleanly with anonymous rsync.  The only advantages of
> anonymous cvs are for people who do want to read the log files or want
> to check out copies of earlier versions.
> 
> Since any checkouts by the anonymous user must be able to update the
> history files, the anonymous CVS tree is actually a copy of the
> production CVS tree.  
> 
> I would recommend using anonymous rsync.



I just tried the login  and checkout commands 
(from an account on a machine that knows nothing about
franz/cvs.r-project.org) and they seem to be working fine.

Did somebody fix things? If not, shall I remove the
anonymous CVS access and we only allow rsync.

D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:35:22 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:35:22 -0800
Subject: anoncvs -- use rsync !
In-Reply-To: Duncan Temple Lang's message of "Thu, 6 Jan 2000 08:27:50 -0800 (PST)"
References: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>
Message-ID: <87yaa3xinp.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@stat.berkeley.edu> writes:

    DTL> I just tried the login and checkout commands (from an account
    DTL> on a machine that knows nothing about
    DTL> franz/cvs.r-project.org) and they seem to be working fine.

    DTL> Did somebody fix things? 

I did.

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:33:36 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:33:36 -0800
Subject: anoncvs for R should work again
Message-ID: <871z7vyxb3.fsf@alpha.cfas.washington.edu>



anoncvs for R should work again.  If you use it, please try it.  If
you use it and don't particularly want it to go away (rsync gets you
the source w/o the logs, but if you particularly want the logs and the
ability to create diffs between revisions, like I sometimes want to
do...), you might say something.

If you don't know what I'm talking about, it's probably not
important. 

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:25:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:25:02 -0600
Subject: Are blank fields allowed in SAS data sets?
Message-ID: <6r4scq941d.fsf@franz.stat.wisc.edu>

Saikat DebRoy and I have been working on an R package that, among
other things, will read SAS data libraries in the XPORT format.  Even
though a SAS data set is of a fairly simple structure, it is a
challenge to write code to read the libraries "properly".  In fact, I
am beginning to think that file format is not well-defined.

Here is the situation:  

  - a SAS data set is a table.  The columns can be numeric (in the
    XPORT format the only numeric format allowed is the IBM mainframe
    double precision format) or character strings.  In a character
    column, all the strings are blank-padded to the same length and
    that length is included in the header information.  There is no
    terminator character for strings.  There is no record terminator
    character.
  - a SAS library file can contain more than one table.
  - the header information for each table includes the number of
    columns and the format of each column but does _not_ include the
    number of rows.  (Why not? Remember that SAS was developed at a
    time when any large amount of data was stored on punched cards or
    magnetic tape.  SAS functions as a data filter, for the most
    part.  You don't know how many rows you have until you get to the
    end and then you can't go back and change the beginning because of
    the way magnetic tape drives work.  Of course, the relevance of
    these considerations to computing resources in the year 2000 is
    questionable.) 

So how do you know when you have reached the end of one data set and
started another?  SAS always works in blocks of 80 bytes.  If the last
record in a table does not completely fill an 80 byte block, the
remainder of the block is blank-padded.  The next table will begin
with 80 bytes that must be exactly
"HEADER RECORD*******MEMBER  HEADER RECORD!!!!!!!000000000000000001600000000140  "
except on certain VAX/VMS computers where the 140 at the end is 136.

I ran into a situation where the data were 484 rows of 8 numeric
columns.  The total length of each record is 64 bytes so the data
proper occupies 30976 bytes, not counting the headers.  This is a
total of 387 complete 80 byte blocks with 16 bytes left over.  That
last block is padded with 64 blanks.

So how do we know that these 64 blanks are not another data record?
In the case of numeric data, the particular number corresponding to 8
blanks (using the IBM mainframe floating point format, not the IEEE
format) is

> Pheno[745,]
           INDIV         TIME         DOSE       WEIGHT         CONC
745 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40
          NEWSUB     APGARLOW         TLAG
745 3.687825e-40 3.687825e-40 3.687825e-40

We can probably employ some heuristics and say that this is not a
common value so we guess that the 64 blanks are padding and not
another data record.  

But what if they had been 8 character fields, each of width 8 bytes?
Is it possible to distinguish between a blank record and blank
padding?  I can't see that it is possible.  Is there some restriction
in SAS that says you can't have a record in which all the fields are
blank?

One could pass this off as of little interest to the R community
except that this format is now a "standard" that has been adopted by
the United States Food and Drug Administration (FDA).  See
       http://www.sas.com/software/industry/pht/fda/index.html

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:51:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:51:14 -0600
Subject: Are blank fields allowed in SAS data sets?
In-Reply-To: Douglas Bates's message of "06 Jan 2000 17:25:02 -0600"
References: <6r4scq941d.fsf@franz.stat.wisc.edu>
Message-ID: <6r1z7u92tp.fsf@franz.stat.wisc.edu>

Sorry to respond to my own post but I did a little more searching in
the Q&A document at SAS Institute regarding the FDA's adoption of the
SAS XPORT format and found they do address the issue I mentioned
and they have a solution.  The solution is "Don't do that!".  :-)

Here is the direct quote from
	http://www.sas.com/software/industry/pht/fda/faq.html

Q.     Is it difficult to detect the end of file when reading a data set stored in
       XPORT transport format? 

   A.  Under certain circumstances it is difficult to detect the end of file
       when reading a data set in XPORT transport format. Below is an
       explanation and a suggested fix that will alleviate the problem. 

       The problem occurs when the record length of a file is less than 80
       characters. The transport format writes 80 byte records. The last
       observation may not fill up an 80 byte record. When this happens the
       SAS System will pad the 80 byte record with blanks. When reading a
       transport file, the SAS System treats trailing blanks as insignificant. If
       the records are shorter than 80 bytes and if the last record written
       contains nothing but blank characters then the file comes up one
       record short. 

       The key to avoiding this potential problem is to undertake preventative
       measures described below. 

       One preventative measure could be to make sure that the
       circumstances do not exist. Avoid creating a data set where: 

         1.The observation length (the sum of the variable sizes) is less than
           80 and 
         2.The variables are all character and 
         3.The last record has all blank values. 

       Another preventative measure could be to save original data in
       transport format, extract new data from the transport file, then run
       PROC COMPARE to compare the original data to the new data.
       Output from PROC COMPARE can validate that the new data
       extracted from the transport file is identical to the original
       data. 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jan 10 01:40:37 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Mon, 10 Jan 2000 02:40:37 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
Message-ID: <200001100140.CAA20927@pubhealth.ku.dk>

Depending on the setting of par()$usr, 
the 'at' setting in mtext(.., adj=0, outer=T) may cause the
text to appear in an anomalous position (e. g. in the first
instance below, at the left of the plot region rather than
at 'at=0' in the figure region), or the text may not appear
at all.

If one does not set the 'at' parameter the text appears
(with 'adj=0') on the far left of the plot region.  I assume
this is also anomalous; at all events it is the behaviour
that I wished to circumvent.

The function plot.test() demonstrates the behaviour:

plot.test <-
function(xval=0:4, pos=NULL){
oldpar<-par(oma=c(2,0,0,0))
on.exit(par(oldpar))
plot(xval,xval)
if(is.null(pos))pos<-min(xval)
print(pos)
print(par()$usr)
mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
}

> plot.test(xval=0:4)  # "Outer text appears on left of the figure region
[1] 0
[1] -0.16  4.16 -0.16  4.16
> plot.test(xval=20:24)  # "Outer text does not appear at all
[1] 20
[1] 19.84 24.16 19.84 24.16
> # Check that at=0 does not work
> plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
[1] 0
[1] 19.84 24.16 19.84 24.16
>


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 10:53:50 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101053.LAA25066@pubhealth.ku.dk>

Dear R-team

As I didn't get any answer to my bug-report last week I have taken the
effort and extracted a minimal data set from my data (see below) where the
following bug occurs:

> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  


"bugdata" <-
structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
-0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
-0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
-0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
    FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
    -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
    -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
    0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
    -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
    0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
    -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
    0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
    1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
    0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
"FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
), row.names = c("139", "140", "141", "142", "143", "144", "145", 
"146", "147", "148", "149", "150", "151", "152", "153", "154", 
"155", "156", "157", "158"), class = "data.frame")


I hope, this makes it possible to find the bug.

Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:lqs, package:MASS, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jan 10 11:38:23 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 12:38:23 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101138.MAA25983@pubhealth.ku.dk>

>>>>> "PeHo" == Peter Holzer <holzer@stat.math.ethz.ch> writes:

    PeHo> Dear R-team As I didn't get any answer to my bug-report last week
    PeHo> I have taken the effort and extracted a minimal data set from my
    PeHo> data (see below) where the following bug occurs:

    >> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action =
    >> na.omit)
(the  ", na.action = na.omit" doesn't matter since the examples hasn't got
 any NA)

   >> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector

   >> In addition: Warning messages: 
   >> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

So, "7:" really says that the Algorithm didn't converge.

Of course, there *is* a bug, namely, ending in such an (unhelpful) error
instead of doing something better.

If I run this example through S-plus 5.1 (Linux),
it doesn't converge either,
but does return a (possibly completely wrong ??) result, and only warns you
with one line that you shouldn't overlook :

>> S> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)

>> Call:
>> glm(formula = SKR.ein.aus ~ ., family = binomial, data = bugdata)
>> 
>> Coefficients:
>>  (Intercept)    TAGNR    FAC.A1   FAC.A2      MLDR   MWSQUAL    FAC.M1 
>>    -5022.282 1.561878 -169.0165 135.3793 0.6264029 -143.0841 -115.7853
>> 
>>     FAC.M2 
>>  -233.0438
>> 
>> Degrees of Freedom: 20 Total; 12 Residual
>> Residual Deviance: 0.674096 
>> There were 12 warnings (use warnings() to see them)

If you are careful enough to *read* the last line,
and then type warnings(), you see

>> Warning messages --
>> 1: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 2: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 3: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 4: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 5: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 6: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 7: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 8: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 9: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 10: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 11: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 12: linear convergence not obtained in  10  iterations. in: glm.fitter(x = X,
>> 	y = Y, w = w, start = start, offset = offset, family = family,  ...

((which *is* slightly better than R's warnings...))

    PeHo> I hope, this makes it possible to find the bug.

Yes, thanks a lot, Peter!

Tracing the iterations is really the good idea here:
glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, maxit= 30, trace=TRUE)

gives

    Deviance = 15.39188 Iterations - 1 
    Deviance = 13.67612 Iterations - 2 
    Deviance = 12.02264 Iterations - 3 
    Deviance = 10.41495 Iterations - 4 
    Deviance = 9.021518 Iterations - 5 
    Deviance = 8.260037 Iterations - 6 
    Deviance = 7.468748 Iterations - 7 
    Deviance = 4.597021 Iterations - 8 
    Deviance = 1.523395 Iterations - 9 
    Deviance = 0.5131087 Iterations - 10 
    Deviance = 0.1843927 Iterations - 11 
    Deviance = 0.06750712 Iterations - 12 
    Deviance = 0.0248701 Iterations - 13 
    Deviance = 0.00919058 Iterations - 14 
    Deviance = 0.003411904 Iterations - 15 
    Deviance = 0.001281922 Iterations - 16 
    Deviance = 0.0004972102 Iterations - 17 
    Deviance = 0.0002082669 Iterations - 18 
    Deviance = 0.0001069153 Iterations - 19 
    Deviance = 6.777993e-05 Iterations - 20 
    Deviance = 5.338077e-05 Iterations - 21 
    Deviance = 4.808323e-05 Iterations - 22 
    Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
    In addition: There were 18 warnings (use warnings() to see them)

(doing the same in S-plus also shows yo that the deviance goes to 0
 and no convergence is reached).

------
Now, the "real" glm()ers are called for...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 12:33:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 13:33:13 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101233.NAA27379@pubhealth.ku.dk>

> Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
> From: holzer@stat.math.ethz.ch
> 
> Dear R-team
> 
> As I didn't get any answer to my bug-report last week I have taken the
> effort and extracted a minimal data set from my data (see below) where the
> following bug occurs:
> 
> > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
same length as the vector
> In addition: Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> 
> 
> "bugdata" <-
> structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
> 16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
> 0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
> -0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
> 0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
> -0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
> 0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
> -0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
> 0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
> 0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
> 9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
> 9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
> 1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
>     FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
>     -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
>     -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
>     0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
>     -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
>     0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
>     -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
>     0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
>     1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
>     0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
> "FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
> ), row.names = c("139", "140", "141", "142", "143", "144", "145", 
> "146", "147", "148", "149", "150", "151", "152", "153", "154", 
> "155", "156", "157", "158"), class = "data.frame")
> 
> 
> I hope, this makes it possible to find the bug.

Indeed, thank you (we needed an example). Alter

    names(w) <- ynames
    
to
    names(w) <- ynames[good]

and

    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))

to 
    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))

as the vector w is dropping observations with fitted probs 0 or 1.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Jan 10 13:45:52 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 10 Jan 2000 13:45:52 +0000 (GMT)
Subject: sets again (trivial)
Message-ID: <Pine.GSO.4.20.0001101339310.25523-100000@laplace>

Hi Brian -- While on the subjects of sets, as we now have an is.element
function, would it be tidier to alias %in% to this rather than leave it
dangling?  The help for %in% could be moved from match.Rd to
sets.Rd.  Just a thought.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 17:07:03 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 18:07:03 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101707.SAA01446@pubhealth.ku.dk>

Prof Brian Ripley writes:
 > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
 > > From: holzer@stat.math.ethz.ch
 > > 
 > > Dear R-team
 > > 
 > > As I didn't get any answer to my bug-report last week I have taken the
 > > effort and extracted a minimal data set from my data (see below) where the
 > > following bug occurs:
 > > 
 > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
 > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
 > same length as the vector
> Indeed, thank you (we needed an example). Alter
 > 
 >     names(w) <- ynames
 >     
 > to
 >     names(w) <- ynames[good]
 > 
 > and
 > 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
 > 
 > to 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
 > 
 > as the vector w is dropping observations with fitted probs 0 or 1.

This is actually a solution I thought of as well. However it has the
disadvantage that plot (and other functions?) gets problems:

> fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
glm.fit.null else glm.fit)(x = X, y = Y, 
.
.
.
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> plot(fit.tst)
Warning messages: 
1: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
2: longer object length
	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
3: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
4: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
5: longer object length
	is not a multiple of shorter object length in: e/(s * (1 - h)) 
6: longer object length
	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 

Maybe there is another solution?

Nevertheless, thanks for the help!

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://www.stat.math.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 17:16:46 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 18:16:46 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101716.SAA01550@pubhealth.ku.dk>

On Mon, 10 Jan 2000, Peter Holzer wrote:

> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> > plot(fit.tst)

We already know that plot.lm does not work correctly with glm objects with
zero weights.  I am not at all sure it should be used for glm objects
(except Gaussian ones).  However, I think you missed Martin M's point.
This behaviour indicates an inappropriate model, one with separation
of the groups, and all the linear approximations needed for a local lm
model are inappropriate.

We also know that the whole glm area needs a long hard look.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Tue Jan 11 01:53:58 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Tue, 11 Jan 2000 02:53:58 +0100 (MET)
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
Message-ID: <200001110153.CAA03462@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 0.90.0
OS: Linux on Thinkpad (pentium) and desktop (K6)
Submission from: (NULL) (128.32.251.234)


When I create a boxplot, and then try to overlay a lowess fit or just the
points, 
the points do not appear in the highest level and the lowess curve does not
reach 
the highest level. However, if I add one to each of the models, the problem is
solved.
I tried this on two different machines, a laptop and a desktop both running 
Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian

> a
  [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
 [11] -0.518 -0.731  0.074 -0.731  0.286  0.206 -0.257  0.608 -0.038 -0.291
 [21] -0.274 -0.274  0.402 -0.325 -0.343 -0.012  0.359 -0.038  0.675 -0.497
 [31]  0.026  0.608 -0.325  0.109  0.507  0.484 -0.149  0.368  0.227  0.086
 [41] -0.540  0.377 -0.149 -0.038  0.154  0.573  0.428  0.852  0.164  0.744
 [51]  0.061  0.080 -0.354  0.003  0.522 -0.508 -0.613 -0.271 -0.245 -0.080
 [61] -0.271 -0.651  0.265 -0.613  0.666  0.382  0.061 -0.542  0.510 -0.038
 [71] -0.443  0.042  0.764 -0.017 -0.148  0.023 -0.613 -0.148  0.354 -0.412
 [81]  0.522  0.169 -0.220  0.080  0.080  0.448  0.116 -0.059  0.061  0.185
 [91] -0.325 -0.038 -0.220 -0.325  0.151  0.903 -0.059  0.265  0.250  0.250
[101]  0.161  0.502  0.684  0.222  0.063 -0.414  0.222  0.028 -0.260 -0.046
[111] -0.360 -0.046 -0.260 -0.169 -0.169 -0.009  0.192 -0.046  0.028  0.222
[121]  0.129  0.502  0.097  0.306  0.384 -0.009 -0.532  0.028 -0.086 -0.260
[131] -0.086 -0.213 -0.471 -0.820 -0.414  0.222  0.097  0.251 -0.009  0.279
[141] -0.009  0.279 -0.260 -0.086  0.063  0.161 -0.009  0.524  0.063 -0.665
[151]  0.127  0.575  0.127  0.287  0.249 -0.301  0.287  0.127 -0.176 -0.013
[161] -0.301  0.082 -0.176 -0.370 -0.118 -0.064  0.210 -0.064  0.082 -0.064
[171]  0.169  0.546  0.036  0.392  0.323 -0.064 -0.706  0.127 -0.118 -0.236
[181] -0.013 -0.301 -0.370 -0.812 -0.524  0.210  0.392  0.036 -0.176  0.249
[191]  0.082  0.036 -0.301 -0.301 -0.013  0.127  0.127  0.752  0.127 -0.301
[201]  0.108  0.453  0.108  0.166  0.220 -0.327  0.048  0.271 -0.240 -0.086
[211] -0.422 -0.017  0.048 -0.327 -0.327 -0.086  0.166 -0.160  0.108 -0.086
[221]  0.166  0.571 -0.086  0.366  0.320 -0.017 -0.645  0.166 -0.240 -0.017
[231] -0.017 -0.240 -0.422 -0.240 -0.645  0.048  0.411 -0.017 -0.240  0.271
[241]  0.320 -0.017 -0.327 -0.160  0.220  0.108 -0.086  0.676  0.108  0.048
[251]  0.254 -0.188 -0.083  0.254  0.387 -0.188  0.012  0.387 -0.306 -0.306
[261] -0.594  0.012  0.012 -0.776 -0.440 -0.188  0.254 -0.083 -0.440 -0.188
[271]  0.323  0.448  0.099  0.505  0.323 -0.083 -0.594  0.254 -0.188 -0.083
[281]  0.012 -0.306 -0.440 -0.083 -0.306  0.012  0.448  0.099 -0.188  0.254
[291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> b
  [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
 [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
 [75] 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4
[112] 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1
[149] 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3
[186] 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3
[223] 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4
[260] 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4
[297] 4 1 0 0
> boxplot(a~b)
> lines(lowess(a~b))
> points(a~b)
> boxplot(a~b)
> lines(lowess(a~b+1))
> points(a~b+1)
> 

Thanks for your consideration and thanks a million for all the work. R is a
pleasure 
to work with. 

Best in the new year,
adrian custer
acuster@nature.berkeley.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 11 20:06:24 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Jan 2000 15:06:24 -0500
Subject: Figure margins too large
Message-ID: <387B8D40.3B09961E@bank-banque-canada.ca>

I seem to remember an error like this being mentioned before, but if it wasn't:

> zz <- density(rnorm(100))
> plot(zz)
Error in plot.new() : Figure margins too large
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Tue Jan 11 21:00:04 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Tue, 11 Jan 2000 22:00:04 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112100.WAA13500@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: .90.1
OS: Linux+NT
Submission from: (NULL) (141.211.66.172)


In the following example, the deviance residuals are not correctly calculated:

> dead <- c(2,8,15,23,27)
> y <- cbind(dead,30-dead)
> conc <- 0:4
> g <- glm(y ~ conc,family=binomial)
> residuals(g)
[1] -0.451015  0.359696       NaN  0.064302 -0.204493
Warning message: 
NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

The third residual should be zero.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 11 21:18:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jan 2000 21:18:09 +0000 (GMT)
Subject: deviance residuals in binomial GLM (PR#399)
In-Reply-To: <200001112100.WAA13500@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001112115350.20286-100000@auk.stats>

On Tue, 11 Jan 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: .90.1
> OS: Linux+NT
> Submission from: (NULL) (141.211.66.172)
> 
> 
> In the following example, the deviance residuals are not correctly calculated:
> 
> > dead <- c(2,8,15,23,27)
> > y <- cbind(dead,30-dead)
> > conc <- 0:4
> > g <- glm(y ~ conc,family=binomial)
> > residuals(g)
> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
> Warning message: 
> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 
> 
> The third residual should be zero.

Yes, and it is computed as sqrt(-5.169943e-21) on my machine. I have
committed a fix for 0.99.0


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jan 11 21:25:07 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 Jan 2000 22:25:07 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112125.WAA13696@pubhealth.ku.dk>

>>>>> "faraway" == faraway  <faraway@umich.edu> writes:

    faraway> Full_Name: Julian Faraway
    faraway> Version: .90.1
    faraway> OS: Linux+NT
    faraway> Submission from: (NULL) (141.211.66.172)


    faraway> In the following example, the deviance residuals are not
    faraway> correctly calculated:

    >> dead <- c(2,8,15,23,27)
    >> y <- cbind(dead,30-dead)
    >> conc <- 0:4
    >> g <- glm(y ~ conc,family=binomial)
    >> residuals(g)
    faraway> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
    faraway> Warning message: 
    faraway> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

    faraway> The third residual should be zero.

yes, this is a bug.

Diagnosis: 
    A case of cancelation which makes the argument of sqrt(.) 
    negative (~= -5e-21) instead of zero.


The fix is
in  src/library/base/R/glm.R
replace
	       d.res <- sqrt((object$family$dev.resids)(y, mu, wts))
by
	       d.res <- sqrt(pmax(0,(object$family$dev.resids)(y, mu, wts)))

Thanks a lot for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 12 07:45:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 12 Jan 2000 08:45:27 +0100 (MET)
Subject: Figure margins too large
In-Reply-To: <387B8D40.3B09961E@bank-banque-canada.ca>
References: <387B8D40.3B09961E@bank-banque-canada.ca>
Message-ID: <14460.12567.177238.43729@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I seem to remember an error like this being mentioned before,
    PaulG> but if it wasn't:

    >> zz <- density(rnorm(100))
    >> plot(zz)
    PaulG> Error in plot.new() : Figure margins too large

    >> version
    PaulG> _
    PaulG> platform sparc-sun-solaris2.6
    PaulG> arch     sparc
    PaulG> os       solaris2.6
    PaulG> system   sparc, solaris2.6
    PaulG> status
    PaulG> major    0
    PaulG> minor    90.1
    PaulG> year     1999
    PaulG> month    December
    PaulG> day      15
    PaulG> language R

It means what it says : The figure margins are too large
and there's no room for the plot at all.

It must be that you have 
  - large fonts {large par("cex"), or large "rastersize" with postscript ...)
and/or
  - large  par("mar")
and/or
  - too small device.

I can reproduce the error message with
 
  postscript(file="/dev/null", height= 1)
  plot(1)

More "fun" is to

     x11()
     plot(1)
and resize the device window {repeatedly calling  plot(1)}
until the plot outline isn't drawn any more.
At the point you get (appropriately) the above error message.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:03:50 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:03:50 +0100
Subject: functions for flat file import/export + utilities
Message-ID: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>

This is a multi-part message in MIME format.

------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id SAA07714



Dear R-Developers,

please find attached a set of drafted functions for flat file import and
export, partially extending existing functions, partially completely writ=
ten
as new code.
I thought you might be interested in those functions and the accompanying
utilities for padding and trimming.

Main features are

- supports several formats, i.e. fixed width and CSV (with one exception)
- supports templates describing relevant features of the flat file data,
including attributes of data.frame columns, storage.mode etc.
- special handling of factors and logicals
- handling of special characters like decimal seperator and escaped
quotation mark
- no perl and no seperator needed for fixed width format (and no problems
with quotation marks)
- reading fixed width format is based on simple function read.char.cols()=
,
which can be implemented more memory efficient in C

However, these functions are written from the perspective of a
non-R-developer, of course one could do it better. Also I don't know if i=
t
is a good idea traing to keep some compatibility (and naming) to
read.table() and write.table(), or if it is better to optimize new soluti=
ons
with new naming. I have done some testing, but of course there may be bug=
s
in it.

Having said this I would appreciate any feedback, criticisms, suggestions
for improvements, ...
Regards


--
Dr. Jens Oehlschl=E4gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M=FCnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: application/octet-stream;
	name="flatfile.r"
Content-Disposition: attachment;
	filename="flatfile.r"
Content-Transfer-Encoding: base64

IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgVGhpcyBpcyBhIGRyYWZ0IGZvciBhIHN1aXRlIG9mIFIg
ZnVuY3Rpb25zIGZvciBpbnRlcmZhY2luZyBmbGF0IGZpbGVzCiMgaW5jbHVkaW5nIHV0aWxpdGll
cyBmb3Igc3RyaW5nIGhhbmRsaW5nCiMgKEdOVSkgQ29weXJpZ2h0IE1EIEZBQ1RPUlksIEplbnMg
T2VobHNjaGyEZ2VsLUFraXlvc2hpIChKT0EpCiMgQ3JlYXRlZCAgICAgMTIuMS4yMDAwCiMgTGFz
dCBjaGFuZ2UgMTIuMS4yMDAwCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiMjIGdlbmVyYWwgc3Ry
YXRlZ3kgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIwojIHdyaXRlIGZ1bmN0aW9ucyAKIyAgIHRha2UgYSBkYXRhLmZyYW1lIFthbmQgc3Bl
Y2lmaWNhdGlvbnNdCiMgICB3cml0ZSBhIGZpbGUgYXMgc2lkZSBlZmZlY3QKIyAgIHJldHVybiBh
IHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIHdyaXR0ZW4gZmlsZQojICAgICBpbmNsdWRpbmcgc3Rv
cmFnZS5tb2RlIGFuZCBhdHRyaWJ1dGVzIGZvciBlYWNoIGNvbHVtbgojICAgICBzbyB0aGF0IHJl
aW1wb3J0aW5nIHRoZSBmaWxlIHVzaW5nIHRoZSB0ZW1wbGF0ZSBnaXZlcyBhbiBpZC4gZGF0YS5m
cmFtZQojICAgICAoZXhjZXB0IGZvciBsb3NzIG9mIHByZWNpc2lvbiwgZGVwZW5kaW5nIG9uIGRp
Z2l0cyBpbnZvbHZlZCkKIwojIHJlYWQgZnVuY3Rpb25zIAojICAgdGFrZSBhIHRlbXBsYXRlIGFu
ZC9vciBzcGVjaWZpY2F0aW9ucwojICAgcmV0dXJuIGEgZGF0YS5mcmFtZQojICAgb3B0aW9uYWxs
eSB3aXRoIGEgdGVtcGxhdGUgYXMgYW4gYXR0cmlidXRlCiMKIyBsb2dpY2FscyBhbmQgZmFjdG9y
cyByZWNlaXZlIHNwZWNpYWwgdHJlYXRtZW50CgoKIyMgaGllcmFyY2h5IG9mIGZ1bmN0aW9ucyAj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBy
ZWFkLmNoYXIuY29scygpICAgZXh0cmFjdGluZyBjaGFyYWN0ZXIgY29sdW1ucyBmcm9tIGZsYXQg
ZmlsZQojICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgcHVyZSBSLCBzaG91bGQgdXNlIEMt
ZnVuY3Rpb24gbGF0ZXIgCiMgICAgICAgICAgICAgICAgICAgIHRvIHJlZHVjZSBtZW1vcnkgcmVx
dWlyZW1lbnRzIGJ5IGZhY3RvciAyCiMKIyAgIHdyaXRlLnRhYmxlKCkgICAgZ2VuZXJhbCwgcmV0
dXJuaW5nIGEgY2xhc3MgJ3RlbXBsYXRlJyBvYmplY3QKIyAgICAgd3JpdGUuc3ZzKCkgICAgd3Jh
cHBlciBmdW5jdGlvbiBvZiB3cml0ZS50YWJsZSgpIGZvciBzZXBlcmF0ZWQgdmFsdWUgZm9ybWF0
CiMgICAgIHdyaXRlLmZpeCgpICAgIHdyYXBwZXIgZnVuY3Rpb24gb2Ygd3JpdGUudGFibGUoKSBm
b3IgZml4ZWQgd2lkdGggZm9ybWF0CiMgCiMgICByZWFkLnRhYmxlKCkgICAgIGdlbmVyYWwsIHRh
a2luZyBzcGVjaWZpY2F0aW9ucwojICAgICByZWFkLnN2cygpICAgICB3cmFwcGVyIGZ1bmN0aW9u
IG9mIHJlYWQudGFibGUoKSBmb3Igc2VwZXJhdGVkIHZhbHVlIGZvcm1hdAojICAgICByZWFkLmZp
eCgpICAgICB3cmFwcGVyIGZ1bmN0aW9uIG9mIHJlYWQudGFibGUoKSBmb3IgZml4ZWQgd2lkdGgg
Zm9ybWF0CiMgIAojICAgICByZWFkLmZ3ZigpICAgICBsZXNzIG1lbW9yeSBjb25zdW1pbmcgYWx0
ZXJuYXRpdmUgdG8gcmVhZC5maXgoKQojICAgICAgICAgICAgICAgICAgICBhcyBsb25nIGFzIHJl
YWQuY2hhci5jb2xzIGhhc24ndCBzcGVjaWFsIEMtZnVuY3Rpb24uCiMgICAgICAgICAgICAgICAg
ICAgIEhvd2V2ZXIgcmVhZC5md2YoKSBuZWVkcyBwZWFybCwgdGhlIGRhdGEgbXVzdCBub3QgY29u
dGFpbiBzZXA9LAojICAgICAgICAgICAgICAgICAgICBpdCBwcm92aWRlcyBubyByZWxpYWJsZSBo
YW5kbGluZyBvZiBxdW90YXRpb24gbWFya3MKIyAgICAgICAgICAgICAgICAgICAgKGhhc24ndCBi
ZWVuIGFkYXB0ZWQgeWV0KQojICAKIyAgICAgICByZWFkLnRlbXBsYXRlKCkgICBmb3IgZWFzeSAo
cmUpaW1wb3J0IG9mIEFTQ0lJIGRhdGEgCiMgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lm
aWVkIHZpYSBhIHRlbXBsYXRlIG9iamVjdAojICAgICAgIHdyaXRlLnRlbXBsYXRlKCkgIGZvciBl
YXN5IChyZSlleHBvcnQgb2YgQVNDSUkgZGF0YSAKIyAgICAgICAgICAgICAgICAgICAgICAgICBz
cGVjaWZpZWQgdmlhIGEgdGVtcGxhdGUgb2JqZWN0CiMKIyAgICAgICBwcmludC50ZW1wbGF0ZSgp
ICBzaG93cyB0ZW1wbGF0ZSBzcGVjaWZpY2F0aW9ucwojICAKIyAgICAgICAgIHJlYWQoKSAgICAg
ICAgIHBlcmhhcHMgYSBnZW5lcmljIGZ1bmN0aW9uOiBkZiA8LSByZWFkKHRlbXBsYXRlKQojICAg
ICAgICAgd3JpdGUoKSAgICAgICAgcGVyaGFwcyBhIGdlbmVyaWMgZnVuY3Rpb246IHdyaXRlKHRl
bXBsYXRlLCBkZikKIwojIFVUSUxJVElFUzogcGFkKCk7IHJwYWQoKSwgbHBhZCgpLCB0cmltKCks
IHJ0cmltKCksIGx0cmltKCksIHVucXVvdGF0ZSgpCiMKIyBERU1POiBkZW1vLnRlbXBsYXRlKGZp
bGUgPSB0ZW1wZmlsZSgpKQoKCiMjIHRlbXBsYXRlIGRlZmluaXRpb24gIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojICAgdGVtcGxhdGUgPC0g
c3RydWN0dXJlKAojICAgICBsaXN0KAojICAgICAsIGZpbGUgPSBmaWxlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiMgICAgICwgZW9s
ID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUg
KGNoYXJhY3RlcikKIyAgICAgLCBzZXAgPSBzZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQojICAgICAsIGRlYy5zZXAgPSBkZWMu
c2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIp
CiMgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChjaGFyYWN0ZXIgdmVjdG9yKQoj
ICAgICAsIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsgICAgICAgICAgICAgICAgICAj
IHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiPiBpbiBDU1YgCiMgICAgICwgZXNjYXBlZC5x
dW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgICMgcGVyIGZpbGUgKGNoYXJh
Y3RlciksIGUuZy4gPCIiPiBpbiBDU1YKIyAgICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRp
bmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNhbCBvciBjaGFyYWN0ZXIgdmVjdG9yKQojICAgICAs
IGZhY3RvcnMgPSBmYWN0b3JzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBm
aWxlLCB3ZXRoZXIgZmFjdG9ycyBpbiBmaWxlIGFyZSAnbGV2ZWxzJyBvciAnY29kZXMnIChjaGFy
YWN0ZXIpCiMgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5uYW1lcy5sb2MgICAgICAgICAgICAg
ICAgICAgICMgcGVyIGZpbGUsIGNvbG5vIG9mIHJvd25hbWVzLCAwID0gbm8gcm93Lm5hbWVzIGlu
IGZpbGUgKGludGVnZXIpCiMgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1l
cyAobG9naWNhbCkKIyAgICAgLCBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRlICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZQojICAgICAsIGNvbC5uYW1lcyA9IGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIGluY2x1ZGluZyBjb3JuZXIubmFt
ZSAoY2hhcmFjdGVyIHZlY3RvcikKIyAgICAgLCBxdW90ZSA9IHF1b3RlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90
ZWQgKGxvZ2ljYWwgdmVjdG9yKQojICAgICAsIHN0b3JhZ2UubW9kZSA9IHN0b3JhZ2UubW9kZSAg
ICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChjaGFyYWN0ZXIgdmVjdG9yKQojICAg
ICAsIHdpZHRocyA9IHdpZHRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBjb2x1bW4sIGluY2x1ZGluZyByb3cubmFtZXMud2lkdGggKGxpc3Qgb3IgTlVMTCkKIyAgICAg
LCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIg
Y29sdW1uLCAobGlzdCBvciBOVUxMKQojICAgICAsIGF0dHJpYnV0ZXMgPSBhdHRyaWIgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChsaXN0KQojICAgICAsIGV4dGVu
c2lvbi53YXJuaW5nID0gZXh0ZW5zaW9uLndhcm5pbmcgICAgICAgICAgICAjIHBlciBmaWxlLCBU
UlVFL0ZBTFNFIGluZGljYXRlcyB3ZXRoZXIgb3V0IHNwZWNzIGRpZmZlciBmcm9tIGluIHNwZWNz
IAojICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gc2VwZXJhdG9yLndhcm5pbmcgICAgICAgICAg
ICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiMgICAgICwgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA9IHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UvTkEKIyAg
ICAgKQojICAgLCBjbGFzcz0idGVtcGxhdGUiCiMgICApCgoKCiMgVVRJTElUSUVTICMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IwoKIyBjb21iaW5lcyBycGFkKCkgYW5kIGxwYWQoKQojIGRlZmF1bHQgaXMgZmxhZz0iLSIgPT0g
cnBhZCgpCiMgZGVmYXVsdCBtZXRob2QgJ2FiYnJldmlhdGUnIHVzZXMgYWJicmV2aWF0ZSgpIHRv
IHJlZHVjZSBzdHJpbmdzIGxvbmdlciB0aGFuIHdpZHRoCiMgbWV0aG9kICdleHRlbmQnIGdyYW50
cyBlcXVhbCB3aWR0aHMsIGV4dGVuZGluZyB0byBtYXggd2lkdGgsIGlmIG5lY2Vzc2FyeQojIG1l
dGhvZCAndmFyaWFibGUnIGNvcnJlc3BvbmRzIHRvIHdoYXQgZm9ybWF0LmNoYXIoKSBkb2VzCiMg
bWV0aG9kcyAnbGN1dCcgYW5kICdyY3V0JyBncmFudCBmaXhlZCB3aWR0aCBieSBjdXR0aW5nCiMg
bmVnYXRpdmUgd2lkdGggb3ZlcndyaXRlcyBmbGFnPSctJyB0byBmbGFnPScnIGFzIGluIGZvcm1h
dC5jaGFyKCkKcGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBmbGFnPSItIiwgY2hh
cj0iICIsIG1ldGhvZD1jKCJhYmJyZXZpYXRlIiwgInZhcmlhYmxlIiwgImV4dGVuZCIsICJyY3V0
IiwgImxjdXQiKSwgd2Fybj1UUlVFKQp7CgogICAgaWYgKG1ldGhvZD09J2FiYnJldmlhdGUnICYm
IGxlbmd0aCh3aWR0aCk+MSkKICAgICAgc3RvcCgibWV0aG9kPSdhYmJyZXZpYXRlJyBuZWVkcyB3
aWR0aD1jb25zdGFudCIpCgogICAgaWYgKGlzLm51bGwoeCkpIAogICAgICAgIHJldHVybigiIikK
ICAgIGlmICghaXMuY2hhcmFjdGVyKHgpKSB7CiAgICAgICAgd2FybmluZygiY29lcmNpbmcgJ3gn
IHRvICdjaGFyYWN0ZXInIikKICAgICAgICB4IDwtIGFzLmNoYXJhY3Rlcih4KQogICAgfQogICAg
YXQgPC0gYXR0cmlidXRlcyh4KQogICAgbmMgPC0gbmNoYXIoeCkKICAgIG1heG5jIDwtIG1heChu
YykKICAgIGlmIChpcy5udWxsKHdpZHRoKSkgCiAgICAgICAgd2lkdGggPC0gbWF4bmMKICAgIGVs
c2UgaWYgKHdpZHRoIDwgMCkgewogICAgICAgIGZsYWcgPC0gIiIKICAgICAgICB3aWR0aCA8LSAt
d2lkdGgKICAgIH0KICAgIGlmICh3aWR0aDxtYXhuYyl7CiAgICAgIGlmICh3YXJuKQogICAgICAg
IHdhcm5pbmcocGFzdGUoIm1heChuY2hhcih4KSk9IiwgbWF4bmMsICIgPiBhYnMod2lkdGgpPSIs
IHdpZHRoLCBzZXA9IiIpKQogICAgICBpZiAobWV0aG9kPT0ibGN1dCIpewogICAgICAgIHhbbmM+
d2lkdGhdIDwtIHN1YnN0cih4W25jPndpZHRoXSwgKG5jLXdpZHRoKVtuYz53aWR0aF0rMSwgbmNb
bmM+d2lkdGhdKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0icmN1dCIpewogICAgICAgIHggPC0g
c3Vic3RyKHgsIDEsIHdpZHRoKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0idmFyaWFibGUiKXsK
ICAgICAgICBOVUxMCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJleHRlbmQiKXsKICAgICAgICB3
aWR0aCA8LSBtYXhuYwogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0iYWJicmV2aWF0ZSIpewogICAg
ICAgIHggPC0gYWJicmV2aWF0ZSh4LCB3aWR0aCkKICAgICAgICBpZiAod2FybiAmJiBhbnkobmNo
YXIoeCk+d2lkdGgpKSB3YXJuaW5nKCJhYmJyZXZpYXRlKCkgdmlvbGF0ZWQgd2lkdGgiKQogICAg
ICB9ZWxzZSAKICAgICAgICBzdG9wKCJpbGxlZ2FsIG1ldGhvZCIsIG1ldGhvZCkKICAgIH0KICAg
IG5vIDwtIHBtYXgoMCwgd2lkdGggLSBuYykKICAgIHRhYiA8LSB1bmlxdWUobm8pCiAgICB0YWJw
YWQgPC0gc2FwcGx5KHRhYisxLCBmdW5jdGlvbihubykgcGFzdGUoY2hhcmFjdGVyKG5vKSwgY29s
bGFwc2UgPSBjaGFyKSkKICAgIHBhZCA8LSB0YWJwYWRbbWF0Y2gobm8sIHRhYildCiAgICByIDwt
IGlmIChmbGFnID09ICItIikgCiAgICAgICAgcGFzdGUoeCwgcGFkLCBzZXAgPSAiIikKICAgIGVs
c2UgcGFzdGUocGFkLCB4LCBzZXAgPSAiIikKICAgIGlmICghaXMubnVsbChhdCkpIAogICAgICAg
IGF0dHJpYnV0ZXMocikgPC0gYXQKICAgIHIKfQoKCiMgZGVmYXVsdCBtZXRob2QgaXMgJ3JjdXQn
CiMgLXdpZHRoIG1ha2VzIGxlZnQgcGFkZGluZwpycGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGgg
PSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9kPWMoInJjdXQiLCAibGN1dCIsICJ2YXJpYWJsZSIsICJl
eHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJy
ZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgpPjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0
ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQiKQoKICAgIGZsYWcgPC0gIi0iCiAgICBpZiAoaXMubnVs
bCh4KSkgCiAgICAgICAgcmV0dXJuKCIiKQogICAgaWYgKCFpcy5jaGFyYWN0ZXIoeCkpIHsKICAg
ICAgICB3YXJuaW5nKCJjb2VyY2luZyAneCcgdG8gJ2NoYXJhY3RlciciKQogICAgICAgIHggPC0g
YXMuY2hhcmFjdGVyKHgpCiAgICB9CiAgICBhdCA8LSBhdHRyaWJ1dGVzKHgpCiAgICBuYyA8LSBu
Y2hhcih4KQogICAgbWF4bmMgPC0gbWF4KG5jKQogICAgaWYgKGlzLm51bGwod2lkdGgpKSAKICAg
ICAgICB3aWR0aCA8LSBtYXhuYwogICAgZWxzZSBpZiAod2lkdGggPCAwKSB7CiAgICAgICAgZmxh
ZyA8LSAiIgogICAgICAgIHdpZHRoIDwtIC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5j
KXsKICAgICAgaWYgKHdhcm4pCiAgICAgICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0i
LCBtYXhuYywgIiA+IGFicyh3aWR0aCk9Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRo
b2Q9PSJsY3V0Iil7CiAgICAgICAgeFtuYz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAo
bmMtd2lkdGgpW25jPndpZHRoXSsxLCBuY1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRo
b2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNl
IGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIpewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1l
dGhvZD09ImV4dGVuZCIpewogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmICht
ZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAgICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQog
ICAgICAgIGlmICh3YXJuICYmIGFueShuY2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlh
dGUoKSB2aW9sYXRlZCB3aWR0aCIpICAgICAgCiAgICAgIH1lbHNlIAogICAgICAgIHN0b3AoImls
bGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQogICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5j
KQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRhYnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0
aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBjb2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwt
IHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIgPC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAg
ICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAgZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIi
KQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAgICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAg
cgp9CgoKIyBkZWZhdWx0IG1ldGhvZCBpcyAnbGN1dCcKIyAtd2lkdGggbWFrZXMgcmlndGggcGFk
ZGluZwpscGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9k
PWMoImxjdXQiLCAicmN1dCIsICJ2YXJpYWJsZSIsICJleHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3
YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJyZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgp
PjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQi
KQoKICAgIGZsYWcgPC0gIiIKICAgIGlmIChpcy5udWxsKHgpKSAKICAgICAgICByZXR1cm4oIiIp
CiAgICBpZiAoIWlzLmNoYXJhY3Rlcih4KSkgewogICAgICAgIHdhcm5pbmcoImNvZXJjaW5nICd4
JyB0byAnY2hhcmFjdGVyJyIpCiAgICAgICAgeCA8LSBhcy5jaGFyYWN0ZXIoeCkKICAgIH0KICAg
IGF0IDwtIGF0dHJpYnV0ZXMoeCkKICAgIG5jIDwtIG5jaGFyKHgpCiAgICBtYXhuYyA8LSBtYXgo
bmMpCiAgICBpZiAoaXMubnVsbCh3aWR0aCkpIAogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICBl
bHNlIGlmICh3aWR0aCA8IDApIHsKICAgICAgICBmbGFnIDwtICItIgogICAgICAgIHdpZHRoIDwt
IC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5jKXsKICAgICAgaWYgKHdhcm4pCiAgICAg
ICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0iLCBtYXhuYywgIiA+IGFicyh3aWR0aCk9
Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRob2Q9PSJsY3V0Iil7CiAgICAgICAgeFtu
Yz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAobmMtd2lkdGgpW25jPndpZHRoXSsxLCBu
Y1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8
LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIp
ewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1ldGhvZD09ImV4dGVuZCIpewogICAgICAg
IHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAg
ICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQogICAgICAgIGlmICh3YXJuICYmIGFueShu
Y2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlhdGUoKSB2aW9sYXRlZCB3aWR0aCIpCiAg
ICAgIH1lbHNlIAogICAgICAgIHN0b3AoImlsbGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQog
ICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5jKQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRh
YnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBj
b2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwtIHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIg
PC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAgICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAg
ZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIiKQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAg
ICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAgcgp9CgojIHRyaW1tcyBib3RoIHNpZGVzCnRyaW0g
PC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0ZSgnXCheWycsIGRyb3As
ICddKlwpXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwn
XSokXCknLCBzZXA9JycpCiAgICAgICwgJ1xcMicsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojIHJp
Z2h0IHRyaW0KcnRyaW0gPC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0
ZSgnXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwnXSok
XCknLCBzZXA9JycpCiAgICAgICwgJ1xcMScsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojbGVmdCB0
cmltCmx0cmltIDwtIGZ1bmN0aW9uKHRleHQsIGRyb3A9JyBcdFxuJykKICBzdWIocGFzdGUoJ1wo
XlsnLCBkcm9wLCAnXSpcKVwoLipbXicsIGRyb3AsICddXCl8XCheWycsIGRyb3AsJ10qJFwpJywg
c2VwPScnKQogICAgICAsICdcXDInLCB0ZXh0LCBleHRlbmRlZD1UUlVFKQoKI3JlbW92ZXMgb25l
ICgxISkgcGFpciBvZiBxdW90YXRpb24gbWFya3MKdW5xdW90YXRlIDwtIGZ1bmN0aW9uKHRleHQs
IHF1b3RhdGlvbi5tYXJrPSciJykKICBzdWIocGFzdGUoJ1woXicsIHF1b3RhdGlvbi5tYXJrLCAn
XClcKC4qXClcKCcsIHF1b3RhdGlvbi5tYXJrLCAnJFwpJywgc2VwPScnKQogICAgICAsICdcXDIn
CiAgICAgICwgdGV4dAogICAgICAsIGV4dGVuZGVkPVRSVUUpCgoKI2Z1cnRoZXIgdXRpbGl0aWVz
IGFyZSBkZWZpbmVkIHdpdGhpbiBvdGhlciBmdW5jdGlvbnMsIAojIC0gYSBleHRlbmRlZCB2ZXJz
aW9uIG9mIHR5cGUuY29udmVydCgpCiMgLSBhIHNsaWdobHkgbW9kaWZpZWQgdmVyc2lvbiBvZiBz
Y2FuKCkKCgoKIyBmdW5jdGlvbnMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKIyMgU2hhbGwgd2UgaGF2ZSBnZW5lcmlj
cyA/PwpyZWFkIDwtIGZ1bmN0aW9uICh4LCAuLi4pIApVc2VNZXRob2QoInJlYWQiKQoKd3JpdGUu
ZGVmYXVsdCA8LSB3cml0ZQoKd3JpdGUgPC0gZnVuY3Rpb24gKHRlbXBsYXRlLCAuLi4pIApVc2VN
ZXRob2QoIndyaXRlIikKCgoKIyMgTW9kaWZpZWQgdmVyc2lvbiBvZiByZWFkLnRhYmxlKCkgZm9y
CiMjIGhhbmRsaW5nIHdoaXRlIHNwYWNlLCBkZWNpbWFsIHNlcGVyYXRvciwgcXVvdGF0aW9uIG1h
cmtzLCBmaXhlZCB3aWR0aCBpbXBvcnQKIyMgb25seSBvbmUgcmVzdHJpY3Rpb24gYXBwbGllczog
CiMjIGluIG5vbi1maXhlZC13aWR0aCBpbXBvcnQgdGhlIGRhdGEgTVVTVCBOT1QgY29udGFpbiBz
ZXA9CiMjIHRodXMgbm90IGZ1bGx5IENTViBjb21wYXRpYmxlCiMjIHJlbWFya3M6IAojIyAgIG5l
ZWRzIHJlZGVmaW5lZCBzY2FuKCkKIyMgICB0byBpbXBvcnQgQ1NWIGFzIHB1cmUgY2hhcmFjdGVy
IGNvbHVtbnMgdXNlIHNjYW4oKQojIyAgIHRvIGltcG9ydCBmaXhlZCB3aWR0aCBhcyBwdXJlIGNo
YXJhY3RlciBjb2x1bW5zIHVzZSByZWFkLmNoYXIuY29scygpCiMjICAgCiMjIE1vZGlmaWNhdGlv
bnMgKEdOVSkgQ29weXJpZ2h0IEpPQSAxOTk5CnJlYWQudGFibGUgPC0gCmZ1bmN0aW9uIChmaWxl
CiwgaGVhZGVyID0gRkFMU0UgICAgICAgICAgICAgICAjIyBoZWxwIHNob3VsZCBtZW50aW9uLCB0
aGF0IGF1dG9tYXRpY2FsbHkgVFJVRSBpZiBub3Qgc3BlY2lmaWVkIGFuZCBmaXJzdCBsaW5lIGhh
cyBvbmUgdG9rZW4gbW9yZQosIHNlcCA9ICcnICAgICAgICAgICAgICAgICAgICAgIyMgbm93IGZ1
bGx5IGlnbm9yYWJsZSBpZiBmaXhlZCB3aWR0aAosIHJvdy5uYW1lcwosIGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgIyMgaGVscCBzaG91bGQgbWVudGlvbiB0aGF0IGhlYWRlciBvdmVyd3Jp
dGVzIGNvbC5uYW1lcwosIGFzLmlzID0gRkFMU0UgICAgICAgICAgICAgICAgIyMgYXMuaXM9VFJV
RSBoYXMgcHJpb3JpdHksIHRodXMgaWdub3JlcyBzdG9yYWdlLm1vZGU9LCBhdHRyaWJ1dGVzPSwg
ZmFjdG9ycz0sIGxvZ2ljYWxzPQosIG5hLnN0cmluZ3MgPSAnTkEnICAgICAgICAgICAgCiwgc2tp
cCA9IDAKLCBubGluZXM9SW5mICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogbWF4IGRh
dGEgbGluZXMgcmVhZAosIGRlYy5zZXAgPSAnLicgICAgICAgICAgICAgICAgIyMgbmV3IChKT0Ep
CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicgICAgICAgICAjIyBuZXcgKEpPQSkKLCBlc2NhcGVkLnF1
b3RhdGlvbi5tYXJrID0gJyInICMjIG5ldyAoSk9BKTogb25seSB1c2VkIGlmIGl0IGRpZmZlcnMg
ZnJvbSBxdW90YXRpb24ubWFyawosIHN0cmlwLndoaXRlID0gVFJVRSAgICAgICAgICAgIyMgbmV3
IChKT0EpOiBzZXQgdG8gRkFMU0UgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKLCBzdHJpcC5x
dW90YXRpb24ubWFya3MgPSBUUlVFICMjIG5ldyAoSk9BKTogc2V0IHRvIEZBTFNFIGZvciBiYWNr
d2FyZCBjb21wYXRpYmlsaXR5LCBhbHNvIHZlY3RvcnMgYWxsb3dlZAosIHdpZHRocz1OVUxMICAg
ICAgICAgICAgICAgICAgIyMgbmV3IChKT0EpOiBmaXhlZCB3aWR0aDogc2luZ2xlIHdpZHRoICYg
bmNvbHVtbnMgb3IgdmVjdG9yL2xpc3Qgb2Ygd2lkdGhzCiwgc3RhcnQ9TlVMTCAgICAgICAgICAg
ICAgICAgICAjIyBuZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4g
c3RhcnQgcG9zaXRpb25zCiwgc3RvcD1OVUxMICAgICAgICAgICAgICAgICAgICAjIyBuZXcgKEpP
QSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4gc3RvcCBwb3NpdGlvbnMKLCBj
b2xzPW1heChsZW5ndGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKSAjIyBu
ZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiBuZWVkZWQgd2l0aCBzaW5nbGUgd2lkdGgKLCBlb2w9J1xu
JyAgICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogZml4ZWQgd2lkdGggb25seQosIHN0
b3JhZ2UubW9kZSA9IE5VTEwgICAgICAgICAgIyMgbmV3IChKT0EpOiAKLCBhdHRyaWJ1dGVzID0g
TlVMTCAgICAgICAgICAgICMjIG5ldyAoSk9BKTogb25seSBhcHBsaWVkIGlmIHN0b3JhZ2UubW9k
ZT0gc3BlY2lmaWVkLCBmYWN0b3JzPSBhbmQgbG9naWNhbD0gbWF5IGNoYW5nZSBmaW5hbCBhdHRy
aWJ1dGVzCiwgbG9naWNhbHMgPSBOVUxMICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6IHR3byBj
aGFyYWN0ZXJzIG9yIG51bWJlcnMgZm9yIGMoRkFMU0UsIFRSVUUpCiwgZmFjdG9ycyA9IE5VTEwg
ICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6ICduZXcnIGlnbm9yZXMgYXR0cmlidXRlcywgJ2xl
dmVscycgdXNlcyBjb2RlcyBmcm9tIGF0dHJpYnV0ZXMsICdjb2RlcycgdXNlcyBsZXZlbHMgZnJv
bSBhdHRyaWJ1dGVzCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UgICAjIyBuZXcgKEpPQSk6
IHJldHVybmVkIGRhdGEuZnJhbWUgaGFzIHRlbXBsYXRlIGFzIGF0dHJpYnV0ZQopIAp7CiAgICAj
IyMgU3RhcnQgSk9BIGNoYW5nZXMKICAgIAogICAgc3RvcmFnZS5tb2RlcyA8LSBjKCJjaGFyYWN0
ZXIiLCAibG9naWNhbCIsICJpbnRlZ2VyIiwgImRvdWJsZSIsICJjb21wbGV4IikKCiAgICAjbG9n
aWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxzKT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8
LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAgIyBmYWN0b3JzCiAgICBpZiAoIWlzLm51bGwoZmFj
dG9ycykpCiAgICAgIGZhY3RvcnMgPC0gbWF0Y2guYXJnKGZhY3RvcnMsIGMoImxldmVscyIsICJj
b2RlcyIsICJuZXciKSkKICAgICMgY29tcGFyZSBzZXAgYW5kIGRlYy5zZXAKICAgIGlmIChkZWMu
c2VwPT1zZXApCiAgICAgIHN0b3AoInBhcnNpbmcgcnVsZSB2aW9sYXRpb246IHNlcCBtdXN0IG5v
dCBlcXVhbCBkZWMuc2VwIikKICAgICMgbmEuc3RyaW5ncwogICAgaWYgKGlzLm51bGwobmEuc3Ry
aW5ncykpCiAgICAgIHN0b3AoInNjYW4gY3VycmVudGx5IGRvZXNuJ3QgYWxsb3cgbmEuc3RyaW5n
cz1OVUxMIikKCiAgICAjIyAuSW50ZXJuYWwodHlwZS5jb252ZXJ0KSBjYWxscyBkb190eXBlY3Z0
KCkgd2hpY2ggY2FsbHMgQy1saWJyYXJ5IGZ1bmN0aW9uIHN0cnRvZCgpIHdoaWNoIHVzZXMgJy4n
IGFzIGRlYy5zZXAKICAgICMjIHRodXMgbGV0J3MgcmVwbGFjZSBvdGhlciBkZWMuc2VwIGhlcmUK
ICAgICMjIEluIGNhc2UgYSBnbG9iYWwgb3B0aW9uJGRlYy5zZXAgaXMgaW50cm9kdWNlZCwgdGhp
cyBmaXggbmVlZHMgdG8gYmUgYWRhcHRlZAoKICAgIHR5cGUuY29udmVydCA8LSBmdW5jdGlvbih4
CiAgICAsIG5hLnN0cmluZ3MyID0gbmEuc3RyaW5ncyAgIyBjb25zdGFudCBmb3IgYWxsIGNvbHVt
bnMsIG5hLnN0cmluZ3MgTk9UIHJlcGxhY2VkIGJ5ICdOQScgaW4gc2NhbigpIG9yIHJlYWQuY2hh
ci5jb2xzKCkKICAgICwgYXMuaXMyID0gRkFMU0UKICAgICwgZGVjPWRlYy5zZXAgICAgICAgICAg
ICAgICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBzdG9yYWdlLm1vZGUyPU5VTEwK
ICAgICwgYXR0cmlidXRlczI9TlVMTAogICAgLCBsb2dpY2FsczI9bG9naWNhbHMgICAgICAgICAj
IGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBmYWN0b3JzMj1mYWN0b3JzICAgICAgICAg
ICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgKXsgIAogICAgICAgIGlmIChpcy5udWxs
KHN0b3JhZ2UubW9kZTIpKXsgICMjIHRoZSBvbGQgdmVyc2lvbgogICAgICAgICAgaWYgKGRlYyE9
Ii4iKQogICAgICAgICAgICB4IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNF
LCBleHRlbmRlZD1GQUxTRSkKICAgICAgICAgICAgeCA8LSAuSW50ZXJuYWwodHlwZS5jb252ZXJ0
KHgsIG5hLnN0cmluZ3MyLCBhcy5pczIpKQogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUy
PT0nY2hhcmFjdGVyJyl7CiAgICAgICAgICAgIHhbbWF0Y2goeCwgbmEuc3RyaW5nczIsIG5vbWF0
Y2g9MCk+MF0gPC0gJ05BJwogICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJpYnV0ZXMy
CiAgICAgICAgICAgIAogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0nbG9naWNhbCcp
ewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4wXSA8LSAnTkEn
CiAgICAgICAgICBpZiAoaXMubnVsbChsb2dpY2FsczIpKXsKICAgICAgICAgICAgIyMgcmVjb2du
aXplIGMoJ0ZBTFNFJywgJ1RSVUUnLCAnRicsICdUJykKICAgICAgICAgICAgeCA8LSBhcy5sb2dp
Y2FsKHgpCiAgICAgICAgICB9ZWxzZSBpZiAobW9kZShsb2dpY2FsczIpPT0nbnVtZXJpYycpewog
ICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4n
LCB4LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICAgIHggPC0g
YyhGQUxTRSwgVFJVRSlbbWF0Y2goYXMuaW50ZWdlcih4KSwgbG9naWNhbHMyKV0KICAgICAgICAg
IH1lbHNlCiAgICAgICAgICAgIHggPC0gYyhGQUxTRSwgVFJVRSlbbWF0Y2goeCwgbG9naWNhbHMy
KV0KICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAgICAgICAgIAogICAg
ICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0naW50ZWdlcicpewogICAgICAgICAgaWYgKCBh
bnkoIWlzLm5hKG1hdGNoKGF0dHJpYnV0ZXMyJGNsYXNzLCAnZmFjdG9yJykpKSApewogICAgICAg
ICAgICAjIyBoYW5kbGUgZmFjdG9ycwogICAgICAgICAgICBpZiAoaXMubnVsbChmYWN0b3JzMikp
ewogICAgICAgICAgICAgICMjIGFzc3VtZSBmYWN0b3IgaXMgcHJvcGVybHkgZGVzY3JpYmVkIGlu
IGF0dHJpYnV0ZXMKICAgICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgICB4
IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkK
ICAgICAgICAgICAgICB4IDwtIGFzLmludGVnZXIoeCkKICAgICAgICAgICAgICBpZiAobWF4KHgp
Pmxlbmd0aChhdHRyaWJ1dGVzMiRsZXZlbHMpKQogICAgICAgICAgICAgICAgd2FybmluZygibWF4
IGZhY3RvciBjb2RlIG9mIiwgbWF4KHgpLCAid2hlcmUgb25seSIsIGxlbmd0aChhdHRyaWJ1dGVz
MiRsZXZlbHMpLCAibGV2ZWxzIikKICAgICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJp
YnV0ZXMyCiAgICAgICAgICAgICAgCiAgICAgICAgICAgIH1lbHNlIGlmIChmYWN0b3JzMj09J25l
dycpewogICAgICAgICAgICAgICMjIGlnbm9yZSBhdHRyaWJ1dGVzCiAgICAgICAgICAgICAgeCA8
LSBmYWN0b3IoeCwgZXhjbHVkZT1uYS5zdHJpbmdzMikKICAgICAgICAgICAgICAKICAgICAgICAg
ICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nbGV2ZWxzJyl7CiAgICAgICAgICAgICAgIyMgdXNlIGNv
ZGVzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgICMgYWNjZXB0IG5hLnN0cmluZ3Mgd2hp
Y2ggYXJlIGFscmVhZHkgbGV2ZWxzCiAgICAgICAgICAgICAgbmEuc3RyaW5nczIgPC0gbmEuc3Ry
aW5nczJbIShuYS5zdHJpbmdzMiAlaW4lIGF0dHJpYnV0ZXMyJGxldmVscyldCiAgICAgICAgICAg
ICAgIyByZWplY3Qgb3RoZXIgbmEuc3RyaW5ncwogICAgICAgICAgICAgIGxldiA8LSBuYW1lcyh0
YWJsZSh4LCBleGNsdWRlPW5hLnN0cmluZ3MyKSkKICAgICAgICAgICAgICBsZXYgPC0gbGV2WyEo
bGV2ICVpbiUgYXR0cmlidXRlczIkbGV2ZWxzKV0KICAgICAgICAgICAgICBpZiAobGVuZ3RoKGxl
dik+MCl7CiAgICAgICAgICAgICAgICAgIHdhcm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUo
YXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBzZT0iOyIpLCAifSB3aXRoIHVua25vd24gbGV2ZWxz
IHsiLCBwYXN0ZShsZXYsIGNvbGxhcHNlPSI7IiksICJ9Iiwgc2VwPSIiKSkKICAgICAgICAgICAg
ICAgICAgYXR0cmlidXRlczIkbGV2ZWxzIDwtIGMoYXR0cmlidXRlczIkbGV2ZWxzLCBsZXYpCiAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB4IDwtIG1hdGNoKHgsIGF0dHJpYnV0ZXMy
JGxldmVscykKICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgICAKICAgICAgICAgICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nY29kZXMnKXsKICAg
ICAgICAgICAgICAjIyB1c2UgbGV2ZWxzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgIGlm
IChkZWMhPSIuIikKICAgICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcuJywgeCwgaWdub3Jl
LmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICAgICAgeCA8LSBhcy5pbnRl
Z2VyKHgpCiAgICAgICAgICAgICAgICBjb2QgPC0gbmFtZXModGFibGUoeCkpCiAgICAgICAgICAg
ICAgICBjb2QgPC0gY29kWyEoY29kICVpbiUgMTpsZW5ndGgoYXR0cmlidXRlczIkbGV2ZWxzKSld
CiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKGNvZCk+MCl7CiAgICAgICAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUoYXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBz
ZT0iOyIpLCAifSB3aXRoIHVua25vd24gY29kZXMgeyIsIHBhc3RlKGNvZCwgY29sbGFwc2U9Ijsi
KSwgIn0iLCBzZXA9IiIpKQogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzMiRsZXZlbHMgPC0g
YyhhdHRyaWJ1dGVzMiRsZXZlbHMsIHBhc3RlKCJVbmtub3duQ29kZSIsIChsZW5ndGgoYXR0cmli
dXRlczIkbGV2ZWxzKSsxKTptYXgoYXMuaW50ZWdlcihjb2QpKSwgc2VwPSIiKSkKICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICB9ZWxzZXsgIyMgaXMgaW50ZWdlcgog
ICAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgICAgaWYgKGRlYyE9Ii4iKQogICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcu
JywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICB4IDwt
IGFzLmludGVnZXIoeCkKICAgICAgICAgICAgYXR0cmlidXRlcyh4KSA8LSBhdHRyaWJ1dGVzMgog
ICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9ZWxzZSBpZiAoc3RvcmFnZS5tb2RlMj09
J2RvdWJsZScpewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4w
XSA8LSAnTkEnCiAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgIHggPC0gZ3N1Yihk
ZWMsICcuJywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAg
eCA8LSBhcy5kb3VibGUoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIK
ICAgICAgICAgICAgCiAgICAgICAgfWVsc2UgaWYgKHN0b3JhZ2UubW9kZTI9PSdjb21wbGV4Jyl7
CiAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgIGlmIChkZWMhPSIuIikKICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4nLCB4
LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICB4IDwtIGFzLmNv
bXBsZXgoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKCiAgICAgICAg
fWVsc2UKICAgICAgICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZS5tb2RlIikKICAgICAgICAgIAog
ICAgICAgIHJldHVybih4KQogICAgfQoKCgogICAgIyMgcmVkZWZpbmUgc2NhbiBub3QgdG8gYWRk
ICcnIHRvIG5hLnN0cmluZ3MKICAgIHNjYW4gPC0gCiAgICBmdW5jdGlvbiAoZmlsZSA9ICIiLCB3
aGF0ID0gZG91YmxlKDApLCBubWF4ID0gLTEsIG4gPSAtMSwgc2VwID0gIiIsIAogICAgICAgIHNr
aXAgPSAwLCBubGluZXMgPSAwLCBuYS5zdHJpbmdzID0gIk5BIiwgZmx1c2ggPSBGQUxTRSwgc3Ry
aXAud2hpdGUgPSBGQUxTRSwgCiAgICAgICAgcXVpZXQgPSBGQUxTRSkgCiAgICB7CiAgICAjISAg
ICBpZiAoIW1pc3Npbmcoc2VwKSkgCiAgICAjISAgICAgICBuYS5zdHJpbmdzIDwtIGMobmEuc3Ry
aW5ncywgIiIpCiAgICAgICAgaWYgKCFtaXNzaW5nKG4pKSB7CiAgICAgICAgICAgaWYgKG1pc3Np
bmcobm1heCkpIAogICAgICAgICAgICAgbm1heCA8LSBuL3BtYXgobGVuZ3RoKHdoYXQpLCAxKQog
ICAgICAgICAgIGVsc2Ugc3RvcCgiRWl0aGVyIHNwZWNpZnkgYG5tYXgnIG9yIGBuJywgYnV0IG5v
dCBib3RoLiIpCiAgICAgICAgfQogICAgICAgIC5JbnRlcm5hbChzY2FuKGZpbGUsIHdoYXQsIG5t
YXgsIHNlcCwgc2tpcCwgbmxpbmVzLCBuYS5zdHJpbmdzLCAKICAgICAgICAgICAgZmx1c2gsIHN0
cmlwLndoaXRlLCBxdWlldCkpCiAgICB9CgoKICAgICMgcHJlcGFyZWQgcGFyYW1ldGVycyBmb3Ig
Zml4ZWQgd2lkdGgKICAgIHN0YXJ0c3RvcCA8LSAgIWlzLm51bGwoc3RhcnQpIHx8ICFpcy5udWxs
KHN0b3ApIAogICAgaWYgKHN0YXJ0c3RvcCAmJiAoICFpcy5udWxsKHdpZHRocykgfHwgaXMubnVs
bChzdGFydCkgfHwgaXMubnVsbChzdG9wKSApKQogICAgICBzdG9wKCJmb3IgZml4ZWQgZm9ybWF0
IHNwZWNpZnkgZWl0aGVyIHdpZHRocz0gb3Igc3RhcnQ9IGFuZCBzdG9wPSIpCiAgICBmaXhlZC53
aWR0aCA8LSAhaXMubnVsbCh3aWR0aHMpIHx8IHN0YXJ0c3RvcAoKCiAgICBpZiAoZml4ZWQud2lk
dGgpewogICAgICAjIyBpbml0aWFsIHNldHRpbmcgZm9yIHdpZHRoLCBzdGFydCwgc3RvcAogICAg
ICBpZiAoc3RhcnRzdG9wKXsKICAgICAgICBzdG9wIDwtIHVubGlzdChzdG9wKQogICAgICAgIHN0
YXJ0IDwtIHVubGlzdChzdGFydCkKICAgICAgICBpZiAobGVuZ3RoKHN0YXJ0KSE9Y29scyB8fCBs
ZW5ndGgoc3RvcCkhPWNvbHMpIAogICAgICAgICAgc3RvcCgiaW52YWxpZCBsZW5ndGggZm9yIHtz
dGFydCxzdG9wfSIpCiAgICAgICAgbyA8LSBvcmRlcihzdG9wKQogICAgICAgIHN0b3AgPC0gc3Rv
cFtvXQogICAgICAgIHN0YXJ0IDwtIHN0YXJ0W29dCiAgICAgICAgcmVtb3ZlKG8pCiAgICAgICAg
d2lkdGhzIDwtIHN0b3AgLSBzdGFydCArIDEKICAgICAgfWVsc2V7CiAgICAgICAgaWYgKGxlbmd0
aCh3aWR0aHMpPT0xKXsKICAgICAgICAgIHdpZHRocyA8LSByZXAod2lkdGhzLCBjb2xzKQogICAg
ICAgIH1lbHNlIGlmIChsZW5ndGgod2lkdGhzKT09Y29scykgCiAgICAgICAgICB3aWR0aHMgPC0g
dW5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAgICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0
aCBmb3Igd2lkdGhzIikKICAgICAgICAjIyByZWFkanVzdCBzdGFydC9zdG9wCiAgICAgICAgbGFz
dHN0b3AgPC0gMAogICAgICAgIGZvciAoaSBpbiAxOmNvbHMpewogICAgICAgICAgc3RhcnRbW2ld
XSA8LSBsYXN0c3RvcCArIDEKICAgICAgICAgIHN0b3BbW2ldXSA8LSBsYXN0c3RvcCA8LSBsYXN0
c3RvcCArIHdpZHRoc1tbaV1dCiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOmxlbmd0aCh3aWR0aHMp
LCBzZXAgPSAiIikKICAgICAgZWxzZSBpZiAoYW55KHN0cmlwLnF1b3RhdGlvbi5tYXJrcykpIGNv
bC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykKCiAgICAgIAog
ICAgfWVsc2V7IAogICAgIAogICAgICBpZiAoZGVjLnNlcD09c2VwKQogICAgICAgIHN0b3AoInNl
cCBtdXN0IG5vdCBlcXVhbCBkZWMuc2VwIikKICAgICAgaWYgKHN0cmlwLndoaXRlICYmIHNlcCAl
aW4lIGMoIiIsICIgIiwgIlx0IikpCiAgICAgICAgd2FybmluZygicmVhZC50YWJsZTogc3RyaXAu
d2hpdGUgQU5EIHdoaXRlIHNwYWNlIHNlcGVyYXRvciAhPyIpCgogICAgIAogICAgICByb3cubGVu
cyA8LSBjb3VudC5maWVsZHMoZmlsZSwgc2VwLCBza2lwKSAjIyByZW1hcms6IG9idmlvdXNseSB0
aGUgZmlsZSBpcyByZWFkIHR3aWNlIAogICAgICBubGluZXMgPC0gbWluKGxlbmd0aChyb3cubGVu
cyksIG5saW5lcysxKSAjIyBjaGFuZ2VkIGJlY2F1c2UgbmxpbmVzIG5vdyBpcyBhIHBhcmFtZXRl
cgogICAgICAjIyMgU3RvcCBKT0EgY2hhbmdlcyAgIAogICAgICBybGFicCA8LSBubGluZXMgPiAx
ICYmIChyb3cubGVuc1syXSAtIHJvdy5sZW5zWzFdKSA9PSAxICAKICAgICAgaWYgKHJsYWJwICYm
IG1pc3NpbmcoaGVhZGVyKSkgCiAgICAgICAgIGhlYWRlciA8LSBUUlVFCiAgICAgIGlmIChoZWFk
ZXIpIHsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBzY2FuKGZpbGUsIHdoYXQgPSAiIiwgc2VwID0g
c2VwLCBubGluZXMgPSAxLCAKICAgICAgICAgICAgICBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRl
LCAjIyBhZGRlZCBieSBKT0EKICAgICAgICAgICAgICBxdWlldCA9IFRSVUUsIHNraXAgPSBza2lw
KQogICAgICAgICAgc2tpcCA8LSBza2lwICsgMQogICAgICAgICAgcm93LmxlbnMgPC0gcm93Lmxl
bnNbLTFdCiAgICAgICAgICBubGluZXMgPC0gbmxpbmVzIC0gMQogICAgICB9ZWxzZSBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOnJvdy5s
ZW5zWzFdLCBzZXAgPSAiIikKICAgICAgaWYgKGFueShzdHJpcC5xdW90YXRpb24ubWFya3MpKQog
ICAgICAgIGNvbC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykg
IyMgYWRkZWQgYnkgSk9BCiAgICAKICAgICAgY29scyA8LSB1bmlxdWUocm93LmxlbnMpCiAgICAg
IGlmIChsZW5ndGgoY29scykgIT0gMSkgewogICAgICAgICAgY2F0KCJcbnJvdy5sZW5zPVxuIikK
ICAgICAgICAgIHByaW50KHJvdy5sZW5zKQogICAgICAgICAgc3RvcCgiYWxsIHJvd3MgbXVzdCBo
YXZlIHRoZSBzYW1lIGxlbmd0aC4iKQogICAgICB9CiAgICAgIHdoYXQgPC0gcmVwKGxpc3QoIiIp
LCBjb2xzKQogICAgICBpZiAocmxhYnApIAogICAgICAgIGNvbC5uYW1lcyA8LSBjKCJyb3cubmFt
ZXMiLCBjb2wubmFtZXMpCiAgICAgIG5hbWVzKHdoYXQpIDwtIGNvbC5uYW1lcwoKICAgIH0gIyBl
bmQgb2Ygbm9uLWZpeGVkLXdpZHRoCgoKICAgICMjIyBTdGFydCBKT0EgY2hhbmdlcwogICAgaWYg
KGZpeGVkLndpZHRoKXsKCiAgICAgIGRhdGEgPC0gcmVhZC5jaGFyLmNvbHMoZmlsZT1maWxlLCBz
dGFydCwgc3RvcAogICAgICAsIHNraXA9c2tpcAogICAgICAsIG5saW5lcz1ubGluZXMKICAgICAg
LCBlb2w9ZW9sCiAgICAgICwgbmEuc3RyaW5ncz0nTkEnCiAgICAgICkKICAgICAgbmxpbmVzIDwt
IGxlbmd0aChkYXRhW1sxXV0pCiAgICAgIG5hbWVzKGRhdGEpIDwtIGNvbC5uYW1lcwoKICAgIH1l
bHNleyAjIyMgU3RvcCBKT0EgY2hhbmdlcwoKICAgICAgIyMgbmEuc3RyaW5ncyBtdXN0IGJlIHRy
ZWF0ZWQgbGF0ZXIsIGlmIHVucXVvdGF0ZSgpIHNoYWxsIGhhdmUgYW4gZWZmZWN0CiAgICAgICMj
IGFzIHdlIG9ubHkgcmVhZCBpbiBzdHJpbmdzIGhlcmUsIHJlcGxhY2luZyAnTkEnIGJ5ICdOQScg
aXMgb2sKICAgICAgIyMgaG93ZXZlciwgc3RhbmRhcmQgdmVyc2lvbiBvZiBzY2FuIGF1dG9tYXRp
Y2FsbHkgbWFrZXMgbmEuc3RyaW5ncz1jKCdOQScsICcnKQogICAgICAjIyB0aHVzIGhlcmUgcmVk
ZWZpbmVkIHZlcnNpb24gb2Ygc2NhbiB1c2VkCiAgICAgIGRhdGEgPC0gc2NhbihmaWxlID0gZmls
ZSwgd2hhdCA9IHdoYXQsIHNlcCA9IHNlcCwgc2tpcCA9IHNraXAKICAgICAgICAgICAgICAsIG5h
LnN0cmluZ3MgPSAnTkEnICAgICAgICAgIyMgY2hhbmdlZCBieSBKT0EKICAgICAgICAgICAgICAs
IHN0cmlwLndoaXRlID0gc3RyaXAud2hpdGUgIyMgYWRkZWQgYnkgSk9BCiAgICAgICAgICAgICAg
LCBxdWlldCA9IFRSVUUpIAogICAgICBpZiAoY29scyAhPSBsZW5ndGgoZGF0YSkpIHsKICAgICAg
ICAgIHdhcm5pbmcocGFzdGUoImNvbHMgPSIsIGNvbHMsICIgIT0gbGVuZ3RoKGRhdGEpID0iLCBs
ZW5ndGgoZGF0YSkpKQogICAgICAgICAgY29scyA8LSBsZW5ndGgoZGF0YSkKICAgICAgfQogICAg
CiAgICB9ICMgZW5kIG9mIG5vbi1maXhlZC13aWR0aAoKCiAgICMjIFN0YXJ0IGNoYW5nZWQgYnkg
Sk9BICAgICAgICAKCiAgICBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcyk9PTEpCiAg
ICAgIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA8LSByZXAoc3RyaXAucXVvdGF0aW9uLm1hcmtzLCBj
b2xzKQogICAgZWxzZSBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcykhPWNvbHMpCiAg
ICAgICAgc3RvcChwYXN0ZSgic3RyaXAucXVvdGF0aW9uLm1hcmtzIGhhcyB0aGUgd3JvbmcgbGVu
Z3RoIgogICAgICAgICAgICAgLCBsZW5ndGgoc3RyaXAucXVvdGF0aW9uLm1hcmtzKSwiIT0gY29s
cyA9IiwgY29scykpCgogICAgaWYgKGlzLmxvZ2ljYWwoYXMuaXMpKSB7CiAgICAgIGlmIChsZW5n
dGgoYXMuaXMpPT0xKQogICAgICAgIGFzLmlzIDwtIHJlcChhcy5pcywgbGVuZ3RoID0gY29scykK
ICAgICAgZWxzZSBpZiAobGVuZ3RoKGFzLmlzKSE9Y29scykKICAgICAgICBzdG9wKHBhc3RlKCJh
cy5pcyBoYXMgdGhlIHdyb25nIGxlbmd0aCIsIGxlbmd0aChhcy5pcyksIiE9IGNvbHMgPSIsIGNv
bHMpKQogICAgfQogICAgZWxzZSBpZiAoaXMubnVtZXJpYyhhcy5pcykpIHsKICAgICAgICBpZiAo
YW55KGFzLmlzIDwgMSB8IGFzLmlzID4gY29scykpIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlk
IG51bWVyaWMgYXMuaXMgZXhwcmVzc2lvbiIpCiAgICAgICAgaSA8LSByZXAoRkFMU0UsIGNvbHMp
CiAgICAgICAgaVthcy5pc10gPC0gVFJVRQogICAgICAgIGFzLmlzIDwtIGkKICAgIH0KICAgIGVs
c2UgCiAgICAgICAgc3RvcChwYXN0ZSgiYXMuaXMgaGFzIHdyb25nIHR5cGUiKSkKCiAgICAgICAg
ICAgCiAgIAogICBpZiAoaXMubnVsbChzdG9yYWdlLm1vZGUpICYmICFpcy5udWxsKGF0dHJpYnV0
ZXMpKQogICAgIHN0b3AoImF0dHJpYnV0ZXMgbXVzdCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggc3Rv
cmFnZS5tb2RlIikKICAgaWYgKGxlbmd0aChzdG9yYWdlLm1vZGUpPT0xKQogICAgIHN0b3JhZ2Uu
bW9kZSA8LSByZXAoc3RvcmFnZS5tb2RlLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoc3RvcmFn
ZS5tb2RlKT4xICYmIGxlbmd0aChzdG9yYWdlLm1vZGUpIT1jb2xzKQogICAgIHN0b3AoInN0b3Jh
Z2UubW9kZSBoYXMgd3JvbmcgbGVuZ3RoIiwgbGVuZ3RoKHN0b3JhZ2UubW9kZSksICIhPSBjb2xz
ID0iLCBjb2xzKQogICBpZiAoIWFsbChtYXRjaChzdG9yYWdlLm1vZGUsIHN0b3JhZ2UubW9kZXMs
IG5vbWF0Y2g9MCkpKQogICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZSBtb2RlIikKICAgaWYgKGxl
bmd0aChhdHRyaWJ1dGVzKT09MSkKICAgICBhdHRyaWJ1dGVzIDwtIHJlcChhcy5saXN0KGF0dHJp
YnV0ZXMpLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoYXR0cmlidXRlcyk+MSAmJiBsZW5ndGgo
YXR0cmlidXRlcykhPWNvbHMpCiAgICAgc3RvcCgiYXR0cmlidXRlcyBoYXMgd3JvbmcgbGVuZ3Ro
IiwgbGVuZ3RoKGF0dHJpYnV0ZXMpLCAiIT0gY29scyA9IiwgY29scykKICAKICAgZm9yIChpIGlu
IDE6Y29scykgewogICAgIGlmIChmaXhlZC53aWR0aCAmJiBzdHJpcC53aGl0ZSkKICAgICAgIGNv
bHVtbiA8LSB0cmltKGRhdGFbW2ldXSwgJyBcdCcpCiAgICAgZWxzZQogICAgICAgY29sdW1uIDwt
IGRhdGFbW2ldXQogICAgIGlmIChzdHJpcC5xdW90YXRpb24ubWFya3NbaV0pCiAgICAgICBjb2x1
bW4gPC0gdW5xdW90YXRlKGNvbHVtbiwgcXVvdGF0aW9uLm1hcmspCiAgICAgaWYgKGVzY2FwZWQu
cXVvdGF0aW9uLm1hcmsgIT0gcXVvdGF0aW9uLm1hcmspCiAgICAgICBjb2x1bW4gPC0gZ3N1Yihl
c2NhcGVkLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyaywgY29sdW1uLCBleHRlbmRlZD1G
QUxTRSkKICAgICAgIAogICAgIGRhdGFbW2ldXSA8LSB0eXBlLmNvbnZlcnQoY29sdW1uCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFzLmlzPWFzLmlzW2ldCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAsIHN0b3JhZ2UubW9kZT1zdG9yYWdlLm1vZGVbaV0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICwgYXR0cmlidXRlcz1hdHRyaWJ1dGVzW1tpXV0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgIAogICB9CiAgIAogICAKICAgcm93dmFyIDwt
IDAgIyMgYWRkZWQgYnkgSk9BIGZvciB0ZW1wbGF0ZQogICAKICAgIyMgU3RvcCBjaGFuZ2VkIGJ5
IEpPQSAgICAgICAgCiAgICAgICAgICAgIAogICAgaWYgKG1pc3Npbmcocm93Lm5hbWVzKSkgewog
ICAgICAgIGlmICghZml4ZWQud2lkdGggJiYgcmxhYnApIHsgICMjIGNoYW5nZWQgYnkgSk9BIChv
bmx5IHN2cykKICAgICAgICAgICAgcm93Lm5hbWVzIDwtIGRhdGFbWzFdXQogICAgICAgICAgICBy
b3d2YXIgPC0gMSAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3IgdGVtcGxhdGUKICAgICAgICAg
ICAgY29sLm5hbWVzIDwtIGMoInJvd25hbWVzIiwgY29sLm5hbWVzKSAgIyMgYWRkZWQgYnkgSk9B
IGZvciB0ZW1wbGF0ZQogICAgICAgICAgICBkYXRhIDwtIGRhdGFbLTFdCiAgICAgICAgfQogICAg
ICAgIGVsc2Ugcm93Lm5hbWVzIDwtIGFzLmNoYXJhY3RlcigxOm5saW5lcykKICAgIH0KICAgIGVs
c2UgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCByb3cubmFtZXM9PTApIHsKICAgICAgICByb3cu
bmFtZXMgPC0gYXMuY2hhcmFjdGVyKDE6bmxpbmVzKQogICAgfQogICAgZWxzZSBpZiAoaXMuY2hh
cmFjdGVyKHJvdy5uYW1lcykpIHsKICAgICAgICBpZiAobGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkg
ewogICAgICAgICAgICByb3d2YXIgPC0gKDE6Y29scylbbWF0Y2goY29sLm5hbWVzLCByb3cubmFt
ZXMsIDApID09IDFdCiAgICAgICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tyb3d2YXJdXQogICAg
ICAgICAgICBkYXRhIDwtIGRhdGFbLXJvd3Zhcl0KICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlm
IChpcy5udW1lcmljKHJvdy5uYW1lcykgJiYgbGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkgewogICAg
ICAgIHJsYWJwIDwtIHJvdy5uYW1lcwogICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tybGFicF1d
CiAgICAgICAgcm93dmFyIDwtIHJsYWJwICAgICAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3Ig
dGVtcGxhdGUKICAgICAgICBkYXRhIDwtIGRhdGFbLXJsYWJwXQogICAgfQogICAgZWxzZSBzdG9w
KCJpbnZhbGlkIHJvdy5uYW1lcyBzcGVjaWZpY2F0aW9uIikKICAgIAogICAgY2xhc3MoZGF0YSkg
PC0gImRhdGEuZnJhbWUiCiAgICByb3cubmFtZXMoZGF0YSkgPC0gcm93Lm5hbWVzCiAgICAKICAg
IGlmICh0ZW1wbGF0ZS5hdHRyaWJ1dGUpewogICAgCiAgICAgIGlmIChpcy5udWxsKHdpZHRocykp
CiAgICAgICAgZGlnaXRzIDwtIE5VTEwKICAgICAgZWxzZXsKICAgICAgICB3aWR0aHMgPC0gYXMu
bGlzdCh3aWR0aHMpCiAgICAgICAgZGlnaXRzIDwtIHJlcChsaXN0KE5VTEwpLCBjb2xzKQogICAg
ICB9CiAgICAKICAgICAgaWYgKHJvd3Zhcj4wKXsKICAgICAgICBzdG9yYWdlLm1vZGUgPC0gYygg
ImNoYXJhY3RlciIsIHVubmFtZSh1bmxpc3QobGFwcGx5KGRhdGEsIHN0b3JhZ2UubW9kZSkpKSAp
CiAgICAgICAgYXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgbGFwcGx5
KGRhdGEsIGF0dHJpYnV0ZXMpKQogICAgICAgIG5hbWVzKGF0dHJpYnV0ZXMpWzFdIDwtIGNvbC5u
YW1lc1tyb3d2YXJdCiAgICAgIH1lbHNlewogICAgICAgIHN0b3JhZ2UubW9kZSA8LSB1bm5hbWUo
dW5saXN0KGxhcHBseShkYXRhLCBzdG9yYWdlLm1vZGUpKSkKICAgICAgICBhdHRyaWJ1dGVzIDwt
IGxhcHBseShkYXRhLCBhdHRyaWJ1dGVzKQogICAgICB9CiAgICAgIGF0dHIoZGF0YSwgJ3RlbXBs
YXRlJykgPC0gc3RydWN0dXJlKAogICAgICAgIGxpc3QoZmlsZSA9IGZpbGUgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAg
ICwgZW9sID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVy
IGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgc2VwID0gc2VwICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwg
ZGVjLnNlcCA9IGRlYy5zZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAg
ICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChj
aGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5t
YXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8Ij4gaW4g
Q1NWIAogICAgICAgICAgLCBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrID0gZXNjYXBlZC5xdW90YXRp
b24ubWFyayAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8IiI+IGluIENTVgogICAgICAg
ICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBw
ZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRpbmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNh
bCBvciBjaGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMgaW4g
ZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAgICAgLCByb3cu
bmFtZXMubG9jID0gcm93dmFyICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwg
Y29sbm8gb2Ygcm93bmFtZXMsIDAgPSBubyByb3cubmFtZXMgaW4gZmlsZSAoaW50ZWdlcikKICAg
ICAgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1lcyAobG9naWNhbCkKICAg
ICAgICAgICwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZSAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUKICAgICAgICAgICwgY29sLm5hbWVzID0gY29sLm5hbWVzICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIGNvcm5lci5uYW1lIChjaGFy
YWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90ZSA9IHN0cmlwLnF1b3RhdGlvbi5tYXJrcyAg
ICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90ZWQg
KGxvZ2ljYWwgdmVjdG9yKQogICAgICAgICAgLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAg
ICAgICAgICwgd2lkdGhzID0gd2lkdGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIHJvdy5uYW1lcy53aWR0aCAobGlzdCBvciBOVUxMKQog
ICAgICAgICAgLCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCBvciBOVUxMKQogICAgICAgICAgLCBhdHRyaWJ1dGVzID0g
YXR0cmlidXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAobGlzdCkK
ICAgICAgICAgICwgZXh0ZW5zaW9uLndhcm5pbmcgPSBGQUxTRSAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UgaW5kaWNhdGVzIHdldGhlciBvdXQgc3BlY3MgZGlm
ZmVyIGZyb20gaW4gc3BlY3MgCiAgICAgICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gTkEgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAg
ICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBOQSAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAgICApCiAgICAgICAgLCBjbGFzcz0idGVtcGxh
dGUiKQoKICAgIH0KICAgIGRhdGEKfQoKCnJlYWQuY2hhci5jb2xzIDwtIGZ1bmN0aW9uKGZpbGUs
IHN0YXJ0LCBzdG9wCiwgc2tpcD0wCiwgbmxpbmVzPTAKLCBlb2w9J1xuJwosIG5hLnN0cmluZ3M9
J05BJwopCnsKICAjIyMjIG5vIGVycm9yIGNoZWNraW5nIGluIHRoaXMgZnVuY3Rpb24KICAjIyMj
IHN0YXJ0c3RvcCBleHBlY3RlZCBzb3J0ZWQgYnkgU1RPUCAhIQogICMjIyMgb3ZlcmxhcHBpbmcg
Y29sdW1ucyBhbGxvd2VkCiAgIyMjIyBUaGlzIHNlY3Rpb24gY291bGQgYmUgcmVwbGFjZWQgYnkg
YSBDLWNhbGwgcmVhZGluZyBpbiBhIGZpbGUgaW4gY29sdW1ucyBzcGVjaWZpZWQgYnkgc3RhcnQv
c3RvcCAjIyMjCgogIHAgPC0gbGVuZ3RoKHN0YXJ0KQogIAogICMjIG5hLnN0cmluZ3M9TlVMTCBj
dXJyZW50bHkgbm90IHBvc3NpYmxlIGluIHNjYW4oKQogIGFsbC5pbi5vbmUgPC0gc2NhbihmaWxl
ID0gZmlsZSwgc2VwID0gZW9sLCBza2lwID0gc2tpcCwgbmxpbmVzPW5saW5lcwogICAgLCB3aGF0
ID0gY2hhcmFjdGVyKDApLCBuYS5zdHJpbmdzID0gJycsIGZsdXNoID0gRkFMU0UsIHN0cmlwLndo
aXRlID0gRkFMU0UsIHF1aWV0ID0gVFJVRSkKICBubGluZXMgPC0gbGVuZ3RoKGFsbC5pbi5vbmUp
CiAgYWxsLmluLmNvbHMgPC0gbGlzdCgpCiAgZm9yIChpIGluIDE6cCl7CiAgICBhbGwuaW4uY29s
c1tbaV1dIDwtIHN1YnN0cihhbGwuaW4ub25lLCBzdGFydFtpXSwgc3RvcFtpXSkKICAgIGlmICgh
aXMubnVsbChuYS5zdHJpbmdzKSB8fCBsZW5ndGgobmEuc3RyaW5ncyk+MSB8fCBuYS5zdHJpbmdz
WzFdIT0nTkEnKQogICAgICBhbGwuaW4uY29sc1tbaV1dW21hdGNoKGFsbC5pbi5jb2xzW1tpXV0s
IG5hLnN0cmluZ3MsIG5vbWF0Y2ggPSAwKSA+IDBdIDwtICJOQSIKICB9CiAgIyMjIyBFbmQgb2Yg
VGhpcyBzZWN0aW9uIGNvdWxkIGJlIHJlcGxhY2VkIGJ5IGEgQy1jYWxsIHJlYWRpbmcgaW4gYSBm
aWxlIGluIGNvbHVtbnMgc3BlY2lmaWVkIGJ5IHN0YXJ0L3N0b3AgIyMjIwogIHJldHVybihhbGwu
aW4uY29scykKfQoKCgojIyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBjb21tYSBzZXBlcmF0ZWQgdmFs
dWVzCiMjIG5vdGUgdGhhdCBjc3YgaXMgTk9UIGZ1bGx5IHN1cHBvcnRlZCB5ZXQKIyMgc3RyaW5n
cyBtdXN0IG5vdCBjb250YWluIHF1b3RhdGlvbi5tYXJrIG9yIHNlcAojIyAoR05VKSBDb3B5cmln
aHQgSk9BIDE5OTkKcmVhZC5zdnMgPC0gZnVuY3Rpb24gKGZpbGUKLCBoZWFkZXIgPSBUUlVFICAg
ICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBmb3IgQ1NWCiwgc2VwID0gJzsnICAgICAgICAgICAg
ICAgICAgICAgICMjIGNoYW5nZWQgZm9yIENTVgosIHJvdy5uYW1lcwosIGNvbC5uYW1lcwosIGFz
LmlzID0gRkFMU0UKLCBuYS5zdHJpbmdzID0gJycgICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBm
b3IgQ1NWCiwgc2tpcCA9IDAKLCBubGluZXM9SW5mCiwgZGVjLnNlcCA9ICcuJwosIHF1b3RhdGlv
bi5tYXJrID0gJyInCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9ICciIicgICMjIGNoYW5nZWQg
Zm9yIENTVgosIHN0cmlwLndoaXRlID0gVFJVRQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IFRS
VUUKLCB3aWR0aHM9TlVMTAosIHN0YXJ0PU5VTEwKLCBzdG9wPU5VTEwKLCBjb2xzPW1heChsZW5n
dGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKQosIGVvbD0nXG4nCiwgc3Rv
cmFnZS5tb2RlID0gTlVMTAosIGF0dHJpYnV0ZXMgPSBOVUxMCiwgbG9naWNhbHMgPSBOVUxMCiwg
ZmFjdG9ycyA9IE5VTEwKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSBGQUxTRQopIApyZWFkLnRhYmxl
IChmaWxlID0gZmlsZQosIGhlYWRlciA9IGhlYWRlcgosIHNlcCA9IHNlcAosIHJvdy5uYW1lcyA9
IHJvdy5uYW1lcwosIGNvbC5uYW1lcyA9IGNvbC5uYW1lcwosIGFzLmlzID0gYXMuaXMKLCBuYS5z
dHJpbmdzID0gbmEuc3RyaW5ncwosIHNraXAgPSBza2lwCiwgbmxpbmVzID0gbmxpbmVzCiwgZGVj
LnNlcCA9IGRlYy5zZXAKLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9
IHN0cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gc3RyaXAucXVvdGF0aW9uLm1h
cmtzCiwgd2lkdGhzID0gd2lkdGhzCiwgc3RhcnQgPSBzdGFydAosIHN0b3AgPSBzdG9wCiwgY29s
cyA9IGNvbHMKLCBlb2wgPSBlb2wKLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUKLCBhdHRy
aWJ1dGVzID0gYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0b3JzID0gZmFj
dG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9IHRlbXBsYXRlLmF0dHJpYnV0ZQopIAoKCiMjIHdy
YXBwZXIgZnVuY3Rpb24gZm9yIGNvbW1hIHNlcGVyYXRlZCB2YWx1ZXMKIyMgbm90ZSB0aGF0IGNz
diBpcyBOT1QgZnVsbHkgc3VwcG9ydGVkIHlldAojIyBzdHJpbmdzIG11c3Qgbm90IGNvbnRhaW4g
cXVvdGF0aW9uLm1hcmsgb3Igc2VwCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQpyZWFkLmZp
eCA8LSBmdW5jdGlvbiAoZmlsZQosIGhlYWRlciA9IEZBTFNFCiwgc2VwID0gJycKLCByb3cubmFt
ZXMKLCBjb2wubmFtZXMKLCBhcy5pcyA9IEZBTFNFCiwgbmEuc3RyaW5ncyA9ICcnICAgICAgICAg
ICAgICAgICMjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHNraXAgPSAwCiwgbmxpbmVzPUlu
ZgosIGRlYy5zZXAgPSAnLicKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIicKLCBzdHJpcC53aGl0ZSA9IFRSVUUKLCBzdHJpcC5xdW90YXRpb24ubWFy
a3MgPSBUUlVFCiwgd2lkdGhzPU5VTEwKLCBzdGFydD1OVUxMCiwgc3RvcD1OVUxMCiwgY29scz1t
YXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2w9J1xu
JwosIHN0b3JhZ2UubW9kZSA9IE5VTEwKLCBhdHRyaWJ1dGVzID0gTlVMTAosIGxvZ2ljYWxzID0g
TlVMTAosIGZhY3RvcnMgPSBOVUxMCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UKKSAKcmVh
ZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAgPSBzZXAKLCByb3cu
bmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBhcy5pcyA9IGFzLmlz
CiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5saW5lcyA9IG5saW5l
cwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgc3RyaXAu
d2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IHN0cmlwLnF1b3Rh
dGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQKLCBzdG9wID0gc3Rv
cAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0gc3RvcmFnZS5tb2Rl
CiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2ljYWxzCiwgZmFjdG9y
cyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5hdHRyaWJ1dGUKKSAK
CgpyZWFkLnRlbXBsYXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlCiwgZmlsZSA9IHRlbXBsYXRlJGZp
bGUKLCBoZWFkZXIgPSB0ZW1wbGF0ZSRoZWFkZXIKLCBzZXAgPSB0ZW1wbGF0ZSRzZXAKLCByb3cu
bmFtZXMgPSB0ZW1wbGF0ZSRyb3cubmFtZXMKLCBjb2wubmFtZXMgPSB0ZW1wbGF0ZSRjb2wubmFt
ZXMKLCBhcy5pcyA9IEZBTFNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMgbXVzdCBi
ZSBGQUxTRSEKLCBuYS5zdHJpbmdzID0gdGVtcGxhdGUkbmEuc3RyaW5ncwosIHNraXAgPSAwCiwg
bmxpbmVzID0gSW5mCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBxdW90YXRpb24ubWFy
ayA9IHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9IHRl
bXBsYXRlJGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9IHRlbXBsYXRlJHN0
cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gdGVtcGxhdGUkcXVvdGUKLCB3aWR0
aHMgPSB0ZW1wbGF0ZSR3aWR0aHMKLCBzdGFydCA9IE5VTEwKLCBzdG9wID0gTlVMTAosIGNvbHMg
PSBtYXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2wg
PSB0ZW1wbGF0ZSRlb2wKLCBzdG9yYWdlLm1vZGUgPSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKLCBh
dHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gdGVtcGxhdGUkbG9n
aWNhbHMKLCBmYWN0b3JzID0gdGVtcGxhdGUkZmFjdG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9
IEZBTFNFCikKcmVhZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAg
PSBzZXAKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBh
cy5pcyA9IGFzLmlzCiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5s
aW5lcyA9IG5saW5lcwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90
YXRpb24ubWFyawosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrCiwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9
IHN0cmlwLnF1b3RhdGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQK
LCBzdG9wID0gc3RvcAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0g
c3RvcmFnZS5tb2RlCiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2lj
YWxzCiwgZmFjdG9ycyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5h
dHRyaWJ1dGUKKQoKCgojIyB3cml0ZS50YWJsZSgpIGNvbXBsZXRlbHkgcmV3cml0dGVuCiMjIChH
TlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0ZS50YWJsZSA8LSAKZnVuY3Rpb24gKHgsIGZpbGUg
PSAnJwosIGFwcGVuZCA9IEZBTFNFICAgICAgICAgICAgICAgICAjIyBjaGFuZ2VkOiBhcHBlbmRp
bmcgc3VwcHJlc3NlcyBjb2wubmFtZXMgKGFuZCBjb3JuZXIubmFtZSkKLCBxdW90ZSA9IFRSVUUg
ICAgICAgICAgICAgICAgICAgIyMgY2hhbmdlZDogdmVjdG9yIG9mIGxvZ2ljYWxzIGFsc28gYWxs
b3dlZAosIHNlcCA9ICcgJwosIGVvbCA9ICdcbicKLCBuYSA9ICdOQScgICAgICAgICAgICAgICAg
ICAgICAgICAjIyBjaGFuZ2VkOiBkZWZhdWx0ICdOQScgaW5zdGVhZCBvZiBOQSAob2xkIGRvY3Ug
c2FpZCAndGhlIFNUUklORyB0byB1c2UgZm9yIG1pc3NpbmcgdmFsdWVzJykKLCByb3cubmFtZXMg
PSBUUlVFCiwgY29sLm5hbWVzID0gVFJVRSAgICAgICAgICAgICAgICMjIG5vdGU6IGNvbC5uYW1l
cyBtYXkgY2F1c2UgZXh0ZW5zaW9uIG9mIGNvbHVtbiB3aWR0aHMKLCBjb3JuZXIubmFtZSA9ICdy
b3duYW1lcycgICAgICAgICAgICAjIyBuZXc6IG9ubHkgdXNlZCBpZiByb3cubmFtZXMgYW5kIGNv
bC5uYW1lcywgc2V0IHRvICcnIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5Ciwgcm93Lm5hbWVz
LndpZHRoID0gdW5saXN0KHdpZHRoc1sxXSkgIyMgbmV3CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicg
ICAgICAgICAgICMjIG5ldwosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSAnIicgICAjIyBuZXc6
IHN1YnN0aXR1dGlvbiBvbmx5IGlmIGl0IGRpZmZlcnMgZnJvbSBxdW90YXRpb24ubWFyawosIGxv
Z2ljYWxzID0gYygnRkFMU0UnLCAnVFJVRScpICAjIyBuZXc6IGUuZy4gYygwLDEpIG9yIGMoJ25v
JywneWVzJyksIG51bWVyaWNzIGFyZSBjb2VyY2VkIHRvIGludGVnZXIKLCBmYWN0b3JzID0gYygn
bGV2ZWxzJywgJ2NvZGVzJykgIyMgbmV3OiBjaG9vc2UgZWl0aGVyICdsZXZlbHMnIG9yICdjb2Rl
cycgKGFzLm51bWVyaWMoKSwgbm90IGNvZGVzKCkpCiwgZGVjLnNlcCA9ICcuJyAgICAgICAgICAg
ICAgICAgICMjIG5ldwosIGRpZ2l0cyA9IE5VTEwgICAgICAgICAgICAgICAgICAjIyBuZXc6IGNh
biByZWR1Y2UgZGlnaXRzLCBzcGVjaWZpeSBhIHNpbmdsZSB2YWx1ZSwgYSB2ZWN0b3Igb3IgYSBs
aXN0Ciwgd2lkdGhzID0gTlVMTCAgICAgICAgICAgICAgICAgICMjIG5ldzogY2FuIGZvcmNlIGZ3
Ziwgc3BlY2lmeSBUUlVFLCBhIGNvbW1vbiB3aWR0aCwgYSB2ZWN0b3Igb3IgYSBsaXN0IChsaXN0
cyBjYW4gaGF2ZSBOVUxMcykKLCBwYWQubWV0aG9kPWMoImFiYnJldmlhdGUiLCAidmFyaWFibGUi
LCAiZXh0ZW5kIiwgInJjdXQiLCAibGN1dCIpICMgbmV3OiBoYW5kbGluZyBvZiBzdHJpbmdzIGxv
bmdlciB0aGFuIHdpZHRoCiwgbWluLmRpZ2l0cyA9IDggICAgICAgICAgICAgICAgICMjIG5ldzog
Ciwgd2Fybi5zZXBlcmF0b3IgPSBGQUxTRSAgICAgICAgICMjIG5ldzogY2hlY2tpbmcgZm9yIHNl
cGVyYXRvciBjb3N0cyAobmV2ZXIgY2hlY2tlZCBpZiBzZXA9Jycgb3Igc2VwPScgJykKLCB3YXJu
LnF1b3RhdGlvbi5tYXJrID0gRkFMU0UgICAgIyMgbmV3OiBjaGVja2luZyBmb3Igc2VwZXJhdG9y
IGNvc3RzCikgCnsKCiAgICAjZGVmYXVsdCBmb3IgZGlnaXRzCiAgICBvbGQuZGlnaXRzIDwtIC5P
cHRpb25zJGRpZ2l0cwogICAgb24uZXhpdChvcHRpb25zKGRpZ2l0cz1vbGQuZGlnaXRzKSkKICAg
IG9wdGlvbnMoZGlnaXRzPWNlaWxpbmcobG9nKC5NYWNoaW5lJGRvdWJsZS5iYXNlXi5NYWNoaW5l
JGRvdWJsZS5kaWdpdHMsIDEwKSkpCgogICAgIyBjYWxjdWxhdGluZyBkaWdpdHMgZ2l2ZW4gd2lk
dGhzCiAgICB3aWR0aDJkaWdpdHMuZG91YmxlIDwtIGZ1bmN0aW9uKHdpZHRoKQogICAgICBtYXgo
bWluLmRpZ2l0cywgbWluKC5PcHRpb25zJGRpZ2l0cywgLk9wdGlvbnMkZGlnaXRzIC0gKG5jaGFy
KGZvcm1hdCguTWFjaGluZSRkb3VibGUueG1pbikpIC0gd2lkdGggKSkpCiAgICB3aWR0aDJkaWdp
dHMuY29tcGxleCA8LSBmdW5jdGlvbih3aWR0aCkKICAgICAgbWF4KG1pbi5kaWdpdHMsIG1pbigu
T3B0aW9ucyRkaWdpdHMsIC5PcHRpb25zJGRpZ2l0cyAtIChuY2hhcihmb3JtYXQoLk1hY2hpbmUk
ZG91YmxlLnhtaW4pKSoyKzIgLSB3aWR0aCApKSkKCiAgICAjIGNyZWF0ZSB0ZW1wbGF0ZSBhbmQg
Y29sbGVjdCBzb21lIGluZm9zIGF0IHRoZSByaWdodCBtb21lbnQKICAgIHRlbXBsYXRlIDwtIGxp
c3QoKQoKICAgICNpbml0aWFsaXplIHdhcm5pbmcgaW5kaWNhdG9ycwogICAgc2VwZXJhdG9yLndh
cm5pbmcgPC0gRkFMU0UKICAgIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPC0gRkFMU0UKICAgIGV4
dGVuc2lvbi53YXJuaW5nIDwtIEZBTFNFCgogICAgI21ldGhvZAogICAgcGFkLm1ldGhvZCA8LSBt
YXRjaC5hcmcocGFkLm1ldGhvZCkKCiAgICAjbG9naWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxz
KT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAg
IyBmYWN0b3JzCiAgICBmYWN0b3JzIDwtIG1hdGNoLmFyZyhmYWN0b3JzKQogICAgIyBjb21wYXJl
IHNlcCBhbmQgZGVjLnNlcAogICAgaWYgKGRlYy5zZXA9PXNlcCkKICAgICAgc3RvcCgicGFyc2lu
ZyBydWxlIHZpb2xhdGlvbjogc2VwIG11c3Qgbm90IGVxdWFsIGRlYy5zZXAiKQoKICAgICMgZG9u
J3QgdW5kZXJzdGFuZCB3aHkgb2xkIHdyaXRlLnRhYmxlIGNvbnZlcnRzIHRvIGRhdGFmcmFtZSBh
bmQgZG9lc24ndCB1c2UgaXQsIAogICAgIyBob3dldmVyIGtlZXAgY29udmVydGluZyB0byBkYXRh
ZnJhbWUgdG8gaGF2ZSBhIHVuaXF1ZSBzdGFydGluZyBwb2ludAogICAgaWYgKCFpcy5kYXRhLmZy
YW1lKHgpKSB4IDwtIGRhdGEuZnJhbWUoeCkKICAgIGQgPC0gZGltbmFtZXMoeCkKICAgIHAgPC0g
bmNvbCh4KQogIAogICAgIyBnZXQgY29sdW1uIGluZm9zLCBjb2xtb2RlIG1heSBjaGFuZ2UgbGF0
ZXIKICAgIHRlbXBsYXRlJHN0b3JhZ2UubW9kZSA8LSBjb2xtb2RlIDwtIHVubmFtZSh1bmxpc3Qo
bGFwcGx5KHgsIHN0b3JhZ2UubW9kZSkpKQogICAgdGVtcGxhdGUkYXR0cmlidXRlcyA8LSBsYXBw
bHkoeCwgYXR0cmlidXRlcykKICAgIGlzLmEuZmFjdG9yIDwtIHVubGlzdChsYXBwbHkodGVtcGxh
dGUkYXR0cmlidXRlcywgRlVOPWZ1bmN0aW9uKHgpYW55KCFpcy5uYShtYXRjaCgnZmFjdG9yJywg
eCRjbGFzcykpKSApKQogICAgCiAgICAjIHByZXBhcmUgcXVvdGUgYXMgTE9HSUNBTCB2ZWN0b3IK
ICAgICMgQlVUIGhhdmUgTkFzIGluIGV4cGFuZGVkIHZlY3RvciBpbnN0ZWFkIG9mIEZBTFNFCiAg
ICAjIGFzIHNvbWUgY29sdW1ucyBzdGlsbCBtYXkgY2hhbmdlIHRvIGNoYXJhY3RlcgogICAgaWYg
KGlzLmxvZ2ljYWwocXVvdGUpKSB7CiAgICAgICAgaWYgKGxlbmd0aChxdW90ZSk9PTEpewogICAg
ICAgICAgaWYgKHF1b3RlKSAKICAgICAgICAgICAgcXVvdGUgPC0gaWZlbHNlKGNvbG1vZGU9PSJj
aGFyYWN0ZXIiLCBUUlVFLCBOQSkKICAgICAgICAgICMgZWxzZQogICAgICAgICAgICAjIHF1b3Rl
PT1GQUxTRQogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoKHF1b3RlKSE9cCkgCiAgICAgICAgICBz
dG9wKCJpbnZhbGlkIGxlbmd0aCBvZiBsb2dpY2FsIHF1b3RlIHZlY3RvciIpCiAgICB9IGVsc2Ug
aWYgKGlzLm51bWVyaWMocXVvdGUpKSB7CiAgICAgICAgaWYgKGFueShxdW90ZSA8IDEgfCBxdW90
ZSA+IHApKSAKICAgICAgICAgICAgc3RvcCgiaW52YWxpZCBudW1iZXJzIGluIHF1b3RlIikKICAg
IAlxdW90ZSA8LSAoMTpwKSAlaW4lIHF1b3RlCiAgICB9IGVsc2UgCiAgICAgICAgc3RvcCgiaW52
YWxpZCBxdW90ZSBzcGVjaWZpY2F0aW9uIikKCiAgICAjIHByZXBhcmUgY29sLm5hbWVzCiAgICBp
ZiAoaXMubG9naWNhbChjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gaWYgKGNvbC5u
YW1lcykgZFtbMl1dIGVsc2UgTlVMTAogICAgZWxzZSB7CiAgICAgICAgaWYgKGxlbmd0aChjb2wu
bmFtZXMpICE9IHApIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlkIGNvbC5uYW1lcyBzcGVjaWZp
Y2F0aW9uIikKICAgICAgICBjb2wubmFtZXMgPC0gYXMuY2hhcmFjdGVyKGNvbC5uYW1lcykKICAg
IH0KICAgIGlmIChhbnkoZHVwbGljYXRlZChjKGNvbC5uYW1lcywgY29ybmVyLm5hbWUpKSkpd2Fy
bmluZygiY29sLm5hbWVzIGFuZCBjb3JuZXIubmFtZSBhcmUgbm90IHVuaXF1ZSIpCiAgICAjIGZp
eCBjb2wubmFtZXMgYW5kIGNvcm5lci5uYW1lIGZvciB0ZW1wbGF0ZQogICAgdGVtcGxhdGUkY29s
Lm5hbWVzIDwtIGNvbC5uYW1lcwogICAgdGVtcGxhdGUkY29ybmVyLm5hbWUgPC0gY29ybmVyLm5h
bWUKICAgICMgaGFuZGxlIHF1b3Rpbmcgb2YgY29sLm5hbWVzIGFscmVhZHkgaGVyZSwgYXMgaXQg
aW5mbHVlbmNlcyB3aWR0aHMKICAgIGlmICghaXMubnVsbChjb2wubmFtZXMpKSB7CiAgICAgIGlm
IChhbnkocXVvdGUsIG5hLnJtPVRSVUUpKQogICAgICAgIGNvbC5uYW1lcyA8LSBwYXN0ZShxdW90
YXRpb24ubWFyaywgY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgfQoKICAg
ICMgcHJlcGFyZSByb3cubmFtZXMKICAgIGlmIChpcy5sb2dpY2FsKHJvdy5uYW1lcykpCiAgICAg
ICAgcm93Lm5hbWVzIDwtIGlmIChyb3cubmFtZXMpIGRbWzFdXSBlbHNlIE5VTEwKICAgIGVsc2Ug
ewogICAgICAgIGlmIChsZW5ndGgocm93Lm5hbWVzKSAhPSBucm93KHgpKSAKICAgICAgICAgIHN0
b3AoImludmFsaWQgcm93Lm5hbWVzIHNwZWNpZmljYXRpb24iKQogICAgICAgIGlmIChhbnkoZHVw
bGljYXRlZChyb3cubmFtZXMpKSkKICAgICAgICAgIHdhcm5pbmcoImR1cGxpY2F0ZWQgcm93Lm5h
bWVzIikKICAgICAgICByb3cubmFtZXMgPC0gYXMuY2hhcmFjdGVyKHJvdy5uYW1lcykKICAgIH0K
CiAgICAjIHByZXBhcmUgcGFyYW1ldGVycyB0byBmb3JtYXQgLyBwYWQgKGZvcm1hdEMgaXMgdG9v
IHNsb3cpCiAgICAjIHdpZHRocyBhbmQgZGlnaXRzIG1heSBjaGFuZ2UgbGF0ZXIKICAgIGZpeGVk
LndpZHRoIDwtICFpcy5udWxsKGRpZ2l0cykgfHwgIWlzLm51bGwod2lkdGhzKQogICAgaWYgKGZp
eGVkLndpZHRoKXsKCiAgICAgICAgaWYgKGlzLm51bGwod2lkdGhzKSkKICAgICAgICAgIHdpZHRo
cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICBlbHNlIGlmIChsZW5ndGgod2lkdGhzKT09
MSkKICAgICAgICAgIGlmIChpcy5sb2dpY2FsKHdpZHRocykpCiAgICAgICAgICAgIGlmICh3aWR0
aHMpewogICAgICAgICAgICAgIHdpZHRocyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICAg
ICAgICByb3cubmFtZXMud2lkdGggPC0gTlVMTCAgIyMgbWFrZSBzaHVyZSBpdCBpc24ndCBUUlVF
IGZyb20gd3JhcHBlcgogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICAgIHN0b3AoIndpZHRo
PUZBTFNFIG5vdCBhbGxvd2VkIikKICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHdpZHRocyA8
LSBhcy5saXN0KHJlcCh3aWR0aHMsIHApKQogICAgICAgIGVsc2UgaWYgKGxlbmd0aCh3aWR0aHMp
PT1wKSAKICAgICAgICAgIHdpZHRocyA8LSBhcy5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAg
ICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3Igd2lkdGhzIikKCiAgICAgICAgaWYgKGlz
Lm51bGwoZGlnaXRzKSkKICAgICAgICAgIGRpZ2l0cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAg
ICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09MSkgCiAgICAgICAgICBkaWdpdHMgPC0gYXMu
bGlzdChyZXAoZGlnaXRzLCBwKSkKICAgICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09cCkK
ICAgICAgICAgIGRpZ2l0cyA8LSBhcy5saXN0KGRpZ2l0cykKICAgICAgICBlbHNlCiAgICAgICAg
ICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3IgZGlnaXRzIikKICAgICAgIAogICAgfQoKCiAgICAj
IGNvbnZlcnQgdG8gY2hhcmFjdGVyIHJlc3BlY3RpbmcgbG9naWNhbHM9LCBmYWN0b3JzPSwgbmE9
LCBxdW90ZT0sIGRlYy5zZXA9IGFuZCBmaXhlZC53aWR0aAogICAgZm9yIChpIGluIDE6cCl7Cgog
ICAgICAgIGNvbHVtbiA8LSB4W1tpXV0KICAgICAgICBpc25hIDwtIGlzLm5hKGNvbHVtbikKCiAg
ICAgICAgIyBjb252ZXJ0IGxvZ2ljYWwgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5n
IG9uIGxvZ2ljYWxzPQogICAgICAgIGlmIChjb2xtb2RlW2ldPT0nbG9naWNhbCcpIHsKICAgICAg
ICAgIGNvbHVtbiA8LSBsb2dpY2Fsc1tjb2x1bW4rMV0KICAgICAgICAgIGNvbG1vZGVbaV0gPC0g
c3RvcmFnZS5tb2RlKGxvZ2ljYWxzKQogICAgICAgIH0KCiAgICAgICAgIyBjb252ZXJ0IGZhY3Rv
cnMgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5nIG9uIGZhY3RvcnM9CiAgICAgICAg
aWYgKGlzLmZhY3Rvcihjb2x1bW4pKXsKICAgICAgICAgIGlmIChmYWN0b3JzPT0nbGV2ZWxzJykg
ewogICAgICAgICAgICBjb2x1bW4gPC0gYXMuY2hhcmFjdGVyKGNvbHVtbikKICAgICAgICAgICAg
Y29sbW9kZVtpXSA8LSAnY2hhcmFjdGVyJwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAg
ICAgICAgICAgIGNvbHVtbiA8LSBhcy5pbnRlZ2VyKGNvbHVtbikKICAgICAgICAgICAgY29sbW9k
ZVtpXSA8LSAnaW50ZWdlcicKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgbm93IHRy
ZWF0IGNvbXBsZXgsIGRvdWJsZSwgaW50ZWdlciBvciBjaGFyYWN0ZXIKICAgICAgICBpZiAoY29s
bW9kZVtpXT09J2NvbXBsZXgnKXsKICAgICAgICAgIGlmIChmaXhlZC53aWR0aCl7CiAgICAgICAg
ICAgIGlmICghaXMubnVsbCh3aWR0aHNbW2ldXSkgJiYgaXMubnVsbChkaWdpdHNbW2ldXSkpCiAg
ICAgICAgICAgICAgZGlnaXRzW1tpXV0gPC0gd2lkdGgyZGlnaXRzLmNvbXBsZXgod2lkdGhzW1tp
XV0pCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1uLCBkaWdpdHM9ZGlnaXRzW1tp
XV0pCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgY29sdW1uIDwtIGFzLmNoYXJhY3Rlcihj
b2x1bW4pCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGVjLnNlcCE9Jy4nKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZ3N1YignWy5dJywgZGVjLnNlcCwgY29sdW1uLCBpZ25vcmUuY2FzZT1GQUxT
RSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdkb3Vi
bGUnKXsKCiAgICAgICAgICBpZiAoZml4ZWQud2lkdGgpeyAKICAgICAgICAgICAgaWYgKCFpcy5u
dWxsKHdpZHRoc1tbaV1dKSAmJiBpcy5udWxsKGRpZ2l0c1tbaV1dKSkKICAgICAgICAgICAgICBk
aWdpdHNbW2ldXSA8LSB3aWR0aDJkaWdpdHMuZG91YmxlKHdpZHRoc1tbaV1dKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZm9ybWF0KGNvbHVtbiwgZGlnaXRzPWRpZ2l0c1tbaV1dKQogICAgICAgICAg
fWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29sdW1uKQogICAgICAg
ICAgaWYgKGRlYy5zZXAhPScuJykgCiAgICAgICAgICAgIGNvbHVtbiA8LSBnc3ViKCdbLl0nLCBk
ZWMuc2VwLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkKICAgICAg
ICAgIAogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdpbnRlZ2VyJyl7CgogICAgICAg
ICAgaWYgKGZpeGVkLndpZHRoKXsgCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1u
KQogICAgICAgICAgfWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29s
dW1uKQogICAgICAgICAgCiAgICAgICAgfWVsc2V7ICMgY29sbW9kZVtpXT09J2NoYXJhY3RlcicK
CiAgICAgICAgICAjIGNoZWNrIGZvciBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzCiAgICAgICAgICBp
ZiAod2Fybi5zZXBlcmF0b3IgCiAgICAgICAgICAgICAgJiYgIShzZXAgJWluJSBjKCIiLCAiICIp
KSAKICAgICAgICAgICAgICAmJiBhbnkoZ3JlcChzZXAsIGNvbHVtbiwgaWdub3JlLmNhc2U9RkFM
U0UsIGV4dGVuZGVkPUZBTFNFLCB2YWx1ZT1GQUxTRSkpCiAgICAgICAgICAgICApewogICAgICAg
ICAgICAgICB3YXJuaW5nKHBhc3RlKCJzZXBlcmF0b3IgaW4gY29sdW1uIDwiLCBkW1syXV1baV0s
ICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgc2VwZXJhdG9yLndhcm5pbmcgPC0gVFJVRQog
ICAgICAgICAgICAgIH0KICAgICAgICAgIGlmICh3YXJuLnF1b3RhdGlvbi5tYXJrIAogICAgICAg
ICAgICAgICYmIGFueShncmVwKHF1b3RhdGlvbi5tYXJrLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZB
TFNFLCBleHRlbmRlZD1GQUxTRSwgdmFsdWU9RkFMU0UpKQogICAgICAgICAgICAgKXsKICAgICAg
ICAgICAgICAgd2FybmluZyhwYXN0ZSgicXVvdGF0aW9uIG1hcmsgaW4gY29sdW1uIDwiLCBkW1sy
XV1baV0sICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA8LSBUUlVFCiAgICAgICAgICAgICAgfQoKICAgICAgICAgIGlmIChxdW90YXRpb24ubWFyayAh
PSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrKQogICAgICAgICAgICBjb2x1bW4gPC0gZ3N1YihxdW90
YXRpb24ubWFyaywgZXNjYXBlZC5xdW90YXRpb24ubWFyaywgY29sdW1uLCBpZ25vcmUuY2FzZT1G
QUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgICAgaWYgKCBhbnkocXVvdGUsIG5hLnJtPVRS
VUUpICYmIGlzLm5hKHF1b3RlW2ldKSApCiAgICAgICAgICAgICAgcXVvdGVbaV0gPC0gVFJVRQog
ICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICAjIGZpcnN0IHF1b3RlCiAgICAgICAgaWYgKCFp
cy5uYShxdW90ZVtpXSkgJiYgcXVvdGVbaV0pIAogICAgICAgICAgY29sdW1uIDwtIHBhc3RlKHF1
b3RhdGlvbi5tYXJrLCBjb2x1bW4sIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCgogICAgICAgICMg
dGhlbiBkZXRlcm1pbmUgYWN0dWFsIHdpZHRoCiAgICAgICAgaWYgKGZpeGVkLndpZHRoKQogICAg
ICAgICAgaWYgKGNvbG1vZGVbaV09PSdjaGFyYWN0ZXInKQoJICAgIGFjdHVhbC53aWR0aCA8LSBt
YXgobmNoYXIoY29sdW1uKSkKCSAgZWxzZQoJICAgIGFjdHVhbC53aWR0aCA8LSAobmNoYXIoY29s
dW1uWzFdKSkKCSAgICAKICAgICAgICAjIHRoZW4gYWRkIG5hLnN0cmluZwogICAgICAgICMgWzFd
OiBhbGxvdyBuYSB0byBjYXJyeSBuYS5zdHJpbmdzIGludG8gdGVtcGxhdGUsIGJ1dCB1c2Ugb25s
eSBmaXJzdCBvbmUKICAgICAgICBpZiAoIWlzLm5hKHF1b3RlW2ldKSAmJiBxdW90ZVtpXSl7CiAg
ICAgICAgICBuYS53aWR0aCA8LSBuY2hhcihuYVsxXSkrMgogICAgICAgICAgaWYgKGZpeGVkLndp
ZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAg
ICAgICAgICAgIyBwYWQgYWxyZWFkeSBoZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBw
YWQocGFzdGUocXVvdGF0aW9uLm1hcmssIG5hWzFdLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg9YWN0dWFsLndpZHRoKQogICAg
ICAgICAgZWxzZQogICAgICAgICAgICAjIG5lZWQgbGF0ZXIgcGFkZGluZyBhbnlob3cKICAgICAg
ICAgICAgY29sdW1uW2lzbmFdIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBuYVsxXSwgcXVvdGF0
aW9uLm1hcmssIHNlcD0nJykKICAgICAgICB9ZWxzZXsKICAgICAgICAgIG5hLndpZHRoIDwtIG5j
aGFyKG5hWzFdKQogICAgICAgICAgaWYgKGZpeGVkLndpZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0
ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAgICAgICAgICAgIyBwYWQgYWxyZWFkeSBo
ZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBwYWQobmFbMV0sIHdpZHRoPWFjdHVhbC53
aWR0aCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgIyBuZWVkIGxhdGVyIHBhZGRpbmcgYW55
aG93CiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBuYVsxXQogICAgICAgIH0KCiAgICAgICAg
IyB0aGVuIGRldGVybWluZSBmaW5hbCB3aWR0aCAKICAgICAgICBpZiAoZml4ZWQud2lkdGgpewoK
ICAgICAgICAgICMgKG5jaGFyKGNvbC5uYW1lc1tpXSkgbWF5IGJlIG51bWVyaWMoMCksIHdpZHRo
c1tbaV1dIG1heSBOVUxMKQogICAgICAgICAgbWF4LndpZHRoIDwtIG1heChhY3R1YWwud2lkdGgs
IG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ldXSkgCiAgICAgICAgICBt
aW4ud2lkdGggPC0gbWF4KG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ld
XSkKCiAgICAgICAgICBpZiAoY29sbW9kZVtpXSA9PSAnY2hhcmFjdGVyJyl7CiAgICAgICAgICAg
ICMganVzdCBwYWQ/CiAgICAgICAgICAgIGlmICggaXMubnVsbCh3aWR0aHNbW2ldXSkgfHwgbWF4
LndpZHRoPT13aWR0aHNbW2ldXSB8fCBtaW4ud2lkdGg+d2lkdGhzW1tpXV0gCiAgICAgICAgICAg
ICAgICAgfHwgcGFkLm1ldGhvZCAlaW4lIGMoInZhcmlhYmxlIiwgImV4dGVuZCIpICkKICAgICAg
ICAgICAgICBjb2x1bW4gPC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAg
ICBlbHNlIHsKICAgICAgICAgICAgICAjIHRyeSB0byByZWR1Y2UgdG8gd2lkdGhbW2ldXSAoPT1t
aW4ud2lkdGgpCiAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChjb2x1bW4sIHdpZHRoPW1pbi53
aWR0aCwgbWV0aG9kPXBhZC5tZXRob2QpCiAgICAgICAgICAgICAgIyB0ZXN0IGlmIHN1Y2Nlc3Nm
dWxsCiAgICAgICAgICAgICAgaWYgKHBhZC5tZXRob2Q9PSdhYmJyZXZpYXRlJyl7CiAgICAgICAg
ICAgICAgICBtYXgud2lkdGggPC0gbWF4KG5jaGFyKGNvbHVtbikpCiAgICAgICAgICAgICAgICBp
ZiAobWF4LndpZHRoPm1pbi53aWR0aCkKICAgICAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChj
b2x1bW4sIHdpZHRoPW1heC53aWR0aCkKICAgICAgICAgICAgICB9ZWxzZSAjIHBhZC5tZXRob2Qg
JWluJSBjKCJyY3V0IiwgImxjdXQiKQogICAgICAgICAgICAgICAgbWF4LndpZHRoIDwtIG1pbi53
aWR0aAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgfWVsc2V7ICMgY29sbW9k
ZVtpXSAlaW4lIGMoY29tcGxleCwgZG91YmxlLCBpbnRlZ2VyKQogICAgICAgICAgICAjIChhY3R1
YWwud2lkdGggYW5kIG5hLndpZHRoIDwgYWN0dWFsLndpZHRoIGFscmVhZHkgcGFkZGVkKQogICAg
ICAgICAgICBpZiAobWF4LndpZHRoPmFjdHVhbC53aWR0aCkKICAgICAgICAgICAgICBjb2x1bW4g
PC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAgfQoKICAgICAgICAgIGlm
ICghaXMubnVsbChjb2wubmFtZXMpKQogICAgICAgICAgICBjb2wubmFtZXNbaV0gPC0gcGFkKGNv
bC5uYW1lc1tpXSwgd2lkdGg9bWF4LndpZHRoKQoKICAgICAgICAgICMgd2FybmluZ3MgYW5kIG1h
aW50YWluaW5nIHdpZHRoW1tpXV0KICAgICAgICAgIGlmIChpcy5udWxsKHdpZHRoc1tbaV1dKSkK
ICAgICAgICAgICAgd2lkdGhzW1tpXV0gPC0gbWF4LndpZHRoCiAgICAgICAgICBlbHNlIGlmICht
YXgud2lkdGggPiB3aWR0aHNbW2ldXSl7CiAgICAgICAgICAgIHdpZHRoc1tbaV1dIDwtIG1heC53
aWR0aAogICAgICAgICAgICBleHRlbnNpb24ud2FybmluZyA8LSBUUlVFCiAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImV4dGVuZGluZyB3aWR0aCBvZiBjb2x1bW4gPCIsIGRbWzJdXVtpXSwgIj4g
dG8gIiwgbWF4LndpZHRoLCAiIHRvIGF2b2lkIHRydW5jYXRpbmciLCBzZXA9IiIpKQogICAgICAg
ICAgfQoKICAgICAgICB9CgogICAgICAgIHhbW2ldXSA8LSBjb2x1bW4KICAgIH0KCiAgICAjIGRl
Y2lkZSBhYm91dCBjb3JuZXIubmFtZQogICAgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCBpcy5u
dWxsKGNvbC5uYW1lcykpIAogICAgICBjb3JuZXIubmFtZSA8LSBOVUxMCiAgICAjIGhhbmRsZSBx
dW90aW5nIGFuZCB3aWR0aCBvZiByb3cubmFtZXMgYW5kIGNvcm5lci5uYW1lLCBhbmQgYmluZCB0
byB4CiAgICBpZiAoIWlzLm51bGwocm93Lm5hbWVzKSl7CiAgICAgIGlmIChhbnkocXVvdGUsIG5h
LnJtPVRSVUUpKSB7CiAgICAgICAgcm93Lm5hbWVzIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBy
b3cubmFtZXMsIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCiAgICAgICAgaWYgKCFpcy5udWxsKGNv
cm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0gcGFzdGUocXVvdGF0aW9uLm1hcmssIGNvcm5lci5u
YW1lLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgICB9CiAgICAgIGlmIChmaXhlZC53aWR0
aCB8fCAhaXMubnVsbChyb3cubmFtZXMud2lkdGgpKSB7CiAgICAgICAgbWF4LndpZHRoIDwtIG1h
eChuY2hhcihjKGNvcm5lci5uYW1lLCByb3cubmFtZXMpKSkKICAgICAgICBpZiAoaXMubnVsbChy
b3cubmFtZXMud2lkdGgpKQogICAgICAgICAgcm93Lm5hbWVzLndpZHRoIDwtIG1heC53aWR0aAog
ICAgICAgIGVsc2UgaWYgKHJvdy5uYW1lcy53aWR0aDxtYXgud2lkdGgpewogICAgICAgICAgd2Fy
bmluZyhwYXN0ZSgiZXh0ZW5kaW5nIHdpZHRoIG9mIHJvdy5uYW1lcyB0byAiLCBtYXgud2lkdGgs
ICIgdG8gYXZvaWQgdHJ1bmNhdGluZyIsIHNlcD0iIikpCiAgICAgICAgICBleHRlbnNpb24ud2Fy
bmluZyA8LSBUUlVFCiAgICAgICAgICByb3cubmFtZXMud2lkdGggPC0gbWF4LndpZHRoCiAgICAg
ICAgfQogICAgICAgIHJvdy5uYW1lcyA8LSBwYWQocm93Lm5hbWVzLCB3aWR0aD1yb3cubmFtZXMu
d2lkdGgpCiAgICAgICAgaWYgKCFpcy5udWxsKGNvcm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0g
cGFkKGNvcm5lci5uYW1lLCB3aWR0aD1yb3cubmFtZXMud2lkdGgpCiAgICAgIH0KICAgICAgeCA8
LSBjYmluZChyb3cubmFtZXMsIHgpCiAgICB9CgogICAgIyBvdXQgY29sLm5hbWVzCiAgICBpZiAo
IWlzLm51bGwoY29sLm5hbWVzKSl7CiAgICAgIGlmIChhcHBlbmQpIAogICAgICAgIHdhcm5pbmco
ImRyb3BwaW5nIGNvbHVtbiBuYW1lcyBiZWNhdXNlIG9mIGFwcGVuZD1UUlVFIikKICAgICAgZWxz
ZXsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBjKGNvcm5lci5uYW1lLCBjb2wubmFtZXMpCiAgICAg
ICAgICBjYXQoY29sLm5hbWVzLCBmaWxlPWZpbGUsIHNlcCA9IHNlcCwgYXBwZW5kID0gYXBwZW5k
KQogICAgICAgICAgYXBwZW5kIDwtIFRSVUUKICAgICAgICAgIGNhdChlb2wsIGZpbGU9ZmlsZSwg
YXBwZW5kID0gYXBwZW5kKQogICAgICB9CiAgICB9CiAgICAjIG91dCBkYXRhCiAgICBjYXQodCh4
KSwgZmlsZT1maWxlLCBzZXAgPSBjKHJlcChzZXAsIG5jb2woeCkgLSAxKSwgZW9sKSwgYXBwZW5k
ID0gYXBwZW5kKQoKICAgICMgY3JlYXRlIHRlbXBsYXRlCiAgICBpZiAoaXMubnVsbChjb2wubmFt
ZXMpKXsKICAgICAgY29sLm5hbWVzIDwtIGRbWzJdXQogICAgICBoZWFkZXIgPC0gRkFMU0UKICAg
IH1lbHNlewogICAgICBjb2wubmFtZXMgPC0gdGVtcGxhdGUkY29sLm5hbWVzCiAgICAgIGhlYWRl
ciA8LSBUUlVFCiAgICB9CgogICAgaWYgKGFueShxdW90ZSwgbmEucm09VFJVRSkpewogICAgICBx
dW90ZVtpcy5uYShxdW90ZSldIDwtIEZBTFNFCiAgICB9ZWxzZQogICAgICBxdW90ZSA8LSByZXAo
RkFMU0UsIHApCgogICAgaWYgKCFpcy5udWxsKHJvdy5uYW1lcykpewogICAgICByb3cubmFtZXMu
bG9jICA8LSAxCiAgICAgIGNvbC5uYW1lcyA8LSBjKHRlbXBsYXRlJGNvcm5lci5uYW1lLCBjb2wu
bmFtZXMpCiAgICAgIHF1b3RlIDwtIGMoYW55KHF1b3RlLCBuYS5ybT1UUlVFKSwgcXVvdGUpCiAg
ICAgIGNvbG1vZGUgPC0gYygnY2hhcmFjdGVyJywgdGVtcGxhdGUkc3RvcmFnZS5tb2RlKQogICAg
ICB3aWR0aHMgPC0gYyhyb3cubmFtZXMud2lkdGgsIHdpZHRocykKICAgICAgaWYgKCFpcy5udWxs
KGRpZ2l0cykpIGRpZ2l0cyA8LSBjKGxpc3QoTlVMTCksIGRpZ2l0cykKICAgICAgdGVtcGxhdGUk
YXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgdGVtcGxhdGUkYXR0cmli
dXRlcykKICAgICAgbmFtZXModGVtcGxhdGUkYXR0cmlidXRlcylbMV0gPC0gdGVtcGxhdGUkY29y
bmVyLm5hbWUKICAgIH1lbHNlewogICAgICByb3cubmFtZXMubG9jIDwtIDAKICAgICAgY29sbW9k
ZSA8LSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKICAgIH0KCiAgICBxdW90YXRpb24ubWFyay53YXJu
aW5nIDwtIGlmZWxzZSh3YXJuLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyay53YXJuaW5n
LCBOQSkKICAgIHNlcGVyYXRvci53YXJuaW5nIDwtIGlmZWxzZSh3YXJuLnNlcGVyYXRvciwgc2Vw
ZXJhdG9yLndhcm5pbmcsIE5BKQoKICAgIHRlbXBsYXRlIDwtIHN0cnVjdHVyZSgKICAgICAgbGlz
dCgKICAgICAgLCBmaWxlID0gZmlsZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIGVvbCA9IGVvbCAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiAgICAgICwg
c2VwID0gc2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcCAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIG5hLnN0cmluZ3Mg
PSBuYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBidXQgYWxs
b3cgbW9yZSB0aGFuIG9uZSAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBxdW90YXRpb24ubWFy
ayA9IHF1b3RhdGlvbi5tYXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVy
KSwgZS5nLiA8Ij4gaW4gQ1NWIAogICAgICAsIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2Nh
cGVkLnF1b3RhdGlvbi5tYXJrICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiIj4gaW4g
Q1NWCiAgICAgICwgbG9naWNhbHMgPSBsb2dpY2FscyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIHR3byB2YWx1ZXMgcmVwcmVzZW50aW5nIEZBTFNFIGFuZCBUUlVFIChu
dW1lcmljYWwgb3IgY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMg
aW4gZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAsIHJvdy5u
YW1lcy5sb2MgPSByb3cubmFtZXMubG9jICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBj
b2xubyBvZiByb3duYW1lcywgMCA9IG5vIHJvdy5uYW1lcyBpbiBmaWxlIChpbnRlZ2VyKQogICAg
ICAsIGhlYWRlciA9IGhlYWRlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCB3aGV0aGVyIGZpcnN0IHJvdyBpcyBjb2wubmFtZXMgKGxvZ2ljYWwpCiAgICAgICwg
c3RyaXAud2hpdGUgPSBUUlVFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUKICAgICAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcgY29ybmVyLm5hbWUgKGNoYXJhY3RlciB2ZWN0b3Ip
CiAgICAgICwgcXVvdGUgPSBxdW90ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgd2hldGhlciBjb2x1bW4gaXMgcXVvdGVkIChsb2dpY2FsIHZlY3RvcikK
ICAgICAgLCBzdG9yYWdlLm1vZGUgPSBjb2xtb2RlICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCB3aWR0aHMgPSB3aWR0aHMg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcg
cm93Lm5hbWVzLndpZHRoIChsaXN0IG9yIE5VTEwpCiAgICAgICwgZGlnaXRzID0gZGlnaXRzICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgKGxpc3Qgb3IgTlVM
TCkKICAgICAgLCBhdHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcyAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCkKICAgICAgLCBleHRlbnNpb24ud2FybmluZyA9IGV4dGVu
c2lvbi53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9GQUxTRSBpbmRpY2F0ZXMg
d2V0aGVyIG91dCBzcGVjcyBkaWZmZXIgZnJvbSBpbiBzcGVjcyAKICAgICAgLCBzZXBlcmF0b3Iu
d2FybmluZyA9IHNlcGVyYXRvci53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9G
QUxTRS9OQQogICAgICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53
YXJuaW5nICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICkKICAgICwgY2xhc3M9InRl
bXBsYXRlIgogICAgKQoKICAgIHJldHVybihpbnZpc2libGUodGVtcGxhdGUpKQp9CgoKCgojIyB3
cmFwcGVyIGZ1bmN0aW9uIGZvciBmaXhlZCBmb3JtYXQKIyMgKEdOVSkgQ29weXJpZ2h0IEpPQSAx
OTk5Cgp3cml0ZS5maXggPC0gZnVuY3Rpb24gKHgsIGZpbGUgPSAnJwosIGFwcGVuZCA9IEZBTFNF
CiwgcXVvdGUgPSBGQUxTRSAgICAgICAgICAgIyBjaGFuZ2VkIGZvciBmaXhlZCBmb3JtYXQKLCBz
ZXAgPSAnJyAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIGVvbCA9
ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1h
dAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFtZXMgPSBGQUxTRSAgICAgICAjIGNoYW5nZWQg
Zm9yIGZpeGVkIGZvcm1hdAosIGNvcm5lci5uYW1lID0gJ3Jvd25hbWVzJwosIHJvdy5uYW1lcy53
aWR0aCA9IHVubGlzdCh3aWR0aHNbMV0pCiwgcXVvdGF0aW9uLm1hcmsgPSAnIicKLCBlc2NhcGVk
LnF1b3RhdGlvbi5tYXJrID0gJyInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBm
YWN0b3JzID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0g
TlVMTAosIHdpZHRocyA9IFRSVUUgICAgICAgICAgICMgY2hhbmdlZCBmb3IgZml4ZWQgZm9ybWF0
CiwgcGFkLm1ldGhvZCA9ICJhYmJyZXZpYXRlIgosIG1pbi5kaWdpdHMgPSA4Ciwgd2Fybi5zZXBl
cmF0b3IgPSBGQUxTRQosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSBGQUxTRQopCndyaXRlLnRhYmxl
KHg9eCwgZmlsZT1maWxlCiwgYXBwZW5kID0gYXBwZW5kCiwgcXVvdGUgPSBxdW90ZQosIHNlcCA9
IHNlcAosIGVvbCA9IGVvbAosIG5hID0gbmEKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wu
bmFtZXMgPSBjb2wubmFtZXMKLCBjb3JuZXIubmFtZSA9IGNvcm5lci5uYW1lCiwgcm93Lm5hbWVz
LndpZHRoID0gcm93Lm5hbWVzLndpZHRoCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFy
awosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgbG9n
aWNhbHMgPSBsb2dpY2FscwosIGZhY3RvcnMgPSBmYWN0b3JzCiwgZGVjLnNlcCA9IGRlYy5zZXAK
LCBkaWdpdHMgPSBkaWdpdHMKLCB3aWR0aHMgPSB3aWR0aHMKLCBwYWQubWV0aG9kID0gcGFkLm1l
dGhvZAosIG1pbi5kaWdpdHMgPSBtaW4uZGlnaXRzCiwgd2Fybi5zZXBlcmF0b3IgPSB3YXJuLnNl
cGVyYXRvcgosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSB3YXJuLnF1b3RhdGlvbi5tYXJrCikKCgoj
IyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBzZXBlcmF0ZWQgdmFsdWVzCiMjIG5vdGUgdGhhdCBjc3Yg
aW1wb3J0IGlzIE5PVCBmdWxseSBzdXBwb3J0ZWQgeWV0CiMjIHNlcCBpcyBub3QgYWxsb3dlZCBp
biB0aGUgZGF0YQojIyB3YXJuLnNlcGVyYXRvciA9IFRSVUUgY2hlY2tzIGZvciBzZXAKIyMgKEdO
VSkgQ29weXJpZ2h0IEpPQSAxOTk5CndyaXRlLnN2cyA8LSBmdW5jdGlvbiAoeCwgZmlsZSA9ICcn
CiwgYXBwZW5kID0gRkFMU0UKLCBxdW90ZSA9IFRSVUUKLCBzZXAgPSAnOycgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIFNWUwosIGVvbCA9ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFt
ZXMgPSBUUlVFCiwgY29ybmVyLm5hbWUgPSAncm93bmFtZXMnCiwgcm93Lm5hbWVzLndpZHRoID0g
dW5saXN0KHdpZHRoc1sxXSkKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIiInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBmYWN0b3Jz
ID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0gTlVMTAos
IHdpZHRocyA9IE5VTEwKLCBwYWQubWV0aG9kID0gImFiYnJldmlhdGUiCiwgbWluLmRpZ2l0cyA9
IDgKLCB3YXJuLnNlcGVyYXRvciA9IFRSVUUgIyBjaGFuZ2VkIGZvciBTVlMKLCB3YXJuLnF1b3Rh
dGlvbi5tYXJrID0gRkFMU0UKKSAKd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAosIGFwcGVu
ZCA9IGFwcGVuZAosIHF1b3RlID0gcXVvdGUKLCBzZXAgPSBzZXAKLCBlb2wgPSBlb2wKLCBuYSA9
IG5hCiwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiwgY29sLm5hbWVzID0gY29sLm5hbWVzCiwgY29y
bmVyLm5hbWUgPSBjb3JuZXIubmFtZQosIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5uYW1lcy53aWR0
aAosIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsKLCBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrID0gZXNjYXBlZC5xdW90YXRpb24ubWFyawosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0
b3JzID0gZmFjdG9ycwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgZGlnaXRzID0gZGlnaXRzCiwgd2lk
dGhzID0gd2lkdGhzCiwgcGFkLm1ldGhvZCA9IHBhZC5tZXRob2QKLCBtaW4uZGlnaXRzID0gbWlu
LmRpZ2l0cwosIHdhcm4uc2VwZXJhdG9yID0gd2Fybi5zZXBlcmF0b3IKLCB3YXJuLnF1b3RhdGlv
bi5tYXJrID0gd2Fybi5xdW90YXRpb24ubWFyawopCgoKCiMjIHdyYXBwZXIgZnVuY3Rpb24gZm9y
IHNwZWNpZmljYXRpb24gdmlhIHRlbXBsYXRlCiMjIGl0IGlzc3VlcyBhIHdhcm5pbmcgaWYgdGVt
cGxhdGUgc3BlY3MgYXJlIGV4dGVuZGVkCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0
ZS50ZW1wbGF0ZSA8LSBmdW5jdGlvbiAodGVtcGxhdGUsIHgKLCBmaWxlID0gdGVtcGxhdGUkZmls
ZQosIGFwcGVuZCA9IEZBTFNFCiwgZXhjbHVkZS5jb21wYXJlID0gYygnZXh0ZW5zaW9uLndhcm5p
bmcnLCAnZmlsZScsICdkaWdpdHMnKSAgIyMgYWxsIG90aGVyIHRlbXBsYXRlJGVsZW1lbnRzIGFy
ZSBleHBlY3RlZCBlcXVhbCBmb3IgaW5wdXQgYW5kIG91dHB1dCB0ZW1wbGF0ZQosIHF1b3RlID0g
aWYgKHJsKSB0ZW1wbGF0ZSRxdW90ZVstcmxdIGVsc2UgdGVtcGxhdGUkcXVvdGUKLCBzZXAgPSB0
ZW1wbGF0ZSRzZXAKLCBlb2wgPSB0ZW1wbGF0ZSRlb2wKLCBuYSA9IHRlbXBsYXRlJG5hCiwgcm93
Lm5hbWVzID0gYXMubG9naWNhbChybCkKLCBjb2wubmFtZXMgPSBpZiAodGVtcGxhdGUkaGVhZGVy
KXsgaWYgKHJsKSB0ZW1wbGF0ZSRjb2wubmFtZXNbLXJsXSBlbHNlIHRlbXBsYXRlJGNvbC5uYW1l
cyB9IGVsc2UgRkFMU0UKLCBjb3JuZXIubmFtZSA9IGlmIChybCkgdGVtcGxhdGUkY29sLm5hbWVz
W3JsXSBlbHNlICdyb3duYW1lJwosIHJvdy5uYW1lcy53aWR0aCA9IGlmIChybCkgdGVtcGxhdGUk
d2lkdGhzW1tybF1dCiwgcXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRlc2NhcGVkLnF1b3RhdGlvbi5tYXJr
CiwgbG9naWNhbHMgPSB0ZW1wbGF0ZSRsb2dpY2FscwosIGZhY3RvcnMgPSB0ZW1wbGF0ZSRmYWN0
b3JzCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBkaWdpdHMgPSBpZiAocmwgJiYgIWlz
Lm51bGwodGVtcGxhdGUkZGlnaXRzKSkgdGVtcGxhdGUkZGlnaXRzWy1ybF0gZWxzZSB0ZW1wbGF0
ZSRkaWdpdHMKLCB3aWR0aHMgPSBpZiAocmwgJiYgIWlzLm51bGwodGVtcGxhdGUkd2lkdGhzKSkg
dGVtcGxhdGUkd2lkdGhzWy1ybF0gZWxzZSB0ZW1wbGF0ZSR3aWR0aHMKLCBwYWQubWV0aG9kID0g
J2FiYnJldmlhdGUnCiwgbWluLmRpZ2l0cyA9IDgKLCB3YXJuLnNlcGVyYXRvciA9ICFpcy5uYSh0
ZW1wbGF0ZSRzZXBlcmF0b3Iud2FybmluZykKLCB3YXJuLnF1b3RhdGlvbi5tYXJrID0gIWlzLm5h
KHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrLndhcm5pbmcpCikKewogIAogICMgZmlyc3QgdGhpbmcg
dG8gZG8gYmVjYXVzZSB1c2VkIGluIHBhcmFtIGRlZnMKICBybCA8LSB0ZW1wbGF0ZSRyb3cubmFt
ZXMubG9jCiAgaWYgKHJsID4gMSkgc3RvcCgid3JpdGUudGFibGUgY3VycmVudGx5IGRvZXMgbm90
IHN1cHBvcnQgd3JpdGluZyByb3cubmFtZXMgb3RoZXIgdGhhbiBmaXJzdCBjb2x1bW4iKQoKICB0
ZW1wbGF0ZTIgPC0gd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAogICwgYXBwZW5kID0gYXBw
ZW5kCiAgLCBxdW90ZSA9IHF1b3RlCiAgLCBzZXAgPSBzZXAKICAsIGVvbCA9IGVvbAogICwgbmEg
PSBuYQogICwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMK
ICAsIGNvcm5lci5uYW1lID0gY29ybmVyLm5hbWUKICAsIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5u
YW1lcy53aWR0aAogICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKICAsIGxvZ2ljYWxzID0g
bG9naWNhbHMKICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgLCBkZWMuc2VwID0gZGVjLnNlcAogICwg
ZGlnaXRzID0gZGlnaXRzCiAgLCB3aWR0aHMgPSB3aWR0aHMKICAsIHBhZC5tZXRob2QgPSBwYWQu
bWV0aG9kCiAgLCBtaW4uZGlnaXRzID0gbWluLmRpZ2l0cwogICwgd2Fybi5zZXBlcmF0b3IgPSB3
YXJuLnNlcGVyYXRvcgogICwgd2Fybi5xdW90YXRpb24ubWFyayA9IHdhcm4ucXVvdGF0aW9uLm1h
cmsKICApCiAgaWYgKCBsZW5ndGgoZXhjbHVkZS5jb21wYXJlKSA8IDEgKQogICAgZXhjbHVkZS5j
b21wYXJlIDwtICdOb3RJblRlbXBsYXRlJwogIGV4IDwtIG1hdGNoKGV4Y2x1ZGUuY29tcGFyZSwg
bmFtZXModGVtcGxhdGUpKQogIGNvbXBhcmUgPC0gYWxsLmVxdWFsKHRlbXBsYXRlWy1leF0sIHRl
bXBsYXRlMlstZXhdKQogIGlmIChsZW5ndGgoY29tcGFyZSk+MSB8fCAhaXMubG9naWNhbChjb21w
YXJlKSB8fCAhY29tcGFyZSl7CiAgICB3YXJuaW5nKCJpbnB1dCBhbmQgb3V0cHV0IHRlbXBsYXRl
IGFyZSBkaWZmZXJlbnQiKQogICAgcHJpbnQoY29tcGFyZSkKICB9CiAgaWYgKHRlbXBsYXRlMiRl
eHRlbnNpb24ud2FybmluZykgCiAgICB3YXJuaW5nKCJleHRlbnNpb24ud2FybmluZzogZGF0YSBo
YXZlIGJlZW4gd3JpdHRlbiBpbiBhIGZvcm1hdCB0aGF0IGRpZmZlcnMgZnJvbSB0aGUgc3BlY2lm
aWNhdGlvbnMiKQogIHJldHVybihpbnZpc2libGUodGVtcGxhdGUyKSkKfQoKCnByaW50LnRlbXBs
YXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlKXsKICBpcy5hLmZhY3RvciA8LSB1bmxpc3QobGFwcGx5
KGFzLmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEo
bWF0Y2goJ2ZhY3RvcicsIHgkY2xhc3MpKSkgKSkKICBhcy5pcyA8LSB1bmxpc3QobGFwcGx5KGFz
Lmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEobWF0
Y2goJ0FzSXMnLCB4JGNsYXNzKSkpICkpCiAgCiAgc2luZ2xlcyA8LSBldmFsKGV4cHJlc3Npb24o
YyggCiAgICAgICAgZmlsZSA9IGZpbGUKICAgICAgLCBlb2wgPSBlb2wKICAgICAgLCBzZXAgPSBz
ZXAKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcAogICAgICAsIG5hLnN0cmluZ3MgPSBuYS5zdHJp
bmdzCiAgICAgICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICAgICAsIGVzY2Fw
ZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiAgICAgICwgbG9naWNh
bHMuRkFMU0UgPSBsb2dpY2Fsc1sxXQogICAgICAsIGxvZ2ljYWxzLlRSVUUgPSBsb2dpY2Fsc1sy
XQogICAgICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5u
YW1lcy5sb2MKICAgICAgLCBoZWFkZXIgPSBoZWFkZXIKICAgICAgLCBleHRlbnNpb24ud2Fybmlu
ZyA9IGV4dGVuc2lvbi53YXJuaW5nICAgICAgICAgICAgCiAgICAgICwgc2VwZXJhdG9yLndhcm5p
bmcgPSBzZXBlcmF0b3Iud2FybmluZyAgICAgICAgICAgIAogICAgICAsIHF1b3RhdGlvbi5tYXJr
Lndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53YXJuaW5nCiAgICAgICkpLCB0ZW1wbGF0ZSkKICBj
YXQocGFzdGUobmFtZXMoc2luZ2xlcyksICc9IDwnLCBzaW5nbGVzLCAnPicsIHNlcD0nJywgY29s
bGFwc2U9J1xuJyksICdcbicsICdcbicpCgogIGlmIChpcy5udWxsKHRlbXBsYXRlJHdpZHRocykp
ewogICAgY2F0KCdkaWdpdHM9IDxOVUxMPlxuJykKICAgIGNhdCgnd2lkdGhzPSA8TlVMTD5cblxu
JykKICAgIAogICAgcHJpbnQubWF0cml4KAogICAgICBjYmluZCgKICAgICAgICBjb2wubmFtZXM9
dGVtcGxhdGUkY29sLm5hbWVzCiAgICAgICwgcXVvdGU9dGVtcGxhdGUkcXVvdGUKICAgICAgLCBz
dG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2RlCiAgICAgICwgaXMuZmFjdG9yPWlzLmEu
ZmFjdG9yCiAgICAgICwgYXMuaXMgPSBhcy5pcwogICAgICApCiAgICAsIHF1b3RlPUZBTFNFCiAg
ICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVzKSkKICAg
ICkKICB9ZWxzZXsKCiAgICBmb3IgKGkgaW4gMTpsZW5ndGgodGVtcGxhdGUkZGlnaXRzKSl7CiAg
ICAgIGlmIChpcy5udWxsKHRlbXBsYXRlJGRpZ2l0c1tbaV1dKSkgdGVtcGxhdGUkZGlnaXRzW1tp
XV0gPC0gJ05VTEwnCiAgICB9CiAgICB0ZW1wbGF0ZSR3aWR0aHMgPC0gdW5saXN0KHRlbXBsYXRl
JHdpZHRocykKICAgIHRlbXBsYXRlJGRpZ2l0cyA8LSB1bmxpc3QodGVtcGxhdGUkZGlnaXRzKQoK
ICAgIHByaW50Lm1hdHJpeCgKICAgICAgY2JpbmQoCiAgICAgICAgY29sLm5hbWVzPXRlbXBsYXRl
JGNvbC5uYW1lcwogICAgICAsIHdpZHRocz10ZW1wbGF0ZSR3aWR0aHMKICAgICAgLCAiW3N0YXJ0
XSI9Y3Vtc3VtKGMoMSwgdGVtcGxhdGUkd2lkdGhzWy1sZW5ndGgodGVtcGxhdGUkd2lkdGhzKV0p
KQogICAgICAsICJbc3RvcF0iPWN1bXN1bSh0ZW1wbGF0ZSR3aWR0aHMpCiAgICAgICwgcXVvdGU9
dGVtcGxhdGUkcXVvdGUKICAgICAgLCBzdG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2Rl
CiAgICAgICwgIltpcy5mYWN0b3JdIj1pcy5hLmZhY3RvcgogICAgICAsICJbYXMuaXNdIiA9IGFz
LmlzCiAgICAgICwgZGlnaXRzPXRlbXBsYXRlJGRpZ2l0cwogICAgICApCiAgICAsIHF1b3RlPUZB
TFNFCiAgICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVz
KSkKICAgICkKICB9Cn0KCgpkZW1vLnRlbXBsYXRlIDwtIApmdW5jdGlvbihmaWxlID0gdGVtcGZp
bGUoKSl7CgoJY2F0KCJcblxuXG49PT09PSBUSEUgREFUQSA9PT09PVxuIikKCgl4IDwtIGRhdGEu
ZnJhbWUobnVtPTE6NSswLjEKCSwgY2hhcj1JKGxldHRlcnNbMTo1XSkKCSwgbG9nPUkoYyhUUlVF
LCBGQUxTRSwgTkEsIE5BLCBOQSkpCgksIGZhaz1mYWN0b3IobGV0dGVyc1syMjoyNl0pKQoJeCRj
aGFyWzFdIDwtICcsJwoJeCRjaGFyWzJdIDwtICcjJyAgICMgd2FzICciJwoJeCRjaGFyWzNdIDwt
ICdhIGInCgl4JG51bVsxXSA8LSAuTWFjaGluZSRkb3VibGUueG1pbgoJCglzdHIoeCkKCgljYXQo
IlxuXG5cbj09PT09IEZJWEVEIFdJRFRIIEZPUk1BVCA9PT09PVxuIikKICAgICAgICBjYXQoIi0t
LSB3cml0aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZp
bGU9ZmlsZSkKCWNhdCgiLS0tIHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxl
IC0+Iiwgc2NhbihmaWxlPWZpbGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyks
ICdcbicpCgljYXQoIi0tLSB0aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0
ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0g
cmVhZCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwg
ZGF0YVxuIikKCWFsbC5lcXVhbCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRl
IHdoaWxlIHJlYWRpbmdcbiIpCgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1
dGU9VFJVRSkKCXRlbXBsYXRlMiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3Rl
bXBsYXRlJykgPC0gTlVMTAoJY2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNl
cHQgZm9yIGRpZ2l0c1xuIikKCWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCIt
LS0gcmUud3JpdGluZyB1c2luZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBs
YXRlKHRlbXBsYXRlMiwgeCwgYXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxk
IGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVt
cGxhdGUzKQoJY2F0KCItLS0gdGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBh
cHBlbmRlZDpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCgljYXQoIlxuXG5cbj09PT09IEZJ
WEVEIFdJRFRIIEZPUk1BVCB3aXRoIGZhY3RvcnM9J2NvZGVzJywgbG9naWNhbHM9YygwLDEpLCBk
aWdpdHM9MTUsIHJvdy5uYW1lcz1GQUxTRSA9PT09PVxuIikKICAgICAgICBjYXQoIi0tLSB3cml0
aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZpbGU9Zmls
ZSwgZmFjdG9ycz0nY29kZXMnLCBsb2dpY2Fscz1jKDAsMSksIGRpZ2l0cz0xNSkKCWNhdCgiLS0t
IHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxlIC0+Iiwgc2NhbihmaWxlPWZp
bGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyksICdcbicpCgljYXQoIi0tLSB0
aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWlt
cG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0gcmVhZCh0ZW1wbGF0ZSkKCWNh
dCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwgZGF0YVxuIikKCWFsbC5lcXVh
bCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRlIHdoaWxlIHJlYWRpbmdcbiIp
Cgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1dGU9VFJVRSkKCXRlbXBsYXRl
MiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3RlbXBsYXRlJykgPC0gTlVMTAoJ
Y2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNlcHQgZm9yIGRpZ2l0c1xuIikK
CWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCItLS0gcmUud3JpdGluZyB1c2lu
ZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBsYXRlKHRlbXBsYXRlMiwgeCwg
YXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBm
b3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVtcGxhdGUzKQoJY2F0KCItLS0g
dGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBhcHBlbmRlZDpcbiIpCgljYXQo
cGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0nJywgc2VwPSdcbicpLCBjb2xs
YXBzZT0nXG4nKSwgJ1xuJykKCgoJY2F0KCJcblxuXG49PT09PSBTRVBFUkFURUQgVkFMVUUgRk9S
TUFUID09PT09XG4iKQogICAgICAgIGNhdCgiLS0tIHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIp
Cgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmlsZT1maWxlKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKCgljYXQoIlxuXG5cbj09PT09IFNFUEVSQVRFRCBWQUxVRSBGT1JNQVQgd2l0aCBk
ZWMuc2VwPScsJyBhbmQgcm93Lm5hbWVzPUZBTFNFID09PT09XG4iKQogICAgICAgIGNhdCgiLS0t
IHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIpCgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmls
ZT1maWxlLCBkZWMuc2VwPScsJywgcm93Lm5hbWVzPUZBTFNFKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKfQo=

------=_NextPart_000_0004_01BF5D27.62306630--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 12 18:02:51 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 2000 19:02:51 +0100
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
In-Reply-To: acuster@nature.berkeley.edu's message of "Tue, 11 Jan 2000 02:53:58 +0100 (MET)"
References: <200001110153.CAA03462@pubhealth.ku.dk>
Message-ID: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>

acuster@nature.berkeley.edu writes:

> Full_Name: Adrian Custer
> Version: 0.90.0
> OS: Linux on Thinkpad (pentium) and desktop (K6)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> When I create a boxplot, and then try to overlay a lowess fit or just the
> points, 
> the points do not appear in the highest level and the lowess curve does not
> reach 
> the highest level. However, if I add one to each of the models, the problem is
> solved.
> I tried this on two different machines, a laptop and a desktop both running 
> Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian
> 
> > a
>   [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
...
> [291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> > b
>   [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
>  [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
.....
> [297] 4 1 0 0
> > boxplot(a~b)
> > lines(lowess(a~b))
> > points(a~b)
> > boxplot(a~b)
> > lines(lowess(a~b+1))
> > points(a~b+1)
> > 
> 
> Thanks for your consideration and thanks a million for all the work. R is a
> pleasure 
> to work with. 

Boxplot expects a *factor* as the grouping criterion. The x axis
labels are the group names, not x coordinates (i.e. it might as well
be "married, unmarried, divorced" as "0, 1, 2."), and since factors
are internally coded as 1:nlevels, that's the value used for the
actual coordinate system.

Passing a numeric vector gets it converted to a factor before use, so
things are as you should expect. Except possibly for two issues:

a) should one really do the numeric->factor conversion without a
warning message?

b) perhaps boxplot could use an at= argument saying "plot boxes here"
since the current version wouldn't be able to deal with
non-equidistant groups. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:05:37 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:05:37 +0100
Subject: inconsistencies between formatC(), format() and format.char()
Message-ID: <000001bf5d8f$753ef530$a9021aac@joelschlaegel>



Dear R-Developers,

Just a note: there are some inconsistencies between formatC(), format() and
format.char() and cross calling between these functions.
On the one hand

> cat(format('{"}'), "\n")
{\"}

> cat(format.char('{"}'), "\n")
{\"}

is by default format.char(, flag="-") and thus by default calling format()

> cat(format.char('{"}', flag="-"), "\n")
{\"}


On the other hand

> cat(formatC('{"}'), "\n")
{"}

which is calling format.char(, flag="")

> cat(format.char('{"}', flag=""), "\n")
{"}


also (for me) unexpected is

> format(" abc ", trim=T)
[1] " abc "


As an alternative see functions pad() and trim() from my other mailing ...
Regards


Jens Oehlschlgel-Akiyoshi


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 13 13:29:01 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 13 Jan 2000 14:29:01 +0100 (MET)
Subject: X11 troubles (PR#400)
Message-ID: <200001131329.OAA01558@pubhealth.ku.dk>

Just to get these issues recorded in the bug repository:

a) We don't handle multiple window closes well

My "favourite" version of this is when I ^Z out of an R session with
an open graphics window to do something on the command line, then kill
the graphics window (which does nothing), kill it again, realise that
it's because the R session was stopped, and:

[pd@blueberry BUILD]$ %
bin/R
Segmentation fault (core dumped)

b) X11 errors should be caught by an error handler, not kill R.

This is mainly seen when there's an error somewhere else, such as
trouble with the font setup. But in principle, we should at worst shut
down the graphics window, not R itself.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 13 17:24:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jan 2000 18:24:05 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001131724.SAA04122@pubhealth.ku.dk>

> From: Peter Holzer <holzer@stat.math.ethz.ch>
> Date: Mon, 10 Jan 2000 18:06:59 +0100 (MET)
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: bug in glm (PR#397)
> X-Keywords: 
> 
> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where 
the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = 
na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be 
the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> > plot(fit.tst)
> Warning messages: 
> 1: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 2: longer object length
> 	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
> 3: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 4: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 5: longer object length
> 	is not a multiple of shorter object length in: e/(s * (1 - h)) 
> 6: longer object length
> 	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 
> 
> Maybe there is another solution?

Yes, there is.  I have now altered glm in the development version to handle
zero weights in the same way as lm, and plot.lm now works for such glm
objects (although the assumptions to use lm methods on an glm fit
are invalid in this example, even if run to convergence). In essence:

    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
...
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = 
weights



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 13 17:36:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 13 Jan 2000 18:36:28 +0100 (MET)
Subject: missing warnings...
In-Reply-To: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
References: <200001110153.CAA03462@pubhealth.ku.dk>
 <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
Message-ID: <14462.3356.364998.832333@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

      <....>

    PD> Boxplot expects a *factor* as the grouping criterion. The x axis
    PD> labels are the group names, not x coordinates (i.e. it might as well
    PD> be "married, unmarried, divorced" as "0, 1, 2."), and since factors
    PD> are internally coded as 1:nlevels, that's the value used for the
    PD> actual coordinate system.

    PD> Passing a numeric vector gets it converted to a factor before use, so
    PD> things are as you should expect. Except possibly for two issues:

    PD> a) should one really do the numeric->factor conversion without a
    PD> warning message?

Yes, we should have that warning (and more!):

Warning messages that I am extremely missing are in the following two examples

  plot(1);  points(2,2)

  plot(1);  text(2,2,"bla")

(and similar with lines and all kinds of plots).

We *definitely* should warn the user that (s)he is drawing outside the plot
region.  
We need "graphical warnings" 
   (which can be turned off via an options() or par() call).

    PD> b) perhaps boxplot could use an at= argument saying "plot boxes here"
    PD> since the current version wouldn't be able to deal with
    PD> non-equidistant groups. 
oh yes!
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan 15 18:46:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 15 Jan 2000 18:46:44 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <200001100140.CAA20927@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>

On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:

> Depending on the setting of par()$usr, 
> the 'at' setting in mtext(.., adj=0, outer=T) may cause the
> text to appear in an anomalous position (e. g. in the first
> instance below, at the left of the plot region rather than
> at 'at=0' in the figure region), or the text may not appear
> at all.
> 
> If one does not set the 'at' parameter the text appears
> (with 'adj=0') on the far left of the plot region.  I assume
> this is also anomalous; at all events it is the behaviour
> that I wished to circumvent.

I am afraid this is documentation confusion. There are no user
coordinates in the outer margins, and at works like adj if outer=TRUE.
Indeed the example

mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

does work correctly for me: specifying adj=0 means put it at the extreme
left, adj=1 at the extreme right, and adj=0 to centre it (on the
display region, not the figure region).

I will re-write the documentation.

> 
> The function plot.test() demonstrates the behaviour:
> 
> plot.test <-
> function(xval=0:4, pos=NULL){
> oldpar<-par(oma=c(2,0,0,0))
> on.exit(par(oldpar))
> plot(xval,xval)
> if(is.null(pos))pos<-min(xval)
> print(pos)
> print(par()$usr)
> mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
> }
> 
> > plot.test(xval=0:4)  # "Outer text appears on left of the figure region
> [1] 0
> [1] -0.16  4.16 -0.16  4.16
> > plot.test(xval=20:24)  # "Outer text does not appear at all
> [1] 20
> [1] 19.84 24.16 19.84 24.16
> > # Check that at=0 does not work
> > plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
> [1] 0
> [1] 19.84 24.16 19.84 24.16
> >
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 0
>  minor = 90.1
>  year = 1999
>  month = December
>  day = 15
>  language = R
> 
> Windows 9x 4.0 (build 1111)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 17 07:32:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jan 2000 08:32:04 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
References: <200001100140.CAA20927@pubhealth.ku.dk>
 <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
Message-ID: <14466.50548.159379.244161@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
    >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
    >> adj=0, outer=T) may cause the text to appear in an anomalous
    >> position (e. g. in the first instance below, at the left of the plot
    >> region rather than at 'at=0' in the figure region), or the text may
    >> not appear at all.
    >> 
    >> If one does not set the 'at' parameter the text appears (with
    >> 'adj=0') on the far left of the plot region.  I assume this is also
    >> anomalous; at all events it is the behaviour that I wished to
    >> circumvent.

    BDR> I am afraid this is documentation confusion. There are no user
    BDR> coordinates in the outer margins, and at works like adj if
    BDR> outer=TRUE.  Indeed the example

    BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

    BDR> does work correctly for me: specifying adj=0 means put it at the
    BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
    BDR> (on the display region, not the figure region).

    BDR> I will re-write the documentation.

Thank you!

Is there any reason why "at=" should be *valid* at all for mtext()?
I think this is the confusing part.
"at=" always makes (me) think of user coordinates,...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 17 07:56:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 17 Jan 2000 07:56:16 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <14466.50548.159379.244161@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001170754120.16709-100000@auk.stats>

On Mon, 17 Jan 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
>     >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
>     >> adj=0, outer=T) may cause the text to appear in an anomalous
>     >> position (e. g. in the first instance below, at the left of the plot
>     >> region rather than at 'at=0' in the figure region), or the text may
>     >> not appear at all.
>     >> 
>     >> If one does not set the 'at' parameter the text appears (with
>     >> 'adj=0') on the far left of the plot region.  I assume this is also
>     >> anomalous; at all events it is the behaviour that I wished to
>     >> circumvent.
> 
>     BDR> I am afraid this is documentation confusion. There are no user
>     BDR> coordinates in the outer margins, and at works like adj if
>     BDR> outer=TRUE.  Indeed the example
> 
>     BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)
> 
>     BDR> does work correctly for me: specifying adj=0 means put it at the
>     BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
>     BDR> (on the display region, not the figure region).
> 
>     BDR> I will re-write the documentation.
> 
> Thank you!
> 
> Is there any reason why "at=" should be *valid* at all for mtext()?
> I think this is the confusing part.
> "at=" always makes (me) think of user coordinates,...

Unfortunately `adj' is overloaded, so for perpendicular text you need it.
The re-written documentation goes into the gory details.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 18:59:13 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 13:59:13 -0500 (EST)
Subject: lwd patches for "contour"
Message-ID: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>


  I found it useful to have contour be able to do line widths ... hope
that the guts haven't changed an enormous amount in the current
development version ...  the patches are relatively trivial, mostly going
by analogy with lty and col (although in my ignorance it took me a while
to figure out what UNPROTECT(2) was and why it should be changed to
UNPROTECT(3) ...  hope this is useful.

  Ben Bolker

*** src/main/names.c.orig	Mon Jan 17 11:23:26 2000
--- src/main/names.c	Mon Jan 17 11:50:54 2000
***************
*** 644,650 ****
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	6,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},
--- 644,650 ----
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	7,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},

*** src/main/plot3d.c.orig	Mon Jan 17 11:08:08 2000
--- src/main/plot3d.c	Mon Jan 17 13:47:03 2000
***************
*** 396,408 ****
  	}
  }
  
! /* contour(x,y,z, levels, col, lty) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty;
!     int i, j, nx, ny, nc, ncol, nlty;
      int ltysave, colsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
--- 396,409 ----
  	}
  }
  
! /* contour(x,y,z, levels, col, lty, lwd) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty, lwd;
!     int i, j, nx, ny, nc, ncol, nlty, nlwd;
      int ltysave, colsave;
+     double lwdsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
***************
*** 439,445 ****
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     /* col, lwd and lty vectors here --- FIXME: "lwd" ???? */
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
--- 440,447 ----
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     PROTECT(lwd = FixupLwd(GetPar("lwd", args), dd->gp.lwd));  
!     nlwd = length(lwd);
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
***************
*** 507,512 ****
--- 509,515 ----
  
      ltysave = dd->gp.lty;
      colsave = dd->gp.col;
+     lwdsave = dd->gp.lwd;
      GMode(1, dd);
      for (i = 0; i < nc; i++) {
  	vmax = vmaxget();
***************
*** 516,521 ****
--- 519,527 ----
  	dd->gp.col = INTEGER(col)[i % ncol];
  	if (dd->gp.col == NA_INTEGER)
  	    dd->gp.col = colsave;
+ 	dd->gp.lwd = REAL(lwd)[i % nlwd];
+ 	if (dd->gp.lwd == NA_REAL)
+ 	    dd->gp.lwd = lwdsave;
  	contour(x, nx, y, ny, z, REAL(c)[i], atom, dd);
  	vmaxset(vmax);
      }
***************
*** 523,529 ****
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     UNPROTECT(2);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)
--- 529,536 ----
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     dd->gp.lwd = lwdsave;
!     UNPROTECT(3);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)

*** src/library/base/R/contour.R.orig	Mon Jan 17 11:12:11 2000
--- src/library/base/R/contour.R	Mon Jan 17 11:43:02 2000
***************
*** 6,12 ****
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
--- 6,12 ----
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
***************
*** 34,40 ****
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty))
      if (!add) {
  	axis(1)
  	axis(2)
--- 34,40 ----
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty, lwd = as.double(lwd)))
      if (!add) {
  	axis(1)
  	axis(2)

*** src/library/base/man/contour.Rd.orig	Mon Jan 17 11:13:18 2000
--- src/library/base/man/contour.Rd	Mon Jan 17 11:19:05 2000
***************
*** 8,14 ****
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
--- 8,14 ----
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
***************
*** 29,34 ****
--- 29,35 ----
    \item{xlim, ylim, zlim}{x-, y- and z-limits for the plot}
    \item{col}{color for the lines drawn}
    \item{lty}{line type for the lines drawn}
+   \item{lwd}{line width for the lines drawn}
    \item{add}{logical. If \code{TRUE}, add to a current plot.}
    \item{\dots}{additional graphical parameters (see \code{\link{par}})
      and the arguments to \code{\link{title}} may also be supplied.}
***************
*** 36,42 ****
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,
--- 37,43 ----
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot3d.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 22:00:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 17:00:58 -0500 (EST)
Subject: RNG initialization
Message-ID: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>


  It would be nice to be able to initialize the random-number generator
with a single long argument; I can see that in principle this could be
done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
I had trouble with the technical details, possibly because of long/int
incompatibilities.

  Any chance of this happening?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 08:08:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 08:08:55 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>

On Mon, 17 Jan 2000, Ben Bolker wrote:

>   It would be nice to be able to initialize the random-number generator
> with a single long argument; I can see that in principle this could be
> done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
> I had trouble with the technical details, possibly because of long/int
> incompatibilities.

What precisely do you want to do? Is that `long' as in C code?  There is no
means to pass a `long' from R code to C, but RNG_Init in fact only
makes use of 32 bits so should have `int' there.  (It's a poor
choice of algorithm though, as it uses a multiplicative generator
without ensuring the starting point is odd.)

My best guess is that you would like a function like S's set.seed,
which when called with a single number sets the whole initial seed.
This is certainly easy to do, and can be done easily in R code.
Since set.seed seems a suitable name and it would help compatibility,
would

set.seed(seed, kind = 0)

be a suitable interface?  Or would people prefer

RNGinit(kind, seed)

?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Jan 18 14:22:57 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 18 Jan 2000 09:22:57 -0500 (EST)
Subject: RNG initialization
In-Reply-To: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>

On Tue, 18 Jan 2000, Prof Brian D Ripley wrote:

> My best guess is that you would like a function like S's set.seed,
> which when called with a single number sets the whole initial seed.
> This is certainly easy to do, and can be done easily in R code.
> Since set.seed seems a suitable name and it would help compatibility,
> would
> 
> set.seed(seed, kind = 0)
> 
> be a suitable interface?  Or would people prefer
> 
> RNGinit(kind, seed)

  set.seed() sounds fine.  On reading this, it occurs to me that I could
probably do something like this that just set the value of .Random.seed in
R code (just copying what RNG_Init() does to set .Random.seed from
time()), without mucking with the C code (although a lot of the details of
RNG settings etc. seem to be in C rather than R code at the moment).

  thanks,
     Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 15:26:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 10:26:26 -0500
Subject: RNG initialization
References: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>
Message-ID: <38848621.4E02D913@bank-banque-canada.ca>

>Since set.seed seems a suitable name and it would help compatibility,
>would
>set.seed(seed, kind = 0)
>be a suitable interface?  Or would people prefer
>RNGinit(kind, seed)

Before making too many changes to random number generation it might be useful to
look at the code below which is part of my syskern package. It sets the seed,
uniform RNG and the normal transformation, and may serve as a good model for
setting other transformation. Since it also works in Splus it allows me to run
the same random experiments in Splus and R. I've been using it successfully for
some time now, on much more complicated examples than the simple tests below.

Paul Gilbert

##############################################################################

#    6/  Random number generation.
# part of syskern package. I think this is self contained except for is.S
is.S <- function(){FALSE}

##############################################################################

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 15:33:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 15:33:40 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181533.PAA25043@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 10:26:26 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Since set.seed seems a suitable name and it would help compatibility,
> >would
> >set.seed(seed, kind = 0)
> >be a suitable interface?  Or would people prefer
> >RNGinit(kind, seed)
> 
> Before making too many changes to random number generation it might be useful 
to
> look at the code below which is part of my syskern package. It sets the seed,

As I understand it, that does not do what either S-PLUS's set.seed does
or what Ben asks for, as the seed has to be of a length and values
appropriate to the RNGkind.  The request was to use a single value:
otherwise why not just assign to .Random.seed?  

Personally I do not like the altering of system functions in user
packages, as what happens if two or more people do it? It depends
on the load order.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 16:35:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 11:35:45 -0500
Subject: RNG initialization
References: <200001181533.PAA25043@toucan.stats.ox.ac.uk>
Message-ID: <38849661.AC7A95FB@bank-banque-canada.ca>

>Personally I do not like the altering of system functions in user
>packages, as what happens if two or more people do it? It depends
>on the load order.

Yes, I don't see any way around this in Splus, but it would be nice if it was
done in R base. In fact as I recall, some of the hooks may be in R's C code and
that would be the fastest place to do RNG changes. Martin was going to look at
it sometime, but I don't know if he has had a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 16:40:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 16:40:30 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181640.QAA17215@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 11:35:45 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
 
> >Personally I do not like the altering of system functions in user
> >packages, as what happens if two or more people do it? It depends
> >on the load order.
> 
> Yes, I don't see any way around this in Splus, but it would be nice if it was
> done in R base. In fact as I recall, some of the hooks may be in R's C code 
and
> that would be the fastest place to do RNG changes. Martin was going to look at
> it sometime, but I don't know if he has had a chance.

Sure, it is easy and that was what I was proposing to do. I was just
proposing to be compatible with S-PLUS and not syskern.  I really don't
see why syskern needs to use the name set.seed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 18:59:09 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 13:59:09 -0500
Subject: RNG initialization
References: <200001181640.QAA17215@toucan.stats.ox.ac.uk>
Message-ID: <3884B7FD.7550C58A@bank-banque-canada.ca>

>I was just proposing
>to be compatible with S-PLUS and not syskern.  I really don't
>see why syskern needs to use the name set.seed.

No, syskern does not need to use the name set.seed. I used it hoping this stuff
would move to R  base at some point and I could remove it from syskern.

Beyond the name however, there are some Splus compatiblity issues which probably
should be discussed. I seem to recall that there was some difficulty producing
Splus runif results in R.  Also, the ability to specify the RNG in R is nice and
should be accommodated, and setting the seed without setting the RNG is probably
not wise. Finally, I feel it is important to also specify the algorithms for
other transformations such rnorm. This way, one can be relatively confident that
a random experiment can be reproduced.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 19:14:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 19:14:48 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <3884B7FD.7550C58A@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10001181911370.7391-100000@auk.stats>

On Tue, 18 Jan 2000, Paul Gilbert wrote:

> >I was just proposing
> >to be compatible with S-PLUS and not syskern.  I really don't
> >see why syskern needs to use the name set.seed.
> 
> No, syskern does not need to use the name set.seed. I used it hoping this stuff
> would move to R  base at some point and I could remove it from syskern.
> 
> Beyond the name however, there are some Splus compatiblity issues which probably
> should be discussed. I seem to recall that there was some difficulty producing
> Splus runif results in R.  Also, the ability to specify the RNG in R is nice and

Of course, as the Splus runif is not implemented in R. There is something
similar, but it is not the same.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 19:02:50 2000
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 20 Jan 2000 20:02:50 +0100 (MET)
Subject: bug in setting length of a list (PR#401)
Message-ID: <200001201902.UAA04276@pubhealth.ku.dk>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 18:55:15 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 20 Jan 2000 12:55:15 -0600
Subject: bug in setting length of a list
Message-ID: <qxpk8l4shd8.fsf@ludwig.stat.wisc.edu>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri Jan 21 06:15:03 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jan 2000 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <200001210615.HAA02949@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

* PR# 379 *
Subject: strsplit does not conform to documentation
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 17 Dec 1999 18:48:14 -0800 (PST)
--fix documentation!

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
--still with us (0.90.1, Dec.1999)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
--FIXME (still in 0.90.1)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).
* PR# 340 *
Subject: "outer" argument in mtext
From: Douglas Bates <bates@stat.wisc.edu>
Date: 23 Nov 1999 12:31:36 -0600
* PR# 349 *
Subject: size of text and numbers in graphs
From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Date: Sat, 27 Nov 1999 17:03:53 CET (+0100)
--not a bug (PD)
* PR# 365 *
Subject: plot math - segfault and "frac", "^" bug(s)..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 8 Dec 1999 18:27:03 +0100 (MET)
--seg.fault fixed; "^" precedence is really bad
* PR# 366 *
Subject: pch==NA
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 1999 15:19:46 +0100
* PR# 372 *
Subject: hist() with horiz=TRUE does not give horiz. plots
From: fran@stat.berkeley.edu
Date: Sun, 12 Dec 1999 00:27:25 +0100 (MET)

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 363 *
Subject: Where should iofflush.c be?
From: David Emile Lamy <delamy@uswest.net>
Date: Tue, 7 Dec 1999 01:51:57 -0700 (MST)
--Linux installation problem, it seems. Too little to reproduce

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature
* PR# 343 *
Subject: rbind invisible return value
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 24 Nov 1999 11:34:10 -0800 (PST)
* PR# 358 *
Subject: [[ substitution
From: clive@bell-labs.com
Date: Fri, 3 Dec 1999 16:45:08 +0100 (MET)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

none

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 377 *
Subject: lists of functions
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 17 Dec 1999 09:10:50 +0100 (MET)
* PR# 378 *
Subject: plot()  after split.screen() on postscript() Device produces inconsistent PostScript file
From: boble@usa.net
Date: Fri, 17 Dec 1999 21:32:23 +0100 (MET)
* PR# 384 *
Subject: tck crash
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 22 Dec 1999 10:05:48 +0100 (MET)
* PR# 385 *
Subject: Apply dimnames
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 22 Dec 1999 11:22:27 +0000 (GMT)
--(+ patch proposal)
* PR# 386 *
Subject: as.matrix.data.frame() modifies content of character columns
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Wed, 22 Dec 1999 16:18:19 +0100
* PR# 387 *
Subject: different subscripting behaviour using  $<-  or  [<-  for data.frames
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:10:17 +0100
* PR# 388 *
Subject: data.frame(I(matrix)) ?
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:12:58 +0100
* PR# 389 *
Subject: coredump with plot(x,y,pch="+",cex=2.2)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 26 Dec 1999 18:14:10 -0500 (EST)
* PR# 390 *
Subject: axis for small ranges
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Tue, 28 Dec 1999 13:28:01 +0100
* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
* PR# 394 *
Subject: formatC (bug and fix)
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Tue, 4 Jan 2000 10:31:53 +0100
* PR# 398 *
Subject: a +1 shift overlaying lines/points on a boxplot
From: acuster@nature.berkeley.edu
Date: Tue, 11 Jan 2000 02:53:56 +0100 (MET)
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
* PR# 401 *
Subject: bug in setting length of a list
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 20 Jan 2000 12:55:15 -0600
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Sat Jan 22 10:24:51 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Sat, 22 Jan 2000 10:24:51 +0000
Subject: tabulate
References: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>
Message-ID: <38898573.3BF7945A@Durham.ac.uk>

Dear R-Developers,

Would it be possible / is it desirable to alter tabulate 
so that the lower boundary
can be set in addition to the upper boundary? eg,

tabulate(bin, low=min(1,bin), nbin=max(1,bin))

would silently ignore elements outside the range low..nbin

It is easy to get around this at present, of course,
but seems natural to have a more flexible function. 
[or should I be using another function?]

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sun Jan 23 00:26:31 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sun, 23 Jan 2000 10:26:31 +1000
Subject: tabulate
In-Reply-To: Your message of "Sat, 22 Jan 2000 10:24:51 GMT."
 <38898573.3BF7945A@Durham.ac.uk>
Message-ID: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>

> Dear R-Developers,
> 
> Would it be possible / is it desirable to alter tabulate 
> so that the lower boundary
> can be set in addition to the upper boundary? eg,
> 
> tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> 
> would silently ignore elements outside the range low..nbin
> 
> It is easy to get around this at present, of course,
> but seems natural to have a more flexible function. 
> [or should I be using another function?]

I would oppose it on the grounds that tabulate() is a low-level
function and making a change like this is likely to slow it down
(if marginally) and to hinder porting software from R to S, which
I regard as an important consideration, if not an over-riding one.

table() should be the usual function for everyday use (and using
this makes the change to tabulate() unnecessary), but on R the
difference in speed between table() and tabulate() can be
dramatic.  I would suggest improving the efficiency of table()
should be a fairly high priority.

Bill.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jan 23 12:15:38 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 23 Jan 2000 12:15:38 +0000 (GMT)
Subject: R header files
Message-ID: <Pine.GSO.4.05.10001231150300.17770-100000@auk.stats>

The R header files have been reorganised, and for the first time documented
(in the Writing R Extensions manual).

The recommended header file for user code is R.h. S.h still exists, but
includes rather less, plus some S-compatibility defines.

This should be included before Rdefines.h (but for now this is worked
around)

Rdefines.h includes Rinternals.h.

If you need any of the auxilliary header files

    Applic.h Arith.h Complex.h Error.h Linpack.h Mathlib.h Memory.h
    PrtUtil.h Random.h Utils.h f2c.h

they are now in R_HOME/include/R_ext.  Currently this is searched, but it
will not be come 1.0.  Of these Arith.h Complex.h Error.h Memory.h Random.h
Utils.h are included by R.h. [The rationale here is to remove the chance
of name clashes, so you will only get the R versions if you ask for the 
directory specifically.]

Blas.h has gone (its contents are included in both Linpack.h and Applic.h)
and Errormsg.h is for internal use only.  Fortran.h is no longer installed
(was anyone using it, and if so for what?)

Would package writers who have C code please try out R-devel, and

   *   If you use Rdefines.h or Rinternals.h consider including R.h.
   *   If you use any of Applic.h Linpack.h Mathlib.h f2c.h add R_ext.
   *   If you use any of Arith.h Complex.h Error.h Memory.h Random.h
       Utils.h  remove them and include R.h.

Looking over the packages I have to hand:

foreign/src/minitab needs to declare R.h
tree and tseries need to declare R.h and remove some headers.
cclust needs "R_ext/f2c.h"


Please let me know of any problems. This might seem a nuisance now, but
does allow us to document a stable interface and so avoid future problems.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 23 12:22:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 2000 13:22:11 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Sun, 23 Jan 2000 10:26:31 +1000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.

Would you happen to have a simple example showing the inefficiency? I
just had a glimpse at the code and it would seem that there are some
extraneous coercions from integer to double precision and back, which
could be fairly easily removed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Mon Jan 24 09:59:20 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Mon, 24 Jan 2000 09:59:20 +0000
Subject: tabulate
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <388C2278.EF4119E1@Durham.ac.uk>

Bill Venables wrote:
> 
> > Dear R-Developers,
> >
> > Would it be possible / is it desirable to alter tabulate
> > so that the lower boundary
> > can be set in addition to the upper boundary? eg,
> >
> > tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> >
> > would silently ignore elements outside the range low..nbin
> >
> > It is easy to get around this at present, of course,
> > but seems natural to have a more flexible function.
> > [or should I be using another function?]
> 
> I would oppose it on the grounds that tabulate() is a low-level
> function and making a change like this is likely to slow it down
> (if marginally) and to hinder porting software from R to S, which
> I regard as an important consideration, if not an over-riding one.
> 
> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.
> 


As far as I know, tabulate appears to have the advantage [for some of my 
tasks] of not excluding bins with zero counts. Otherwise, I would use
table.

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 10:22:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jan 2000 11:22:55 +0100
Subject: tabulate
In-Reply-To: David Wooff's message of "Mon, 24 Jan 2000 09:59:20 +0000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU> <388C2278.EF4119E1@Durham.ac.uk>
Message-ID: <x2u2k3kbuo.fsf@blueberry.kubism.ku.dk>

David Wooff <D.A.Wooff@Durham.ac.uk> writes:

> As far as I know, tabulate appears to have the advantage [for some of my 
> tasks] of not excluding bins with zero counts. Otherwise, I would use
> table.

Yes. There are ways around it though, and for multiway tables you'll
need them anyway:

> x<-rpois(20,10)
> x
 [1] 10 13  9  9 12  9 15 12 11  7 10 13 10  8  8 12  7 11  5  6
> table(x)
x
 5  6  7  8  9 10 11 12 13 15 
 1  1  2  2  3  3  2  3  2  1 

> tabulate(x)
 [1] 0 0 0 0 1 1 2 2 3 3 2 3 2 0 1
> table(factor(x,levels=0:max(x)))

 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 
 0  0  0  0  0  1  1  2  2  3  3  2  3  2  0  1 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Mon Jan 24 22:46:06 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Tue, 25 Jan 2000 08:46:06 +1000
Subject: tabulate
In-Reply-To: Your message of "23 Jan 2000 13:22:11 +0100."
 <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>
Message-ID: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > table() should be the usual function for everyday use (and using
> > this makes the change to tabulate() unnecessary), but on R the
> > difference in speed between table() and tabulate() can be
> > dramatic.  I would suggest improving the efficiency of table()
> > should be a fairly high priority.
> 
> Would you happen to have a simple example showing the inefficiency? I
> just had a glimpse at the code and it would seem that there are some
> extraneous coercions from integer to double precision and back, which
> could be fairly easily removed.

OK Peter.  This is the first one I cooked up:

Version 0.90.1  (December 15, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> m <- rpois(100000, 1)
> tabulate(m)
[1] 36891 18399  6064  1519   309    50     4     1
> table(m)
m
    0     1     2     3     4     5     6     7     8 
36763 36891 18399  6064  1519   309    50     4     1 
> system.time(tabulate(m))
[1] 0.11 0.00 0.00 0.00 0.00
> system.time(table(m))
[1] 2.90 0.16 4.00 0.00 0.00
> version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    0                   
minor    90.1                
year     1999                
month    December            
day      15                  
language R                   
> 

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 23:24:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 00:24:22 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Tue, 25 Jan 2000 08:46:06 +1000"
References: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> OK Peter.  This is the first one I cooked up:
...
> > m <- rpois(100000, 1)
> > tabulate(m)
> [1] 36891 18399  6064  1519   309    50     4     1
> > table(m)
> m
>     0     1     2     3     4     5     6     7     8 
> 36763 36891 18399  6064  1519   309    50     4     1 
> > system.time(tabulate(m))
> [1] 0.11 0.00 0.00 0.00 0.00
> > system.time(table(m))
> [1] 2.90 0.16 4.00 0.00 0.00
> > version

OK first, notice that I get:

> system.time(table(m))
[1] 3.38 0.00 3.38 0.00 0.00
> system.time(f<-factor(m))
[1] 2.12 0.00 2.12 0.00 0.00
> system.time(table(f))
[1] 1.19 0.00 1.20 0.00 0.00

so most of the time really goes into factor(). If one is careful about
the innards of table() one can shave the time for that to 

> system.time(tab2(f))
[1] 0.66 0.01 0.67 0.00 0.00

Rather interestingly, the non constant time part of table would seem
equivalent to 

> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.25 0.00 0.25 0.00 0.00
> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.07 0.00 0.07 0.00 0.00

Notice the huge difference in the two executions, indicating that the
number of garbage collections involved probably play a major role.

On the whole it doesn't really seem to be worth it to obtimize this
very heavily, but if you have any obvious improvements for factor()...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jan 25 01:49:25 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 25 Jan 2000 14:49:25 +1300
Subject: lwd patches for "contour"
References: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>
Message-ID: <009901bf66d6$68fda0f0$175dd882@stat.auckland.ac.nz>

hi


>   I found it useful to have contour be able to do line widths ... hope
> that the guts haven't changed an enormous amount in the current
> development version ...  the patches are relatively trivial, mostly going
> by analogy with lty and col (although in my ignorance it took me a while
> to figure out what UNPROTECT(2) was and why it should be changed to
> UNPROTECT(3) ...  hope this is useful.


thanks very much !  i have been making a couple of changes to contour and i
have added your patch.  it should be in the next release (0.99)

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 25 07:04:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jan 2000 07:04:31 +0000 (GMT)
Subject: tabulate
In-Reply-To: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10001250658080.987-100000@auk.stats>

On 25 Jan 2000, Peter Dalgaard BSA wrote:

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > OK Peter.  This is the first one I cooked up:
> ...
> > > m <- rpois(100000, 1)
> > > tabulate(m)
> > [1] 36891 18399  6064  1519   309    50     4     1
> > > table(m)
> > m
> >     0     1     2     3     4     5     6     7     8 
> > 36763 36891 18399  6064  1519   309    50     4     1 
> > > system.time(tabulate(m))
> > [1] 0.11 0.00 0.00 0.00 0.00
> > > system.time(table(m))
> > [1] 2.90 0.16 4.00 0.00 0.00
> > > version
> 
> OK first, notice that I get:
> 
> > system.time(table(m))
> [1] 3.38 0.00 3.38 0.00 0.00
> > system.time(f<-factor(m))
> [1] 2.12 0.00 2.12 0.00 0.00
> > system.time(table(f))
> [1] 1.19 0.00 1.20 0.00 0.00
> 
> so most of the time really goes into factor(). If one is careful about
> the innards of table() one can shave the time for that to 
> 
> > system.time(tab2(f))
> [1] 0.66 0.01 0.67 0.00 0.00
> 
> Rather interestingly, the non constant time part of table would seem
> equivalent to 
> 
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.25 0.00 0.25 0.00 0.00
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.07 0.00 0.07 0.00 0.00
> 
> Notice the huge difference in the two executions, indicating that the
> number of garbage collections involved probably play a major role.
> 
> On the whole it doesn't really seem to be worth it to obtimize this
> very heavily, but if you have any obvious improvements for factor()...

Almost all the time is going on match(), which is 25x slower on my system
than S-PLUS 5.1 for this example.  I recall that we see this problem
in slow model.* manipulations too.

I don't know why match is slow: it does use hashing but may not be
optimized for matches into small sets.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Jan 25 07:59:13 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 25 Jan 2000 08:59:13 +0100 (MET)
Subject: core dump involving function closure (PR#402)
Message-ID: <200001250759.IAA03338@pubhealth.ku.dk>

A user has crashed R90.1 on MS Windows by succesive calls to two of my
formula/function interpretors in an order that I had not foreseen. I
have checked and this also occurs with Intel RH5.2. I have distilled
the problem down to its bare bones as the following set of
instructions:

func <- function(.mu){
	.ch1 <- deparse(.mu,width=500)[-1]
	.fn <- eval(parse(text=paste("function()",
		paste("eval(attr(.fn,\"model\"))"))))
	attr(.fn,"model") <- parse(text=.ch1)
	.fn}

mu <- function() eval(attr(.fn,"model"))
func(mu)()

debug does not help much. It looks like an infinite loop to me but
that is no excuse for a crash. I have modified my functions so that it
can now only occur in one very improbable case. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 25 09:42:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 10:42:47 +0100
Subject: core dump involving function closure (PR#402)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 25 Jan 2000 08:59:13 +0100 (MET)"
References: <200001250759.IAA03338@pubhealth.ku.dk>
Message-ID: <x2ya9elc6g.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> A user has crashed R90.1 on MS Windows by succesive calls to two of my
> formula/function interpretors in an order that I had not foreseen. I
> have checked and this also occurs with Intel RH5.2. I have distilled
> the problem down to its bare bones as the following set of
> instructions:
> 
> func <- function(.mu){
> 	.ch1 <- deparse(.mu,width=500)[-1]
> 	.fn <- eval(parse(text=paste("function()",
> 		paste("eval(attr(.fn,\"model\"))"))))
> 	attr(.fn,"model") <- parse(text=.ch1)
> 	.fn}
> 
> mu <- function() eval(attr(.fn,"model"))
> func(mu)()
> 
> debug does not help much. It looks like an infinite loop to me but
> that is no excuse for a crash. I have modified my functions so that it
> can now only occur in one very improbable case. Jim

Ouch. This kind of crash happens when the C stack grows too big and
you can no longer access automatic variables created on it. That's
pretty darn hard to avoid unless we want to put in some kind of
maxdepth check in the evaluator (which I suppose we could do).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:31:42 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:31:42 -0800
Subject: patch for using GNU linker with sparc-sun-solaris2.*
Message-ID: <rfiwvox39fl.fsf@cathcart.sysc.pdx.edu>


diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/26 01:25:37
***************
*** 583,590 ****
--- 582,594 ----
      shlibldflags="-shared"
      ;;
    *solaris*)
+     shlibldflags="-G"
      if test "${GCC}" = yes; then
        cpicflags=-fPIC
+       if `$CC -print-prog-name=ld` -v | grep GNU > /dev/null; then
+         shlibldflags=-shared
+         dllflags=-Wl,--export-dynamic
+       fi
      else
        cpicflags=-KPIC
      fi
***************
*** 593,599 ****
      else
        fpicflags=-PIC
      fi
-     shlibldflags="-G"
      ;;
  esac
  
--- 597,602 ----
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:36:02 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:36:02 -0800
Subject: passing through configure parameters during module installation?
Message-ID: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>


This patch makes it possible do module installs in this way:

$ R INSTALL --with-hdf5=/packages .

Is there a better/conventional way to do this kind of thing that I'm
not seeing?

diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/26 01:26:11
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 26 08:34:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 26 Jan 2000 09:34:39 +0100 (CET)
Subject: passing through configure parameters during module installation?
In-Reply-To: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
Message-ID: <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> This patch makes it possible do module installs in this way:

> $ R INSTALL --with-hdf5=/packages .

> Is there a better/conventional way to do this kind of thing that I'm
> not seeing?

The idea is very nice, but maybe not general enough.  Who knows, but
there may be someone who wants to pass an argument to configure that
does not start with `--with'.

I'd prefer something like

	--configure-args="..."

Would that be o.k. too?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 26 10:11:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 26 Jan 2000 11:11:18 +0100 (MET)
Subject: [R-d] E-mail to R-devel will have prefix, ok?
Message-ID: <14478.51270.541011.369015@gargle.gargle.HOWL>

A short "private" discussion revealed that several people desire to get a
prefix in the "subject:"s of R-devel mailings.

I'd propose to set "[R-d]" as I've done it (manually, this time!) above.
Unless I hear load protests, I'll set this.

your mailing list maintainer: Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:22:22 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:22:22 -0800
Subject: passing through configure parameters during module installation?
In-Reply-To: Kurt Hornik's message of "Wed, 26 Jan 2000 09:34:39 +0100 (CET)"
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu> <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>
Message-ID: <rfi901c2475.fsf@cathcart.sysc.pdx.edu>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

KH> I'd prefer something like

KH> 	--configure-args="..."

KH> Would that be o.k. too?

The downside of this is that it could get verbose and quoting is more
complicated.  Also, it may pass through things that shouldn't be
allowed, anyway.  But at least --with-*, --enable-*/--disable-* make
sense.  But I just want the capability.  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 26 16:24:05 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261624.RAA23569@pubhealth.ku.dk>



I observed the following difference:

> ddd <- data.frame(a=1:3, b=1:3)

# assignment of 'X' silently ignored
> ddd[1,1] <- 'X'
> is.factor(ddd[[1]])
[1] FALSE
> ddd
  a b
1 1 1
2 2 2
3 3 3

# assignment of 'X' not ignored
> ddd[[1]][1] <- 'X'
> is.factor(ddd[[1]])
[1] TRUE
> ddd
  a b
1 X 1
2 2 2
3 3 3


Regards



> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:56:43 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:56:43 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
Message-ID: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>


..looks like these should be "cvs delete"d.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 26 17:09:39 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2000 11:09:39 -0600
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: mgd@swarm.org's message of "26 Jan 2000 08:56:43 -0800"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>
Message-ID: <6r4sc0iwto.fsf@franz.stat.wisc.edu>

mgd@swarm.org (Marcus G. Daniels) writes:

> ..looks like these should be "cvs delete"d.

Deleted from where?  Are you talking about the rsync archive or the
tar files in the src directories on CRAN or ???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 17:16:37 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 09:16:37 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: Douglas Bates's message of "26 Jan 2000 11:09:39 -0600"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu> <6r4sc0iwto.fsf@franz.stat.wisc.edu>
Message-ID: <rfioga8zrbe.fsf@cathcart.sysc.pdx.edu>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

MD> ..looks like these should be "cvs delete"d.

DB> Deleted from where?  Are you talking about the rsync archive or
DB> the tar files in the src directories on CRAN or ???

anoncvs

Brian Ripley reports that in the main repository it has been removed.
I guess the mirror is lagging by a few days.

toucan% cvs log Complex.h 
revision 1.4
date: 2000/01/22 20:10:00;  author: ripley;  state: dead;  lines: +0 -0
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 26 17:26:50 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 26 Jan 2000 17:26:50 +0000 (GMT)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261726.RAA23501@toucan.stats.ox.ac.uk>


> From: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
> 
> 
> I observed the following difference:
> 
> > ddd <- data.frame(a=1:3, b=1:3)
> 
> # assignment of 'X' silently ignored
> > ddd[1,1] <- 'X'
> > is.factor(ddd[[1]])
> [1] FALSE
> > ddd
>   a b
> 1 1 1
> 2 2 2
> 3 3 3

actually it assigns as.numeric(factor("X")), which is 1.

> # assignment of 'X' not ignored
> > ddd[[1]][1] <- 'X'
> > is.factor(ddd[[1]])
> [1] TRUE
> > ddd
>   a b
> 1 X 1
> 2 2 2
> 3 3 3
> 

Here is my solution: line 488 in dataframe.R, in "[<-.data.frame"

## careful, as.data.frame turns things into factors.
##    value <- as.data.frame(value)
    if(!is.list(value) && (missing(j) || !missing(i))) { # [i, ] or [i,j]
        value <- matrix(value, n, p)
        dimv <- c(n, p)
        value <- split(value, col(value))
    } else {
        value <- as.data.frame(value)
        dimv <- dim(value)
    }

It covers the same cases as the prototype, but is a kludge, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:33 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 27 Jan 2000 15:48:33 +0100 (MET)
Subject: mailx (PR#404)
Message-ID: <200001271448.PAA03882@pubhealth.ku.dk>


Is there a reason that the default option for a mailer program (at least
on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
I suspect many other Linux users don't either, and it's kind of disconcerting
to have bug.report() fail ...

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:11 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 09:48:11 -0500 (EST)
Subject: oops
Message-ID: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>


  I just sent a bug report about "mailx" being the default mailer, before
I looked at bug.report() carefully and saw that it checked
"/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
problem with this in a previous version.

  Would it be clearer to have .Options$mailer be a vector or list of
alternate mailers that were checked in turn, rather than having them
hard-wired into bug.report()?

 (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 14:55:10 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 15:55:10 +0100 (CET)
Subject: mailx (PR#404)
In-Reply-To: <200001271448.PAA03882@pubhealth.ku.dk>
References: <200001271448.PAA03882@pubhealth.ku.dk>
Message-ID: <14480.23630.954259.783819@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 15:48:33 +0100 (MET),
>>>>> bolker  (b) wrote:

b> Is there a reason that the default option for a mailer program (at least
b> on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
b> I suspect many other Linux users don't either, and it's kind of disconcerting
b> to have bug.report() fail ...

mailx is a ``meta-name'' which currently searches for

	mailx
	Mail
	/usr/ucb/mail

in this order. The former two are available on my Debian Linux
machine. The reason is that plain mail does not allow all options we
need on some Unix systems, hence we can't include it in the list.

But of course the above list can be extended ... which program would
you suggest to use?

.f

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:01:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:01:23 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.24003.408377.962589@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 09:48:11 -0500 (EST),
>>>>> Ben Bolker (BB) wrote:

BB>   I just sent a bug report about "mailx" being the default mailer, before
BB> I looked at bug.report() carefully and saw that it checked
BB> "/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
BB> problem with this in a previous version.

BB>   Would it be clearer to have .Options$mailer be a vector or list of
BB> alternate mailers that were checked in turn, rather than having them
BB> hard-wired into bug.report()?

BB>  (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

OK, my previous email was too fast :-)

hmm, the mailer option is more intended to be a ``concept of mailing''
rather than a program by itself (we just named all options as the
programs as this is the easiest things to remember) ... but gnudoit
doeas something conceptually different because it opens an emacs mail
buffer and not simply a temp file ... 

I don't like the idea of having the above too flexible because there
will definetely be people doing something like

	bug.report(mailer="netscape")

and complain that it is not working ...


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:25:16 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:25:16 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>


``oops on my side'', I forgot to ask the crucial question: which
mailer is available on your system that could be used? again, "mail"
(without a path like in "/usr/ucb/mail" is not an option as that fails
on some other unixes.

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From setzer.woodrow@epa.gov  Thu Jan 27 15:37:08 2000
From: setzer.woodrow@epa.gov (setzer.woodrow@epa.gov)
Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)
Subject: error in dweibull (PR#405)
Message-ID: <200001271537.QAA04550@pubhealth.ku.dk>

Full_Name: R. Woodrow Setzer, Jr.
Version: 0.90.1
OS: linux - Redhat 6.1
Submission from: (NULL) (165.247.155.206)


dweibull(0,1,1) evaluates to 0; it should be 1.  
Note that dweibull(.Machine$double.eps) evaluates to 1.

> dweibull(.01,1,1)
[1] 0.9900498
> dweibull(.00001,1,1)
[1] 0.99999
> dweibull(.Machine$double.eps,1,1)
[1] 1
> dweibull(0,1,1)
[1] 0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Jan 27 16:12:36 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 27 Jan 2000 17:12:36 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271612.RAA04925@pubhealth.ku.dk>

Full_Name: Joerg Polzehl
Version: 0.90.1
OS: Digital UNIX V4.0F
Submission from: (NULL) (192.124.249.126)


The dimension attribute in function density is not handled correctly
(or at least differently from S) :

z_rnorm(1000)
dim(z)_c(10,10,10)
plot(density(z),type="l")

# no problem

plot(density(z[1,,]),type="l")

# Error in if (!(lo <- min(hi, IQR(x)/1.34))) (lo <- hi)
# || (lo <- abs(x[1])) ||  : missing value where logical
# needed
# In addition: Warning message: 
# NaNs produced in: sqrt(var(x, na.rm = na.rm)) 

######## x probably is still a matrix in the call of var()  ########

plot(density(as.vector(z[1,,])),type="l")

# again no problem


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 16:12:45 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 11:12:45 -0500 (EST)
Subject: oops
In-Reply-To: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.10.10001271112110.10321-100000@bolker.zoo.ufl.edu>


  My oops is that things actually work here, I just thought they didn't
(since a previous version of R didn't have the alternative options, just
tried "mailx" and barfed when it wasn't there).
 
On Thu, 27 Jan 2000, Friedrich Leisch wrote:

> 
> ``oops on my side'', I forgot to ask the crucial question: which
> mailer is available on your system that could be used? again, "mail"
> (without a path like in "/usr/ucb/mail" is not an option as that fails
> on some other unixes.
> 
> .f
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:10:23 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:10:23 +0000 (GMT)
Subject: error in dweibull (PR#405)
Message-ID: <200001271710.RAA09444@toucan.stats.ox.ac.uk>

> From: setzer.woodrow@epa.gov
> Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)

> dweibull(0,1,1) evaluates to 0; it should be 1.  

Is that not a matter of opinion?  Note the help page says

     The Weibull distribution with `shape' parameter a and
     `scale' parameter b has density given by

             f(x) = (a/b) (x/b)^(a-1) exp(- (x/b)^a)

     for x > 0.


> Note that dweibull(.Machine$double.eps) evaluates to 1.
> 
> > dweibull(.01,1,1)
> [1] 0.9900498
> > dweibull(.00001,1,1)
> [1] 0.99999
> > dweibull(.Machine$double.eps,1,1)
> [1] 1
> > dweibull(0,1,1)
> [1] 0

I would say the Weibull density was defined to be non-zero on (0, Inf),
and S-PLUS agrees with me, as does the help page.  I don't see a bug in
the results you present which are consistent with the documentation.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 17:12:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 18:12:21 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 27 Jan 2000 17:12:36 +0100 (MET)"
References: <200001271612.RAA04925@pubhealth.ku.dk>
Message-ID: <x27lgvfngq.fsf@blueberry.kubism.ku.dk>

polzehl@wias-berlin.de writes:

> ######## x probably is still a matrix in the call of var()  ########

Exactly. Do we fix sd() or density() or both?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:21:29 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:21:29 +0000 (GMT)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271721.RAA09498@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 27 Jan 2000 18:12:21 +0100
> 
> polzehl@wias-berlin.de writes:
> 
> > ######## x probably is still a matrix in the call of var()  ########
> 
> Exactly. Do we fix sd() or density() or both?

Both. density needs an x <- as.vector(x), and I think sd needs 
to return the  standard deviation*s* if given a matrix or data frame.
Its current behaviour is wrong.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Jan 27 17:47:31 2000
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 27 Jan 2000 18:47:31 +0100 (MET)
Subject: NA not printed after table (PR#407)
Message-ID: <200001271747.SAA05694@pubhealth.ku.dk>


In the following example, the NA is not printed.

x <- c(1,2,3,2,1)
y <- table(x)
z <- list(a=y,b=NA)
z

yields

$a
x
1 2 3 
2 2 1 

$b
[1]  
   ^^^^
no NA here!

or

z <- list(a=y,d=2,b=c(1,NA,2))

R> z
$a
x
1 2 3 
2 2 1 

$d
[1] 2

$b
[1] 1   2


This seems to happen only, if an object of class "table" precedes an
NA in a list.


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:09:29 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 27 Jan 2000 19:09:29 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271809.TAA05805@pubhealth.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 19:10:28 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: Prof Brian Ripley's message of "Thu, 27 Jan 2000 17:21:29 +0000 (GMT)"
References: <200001271721.RAA09498@toucan.stats.ox.ac.uk>
Message-ID: <x21z73fkrv.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@gcal.ac.uk  Fri Jan 28 10:17:37 2000
From: wsimpson@gcal.ac.uk (wsimpson@gcal.ac.uk)
Date: Fri, 28 Jan 2000 11:17:37 +0100 (MET)
Subject: convolution bug (PR#408)
Message-ID: <200001281017.LAA11335@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Sat Jan 29 00:40:09 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 28 Jan 2000 16:40:09 -0800
Subject: HDF5 as a module
Message-ID: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>


--=-=-=


Included below are:

  1) Diffs to to remove HDF5 from R

  2) Diffs to pass thru --with-* options to a module's configure
     script during "R INSTALL".  (To reiterate a plea for this
     capability...)  This applies only to Unix, the Windows (mingw32 in
     my case) build approach of passing in make variables like
     *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
     Windows install is that I had to drop the `bundle' wrapper, which
     was useful for Unix in order to give the package a recognizable
     name with version number (Rhdf5-0.0), but the installed package
     with R a minimal name (hdf5).

  3) The module itself, as an attachment.


Index: aclocal.m4
===================================================================
RCS file: /home/rcvs/src/R/aclocal.m4,v
retrieving revision 1.30
diff -c -r1.30 aclocal.m4
*** aclocal.m4	2000/01/21 07:49:19	1.30
--- aclocal.m4	2000/01/29 00:22:35
***************
*** 543,570 ****
      AC_MSG_WARN([I found f2c but not libf2c, or libF77 and libI77])
    fi])
  dnl
- dnl R_LIB_HDF5
- dnl
- AC_DEFUN(R_LIB_HDF5,
-   [ AC_CHECK_LIB(hdf5, main,
-       [ ac_save_LIBS="${LIBS}"
- 	LIBS="-lhdf5 ${LIBS}"
- 	AC_CACHE_CHECK([for HDF5 version >= 1.2],
- 	  r_cv_lib_hdf5,
- 	  AC_TRY_LINK(
- 	    [#include <hdf5.h>],
- 	    [ H5T_pers_t convtype = H5T_PERS_SOFT;
- 	      H5Tclose ((hid_t) 0);],
- 	    r_cv_lib_hdf5=yes,
- 	    r_cv_lib_hdf5=no))
- 	if test "${r_cv_lib_hdf5}" = yes; then
- 	  AC_DEFINE(HAVE_HDF5)
- 	else
- 	  LIBS=${ac_save_LIBS}
- 	fi
-       ])
-   ])
- dnl
  dnl R_FUNC___SETFPUCW
  dnl
  AC_DEFUN(R_FUNC___SETFPUCW,
--- 543,548 ----
Index: configure.in
===================================================================
RCS file: /home/rcvs/src/R/configure.in,v
retrieving revision 1.159
diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/29 00:22:50
***************
*** 342,348 ****
  ))
  AC_CHECK_LIB(dl, dlopen)
  AC_CHECK_LIB(z, main)
- R_LIB_HDF5
  BLAS="blas.o"
  if ${use_dxml}; then
    AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
--- 342,347 ----
***************
*** 394,400 ****
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   hdf5.h ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
--- 393,399 ----
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
Index: src/main/Makefile.in
===================================================================
RCS file: /home/rcvs/src/R/src/main/Makefile.in,v
retrieving revision 1.51
diff -c -r1.51 Makefile.in
*** src/main/Makefile.in	2000/01/27 05:42:06	1.51
--- src/main/Makefile.in	2000/01/29 00:23:10
***************
*** 45,51 ****
  	gram.c \
  	gram-ex.c \
  	graphics.c \
- 	hdf5.c \
  	iosupport.c \
  	list.c \
  	logic.c \
--- 45,50 ----
Index: src/main/names.c
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.c,v
retrieving revision 1.119
diff -c -r1.119 names.c
*** src/main/names.c	2000/01/27 05:41:22	1.119
--- src/main/names.c	2000/01/29 00:23:18
***************
*** 515,522 ****
  {"parse",	do_parse,	0,	11,	4,	PP_FUNCALL},
  {"save",	do_save,	0,	111,	4,	PP_FUNCALL},
  {"load",	do_load,	0,	111,	2,	PP_FUNCALL},
- {"hdf5save",	do_hdf5save,	0,	0,	-1,	PP_FUNCALL},
- {"hdf5load",	do_hdf5load,	0,	11,	 2,	PP_FUNCALL},
  {"deparse",	do_deparse,	0,	11,	2,	PP_FUNCALL},
  {"dput",	do_dput,	0,	111,	2,	PP_FUNCALL},
  {"dump",	do_dump,	0,	111,	2,	PP_FUNCALL},
--- 515,520 ----
Index: src/main/names.h
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.h,v
retrieving revision 1.51
diff -c -r1.51 names.h
*** src/main/names.h	2000/01/21 17:54:06	1.51
--- src/main/names.h	2000/01/29 00:23:19
***************
*** 181,188 ****
  SEXP do_gray(SEXP, SEXP, SEXP, SEXP);
  SEXP do_grep(SEXP, SEXP, SEXP, SEXP);
  SEXP do_gsub(SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5save (SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5load (SEXP, SEXP, SEXP, SEXP);
  SEXP do_hsv(SEXP, SEXP, SEXP, SEXP);
  SEXP do_identify(SEXP, SEXP, SEXP, SEXP);
  SEXP do_if(SEXP, SEXP, SEXP, SEXP);
--- 181,186 ----

Index: src/scripts/INSTALL.in
===================================================================
RCS file: /home/rcvs/src/R/src/scripts/INSTALL.in,v
retrieving revision 1.29
diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/29 00:23:21
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then


--=-=-=
Content-Type: application/octet-stream
Content-Disposition: attachment; filename=Rhdf5-0.1.tar.gz
Content-Transfer-Encoding: base64
Content-Description: HDF5 module for R

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
f/Hv/wH51ZhiAGgBAA==
--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jan 29 10:04:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 29 Jan 2000 11:04:27 +0100 (MET)
Subject: [Rd] Re: E-mail to R-devel will have prefix, ok?
In-Reply-To: <14478.51270.541011.369015@gargle.gargle.HOWL>
References: <14478.51270.541011.369015@gargle.gargle.HOWL>
Message-ID: <14482.47915.762101.343163@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A short "private" discussion revealed that several people desire to
    MM> get a prefix in the "subject:"s of R-devel mailings.

    MM> I'd propose to set "[R-d]" as I've done it (manually, this time!)
    MM> above.  Unless I hear load protests, I'll set this.

    MM> your mailing list maintainer: Martin Maechler

We had no public feedback.  
Private feedback was
	 << Can't people sort by "Sender/From.." ? >>
Long prefixes are a nuisance because they obscure more of the real "Subject".

As a minimal compromise,  I've now added  "[Rd]"
   (+ the space, still makes 5 valuable characters..)
Martin

---------

R-lists maintainer
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon Jan 31 04:21:28 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 31 Jan 2000 15:21:28 +1100
Subject: [Rd] Interest in R plotting capabilities
Message-ID: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>

I'm a scheme and C user generally, I'm a bit wary of the large FORTRAN
content of the R language but aside from that issue it seems nice and simple
and easy to use.

What I want to do is find some GPL software to replace gnuplot,
and since R does all the calculating stuff that gnuplot does (probably
R is faster though I haven't tested) plus R has quite decent
plotting capabilities I thought that R might make a good candidate
for a plotting program.

I had a few problems in some particular areas though... gnuplot
can produce mesh plots of a 3D surface from regular grid samples in x,y,z
coordintes. Does R have a package that does anything like that?
Also, gnuplot supports both hidden-line mode (very slow but gets there)
and non-hidden line mode.

Another thing gnuplot can do is generate 2D contours from regular
grid samples of a 3D function. Is there any contour generation system
for R?

One final question, I looked over the GNU libplot library and it seems
to have excellent device handling capabilities and some decent font
selections but the actual plotting side of things is not nearly as good
as R. It seems kind of logical to add a module to R that provides all
the libplot devices as R devices since this would give the best of both
worlds and should require only ``glue'' code. Anyone thought of something
like this already?

By the way, I put some of my notes together as I was learning R and they
are at:

	http://www.progsoc.uts.edu.au/~telford/samples/R/

Hopefully I'll add to it as I figure things out but it could provide a
good place for beginners to start since it includes all the really
simple stuff that I had to figure out (I have no S reference). If someone
is writing an R tutorial, and if it will be under GPL, then they can grab
whatever they like from my notes.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Mon Jan 31 10:16:05 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Mon, 31 Jan 2000 10:16:05 +0000 (GMT)
Subject: [Rd] Interest in R plotting capabilities
In-Reply-To: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.LNX.4.10.10001311009440.690-100000@localhost.localdomain>

> 
> I had a few problems in some particular areas though... gnuplot
> can produce mesh plots of a 3D surface from regular grid samples in x,y,z
> coordintes. Does R have a package that does anything like that?
> Also, gnuplot supports both hidden-line mode (very slow but gets there)
> and non-hidden line mode.
try persp(). Here's an example:
x<-seq(1,3)
y<-seq(1,3)
z<-seq(1,9)
data<-data.frame(x,y,z) 	#or read dataframe from disk file
x<-unique(data$x)
y<-unique(data$y)
z<-matrix(data$z,length(y),length(x))
image(x,y,z, col=gray(0:19/19),xlab="x", ylab="y")
contour(x,y,z,xlab="x", ylab="y")
persp(x,y,z, col="gray")

> Another thing gnuplot can do is generate 2D contours from regular
> grid samples of a 3D function. Is there any contour generation system
> for R?
contour() also filled.contour()
see above.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 10:07:16 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 11:07:16 +0100
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
References: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
Message-ID: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> Included below are:

>   1) Diffs to to remove HDF5 from R

>   2) Diffs to pass thru --with-* options to a module's configure
>      script during "R INSTALL".  (To reiterate a plea for this
>      capability...)  This applies only to Unix, the Windows (mingw32 in
>      my case) build approach of passing in make variables like
>      *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
>      Windows install is that I had to drop the `bundle' wrapper, which
>      was useful for Unix in order to give the package a recognizable
>      name with version number (Rhdf5-0.0), but the installed package
>      with R a minimal name (hdf5).

>   3) The module itself, as an attachment.

I made the changes to the R sources, and removed the obsolete files.

Re INSTALL, I had already committed the new `--configure-opts=' option,
which I still think is preferable to having `--with-*' explicitly.

Re the module, I have several comments.

* It would be nice to merge this into Doug Bates' foreign package.

* I think this should be one package, not a bundle.  Also, the version
info in DESCRIPTION does not match the actual number used.

* Makevars.in should not use LDFLAGS.  Instead, the -L flags should be
in PKG_LIBS (as explained in R-exts.texi).  Also, linking against the
libraries should only happen if these were found.  In general, I am not
sure how the package will install in case the libs are not there.

* The include statements in hdf5.c should conform to the new header file
structure.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jan 31 15:25:13 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 31 Jan 2000 16:25:13 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000131162513.plummer@iarc.fr>

On 31-Jan-00 Kurt Hornik wrote:
 
> * It would be nice to merge this into Doug Bates' foreign package.

I would prefer if you didn't do this.  The dependence of hdf5 on external
libraries causes problems when you distribute binary versions of R.
We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
difference between the two is that the latter is linked against libhdf5
and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
in a separate package means that we can distribute a single RPM for
R-base, and provide the extra functionality of access to hdf5 files in
a separate add-on package. Merging hdf5 and foreign would put us back
in the original position.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 31 15:21:10 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 31 Jan 2000 16:21:10 +0100 (MET)
Subject: [Rd] Feature requests for princomp(.) : Allow cor() specifications
Message-ID: <14485.43110.405973.902333@gargle.gargle.HOWL>

(all in subject).

If I want to do a PC analysis in a situation with missing data,
I may want to have same flexibility as with "cor(.)",
e.g., I may want

      princomp(x, ...,  use.obs = "pairwise.complete")


Actually, I may want even more flexibility.
Currently,
	princomp(.) 
has

    if (cor) 
        cv <- get("cor", envir = .GlobalEnv)(z)
    else cv <- cov(z)
    edc <- eigen(cv)

and If may want it to use a robust covariance or correlation matrix instead,
e.g.,

    princomp(x, cv = cov.mve(x), .....)

Note that for prcomp() which works on the SVD rather than the
correlation/cov. matrix,  similar flexibility may be required.

Opinions?
Volunteers?

(either one is sufficient to answer!)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 15:26:24 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 16:26:24 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <XFMail.000131162513.plummer@iarc.fr>
References: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
 <XFMail.000131162513.plummer@iarc.fr>
Message-ID: <14485.43424.783759.935990@fangorn.ci.tuwien.ac.at>

>>>>> Martyn Plummer writes:

> On 31-Jan-00 Kurt Hornik wrote:
>> * It would be nice to merge this into Doug Bates' foreign package.

> I would prefer if you didn't do this.  The dependence of hdf5 on external
> libraries causes problems when you distribute binary versions of R.
> We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
> difference between the two is that the latter is linked against libhdf5
> and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
> in a separate package means that we can distribute a single RPM for
> R-base, and provide the extra functionality of access to hdf5 files in
> a separate add-on package. Merging hdf5 and foreign would put us back
> in the original position.

But only if foreign is part of R, no?

(But I have no problem if hdf5 stays separate.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jan  1 15:40:50 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Jan 2000 16:40:50 +0100 (CET)
Subject: Segfault in dataentry() (PR#391)
In-Reply-To: <199912311709.SAA12673@pubhealth.ku.dk>
References: <199912311709.SAA12673@pubhealth.ku.dk>
Message-ID: <14446.8194.975894.184062@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:
>>> dataentry(0,0)

PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
PD> (TYPEOF(s)) {

PD> Apparently that one doesn't get trapped by the no-segfault checks.
PD> Martin?

> There's a not-so-short  "stop.list" of functions which are *NOT* tested for
> segfaults.   dataentry (w/ and w/o ".") is among them.
> all the interactive ones are, actually.
> [[remember:   The list was quite a bit shorter, and there were R core
> 	      members who complained...]] 

> Look in  ..../tests/make-no-segfault.R for the statements starting with

>  edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
>  misc.int <- c("browser", "bug.report", "menu")
>  stop.list[["base"]] <-
>     ..

> to find all the functions which are *not* tested for seg.faults.

> Maybe we (R-core) we should really always have
>       R_TESTLOTS=yes
> in our environments?

Actually, I'd prefer having some means of markup in the Rd source code
to indicate whether an object should not be employed for the no-segfault
testing.  We could still keep the R_TESTLOTS, though ...

E.g, the socket docs would have something correspding to \dontrun in the
examples section.

This should be cleaner than having to change the script in tests.

(Confusion arose when Fritz added old.packages() two days ago ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Jan  3 21:45:19 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 3 Jan 2000 22:45:19 +0100 (MET)
Subject: links in faq file broken (PR#393)
Message-ID: <200001032145.WAA29247@pubhealth.ku.dk>

Full_Name: A.I. McLeod
Version: 0.091
OS: NT
Submission from: (NULL) (129.100.45.131)


links are broken or missing in:

http://cran.r-project.org/doc/FAQ/R-FAQ.html

In the following section:

5.5 How can I create an R package?

This does not work:
See Creating R packages, for more information. 

since

http://cran.r-project.org/doc/FAQ/R-exts.html#Creating%20R%20pkgs

is missing.

There are many other missing links as well.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 09:37:03 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Tue, 4 Jan 2000 10:37:03 +0100 (MET)
Subject: formatC (bug and fix) (PR#394)
Message-ID: <200001040937.KAA02096@pubhealth.ku.dk>


OK:

> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"


NOT OK:

> formatC(as.integer(c(1,0,NA)))
[1] "0"          "1072693248" "NA"

> formatC(as.integer(c(0,1,NA)))
[1] "0"  "0"  "NA"


BUG TRACED TO R-code of formatC()

where

        x[!Ok] <- 0

unintendedly changes the storage.mode of x to double, while variable mode
still signifies 'integer'. Thus the following is probably ok as bug fix

        ProperZero <- 0
        storage.mode(ProperZero) <- mode
        x[!Ok] <- ProperZero


At least the following tests are positive using this fix

> formatC(as.integer(c(1,0,NA)))
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


Best regards


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 15:47:57 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 15:47:57 +0000 (GMT)
Subject: set functions
Message-ID: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>

I wonder if we might also include an "equiv" function along with the other
set functions (ie "union", "intersect", etc), perhaps along the lines of

"equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

(which I think might be the quickest implementation).  I use this type of
function quite frequently: is there some reason why it is not in the base?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 15:08:35 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 4 Jan 2000 16:08:35 +0100
Subject: format.char() speedup
Message-ID: <000901bf56c5$9357e3e0$a9021aac@joelschlaegel>



Happy new Year!

Here is a slightly changed version of format.char(), which really speeds up
for big data.


Regards


Jens Oehlschlgel-Akiyoshi


format.char.old <- format.char

format.char <-
function (x, width = NULL, flag = "-")
{
    if (is.null(x))
        return("")
    if (!is.character(x)) {
        warning("format.char: coercing 'x' to 'character'")
        x <- as.character(x)
    }
    if (is.null(width) && flag == "-")
        return(format(x))
    at <- attributes(x)
    nc <- nchar(x)
    if (is.null(width))
        width <- max(nc)
    else if (width < 0) {
        flag <- "-"
        width <- -width
    }
    # start of accelerate
    no <- pmax(0, width - nc)
    tab <- unique(no)
    tabpad <- sapply(tab+1, function(no) paste(character(no), collapse = "
"))
    pad <- tabpad[match(no, tab)]
    # end of accelerate
    r <- if (flag == "-")
        paste(x, pad, sep = "")
    else paste(pad, x, sep = "")
    if (!is.null(at))
        attributes(r) <- at
    r
}

> system.time(format.char(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA
> system.time(format.char.old(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA

> system.time(format.char(character(100000), width=30))
[1] 3.90 0.02 3.92   NA   NA
> system.time(format.char.old(character(100000), width=30))
[1] 92.33  0.35 92.69    NA    NA

> system.time(format.char(character(1000), width=1:1000))
[1] 2.69 0.00 2.68   NA   NA
> system.time(format.char.old(character(1000), width=1:1000))
[1] 2.55 0.00 2.55   NA   NA

> system.time(format.char(character(100000), width=1:1000))
[1] 28.71  0.00 28.72    NA    NA
> system.time(format.char.old(character(100000), width=1:1000))
Error: heap memory (65536 Kb) exhausted [needed 0 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 269.1 0.28 269.56 NA NA




--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:16:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:16:48 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 15:47:57 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>
Message-ID: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> I wonder if we might also include an "equiv" function along with the other
> set functions (ie "union", "intersect", etc), perhaps along the lines of
> 
> "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> (which I think might be the quickest implementation).  I use this type of
> function quite frequently: is there some reason why it is not in the base?

length(setdiff(x,y))==0 appears to be about twice as fast....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:17:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:17:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

> length(setdiff(x,y))==0 appears to be about twice as fast....

But I don't think that would be right!

length(setdiff(1:4, 1:5))==0	# is TRUE
equiv(1:4, 1:5)			# clearly FALSE

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:39:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:39:58 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:17:33 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>
Message-ID: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> On 4 Jan 2000, Peter Dalgaard BSA wrote:
> 
> > > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> > length(setdiff(x,y))==0 appears to be about twice as fast....
> 
> But I don't think that would be right!
> 
> length(setdiff(1:4, 1:5))==0	# is TRUE
> equiv(1:4, 1:5)			# clearly FALSE

Argh. I was thinking of the symmetric set difference. So you'd need 
setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
as twice as fast....

However:

equiv<-function(x,y) 
    length(x<-unique(x))==length(y<-unique(y)) && 
    all(sort(x)==sort(y)) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:55:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:55:02 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:45:12 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>
Message-ID: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> > equiv<-function(x,y) 
> >     length(x<-unique(x))==length(y<-unique(y)) && 
> >     all(sort(x)==sort(y)) 
> 
> Yes, I wondered about that, and also about
> 
> "equiv" <-
> function(x, y) {
>   x <- unique(x)
>   y <- unique(y)
>   length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
> }
> 
> but I thought that perhaps a sort would be more expensive than a second
> call to match, and more so for two sorts.  Cheers, Jonathan.

Watch:

> x<-1:50000
> y<-x[order(runif(50000))]
> "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> equiv<-function(x,y) 
+     length(x<-unique(x))==length(y<-unique(y)) && 
+     all(sort(x)==sort(y)) 
> system.time(equiv2(x,y))
[1] 3.10 0.02 3.00 0.00 0.00
> system.time(equiv(x,y))
[1] 0.77 0.00 1.00 0.00 0.00
> 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:45:12 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:45:12 +0000 (GMT)
Subject: set functions
In-Reply-To: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > length(setdiff(1:4, 1:5))==0	# is TRUE
> > equiv(1:4, 1:5)			# clearly FALSE
> 
> Argh. I was thinking of the symmetric set difference. So you'd need 
> setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
> as twice as fast....
> 
> However:
> 
> equiv<-function(x,y) 
>     length(x<-unique(x))==length(y<-unique(y)) && 
>     all(sort(x)==sort(y)) 

Yes, I wondered about that, and also about

"equiv" <-
function(x, y) {
  x <- unique(x)
  y <- unique(y)
  length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
}

but I thought that perhaps a sort would be more expensive than a second
call to match, and more so for two sorts.  Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:59:45 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:59:45 +0000 (GMT)
Subject: set functions
In-Reply-To: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> Watch:
> 
> > x<-1:50000
> > y<-x[order(runif(50000))]
> > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> > equiv<-function(x,y) 
> +     length(x<-unique(x))==length(y<-unique(y)) && 
> +     all(sort(x)==sort(y)) 
> > system.time(equiv2(x,y))
> [1] 3.10 0.02 3.00 0.00 0.00
> > system.time(equiv(x,y))
> [1] 0.77 0.00 1.00 0.00 0.00

Yup -- that's much quicker!  To re-ask the original question, would it be
reasonable to include such a function along with the other set functions?
Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sino123@hotmail.com  Wed Jan  5 03:16:22 2000
From: sino123@hotmail.com (sino123@hotmail.com)
Date: Wed, 05 Jan 2000 11:16:22 +0800
Subject: Welcome to post your business and trade offers in sino trade Leads wwwboard!
Message-ID: <36530.469699421292800.85126@localhost>

http://tradeleads.heha.net

Do you want to reach 20,000,000 worldwide manufacturers and traders ?! 
Do you want to find your product a buyer within hours ?! 
Do you want to explore foreign market ?! 

Welcome to post your business and trade offers in trade Leads wwwboard!

http://tradeleads.heha.net

is a professional Trade BBS where you can post and search worldwide trade and
business information. 
--------------------------------------------------------------------------------
This is not Spamming, you receive this email because you have subscribe or post
to one of our business Netowrk website's information services. 
To be removed from this NEWSLETTER, please send emailto: sino123@sinoleads.com
--------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  5 09:50:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Jan 2000 10:50:11 +0100 (MET)
Subject: set functions
In-Reply-To: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
References: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
 <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
Message-ID: <14451.5075.867165.954414@gargle.gargle.HOWL>


 On 4 Jan 2000, Peter Dalgaard BSA wrote:
 > Watch:
 > 
 > > x<-1:50000
 > > y<-x[order(runif(50000))]
 > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
 > > equiv<-function(x,y) 
 > +     length(x<-unique(x))==length(y<-unique(y)) && 
 > +     all(sort(x)==sort(y)) 
 > > system.time(equiv2(x,y))
 > [1] 3.10 0.02 3.00 0.00 0.00
 > > system.time(equiv(x,y))
 > [1] 0.77 0.00 1.00 0.00 0.00

    JonR> Yup -- that's much quicker!  To re-ask the original question,
    JonR> would it be reasonable to include such a function along with the
    JonR> other set functions?  Cheers, Jonathan.

quite a good idea, particularly, since we all have now learned that it is
non-trivial to write really efficiently.

However, I think "equiv" is not specific enough (could mean "equivalence of
arbitrary R objects").
Wouldn't  "setequiv" or "setequal" be better ?

((and would you provide (to R-core)  patches to
    src/library/base/R/sets.R and src/library/base/man/sets.Rd))

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  5 10:21:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 5 Jan 2000 10:21:24 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001051017030.10525-100000@auk.stats>

On Wed, 5 Jan 2000, Martin Maechler wrote:

>  On 4 Jan 2000, Peter Dalgaard BSA wrote:
>  > Watch:
>  > 
>  > > x<-1:50000
>  > > y<-x[order(runif(50000))]
>  > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
>  > > equiv<-function(x,y) 
>  > +     length(x<-unique(x))==length(y<-unique(y)) && 
>  > +     all(sort(x)==sort(y)) 
>  > > system.time(equiv2(x,y))
>  > [1] 3.10 0.02 3.00 0.00 0.00
>  > > system.time(equiv(x,y))
>  > [1] 0.77 0.00 1.00 0.00 0.00
> 
>     JonR> Yup -- that's much quicker!  To re-ask the original question,
>     JonR> would it be reasonable to include such a function along with the
>     JonR> other set functions?  Cheers, Jonathan.
> 
> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

Some of us knew that. What worries me a bit is that optimizing code for the
current R may not be a good idea. R currently spends a lot of its
time on garbage collection (30 to 50% on my profiling) and it is planned to 
alter the memory allocator real soon now.  When hashing of environments
was introduced it made a lot of difference to some code, and little to
others.  That's not to say that we should not optimize, but
trying hard may be a waste of time. (Says he having learnt the hard way
across S-PLUS versions.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan  5 12:10:19 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 5 Jan 2000 12:10:19 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001051145270.21562-100000@laplace>

On Wed, 5 Jan 2000, Martin Maechler wrote:

> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

And I've just noticed that Peter's ultra-quick sorting algorithm stumbles
over NAs:

"setequal" <- function(x,y)
  length(x<-unique(x))==length(y<-unique(y)) && all(sort(x)==sort(y))

"setequal2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

setequal(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal2(c(NA, 1:4), c(1:4, NA))	# TRUE

setequal(c(NA, 1:4), c(1:4, 5))		# FALSE plus warning message
setequal2(c(NA, 1:4), c(1:4, 5))	# FALSE

Putting na.last=TRUE in sort does not help, as then there is a missing
logical for the && following the call to all.  Might I suggest, in the
light of Brian's comments, that setequal2 is more in the spirit of the
other set functions?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Wed Jan  5 18:08:28 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Wed, 5 Jan 2000 19:08:28 +0100 (MET)
Subject: bug in glm.fit (PR#395)
Message-ID: <200001051808.TAA22156@pubhealth.ku.dk>

Dear R-team

There seems to be a bug in glm.fit - I got the following error message:

> > > + Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null
else glm.fit)(x = X, y = Y,
  
> > traceback()
[1] "names<-.default(*tmp*, value = ynames)"                                  
[2] "names<-(*tmp*, value = ynames)"                                          
[3] "(if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y, "      
[4] "    weights = weights, start = start, offset = offset, family = family, "
[5] "    control = control, intercept = attr(mt, \"intercept\") > 0)"         
[6] "glm(SKR.ein.aus ~ MWSQUAL + FAC.M1 + FAC.M2 + FAC.A1 + FAC.A2 + "        
[7] "    MLDR + TAGNR, family = binomial, data = daten[rows, ])"              


Debugging glm.fit I found the following: when some elements of the vector
`good' are FALSE then `w' has no more "full" length:

  w <- sqrt((weights * mu.eta.val^2)[good]/variance(mu)[good])

which leads to problems close to the end of the function:

  names(w) <- ynames

as `ynames' has "full" length.

The same problem is with:

  names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", nobs - 
        fit$rank))

as `fit$effects' has same length as `w'.

That's all I found out. I hope it helps.

I am sorry for not sending the data but as it is secret it would take some
effort to "disguise" it, so it that's not necessary I would be quite
grateful... 

Thanks, Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan  5 18:49:56 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 Jan 2000 13:49:56 -0500
Subject: anoncvs
Message-ID: <38739254.30002A77@bank-banque-canada.ca>

I'm trying to do

cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

and I get "authorization failed...rejected access" with the previously
advertised password (anoncvs). Has the access been changed or is anyone
else having this problem? I'm not very familiar with cvs so I may be
making some mistake.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan  5 19:00:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Jan 2000 13:00:42 -0600
Subject: network outage 1/9/2000 05:00 - 09:30 CST
Message-ID: <6rembwfin9.fsf@franz.stat.wisc.edu>

The University of Wisconsin - Madison has scheduled another period of
network down time for Sun, Jan 9, 2000, 05:00 - 09:30 local time
(2000/01/09 11:00 - 15:30 GMT).  This will affect the r-project.org,
omegahat.org and madisonlinux.org domains.  The primary nameservers
for those domains and some of the http servers will be inaccessible.

------- Start of forwarded message -------
To: cs-announce@cs.wisc.edu
Subject: campus/internet network outage 1/9/2000 05:00 - 09:30
Date: Wed, 05 Jan 2000 12:48:59 -0600

>From DoIT Network Engineering:

     OUTAGE REMINDER FOR 1/9/2000
     We have a major outage scheduled for this Sunday starting 5AM and 
     estimated end time of 9:30AM.
     
     Here's some details for those of you interested.
     1)  Upgrade Ethernet switch code across the entire backbone.
     2)  Upgrade ATM switch code across the entire backbone.
     3)  BIGMACC router will be getting a new chassis allowing it to become 
     "two" routers.  A code upgrade will be performed one of the BigMacc 
     routers.
     4)  All Routers will be receiving upgraded ATM interfaces.
     
     This outage will affect all campus users that need campus backbone and 
     internet access during this time period.  
     
     The length of the outage will vary for each customer and the whole 
     outage period will be needed.
     

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From 1hotbuy@4-charity.org  Wed Jan  5 19:05:26 2000
From: 1hotbuy@4-charity.org (1hotbuy@4-charity.org)
Date: Wed, 05 Jan 2000 19:05:26
Subject: stock idea dvdt
References: 0A2E82C38
Message-ID: <200001052338.PAA09097@romulus.netpage.com>

<HTML><FONT  SIZE=3 PTSIZE=10><B>Press Release</B><BR>
<BR>
Stockreporter Announces Investment Opinion on Digital Video Display Technology Corp.; Strong Buy Recommendation and Share Price Target of $6.00 in First Year <BR>
NEW YORK, Oct 21, 1999 (BUSINESS WIRE) -- Digital Video Display Technology Corp. (OTCBB:DVDT) received a strong buy recommendation today from Stockreporter, a leading European financial Internet publication at <A HREF="http://www.stockreporter.de">http://
<BR>
Stockreporter specializes in the coverage of micro caps and undervalued OTC and BB companies and is the first international analyst to cover DVDT and publish an investment opinion. Stockreporter very conservatively values DVDT stock at $6.00 per share in
Stockreporter has an extraordinary record of successful buy recommendations, with unusual share price appreciation following its coverage. Examples are: FutureLink Distribution (FLNK), Teltran International (TLTG) and Geotele.com Inc.(GEOL).<BR>
<BR>
Dennis C. Hass of Stockreporter commented on the recommendation: "DVDT represents an extraordinary investment opportunity! Buying its stock is not just investing in a business that is ready to experience outstanding success with a product line that will r
<BR>
For More Information on DVDT Visit:<BR>
<A HREF="http://www.dvdtinvestors.com">www.dvdtinvestors.com</A><BR>
<A HREF="http://www.market-info.com">www.market-info.com</A><BR>
<BR>
Copyright (C) 1999 Business Wire. All rights reserved.<BR>
Distributed via COMTEX. <BR>
CONTACT:     <BR>
Stockreporter.de, Hamburg, Germany<BR>
Mr. Dennis C. Hass, +49-172-4062621<BR>
Email:<A HREF="mail to:contact@stockreporter.de">contact@stockreporter.de</A><BR>
Homepage:<A HREF="www.stockreporter.de">www.stockreporter.de</A><BR>
WEB PAGE:<A HREF="http://www.businesswire.com">http://www.businesswire.com</A><BR>
GEOGRAPHY:NEW YORK INTERNATIONAL EUROPE<BR>
INDUSTRY CODE: INVESTMENT OPINION<BR>
Today's News On The Net - Business Wire's full file on the Internet<BR>
with Hyperlinks to your home page. <BR>
<B><BR>
Disclaimer:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>This publication contains forward-looking statements within the meaning of Section 27A of the Securities Act of 1933 and Section 21E of the Securities Exchange Act of 1934. The Company's actual results could differ materially
This message is sent in compliance of the new e-mail bill: SECTION 301, Paragraph (a)(2) (C) of S. 1618 <BR>
Sender: 4-you.com, 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004 <BR>
To be removed form this mailing list, simply reply with remove in subject line: <A HREF="mailto:4-charity@4-charity.org">4-charity@4-charity.org</A><BR>
</FONT><FONT  SIZE=3 PTSIZE=10><BR>
<B>Disclosure:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>4-you.com, Inc publishes information regarding selected companies involved in many different industries, which those interested in these companies may use as information relating to their interests or investments. Many compan
<A HREF="mailto:4-charity@4charity.org">mailto:4-charity@4-charity.org</A> , 4-you.com, Inc. 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004<BR>
</HTML>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  6 08:41:19 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Jan 2000 09:41:19 +0100 (MET)
Subject: anoncvs -- use rsync !
In-Reply-To: <38739254.30002A77@bank-banque-canada.ca>
References: <38739254.30002A77@bank-banque-canada.ca>
Message-ID: <14452.21807.441840.482333@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I'm trying to do cvs -d
    PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

    PaulG> and I get "authorization failed...rejected access" with the
    PaulG> previously advertised password (anoncvs). Has the access been
    PaulG> changed or is anyone else having this problem? I'm not very
    PaulG> familiar with cvs so I may be making some mistake.

hmm,  I thought we finally *didn't* allow anonymous cvs,
{one reason being the log files publicity?},

but rather recommend and advertize  rsync (which also works for CRAN, btw).

I have cron jobs calling shell scripts like

#---------------------------------------
RSYNC=/usr/local/bin/rsync

cd /usr/local/app/R/R-devel
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-devel .
cd /usr/local/app/R/R-release-patched
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-release-patched .
#---------------------------------------

rsync   is available in  Linux ("any newer distribution", probably),
or from

   ftp://samba.anu.edu.au/pub/rsync/

Excerpts from its README:

>> WHAT IS RSYNC?
>> --------------
>> 
>> rsync is a replacement for rcp that has many more features.
>> 
>> rsync uses the "rsync algorithm" which provides a very fast method for
>> bringing remote files into sync. It does this by sending just the
>> differences in the files across the link, without requiring that both
>> sets of files are present at one of the ends of the link beforehand.
>> At first glance this may seem impossible because the calculation of
>> diffs between two files normally requires local access to both
>> files. 
>> 
>> .....
>> 
>> RSYNC SERVERS
>> -------------
>> 
>> rsync can also talk to "rsync servers" which can provide anonymous or
>> authenticated rsync. See the rsyncd.conf(5) man page for details on how
>> to setup a rsync server. See the rsync(1) man page for info on how to
>> connect to a rsync server.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jan  6 09:19:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 6 Jan 2000 09:19:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001060904580.22904-100000@laplace>

Hi Martin,

> However, I think "equiv" is not specific enough (could mean "equivalence of
> arbitrary R objects").
> Wouldn't  "setequiv" or "setequal" be better ?
> 
> ((and would you provide (to R-core)  patches to
>     src/library/base/R/sets.R and src/library/base/man/sets.Rd))

I think, after all of the discussion, particularly Brian's helpful
interventions, the original function prevails, although Peter's suggested
sorting function was very instructive.

"setequal" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

The help function needs the following modifications:

\alias{setequal}

\description{Performs set union, intersection, difference, equality and
membership on two vectors.}

\usage{
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(x, y)
}

%% There appears to be an extra tab or other white space in the arguments
%% field.

\examples{
x <- sample(1:20, 10)
y <- sample(3:23, 7)
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(y, x)
}

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 14:28:46 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 08:28:46 -0600
Subject: anoncvs -- use rsync !
In-Reply-To: Martin Maechler's message of "Thu, 6 Jan 2000 09:41:19 +0100 (MET)"
References: <38739254.30002A77@bank-banque-canada.ca> <14452.21807.441840.482333@gargle.gargle.HOWL>
Message-ID: <6r7lhns28x.fsf@franz.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
>     PaulG> I'm trying to do cvs -d
>     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> 
>     PaulG> and I get "authorization failed...rejected access" with the
>     PaulG> previously advertised password (anoncvs). Has the access been
>     PaulG> changed or is anyone else having this problem? I'm not very
>     PaulG> familiar with cvs so I may be making some mistake.
> 
> hmm,  I thought we finally *didn't* allow anonymous cvs,
> {one reason being the log files publicity?},
> 
> but rather recommend and advertize  rsync (which also works for CRAN, btw).

We were providing anonymous cvs access in addition to anonymous rsync
access but now the configuration for the anonymous pserver account
seems to be botched up.  I don't know enough about the anonymous cvs
setup to fix it right now and don't have time to learn about it.  If
Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
fixed.  Otherwise I recommend we discontinue anonymous cvs.  

Most everything people want from anonymous cvs can be accomplished
much more cleanly with anonymous rsync.  The only advantages of
anonymous cvs are for people who do want to read the log files or want
to check out copies of earlier versions.

Since any checkouts by the anonymous user must be able to update the
history files, the anonymous CVS tree is actually a copy of the
production CVS tree.  

I would recommend using anonymous rsync.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@stat.berkeley.edu  Thu Jan  6 16:27:50 2000
From: duncan@stat.berkeley.edu (Duncan Temple Lang)
Date: Thu, 6 Jan 2000 08:27:50 -0800 (PST)
Subject: anoncvs -- use rsync !
In-Reply-To: <6r7lhns28x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>



On 6 Jan 2000, Douglas Bates wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> > 
> >     PaulG> I'm trying to do cvs -d
> >     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> > 
> >     PaulG> and I get "authorization failed...rejected access" with the
> >     PaulG> previously advertised password (anoncvs). Has the access been
> >     PaulG> changed or is anyone else having this problem? I'm not very
> >     PaulG> familiar with cvs so I may be making some mistake.
> > 
> > hmm,  I thought we finally *didn't* allow anonymous cvs,
> > {one reason being the log files publicity?},
> > 
> > but rather recommend and advertize  rsync (which also works for CRAN, btw).
> 
> We were providing anonymous cvs access in addition to anonymous rsync
> access but now the configuration for the anonymous pserver account
> seems to be botched up.  I don't know enough about the anonymous cvs
> setup to fix it right now and don't have time to learn about it.  If
> Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
> fixed.  Otherwise I recommend we discontinue anonymous cvs.  
> 
> Most everything people want from anonymous cvs can be accomplished
> much more cleanly with anonymous rsync.  The only advantages of
> anonymous cvs are for people who do want to read the log files or want
> to check out copies of earlier versions.
> 
> Since any checkouts by the anonymous user must be able to update the
> history files, the anonymous CVS tree is actually a copy of the
> production CVS tree.  
> 
> I would recommend using anonymous rsync.



I just tried the login  and checkout commands 
(from an account on a machine that knows nothing about
franz/cvs.r-project.org) and they seem to be working fine.

Did somebody fix things? If not, shall I remove the
anonymous CVS access and we only allow rsync.

D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:35:22 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:35:22 -0800
Subject: anoncvs -- use rsync !
In-Reply-To: Duncan Temple Lang's message of "Thu, 6 Jan 2000 08:27:50 -0800 (PST)"
References: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>
Message-ID: <87yaa3xinp.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@stat.berkeley.edu> writes:

    DTL> I just tried the login and checkout commands (from an account
    DTL> on a machine that knows nothing about
    DTL> franz/cvs.r-project.org) and they seem to be working fine.

    DTL> Did somebody fix things? 

I did.

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:33:36 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:33:36 -0800
Subject: anoncvs for R should work again
Message-ID: <871z7vyxb3.fsf@alpha.cfas.washington.edu>



anoncvs for R should work again.  If you use it, please try it.  If
you use it and don't particularly want it to go away (rsync gets you
the source w/o the logs, but if you particularly want the logs and the
ability to create diffs between revisions, like I sometimes want to
do...), you might say something.

If you don't know what I'm talking about, it's probably not
important. 

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:25:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:25:02 -0600
Subject: Are blank fields allowed in SAS data sets?
Message-ID: <6r4scq941d.fsf@franz.stat.wisc.edu>

Saikat DebRoy and I have been working on an R package that, among
other things, will read SAS data libraries in the XPORT format.  Even
though a SAS data set is of a fairly simple structure, it is a
challenge to write code to read the libraries "properly".  In fact, I
am beginning to think that file format is not well-defined.

Here is the situation:  

  - a SAS data set is a table.  The columns can be numeric (in the
    XPORT format the only numeric format allowed is the IBM mainframe
    double precision format) or character strings.  In a character
    column, all the strings are blank-padded to the same length and
    that length is included in the header information.  There is no
    terminator character for strings.  There is no record terminator
    character.
  - a SAS library file can contain more than one table.
  - the header information for each table includes the number of
    columns and the format of each column but does _not_ include the
    number of rows.  (Why not? Remember that SAS was developed at a
    time when any large amount of data was stored on punched cards or
    magnetic tape.  SAS functions as a data filter, for the most
    part.  You don't know how many rows you have until you get to the
    end and then you can't go back and change the beginning because of
    the way magnetic tape drives work.  Of course, the relevance of
    these considerations to computing resources in the year 2000 is
    questionable.) 

So how do you know when you have reached the end of one data set and
started another?  SAS always works in blocks of 80 bytes.  If the last
record in a table does not completely fill an 80 byte block, the
remainder of the block is blank-padded.  The next table will begin
with 80 bytes that must be exactly
"HEADER RECORD*******MEMBER  HEADER RECORD!!!!!!!000000000000000001600000000140  "
except on certain VAX/VMS computers where the 140 at the end is 136.

I ran into a situation where the data were 484 rows of 8 numeric
columns.  The total length of each record is 64 bytes so the data
proper occupies 30976 bytes, not counting the headers.  This is a
total of 387 complete 80 byte blocks with 16 bytes left over.  That
last block is padded with 64 blanks.

So how do we know that these 64 blanks are not another data record?
In the case of numeric data, the particular number corresponding to 8
blanks (using the IBM mainframe floating point format, not the IEEE
format) is

> Pheno[745,]
           INDIV         TIME         DOSE       WEIGHT         CONC
745 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40
          NEWSUB     APGARLOW         TLAG
745 3.687825e-40 3.687825e-40 3.687825e-40

We can probably employ some heuristics and say that this is not a
common value so we guess that the 64 blanks are padding and not
another data record.  

But what if they had been 8 character fields, each of width 8 bytes?
Is it possible to distinguish between a blank record and blank
padding?  I can't see that it is possible.  Is there some restriction
in SAS that says you can't have a record in which all the fields are
blank?

One could pass this off as of little interest to the R community
except that this format is now a "standard" that has been adopted by
the United States Food and Drug Administration (FDA).  See
       http://www.sas.com/software/industry/pht/fda/index.html

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:51:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:51:14 -0600
Subject: Are blank fields allowed in SAS data sets?
In-Reply-To: Douglas Bates's message of "06 Jan 2000 17:25:02 -0600"
References: <6r4scq941d.fsf@franz.stat.wisc.edu>
Message-ID: <6r1z7u92tp.fsf@franz.stat.wisc.edu>

Sorry to respond to my own post but I did a little more searching in
the Q&A document at SAS Institute regarding the FDA's adoption of the
SAS XPORT format and found they do address the issue I mentioned
and they have a solution.  The solution is "Don't do that!".  :-)

Here is the direct quote from
	http://www.sas.com/software/industry/pht/fda/faq.html

Q.     Is it difficult to detect the end of file when reading a data set stored in
       XPORT transport format? 

   A.  Under certain circumstances it is difficult to detect the end of file
       when reading a data set in XPORT transport format. Below is an
       explanation and a suggested fix that will alleviate the problem. 

       The problem occurs when the record length of a file is less than 80
       characters. The transport format writes 80 byte records. The last
       observation may not fill up an 80 byte record. When this happens the
       SAS System will pad the 80 byte record with blanks. When reading a
       transport file, the SAS System treats trailing blanks as insignificant. If
       the records are shorter than 80 bytes and if the last record written
       contains nothing but blank characters then the file comes up one
       record short. 

       The key to avoiding this potential problem is to undertake preventative
       measures described below. 

       One preventative measure could be to make sure that the
       circumstances do not exist. Avoid creating a data set where: 

         1.The observation length (the sum of the variable sizes) is less than
           80 and 
         2.The variables are all character and 
         3.The last record has all blank values. 

       Another preventative measure could be to save original data in
       transport format, extract new data from the transport file, then run
       PROC COMPARE to compare the original data to the new data.
       Output from PROC COMPARE can validate that the new data
       extracted from the transport file is identical to the original
       data. 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jan 10 01:40:37 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Mon, 10 Jan 2000 02:40:37 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
Message-ID: <200001100140.CAA20927@pubhealth.ku.dk>

Depending on the setting of par()$usr, 
the 'at' setting in mtext(.., adj=0, outer=T) may cause the
text to appear in an anomalous position (e. g. in the first
instance below, at the left of the plot region rather than
at 'at=0' in the figure region), or the text may not appear
at all.

If one does not set the 'at' parameter the text appears
(with 'adj=0') on the far left of the plot region.  I assume
this is also anomalous; at all events it is the behaviour
that I wished to circumvent.

The function plot.test() demonstrates the behaviour:

plot.test <-
function(xval=0:4, pos=NULL){
oldpar<-par(oma=c(2,0,0,0))
on.exit(par(oldpar))
plot(xval,xval)
if(is.null(pos))pos<-min(xval)
print(pos)
print(par()$usr)
mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
}

> plot.test(xval=0:4)  # "Outer text appears on left of the figure region
[1] 0
[1] -0.16  4.16 -0.16  4.16
> plot.test(xval=20:24)  # "Outer text does not appear at all
[1] 20
[1] 19.84 24.16 19.84 24.16
> # Check that at=0 does not work
> plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
[1] 0
[1] 19.84 24.16 19.84 24.16
>


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 10:53:50 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101053.LAA25066@pubhealth.ku.dk>

Dear R-team

As I didn't get any answer to my bug-report last week I have taken the
effort and extracted a minimal data set from my data (see below) where the
following bug occurs:

> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  


"bugdata" <-
structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
-0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
-0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
-0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
    FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
    -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
    -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
    0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
    -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
    0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
    -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
    0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
    1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
    0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
"FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
), row.names = c("139", "140", "141", "142", "143", "144", "145", 
"146", "147", "148", "149", "150", "151", "152", "153", "154", 
"155", "156", "157", "158"), class = "data.frame")


I hope, this makes it possible to find the bug.

Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:lqs, package:MASS, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jan 10 11:38:23 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 12:38:23 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101138.MAA25983@pubhealth.ku.dk>

>>>>> "PeHo" == Peter Holzer <holzer@stat.math.ethz.ch> writes:

    PeHo> Dear R-team As I didn't get any answer to my bug-report last week
    PeHo> I have taken the effort and extracted a minimal data set from my
    PeHo> data (see below) where the following bug occurs:

    >> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action =
    >> na.omit)
(the  ", na.action = na.omit" doesn't matter since the examples hasn't got
 any NA)

   >> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector

   >> In addition: Warning messages: 
   >> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

So, "7:" really says that the Algorithm didn't converge.

Of course, there *is* a bug, namely, ending in such an (unhelpful) error
instead of doing something better.

If I run this example through S-plus 5.1 (Linux),
it doesn't converge either,
but does return a (possibly completely wrong ??) result, and only warns you
with one line that you shouldn't overlook :

>> S> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)

>> Call:
>> glm(formula = SKR.ein.aus ~ ., family = binomial, data = bugdata)
>> 
>> Coefficients:
>>  (Intercept)    TAGNR    FAC.A1   FAC.A2      MLDR   MWSQUAL    FAC.M1 
>>    -5022.282 1.561878 -169.0165 135.3793 0.6264029 -143.0841 -115.7853
>> 
>>     FAC.M2 
>>  -233.0438
>> 
>> Degrees of Freedom: 20 Total; 12 Residual
>> Residual Deviance: 0.674096 
>> There were 12 warnings (use warnings() to see them)

If you are careful enough to *read* the last line,
and then type warnings(), you see

>> Warning messages --
>> 1: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 2: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 3: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 4: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 5: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 6: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 7: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 8: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 9: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 10: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 11: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 12: linear convergence not obtained in  10  iterations. in: glm.fitter(x = X,
>> 	y = Y, w = w, start = start, offset = offset, family = family,  ...

((which *is* slightly better than R's warnings...))

    PeHo> I hope, this makes it possible to find the bug.

Yes, thanks a lot, Peter!

Tracing the iterations is really the good idea here:
glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, maxit= 30, trace=TRUE)

gives

    Deviance = 15.39188 Iterations - 1 
    Deviance = 13.67612 Iterations - 2 
    Deviance = 12.02264 Iterations - 3 
    Deviance = 10.41495 Iterations - 4 
    Deviance = 9.021518 Iterations - 5 
    Deviance = 8.260037 Iterations - 6 
    Deviance = 7.468748 Iterations - 7 
    Deviance = 4.597021 Iterations - 8 
    Deviance = 1.523395 Iterations - 9 
    Deviance = 0.5131087 Iterations - 10 
    Deviance = 0.1843927 Iterations - 11 
    Deviance = 0.06750712 Iterations - 12 
    Deviance = 0.0248701 Iterations - 13 
    Deviance = 0.00919058 Iterations - 14 
    Deviance = 0.003411904 Iterations - 15 
    Deviance = 0.001281922 Iterations - 16 
    Deviance = 0.0004972102 Iterations - 17 
    Deviance = 0.0002082669 Iterations - 18 
    Deviance = 0.0001069153 Iterations - 19 
    Deviance = 6.777993e-05 Iterations - 20 
    Deviance = 5.338077e-05 Iterations - 21 
    Deviance = 4.808323e-05 Iterations - 22 
    Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
    In addition: There were 18 warnings (use warnings() to see them)

(doing the same in S-plus also shows yo that the deviance goes to 0
 and no convergence is reached).

------
Now, the "real" glm()ers are called for...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 12:33:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 13:33:13 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101233.NAA27379@pubhealth.ku.dk>

> Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
> From: holzer@stat.math.ethz.ch
> 
> Dear R-team
> 
> As I didn't get any answer to my bug-report last week I have taken the
> effort and extracted a minimal data set from my data (see below) where the
> following bug occurs:
> 
> > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
same length as the vector
> In addition: Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> 
> 
> "bugdata" <-
> structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
> 16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
> 0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
> -0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
> 0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
> -0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
> 0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
> -0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
> 0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
> 0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
> 9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
> 9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
> 1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
>     FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
>     -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
>     -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
>     0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
>     -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
>     0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
>     -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
>     0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
>     1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
>     0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
> "FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
> ), row.names = c("139", "140", "141", "142", "143", "144", "145", 
> "146", "147", "148", "149", "150", "151", "152", "153", "154", 
> "155", "156", "157", "158"), class = "data.frame")
> 
> 
> I hope, this makes it possible to find the bug.

Indeed, thank you (we needed an example). Alter

    names(w) <- ynames
    
to
    names(w) <- ynames[good]

and

    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))

to 
    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))

as the vector w is dropping observations with fitted probs 0 or 1.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Jan 10 13:45:52 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 10 Jan 2000 13:45:52 +0000 (GMT)
Subject: sets again (trivial)
Message-ID: <Pine.GSO.4.20.0001101339310.25523-100000@laplace>

Hi Brian -- While on the subjects of sets, as we now have an is.element
function, would it be tidier to alias %in% to this rather than leave it
dangling?  The help for %in% could be moved from match.Rd to
sets.Rd.  Just a thought.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 17:07:03 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 18:07:03 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101707.SAA01446@pubhealth.ku.dk>

Prof Brian Ripley writes:
 > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
 > > From: holzer@stat.math.ethz.ch
 > > 
 > > Dear R-team
 > > 
 > > As I didn't get any answer to my bug-report last week I have taken the
 > > effort and extracted a minimal data set from my data (see below) where the
 > > following bug occurs:
 > > 
 > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
 > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
 > same length as the vector
> Indeed, thank you (we needed an example). Alter
 > 
 >     names(w) <- ynames
 >     
 > to
 >     names(w) <- ynames[good]
 > 
 > and
 > 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
 > 
 > to 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
 > 
 > as the vector w is dropping observations with fitted probs 0 or 1.

This is actually a solution I thought of as well. However it has the
disadvantage that plot (and other functions?) gets problems:

> fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
glm.fit.null else glm.fit)(x = X, y = Y, 
.
.
.
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> plot(fit.tst)
Warning messages: 
1: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
2: longer object length
	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
3: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
4: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
5: longer object length
	is not a multiple of shorter object length in: e/(s * (1 - h)) 
6: longer object length
	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 

Maybe there is another solution?

Nevertheless, thanks for the help!

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://www.stat.math.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 17:16:46 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 18:16:46 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101716.SAA01550@pubhealth.ku.dk>

On Mon, 10 Jan 2000, Peter Holzer wrote:

> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> > plot(fit.tst)

We already know that plot.lm does not work correctly with glm objects with
zero weights.  I am not at all sure it should be used for glm objects
(except Gaussian ones).  However, I think you missed Martin M's point.
This behaviour indicates an inappropriate model, one with separation
of the groups, and all the linear approximations needed for a local lm
model are inappropriate.

We also know that the whole glm area needs a long hard look.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Tue Jan 11 01:53:58 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Tue, 11 Jan 2000 02:53:58 +0100 (MET)
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
Message-ID: <200001110153.CAA03462@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 0.90.0
OS: Linux on Thinkpad (pentium) and desktop (K6)
Submission from: (NULL) (128.32.251.234)


When I create a boxplot, and then try to overlay a lowess fit or just the
points, 
the points do not appear in the highest level and the lowess curve does not
reach 
the highest level. However, if I add one to each of the models, the problem is
solved.
I tried this on two different machines, a laptop and a desktop both running 
Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian

> a
  [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
 [11] -0.518 -0.731  0.074 -0.731  0.286  0.206 -0.257  0.608 -0.038 -0.291
 [21] -0.274 -0.274  0.402 -0.325 -0.343 -0.012  0.359 -0.038  0.675 -0.497
 [31]  0.026  0.608 -0.325  0.109  0.507  0.484 -0.149  0.368  0.227  0.086
 [41] -0.540  0.377 -0.149 -0.038  0.154  0.573  0.428  0.852  0.164  0.744
 [51]  0.061  0.080 -0.354  0.003  0.522 -0.508 -0.613 -0.271 -0.245 -0.080
 [61] -0.271 -0.651  0.265 -0.613  0.666  0.382  0.061 -0.542  0.510 -0.038
 [71] -0.443  0.042  0.764 -0.017 -0.148  0.023 -0.613 -0.148  0.354 -0.412
 [81]  0.522  0.169 -0.220  0.080  0.080  0.448  0.116 -0.059  0.061  0.185
 [91] -0.325 -0.038 -0.220 -0.325  0.151  0.903 -0.059  0.265  0.250  0.250
[101]  0.161  0.502  0.684  0.222  0.063 -0.414  0.222  0.028 -0.260 -0.046
[111] -0.360 -0.046 -0.260 -0.169 -0.169 -0.009  0.192 -0.046  0.028  0.222
[121]  0.129  0.502  0.097  0.306  0.384 -0.009 -0.532  0.028 -0.086 -0.260
[131] -0.086 -0.213 -0.471 -0.820 -0.414  0.222  0.097  0.251 -0.009  0.279
[141] -0.009  0.279 -0.260 -0.086  0.063  0.161 -0.009  0.524  0.063 -0.665
[151]  0.127  0.575  0.127  0.287  0.249 -0.301  0.287  0.127 -0.176 -0.013
[161] -0.301  0.082 -0.176 -0.370 -0.118 -0.064  0.210 -0.064  0.082 -0.064
[171]  0.169  0.546  0.036  0.392  0.323 -0.064 -0.706  0.127 -0.118 -0.236
[181] -0.013 -0.301 -0.370 -0.812 -0.524  0.210  0.392  0.036 -0.176  0.249
[191]  0.082  0.036 -0.301 -0.301 -0.013  0.127  0.127  0.752  0.127 -0.301
[201]  0.108  0.453  0.108  0.166  0.220 -0.327  0.048  0.271 -0.240 -0.086
[211] -0.422 -0.017  0.048 -0.327 -0.327 -0.086  0.166 -0.160  0.108 -0.086
[221]  0.166  0.571 -0.086  0.366  0.320 -0.017 -0.645  0.166 -0.240 -0.017
[231] -0.017 -0.240 -0.422 -0.240 -0.645  0.048  0.411 -0.017 -0.240  0.271
[241]  0.320 -0.017 -0.327 -0.160  0.220  0.108 -0.086  0.676  0.108  0.048
[251]  0.254 -0.188 -0.083  0.254  0.387 -0.188  0.012  0.387 -0.306 -0.306
[261] -0.594  0.012  0.012 -0.776 -0.440 -0.188  0.254 -0.083 -0.440 -0.188
[271]  0.323  0.448  0.099  0.505  0.323 -0.083 -0.594  0.254 -0.188 -0.083
[281]  0.012 -0.306 -0.440 -0.083 -0.306  0.012  0.448  0.099 -0.188  0.254
[291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> b
  [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
 [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
 [75] 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4
[112] 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1
[149] 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3
[186] 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3
[223] 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4
[260] 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4
[297] 4 1 0 0
> boxplot(a~b)
> lines(lowess(a~b))
> points(a~b)
> boxplot(a~b)
> lines(lowess(a~b+1))
> points(a~b+1)
> 

Thanks for your consideration and thanks a million for all the work. R is a
pleasure 
to work with. 

Best in the new year,
adrian custer
acuster@nature.berkeley.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 11 20:06:24 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Jan 2000 15:06:24 -0500
Subject: Figure margins too large
Message-ID: <387B8D40.3B09961E@bank-banque-canada.ca>

I seem to remember an error like this being mentioned before, but if it wasn't:

> zz <- density(rnorm(100))
> plot(zz)
Error in plot.new() : Figure margins too large
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Tue Jan 11 21:00:04 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Tue, 11 Jan 2000 22:00:04 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112100.WAA13500@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: .90.1
OS: Linux+NT
Submission from: (NULL) (141.211.66.172)


In the following example, the deviance residuals are not correctly calculated:

> dead <- c(2,8,15,23,27)
> y <- cbind(dead,30-dead)
> conc <- 0:4
> g <- glm(y ~ conc,family=binomial)
> residuals(g)
[1] -0.451015  0.359696       NaN  0.064302 -0.204493
Warning message: 
NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

The third residual should be zero.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 11 21:18:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jan 2000 21:18:09 +0000 (GMT)
Subject: deviance residuals in binomial GLM (PR#399)
In-Reply-To: <200001112100.WAA13500@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001112115350.20286-100000@auk.stats>

On Tue, 11 Jan 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: .90.1
> OS: Linux+NT
> Submission from: (NULL) (141.211.66.172)
> 
> 
> In the following example, the deviance residuals are not correctly calculated:
> 
> > dead <- c(2,8,15,23,27)
> > y <- cbind(dead,30-dead)
> > conc <- 0:4
> > g <- glm(y ~ conc,family=binomial)
> > residuals(g)
> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
> Warning message: 
> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 
> 
> The third residual should be zero.

Yes, and it is computed as sqrt(-5.169943e-21) on my machine. I have
committed a fix for 0.99.0


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jan 11 21:25:07 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 Jan 2000 22:25:07 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112125.WAA13696@pubhealth.ku.dk>

>>>>> "faraway" == faraway  <faraway@umich.edu> writes:

    faraway> Full_Name: Julian Faraway
    faraway> Version: .90.1
    faraway> OS: Linux+NT
    faraway> Submission from: (NULL) (141.211.66.172)


    faraway> In the following example, the deviance residuals are not
    faraway> correctly calculated:

    >> dead <- c(2,8,15,23,27)
    >> y <- cbind(dead,30-dead)
    >> conc <- 0:4
    >> g <- glm(y ~ conc,family=binomial)
    >> residuals(g)
    faraway> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
    faraway> Warning message: 
    faraway> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

    faraway> The third residual should be zero.

yes, this is a bug.

Diagnosis: 
    A case of cancelation which makes the argument of sqrt(.) 
    negative (~= -5e-21) instead of zero.


The fix is
in  src/library/base/R/glm.R
replace
	       d.res <- sqrt((object$family$dev.resids)(y, mu, wts))
by
	       d.res <- sqrt(pmax(0,(object$family$dev.resids)(y, mu, wts)))

Thanks a lot for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 12 07:45:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 12 Jan 2000 08:45:27 +0100 (MET)
Subject: Figure margins too large
In-Reply-To: <387B8D40.3B09961E@bank-banque-canada.ca>
References: <387B8D40.3B09961E@bank-banque-canada.ca>
Message-ID: <14460.12567.177238.43729@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I seem to remember an error like this being mentioned before,
    PaulG> but if it wasn't:

    >> zz <- density(rnorm(100))
    >> plot(zz)
    PaulG> Error in plot.new() : Figure margins too large

    >> version
    PaulG> _
    PaulG> platform sparc-sun-solaris2.6
    PaulG> arch     sparc
    PaulG> os       solaris2.6
    PaulG> system   sparc, solaris2.6
    PaulG> status
    PaulG> major    0
    PaulG> minor    90.1
    PaulG> year     1999
    PaulG> month    December
    PaulG> day      15
    PaulG> language R

It means what it says : The figure margins are too large
and there's no room for the plot at all.

It must be that you have 
  - large fonts {large par("cex"), or large "rastersize" with postscript ...)
and/or
  - large  par("mar")
and/or
  - too small device.

I can reproduce the error message with
 
  postscript(file="/dev/null", height= 1)
  plot(1)

More "fun" is to

     x11()
     plot(1)
and resize the device window {repeatedly calling  plot(1)}
until the plot outline isn't drawn any more.
At the point you get (appropriately) the above error message.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:03:50 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:03:50 +0100
Subject: functions for flat file import/export + utilities
Message-ID: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>

This is a multi-part message in MIME format.

------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id SAA07714



Dear R-Developers,

please find attached a set of drafted functions for flat file import and
export, partially extending existing functions, partially completely writ=
ten
as new code.
I thought you might be interested in those functions and the accompanying
utilities for padding and trimming.

Main features are

- supports several formats, i.e. fixed width and CSV (with one exception)
- supports templates describing relevant features of the flat file data,
including attributes of data.frame columns, storage.mode etc.
- special handling of factors and logicals
- handling of special characters like decimal seperator and escaped
quotation mark
- no perl and no seperator needed for fixed width format (and no problems
with quotation marks)
- reading fixed width format is based on simple function read.char.cols()=
,
which can be implemented more memory efficient in C

However, these functions are written from the perspective of a
non-R-developer, of course one could do it better. Also I don't know if i=
t
is a good idea traing to keep some compatibility (and naming) to
read.table() and write.table(), or if it is better to optimize new soluti=
ons
with new naming. I have done some testing, but of course there may be bug=
s
in it.

Having said this I would appreciate any feedback, criticisms, suggestions
for improvements, ...
Regards


--
Dr. Jens Oehlschl=E4gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M=FCnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: application/octet-stream;
	name="flatfile.r"
Content-Disposition: attachment;
	filename="flatfile.r"
Content-Transfer-Encoding: base64

IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgVGhpcyBpcyBhIGRyYWZ0IGZvciBhIHN1aXRlIG9mIFIg
ZnVuY3Rpb25zIGZvciBpbnRlcmZhY2luZyBmbGF0IGZpbGVzCiMgaW5jbHVkaW5nIHV0aWxpdGll
cyBmb3Igc3RyaW5nIGhhbmRsaW5nCiMgKEdOVSkgQ29weXJpZ2h0IE1EIEZBQ1RPUlksIEplbnMg
T2VobHNjaGyEZ2VsLUFraXlvc2hpIChKT0EpCiMgQ3JlYXRlZCAgICAgMTIuMS4yMDAwCiMgTGFz
dCBjaGFuZ2UgMTIuMS4yMDAwCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiMjIGdlbmVyYWwgc3Ry
YXRlZ3kgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIwojIHdyaXRlIGZ1bmN0aW9ucyAKIyAgIHRha2UgYSBkYXRhLmZyYW1lIFthbmQgc3Bl
Y2lmaWNhdGlvbnNdCiMgICB3cml0ZSBhIGZpbGUgYXMgc2lkZSBlZmZlY3QKIyAgIHJldHVybiBh
IHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIHdyaXR0ZW4gZmlsZQojICAgICBpbmNsdWRpbmcgc3Rv
cmFnZS5tb2RlIGFuZCBhdHRyaWJ1dGVzIGZvciBlYWNoIGNvbHVtbgojICAgICBzbyB0aGF0IHJl
aW1wb3J0aW5nIHRoZSBmaWxlIHVzaW5nIHRoZSB0ZW1wbGF0ZSBnaXZlcyBhbiBpZC4gZGF0YS5m
cmFtZQojICAgICAoZXhjZXB0IGZvciBsb3NzIG9mIHByZWNpc2lvbiwgZGVwZW5kaW5nIG9uIGRp
Z2l0cyBpbnZvbHZlZCkKIwojIHJlYWQgZnVuY3Rpb25zIAojICAgdGFrZSBhIHRlbXBsYXRlIGFu
ZC9vciBzcGVjaWZpY2F0aW9ucwojICAgcmV0dXJuIGEgZGF0YS5mcmFtZQojICAgb3B0aW9uYWxs
eSB3aXRoIGEgdGVtcGxhdGUgYXMgYW4gYXR0cmlidXRlCiMKIyBsb2dpY2FscyBhbmQgZmFjdG9y
cyByZWNlaXZlIHNwZWNpYWwgdHJlYXRtZW50CgoKIyMgaGllcmFyY2h5IG9mIGZ1bmN0aW9ucyAj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBy
ZWFkLmNoYXIuY29scygpICAgZXh0cmFjdGluZyBjaGFyYWN0ZXIgY29sdW1ucyBmcm9tIGZsYXQg
ZmlsZQojICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgcHVyZSBSLCBzaG91bGQgdXNlIEMt
ZnVuY3Rpb24gbGF0ZXIgCiMgICAgICAgICAgICAgICAgICAgIHRvIHJlZHVjZSBtZW1vcnkgcmVx
dWlyZW1lbnRzIGJ5IGZhY3RvciAyCiMKIyAgIHdyaXRlLnRhYmxlKCkgICAgZ2VuZXJhbCwgcmV0
dXJuaW5nIGEgY2xhc3MgJ3RlbXBsYXRlJyBvYmplY3QKIyAgICAgd3JpdGUuc3ZzKCkgICAgd3Jh
cHBlciBmdW5jdGlvbiBvZiB3cml0ZS50YWJsZSgpIGZvciBzZXBlcmF0ZWQgdmFsdWUgZm9ybWF0
CiMgICAgIHdyaXRlLmZpeCgpICAgIHdyYXBwZXIgZnVuY3Rpb24gb2Ygd3JpdGUudGFibGUoKSBm
b3IgZml4ZWQgd2lkdGggZm9ybWF0CiMgCiMgICByZWFkLnRhYmxlKCkgICAgIGdlbmVyYWwsIHRh
a2luZyBzcGVjaWZpY2F0aW9ucwojICAgICByZWFkLnN2cygpICAgICB3cmFwcGVyIGZ1bmN0aW9u
IG9mIHJlYWQudGFibGUoKSBmb3Igc2VwZXJhdGVkIHZhbHVlIGZvcm1hdAojICAgICByZWFkLmZp
eCgpICAgICB3cmFwcGVyIGZ1bmN0aW9uIG9mIHJlYWQudGFibGUoKSBmb3IgZml4ZWQgd2lkdGgg
Zm9ybWF0CiMgIAojICAgICByZWFkLmZ3ZigpICAgICBsZXNzIG1lbW9yeSBjb25zdW1pbmcgYWx0
ZXJuYXRpdmUgdG8gcmVhZC5maXgoKQojICAgICAgICAgICAgICAgICAgICBhcyBsb25nIGFzIHJl
YWQuY2hhci5jb2xzIGhhc24ndCBzcGVjaWFsIEMtZnVuY3Rpb24uCiMgICAgICAgICAgICAgICAg
ICAgIEhvd2V2ZXIgcmVhZC5md2YoKSBuZWVkcyBwZWFybCwgdGhlIGRhdGEgbXVzdCBub3QgY29u
dGFpbiBzZXA9LAojICAgICAgICAgICAgICAgICAgICBpdCBwcm92aWRlcyBubyByZWxpYWJsZSBo
YW5kbGluZyBvZiBxdW90YXRpb24gbWFya3MKIyAgICAgICAgICAgICAgICAgICAgKGhhc24ndCBi
ZWVuIGFkYXB0ZWQgeWV0KQojICAKIyAgICAgICByZWFkLnRlbXBsYXRlKCkgICBmb3IgZWFzeSAo
cmUpaW1wb3J0IG9mIEFTQ0lJIGRhdGEgCiMgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lm
aWVkIHZpYSBhIHRlbXBsYXRlIG9iamVjdAojICAgICAgIHdyaXRlLnRlbXBsYXRlKCkgIGZvciBl
YXN5IChyZSlleHBvcnQgb2YgQVNDSUkgZGF0YSAKIyAgICAgICAgICAgICAgICAgICAgICAgICBz
cGVjaWZpZWQgdmlhIGEgdGVtcGxhdGUgb2JqZWN0CiMKIyAgICAgICBwcmludC50ZW1wbGF0ZSgp
ICBzaG93cyB0ZW1wbGF0ZSBzcGVjaWZpY2F0aW9ucwojICAKIyAgICAgICAgIHJlYWQoKSAgICAg
ICAgIHBlcmhhcHMgYSBnZW5lcmljIGZ1bmN0aW9uOiBkZiA8LSByZWFkKHRlbXBsYXRlKQojICAg
ICAgICAgd3JpdGUoKSAgICAgICAgcGVyaGFwcyBhIGdlbmVyaWMgZnVuY3Rpb246IHdyaXRlKHRl
bXBsYXRlLCBkZikKIwojIFVUSUxJVElFUzogcGFkKCk7IHJwYWQoKSwgbHBhZCgpLCB0cmltKCks
IHJ0cmltKCksIGx0cmltKCksIHVucXVvdGF0ZSgpCiMKIyBERU1POiBkZW1vLnRlbXBsYXRlKGZp
bGUgPSB0ZW1wZmlsZSgpKQoKCiMjIHRlbXBsYXRlIGRlZmluaXRpb24gIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojICAgdGVtcGxhdGUgPC0g
c3RydWN0dXJlKAojICAgICBsaXN0KAojICAgICAsIGZpbGUgPSBmaWxlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiMgICAgICwgZW9s
ID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUg
KGNoYXJhY3RlcikKIyAgICAgLCBzZXAgPSBzZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQojICAgICAsIGRlYy5zZXAgPSBkZWMu
c2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIp
CiMgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChjaGFyYWN0ZXIgdmVjdG9yKQoj
ICAgICAsIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsgICAgICAgICAgICAgICAgICAj
IHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiPiBpbiBDU1YgCiMgICAgICwgZXNjYXBlZC5x
dW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgICMgcGVyIGZpbGUgKGNoYXJh
Y3RlciksIGUuZy4gPCIiPiBpbiBDU1YKIyAgICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRp
bmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNhbCBvciBjaGFyYWN0ZXIgdmVjdG9yKQojICAgICAs
IGZhY3RvcnMgPSBmYWN0b3JzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBm
aWxlLCB3ZXRoZXIgZmFjdG9ycyBpbiBmaWxlIGFyZSAnbGV2ZWxzJyBvciAnY29kZXMnIChjaGFy
YWN0ZXIpCiMgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5uYW1lcy5sb2MgICAgICAgICAgICAg
ICAgICAgICMgcGVyIGZpbGUsIGNvbG5vIG9mIHJvd25hbWVzLCAwID0gbm8gcm93Lm5hbWVzIGlu
IGZpbGUgKGludGVnZXIpCiMgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1l
cyAobG9naWNhbCkKIyAgICAgLCBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRlICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZQojICAgICAsIGNvbC5uYW1lcyA9IGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIGluY2x1ZGluZyBjb3JuZXIubmFt
ZSAoY2hhcmFjdGVyIHZlY3RvcikKIyAgICAgLCBxdW90ZSA9IHF1b3RlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90
ZWQgKGxvZ2ljYWwgdmVjdG9yKQojICAgICAsIHN0b3JhZ2UubW9kZSA9IHN0b3JhZ2UubW9kZSAg
ICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChjaGFyYWN0ZXIgdmVjdG9yKQojICAg
ICAsIHdpZHRocyA9IHdpZHRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBjb2x1bW4sIGluY2x1ZGluZyByb3cubmFtZXMud2lkdGggKGxpc3Qgb3IgTlVMTCkKIyAgICAg
LCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIg
Y29sdW1uLCAobGlzdCBvciBOVUxMKQojICAgICAsIGF0dHJpYnV0ZXMgPSBhdHRyaWIgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChsaXN0KQojICAgICAsIGV4dGVu
c2lvbi53YXJuaW5nID0gZXh0ZW5zaW9uLndhcm5pbmcgICAgICAgICAgICAjIHBlciBmaWxlLCBU
UlVFL0ZBTFNFIGluZGljYXRlcyB3ZXRoZXIgb3V0IHNwZWNzIGRpZmZlciBmcm9tIGluIHNwZWNz
IAojICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gc2VwZXJhdG9yLndhcm5pbmcgICAgICAgICAg
ICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiMgICAgICwgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA9IHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UvTkEKIyAg
ICAgKQojICAgLCBjbGFzcz0idGVtcGxhdGUiCiMgICApCgoKCiMgVVRJTElUSUVTICMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IwoKIyBjb21iaW5lcyBycGFkKCkgYW5kIGxwYWQoKQojIGRlZmF1bHQgaXMgZmxhZz0iLSIgPT0g
cnBhZCgpCiMgZGVmYXVsdCBtZXRob2QgJ2FiYnJldmlhdGUnIHVzZXMgYWJicmV2aWF0ZSgpIHRv
IHJlZHVjZSBzdHJpbmdzIGxvbmdlciB0aGFuIHdpZHRoCiMgbWV0aG9kICdleHRlbmQnIGdyYW50
cyBlcXVhbCB3aWR0aHMsIGV4dGVuZGluZyB0byBtYXggd2lkdGgsIGlmIG5lY2Vzc2FyeQojIG1l
dGhvZCAndmFyaWFibGUnIGNvcnJlc3BvbmRzIHRvIHdoYXQgZm9ybWF0LmNoYXIoKSBkb2VzCiMg
bWV0aG9kcyAnbGN1dCcgYW5kICdyY3V0JyBncmFudCBmaXhlZCB3aWR0aCBieSBjdXR0aW5nCiMg
bmVnYXRpdmUgd2lkdGggb3ZlcndyaXRlcyBmbGFnPSctJyB0byBmbGFnPScnIGFzIGluIGZvcm1h
dC5jaGFyKCkKcGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBmbGFnPSItIiwgY2hh
cj0iICIsIG1ldGhvZD1jKCJhYmJyZXZpYXRlIiwgInZhcmlhYmxlIiwgImV4dGVuZCIsICJyY3V0
IiwgImxjdXQiKSwgd2Fybj1UUlVFKQp7CgogICAgaWYgKG1ldGhvZD09J2FiYnJldmlhdGUnICYm
IGxlbmd0aCh3aWR0aCk+MSkKICAgICAgc3RvcCgibWV0aG9kPSdhYmJyZXZpYXRlJyBuZWVkcyB3
aWR0aD1jb25zdGFudCIpCgogICAgaWYgKGlzLm51bGwoeCkpIAogICAgICAgIHJldHVybigiIikK
ICAgIGlmICghaXMuY2hhcmFjdGVyKHgpKSB7CiAgICAgICAgd2FybmluZygiY29lcmNpbmcgJ3gn
IHRvICdjaGFyYWN0ZXInIikKICAgICAgICB4IDwtIGFzLmNoYXJhY3Rlcih4KQogICAgfQogICAg
YXQgPC0gYXR0cmlidXRlcyh4KQogICAgbmMgPC0gbmNoYXIoeCkKICAgIG1heG5jIDwtIG1heChu
YykKICAgIGlmIChpcy5udWxsKHdpZHRoKSkgCiAgICAgICAgd2lkdGggPC0gbWF4bmMKICAgIGVs
c2UgaWYgKHdpZHRoIDwgMCkgewogICAgICAgIGZsYWcgPC0gIiIKICAgICAgICB3aWR0aCA8LSAt
d2lkdGgKICAgIH0KICAgIGlmICh3aWR0aDxtYXhuYyl7CiAgICAgIGlmICh3YXJuKQogICAgICAg
IHdhcm5pbmcocGFzdGUoIm1heChuY2hhcih4KSk9IiwgbWF4bmMsICIgPiBhYnMod2lkdGgpPSIs
IHdpZHRoLCBzZXA9IiIpKQogICAgICBpZiAobWV0aG9kPT0ibGN1dCIpewogICAgICAgIHhbbmM+
d2lkdGhdIDwtIHN1YnN0cih4W25jPndpZHRoXSwgKG5jLXdpZHRoKVtuYz53aWR0aF0rMSwgbmNb
bmM+d2lkdGhdKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0icmN1dCIpewogICAgICAgIHggPC0g
c3Vic3RyKHgsIDEsIHdpZHRoKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0idmFyaWFibGUiKXsK
ICAgICAgICBOVUxMCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJleHRlbmQiKXsKICAgICAgICB3
aWR0aCA8LSBtYXhuYwogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0iYWJicmV2aWF0ZSIpewogICAg
ICAgIHggPC0gYWJicmV2aWF0ZSh4LCB3aWR0aCkKICAgICAgICBpZiAod2FybiAmJiBhbnkobmNo
YXIoeCk+d2lkdGgpKSB3YXJuaW5nKCJhYmJyZXZpYXRlKCkgdmlvbGF0ZWQgd2lkdGgiKQogICAg
ICB9ZWxzZSAKICAgICAgICBzdG9wKCJpbGxlZ2FsIG1ldGhvZCIsIG1ldGhvZCkKICAgIH0KICAg
IG5vIDwtIHBtYXgoMCwgd2lkdGggLSBuYykKICAgIHRhYiA8LSB1bmlxdWUobm8pCiAgICB0YWJw
YWQgPC0gc2FwcGx5KHRhYisxLCBmdW5jdGlvbihubykgcGFzdGUoY2hhcmFjdGVyKG5vKSwgY29s
bGFwc2UgPSBjaGFyKSkKICAgIHBhZCA8LSB0YWJwYWRbbWF0Y2gobm8sIHRhYildCiAgICByIDwt
IGlmIChmbGFnID09ICItIikgCiAgICAgICAgcGFzdGUoeCwgcGFkLCBzZXAgPSAiIikKICAgIGVs
c2UgcGFzdGUocGFkLCB4LCBzZXAgPSAiIikKICAgIGlmICghaXMubnVsbChhdCkpIAogICAgICAg
IGF0dHJpYnV0ZXMocikgPC0gYXQKICAgIHIKfQoKCiMgZGVmYXVsdCBtZXRob2QgaXMgJ3JjdXQn
CiMgLXdpZHRoIG1ha2VzIGxlZnQgcGFkZGluZwpycGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGgg
PSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9kPWMoInJjdXQiLCAibGN1dCIsICJ2YXJpYWJsZSIsICJl
eHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJy
ZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgpPjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0
ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQiKQoKICAgIGZsYWcgPC0gIi0iCiAgICBpZiAoaXMubnVs
bCh4KSkgCiAgICAgICAgcmV0dXJuKCIiKQogICAgaWYgKCFpcy5jaGFyYWN0ZXIoeCkpIHsKICAg
ICAgICB3YXJuaW5nKCJjb2VyY2luZyAneCcgdG8gJ2NoYXJhY3RlciciKQogICAgICAgIHggPC0g
YXMuY2hhcmFjdGVyKHgpCiAgICB9CiAgICBhdCA8LSBhdHRyaWJ1dGVzKHgpCiAgICBuYyA8LSBu
Y2hhcih4KQogICAgbWF4bmMgPC0gbWF4KG5jKQogICAgaWYgKGlzLm51bGwod2lkdGgpKSAKICAg
ICAgICB3aWR0aCA8LSBtYXhuYwogICAgZWxzZSBpZiAod2lkdGggPCAwKSB7CiAgICAgICAgZmxh
ZyA8LSAiIgogICAgICAgIHdpZHRoIDwtIC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5j
KXsKICAgICAgaWYgKHdhcm4pCiAgICAgICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0i
LCBtYXhuYywgIiA+IGFicyh3aWR0aCk9Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRo
b2Q9PSJsY3V0Iil7CiAgICAgICAgeFtuYz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAo
bmMtd2lkdGgpW25jPndpZHRoXSsxLCBuY1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRo
b2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNl
IGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIpewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1l
dGhvZD09ImV4dGVuZCIpewogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmICht
ZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAgICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQog
ICAgICAgIGlmICh3YXJuICYmIGFueShuY2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlh
dGUoKSB2aW9sYXRlZCB3aWR0aCIpICAgICAgCiAgICAgIH1lbHNlIAogICAgICAgIHN0b3AoImls
bGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQogICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5j
KQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRhYnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0
aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBjb2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwt
IHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIgPC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAg
ICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAgZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIi
KQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAgICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAg
cgp9CgoKIyBkZWZhdWx0IG1ldGhvZCBpcyAnbGN1dCcKIyAtd2lkdGggbWFrZXMgcmlndGggcGFk
ZGluZwpscGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9k
PWMoImxjdXQiLCAicmN1dCIsICJ2YXJpYWJsZSIsICJleHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3
YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJyZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgp
PjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQi
KQoKICAgIGZsYWcgPC0gIiIKICAgIGlmIChpcy5udWxsKHgpKSAKICAgICAgICByZXR1cm4oIiIp
CiAgICBpZiAoIWlzLmNoYXJhY3Rlcih4KSkgewogICAgICAgIHdhcm5pbmcoImNvZXJjaW5nICd4
JyB0byAnY2hhcmFjdGVyJyIpCiAgICAgICAgeCA8LSBhcy5jaGFyYWN0ZXIoeCkKICAgIH0KICAg
IGF0IDwtIGF0dHJpYnV0ZXMoeCkKICAgIG5jIDwtIG5jaGFyKHgpCiAgICBtYXhuYyA8LSBtYXgo
bmMpCiAgICBpZiAoaXMubnVsbCh3aWR0aCkpIAogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICBl
bHNlIGlmICh3aWR0aCA8IDApIHsKICAgICAgICBmbGFnIDwtICItIgogICAgICAgIHdpZHRoIDwt
IC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5jKXsKICAgICAgaWYgKHdhcm4pCiAgICAg
ICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0iLCBtYXhuYywgIiA+IGFicyh3aWR0aCk9
Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRob2Q9PSJsY3V0Iil7CiAgICAgICAgeFtu
Yz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAobmMtd2lkdGgpW25jPndpZHRoXSsxLCBu
Y1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8
LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIp
ewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1ldGhvZD09ImV4dGVuZCIpewogICAgICAg
IHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAg
ICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQogICAgICAgIGlmICh3YXJuICYmIGFueShu
Y2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlhdGUoKSB2aW9sYXRlZCB3aWR0aCIpCiAg
ICAgIH1lbHNlIAogICAgICAgIHN0b3AoImlsbGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQog
ICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5jKQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRh
YnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBj
b2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwtIHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIg
PC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAgICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAg
ZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIiKQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAg
ICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAgcgp9CgojIHRyaW1tcyBib3RoIHNpZGVzCnRyaW0g
PC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0ZSgnXCheWycsIGRyb3As
ICddKlwpXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwn
XSokXCknLCBzZXA9JycpCiAgICAgICwgJ1xcMicsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojIHJp
Z2h0IHRyaW0KcnRyaW0gPC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0
ZSgnXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwnXSok
XCknLCBzZXA9JycpCiAgICAgICwgJ1xcMScsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojbGVmdCB0
cmltCmx0cmltIDwtIGZ1bmN0aW9uKHRleHQsIGRyb3A9JyBcdFxuJykKICBzdWIocGFzdGUoJ1wo
XlsnLCBkcm9wLCAnXSpcKVwoLipbXicsIGRyb3AsICddXCl8XCheWycsIGRyb3AsJ10qJFwpJywg
c2VwPScnKQogICAgICAsICdcXDInLCB0ZXh0LCBleHRlbmRlZD1UUlVFKQoKI3JlbW92ZXMgb25l
ICgxISkgcGFpciBvZiBxdW90YXRpb24gbWFya3MKdW5xdW90YXRlIDwtIGZ1bmN0aW9uKHRleHQs
IHF1b3RhdGlvbi5tYXJrPSciJykKICBzdWIocGFzdGUoJ1woXicsIHF1b3RhdGlvbi5tYXJrLCAn
XClcKC4qXClcKCcsIHF1b3RhdGlvbi5tYXJrLCAnJFwpJywgc2VwPScnKQogICAgICAsICdcXDIn
CiAgICAgICwgdGV4dAogICAgICAsIGV4dGVuZGVkPVRSVUUpCgoKI2Z1cnRoZXIgdXRpbGl0aWVz
IGFyZSBkZWZpbmVkIHdpdGhpbiBvdGhlciBmdW5jdGlvbnMsIAojIC0gYSBleHRlbmRlZCB2ZXJz
aW9uIG9mIHR5cGUuY29udmVydCgpCiMgLSBhIHNsaWdobHkgbW9kaWZpZWQgdmVyc2lvbiBvZiBz
Y2FuKCkKCgoKIyBmdW5jdGlvbnMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKIyMgU2hhbGwgd2UgaGF2ZSBnZW5lcmlj
cyA/PwpyZWFkIDwtIGZ1bmN0aW9uICh4LCAuLi4pIApVc2VNZXRob2QoInJlYWQiKQoKd3JpdGUu
ZGVmYXVsdCA8LSB3cml0ZQoKd3JpdGUgPC0gZnVuY3Rpb24gKHRlbXBsYXRlLCAuLi4pIApVc2VN
ZXRob2QoIndyaXRlIikKCgoKIyMgTW9kaWZpZWQgdmVyc2lvbiBvZiByZWFkLnRhYmxlKCkgZm9y
CiMjIGhhbmRsaW5nIHdoaXRlIHNwYWNlLCBkZWNpbWFsIHNlcGVyYXRvciwgcXVvdGF0aW9uIG1h
cmtzLCBmaXhlZCB3aWR0aCBpbXBvcnQKIyMgb25seSBvbmUgcmVzdHJpY3Rpb24gYXBwbGllczog
CiMjIGluIG5vbi1maXhlZC13aWR0aCBpbXBvcnQgdGhlIGRhdGEgTVVTVCBOT1QgY29udGFpbiBz
ZXA9CiMjIHRodXMgbm90IGZ1bGx5IENTViBjb21wYXRpYmxlCiMjIHJlbWFya3M6IAojIyAgIG5l
ZWRzIHJlZGVmaW5lZCBzY2FuKCkKIyMgICB0byBpbXBvcnQgQ1NWIGFzIHB1cmUgY2hhcmFjdGVy
IGNvbHVtbnMgdXNlIHNjYW4oKQojIyAgIHRvIGltcG9ydCBmaXhlZCB3aWR0aCBhcyBwdXJlIGNo
YXJhY3RlciBjb2x1bW5zIHVzZSByZWFkLmNoYXIuY29scygpCiMjICAgCiMjIE1vZGlmaWNhdGlv
bnMgKEdOVSkgQ29weXJpZ2h0IEpPQSAxOTk5CnJlYWQudGFibGUgPC0gCmZ1bmN0aW9uIChmaWxl
CiwgaGVhZGVyID0gRkFMU0UgICAgICAgICAgICAgICAjIyBoZWxwIHNob3VsZCBtZW50aW9uLCB0
aGF0IGF1dG9tYXRpY2FsbHkgVFJVRSBpZiBub3Qgc3BlY2lmaWVkIGFuZCBmaXJzdCBsaW5lIGhh
cyBvbmUgdG9rZW4gbW9yZQosIHNlcCA9ICcnICAgICAgICAgICAgICAgICAgICAgIyMgbm93IGZ1
bGx5IGlnbm9yYWJsZSBpZiBmaXhlZCB3aWR0aAosIHJvdy5uYW1lcwosIGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgIyMgaGVscCBzaG91bGQgbWVudGlvbiB0aGF0IGhlYWRlciBvdmVyd3Jp
dGVzIGNvbC5uYW1lcwosIGFzLmlzID0gRkFMU0UgICAgICAgICAgICAgICAgIyMgYXMuaXM9VFJV
RSBoYXMgcHJpb3JpdHksIHRodXMgaWdub3JlcyBzdG9yYWdlLm1vZGU9LCBhdHRyaWJ1dGVzPSwg
ZmFjdG9ycz0sIGxvZ2ljYWxzPQosIG5hLnN0cmluZ3MgPSAnTkEnICAgICAgICAgICAgCiwgc2tp
cCA9IDAKLCBubGluZXM9SW5mICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogbWF4IGRh
dGEgbGluZXMgcmVhZAosIGRlYy5zZXAgPSAnLicgICAgICAgICAgICAgICAgIyMgbmV3IChKT0Ep
CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicgICAgICAgICAjIyBuZXcgKEpPQSkKLCBlc2NhcGVkLnF1
b3RhdGlvbi5tYXJrID0gJyInICMjIG5ldyAoSk9BKTogb25seSB1c2VkIGlmIGl0IGRpZmZlcnMg
ZnJvbSBxdW90YXRpb24ubWFyawosIHN0cmlwLndoaXRlID0gVFJVRSAgICAgICAgICAgIyMgbmV3
IChKT0EpOiBzZXQgdG8gRkFMU0UgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKLCBzdHJpcC5x
dW90YXRpb24ubWFya3MgPSBUUlVFICMjIG5ldyAoSk9BKTogc2V0IHRvIEZBTFNFIGZvciBiYWNr
d2FyZCBjb21wYXRpYmlsaXR5LCBhbHNvIHZlY3RvcnMgYWxsb3dlZAosIHdpZHRocz1OVUxMICAg
ICAgICAgICAgICAgICAgIyMgbmV3IChKT0EpOiBmaXhlZCB3aWR0aDogc2luZ2xlIHdpZHRoICYg
bmNvbHVtbnMgb3IgdmVjdG9yL2xpc3Qgb2Ygd2lkdGhzCiwgc3RhcnQ9TlVMTCAgICAgICAgICAg
ICAgICAgICAjIyBuZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4g
c3RhcnQgcG9zaXRpb25zCiwgc3RvcD1OVUxMICAgICAgICAgICAgICAgICAgICAjIyBuZXcgKEpP
QSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4gc3RvcCBwb3NpdGlvbnMKLCBj
b2xzPW1heChsZW5ndGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKSAjIyBu
ZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiBuZWVkZWQgd2l0aCBzaW5nbGUgd2lkdGgKLCBlb2w9J1xu
JyAgICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogZml4ZWQgd2lkdGggb25seQosIHN0
b3JhZ2UubW9kZSA9IE5VTEwgICAgICAgICAgIyMgbmV3IChKT0EpOiAKLCBhdHRyaWJ1dGVzID0g
TlVMTCAgICAgICAgICAgICMjIG5ldyAoSk9BKTogb25seSBhcHBsaWVkIGlmIHN0b3JhZ2UubW9k
ZT0gc3BlY2lmaWVkLCBmYWN0b3JzPSBhbmQgbG9naWNhbD0gbWF5IGNoYW5nZSBmaW5hbCBhdHRy
aWJ1dGVzCiwgbG9naWNhbHMgPSBOVUxMICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6IHR3byBj
aGFyYWN0ZXJzIG9yIG51bWJlcnMgZm9yIGMoRkFMU0UsIFRSVUUpCiwgZmFjdG9ycyA9IE5VTEwg
ICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6ICduZXcnIGlnbm9yZXMgYXR0cmlidXRlcywgJ2xl
dmVscycgdXNlcyBjb2RlcyBmcm9tIGF0dHJpYnV0ZXMsICdjb2RlcycgdXNlcyBsZXZlbHMgZnJv
bSBhdHRyaWJ1dGVzCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UgICAjIyBuZXcgKEpPQSk6
IHJldHVybmVkIGRhdGEuZnJhbWUgaGFzIHRlbXBsYXRlIGFzIGF0dHJpYnV0ZQopIAp7CiAgICAj
IyMgU3RhcnQgSk9BIGNoYW5nZXMKICAgIAogICAgc3RvcmFnZS5tb2RlcyA8LSBjKCJjaGFyYWN0
ZXIiLCAibG9naWNhbCIsICJpbnRlZ2VyIiwgImRvdWJsZSIsICJjb21wbGV4IikKCiAgICAjbG9n
aWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxzKT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8
LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAgIyBmYWN0b3JzCiAgICBpZiAoIWlzLm51bGwoZmFj
dG9ycykpCiAgICAgIGZhY3RvcnMgPC0gbWF0Y2guYXJnKGZhY3RvcnMsIGMoImxldmVscyIsICJj
b2RlcyIsICJuZXciKSkKICAgICMgY29tcGFyZSBzZXAgYW5kIGRlYy5zZXAKICAgIGlmIChkZWMu
c2VwPT1zZXApCiAgICAgIHN0b3AoInBhcnNpbmcgcnVsZSB2aW9sYXRpb246IHNlcCBtdXN0IG5v
dCBlcXVhbCBkZWMuc2VwIikKICAgICMgbmEuc3RyaW5ncwogICAgaWYgKGlzLm51bGwobmEuc3Ry
aW5ncykpCiAgICAgIHN0b3AoInNjYW4gY3VycmVudGx5IGRvZXNuJ3QgYWxsb3cgbmEuc3RyaW5n
cz1OVUxMIikKCiAgICAjIyAuSW50ZXJuYWwodHlwZS5jb252ZXJ0KSBjYWxscyBkb190eXBlY3Z0
KCkgd2hpY2ggY2FsbHMgQy1saWJyYXJ5IGZ1bmN0aW9uIHN0cnRvZCgpIHdoaWNoIHVzZXMgJy4n
IGFzIGRlYy5zZXAKICAgICMjIHRodXMgbGV0J3MgcmVwbGFjZSBvdGhlciBkZWMuc2VwIGhlcmUK
ICAgICMjIEluIGNhc2UgYSBnbG9iYWwgb3B0aW9uJGRlYy5zZXAgaXMgaW50cm9kdWNlZCwgdGhp
cyBmaXggbmVlZHMgdG8gYmUgYWRhcHRlZAoKICAgIHR5cGUuY29udmVydCA8LSBmdW5jdGlvbih4
CiAgICAsIG5hLnN0cmluZ3MyID0gbmEuc3RyaW5ncyAgIyBjb25zdGFudCBmb3IgYWxsIGNvbHVt
bnMsIG5hLnN0cmluZ3MgTk9UIHJlcGxhY2VkIGJ5ICdOQScgaW4gc2NhbigpIG9yIHJlYWQuY2hh
ci5jb2xzKCkKICAgICwgYXMuaXMyID0gRkFMU0UKICAgICwgZGVjPWRlYy5zZXAgICAgICAgICAg
ICAgICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBzdG9yYWdlLm1vZGUyPU5VTEwK
ICAgICwgYXR0cmlidXRlczI9TlVMTAogICAgLCBsb2dpY2FsczI9bG9naWNhbHMgICAgICAgICAj
IGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBmYWN0b3JzMj1mYWN0b3JzICAgICAgICAg
ICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgKXsgIAogICAgICAgIGlmIChpcy5udWxs
KHN0b3JhZ2UubW9kZTIpKXsgICMjIHRoZSBvbGQgdmVyc2lvbgogICAgICAgICAgaWYgKGRlYyE9
Ii4iKQogICAgICAgICAgICB4IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNF
LCBleHRlbmRlZD1GQUxTRSkKICAgICAgICAgICAgeCA8LSAuSW50ZXJuYWwodHlwZS5jb252ZXJ0
KHgsIG5hLnN0cmluZ3MyLCBhcy5pczIpKQogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUy
PT0nY2hhcmFjdGVyJyl7CiAgICAgICAgICAgIHhbbWF0Y2goeCwgbmEuc3RyaW5nczIsIG5vbWF0
Y2g9MCk+MF0gPC0gJ05BJwogICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJpYnV0ZXMy
CiAgICAgICAgICAgIAogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0nbG9naWNhbCcp
ewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4wXSA8LSAnTkEn
CiAgICAgICAgICBpZiAoaXMubnVsbChsb2dpY2FsczIpKXsKICAgICAgICAgICAgIyMgcmVjb2du
aXplIGMoJ0ZBTFNFJywgJ1RSVUUnLCAnRicsICdUJykKICAgICAgICAgICAgeCA8LSBhcy5sb2dp
Y2FsKHgpCiAgICAgICAgICB9ZWxzZSBpZiAobW9kZShsb2dpY2FsczIpPT0nbnVtZXJpYycpewog
ICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4n
LCB4LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICAgIHggPC0g
YyhGQUxTRSwgVFJVRSlbbWF0Y2goYXMuaW50ZWdlcih4KSwgbG9naWNhbHMyKV0KICAgICAgICAg
IH1lbHNlCiAgICAgICAgICAgIHggPC0gYyhGQUxTRSwgVFJVRSlbbWF0Y2goeCwgbG9naWNhbHMy
KV0KICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAgICAgICAgIAogICAg
ICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0naW50ZWdlcicpewogICAgICAgICAgaWYgKCBh
bnkoIWlzLm5hKG1hdGNoKGF0dHJpYnV0ZXMyJGNsYXNzLCAnZmFjdG9yJykpKSApewogICAgICAg
ICAgICAjIyBoYW5kbGUgZmFjdG9ycwogICAgICAgICAgICBpZiAoaXMubnVsbChmYWN0b3JzMikp
ewogICAgICAgICAgICAgICMjIGFzc3VtZSBmYWN0b3IgaXMgcHJvcGVybHkgZGVzY3JpYmVkIGlu
IGF0dHJpYnV0ZXMKICAgICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgICB4
IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkK
ICAgICAgICAgICAgICB4IDwtIGFzLmludGVnZXIoeCkKICAgICAgICAgICAgICBpZiAobWF4KHgp
Pmxlbmd0aChhdHRyaWJ1dGVzMiRsZXZlbHMpKQogICAgICAgICAgICAgICAgd2FybmluZygibWF4
IGZhY3RvciBjb2RlIG9mIiwgbWF4KHgpLCAid2hlcmUgb25seSIsIGxlbmd0aChhdHRyaWJ1dGVz
MiRsZXZlbHMpLCAibGV2ZWxzIikKICAgICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJp
YnV0ZXMyCiAgICAgICAgICAgICAgCiAgICAgICAgICAgIH1lbHNlIGlmIChmYWN0b3JzMj09J25l
dycpewogICAgICAgICAgICAgICMjIGlnbm9yZSBhdHRyaWJ1dGVzCiAgICAgICAgICAgICAgeCA8
LSBmYWN0b3IoeCwgZXhjbHVkZT1uYS5zdHJpbmdzMikKICAgICAgICAgICAgICAKICAgICAgICAg
ICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nbGV2ZWxzJyl7CiAgICAgICAgICAgICAgIyMgdXNlIGNv
ZGVzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgICMgYWNjZXB0IG5hLnN0cmluZ3Mgd2hp
Y2ggYXJlIGFscmVhZHkgbGV2ZWxzCiAgICAgICAgICAgICAgbmEuc3RyaW5nczIgPC0gbmEuc3Ry
aW5nczJbIShuYS5zdHJpbmdzMiAlaW4lIGF0dHJpYnV0ZXMyJGxldmVscyldCiAgICAgICAgICAg
ICAgIyByZWplY3Qgb3RoZXIgbmEuc3RyaW5ncwogICAgICAgICAgICAgIGxldiA8LSBuYW1lcyh0
YWJsZSh4LCBleGNsdWRlPW5hLnN0cmluZ3MyKSkKICAgICAgICAgICAgICBsZXYgPC0gbGV2WyEo
bGV2ICVpbiUgYXR0cmlidXRlczIkbGV2ZWxzKV0KICAgICAgICAgICAgICBpZiAobGVuZ3RoKGxl
dik+MCl7CiAgICAgICAgICAgICAgICAgIHdhcm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUo
YXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBzZT0iOyIpLCAifSB3aXRoIHVua25vd24gbGV2ZWxz
IHsiLCBwYXN0ZShsZXYsIGNvbGxhcHNlPSI7IiksICJ9Iiwgc2VwPSIiKSkKICAgICAgICAgICAg
ICAgICAgYXR0cmlidXRlczIkbGV2ZWxzIDwtIGMoYXR0cmlidXRlczIkbGV2ZWxzLCBsZXYpCiAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB4IDwtIG1hdGNoKHgsIGF0dHJpYnV0ZXMy
JGxldmVscykKICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgICAKICAgICAgICAgICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nY29kZXMnKXsKICAg
ICAgICAgICAgICAjIyB1c2UgbGV2ZWxzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgIGlm
IChkZWMhPSIuIikKICAgICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcuJywgeCwgaWdub3Jl
LmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICAgICAgeCA8LSBhcy5pbnRl
Z2VyKHgpCiAgICAgICAgICAgICAgICBjb2QgPC0gbmFtZXModGFibGUoeCkpCiAgICAgICAgICAg
ICAgICBjb2QgPC0gY29kWyEoY29kICVpbiUgMTpsZW5ndGgoYXR0cmlidXRlczIkbGV2ZWxzKSld
CiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKGNvZCk+MCl7CiAgICAgICAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUoYXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBz
ZT0iOyIpLCAifSB3aXRoIHVua25vd24gY29kZXMgeyIsIHBhc3RlKGNvZCwgY29sbGFwc2U9Ijsi
KSwgIn0iLCBzZXA9IiIpKQogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzMiRsZXZlbHMgPC0g
YyhhdHRyaWJ1dGVzMiRsZXZlbHMsIHBhc3RlKCJVbmtub3duQ29kZSIsIChsZW5ndGgoYXR0cmli
dXRlczIkbGV2ZWxzKSsxKTptYXgoYXMuaW50ZWdlcihjb2QpKSwgc2VwPSIiKSkKICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICB9ZWxzZXsgIyMgaXMgaW50ZWdlcgog
ICAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgICAgaWYgKGRlYyE9Ii4iKQogICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcu
JywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICB4IDwt
IGFzLmludGVnZXIoeCkKICAgICAgICAgICAgYXR0cmlidXRlcyh4KSA8LSBhdHRyaWJ1dGVzMgog
ICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9ZWxzZSBpZiAoc3RvcmFnZS5tb2RlMj09
J2RvdWJsZScpewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4w
XSA8LSAnTkEnCiAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgIHggPC0gZ3N1Yihk
ZWMsICcuJywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAg
eCA8LSBhcy5kb3VibGUoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIK
ICAgICAgICAgICAgCiAgICAgICAgfWVsc2UgaWYgKHN0b3JhZ2UubW9kZTI9PSdjb21wbGV4Jyl7
CiAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgIGlmIChkZWMhPSIuIikKICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4nLCB4
LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICB4IDwtIGFzLmNv
bXBsZXgoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKCiAgICAgICAg
fWVsc2UKICAgICAgICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZS5tb2RlIikKICAgICAgICAgIAog
ICAgICAgIHJldHVybih4KQogICAgfQoKCgogICAgIyMgcmVkZWZpbmUgc2NhbiBub3QgdG8gYWRk
ICcnIHRvIG5hLnN0cmluZ3MKICAgIHNjYW4gPC0gCiAgICBmdW5jdGlvbiAoZmlsZSA9ICIiLCB3
aGF0ID0gZG91YmxlKDApLCBubWF4ID0gLTEsIG4gPSAtMSwgc2VwID0gIiIsIAogICAgICAgIHNr
aXAgPSAwLCBubGluZXMgPSAwLCBuYS5zdHJpbmdzID0gIk5BIiwgZmx1c2ggPSBGQUxTRSwgc3Ry
aXAud2hpdGUgPSBGQUxTRSwgCiAgICAgICAgcXVpZXQgPSBGQUxTRSkgCiAgICB7CiAgICAjISAg
ICBpZiAoIW1pc3Npbmcoc2VwKSkgCiAgICAjISAgICAgICBuYS5zdHJpbmdzIDwtIGMobmEuc3Ry
aW5ncywgIiIpCiAgICAgICAgaWYgKCFtaXNzaW5nKG4pKSB7CiAgICAgICAgICAgaWYgKG1pc3Np
bmcobm1heCkpIAogICAgICAgICAgICAgbm1heCA8LSBuL3BtYXgobGVuZ3RoKHdoYXQpLCAxKQog
ICAgICAgICAgIGVsc2Ugc3RvcCgiRWl0aGVyIHNwZWNpZnkgYG5tYXgnIG9yIGBuJywgYnV0IG5v
dCBib3RoLiIpCiAgICAgICAgfQogICAgICAgIC5JbnRlcm5hbChzY2FuKGZpbGUsIHdoYXQsIG5t
YXgsIHNlcCwgc2tpcCwgbmxpbmVzLCBuYS5zdHJpbmdzLCAKICAgICAgICAgICAgZmx1c2gsIHN0
cmlwLndoaXRlLCBxdWlldCkpCiAgICB9CgoKICAgICMgcHJlcGFyZWQgcGFyYW1ldGVycyBmb3Ig
Zml4ZWQgd2lkdGgKICAgIHN0YXJ0c3RvcCA8LSAgIWlzLm51bGwoc3RhcnQpIHx8ICFpcy5udWxs
KHN0b3ApIAogICAgaWYgKHN0YXJ0c3RvcCAmJiAoICFpcy5udWxsKHdpZHRocykgfHwgaXMubnVs
bChzdGFydCkgfHwgaXMubnVsbChzdG9wKSApKQogICAgICBzdG9wKCJmb3IgZml4ZWQgZm9ybWF0
IHNwZWNpZnkgZWl0aGVyIHdpZHRocz0gb3Igc3RhcnQ9IGFuZCBzdG9wPSIpCiAgICBmaXhlZC53
aWR0aCA8LSAhaXMubnVsbCh3aWR0aHMpIHx8IHN0YXJ0c3RvcAoKCiAgICBpZiAoZml4ZWQud2lk
dGgpewogICAgICAjIyBpbml0aWFsIHNldHRpbmcgZm9yIHdpZHRoLCBzdGFydCwgc3RvcAogICAg
ICBpZiAoc3RhcnRzdG9wKXsKICAgICAgICBzdG9wIDwtIHVubGlzdChzdG9wKQogICAgICAgIHN0
YXJ0IDwtIHVubGlzdChzdGFydCkKICAgICAgICBpZiAobGVuZ3RoKHN0YXJ0KSE9Y29scyB8fCBs
ZW5ndGgoc3RvcCkhPWNvbHMpIAogICAgICAgICAgc3RvcCgiaW52YWxpZCBsZW5ndGggZm9yIHtz
dGFydCxzdG9wfSIpCiAgICAgICAgbyA8LSBvcmRlcihzdG9wKQogICAgICAgIHN0b3AgPC0gc3Rv
cFtvXQogICAgICAgIHN0YXJ0IDwtIHN0YXJ0W29dCiAgICAgICAgcmVtb3ZlKG8pCiAgICAgICAg
d2lkdGhzIDwtIHN0b3AgLSBzdGFydCArIDEKICAgICAgfWVsc2V7CiAgICAgICAgaWYgKGxlbmd0
aCh3aWR0aHMpPT0xKXsKICAgICAgICAgIHdpZHRocyA8LSByZXAod2lkdGhzLCBjb2xzKQogICAg
ICAgIH1lbHNlIGlmIChsZW5ndGgod2lkdGhzKT09Y29scykgCiAgICAgICAgICB3aWR0aHMgPC0g
dW5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAgICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0
aCBmb3Igd2lkdGhzIikKICAgICAgICAjIyByZWFkanVzdCBzdGFydC9zdG9wCiAgICAgICAgbGFz
dHN0b3AgPC0gMAogICAgICAgIGZvciAoaSBpbiAxOmNvbHMpewogICAgICAgICAgc3RhcnRbW2ld
XSA8LSBsYXN0c3RvcCArIDEKICAgICAgICAgIHN0b3BbW2ldXSA8LSBsYXN0c3RvcCA8LSBsYXN0
c3RvcCArIHdpZHRoc1tbaV1dCiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOmxlbmd0aCh3aWR0aHMp
LCBzZXAgPSAiIikKICAgICAgZWxzZSBpZiAoYW55KHN0cmlwLnF1b3RhdGlvbi5tYXJrcykpIGNv
bC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykKCiAgICAgIAog
ICAgfWVsc2V7IAogICAgIAogICAgICBpZiAoZGVjLnNlcD09c2VwKQogICAgICAgIHN0b3AoInNl
cCBtdXN0IG5vdCBlcXVhbCBkZWMuc2VwIikKICAgICAgaWYgKHN0cmlwLndoaXRlICYmIHNlcCAl
aW4lIGMoIiIsICIgIiwgIlx0IikpCiAgICAgICAgd2FybmluZygicmVhZC50YWJsZTogc3RyaXAu
d2hpdGUgQU5EIHdoaXRlIHNwYWNlIHNlcGVyYXRvciAhPyIpCgogICAgIAogICAgICByb3cubGVu
cyA8LSBjb3VudC5maWVsZHMoZmlsZSwgc2VwLCBza2lwKSAjIyByZW1hcms6IG9idmlvdXNseSB0
aGUgZmlsZSBpcyByZWFkIHR3aWNlIAogICAgICBubGluZXMgPC0gbWluKGxlbmd0aChyb3cubGVu
cyksIG5saW5lcysxKSAjIyBjaGFuZ2VkIGJlY2F1c2UgbmxpbmVzIG5vdyBpcyBhIHBhcmFtZXRl
cgogICAgICAjIyMgU3RvcCBKT0EgY2hhbmdlcyAgIAogICAgICBybGFicCA8LSBubGluZXMgPiAx
ICYmIChyb3cubGVuc1syXSAtIHJvdy5sZW5zWzFdKSA9PSAxICAKICAgICAgaWYgKHJsYWJwICYm
IG1pc3NpbmcoaGVhZGVyKSkgCiAgICAgICAgIGhlYWRlciA8LSBUUlVFCiAgICAgIGlmIChoZWFk
ZXIpIHsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBzY2FuKGZpbGUsIHdoYXQgPSAiIiwgc2VwID0g
c2VwLCBubGluZXMgPSAxLCAKICAgICAgICAgICAgICBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRl
LCAjIyBhZGRlZCBieSBKT0EKICAgICAgICAgICAgICBxdWlldCA9IFRSVUUsIHNraXAgPSBza2lw
KQogICAgICAgICAgc2tpcCA8LSBza2lwICsgMQogICAgICAgICAgcm93LmxlbnMgPC0gcm93Lmxl
bnNbLTFdCiAgICAgICAgICBubGluZXMgPC0gbmxpbmVzIC0gMQogICAgICB9ZWxzZSBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOnJvdy5s
ZW5zWzFdLCBzZXAgPSAiIikKICAgICAgaWYgKGFueShzdHJpcC5xdW90YXRpb24ubWFya3MpKQog
ICAgICAgIGNvbC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykg
IyMgYWRkZWQgYnkgSk9BCiAgICAKICAgICAgY29scyA8LSB1bmlxdWUocm93LmxlbnMpCiAgICAg
IGlmIChsZW5ndGgoY29scykgIT0gMSkgewogICAgICAgICAgY2F0KCJcbnJvdy5sZW5zPVxuIikK
ICAgICAgICAgIHByaW50KHJvdy5sZW5zKQogICAgICAgICAgc3RvcCgiYWxsIHJvd3MgbXVzdCBo
YXZlIHRoZSBzYW1lIGxlbmd0aC4iKQogICAgICB9CiAgICAgIHdoYXQgPC0gcmVwKGxpc3QoIiIp
LCBjb2xzKQogICAgICBpZiAocmxhYnApIAogICAgICAgIGNvbC5uYW1lcyA8LSBjKCJyb3cubmFt
ZXMiLCBjb2wubmFtZXMpCiAgICAgIG5hbWVzKHdoYXQpIDwtIGNvbC5uYW1lcwoKICAgIH0gIyBl
bmQgb2Ygbm9uLWZpeGVkLXdpZHRoCgoKICAgICMjIyBTdGFydCBKT0EgY2hhbmdlcwogICAgaWYg
KGZpeGVkLndpZHRoKXsKCiAgICAgIGRhdGEgPC0gcmVhZC5jaGFyLmNvbHMoZmlsZT1maWxlLCBz
dGFydCwgc3RvcAogICAgICAsIHNraXA9c2tpcAogICAgICAsIG5saW5lcz1ubGluZXMKICAgICAg
LCBlb2w9ZW9sCiAgICAgICwgbmEuc3RyaW5ncz0nTkEnCiAgICAgICkKICAgICAgbmxpbmVzIDwt
IGxlbmd0aChkYXRhW1sxXV0pCiAgICAgIG5hbWVzKGRhdGEpIDwtIGNvbC5uYW1lcwoKICAgIH1l
bHNleyAjIyMgU3RvcCBKT0EgY2hhbmdlcwoKICAgICAgIyMgbmEuc3RyaW5ncyBtdXN0IGJlIHRy
ZWF0ZWQgbGF0ZXIsIGlmIHVucXVvdGF0ZSgpIHNoYWxsIGhhdmUgYW4gZWZmZWN0CiAgICAgICMj
IGFzIHdlIG9ubHkgcmVhZCBpbiBzdHJpbmdzIGhlcmUsIHJlcGxhY2luZyAnTkEnIGJ5ICdOQScg
aXMgb2sKICAgICAgIyMgaG93ZXZlciwgc3RhbmRhcmQgdmVyc2lvbiBvZiBzY2FuIGF1dG9tYXRp
Y2FsbHkgbWFrZXMgbmEuc3RyaW5ncz1jKCdOQScsICcnKQogICAgICAjIyB0aHVzIGhlcmUgcmVk
ZWZpbmVkIHZlcnNpb24gb2Ygc2NhbiB1c2VkCiAgICAgIGRhdGEgPC0gc2NhbihmaWxlID0gZmls
ZSwgd2hhdCA9IHdoYXQsIHNlcCA9IHNlcCwgc2tpcCA9IHNraXAKICAgICAgICAgICAgICAsIG5h
LnN0cmluZ3MgPSAnTkEnICAgICAgICAgIyMgY2hhbmdlZCBieSBKT0EKICAgICAgICAgICAgICAs
IHN0cmlwLndoaXRlID0gc3RyaXAud2hpdGUgIyMgYWRkZWQgYnkgSk9BCiAgICAgICAgICAgICAg
LCBxdWlldCA9IFRSVUUpIAogICAgICBpZiAoY29scyAhPSBsZW5ndGgoZGF0YSkpIHsKICAgICAg
ICAgIHdhcm5pbmcocGFzdGUoImNvbHMgPSIsIGNvbHMsICIgIT0gbGVuZ3RoKGRhdGEpID0iLCBs
ZW5ndGgoZGF0YSkpKQogICAgICAgICAgY29scyA8LSBsZW5ndGgoZGF0YSkKICAgICAgfQogICAg
CiAgICB9ICMgZW5kIG9mIG5vbi1maXhlZC13aWR0aAoKCiAgICMjIFN0YXJ0IGNoYW5nZWQgYnkg
Sk9BICAgICAgICAKCiAgICBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcyk9PTEpCiAg
ICAgIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA8LSByZXAoc3RyaXAucXVvdGF0aW9uLm1hcmtzLCBj
b2xzKQogICAgZWxzZSBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcykhPWNvbHMpCiAg
ICAgICAgc3RvcChwYXN0ZSgic3RyaXAucXVvdGF0aW9uLm1hcmtzIGhhcyB0aGUgd3JvbmcgbGVu
Z3RoIgogICAgICAgICAgICAgLCBsZW5ndGgoc3RyaXAucXVvdGF0aW9uLm1hcmtzKSwiIT0gY29s
cyA9IiwgY29scykpCgogICAgaWYgKGlzLmxvZ2ljYWwoYXMuaXMpKSB7CiAgICAgIGlmIChsZW5n
dGgoYXMuaXMpPT0xKQogICAgICAgIGFzLmlzIDwtIHJlcChhcy5pcywgbGVuZ3RoID0gY29scykK
ICAgICAgZWxzZSBpZiAobGVuZ3RoKGFzLmlzKSE9Y29scykKICAgICAgICBzdG9wKHBhc3RlKCJh
cy5pcyBoYXMgdGhlIHdyb25nIGxlbmd0aCIsIGxlbmd0aChhcy5pcyksIiE9IGNvbHMgPSIsIGNv
bHMpKQogICAgfQogICAgZWxzZSBpZiAoaXMubnVtZXJpYyhhcy5pcykpIHsKICAgICAgICBpZiAo
YW55KGFzLmlzIDwgMSB8IGFzLmlzID4gY29scykpIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlk
IG51bWVyaWMgYXMuaXMgZXhwcmVzc2lvbiIpCiAgICAgICAgaSA8LSByZXAoRkFMU0UsIGNvbHMp
CiAgICAgICAgaVthcy5pc10gPC0gVFJVRQogICAgICAgIGFzLmlzIDwtIGkKICAgIH0KICAgIGVs
c2UgCiAgICAgICAgc3RvcChwYXN0ZSgiYXMuaXMgaGFzIHdyb25nIHR5cGUiKSkKCiAgICAgICAg
ICAgCiAgIAogICBpZiAoaXMubnVsbChzdG9yYWdlLm1vZGUpICYmICFpcy5udWxsKGF0dHJpYnV0
ZXMpKQogICAgIHN0b3AoImF0dHJpYnV0ZXMgbXVzdCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggc3Rv
cmFnZS5tb2RlIikKICAgaWYgKGxlbmd0aChzdG9yYWdlLm1vZGUpPT0xKQogICAgIHN0b3JhZ2Uu
bW9kZSA8LSByZXAoc3RvcmFnZS5tb2RlLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoc3RvcmFn
ZS5tb2RlKT4xICYmIGxlbmd0aChzdG9yYWdlLm1vZGUpIT1jb2xzKQogICAgIHN0b3AoInN0b3Jh
Z2UubW9kZSBoYXMgd3JvbmcgbGVuZ3RoIiwgbGVuZ3RoKHN0b3JhZ2UubW9kZSksICIhPSBjb2xz
ID0iLCBjb2xzKQogICBpZiAoIWFsbChtYXRjaChzdG9yYWdlLm1vZGUsIHN0b3JhZ2UubW9kZXMs
IG5vbWF0Y2g9MCkpKQogICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZSBtb2RlIikKICAgaWYgKGxl
bmd0aChhdHRyaWJ1dGVzKT09MSkKICAgICBhdHRyaWJ1dGVzIDwtIHJlcChhcy5saXN0KGF0dHJp
YnV0ZXMpLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoYXR0cmlidXRlcyk+MSAmJiBsZW5ndGgo
YXR0cmlidXRlcykhPWNvbHMpCiAgICAgc3RvcCgiYXR0cmlidXRlcyBoYXMgd3JvbmcgbGVuZ3Ro
IiwgbGVuZ3RoKGF0dHJpYnV0ZXMpLCAiIT0gY29scyA9IiwgY29scykKICAKICAgZm9yIChpIGlu
IDE6Y29scykgewogICAgIGlmIChmaXhlZC53aWR0aCAmJiBzdHJpcC53aGl0ZSkKICAgICAgIGNv
bHVtbiA8LSB0cmltKGRhdGFbW2ldXSwgJyBcdCcpCiAgICAgZWxzZQogICAgICAgY29sdW1uIDwt
IGRhdGFbW2ldXQogICAgIGlmIChzdHJpcC5xdW90YXRpb24ubWFya3NbaV0pCiAgICAgICBjb2x1
bW4gPC0gdW5xdW90YXRlKGNvbHVtbiwgcXVvdGF0aW9uLm1hcmspCiAgICAgaWYgKGVzY2FwZWQu
cXVvdGF0aW9uLm1hcmsgIT0gcXVvdGF0aW9uLm1hcmspCiAgICAgICBjb2x1bW4gPC0gZ3N1Yihl
c2NhcGVkLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyaywgY29sdW1uLCBleHRlbmRlZD1G
QUxTRSkKICAgICAgIAogICAgIGRhdGFbW2ldXSA8LSB0eXBlLmNvbnZlcnQoY29sdW1uCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFzLmlzPWFzLmlzW2ldCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAsIHN0b3JhZ2UubW9kZT1zdG9yYWdlLm1vZGVbaV0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICwgYXR0cmlidXRlcz1hdHRyaWJ1dGVzW1tpXV0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgIAogICB9CiAgIAogICAKICAgcm93dmFyIDwt
IDAgIyMgYWRkZWQgYnkgSk9BIGZvciB0ZW1wbGF0ZQogICAKICAgIyMgU3RvcCBjaGFuZ2VkIGJ5
IEpPQSAgICAgICAgCiAgICAgICAgICAgIAogICAgaWYgKG1pc3Npbmcocm93Lm5hbWVzKSkgewog
ICAgICAgIGlmICghZml4ZWQud2lkdGggJiYgcmxhYnApIHsgICMjIGNoYW5nZWQgYnkgSk9BIChv
bmx5IHN2cykKICAgICAgICAgICAgcm93Lm5hbWVzIDwtIGRhdGFbWzFdXQogICAgICAgICAgICBy
b3d2YXIgPC0gMSAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3IgdGVtcGxhdGUKICAgICAgICAg
ICAgY29sLm5hbWVzIDwtIGMoInJvd25hbWVzIiwgY29sLm5hbWVzKSAgIyMgYWRkZWQgYnkgSk9B
IGZvciB0ZW1wbGF0ZQogICAgICAgICAgICBkYXRhIDwtIGRhdGFbLTFdCiAgICAgICAgfQogICAg
ICAgIGVsc2Ugcm93Lm5hbWVzIDwtIGFzLmNoYXJhY3RlcigxOm5saW5lcykKICAgIH0KICAgIGVs
c2UgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCByb3cubmFtZXM9PTApIHsKICAgICAgICByb3cu
bmFtZXMgPC0gYXMuY2hhcmFjdGVyKDE6bmxpbmVzKQogICAgfQogICAgZWxzZSBpZiAoaXMuY2hh
cmFjdGVyKHJvdy5uYW1lcykpIHsKICAgICAgICBpZiAobGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkg
ewogICAgICAgICAgICByb3d2YXIgPC0gKDE6Y29scylbbWF0Y2goY29sLm5hbWVzLCByb3cubmFt
ZXMsIDApID09IDFdCiAgICAgICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tyb3d2YXJdXQogICAg
ICAgICAgICBkYXRhIDwtIGRhdGFbLXJvd3Zhcl0KICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlm
IChpcy5udW1lcmljKHJvdy5uYW1lcykgJiYgbGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkgewogICAg
ICAgIHJsYWJwIDwtIHJvdy5uYW1lcwogICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tybGFicF1d
CiAgICAgICAgcm93dmFyIDwtIHJsYWJwICAgICAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3Ig
dGVtcGxhdGUKICAgICAgICBkYXRhIDwtIGRhdGFbLXJsYWJwXQogICAgfQogICAgZWxzZSBzdG9w
KCJpbnZhbGlkIHJvdy5uYW1lcyBzcGVjaWZpY2F0aW9uIikKICAgIAogICAgY2xhc3MoZGF0YSkg
PC0gImRhdGEuZnJhbWUiCiAgICByb3cubmFtZXMoZGF0YSkgPC0gcm93Lm5hbWVzCiAgICAKICAg
IGlmICh0ZW1wbGF0ZS5hdHRyaWJ1dGUpewogICAgCiAgICAgIGlmIChpcy5udWxsKHdpZHRocykp
CiAgICAgICAgZGlnaXRzIDwtIE5VTEwKICAgICAgZWxzZXsKICAgICAgICB3aWR0aHMgPC0gYXMu
bGlzdCh3aWR0aHMpCiAgICAgICAgZGlnaXRzIDwtIHJlcChsaXN0KE5VTEwpLCBjb2xzKQogICAg
ICB9CiAgICAKICAgICAgaWYgKHJvd3Zhcj4wKXsKICAgICAgICBzdG9yYWdlLm1vZGUgPC0gYygg
ImNoYXJhY3RlciIsIHVubmFtZSh1bmxpc3QobGFwcGx5KGRhdGEsIHN0b3JhZ2UubW9kZSkpKSAp
CiAgICAgICAgYXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgbGFwcGx5
KGRhdGEsIGF0dHJpYnV0ZXMpKQogICAgICAgIG5hbWVzKGF0dHJpYnV0ZXMpWzFdIDwtIGNvbC5u
YW1lc1tyb3d2YXJdCiAgICAgIH1lbHNlewogICAgICAgIHN0b3JhZ2UubW9kZSA8LSB1bm5hbWUo
dW5saXN0KGxhcHBseShkYXRhLCBzdG9yYWdlLm1vZGUpKSkKICAgICAgICBhdHRyaWJ1dGVzIDwt
IGxhcHBseShkYXRhLCBhdHRyaWJ1dGVzKQogICAgICB9CiAgICAgIGF0dHIoZGF0YSwgJ3RlbXBs
YXRlJykgPC0gc3RydWN0dXJlKAogICAgICAgIGxpc3QoZmlsZSA9IGZpbGUgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAg
ICwgZW9sID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVy
IGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgc2VwID0gc2VwICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwg
ZGVjLnNlcCA9IGRlYy5zZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAg
ICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChj
aGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5t
YXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8Ij4gaW4g
Q1NWIAogICAgICAgICAgLCBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrID0gZXNjYXBlZC5xdW90YXRp
b24ubWFyayAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8IiI+IGluIENTVgogICAgICAg
ICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBw
ZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRpbmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNh
bCBvciBjaGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMgaW4g
ZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAgICAgLCByb3cu
bmFtZXMubG9jID0gcm93dmFyICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwg
Y29sbm8gb2Ygcm93bmFtZXMsIDAgPSBubyByb3cubmFtZXMgaW4gZmlsZSAoaW50ZWdlcikKICAg
ICAgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1lcyAobG9naWNhbCkKICAg
ICAgICAgICwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZSAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUKICAgICAgICAgICwgY29sLm5hbWVzID0gY29sLm5hbWVzICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIGNvcm5lci5uYW1lIChjaGFy
YWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90ZSA9IHN0cmlwLnF1b3RhdGlvbi5tYXJrcyAg
ICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90ZWQg
KGxvZ2ljYWwgdmVjdG9yKQogICAgICAgICAgLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAg
ICAgICAgICwgd2lkdGhzID0gd2lkdGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIHJvdy5uYW1lcy53aWR0aCAobGlzdCBvciBOVUxMKQog
ICAgICAgICAgLCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCBvciBOVUxMKQogICAgICAgICAgLCBhdHRyaWJ1dGVzID0g
YXR0cmlidXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAobGlzdCkK
ICAgICAgICAgICwgZXh0ZW5zaW9uLndhcm5pbmcgPSBGQUxTRSAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UgaW5kaWNhdGVzIHdldGhlciBvdXQgc3BlY3MgZGlm
ZmVyIGZyb20gaW4gc3BlY3MgCiAgICAgICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gTkEgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAg
ICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBOQSAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAgICApCiAgICAgICAgLCBjbGFzcz0idGVtcGxh
dGUiKQoKICAgIH0KICAgIGRhdGEKfQoKCnJlYWQuY2hhci5jb2xzIDwtIGZ1bmN0aW9uKGZpbGUs
IHN0YXJ0LCBzdG9wCiwgc2tpcD0wCiwgbmxpbmVzPTAKLCBlb2w9J1xuJwosIG5hLnN0cmluZ3M9
J05BJwopCnsKICAjIyMjIG5vIGVycm9yIGNoZWNraW5nIGluIHRoaXMgZnVuY3Rpb24KICAjIyMj
IHN0YXJ0c3RvcCBleHBlY3RlZCBzb3J0ZWQgYnkgU1RPUCAhIQogICMjIyMgb3ZlcmxhcHBpbmcg
Y29sdW1ucyBhbGxvd2VkCiAgIyMjIyBUaGlzIHNlY3Rpb24gY291bGQgYmUgcmVwbGFjZWQgYnkg
YSBDLWNhbGwgcmVhZGluZyBpbiBhIGZpbGUgaW4gY29sdW1ucyBzcGVjaWZpZWQgYnkgc3RhcnQv
c3RvcCAjIyMjCgogIHAgPC0gbGVuZ3RoKHN0YXJ0KQogIAogICMjIG5hLnN0cmluZ3M9TlVMTCBj
dXJyZW50bHkgbm90IHBvc3NpYmxlIGluIHNjYW4oKQogIGFsbC5pbi5vbmUgPC0gc2NhbihmaWxl
ID0gZmlsZSwgc2VwID0gZW9sLCBza2lwID0gc2tpcCwgbmxpbmVzPW5saW5lcwogICAgLCB3aGF0
ID0gY2hhcmFjdGVyKDApLCBuYS5zdHJpbmdzID0gJycsIGZsdXNoID0gRkFMU0UsIHN0cmlwLndo
aXRlID0gRkFMU0UsIHF1aWV0ID0gVFJVRSkKICBubGluZXMgPC0gbGVuZ3RoKGFsbC5pbi5vbmUp
CiAgYWxsLmluLmNvbHMgPC0gbGlzdCgpCiAgZm9yIChpIGluIDE6cCl7CiAgICBhbGwuaW4uY29s
c1tbaV1dIDwtIHN1YnN0cihhbGwuaW4ub25lLCBzdGFydFtpXSwgc3RvcFtpXSkKICAgIGlmICgh
aXMubnVsbChuYS5zdHJpbmdzKSB8fCBsZW5ndGgobmEuc3RyaW5ncyk+MSB8fCBuYS5zdHJpbmdz
WzFdIT0nTkEnKQogICAgICBhbGwuaW4uY29sc1tbaV1dW21hdGNoKGFsbC5pbi5jb2xzW1tpXV0s
IG5hLnN0cmluZ3MsIG5vbWF0Y2ggPSAwKSA+IDBdIDwtICJOQSIKICB9CiAgIyMjIyBFbmQgb2Yg
VGhpcyBzZWN0aW9uIGNvdWxkIGJlIHJlcGxhY2VkIGJ5IGEgQy1jYWxsIHJlYWRpbmcgaW4gYSBm
aWxlIGluIGNvbHVtbnMgc3BlY2lmaWVkIGJ5IHN0YXJ0L3N0b3AgIyMjIwogIHJldHVybihhbGwu
aW4uY29scykKfQoKCgojIyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBjb21tYSBzZXBlcmF0ZWQgdmFs
dWVzCiMjIG5vdGUgdGhhdCBjc3YgaXMgTk9UIGZ1bGx5IHN1cHBvcnRlZCB5ZXQKIyMgc3RyaW5n
cyBtdXN0IG5vdCBjb250YWluIHF1b3RhdGlvbi5tYXJrIG9yIHNlcAojIyAoR05VKSBDb3B5cmln
aHQgSk9BIDE5OTkKcmVhZC5zdnMgPC0gZnVuY3Rpb24gKGZpbGUKLCBoZWFkZXIgPSBUUlVFICAg
ICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBmb3IgQ1NWCiwgc2VwID0gJzsnICAgICAgICAgICAg
ICAgICAgICAgICMjIGNoYW5nZWQgZm9yIENTVgosIHJvdy5uYW1lcwosIGNvbC5uYW1lcwosIGFz
LmlzID0gRkFMU0UKLCBuYS5zdHJpbmdzID0gJycgICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBm
b3IgQ1NWCiwgc2tpcCA9IDAKLCBubGluZXM9SW5mCiwgZGVjLnNlcCA9ICcuJwosIHF1b3RhdGlv
bi5tYXJrID0gJyInCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9ICciIicgICMjIGNoYW5nZWQg
Zm9yIENTVgosIHN0cmlwLndoaXRlID0gVFJVRQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IFRS
VUUKLCB3aWR0aHM9TlVMTAosIHN0YXJ0PU5VTEwKLCBzdG9wPU5VTEwKLCBjb2xzPW1heChsZW5n
dGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKQosIGVvbD0nXG4nCiwgc3Rv
cmFnZS5tb2RlID0gTlVMTAosIGF0dHJpYnV0ZXMgPSBOVUxMCiwgbG9naWNhbHMgPSBOVUxMCiwg
ZmFjdG9ycyA9IE5VTEwKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSBGQUxTRQopIApyZWFkLnRhYmxl
IChmaWxlID0gZmlsZQosIGhlYWRlciA9IGhlYWRlcgosIHNlcCA9IHNlcAosIHJvdy5uYW1lcyA9
IHJvdy5uYW1lcwosIGNvbC5uYW1lcyA9IGNvbC5uYW1lcwosIGFzLmlzID0gYXMuaXMKLCBuYS5z
dHJpbmdzID0gbmEuc3RyaW5ncwosIHNraXAgPSBza2lwCiwgbmxpbmVzID0gbmxpbmVzCiwgZGVj
LnNlcCA9IGRlYy5zZXAKLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9
IHN0cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gc3RyaXAucXVvdGF0aW9uLm1h
cmtzCiwgd2lkdGhzID0gd2lkdGhzCiwgc3RhcnQgPSBzdGFydAosIHN0b3AgPSBzdG9wCiwgY29s
cyA9IGNvbHMKLCBlb2wgPSBlb2wKLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUKLCBhdHRy
aWJ1dGVzID0gYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0b3JzID0gZmFj
dG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9IHRlbXBsYXRlLmF0dHJpYnV0ZQopIAoKCiMjIHdy
YXBwZXIgZnVuY3Rpb24gZm9yIGNvbW1hIHNlcGVyYXRlZCB2YWx1ZXMKIyMgbm90ZSB0aGF0IGNz
diBpcyBOT1QgZnVsbHkgc3VwcG9ydGVkIHlldAojIyBzdHJpbmdzIG11c3Qgbm90IGNvbnRhaW4g
cXVvdGF0aW9uLm1hcmsgb3Igc2VwCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQpyZWFkLmZp
eCA8LSBmdW5jdGlvbiAoZmlsZQosIGhlYWRlciA9IEZBTFNFCiwgc2VwID0gJycKLCByb3cubmFt
ZXMKLCBjb2wubmFtZXMKLCBhcy5pcyA9IEZBTFNFCiwgbmEuc3RyaW5ncyA9ICcnICAgICAgICAg
ICAgICAgICMjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHNraXAgPSAwCiwgbmxpbmVzPUlu
ZgosIGRlYy5zZXAgPSAnLicKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIicKLCBzdHJpcC53aGl0ZSA9IFRSVUUKLCBzdHJpcC5xdW90YXRpb24ubWFy
a3MgPSBUUlVFCiwgd2lkdGhzPU5VTEwKLCBzdGFydD1OVUxMCiwgc3RvcD1OVUxMCiwgY29scz1t
YXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2w9J1xu
JwosIHN0b3JhZ2UubW9kZSA9IE5VTEwKLCBhdHRyaWJ1dGVzID0gTlVMTAosIGxvZ2ljYWxzID0g
TlVMTAosIGZhY3RvcnMgPSBOVUxMCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UKKSAKcmVh
ZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAgPSBzZXAKLCByb3cu
bmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBhcy5pcyA9IGFzLmlz
CiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5saW5lcyA9IG5saW5l
cwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgc3RyaXAu
d2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IHN0cmlwLnF1b3Rh
dGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQKLCBzdG9wID0gc3Rv
cAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0gc3RvcmFnZS5tb2Rl
CiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2ljYWxzCiwgZmFjdG9y
cyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5hdHRyaWJ1dGUKKSAK
CgpyZWFkLnRlbXBsYXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlCiwgZmlsZSA9IHRlbXBsYXRlJGZp
bGUKLCBoZWFkZXIgPSB0ZW1wbGF0ZSRoZWFkZXIKLCBzZXAgPSB0ZW1wbGF0ZSRzZXAKLCByb3cu
bmFtZXMgPSB0ZW1wbGF0ZSRyb3cubmFtZXMKLCBjb2wubmFtZXMgPSB0ZW1wbGF0ZSRjb2wubmFt
ZXMKLCBhcy5pcyA9IEZBTFNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMgbXVzdCBi
ZSBGQUxTRSEKLCBuYS5zdHJpbmdzID0gdGVtcGxhdGUkbmEuc3RyaW5ncwosIHNraXAgPSAwCiwg
bmxpbmVzID0gSW5mCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBxdW90YXRpb24ubWFy
ayA9IHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9IHRl
bXBsYXRlJGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9IHRlbXBsYXRlJHN0
cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gdGVtcGxhdGUkcXVvdGUKLCB3aWR0
aHMgPSB0ZW1wbGF0ZSR3aWR0aHMKLCBzdGFydCA9IE5VTEwKLCBzdG9wID0gTlVMTAosIGNvbHMg
PSBtYXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2wg
PSB0ZW1wbGF0ZSRlb2wKLCBzdG9yYWdlLm1vZGUgPSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKLCBh
dHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gdGVtcGxhdGUkbG9n
aWNhbHMKLCBmYWN0b3JzID0gdGVtcGxhdGUkZmFjdG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9
IEZBTFNFCikKcmVhZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAg
PSBzZXAKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBh
cy5pcyA9IGFzLmlzCiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5s
aW5lcyA9IG5saW5lcwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90
YXRpb24ubWFyawosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrCiwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9
IHN0cmlwLnF1b3RhdGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQK
LCBzdG9wID0gc3RvcAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0g
c3RvcmFnZS5tb2RlCiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2lj
YWxzCiwgZmFjdG9ycyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5h
dHRyaWJ1dGUKKQoKCgojIyB3cml0ZS50YWJsZSgpIGNvbXBsZXRlbHkgcmV3cml0dGVuCiMjIChH
TlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0ZS50YWJsZSA8LSAKZnVuY3Rpb24gKHgsIGZpbGUg
PSAnJwosIGFwcGVuZCA9IEZBTFNFICAgICAgICAgICAgICAgICAjIyBjaGFuZ2VkOiBhcHBlbmRp
bmcgc3VwcHJlc3NlcyBjb2wubmFtZXMgKGFuZCBjb3JuZXIubmFtZSkKLCBxdW90ZSA9IFRSVUUg
ICAgICAgICAgICAgICAgICAgIyMgY2hhbmdlZDogdmVjdG9yIG9mIGxvZ2ljYWxzIGFsc28gYWxs
b3dlZAosIHNlcCA9ICcgJwosIGVvbCA9ICdcbicKLCBuYSA9ICdOQScgICAgICAgICAgICAgICAg
ICAgICAgICAjIyBjaGFuZ2VkOiBkZWZhdWx0ICdOQScgaW5zdGVhZCBvZiBOQSAob2xkIGRvY3Ug
c2FpZCAndGhlIFNUUklORyB0byB1c2UgZm9yIG1pc3NpbmcgdmFsdWVzJykKLCByb3cubmFtZXMg
PSBUUlVFCiwgY29sLm5hbWVzID0gVFJVRSAgICAgICAgICAgICAgICMjIG5vdGU6IGNvbC5uYW1l
cyBtYXkgY2F1c2UgZXh0ZW5zaW9uIG9mIGNvbHVtbiB3aWR0aHMKLCBjb3JuZXIubmFtZSA9ICdy
b3duYW1lcycgICAgICAgICAgICAjIyBuZXc6IG9ubHkgdXNlZCBpZiByb3cubmFtZXMgYW5kIGNv
bC5uYW1lcywgc2V0IHRvICcnIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5Ciwgcm93Lm5hbWVz
LndpZHRoID0gdW5saXN0KHdpZHRoc1sxXSkgIyMgbmV3CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicg
ICAgICAgICAgICMjIG5ldwosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSAnIicgICAjIyBuZXc6
IHN1YnN0aXR1dGlvbiBvbmx5IGlmIGl0IGRpZmZlcnMgZnJvbSBxdW90YXRpb24ubWFyawosIGxv
Z2ljYWxzID0gYygnRkFMU0UnLCAnVFJVRScpICAjIyBuZXc6IGUuZy4gYygwLDEpIG9yIGMoJ25v
JywneWVzJyksIG51bWVyaWNzIGFyZSBjb2VyY2VkIHRvIGludGVnZXIKLCBmYWN0b3JzID0gYygn
bGV2ZWxzJywgJ2NvZGVzJykgIyMgbmV3OiBjaG9vc2UgZWl0aGVyICdsZXZlbHMnIG9yICdjb2Rl
cycgKGFzLm51bWVyaWMoKSwgbm90IGNvZGVzKCkpCiwgZGVjLnNlcCA9ICcuJyAgICAgICAgICAg
ICAgICAgICMjIG5ldwosIGRpZ2l0cyA9IE5VTEwgICAgICAgICAgICAgICAgICAjIyBuZXc6IGNh
biByZWR1Y2UgZGlnaXRzLCBzcGVjaWZpeSBhIHNpbmdsZSB2YWx1ZSwgYSB2ZWN0b3Igb3IgYSBs
aXN0Ciwgd2lkdGhzID0gTlVMTCAgICAgICAgICAgICAgICAgICMjIG5ldzogY2FuIGZvcmNlIGZ3
Ziwgc3BlY2lmeSBUUlVFLCBhIGNvbW1vbiB3aWR0aCwgYSB2ZWN0b3Igb3IgYSBsaXN0IChsaXN0
cyBjYW4gaGF2ZSBOVUxMcykKLCBwYWQubWV0aG9kPWMoImFiYnJldmlhdGUiLCAidmFyaWFibGUi
LCAiZXh0ZW5kIiwgInJjdXQiLCAibGN1dCIpICMgbmV3OiBoYW5kbGluZyBvZiBzdHJpbmdzIGxv
bmdlciB0aGFuIHdpZHRoCiwgbWluLmRpZ2l0cyA9IDggICAgICAgICAgICAgICAgICMjIG5ldzog
Ciwgd2Fybi5zZXBlcmF0b3IgPSBGQUxTRSAgICAgICAgICMjIG5ldzogY2hlY2tpbmcgZm9yIHNl
cGVyYXRvciBjb3N0cyAobmV2ZXIgY2hlY2tlZCBpZiBzZXA9Jycgb3Igc2VwPScgJykKLCB3YXJu
LnF1b3RhdGlvbi5tYXJrID0gRkFMU0UgICAgIyMgbmV3OiBjaGVja2luZyBmb3Igc2VwZXJhdG9y
IGNvc3RzCikgCnsKCiAgICAjZGVmYXVsdCBmb3IgZGlnaXRzCiAgICBvbGQuZGlnaXRzIDwtIC5P
cHRpb25zJGRpZ2l0cwogICAgb24uZXhpdChvcHRpb25zKGRpZ2l0cz1vbGQuZGlnaXRzKSkKICAg
IG9wdGlvbnMoZGlnaXRzPWNlaWxpbmcobG9nKC5NYWNoaW5lJGRvdWJsZS5iYXNlXi5NYWNoaW5l
JGRvdWJsZS5kaWdpdHMsIDEwKSkpCgogICAgIyBjYWxjdWxhdGluZyBkaWdpdHMgZ2l2ZW4gd2lk
dGhzCiAgICB3aWR0aDJkaWdpdHMuZG91YmxlIDwtIGZ1bmN0aW9uKHdpZHRoKQogICAgICBtYXgo
bWluLmRpZ2l0cywgbWluKC5PcHRpb25zJGRpZ2l0cywgLk9wdGlvbnMkZGlnaXRzIC0gKG5jaGFy
KGZvcm1hdCguTWFjaGluZSRkb3VibGUueG1pbikpIC0gd2lkdGggKSkpCiAgICB3aWR0aDJkaWdp
dHMuY29tcGxleCA8LSBmdW5jdGlvbih3aWR0aCkKICAgICAgbWF4KG1pbi5kaWdpdHMsIG1pbigu
T3B0aW9ucyRkaWdpdHMsIC5PcHRpb25zJGRpZ2l0cyAtIChuY2hhcihmb3JtYXQoLk1hY2hpbmUk
ZG91YmxlLnhtaW4pKSoyKzIgLSB3aWR0aCApKSkKCiAgICAjIGNyZWF0ZSB0ZW1wbGF0ZSBhbmQg
Y29sbGVjdCBzb21lIGluZm9zIGF0IHRoZSByaWdodCBtb21lbnQKICAgIHRlbXBsYXRlIDwtIGxp
c3QoKQoKICAgICNpbml0aWFsaXplIHdhcm5pbmcgaW5kaWNhdG9ycwogICAgc2VwZXJhdG9yLndh
cm5pbmcgPC0gRkFMU0UKICAgIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPC0gRkFMU0UKICAgIGV4
dGVuc2lvbi53YXJuaW5nIDwtIEZBTFNFCgogICAgI21ldGhvZAogICAgcGFkLm1ldGhvZCA8LSBt
YXRjaC5hcmcocGFkLm1ldGhvZCkKCiAgICAjbG9naWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxz
KT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAg
IyBmYWN0b3JzCiAgICBmYWN0b3JzIDwtIG1hdGNoLmFyZyhmYWN0b3JzKQogICAgIyBjb21wYXJl
IHNlcCBhbmQgZGVjLnNlcAogICAgaWYgKGRlYy5zZXA9PXNlcCkKICAgICAgc3RvcCgicGFyc2lu
ZyBydWxlIHZpb2xhdGlvbjogc2VwIG11c3Qgbm90IGVxdWFsIGRlYy5zZXAiKQoKICAgICMgZG9u
J3QgdW5kZXJzdGFuZCB3aHkgb2xkIHdyaXRlLnRhYmxlIGNvbnZlcnRzIHRvIGRhdGFmcmFtZSBh
bmQgZG9lc24ndCB1c2UgaXQsIAogICAgIyBob3dldmVyIGtlZXAgY29udmVydGluZyB0byBkYXRh
ZnJhbWUgdG8gaGF2ZSBhIHVuaXF1ZSBzdGFydGluZyBwb2ludAogICAgaWYgKCFpcy5kYXRhLmZy
YW1lKHgpKSB4IDwtIGRhdGEuZnJhbWUoeCkKICAgIGQgPC0gZGltbmFtZXMoeCkKICAgIHAgPC0g
bmNvbCh4KQogIAogICAgIyBnZXQgY29sdW1uIGluZm9zLCBjb2xtb2RlIG1heSBjaGFuZ2UgbGF0
ZXIKICAgIHRlbXBsYXRlJHN0b3JhZ2UubW9kZSA8LSBjb2xtb2RlIDwtIHVubmFtZSh1bmxpc3Qo
bGFwcGx5KHgsIHN0b3JhZ2UubW9kZSkpKQogICAgdGVtcGxhdGUkYXR0cmlidXRlcyA8LSBsYXBw
bHkoeCwgYXR0cmlidXRlcykKICAgIGlzLmEuZmFjdG9yIDwtIHVubGlzdChsYXBwbHkodGVtcGxh
dGUkYXR0cmlidXRlcywgRlVOPWZ1bmN0aW9uKHgpYW55KCFpcy5uYShtYXRjaCgnZmFjdG9yJywg
eCRjbGFzcykpKSApKQogICAgCiAgICAjIHByZXBhcmUgcXVvdGUgYXMgTE9HSUNBTCB2ZWN0b3IK
ICAgICMgQlVUIGhhdmUgTkFzIGluIGV4cGFuZGVkIHZlY3RvciBpbnN0ZWFkIG9mIEZBTFNFCiAg
ICAjIGFzIHNvbWUgY29sdW1ucyBzdGlsbCBtYXkgY2hhbmdlIHRvIGNoYXJhY3RlcgogICAgaWYg
KGlzLmxvZ2ljYWwocXVvdGUpKSB7CiAgICAgICAgaWYgKGxlbmd0aChxdW90ZSk9PTEpewogICAg
ICAgICAgaWYgKHF1b3RlKSAKICAgICAgICAgICAgcXVvdGUgPC0gaWZlbHNlKGNvbG1vZGU9PSJj
aGFyYWN0ZXIiLCBUUlVFLCBOQSkKICAgICAgICAgICMgZWxzZQogICAgICAgICAgICAjIHF1b3Rl
PT1GQUxTRQogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoKHF1b3RlKSE9cCkgCiAgICAgICAgICBz
dG9wKCJpbnZhbGlkIGxlbmd0aCBvZiBsb2dpY2FsIHF1b3RlIHZlY3RvciIpCiAgICB9IGVsc2Ug
aWYgKGlzLm51bWVyaWMocXVvdGUpKSB7CiAgICAgICAgaWYgKGFueShxdW90ZSA8IDEgfCBxdW90
ZSA+IHApKSAKICAgICAgICAgICAgc3RvcCgiaW52YWxpZCBudW1iZXJzIGluIHF1b3RlIikKICAg
IAlxdW90ZSA8LSAoMTpwKSAlaW4lIHF1b3RlCiAgICB9IGVsc2UgCiAgICAgICAgc3RvcCgiaW52
YWxpZCBxdW90ZSBzcGVjaWZpY2F0aW9uIikKCiAgICAjIHByZXBhcmUgY29sLm5hbWVzCiAgICBp
ZiAoaXMubG9naWNhbChjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gaWYgKGNvbC5u
YW1lcykgZFtbMl1dIGVsc2UgTlVMTAogICAgZWxzZSB7CiAgICAgICAgaWYgKGxlbmd0aChjb2wu
bmFtZXMpICE9IHApIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlkIGNvbC5uYW1lcyBzcGVjaWZp
Y2F0aW9uIikKICAgICAgICBjb2wubmFtZXMgPC0gYXMuY2hhcmFjdGVyKGNvbC5uYW1lcykKICAg
IH0KICAgIGlmIChhbnkoZHVwbGljYXRlZChjKGNvbC5uYW1lcywgY29ybmVyLm5hbWUpKSkpd2Fy
bmluZygiY29sLm5hbWVzIGFuZCBjb3JuZXIubmFtZSBhcmUgbm90IHVuaXF1ZSIpCiAgICAjIGZp
eCBjb2wubmFtZXMgYW5kIGNvcm5lci5uYW1lIGZvciB0ZW1wbGF0ZQogICAgdGVtcGxhdGUkY29s
Lm5hbWVzIDwtIGNvbC5uYW1lcwogICAgdGVtcGxhdGUkY29ybmVyLm5hbWUgPC0gY29ybmVyLm5h
bWUKICAgICMgaGFuZGxlIHF1b3Rpbmcgb2YgY29sLm5hbWVzIGFscmVhZHkgaGVyZSwgYXMgaXQg
aW5mbHVlbmNlcyB3aWR0aHMKICAgIGlmICghaXMubnVsbChjb2wubmFtZXMpKSB7CiAgICAgIGlm
IChhbnkocXVvdGUsIG5hLnJtPVRSVUUpKQogICAgICAgIGNvbC5uYW1lcyA8LSBwYXN0ZShxdW90
YXRpb24ubWFyaywgY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgfQoKICAg
ICMgcHJlcGFyZSByb3cubmFtZXMKICAgIGlmIChpcy5sb2dpY2FsKHJvdy5uYW1lcykpCiAgICAg
ICAgcm93Lm5hbWVzIDwtIGlmIChyb3cubmFtZXMpIGRbWzFdXSBlbHNlIE5VTEwKICAgIGVsc2Ug
ewogICAgICAgIGlmIChsZW5ndGgocm93Lm5hbWVzKSAhPSBucm93KHgpKSAKICAgICAgICAgIHN0
b3AoImludmFsaWQgcm93Lm5hbWVzIHNwZWNpZmljYXRpb24iKQogICAgICAgIGlmIChhbnkoZHVw
bGljYXRlZChyb3cubmFtZXMpKSkKICAgICAgICAgIHdhcm5pbmcoImR1cGxpY2F0ZWQgcm93Lm5h
bWVzIikKICAgICAgICByb3cubmFtZXMgPC0gYXMuY2hhcmFjdGVyKHJvdy5uYW1lcykKICAgIH0K
CiAgICAjIHByZXBhcmUgcGFyYW1ldGVycyB0byBmb3JtYXQgLyBwYWQgKGZvcm1hdEMgaXMgdG9v
IHNsb3cpCiAgICAjIHdpZHRocyBhbmQgZGlnaXRzIG1heSBjaGFuZ2UgbGF0ZXIKICAgIGZpeGVk
LndpZHRoIDwtICFpcy5udWxsKGRpZ2l0cykgfHwgIWlzLm51bGwod2lkdGhzKQogICAgaWYgKGZp
eGVkLndpZHRoKXsKCiAgICAgICAgaWYgKGlzLm51bGwod2lkdGhzKSkKICAgICAgICAgIHdpZHRo
cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICBlbHNlIGlmIChsZW5ndGgod2lkdGhzKT09
MSkKICAgICAgICAgIGlmIChpcy5sb2dpY2FsKHdpZHRocykpCiAgICAgICAgICAgIGlmICh3aWR0
aHMpewogICAgICAgICAgICAgIHdpZHRocyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICAg
ICAgICByb3cubmFtZXMud2lkdGggPC0gTlVMTCAgIyMgbWFrZSBzaHVyZSBpdCBpc24ndCBUUlVF
IGZyb20gd3JhcHBlcgogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICAgIHN0b3AoIndpZHRo
PUZBTFNFIG5vdCBhbGxvd2VkIikKICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHdpZHRocyA8
LSBhcy5saXN0KHJlcCh3aWR0aHMsIHApKQogICAgICAgIGVsc2UgaWYgKGxlbmd0aCh3aWR0aHMp
PT1wKSAKICAgICAgICAgIHdpZHRocyA8LSBhcy5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAg
ICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3Igd2lkdGhzIikKCiAgICAgICAgaWYgKGlz
Lm51bGwoZGlnaXRzKSkKICAgICAgICAgIGRpZ2l0cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAg
ICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09MSkgCiAgICAgICAgICBkaWdpdHMgPC0gYXMu
bGlzdChyZXAoZGlnaXRzLCBwKSkKICAgICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09cCkK
ICAgICAgICAgIGRpZ2l0cyA8LSBhcy5saXN0KGRpZ2l0cykKICAgICAgICBlbHNlCiAgICAgICAg
ICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3IgZGlnaXRzIikKICAgICAgIAogICAgfQoKCiAgICAj
IGNvbnZlcnQgdG8gY2hhcmFjdGVyIHJlc3BlY3RpbmcgbG9naWNhbHM9LCBmYWN0b3JzPSwgbmE9
LCBxdW90ZT0sIGRlYy5zZXA9IGFuZCBmaXhlZC53aWR0aAogICAgZm9yIChpIGluIDE6cCl7Cgog
ICAgICAgIGNvbHVtbiA8LSB4W1tpXV0KICAgICAgICBpc25hIDwtIGlzLm5hKGNvbHVtbikKCiAg
ICAgICAgIyBjb252ZXJ0IGxvZ2ljYWwgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5n
IG9uIGxvZ2ljYWxzPQogICAgICAgIGlmIChjb2xtb2RlW2ldPT0nbG9naWNhbCcpIHsKICAgICAg
ICAgIGNvbHVtbiA8LSBsb2dpY2Fsc1tjb2x1bW4rMV0KICAgICAgICAgIGNvbG1vZGVbaV0gPC0g
c3RvcmFnZS5tb2RlKGxvZ2ljYWxzKQogICAgICAgIH0KCiAgICAgICAgIyBjb252ZXJ0IGZhY3Rv
cnMgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5nIG9uIGZhY3RvcnM9CiAgICAgICAg
aWYgKGlzLmZhY3Rvcihjb2x1bW4pKXsKICAgICAgICAgIGlmIChmYWN0b3JzPT0nbGV2ZWxzJykg
ewogICAgICAgICAgICBjb2x1bW4gPC0gYXMuY2hhcmFjdGVyKGNvbHVtbikKICAgICAgICAgICAg
Y29sbW9kZVtpXSA8LSAnY2hhcmFjdGVyJwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAg
ICAgICAgICAgIGNvbHVtbiA8LSBhcy5pbnRlZ2VyKGNvbHVtbikKICAgICAgICAgICAgY29sbW9k
ZVtpXSA8LSAnaW50ZWdlcicKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgbm93IHRy
ZWF0IGNvbXBsZXgsIGRvdWJsZSwgaW50ZWdlciBvciBjaGFyYWN0ZXIKICAgICAgICBpZiAoY29s
bW9kZVtpXT09J2NvbXBsZXgnKXsKICAgICAgICAgIGlmIChmaXhlZC53aWR0aCl7CiAgICAgICAg
ICAgIGlmICghaXMubnVsbCh3aWR0aHNbW2ldXSkgJiYgaXMubnVsbChkaWdpdHNbW2ldXSkpCiAg
ICAgICAgICAgICAgZGlnaXRzW1tpXV0gPC0gd2lkdGgyZGlnaXRzLmNvbXBsZXgod2lkdGhzW1tp
XV0pCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1uLCBkaWdpdHM9ZGlnaXRzW1tp
XV0pCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgY29sdW1uIDwtIGFzLmNoYXJhY3Rlcihj
b2x1bW4pCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGVjLnNlcCE9Jy4nKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZ3N1YignWy5dJywgZGVjLnNlcCwgY29sdW1uLCBpZ25vcmUuY2FzZT1GQUxT
RSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdkb3Vi
bGUnKXsKCiAgICAgICAgICBpZiAoZml4ZWQud2lkdGgpeyAKICAgICAgICAgICAgaWYgKCFpcy5u
dWxsKHdpZHRoc1tbaV1dKSAmJiBpcy5udWxsKGRpZ2l0c1tbaV1dKSkKICAgICAgICAgICAgICBk
aWdpdHNbW2ldXSA8LSB3aWR0aDJkaWdpdHMuZG91YmxlKHdpZHRoc1tbaV1dKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZm9ybWF0KGNvbHVtbiwgZGlnaXRzPWRpZ2l0c1tbaV1dKQogICAgICAgICAg
fWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29sdW1uKQogICAgICAg
ICAgaWYgKGRlYy5zZXAhPScuJykgCiAgICAgICAgICAgIGNvbHVtbiA8LSBnc3ViKCdbLl0nLCBk
ZWMuc2VwLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkKICAgICAg
ICAgIAogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdpbnRlZ2VyJyl7CgogICAgICAg
ICAgaWYgKGZpeGVkLndpZHRoKXsgCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1u
KQogICAgICAgICAgfWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29s
dW1uKQogICAgICAgICAgCiAgICAgICAgfWVsc2V7ICMgY29sbW9kZVtpXT09J2NoYXJhY3RlcicK
CiAgICAgICAgICAjIGNoZWNrIGZvciBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzCiAgICAgICAgICBp
ZiAod2Fybi5zZXBlcmF0b3IgCiAgICAgICAgICAgICAgJiYgIShzZXAgJWluJSBjKCIiLCAiICIp
KSAKICAgICAgICAgICAgICAmJiBhbnkoZ3JlcChzZXAsIGNvbHVtbiwgaWdub3JlLmNhc2U9RkFM
U0UsIGV4dGVuZGVkPUZBTFNFLCB2YWx1ZT1GQUxTRSkpCiAgICAgICAgICAgICApewogICAgICAg
ICAgICAgICB3YXJuaW5nKHBhc3RlKCJzZXBlcmF0b3IgaW4gY29sdW1uIDwiLCBkW1syXV1baV0s
ICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgc2VwZXJhdG9yLndhcm5pbmcgPC0gVFJVRQog
ICAgICAgICAgICAgIH0KICAgICAgICAgIGlmICh3YXJuLnF1b3RhdGlvbi5tYXJrIAogICAgICAg
ICAgICAgICYmIGFueShncmVwKHF1b3RhdGlvbi5tYXJrLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZB
TFNFLCBleHRlbmRlZD1GQUxTRSwgdmFsdWU9RkFMU0UpKQogICAgICAgICAgICAgKXsKICAgICAg
ICAgICAgICAgd2FybmluZyhwYXN0ZSgicXVvdGF0aW9uIG1hcmsgaW4gY29sdW1uIDwiLCBkW1sy
XV1baV0sICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA8LSBUUlVFCiAgICAgICAgICAgICAgfQoKICAgICAgICAgIGlmIChxdW90YXRpb24ubWFyayAh
PSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrKQogICAgICAgICAgICBjb2x1bW4gPC0gZ3N1YihxdW90
YXRpb24ubWFyaywgZXNjYXBlZC5xdW90YXRpb24ubWFyaywgY29sdW1uLCBpZ25vcmUuY2FzZT1G
QUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgICAgaWYgKCBhbnkocXVvdGUsIG5hLnJtPVRS
VUUpICYmIGlzLm5hKHF1b3RlW2ldKSApCiAgICAgICAgICAgICAgcXVvdGVbaV0gPC0gVFJVRQog
ICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICAjIGZpcnN0IHF1b3RlCiAgICAgICAgaWYgKCFp
cy5uYShxdW90ZVtpXSkgJiYgcXVvdGVbaV0pIAogICAgICAgICAgY29sdW1uIDwtIHBhc3RlKHF1
b3RhdGlvbi5tYXJrLCBjb2x1bW4sIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCgogICAgICAgICMg
dGhlbiBkZXRlcm1pbmUgYWN0dWFsIHdpZHRoCiAgICAgICAgaWYgKGZpeGVkLndpZHRoKQogICAg
ICAgICAgaWYgKGNvbG1vZGVbaV09PSdjaGFyYWN0ZXInKQoJICAgIGFjdHVhbC53aWR0aCA8LSBt
YXgobmNoYXIoY29sdW1uKSkKCSAgZWxzZQoJICAgIGFjdHVhbC53aWR0aCA8LSAobmNoYXIoY29s
dW1uWzFdKSkKCSAgICAKICAgICAgICAjIHRoZW4gYWRkIG5hLnN0cmluZwogICAgICAgICMgWzFd
OiBhbGxvdyBuYSB0byBjYXJyeSBuYS5zdHJpbmdzIGludG8gdGVtcGxhdGUsIGJ1dCB1c2Ugb25s
eSBmaXJzdCBvbmUKICAgICAgICBpZiAoIWlzLm5hKHF1b3RlW2ldKSAmJiBxdW90ZVtpXSl7CiAg
ICAgICAgICBuYS53aWR0aCA8LSBuY2hhcihuYVsxXSkrMgogICAgICAgICAgaWYgKGZpeGVkLndp
ZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAg
ICAgICAgICAgIyBwYWQgYWxyZWFkeSBoZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBw
YWQocGFzdGUocXVvdGF0aW9uLm1hcmssIG5hWzFdLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg9YWN0dWFsLndpZHRoKQogICAg
ICAgICAgZWxzZQogICAgICAgICAgICAjIG5lZWQgbGF0ZXIgcGFkZGluZyBhbnlob3cKICAgICAg
ICAgICAgY29sdW1uW2lzbmFdIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBuYVsxXSwgcXVvdGF0
aW9uLm1hcmssIHNlcD0nJykKICAgICAgICB9ZWxzZXsKICAgICAgICAgIG5hLndpZHRoIDwtIG5j
aGFyKG5hWzFdKQogICAgICAgICAgaWYgKGZpeGVkLndpZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0
ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAgICAgICAgICAgIyBwYWQgYWxyZWFkeSBo
ZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBwYWQobmFbMV0sIHdpZHRoPWFjdHVhbC53
aWR0aCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgIyBuZWVkIGxhdGVyIHBhZGRpbmcgYW55
aG93CiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBuYVsxXQogICAgICAgIH0KCiAgICAgICAg
IyB0aGVuIGRldGVybWluZSBmaW5hbCB3aWR0aCAKICAgICAgICBpZiAoZml4ZWQud2lkdGgpewoK
ICAgICAgICAgICMgKG5jaGFyKGNvbC5uYW1lc1tpXSkgbWF5IGJlIG51bWVyaWMoMCksIHdpZHRo
c1tbaV1dIG1heSBOVUxMKQogICAgICAgICAgbWF4LndpZHRoIDwtIG1heChhY3R1YWwud2lkdGgs
IG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ldXSkgCiAgICAgICAgICBt
aW4ud2lkdGggPC0gbWF4KG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ld
XSkKCiAgICAgICAgICBpZiAoY29sbW9kZVtpXSA9PSAnY2hhcmFjdGVyJyl7CiAgICAgICAgICAg
ICMganVzdCBwYWQ/CiAgICAgICAgICAgIGlmICggaXMubnVsbCh3aWR0aHNbW2ldXSkgfHwgbWF4
LndpZHRoPT13aWR0aHNbW2ldXSB8fCBtaW4ud2lkdGg+d2lkdGhzW1tpXV0gCiAgICAgICAgICAg
ICAgICAgfHwgcGFkLm1ldGhvZCAlaW4lIGMoInZhcmlhYmxlIiwgImV4dGVuZCIpICkKICAgICAg
ICAgICAgICBjb2x1bW4gPC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAg
ICBlbHNlIHsKICAgICAgICAgICAgICAjIHRyeSB0byByZWR1Y2UgdG8gd2lkdGhbW2ldXSAoPT1t
aW4ud2lkdGgpCiAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChjb2x1bW4sIHdpZHRoPW1pbi53
aWR0aCwgbWV0aG9kPXBhZC5tZXRob2QpCiAgICAgICAgICAgICAgIyB0ZXN0IGlmIHN1Y2Nlc3Nm
dWxsCiAgICAgICAgICAgICAgaWYgKHBhZC5tZXRob2Q9PSdhYmJyZXZpYXRlJyl7CiAgICAgICAg
ICAgICAgICBtYXgud2lkdGggPC0gbWF4KG5jaGFyKGNvbHVtbikpCiAgICAgICAgICAgICAgICBp
ZiAobWF4LndpZHRoPm1pbi53aWR0aCkKICAgICAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChj
b2x1bW4sIHdpZHRoPW1heC53aWR0aCkKICAgICAgICAgICAgICB9ZWxzZSAjIHBhZC5tZXRob2Qg
JWluJSBjKCJyY3V0IiwgImxjdXQiKQogICAgICAgICAgICAgICAgbWF4LndpZHRoIDwtIG1pbi53
aWR0aAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgfWVsc2V7ICMgY29sbW9k
ZVtpXSAlaW4lIGMoY29tcGxleCwgZG91YmxlLCBpbnRlZ2VyKQogICAgICAgICAgICAjIChhY3R1
YWwud2lkdGggYW5kIG5hLndpZHRoIDwgYWN0dWFsLndpZHRoIGFscmVhZHkgcGFkZGVkKQogICAg
ICAgICAgICBpZiAobWF4LndpZHRoPmFjdHVhbC53aWR0aCkKICAgICAgICAgICAgICBjb2x1bW4g
PC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAgfQoKICAgICAgICAgIGlm
ICghaXMubnVsbChjb2wubmFtZXMpKQogICAgICAgICAgICBjb2wubmFtZXNbaV0gPC0gcGFkKGNv
bC5uYW1lc1tpXSwgd2lkdGg9bWF4LndpZHRoKQoKICAgICAgICAgICMgd2FybmluZ3MgYW5kIG1h
aW50YWluaW5nIHdpZHRoW1tpXV0KICAgICAgICAgIGlmIChpcy5udWxsKHdpZHRoc1tbaV1dKSkK
ICAgICAgICAgICAgd2lkdGhzW1tpXV0gPC0gbWF4LndpZHRoCiAgICAgICAgICBlbHNlIGlmICht
YXgud2lkdGggPiB3aWR0aHNbW2ldXSl7CiAgICAgICAgICAgIHdpZHRoc1tbaV1dIDwtIG1heC53
aWR0aAogICAgICAgICAgICBleHRlbnNpb24ud2FybmluZyA8LSBUUlVFCiAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImV4dGVuZGluZyB3aWR0aCBvZiBjb2x1bW4gPCIsIGRbWzJdXVtpXSwgIj4g
dG8gIiwgbWF4LndpZHRoLCAiIHRvIGF2b2lkIHRydW5jYXRpbmciLCBzZXA9IiIpKQogICAgICAg
ICAgfQoKICAgICAgICB9CgogICAgICAgIHhbW2ldXSA8LSBjb2x1bW4KICAgIH0KCiAgICAjIGRl
Y2lkZSBhYm91dCBjb3JuZXIubmFtZQogICAgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCBpcy5u
dWxsKGNvbC5uYW1lcykpIAogICAgICBjb3JuZXIubmFtZSA8LSBOVUxMCiAgICAjIGhhbmRsZSBx
dW90aW5nIGFuZCB3aWR0aCBvZiByb3cubmFtZXMgYW5kIGNvcm5lci5uYW1lLCBhbmQgYmluZCB0
byB4CiAgICBpZiAoIWlzLm51bGwocm93Lm5hbWVzKSl7CiAgICAgIGlmIChhbnkocXVvdGUsIG5h
LnJtPVRSVUUpKSB7CiAgICAgICAgcm93Lm5hbWVzIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBy
b3cubmFtZXMsIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCiAgICAgICAgaWYgKCFpcy5udWxsKGNv
cm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0gcGFzdGUocXVvdGF0aW9uLm1hcmssIGNvcm5lci5u
YW1lLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgICB9CiAgICAgIGlmIChmaXhlZC53aWR0
aCB8fCAhaXMubnVsbChyb3cubmFtZXMud2lkdGgpKSB7CiAgICAgICAgbWF4LndpZHRoIDwtIG1h
eChuY2hhcihjKGNvcm5lci5uYW1lLCByb3cubmFtZXMpKSkKICAgICAgICBpZiAoaXMubnVsbChy
b3cubmFtZXMud2lkdGgpKQogICAgICAgICAgcm93Lm5hbWVzLndpZHRoIDwtIG1heC53aWR0aAog
ICAgICAgIGVsc2UgaWYgKHJvdy5uYW1lcy53aWR0aDxtYXgud2lkdGgpewogICAgICAgICAgd2Fy
bmluZyhwYXN0ZSgiZXh0ZW5kaW5nIHdpZHRoIG9mIHJvdy5uYW1lcyB0byAiLCBtYXgud2lkdGgs
ICIgdG8gYXZvaWQgdHJ1bmNhdGluZyIsIHNlcD0iIikpCiAgICAgICAgICBleHRlbnNpb24ud2Fy
bmluZyA8LSBUUlVFCiAgICAgICAgICByb3cubmFtZXMud2lkdGggPC0gbWF4LndpZHRoCiAgICAg
ICAgfQogICAgICAgIHJvdy5uYW1lcyA8LSBwYWQocm93Lm5hbWVzLCB3aWR0aD1yb3cubmFtZXMu
d2lkdGgpCiAgICAgICAgaWYgKCFpcy5udWxsKGNvcm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0g
cGFkKGNvcm5lci5uYW1lLCB3aWR0aD1yb3cubmFtZXMud2lkdGgpCiAgICAgIH0KICAgICAgeCA8
LSBjYmluZChyb3cubmFtZXMsIHgpCiAgICB9CgogICAgIyBvdXQgY29sLm5hbWVzCiAgICBpZiAo
IWlzLm51bGwoY29sLm5hbWVzKSl7CiAgICAgIGlmIChhcHBlbmQpIAogICAgICAgIHdhcm5pbmco
ImRyb3BwaW5nIGNvbHVtbiBuYW1lcyBiZWNhdXNlIG9mIGFwcGVuZD1UUlVFIikKICAgICAgZWxz
ZXsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBjKGNvcm5lci5uYW1lLCBjb2wubmFtZXMpCiAgICAg
ICAgICBjYXQoY29sLm5hbWVzLCBmaWxlPWZpbGUsIHNlcCA9IHNlcCwgYXBwZW5kID0gYXBwZW5k
KQogICAgICAgICAgYXBwZW5kIDwtIFRSVUUKICAgICAgICAgIGNhdChlb2wsIGZpbGU9ZmlsZSwg
YXBwZW5kID0gYXBwZW5kKQogICAgICB9CiAgICB9CiAgICAjIG91dCBkYXRhCiAgICBjYXQodCh4
KSwgZmlsZT1maWxlLCBzZXAgPSBjKHJlcChzZXAsIG5jb2woeCkgLSAxKSwgZW9sKSwgYXBwZW5k
ID0gYXBwZW5kKQoKICAgICMgY3JlYXRlIHRlbXBsYXRlCiAgICBpZiAoaXMubnVsbChjb2wubmFt
ZXMpKXsKICAgICAgY29sLm5hbWVzIDwtIGRbWzJdXQogICAgICBoZWFkZXIgPC0gRkFMU0UKICAg
IH1lbHNlewogICAgICBjb2wubmFtZXMgPC0gdGVtcGxhdGUkY29sLm5hbWVzCiAgICAgIGhlYWRl
ciA8LSBUUlVFCiAgICB9CgogICAgaWYgKGFueShxdW90ZSwgbmEucm09VFJVRSkpewogICAgICBx
dW90ZVtpcy5uYShxdW90ZSldIDwtIEZBTFNFCiAgICB9ZWxzZQogICAgICBxdW90ZSA8LSByZXAo
RkFMU0UsIHApCgogICAgaWYgKCFpcy5udWxsKHJvdy5uYW1lcykpewogICAgICByb3cubmFtZXMu
bG9jICA8LSAxCiAgICAgIGNvbC5uYW1lcyA8LSBjKHRlbXBsYXRlJGNvcm5lci5uYW1lLCBjb2wu
bmFtZXMpCiAgICAgIHF1b3RlIDwtIGMoYW55KHF1b3RlLCBuYS5ybT1UUlVFKSwgcXVvdGUpCiAg
ICAgIGNvbG1vZGUgPC0gYygnY2hhcmFjdGVyJywgdGVtcGxhdGUkc3RvcmFnZS5tb2RlKQogICAg
ICB3aWR0aHMgPC0gYyhyb3cubmFtZXMud2lkdGgsIHdpZHRocykKICAgICAgaWYgKCFpcy5udWxs
KGRpZ2l0cykpIGRpZ2l0cyA8LSBjKGxpc3QoTlVMTCksIGRpZ2l0cykKICAgICAgdGVtcGxhdGUk
YXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgdGVtcGxhdGUkYXR0cmli
dXRlcykKICAgICAgbmFtZXModGVtcGxhdGUkYXR0cmlidXRlcylbMV0gPC0gdGVtcGxhdGUkY29y
bmVyLm5hbWUKICAgIH1lbHNlewogICAgICByb3cubmFtZXMubG9jIDwtIDAKICAgICAgY29sbW9k
ZSA8LSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKICAgIH0KCiAgICBxdW90YXRpb24ubWFyay53YXJu
aW5nIDwtIGlmZWxzZSh3YXJuLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyay53YXJuaW5n
LCBOQSkKICAgIHNlcGVyYXRvci53YXJuaW5nIDwtIGlmZWxzZSh3YXJuLnNlcGVyYXRvciwgc2Vw
ZXJhdG9yLndhcm5pbmcsIE5BKQoKICAgIHRlbXBsYXRlIDwtIHN0cnVjdHVyZSgKICAgICAgbGlz
dCgKICAgICAgLCBmaWxlID0gZmlsZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIGVvbCA9IGVvbCAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiAgICAgICwg
c2VwID0gc2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcCAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIG5hLnN0cmluZ3Mg
PSBuYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBidXQgYWxs
b3cgbW9yZSB0aGFuIG9uZSAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBxdW90YXRpb24ubWFy
ayA9IHF1b3RhdGlvbi5tYXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVy
KSwgZS5nLiA8Ij4gaW4gQ1NWIAogICAgICAsIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2Nh
cGVkLnF1b3RhdGlvbi5tYXJrICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiIj4gaW4g
Q1NWCiAgICAgICwgbG9naWNhbHMgPSBsb2dpY2FscyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIHR3byB2YWx1ZXMgcmVwcmVzZW50aW5nIEZBTFNFIGFuZCBUUlVFIChu
dW1lcmljYWwgb3IgY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMg
aW4gZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAsIHJvdy5u
YW1lcy5sb2MgPSByb3cubmFtZXMubG9jICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBj
b2xubyBvZiByb3duYW1lcywgMCA9IG5vIHJvdy5uYW1lcyBpbiBmaWxlIChpbnRlZ2VyKQogICAg
ICAsIGhlYWRlciA9IGhlYWRlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCB3aGV0aGVyIGZpcnN0IHJvdyBpcyBjb2wubmFtZXMgKGxvZ2ljYWwpCiAgICAgICwg
c3RyaXAud2hpdGUgPSBUUlVFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUKICAgICAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcgY29ybmVyLm5hbWUgKGNoYXJhY3RlciB2ZWN0b3Ip
CiAgICAgICwgcXVvdGUgPSBxdW90ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgd2hldGhlciBjb2x1bW4gaXMgcXVvdGVkIChsb2dpY2FsIHZlY3RvcikK
ICAgICAgLCBzdG9yYWdlLm1vZGUgPSBjb2xtb2RlICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCB3aWR0aHMgPSB3aWR0aHMg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcg
cm93Lm5hbWVzLndpZHRoIChsaXN0IG9yIE5VTEwpCiAgICAgICwgZGlnaXRzID0gZGlnaXRzICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgKGxpc3Qgb3IgTlVM
TCkKICAgICAgLCBhdHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcyAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCkKICAgICAgLCBleHRlbnNpb24ud2FybmluZyA9IGV4dGVu
c2lvbi53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9GQUxTRSBpbmRpY2F0ZXMg
d2V0aGVyIG91dCBzcGVjcyBkaWZmZXIgZnJvbSBpbiBzcGVjcyAKICAgICAgLCBzZXBlcmF0b3Iu
d2FybmluZyA9IHNlcGVyYXRvci53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9G
QUxTRS9OQQogICAgICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53
YXJuaW5nICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICkKICAgICwgY2xhc3M9InRl
bXBsYXRlIgogICAgKQoKICAgIHJldHVybihpbnZpc2libGUodGVtcGxhdGUpKQp9CgoKCgojIyB3
cmFwcGVyIGZ1bmN0aW9uIGZvciBmaXhlZCBmb3JtYXQKIyMgKEdOVSkgQ29weXJpZ2h0IEpPQSAx
OTk5Cgp3cml0ZS5maXggPC0gZnVuY3Rpb24gKHgsIGZpbGUgPSAnJwosIGFwcGVuZCA9IEZBTFNF
CiwgcXVvdGUgPSBGQUxTRSAgICAgICAgICAgIyBjaGFuZ2VkIGZvciBmaXhlZCBmb3JtYXQKLCBz
ZXAgPSAnJyAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIGVvbCA9
ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1h
dAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFtZXMgPSBGQUxTRSAgICAgICAjIGNoYW5nZWQg
Zm9yIGZpeGVkIGZvcm1hdAosIGNvcm5lci5uYW1lID0gJ3Jvd25hbWVzJwosIHJvdy5uYW1lcy53
aWR0aCA9IHVubGlzdCh3aWR0aHNbMV0pCiwgcXVvdGF0aW9uLm1hcmsgPSAnIicKLCBlc2NhcGVk
LnF1b3RhdGlvbi5tYXJrID0gJyInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBm
YWN0b3JzID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0g
TlVMTAosIHdpZHRocyA9IFRSVUUgICAgICAgICAgICMgY2hhbmdlZCBmb3IgZml4ZWQgZm9ybWF0
CiwgcGFkLm1ldGhvZCA9ICJhYmJyZXZpYXRlIgosIG1pbi5kaWdpdHMgPSA4Ciwgd2Fybi5zZXBl
cmF0b3IgPSBGQUxTRQosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSBGQUxTRQopCndyaXRlLnRhYmxl
KHg9eCwgZmlsZT1maWxlCiwgYXBwZW5kID0gYXBwZW5kCiwgcXVvdGUgPSBxdW90ZQosIHNlcCA9
IHNlcAosIGVvbCA9IGVvbAosIG5hID0gbmEKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wu
bmFtZXMgPSBjb2wubmFtZXMKLCBjb3JuZXIubmFtZSA9IGNvcm5lci5uYW1lCiwgcm93Lm5hbWVz
LndpZHRoID0gcm93Lm5hbWVzLndpZHRoCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFy
awosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgbG9n
aWNhbHMgPSBsb2dpY2FscwosIGZhY3RvcnMgPSBmYWN0b3JzCiwgZGVjLnNlcCA9IGRlYy5zZXAK
LCBkaWdpdHMgPSBkaWdpdHMKLCB3aWR0aHMgPSB3aWR0aHMKLCBwYWQubWV0aG9kID0gcGFkLm1l
dGhvZAosIG1pbi5kaWdpdHMgPSBtaW4uZGlnaXRzCiwgd2Fybi5zZXBlcmF0b3IgPSB3YXJuLnNl
cGVyYXRvcgosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSB3YXJuLnF1b3RhdGlvbi5tYXJrCikKCgoj
IyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBzZXBlcmF0ZWQgdmFsdWVzCiMjIG5vdGUgdGhhdCBjc3Yg
aW1wb3J0IGlzIE5PVCBmdWxseSBzdXBwb3J0ZWQgeWV0CiMjIHNlcCBpcyBub3QgYWxsb3dlZCBp
biB0aGUgZGF0YQojIyB3YXJuLnNlcGVyYXRvciA9IFRSVUUgY2hlY2tzIGZvciBzZXAKIyMgKEdO
VSkgQ29weXJpZ2h0IEpPQSAxOTk5CndyaXRlLnN2cyA8LSBmdW5jdGlvbiAoeCwgZmlsZSA9ICcn
CiwgYXBwZW5kID0gRkFMU0UKLCBxdW90ZSA9IFRSVUUKLCBzZXAgPSAnOycgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIFNWUwosIGVvbCA9ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFt
ZXMgPSBUUlVFCiwgY29ybmVyLm5hbWUgPSAncm93bmFtZXMnCiwgcm93Lm5hbWVzLndpZHRoID0g
dW5saXN0KHdpZHRoc1sxXSkKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIiInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBmYWN0b3Jz
ID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0gTlVMTAos
IHdpZHRocyA9IE5VTEwKLCBwYWQubWV0aG9kID0gImFiYnJldmlhdGUiCiwgbWluLmRpZ2l0cyA9
IDgKLCB3YXJuLnNlcGVyYXRvciA9IFRSVUUgIyBjaGFuZ2VkIGZvciBTVlMKLCB3YXJuLnF1b3Rh
dGlvbi5tYXJrID0gRkFMU0UKKSAKd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAosIGFwcGVu
ZCA9IGFwcGVuZAosIHF1b3RlID0gcXVvdGUKLCBzZXAgPSBzZXAKLCBlb2wgPSBlb2wKLCBuYSA9
IG5hCiwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiwgY29sLm5hbWVzID0gY29sLm5hbWVzCiwgY29y
bmVyLm5hbWUgPSBjb3JuZXIubmFtZQosIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5uYW1lcy53aWR0
aAosIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsKLCBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrID0gZXNjYXBlZC5xdW90YXRpb24ubWFyawosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0
b3JzID0gZmFjdG9ycwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgZGlnaXRzID0gZGlnaXRzCiwgd2lk
dGhzID0gd2lkdGhzCiwgcGFkLm1ldGhvZCA9IHBhZC5tZXRob2QKLCBtaW4uZGlnaXRzID0gbWlu
LmRpZ2l0cwosIHdhcm4uc2VwZXJhdG9yID0gd2Fybi5zZXBlcmF0b3IKLCB3YXJuLnF1b3RhdGlv
bi5tYXJrID0gd2Fybi5xdW90YXRpb24ubWFyawopCgoKCiMjIHdyYXBwZXIgZnVuY3Rpb24gZm9y
IHNwZWNpZmljYXRpb24gdmlhIHRlbXBsYXRlCiMjIGl0IGlzc3VlcyBhIHdhcm5pbmcgaWYgdGVt
cGxhdGUgc3BlY3MgYXJlIGV4dGVuZGVkCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0
ZS50ZW1wbGF0ZSA8LSBmdW5jdGlvbiAodGVtcGxhdGUsIHgKLCBmaWxlID0gdGVtcGxhdGUkZmls
ZQosIGFwcGVuZCA9IEZBTFNFCiwgZXhjbHVkZS5jb21wYXJlID0gYygnZXh0ZW5zaW9uLndhcm5p
bmcnLCAnZmlsZScsICdkaWdpdHMnKSAgIyMgYWxsIG90aGVyIHRlbXBsYXRlJGVsZW1lbnRzIGFy
ZSBleHBlY3RlZCBlcXVhbCBmb3IgaW5wdXQgYW5kIG91dHB1dCB0ZW1wbGF0ZQosIHF1b3RlID0g
aWYgKHJsKSB0ZW1wbGF0ZSRxdW90ZVstcmxdIGVsc2UgdGVtcGxhdGUkcXVvdGUKLCBzZXAgPSB0
ZW1wbGF0ZSRzZXAKLCBlb2wgPSB0ZW1wbGF0ZSRlb2wKLCBuYSA9IHRlbXBsYXRlJG5hCiwgcm93
Lm5hbWVzID0gYXMubG9naWNhbChybCkKLCBjb2wubmFtZXMgPSBpZiAodGVtcGxhdGUkaGVhZGVy
KXsgaWYgKHJsKSB0ZW1wbGF0ZSRjb2wubmFtZXNbLXJsXSBlbHNlIHRlbXBsYXRlJGNvbC5uYW1l
cyB9IGVsc2UgRkFMU0UKLCBjb3JuZXIubmFtZSA9IGlmIChybCkgdGVtcGxhdGUkY29sLm5hbWVz
W3JsXSBlbHNlICdyb3duYW1lJwosIHJvdy5uYW1lcy53aWR0aCA9IGlmIChybCkgdGVtcGxhdGUk
d2lkdGhzW1tybF1dCiwgcXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRlc2NhcGVkLnF1b3RhdGlvbi5tYXJr
CiwgbG9naWNhbHMgPSB0ZW1wbGF0ZSRsb2dpY2FscwosIGZhY3RvcnMgPSB0ZW1wbGF0ZSRmYWN0
b3JzCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBkaWdpdHMgPSBpZiAocmwgJiYgIWlz
Lm51bGwodGVtcGxhdGUkZGlnaXRzKSkgdGVtcGxhdGUkZGlnaXRzWy1ybF0gZWxzZSB0ZW1wbGF0
ZSRkaWdpdHMKLCB3aWR0aHMgPSBpZiAocmwgJiYgIWlzLm51bGwodGVtcGxhdGUkd2lkdGhzKSkg
dGVtcGxhdGUkd2lkdGhzWy1ybF0gZWxzZSB0ZW1wbGF0ZSR3aWR0aHMKLCBwYWQubWV0aG9kID0g
J2FiYnJldmlhdGUnCiwgbWluLmRpZ2l0cyA9IDgKLCB3YXJuLnNlcGVyYXRvciA9ICFpcy5uYSh0
ZW1wbGF0ZSRzZXBlcmF0b3Iud2FybmluZykKLCB3YXJuLnF1b3RhdGlvbi5tYXJrID0gIWlzLm5h
KHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrLndhcm5pbmcpCikKewogIAogICMgZmlyc3QgdGhpbmcg
dG8gZG8gYmVjYXVzZSB1c2VkIGluIHBhcmFtIGRlZnMKICBybCA8LSB0ZW1wbGF0ZSRyb3cubmFt
ZXMubG9jCiAgaWYgKHJsID4gMSkgc3RvcCgid3JpdGUudGFibGUgY3VycmVudGx5IGRvZXMgbm90
IHN1cHBvcnQgd3JpdGluZyByb3cubmFtZXMgb3RoZXIgdGhhbiBmaXJzdCBjb2x1bW4iKQoKICB0
ZW1wbGF0ZTIgPC0gd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAogICwgYXBwZW5kID0gYXBw
ZW5kCiAgLCBxdW90ZSA9IHF1b3RlCiAgLCBzZXAgPSBzZXAKICAsIGVvbCA9IGVvbAogICwgbmEg
PSBuYQogICwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMK
ICAsIGNvcm5lci5uYW1lID0gY29ybmVyLm5hbWUKICAsIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5u
YW1lcy53aWR0aAogICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKICAsIGxvZ2ljYWxzID0g
bG9naWNhbHMKICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgLCBkZWMuc2VwID0gZGVjLnNlcAogICwg
ZGlnaXRzID0gZGlnaXRzCiAgLCB3aWR0aHMgPSB3aWR0aHMKICAsIHBhZC5tZXRob2QgPSBwYWQu
bWV0aG9kCiAgLCBtaW4uZGlnaXRzID0gbWluLmRpZ2l0cwogICwgd2Fybi5zZXBlcmF0b3IgPSB3
YXJuLnNlcGVyYXRvcgogICwgd2Fybi5xdW90YXRpb24ubWFyayA9IHdhcm4ucXVvdGF0aW9uLm1h
cmsKICApCiAgaWYgKCBsZW5ndGgoZXhjbHVkZS5jb21wYXJlKSA8IDEgKQogICAgZXhjbHVkZS5j
b21wYXJlIDwtICdOb3RJblRlbXBsYXRlJwogIGV4IDwtIG1hdGNoKGV4Y2x1ZGUuY29tcGFyZSwg
bmFtZXModGVtcGxhdGUpKQogIGNvbXBhcmUgPC0gYWxsLmVxdWFsKHRlbXBsYXRlWy1leF0sIHRl
bXBsYXRlMlstZXhdKQogIGlmIChsZW5ndGgoY29tcGFyZSk+MSB8fCAhaXMubG9naWNhbChjb21w
YXJlKSB8fCAhY29tcGFyZSl7CiAgICB3YXJuaW5nKCJpbnB1dCBhbmQgb3V0cHV0IHRlbXBsYXRl
IGFyZSBkaWZmZXJlbnQiKQogICAgcHJpbnQoY29tcGFyZSkKICB9CiAgaWYgKHRlbXBsYXRlMiRl
eHRlbnNpb24ud2FybmluZykgCiAgICB3YXJuaW5nKCJleHRlbnNpb24ud2FybmluZzogZGF0YSBo
YXZlIGJlZW4gd3JpdHRlbiBpbiBhIGZvcm1hdCB0aGF0IGRpZmZlcnMgZnJvbSB0aGUgc3BlY2lm
aWNhdGlvbnMiKQogIHJldHVybihpbnZpc2libGUodGVtcGxhdGUyKSkKfQoKCnByaW50LnRlbXBs
YXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlKXsKICBpcy5hLmZhY3RvciA8LSB1bmxpc3QobGFwcGx5
KGFzLmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEo
bWF0Y2goJ2ZhY3RvcicsIHgkY2xhc3MpKSkgKSkKICBhcy5pcyA8LSB1bmxpc3QobGFwcGx5KGFz
Lmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEobWF0
Y2goJ0FzSXMnLCB4JGNsYXNzKSkpICkpCiAgCiAgc2luZ2xlcyA8LSBldmFsKGV4cHJlc3Npb24o
YyggCiAgICAgICAgZmlsZSA9IGZpbGUKICAgICAgLCBlb2wgPSBlb2wKICAgICAgLCBzZXAgPSBz
ZXAKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcAogICAgICAsIG5hLnN0cmluZ3MgPSBuYS5zdHJp
bmdzCiAgICAgICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICAgICAsIGVzY2Fw
ZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiAgICAgICwgbG9naWNh
bHMuRkFMU0UgPSBsb2dpY2Fsc1sxXQogICAgICAsIGxvZ2ljYWxzLlRSVUUgPSBsb2dpY2Fsc1sy
XQogICAgICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5u
YW1lcy5sb2MKICAgICAgLCBoZWFkZXIgPSBoZWFkZXIKICAgICAgLCBleHRlbnNpb24ud2Fybmlu
ZyA9IGV4dGVuc2lvbi53YXJuaW5nICAgICAgICAgICAgCiAgICAgICwgc2VwZXJhdG9yLndhcm5p
bmcgPSBzZXBlcmF0b3Iud2FybmluZyAgICAgICAgICAgIAogICAgICAsIHF1b3RhdGlvbi5tYXJr
Lndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53YXJuaW5nCiAgICAgICkpLCB0ZW1wbGF0ZSkKICBj
YXQocGFzdGUobmFtZXMoc2luZ2xlcyksICc9IDwnLCBzaW5nbGVzLCAnPicsIHNlcD0nJywgY29s
bGFwc2U9J1xuJyksICdcbicsICdcbicpCgogIGlmIChpcy5udWxsKHRlbXBsYXRlJHdpZHRocykp
ewogICAgY2F0KCdkaWdpdHM9IDxOVUxMPlxuJykKICAgIGNhdCgnd2lkdGhzPSA8TlVMTD5cblxu
JykKICAgIAogICAgcHJpbnQubWF0cml4KAogICAgICBjYmluZCgKICAgICAgICBjb2wubmFtZXM9
dGVtcGxhdGUkY29sLm5hbWVzCiAgICAgICwgcXVvdGU9dGVtcGxhdGUkcXVvdGUKICAgICAgLCBz
dG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2RlCiAgICAgICwgaXMuZmFjdG9yPWlzLmEu
ZmFjdG9yCiAgICAgICwgYXMuaXMgPSBhcy5pcwogICAgICApCiAgICAsIHF1b3RlPUZBTFNFCiAg
ICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVzKSkKICAg
ICkKICB9ZWxzZXsKCiAgICBmb3IgKGkgaW4gMTpsZW5ndGgodGVtcGxhdGUkZGlnaXRzKSl7CiAg
ICAgIGlmIChpcy5udWxsKHRlbXBsYXRlJGRpZ2l0c1tbaV1dKSkgdGVtcGxhdGUkZGlnaXRzW1tp
XV0gPC0gJ05VTEwnCiAgICB9CiAgICB0ZW1wbGF0ZSR3aWR0aHMgPC0gdW5saXN0KHRlbXBsYXRl
JHdpZHRocykKICAgIHRlbXBsYXRlJGRpZ2l0cyA8LSB1bmxpc3QodGVtcGxhdGUkZGlnaXRzKQoK
ICAgIHByaW50Lm1hdHJpeCgKICAgICAgY2JpbmQoCiAgICAgICAgY29sLm5hbWVzPXRlbXBsYXRl
JGNvbC5uYW1lcwogICAgICAsIHdpZHRocz10ZW1wbGF0ZSR3aWR0aHMKICAgICAgLCAiW3N0YXJ0
XSI9Y3Vtc3VtKGMoMSwgdGVtcGxhdGUkd2lkdGhzWy1sZW5ndGgodGVtcGxhdGUkd2lkdGhzKV0p
KQogICAgICAsICJbc3RvcF0iPWN1bXN1bSh0ZW1wbGF0ZSR3aWR0aHMpCiAgICAgICwgcXVvdGU9
dGVtcGxhdGUkcXVvdGUKICAgICAgLCBzdG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2Rl
CiAgICAgICwgIltpcy5mYWN0b3JdIj1pcy5hLmZhY3RvcgogICAgICAsICJbYXMuaXNdIiA9IGFz
LmlzCiAgICAgICwgZGlnaXRzPXRlbXBsYXRlJGRpZ2l0cwogICAgICApCiAgICAsIHF1b3RlPUZB
TFNFCiAgICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVz
KSkKICAgICkKICB9Cn0KCgpkZW1vLnRlbXBsYXRlIDwtIApmdW5jdGlvbihmaWxlID0gdGVtcGZp
bGUoKSl7CgoJY2F0KCJcblxuXG49PT09PSBUSEUgREFUQSA9PT09PVxuIikKCgl4IDwtIGRhdGEu
ZnJhbWUobnVtPTE6NSswLjEKCSwgY2hhcj1JKGxldHRlcnNbMTo1XSkKCSwgbG9nPUkoYyhUUlVF
LCBGQUxTRSwgTkEsIE5BLCBOQSkpCgksIGZhaz1mYWN0b3IobGV0dGVyc1syMjoyNl0pKQoJeCRj
aGFyWzFdIDwtICcsJwoJeCRjaGFyWzJdIDwtICcjJyAgICMgd2FzICciJwoJeCRjaGFyWzNdIDwt
ICdhIGInCgl4JG51bVsxXSA8LSAuTWFjaGluZSRkb3VibGUueG1pbgoJCglzdHIoeCkKCgljYXQo
IlxuXG5cbj09PT09IEZJWEVEIFdJRFRIIEZPUk1BVCA9PT09PVxuIikKICAgICAgICBjYXQoIi0t
LSB3cml0aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZp
bGU9ZmlsZSkKCWNhdCgiLS0tIHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxl
IC0+Iiwgc2NhbihmaWxlPWZpbGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyks
ICdcbicpCgljYXQoIi0tLSB0aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0
ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0g
cmVhZCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwg
ZGF0YVxuIikKCWFsbC5lcXVhbCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRl
IHdoaWxlIHJlYWRpbmdcbiIpCgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1
dGU9VFJVRSkKCXRlbXBsYXRlMiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3Rl
bXBsYXRlJykgPC0gTlVMTAoJY2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNl
cHQgZm9yIGRpZ2l0c1xuIikKCWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCIt
LS0gcmUud3JpdGluZyB1c2luZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBs
YXRlKHRlbXBsYXRlMiwgeCwgYXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxk
IGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVt
cGxhdGUzKQoJY2F0KCItLS0gdGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBh
cHBlbmRlZDpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCgljYXQoIlxuXG5cbj09PT09IEZJ
WEVEIFdJRFRIIEZPUk1BVCB3aXRoIGZhY3RvcnM9J2NvZGVzJywgbG9naWNhbHM9YygwLDEpLCBk
aWdpdHM9MTUsIHJvdy5uYW1lcz1GQUxTRSA9PT09PVxuIikKICAgICAgICBjYXQoIi0tLSB3cml0
aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZpbGU9Zmls
ZSwgZmFjdG9ycz0nY29kZXMnLCBsb2dpY2Fscz1jKDAsMSksIGRpZ2l0cz0xNSkKCWNhdCgiLS0t
IHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxlIC0+Iiwgc2NhbihmaWxlPWZp
bGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyksICdcbicpCgljYXQoIi0tLSB0
aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWlt
cG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0gcmVhZCh0ZW1wbGF0ZSkKCWNh
dCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwgZGF0YVxuIikKCWFsbC5lcXVh
bCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRlIHdoaWxlIHJlYWRpbmdcbiIp
Cgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1dGU9VFJVRSkKCXRlbXBsYXRl
MiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3RlbXBsYXRlJykgPC0gTlVMTAoJ
Y2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNlcHQgZm9yIGRpZ2l0c1xuIikK
CWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCItLS0gcmUud3JpdGluZyB1c2lu
ZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBsYXRlKHRlbXBsYXRlMiwgeCwg
YXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBm
b3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVtcGxhdGUzKQoJY2F0KCItLS0g
dGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBhcHBlbmRlZDpcbiIpCgljYXQo
cGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0nJywgc2VwPSdcbicpLCBjb2xs
YXBzZT0nXG4nKSwgJ1xuJykKCgoJY2F0KCJcblxuXG49PT09PSBTRVBFUkFURUQgVkFMVUUgRk9S
TUFUID09PT09XG4iKQogICAgICAgIGNhdCgiLS0tIHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIp
Cgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmlsZT1maWxlKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKCgljYXQoIlxuXG5cbj09PT09IFNFUEVSQVRFRCBWQUxVRSBGT1JNQVQgd2l0aCBk
ZWMuc2VwPScsJyBhbmQgcm93Lm5hbWVzPUZBTFNFID09PT09XG4iKQogICAgICAgIGNhdCgiLS0t
IHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIpCgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmls
ZT1maWxlLCBkZWMuc2VwPScsJywgcm93Lm5hbWVzPUZBTFNFKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKfQo=

------=_NextPart_000_0004_01BF5D27.62306630--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 12 18:02:51 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 2000 19:02:51 +0100
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
In-Reply-To: acuster@nature.berkeley.edu's message of "Tue, 11 Jan 2000 02:53:58 +0100 (MET)"
References: <200001110153.CAA03462@pubhealth.ku.dk>
Message-ID: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>

acuster@nature.berkeley.edu writes:

> Full_Name: Adrian Custer
> Version: 0.90.0
> OS: Linux on Thinkpad (pentium) and desktop (K6)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> When I create a boxplot, and then try to overlay a lowess fit or just the
> points, 
> the points do not appear in the highest level and the lowess curve does not
> reach 
> the highest level. However, if I add one to each of the models, the problem is
> solved.
> I tried this on two different machines, a laptop and a desktop both running 
> Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian
> 
> > a
>   [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
...
> [291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> > b
>   [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
>  [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
.....
> [297] 4 1 0 0
> > boxplot(a~b)
> > lines(lowess(a~b))
> > points(a~b)
> > boxplot(a~b)
> > lines(lowess(a~b+1))
> > points(a~b+1)
> > 
> 
> Thanks for your consideration and thanks a million for all the work. R is a
> pleasure 
> to work with. 

Boxplot expects a *factor* as the grouping criterion. The x axis
labels are the group names, not x coordinates (i.e. it might as well
be "married, unmarried, divorced" as "0, 1, 2."), and since factors
are internally coded as 1:nlevels, that's the value used for the
actual coordinate system.

Passing a numeric vector gets it converted to a factor before use, so
things are as you should expect. Except possibly for two issues:

a) should one really do the numeric->factor conversion without a
warning message?

b) perhaps boxplot could use an at= argument saying "plot boxes here"
since the current version wouldn't be able to deal with
non-equidistant groups. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:05:37 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:05:37 +0100
Subject: inconsistencies between formatC(), format() and format.char()
Message-ID: <000001bf5d8f$753ef530$a9021aac@joelschlaegel>



Dear R-Developers,

Just a note: there are some inconsistencies between formatC(), format() and
format.char() and cross calling between these functions.
On the one hand

> cat(format('{"}'), "\n")
{\"}

> cat(format.char('{"}'), "\n")
{\"}

is by default format.char(, flag="-") and thus by default calling format()

> cat(format.char('{"}', flag="-"), "\n")
{\"}


On the other hand

> cat(formatC('{"}'), "\n")
{"}

which is calling format.char(, flag="")

> cat(format.char('{"}', flag=""), "\n")
{"}


also (for me) unexpected is

> format(" abc ", trim=T)
[1] " abc "


As an alternative see functions pad() and trim() from my other mailing ...
Regards


Jens Oehlschlgel-Akiyoshi


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 13 13:29:01 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 13 Jan 2000 14:29:01 +0100 (MET)
Subject: X11 troubles (PR#400)
Message-ID: <200001131329.OAA01558@pubhealth.ku.dk>

Just to get these issues recorded in the bug repository:

a) We don't handle multiple window closes well

My "favourite" version of this is when I ^Z out of an R session with
an open graphics window to do something on the command line, then kill
the graphics window (which does nothing), kill it again, realise that
it's because the R session was stopped, and:

[pd@blueberry BUILD]$ %
bin/R
Segmentation fault (core dumped)

b) X11 errors should be caught by an error handler, not kill R.

This is mainly seen when there's an error somewhere else, such as
trouble with the font setup. But in principle, we should at worst shut
down the graphics window, not R itself.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 13 17:24:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jan 2000 18:24:05 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001131724.SAA04122@pubhealth.ku.dk>

> From: Peter Holzer <holzer@stat.math.ethz.ch>
> Date: Mon, 10 Jan 2000 18:06:59 +0100 (MET)
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: bug in glm (PR#397)
> X-Keywords: 
> 
> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where 
the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = 
na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be 
the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> > plot(fit.tst)
> Warning messages: 
> 1: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 2: longer object length
> 	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
> 3: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 4: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 5: longer object length
> 	is not a multiple of shorter object length in: e/(s * (1 - h)) 
> 6: longer object length
> 	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 
> 
> Maybe there is another solution?

Yes, there is.  I have now altered glm in the development version to handle
zero weights in the same way as lm, and plot.lm now works for such glm
objects (although the assumptions to use lm methods on an glm fit
are invalid in this example, even if run to convergence). In essence:

    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
...
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = 
weights



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 13 17:36:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 13 Jan 2000 18:36:28 +0100 (MET)
Subject: missing warnings...
In-Reply-To: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
References: <200001110153.CAA03462@pubhealth.ku.dk>
 <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
Message-ID: <14462.3356.364998.832333@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

      <....>

    PD> Boxplot expects a *factor* as the grouping criterion. The x axis
    PD> labels are the group names, not x coordinates (i.e. it might as well
    PD> be "married, unmarried, divorced" as "0, 1, 2."), and since factors
    PD> are internally coded as 1:nlevels, that's the value used for the
    PD> actual coordinate system.

    PD> Passing a numeric vector gets it converted to a factor before use, so
    PD> things are as you should expect. Except possibly for two issues:

    PD> a) should one really do the numeric->factor conversion without a
    PD> warning message?

Yes, we should have that warning (and more!):

Warning messages that I am extremely missing are in the following two examples

  plot(1);  points(2,2)

  plot(1);  text(2,2,"bla")

(and similar with lines and all kinds of plots).

We *definitely* should warn the user that (s)he is drawing outside the plot
region.  
We need "graphical warnings" 
   (which can be turned off via an options() or par() call).

    PD> b) perhaps boxplot could use an at= argument saying "plot boxes here"
    PD> since the current version wouldn't be able to deal with
    PD> non-equidistant groups. 
oh yes!
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan 15 18:46:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 15 Jan 2000 18:46:44 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <200001100140.CAA20927@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>

On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:

> Depending on the setting of par()$usr, 
> the 'at' setting in mtext(.., adj=0, outer=T) may cause the
> text to appear in an anomalous position (e. g. in the first
> instance below, at the left of the plot region rather than
> at 'at=0' in the figure region), or the text may not appear
> at all.
> 
> If one does not set the 'at' parameter the text appears
> (with 'adj=0') on the far left of the plot region.  I assume
> this is also anomalous; at all events it is the behaviour
> that I wished to circumvent.

I am afraid this is documentation confusion. There are no user
coordinates in the outer margins, and at works like adj if outer=TRUE.
Indeed the example

mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

does work correctly for me: specifying adj=0 means put it at the extreme
left, adj=1 at the extreme right, and adj=0 to centre it (on the
display region, not the figure region).

I will re-write the documentation.

> 
> The function plot.test() demonstrates the behaviour:
> 
> plot.test <-
> function(xval=0:4, pos=NULL){
> oldpar<-par(oma=c(2,0,0,0))
> on.exit(par(oldpar))
> plot(xval,xval)
> if(is.null(pos))pos<-min(xval)
> print(pos)
> print(par()$usr)
> mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
> }
> 
> > plot.test(xval=0:4)  # "Outer text appears on left of the figure region
> [1] 0
> [1] -0.16  4.16 -0.16  4.16
> > plot.test(xval=20:24)  # "Outer text does not appear at all
> [1] 20
> [1] 19.84 24.16 19.84 24.16
> > # Check that at=0 does not work
> > plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
> [1] 0
> [1] 19.84 24.16 19.84 24.16
> >
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 0
>  minor = 90.1
>  year = 1999
>  month = December
>  day = 15
>  language = R
> 
> Windows 9x 4.0 (build 1111)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 17 07:32:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jan 2000 08:32:04 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
References: <200001100140.CAA20927@pubhealth.ku.dk>
 <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
Message-ID: <14466.50548.159379.244161@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
    >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
    >> adj=0, outer=T) may cause the text to appear in an anomalous
    >> position (e. g. in the first instance below, at the left of the plot
    >> region rather than at 'at=0' in the figure region), or the text may
    >> not appear at all.
    >> 
    >> If one does not set the 'at' parameter the text appears (with
    >> 'adj=0') on the far left of the plot region.  I assume this is also
    >> anomalous; at all events it is the behaviour that I wished to
    >> circumvent.

    BDR> I am afraid this is documentation confusion. There are no user
    BDR> coordinates in the outer margins, and at works like adj if
    BDR> outer=TRUE.  Indeed the example

    BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

    BDR> does work correctly for me: specifying adj=0 means put it at the
    BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
    BDR> (on the display region, not the figure region).

    BDR> I will re-write the documentation.

Thank you!

Is there any reason why "at=" should be *valid* at all for mtext()?
I think this is the confusing part.
"at=" always makes (me) think of user coordinates,...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 17 07:56:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 17 Jan 2000 07:56:16 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <14466.50548.159379.244161@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001170754120.16709-100000@auk.stats>

On Mon, 17 Jan 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
>     >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
>     >> adj=0, outer=T) may cause the text to appear in an anomalous
>     >> position (e. g. in the first instance below, at the left of the plot
>     >> region rather than at 'at=0' in the figure region), or the text may
>     >> not appear at all.
>     >> 
>     >> If one does not set the 'at' parameter the text appears (with
>     >> 'adj=0') on the far left of the plot region.  I assume this is also
>     >> anomalous; at all events it is the behaviour that I wished to
>     >> circumvent.
> 
>     BDR> I am afraid this is documentation confusion. There are no user
>     BDR> coordinates in the outer margins, and at works like adj if
>     BDR> outer=TRUE.  Indeed the example
> 
>     BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)
> 
>     BDR> does work correctly for me: specifying adj=0 means put it at the
>     BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
>     BDR> (on the display region, not the figure region).
> 
>     BDR> I will re-write the documentation.
> 
> Thank you!
> 
> Is there any reason why "at=" should be *valid* at all for mtext()?
> I think this is the confusing part.
> "at=" always makes (me) think of user coordinates,...

Unfortunately `adj' is overloaded, so for perpendicular text you need it.
The re-written documentation goes into the gory details.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 18:59:13 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 13:59:13 -0500 (EST)
Subject: lwd patches for "contour"
Message-ID: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>


  I found it useful to have contour be able to do line widths ... hope
that the guts haven't changed an enormous amount in the current
development version ...  the patches are relatively trivial, mostly going
by analogy with lty and col (although in my ignorance it took me a while
to figure out what UNPROTECT(2) was and why it should be changed to
UNPROTECT(3) ...  hope this is useful.

  Ben Bolker

*** src/main/names.c.orig	Mon Jan 17 11:23:26 2000
--- src/main/names.c	Mon Jan 17 11:50:54 2000
***************
*** 644,650 ****
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	6,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},
--- 644,650 ----
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	7,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},

*** src/main/plot3d.c.orig	Mon Jan 17 11:08:08 2000
--- src/main/plot3d.c	Mon Jan 17 13:47:03 2000
***************
*** 396,408 ****
  	}
  }
  
! /* contour(x,y,z, levels, col, lty) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty;
!     int i, j, nx, ny, nc, ncol, nlty;
      int ltysave, colsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
--- 396,409 ----
  	}
  }
  
! /* contour(x,y,z, levels, col, lty, lwd) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty, lwd;
!     int i, j, nx, ny, nc, ncol, nlty, nlwd;
      int ltysave, colsave;
+     double lwdsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
***************
*** 439,445 ****
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     /* col, lwd and lty vectors here --- FIXME: "lwd" ???? */
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
--- 440,447 ----
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     PROTECT(lwd = FixupLwd(GetPar("lwd", args), dd->gp.lwd));  
!     nlwd = length(lwd);
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
***************
*** 507,512 ****
--- 509,515 ----
  
      ltysave = dd->gp.lty;
      colsave = dd->gp.col;
+     lwdsave = dd->gp.lwd;
      GMode(1, dd);
      for (i = 0; i < nc; i++) {
  	vmax = vmaxget();
***************
*** 516,521 ****
--- 519,527 ----
  	dd->gp.col = INTEGER(col)[i % ncol];
  	if (dd->gp.col == NA_INTEGER)
  	    dd->gp.col = colsave;
+ 	dd->gp.lwd = REAL(lwd)[i % nlwd];
+ 	if (dd->gp.lwd == NA_REAL)
+ 	    dd->gp.lwd = lwdsave;
  	contour(x, nx, y, ny, z, REAL(c)[i], atom, dd);
  	vmaxset(vmax);
      }
***************
*** 523,529 ****
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     UNPROTECT(2);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)
--- 529,536 ----
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     dd->gp.lwd = lwdsave;
!     UNPROTECT(3);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)

*** src/library/base/R/contour.R.orig	Mon Jan 17 11:12:11 2000
--- src/library/base/R/contour.R	Mon Jan 17 11:43:02 2000
***************
*** 6,12 ****
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
--- 6,12 ----
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
***************
*** 34,40 ****
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty))
      if (!add) {
  	axis(1)
  	axis(2)
--- 34,40 ----
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty, lwd = as.double(lwd)))
      if (!add) {
  	axis(1)
  	axis(2)

*** src/library/base/man/contour.Rd.orig	Mon Jan 17 11:13:18 2000
--- src/library/base/man/contour.Rd	Mon Jan 17 11:19:05 2000
***************
*** 8,14 ****
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
--- 8,14 ----
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
***************
*** 29,34 ****
--- 29,35 ----
    \item{xlim, ylim, zlim}{x-, y- and z-limits for the plot}
    \item{col}{color for the lines drawn}
    \item{lty}{line type for the lines drawn}
+   \item{lwd}{line width for the lines drawn}
    \item{add}{logical. If \code{TRUE}, add to a current plot.}
    \item{\dots}{additional graphical parameters (see \code{\link{par}})
      and the arguments to \code{\link{title}} may also be supplied.}
***************
*** 36,42 ****
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,
--- 37,43 ----
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot3d.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 22:00:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 17:00:58 -0500 (EST)
Subject: RNG initialization
Message-ID: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>


  It would be nice to be able to initialize the random-number generator
with a single long argument; I can see that in principle this could be
done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
I had trouble with the technical details, possibly because of long/int
incompatibilities.

  Any chance of this happening?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 08:08:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 08:08:55 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>

On Mon, 17 Jan 2000, Ben Bolker wrote:

>   It would be nice to be able to initialize the random-number generator
> with a single long argument; I can see that in principle this could be
> done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
> I had trouble with the technical details, possibly because of long/int
> incompatibilities.

What precisely do you want to do? Is that `long' as in C code?  There is no
means to pass a `long' from R code to C, but RNG_Init in fact only
makes use of 32 bits so should have `int' there.  (It's a poor
choice of algorithm though, as it uses a multiplicative generator
without ensuring the starting point is odd.)

My best guess is that you would like a function like S's set.seed,
which when called with a single number sets the whole initial seed.
This is certainly easy to do, and can be done easily in R code.
Since set.seed seems a suitable name and it would help compatibility,
would

set.seed(seed, kind = 0)

be a suitable interface?  Or would people prefer

RNGinit(kind, seed)

?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Jan 18 14:22:57 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 18 Jan 2000 09:22:57 -0500 (EST)
Subject: RNG initialization
In-Reply-To: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>

On Tue, 18 Jan 2000, Prof Brian D Ripley wrote:

> My best guess is that you would like a function like S's set.seed,
> which when called with a single number sets the whole initial seed.
> This is certainly easy to do, and can be done easily in R code.
> Since set.seed seems a suitable name and it would help compatibility,
> would
> 
> set.seed(seed, kind = 0)
> 
> be a suitable interface?  Or would people prefer
> 
> RNGinit(kind, seed)

  set.seed() sounds fine.  On reading this, it occurs to me that I could
probably do something like this that just set the value of .Random.seed in
R code (just copying what RNG_Init() does to set .Random.seed from
time()), without mucking with the C code (although a lot of the details of
RNG settings etc. seem to be in C rather than R code at the moment).

  thanks,
     Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 15:26:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 10:26:26 -0500
Subject: RNG initialization
References: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>
Message-ID: <38848621.4E02D913@bank-banque-canada.ca>

>Since set.seed seems a suitable name and it would help compatibility,
>would
>set.seed(seed, kind = 0)
>be a suitable interface?  Or would people prefer
>RNGinit(kind, seed)

Before making too many changes to random number generation it might be useful to
look at the code below which is part of my syskern package. It sets the seed,
uniform RNG and the normal transformation, and may serve as a good model for
setting other transformation. Since it also works in Splus it allows me to run
the same random experiments in Splus and R. I've been using it successfully for
some time now, on much more complicated examples than the simple tests below.

Paul Gilbert

##############################################################################

#    6/  Random number generation.
# part of syskern package. I think this is self contained except for is.S
is.S <- function(){FALSE}

##############################################################################

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 15:33:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 15:33:40 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181533.PAA25043@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 10:26:26 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Since set.seed seems a suitable name and it would help compatibility,
> >would
> >set.seed(seed, kind = 0)
> >be a suitable interface?  Or would people prefer
> >RNGinit(kind, seed)
> 
> Before making too many changes to random number generation it might be useful 
to
> look at the code below which is part of my syskern package. It sets the seed,

As I understand it, that does not do what either S-PLUS's set.seed does
or what Ben asks for, as the seed has to be of a length and values
appropriate to the RNGkind.  The request was to use a single value:
otherwise why not just assign to .Random.seed?  

Personally I do not like the altering of system functions in user
packages, as what happens if two or more people do it? It depends
on the load order.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 16:35:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 11:35:45 -0500
Subject: RNG initialization
References: <200001181533.PAA25043@toucan.stats.ox.ac.uk>
Message-ID: <38849661.AC7A95FB@bank-banque-canada.ca>

>Personally I do not like the altering of system functions in user
>packages, as what happens if two or more people do it? It depends
>on the load order.

Yes, I don't see any way around this in Splus, but it would be nice if it was
done in R base. In fact as I recall, some of the hooks may be in R's C code and
that would be the fastest place to do RNG changes. Martin was going to look at
it sometime, but I don't know if he has had a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 16:40:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 16:40:30 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181640.QAA17215@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 11:35:45 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
 
> >Personally I do not like the altering of system functions in user
> >packages, as what happens if two or more people do it? It depends
> >on the load order.
> 
> Yes, I don't see any way around this in Splus, but it would be nice if it was
> done in R base. In fact as I recall, some of the hooks may be in R's C code 
and
> that would be the fastest place to do RNG changes. Martin was going to look at
> it sometime, but I don't know if he has had a chance.

Sure, it is easy and that was what I was proposing to do. I was just
proposing to be compatible with S-PLUS and not syskern.  I really don't
see why syskern needs to use the name set.seed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 18:59:09 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 13:59:09 -0500
Subject: RNG initialization
References: <200001181640.QAA17215@toucan.stats.ox.ac.uk>
Message-ID: <3884B7FD.7550C58A@bank-banque-canada.ca>

>I was just proposing
>to be compatible with S-PLUS and not syskern.  I really don't
>see why syskern needs to use the name set.seed.

No, syskern does not need to use the name set.seed. I used it hoping this stuff
would move to R  base at some point and I could remove it from syskern.

Beyond the name however, there are some Splus compatiblity issues which probably
should be discussed. I seem to recall that there was some difficulty producing
Splus runif results in R.  Also, the ability to specify the RNG in R is nice and
should be accommodated, and setting the seed without setting the RNG is probably
not wise. Finally, I feel it is important to also specify the algorithms for
other transformations such rnorm. This way, one can be relatively confident that
a random experiment can be reproduced.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 19:14:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 19:14:48 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <3884B7FD.7550C58A@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10001181911370.7391-100000@auk.stats>

On Tue, 18 Jan 2000, Paul Gilbert wrote:

> >I was just proposing
> >to be compatible with S-PLUS and not syskern.  I really don't
> >see why syskern needs to use the name set.seed.
> 
> No, syskern does not need to use the name set.seed. I used it hoping this stuff
> would move to R  base at some point and I could remove it from syskern.
> 
> Beyond the name however, there are some Splus compatiblity issues which probably
> should be discussed. I seem to recall that there was some difficulty producing
> Splus runif results in R.  Also, the ability to specify the RNG in R is nice and

Of course, as the Splus runif is not implemented in R. There is something
similar, but it is not the same.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 19:02:50 2000
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 20 Jan 2000 20:02:50 +0100 (MET)
Subject: bug in setting length of a list (PR#401)
Message-ID: <200001201902.UAA04276@pubhealth.ku.dk>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 18:55:15 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 20 Jan 2000 12:55:15 -0600
Subject: bug in setting length of a list
Message-ID: <qxpk8l4shd8.fsf@ludwig.stat.wisc.edu>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri Jan 21 06:15:03 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jan 2000 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <200001210615.HAA02949@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

* PR# 379 *
Subject: strsplit does not conform to documentation
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 17 Dec 1999 18:48:14 -0800 (PST)
--fix documentation!

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
--still with us (0.90.1, Dec.1999)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
--FIXME (still in 0.90.1)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).
* PR# 340 *
Subject: "outer" argument in mtext
From: Douglas Bates <bates@stat.wisc.edu>
Date: 23 Nov 1999 12:31:36 -0600
* PR# 349 *
Subject: size of text and numbers in graphs
From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Date: Sat, 27 Nov 1999 17:03:53 CET (+0100)
--not a bug (PD)
* PR# 365 *
Subject: plot math - segfault and "frac", "^" bug(s)..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 8 Dec 1999 18:27:03 +0100 (MET)
--seg.fault fixed; "^" precedence is really bad
* PR# 366 *
Subject: pch==NA
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 1999 15:19:46 +0100
* PR# 372 *
Subject: hist() with horiz=TRUE does not give horiz. plots
From: fran@stat.berkeley.edu
Date: Sun, 12 Dec 1999 00:27:25 +0100 (MET)

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 363 *
Subject: Where should iofflush.c be?
From: David Emile Lamy <delamy@uswest.net>
Date: Tue, 7 Dec 1999 01:51:57 -0700 (MST)
--Linux installation problem, it seems. Too little to reproduce

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature
* PR# 343 *
Subject: rbind invisible return value
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 24 Nov 1999 11:34:10 -0800 (PST)
* PR# 358 *
Subject: [[ substitution
From: clive@bell-labs.com
Date: Fri, 3 Dec 1999 16:45:08 +0100 (MET)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

none

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 377 *
Subject: lists of functions
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 17 Dec 1999 09:10:50 +0100 (MET)
* PR# 378 *
Subject: plot()  after split.screen() on postscript() Device produces inconsistent PostScript file
From: boble@usa.net
Date: Fri, 17 Dec 1999 21:32:23 +0100 (MET)
* PR# 384 *
Subject: tck crash
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 22 Dec 1999 10:05:48 +0100 (MET)
* PR# 385 *
Subject: Apply dimnames
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 22 Dec 1999 11:22:27 +0000 (GMT)
--(+ patch proposal)
* PR# 386 *
Subject: as.matrix.data.frame() modifies content of character columns
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Wed, 22 Dec 1999 16:18:19 +0100
* PR# 387 *
Subject: different subscripting behaviour using  $<-  or  [<-  for data.frames
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:10:17 +0100
* PR# 388 *
Subject: data.frame(I(matrix)) ?
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:12:58 +0100
* PR# 389 *
Subject: coredump with plot(x,y,pch="+",cex=2.2)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 26 Dec 1999 18:14:10 -0500 (EST)
* PR# 390 *
Subject: axis for small ranges
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Tue, 28 Dec 1999 13:28:01 +0100
* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
* PR# 394 *
Subject: formatC (bug and fix)
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Tue, 4 Jan 2000 10:31:53 +0100
* PR# 398 *
Subject: a +1 shift overlaying lines/points on a boxplot
From: acuster@nature.berkeley.edu
Date: Tue, 11 Jan 2000 02:53:56 +0100 (MET)
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
* PR# 401 *
Subject: bug in setting length of a list
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 20 Jan 2000 12:55:15 -0600
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Sat Jan 22 10:24:51 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Sat, 22 Jan 2000 10:24:51 +0000
Subject: tabulate
References: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>
Message-ID: <38898573.3BF7945A@Durham.ac.uk>

Dear R-Developers,

Would it be possible / is it desirable to alter tabulate 
so that the lower boundary
can be set in addition to the upper boundary? eg,

tabulate(bin, low=min(1,bin), nbin=max(1,bin))

would silently ignore elements outside the range low..nbin

It is easy to get around this at present, of course,
but seems natural to have a more flexible function. 
[or should I be using another function?]

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sun Jan 23 00:26:31 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sun, 23 Jan 2000 10:26:31 +1000
Subject: tabulate
In-Reply-To: Your message of "Sat, 22 Jan 2000 10:24:51 GMT."
 <38898573.3BF7945A@Durham.ac.uk>
Message-ID: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>

> Dear R-Developers,
> 
> Would it be possible / is it desirable to alter tabulate 
> so that the lower boundary
> can be set in addition to the upper boundary? eg,
> 
> tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> 
> would silently ignore elements outside the range low..nbin
> 
> It is easy to get around this at present, of course,
> but seems natural to have a more flexible function. 
> [or should I be using another function?]

I would oppose it on the grounds that tabulate() is a low-level
function and making a change like this is likely to slow it down
(if marginally) and to hinder porting software from R to S, which
I regard as an important consideration, if not an over-riding one.

table() should be the usual function for everyday use (and using
this makes the change to tabulate() unnecessary), but on R the
difference in speed between table() and tabulate() can be
dramatic.  I would suggest improving the efficiency of table()
should be a fairly high priority.

Bill.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jan 23 12:15:38 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 23 Jan 2000 12:15:38 +0000 (GMT)
Subject: R header files
Message-ID: <Pine.GSO.4.05.10001231150300.17770-100000@auk.stats>

The R header files have been reorganised, and for the first time documented
(in the Writing R Extensions manual).

The recommended header file for user code is R.h. S.h still exists, but
includes rather less, plus some S-compatibility defines.

This should be included before Rdefines.h (but for now this is worked
around)

Rdefines.h includes Rinternals.h.

If you need any of the auxilliary header files

    Applic.h Arith.h Complex.h Error.h Linpack.h Mathlib.h Memory.h
    PrtUtil.h Random.h Utils.h f2c.h

they are now in R_HOME/include/R_ext.  Currently this is searched, but it
will not be come 1.0.  Of these Arith.h Complex.h Error.h Memory.h Random.h
Utils.h are included by R.h. [The rationale here is to remove the chance
of name clashes, so you will only get the R versions if you ask for the 
directory specifically.]

Blas.h has gone (its contents are included in both Linpack.h and Applic.h)
and Errormsg.h is for internal use only.  Fortran.h is no longer installed
(was anyone using it, and if so for what?)

Would package writers who have C code please try out R-devel, and

   *   If you use Rdefines.h or Rinternals.h consider including R.h.
   *   If you use any of Applic.h Linpack.h Mathlib.h f2c.h add R_ext.
   *   If you use any of Arith.h Complex.h Error.h Memory.h Random.h
       Utils.h  remove them and include R.h.

Looking over the packages I have to hand:

foreign/src/minitab needs to declare R.h
tree and tseries need to declare R.h and remove some headers.
cclust needs "R_ext/f2c.h"


Please let me know of any problems. This might seem a nuisance now, but
does allow us to document a stable interface and so avoid future problems.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 23 12:22:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 2000 13:22:11 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Sun, 23 Jan 2000 10:26:31 +1000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.

Would you happen to have a simple example showing the inefficiency? I
just had a glimpse at the code and it would seem that there are some
extraneous coercions from integer to double precision and back, which
could be fairly easily removed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Mon Jan 24 09:59:20 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Mon, 24 Jan 2000 09:59:20 +0000
Subject: tabulate
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <388C2278.EF4119E1@Durham.ac.uk>

Bill Venables wrote:
> 
> > Dear R-Developers,
> >
> > Would it be possible / is it desirable to alter tabulate
> > so that the lower boundary
> > can be set in addition to the upper boundary? eg,
> >
> > tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> >
> > would silently ignore elements outside the range low..nbin
> >
> > It is easy to get around this at present, of course,
> > but seems natural to have a more flexible function.
> > [or should I be using another function?]
> 
> I would oppose it on the grounds that tabulate() is a low-level
> function and making a change like this is likely to slow it down
> (if marginally) and to hinder porting software from R to S, which
> I regard as an important consideration, if not an over-riding one.
> 
> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.
> 


As far as I know, tabulate appears to have the advantage [for some of my 
tasks] of not excluding bins with zero counts. Otherwise, I would use
table.

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 10:22:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jan 2000 11:22:55 +0100
Subject: tabulate
In-Reply-To: David Wooff's message of "Mon, 24 Jan 2000 09:59:20 +0000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU> <388C2278.EF4119E1@Durham.ac.uk>
Message-ID: <x2u2k3kbuo.fsf@blueberry.kubism.ku.dk>

David Wooff <D.A.Wooff@Durham.ac.uk> writes:

> As far as I know, tabulate appears to have the advantage [for some of my 
> tasks] of not excluding bins with zero counts. Otherwise, I would use
> table.

Yes. There are ways around it though, and for multiway tables you'll
need them anyway:

> x<-rpois(20,10)
> x
 [1] 10 13  9  9 12  9 15 12 11  7 10 13 10  8  8 12  7 11  5  6
> table(x)
x
 5  6  7  8  9 10 11 12 13 15 
 1  1  2  2  3  3  2  3  2  1 

> tabulate(x)
 [1] 0 0 0 0 1 1 2 2 3 3 2 3 2 0 1
> table(factor(x,levels=0:max(x)))

 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 
 0  0  0  0  0  1  1  2  2  3  3  2  3  2  0  1 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Mon Jan 24 22:46:06 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Tue, 25 Jan 2000 08:46:06 +1000
Subject: tabulate
In-Reply-To: Your message of "23 Jan 2000 13:22:11 +0100."
 <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>
Message-ID: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > table() should be the usual function for everyday use (and using
> > this makes the change to tabulate() unnecessary), but on R the
> > difference in speed between table() and tabulate() can be
> > dramatic.  I would suggest improving the efficiency of table()
> > should be a fairly high priority.
> 
> Would you happen to have a simple example showing the inefficiency? I
> just had a glimpse at the code and it would seem that there are some
> extraneous coercions from integer to double precision and back, which
> could be fairly easily removed.

OK Peter.  This is the first one I cooked up:

Version 0.90.1  (December 15, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> m <- rpois(100000, 1)
> tabulate(m)
[1] 36891 18399  6064  1519   309    50     4     1
> table(m)
m
    0     1     2     3     4     5     6     7     8 
36763 36891 18399  6064  1519   309    50     4     1 
> system.time(tabulate(m))
[1] 0.11 0.00 0.00 0.00 0.00
> system.time(table(m))
[1] 2.90 0.16 4.00 0.00 0.00
> version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    0                   
minor    90.1                
year     1999                
month    December            
day      15                  
language R                   
> 

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 23:24:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 00:24:22 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Tue, 25 Jan 2000 08:46:06 +1000"
References: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> OK Peter.  This is the first one I cooked up:
...
> > m <- rpois(100000, 1)
> > tabulate(m)
> [1] 36891 18399  6064  1519   309    50     4     1
> > table(m)
> m
>     0     1     2     3     4     5     6     7     8 
> 36763 36891 18399  6064  1519   309    50     4     1 
> > system.time(tabulate(m))
> [1] 0.11 0.00 0.00 0.00 0.00
> > system.time(table(m))
> [1] 2.90 0.16 4.00 0.00 0.00
> > version

OK first, notice that I get:

> system.time(table(m))
[1] 3.38 0.00 3.38 0.00 0.00
> system.time(f<-factor(m))
[1] 2.12 0.00 2.12 0.00 0.00
> system.time(table(f))
[1] 1.19 0.00 1.20 0.00 0.00

so most of the time really goes into factor(). If one is careful about
the innards of table() one can shave the time for that to 

> system.time(tab2(f))
[1] 0.66 0.01 0.67 0.00 0.00

Rather interestingly, the non constant time part of table would seem
equivalent to 

> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.25 0.00 0.25 0.00 0.00
> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.07 0.00 0.07 0.00 0.00

Notice the huge difference in the two executions, indicating that the
number of garbage collections involved probably play a major role.

On the whole it doesn't really seem to be worth it to obtimize this
very heavily, but if you have any obvious improvements for factor()...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jan 25 01:49:25 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 25 Jan 2000 14:49:25 +1300
Subject: lwd patches for "contour"
References: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>
Message-ID: <009901bf66d6$68fda0f0$175dd882@stat.auckland.ac.nz>

hi


>   I found it useful to have contour be able to do line widths ... hope
> that the guts haven't changed an enormous amount in the current
> development version ...  the patches are relatively trivial, mostly going
> by analogy with lty and col (although in my ignorance it took me a while
> to figure out what UNPROTECT(2) was and why it should be changed to
> UNPROTECT(3) ...  hope this is useful.


thanks very much !  i have been making a couple of changes to contour and i
have added your patch.  it should be in the next release (0.99)

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 25 07:04:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jan 2000 07:04:31 +0000 (GMT)
Subject: tabulate
In-Reply-To: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10001250658080.987-100000@auk.stats>

On 25 Jan 2000, Peter Dalgaard BSA wrote:

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > OK Peter.  This is the first one I cooked up:
> ...
> > > m <- rpois(100000, 1)
> > > tabulate(m)
> > [1] 36891 18399  6064  1519   309    50     4     1
> > > table(m)
> > m
> >     0     1     2     3     4     5     6     7     8 
> > 36763 36891 18399  6064  1519   309    50     4     1 
> > > system.time(tabulate(m))
> > [1] 0.11 0.00 0.00 0.00 0.00
> > > system.time(table(m))
> > [1] 2.90 0.16 4.00 0.00 0.00
> > > version
> 
> OK first, notice that I get:
> 
> > system.time(table(m))
> [1] 3.38 0.00 3.38 0.00 0.00
> > system.time(f<-factor(m))
> [1] 2.12 0.00 2.12 0.00 0.00
> > system.time(table(f))
> [1] 1.19 0.00 1.20 0.00 0.00
> 
> so most of the time really goes into factor(). If one is careful about
> the innards of table() one can shave the time for that to 
> 
> > system.time(tab2(f))
> [1] 0.66 0.01 0.67 0.00 0.00
> 
> Rather interestingly, the non constant time part of table would seem
> equivalent to 
> 
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.25 0.00 0.25 0.00 0.00
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.07 0.00 0.07 0.00 0.00
> 
> Notice the huge difference in the two executions, indicating that the
> number of garbage collections involved probably play a major role.
> 
> On the whole it doesn't really seem to be worth it to obtimize this
> very heavily, but if you have any obvious improvements for factor()...

Almost all the time is going on match(), which is 25x slower on my system
than S-PLUS 5.1 for this example.  I recall that we see this problem
in slow model.* manipulations too.

I don't know why match is slow: it does use hashing but may not be
optimized for matches into small sets.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Jan 25 07:59:13 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 25 Jan 2000 08:59:13 +0100 (MET)
Subject: core dump involving function closure (PR#402)
Message-ID: <200001250759.IAA03338@pubhealth.ku.dk>

A user has crashed R90.1 on MS Windows by succesive calls to two of my
formula/function interpretors in an order that I had not foreseen. I
have checked and this also occurs with Intel RH5.2. I have distilled
the problem down to its bare bones as the following set of
instructions:

func <- function(.mu){
	.ch1 <- deparse(.mu,width=500)[-1]
	.fn <- eval(parse(text=paste("function()",
		paste("eval(attr(.fn,\"model\"))"))))
	attr(.fn,"model") <- parse(text=.ch1)
	.fn}

mu <- function() eval(attr(.fn,"model"))
func(mu)()

debug does not help much. It looks like an infinite loop to me but
that is no excuse for a crash. I have modified my functions so that it
can now only occur in one very improbable case. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 25 09:42:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 10:42:47 +0100
Subject: core dump involving function closure (PR#402)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 25 Jan 2000 08:59:13 +0100 (MET)"
References: <200001250759.IAA03338@pubhealth.ku.dk>
Message-ID: <x2ya9elc6g.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> A user has crashed R90.1 on MS Windows by succesive calls to two of my
> formula/function interpretors in an order that I had not foreseen. I
> have checked and this also occurs with Intel RH5.2. I have distilled
> the problem down to its bare bones as the following set of
> instructions:
> 
> func <- function(.mu){
> 	.ch1 <- deparse(.mu,width=500)[-1]
> 	.fn <- eval(parse(text=paste("function()",
> 		paste("eval(attr(.fn,\"model\"))"))))
> 	attr(.fn,"model") <- parse(text=.ch1)
> 	.fn}
> 
> mu <- function() eval(attr(.fn,"model"))
> func(mu)()
> 
> debug does not help much. It looks like an infinite loop to me but
> that is no excuse for a crash. I have modified my functions so that it
> can now only occur in one very improbable case. Jim

Ouch. This kind of crash happens when the C stack grows too big and
you can no longer access automatic variables created on it. That's
pretty darn hard to avoid unless we want to put in some kind of
maxdepth check in the evaluator (which I suppose we could do).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:31:42 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:31:42 -0800
Subject: patch for using GNU linker with sparc-sun-solaris2.*
Message-ID: <rfiwvox39fl.fsf@cathcart.sysc.pdx.edu>


diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/26 01:25:37
***************
*** 583,590 ****
--- 582,594 ----
      shlibldflags="-shared"
      ;;
    *solaris*)
+     shlibldflags="-G"
      if test "${GCC}" = yes; then
        cpicflags=-fPIC
+       if `$CC -print-prog-name=ld` -v | grep GNU > /dev/null; then
+         shlibldflags=-shared
+         dllflags=-Wl,--export-dynamic
+       fi
      else
        cpicflags=-KPIC
      fi
***************
*** 593,599 ****
      else
        fpicflags=-PIC
      fi
-     shlibldflags="-G"
      ;;
  esac
  
--- 597,602 ----
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:36:02 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:36:02 -0800
Subject: passing through configure parameters during module installation?
Message-ID: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>


This patch makes it possible do module installs in this way:

$ R INSTALL --with-hdf5=/packages .

Is there a better/conventional way to do this kind of thing that I'm
not seeing?

diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/26 01:26:11
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 26 08:34:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 26 Jan 2000 09:34:39 +0100 (CET)
Subject: passing through configure parameters during module installation?
In-Reply-To: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
Message-ID: <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> This patch makes it possible do module installs in this way:

> $ R INSTALL --with-hdf5=/packages .

> Is there a better/conventional way to do this kind of thing that I'm
> not seeing?

The idea is very nice, but maybe not general enough.  Who knows, but
there may be someone who wants to pass an argument to configure that
does not start with `--with'.

I'd prefer something like

	--configure-args="..."

Would that be o.k. too?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 26 10:11:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 26 Jan 2000 11:11:18 +0100 (MET)
Subject: [R-d] E-mail to R-devel will have prefix, ok?
Message-ID: <14478.51270.541011.369015@gargle.gargle.HOWL>

A short "private" discussion revealed that several people desire to get a
prefix in the "subject:"s of R-devel mailings.

I'd propose to set "[R-d]" as I've done it (manually, this time!) above.
Unless I hear load protests, I'll set this.

your mailing list maintainer: Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:22:22 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:22:22 -0800
Subject: passing through configure parameters during module installation?
In-Reply-To: Kurt Hornik's message of "Wed, 26 Jan 2000 09:34:39 +0100 (CET)"
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu> <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>
Message-ID: <rfi901c2475.fsf@cathcart.sysc.pdx.edu>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

KH> I'd prefer something like

KH> 	--configure-args="..."

KH> Would that be o.k. too?

The downside of this is that it could get verbose and quoting is more
complicated.  Also, it may pass through things that shouldn't be
allowed, anyway.  But at least --with-*, --enable-*/--disable-* make
sense.  But I just want the capability.  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 26 16:24:05 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261624.RAA23569@pubhealth.ku.dk>



I observed the following difference:

> ddd <- data.frame(a=1:3, b=1:3)

# assignment of 'X' silently ignored
> ddd[1,1] <- 'X'
> is.factor(ddd[[1]])
[1] FALSE
> ddd
  a b
1 1 1
2 2 2
3 3 3

# assignment of 'X' not ignored
> ddd[[1]][1] <- 'X'
> is.factor(ddd[[1]])
[1] TRUE
> ddd
  a b
1 X 1
2 2 2
3 3 3


Regards



> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:56:43 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:56:43 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
Message-ID: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>


..looks like these should be "cvs delete"d.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 26 17:09:39 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2000 11:09:39 -0600
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: mgd@swarm.org's message of "26 Jan 2000 08:56:43 -0800"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>
Message-ID: <6r4sc0iwto.fsf@franz.stat.wisc.edu>

mgd@swarm.org (Marcus G. Daniels) writes:

> ..looks like these should be "cvs delete"d.

Deleted from where?  Are you talking about the rsync archive or the
tar files in the src directories on CRAN or ???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 17:16:37 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 09:16:37 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: Douglas Bates's message of "26 Jan 2000 11:09:39 -0600"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu> <6r4sc0iwto.fsf@franz.stat.wisc.edu>
Message-ID: <rfioga8zrbe.fsf@cathcart.sysc.pdx.edu>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

MD> ..looks like these should be "cvs delete"d.

DB> Deleted from where?  Are you talking about the rsync archive or
DB> the tar files in the src directories on CRAN or ???

anoncvs

Brian Ripley reports that in the main repository it has been removed.
I guess the mirror is lagging by a few days.

toucan% cvs log Complex.h 
revision 1.4
date: 2000/01/22 20:10:00;  author: ripley;  state: dead;  lines: +0 -0
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 26 17:26:50 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 26 Jan 2000 17:26:50 +0000 (GMT)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261726.RAA23501@toucan.stats.ox.ac.uk>


> From: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
> 
> 
> I observed the following difference:
> 
> > ddd <- data.frame(a=1:3, b=1:3)
> 
> # assignment of 'X' silently ignored
> > ddd[1,1] <- 'X'
> > is.factor(ddd[[1]])
> [1] FALSE
> > ddd
>   a b
> 1 1 1
> 2 2 2
> 3 3 3

actually it assigns as.numeric(factor("X")), which is 1.

> # assignment of 'X' not ignored
> > ddd[[1]][1] <- 'X'
> > is.factor(ddd[[1]])
> [1] TRUE
> > ddd
>   a b
> 1 X 1
> 2 2 2
> 3 3 3
> 

Here is my solution: line 488 in dataframe.R, in "[<-.data.frame"

## careful, as.data.frame turns things into factors.
##    value <- as.data.frame(value)
    if(!is.list(value) && (missing(j) || !missing(i))) { # [i, ] or [i,j]
        value <- matrix(value, n, p)
        dimv <- c(n, p)
        value <- split(value, col(value))
    } else {
        value <- as.data.frame(value)
        dimv <- dim(value)
    }

It covers the same cases as the prototype, but is a kludge, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:33 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 27 Jan 2000 15:48:33 +0100 (MET)
Subject: mailx (PR#404)
Message-ID: <200001271448.PAA03882@pubhealth.ku.dk>


Is there a reason that the default option for a mailer program (at least
on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
I suspect many other Linux users don't either, and it's kind of disconcerting
to have bug.report() fail ...

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:11 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 09:48:11 -0500 (EST)
Subject: oops
Message-ID: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>


  I just sent a bug report about "mailx" being the default mailer, before
I looked at bug.report() carefully and saw that it checked
"/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
problem with this in a previous version.

  Would it be clearer to have .Options$mailer be a vector or list of
alternate mailers that were checked in turn, rather than having them
hard-wired into bug.report()?

 (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 14:55:10 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 15:55:10 +0100 (CET)
Subject: mailx (PR#404)
In-Reply-To: <200001271448.PAA03882@pubhealth.ku.dk>
References: <200001271448.PAA03882@pubhealth.ku.dk>
Message-ID: <14480.23630.954259.783819@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 15:48:33 +0100 (MET),
>>>>> bolker  (b) wrote:

b> Is there a reason that the default option for a mailer program (at least
b> on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
b> I suspect many other Linux users don't either, and it's kind of disconcerting
b> to have bug.report() fail ...

mailx is a ``meta-name'' which currently searches for

	mailx
	Mail
	/usr/ucb/mail

in this order. The former two are available on my Debian Linux
machine. The reason is that plain mail does not allow all options we
need on some Unix systems, hence we can't include it in the list.

But of course the above list can be extended ... which program would
you suggest to use?

.f

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:01:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:01:23 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.24003.408377.962589@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 09:48:11 -0500 (EST),
>>>>> Ben Bolker (BB) wrote:

BB>   I just sent a bug report about "mailx" being the default mailer, before
BB> I looked at bug.report() carefully and saw that it checked
BB> "/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
BB> problem with this in a previous version.

BB>   Would it be clearer to have .Options$mailer be a vector or list of
BB> alternate mailers that were checked in turn, rather than having them
BB> hard-wired into bug.report()?

BB>  (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

OK, my previous email was too fast :-)

hmm, the mailer option is more intended to be a ``concept of mailing''
rather than a program by itself (we just named all options as the
programs as this is the easiest things to remember) ... but gnudoit
doeas something conceptually different because it opens an emacs mail
buffer and not simply a temp file ... 

I don't like the idea of having the above too flexible because there
will definetely be people doing something like

	bug.report(mailer="netscape")

and complain that it is not working ...


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:25:16 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:25:16 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>


``oops on my side'', I forgot to ask the crucial question: which
mailer is available on your system that could be used? again, "mail"
(without a path like in "/usr/ucb/mail" is not an option as that fails
on some other unixes.

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From setzer.woodrow@epa.gov  Thu Jan 27 15:37:08 2000
From: setzer.woodrow@epa.gov (setzer.woodrow@epa.gov)
Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)
Subject: error in dweibull (PR#405)
Message-ID: <200001271537.QAA04550@pubhealth.ku.dk>

Full_Name: R. Woodrow Setzer, Jr.
Version: 0.90.1
OS: linux - Redhat 6.1
Submission from: (NULL) (165.247.155.206)


dweibull(0,1,1) evaluates to 0; it should be 1.  
Note that dweibull(.Machine$double.eps) evaluates to 1.

> dweibull(.01,1,1)
[1] 0.9900498
> dweibull(.00001,1,1)
[1] 0.99999
> dweibull(.Machine$double.eps,1,1)
[1] 1
> dweibull(0,1,1)
[1] 0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Jan 27 16:12:36 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 27 Jan 2000 17:12:36 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271612.RAA04925@pubhealth.ku.dk>

Full_Name: Joerg Polzehl
Version: 0.90.1
OS: Digital UNIX V4.0F
Submission from: (NULL) (192.124.249.126)


The dimension attribute in function density is not handled correctly
(or at least differently from S) :

z_rnorm(1000)
dim(z)_c(10,10,10)
plot(density(z),type="l")

# no problem

plot(density(z[1,,]),type="l")

# Error in if (!(lo <- min(hi, IQR(x)/1.34))) (lo <- hi)
# || (lo <- abs(x[1])) ||  : missing value where logical
# needed
# In addition: Warning message: 
# NaNs produced in: sqrt(var(x, na.rm = na.rm)) 

######## x probably is still a matrix in the call of var()  ########

plot(density(as.vector(z[1,,])),type="l")

# again no problem


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 16:12:45 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 11:12:45 -0500 (EST)
Subject: oops
In-Reply-To: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.10.10001271112110.10321-100000@bolker.zoo.ufl.edu>


  My oops is that things actually work here, I just thought they didn't
(since a previous version of R didn't have the alternative options, just
tried "mailx" and barfed when it wasn't there).
 
On Thu, 27 Jan 2000, Friedrich Leisch wrote:

> 
> ``oops on my side'', I forgot to ask the crucial question: which
> mailer is available on your system that could be used? again, "mail"
> (without a path like in "/usr/ucb/mail" is not an option as that fails
> on some other unixes.
> 
> .f
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:10:23 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:10:23 +0000 (GMT)
Subject: error in dweibull (PR#405)
Message-ID: <200001271710.RAA09444@toucan.stats.ox.ac.uk>

> From: setzer.woodrow@epa.gov
> Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)

> dweibull(0,1,1) evaluates to 0; it should be 1.  

Is that not a matter of opinion?  Note the help page says

     The Weibull distribution with `shape' parameter a and
     `scale' parameter b has density given by

             f(x) = (a/b) (x/b)^(a-1) exp(- (x/b)^a)

     for x > 0.


> Note that dweibull(.Machine$double.eps) evaluates to 1.
> 
> > dweibull(.01,1,1)
> [1] 0.9900498
> > dweibull(.00001,1,1)
> [1] 0.99999
> > dweibull(.Machine$double.eps,1,1)
> [1] 1
> > dweibull(0,1,1)
> [1] 0

I would say the Weibull density was defined to be non-zero on (0, Inf),
and S-PLUS agrees with me, as does the help page.  I don't see a bug in
the results you present which are consistent with the documentation.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 17:12:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 18:12:21 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 27 Jan 2000 17:12:36 +0100 (MET)"
References: <200001271612.RAA04925@pubhealth.ku.dk>
Message-ID: <x27lgvfngq.fsf@blueberry.kubism.ku.dk>

polzehl@wias-berlin.de writes:

> ######## x probably is still a matrix in the call of var()  ########

Exactly. Do we fix sd() or density() or both?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:21:29 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:21:29 +0000 (GMT)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271721.RAA09498@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 27 Jan 2000 18:12:21 +0100
> 
> polzehl@wias-berlin.de writes:
> 
> > ######## x probably is still a matrix in the call of var()  ########
> 
> Exactly. Do we fix sd() or density() or both?

Both. density needs an x <- as.vector(x), and I think sd needs 
to return the  standard deviation*s* if given a matrix or data frame.
Its current behaviour is wrong.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Jan 27 17:47:31 2000
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 27 Jan 2000 18:47:31 +0100 (MET)
Subject: NA not printed after table (PR#407)
Message-ID: <200001271747.SAA05694@pubhealth.ku.dk>


In the following example, the NA is not printed.

x <- c(1,2,3,2,1)
y <- table(x)
z <- list(a=y,b=NA)
z

yields

$a
x
1 2 3 
2 2 1 

$b
[1]  
   ^^^^
no NA here!

or

z <- list(a=y,d=2,b=c(1,NA,2))

R> z
$a
x
1 2 3 
2 2 1 

$d
[1] 2

$b
[1] 1   2


This seems to happen only, if an object of class "table" precedes an
NA in a list.


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:09:29 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 27 Jan 2000 19:09:29 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271809.TAA05805@pubhealth.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 19:10:28 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: Prof Brian Ripley's message of "Thu, 27 Jan 2000 17:21:29 +0000 (GMT)"
References: <200001271721.RAA09498@toucan.stats.ox.ac.uk>
Message-ID: <x21z73fkrv.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@gcal.ac.uk  Fri Jan 28 10:17:37 2000
From: wsimpson@gcal.ac.uk (wsimpson@gcal.ac.uk)
Date: Fri, 28 Jan 2000 11:17:37 +0100 (MET)
Subject: convolution bug (PR#408)
Message-ID: <200001281017.LAA11335@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Sat Jan 29 00:40:09 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 28 Jan 2000 16:40:09 -0800
Subject: HDF5 as a module
Message-ID: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>


--=-=-=


Included below are:

  1) Diffs to to remove HDF5 from R

  2) Diffs to pass thru --with-* options to a module's configure
     script during "R INSTALL".  (To reiterate a plea for this
     capability...)  This applies only to Unix, the Windows (mingw32 in
     my case) build approach of passing in make variables like
     *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
     Windows install is that I had to drop the `bundle' wrapper, which
     was useful for Unix in order to give the package a recognizable
     name with version number (Rhdf5-0.0), but the installed package
     with R a minimal name (hdf5).

  3) The module itself, as an attachment.


Index: aclocal.m4
===================================================================
RCS file: /home/rcvs/src/R/aclocal.m4,v
retrieving revision 1.30
diff -c -r1.30 aclocal.m4
*** aclocal.m4	2000/01/21 07:49:19	1.30
--- aclocal.m4	2000/01/29 00:22:35
***************
*** 543,570 ****
      AC_MSG_WARN([I found f2c but not libf2c, or libF77 and libI77])
    fi])
  dnl
- dnl R_LIB_HDF5
- dnl
- AC_DEFUN(R_LIB_HDF5,
-   [ AC_CHECK_LIB(hdf5, main,
-       [ ac_save_LIBS="${LIBS}"
- 	LIBS="-lhdf5 ${LIBS}"
- 	AC_CACHE_CHECK([for HDF5 version >= 1.2],
- 	  r_cv_lib_hdf5,
- 	  AC_TRY_LINK(
- 	    [#include <hdf5.h>],
- 	    [ H5T_pers_t convtype = H5T_PERS_SOFT;
- 	      H5Tclose ((hid_t) 0);],
- 	    r_cv_lib_hdf5=yes,
- 	    r_cv_lib_hdf5=no))
- 	if test "${r_cv_lib_hdf5}" = yes; then
- 	  AC_DEFINE(HAVE_HDF5)
- 	else
- 	  LIBS=${ac_save_LIBS}
- 	fi
-       ])
-   ])
- dnl
  dnl R_FUNC___SETFPUCW
  dnl
  AC_DEFUN(R_FUNC___SETFPUCW,
--- 543,548 ----
Index: configure.in
===================================================================
RCS file: /home/rcvs/src/R/configure.in,v
retrieving revision 1.159
diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/29 00:22:50
***************
*** 342,348 ****
  ))
  AC_CHECK_LIB(dl, dlopen)
  AC_CHECK_LIB(z, main)
- R_LIB_HDF5
  BLAS="blas.o"
  if ${use_dxml}; then
    AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
--- 342,347 ----
***************
*** 394,400 ****
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   hdf5.h ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
--- 393,399 ----
  AC_HEADER_DIRENT
  AC_HEADER_SYS_WAIT
  AC_CHECK_HEADERS(dl.h dlfcn.h elf.h floatingpoint.h fpu_control.h \
!   ieee754.h ieeefp.h readline/history.h readline/readline.h \
    rpc/rpc.h rpc/xdr.h sys/param.h sys/stat.h sys/time.h sys/times.h \
    unistd.h locale.h)
  case "${host}" in
Index: src/main/Makefile.in
===================================================================
RCS file: /home/rcvs/src/R/src/main/Makefile.in,v
retrieving revision 1.51
diff -c -r1.51 Makefile.in
*** src/main/Makefile.in	2000/01/27 05:42:06	1.51
--- src/main/Makefile.in	2000/01/29 00:23:10
***************
*** 45,51 ****
  	gram.c \
  	gram-ex.c \
  	graphics.c \
- 	hdf5.c \
  	iosupport.c \
  	list.c \
  	logic.c \
--- 45,50 ----
Index: src/main/names.c
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.c,v
retrieving revision 1.119
diff -c -r1.119 names.c
*** src/main/names.c	2000/01/27 05:41:22	1.119
--- src/main/names.c	2000/01/29 00:23:18
***************
*** 515,522 ****
  {"parse",	do_parse,	0,	11,	4,	PP_FUNCALL},
  {"save",	do_save,	0,	111,	4,	PP_FUNCALL},
  {"load",	do_load,	0,	111,	2,	PP_FUNCALL},
- {"hdf5save",	do_hdf5save,	0,	0,	-1,	PP_FUNCALL},
- {"hdf5load",	do_hdf5load,	0,	11,	 2,	PP_FUNCALL},
  {"deparse",	do_deparse,	0,	11,	2,	PP_FUNCALL},
  {"dput",	do_dput,	0,	111,	2,	PP_FUNCALL},
  {"dump",	do_dump,	0,	111,	2,	PP_FUNCALL},
--- 515,520 ----
Index: src/main/names.h
===================================================================
RCS file: /home/rcvs/src/R/src/main/names.h,v
retrieving revision 1.51
diff -c -r1.51 names.h
*** src/main/names.h	2000/01/21 17:54:06	1.51
--- src/main/names.h	2000/01/29 00:23:19
***************
*** 181,188 ****
  SEXP do_gray(SEXP, SEXP, SEXP, SEXP);
  SEXP do_grep(SEXP, SEXP, SEXP, SEXP);
  SEXP do_gsub(SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5save (SEXP, SEXP, SEXP, SEXP);
- SEXP do_hdf5load (SEXP, SEXP, SEXP, SEXP);
  SEXP do_hsv(SEXP, SEXP, SEXP, SEXP);
  SEXP do_identify(SEXP, SEXP, SEXP, SEXP);
  SEXP do_if(SEXP, SEXP, SEXP, SEXP);
--- 181,186 ----

Index: src/scripts/INSTALL.in
===================================================================
RCS file: /home/rcvs/src/R/src/scripts/INSTALL.in,v
retrieving revision 1.29
diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/29 00:23:21
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then


--=-=-=
Content-Type: application/octet-stream
Content-Disposition: attachment; filename=Rhdf5-0.1.tar.gz
Content-Transfer-Encoding: base64
Content-Description: HDF5 module for R

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
f/Hv/wH51ZhiAGgBAA==
--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jan 29 10:04:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 29 Jan 2000 11:04:27 +0100 (MET)
Subject: [Rd] Re: E-mail to R-devel will have prefix, ok?
In-Reply-To: <14478.51270.541011.369015@gargle.gargle.HOWL>
References: <14478.51270.541011.369015@gargle.gargle.HOWL>
Message-ID: <14482.47915.762101.343163@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A short "private" discussion revealed that several people desire to
    MM> get a prefix in the "subject:"s of R-devel mailings.

    MM> I'd propose to set "[R-d]" as I've done it (manually, this time!)
    MM> above.  Unless I hear load protests, I'll set this.

    MM> your mailing list maintainer: Martin Maechler

We had no public feedback.  
Private feedback was
	 << Can't people sort by "Sender/From.." ? >>
Long prefixes are a nuisance because they obscure more of the real "Subject".

As a minimal compromise,  I've now added  "[Rd]"
   (+ the space, still makes 5 valuable characters..)
Martin

---------

R-lists maintainer
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon Jan 31 04:21:28 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 31 Jan 2000 15:21:28 +1100
Subject: [Rd] Interest in R plotting capabilities
Message-ID: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>

I'm a scheme and C user generally, I'm a bit wary of the large FORTRAN
content of the R language but aside from that issue it seems nice and simple
and easy to use.

What I want to do is find some GPL software to replace gnuplot,
and since R does all the calculating stuff that gnuplot does (probably
R is faster though I haven't tested) plus R has quite decent
plotting capabilities I thought that R might make a good candidate
for a plotting program.

I had a few problems in some particular areas though... gnuplot
can produce mesh plots of a 3D surface from regular grid samples in x,y,z
coordintes. Does R have a package that does anything like that?
Also, gnuplot supports both hidden-line mode (very slow but gets there)
and non-hidden line mode.

Another thing gnuplot can do is generate 2D contours from regular
grid samples of a 3D function. Is there any contour generation system
for R?

One final question, I looked over the GNU libplot library and it seems
to have excellent device handling capabilities and some decent font
selections but the actual plotting side of things is not nearly as good
as R. It seems kind of logical to add a module to R that provides all
the libplot devices as R devices since this would give the best of both
worlds and should require only ``glue'' code. Anyone thought of something
like this already?

By the way, I put some of my notes together as I was learning R and they
are at:

	http://www.progsoc.uts.edu.au/~telford/samples/R/

Hopefully I'll add to it as I figure things out but it could provide a
good place for beginners to start since it includes all the really
simple stuff that I had to figure out (I have no S reference). If someone
is writing an R tutorial, and if it will be under GPL, then they can grab
whatever they like from my notes.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Mon Jan 31 10:16:05 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Mon, 31 Jan 2000 10:16:05 +0000 (GMT)
Subject: [Rd] Interest in R plotting capabilities
In-Reply-To: <20000131152128.B26191@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.LNX.4.10.10001311009440.690-100000@localhost.localdomain>

> 
> I had a few problems in some particular areas though... gnuplot
> can produce mesh plots of a 3D surface from regular grid samples in x,y,z
> coordintes. Does R have a package that does anything like that?
> Also, gnuplot supports both hidden-line mode (very slow but gets there)
> and non-hidden line mode.
try persp(). Here's an example:
x<-seq(1,3)
y<-seq(1,3)
z<-seq(1,9)
data<-data.frame(x,y,z) 	#or read dataframe from disk file
x<-unique(data$x)
y<-unique(data$y)
z<-matrix(data$z,length(y),length(x))
image(x,y,z, col=gray(0:19/19),xlab="x", ylab="y")
contour(x,y,z,xlab="x", ylab="y")
persp(x,y,z, col="gray")

> Another thing gnuplot can do is generate 2D contours from regular
> grid samples of a 3D function. Is there any contour generation system
> for R?
contour() also filled.contour()
see above.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 10:07:16 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 11:07:16 +0100
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
References: <rfi4sbx7lsm.fsf@cathcart.sysc.pdx.edu>
Message-ID: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> Included below are:

>   1) Diffs to to remove HDF5 from R

>   2) Diffs to pass thru --with-* options to a module's configure
>      script during "R INSTALL".  (To reiterate a plea for this
>      capability...)  This applies only to Unix, the Windows (mingw32 in
>      my case) build approach of passing in make variables like
>      *-CFLAGS and *-LDFLAGS works fine.  The only hitch with the
>      Windows install is that I had to drop the `bundle' wrapper, which
>      was useful for Unix in order to give the package a recognizable
>      name with version number (Rhdf5-0.0), but the installed package
>      with R a minimal name (hdf5).

>   3) The module itself, as an attachment.

I made the changes to the R sources, and removed the obsolete files.

Re INSTALL, I had already committed the new `--configure-opts=' option,
which I still think is preferable to having `--with-*' explicitly.

Re the module, I have several comments.

* It would be nice to merge this into Doug Bates' foreign package.

* I think this should be one package, not a bundle.  Also, the version
info in DESCRIPTION does not match the actual number used.

* Makevars.in should not use LDFLAGS.  Instead, the -L flags should be
in PKG_LIBS (as explained in R-exts.texi).  Also, linking against the
libraries should only happen if these were found.  In general, I am not
sure how the package will install in case the libs are not there.

* The include statements in hdf5.c should conform to the new header file
structure.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jan 31 15:25:13 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 31 Jan 2000 16:25:13 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000131162513.plummer@iarc.fr>

On 31-Jan-00 Kurt Hornik wrote:
 
> * It would be nice to merge this into Doug Bates' foreign package.

I would prefer if you didn't do this.  The dependence of hdf5 on external
libraries causes problems when you distribute binary versions of R.
We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
difference between the two is that the latter is linked against libhdf5
and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
in a separate package means that we can distribute a single RPM for
R-base, and provide the extra functionality of access to hdf5 files in
a separate add-on package. Merging hdf5 and foreign would put us back
in the original position.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 31 15:21:10 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 31 Jan 2000 16:21:10 +0100 (MET)
Subject: [Rd] Feature requests for princomp(.) : Allow cor() specifications
Message-ID: <14485.43110.405973.902333@gargle.gargle.HOWL>

(all in subject).

If I want to do a PC analysis in a situation with missing data,
I may want to have same flexibility as with "cor(.)",
e.g., I may want

      princomp(x, ...,  use.obs = "pairwise.complete")


Actually, I may want even more flexibility.
Currently,
	princomp(.) 
has

    if (cor) 
        cv <- get("cor", envir = .GlobalEnv)(z)
    else cv <- cov(z)
    edc <- eigen(cv)

and If may want it to use a robust covariance or correlation matrix instead,
e.g.,

    princomp(x, cv = cov.mve(x), .....)

Note that for prcomp() which works on the SVD rather than the
correlation/cov. matrix,  similar flexibility may be required.

Opinions?
Volunteers?

(either one is sufficient to answer!)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan 31 15:26:24 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 31 Jan 2000 16:26:24 +0100 (CET)
Subject: [Rd] Re: HDF5 as a module
In-Reply-To: <XFMail.000131162513.plummer@iarc.fr>
References: <200001311007.LAA16294@aragorn.ci.tuwien.ac.at>
 <XFMail.000131162513.plummer@iarc.fr>
Message-ID: <14485.43424.783759.935990@fangorn.ci.tuwien.ac.at>

>>>>> Martyn Plummer writes:

> On 31-Jan-00 Kurt Hornik wrote:
>> * It would be nice to merge this into Doug Bates' foreign package.

> I would prefer if you didn't do this.  The dependence of hdf5 on external
> libraries causes problems when you distribute binary versions of R.
> We currently have two RPMs for R: R-base and R-base-with-hdf5.  The only
> difference between the two is that the latter is linked against libhdf5
> and the functions hdf5save() and hdf5load() are enabled.  Putting hdf5
> in a separate package means that we can distribute a single RPM for
> R-base, and provide the extra functionality of access to hdf5 files in
> a separate add-on package. Merging hdf5 and foreign would put us back
> in the original position.

But only if foreign is part of R, no?

(But I have no problem if hdf5 stays separate.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jan  1 15:40:50 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Jan 2000 16:40:50 +0100 (CET)
Subject: Segfault in dataentry() (PR#391)
In-Reply-To: <199912311709.SAA12673@pubhealth.ku.dk>
References: <199912311709.SAA12673@pubhealth.ku.dk>
Message-ID: <14446.8194.975894.184062@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:
>>> dataentry(0,0)

PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
PD> (TYPEOF(s)) {

PD> Apparently that one doesn't get trapped by the no-segfault checks.
PD> Martin?

> There's a not-so-short  "stop.list" of functions which are *NOT* tested for
> segfaults.   dataentry (w/ and w/o ".") is among them.
> all the interactive ones are, actually.
> [[remember:   The list was quite a bit shorter, and there were R core
> 	      members who complained...]] 

> Look in  ..../tests/make-no-segfault.R for the statements starting with

>  edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
>  misc.int <- c("browser", "bug.report", "menu")
>  stop.list[["base"]] <-
>     ..

> to find all the functions which are *not* tested for seg.faults.

> Maybe we (R-core) we should really always have
>       R_TESTLOTS=yes
> in our environments?

Actually, I'd prefer having some means of markup in the Rd source code
to indicate whether an object should not be employed for the no-segfault
testing.  We could still keep the R_TESTLOTS, though ...

E.g, the socket docs would have something correspding to \dontrun in the
examples section.

This should be cleaner than having to change the script in tests.

(Confusion arose when Fritz added old.packages() two days ago ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Jan  3 21:45:19 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 3 Jan 2000 22:45:19 +0100 (MET)
Subject: links in faq file broken (PR#393)
Message-ID: <200001032145.WAA29247@pubhealth.ku.dk>

Full_Name: A.I. McLeod
Version: 0.091
OS: NT
Submission from: (NULL) (129.100.45.131)


links are broken or missing in:

http://cran.r-project.org/doc/FAQ/R-FAQ.html

In the following section:

5.5 How can I create an R package?

This does not work:
See Creating R packages, for more information. 

since

http://cran.r-project.org/doc/FAQ/R-exts.html#Creating%20R%20pkgs

is missing.

There are many other missing links as well.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 09:37:03 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Tue, 4 Jan 2000 10:37:03 +0100 (MET)
Subject: formatC (bug and fix) (PR#394)
Message-ID: <200001040937.KAA02096@pubhealth.ku.dk>


OK:

> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"


NOT OK:

> formatC(as.integer(c(1,0,NA)))
[1] "0"          "1072693248" "NA"

> formatC(as.integer(c(0,1,NA)))
[1] "0"  "0"  "NA"


BUG TRACED TO R-code of formatC()

where

        x[!Ok] <- 0

unintendedly changes the storage.mode of x to double, while variable mode
still signifies 'integer'. Thus the following is probably ok as bug fix

        ProperZero <- 0
        storage.mode(ProperZero) <- mode
        x[!Ok] <- ProperZero


At least the following tests are positive using this fix

> formatC(as.integer(c(1,0,NA)))
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


Best regards


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 15:47:57 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 15:47:57 +0000 (GMT)
Subject: set functions
Message-ID: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>

I wonder if we might also include an "equiv" function along with the other
set functions (ie "union", "intersect", etc), perhaps along the lines of

"equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

(which I think might be the quickest implementation).  I use this type of
function quite frequently: is there some reason why it is not in the base?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 15:08:35 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 4 Jan 2000 16:08:35 +0100
Subject: format.char() speedup
Message-ID: <000901bf56c5$9357e3e0$a9021aac@joelschlaegel>



Happy new Year!

Here is a slightly changed version of format.char(), which really speeds up
for big data.


Regards


Jens Oehlschlgel-Akiyoshi


format.char.old <- format.char

format.char <-
function (x, width = NULL, flag = "-")
{
    if (is.null(x))
        return("")
    if (!is.character(x)) {
        warning("format.char: coercing 'x' to 'character'")
        x <- as.character(x)
    }
    if (is.null(width) && flag == "-")
        return(format(x))
    at <- attributes(x)
    nc <- nchar(x)
    if (is.null(width))
        width <- max(nc)
    else if (width < 0) {
        flag <- "-"
        width <- -width
    }
    # start of accelerate
    no <- pmax(0, width - nc)
    tab <- unique(no)
    tabpad <- sapply(tab+1, function(no) paste(character(no), collapse = "
"))
    pad <- tabpad[match(no, tab)]
    # end of accelerate
    r <- if (flag == "-")
        paste(x, pad, sep = "")
    else paste(pad, x, sep = "")
    if (!is.null(at))
        attributes(r) <- at
    r
}

> system.time(format.char(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA
> system.time(format.char.old(character(10), width=30))
[1] 0.01 0.00 0.01   NA   NA

> system.time(format.char(character(100000), width=30))
[1] 3.90 0.02 3.92   NA   NA
> system.time(format.char.old(character(100000), width=30))
[1] 92.33  0.35 92.69    NA    NA

> system.time(format.char(character(1000), width=1:1000))
[1] 2.69 0.00 2.68   NA   NA
> system.time(format.char.old(character(1000), width=1:1000))
[1] 2.55 0.00 2.55   NA   NA

> system.time(format.char(character(100000), width=1:1000))
[1] 28.71  0.00 28.72    NA    NA
> system.time(format.char.old(character(100000), width=1:1000))
Error: heap memory (65536 Kb) exhausted [needed 0 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 269.1 0.28 269.56 NA NA




--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:16:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:16:48 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 15:47:57 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041528420.20724-100000@laplace>
Message-ID: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> I wonder if we might also include an "equiv" function along with the other
> set functions (ie "union", "intersect", etc), perhaps along the lines of
> 
> "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> (which I think might be the quickest implementation).  I use this type of
> function quite frequently: is there some reason why it is not in the base?

length(setdiff(x,y))==0 appears to be about twice as fast....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:17:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:17:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

> length(setdiff(x,y))==0 appears to be about twice as fast....

But I don't think that would be right!

length(setdiff(1:4, 1:5))==0	# is TRUE
equiv(1:4, 1:5)			# clearly FALSE

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:39:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:39:58 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:17:33 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041612590.20724-100000@laplace>
Message-ID: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> On 4 Jan 2000, Peter Dalgaard BSA wrote:
> 
> > > "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> 
> > length(setdiff(x,y))==0 appears to be about twice as fast....
> 
> But I don't think that would be right!
> 
> length(setdiff(1:4, 1:5))==0	# is TRUE
> equiv(1:4, 1:5)			# clearly FALSE

Argh. I was thinking of the symmetric set difference. So you'd need 
setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
as twice as fast....

However:

equiv<-function(x,y) 
    length(x<-unique(x))==length(y<-unique(y)) && 
    all(sort(x)==sort(y)) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  4 16:55:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jan 2000 17:55:02 +0100
Subject: set functions
In-Reply-To: Jonathan Rougier's message of "Tue, 4 Jan 2000 16:45:12 +0000 (GMT)"
References: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>
Message-ID: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> > equiv<-function(x,y) 
> >     length(x<-unique(x))==length(y<-unique(y)) && 
> >     all(sort(x)==sort(y)) 
> 
> Yes, I wondered about that, and also about
> 
> "equiv" <-
> function(x, y) {
>   x <- unique(x)
>   y <- unique(y)
>   length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
> }
> 
> but I thought that perhaps a sort would be more expensive than a second
> call to match, and more so for two sorts.  Cheers, Jonathan.

Watch:

> x<-1:50000
> y<-x[order(runif(50000))]
> "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> equiv<-function(x,y) 
+     length(x<-unique(x))==length(y<-unique(y)) && 
+     all(sort(x)==sort(y)) 
> system.time(equiv2(x,y))
[1] 3.10 0.02 3.00 0.00 0.00
> system.time(equiv(x,y))
[1] 0.77 0.00 1.00 0.00 0.00
> 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:45:12 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:45:12 +0000 (GMT)
Subject: set functions
In-Reply-To: <x21z7xg59d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041637120.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> > length(setdiff(1:4, 1:5))==0	# is TRUE
> > equiv(1:4, 1:5)			# clearly FALSE
> 
> Argh. I was thinking of the symmetric set difference. So you'd need 
> setdiff(y,x)==0 & setdiff(x,y)==0 which is obviously only half as fast
> as twice as fast....
> 
> However:
> 
> equiv<-function(x,y) 
>     length(x<-unique(x))==length(y<-unique(y)) && 
>     all(sort(x)==sort(y)) 

Yes, I wondered about that, and also about

"equiv" <-
function(x, y) {
  x <- unique(x)
  y <- unique(y)
  length(x)==length(y) && all(1:length(y) == sort(match(x, y, 0)))
}

but I thought that perhaps a sort would be more expensive than a second
call to match, and more so for two sorts.  Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  4 16:59:45 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 4 Jan 2000 16:59:45 +0000 (GMT)
Subject: set functions
In-Reply-To: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>

On 4 Jan 2000, Peter Dalgaard BSA wrote:

> Watch:
> 
> > x<-1:50000
> > y<-x[order(runif(50000))]
> > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> > equiv<-function(x,y) 
> +     length(x<-unique(x))==length(y<-unique(y)) && 
> +     all(sort(x)==sort(y)) 
> > system.time(equiv2(x,y))
> [1] 3.10 0.02 3.00 0.00 0.00
> > system.time(equiv(x,y))
> [1] 0.77 0.00 1.00 0.00 0.00

Yup -- that's much quicker!  To re-ask the original question, would it be
reasonable to include such a function along with the other set functions?
Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sino123@hotmail.com  Wed Jan  5 03:16:22 2000
From: sino123@hotmail.com (sino123@hotmail.com)
Date: Wed, 05 Jan 2000 11:16:22 +0800
Subject: Welcome to post your business and trade offers in sino trade Leads wwwboard!
Message-ID: <36530.469699421292800.85126@localhost>

http://tradeleads.heha.net

Do you want to reach 20,000,000 worldwide manufacturers and traders ?! 
Do you want to find your product a buyer within hours ?! 
Do you want to explore foreign market ?! 

Welcome to post your business and trade offers in trade Leads wwwboard!

http://tradeleads.heha.net

is a professional Trade BBS where you can post and search worldwide trade and
business information. 
--------------------------------------------------------------------------------
This is not Spamming, you receive this email because you have subscribe or post
to one of our business Netowrk website's information services. 
To be removed from this NEWSLETTER, please send emailto: sino123@sinoleads.com
--------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  5 09:50:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Jan 2000 10:50:11 +0100 (MET)
Subject: set functions
In-Reply-To: <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
References: <x2yaa5epzt.fsf@blueberry.kubism.ku.dk>
 <Pine.GSO.4.20.0001041656580.20724-100000@laplace>
Message-ID: <14451.5075.867165.954414@gargle.gargle.HOWL>


 On 4 Jan 2000, Peter Dalgaard BSA wrote:
 > Watch:
 > 
 > > x<-1:50000
 > > y<-x[order(runif(50000))]
 > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
 > > equiv<-function(x,y) 
 > +     length(x<-unique(x))==length(y<-unique(y)) && 
 > +     all(sort(x)==sort(y)) 
 > > system.time(equiv2(x,y))
 > [1] 3.10 0.02 3.00 0.00 0.00
 > > system.time(equiv(x,y))
 > [1] 0.77 0.00 1.00 0.00 0.00

    JonR> Yup -- that's much quicker!  To re-ask the original question,
    JonR> would it be reasonable to include such a function along with the
    JonR> other set functions?  Cheers, Jonathan.

quite a good idea, particularly, since we all have now learned that it is
non-trivial to write really efficiently.

However, I think "equiv" is not specific enough (could mean "equivalence of
arbitrary R objects").
Wouldn't  "setequiv" or "setequal" be better ?

((and would you provide (to R-core)  patches to
    src/library/base/R/sets.R and src/library/base/man/sets.Rd))

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  5 10:21:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 5 Jan 2000 10:21:24 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001051017030.10525-100000@auk.stats>

On Wed, 5 Jan 2000, Martin Maechler wrote:

>  On 4 Jan 2000, Peter Dalgaard BSA wrote:
>  > Watch:
>  > 
>  > > x<-1:50000
>  > > y<-x[order(runif(50000))]
>  > > "equiv2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
>  > > equiv<-function(x,y) 
>  > +     length(x<-unique(x))==length(y<-unique(y)) && 
>  > +     all(sort(x)==sort(y)) 
>  > > system.time(equiv2(x,y))
>  > [1] 3.10 0.02 3.00 0.00 0.00
>  > > system.time(equiv(x,y))
>  > [1] 0.77 0.00 1.00 0.00 0.00
> 
>     JonR> Yup -- that's much quicker!  To re-ask the original question,
>     JonR> would it be reasonable to include such a function along with the
>     JonR> other set functions?  Cheers, Jonathan.
> 
> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

Some of us knew that. What worries me a bit is that optimizing code for the
current R may not be a good idea. R currently spends a lot of its
time on garbage collection (30 to 50% on my profiling) and it is planned to 
alter the memory allocator real soon now.  When hashing of environments
was introduced it made a lot of difference to some code, and little to
others.  That's not to say that we should not optimize, but
trying hard may be a waste of time. (Says he having learnt the hard way
across S-PLUS versions.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan  5 12:10:19 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 5 Jan 2000 12:10:19 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001051145270.21562-100000@laplace>

On Wed, 5 Jan 2000, Martin Maechler wrote:

> quite a good idea, particularly, since we all have now learned that it is
> non-trivial to write really efficiently.

And I've just noticed that Peter's ultra-quick sorting algorithm stumbles
over NAs:

"setequal" <- function(x,y)
  length(x<-unique(x))==length(y<-unique(y)) && all(sort(x)==sort(y))

"setequal2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

setequal(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal2(c(NA, 1:4), c(1:4, NA))	# TRUE

setequal(c(NA, 1:4), c(1:4, 5))		# FALSE plus warning message
setequal2(c(NA, 1:4), c(1:4, 5))	# FALSE

Putting na.last=TRUE in sort does not help, as then there is a missing
logical for the && following the call to all.  Might I suggest, in the
light of Brian's comments, that setequal2 is more in the spirit of the
other set functions?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Wed Jan  5 18:08:28 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Wed, 5 Jan 2000 19:08:28 +0100 (MET)
Subject: bug in glm.fit (PR#395)
Message-ID: <200001051808.TAA22156@pubhealth.ku.dk>

Dear R-team

There seems to be a bug in glm.fit - I got the following error message:

> > > + Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null
else glm.fit)(x = X, y = Y,
  
> > traceback()
[1] "names<-.default(*tmp*, value = ynames)"                                  
[2] "names<-(*tmp*, value = ynames)"                                          
[3] "(if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y, "      
[4] "    weights = weights, start = start, offset = offset, family = family, "
[5] "    control = control, intercept = attr(mt, \"intercept\") > 0)"         
[6] "glm(SKR.ein.aus ~ MWSQUAL + FAC.M1 + FAC.M2 + FAC.A1 + FAC.A2 + "        
[7] "    MLDR + TAGNR, family = binomial, data = daten[rows, ])"              


Debugging glm.fit I found the following: when some elements of the vector
`good' are FALSE then `w' has no more "full" length:

  w <- sqrt((weights * mu.eta.val^2)[good]/variance(mu)[good])

which leads to problems close to the end of the function:

  names(w) <- ynames

as `ynames' has "full" length.

The same problem is with:

  names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", nobs - 
        fit$rank))

as `fit$effects' has same length as `w'.

That's all I found out. I hope it helps.

I am sorry for not sending the data but as it is secret it would take some
effort to "disguise" it, so it that's not necessary I would be quite
grateful... 

Thanks, Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan  5 18:49:56 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 Jan 2000 13:49:56 -0500
Subject: anoncvs
Message-ID: <38739254.30002A77@bank-banque-canada.ca>

I'm trying to do

cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

and I get "authorization failed...rejected access" with the previously
advertised password (anoncvs). Has the access been changed or is anyone
else having this problem? I'm not very familiar with cvs so I may be
making some mistake.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan  5 19:00:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Jan 2000 13:00:42 -0600
Subject: network outage 1/9/2000 05:00 - 09:30 CST
Message-ID: <6rembwfin9.fsf@franz.stat.wisc.edu>

The University of Wisconsin - Madison has scheduled another period of
network down time for Sun, Jan 9, 2000, 05:00 - 09:30 local time
(2000/01/09 11:00 - 15:30 GMT).  This will affect the r-project.org,
omegahat.org and madisonlinux.org domains.  The primary nameservers
for those domains and some of the http servers will be inaccessible.

------- Start of forwarded message -------
To: cs-announce@cs.wisc.edu
Subject: campus/internet network outage 1/9/2000 05:00 - 09:30
Date: Wed, 05 Jan 2000 12:48:59 -0600

>From DoIT Network Engineering:

     OUTAGE REMINDER FOR 1/9/2000
     We have a major outage scheduled for this Sunday starting 5AM and 
     estimated end time of 9:30AM.
     
     Here's some details for those of you interested.
     1)  Upgrade Ethernet switch code across the entire backbone.
     2)  Upgrade ATM switch code across the entire backbone.
     3)  BIGMACC router will be getting a new chassis allowing it to become 
     "two" routers.  A code upgrade will be performed one of the BigMacc 
     routers.
     4)  All Routers will be receiving upgraded ATM interfaces.
     
     This outage will affect all campus users that need campus backbone and 
     internet access during this time period.  
     
     The length of the outage will vary for each customer and the whole 
     outage period will be needed.
     

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From 1hotbuy@4-charity.org  Wed Jan  5 19:05:26 2000
From: 1hotbuy@4-charity.org (1hotbuy@4-charity.org)
Date: Wed, 05 Jan 2000 19:05:26
Subject: stock idea dvdt
References: 0A2E82C38
Message-ID: <200001052338.PAA09097@romulus.netpage.com>

<HTML><FONT  SIZE=3 PTSIZE=10><B>Press Release</B><BR>
<BR>
Stockreporter Announces Investment Opinion on Digital Video Display Technology Corp.; Strong Buy Recommendation and Share Price Target of $6.00 in First Year <BR>
NEW YORK, Oct 21, 1999 (BUSINESS WIRE) -- Digital Video Display Technology Corp. (OTCBB:DVDT) received a strong buy recommendation today from Stockreporter, a leading European financial Internet publication at <A HREF="http://www.stockreporter.de">http://
<BR>
Stockreporter specializes in the coverage of micro caps and undervalued OTC and BB companies and is the first international analyst to cover DVDT and publish an investment opinion. Stockreporter very conservatively values DVDT stock at $6.00 per share in
Stockreporter has an extraordinary record of successful buy recommendations, with unusual share price appreciation following its coverage. Examples are: FutureLink Distribution (FLNK), Teltran International (TLTG) and Geotele.com Inc.(GEOL).<BR>
<BR>
Dennis C. Hass of Stockreporter commented on the recommendation: "DVDT represents an extraordinary investment opportunity! Buying its stock is not just investing in a business that is ready to experience outstanding success with a product line that will r
<BR>
For More Information on DVDT Visit:<BR>
<A HREF="http://www.dvdtinvestors.com">www.dvdtinvestors.com</A><BR>
<A HREF="http://www.market-info.com">www.market-info.com</A><BR>
<BR>
Copyright (C) 1999 Business Wire. All rights reserved.<BR>
Distributed via COMTEX. <BR>
CONTACT:     <BR>
Stockreporter.de, Hamburg, Germany<BR>
Mr. Dennis C. Hass, +49-172-4062621<BR>
Email:<A HREF="mail to:contact@stockreporter.de">contact@stockreporter.de</A><BR>
Homepage:<A HREF="www.stockreporter.de">www.stockreporter.de</A><BR>
WEB PAGE:<A HREF="http://www.businesswire.com">http://www.businesswire.com</A><BR>
GEOGRAPHY:NEW YORK INTERNATIONAL EUROPE<BR>
INDUSTRY CODE: INVESTMENT OPINION<BR>
Today's News On The Net - Business Wire's full file on the Internet<BR>
with Hyperlinks to your home page. <BR>
<B><BR>
Disclaimer:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>This publication contains forward-looking statements within the meaning of Section 27A of the Securities Act of 1933 and Section 21E of the Securities Exchange Act of 1934. The Company's actual results could differ materially
This message is sent in compliance of the new e-mail bill: SECTION 301, Paragraph (a)(2) (C) of S. 1618 <BR>
Sender: 4-you.com, 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004 <BR>
To be removed form this mailing list, simply reply with remove in subject line: <A HREF="mailto:4-charity@4-charity.org">4-charity@4-charity.org</A><BR>
</FONT><FONT  SIZE=3 PTSIZE=10><BR>
<B>Disclosure:</B><BR>
</FONT><FONT  SIZE=2 PTSIZE=8>4-you.com, Inc publishes information regarding selected companies involved in many different industries, which those interested in these companies may use as information relating to their interests or investments. Many compan
<A HREF="mailto:4-charity@4charity.org">mailto:4-charity@4-charity.org</A> , 4-you.com, Inc. 2600 N. Central Ave. Suite 720 Phoenix, AZ 85004<BR>
</HTML>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  6 08:41:19 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Jan 2000 09:41:19 +0100 (MET)
Subject: anoncvs -- use rsync !
In-Reply-To: <38739254.30002A77@bank-banque-canada.ca>
References: <38739254.30002A77@bank-banque-canada.ca>
Message-ID: <14452.21807.441840.482333@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I'm trying to do cvs -d
    PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login

    PaulG> and I get "authorization failed...rejected access" with the
    PaulG> previously advertised password (anoncvs). Has the access been
    PaulG> changed or is anyone else having this problem? I'm not very
    PaulG> familiar with cvs so I may be making some mistake.

hmm,  I thought we finally *didn't* allow anonymous cvs,
{one reason being the log files publicity?},

but rather recommend and advertize  rsync (which also works for CRAN, btw).

I have cron jobs calling shell scripts like

#---------------------------------------
RSYNC=/usr/local/bin/rsync

cd /usr/local/app/R/R-devel
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-devel .
cd /usr/local/app/R/R-release-patched
$RSYNC -Cuvrlt --delete rsync.r-project.org::r-release-patched .
#---------------------------------------

rsync   is available in  Linux ("any newer distribution", probably),
or from

   ftp://samba.anu.edu.au/pub/rsync/

Excerpts from its README:

>> WHAT IS RSYNC?
>> --------------
>> 
>> rsync is a replacement for rcp that has many more features.
>> 
>> rsync uses the "rsync algorithm" which provides a very fast method for
>> bringing remote files into sync. It does this by sending just the
>> differences in the files across the link, without requiring that both
>> sets of files are present at one of the ends of the link beforehand.
>> At first glance this may seem impossible because the calculation of
>> diffs between two files normally requires local access to both
>> files. 
>> 
>> .....
>> 
>> RSYNC SERVERS
>> -------------
>> 
>> rsync can also talk to "rsync servers" which can provide anonymous or
>> authenticated rsync. See the rsyncd.conf(5) man page for details on how
>> to setup a rsync server. See the rsync(1) man page for info on how to
>> connect to a rsync server.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jan  6 09:19:33 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 6 Jan 2000 09:19:33 +0000 (GMT)
Subject: set functions
In-Reply-To: <14451.5075.867165.954414@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.20.0001060904580.22904-100000@laplace>

Hi Martin,

> However, I think "equiv" is not specific enough (could mean "equivalence of
> arbitrary R objects").
> Wouldn't  "setequiv" or "setequal" be better ?
> 
> ((and would you provide (to R-core)  patches to
>     src/library/base/R/sets.R and src/library/base/man/sets.Rd))

I think, after all of the discussion, particularly Brian's helpful
interventions, the original function prevails, although Peter's suggested
sorting function was very instructive.

"setequal" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

The help function needs the following modifications:

\alias{setequal}

\description{Performs set union, intersection, difference, equality and
membership on two vectors.}

\usage{
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(x, y)
}

%% There appears to be an extra tab or other white space in the arguments
%% field.

\examples{
x <- sample(1:20, 10)
y <- sample(3:23, 7)
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)
is.element(y, x)
}

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 14:28:46 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 08:28:46 -0600
Subject: anoncvs -- use rsync !
In-Reply-To: Martin Maechler's message of "Thu, 6 Jan 2000 09:41:19 +0100 (MET)"
References: <38739254.30002A77@bank-banque-canada.ca> <14452.21807.441840.482333@gargle.gargle.HOWL>
Message-ID: <6r7lhns28x.fsf@franz.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
>     PaulG> I'm trying to do cvs -d
>     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> 
>     PaulG> and I get "authorization failed...rejected access" with the
>     PaulG> previously advertised password (anoncvs). Has the access been
>     PaulG> changed or is anyone else having this problem? I'm not very
>     PaulG> familiar with cvs so I may be making some mistake.
> 
> hmm,  I thought we finally *didn't* allow anonymous cvs,
> {one reason being the log files publicity?},
> 
> but rather recommend and advertize  rsync (which also works for CRAN, btw).

We were providing anonymous cvs access in addition to anonymous rsync
access but now the configuration for the anonymous pserver account
seems to be botched up.  I don't know enough about the anonymous cvs
setup to fix it right now and don't have time to learn about it.  If
Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
fixed.  Otherwise I recommend we discontinue anonymous cvs.  

Most everything people want from anonymous cvs can be accomplished
much more cleanly with anonymous rsync.  The only advantages of
anonymous cvs are for people who do want to read the log files or want
to check out copies of earlier versions.

Since any checkouts by the anonymous user must be able to update the
history files, the anonymous CVS tree is actually a copy of the
production CVS tree.  

I would recommend using anonymous rsync.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@stat.berkeley.edu  Thu Jan  6 16:27:50 2000
From: duncan@stat.berkeley.edu (Duncan Temple Lang)
Date: Thu, 6 Jan 2000 08:27:50 -0800 (PST)
Subject: anoncvs -- use rsync !
In-Reply-To: <6r7lhns28x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>



On 6 Jan 2000, Douglas Bates wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> > 
> >     PaulG> I'm trying to do cvs -d
> >     PaulG> :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login
> > 
> >     PaulG> and I get "authorization failed...rejected access" with the
> >     PaulG> previously advertised password (anoncvs). Has the access been
> >     PaulG> changed or is anyone else having this problem? I'm not very
> >     PaulG> familiar with cvs so I may be making some mistake.
> > 
> > hmm,  I thought we finally *didn't* allow anonymous cvs,
> > {one reason being the log files publicity?},
> > 
> > but rather recommend and advertize  rsync (which also works for CRAN, btw).
> 
> We were providing anonymous cvs access in addition to anonymous rsync
> access but now the configuration for the anonymous pserver account
> seems to be botched up.  I don't know enough about the anonymous cvs
> setup to fix it right now and don't have time to learn about it.  If
> Tony Rossini or Duncan Temple Lang have time to fix it, we'll get it
> fixed.  Otherwise I recommend we discontinue anonymous cvs.  
> 
> Most everything people want from anonymous cvs can be accomplished
> much more cleanly with anonymous rsync.  The only advantages of
> anonymous cvs are for people who do want to read the log files or want
> to check out copies of earlier versions.
> 
> Since any checkouts by the anonymous user must be able to update the
> history files, the anonymous CVS tree is actually a copy of the
> production CVS tree.  
> 
> I would recommend using anonymous rsync.



I just tried the login  and checkout commands 
(from an account on a machine that knows nothing about
franz/cvs.r-project.org) and they seem to be working fine.

Did somebody fix things? If not, shall I remove the
anonymous CVS access and we only allow rsync.

D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:35:22 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:35:22 -0800
Subject: anoncvs -- use rsync !
In-Reply-To: Duncan Temple Lang's message of "Thu, 6 Jan 2000 08:27:50 -0800 (PST)"
References: <Pine.SOL.4.21.0001060823320.15186-100000@sauron.Berkeley.EDU>
Message-ID: <87yaa3xinp.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@stat.berkeley.edu> writes:

    DTL> I just tried the login and checkout commands (from an account
    DTL> on a machine that knows nothing about
    DTL> franz/cvs.r-project.org) and they seem to be working fine.

    DTL> Did somebody fix things? 

I did.

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Jan  6 16:33:36 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:33:36 -0800
Subject: anoncvs for R should work again
Message-ID: <871z7vyxb3.fsf@alpha.cfas.washington.edu>



anoncvs for R should work again.  If you use it, please try it.  If
you use it and don't particularly want it to go away (rsync gets you
the source w/o the logs, but if you particularly want the logs and the
ability to create diffs between revisions, like I sometimes want to
do...), you might say something.

If you don't know what I'm talking about, it's probably not
important. 

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:25:02 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:25:02 -0600
Subject: Are blank fields allowed in SAS data sets?
Message-ID: <6r4scq941d.fsf@franz.stat.wisc.edu>

Saikat DebRoy and I have been working on an R package that, among
other things, will read SAS data libraries in the XPORT format.  Even
though a SAS data set is of a fairly simple structure, it is a
challenge to write code to read the libraries "properly".  In fact, I
am beginning to think that file format is not well-defined.

Here is the situation:  

  - a SAS data set is a table.  The columns can be numeric (in the
    XPORT format the only numeric format allowed is the IBM mainframe
    double precision format) or character strings.  In a character
    column, all the strings are blank-padded to the same length and
    that length is included in the header information.  There is no
    terminator character for strings.  There is no record terminator
    character.
  - a SAS library file can contain more than one table.
  - the header information for each table includes the number of
    columns and the format of each column but does _not_ include the
    number of rows.  (Why not? Remember that SAS was developed at a
    time when any large amount of data was stored on punched cards or
    magnetic tape.  SAS functions as a data filter, for the most
    part.  You don't know how many rows you have until you get to the
    end and then you can't go back and change the beginning because of
    the way magnetic tape drives work.  Of course, the relevance of
    these considerations to computing resources in the year 2000 is
    questionable.) 

So how do you know when you have reached the end of one data set and
started another?  SAS always works in blocks of 80 bytes.  If the last
record in a table does not completely fill an 80 byte block, the
remainder of the block is blank-padded.  The next table will begin
with 80 bytes that must be exactly
"HEADER RECORD*******MEMBER  HEADER RECORD!!!!!!!000000000000000001600000000140  "
except on certain VAX/VMS computers where the 140 at the end is 136.

I ran into a situation where the data were 484 rows of 8 numeric
columns.  The total length of each record is 64 bytes so the data
proper occupies 30976 bytes, not counting the headers.  This is a
total of 387 complete 80 byte blocks with 16 bytes left over.  That
last block is padded with 64 blanks.

So how do we know that these 64 blanks are not another data record?
In the case of numeric data, the particular number corresponding to 8
blanks (using the IBM mainframe floating point format, not the IEEE
format) is

> Pheno[745,]
           INDIV         TIME         DOSE       WEIGHT         CONC
745 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40 3.687825e-40
          NEWSUB     APGARLOW         TLAG
745 3.687825e-40 3.687825e-40 3.687825e-40

We can probably employ some heuristics and say that this is not a
common value so we guess that the 64 blanks are padding and not
another data record.  

But what if they had been 8 character fields, each of width 8 bytes?
Is it possible to distinguish between a blank record and blank
padding?  I can't see that it is possible.  Is there some restriction
in SAS that says you can't have a record in which all the fields are
blank?

One could pass this off as of little interest to the R community
except that this format is now a "standard" that has been adopted by
the United States Food and Drug Administration (FDA).  See
       http://www.sas.com/software/industry/pht/fda/index.html

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan  6 23:51:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 17:51:14 -0600
Subject: Are blank fields allowed in SAS data sets?
In-Reply-To: Douglas Bates's message of "06 Jan 2000 17:25:02 -0600"
References: <6r4scq941d.fsf@franz.stat.wisc.edu>
Message-ID: <6r1z7u92tp.fsf@franz.stat.wisc.edu>

Sorry to respond to my own post but I did a little more searching in
the Q&A document at SAS Institute regarding the FDA's adoption of the
SAS XPORT format and found they do address the issue I mentioned
and they have a solution.  The solution is "Don't do that!".  :-)

Here is the direct quote from
	http://www.sas.com/software/industry/pht/fda/faq.html

Q.     Is it difficult to detect the end of file when reading a data set stored in
       XPORT transport format? 

   A.  Under certain circumstances it is difficult to detect the end of file
       when reading a data set in XPORT transport format. Below is an
       explanation and a suggested fix that will alleviate the problem. 

       The problem occurs when the record length of a file is less than 80
       characters. The transport format writes 80 byte records. The last
       observation may not fill up an 80 byte record. When this happens the
       SAS System will pad the 80 byte record with blanks. When reading a
       transport file, the SAS System treats trailing blanks as insignificant. If
       the records are shorter than 80 bytes and if the last record written
       contains nothing but blank characters then the file comes up one
       record short. 

       The key to avoiding this potential problem is to undertake preventative
       measures described below. 

       One preventative measure could be to make sure that the
       circumstances do not exist. Avoid creating a data set where: 

         1.The observation length (the sum of the variable sizes) is less than
           80 and 
         2.The variables are all character and 
         3.The last record has all blank values. 

       Another preventative measure could be to save original data in
       transport format, extract new data from the transport file, then run
       PROC COMPARE to compare the original data to the new data.
       Output from PROC COMPARE can validate that the new data
       extracted from the transport file is identical to the original
       data. 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jan 10 01:40:37 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Mon, 10 Jan 2000 02:40:37 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
Message-ID: <200001100140.CAA20927@pubhealth.ku.dk>

Depending on the setting of par()$usr, 
the 'at' setting in mtext(.., adj=0, outer=T) may cause the
text to appear in an anomalous position (e. g. in the first
instance below, at the left of the plot region rather than
at 'at=0' in the figure region), or the text may not appear
at all.

If one does not set the 'at' parameter the text appears
(with 'adj=0') on the far left of the plot region.  I assume
this is also anomalous; at all events it is the behaviour
that I wished to circumvent.

The function plot.test() demonstrates the behaviour:

plot.test <-
function(xval=0:4, pos=NULL){
oldpar<-par(oma=c(2,0,0,0))
on.exit(par(oldpar))
plot(xval,xval)
if(is.null(pos))pos<-min(xval)
print(pos)
print(par()$usr)
mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
}

> plot.test(xval=0:4)  # "Outer text appears on left of the figure region
[1] 0
[1] -0.16  4.16 -0.16  4.16
> plot.test(xval=20:24)  # "Outer text does not appear at all
[1] 20
[1] 19.84 24.16 19.84 24.16
> # Check that at=0 does not work
> plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
[1] 0
[1] 19.84 24.16 19.84 24.16
>


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 10:53:50 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101053.LAA25066@pubhealth.ku.dk>

Dear R-team

As I didn't get any answer to my bug-report last week I have taken the
effort and extracted a minimal data set from my data (see below) where the
following bug occurs:

> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  


"bugdata" <-
structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
-0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
-0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
-0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
    FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
    -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
    -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
    0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
    -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
    0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
    -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
    0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
    1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
    0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
"FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
), row.names = c("139", "140", "141", "142", "143", "144", "145", 
"146", "147", "148", "149", "150", "151", "152", "153", "154", 
"155", "156", "157", "158"), class = "data.frame")


I hope, this makes it possible to find the bug.

Peter

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:lqs, package:MASS, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jan 10 11:38:23 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 12:38:23 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101138.MAA25983@pubhealth.ku.dk>

>>>>> "PeHo" == Peter Holzer <holzer@stat.math.ethz.ch> writes:

    PeHo> Dear R-team As I didn't get any answer to my bug-report last week
    PeHo> I have taken the effort and extracted a minimal data set from my
    PeHo> data (see below) where the following bug occurs:

    >> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action =
    >> na.omit)
(the  ", na.action = na.omit" doesn't matter since the examples hasn't got
 any NA)

   >> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector

   >> In addition: Warning messages: 
   >> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
   >> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

So, "7:" really says that the Algorithm didn't converge.

Of course, there *is* a bug, namely, ending in such an (unhelpful) error
instead of doing something better.

If I run this example through S-plus 5.1 (Linux),
it doesn't converge either,
but does return a (possibly completely wrong ??) result, and only warns you
with one line that you shouldn't overlook :

>> S> glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)

>> Call:
>> glm(formula = SKR.ein.aus ~ ., family = binomial, data = bugdata)
>> 
>> Coefficients:
>>  (Intercept)    TAGNR    FAC.A1   FAC.A2      MLDR   MWSQUAL    FAC.M1 
>>    -5022.282 1.561878 -169.0165 135.3793 0.6264029 -143.0841 -115.7853
>> 
>>     FAC.M2 
>>  -233.0438
>> 
>> Degrees of Freedom: 20 Total; 12 Residual
>> Residual Deviance: 0.674096 
>> There were 12 warnings (use warnings() to see them)

If you are careful enough to *read* the last line,
and then type warnings(), you see

>> Warning messages --
>> 1: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 2: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 3: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 4: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 5: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 6: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 7: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 8: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 9: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 10: Model unstable; fitted probabilities of 0 or 1 in: family$deriv(mu)
>> 11: fitted values close to 0 or 1 in: family$deviance(mu, y, w)
>> 12: linear convergence not obtained in  10  iterations. in: glm.fitter(x = X,
>> 	y = Y, w = w, start = start, offset = offset, family = family,  ...

((which *is* slightly better than R's warnings...))

    PeHo> I hope, this makes it possible to find the bug.

Yes, thanks a lot, Peter!

Tracing the iterations is really the good idea here:
glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, maxit= 30, trace=TRUE)

gives

    Deviance = 15.39188 Iterations - 1 
    Deviance = 13.67612 Iterations - 2 
    Deviance = 12.02264 Iterations - 3 
    Deviance = 10.41495 Iterations - 4 
    Deviance = 9.021518 Iterations - 5 
    Deviance = 8.260037 Iterations - 6 
    Deviance = 7.468748 Iterations - 7 
    Deviance = 4.597021 Iterations - 8 
    Deviance = 1.523395 Iterations - 9 
    Deviance = 0.5131087 Iterations - 10 
    Deviance = 0.1843927 Iterations - 11 
    Deviance = 0.06750712 Iterations - 12 
    Deviance = 0.0248701 Iterations - 13 
    Deviance = 0.00919058 Iterations - 14 
    Deviance = 0.003411904 Iterations - 15 
    Deviance = 0.001281922 Iterations - 16 
    Deviance = 0.0004972102 Iterations - 17 
    Deviance = 0.0002082669 Iterations - 18 
    Deviance = 0.0001069153 Iterations - 19 
    Deviance = 6.777993e-05 Iterations - 20 
    Deviance = 5.338077e-05 Iterations - 21 
    Deviance = 4.808323e-05 Iterations - 22 
    Error in names<-.default(*tmp*, value = ynames) : names attribute must be the same length as the vector
    In addition: There were 18 warnings (use warnings() to see them)

(doing the same in S-plus also shows yo that the deviance goes to 0
 and no convergence is reached).

------
Now, the "real" glm()ers are called for...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 12:33:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 13:33:13 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101233.NAA27379@pubhealth.ku.dk>

> Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
> From: holzer@stat.math.ethz.ch
> 
> Dear R-team
> 
> As I didn't get any answer to my bug-report last week I have taken the
> effort and extracted a minimal data set from my data (see below) where the
> following bug occurs:
> 
> > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
> Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
same length as the vector
> In addition: Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 6: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) 
glm.fit.null else glm.fit)(x = X, y = Y,  
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> 
> 
> "bugdata" <-
> structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 
> 16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(1.890074713, 
> 0.285627892, -0.728152664, 0.117508066, -0.316988379, -0.614649045, 
> -0.969428677, -0.036, -0.139119729, -0.25405231, -0.278163883, 
> 0.296010189, 0.290285736, -0.036, -0.304357608, -0.129913755, 
> -0.136209139, -0.290925392, 0.219392415, 0.418347431), FAC.A2 = c(1.626524757, 
> 0.447314597, 0.401823062, 0.161047605, 0.470022244, -1.227729293, 
> -0.702664589, 0.065, -0.477090522, -0.464008109, -0.264137857, 
> 0.576270516, 1.157658697, 0.065, -0.018453905, -3.059806667, 
> 0.694435007, 0.074223629, 1.115136699, 0.652975139), MLDR = c(9529, 
> 9637, 9605, 9631, 9674, 9636, 9640, 9733, 9734, 9726, 9747, 9643, 
> 9593, 9582, 9699, 9810, 9820, 9813, 9824, 9840), MWSQUAL = c(5, 
> 1, 7.5, 7, 0.5, 6, 6, 8, 7, 6, 7, 7, 7, 8, 8, 7, 7, 7, 7, 8), 
>     FAC.M1 = c(0.346099763, -1.404917729, -0.122803627, -1.105302108, 
>     -0.820151926, -0.148255768, -0.059281084, -0.177, -0.597900864, 
>     -0.385193779, 0.576167774, -0.213567265, -0.087008627, -0.150494043, 
>     0.061886447, -0.000514461, 0.52592456, 0.25696687, 0.119899896, 
>     -0.158271395), FAC.M2 = c(0.509341516, -1.28717534, 0.484499473, 
>     0.609920083, -1.049431096, 0.523520113, 0.00821345, -0.096, 
>     -1.526343789, -0.698071247, 0.404253968, 0.384329318, -0.354346109, 
>     0.43895688, -2.077185788, -1.044851055, 0.623330523, 0.791948597, 
>     1.120535816, 0.314008432), SKR.ein.aus = c(0, 1, 1, 1, 1, 
>     0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0)), .Names = c("TAGNR", 
> "FAC.A1", "FAC.A2", "MLDR", "MWSQUAL", "FAC.M1", "FAC.M2", "SKR.ein.aus"
> ), row.names = c("139", "140", "141", "142", "143", "144", "145", 
> "146", "147", "148", "149", "150", "151", "152", "153", "154", 
> "155", "156", "157", "158"), class = "data.frame")
> 
> 
> I hope, this makes it possible to find the bug.

Indeed, thank you (we needed an example). Alter

    names(w) <- ynames
    
to
    names(w) <- ynames[good]

and

    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))

to 
    names(fit$effects) <-
	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))

as the vector w is dropping observations with fitted probs 0 or 1.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Jan 10 13:45:52 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 10 Jan 2000 13:45:52 +0000 (GMT)
Subject: sets again (trivial)
Message-ID: <Pine.GSO.4.20.0001101339310.25523-100000@laplace>

Hi Brian -- While on the subjects of sets, as we now have an is.element
function, would it be tidier to alias %in% to this rather than leave it
dangling?  The help for %in% could be moved from match.Rd to
sets.Rd.  Just a thought.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Jan 10 17:07:03 2000
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 10 Jan 2000 18:07:03 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101707.SAA01446@pubhealth.ku.dk>

Prof Brian Ripley writes:
 > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
 > > From: holzer@stat.math.ethz.ch
 > > 
 > > Dear R-team
 > > 
 > > As I didn't get any answer to my bug-report last week I have taken the
 > > effort and extracted a minimal data set from my data (see below) where the
 > > following bug occurs:
 > > 
 > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
 > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
 > same length as the vector
> Indeed, thank you (we needed an example). Alter
 > 
 >     names(w) <- ynames
 >     
 > to
 >     names(w) <- ynames[good]
 > 
 > and
 > 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
 > 
 > to 
 >     names(fit$effects) <-
 > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
 > 
 > as the vector w is dropping observations with fitted probs 0 or 1.

This is actually a solution I thought of as well. However it has the
disadvantage that plot (and other functions?) gets problems:

> fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
glm.fit.null else glm.fit)(x = X, y = Y, 
.
.
.
7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> plot(fit.tst)
Warning messages: 
1: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
2: longer object length
	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
3: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
4: longer object length
	is not a multiple of shorter object length in: sqrt(w) * r 
5: longer object length
	is not a multiple of shorter object length in: e/(s * (1 - h)) 
6: longer object length
	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 

Maybe there is another solution?

Nevertheless, thanks for the help!

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://www.stat.math.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 10 17:16:46 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Jan 2000 18:16:46 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001101716.SAA01550@pubhealth.ku.dk>

On Mon, 10 Jan 2000, Peter Holzer wrote:

> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> > plot(fit.tst)

We already know that plot.lm does not work correctly with glm objects with
zero weights.  I am not at all sure it should be used for glm objects
(except Gaussian ones).  However, I think you missed Martin M's point.
This behaviour indicates an inappropriate model, one with separation
of the groups, and all the linear approximations needed for a local lm
model are inappropriate.

We also know that the whole glm area needs a long hard look.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Tue Jan 11 01:53:58 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Tue, 11 Jan 2000 02:53:58 +0100 (MET)
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
Message-ID: <200001110153.CAA03462@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 0.90.0
OS: Linux on Thinkpad (pentium) and desktop (K6)
Submission from: (NULL) (128.32.251.234)


When I create a boxplot, and then try to overlay a lowess fit or just the
points, 
the points do not appear in the highest level and the lowess curve does not
reach 
the highest level. However, if I add one to each of the models, the problem is
solved.
I tried this on two different machines, a laptop and a desktop both running 
Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian

> a
  [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
 [11] -0.518 -0.731  0.074 -0.731  0.286  0.206 -0.257  0.608 -0.038 -0.291
 [21] -0.274 -0.274  0.402 -0.325 -0.343 -0.012  0.359 -0.038  0.675 -0.497
 [31]  0.026  0.608 -0.325  0.109  0.507  0.484 -0.149  0.368  0.227  0.086
 [41] -0.540  0.377 -0.149 -0.038  0.154  0.573  0.428  0.852  0.164  0.744
 [51]  0.061  0.080 -0.354  0.003  0.522 -0.508 -0.613 -0.271 -0.245 -0.080
 [61] -0.271 -0.651  0.265 -0.613  0.666  0.382  0.061 -0.542  0.510 -0.038
 [71] -0.443  0.042  0.764 -0.017 -0.148  0.023 -0.613 -0.148  0.354 -0.412
 [81]  0.522  0.169 -0.220  0.080  0.080  0.448  0.116 -0.059  0.061  0.185
 [91] -0.325 -0.038 -0.220 -0.325  0.151  0.903 -0.059  0.265  0.250  0.250
[101]  0.161  0.502  0.684  0.222  0.063 -0.414  0.222  0.028 -0.260 -0.046
[111] -0.360 -0.046 -0.260 -0.169 -0.169 -0.009  0.192 -0.046  0.028  0.222
[121]  0.129  0.502  0.097  0.306  0.384 -0.009 -0.532  0.028 -0.086 -0.260
[131] -0.086 -0.213 -0.471 -0.820 -0.414  0.222  0.097  0.251 -0.009  0.279
[141] -0.009  0.279 -0.260 -0.086  0.063  0.161 -0.009  0.524  0.063 -0.665
[151]  0.127  0.575  0.127  0.287  0.249 -0.301  0.287  0.127 -0.176 -0.013
[161] -0.301  0.082 -0.176 -0.370 -0.118 -0.064  0.210 -0.064  0.082 -0.064
[171]  0.169  0.546  0.036  0.392  0.323 -0.064 -0.706  0.127 -0.118 -0.236
[181] -0.013 -0.301 -0.370 -0.812 -0.524  0.210  0.392  0.036 -0.176  0.249
[191]  0.082  0.036 -0.301 -0.301 -0.013  0.127  0.127  0.752  0.127 -0.301
[201]  0.108  0.453  0.108  0.166  0.220 -0.327  0.048  0.271 -0.240 -0.086
[211] -0.422 -0.017  0.048 -0.327 -0.327 -0.086  0.166 -0.160  0.108 -0.086
[221]  0.166  0.571 -0.086  0.366  0.320 -0.017 -0.645  0.166 -0.240 -0.017
[231] -0.017 -0.240 -0.422 -0.240 -0.645  0.048  0.411 -0.017 -0.240  0.271
[241]  0.320 -0.017 -0.327 -0.160  0.220  0.108 -0.086  0.676  0.108  0.048
[251]  0.254 -0.188 -0.083  0.254  0.387 -0.188  0.012  0.387 -0.306 -0.306
[261] -0.594  0.012  0.012 -0.776 -0.440 -0.188  0.254 -0.083 -0.440 -0.188
[271]  0.323  0.448  0.099  0.505  0.323 -0.083 -0.594  0.254 -0.188 -0.083
[281]  0.012 -0.306 -0.440 -0.083 -0.306  0.012  0.448  0.099 -0.188  0.254
[291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> b
  [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
 [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
 [75] 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4
[112] 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1
[149] 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3
[186] 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3
[223] 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4
[260] 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4
[297] 4 1 0 0
> boxplot(a~b)
> lines(lowess(a~b))
> points(a~b)
> boxplot(a~b)
> lines(lowess(a~b+1))
> points(a~b+1)
> 

Thanks for your consideration and thanks a million for all the work. R is a
pleasure 
to work with. 

Best in the new year,
adrian custer
acuster@nature.berkeley.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 11 20:06:24 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Jan 2000 15:06:24 -0500
Subject: Figure margins too large
Message-ID: <387B8D40.3B09961E@bank-banque-canada.ca>

I seem to remember an error like this being mentioned before, but if it wasn't:

> zz <- density(rnorm(100))
> plot(zz)
Error in plot.new() : Figure margins too large
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Tue Jan 11 21:00:04 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Tue, 11 Jan 2000 22:00:04 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112100.WAA13500@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: .90.1
OS: Linux+NT
Submission from: (NULL) (141.211.66.172)


In the following example, the deviance residuals are not correctly calculated:

> dead <- c(2,8,15,23,27)
> y <- cbind(dead,30-dead)
> conc <- 0:4
> g <- glm(y ~ conc,family=binomial)
> residuals(g)
[1] -0.451015  0.359696       NaN  0.064302 -0.204493
Warning message: 
NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

The third residual should be zero.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 11 21:18:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jan 2000 21:18:09 +0000 (GMT)
Subject: deviance residuals in binomial GLM (PR#399)
In-Reply-To: <200001112100.WAA13500@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001112115350.20286-100000@auk.stats>

On Tue, 11 Jan 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: .90.1
> OS: Linux+NT
> Submission from: (NULL) (141.211.66.172)
> 
> 
> In the following example, the deviance residuals are not correctly calculated:
> 
> > dead <- c(2,8,15,23,27)
> > y <- cbind(dead,30-dead)
> > conc <- 0:4
> > g <- glm(y ~ conc,family=binomial)
> > residuals(g)
> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
> Warning message: 
> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 
> 
> The third residual should be zero.

Yes, and it is computed as sqrt(-5.169943e-21) on my machine. I have
committed a fix for 0.99.0


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jan 11 21:25:07 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 Jan 2000 22:25:07 +0100 (MET)
Subject: deviance residuals in binomial GLM (PR#399)
Message-ID: <200001112125.WAA13696@pubhealth.ku.dk>

>>>>> "faraway" == faraway  <faraway@umich.edu> writes:

    faraway> Full_Name: Julian Faraway
    faraway> Version: .90.1
    faraway> OS: Linux+NT
    faraway> Submission from: (NULL) (141.211.66.172)


    faraway> In the following example, the deviance residuals are not
    faraway> correctly calculated:

    >> dead <- c(2,8,15,23,27)
    >> y <- cbind(dead,30-dead)
    >> conc <- 0:4
    >> g <- glm(y ~ conc,family=binomial)
    >> residuals(g)
    faraway> [1] -0.451015  0.359696       NaN  0.064302 -0.204493
    faraway> Warning message: 
    faraway> NaNs produced in: sqrt((object$family$dev.resids)(y, mu, wts)) 

    faraway> The third residual should be zero.

yes, this is a bug.

Diagnosis: 
    A case of cancelation which makes the argument of sqrt(.) 
    negative (~= -5e-21) instead of zero.


The fix is
in  src/library/base/R/glm.R
replace
	       d.res <- sqrt((object$family$dev.resids)(y, mu, wts))
by
	       d.res <- sqrt(pmax(0,(object$family$dev.resids)(y, mu, wts)))

Thanks a lot for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 12 07:45:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 12 Jan 2000 08:45:27 +0100 (MET)
Subject: Figure margins too large
In-Reply-To: <387B8D40.3B09961E@bank-banque-canada.ca>
References: <387B8D40.3B09961E@bank-banque-canada.ca>
Message-ID: <14460.12567.177238.43729@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I seem to remember an error like this being mentioned before,
    PaulG> but if it wasn't:

    >> zz <- density(rnorm(100))
    >> plot(zz)
    PaulG> Error in plot.new() : Figure margins too large

    >> version
    PaulG> _
    PaulG> platform sparc-sun-solaris2.6
    PaulG> arch     sparc
    PaulG> os       solaris2.6
    PaulG> system   sparc, solaris2.6
    PaulG> status
    PaulG> major    0
    PaulG> minor    90.1
    PaulG> year     1999
    PaulG> month    December
    PaulG> day      15
    PaulG> language R

It means what it says : The figure margins are too large
and there's no room for the plot at all.

It must be that you have 
  - large fonts {large par("cex"), or large "rastersize" with postscript ...)
and/or
  - large  par("mar")
and/or
  - too small device.

I can reproduce the error message with
 
  postscript(file="/dev/null", height= 1)
  plot(1)

More "fun" is to

     x11()
     plot(1)
and resize the device window {repeatedly calling  plot(1)}
until the plot outline isn't drawn any more.
At the point you get (appropriately) the above error message.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:03:50 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:03:50 +0100
Subject: functions for flat file import/export + utilities
Message-ID: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>

This is a multi-part message in MIME format.

------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id SAA07714



Dear R-Developers,

please find attached a set of drafted functions for flat file import and
export, partially extending existing functions, partially completely writ=
ten
as new code.
I thought you might be interested in those functions and the accompanying
utilities for padding and trimming.

Main features are

- supports several formats, i.e. fixed width and CSV (with one exception)
- supports templates describing relevant features of the flat file data,
including attributes of data.frame columns, storage.mode etc.
- special handling of factors and logicals
- handling of special characters like decimal seperator and escaped
quotation mark
- no perl and no seperator needed for fixed width format (and no problems
with quotation marks)
- reading fixed width format is based on simple function read.char.cols()=
,
which can be implemented more memory efficient in C

However, these functions are written from the perspective of a
non-R-developer, of course one could do it better. Also I don't know if i=
t
is a good idea traing to keep some compatibility (and naming) to
read.table() and write.table(), or if it is better to optimize new soluti=
ons
with new naming. I have done some testing, but of course there may be bug=
s
in it.

Having said this I would appreciate any feedback, criticisms, suggestions
for improvements, ...
Regards


--
Dr. Jens Oehlschl=E4gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M=FCnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



------=_NextPart_000_0004_01BF5D27.62306630
Content-Type: application/octet-stream;
	name="flatfile.r"
Content-Disposition: attachment;
	filename="flatfile.r"
Content-Transfer-Encoding: base64

IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgVGhpcyBpcyBhIGRyYWZ0IGZvciBhIHN1aXRlIG9mIFIg
ZnVuY3Rpb25zIGZvciBpbnRlcmZhY2luZyBmbGF0IGZpbGVzCiMgaW5jbHVkaW5nIHV0aWxpdGll
cyBmb3Igc3RyaW5nIGhhbmRsaW5nCiMgKEdOVSkgQ29weXJpZ2h0IE1EIEZBQ1RPUlksIEplbnMg
T2VobHNjaGyEZ2VsLUFraXlvc2hpIChKT0EpCiMgQ3JlYXRlZCAgICAgMTIuMS4yMDAwCiMgTGFz
dCBjaGFuZ2UgMTIuMS4yMDAwCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiMjIGdlbmVyYWwgc3Ry
YXRlZ3kgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIwojIHdyaXRlIGZ1bmN0aW9ucyAKIyAgIHRha2UgYSBkYXRhLmZyYW1lIFthbmQgc3Bl
Y2lmaWNhdGlvbnNdCiMgICB3cml0ZSBhIGZpbGUgYXMgc2lkZSBlZmZlY3QKIyAgIHJldHVybiBh
IHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIHdyaXR0ZW4gZmlsZQojICAgICBpbmNsdWRpbmcgc3Rv
cmFnZS5tb2RlIGFuZCBhdHRyaWJ1dGVzIGZvciBlYWNoIGNvbHVtbgojICAgICBzbyB0aGF0IHJl
aW1wb3J0aW5nIHRoZSBmaWxlIHVzaW5nIHRoZSB0ZW1wbGF0ZSBnaXZlcyBhbiBpZC4gZGF0YS5m
cmFtZQojICAgICAoZXhjZXB0IGZvciBsb3NzIG9mIHByZWNpc2lvbiwgZGVwZW5kaW5nIG9uIGRp
Z2l0cyBpbnZvbHZlZCkKIwojIHJlYWQgZnVuY3Rpb25zIAojICAgdGFrZSBhIHRlbXBsYXRlIGFu
ZC9vciBzcGVjaWZpY2F0aW9ucwojICAgcmV0dXJuIGEgZGF0YS5mcmFtZQojICAgb3B0aW9uYWxs
eSB3aXRoIGEgdGVtcGxhdGUgYXMgYW4gYXR0cmlidXRlCiMKIyBsb2dpY2FscyBhbmQgZmFjdG9y
cyByZWNlaXZlIHNwZWNpYWwgdHJlYXRtZW50CgoKIyMgaGllcmFyY2h5IG9mIGZ1bmN0aW9ucyAj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBy
ZWFkLmNoYXIuY29scygpICAgZXh0cmFjdGluZyBjaGFyYWN0ZXIgY29sdW1ucyBmcm9tIGZsYXQg
ZmlsZQojICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHkgcHVyZSBSLCBzaG91bGQgdXNlIEMt
ZnVuY3Rpb24gbGF0ZXIgCiMgICAgICAgICAgICAgICAgICAgIHRvIHJlZHVjZSBtZW1vcnkgcmVx
dWlyZW1lbnRzIGJ5IGZhY3RvciAyCiMKIyAgIHdyaXRlLnRhYmxlKCkgICAgZ2VuZXJhbCwgcmV0
dXJuaW5nIGEgY2xhc3MgJ3RlbXBsYXRlJyBvYmplY3QKIyAgICAgd3JpdGUuc3ZzKCkgICAgd3Jh
cHBlciBmdW5jdGlvbiBvZiB3cml0ZS50YWJsZSgpIGZvciBzZXBlcmF0ZWQgdmFsdWUgZm9ybWF0
CiMgICAgIHdyaXRlLmZpeCgpICAgIHdyYXBwZXIgZnVuY3Rpb24gb2Ygd3JpdGUudGFibGUoKSBm
b3IgZml4ZWQgd2lkdGggZm9ybWF0CiMgCiMgICByZWFkLnRhYmxlKCkgICAgIGdlbmVyYWwsIHRh
a2luZyBzcGVjaWZpY2F0aW9ucwojICAgICByZWFkLnN2cygpICAgICB3cmFwcGVyIGZ1bmN0aW9u
IG9mIHJlYWQudGFibGUoKSBmb3Igc2VwZXJhdGVkIHZhbHVlIGZvcm1hdAojICAgICByZWFkLmZp
eCgpICAgICB3cmFwcGVyIGZ1bmN0aW9uIG9mIHJlYWQudGFibGUoKSBmb3IgZml4ZWQgd2lkdGgg
Zm9ybWF0CiMgIAojICAgICByZWFkLmZ3ZigpICAgICBsZXNzIG1lbW9yeSBjb25zdW1pbmcgYWx0
ZXJuYXRpdmUgdG8gcmVhZC5maXgoKQojICAgICAgICAgICAgICAgICAgICBhcyBsb25nIGFzIHJl
YWQuY2hhci5jb2xzIGhhc24ndCBzcGVjaWFsIEMtZnVuY3Rpb24uCiMgICAgICAgICAgICAgICAg
ICAgIEhvd2V2ZXIgcmVhZC5md2YoKSBuZWVkcyBwZWFybCwgdGhlIGRhdGEgbXVzdCBub3QgY29u
dGFpbiBzZXA9LAojICAgICAgICAgICAgICAgICAgICBpdCBwcm92aWRlcyBubyByZWxpYWJsZSBo
YW5kbGluZyBvZiBxdW90YXRpb24gbWFya3MKIyAgICAgICAgICAgICAgICAgICAgKGhhc24ndCBi
ZWVuIGFkYXB0ZWQgeWV0KQojICAKIyAgICAgICByZWFkLnRlbXBsYXRlKCkgICBmb3IgZWFzeSAo
cmUpaW1wb3J0IG9mIEFTQ0lJIGRhdGEgCiMgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lm
aWVkIHZpYSBhIHRlbXBsYXRlIG9iamVjdAojICAgICAgIHdyaXRlLnRlbXBsYXRlKCkgIGZvciBl
YXN5IChyZSlleHBvcnQgb2YgQVNDSUkgZGF0YSAKIyAgICAgICAgICAgICAgICAgICAgICAgICBz
cGVjaWZpZWQgdmlhIGEgdGVtcGxhdGUgb2JqZWN0CiMKIyAgICAgICBwcmludC50ZW1wbGF0ZSgp
ICBzaG93cyB0ZW1wbGF0ZSBzcGVjaWZpY2F0aW9ucwojICAKIyAgICAgICAgIHJlYWQoKSAgICAg
ICAgIHBlcmhhcHMgYSBnZW5lcmljIGZ1bmN0aW9uOiBkZiA8LSByZWFkKHRlbXBsYXRlKQojICAg
ICAgICAgd3JpdGUoKSAgICAgICAgcGVyaGFwcyBhIGdlbmVyaWMgZnVuY3Rpb246IHdyaXRlKHRl
bXBsYXRlLCBkZikKIwojIFVUSUxJVElFUzogcGFkKCk7IHJwYWQoKSwgbHBhZCgpLCB0cmltKCks
IHJ0cmltKCksIGx0cmltKCksIHVucXVvdGF0ZSgpCiMKIyBERU1POiBkZW1vLnRlbXBsYXRlKGZp
bGUgPSB0ZW1wZmlsZSgpKQoKCiMjIHRlbXBsYXRlIGRlZmluaXRpb24gIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojICAgdGVtcGxhdGUgPC0g
c3RydWN0dXJlKAojICAgICBsaXN0KAojICAgICAsIGZpbGUgPSBmaWxlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiMgICAgICwgZW9s
ID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUg
KGNoYXJhY3RlcikKIyAgICAgLCBzZXAgPSBzZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQojICAgICAsIGRlYy5zZXAgPSBkZWMu
c2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIp
CiMgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChjaGFyYWN0ZXIgdmVjdG9yKQoj
ICAgICAsIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsgICAgICAgICAgICAgICAgICAj
IHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiPiBpbiBDU1YgCiMgICAgICwgZXNjYXBlZC5x
dW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgICMgcGVyIGZpbGUgKGNoYXJh
Y3RlciksIGUuZy4gPCIiPiBpbiBDU1YKIyAgICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRp
bmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNhbCBvciBjaGFyYWN0ZXIgdmVjdG9yKQojICAgICAs
IGZhY3RvcnMgPSBmYWN0b3JzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBm
aWxlLCB3ZXRoZXIgZmFjdG9ycyBpbiBmaWxlIGFyZSAnbGV2ZWxzJyBvciAnY29kZXMnIChjaGFy
YWN0ZXIpCiMgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5uYW1lcy5sb2MgICAgICAgICAgICAg
ICAgICAgICMgcGVyIGZpbGUsIGNvbG5vIG9mIHJvd25hbWVzLCAwID0gbm8gcm93Lm5hbWVzIGlu
IGZpbGUgKGludGVnZXIpCiMgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1l
cyAobG9naWNhbCkKIyAgICAgLCBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRlICAgICAgICAgICAg
ICAgICAgICAgICAgIyBwZXIgZmlsZQojICAgICAsIGNvbC5uYW1lcyA9IGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIGluY2x1ZGluZyBjb3JuZXIubmFt
ZSAoY2hhcmFjdGVyIHZlY3RvcikKIyAgICAgLCBxdW90ZSA9IHF1b3RlICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90
ZWQgKGxvZ2ljYWwgdmVjdG9yKQojICAgICAsIHN0b3JhZ2UubW9kZSA9IHN0b3JhZ2UubW9kZSAg
ICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChjaGFyYWN0ZXIgdmVjdG9yKQojICAg
ICAsIHdpZHRocyA9IHdpZHRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBjb2x1bW4sIGluY2x1ZGluZyByb3cubmFtZXMud2lkdGggKGxpc3Qgb3IgTlVMTCkKIyAgICAg
LCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIg
Y29sdW1uLCAobGlzdCBvciBOVUxMKQojICAgICAsIGF0dHJpYnV0ZXMgPSBhdHRyaWIgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBjb2x1bW4sIChsaXN0KQojICAgICAsIGV4dGVu
c2lvbi53YXJuaW5nID0gZXh0ZW5zaW9uLndhcm5pbmcgICAgICAgICAgICAjIHBlciBmaWxlLCBU
UlVFL0ZBTFNFIGluZGljYXRlcyB3ZXRoZXIgb3V0IHNwZWNzIGRpZmZlciBmcm9tIGluIHNwZWNz
IAojICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gc2VwZXJhdG9yLndhcm5pbmcgICAgICAgICAg
ICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiMgICAgICwgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA9IHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UvTkEKIyAg
ICAgKQojICAgLCBjbGFzcz0idGVtcGxhdGUiCiMgICApCgoKCiMgVVRJTElUSUVTICMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IwoKIyBjb21iaW5lcyBycGFkKCkgYW5kIGxwYWQoKQojIGRlZmF1bHQgaXMgZmxhZz0iLSIgPT0g
cnBhZCgpCiMgZGVmYXVsdCBtZXRob2QgJ2FiYnJldmlhdGUnIHVzZXMgYWJicmV2aWF0ZSgpIHRv
IHJlZHVjZSBzdHJpbmdzIGxvbmdlciB0aGFuIHdpZHRoCiMgbWV0aG9kICdleHRlbmQnIGdyYW50
cyBlcXVhbCB3aWR0aHMsIGV4dGVuZGluZyB0byBtYXggd2lkdGgsIGlmIG5lY2Vzc2FyeQojIG1l
dGhvZCAndmFyaWFibGUnIGNvcnJlc3BvbmRzIHRvIHdoYXQgZm9ybWF0LmNoYXIoKSBkb2VzCiMg
bWV0aG9kcyAnbGN1dCcgYW5kICdyY3V0JyBncmFudCBmaXhlZCB3aWR0aCBieSBjdXR0aW5nCiMg
bmVnYXRpdmUgd2lkdGggb3ZlcndyaXRlcyBmbGFnPSctJyB0byBmbGFnPScnIGFzIGluIGZvcm1h
dC5jaGFyKCkKcGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBmbGFnPSItIiwgY2hh
cj0iICIsIG1ldGhvZD1jKCJhYmJyZXZpYXRlIiwgInZhcmlhYmxlIiwgImV4dGVuZCIsICJyY3V0
IiwgImxjdXQiKSwgd2Fybj1UUlVFKQp7CgogICAgaWYgKG1ldGhvZD09J2FiYnJldmlhdGUnICYm
IGxlbmd0aCh3aWR0aCk+MSkKICAgICAgc3RvcCgibWV0aG9kPSdhYmJyZXZpYXRlJyBuZWVkcyB3
aWR0aD1jb25zdGFudCIpCgogICAgaWYgKGlzLm51bGwoeCkpIAogICAgICAgIHJldHVybigiIikK
ICAgIGlmICghaXMuY2hhcmFjdGVyKHgpKSB7CiAgICAgICAgd2FybmluZygiY29lcmNpbmcgJ3gn
IHRvICdjaGFyYWN0ZXInIikKICAgICAgICB4IDwtIGFzLmNoYXJhY3Rlcih4KQogICAgfQogICAg
YXQgPC0gYXR0cmlidXRlcyh4KQogICAgbmMgPC0gbmNoYXIoeCkKICAgIG1heG5jIDwtIG1heChu
YykKICAgIGlmIChpcy5udWxsKHdpZHRoKSkgCiAgICAgICAgd2lkdGggPC0gbWF4bmMKICAgIGVs
c2UgaWYgKHdpZHRoIDwgMCkgewogICAgICAgIGZsYWcgPC0gIiIKICAgICAgICB3aWR0aCA8LSAt
d2lkdGgKICAgIH0KICAgIGlmICh3aWR0aDxtYXhuYyl7CiAgICAgIGlmICh3YXJuKQogICAgICAg
IHdhcm5pbmcocGFzdGUoIm1heChuY2hhcih4KSk9IiwgbWF4bmMsICIgPiBhYnMod2lkdGgpPSIs
IHdpZHRoLCBzZXA9IiIpKQogICAgICBpZiAobWV0aG9kPT0ibGN1dCIpewogICAgICAgIHhbbmM+
d2lkdGhdIDwtIHN1YnN0cih4W25jPndpZHRoXSwgKG5jLXdpZHRoKVtuYz53aWR0aF0rMSwgbmNb
bmM+d2lkdGhdKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0icmN1dCIpewogICAgICAgIHggPC0g
c3Vic3RyKHgsIDEsIHdpZHRoKQogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0idmFyaWFibGUiKXsK
ICAgICAgICBOVUxMCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJleHRlbmQiKXsKICAgICAgICB3
aWR0aCA8LSBtYXhuYwogICAgICB9ZWxzZSBpZiAobWV0aG9kPT0iYWJicmV2aWF0ZSIpewogICAg
ICAgIHggPC0gYWJicmV2aWF0ZSh4LCB3aWR0aCkKICAgICAgICBpZiAod2FybiAmJiBhbnkobmNo
YXIoeCk+d2lkdGgpKSB3YXJuaW5nKCJhYmJyZXZpYXRlKCkgdmlvbGF0ZWQgd2lkdGgiKQogICAg
ICB9ZWxzZSAKICAgICAgICBzdG9wKCJpbGxlZ2FsIG1ldGhvZCIsIG1ldGhvZCkKICAgIH0KICAg
IG5vIDwtIHBtYXgoMCwgd2lkdGggLSBuYykKICAgIHRhYiA8LSB1bmlxdWUobm8pCiAgICB0YWJw
YWQgPC0gc2FwcGx5KHRhYisxLCBmdW5jdGlvbihubykgcGFzdGUoY2hhcmFjdGVyKG5vKSwgY29s
bGFwc2UgPSBjaGFyKSkKICAgIHBhZCA8LSB0YWJwYWRbbWF0Y2gobm8sIHRhYildCiAgICByIDwt
IGlmIChmbGFnID09ICItIikgCiAgICAgICAgcGFzdGUoeCwgcGFkLCBzZXAgPSAiIikKICAgIGVs
c2UgcGFzdGUocGFkLCB4LCBzZXAgPSAiIikKICAgIGlmICghaXMubnVsbChhdCkpIAogICAgICAg
IGF0dHJpYnV0ZXMocikgPC0gYXQKICAgIHIKfQoKCiMgZGVmYXVsdCBtZXRob2QgaXMgJ3JjdXQn
CiMgLXdpZHRoIG1ha2VzIGxlZnQgcGFkZGluZwpycGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGgg
PSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9kPWMoInJjdXQiLCAibGN1dCIsICJ2YXJpYWJsZSIsICJl
eHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJy
ZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgpPjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0
ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQiKQoKICAgIGZsYWcgPC0gIi0iCiAgICBpZiAoaXMubnVs
bCh4KSkgCiAgICAgICAgcmV0dXJuKCIiKQogICAgaWYgKCFpcy5jaGFyYWN0ZXIoeCkpIHsKICAg
ICAgICB3YXJuaW5nKCJjb2VyY2luZyAneCcgdG8gJ2NoYXJhY3RlciciKQogICAgICAgIHggPC0g
YXMuY2hhcmFjdGVyKHgpCiAgICB9CiAgICBhdCA8LSBhdHRyaWJ1dGVzKHgpCiAgICBuYyA8LSBu
Y2hhcih4KQogICAgbWF4bmMgPC0gbWF4KG5jKQogICAgaWYgKGlzLm51bGwod2lkdGgpKSAKICAg
ICAgICB3aWR0aCA8LSBtYXhuYwogICAgZWxzZSBpZiAod2lkdGggPCAwKSB7CiAgICAgICAgZmxh
ZyA8LSAiIgogICAgICAgIHdpZHRoIDwtIC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5j
KXsKICAgICAgaWYgKHdhcm4pCiAgICAgICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0i
LCBtYXhuYywgIiA+IGFicyh3aWR0aCk9Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRo
b2Q9PSJsY3V0Iil7CiAgICAgICAgeFtuYz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAo
bmMtd2lkdGgpW25jPndpZHRoXSsxLCBuY1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRo
b2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNl
IGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIpewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1l
dGhvZD09ImV4dGVuZCIpewogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmICht
ZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAgICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQog
ICAgICAgIGlmICh3YXJuICYmIGFueShuY2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlh
dGUoKSB2aW9sYXRlZCB3aWR0aCIpICAgICAgCiAgICAgIH1lbHNlIAogICAgICAgIHN0b3AoImls
bGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQogICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5j
KQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRhYnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0
aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBjb2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwt
IHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIgPC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAg
ICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAgZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIi
KQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAgICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAg
cgp9CgoKIyBkZWZhdWx0IG1ldGhvZCBpcyAnbGN1dCcKIyAtd2lkdGggbWFrZXMgcmlndGggcGFk
ZGluZwpscGFkIDwtIApmdW5jdGlvbiAoeCwgd2lkdGggPSBOVUxMLCBjaGFyPSIgIiwgbWV0aG9k
PWMoImxjdXQiLCAicmN1dCIsICJ2YXJpYWJsZSIsICJleHRlbmQiLCAiYWJicmV2aWF0ZSIpLCB3
YXJuPVRSVUUpCnsKICAgIGlmIChtZXRob2Q9PSdhYmJyZXZpYXRlJyAmJiBsZW5ndGgod2lkdGgp
PjEpCiAgICAgIHN0b3AoIm1ldGhvZD0nYWJicmV2aWF0ZScgbmVlZHMgd2lkdGg9Y29uc3RhbnQi
KQoKICAgIGZsYWcgPC0gIiIKICAgIGlmIChpcy5udWxsKHgpKSAKICAgICAgICByZXR1cm4oIiIp
CiAgICBpZiAoIWlzLmNoYXJhY3Rlcih4KSkgewogICAgICAgIHdhcm5pbmcoImNvZXJjaW5nICd4
JyB0byAnY2hhcmFjdGVyJyIpCiAgICAgICAgeCA8LSBhcy5jaGFyYWN0ZXIoeCkKICAgIH0KICAg
IGF0IDwtIGF0dHJpYnV0ZXMoeCkKICAgIG5jIDwtIG5jaGFyKHgpCiAgICBtYXhuYyA8LSBtYXgo
bmMpCiAgICBpZiAoaXMubnVsbCh3aWR0aCkpIAogICAgICAgIHdpZHRoIDwtIG1heG5jCiAgICBl
bHNlIGlmICh3aWR0aCA8IDApIHsKICAgICAgICBmbGFnIDwtICItIgogICAgICAgIHdpZHRoIDwt
IC13aWR0aAogICAgfQogICAgaWYgKHdpZHRoPG1heG5jKXsKICAgICAgaWYgKHdhcm4pCiAgICAg
ICAgd2FybmluZyhwYXN0ZSgibWF4KG5jaGFyKHgpKT0iLCBtYXhuYywgIiA+IGFicyh3aWR0aCk9
Iiwgd2lkdGgsIHNlcD0iIikpCiAgICAgIGlmIChtZXRob2Q9PSJsY3V0Iil7CiAgICAgICAgeFtu
Yz53aWR0aF0gPC0gc3Vic3RyKHhbbmM+d2lkdGhdLCAobmMtd2lkdGgpW25jPndpZHRoXSsxLCBu
Y1tuYz53aWR0aF0pCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJyY3V0Iil7CiAgICAgICAgeCA8
LSBzdWJzdHIoeCwgMSwgd2lkdGgpCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJ2YXJpYWJsZSIp
ewogICAgICAgIE5VTEwKICAgICAgfWVsc2UgaWYgKG1ldGhvZD09ImV4dGVuZCIpewogICAgICAg
IHdpZHRoIDwtIG1heG5jCiAgICAgIH1lbHNlIGlmIChtZXRob2Q9PSJhYmJyZXZpYXRlIil7CiAg
ICAgICAgeCA8LSBhYmJyZXZpYXRlKHgsIHdpZHRoKQogICAgICAgIGlmICh3YXJuICYmIGFueShu
Y2hhcih4KT53aWR0aCkpIHdhcm5pbmcoImFiYnJldmlhdGUoKSB2aW9sYXRlZCB3aWR0aCIpCiAg
ICAgIH1lbHNlIAogICAgICAgIHN0b3AoImlsbGVnYWwgbWV0aG9kIiwgbWV0aG9kKQogICAgfQog
ICAgbm8gPC0gcG1heCgwLCB3aWR0aCAtIG5jKQogICAgdGFiIDwtIHVuaXF1ZShubykKICAgIHRh
YnBhZCA8LSBzYXBwbHkodGFiKzEsIGZ1bmN0aW9uKG5vKSBwYXN0ZShjaGFyYWN0ZXIobm8pLCBj
b2xsYXBzZSA9IGNoYXIpKQogICAgcGFkIDwtIHRhYnBhZFttYXRjaChubywgdGFiKV0KICAgIHIg
PC0gaWYgKGZsYWcgPT0gIi0iKSAKICAgICAgICBwYXN0ZSh4LCBwYWQsIHNlcCA9ICIiKQogICAg
ZWxzZSBwYXN0ZShwYWQsIHgsIHNlcCA9ICIiKQogICAgaWYgKCFpcy5udWxsKGF0KSkgCiAgICAg
ICAgYXR0cmlidXRlcyhyKSA8LSBhdAogICAgcgp9CgojIHRyaW1tcyBib3RoIHNpZGVzCnRyaW0g
PC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0ZSgnXCheWycsIGRyb3As
ICddKlwpXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwn
XSokXCknLCBzZXA9JycpCiAgICAgICwgJ1xcMicsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojIHJp
Z2h0IHRyaW0KcnRyaW0gPC0gZnVuY3Rpb24odGV4dCwgZHJvcD0nIFx0XG4nKQogIHN1YihwYXN0
ZSgnXCguKlteJywgZHJvcCwgJ11cKVwoWycsIGRyb3AsICddKiRcKXxcKF5bJywgZHJvcCwnXSok
XCknLCBzZXA9JycpCiAgICAgICwgJ1xcMScsIHRleHQsIGV4dGVuZGVkPVRSVUUpCgojbGVmdCB0
cmltCmx0cmltIDwtIGZ1bmN0aW9uKHRleHQsIGRyb3A9JyBcdFxuJykKICBzdWIocGFzdGUoJ1wo
XlsnLCBkcm9wLCAnXSpcKVwoLipbXicsIGRyb3AsICddXCl8XCheWycsIGRyb3AsJ10qJFwpJywg
c2VwPScnKQogICAgICAsICdcXDInLCB0ZXh0LCBleHRlbmRlZD1UUlVFKQoKI3JlbW92ZXMgb25l
ICgxISkgcGFpciBvZiBxdW90YXRpb24gbWFya3MKdW5xdW90YXRlIDwtIGZ1bmN0aW9uKHRleHQs
IHF1b3RhdGlvbi5tYXJrPSciJykKICBzdWIocGFzdGUoJ1woXicsIHF1b3RhdGlvbi5tYXJrLCAn
XClcKC4qXClcKCcsIHF1b3RhdGlvbi5tYXJrLCAnJFwpJywgc2VwPScnKQogICAgICAsICdcXDIn
CiAgICAgICwgdGV4dAogICAgICAsIGV4dGVuZGVkPVRSVUUpCgoKI2Z1cnRoZXIgdXRpbGl0aWVz
IGFyZSBkZWZpbmVkIHdpdGhpbiBvdGhlciBmdW5jdGlvbnMsIAojIC0gYSBleHRlbmRlZCB2ZXJz
aW9uIG9mIHR5cGUuY29udmVydCgpCiMgLSBhIHNsaWdobHkgbW9kaWZpZWQgdmVyc2lvbiBvZiBz
Y2FuKCkKCgoKIyBmdW5jdGlvbnMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKIyMgU2hhbGwgd2UgaGF2ZSBnZW5lcmlj
cyA/PwpyZWFkIDwtIGZ1bmN0aW9uICh4LCAuLi4pIApVc2VNZXRob2QoInJlYWQiKQoKd3JpdGUu
ZGVmYXVsdCA8LSB3cml0ZQoKd3JpdGUgPC0gZnVuY3Rpb24gKHRlbXBsYXRlLCAuLi4pIApVc2VN
ZXRob2QoIndyaXRlIikKCgoKIyMgTW9kaWZpZWQgdmVyc2lvbiBvZiByZWFkLnRhYmxlKCkgZm9y
CiMjIGhhbmRsaW5nIHdoaXRlIHNwYWNlLCBkZWNpbWFsIHNlcGVyYXRvciwgcXVvdGF0aW9uIG1h
cmtzLCBmaXhlZCB3aWR0aCBpbXBvcnQKIyMgb25seSBvbmUgcmVzdHJpY3Rpb24gYXBwbGllczog
CiMjIGluIG5vbi1maXhlZC13aWR0aCBpbXBvcnQgdGhlIGRhdGEgTVVTVCBOT1QgY29udGFpbiBz
ZXA9CiMjIHRodXMgbm90IGZ1bGx5IENTViBjb21wYXRpYmxlCiMjIHJlbWFya3M6IAojIyAgIG5l
ZWRzIHJlZGVmaW5lZCBzY2FuKCkKIyMgICB0byBpbXBvcnQgQ1NWIGFzIHB1cmUgY2hhcmFjdGVy
IGNvbHVtbnMgdXNlIHNjYW4oKQojIyAgIHRvIGltcG9ydCBmaXhlZCB3aWR0aCBhcyBwdXJlIGNo
YXJhY3RlciBjb2x1bW5zIHVzZSByZWFkLmNoYXIuY29scygpCiMjICAgCiMjIE1vZGlmaWNhdGlv
bnMgKEdOVSkgQ29weXJpZ2h0IEpPQSAxOTk5CnJlYWQudGFibGUgPC0gCmZ1bmN0aW9uIChmaWxl
CiwgaGVhZGVyID0gRkFMU0UgICAgICAgICAgICAgICAjIyBoZWxwIHNob3VsZCBtZW50aW9uLCB0
aGF0IGF1dG9tYXRpY2FsbHkgVFJVRSBpZiBub3Qgc3BlY2lmaWVkIGFuZCBmaXJzdCBsaW5lIGhh
cyBvbmUgdG9rZW4gbW9yZQosIHNlcCA9ICcnICAgICAgICAgICAgICAgICAgICAgIyMgbm93IGZ1
bGx5IGlnbm9yYWJsZSBpZiBmaXhlZCB3aWR0aAosIHJvdy5uYW1lcwosIGNvbC5uYW1lcyAgICAg
ICAgICAgICAgICAgICAgIyMgaGVscCBzaG91bGQgbWVudGlvbiB0aGF0IGhlYWRlciBvdmVyd3Jp
dGVzIGNvbC5uYW1lcwosIGFzLmlzID0gRkFMU0UgICAgICAgICAgICAgICAgIyMgYXMuaXM9VFJV
RSBoYXMgcHJpb3JpdHksIHRodXMgaWdub3JlcyBzdG9yYWdlLm1vZGU9LCBhdHRyaWJ1dGVzPSwg
ZmFjdG9ycz0sIGxvZ2ljYWxzPQosIG5hLnN0cmluZ3MgPSAnTkEnICAgICAgICAgICAgCiwgc2tp
cCA9IDAKLCBubGluZXM9SW5mICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogbWF4IGRh
dGEgbGluZXMgcmVhZAosIGRlYy5zZXAgPSAnLicgICAgICAgICAgICAgICAgIyMgbmV3IChKT0Ep
CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicgICAgICAgICAjIyBuZXcgKEpPQSkKLCBlc2NhcGVkLnF1
b3RhdGlvbi5tYXJrID0gJyInICMjIG5ldyAoSk9BKTogb25seSB1c2VkIGlmIGl0IGRpZmZlcnMg
ZnJvbSBxdW90YXRpb24ubWFyawosIHN0cmlwLndoaXRlID0gVFJVRSAgICAgICAgICAgIyMgbmV3
IChKT0EpOiBzZXQgdG8gRkFMU0UgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKLCBzdHJpcC5x
dW90YXRpb24ubWFya3MgPSBUUlVFICMjIG5ldyAoSk9BKTogc2V0IHRvIEZBTFNFIGZvciBiYWNr
d2FyZCBjb21wYXRpYmlsaXR5LCBhbHNvIHZlY3RvcnMgYWxsb3dlZAosIHdpZHRocz1OVUxMICAg
ICAgICAgICAgICAgICAgIyMgbmV3IChKT0EpOiBmaXhlZCB3aWR0aDogc2luZ2xlIHdpZHRoICYg
bmNvbHVtbnMgb3IgdmVjdG9yL2xpc3Qgb2Ygd2lkdGhzCiwgc3RhcnQ9TlVMTCAgICAgICAgICAg
ICAgICAgICAjIyBuZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4g
c3RhcnQgcG9zaXRpb25zCiwgc3RvcD1OVUxMICAgICAgICAgICAgICAgICAgICAjIyBuZXcgKEpP
QSk6IGZpeGVkIHdpZHRoOiB2ZWN0b3IvbGlzdCBvZiBjb2x1bW4gc3RvcCBwb3NpdGlvbnMKLCBj
b2xzPW1heChsZW5ndGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKSAjIyBu
ZXcgKEpPQSk6IGZpeGVkIHdpZHRoOiBuZWVkZWQgd2l0aCBzaW5nbGUgd2lkdGgKLCBlb2w9J1xu
JyAgICAgICAgICAgICAgICAgICAgICMjIG5ldyAoSk9BKTogZml4ZWQgd2lkdGggb25seQosIHN0
b3JhZ2UubW9kZSA9IE5VTEwgICAgICAgICAgIyMgbmV3IChKT0EpOiAKLCBhdHRyaWJ1dGVzID0g
TlVMTCAgICAgICAgICAgICMjIG5ldyAoSk9BKTogb25seSBhcHBsaWVkIGlmIHN0b3JhZ2UubW9k
ZT0gc3BlY2lmaWVkLCBmYWN0b3JzPSBhbmQgbG9naWNhbD0gbWF5IGNoYW5nZSBmaW5hbCBhdHRy
aWJ1dGVzCiwgbG9naWNhbHMgPSBOVUxMICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6IHR3byBj
aGFyYWN0ZXJzIG9yIG51bWJlcnMgZm9yIGMoRkFMU0UsIFRSVUUpCiwgZmFjdG9ycyA9IE5VTEwg
ICAgICAgICAgICAgICAjIyBuZXcgKEpPQSk6ICduZXcnIGlnbm9yZXMgYXR0cmlidXRlcywgJ2xl
dmVscycgdXNlcyBjb2RlcyBmcm9tIGF0dHJpYnV0ZXMsICdjb2RlcycgdXNlcyBsZXZlbHMgZnJv
bSBhdHRyaWJ1dGVzCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UgICAjIyBuZXcgKEpPQSk6
IHJldHVybmVkIGRhdGEuZnJhbWUgaGFzIHRlbXBsYXRlIGFzIGF0dHJpYnV0ZQopIAp7CiAgICAj
IyMgU3RhcnQgSk9BIGNoYW5nZXMKICAgIAogICAgc3RvcmFnZS5tb2RlcyA8LSBjKCJjaGFyYWN0
ZXIiLCAibG9naWNhbCIsICJpbnRlZ2VyIiwgImRvdWJsZSIsICJjb21wbGV4IikKCiAgICAjbG9n
aWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxzKT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8
LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAgIyBmYWN0b3JzCiAgICBpZiAoIWlzLm51bGwoZmFj
dG9ycykpCiAgICAgIGZhY3RvcnMgPC0gbWF0Y2guYXJnKGZhY3RvcnMsIGMoImxldmVscyIsICJj
b2RlcyIsICJuZXciKSkKICAgICMgY29tcGFyZSBzZXAgYW5kIGRlYy5zZXAKICAgIGlmIChkZWMu
c2VwPT1zZXApCiAgICAgIHN0b3AoInBhcnNpbmcgcnVsZSB2aW9sYXRpb246IHNlcCBtdXN0IG5v
dCBlcXVhbCBkZWMuc2VwIikKICAgICMgbmEuc3RyaW5ncwogICAgaWYgKGlzLm51bGwobmEuc3Ry
aW5ncykpCiAgICAgIHN0b3AoInNjYW4gY3VycmVudGx5IGRvZXNuJ3QgYWxsb3cgbmEuc3RyaW5n
cz1OVUxMIikKCiAgICAjIyAuSW50ZXJuYWwodHlwZS5jb252ZXJ0KSBjYWxscyBkb190eXBlY3Z0
KCkgd2hpY2ggY2FsbHMgQy1saWJyYXJ5IGZ1bmN0aW9uIHN0cnRvZCgpIHdoaWNoIHVzZXMgJy4n
IGFzIGRlYy5zZXAKICAgICMjIHRodXMgbGV0J3MgcmVwbGFjZSBvdGhlciBkZWMuc2VwIGhlcmUK
ICAgICMjIEluIGNhc2UgYSBnbG9iYWwgb3B0aW9uJGRlYy5zZXAgaXMgaW50cm9kdWNlZCwgdGhp
cyBmaXggbmVlZHMgdG8gYmUgYWRhcHRlZAoKICAgIHR5cGUuY29udmVydCA8LSBmdW5jdGlvbih4
CiAgICAsIG5hLnN0cmluZ3MyID0gbmEuc3RyaW5ncyAgIyBjb25zdGFudCBmb3IgYWxsIGNvbHVt
bnMsIG5hLnN0cmluZ3MgTk9UIHJlcGxhY2VkIGJ5ICdOQScgaW4gc2NhbigpIG9yIHJlYWQuY2hh
ci5jb2xzKCkKICAgICwgYXMuaXMyID0gRkFMU0UKICAgICwgZGVjPWRlYy5zZXAgICAgICAgICAg
ICAgICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBzdG9yYWdlLm1vZGUyPU5VTEwK
ICAgICwgYXR0cmlidXRlczI9TlVMTAogICAgLCBsb2dpY2FsczI9bG9naWNhbHMgICAgICAgICAj
IGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgLCBmYWN0b3JzMj1mYWN0b3JzICAgICAgICAg
ICAjIGNvbnN0YW50IGZvciBhbGwgY29sdW1ucwogICAgKXsgIAogICAgICAgIGlmIChpcy5udWxs
KHN0b3JhZ2UubW9kZTIpKXsgICMjIHRoZSBvbGQgdmVyc2lvbgogICAgICAgICAgaWYgKGRlYyE9
Ii4iKQogICAgICAgICAgICB4IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNF
LCBleHRlbmRlZD1GQUxTRSkKICAgICAgICAgICAgeCA8LSAuSW50ZXJuYWwodHlwZS5jb252ZXJ0
KHgsIG5hLnN0cmluZ3MyLCBhcy5pczIpKQogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUy
PT0nY2hhcmFjdGVyJyl7CiAgICAgICAgICAgIHhbbWF0Y2goeCwgbmEuc3RyaW5nczIsIG5vbWF0
Y2g9MCk+MF0gPC0gJ05BJwogICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJpYnV0ZXMy
CiAgICAgICAgICAgIAogICAgICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0nbG9naWNhbCcp
ewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4wXSA8LSAnTkEn
CiAgICAgICAgICBpZiAoaXMubnVsbChsb2dpY2FsczIpKXsKICAgICAgICAgICAgIyMgcmVjb2du
aXplIGMoJ0ZBTFNFJywgJ1RSVUUnLCAnRicsICdUJykKICAgICAgICAgICAgeCA8LSBhcy5sb2dp
Y2FsKHgpCiAgICAgICAgICB9ZWxzZSBpZiAobW9kZShsb2dpY2FsczIpPT0nbnVtZXJpYycpewog
ICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4n
LCB4LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICAgIHggPC0g
YyhGQUxTRSwgVFJVRSlbbWF0Y2goYXMuaW50ZWdlcih4KSwgbG9naWNhbHMyKV0KICAgICAgICAg
IH1lbHNlCiAgICAgICAgICAgIHggPC0gYyhGQUxTRSwgVFJVRSlbbWF0Y2goeCwgbG9naWNhbHMy
KV0KICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAgICAgICAgIAogICAg
ICAgIH1lbHNlIGlmIChzdG9yYWdlLm1vZGUyPT0naW50ZWdlcicpewogICAgICAgICAgaWYgKCBh
bnkoIWlzLm5hKG1hdGNoKGF0dHJpYnV0ZXMyJGNsYXNzLCAnZmFjdG9yJykpKSApewogICAgICAg
ICAgICAjIyBoYW5kbGUgZmFjdG9ycwogICAgICAgICAgICBpZiAoaXMubnVsbChmYWN0b3JzMikp
ewogICAgICAgICAgICAgICMjIGFzc3VtZSBmYWN0b3IgaXMgcHJvcGVybHkgZGVzY3JpYmVkIGlu
IGF0dHJpYnV0ZXMKICAgICAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgICAgICB4
IDwtIGdzdWIoZGVjLCAnLicsIHgsIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkK
ICAgICAgICAgICAgICB4IDwtIGFzLmludGVnZXIoeCkKICAgICAgICAgICAgICBpZiAobWF4KHgp
Pmxlbmd0aChhdHRyaWJ1dGVzMiRsZXZlbHMpKQogICAgICAgICAgICAgICAgd2FybmluZygibWF4
IGZhY3RvciBjb2RlIG9mIiwgbWF4KHgpLCAid2hlcmUgb25seSIsIGxlbmd0aChhdHRyaWJ1dGVz
MiRsZXZlbHMpLCAibGV2ZWxzIikKICAgICAgICAgICAgICBhdHRyaWJ1dGVzKHgpIDwtIGF0dHJp
YnV0ZXMyCiAgICAgICAgICAgICAgCiAgICAgICAgICAgIH1lbHNlIGlmIChmYWN0b3JzMj09J25l
dycpewogICAgICAgICAgICAgICMjIGlnbm9yZSBhdHRyaWJ1dGVzCiAgICAgICAgICAgICAgeCA8
LSBmYWN0b3IoeCwgZXhjbHVkZT1uYS5zdHJpbmdzMikKICAgICAgICAgICAgICAKICAgICAgICAg
ICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nbGV2ZWxzJyl7CiAgICAgICAgICAgICAgIyMgdXNlIGNv
ZGVzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgICMgYWNjZXB0IG5hLnN0cmluZ3Mgd2hp
Y2ggYXJlIGFscmVhZHkgbGV2ZWxzCiAgICAgICAgICAgICAgbmEuc3RyaW5nczIgPC0gbmEuc3Ry
aW5nczJbIShuYS5zdHJpbmdzMiAlaW4lIGF0dHJpYnV0ZXMyJGxldmVscyldCiAgICAgICAgICAg
ICAgIyByZWplY3Qgb3RoZXIgbmEuc3RyaW5ncwogICAgICAgICAgICAgIGxldiA8LSBuYW1lcyh0
YWJsZSh4LCBleGNsdWRlPW5hLnN0cmluZ3MyKSkKICAgICAgICAgICAgICBsZXYgPC0gbGV2WyEo
bGV2ICVpbiUgYXR0cmlidXRlczIkbGV2ZWxzKV0KICAgICAgICAgICAgICBpZiAobGVuZ3RoKGxl
dik+MCl7CiAgICAgICAgICAgICAgICAgIHdhcm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUo
YXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBzZT0iOyIpLCAifSB3aXRoIHVua25vd24gbGV2ZWxz
IHsiLCBwYXN0ZShsZXYsIGNvbGxhcHNlPSI7IiksICJ9Iiwgc2VwPSIiKSkKICAgICAgICAgICAg
ICAgICAgYXR0cmlidXRlczIkbGV2ZWxzIDwtIGMoYXR0cmlidXRlczIkbGV2ZWxzLCBsZXYpCiAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB4IDwtIG1hdGNoKHgsIGF0dHJpYnV0ZXMy
JGxldmVscykKICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgICAKICAgICAgICAgICAgfWVsc2UgaWYgKGZhY3RvcnMyPT0nY29kZXMnKXsKICAg
ICAgICAgICAgICAjIyB1c2UgbGV2ZWxzIGZyb20gYXR0cmlidXRlcwogICAgICAgICAgICAgIGlm
IChkZWMhPSIuIikKICAgICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcuJywgeCwgaWdub3Jl
LmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICAgICAgeCA8LSBhcy5pbnRl
Z2VyKHgpCiAgICAgICAgICAgICAgICBjb2QgPC0gbmFtZXModGFibGUoeCkpCiAgICAgICAgICAg
ICAgICBjb2QgPC0gY29kWyEoY29kICVpbiUgMTpsZW5ndGgoYXR0cmlidXRlczIkbGV2ZWxzKSld
CiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKGNvZCk+MCl7CiAgICAgICAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImZhY3RvciB7IiwgcGFzdGUoYXR0cmlidXRlczIkbGV2ZWxzLCBjb2xsYXBz
ZT0iOyIpLCAifSB3aXRoIHVua25vd24gY29kZXMgeyIsIHBhc3RlKGNvZCwgY29sbGFwc2U9Ijsi
KSwgIn0iLCBzZXA9IiIpKQogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzMiRsZXZlbHMgPC0g
YyhhdHRyaWJ1dGVzMiRsZXZlbHMsIHBhc3RlKCJVbmtub3duQ29kZSIsIChsZW5ndGgoYXR0cmli
dXRlczIkbGV2ZWxzKSsxKTptYXgoYXMuaW50ZWdlcihjb2QpKSwgc2VwPSIiKSkKICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKICAg
ICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICB9ZWxzZXsgIyMgaXMgaW50ZWdlcgog
ICAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgICAgaWYgKGRlYyE9Ii4iKQogICAgICAgICAgICAgIHggPC0gZ3N1YihkZWMsICcu
JywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAgICB4IDwt
IGFzLmludGVnZXIoeCkKICAgICAgICAgICAgYXR0cmlidXRlcyh4KSA8LSBhdHRyaWJ1dGVzMgog
ICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9ZWxzZSBpZiAoc3RvcmFnZS5tb2RlMj09
J2RvdWJsZScpewogICAgICAgICAgeFttYXRjaCh4LCBuYS5zdHJpbmdzMiwgbm9tYXRjaD0wKT4w
XSA8LSAnTkEnCiAgICAgICAgICBpZiAoZGVjIT0iLiIpCiAgICAgICAgICAgIHggPC0gZ3N1Yihk
ZWMsICcuJywgeCwgaWdub3JlLmNhc2U9RkFMU0UsIGV4dGVuZGVkPUZBTFNFKQogICAgICAgICAg
eCA8LSBhcy5kb3VibGUoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIK
ICAgICAgICAgICAgCiAgICAgICAgfWVsc2UgaWYgKHN0b3JhZ2UubW9kZTI9PSdjb21wbGV4Jyl7
CiAgICAgICAgICB4W21hdGNoKHgsIG5hLnN0cmluZ3MyLCBub21hdGNoPTApPjBdIDwtICdOQScK
ICAgICAgICAgIGlmIChkZWMhPSIuIikKICAgICAgICAgICAgeCA8LSBnc3ViKGRlYywgJy4nLCB4
LCBpZ25vcmUuY2FzZT1GQUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCiAgICAgICAgICB4IDwtIGFzLmNv
bXBsZXgoeCkKICAgICAgICAgIGF0dHJpYnV0ZXMoeCkgPC0gYXR0cmlidXRlczIKCiAgICAgICAg
fWVsc2UKICAgICAgICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZS5tb2RlIikKICAgICAgICAgIAog
ICAgICAgIHJldHVybih4KQogICAgfQoKCgogICAgIyMgcmVkZWZpbmUgc2NhbiBub3QgdG8gYWRk
ICcnIHRvIG5hLnN0cmluZ3MKICAgIHNjYW4gPC0gCiAgICBmdW5jdGlvbiAoZmlsZSA9ICIiLCB3
aGF0ID0gZG91YmxlKDApLCBubWF4ID0gLTEsIG4gPSAtMSwgc2VwID0gIiIsIAogICAgICAgIHNr
aXAgPSAwLCBubGluZXMgPSAwLCBuYS5zdHJpbmdzID0gIk5BIiwgZmx1c2ggPSBGQUxTRSwgc3Ry
aXAud2hpdGUgPSBGQUxTRSwgCiAgICAgICAgcXVpZXQgPSBGQUxTRSkgCiAgICB7CiAgICAjISAg
ICBpZiAoIW1pc3Npbmcoc2VwKSkgCiAgICAjISAgICAgICBuYS5zdHJpbmdzIDwtIGMobmEuc3Ry
aW5ncywgIiIpCiAgICAgICAgaWYgKCFtaXNzaW5nKG4pKSB7CiAgICAgICAgICAgaWYgKG1pc3Np
bmcobm1heCkpIAogICAgICAgICAgICAgbm1heCA8LSBuL3BtYXgobGVuZ3RoKHdoYXQpLCAxKQog
ICAgICAgICAgIGVsc2Ugc3RvcCgiRWl0aGVyIHNwZWNpZnkgYG5tYXgnIG9yIGBuJywgYnV0IG5v
dCBib3RoLiIpCiAgICAgICAgfQogICAgICAgIC5JbnRlcm5hbChzY2FuKGZpbGUsIHdoYXQsIG5t
YXgsIHNlcCwgc2tpcCwgbmxpbmVzLCBuYS5zdHJpbmdzLCAKICAgICAgICAgICAgZmx1c2gsIHN0
cmlwLndoaXRlLCBxdWlldCkpCiAgICB9CgoKICAgICMgcHJlcGFyZWQgcGFyYW1ldGVycyBmb3Ig
Zml4ZWQgd2lkdGgKICAgIHN0YXJ0c3RvcCA8LSAgIWlzLm51bGwoc3RhcnQpIHx8ICFpcy5udWxs
KHN0b3ApIAogICAgaWYgKHN0YXJ0c3RvcCAmJiAoICFpcy5udWxsKHdpZHRocykgfHwgaXMubnVs
bChzdGFydCkgfHwgaXMubnVsbChzdG9wKSApKQogICAgICBzdG9wKCJmb3IgZml4ZWQgZm9ybWF0
IHNwZWNpZnkgZWl0aGVyIHdpZHRocz0gb3Igc3RhcnQ9IGFuZCBzdG9wPSIpCiAgICBmaXhlZC53
aWR0aCA8LSAhaXMubnVsbCh3aWR0aHMpIHx8IHN0YXJ0c3RvcAoKCiAgICBpZiAoZml4ZWQud2lk
dGgpewogICAgICAjIyBpbml0aWFsIHNldHRpbmcgZm9yIHdpZHRoLCBzdGFydCwgc3RvcAogICAg
ICBpZiAoc3RhcnRzdG9wKXsKICAgICAgICBzdG9wIDwtIHVubGlzdChzdG9wKQogICAgICAgIHN0
YXJ0IDwtIHVubGlzdChzdGFydCkKICAgICAgICBpZiAobGVuZ3RoKHN0YXJ0KSE9Y29scyB8fCBs
ZW5ndGgoc3RvcCkhPWNvbHMpIAogICAgICAgICAgc3RvcCgiaW52YWxpZCBsZW5ndGggZm9yIHtz
dGFydCxzdG9wfSIpCiAgICAgICAgbyA8LSBvcmRlcihzdG9wKQogICAgICAgIHN0b3AgPC0gc3Rv
cFtvXQogICAgICAgIHN0YXJ0IDwtIHN0YXJ0W29dCiAgICAgICAgcmVtb3ZlKG8pCiAgICAgICAg
d2lkdGhzIDwtIHN0b3AgLSBzdGFydCArIDEKICAgICAgfWVsc2V7CiAgICAgICAgaWYgKGxlbmd0
aCh3aWR0aHMpPT0xKXsKICAgICAgICAgIHdpZHRocyA8LSByZXAod2lkdGhzLCBjb2xzKQogICAg
ICAgIH1lbHNlIGlmIChsZW5ndGgod2lkdGhzKT09Y29scykgCiAgICAgICAgICB3aWR0aHMgPC0g
dW5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAgICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0
aCBmb3Igd2lkdGhzIikKICAgICAgICAjIyByZWFkanVzdCBzdGFydC9zdG9wCiAgICAgICAgbGFz
dHN0b3AgPC0gMAogICAgICAgIGZvciAoaSBpbiAxOmNvbHMpewogICAgICAgICAgc3RhcnRbW2ld
XSA8LSBsYXN0c3RvcCArIDEKICAgICAgICAgIHN0b3BbW2ldXSA8LSBsYXN0c3RvcCA8LSBsYXN0
c3RvcCArIHdpZHRoc1tbaV1dCiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOmxlbmd0aCh3aWR0aHMp
LCBzZXAgPSAiIikKICAgICAgZWxzZSBpZiAoYW55KHN0cmlwLnF1b3RhdGlvbi5tYXJrcykpIGNv
bC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykKCiAgICAgIAog
ICAgfWVsc2V7IAogICAgIAogICAgICBpZiAoZGVjLnNlcD09c2VwKQogICAgICAgIHN0b3AoInNl
cCBtdXN0IG5vdCBlcXVhbCBkZWMuc2VwIikKICAgICAgaWYgKHN0cmlwLndoaXRlICYmIHNlcCAl
aW4lIGMoIiIsICIgIiwgIlx0IikpCiAgICAgICAgd2FybmluZygicmVhZC50YWJsZTogc3RyaXAu
d2hpdGUgQU5EIHdoaXRlIHNwYWNlIHNlcGVyYXRvciAhPyIpCgogICAgIAogICAgICByb3cubGVu
cyA8LSBjb3VudC5maWVsZHMoZmlsZSwgc2VwLCBza2lwKSAjIyByZW1hcms6IG9idmlvdXNseSB0
aGUgZmlsZSBpcyByZWFkIHR3aWNlIAogICAgICBubGluZXMgPC0gbWluKGxlbmd0aChyb3cubGVu
cyksIG5saW5lcysxKSAjIyBjaGFuZ2VkIGJlY2F1c2UgbmxpbmVzIG5vdyBpcyBhIHBhcmFtZXRl
cgogICAgICAjIyMgU3RvcCBKT0EgY2hhbmdlcyAgIAogICAgICBybGFicCA8LSBubGluZXMgPiAx
ICYmIChyb3cubGVuc1syXSAtIHJvdy5sZW5zWzFdKSA9PSAxICAKICAgICAgaWYgKHJsYWJwICYm
IG1pc3NpbmcoaGVhZGVyKSkgCiAgICAgICAgIGhlYWRlciA8LSBUUlVFCiAgICAgIGlmIChoZWFk
ZXIpIHsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBzY2FuKGZpbGUsIHdoYXQgPSAiIiwgc2VwID0g
c2VwLCBubGluZXMgPSAxLCAKICAgICAgICAgICAgICBzdHJpcC53aGl0ZSA9IHN0cmlwLndoaXRl
LCAjIyBhZGRlZCBieSBKT0EKICAgICAgICAgICAgICBxdWlldCA9IFRSVUUsIHNraXAgPSBza2lw
KQogICAgICAgICAgc2tpcCA8LSBza2lwICsgMQogICAgICAgICAgcm93LmxlbnMgPC0gcm93Lmxl
bnNbLTFdCiAgICAgICAgICBubGluZXMgPC0gbmxpbmVzIC0gMQogICAgICB9ZWxzZSBpZiAobWlz
c2luZyhjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gcGFzdGUoIlYiLCAxOnJvdy5s
ZW5zWzFdLCBzZXAgPSAiIikKICAgICAgaWYgKGFueShzdHJpcC5xdW90YXRpb24ubWFya3MpKQog
ICAgICAgIGNvbC5uYW1lcyA8LSB1bnF1b3RhdGUoY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaykg
IyMgYWRkZWQgYnkgSk9BCiAgICAKICAgICAgY29scyA8LSB1bmlxdWUocm93LmxlbnMpCiAgICAg
IGlmIChsZW5ndGgoY29scykgIT0gMSkgewogICAgICAgICAgY2F0KCJcbnJvdy5sZW5zPVxuIikK
ICAgICAgICAgIHByaW50KHJvdy5sZW5zKQogICAgICAgICAgc3RvcCgiYWxsIHJvd3MgbXVzdCBo
YXZlIHRoZSBzYW1lIGxlbmd0aC4iKQogICAgICB9CiAgICAgIHdoYXQgPC0gcmVwKGxpc3QoIiIp
LCBjb2xzKQogICAgICBpZiAocmxhYnApIAogICAgICAgIGNvbC5uYW1lcyA8LSBjKCJyb3cubmFt
ZXMiLCBjb2wubmFtZXMpCiAgICAgIG5hbWVzKHdoYXQpIDwtIGNvbC5uYW1lcwoKICAgIH0gIyBl
bmQgb2Ygbm9uLWZpeGVkLXdpZHRoCgoKICAgICMjIyBTdGFydCBKT0EgY2hhbmdlcwogICAgaWYg
KGZpeGVkLndpZHRoKXsKCiAgICAgIGRhdGEgPC0gcmVhZC5jaGFyLmNvbHMoZmlsZT1maWxlLCBz
dGFydCwgc3RvcAogICAgICAsIHNraXA9c2tpcAogICAgICAsIG5saW5lcz1ubGluZXMKICAgICAg
LCBlb2w9ZW9sCiAgICAgICwgbmEuc3RyaW5ncz0nTkEnCiAgICAgICkKICAgICAgbmxpbmVzIDwt
IGxlbmd0aChkYXRhW1sxXV0pCiAgICAgIG5hbWVzKGRhdGEpIDwtIGNvbC5uYW1lcwoKICAgIH1l
bHNleyAjIyMgU3RvcCBKT0EgY2hhbmdlcwoKICAgICAgIyMgbmEuc3RyaW5ncyBtdXN0IGJlIHRy
ZWF0ZWQgbGF0ZXIsIGlmIHVucXVvdGF0ZSgpIHNoYWxsIGhhdmUgYW4gZWZmZWN0CiAgICAgICMj
IGFzIHdlIG9ubHkgcmVhZCBpbiBzdHJpbmdzIGhlcmUsIHJlcGxhY2luZyAnTkEnIGJ5ICdOQScg
aXMgb2sKICAgICAgIyMgaG93ZXZlciwgc3RhbmRhcmQgdmVyc2lvbiBvZiBzY2FuIGF1dG9tYXRp
Y2FsbHkgbWFrZXMgbmEuc3RyaW5ncz1jKCdOQScsICcnKQogICAgICAjIyB0aHVzIGhlcmUgcmVk
ZWZpbmVkIHZlcnNpb24gb2Ygc2NhbiB1c2VkCiAgICAgIGRhdGEgPC0gc2NhbihmaWxlID0gZmls
ZSwgd2hhdCA9IHdoYXQsIHNlcCA9IHNlcCwgc2tpcCA9IHNraXAKICAgICAgICAgICAgICAsIG5h
LnN0cmluZ3MgPSAnTkEnICAgICAgICAgIyMgY2hhbmdlZCBieSBKT0EKICAgICAgICAgICAgICAs
IHN0cmlwLndoaXRlID0gc3RyaXAud2hpdGUgIyMgYWRkZWQgYnkgSk9BCiAgICAgICAgICAgICAg
LCBxdWlldCA9IFRSVUUpIAogICAgICBpZiAoY29scyAhPSBsZW5ndGgoZGF0YSkpIHsKICAgICAg
ICAgIHdhcm5pbmcocGFzdGUoImNvbHMgPSIsIGNvbHMsICIgIT0gbGVuZ3RoKGRhdGEpID0iLCBs
ZW5ndGgoZGF0YSkpKQogICAgICAgICAgY29scyA8LSBsZW5ndGgoZGF0YSkKICAgICAgfQogICAg
CiAgICB9ICMgZW5kIG9mIG5vbi1maXhlZC13aWR0aAoKCiAgICMjIFN0YXJ0IGNoYW5nZWQgYnkg
Sk9BICAgICAgICAKCiAgICBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcyk9PTEpCiAg
ICAgIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA8LSByZXAoc3RyaXAucXVvdGF0aW9uLm1hcmtzLCBj
b2xzKQogICAgZWxzZSBpZiAobGVuZ3RoKHN0cmlwLnF1b3RhdGlvbi5tYXJrcykhPWNvbHMpCiAg
ICAgICAgc3RvcChwYXN0ZSgic3RyaXAucXVvdGF0aW9uLm1hcmtzIGhhcyB0aGUgd3JvbmcgbGVu
Z3RoIgogICAgICAgICAgICAgLCBsZW5ndGgoc3RyaXAucXVvdGF0aW9uLm1hcmtzKSwiIT0gY29s
cyA9IiwgY29scykpCgogICAgaWYgKGlzLmxvZ2ljYWwoYXMuaXMpKSB7CiAgICAgIGlmIChsZW5n
dGgoYXMuaXMpPT0xKQogICAgICAgIGFzLmlzIDwtIHJlcChhcy5pcywgbGVuZ3RoID0gY29scykK
ICAgICAgZWxzZSBpZiAobGVuZ3RoKGFzLmlzKSE9Y29scykKICAgICAgICBzdG9wKHBhc3RlKCJh
cy5pcyBoYXMgdGhlIHdyb25nIGxlbmd0aCIsIGxlbmd0aChhcy5pcyksIiE9IGNvbHMgPSIsIGNv
bHMpKQogICAgfQogICAgZWxzZSBpZiAoaXMubnVtZXJpYyhhcy5pcykpIHsKICAgICAgICBpZiAo
YW55KGFzLmlzIDwgMSB8IGFzLmlzID4gY29scykpIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlk
IG51bWVyaWMgYXMuaXMgZXhwcmVzc2lvbiIpCiAgICAgICAgaSA8LSByZXAoRkFMU0UsIGNvbHMp
CiAgICAgICAgaVthcy5pc10gPC0gVFJVRQogICAgICAgIGFzLmlzIDwtIGkKICAgIH0KICAgIGVs
c2UgCiAgICAgICAgc3RvcChwYXN0ZSgiYXMuaXMgaGFzIHdyb25nIHR5cGUiKSkKCiAgICAgICAg
ICAgCiAgIAogICBpZiAoaXMubnVsbChzdG9yYWdlLm1vZGUpICYmICFpcy5udWxsKGF0dHJpYnV0
ZXMpKQogICAgIHN0b3AoImF0dHJpYnV0ZXMgbXVzdCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggc3Rv
cmFnZS5tb2RlIikKICAgaWYgKGxlbmd0aChzdG9yYWdlLm1vZGUpPT0xKQogICAgIHN0b3JhZ2Uu
bW9kZSA8LSByZXAoc3RvcmFnZS5tb2RlLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoc3RvcmFn
ZS5tb2RlKT4xICYmIGxlbmd0aChzdG9yYWdlLm1vZGUpIT1jb2xzKQogICAgIHN0b3AoInN0b3Jh
Z2UubW9kZSBoYXMgd3JvbmcgbGVuZ3RoIiwgbGVuZ3RoKHN0b3JhZ2UubW9kZSksICIhPSBjb2xz
ID0iLCBjb2xzKQogICBpZiAoIWFsbChtYXRjaChzdG9yYWdlLm1vZGUsIHN0b3JhZ2UubW9kZXMs
IG5vbWF0Y2g9MCkpKQogICAgIHN0b3AoImlsbGVnYWwgc3RvcmFnZSBtb2RlIikKICAgaWYgKGxl
bmd0aChhdHRyaWJ1dGVzKT09MSkKICAgICBhdHRyaWJ1dGVzIDwtIHJlcChhcy5saXN0KGF0dHJp
YnV0ZXMpLCBjb2xzKQogICBlbHNlIGlmIChsZW5ndGgoYXR0cmlidXRlcyk+MSAmJiBsZW5ndGgo
YXR0cmlidXRlcykhPWNvbHMpCiAgICAgc3RvcCgiYXR0cmlidXRlcyBoYXMgd3JvbmcgbGVuZ3Ro
IiwgbGVuZ3RoKGF0dHJpYnV0ZXMpLCAiIT0gY29scyA9IiwgY29scykKICAKICAgZm9yIChpIGlu
IDE6Y29scykgewogICAgIGlmIChmaXhlZC53aWR0aCAmJiBzdHJpcC53aGl0ZSkKICAgICAgIGNv
bHVtbiA8LSB0cmltKGRhdGFbW2ldXSwgJyBcdCcpCiAgICAgZWxzZQogICAgICAgY29sdW1uIDwt
IGRhdGFbW2ldXQogICAgIGlmIChzdHJpcC5xdW90YXRpb24ubWFya3NbaV0pCiAgICAgICBjb2x1
bW4gPC0gdW5xdW90YXRlKGNvbHVtbiwgcXVvdGF0aW9uLm1hcmspCiAgICAgaWYgKGVzY2FwZWQu
cXVvdGF0aW9uLm1hcmsgIT0gcXVvdGF0aW9uLm1hcmspCiAgICAgICBjb2x1bW4gPC0gZ3N1Yihl
c2NhcGVkLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyaywgY29sdW1uLCBleHRlbmRlZD1G
QUxTRSkKICAgICAgIAogICAgIGRhdGFbW2ldXSA8LSB0eXBlLmNvbnZlcnQoY29sdW1uCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFzLmlzPWFzLmlzW2ldCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAsIHN0b3JhZ2UubW9kZT1zdG9yYWdlLm1vZGVbaV0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICwgYXR0cmlidXRlcz1hdHRyaWJ1dGVzW1tpXV0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgIAogICB9CiAgIAogICAKICAgcm93dmFyIDwt
IDAgIyMgYWRkZWQgYnkgSk9BIGZvciB0ZW1wbGF0ZQogICAKICAgIyMgU3RvcCBjaGFuZ2VkIGJ5
IEpPQSAgICAgICAgCiAgICAgICAgICAgIAogICAgaWYgKG1pc3Npbmcocm93Lm5hbWVzKSkgewog
ICAgICAgIGlmICghZml4ZWQud2lkdGggJiYgcmxhYnApIHsgICMjIGNoYW5nZWQgYnkgSk9BIChv
bmx5IHN2cykKICAgICAgICAgICAgcm93Lm5hbWVzIDwtIGRhdGFbWzFdXQogICAgICAgICAgICBy
b3d2YXIgPC0gMSAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3IgdGVtcGxhdGUKICAgICAgICAg
ICAgY29sLm5hbWVzIDwtIGMoInJvd25hbWVzIiwgY29sLm5hbWVzKSAgIyMgYWRkZWQgYnkgSk9B
IGZvciB0ZW1wbGF0ZQogICAgICAgICAgICBkYXRhIDwtIGRhdGFbLTFdCiAgICAgICAgfQogICAg
ICAgIGVsc2Ugcm93Lm5hbWVzIDwtIGFzLmNoYXJhY3RlcigxOm5saW5lcykKICAgIH0KICAgIGVs
c2UgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCByb3cubmFtZXM9PTApIHsKICAgICAgICByb3cu
bmFtZXMgPC0gYXMuY2hhcmFjdGVyKDE6bmxpbmVzKQogICAgfQogICAgZWxzZSBpZiAoaXMuY2hh
cmFjdGVyKHJvdy5uYW1lcykpIHsKICAgICAgICBpZiAobGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkg
ewogICAgICAgICAgICByb3d2YXIgPC0gKDE6Y29scylbbWF0Y2goY29sLm5hbWVzLCByb3cubmFt
ZXMsIDApID09IDFdCiAgICAgICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tyb3d2YXJdXQogICAg
ICAgICAgICBkYXRhIDwtIGRhdGFbLXJvd3Zhcl0KICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlm
IChpcy5udW1lcmljKHJvdy5uYW1lcykgJiYgbGVuZ3RoKHJvdy5uYW1lcykgPT0gMSkgewogICAg
ICAgIHJsYWJwIDwtIHJvdy5uYW1lcwogICAgICAgIHJvdy5uYW1lcyA8LSBkYXRhW1tybGFicF1d
CiAgICAgICAgcm93dmFyIDwtIHJsYWJwICAgICAgICAgICAgICMjIGFkZGVkIGJ5IEpPQSBmb3Ig
dGVtcGxhdGUKICAgICAgICBkYXRhIDwtIGRhdGFbLXJsYWJwXQogICAgfQogICAgZWxzZSBzdG9w
KCJpbnZhbGlkIHJvdy5uYW1lcyBzcGVjaWZpY2F0aW9uIikKICAgIAogICAgY2xhc3MoZGF0YSkg
PC0gImRhdGEuZnJhbWUiCiAgICByb3cubmFtZXMoZGF0YSkgPC0gcm93Lm5hbWVzCiAgICAKICAg
IGlmICh0ZW1wbGF0ZS5hdHRyaWJ1dGUpewogICAgCiAgICAgIGlmIChpcy5udWxsKHdpZHRocykp
CiAgICAgICAgZGlnaXRzIDwtIE5VTEwKICAgICAgZWxzZXsKICAgICAgICB3aWR0aHMgPC0gYXMu
bGlzdCh3aWR0aHMpCiAgICAgICAgZGlnaXRzIDwtIHJlcChsaXN0KE5VTEwpLCBjb2xzKQogICAg
ICB9CiAgICAKICAgICAgaWYgKHJvd3Zhcj4wKXsKICAgICAgICBzdG9yYWdlLm1vZGUgPC0gYygg
ImNoYXJhY3RlciIsIHVubmFtZSh1bmxpc3QobGFwcGx5KGRhdGEsIHN0b3JhZ2UubW9kZSkpKSAp
CiAgICAgICAgYXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgbGFwcGx5
KGRhdGEsIGF0dHJpYnV0ZXMpKQogICAgICAgIG5hbWVzKGF0dHJpYnV0ZXMpWzFdIDwtIGNvbC5u
YW1lc1tyb3d2YXJdCiAgICAgIH1lbHNlewogICAgICAgIHN0b3JhZ2UubW9kZSA8LSB1bm5hbWUo
dW5saXN0KGxhcHBseShkYXRhLCBzdG9yYWdlLm1vZGUpKSkKICAgICAgICBhdHRyaWJ1dGVzIDwt
IGxhcHBseShkYXRhLCBhdHRyaWJ1dGVzKQogICAgICB9CiAgICAgIGF0dHIoZGF0YSwgJ3RlbXBs
YXRlJykgPC0gc3RydWN0dXJlKAogICAgICAgIGxpc3QoZmlsZSA9IGZpbGUgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAg
ICwgZW9sID0gZW9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVy
IGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgc2VwID0gc2VwICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUgKGNoYXJhY3RlcikKICAgICAgICAgICwg
ZGVjLnNlcCA9IGRlYy5zZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgICAgICwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MgICAgICAg
ICAgICAgICAgICAgICAgICAgICMgcGVyIGZpbGUsIGJ1dCBhbGxvdyBtb3JlIHRoYW4gb25lIChj
aGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5t
YXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8Ij4gaW4g
Q1NWIAogICAgICAgICAgLCBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrID0gZXNjYXBlZC5xdW90YXRp
b24ubWFyayAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKSwgZS5nLiA8IiI+IGluIENTVgogICAgICAg
ICAgLCBsb2dpY2FscyA9IGxvZ2ljYWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBw
ZXIgZmlsZSwgdHdvIHZhbHVlcyByZXByZXNlbnRpbmcgRkFMU0UgYW5kIFRSVUUgKG51bWVyaWNh
bCBvciBjaGFyYWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMgaW4g
ZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAgICAgLCByb3cu
bmFtZXMubG9jID0gcm93dmFyICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwg
Y29sbm8gb2Ygcm93bmFtZXMsIDAgPSBubyByb3cubmFtZXMgaW4gZmlsZSAoaW50ZWdlcikKICAg
ICAgICAgICwgaGVhZGVyID0gaGVhZGVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUsIHdoZXRoZXIgZmlyc3Qgcm93IGlzIGNvbC5uYW1lcyAobG9naWNhbCkKICAg
ICAgICAgICwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZSAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGZpbGUKICAgICAgICAgICwgY29sLm5hbWVzID0gY29sLm5hbWVzICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIGNvcm5lci5uYW1lIChjaGFy
YWN0ZXIgdmVjdG9yKQogICAgICAgICAgLCBxdW90ZSA9IHN0cmlwLnF1b3RhdGlvbi5tYXJrcyAg
ICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCB3aGV0aGVyIGNvbHVtbiBpcyBxdW90ZWQg
KGxvZ2ljYWwgdmVjdG9yKQogICAgICAgICAgLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUg
ICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAg
ICAgICAgICwgd2lkdGhzID0gd2lkdGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgaW5jbHVkaW5nIHJvdy5uYW1lcy53aWR0aCAobGlzdCBvciBOVUxMKQog
ICAgICAgICAgLCBkaWdpdHMgPSBkaWdpdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCBvciBOVUxMKQogICAgICAgICAgLCBhdHRyaWJ1dGVzID0g
YXR0cmlidXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCAobGlzdCkK
ICAgICAgICAgICwgZXh0ZW5zaW9uLndhcm5pbmcgPSBGQUxTRSAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIFRSVUUvRkFMU0UgaW5kaWNhdGVzIHdldGhlciBvdXQgc3BlY3MgZGlm
ZmVyIGZyb20gaW4gc3BlY3MgCiAgICAgICAgICAsIHNlcGVyYXRvci53YXJuaW5nID0gTkEgICAg
ICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAg
ICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBOQSAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICAgICApCiAgICAgICAgLCBjbGFzcz0idGVtcGxh
dGUiKQoKICAgIH0KICAgIGRhdGEKfQoKCnJlYWQuY2hhci5jb2xzIDwtIGZ1bmN0aW9uKGZpbGUs
IHN0YXJ0LCBzdG9wCiwgc2tpcD0wCiwgbmxpbmVzPTAKLCBlb2w9J1xuJwosIG5hLnN0cmluZ3M9
J05BJwopCnsKICAjIyMjIG5vIGVycm9yIGNoZWNraW5nIGluIHRoaXMgZnVuY3Rpb24KICAjIyMj
IHN0YXJ0c3RvcCBleHBlY3RlZCBzb3J0ZWQgYnkgU1RPUCAhIQogICMjIyMgb3ZlcmxhcHBpbmcg
Y29sdW1ucyBhbGxvd2VkCiAgIyMjIyBUaGlzIHNlY3Rpb24gY291bGQgYmUgcmVwbGFjZWQgYnkg
YSBDLWNhbGwgcmVhZGluZyBpbiBhIGZpbGUgaW4gY29sdW1ucyBzcGVjaWZpZWQgYnkgc3RhcnQv
c3RvcCAjIyMjCgogIHAgPC0gbGVuZ3RoKHN0YXJ0KQogIAogICMjIG5hLnN0cmluZ3M9TlVMTCBj
dXJyZW50bHkgbm90IHBvc3NpYmxlIGluIHNjYW4oKQogIGFsbC5pbi5vbmUgPC0gc2NhbihmaWxl
ID0gZmlsZSwgc2VwID0gZW9sLCBza2lwID0gc2tpcCwgbmxpbmVzPW5saW5lcwogICAgLCB3aGF0
ID0gY2hhcmFjdGVyKDApLCBuYS5zdHJpbmdzID0gJycsIGZsdXNoID0gRkFMU0UsIHN0cmlwLndo
aXRlID0gRkFMU0UsIHF1aWV0ID0gVFJVRSkKICBubGluZXMgPC0gbGVuZ3RoKGFsbC5pbi5vbmUp
CiAgYWxsLmluLmNvbHMgPC0gbGlzdCgpCiAgZm9yIChpIGluIDE6cCl7CiAgICBhbGwuaW4uY29s
c1tbaV1dIDwtIHN1YnN0cihhbGwuaW4ub25lLCBzdGFydFtpXSwgc3RvcFtpXSkKICAgIGlmICgh
aXMubnVsbChuYS5zdHJpbmdzKSB8fCBsZW5ndGgobmEuc3RyaW5ncyk+MSB8fCBuYS5zdHJpbmdz
WzFdIT0nTkEnKQogICAgICBhbGwuaW4uY29sc1tbaV1dW21hdGNoKGFsbC5pbi5jb2xzW1tpXV0s
IG5hLnN0cmluZ3MsIG5vbWF0Y2ggPSAwKSA+IDBdIDwtICJOQSIKICB9CiAgIyMjIyBFbmQgb2Yg
VGhpcyBzZWN0aW9uIGNvdWxkIGJlIHJlcGxhY2VkIGJ5IGEgQy1jYWxsIHJlYWRpbmcgaW4gYSBm
aWxlIGluIGNvbHVtbnMgc3BlY2lmaWVkIGJ5IHN0YXJ0L3N0b3AgIyMjIwogIHJldHVybihhbGwu
aW4uY29scykKfQoKCgojIyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBjb21tYSBzZXBlcmF0ZWQgdmFs
dWVzCiMjIG5vdGUgdGhhdCBjc3YgaXMgTk9UIGZ1bGx5IHN1cHBvcnRlZCB5ZXQKIyMgc3RyaW5n
cyBtdXN0IG5vdCBjb250YWluIHF1b3RhdGlvbi5tYXJrIG9yIHNlcAojIyAoR05VKSBDb3B5cmln
aHQgSk9BIDE5OTkKcmVhZC5zdnMgPC0gZnVuY3Rpb24gKGZpbGUKLCBoZWFkZXIgPSBUUlVFICAg
ICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBmb3IgQ1NWCiwgc2VwID0gJzsnICAgICAgICAgICAg
ICAgICAgICAgICMjIGNoYW5nZWQgZm9yIENTVgosIHJvdy5uYW1lcwosIGNvbC5uYW1lcwosIGFz
LmlzID0gRkFMU0UKLCBuYS5zdHJpbmdzID0gJycgICAgICAgICAgICAgICAgIyMgY2hhbmdlZCBm
b3IgQ1NWCiwgc2tpcCA9IDAKLCBubGluZXM9SW5mCiwgZGVjLnNlcCA9ICcuJwosIHF1b3RhdGlv
bi5tYXJrID0gJyInCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9ICciIicgICMjIGNoYW5nZWQg
Zm9yIENTVgosIHN0cmlwLndoaXRlID0gVFJVRQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IFRS
VUUKLCB3aWR0aHM9TlVMTAosIHN0YXJ0PU5VTEwKLCBzdG9wPU5VTEwKLCBjb2xzPW1heChsZW5n
dGgod2lkdGhzKSwgbGVuZ3RoKHN0YXJ0KSwgbGVuZ3RoKHN0b3ApKQosIGVvbD0nXG4nCiwgc3Rv
cmFnZS5tb2RlID0gTlVMTAosIGF0dHJpYnV0ZXMgPSBOVUxMCiwgbG9naWNhbHMgPSBOVUxMCiwg
ZmFjdG9ycyA9IE5VTEwKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSBGQUxTRQopIApyZWFkLnRhYmxl
IChmaWxlID0gZmlsZQosIGhlYWRlciA9IGhlYWRlcgosIHNlcCA9IHNlcAosIHJvdy5uYW1lcyA9
IHJvdy5uYW1lcwosIGNvbC5uYW1lcyA9IGNvbC5uYW1lcwosIGFzLmlzID0gYXMuaXMKLCBuYS5z
dHJpbmdzID0gbmEuc3RyaW5ncwosIHNraXAgPSBza2lwCiwgbmxpbmVzID0gbmxpbmVzCiwgZGVj
LnNlcCA9IGRlYy5zZXAKLCBxdW90YXRpb24ubWFyayA9IHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9
IHN0cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gc3RyaXAucXVvdGF0aW9uLm1h
cmtzCiwgd2lkdGhzID0gd2lkdGhzCiwgc3RhcnQgPSBzdGFydAosIHN0b3AgPSBzdG9wCiwgY29s
cyA9IGNvbHMKLCBlb2wgPSBlb2wKLCBzdG9yYWdlLm1vZGUgPSBzdG9yYWdlLm1vZGUKLCBhdHRy
aWJ1dGVzID0gYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0b3JzID0gZmFj
dG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9IHRlbXBsYXRlLmF0dHJpYnV0ZQopIAoKCiMjIHdy
YXBwZXIgZnVuY3Rpb24gZm9yIGNvbW1hIHNlcGVyYXRlZCB2YWx1ZXMKIyMgbm90ZSB0aGF0IGNz
diBpcyBOT1QgZnVsbHkgc3VwcG9ydGVkIHlldAojIyBzdHJpbmdzIG11c3Qgbm90IGNvbnRhaW4g
cXVvdGF0aW9uLm1hcmsgb3Igc2VwCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQpyZWFkLmZp
eCA8LSBmdW5jdGlvbiAoZmlsZQosIGhlYWRlciA9IEZBTFNFCiwgc2VwID0gJycKLCByb3cubmFt
ZXMKLCBjb2wubmFtZXMKLCBhcy5pcyA9IEZBTFNFCiwgbmEuc3RyaW5ncyA9ICcnICAgICAgICAg
ICAgICAgICMjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHNraXAgPSAwCiwgbmxpbmVzPUlu
ZgosIGRlYy5zZXAgPSAnLicKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIicKLCBzdHJpcC53aGl0ZSA9IFRSVUUKLCBzdHJpcC5xdW90YXRpb24ubWFy
a3MgPSBUUlVFCiwgd2lkdGhzPU5VTEwKLCBzdGFydD1OVUxMCiwgc3RvcD1OVUxMCiwgY29scz1t
YXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2w9J1xu
JwosIHN0b3JhZ2UubW9kZSA9IE5VTEwKLCBhdHRyaWJ1dGVzID0gTlVMTAosIGxvZ2ljYWxzID0g
TlVMTAosIGZhY3RvcnMgPSBOVUxMCiwgdGVtcGxhdGUuYXR0cmlidXRlID0gRkFMU0UKKSAKcmVh
ZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAgPSBzZXAKLCByb3cu
bmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBhcy5pcyA9IGFzLmlz
CiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5saW5lcyA9IG5saW5l
cwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgc3RyaXAu
d2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9IHN0cmlwLnF1b3Rh
dGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQKLCBzdG9wID0gc3Rv
cAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0gc3RvcmFnZS5tb2Rl
CiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2ljYWxzCiwgZmFjdG9y
cyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5hdHRyaWJ1dGUKKSAK
CgpyZWFkLnRlbXBsYXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlCiwgZmlsZSA9IHRlbXBsYXRlJGZp
bGUKLCBoZWFkZXIgPSB0ZW1wbGF0ZSRoZWFkZXIKLCBzZXAgPSB0ZW1wbGF0ZSRzZXAKLCByb3cu
bmFtZXMgPSB0ZW1wbGF0ZSRyb3cubmFtZXMKLCBjb2wubmFtZXMgPSB0ZW1wbGF0ZSRjb2wubmFt
ZXMKLCBhcy5pcyA9IEZBTFNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMgbXVzdCBi
ZSBGQUxTRSEKLCBuYS5zdHJpbmdzID0gdGVtcGxhdGUkbmEuc3RyaW5ncwosIHNraXAgPSAwCiwg
bmxpbmVzID0gSW5mCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBxdW90YXRpb24ubWFy
ayA9IHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrCiwgZXNjYXBlZC5xdW90YXRpb24ubWFyayA9IHRl
bXBsYXRlJGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKLCBzdHJpcC53aGl0ZSA9IHRlbXBsYXRlJHN0
cmlwLndoaXRlCiwgc3RyaXAucXVvdGF0aW9uLm1hcmtzID0gdGVtcGxhdGUkcXVvdGUKLCB3aWR0
aHMgPSB0ZW1wbGF0ZSR3aWR0aHMKLCBzdGFydCA9IE5VTEwKLCBzdG9wID0gTlVMTAosIGNvbHMg
PSBtYXgobGVuZ3RoKHdpZHRocyksIGxlbmd0aChzdGFydCksIGxlbmd0aChzdG9wKSkKLCBlb2wg
PSB0ZW1wbGF0ZSRlb2wKLCBzdG9yYWdlLm1vZGUgPSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKLCBh
dHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcwosIGxvZ2ljYWxzID0gdGVtcGxhdGUkbG9n
aWNhbHMKLCBmYWN0b3JzID0gdGVtcGxhdGUkZmFjdG9ycwosIHRlbXBsYXRlLmF0dHJpYnV0ZSA9
IEZBTFNFCikKcmVhZC50YWJsZSAoZmlsZSA9IGZpbGUKLCBoZWFkZXIgPSBoZWFkZXIKLCBzZXAg
PSBzZXAKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wubmFtZXMgPSBjb2wubmFtZXMKLCBh
cy5pcyA9IGFzLmlzCiwgbmEuc3RyaW5ncyA9IG5hLnN0cmluZ3MKLCBza2lwID0gc2tpcAosIG5s
aW5lcyA9IG5saW5lcwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90
YXRpb24ubWFyawosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrCiwgc3RyaXAud2hpdGUgPSBzdHJpcC53aGl0ZQosIHN0cmlwLnF1b3RhdGlvbi5tYXJrcyA9
IHN0cmlwLnF1b3RhdGlvbi5tYXJrcwosIHdpZHRocyA9IHdpZHRocwosIHN0YXJ0ID0gc3RhcnQK
LCBzdG9wID0gc3RvcAosIGNvbHMgPSBjb2xzCiwgZW9sID0gZW9sCiwgc3RvcmFnZS5tb2RlID0g
c3RvcmFnZS5tb2RlCiwgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMKLCBsb2dpY2FscyA9IGxvZ2lj
YWxzCiwgZmFjdG9ycyA9IGZhY3RvcnMKLCB0ZW1wbGF0ZS5hdHRyaWJ1dGUgPSB0ZW1wbGF0ZS5h
dHRyaWJ1dGUKKQoKCgojIyB3cml0ZS50YWJsZSgpIGNvbXBsZXRlbHkgcmV3cml0dGVuCiMjIChH
TlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0ZS50YWJsZSA8LSAKZnVuY3Rpb24gKHgsIGZpbGUg
PSAnJwosIGFwcGVuZCA9IEZBTFNFICAgICAgICAgICAgICAgICAjIyBjaGFuZ2VkOiBhcHBlbmRp
bmcgc3VwcHJlc3NlcyBjb2wubmFtZXMgKGFuZCBjb3JuZXIubmFtZSkKLCBxdW90ZSA9IFRSVUUg
ICAgICAgICAgICAgICAgICAgIyMgY2hhbmdlZDogdmVjdG9yIG9mIGxvZ2ljYWxzIGFsc28gYWxs
b3dlZAosIHNlcCA9ICcgJwosIGVvbCA9ICdcbicKLCBuYSA9ICdOQScgICAgICAgICAgICAgICAg
ICAgICAgICAjIyBjaGFuZ2VkOiBkZWZhdWx0ICdOQScgaW5zdGVhZCBvZiBOQSAob2xkIGRvY3Ug
c2FpZCAndGhlIFNUUklORyB0byB1c2UgZm9yIG1pc3NpbmcgdmFsdWVzJykKLCByb3cubmFtZXMg
PSBUUlVFCiwgY29sLm5hbWVzID0gVFJVRSAgICAgICAgICAgICAgICMjIG5vdGU6IGNvbC5uYW1l
cyBtYXkgY2F1c2UgZXh0ZW5zaW9uIG9mIGNvbHVtbiB3aWR0aHMKLCBjb3JuZXIubmFtZSA9ICdy
b3duYW1lcycgICAgICAgICAgICAjIyBuZXc6IG9ubHkgdXNlZCBpZiByb3cubmFtZXMgYW5kIGNv
bC5uYW1lcywgc2V0IHRvICcnIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5Ciwgcm93Lm5hbWVz
LndpZHRoID0gdW5saXN0KHdpZHRoc1sxXSkgIyMgbmV3CiwgcXVvdGF0aW9uLm1hcmsgPSAnIicg
ICAgICAgICAgICMjIG5ldwosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSAnIicgICAjIyBuZXc6
IHN1YnN0aXR1dGlvbiBvbmx5IGlmIGl0IGRpZmZlcnMgZnJvbSBxdW90YXRpb24ubWFyawosIGxv
Z2ljYWxzID0gYygnRkFMU0UnLCAnVFJVRScpICAjIyBuZXc6IGUuZy4gYygwLDEpIG9yIGMoJ25v
JywneWVzJyksIG51bWVyaWNzIGFyZSBjb2VyY2VkIHRvIGludGVnZXIKLCBmYWN0b3JzID0gYygn
bGV2ZWxzJywgJ2NvZGVzJykgIyMgbmV3OiBjaG9vc2UgZWl0aGVyICdsZXZlbHMnIG9yICdjb2Rl
cycgKGFzLm51bWVyaWMoKSwgbm90IGNvZGVzKCkpCiwgZGVjLnNlcCA9ICcuJyAgICAgICAgICAg
ICAgICAgICMjIG5ldwosIGRpZ2l0cyA9IE5VTEwgICAgICAgICAgICAgICAgICAjIyBuZXc6IGNh
biByZWR1Y2UgZGlnaXRzLCBzcGVjaWZpeSBhIHNpbmdsZSB2YWx1ZSwgYSB2ZWN0b3Igb3IgYSBs
aXN0Ciwgd2lkdGhzID0gTlVMTCAgICAgICAgICAgICAgICAgICMjIG5ldzogY2FuIGZvcmNlIGZ3
Ziwgc3BlY2lmeSBUUlVFLCBhIGNvbW1vbiB3aWR0aCwgYSB2ZWN0b3Igb3IgYSBsaXN0IChsaXN0
cyBjYW4gaGF2ZSBOVUxMcykKLCBwYWQubWV0aG9kPWMoImFiYnJldmlhdGUiLCAidmFyaWFibGUi
LCAiZXh0ZW5kIiwgInJjdXQiLCAibGN1dCIpICMgbmV3OiBoYW5kbGluZyBvZiBzdHJpbmdzIGxv
bmdlciB0aGFuIHdpZHRoCiwgbWluLmRpZ2l0cyA9IDggICAgICAgICAgICAgICAgICMjIG5ldzog
Ciwgd2Fybi5zZXBlcmF0b3IgPSBGQUxTRSAgICAgICAgICMjIG5ldzogY2hlY2tpbmcgZm9yIHNl
cGVyYXRvciBjb3N0cyAobmV2ZXIgY2hlY2tlZCBpZiBzZXA9Jycgb3Igc2VwPScgJykKLCB3YXJu
LnF1b3RhdGlvbi5tYXJrID0gRkFMU0UgICAgIyMgbmV3OiBjaGVja2luZyBmb3Igc2VwZXJhdG9y
IGNvc3RzCikgCnsKCiAgICAjZGVmYXVsdCBmb3IgZGlnaXRzCiAgICBvbGQuZGlnaXRzIDwtIC5P
cHRpb25zJGRpZ2l0cwogICAgb24uZXhpdChvcHRpb25zKGRpZ2l0cz1vbGQuZGlnaXRzKSkKICAg
IG9wdGlvbnMoZGlnaXRzPWNlaWxpbmcobG9nKC5NYWNoaW5lJGRvdWJsZS5iYXNlXi5NYWNoaW5l
JGRvdWJsZS5kaWdpdHMsIDEwKSkpCgogICAgIyBjYWxjdWxhdGluZyBkaWdpdHMgZ2l2ZW4gd2lk
dGhzCiAgICB3aWR0aDJkaWdpdHMuZG91YmxlIDwtIGZ1bmN0aW9uKHdpZHRoKQogICAgICBtYXgo
bWluLmRpZ2l0cywgbWluKC5PcHRpb25zJGRpZ2l0cywgLk9wdGlvbnMkZGlnaXRzIC0gKG5jaGFy
KGZvcm1hdCguTWFjaGluZSRkb3VibGUueG1pbikpIC0gd2lkdGggKSkpCiAgICB3aWR0aDJkaWdp
dHMuY29tcGxleCA8LSBmdW5jdGlvbih3aWR0aCkKICAgICAgbWF4KG1pbi5kaWdpdHMsIG1pbigu
T3B0aW9ucyRkaWdpdHMsIC5PcHRpb25zJGRpZ2l0cyAtIChuY2hhcihmb3JtYXQoLk1hY2hpbmUk
ZG91YmxlLnhtaW4pKSoyKzIgLSB3aWR0aCApKSkKCiAgICAjIGNyZWF0ZSB0ZW1wbGF0ZSBhbmQg
Y29sbGVjdCBzb21lIGluZm9zIGF0IHRoZSByaWdodCBtb21lbnQKICAgIHRlbXBsYXRlIDwtIGxp
c3QoKQoKICAgICNpbml0aWFsaXplIHdhcm5pbmcgaW5kaWNhdG9ycwogICAgc2VwZXJhdG9yLndh
cm5pbmcgPC0gRkFMU0UKICAgIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPC0gRkFMU0UKICAgIGV4
dGVuc2lvbi53YXJuaW5nIDwtIEZBTFNFCgogICAgI21ldGhvZAogICAgcGFkLm1ldGhvZCA8LSBt
YXRjaC5hcmcocGFkLm1ldGhvZCkKCiAgICAjbG9naWNhbHMKICAgIGlmIChtb2RlKGxvZ2ljYWxz
KT09J251bWVyaWMnKQogICAgICBsb2dpY2FscyA8LSBhcy5pbnRlZ2VyKGxvZ2ljYWxzKQogICAg
IyBmYWN0b3JzCiAgICBmYWN0b3JzIDwtIG1hdGNoLmFyZyhmYWN0b3JzKQogICAgIyBjb21wYXJl
IHNlcCBhbmQgZGVjLnNlcAogICAgaWYgKGRlYy5zZXA9PXNlcCkKICAgICAgc3RvcCgicGFyc2lu
ZyBydWxlIHZpb2xhdGlvbjogc2VwIG11c3Qgbm90IGVxdWFsIGRlYy5zZXAiKQoKICAgICMgZG9u
J3QgdW5kZXJzdGFuZCB3aHkgb2xkIHdyaXRlLnRhYmxlIGNvbnZlcnRzIHRvIGRhdGFmcmFtZSBh
bmQgZG9lc24ndCB1c2UgaXQsIAogICAgIyBob3dldmVyIGtlZXAgY29udmVydGluZyB0byBkYXRh
ZnJhbWUgdG8gaGF2ZSBhIHVuaXF1ZSBzdGFydGluZyBwb2ludAogICAgaWYgKCFpcy5kYXRhLmZy
YW1lKHgpKSB4IDwtIGRhdGEuZnJhbWUoeCkKICAgIGQgPC0gZGltbmFtZXMoeCkKICAgIHAgPC0g
bmNvbCh4KQogIAogICAgIyBnZXQgY29sdW1uIGluZm9zLCBjb2xtb2RlIG1heSBjaGFuZ2UgbGF0
ZXIKICAgIHRlbXBsYXRlJHN0b3JhZ2UubW9kZSA8LSBjb2xtb2RlIDwtIHVubmFtZSh1bmxpc3Qo
bGFwcGx5KHgsIHN0b3JhZ2UubW9kZSkpKQogICAgdGVtcGxhdGUkYXR0cmlidXRlcyA8LSBsYXBw
bHkoeCwgYXR0cmlidXRlcykKICAgIGlzLmEuZmFjdG9yIDwtIHVubGlzdChsYXBwbHkodGVtcGxh
dGUkYXR0cmlidXRlcywgRlVOPWZ1bmN0aW9uKHgpYW55KCFpcy5uYShtYXRjaCgnZmFjdG9yJywg
eCRjbGFzcykpKSApKQogICAgCiAgICAjIHByZXBhcmUgcXVvdGUgYXMgTE9HSUNBTCB2ZWN0b3IK
ICAgICMgQlVUIGhhdmUgTkFzIGluIGV4cGFuZGVkIHZlY3RvciBpbnN0ZWFkIG9mIEZBTFNFCiAg
ICAjIGFzIHNvbWUgY29sdW1ucyBzdGlsbCBtYXkgY2hhbmdlIHRvIGNoYXJhY3RlcgogICAgaWYg
KGlzLmxvZ2ljYWwocXVvdGUpKSB7CiAgICAgICAgaWYgKGxlbmd0aChxdW90ZSk9PTEpewogICAg
ICAgICAgaWYgKHF1b3RlKSAKICAgICAgICAgICAgcXVvdGUgPC0gaWZlbHNlKGNvbG1vZGU9PSJj
aGFyYWN0ZXIiLCBUUlVFLCBOQSkKICAgICAgICAgICMgZWxzZQogICAgICAgICAgICAjIHF1b3Rl
PT1GQUxTRQogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoKHF1b3RlKSE9cCkgCiAgICAgICAgICBz
dG9wKCJpbnZhbGlkIGxlbmd0aCBvZiBsb2dpY2FsIHF1b3RlIHZlY3RvciIpCiAgICB9IGVsc2Ug
aWYgKGlzLm51bWVyaWMocXVvdGUpKSB7CiAgICAgICAgaWYgKGFueShxdW90ZSA8IDEgfCBxdW90
ZSA+IHApKSAKICAgICAgICAgICAgc3RvcCgiaW52YWxpZCBudW1iZXJzIGluIHF1b3RlIikKICAg
IAlxdW90ZSA8LSAoMTpwKSAlaW4lIHF1b3RlCiAgICB9IGVsc2UgCiAgICAgICAgc3RvcCgiaW52
YWxpZCBxdW90ZSBzcGVjaWZpY2F0aW9uIikKCiAgICAjIHByZXBhcmUgY29sLm5hbWVzCiAgICBp
ZiAoaXMubG9naWNhbChjb2wubmFtZXMpKSAKICAgICAgICBjb2wubmFtZXMgPC0gaWYgKGNvbC5u
YW1lcykgZFtbMl1dIGVsc2UgTlVMTAogICAgZWxzZSB7CiAgICAgICAgaWYgKGxlbmd0aChjb2wu
bmFtZXMpICE9IHApIAogICAgICAgICAgICBzdG9wKCJpbnZhbGlkIGNvbC5uYW1lcyBzcGVjaWZp
Y2F0aW9uIikKICAgICAgICBjb2wubmFtZXMgPC0gYXMuY2hhcmFjdGVyKGNvbC5uYW1lcykKICAg
IH0KICAgIGlmIChhbnkoZHVwbGljYXRlZChjKGNvbC5uYW1lcywgY29ybmVyLm5hbWUpKSkpd2Fy
bmluZygiY29sLm5hbWVzIGFuZCBjb3JuZXIubmFtZSBhcmUgbm90IHVuaXF1ZSIpCiAgICAjIGZp
eCBjb2wubmFtZXMgYW5kIGNvcm5lci5uYW1lIGZvciB0ZW1wbGF0ZQogICAgdGVtcGxhdGUkY29s
Lm5hbWVzIDwtIGNvbC5uYW1lcwogICAgdGVtcGxhdGUkY29ybmVyLm5hbWUgPC0gY29ybmVyLm5h
bWUKICAgICMgaGFuZGxlIHF1b3Rpbmcgb2YgY29sLm5hbWVzIGFscmVhZHkgaGVyZSwgYXMgaXQg
aW5mbHVlbmNlcyB3aWR0aHMKICAgIGlmICghaXMubnVsbChjb2wubmFtZXMpKSB7CiAgICAgIGlm
IChhbnkocXVvdGUsIG5hLnJtPVRSVUUpKQogICAgICAgIGNvbC5uYW1lcyA8LSBwYXN0ZShxdW90
YXRpb24ubWFyaywgY29sLm5hbWVzLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgfQoKICAg
ICMgcHJlcGFyZSByb3cubmFtZXMKICAgIGlmIChpcy5sb2dpY2FsKHJvdy5uYW1lcykpCiAgICAg
ICAgcm93Lm5hbWVzIDwtIGlmIChyb3cubmFtZXMpIGRbWzFdXSBlbHNlIE5VTEwKICAgIGVsc2Ug
ewogICAgICAgIGlmIChsZW5ndGgocm93Lm5hbWVzKSAhPSBucm93KHgpKSAKICAgICAgICAgIHN0
b3AoImludmFsaWQgcm93Lm5hbWVzIHNwZWNpZmljYXRpb24iKQogICAgICAgIGlmIChhbnkoZHVw
bGljYXRlZChyb3cubmFtZXMpKSkKICAgICAgICAgIHdhcm5pbmcoImR1cGxpY2F0ZWQgcm93Lm5h
bWVzIikKICAgICAgICByb3cubmFtZXMgPC0gYXMuY2hhcmFjdGVyKHJvdy5uYW1lcykKICAgIH0K
CiAgICAjIHByZXBhcmUgcGFyYW1ldGVycyB0byBmb3JtYXQgLyBwYWQgKGZvcm1hdEMgaXMgdG9v
IHNsb3cpCiAgICAjIHdpZHRocyBhbmQgZGlnaXRzIG1heSBjaGFuZ2UgbGF0ZXIKICAgIGZpeGVk
LndpZHRoIDwtICFpcy5udWxsKGRpZ2l0cykgfHwgIWlzLm51bGwod2lkdGhzKQogICAgaWYgKGZp
eGVkLndpZHRoKXsKCiAgICAgICAgaWYgKGlzLm51bGwod2lkdGhzKSkKICAgICAgICAgIHdpZHRo
cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICBlbHNlIGlmIChsZW5ndGgod2lkdGhzKT09
MSkKICAgICAgICAgIGlmIChpcy5sb2dpY2FsKHdpZHRocykpCiAgICAgICAgICAgIGlmICh3aWR0
aHMpewogICAgICAgICAgICAgIHdpZHRocyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAgICAgICAg
ICAgICByb3cubmFtZXMud2lkdGggPC0gTlVMTCAgIyMgbWFrZSBzaHVyZSBpdCBpc24ndCBUUlVF
IGZyb20gd3JhcHBlcgogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICAgIHN0b3AoIndpZHRo
PUZBTFNFIG5vdCBhbGxvd2VkIikKICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHdpZHRocyA8
LSBhcy5saXN0KHJlcCh3aWR0aHMsIHApKQogICAgICAgIGVsc2UgaWYgKGxlbmd0aCh3aWR0aHMp
PT1wKSAKICAgICAgICAgIHdpZHRocyA8LSBhcy5saXN0KHdpZHRocykKICAgICAgICBlbHNlCiAg
ICAgICAgICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3Igd2lkdGhzIikKCiAgICAgICAgaWYgKGlz
Lm51bGwoZGlnaXRzKSkKICAgICAgICAgIGRpZ2l0cyA8LSByZXAobGlzdChOVUxMKSwgcCkKICAg
ICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09MSkgCiAgICAgICAgICBkaWdpdHMgPC0gYXMu
bGlzdChyZXAoZGlnaXRzLCBwKSkKICAgICAgICBlbHNlIGlmIChsZW5ndGgoZGlnaXRzKT09cCkK
ICAgICAgICAgIGRpZ2l0cyA8LSBhcy5saXN0KGRpZ2l0cykKICAgICAgICBlbHNlCiAgICAgICAg
ICBzdG9wKCJpbnZhbGlkIGxlbmd0aCBmb3IgZGlnaXRzIikKICAgICAgIAogICAgfQoKCiAgICAj
IGNvbnZlcnQgdG8gY2hhcmFjdGVyIHJlc3BlY3RpbmcgbG9naWNhbHM9LCBmYWN0b3JzPSwgbmE9
LCBxdW90ZT0sIGRlYy5zZXA9IGFuZCBmaXhlZC53aWR0aAogICAgZm9yIChpIGluIDE6cCl7Cgog
ICAgICAgIGNvbHVtbiA8LSB4W1tpXV0KICAgICAgICBpc25hIDwtIGlzLm5hKGNvbHVtbikKCiAg
ICAgICAgIyBjb252ZXJ0IGxvZ2ljYWwgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5n
IG9uIGxvZ2ljYWxzPQogICAgICAgIGlmIChjb2xtb2RlW2ldPT0nbG9naWNhbCcpIHsKICAgICAg
ICAgIGNvbHVtbiA8LSBsb2dpY2Fsc1tjb2x1bW4rMV0KICAgICAgICAgIGNvbG1vZGVbaV0gPC0g
c3RvcmFnZS5tb2RlKGxvZ2ljYWxzKQogICAgICAgIH0KCiAgICAgICAgIyBjb252ZXJ0IGZhY3Rv
cnMgdG8gaW50ZWdlciBvciBjaGFyYWN0ZXIgZGVwZW5kaW5nIG9uIGZhY3RvcnM9CiAgICAgICAg
aWYgKGlzLmZhY3Rvcihjb2x1bW4pKXsKICAgICAgICAgIGlmIChmYWN0b3JzPT0nbGV2ZWxzJykg
ewogICAgICAgICAgICBjb2x1bW4gPC0gYXMuY2hhcmFjdGVyKGNvbHVtbikKICAgICAgICAgICAg
Y29sbW9kZVtpXSA8LSAnY2hhcmFjdGVyJwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAg
ICAgICAgICAgIGNvbHVtbiA8LSBhcy5pbnRlZ2VyKGNvbHVtbikKICAgICAgICAgICAgY29sbW9k
ZVtpXSA8LSAnaW50ZWdlcicKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgbm93IHRy
ZWF0IGNvbXBsZXgsIGRvdWJsZSwgaW50ZWdlciBvciBjaGFyYWN0ZXIKICAgICAgICBpZiAoY29s
bW9kZVtpXT09J2NvbXBsZXgnKXsKICAgICAgICAgIGlmIChmaXhlZC53aWR0aCl7CiAgICAgICAg
ICAgIGlmICghaXMubnVsbCh3aWR0aHNbW2ldXSkgJiYgaXMubnVsbChkaWdpdHNbW2ldXSkpCiAg
ICAgICAgICAgICAgZGlnaXRzW1tpXV0gPC0gd2lkdGgyZGlnaXRzLmNvbXBsZXgod2lkdGhzW1tp
XV0pCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1uLCBkaWdpdHM9ZGlnaXRzW1tp
XV0pCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgY29sdW1uIDwtIGFzLmNoYXJhY3Rlcihj
b2x1bW4pCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGVjLnNlcCE9Jy4nKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZ3N1YignWy5dJywgZGVjLnNlcCwgY29sdW1uLCBpZ25vcmUuY2FzZT1GQUxT
RSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdkb3Vi
bGUnKXsKCiAgICAgICAgICBpZiAoZml4ZWQud2lkdGgpeyAKICAgICAgICAgICAgaWYgKCFpcy5u
dWxsKHdpZHRoc1tbaV1dKSAmJiBpcy5udWxsKGRpZ2l0c1tbaV1dKSkKICAgICAgICAgICAgICBk
aWdpdHNbW2ldXSA8LSB3aWR0aDJkaWdpdHMuZG91YmxlKHdpZHRoc1tbaV1dKQogICAgICAgICAg
ICBjb2x1bW4gPC0gZm9ybWF0KGNvbHVtbiwgZGlnaXRzPWRpZ2l0c1tbaV1dKQogICAgICAgICAg
fWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29sdW1uKQogICAgICAg
ICAgaWYgKGRlYy5zZXAhPScuJykgCiAgICAgICAgICAgIGNvbHVtbiA8LSBnc3ViKCdbLl0nLCBk
ZWMuc2VwLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZBTFNFLCBleHRlbmRlZD1GQUxTRSkKICAgICAg
ICAgIAogICAgICAgIH1lbHNlIGlmIChjb2xtb2RlW2ldID09ICdpbnRlZ2VyJyl7CgogICAgICAg
ICAgaWYgKGZpeGVkLndpZHRoKXsgCiAgICAgICAgICAgIGNvbHVtbiA8LSBmb3JtYXQoY29sdW1u
KQogICAgICAgICAgfWVsc2UgCiAgICAgICAgICAgIGNvbHVtbiA8LSBhcy5jaGFyYWN0ZXIoY29s
dW1uKQogICAgICAgICAgCiAgICAgICAgfWVsc2V7ICMgY29sbW9kZVtpXT09J2NoYXJhY3RlcicK
CiAgICAgICAgICAjIGNoZWNrIGZvciBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzCiAgICAgICAgICBp
ZiAod2Fybi5zZXBlcmF0b3IgCiAgICAgICAgICAgICAgJiYgIShzZXAgJWluJSBjKCIiLCAiICIp
KSAKICAgICAgICAgICAgICAmJiBhbnkoZ3JlcChzZXAsIGNvbHVtbiwgaWdub3JlLmNhc2U9RkFM
U0UsIGV4dGVuZGVkPUZBTFNFLCB2YWx1ZT1GQUxTRSkpCiAgICAgICAgICAgICApewogICAgICAg
ICAgICAgICB3YXJuaW5nKHBhc3RlKCJzZXBlcmF0b3IgaW4gY29sdW1uIDwiLCBkW1syXV1baV0s
ICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgc2VwZXJhdG9yLndhcm5pbmcgPC0gVFJVRQog
ICAgICAgICAgICAgIH0KICAgICAgICAgIGlmICh3YXJuLnF1b3RhdGlvbi5tYXJrIAogICAgICAg
ICAgICAgICYmIGFueShncmVwKHF1b3RhdGlvbi5tYXJrLCBjb2x1bW4sIGlnbm9yZS5jYXNlPUZB
TFNFLCBleHRlbmRlZD1GQUxTRSwgdmFsdWU9RkFMU0UpKQogICAgICAgICAgICAgKXsKICAgICAg
ICAgICAgICAgd2FybmluZyhwYXN0ZSgicXVvdGF0aW9uIG1hcmsgaW4gY29sdW1uIDwiLCBkW1sy
XV1baV0sICI+Iiwgc2VwPSIiKSkKICAgICAgICAgICAgICAgcXVvdGF0aW9uLm1hcmsud2Fybmlu
ZyA8LSBUUlVFCiAgICAgICAgICAgICAgfQoKICAgICAgICAgIGlmIChxdW90YXRpb24ubWFyayAh
PSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrKQogICAgICAgICAgICBjb2x1bW4gPC0gZ3N1YihxdW90
YXRpb24ubWFyaywgZXNjYXBlZC5xdW90YXRpb24ubWFyaywgY29sdW1uLCBpZ25vcmUuY2FzZT1G
QUxTRSwgZXh0ZW5kZWQ9RkFMU0UpCgogICAgICAgICAgaWYgKCBhbnkocXVvdGUsIG5hLnJtPVRS
VUUpICYmIGlzLm5hKHF1b3RlW2ldKSApCiAgICAgICAgICAgICAgcXVvdGVbaV0gPC0gVFJVRQog
ICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICAjIGZpcnN0IHF1b3RlCiAgICAgICAgaWYgKCFp
cy5uYShxdW90ZVtpXSkgJiYgcXVvdGVbaV0pIAogICAgICAgICAgY29sdW1uIDwtIHBhc3RlKHF1
b3RhdGlvbi5tYXJrLCBjb2x1bW4sIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCgogICAgICAgICMg
dGhlbiBkZXRlcm1pbmUgYWN0dWFsIHdpZHRoCiAgICAgICAgaWYgKGZpeGVkLndpZHRoKQogICAg
ICAgICAgaWYgKGNvbG1vZGVbaV09PSdjaGFyYWN0ZXInKQoJICAgIGFjdHVhbC53aWR0aCA8LSBt
YXgobmNoYXIoY29sdW1uKSkKCSAgZWxzZQoJICAgIGFjdHVhbC53aWR0aCA8LSAobmNoYXIoY29s
dW1uWzFdKSkKCSAgICAKICAgICAgICAjIHRoZW4gYWRkIG5hLnN0cmluZwogICAgICAgICMgWzFd
OiBhbGxvdyBuYSB0byBjYXJyeSBuYS5zdHJpbmdzIGludG8gdGVtcGxhdGUsIGJ1dCB1c2Ugb25s
eSBmaXJzdCBvbmUKICAgICAgICBpZiAoIWlzLm5hKHF1b3RlW2ldKSAmJiBxdW90ZVtpXSl7CiAg
ICAgICAgICBuYS53aWR0aCA8LSBuY2hhcihuYVsxXSkrMgogICAgICAgICAgaWYgKGZpeGVkLndp
ZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAg
ICAgICAgICAgIyBwYWQgYWxyZWFkeSBoZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBw
YWQocGFzdGUocXVvdGF0aW9uLm1hcmssIG5hWzFdLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg9YWN0dWFsLndpZHRoKQogICAg
ICAgICAgZWxzZQogICAgICAgICAgICAjIG5lZWQgbGF0ZXIgcGFkZGluZyBhbnlob3cKICAgICAg
ICAgICAgY29sdW1uW2lzbmFdIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBuYVsxXSwgcXVvdGF0
aW9uLm1hcmssIHNlcD0nJykKICAgICAgICB9ZWxzZXsKICAgICAgICAgIG5hLndpZHRoIDwtIG5j
aGFyKG5hWzFdKQogICAgICAgICAgaWYgKGZpeGVkLndpZHRoICYmIGNvbG1vZGUhPSdjaGFyYWN0
ZXInICYmIG5hLndpZHRoPGFjdHVhbC53aWR0aCkKICAgICAgICAgICAgIyBwYWQgYWxyZWFkeSBo
ZXJlCiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBwYWQobmFbMV0sIHdpZHRoPWFjdHVhbC53
aWR0aCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgIyBuZWVkIGxhdGVyIHBhZGRpbmcgYW55
aG93CiAgICAgICAgICAgIGNvbHVtbltpc25hXSA8LSBuYVsxXQogICAgICAgIH0KCiAgICAgICAg
IyB0aGVuIGRldGVybWluZSBmaW5hbCB3aWR0aCAKICAgICAgICBpZiAoZml4ZWQud2lkdGgpewoK
ICAgICAgICAgICMgKG5jaGFyKGNvbC5uYW1lc1tpXSkgbWF5IGJlIG51bWVyaWMoMCksIHdpZHRo
c1tbaV1dIG1heSBOVUxMKQogICAgICAgICAgbWF4LndpZHRoIDwtIG1heChhY3R1YWwud2lkdGgs
IG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ldXSkgCiAgICAgICAgICBt
aW4ud2lkdGggPC0gbWF4KG5hLndpZHRoLCBuY2hhcihjb2wubmFtZXNbaV0pLCB3aWR0aHNbW2ld
XSkKCiAgICAgICAgICBpZiAoY29sbW9kZVtpXSA9PSAnY2hhcmFjdGVyJyl7CiAgICAgICAgICAg
ICMganVzdCBwYWQ/CiAgICAgICAgICAgIGlmICggaXMubnVsbCh3aWR0aHNbW2ldXSkgfHwgbWF4
LndpZHRoPT13aWR0aHNbW2ldXSB8fCBtaW4ud2lkdGg+d2lkdGhzW1tpXV0gCiAgICAgICAgICAg
ICAgICAgfHwgcGFkLm1ldGhvZCAlaW4lIGMoInZhcmlhYmxlIiwgImV4dGVuZCIpICkKICAgICAg
ICAgICAgICBjb2x1bW4gPC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAg
ICBlbHNlIHsKICAgICAgICAgICAgICAjIHRyeSB0byByZWR1Y2UgdG8gd2lkdGhbW2ldXSAoPT1t
aW4ud2lkdGgpCiAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChjb2x1bW4sIHdpZHRoPW1pbi53
aWR0aCwgbWV0aG9kPXBhZC5tZXRob2QpCiAgICAgICAgICAgICAgIyB0ZXN0IGlmIHN1Y2Nlc3Nm
dWxsCiAgICAgICAgICAgICAgaWYgKHBhZC5tZXRob2Q9PSdhYmJyZXZpYXRlJyl7CiAgICAgICAg
ICAgICAgICBtYXgud2lkdGggPC0gbWF4KG5jaGFyKGNvbHVtbikpCiAgICAgICAgICAgICAgICBp
ZiAobWF4LndpZHRoPm1pbi53aWR0aCkKICAgICAgICAgICAgICAgICAgY29sdW1uIDwtIHBhZChj
b2x1bW4sIHdpZHRoPW1heC53aWR0aCkKICAgICAgICAgICAgICB9ZWxzZSAjIHBhZC5tZXRob2Qg
JWluJSBjKCJyY3V0IiwgImxjdXQiKQogICAgICAgICAgICAgICAgbWF4LndpZHRoIDwtIG1pbi53
aWR0aAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgfWVsc2V7ICMgY29sbW9k
ZVtpXSAlaW4lIGMoY29tcGxleCwgZG91YmxlLCBpbnRlZ2VyKQogICAgICAgICAgICAjIChhY3R1
YWwud2lkdGggYW5kIG5hLndpZHRoIDwgYWN0dWFsLndpZHRoIGFscmVhZHkgcGFkZGVkKQogICAg
ICAgICAgICBpZiAobWF4LndpZHRoPmFjdHVhbC53aWR0aCkKICAgICAgICAgICAgICBjb2x1bW4g
PC0gcGFkKGNvbHVtbiwgd2lkdGg9bWF4LndpZHRoKQogICAgICAgICAgfQoKICAgICAgICAgIGlm
ICghaXMubnVsbChjb2wubmFtZXMpKQogICAgICAgICAgICBjb2wubmFtZXNbaV0gPC0gcGFkKGNv
bC5uYW1lc1tpXSwgd2lkdGg9bWF4LndpZHRoKQoKICAgICAgICAgICMgd2FybmluZ3MgYW5kIG1h
aW50YWluaW5nIHdpZHRoW1tpXV0KICAgICAgICAgIGlmIChpcy5udWxsKHdpZHRoc1tbaV1dKSkK
ICAgICAgICAgICAgd2lkdGhzW1tpXV0gPC0gbWF4LndpZHRoCiAgICAgICAgICBlbHNlIGlmICht
YXgud2lkdGggPiB3aWR0aHNbW2ldXSl7CiAgICAgICAgICAgIHdpZHRoc1tbaV1dIDwtIG1heC53
aWR0aAogICAgICAgICAgICBleHRlbnNpb24ud2FybmluZyA8LSBUUlVFCiAgICAgICAgICAgIHdh
cm5pbmcocGFzdGUoImV4dGVuZGluZyB3aWR0aCBvZiBjb2x1bW4gPCIsIGRbWzJdXVtpXSwgIj4g
dG8gIiwgbWF4LndpZHRoLCAiIHRvIGF2b2lkIHRydW5jYXRpbmciLCBzZXA9IiIpKQogICAgICAg
ICAgfQoKICAgICAgICB9CgogICAgICAgIHhbW2ldXSA8LSBjb2x1bW4KICAgIH0KCiAgICAjIGRl
Y2lkZSBhYm91dCBjb3JuZXIubmFtZQogICAgaWYgKGlzLm51bGwocm93Lm5hbWVzKSB8fCBpcy5u
dWxsKGNvbC5uYW1lcykpIAogICAgICBjb3JuZXIubmFtZSA8LSBOVUxMCiAgICAjIGhhbmRsZSBx
dW90aW5nIGFuZCB3aWR0aCBvZiByb3cubmFtZXMgYW5kIGNvcm5lci5uYW1lLCBhbmQgYmluZCB0
byB4CiAgICBpZiAoIWlzLm51bGwocm93Lm5hbWVzKSl7CiAgICAgIGlmIChhbnkocXVvdGUsIG5h
LnJtPVRSVUUpKSB7CiAgICAgICAgcm93Lm5hbWVzIDwtIHBhc3RlKHF1b3RhdGlvbi5tYXJrLCBy
b3cubmFtZXMsIHF1b3RhdGlvbi5tYXJrLCBzZXA9JycpCiAgICAgICAgaWYgKCFpcy5udWxsKGNv
cm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0gcGFzdGUocXVvdGF0aW9uLm1hcmssIGNvcm5lci5u
YW1lLCBxdW90YXRpb24ubWFyaywgc2VwPScnKQogICAgICB9CiAgICAgIGlmIChmaXhlZC53aWR0
aCB8fCAhaXMubnVsbChyb3cubmFtZXMud2lkdGgpKSB7CiAgICAgICAgbWF4LndpZHRoIDwtIG1h
eChuY2hhcihjKGNvcm5lci5uYW1lLCByb3cubmFtZXMpKSkKICAgICAgICBpZiAoaXMubnVsbChy
b3cubmFtZXMud2lkdGgpKQogICAgICAgICAgcm93Lm5hbWVzLndpZHRoIDwtIG1heC53aWR0aAog
ICAgICAgIGVsc2UgaWYgKHJvdy5uYW1lcy53aWR0aDxtYXgud2lkdGgpewogICAgICAgICAgd2Fy
bmluZyhwYXN0ZSgiZXh0ZW5kaW5nIHdpZHRoIG9mIHJvdy5uYW1lcyB0byAiLCBtYXgud2lkdGgs
ICIgdG8gYXZvaWQgdHJ1bmNhdGluZyIsIHNlcD0iIikpCiAgICAgICAgICBleHRlbnNpb24ud2Fy
bmluZyA8LSBUUlVFCiAgICAgICAgICByb3cubmFtZXMud2lkdGggPC0gbWF4LndpZHRoCiAgICAg
ICAgfQogICAgICAgIHJvdy5uYW1lcyA8LSBwYWQocm93Lm5hbWVzLCB3aWR0aD1yb3cubmFtZXMu
d2lkdGgpCiAgICAgICAgaWYgKCFpcy5udWxsKGNvcm5lci5uYW1lKSkgY29ybmVyLm5hbWUgPC0g
cGFkKGNvcm5lci5uYW1lLCB3aWR0aD1yb3cubmFtZXMud2lkdGgpCiAgICAgIH0KICAgICAgeCA8
LSBjYmluZChyb3cubmFtZXMsIHgpCiAgICB9CgogICAgIyBvdXQgY29sLm5hbWVzCiAgICBpZiAo
IWlzLm51bGwoY29sLm5hbWVzKSl7CiAgICAgIGlmIChhcHBlbmQpIAogICAgICAgIHdhcm5pbmco
ImRyb3BwaW5nIGNvbHVtbiBuYW1lcyBiZWNhdXNlIG9mIGFwcGVuZD1UUlVFIikKICAgICAgZWxz
ZXsKICAgICAgICAgIGNvbC5uYW1lcyA8LSBjKGNvcm5lci5uYW1lLCBjb2wubmFtZXMpCiAgICAg
ICAgICBjYXQoY29sLm5hbWVzLCBmaWxlPWZpbGUsIHNlcCA9IHNlcCwgYXBwZW5kID0gYXBwZW5k
KQogICAgICAgICAgYXBwZW5kIDwtIFRSVUUKICAgICAgICAgIGNhdChlb2wsIGZpbGU9ZmlsZSwg
YXBwZW5kID0gYXBwZW5kKQogICAgICB9CiAgICB9CiAgICAjIG91dCBkYXRhCiAgICBjYXQodCh4
KSwgZmlsZT1maWxlLCBzZXAgPSBjKHJlcChzZXAsIG5jb2woeCkgLSAxKSwgZW9sKSwgYXBwZW5k
ID0gYXBwZW5kKQoKICAgICMgY3JlYXRlIHRlbXBsYXRlCiAgICBpZiAoaXMubnVsbChjb2wubmFt
ZXMpKXsKICAgICAgY29sLm5hbWVzIDwtIGRbWzJdXQogICAgICBoZWFkZXIgPC0gRkFMU0UKICAg
IH1lbHNlewogICAgICBjb2wubmFtZXMgPC0gdGVtcGxhdGUkY29sLm5hbWVzCiAgICAgIGhlYWRl
ciA8LSBUUlVFCiAgICB9CgogICAgaWYgKGFueShxdW90ZSwgbmEucm09VFJVRSkpewogICAgICBx
dW90ZVtpcy5uYShxdW90ZSldIDwtIEZBTFNFCiAgICB9ZWxzZQogICAgICBxdW90ZSA8LSByZXAo
RkFMU0UsIHApCgogICAgaWYgKCFpcy5udWxsKHJvdy5uYW1lcykpewogICAgICByb3cubmFtZXMu
bG9jICA8LSAxCiAgICAgIGNvbC5uYW1lcyA8LSBjKHRlbXBsYXRlJGNvcm5lci5uYW1lLCBjb2wu
bmFtZXMpCiAgICAgIHF1b3RlIDwtIGMoYW55KHF1b3RlLCBuYS5ybT1UUlVFKSwgcXVvdGUpCiAg
ICAgIGNvbG1vZGUgPC0gYygnY2hhcmFjdGVyJywgdGVtcGxhdGUkc3RvcmFnZS5tb2RlKQogICAg
ICB3aWR0aHMgPC0gYyhyb3cubmFtZXMud2lkdGgsIHdpZHRocykKICAgICAgaWYgKCFpcy5udWxs
KGRpZ2l0cykpIGRpZ2l0cyA8LSBjKGxpc3QoTlVMTCksIGRpZ2l0cykKICAgICAgdGVtcGxhdGUk
YXR0cmlidXRlcyA8LSBjKGxpc3QobGlzdChjbGFzcz0nQXNJcycpKSwgdGVtcGxhdGUkYXR0cmli
dXRlcykKICAgICAgbmFtZXModGVtcGxhdGUkYXR0cmlidXRlcylbMV0gPC0gdGVtcGxhdGUkY29y
bmVyLm5hbWUKICAgIH1lbHNlewogICAgICByb3cubmFtZXMubG9jIDwtIDAKICAgICAgY29sbW9k
ZSA8LSB0ZW1wbGF0ZSRzdG9yYWdlLm1vZGUKICAgIH0KCiAgICBxdW90YXRpb24ubWFyay53YXJu
aW5nIDwtIGlmZWxzZSh3YXJuLnF1b3RhdGlvbi5tYXJrLCBxdW90YXRpb24ubWFyay53YXJuaW5n
LCBOQSkKICAgIHNlcGVyYXRvci53YXJuaW5nIDwtIGlmZWxzZSh3YXJuLnNlcGVyYXRvciwgc2Vw
ZXJhdG9yLndhcm5pbmcsIE5BKQoKICAgIHRlbXBsYXRlIDwtIHN0cnVjdHVyZSgKICAgICAgbGlz
dCgKICAgICAgLCBmaWxlID0gZmlsZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIGVvbCA9IGVvbCAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpCiAgICAgICwg
c2VwID0gc2VwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUgKGNoYXJhY3RlcikKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcCAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVyKQogICAgICAsIG5hLnN0cmluZ3Mg
PSBuYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBidXQgYWxs
b3cgbW9yZSB0aGFuIG9uZSAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBxdW90YXRpb24ubWFy
ayA9IHF1b3RhdGlvbi5tYXJrICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSAoY2hhcmFjdGVy
KSwgZS5nLiA8Ij4gaW4gQ1NWIAogICAgICAsIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2Nh
cGVkLnF1b3RhdGlvbi5tYXJrICAjIHBlciBmaWxlIChjaGFyYWN0ZXIpLCBlLmcuIDwiIj4gaW4g
Q1NWCiAgICAgICwgbG9naWNhbHMgPSBsb2dpY2FscyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICMgcGVyIGZpbGUsIHR3byB2YWx1ZXMgcmVwcmVzZW50aW5nIEZBTFNFIGFuZCBUUlVFIChu
dW1lcmljYWwgb3IgY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCBmYWN0b3JzID0gZmFjdG9ycyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgZmlsZSwgd2V0aGVyIGZhY3RvcnMg
aW4gZmlsZSBhcmUgJ2xldmVscycgb3IgJ2NvZGVzJyAoY2hhcmFjdGVyKQogICAgICAsIHJvdy5u
YW1lcy5sb2MgPSByb3cubmFtZXMubG9jICAgICAgICAgICAgICAgICAgICAjIHBlciBmaWxlLCBj
b2xubyBvZiByb3duYW1lcywgMCA9IG5vIHJvdy5uYW1lcyBpbiBmaWxlIChpbnRlZ2VyKQogICAg
ICAsIGhlYWRlciA9IGhlYWRlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBl
ciBmaWxlLCB3aGV0aGVyIGZpcnN0IHJvdyBpcyBjb2wubmFtZXMgKGxvZ2ljYWwpCiAgICAgICwg
c3RyaXAud2hpdGUgPSBUUlVFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGZp
bGUKICAgICAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcgY29ybmVyLm5hbWUgKGNoYXJhY3RlciB2ZWN0b3Ip
CiAgICAgICwgcXVvdGUgPSBxdW90ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICMgcGVyIGNvbHVtbiwgd2hldGhlciBjb2x1bW4gaXMgcXVvdGVkIChsb2dpY2FsIHZlY3RvcikK
ICAgICAgLCBzdG9yYWdlLm1vZGUgPSBjb2xtb2RlICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyBwZXIgY29sdW1uLCAoY2hhcmFjdGVyIHZlY3RvcikKICAgICAgLCB3aWR0aHMgPSB3aWR0aHMg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwZXIgY29sdW1uLCBpbmNsdWRpbmcg
cm93Lm5hbWVzLndpZHRoIChsaXN0IG9yIE5VTEwpCiAgICAgICwgZGlnaXRzID0gZGlnaXRzICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcGVyIGNvbHVtbiwgKGxpc3Qgb3IgTlVM
TCkKICAgICAgLCBhdHRyaWJ1dGVzID0gdGVtcGxhdGUkYXR0cmlidXRlcyAgICAgICAgICAgICAg
ICAgIyBwZXIgY29sdW1uLCAobGlzdCkKICAgICAgLCBleHRlbnNpb24ud2FybmluZyA9IGV4dGVu
c2lvbi53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9GQUxTRSBpbmRpY2F0ZXMg
d2V0aGVyIG91dCBzcGVjcyBkaWZmZXIgZnJvbSBpbiBzcGVjcyAKICAgICAgLCBzZXBlcmF0b3Iu
d2FybmluZyA9IHNlcGVyYXRvci53YXJuaW5nICAgICAgICAgICAgIyBwZXIgZmlsZSwgVFJVRS9G
QUxTRS9OQQogICAgICAsIHF1b3RhdGlvbi5tYXJrLndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53
YXJuaW5nICAjIHBlciBmaWxlLCBUUlVFL0ZBTFNFL05BCiAgICAgICkKICAgICwgY2xhc3M9InRl
bXBsYXRlIgogICAgKQoKICAgIHJldHVybihpbnZpc2libGUodGVtcGxhdGUpKQp9CgoKCgojIyB3
cmFwcGVyIGZ1bmN0aW9uIGZvciBmaXhlZCBmb3JtYXQKIyMgKEdOVSkgQ29weXJpZ2h0IEpPQSAx
OTk5Cgp3cml0ZS5maXggPC0gZnVuY3Rpb24gKHgsIGZpbGUgPSAnJwosIGFwcGVuZCA9IEZBTFNF
CiwgcXVvdGUgPSBGQUxTRSAgICAgICAgICAgIyBjaGFuZ2VkIGZvciBmaXhlZCBmb3JtYXQKLCBz
ZXAgPSAnJyAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIGVvbCA9
ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAgICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1h
dAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFtZXMgPSBGQUxTRSAgICAgICAjIGNoYW5nZWQg
Zm9yIGZpeGVkIGZvcm1hdAosIGNvcm5lci5uYW1lID0gJ3Jvd25hbWVzJwosIHJvdy5uYW1lcy53
aWR0aCA9IHVubGlzdCh3aWR0aHNbMV0pCiwgcXVvdGF0aW9uLm1hcmsgPSAnIicKLCBlc2NhcGVk
LnF1b3RhdGlvbi5tYXJrID0gJyInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBm
YWN0b3JzID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0g
TlVMTAosIHdpZHRocyA9IFRSVUUgICAgICAgICAgICMgY2hhbmdlZCBmb3IgZml4ZWQgZm9ybWF0
CiwgcGFkLm1ldGhvZCA9ICJhYmJyZXZpYXRlIgosIG1pbi5kaWdpdHMgPSA4Ciwgd2Fybi5zZXBl
cmF0b3IgPSBGQUxTRQosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSBGQUxTRQopCndyaXRlLnRhYmxl
KHg9eCwgZmlsZT1maWxlCiwgYXBwZW5kID0gYXBwZW5kCiwgcXVvdGUgPSBxdW90ZQosIHNlcCA9
IHNlcAosIGVvbCA9IGVvbAosIG5hID0gbmEKLCByb3cubmFtZXMgPSByb3cubmFtZXMKLCBjb2wu
bmFtZXMgPSBjb2wubmFtZXMKLCBjb3JuZXIubmFtZSA9IGNvcm5lci5uYW1lCiwgcm93Lm5hbWVz
LndpZHRoID0gcm93Lm5hbWVzLndpZHRoCiwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFy
awosIGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiwgbG9n
aWNhbHMgPSBsb2dpY2FscwosIGZhY3RvcnMgPSBmYWN0b3JzCiwgZGVjLnNlcCA9IGRlYy5zZXAK
LCBkaWdpdHMgPSBkaWdpdHMKLCB3aWR0aHMgPSB3aWR0aHMKLCBwYWQubWV0aG9kID0gcGFkLm1l
dGhvZAosIG1pbi5kaWdpdHMgPSBtaW4uZGlnaXRzCiwgd2Fybi5zZXBlcmF0b3IgPSB3YXJuLnNl
cGVyYXRvcgosIHdhcm4ucXVvdGF0aW9uLm1hcmsgPSB3YXJuLnF1b3RhdGlvbi5tYXJrCikKCgoj
IyB3cmFwcGVyIGZ1bmN0aW9uIGZvciBzZXBlcmF0ZWQgdmFsdWVzCiMjIG5vdGUgdGhhdCBjc3Yg
aW1wb3J0IGlzIE5PVCBmdWxseSBzdXBwb3J0ZWQgeWV0CiMjIHNlcCBpcyBub3QgYWxsb3dlZCBp
biB0aGUgZGF0YQojIyB3YXJuLnNlcGVyYXRvciA9IFRSVUUgY2hlY2tzIGZvciBzZXAKIyMgKEdO
VSkgQ29weXJpZ2h0IEpPQSAxOTk5CndyaXRlLnN2cyA8LSBmdW5jdGlvbiAoeCwgZmlsZSA9ICcn
CiwgYXBwZW5kID0gRkFMU0UKLCBxdW90ZSA9IFRSVUUKLCBzZXAgPSAnOycgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIFNWUwosIGVvbCA9ICdcbicKLCBuYSA9ICcnICAgICAgICAgICAgICAg
ICAjIGNoYW5nZWQgZm9yIGZpeGVkIGZvcm1hdAosIHJvdy5uYW1lcyA9IFRSVUUKLCBjb2wubmFt
ZXMgPSBUUlVFCiwgY29ybmVyLm5hbWUgPSAncm93bmFtZXMnCiwgcm93Lm5hbWVzLndpZHRoID0g
dW5saXN0KHdpZHRoc1sxXSkKLCBxdW90YXRpb24ubWFyayA9ICciJwosIGVzY2FwZWQucXVvdGF0
aW9uLm1hcmsgPSAnIiInCiwgbG9naWNhbHMgPSBjKCdGQUxTRScsICdUUlVFJykKLCBmYWN0b3Jz
ID0gYygnbGV2ZWxzJywgJ2NvZGVzJykKLCBkZWMuc2VwID0gJy4nCiwgZGlnaXRzID0gTlVMTAos
IHdpZHRocyA9IE5VTEwKLCBwYWQubWV0aG9kID0gImFiYnJldmlhdGUiCiwgbWluLmRpZ2l0cyA9
IDgKLCB3YXJuLnNlcGVyYXRvciA9IFRSVUUgIyBjaGFuZ2VkIGZvciBTVlMKLCB3YXJuLnF1b3Rh
dGlvbi5tYXJrID0gRkFMU0UKKSAKd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAosIGFwcGVu
ZCA9IGFwcGVuZAosIHF1b3RlID0gcXVvdGUKLCBzZXAgPSBzZXAKLCBlb2wgPSBlb2wKLCBuYSA9
IG5hCiwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiwgY29sLm5hbWVzID0gY29sLm5hbWVzCiwgY29y
bmVyLm5hbWUgPSBjb3JuZXIubmFtZQosIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5uYW1lcy53aWR0
aAosIHF1b3RhdGlvbi5tYXJrID0gcXVvdGF0aW9uLm1hcmsKLCBlc2NhcGVkLnF1b3RhdGlvbi5t
YXJrID0gZXNjYXBlZC5xdW90YXRpb24ubWFyawosIGxvZ2ljYWxzID0gbG9naWNhbHMKLCBmYWN0
b3JzID0gZmFjdG9ycwosIGRlYy5zZXAgPSBkZWMuc2VwCiwgZGlnaXRzID0gZGlnaXRzCiwgd2lk
dGhzID0gd2lkdGhzCiwgcGFkLm1ldGhvZCA9IHBhZC5tZXRob2QKLCBtaW4uZGlnaXRzID0gbWlu
LmRpZ2l0cwosIHdhcm4uc2VwZXJhdG9yID0gd2Fybi5zZXBlcmF0b3IKLCB3YXJuLnF1b3RhdGlv
bi5tYXJrID0gd2Fybi5xdW90YXRpb24ubWFyawopCgoKCiMjIHdyYXBwZXIgZnVuY3Rpb24gZm9y
IHNwZWNpZmljYXRpb24gdmlhIHRlbXBsYXRlCiMjIGl0IGlzc3VlcyBhIHdhcm5pbmcgaWYgdGVt
cGxhdGUgc3BlY3MgYXJlIGV4dGVuZGVkCiMjIChHTlUpIENvcHlyaWdodCBKT0EgMTk5OQp3cml0
ZS50ZW1wbGF0ZSA8LSBmdW5jdGlvbiAodGVtcGxhdGUsIHgKLCBmaWxlID0gdGVtcGxhdGUkZmls
ZQosIGFwcGVuZCA9IEZBTFNFCiwgZXhjbHVkZS5jb21wYXJlID0gYygnZXh0ZW5zaW9uLndhcm5p
bmcnLCAnZmlsZScsICdkaWdpdHMnKSAgIyMgYWxsIG90aGVyIHRlbXBsYXRlJGVsZW1lbnRzIGFy
ZSBleHBlY3RlZCBlcXVhbCBmb3IgaW5wdXQgYW5kIG91dHB1dCB0ZW1wbGF0ZQosIHF1b3RlID0g
aWYgKHJsKSB0ZW1wbGF0ZSRxdW90ZVstcmxdIGVsc2UgdGVtcGxhdGUkcXVvdGUKLCBzZXAgPSB0
ZW1wbGF0ZSRzZXAKLCBlb2wgPSB0ZW1wbGF0ZSRlb2wKLCBuYSA9IHRlbXBsYXRlJG5hCiwgcm93
Lm5hbWVzID0gYXMubG9naWNhbChybCkKLCBjb2wubmFtZXMgPSBpZiAodGVtcGxhdGUkaGVhZGVy
KXsgaWYgKHJsKSB0ZW1wbGF0ZSRjb2wubmFtZXNbLXJsXSBlbHNlIHRlbXBsYXRlJGNvbC5uYW1l
cyB9IGVsc2UgRkFMU0UKLCBjb3JuZXIubmFtZSA9IGlmIChybCkgdGVtcGxhdGUkY29sLm5hbWVz
W3JsXSBlbHNlICdyb3duYW1lJwosIHJvdy5uYW1lcy53aWR0aCA9IGlmIChybCkgdGVtcGxhdGUk
d2lkdGhzW1tybF1dCiwgcXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRxdW90YXRpb24ubWFyawos
IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsgPSB0ZW1wbGF0ZSRlc2NhcGVkLnF1b3RhdGlvbi5tYXJr
CiwgbG9naWNhbHMgPSB0ZW1wbGF0ZSRsb2dpY2FscwosIGZhY3RvcnMgPSB0ZW1wbGF0ZSRmYWN0
b3JzCiwgZGVjLnNlcCA9IHRlbXBsYXRlJGRlYy5zZXAKLCBkaWdpdHMgPSBpZiAocmwgJiYgIWlz
Lm51bGwodGVtcGxhdGUkZGlnaXRzKSkgdGVtcGxhdGUkZGlnaXRzWy1ybF0gZWxzZSB0ZW1wbGF0
ZSRkaWdpdHMKLCB3aWR0aHMgPSBpZiAocmwgJiYgIWlzLm51bGwodGVtcGxhdGUkd2lkdGhzKSkg
dGVtcGxhdGUkd2lkdGhzWy1ybF0gZWxzZSB0ZW1wbGF0ZSR3aWR0aHMKLCBwYWQubWV0aG9kID0g
J2FiYnJldmlhdGUnCiwgbWluLmRpZ2l0cyA9IDgKLCB3YXJuLnNlcGVyYXRvciA9ICFpcy5uYSh0
ZW1wbGF0ZSRzZXBlcmF0b3Iud2FybmluZykKLCB3YXJuLnF1b3RhdGlvbi5tYXJrID0gIWlzLm5h
KHRlbXBsYXRlJHF1b3RhdGlvbi5tYXJrLndhcm5pbmcpCikKewogIAogICMgZmlyc3QgdGhpbmcg
dG8gZG8gYmVjYXVzZSB1c2VkIGluIHBhcmFtIGRlZnMKICBybCA8LSB0ZW1wbGF0ZSRyb3cubmFt
ZXMubG9jCiAgaWYgKHJsID4gMSkgc3RvcCgid3JpdGUudGFibGUgY3VycmVudGx5IGRvZXMgbm90
IHN1cHBvcnQgd3JpdGluZyByb3cubmFtZXMgb3RoZXIgdGhhbiBmaXJzdCBjb2x1bW4iKQoKICB0
ZW1wbGF0ZTIgPC0gd3JpdGUudGFibGUoeCwgZmlsZSA9IGZpbGUsIAogICwgYXBwZW5kID0gYXBw
ZW5kCiAgLCBxdW90ZSA9IHF1b3RlCiAgLCBzZXAgPSBzZXAKICAsIGVvbCA9IGVvbAogICwgbmEg
PSBuYQogICwgcm93Lm5hbWVzID0gcm93Lm5hbWVzCiAgLCBjb2wubmFtZXMgPSBjb2wubmFtZXMK
ICAsIGNvcm5lci5uYW1lID0gY29ybmVyLm5hbWUKICAsIHJvdy5uYW1lcy53aWR0aCA9IHJvdy5u
YW1lcy53aWR0aAogICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICwgZXNjYXBl
ZC5xdW90YXRpb24ubWFyayA9IGVzY2FwZWQucXVvdGF0aW9uLm1hcmsKICAsIGxvZ2ljYWxzID0g
bG9naWNhbHMKICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgLCBkZWMuc2VwID0gZGVjLnNlcAogICwg
ZGlnaXRzID0gZGlnaXRzCiAgLCB3aWR0aHMgPSB3aWR0aHMKICAsIHBhZC5tZXRob2QgPSBwYWQu
bWV0aG9kCiAgLCBtaW4uZGlnaXRzID0gbWluLmRpZ2l0cwogICwgd2Fybi5zZXBlcmF0b3IgPSB3
YXJuLnNlcGVyYXRvcgogICwgd2Fybi5xdW90YXRpb24ubWFyayA9IHdhcm4ucXVvdGF0aW9uLm1h
cmsKICApCiAgaWYgKCBsZW5ndGgoZXhjbHVkZS5jb21wYXJlKSA8IDEgKQogICAgZXhjbHVkZS5j
b21wYXJlIDwtICdOb3RJblRlbXBsYXRlJwogIGV4IDwtIG1hdGNoKGV4Y2x1ZGUuY29tcGFyZSwg
bmFtZXModGVtcGxhdGUpKQogIGNvbXBhcmUgPC0gYWxsLmVxdWFsKHRlbXBsYXRlWy1leF0sIHRl
bXBsYXRlMlstZXhdKQogIGlmIChsZW5ndGgoY29tcGFyZSk+MSB8fCAhaXMubG9naWNhbChjb21w
YXJlKSB8fCAhY29tcGFyZSl7CiAgICB3YXJuaW5nKCJpbnB1dCBhbmQgb3V0cHV0IHRlbXBsYXRl
IGFyZSBkaWZmZXJlbnQiKQogICAgcHJpbnQoY29tcGFyZSkKICB9CiAgaWYgKHRlbXBsYXRlMiRl
eHRlbnNpb24ud2FybmluZykgCiAgICB3YXJuaW5nKCJleHRlbnNpb24ud2FybmluZzogZGF0YSBo
YXZlIGJlZW4gd3JpdHRlbiBpbiBhIGZvcm1hdCB0aGF0IGRpZmZlcnMgZnJvbSB0aGUgc3BlY2lm
aWNhdGlvbnMiKQogIHJldHVybihpbnZpc2libGUodGVtcGxhdGUyKSkKfQoKCnByaW50LnRlbXBs
YXRlIDwtIGZ1bmN0aW9uKHRlbXBsYXRlKXsKICBpcy5hLmZhY3RvciA8LSB1bmxpc3QobGFwcGx5
KGFzLmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEo
bWF0Y2goJ2ZhY3RvcicsIHgkY2xhc3MpKSkgKSkKICBhcy5pcyA8LSB1bmxpc3QobGFwcGx5KGFz
Lmxpc3QodGVtcGxhdGUkYXR0cmlidXRlcyksIEZVTj1mdW5jdGlvbih4KWFueSghaXMubmEobWF0
Y2goJ0FzSXMnLCB4JGNsYXNzKSkpICkpCiAgCiAgc2luZ2xlcyA8LSBldmFsKGV4cHJlc3Npb24o
YyggCiAgICAgICAgZmlsZSA9IGZpbGUKICAgICAgLCBlb2wgPSBlb2wKICAgICAgLCBzZXAgPSBz
ZXAKICAgICAgLCBkZWMuc2VwID0gZGVjLnNlcAogICAgICAsIG5hLnN0cmluZ3MgPSBuYS5zdHJp
bmdzCiAgICAgICwgcXVvdGF0aW9uLm1hcmsgPSBxdW90YXRpb24ubWFyawogICAgICAsIGVzY2Fw
ZWQucXVvdGF0aW9uLm1hcmsgPSBlc2NhcGVkLnF1b3RhdGlvbi5tYXJrCiAgICAgICwgbG9naWNh
bHMuRkFMU0UgPSBsb2dpY2Fsc1sxXQogICAgICAsIGxvZ2ljYWxzLlRSVUUgPSBsb2dpY2Fsc1sy
XQogICAgICAsIGZhY3RvcnMgPSBmYWN0b3JzCiAgICAgICwgcm93Lm5hbWVzLmxvYyA9IHJvdy5u
YW1lcy5sb2MKICAgICAgLCBoZWFkZXIgPSBoZWFkZXIKICAgICAgLCBleHRlbnNpb24ud2Fybmlu
ZyA9IGV4dGVuc2lvbi53YXJuaW5nICAgICAgICAgICAgCiAgICAgICwgc2VwZXJhdG9yLndhcm5p
bmcgPSBzZXBlcmF0b3Iud2FybmluZyAgICAgICAgICAgIAogICAgICAsIHF1b3RhdGlvbi5tYXJr
Lndhcm5pbmcgPSBxdW90YXRpb24ubWFyay53YXJuaW5nCiAgICAgICkpLCB0ZW1wbGF0ZSkKICBj
YXQocGFzdGUobmFtZXMoc2luZ2xlcyksICc9IDwnLCBzaW5nbGVzLCAnPicsIHNlcD0nJywgY29s
bGFwc2U9J1xuJyksICdcbicsICdcbicpCgogIGlmIChpcy5udWxsKHRlbXBsYXRlJHdpZHRocykp
ewogICAgY2F0KCdkaWdpdHM9IDxOVUxMPlxuJykKICAgIGNhdCgnd2lkdGhzPSA8TlVMTD5cblxu
JykKICAgIAogICAgcHJpbnQubWF0cml4KAogICAgICBjYmluZCgKICAgICAgICBjb2wubmFtZXM9
dGVtcGxhdGUkY29sLm5hbWVzCiAgICAgICwgcXVvdGU9dGVtcGxhdGUkcXVvdGUKICAgICAgLCBz
dG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2RlCiAgICAgICwgaXMuZmFjdG9yPWlzLmEu
ZmFjdG9yCiAgICAgICwgYXMuaXMgPSBhcy5pcwogICAgICApCiAgICAsIHF1b3RlPUZBTFNFCiAg
ICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVzKSkKICAg
ICkKICB9ZWxzZXsKCiAgICBmb3IgKGkgaW4gMTpsZW5ndGgodGVtcGxhdGUkZGlnaXRzKSl7CiAg
ICAgIGlmIChpcy5udWxsKHRlbXBsYXRlJGRpZ2l0c1tbaV1dKSkgdGVtcGxhdGUkZGlnaXRzW1tp
XV0gPC0gJ05VTEwnCiAgICB9CiAgICB0ZW1wbGF0ZSR3aWR0aHMgPC0gdW5saXN0KHRlbXBsYXRl
JHdpZHRocykKICAgIHRlbXBsYXRlJGRpZ2l0cyA8LSB1bmxpc3QodGVtcGxhdGUkZGlnaXRzKQoK
ICAgIHByaW50Lm1hdHJpeCgKICAgICAgY2JpbmQoCiAgICAgICAgY29sLm5hbWVzPXRlbXBsYXRl
JGNvbC5uYW1lcwogICAgICAsIHdpZHRocz10ZW1wbGF0ZSR3aWR0aHMKICAgICAgLCAiW3N0YXJ0
XSI9Y3Vtc3VtKGMoMSwgdGVtcGxhdGUkd2lkdGhzWy1sZW5ndGgodGVtcGxhdGUkd2lkdGhzKV0p
KQogICAgICAsICJbc3RvcF0iPWN1bXN1bSh0ZW1wbGF0ZSR3aWR0aHMpCiAgICAgICwgcXVvdGU9
dGVtcGxhdGUkcXVvdGUKICAgICAgLCBzdG9yYWdlLm1vZGU9dGVtcGxhdGUkc3RvcmFnZS5tb2Rl
CiAgICAgICwgIltpcy5mYWN0b3JdIj1pcy5hLmZhY3RvcgogICAgICAsICJbYXMuaXNdIiA9IGFz
LmlzCiAgICAgICwgZGlnaXRzPXRlbXBsYXRlJGRpZ2l0cwogICAgICApCiAgICAsIHF1b3RlPUZB
TFNFCiAgICAsIHJvd2xhYj1hcy5jaGFyYWN0ZXIoMTpsZW5ndGgodGVtcGxhdGUkY29sLm5hbWVz
KSkKICAgICkKICB9Cn0KCgpkZW1vLnRlbXBsYXRlIDwtIApmdW5jdGlvbihmaWxlID0gdGVtcGZp
bGUoKSl7CgoJY2F0KCJcblxuXG49PT09PSBUSEUgREFUQSA9PT09PVxuIikKCgl4IDwtIGRhdGEu
ZnJhbWUobnVtPTE6NSswLjEKCSwgY2hhcj1JKGxldHRlcnNbMTo1XSkKCSwgbG9nPUkoYyhUUlVF
LCBGQUxTRSwgTkEsIE5BLCBOQSkpCgksIGZhaz1mYWN0b3IobGV0dGVyc1syMjoyNl0pKQoJeCRj
aGFyWzFdIDwtICcsJwoJeCRjaGFyWzJdIDwtICcjJyAgICMgd2FzICciJwoJeCRjaGFyWzNdIDwt
ICdhIGInCgl4JG51bVsxXSA8LSAuTWFjaGluZSRkb3VibGUueG1pbgoJCglzdHIoeCkKCgljYXQo
IlxuXG5cbj09PT09IEZJWEVEIFdJRFRIIEZPUk1BVCA9PT09PVxuIikKICAgICAgICBjYXQoIi0t
LSB3cml0aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZp
bGU9ZmlsZSkKCWNhdCgiLS0tIHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxl
IC0+Iiwgc2NhbihmaWxlPWZpbGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyks
ICdcbicpCgljYXQoIi0tLSB0aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0
ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0g
cmVhZCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwg
ZGF0YVxuIikKCWFsbC5lcXVhbCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRl
IHdoaWxlIHJlYWRpbmdcbiIpCgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1
dGU9VFJVRSkKCXRlbXBsYXRlMiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3Rl
bXBsYXRlJykgPC0gTlVMTAoJY2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNl
cHQgZm9yIGRpZ2l0c1xuIikKCWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCIt
LS0gcmUud3JpdGluZyB1c2luZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBs
YXRlKHRlbXBsYXRlMiwgeCwgYXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxk
IGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVt
cGxhdGUzKQoJY2F0KCItLS0gdGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBh
cHBlbmRlZDpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCgljYXQoIlxuXG5cbj09PT09IEZJ
WEVEIFdJRFRIIEZPUk1BVCB3aXRoIGZhY3RvcnM9J2NvZGVzJywgbG9naWNhbHM9YygwLDEpLCBk
aWdpdHM9MTUsIHJvdy5uYW1lcz1GQUxTRSA9PT09PVxuIikKICAgICAgICBjYXQoIi0tLSB3cml0
aW5nIGZpbGUiLCBmaWxlLCAiXG4iKQoJdGVtcGxhdGUgPC0gd3JpdGUuZml4KHgsIGZpbGU9Zmls
ZSwgZmFjdG9ycz0nY29kZXMnLCBsb2dpY2Fscz1jKDAsMSksIGRpZ2l0cz0xNSkKCWNhdCgiLS0t
IHRoaXMgaXMgdGhlIGZpbGU6XG4iKQoJY2F0KHBhc3RlKCJmaWxlIC0+Iiwgc2NhbihmaWxlPWZp
bGUsIHdoYXQ9JycsIHNlcD0nXG4nKSwgY29sbGFwc2U9J1xuJyksICdcbicpCgljYXQoIi0tLSB0
aGlzIGlzIHRoZSB0ZW1wbGF0ZTpcbiIpCglwcmludCh0ZW1wbGF0ZSkKCWNhdCgiLS0tIHJlLWlt
cG9ydGluZyBkYXRhIHVzaW5nIHRlbXBsYXRlXG4iKQoJeDIgPC0gcmVhZCh0ZW1wbGF0ZSkKCWNh
dCgiLS0tIHJlLWltcG9ydGVkIGRhdGEgZXF1YWwgb3JpZ2luYWwgZGF0YVxuIikKCWFsbC5lcXVh
bCh4LCB4MikKICAgICAgICBjYXQoIi0tLSBtYWtlIHRlbXBsYXRlIHdoaWxlIHJlYWRpbmdcbiIp
Cgl4MyA8LSByZWFkKHRlbXBsYXRlLCB0ZW1wbGF0ZS5hdHRyaWJ1dGU9VFJVRSkKCXRlbXBsYXRl
MiA8LSBhdHRyKHgzLCAndGVtcGxhdGUnKQoJYXR0cih4MywgJ3RlbXBsYXRlJykgPC0gTlVMTAoJ
Y2F0KCItLS0gdGVtcGxhdGVzIHNob3VsZCBiZSBlcXVhbCBleGNlcHQgZm9yIGRpZ2l0c1xuIikK
CWFsbC5lcXVhbCh0ZW1wbGF0ZSwgdGVtcGxhdGUyKQoJY2F0KCItLS0gcmUud3JpdGluZyB1c2lu
ZyB0ZW1wbGF0ZTIiKQoJdGVtcGxhdGUzIDwtIHdyaXRlLnRlbXBsYXRlKHRlbXBsYXRlMiwgeCwg
YXBwZW5kPVRSVUUpCgljYXQoIi0tLSB0ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBm
b3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFsKHRlbXBsYXRlMiwgdGVtcGxhdGUzKQoJY2F0KCItLS0g
dGhpcyBpcyB0aGUgZmlsZSB3aXRoIHJlLndyaXR0ZW4gZGF0YSBhcHBlbmRlZDpcbiIpCgljYXQo
cGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0nJywgc2VwPSdcbicpLCBjb2xs
YXBzZT0nXG4nKSwgJ1xuJykKCgoJY2F0KCJcblxuXG49PT09PSBTRVBFUkFURUQgVkFMVUUgRk9S
TUFUID09PT09XG4iKQogICAgICAgIGNhdCgiLS0tIHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIp
Cgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmlsZT1maWxlKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKCgljYXQoIlxuXG5cbj09PT09IFNFUEVSQVRFRCBWQUxVRSBGT1JNQVQgd2l0aCBk
ZWMuc2VwPScsJyBhbmQgcm93Lm5hbWVzPUZBTFNFID09PT09XG4iKQogICAgICAgIGNhdCgiLS0t
IHdyaXRpbmcgZmlsZSIsIGZpbGUsICJcbiIpCgl0ZW1wbGF0ZSA8LSB3cml0ZS5zdnMoeCwgZmls
ZT1maWxlLCBkZWMuc2VwPScsJywgcm93Lm5hbWVzPUZBTFNFKQoJY2F0KCItLS0gdGhpcyBpcyB0
aGUgZmlsZTpcbiIpCgljYXQocGFzdGUoImZpbGUgLT4iLCBzY2FuKGZpbGU9ZmlsZSwgd2hhdD0n
Jywgc2VwPSdcbicpLCBjb2xsYXBzZT0nXG4nKSwgJ1xuJykKCWNhdCgiLS0tIHRoaXMgaXMgdGhl
IHRlbXBsYXRlOlxuIikKCXByaW50KHRlbXBsYXRlKQoJY2F0KCItLS0gcmUtaW1wb3J0aW5nIGRh
dGEgdXNpbmcgdGVtcGxhdGVcbiIpCgl4MiA8LSByZWFkKHRlbXBsYXRlKQoJY2F0KCItLS0gcmUt
aW1wb3J0ZWQgZGF0YSBlcXVhbCBvcmlnaW5hbCBkYXRhXG4iKQoJYWxsLmVxdWFsKHgsIHgyKQog
ICAgICAgIGNhdCgiLS0tIG1ha2UgdGVtcGxhdGUgd2hpbGUgcmVhZGluZ1xuIikKCXgzIDwtIHJl
YWQodGVtcGxhdGUsIHRlbXBsYXRlLmF0dHJpYnV0ZT1UUlVFKQoJdGVtcGxhdGUyIDwtIGF0dHIo
eDMsICd0ZW1wbGF0ZScpCglhdHRyKHgzLCAndGVtcGxhdGUnKSA8LSBOVUxMCgljYXQoIi0tLSB0
ZW1wbGF0ZXMgc2hvdWxkIGJlIGVxdWFsIGV4Y2VwdCBmb3IgZGlnaXRzXG4iKQoJYWxsLmVxdWFs
KHRlbXBsYXRlLCB0ZW1wbGF0ZTIpCgljYXQoIi0tLSByZS53cml0aW5nIHVzaW5nIHRlbXBsYXRl
MiIpCgl0ZW1wbGF0ZTMgPC0gd3JpdGUudGVtcGxhdGUodGVtcGxhdGUyLCB4LCBhcHBlbmQ9VFJV
RSkKCWNhdCgiLS0tIHRlbXBsYXRlcyBzaG91bGQgYmUgZXF1YWwgZXhjZXB0IGZvciBkaWdpdHNc
biIpCglhbGwuZXF1YWwodGVtcGxhdGUyLCB0ZW1wbGF0ZTMpCgljYXQoIi0tLSB0aGlzIGlzIHRo
ZSBmaWxlIHdpdGggcmUud3JpdHRlbiBkYXRhIGFwcGVuZGVkOlxuIikKCWNhdChwYXN0ZSgiZmls
ZSAtPiIsIHNjYW4oZmlsZT1maWxlLCB3aGF0PScnLCBzZXA9J1xuJyksIGNvbGxhcHNlPSdcbicp
LCAnXG4nKQoKfQo=

------=_NextPart_000_0004_01BF5D27.62306630--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 12 18:02:51 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 2000 19:02:51 +0100
Subject: a +1 shift overlaying lines/points on a boxplot (PR#398)
In-Reply-To: acuster@nature.berkeley.edu's message of "Tue, 11 Jan 2000 02:53:58 +0100 (MET)"
References: <200001110153.CAA03462@pubhealth.ku.dk>
Message-ID: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>

acuster@nature.berkeley.edu writes:

> Full_Name: Adrian Custer
> Version: 0.90.0
> OS: Linux on Thinkpad (pentium) and desktop (K6)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> When I create a boxplot, and then try to overlay a lowess fit or just the
> points, 
> the points do not appear in the highest level and the lowess curve does not
> reach 
> the highest level. However, if I add one to each of the models, the problem is
> solved.
> I tried this on two different machines, a laptop and a desktop both running 
> Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian
> 
> > a
>   [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
...
> [291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> > b
>   [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
>  [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
.....
> [297] 4 1 0 0
> > boxplot(a~b)
> > lines(lowess(a~b))
> > points(a~b)
> > boxplot(a~b)
> > lines(lowess(a~b+1))
> > points(a~b+1)
> > 
> 
> Thanks for your consideration and thanks a million for all the work. R is a
> pleasure 
> to work with. 

Boxplot expects a *factor* as the grouping criterion. The x axis
labels are the group names, not x coordinates (i.e. it might as well
be "married, unmarried, divorced" as "0, 1, 2."), and since factors
are internally coded as 1:nlevels, that's the value used for the
actual coordinate system.

Passing a numeric vector gets it converted to a factor before use, so
things are as you should expect. Except possibly for two issues:

a) should one really do the numeric->factor conversion without a
warning message?

b) perhaps boxplot could use an at= argument saying "plot boxes here"
since the current version wouldn't be able to deal with
non-equidistant groups. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 12 17:05:37 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 12 Jan 2000 18:05:37 +0100
Subject: inconsistencies between formatC(), format() and format.char()
Message-ID: <000001bf5d8f$753ef530$a9021aac@joelschlaegel>



Dear R-Developers,

Just a note: there are some inconsistencies between formatC(), format() and
format.char() and cross calling between these functions.
On the one hand

> cat(format('{"}'), "\n")
{\"}

> cat(format.char('{"}'), "\n")
{\"}

is by default format.char(, flag="-") and thus by default calling format()

> cat(format.char('{"}', flag="-"), "\n")
{\"}


On the other hand

> cat(formatC('{"}'), "\n")
{"}

which is calling format.char(, flag="")

> cat(format.char('{"}', flag=""), "\n")
{"}


also (for me) unexpected is

> format(" abc ", trim=T)
[1] " abc "


As an alternative see functions pad() and trim() from my other mailing ...
Regards


Jens Oehlschlgel-Akiyoshi


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 13 13:29:01 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 13 Jan 2000 14:29:01 +0100 (MET)
Subject: X11 troubles (PR#400)
Message-ID: <200001131329.OAA01558@pubhealth.ku.dk>

Just to get these issues recorded in the bug repository:

a) We don't handle multiple window closes well

My "favourite" version of this is when I ^Z out of an R session with
an open graphics window to do something on the command line, then kill
the graphics window (which does nothing), kill it again, realise that
it's because the R session was stopped, and:

[pd@blueberry BUILD]$ %
bin/R
Segmentation fault (core dumped)

b) X11 errors should be caught by an error handler, not kill R.

This is mainly seen when there's an error somewhere else, such as
trouble with the font setup. But in principle, we should at worst shut
down the graphics window, not R itself.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 13 17:24:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Jan 2000 18:24:05 +0100 (MET)
Subject: bug in glm (PR#397)
Message-ID: <200001131724.SAA04122@pubhealth.ku.dk>

> From: Peter Holzer <holzer@stat.math.ethz.ch>
> Date: Mon, 10 Jan 2000 18:06:59 +0100 (MET)
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: bug in glm (PR#397)
> X-Keywords: 
> 
> Prof Brian Ripley writes:
>  > > Date: Mon, 10 Jan 2000 11:53:50 +0100 (MET)
>  > > From: holzer@stat.math.ethz.ch
>  > > 
>  > > Dear R-team
>  > > 
>  > > As I didn't get any answer to my bug-report last week I have taken the
>  > > effort and extracted a minimal data set from my data (see below) where 
the
>  > > following bug occurs:
>  > > 
>  > > > glm(SKR.ein.aus ~ ., family = binomial, data = bugdata, na.action = 
na.omit)
>  > > Error in names<-.default(*tmp*, value = ynames) : names attribute must be 
the 
>  > same length as the vector
> > Indeed, thank you (we needed an example). Alter
>  > 
>  >     names(w) <- ynames
>  >     
>  > to
>  >     names(w) <- ynames[good]
>  > 
>  > and
>  > 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", nobs - fit$rank))
>  > 
>  > to 
>  >     names(fit$effects) <-
>  > 	c(xxnames[seq(fit$rank)], rep("", sum(good) - fit$rank))
>  > 
>  > as the vector w is dropping observations with fitted probs 0 or 1.
> 
> This is actually a solution I thought of as well. However it has the
> disadvantage that plot (and other functions?) gets problems:
> 
> > fit.tst <- glm(SKR.ein.aus ~ ., family = binomial, data = bugdata)
> Warning messages: 
> 1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt))
> glm.fit.null else glm.fit)(x = X, y = Y, 
> .
> .
> .
> 7: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else 
glm.fit)(x = X, y = Y,  
> > plot(fit.tst)
> Warning messages: 
> 1: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 2: longer object length
> 	is not a multiple of shorter object length in: r/sqrt(1 - hii) 
> 3: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 4: longer object length
> 	is not a multiple of shorter object length in: sqrt(w) * r 
> 5: longer object length
> 	is not a multiple of shorter object length in: e/(s * (1 - h)) 
> 6: longer object length
> 	is not a multiple of shorter object length in: (e/(s * (1 - h)))^2 * h 
> 
> Maybe there is another solution?

Yes, there is.  I have now altered glm in the development version to handle
zero weights in the same way as lm, and plot.lm now works for such glm
objects (although the assumptions to use lm methods on an glm fit
are invalid in this example, even if run to convergence). In essence:

    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
...
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = 
weights



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 13 17:36:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 13 Jan 2000 18:36:28 +0100 (MET)
Subject: missing warnings...
In-Reply-To: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
References: <200001110153.CAA03462@pubhealth.ku.dk>
 <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
Message-ID: <14462.3356.364998.832333@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

      <....>

    PD> Boxplot expects a *factor* as the grouping criterion. The x axis
    PD> labels are the group names, not x coordinates (i.e. it might as well
    PD> be "married, unmarried, divorced" as "0, 1, 2."), and since factors
    PD> are internally coded as 1:nlevels, that's the value used for the
    PD> actual coordinate system.

    PD> Passing a numeric vector gets it converted to a factor before use, so
    PD> things are as you should expect. Except possibly for two issues:

    PD> a) should one really do the numeric->factor conversion without a
    PD> warning message?

Yes, we should have that warning (and more!):

Warning messages that I am extremely missing are in the following two examples

  plot(1);  points(2,2)

  plot(1);  text(2,2,"bla")

(and similar with lines and all kinds of plots).

We *definitely* should warn the user that (s)he is drawing outside the plot
region.  
We need "graphical warnings" 
   (which can be turned off via an options() or par() call).

    PD> b) perhaps boxplot could use an at= argument saying "plot boxes here"
    PD> since the current version wouldn't be able to deal with
    PD> non-equidistant groups. 
oh yes!
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan 15 18:46:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 15 Jan 2000 18:46:44 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <200001100140.CAA20927@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>

On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:

> Depending on the setting of par()$usr, 
> the 'at' setting in mtext(.., adj=0, outer=T) may cause the
> text to appear in an anomalous position (e. g. in the first
> instance below, at the left of the plot region rather than
> at 'at=0' in the figure region), or the text may not appear
> at all.
> 
> If one does not set the 'at' parameter the text appears
> (with 'adj=0') on the far left of the plot region.  I assume
> this is also anomalous; at all events it is the behaviour
> that I wished to circumvent.

I am afraid this is documentation confusion. There are no user
coordinates in the outer margins, and at works like adj if outer=TRUE.
Indeed the example

mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

does work correctly for me: specifying adj=0 means put it at the extreme
left, adj=1 at the extreme right, and adj=0 to centre it (on the
display region, not the figure region).

I will re-write the documentation.

> 
> The function plot.test() demonstrates the behaviour:
> 
> plot.test <-
> function(xval=0:4, pos=NULL){
> oldpar<-par(oma=c(2,0,0,0))
> on.exit(par(oldpar))
> plot(xval,xval)
> if(is.null(pos))pos<-min(xval)
> print(pos)
> print(par()$usr)
> mtext(side=1,line=3.5,"Marginal text",adj=0,at=pos)
> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0,at=min(xval))
> }
> 
> > plot.test(xval=0:4)  # "Outer text appears on left of the figure region
> [1] 0
> [1] -0.16  4.16 -0.16  4.16
> > plot.test(xval=20:24)  # "Outer text does not appear at all
> [1] 20
> [1] 19.84 24.16 19.84 24.16
> > # Check that at=0 does not work
> > plot.test(xval=20:24, pos=0)  # "Outer text does not appear at all
> [1] 0
> [1] 19.84 24.16 19.84 24.16
> >
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 0
>  minor = 90.1
>  year = 1999
>  month = December
>  day = 15
>  language = R
> 
> Windows 9x 4.0 (build 1111)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 17 07:32:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Jan 2000 08:32:04 +0100 (MET)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
References: <200001100140.CAA20927@pubhealth.ku.dk>
 <Pine.GSO.4.05.10001151841560.17003-100000@auk.stats>
Message-ID: <14466.50548.159379.244161@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
    >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
    >> adj=0, outer=T) may cause the text to appear in an anomalous
    >> position (e. g. in the first instance below, at the left of the plot
    >> region rather than at 'at=0' in the figure region), or the text may
    >> not appear at all.
    >> 
    >> If one does not set the 'at' parameter the text appears (with
    >> 'adj=0') on the far left of the plot region.  I assume this is also
    >> anomalous; at all events it is the behaviour that I wished to
    >> circumvent.

    BDR> I am afraid this is documentation confusion. There are no user
    BDR> coordinates in the outer margins, and at works like adj if
    BDR> outer=TRUE.  Indeed the example

    BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)

    BDR> does work correctly for me: specifying adj=0 means put it at the
    BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
    BDR> (on the display region, not the figure region).

    BDR> I will re-write the documentation.

Thank you!

Is there any reason why "at=" should be *valid* at all for mtext()?
I think this is the confusing part.
"at=" always makes (me) think of user coordinates,...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 17 07:56:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 17 Jan 2000 07:56:16 +0000 (GMT)
Subject: 'at' parameter in mtext(.., adj=0, outer=T) (PR#396)
In-Reply-To: <14466.50548.159379.244161@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001170754120.16709-100000@auk.stats>

On Mon, 17 Jan 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Mon, 10 Jan 2000 john.maindonald@anu.edu.au wrote:
>     >> Depending on the setting of par()$usr, the 'at' setting in mtext(..,
>     >> adj=0, outer=T) may cause the text to appear in an anomalous
>     >> position (e. g. in the first instance below, at the left of the plot
>     >> region rather than at 'at=0' in the figure region), or the text may
>     >> not appear at all.
>     >> 
>     >> If one does not set the 'at' parameter the text appears (with
>     >> 'adj=0') on the far left of the plot region.  I assume this is also
>     >> anomalous; at all events it is the behaviour that I wished to
>     >> circumvent.
> 
>     BDR> I am afraid this is documentation confusion. There are no user
>     BDR> coordinates in the outer margins, and at works like adj if
>     BDR> outer=TRUE.  Indeed the example
> 
>     BDR> mtext(side=1,line=0.5,"Outer text",outer=T, adj=0)
> 
>     BDR> does work correctly for me: specifying adj=0 means put it at the
>     BDR> extreme left, adj=1 at the extreme right, and adj=0 to centre it
>     BDR> (on the display region, not the figure region).
> 
>     BDR> I will re-write the documentation.
> 
> Thank you!
> 
> Is there any reason why "at=" should be *valid* at all for mtext()?
> I think this is the confusing part.
> "at=" always makes (me) think of user coordinates,...

Unfortunately `adj' is overloaded, so for perpendicular text you need it.
The re-written documentation goes into the gory details.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 18:59:13 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 13:59:13 -0500 (EST)
Subject: lwd patches for "contour"
Message-ID: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>


  I found it useful to have contour be able to do line widths ... hope
that the guts haven't changed an enormous amount in the current
development version ...  the patches are relatively trivial, mostly going
by analogy with lty and col (although in my ignorance it took me a while
to figure out what UNPROTECT(2) was and why it should be changed to
UNPROTECT(3) ...  hope this is useful.

  Ben Bolker

*** src/main/names.c.orig	Mon Jan 17 11:23:26 2000
--- src/main/names.c	Mon Jan 17 11:50:54 2000
***************
*** 644,650 ****
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	6,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},
--- 644,650 ----
  {"identify",	do_identify,	0,	11,	6,	PP_FUNCALL},
  {"strheight",	do_strheight,	0,	11,	3,	PP_FUNCALL},
  {"strwidth",	do_strwidth,	0,	11,	3,	PP_FUNCALL},
! {"contour",	do_contour,	0,	11,	7,	PP_FUNCALL},
  {"image",	do_image,	0,	11,	5,	PP_FUNCALL},
  {"dend",	do_dend,	0,	111,	6,	PP_FUNCALL},
  {"dend.window",	do_dendwindow,	0,	111,	6,	PP_FUNCALL},

*** src/main/plot3d.c.orig	Mon Jan 17 11:08:08 2000
--- src/main/plot3d.c	Mon Jan 17 13:47:03 2000
***************
*** 396,408 ****
  	}
  }
  
! /* contour(x,y,z, levels, col, lty) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty;
!     int i, j, nx, ny, nc, ncol, nlty;
      int ltysave, colsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
--- 396,409 ----
  	}
  }
  
! /* contour(x,y,z, levels, col, lty, lwd) */
  
  SEXP do_contour(SEXP call, SEXP op, SEXP args, SEXP env)
  {
!     SEXP oargs, c, x, y, z, col, lty, lwd;
!     int i, j, nx, ny, nc, ncol, nlty, nlwd;
      int ltysave, colsave;
+     double lwdsave;
      double atom, zmin, zmax;
      char *vmax, *vmax0;
      DevDesc *dd = CurrentDevice();
***************
*** 439,445 ****
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     /* col, lwd and lty vectors here --- FIXME: "lwd" ???? */
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
--- 440,447 ----
      PROTECT(lty = FixupLty(GetPar("lty", args), dd->gp.lty));
      nlty = length(lty);
  
!     PROTECT(lwd = FixupLwd(GetPar("lwd", args), dd->gp.lwd));  
!     nlwd = length(lwd);
  
      if (nx < 2 || ny < 2)
  	errorcall(call, "insufficient x or y values");
***************
*** 507,512 ****
--- 509,515 ----
  
      ltysave = dd->gp.lty;
      colsave = dd->gp.col;
+     lwdsave = dd->gp.lwd;
      GMode(1, dd);
      for (i = 0; i < nc; i++) {
  	vmax = vmaxget();
***************
*** 516,521 ****
--- 519,527 ----
  	dd->gp.col = INTEGER(col)[i % ncol];
  	if (dd->gp.col == NA_INTEGER)
  	    dd->gp.col = colsave;
+ 	dd->gp.lwd = REAL(lwd)[i % nlwd];
+ 	if (dd->gp.lwd == NA_REAL)
+ 	    dd->gp.lwd = lwdsave;
  	contour(x, nx, y, ny, z, REAL(c)[i], atom, dd);
  	vmaxset(vmax);
      }
***************
*** 523,529 ****
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     UNPROTECT(2);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)
--- 529,536 ----
      vmaxset(vmax0);
      dd->gp.lty = ltysave;
      dd->gp.col = colsave;
!     dd->gp.lwd = lwdsave;
!     UNPROTECT(3);
      /* NOTE: only record operation if no "error"  */
      /* NOTE: on replay, call == R_NilValue */
      if (call != R_NilValue)

*** src/library/base/R/contour.R.orig	Mon Jan 17 11:12:11 2000
--- src/library/base/R/contour.R	Mon Jan 17 11:43:02 2000
***************
*** 6,12 ****
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
--- 6,12 ----
  	      ylim = range(y, finite = TRUE),
  	  zlim = range(z, finite = TRUE),
  	  labcex = 0,
! 	  col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, ...)
  {
      ## labcex is disregarded since we do NOT yet put  ANY labels...
      if (missing(z)) {
***************
*** 34,40 ****
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty))
      if (!add) {
  	axis(1)
  	axis(2)
--- 34,40 ----
      ##- don't lose  dim(.)
      if (!is.double(z)) storage.mode(z) <- "double"
      .Internal(contour(as.double(x), as.double(y), z, as.double(levels),
! 		      col = col, lty = lty, lwd = as.double(lwd)))
      if (!add) {
  	axis(1)
  	axis(2)

*** src/library/base/man/contour.Rd.orig	Mon Jan 17 11:13:18 2000
--- src/library/base/man/contour.Rd	Mon Jan 17 11:19:05 2000
***************
*** 8,14 ****
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
--- 8,14 ----
          ylim = range(y, finite = TRUE),
          zlim = range(z, finite = TRUE),
          labcex = 0,
!         col = par("fg"), lty = par("lty"), lwd = par("lwd"), add = FALSE, \dots)
  }
  \alias{contour}
  \arguments{
***************
*** 29,34 ****
--- 29,35 ----
    \item{xlim, ylim, zlim}{x-, y- and z-limits for the plot}
    \item{col}{color for the lines drawn}
    \item{lty}{line type for the lines drawn}
+   \item{lwd}{line width for the lines drawn}
    \item{add}{logical. If \code{TRUE}, add to a current plot.}
    \item{\dots}{additional graphical parameters (see \code{\link{par}})
      and the arguments to \code{\link{title}} may also be supplied.}
***************
*** 36,42 ****
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,
--- 37,43 ----
  \description{
    Draws contour lines for the desired levels.
    There is currently no documentation about the algorithm.
!   The source code is in \file{\$R\_HOME/src/main/plot3d.c}.
  }
  \seealso{
    \code{\link{filled.contour}} for ``color-filled'' contours,

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 17 22:00:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jan 2000 17:00:58 -0500 (EST)
Subject: RNG initialization
Message-ID: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>


  It would be nice to be able to initialize the random-number generator
with a single long argument; I can see that in principle this could be
done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
I had trouble with the technical details, possibly because of long/int
incompatibilities.

  Any chance of this happening?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 08:08:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 08:08:55 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <Pine.LNX.4.10.10001171659110.17501-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>

On Mon, 17 Jan 2000, Ben Bolker wrote:

>   It would be nice to be able to initialize the random-number generator
> with a single long argument; I can see that in principle this could be
> done by writing an access method, do_RNGinit (or whatever) for RNG_Init.
> I had trouble with the technical details, possibly because of long/int
> incompatibilities.

What precisely do you want to do? Is that `long' as in C code?  There is no
means to pass a `long' from R code to C, but RNG_Init in fact only
makes use of 32 bits so should have `int' there.  (It's a poor
choice of algorithm though, as it uses a multiplicative generator
without ensuring the starting point is odd.)

My best guess is that you would like a function like S's set.seed,
which when called with a single number sets the whole initial seed.
This is certainly easy to do, and can be done easily in R code.
Since set.seed seems a suitable name and it would help compatibility,
would

set.seed(seed, kind = 0)

be a suitable interface?  Or would people prefer

RNGinit(kind, seed)

?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Jan 18 14:22:57 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 18 Jan 2000 09:22:57 -0500 (EST)
Subject: RNG initialization
In-Reply-To: <Pine.GSO.4.05.10001180751460.3891-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>

On Tue, 18 Jan 2000, Prof Brian D Ripley wrote:

> My best guess is that you would like a function like S's set.seed,
> which when called with a single number sets the whole initial seed.
> This is certainly easy to do, and can be done easily in R code.
> Since set.seed seems a suitable name and it would help compatibility,
> would
> 
> set.seed(seed, kind = 0)
> 
> be a suitable interface?  Or would people prefer
> 
> RNGinit(kind, seed)

  set.seed() sounds fine.  On reading this, it occurs to me that I could
probably do something like this that just set the value of .Random.seed in
R code (just copying what RNG_Init() does to set .Random.seed from
time()), without mucking with the C code (although a lot of the details of
RNG settings etc. seem to be in C rather than R code at the moment).

  thanks,
     Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 15:26:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 10:26:26 -0500
Subject: RNG initialization
References: <Pine.LNX.4.10.10001180904230.18277-100000@bolker.zoo.ufl.edu>
Message-ID: <38848621.4E02D913@bank-banque-canada.ca>

>Since set.seed seems a suitable name and it would help compatibility,
>would
>set.seed(seed, kind = 0)
>be a suitable interface?  Or would people prefer
>RNGinit(kind, seed)

Before making too many changes to random number generation it might be useful to
look at the code below which is part of my syskern package. It sets the seed,
uniform RNG and the normal transformation, and may serve as a good model for
setting other transformation. Since it also works in Splus it allows me to run
the same random experiments in Splus and R. I've been using it successfully for
some time now, on much more complicated examples than the simple tests below.

Paul Gilbert

##############################################################################

#    6/  Random number generation.
# part of syskern package. I think this is self contained except for is.S
is.S <- function(){FALSE}

##############################################################################

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.RNG(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 15:33:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 15:33:40 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181533.PAA25043@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 10:26:26 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Since set.seed seems a suitable name and it would help compatibility,
> >would
> >set.seed(seed, kind = 0)
> >be a suitable interface?  Or would people prefer
> >RNGinit(kind, seed)
> 
> Before making too many changes to random number generation it might be useful 
to
> look at the code below which is part of my syskern package. It sets the seed,

As I understand it, that does not do what either S-PLUS's set.seed does
or what Ben asks for, as the seed has to be of a length and values
appropriate to the RNGkind.  The request was to use a single value:
otherwise why not just assign to .Random.seed?  

Personally I do not like the altering of system functions in user
packages, as what happens if two or more people do it? It depends
on the load order.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 16:35:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 11:35:45 -0500
Subject: RNG initialization
References: <200001181533.PAA25043@toucan.stats.ox.ac.uk>
Message-ID: <38849661.AC7A95FB@bank-banque-canada.ca>

>Personally I do not like the altering of system functions in user
>packages, as what happens if two or more people do it? It depends
>on the load order.

Yes, I don't see any way around this in Splus, but it would be nice if it was
done in R base. In fact as I recall, some of the hooks may be in R's C code and
that would be the fastest place to do RNG changes. Martin was going to look at
it sometime, but I don't know if he has had a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 18 16:40:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 18 Jan 2000 16:40:30 +0000 (GMT)
Subject: RNG initialization
Message-ID: <200001181640.QAA17215@toucan.stats.ox.ac.uk>

> Date: Tue, 18 Jan 2000 11:35:45 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
 
> >Personally I do not like the altering of system functions in user
> >packages, as what happens if two or more people do it? It depends
> >on the load order.
> 
> Yes, I don't see any way around this in Splus, but it would be nice if it was
> done in R base. In fact as I recall, some of the hooks may be in R's C code 
and
> that would be the fastest place to do RNG changes. Martin was going to look at
> it sometime, but I don't know if he has had a chance.

Sure, it is easy and that was what I was proposing to do. I was just
proposing to be compatible with S-PLUS and not syskern.  I really don't
see why syskern needs to use the name set.seed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 18 18:59:09 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 18 Jan 2000 13:59:09 -0500
Subject: RNG initialization
References: <200001181640.QAA17215@toucan.stats.ox.ac.uk>
Message-ID: <3884B7FD.7550C58A@bank-banque-canada.ca>

>I was just proposing
>to be compatible with S-PLUS and not syskern.  I really don't
>see why syskern needs to use the name set.seed.

No, syskern does not need to use the name set.seed. I used it hoping this stuff
would move to R  base at some point and I could remove it from syskern.

Beyond the name however, there are some Splus compatiblity issues which probably
should be discussed. I seem to recall that there was some difficulty producing
Splus runif results in R.  Also, the ability to specify the RNG in R is nice and
should be accommodated, and setting the seed without setting the RNG is probably
not wise. Finally, I feel it is important to also specify the algorithms for
other transformations such rnorm. This way, one can be relatively confident that
a random experiment can be reproduced.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 18 19:14:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 19:14:48 +0000 (GMT)
Subject: RNG initialization
In-Reply-To: <3884B7FD.7550C58A@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10001181911370.7391-100000@auk.stats>

On Tue, 18 Jan 2000, Paul Gilbert wrote:

> >I was just proposing
> >to be compatible with S-PLUS and not syskern.  I really don't
> >see why syskern needs to use the name set.seed.
> 
> No, syskern does not need to use the name set.seed. I used it hoping this stuff
> would move to R  base at some point and I could remove it from syskern.
> 
> Beyond the name however, there are some Splus compatiblity issues which probably
> should be discussed. I seem to recall that there was some difficulty producing
> Splus runif results in R.  Also, the ability to specify the RNG in R is nice and

Of course, as the Splus runif is not implemented in R. There is something
similar, but it is not the same.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 19:02:50 2000
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 20 Jan 2000 20:02:50 +0100 (MET)
Subject: bug in setting length of a list (PR#401)
Message-ID: <200001201902.UAA04276@pubhealth.ku.dk>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Jan 20 18:55:15 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 20 Jan 2000 12:55:15 -0600
Subject: bug in setting length of a list
Message-ID: <qxpk8l4shd8.fsf@ludwig.stat.wisc.edu>

Setting the length of a list object nullifies the whole list!

> foo <- list(a=1)
> foo
$a
[1] 1

> length(foo) <- 2
> foo
[[1]]
NULL

[[2]]
NULL


The fix is to patch R/src/main/builtin.c with the following.

===================================================================
--- r-devel/src/main/builtin.c  Sat Dec 11 15:11:05 1999
+++ r-devel.mod/src/main/builtin.c      Wed Jan 19 18:01:10 2000
@@ -508,6 +508,14 @@
            CAR(t) = CAR(x);
            TAG(t) = TAG(x);
        }
+    case VECSXP:
+       for (i = 0; i < len; i++)
+           if (i < lenx) {
+               VECTOR(rval)[i] = VECTOR(x)[i];
+               if (xnames != R_NilValue)
+                   STRING(names)[i] = STRING(xnames)[i];
+           }
+       break;
     }
     if (isVector(x) && xnames != R_NilValue)
        setAttrib(rval, R_NamesSymbol, names);

===================================================================
--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri Jan 21 06:15:03 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Jan 2000 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <200001210615.HAA02949@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

* PR# 379 *
Subject: strsplit does not conform to documentation
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 17 Dec 1999 18:48:14 -0800 (PST)
--fix documentation!

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
--still with us (0.90.1, Dec.1999)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
--FIXME (still in 0.90.1)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).
* PR# 340 *
Subject: "outer" argument in mtext
From: Douglas Bates <bates@stat.wisc.edu>
Date: 23 Nov 1999 12:31:36 -0600
* PR# 349 *
Subject: size of text and numbers in graphs
From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Date: Sat, 27 Nov 1999 17:03:53 CET (+0100)
--not a bug (PD)
* PR# 365 *
Subject: plot math - segfault and "frac", "^" bug(s)..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 8 Dec 1999 18:27:03 +0100 (MET)
--seg.fault fixed; "^" precedence is really bad
* PR# 366 *
Subject: pch==NA
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 1999 15:19:46 +0100
* PR# 372 *
Subject: hist() with horiz=TRUE does not give horiz. plots
From: fran@stat.berkeley.edu
Date: Sun, 12 Dec 1999 00:27:25 +0100 (MET)

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 363 *
Subject: Where should iofflush.c be?
From: David Emile Lamy <delamy@uswest.net>
Date: Tue, 7 Dec 1999 01:51:57 -0700 (MST)
--Linux installation problem, it seems. Too little to reproduce

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature
* PR# 343 *
Subject: rbind invisible return value
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 24 Nov 1999 11:34:10 -0800 (PST)
* PR# 358 *
Subject: [[ substitution
From: clive@bell-labs.com
Date: Fri, 3 Dec 1999 16:45:08 +0100 (MET)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

none

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 377 *
Subject: lists of functions
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 17 Dec 1999 09:10:50 +0100 (MET)
* PR# 378 *
Subject: plot()  after split.screen() on postscript() Device produces inconsistent PostScript file
From: boble@usa.net
Date: Fri, 17 Dec 1999 21:32:23 +0100 (MET)
* PR# 384 *
Subject: tck crash
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 22 Dec 1999 10:05:48 +0100 (MET)
* PR# 385 *
Subject: Apply dimnames
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 22 Dec 1999 11:22:27 +0000 (GMT)
--(+ patch proposal)
* PR# 386 *
Subject: as.matrix.data.frame() modifies content of character columns
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Wed, 22 Dec 1999 16:18:19 +0100
* PR# 387 *
Subject: different subscripting behaviour using  $<-  or  [<-  for data.frames
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:10:17 +0100
* PR# 388 *
Subject: data.frame(I(matrix)) ?
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:12:58 +0100
* PR# 389 *
Subject: coredump with plot(x,y,pch="+",cex=2.2)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 26 Dec 1999 18:14:10 -0500 (EST)
* PR# 390 *
Subject: axis for small ranges
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Tue, 28 Dec 1999 13:28:01 +0100
* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
* PR# 394 *
Subject: formatC (bug and fix)
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Tue, 4 Jan 2000 10:31:53 +0100
* PR# 398 *
Subject: a +1 shift overlaying lines/points on a boxplot
From: acuster@nature.berkeley.edu
Date: Tue, 11 Jan 2000 02:53:56 +0100 (MET)
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
* PR# 401 *
Subject: bug in setting length of a list
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 20 Jan 2000 12:55:15 -0600
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Sat Jan 22 10:24:51 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Sat, 22 Jan 2000 10:24:51 +0000
Subject: tabulate
References: <000301bf5d1f$005b3550$a9021aac@joelschlaegel>
Message-ID: <38898573.3BF7945A@Durham.ac.uk>

Dear R-Developers,

Would it be possible / is it desirable to alter tabulate 
so that the lower boundary
can be set in addition to the upper boundary? eg,

tabulate(bin, low=min(1,bin), nbin=max(1,bin))

would silently ignore elements outside the range low..nbin

It is easy to get around this at present, of course,
but seems natural to have a more flexible function. 
[or should I be using another function?]

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sun Jan 23 00:26:31 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sun, 23 Jan 2000 10:26:31 +1000
Subject: tabulate
In-Reply-To: Your message of "Sat, 22 Jan 2000 10:24:51 GMT."
 <38898573.3BF7945A@Durham.ac.uk>
Message-ID: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>

> Dear R-Developers,
> 
> Would it be possible / is it desirable to alter tabulate 
> so that the lower boundary
> can be set in addition to the upper boundary? eg,
> 
> tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> 
> would silently ignore elements outside the range low..nbin
> 
> It is easy to get around this at present, of course,
> but seems natural to have a more flexible function. 
> [or should I be using another function?]

I would oppose it on the grounds that tabulate() is a low-level
function and making a change like this is likely to slow it down
(if marginally) and to hinder porting software from R to S, which
I regard as an important consideration, if not an over-riding one.

table() should be the usual function for everyday use (and using
this makes the change to tabulate() unnecessary), but on R the
difference in speed between table() and tabulate() can be
dramatic.  I would suggest improving the efficiency of table()
should be a fairly high priority.

Bill.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jan 23 12:15:38 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 23 Jan 2000 12:15:38 +0000 (GMT)
Subject: R header files
Message-ID: <Pine.GSO.4.05.10001231150300.17770-100000@auk.stats>

The R header files have been reorganised, and for the first time documented
(in the Writing R Extensions manual).

The recommended header file for user code is R.h. S.h still exists, but
includes rather less, plus some S-compatibility defines.

This should be included before Rdefines.h (but for now this is worked
around)

Rdefines.h includes Rinternals.h.

If you need any of the auxilliary header files

    Applic.h Arith.h Complex.h Error.h Linpack.h Mathlib.h Memory.h
    PrtUtil.h Random.h Utils.h f2c.h

they are now in R_HOME/include/R_ext.  Currently this is searched, but it
will not be come 1.0.  Of these Arith.h Complex.h Error.h Memory.h Random.h
Utils.h are included by R.h. [The rationale here is to remove the chance
of name clashes, so you will only get the R versions if you ask for the 
directory specifically.]

Blas.h has gone (its contents are included in both Linpack.h and Applic.h)
and Errormsg.h is for internal use only.  Fortran.h is no longer installed
(was anyone using it, and if so for what?)

Would package writers who have C code please try out R-devel, and

   *   If you use Rdefines.h or Rinternals.h consider including R.h.
   *   If you use any of Applic.h Linpack.h Mathlib.h f2c.h add R_ext.
   *   If you use any of Arith.h Complex.h Error.h Memory.h Random.h
       Utils.h  remove them and include R.h.

Looking over the packages I have to hand:

foreign/src/minitab needs to declare R.h
tree and tseries need to declare R.h and remove some headers.
cclust needs "R_ext/f2c.h"


Please let me know of any problems. This might seem a nuisance now, but
does allow us to document a stable interface and so avoid future problems.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 23 12:22:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 2000 13:22:11 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Sun, 23 Jan 2000 10:26:31 +1000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.

Would you happen to have a simple example showing the inefficiency? I
just had a glimpse at the code and it would seem that there are some
extraneous coercions from integer to double precision and back, which
could be fairly easily removed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From D.A.Wooff@Durham.ac.uk  Mon Jan 24 09:59:20 2000
From: D.A.Wooff@Durham.ac.uk (David Wooff)
Date: Mon, 24 Jan 2000 09:59:20 +0000
Subject: tabulate
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <388C2278.EF4119E1@Durham.ac.uk>

Bill Venables wrote:
> 
> > Dear R-Developers,
> >
> > Would it be possible / is it desirable to alter tabulate
> > so that the lower boundary
> > can be set in addition to the upper boundary? eg,
> >
> > tabulate(bin, low=min(1,bin), nbin=max(1,bin))
> >
> > would silently ignore elements outside the range low..nbin
> >
> > It is easy to get around this at present, of course,
> > but seems natural to have a more flexible function.
> > [or should I be using another function?]
> 
> I would oppose it on the grounds that tabulate() is a low-level
> function and making a change like this is likely to slow it down
> (if marginally) and to hinder porting software from R to S, which
> I regard as an important consideration, if not an over-riding one.
> 
> table() should be the usual function for everyday use (and using
> this makes the change to tabulate() unnecessary), but on R the
> difference in speed between table() and tabulate() can be
> dramatic.  I would suggest improving the efficiency of table()
> should be a fairly high priority.
> 


As far as I know, tabulate appears to have the advantage [for some of my 
tasks] of not excluding bins with zero counts. Otherwise, I would use
table.

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 10:22:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jan 2000 11:22:55 +0100
Subject: tabulate
In-Reply-To: David Wooff's message of "Mon, 24 Jan 2000 09:59:20 +0000"
References: <200001230026.LAA16510@snowy.nsw.cmis.CSIRO.AU> <388C2278.EF4119E1@Durham.ac.uk>
Message-ID: <x2u2k3kbuo.fsf@blueberry.kubism.ku.dk>

David Wooff <D.A.Wooff@Durham.ac.uk> writes:

> As far as I know, tabulate appears to have the advantage [for some of my 
> tasks] of not excluding bins with zero counts. Otherwise, I would use
> table.

Yes. There are ways around it though, and for multiway tables you'll
need them anyway:

> x<-rpois(20,10)
> x
 [1] 10 13  9  9 12  9 15 12 11  7 10 13 10  8  8 12  7 11  5  6
> table(x)
x
 5  6  7  8  9 10 11 12 13 15 
 1  1  2  2  3  3  2  3  2  1 

> tabulate(x)
 [1] 0 0 0 0 1 1 2 2 3 3 2 3 2 0 1
> table(factor(x,levels=0:max(x)))

 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 
 0  0  0  0  0  1  1  2  2  3  3  2  3  2  0  1 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Mon Jan 24 22:46:06 2000
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Tue, 25 Jan 2000 08:46:06 +1000
Subject: tabulate
In-Reply-To: Your message of "23 Jan 2000 13:22:11 +0100."
 <x2ln5hq8p8.fsf@blueberry.kubism.ku.dk>
Message-ID: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > table() should be the usual function for everyday use (and using
> > this makes the change to tabulate() unnecessary), but on R the
> > difference in speed between table() and tabulate() can be
> > dramatic.  I would suggest improving the efficiency of table()
> > should be a fairly high priority.
> 
> Would you happen to have a simple example showing the inefficiency? I
> just had a glimpse at the code and it would seem that there are some
> extraneous coercions from integer to double precision and back, which
> could be fairly easily removed.

OK Peter.  This is the first one I cooked up:

Version 0.90.1  (December 15, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> m <- rpois(100000, 1)
> tabulate(m)
[1] 36891 18399  6064  1519   309    50     4     1
> table(m)
m
    0     1     2     3     4     5     6     7     8 
36763 36891 18399  6064  1519   309    50     4     1 
> system.time(tabulate(m))
[1] 0.11 0.00 0.00 0.00 0.00
> system.time(table(m))
[1] 2.90 0.16 4.00 0.00 0.00
> version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    0                   
minor    90.1                
year     1999                
month    December            
day      15                  
language R                   
> 

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Qld, 4163          Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au     
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 24 23:24:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 00:24:22 +0100
Subject: tabulate
In-Reply-To: Bill Venables's message of "Tue, 25 Jan 2000 08:46:06 +1000"
References: <200001242246.JAA13516@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>

Bill Venables <William.Venables@cmis.CSIRO.AU> writes:

> OK Peter.  This is the first one I cooked up:
...
> > m <- rpois(100000, 1)
> > tabulate(m)
> [1] 36891 18399  6064  1519   309    50     4     1
> > table(m)
> m
>     0     1     2     3     4     5     6     7     8 
> 36763 36891 18399  6064  1519   309    50     4     1 
> > system.time(tabulate(m))
> [1] 0.11 0.00 0.00 0.00 0.00
> > system.time(table(m))
> [1] 2.90 0.16 4.00 0.00 0.00
> > version

OK first, notice that I get:

> system.time(table(m))
[1] 3.38 0.00 3.38 0.00 0.00
> system.time(f<-factor(m))
[1] 2.12 0.00 2.12 0.00 0.00
> system.time(table(f))
[1] 1.19 0.00 1.20 0.00 0.00

so most of the time really goes into factor(). If one is careful about
the innards of table() one can shave the time for that to 

> system.time(tab2(f))
[1] 0.66 0.01 0.67 0.00 0.00

Rather interestingly, the non constant time part of table would seem
equivalent to 

> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.25 0.00 0.25 0.00 0.00
> system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
[1] 0.07 0.00 0.07 0.00 0.00

Notice the huge difference in the two executions, indicating that the
number of garbage collections involved probably play a major role.

On the whole it doesn't really seem to be worth it to obtimize this
very heavily, but if you have any obvious improvements for factor()...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jan 25 01:49:25 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 25 Jan 2000 14:49:25 +1300
Subject: lwd patches for "contour"
References: <Pine.LNX.4.10.10001171353550.13450-100000@bolker.zoo.ufl.edu>
Message-ID: <009901bf66d6$68fda0f0$175dd882@stat.auckland.ac.nz>

hi


>   I found it useful to have contour be able to do line widths ... hope
> that the guts haven't changed an enormous amount in the current
> development version ...  the patches are relatively trivial, mostly going
> by analogy with lty and col (although in my ignorance it took me a while
> to figure out what UNPROTECT(2) was and why it should be changed to
> UNPROTECT(3) ...  hope this is useful.


thanks very much !  i have been making a couple of changes to contour and i
have added your patch.  it should be in the next release (0.99)

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 25 07:04:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jan 2000 07:04:31 +0000 (GMT)
Subject: tabulate
In-Reply-To: <x2k8kzgijd.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10001250658080.987-100000@auk.stats>

On 25 Jan 2000, Peter Dalgaard BSA wrote:

> Bill Venables <William.Venables@cmis.CSIRO.AU> writes:
> 
> > OK Peter.  This is the first one I cooked up:
> ...
> > > m <- rpois(100000, 1)
> > > tabulate(m)
> > [1] 36891 18399  6064  1519   309    50     4     1
> > > table(m)
> > m
> >     0     1     2     3     4     5     6     7     8 
> > 36763 36891 18399  6064  1519   309    50     4     1 
> > > system.time(tabulate(m))
> > [1] 0.11 0.00 0.00 0.00 0.00
> > > system.time(table(m))
> > [1] 2.90 0.16 4.00 0.00 0.00
> > > version
> 
> OK first, notice that I get:
> 
> > system.time(table(m))
> [1] 3.38 0.00 3.38 0.00 0.00
> > system.time(f<-factor(m))
> [1] 2.12 0.00 2.12 0.00 0.00
> > system.time(table(f))
> [1] 1.19 0.00 1.20 0.00 0.00
> 
> so most of the time really goes into factor(). If one is careful about
> the innards of table() one can shave the time for that to 
> 
> > system.time(tab2(f))
> [1] 0.66 0.01 0.67 0.00 0.00
> 
> Rather interestingly, the non constant time part of table would seem
> equivalent to 
> 
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.25 0.00 0.25 0.00 0.00
> > system.time(as.integer(0)+as.integer(1)*(as.integer(f)-as.integer(1)))
> [1] 0.07 0.00 0.07 0.00 0.00
> 
> Notice the huge difference in the two executions, indicating that the
> number of garbage collections involved probably play a major role.
> 
> On the whole it doesn't really seem to be worth it to obtimize this
> very heavily, but if you have any obvious improvements for factor()...

Almost all the time is going on match(), which is 25x slower on my system
than S-PLUS 5.1 for this example.  I recall that we see this problem
in slow model.* manipulations too.

I don't know why match is slow: it does use hashing but may not be
optimized for matches into small sets.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Jan 25 07:59:13 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 25 Jan 2000 08:59:13 +0100 (MET)
Subject: core dump involving function closure (PR#402)
Message-ID: <200001250759.IAA03338@pubhealth.ku.dk>

A user has crashed R90.1 on MS Windows by succesive calls to two of my
formula/function interpretors in an order that I had not foreseen. I
have checked and this also occurs with Intel RH5.2. I have distilled
the problem down to its bare bones as the following set of
instructions:

func <- function(.mu){
	.ch1 <- deparse(.mu,width=500)[-1]
	.fn <- eval(parse(text=paste("function()",
		paste("eval(attr(.fn,\"model\"))"))))
	attr(.fn,"model") <- parse(text=.ch1)
	.fn}

mu <- function() eval(attr(.fn,"model"))
func(mu)()

debug does not help much. It looks like an infinite loop to me but
that is no excuse for a crash. I have modified my functions so that it
can now only occur in one very improbable case. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 25 09:42:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jan 2000 10:42:47 +0100
Subject: core dump involving function closure (PR#402)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 25 Jan 2000 08:59:13 +0100 (MET)"
References: <200001250759.IAA03338@pubhealth.ku.dk>
Message-ID: <x2ya9elc6g.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> A user has crashed R90.1 on MS Windows by succesive calls to two of my
> formula/function interpretors in an order that I had not foreseen. I
> have checked and this also occurs with Intel RH5.2. I have distilled
> the problem down to its bare bones as the following set of
> instructions:
> 
> func <- function(.mu){
> 	.ch1 <- deparse(.mu,width=500)[-1]
> 	.fn <- eval(parse(text=paste("function()",
> 		paste("eval(attr(.fn,\"model\"))"))))
> 	attr(.fn,"model") <- parse(text=.ch1)
> 	.fn}
> 
> mu <- function() eval(attr(.fn,"model"))
> func(mu)()
> 
> debug does not help much. It looks like an infinite loop to me but
> that is no excuse for a crash. I have modified my functions so that it
> can now only occur in one very improbable case. Jim

Ouch. This kind of crash happens when the C stack grows too big and
you can no longer access automatic variables created on it. That's
pretty darn hard to avoid unless we want to put in some kind of
maxdepth check in the evaluator (which I suppose we could do).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:31:42 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:31:42 -0800
Subject: patch for using GNU linker with sparc-sun-solaris2.*
Message-ID: <rfiwvox39fl.fsf@cathcart.sysc.pdx.edu>


diff -c -r1.159 configure.in
*** configure.in	2000/01/21 16:49:18	1.159
--- configure.in	2000/01/26 01:25:37
***************
*** 583,590 ****
--- 582,594 ----
      shlibldflags="-shared"
      ;;
    *solaris*)
+     shlibldflags="-G"
      if test "${GCC}" = yes; then
        cpicflags=-fPIC
+       if `$CC -print-prog-name=ld` -v | grep GNU > /dev/null; then
+         shlibldflags=-shared
+         dllflags=-Wl,--export-dynamic
+       fi
      else
        cpicflags=-KPIC
      fi
***************
*** 593,599 ****
      else
        fpicflags=-PIC
      fi
-     shlibldflags="-G"
      ;;
  esac
  
--- 597,602 ----
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 01:36:02 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 25 Jan 2000 17:36:02 -0800
Subject: passing through configure parameters during module installation?
Message-ID: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>


This patch makes it possible do module installs in this way:

$ R INSTALL --with-hdf5=/packages .

Is there a better/conventional way to do this kind of thing that I'm
not seeing?

diff -c -r1.29 INSTALL.in
*** src/scripts/INSTALL.in	2000/01/24 19:48:48	1.29
--- src/scripts/INSTALL.in	2000/01/26 01:26:11
***************
*** 107,112 ****
--- 107,116 ----
        lib=${2}; shift ;;
      --library=*)
        lib=`echo "${1}" | sed -e 's/[^=]*=//'` ;;
+     --with-*=*)
+       configure_args="$configure_args $1";;
+     --with-*)
+       configure_args="$configure_args $1=$2"; shift ;;
      *)
        if test -f "${1}"; then
          mkdir -p ${tmpdir}
***************
*** 181,187 ****
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure
    fi
  
    if test -d src; then
--- 185,191 ----
    echo "Installing package \`${pkg}' ..."
  
    if test -x ./configure ; then
!     ./configure $configure_args
    fi
  
    if test -d src; then
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 26 08:34:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 26 Jan 2000 09:34:39 +0100 (CET)
Subject: passing through configure parameters during module installation?
In-Reply-To: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu>
Message-ID: <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>

>>>>> Marcus G Daniels writes:

> This patch makes it possible do module installs in this way:

> $ R INSTALL --with-hdf5=/packages .

> Is there a better/conventional way to do this kind of thing that I'm
> not seeing?

The idea is very nice, but maybe not general enough.  Who knows, but
there may be someone who wants to pass an argument to configure that
does not start with `--with'.

I'd prefer something like

	--configure-args="..."

Would that be o.k. too?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 26 10:11:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 26 Jan 2000 11:11:18 +0100 (MET)
Subject: [R-d] E-mail to R-devel will have prefix, ok?
Message-ID: <14478.51270.541011.369015@gargle.gargle.HOWL>

A short "private" discussion revealed that several people desire to get a
prefix in the "subject:"s of R-devel mailings.

I'd propose to set "[R-d]" as I've done it (manually, this time!) above.
Unless I hear load protests, I'll set this.

your mailing list maintainer: Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:22:22 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:22:22 -0800
Subject: passing through configure parameters during module installation?
In-Reply-To: Kurt Hornik's message of "Wed, 26 Jan 2000 09:34:39 +0100 (CET)"
References: <rfisnzl398d.fsf@cathcart.sysc.pdx.edu> <14478.45471.675189.899020@aragorn.ci.tuwien.ac.at>
Message-ID: <rfi901c2475.fsf@cathcart.sysc.pdx.edu>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

KH> I'd prefer something like

KH> 	--configure-args="..."

KH> Would that be o.k. too?

The downside of this is that it could get verbose and quoting is more
complicated.  Also, it may pass through things that shouldn't be
allowed, anyway.  But at least --with-*, --enable-*/--disable-* make
sense.  But I just want the capability.  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Jan 26 16:24:05 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (jens.oehlschlaegel-akiyoshi@mdfactory.de)
Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261624.RAA23569@pubhealth.ku.dk>



I observed the following difference:

> ddd <- data.frame(a=1:3, b=1:3)

# assignment of 'X' silently ignored
> ddd[1,1] <- 'X'
> is.factor(ddd[[1]])
[1] FALSE
> ddd
  a b
1 1 1
2 2 2
3 3 3

# assignment of 'X' not ignored
> ddd[[1]][1] <- 'X'
> is.factor(ddd[[1]])
[1] TRUE
> ddd
  a b
1 X 1
2 2 2
3 3 3


Regards



> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlgel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 Mnchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 16:56:43 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 08:56:43 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
Message-ID: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>


..looks like these should be "cvs delete"d.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 26 17:09:39 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2000 11:09:39 -0600
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: mgd@swarm.org's message of "26 Jan 2000 08:56:43 -0800"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu>
Message-ID: <6r4sc0iwto.fsf@franz.stat.wisc.edu>

mgd@swarm.org (Marcus G. Daniels) writes:

> ..looks like these should be "cvs delete"d.

Deleted from where?  Are you talking about the rsync archive or the
tar files in the src directories on CRAN or ???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgd@swarm.org  Wed Jan 26 17:16:37 2000
From: mgd@swarm.org (Marcus G. Daniels)
Date: 26 Jan 2000 09:16:37 -0800
Subject: src/include/{Complex,MathLib,PrtUtil,Random}.h in CVS
In-Reply-To: Douglas Bates's message of "26 Jan 2000 11:09:39 -0600"
References: <rfiu2k0zs8k.fsf@cathcart.sysc.pdx.edu> <6r4sc0iwto.fsf@franz.stat.wisc.edu>
Message-ID: <rfioga8zrbe.fsf@cathcart.sysc.pdx.edu>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

MD> ..looks like these should be "cvs delete"d.

DB> Deleted from where?  Are you talking about the rsync archive or
DB> the tar files in the src directories on CRAN or ???

anoncvs

Brian Ripley reports that in the main repository it has been removed.
I guess the mirror is lagging by a few days.

toucan% cvs log Complex.h 
revision 1.4
date: 2000/01/22 20:10:00;  author: ripley;  state: dead;  lines: +0 -0
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 26 17:26:50 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 26 Jan 2000 17:26:50 +0000 (GMT)
Subject: data.frame[1,1]<- differs from data.frame[[1]][1]<- (PR#403)
Message-ID: <200001261726.RAA23501@toucan.stats.ox.ac.uk>


> From: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Date: Wed, 26 Jan 2000 17:24:05 +0100 (MET)
> 
> 
> I observed the following difference:
> 
> > ddd <- data.frame(a=1:3, b=1:3)
> 
> # assignment of 'X' silently ignored
> > ddd[1,1] <- 'X'
> > is.factor(ddd[[1]])
> [1] FALSE
> > ddd
>   a b
> 1 1 1
> 2 2 2
> 3 3 3

actually it assigns as.numeric(factor("X")), which is 1.

> # assignment of 'X' not ignored
> > ddd[[1]][1] <- 'X'
> > is.factor(ddd[[1]])
> [1] TRUE
> > ddd
>   a b
> 1 X 1
> 2 2 2
> 3 3 3
> 

Here is my solution: line 488 in dataframe.R, in "[<-.data.frame"

## careful, as.data.frame turns things into factors.
##    value <- as.data.frame(value)
    if(!is.list(value) && (missing(j) || !missing(i))) { # [i, ] or [i,j]
        value <- matrix(value, n, p)
        dimv <- c(n, p)
        value <- split(value, col(value))
    } else {
        value <- as.data.frame(value)
        dimv <- dim(value)
    }

It covers the same cases as the prototype, but is a kludge, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:33 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 27 Jan 2000 15:48:33 +0100 (MET)
Subject: mailx (PR#404)
Message-ID: <200001271448.PAA03882@pubhealth.ku.dk>


Is there a reason that the default option for a mailer program (at least
on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
I suspect many other Linux users don't either, and it's kind of disconcerting
to have bug.report() fail ...

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 14:48:11 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 09:48:11 -0500 (EST)
Subject: oops
Message-ID: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>


  I just sent a bug report about "mailx" being the default mailer, before
I looked at bug.report() carefully and saw that it checked
"/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
problem with this in a previous version.

  Would it be clearer to have .Options$mailer be a vector or list of
alternate mailers that were checked in turn, rather than having them
hard-wired into bug.report()?

 (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 14:55:10 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 15:55:10 +0100 (CET)
Subject: mailx (PR#404)
In-Reply-To: <200001271448.PAA03882@pubhealth.ku.dk>
References: <200001271448.PAA03882@pubhealth.ku.dk>
Message-ID: <14480.23630.954259.783819@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 15:48:33 +0100 (MET),
>>>>> bolker  (b) wrote:

b> Is there a reason that the default option for a mailer program (at least
b> on Linux) is .Options$mailer="mailx"?  I don't have mailx on my system,
b> I suspect many other Linux users don't either, and it's kind of disconcerting
b> to have bug.report() fail ...

mailx is a ``meta-name'' which currently searches for

	mailx
	Mail
	/usr/ucb/mail

in this order. The former two are available on my Debian Linux
machine. The reason is that plain mail does not allow all options we
need on some Unix systems, hence we can't include it in the list.

But of course the above list can be extended ... which program would
you suggest to use?

.f

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:01:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:01:23 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.24003.408377.962589@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 27 Jan 2000 09:48:11 -0500 (EST),
>>>>> Ben Bolker (BB) wrote:

BB>   I just sent a bug report about "mailx" being the default mailer, before
BB> I looked at bug.report() carefully and saw that it checked
BB> "/usr/ucb/mail", and "Mail" as well as "mailx".  I guess I had had the
BB> problem with this in a previous version.

BB>   Would it be clearer to have .Options$mailer be a vector or list of
BB> alternate mailers that were checked in turn, rather than having them
BB> hard-wired into bug.report()?

BB>  (e.g., .Options$mailer <- c("mailx","Mail","/usr/ucb/mail")

OK, my previous email was too fast :-)

hmm, the mailer option is more intended to be a ``concept of mailing''
rather than a program by itself (we just named all options as the
programs as this is the easiest things to remember) ... but gnudoit
doeas something conceptually different because it opens an emacs mail
buffer and not simply a temp file ... 

I don't like the idea of having the above too flexible because there
will definetely be people doing something like

	bug.report(mailer="netscape")

and complain that it is not working ...


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 27 15:25:16 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 27 Jan 2000 16:25:16 +0100 (CET)
Subject: oops
In-Reply-To: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.10.10001270943030.10015-100000@bolker.zoo.ufl.edu>
Message-ID: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>


``oops on my side'', I forgot to ask the crucial question: which
mailer is available on your system that could be used? again, "mail"
(without a path like in "/usr/ucb/mail" is not an option as that fails
on some other unixes.

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From setzer.woodrow@epa.gov  Thu Jan 27 15:37:08 2000
From: setzer.woodrow@epa.gov (setzer.woodrow@epa.gov)
Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)
Subject: error in dweibull (PR#405)
Message-ID: <200001271537.QAA04550@pubhealth.ku.dk>

Full_Name: R. Woodrow Setzer, Jr.
Version: 0.90.1
OS: linux - Redhat 6.1
Submission from: (NULL) (165.247.155.206)


dweibull(0,1,1) evaluates to 0; it should be 1.  
Note that dweibull(.Machine$double.eps) evaluates to 1.

> dweibull(.01,1,1)
[1] 0.9900498
> dweibull(.00001,1,1)
[1] 0.99999
> dweibull(.Machine$double.eps,1,1)
[1] 1
> dweibull(0,1,1)
[1] 0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Jan 27 16:12:36 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 27 Jan 2000 17:12:36 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271612.RAA04925@pubhealth.ku.dk>

Full_Name: Joerg Polzehl
Version: 0.90.1
OS: Digital UNIX V4.0F
Submission from: (NULL) (192.124.249.126)


The dimension attribute in function density is not handled correctly
(or at least differently from S) :

z_rnorm(1000)
dim(z)_c(10,10,10)
plot(density(z),type="l")

# no problem

plot(density(z[1,,]),type="l")

# Error in if (!(lo <- min(hi, IQR(x)/1.34))) (lo <- hi)
# || (lo <- abs(x[1])) ||  : missing value where logical
# needed
# In addition: Warning message: 
# NaNs produced in: sqrt(var(x, na.rm = na.rm)) 

######## x probably is still a matrix in the call of var()  ########

plot(density(as.vector(z[1,,])),type="l")

# again no problem


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jan 27 16:12:45 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 27 Jan 2000 11:12:45 -0500 (EST)
Subject: oops
In-Reply-To: <14480.25436.120625.943480@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.10.10001271112110.10321-100000@bolker.zoo.ufl.edu>


  My oops is that things actually work here, I just thought they didn't
(since a previous version of R didn't have the alternative options, just
tried "mailx" and barfed when it wasn't there).
 
On Thu, 27 Jan 2000, Friedrich Leisch wrote:

> 
> ``oops on my side'', I forgot to ask the crucial question: which
> mailer is available on your system that could be used? again, "mail"
> (without a path like in "/usr/ucb/mail" is not an option as that fails
> on some other unixes.
> 
> .f
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:10:23 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:10:23 +0000 (GMT)
Subject: error in dweibull (PR#405)
Message-ID: <200001271710.RAA09444@toucan.stats.ox.ac.uk>

> From: setzer.woodrow@epa.gov
> Date: Thu, 27 Jan 2000 16:37:08 +0100 (MET)

> dweibull(0,1,1) evaluates to 0; it should be 1.  

Is that not a matter of opinion?  Note the help page says

     The Weibull distribution with `shape' parameter a and
     `scale' parameter b has density given by

             f(x) = (a/b) (x/b)^(a-1) exp(- (x/b)^a)

     for x > 0.


> Note that dweibull(.Machine$double.eps) evaluates to 1.
> 
> > dweibull(.01,1,1)
> [1] 0.9900498
> > dweibull(.00001,1,1)
> [1] 0.99999
> > dweibull(.Machine$double.eps,1,1)
> [1] 1
> > dweibull(0,1,1)
> [1] 0

I would say the Weibull density was defined to be non-zero on (0, Inf),
and S-PLUS agrees with me, as does the help page.  I don't see a bug in
the results you present which are consistent with the documentation.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 17:12:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 18:12:21 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 27 Jan 2000 17:12:36 +0100 (MET)"
References: <200001271612.RAA04925@pubhealth.ku.dk>
Message-ID: <x27lgvfngq.fsf@blueberry.kubism.ku.dk>

polzehl@wias-berlin.de writes:

> ######## x probably is still a matrix in the call of var()  ########

Exactly. Do we fix sd() or density() or both?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 27 17:21:29 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 27 Jan 2000 17:21:29 +0000 (GMT)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271721.RAA09498@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 27 Jan 2000 18:12:21 +0100
> 
> polzehl@wias-berlin.de writes:
> 
> > ######## x probably is still a matrix in the call of var()  ########
> 
> Exactly. Do we fix sd() or density() or both?

Both. density needs an x <- as.vector(x), and I think sd needs 
to return the  standard deviation*s* if given a matrix or data frame.
Its current behaviour is wrong.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Jan 27 17:47:31 2000
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 27 Jan 2000 18:47:31 +0100 (MET)
Subject: NA not printed after table (PR#407)
Message-ID: <200001271747.SAA05694@pubhealth.ku.dk>


In the following example, the NA is not printed.

x <- c(1,2,3,2,1)
y <- table(x)
z <- list(a=y,b=NA)
z

yields

$a
x
1 2 3 
2 2 1 

$b
[1]  
   ^^^^
no NA here!

or

z <- list(a=y,d=2,b=c(1,NA,2))

R> z
$a
x
1 2 3 
2 2 1 

$d
[1] 2

$b
[1] 1   2


This seems to happen only, if an object of class "table" precedes an
NA in a list.


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:09:29 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 27 Jan 2000 19:09:29 +0100 (MET)
Subject: handling of dimension-attribute in density (PR#406)
Message-ID: <200001271809.TAA05805@pubhealth.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 27 18:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 2000 19:10:28 +0100
Subject: handling of dimension-attribute in density (PR#406)
In-Reply-To: Prof Brian Ripley's message of "Thu, 27 Jan 2000 17:21:29 +0000 (GMT)"
References: <200001271721.RAA09498@toucan.stats.ox.ac.uk>
Message-ID: <x21z73fkrv.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Both. density needs an x <- as.vector(x), and I think sd needs 
> to return the  standard deviation*s* if given a matrix or data frame.
                                   !!
You mean column-wise?

> Its current behaviour is wrong.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@gcal.ac.uk  Fri Jan 28 10:17:37 2000
From: wsimpson@gcal.ac.uk (wsimpson@gcal.ac.uk)
Date: Fri, 28 Jan 2000 11:17:37 +0100 (MET)
Subject: convolution bug (PR#408)
Message-ID: <200001281017.LAA11335@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

