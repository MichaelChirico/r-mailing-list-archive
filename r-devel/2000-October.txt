From sws96srb@met.rdg.ac.uk  Mon Oct  2 13:24:39 2000
From: sws96srb@met.rdg.ac.uk (sws96srb@met.rdg.ac.uk)
Date: Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021224.OAA16613@pubhealth.ku.dk>

Full_Name: Sheila Bryant
Version: 1.1.1
OS: Solaris 2.6
Submission from: (NULL) (134.225.16.2)


During the 'make' process I get the following:

String found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 781, near
"("</TABLE>\n""
        (Missing operator before "</TABLE>\n"?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1234, near "
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1249, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1264, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1292, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1335, near "
txt_header"
        (Missing operator before txt_header?)

In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
5.002, 
gcc 2.95.2 Solaris 2.6, teTeX 0.4.

I've done a make html as well, to be on the safe side! Got the same dose of
warnings.
R istself starts up OK, but help.start() just gives me the information about
using 
existing browsers, but I never get any pages come up. I tried exiting netscape &

tried again, but no new browser was forthcoming. I've tried the FAQ and bug
reports, 
but maybe haven't asked the right question there!

I've probably missed something obvious, but just can't see it



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  2 13:58:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2000 14:58:58 +0200
Subject: [Rd] several documentation problems (PR#675)
In-Reply-To: sws96srb@met.rdg.ac.uk's message of "Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)"
References: <200010021224.OAA16613@pubhealth.ku.dk>
Message-ID: <x2em1zo0vh.fsf@blueberry.kubism.ku.dk>

sws96srb@met.rdg.ac.uk writes:

> In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> 5.002, 
> gcc 2.95.2 Solaris 2.6, teTeX 0.4.

Your perl version seems to be a bit old. Although we formally only
require Perl 5, 5.002 may have gone untested. The problems definitely
look Perl related.

There seems to be two types of problem:

The first one is

 780              print $htmlout
 781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
  
and the rest are like

1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
  
I the 1st case, we have nearly the same construction without the line
break in line 784, and that seems to work. You might try joining up
the lines.

In the other case, perhaps add parentheses around  mywrap..."\n"

Otherwise we'll need to bring in the real Perl experts. 

[Even if it would be easier for you to upgrade Perl, I think it would
be nice to get to the root of this problem.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 14:04:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 15:04:41 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021304.PAA17572@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Oct 2000 14:58:58 +0200
> 
> sws96srb@met.rdg.ac.uk writes:
> 
> > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > 5.002, 
> > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> 
> Your perl version seems to be a bit old. Although we formally only
> require Perl 5, 5.002 may have gone untested. The problems definitely
> look Perl related.

As far as I recall 5.002 was buggy and we rapidly went to 5.004.
(Something similar happened in RedHat Linux 5.2's Perl.)   We would
recommend upgrading to Perl 5.6.0.

> There seems to be two types of problem:
> 
> The first one is
> 
>  780              print $htmlout
>  781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
>   
> and the rest are like
> 
> 1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
>   
> I the 1st case, we have nearly the same construction without the line
> break in line 784, and that seems to work. You might try joining up
> the lines.
> 
> In the other case, perhaps add parentheses around  mywrap..."\n"

Another guess is that it might require &mywrap there.

> Otherwise we'll need to bring in the real Perl experts. 

I'm pretty sure that what we have is valid Perl, and that some versions
of Perl have choked on valid Perl.  Upgrading is the best answer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Oct  2 14:05:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 2 Oct 2000 15:05:12 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010021305.PAA17599@pubhealth.ku.dk>

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:

    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

Thank you for the bug report.
This bug is ``new'' (a bit more than a year!) and was introduced when
someone fixed another problem in pretty.c 
by adding "1e-5" fuzz a bit too generously
hmm,....... 
I'll have a look.

    david> Version: .... R 1.1.1 ...


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct  2 16:27:37 2000
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 2 Oct 2000 17:27:37 +0200 (MET DST)
Subject: [Rd] documentation error for deriv; MASS scripts ch8; (PR#676)
Message-ID: <200010021527.RAA19488@pubhealth.ku.dk>

Hola!

There is a bug in the documentation file for deriv, which says that
the third argument is unimplemented. It seems only to be implemented
differently than in s-plus. I show whith the MASS R-script
ch8 file as example:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                function(b0, b1, th, x) {})
> expn1
function(b0, b1, th, x) {}

which cannnot be used whith nls! But changing to:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                c("b0", "b1", "th", "x") )
> expn1
function (b0, b1, th, x) 
{
    .expr3 <- 2^(-x/th)
    .value <- b0 + b1 * .expr3
    .grad <- array(0, c(length(.value), 3), list(NULL, c("b0", 
        "b1", "th")))
    .grad[, "b0"] <- 1
    .grad[, "b1"] <- .expr3
    .grad[, "th"] <- b1 * (.expr3 * (log(2) * (x/th^2)))
    attr(.value, "gradient") <- .grad
    .value
}

gives the desired result. 

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Oct  2 16:52:47 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021552.RAA19800@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 1.1.1
OS: i86pc Solaris 2.7
Submission from: (NULL) (143.205.61.82)


jmp_buf type undeclared, may be related to the installed version of libjpeg
(this is v6b), compiler is gcc/g77 2.95.2:

root@pc05-stat[X11]# make
creating src/unix/X11/Makefile
making rbitmap.d from rbitmap.c
make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
gcc -I. -I../../../src/include -I../../../src/include
-I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
-DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known
make[1]: *** [rbitmap.o] Error 1
make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
make: *** [R] Error 2


Solution:
*************************************************
--- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
+++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
@@ -231,6 +231,9 @@
 #ifdef HAVE_JPEG
 
 #include <jpeglib.h>
+#if __sun__ & __i386
+#include <setjmp.h>
+#endif
 
 /* Here's the extended error handler struct */> version
         _                 
************************************************

with this patch R compiles and passes "make test", the 
full version is:

> version
         _                 
platform i386-pc-solaris2.7
arch     i386              
os       solaris2.7        
system   i386, solaris2.7  
status                     
major    1                 
minor    1.1               
year     2000              
month    August            
day      15                
language R                 


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 16:59:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 17:59:35 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021559.RAA19914@pubhealth.ku.dk>

It's related to having jpeg and not png, and it is already fixed in the
R-devel tree. An unconditional <setjmp.h> is fine.


> From: albrecht.gebhardt@uni-klu.ac.at
> Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
> 
> Full_Name: Albrecht Gebhardt
> Version: 1.1.1
> OS: i86pc Solaris 2.7
> Submission from: (NULL) (143.205.61.82)
> 
> 
> jmp_buf type undeclared, may be related to the installed version of libjpeg
> (this is v6b), compiler is gcc/g77 2.95.2:
> 
> root@pc05-stat[X11]# make
> creating src/unix/X11/Makefile
> making rbitmap.d from rbitmap.c
> make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
> gcc -I. -I../../../src/include -I../../../src/include
> -I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
> -DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> make[1]: *** [rbitmap.o] Error 1
> make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
> make: *** [R] Error 2
> 
> 
> Solution:
> *************************************************
> --- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
> +++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
> @@ -231,6 +231,9 @@
>  #ifdef HAVE_JPEG
>  
>  #include <jpeglib.h>
> +#if __sun__ & __i386
> +#include <setjmp.h>
> +#endif
> 

R-devel has

#ifdef HAVE_JPEG

#include <jpeglib.h>
#include <setjmp.h>

....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Oct  2 18:58:56 2000
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 2 Oct 2000 19:58:56 +0200 (MET DST)
Subject: [Rd] typo in documentation for read.table (PR#678)
Message-ID: <200010021758.TAA20496@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.1.0
OS: Linux 2.2.14 i686
Submission from: (NULL) (15.255.176.47)



In the documentation for read.table, the description of the argument
`strip.white'
uses `skip.white' instead.

> ?read.table
...
Usage:

     read.table(file, header = FALSE, sep = "", quote = "\"'", dec = ".",
                row.names, col.names, as.is = FALSE, na.strings = "NA",
                skip = 0, check.names = TRUE, strip.white = FALSE)
                                              ^^^^^^^^^^^
...
skip.white: logical. Used only when `sep' has been specified, and
^^^^^^^^^^allows the stripping of leading and trailing white space from
          `character' fields (`numeric' fields are always stripped). 
          See `scan' for further details, remembering that the columns
          may include the row names.
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] pretty not covering the range properly (PR#673)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 11:40:21 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 12:40:21 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010031040.MAA26597@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:

      MM> Ok, I've fixed pretty() for the development version such that 
      MM>    p <- pretty(x)
      MM>    all(p[1] <= x & x <= p[length(p)])
      MM> should be guaranteed (again).

    PD> Gulp. I'm pretty(!) sure there was a reason for changing it in the
    PD> other direction...
yes, the change last year (between 0.64 and 0.65) *was* for a good reason,
and I have not reverted that!
    PD> [I have a vague recollection of
    PD> pretty(pretty(x)) != pretty(x) or something like that]

    PD> Are we quite sure that it is not the caller that needs to be a
    PD> little more lenient in the bounds checking?

I've thought of that, too.
But no, I think we want to guarantuee the above 
    {which I had wrong in the last e-mail, it's "[length(p)]" !}
which we have had always in the documentation and which *is* S compatible.

    PD> OTOH, it's in code you wrote yourself...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  3 14:26:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 3 Oct 2000 15:26:35 +0200
Subject: [Rd] plot.table() ?
Message-ID: <14809.56971.828581.703850@gargle.gargle.HOWL>

I tend to use  table() quite a bit for quick "diagnostics", summary, etc.
I have wished for a more automatic way of plotting these.

One possibility would be something like the following function;
The question is if (something like) the following is worth providing (and then
maintaining...)  at all :

plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
                       xlab = NULL, ylab = deparse(substitute(x)),
                       frame.plot = is.num,
                       ...)
{
    rnk <- length(d <- dim(x))
    if(rnk == 0)
	stop("invalid table `x'")
    if(rnk == 1) {
        dn <- dimnames(x)
        nx <- dn[[1]]
        if(is.null(xlab)) xlab <- names(dn)
        if(is.null(xlab)) xlab <- ""
        ow <- options(warn = -1)
        is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
        x0 <- if(is.num) xx else seq(x)
	plot(x0, unclass(x), type = type, 
             ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
             lwd = lwd, ..., xaxt = "n")
        axis(1, at = x0, labels = nx)
    } else
	mosaicplot(x, ...)
}

------

Note that I have `optimized' it mainly for 1-D tables, but it also a way to
make the mosaicplots more known..

Also,
     plot(table(ff))  
is quite similar to 
     plot(ff)
when `ff' is a factor (the latter using barplot).

However,    plot(table(ff, f2))  is different and sometimes more
useful than       plot(ff, f2)
compare
	data(state)
	par(mfcol=c(1,2))
	plot(      state.division, state.region)#-> plot.factor
	plot(table(state.division, state.region))#-> plot.table


Also, try things

        plot(table(state.division))

	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sws96srb@met.reading.ac.uk  Tue Oct  3 14:44:55 2000
From: sws96srb@met.reading.ac.uk (sws96srb@met.reading.ac.uk)
Date: Tue, 3 Oct 2000 15:44:55 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010031344.PAA00416@pubhealth.ku.dk>



Prof Brian Ripley wrote:
> 
> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 02 Oct 2000 14:58:58 +0200
> >
> > sws96srb@met.rdg.ac.uk writes:
> >
> > > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > > 5.002,
> > > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> >
> > Your perl version seems to be a bit old. Although we formally only
> > require Perl 5, 5.002 may have gone untested. The problems definitely
> > look Perl related.
> 
> As far as I recall 5.002 was buggy and we rapidly went to 5.004.
> (Something similar happened in RedHat Linux 5.2's Perl.)   We would
> recommend upgrading to Perl 5.6.0.
> 

<snip>

Many thanks to everyone for the help. I've upgraded to Perl 5.6.0 and
all makes now flow through with no errors. 

-- 

Sheila


-----------------------------------------------------------------------------

Dr. Sheila Bryant                           Dept. of Meteorology,
Email: S.R.Bryant@reading.ac.uk             University of Reading,
Phone: 0118 931 6395                        Earley Gate, Whiteknights,
                                            PO Box 243
                                            Reading. RG6 6BB.   UK

-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:17:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:17:07 +0200 (CEST)
Subject: [Rd] plot.table() ?
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
References: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <14809.60003.615381.377841@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> I tend to use table() quite a bit for quick "diagnostics", summary,
> etc.  I have wished for a more automatic way of plotting these.

> One possibility would be something like the following function; The
> question is if (something like) the following is worth providing (and
> then maintaining...)  at all :

> plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
>                        xlab = NULL, ylab = deparse(substitute(x)),
>                        frame.plot = is.num,
>                        ...)
> {
>     rnk <- length(d <- dim(x))
>     if(rnk == 0)
> 	stop("invalid table `x'")
>     if(rnk == 1) {
>         dn <- dimnames(x)
>         nx <- dn[[1]]
>         if(is.null(xlab)) xlab <- names(dn)
>         if(is.null(xlab)) xlab <- ""
>         ow <- options(warn = -1)
>         is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
>         x0 <- if(is.num) xx else seq(x)
> 	plot(x0, unclass(x), type = type, 
>              ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
>              lwd = lwd, ..., xaxt = "n")
>         axis(1, at = x0, labels = nx)
>     } else
> 	mosaicplot(x, ...)
> }

> ------

> Note that I have `optimized' it mainly for 1-D tables, but it also a
> way to make the mosaicplots more known.

> Also,
>      plot(table(ff))  
> is quite similar to 
>      plot(ff)
> when `ff' is a factor (the latter using barplot).

> However,    plot(table(ff, f2))  is different and sometimes more
> useful than       plot(ff, f2)
> compare
> 	data(state)
> 	par(mfcol=c(1,2))
> 	plot(      state.division, state.region)#-> plot.factor
> 	plot(table(state.division, state.region))#-> plot.table


> Also, try things

>         plot(table(state.division))

> 	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)

In general I like the idea of having a plot method for contingency
tables.

One basic question is whether we feel comfortable enough with the
"table" class that was gradually introduced.  But in any case, xtabs()
assigns class c("xtabs", "table") which should be good enough.

I am not sure how much effort we want to put into this, but here are
some remarks.  I think the Poiss.tab example looks nice, but I am not
happy with the output of plot(table(state.division)) [not that I am
happy with calling barplot() directly in this case].  I would prefer
having ALL names as labels (perhaps rotated 45 degrees).  I am also not
sure about the bars in plot.table(), they look a bit tiny, no?

Re Mosaic plots, very nice idea, but e.g. the result of
  plot(table(state.division, state.region))
looks terrible.  I think this could be very confusing to plains users.
Hmm, how could we improve this?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:31:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:31:21 +0200 (CEST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
References: <200009281712.TAA20426@pubhealth.ku.dk>
 <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
Message-ID: <14809.60857.12878.62820@mithrandir.hornik.net>

>>>>> ben  writes:

> On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:
>> It's a feature, on the TODO list to be added one day.

>   A quick hack (if anyone wants to do it) is to change line 975 from

> /*	Rprintf("in lbfgsb - %s\n", task);*/

>  to

> 	if (trace) Rprintf("in lbfgsb - %s\n", task);

> however, the debugging output that you get is pretty ugly.

>> >   Also, a general question: are both nlm() and optim() going to
>> > be around indefinitely?  Should I be using one or the other?

>   Well, my question was more whether one was preferred or not ... I did
> see a comment in some NEWS file at some point that a built-in function had
> been switched to optim() and so should converge more often.

>   At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
> measure) with -ffloat-store.  The negative parameter jumps went away,
> but I can still provoke optim() to hang with the right (not uncommon)
> choice of bootstrap values.  Adding what I thought were reasonable
> parscale values makes my code hang in different places [i.e. the
> particular values that I give below are no longer a problem], but
> doesn't stop it hanging or even reduce the frequency with which it
> hangs.  Perhaps now that I have ffloat-store enabled the values below
> will hang under Solaris as well.

>   Should ffloat-store be enabled in general for compilation on Linux
> boxes?

I am not sure it should.  We try to be as defensive about compiler flags
as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
I'd prefer modifying the code if possible ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:04:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:04:07 +0200
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 16:31:21 +0200 (CEST)"
References: <200009281712.TAA20426@pubhealth.ku.dk> <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu> <14809.60857.12878.62820@mithrandir.hornik.net>
Message-ID: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >   Should ffloat-store be enabled in general for compilation on Linux
> > boxes?
> 
> I am not sure it should.  We try to be as defensive about compiler flags
> as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> I'd prefer modifying the code if possible ...

It definitely shouldn't... Basically what it does is to defeat the
"guard digits" that are used in Intel FPUs (internally using 10 bytes
rather than 8 for doubles). While there are some rare cases where this
messes up the "endgame" of numerical algorithms, it increases overall
numerical accuracy. Also, storing all floating-point values off-chip
causes a substantial decrease in performance.

In the case(-s ?) I've seen, a routine was trying too hard to squeeze
the last bit of precision out of a termination criterion.

Optimization is another likely culprit for this kind of trouble, so
perhaps one should try turning it off for this code?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Tue Oct  3 16:29:09 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (Emmanuel Charpentier)
Date: Tue, 03 Oct 2000 17:29:09 +0200
Subject: [Rd] Bug in RODBC ?
Message-ID: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>

Dear lists,

It seems that RODBC has a problem : when reading through ODBC from an Access
table with missing values, *character* missing values are (correctly) reported
as NA factor values. *Numeric* values, however, retain the value of the same
variable in the previous row.

My setup : R 1.1.1 under Win95, RODBC as compiled with the R Win CRAN
distribution, MS Access 97.

I just discovered this, and had no time to explore. I will try to debug this,
but my knowledge of the ODBC internals and gizzards being almost non-existent,
any clue from you would help me tremendously.

Is there a formal mechanism for bug reports ? If so, should I submit one ?

Sincerely yours,

					Emmanuel Charpentier
--
Emmanuel Charpentier			Tel :		+33-01 40 27 35 98
Secrétariat scientifique du CEDIT	Fax :		+33-01 40 27 55 65
Direction de la Politique Médicale // Assistance Publique - Hôpitaux de Paris
3, Avenue Victoria // F-75004 Paris /// France
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 16:40:47 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 17:40:47 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200009292118.XAA02892@pubhealth.ku.dk>
References: <200009292118.XAA02892@pubhealth.ku.dk>
Message-ID: <14809.65023.834763.292861@mithrandir.hornik.net>

>>>>> cberry  writes:

> examples:

> 1) Fails to report that components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component zap: Mean relative  difference: 1


> 2) Incorrectly asserts all are equal when components 2 and 3 differ

>> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
> [1] TRUE

> 3) Removing named component reveals differences:

>> all.equal(list(1,2,3,1),list(1,3,4,1))
> [1] "Component 2: Mean relative  difference: 0.5"      
> [2] "Component 3: Mean relative  difference: 0.3333333"

> 4) Unequal first component reveals differences

>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
> [1] "Component : Mean relative  difference: 0.5"
> [2] "Component : Mean relative  difference: 0.5"
> [3] "Component : Mean relative  difference: 0.5"
>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"
>> 

> 5) Second component IS equal, but:

>> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"

> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = June
>  day = 15
>  language = R

> Search Path:
>  .GlobalEnv, Autoloads, package:base

> Chuck Berry

I think the above happens because all.equal.list() is broken.  The fix
is not entirely clear, because I am not sure what we really want.

Anyway, in all of the above examples we compare lists which are named in
the sense that names() is not NULL, but not ``fully'' named in the sense
that any(nchar(names()) == NULL) is TRUE.  In this case, iseq gets set
to nt[c.in.t] which in the above example gives

Browse[1]> nt[c.in.t]
[1] ""    ""    ""    "zap"

Hence in the for(i in iseq) loop we do three comparisons of the first
component, due to subscripting with "".

The obvious idea is that we must use positional indices where we do not
have named ones.

Now for the problem I see in the current logic.  We currently do

   if both lists are named (at least partially) then ... else fi

Maybe we should change this as follows: if either of the two lists has
names, work though the named components.  Warn about the ones not
present in both.  Compare the ones present in both.  Then get rid of all
named components and compare what is left in positional order.

As I said, I am not sure that this is really what we want.

Comments?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:46:35 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:46:35 +0200
Subject: [Rd] Bug in RODBC ?
In-Reply-To: Emmanuel Charpentier's message of "Tue, 03 Oct 2000 17:29:09 +0200"
References: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>
Message-ID: <x24s2uudus.fsf@blueberry.kubism.ku.dk>

Emmanuel Charpentier <emmanuel.charpentier@sap.ap-hop-paris.fr> writes:

> Is there a formal mechanism for bug reports ? If so, should I submit one ?

Well, there's a slot for "add-ons" in the R bug repository, and that's
where we put reports that pertain to packages. However, the core group
does not take responsibility for fixing packages, and there's no way
of ensuring that package-writers even scan the repository for "their"
bugs. So a safer way would seem to be to contact the author directly.
That'll be Michael Lapsley <mlapsley@sthelier.sghms.ac.uk> according
to the CRAN entry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  3 16:45:37 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10010031125570.30418-100000@bolker.zoo.ufl.edu>


  Different day, more or less the same story -- turning off optimization
(and leaving out -ffloat-store) leads to hanging in different places, but
not any fewer hanging cases out of 1000 bootstrap samples.  I could try
the no optimization/-ffloat-store combination, but I strongly suspect the
results would be the same.  (As I mentioned before, I also get hanging in
different places with and without adding parscale to the optim() control
list.)
  These aren't pathological samples, as far as I can tell.
  I'm afraid that fussing with compiler options isn't going to do it ...
given enough time I might be able to dig into the lbfgsb.c code and figure
out what ABNORMAL_TERMINATION_IN_LNSRCH means and (at least) how to modify
the iteration counter so that optim() bails out when it gets into this
kind of loop rather than looping indefinitely.
  On the other hand, I might choose to work on adapting a different set of
code -- the "nlminb" function in Splus5 appears to be based on a different
set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
particular reasons for using a different algorithm here.

  I managed to strip down the full code that I use for doing the
bootstraps to about 58 lines (and I removed the embarrassing "<<-"
constructs), so that it if anyone wants to work on this they don't have to
come back to me for particular examples that hang for a particular
platform/set of compiler options/etc..  (It's still not pretty.)

  Ben Bolker

# Stripped-down file to find hanging optim() 

total <- rep(c(100,150,200,300,500,900),rep(2,6))
pred <- c(83,73,22,47,53,31,56,83,30,73,44,91)

nllfun2g.boot <- function(q,debug=FALSE,data.pred,data.total) {
  N1 <- q[1]
  N2 <- q[2]
  G <- q[3]
  maxval <- 1e8
  L <- cfunc2(data.total,N1,N2,G)
  r <- -sum(dbinom(data.pred, data.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}

cfunc2 <- function(input,N1,N2,G=1.0,debug=FALSE){
  if (debug)cat(c(N1,N2,G),"\n")
  pmin(1,1/((1+((input - N1)/N2))^G))
}

fuzz <- 0.001

do.boot <- function(tot=1000,seed=101) {
  bootmat <- matrix(nrow = tot, ncol = 5)
  set.seed(seed)
  i <- 1
  while (i<=tot) {
    print(i)
    boot.ind <- sample(1:length(pred), rep = TRUE)
    boot.pred <- pred[boot.ind]  ## kluge!
    boot.total <- total[boot.ind]
    n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
                   lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
                   method="L-BFGS-B",control=list(trace=FALSE,
                                       parscale=c(100,100,1)),
                   data.pred=boot.pred,
                   data.total=boot.total))
     if (is.null(class(n))) {
      bootmat[i,] <- c(n$val,n$par, n$convergence)
      i <- i+1
    }
  }
  bootmat
}

bootmat <- do.boot(5)

## find looping bootstrap sample

find.boot <- function(n,seed=101,cat=FALSE) {
  set.seed(seed)
  for (i in 1:n)
    boot.ind <- sample(1:length(pred), rep = TRUE)
  boot.pred <- pred[boot.ind]  ## kluge!
  boot.total <- total[boot.ind]
  if (cat) {
    cat(paste("boot.pred <- c(",paste(boot.pred,collapse=","),")",sep=""),"\n")
    cat(paste("boot.total <- c(",paste(boot.total,collapse=","),")",sep=""),"\n")
  }
  else list(boot.pred,boot.total)
}

On 3 Oct 2000, Peter Dalgaard BSA wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > >   Should ffloat-store be enabled in general for compilation on Linux
> > > boxes?
> > 
> > I am not sure it should.  We try to be as defensive about compiler flags
> > as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> > I'd prefer modifying the code if possible ...
> 
> It definitely shouldn't... Basically what it does is to defeat the
> "guard digits" that are used in Intel FPUs (internally using 10 bytes
> rather than 8 for doubles). While there are some rare cases where this
> messes up the "endgame" of numerical algorithms, it increases overall
> numerical accuracy. Also, storing all floating-point values off-chip
> causes a substantial decrease in performance.
> 
> In the case(-s ?) I've seen, a routine was trying too hard to squeeze
> the last bit of precision out of a termination criterion.
> 
> Optimization is another likely culprit for this kind of trouble, so
> perhaps one should try turning it off for this code?
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 16:51:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 16:51:10 +0100 (BST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200010031551.QAA02391@toucan.stats.ox.ac.uk>

> From: ben@zoo.ufl.edu
> Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)

[...]

>   On the other hand, I might choose to work on adapting a different set of
> code -- the "nlminb" function in Splus5 appears to be based on a different
> set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
> particular reasons for using a different algorithm here.

1) The one used in optim is later and supposedly better.

2) I do try not to copy S-PLUS (as distinct from S).

3) There are quite a few problems with nlminb too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 17:05:50 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 18:05:50 +0200
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 17:40:47 +0200 (CEST)"
References: <200009292118.XAA02892@pubhealth.ku.dk> <14809.65023.834763.292861@mithrandir.hornik.net>
Message-ID: <x21yxxvrj5.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Maybe we should change this as follows: if either of the two lists has
> names, work though the named components.  Warn about the ones not
> present in both.  Compare the ones present in both.  Then get rid of all
> named components and compare what is left in positional order.
> 
> As I said, I am not sure that this is really what we want.
> 
> Comments?

I think you might be right, and also that this is an easy thing to
implement. Then we'd have

all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE

Right?

However, BigBrother has

> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
[1] "Names: 2 string mismatches"
attr(, "continue"):
[1] T

> all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
[1] T

..which does look like a "compatible bug"

Hmm. Maybe one wants positional matching in any case? But then, what
is the named-component extraction about??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 17:26:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 17:26:24 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200010031626.RAA00492@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
components (PR#674)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 03 Oct 2000 18:05:50 +0200
> 
> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > Maybe we should change this as follows: if either of the two lists has
> > names, work though the named components.  Warn about the ones not
> > present in both.  Compare the ones present in both.  Then get rid of all
> > named components and compare what is left in positional order.
> > 
> > As I said, I am not sure that this is really what we want.
> > 
> > Comments?
> 
> I think you might be right, and also that this is an easy thing to
> implement. Then we'd have
> 
> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
> 
> Right?

Probably not. Lists do have orderings: they are not sets but generic
vectors.

> However, BigBrother has
> 
> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
> [1] "Names: 2 string mismatches"
> attr(, "continue"):
> [1] T
> 
> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
> [1] T

That's not what current versions of S-PLUS give, as one might hope.

> ..which does look like a "compatible bug"
> 
> Hmm. Maybe one wants positional matching in any case? But then, what
> is the named-component extraction about??

I think that both the names and components should match exactly (the
components recursively).  Unfortunately the named-component extraction
is partial matching (at least, sometimes) so the ordering of the names
always matters.  (There's an S/R difference here I keep forgetting to 
write down. I think it is 

x <- list(aa=1, bb=2)
x["a"]

which gives in S
$aa:
[1] 1
and in R
$"NA"
NULL
so S always partial matches, but R does not always.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 18:09:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 19:09:33 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#681)
Message-ID: <200010031709.TAA02504@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 18:09:58 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 3 Oct 2000 19:09:58 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#682)
Message-ID: <200010031709.TAA02520@pubhealth.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Oct  3 22:26:06 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 3 Oct 2000 14:26:06 -0700
Subject: [Rd] FW: Parse Errors
Message-ID: <MPEHJEGLNPNFGJFOJMKNIEDBCAAA.Don.Wingate@IntelliChem.com>

Earlier I posted the message below to R-announce. Please, let me appologize
for this mistake, it was not intended. The solution was provided by Duncan
Murdoch who passed on a message he recieved from Brian Ripley which informed
me that settimg R_Interactive to 1 changes the default behavor of aborting
on an error.

Thankyou, Don Wingate.


-----Original Message-----
From: Don Wingate [mailto:Don.Wingate@IntelliChem.com]
Sent: Tuesday, October 03, 2000 9:35 AM
To: r-announce@lists.R-project.org
Subject: Parse Errors


Dear R Development Team,

Using Thomas Baier's R Com Server -- or a dll I am building which supports
an evaluate function that is based on Baier's function R_Proxy_evaluate
contained in proxy_impl.c -- when I issue an invalid command to R such as
"plo(x)" the program crashes. There is code in R_Proxy_evaluate to test for
a parse error before actually generating code and issuing the command - He
calls R_Parse1Buffer(&lBuffer,0,&lStatus) and then tests the value of
lStatus for parse error. The trouble is that lStatus == PARSE_OK even though
the command is invalid, so the evaluation continues until eval() is called,
at which point R terminates and crashes the program.  (It does write an
error message to the console first, but crashes after that.)

Is there a way to handle this? The same command can be issued inside
RGui.exe or RTerm.exe with out a problem.

Thankyou, Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 04:40:40 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 11:40:40 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>

Hi, In C code called from .Call using the R interface, is it possible to
access the variables R_ColorTable and R_ColorTableSize? I tried 
extern int R_ColorTableSize; 
extern unsigned int R_ColorTable[]; 
extern char *DefaultPalette[]; 

as in Graphics.h but I guess that code doesn't get written into libR ? But
I can access 
extern void hsv2rgb
which is in graphics.c

Any help?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:25:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:25:12 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
References: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
Message-ID: <14810.52552.433477.593314@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

>> To: Kurt.Hornik@ci.tuwien.ac.at
>> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
>> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
> components (PR#674)
>> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>> Date: 03 Oct 2000 18:05:50 +0200
>> 
>> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> 
>> > Maybe we should change this as follows: if either of the two lists has
>> > names, work though the named components.  Warn about the ones not
>> > present in both.  Compare the ones present in both.  Then get rid of all
>> > named components and compare what is left in positional order.
>> > 
>> > As I said, I am not sure that this is really what we want.
>> > 
>> > Comments?
>> 
>> I think you might be right, and also that this is an easy thing to
>> implement. Then we'd have
>> 
>> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
>> 
>> Right?

> Probably not. Lists do have orderings: they are not sets but generic
> vectors.

>> However, BigBrother has
>> 
>> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
>> [1] "Names: 2 string mismatches"
>> attr(, "continue"):
>> [1] T
>> 
>> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
>> [1] T

> That's not what current versions of S-PLUS give, as one might hope.

>> ..which does look like a "compatible bug"
>> 
>> Hmm. Maybe one wants positional matching in any case? But then, what
>> is the named-component extraction about??

> I think that both the names and components should match exactly (the
> components recursively).  Unfortunately the named-component extraction
> is partial matching (at least, sometimes) so the ordering of the names
> always matters.  (There's an S/R difference here I keep forgetting to 
> write down. I think it is 

> x <- list(aa=1, bb=2)
> x["a"]

> which gives in S
> $aa:
> [1] 1
> and in R
> $"NA"
> NULL
> so S always partial matches, but R does not always.)

More precisely, we have

R> x[["a"]]
[1] 1
R> x["a"] 
$"NA"
NULL

Does this make sense at all?  Comparing it to

R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
$"NA"
[1] 3

I would think that the x["a"] incorrectly indicates that the list has a
named component "NA" with value NULL ...

What should we do about all.equal.list()?  Should we deal with the named
components first and strip them off, or always go the positional route?
Your comment that lists are generic vectors would indicate that the
second approach is more appropriate ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:27:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:27:02 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.52552.433477.593314@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Kurt Hornik wrote:

> > I think that both the names and components should match exactly (the
> > components recursively).  Unfortunately the named-component extraction

> > is partial matching (at least, sometimes) so the ordering of the names
> > always matters.  (There's an S/R difference here I keep forgetting to 
> > write down. I think it is 
> 
> > x <- list(aa=1, bb=2)
> > x["a"]
> 
> > which gives in S
> > $aa:
> > [1] 1
> > and in R
> > $"NA"
> > NULL
> > so S always partial matches, but R does not always.)
> 
> More precisely, we have
> 
> R> x[["a"]]
> [1] 1
> R> x["a"] 
> $"NA"
> NULL
> 
> Does this make sense at all?  Comparing it to
> 
> R> x <- list(aa=1, bb=2, "NA"=3)
> R> x["NA"]
> $"NA"
> [1] 3
> 
> I would think that the x["a"] incorrectly indicates that the list has a
> named component "NA" with value NULL ...

Yes, so would I. I think it is a bug in R.

> What should we do about all.equal.list()?  Should we deal with the named
> components first and strip them off, or always go the positional route?
> Your comment that lists are generic vectors would indicate that the
> second approach is more appropriate ...

See the first two lines I've left here. I think it should be positional
matching *and* the names should match too. That is, all.equal.list would
fail if one list had names and other did not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:35:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:35:34 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hi, In C code called from .Call using the R interface, is it possible to
> access the variables R_ColorTable and R_ColorTableSize? I tried 
> extern int R_ColorTableSize; 
> extern unsigned int R_ColorTable[]; 
> extern char *DefaultPalette[]; 
> 
> as in Graphics.h but I guess that code doesn't get written into libR ? But
> I can access 
> extern void hsv2rgb
> which is in graphics.c
> 
> Any help?

Are you doing this on Windows (you don't seem to say)?  If so the comment
in the Makefile

# R.dll exports all global symbols BUT import library (libR.a)
# only (all functions) + (global vars listed in exported-vars))

should answer your problem (add them to a local copy of R.exp and remake
libR.a).  The rationale was to avoid namespace pollution, as you will
need to remake globalvars.h and include that too.  exported-vars should
include all the variables in the public API.

I should point out that Graphics.h (it is capitalized) is not a distributed
header and not supported for use in addons.  We've had discussions about
changing some of that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:43:57 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:43:57 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
Message-ID: <14810.53677.386845.624289@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>> > I think that both the names and components should match exactly (the
>> > components recursively).  Unfortunately the named-component extraction

>> > is partial matching (at least, sometimes) so the ordering of the names
>> > always matters.  (There's an S/R difference here I keep forgetting to 
>> > write down. I think it is 
>> 
>> > x <- list(aa=1, bb=2)
>> > x["a"]
>> 
>> > which gives in S
>> > $aa:
>> > [1] 1
>> > and in R
>> > $"NA"
>> > NULL
>> > so S always partial matches, but R does not always.)
>> 
>> More precisely, we have
>> 
R> x[["a"]]
>> [1] 1
R> x["a"] 
>> $"NA"
>> NULL
>> 
>> Does this make sense at all?  Comparing it to
>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>> $"NA"
>> [1] 3
>> 
>> I would think that the x["a"] incorrectly indicates that the list has a
>> named component "NA" with value NULL ...

> Yes, so would I. I think it is a bug in R.

Agreed.  Should not be too hard to spot ...

>> What should we do about all.equal.list()?  Should we deal with the named
>> components first and strip them off, or always go the positional route?
>> Your comment that lists are generic vectors would indicate that the
>> second approach is more appropriate ...

> See the first two lines I've left here. I think it should be
> positional matching *and* the names should match too. That is,
> all.equal.list would fail if one list had names and other did not.

Well should it really FAIL?

What would be the precendence of the comparisons?  E.g.,

* compare the lenghts.  If different, only retain the components from 1
to the smaller lenght.

* Go through these.  If they have names, compare the names.  Then
compare the values.

[If both components have the same name but differ in value, the output
would display the name and not the position, right?  I mean something
like
  msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
rather than
  msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
???]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 08:37:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 08:37:02 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>

On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:

> I should point out that Graphics.h (it is capitalized) is not a distributed
> header and not supported for use in addons.  We've had discussions about
> changing some of that.

Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
R_ext and does not start with `R', only such headers are exported.

We have talked about exporting some of the graphics functions.  The
problem is the device driver defns, which I at least do not think are
stable enough to export. So the idea that we were exploring was to 
have *DevDesc as an opaque type in the exported header, and only allow
internal code access to its internals.  (If functions using *GPar 
need to be exported, then that would need to be made opaque too.)

Separately, Duncan TL was interested in accessing the driver part for an
addon driver, and I don't think we got too far in resolving that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 09:51:39 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 16:51:39 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>

Hi,
Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
 and the list of export functions would not be portable, would it? Just
some background, I am building an interactive color picker for R, and i
need to be able to Display the colors in the current palette so that they
can be edited. I can do something like 
current.palette<-palette()
.Call("colorpick",current.palette)

However, if there are named colors in the palette I have to do a lot of
dancing around to get it to a list of rgb values. I thought if there was
an easy way, I could avoid rewriting a lot of internal code.

Besides accessing the palette everything works dandy using graphapp. 


Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 4 Oct 2000, Prof Brian Ripley wrote:

> On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:
> 
> > I should point out that Graphics.h (it is capitalized) is not a distributed
> > header and not supported for use in addons.  We've had discussions about
> > changing some of that.
> 
> Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
> R_ext and does not start with `R', only such headers are exported.
> 
> We have talked about exporting some of the graphics functions.  The
> problem is the device driver defns, which I at least do not think are
> stable enough to export. So the idea that we were exploring was to 
> have *DevDesc as an opaque type in the exported header, and only allow
> internal code access to its internals.  (If functions using *GPar 
> need to be exported, then that would need to be made opaque too.)
> 
> Separately, Duncan TL was interested in accessing the driver part for an
> addon driver, and I don't think we got too far in resolving that.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 10:16:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 10:16:28 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
>  and the list of export functions would not be portable, would it? Just

You only need it to compile your DLL, and distributing that would be
portable (to Windows). As I said, using anything out of
Graphics.h is not guaranteed to work.  If we make part of Graphics.h
public then the variables will go in exported-vars.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 10:51:49 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 17:51:49 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>

Hmmm, did I miss something? I added 
R_ColorTable 
R_ColorTableSize 
to R.exp
and rebuilt libR.a then i added
                                                                               
#define R_ColorTableSize (*_imp__R_ColorTableSize) 
#define R_ColorTable(*_imp__R_ColorTable)
                                                                               
to globalvar.h
                                                                               
make pkg-colortools
                                                                               
results in   

gcc -Id:/Nicholas/rw1011/src/include -include
d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
-Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
colorpick.c: In function `create_dialog': colorpick.c:175:
`_imp__R_ColorTableSize' undeclared (first use in this function )
colorpick.c:175: (Each undeclared identifier is reported only once
colorpick.c:175: for each function it appears in.) colorpick.c:176:
`_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
At top level: colorpick.c:47: warning: `alts' defined but not used
make[2]: *** [colorpick.o] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 11:52:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 11:52:56 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hmmm, did I miss something? I added 

Given that this works for the normal system global vars, you must have!

> R_ColorTable 
> R_ColorTableSize 
> to R.exp
> and rebuilt libR.a then i added
>                                                                                
> #define R_ColorTableSize (*_imp__R_ColorTableSize) 
> #define R_ColorTable(*_imp__R_ColorTable)
>                                                                                
> to globalvar.h

You could just re-build globalvar.h.

>                                                                                
> make pkg-colortools
>                                                                                
> results in   
> 
> gcc -Id:/Nicholas/rw1011/src/include -include
> d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
> -Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
> colorpick.c: In function `create_dialog': colorpick.c:175:
> `_imp__R_ColorTableSize' undeclared (first use in this function )
> colorpick.c:175: (Each undeclared identifier is reported only once
> colorpick.c:175: for each function it appears in.) colorpick.c:176:
> `_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
> At top level: colorpick.c:47: warning: `alts' defined but not used
> make[2]: *** [colorpick.o] Error 1
> 

Did you declare  R_ColorTableSize and R_ColorTable?  If so, the define
should change them to declarations of _imp__R_ColorTableSize etc.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Wed Oct  4 12:59:14 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041159.NAA13214@pubhealth.ku.dk>

The following seems very strange:
> lgamma(-0.04)
[1] 3.243307
> gamma(-0.04)
[1] -25.61830
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 13:16:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 14:16:28 +0200 (CEST)
Subject: [Rd] gamma and lgamma functions (PR#684)
In-Reply-To: <200010041159.NAA13214@pubhealth.ku.dk>
References: <200010041159.NAA13214@pubhealth.ku.dk>
Message-ID: <14811.8092.895797.680324@mithrandir.hornik.net>

>>>>> james lindsey writes:

> The following seems very strange:
>> lgamma(-0.04)
> [1] 3.243307
>> gamma(-0.04)
> [1] -25.61830

I don't think so:

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
     gamma function.

Notice the ABSOULUTE VALUE.

R> log(abs(gamma(-0.04)))
[1] 3.243307

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 13:12:12 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 4 Oct 2000 14:12:12 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041212.OAA14250@pubhealth.ku.dk>

> From: james.lindsey@luc.ac.be
> Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
> 
> The following seems very strange:
> > lgamma(-0.04)
> [1] 3.243307
> > gamma(-0.04)
> [1] -25.61830
>   Jim

It is as documented, though: ?lgamma gives

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
                                               ^^^^^^^^^^^^^^^^^
     gamma function.

and log(25.61830) = 3.243307.

It's not S-compatible, I grant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 14:39:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 15:39:27 +0200
Subject: [Rd] Hershey Fonts, PNG, SVG, .. graphics formats
Message-ID: <14811.13071.19421.380883@gargle.gargle.HOWL>

I wonder if we couldn't just use the PNG , SVG, support from the
  GNU plotutils
from which we already have the Hershey scalable vector fonts [-> help(Hershey)]
The new plotutils (July 2000) do support these (and will probably even
better in the future, i.e., we can build on others people free software.

Paul [who built "Hershey" into R], do you think this path is worth pursuing?

>From  http://www.gnu.org/software/plotutils/plotutils.html

>> The GNU plotutils package contains software for both programmers and
>> technical users. Its centerpiece is libplot, a powerful C/C++ function
>> library for exporting 2-D vector graphics in many file formats, both vector
>> and raster. It can also do vector graphics animations.
>> 
>> libplot is device-independent in the sense that its API (application
>> programming interface) does not depend on the type of graphics file to be
>> exported.
>> 
>> Besides libplot, the package contains command-line programs for plotting
>> scientific data. Many of them use libplot to export graphics.
>> 
>> The current version is 2.4.1, released July 2000. It can be installed on
>> GNU/Linux, FreeBSD, and Unix systems.
>> 
>> 
>>        GNU libplot, and applications built on it, can now export graphics
>>        files in SVG format. SVG (Scalable Vector Graphics) is a new,
>>        XML-based format for Web graphics, which is being standardized by
>>        the Graphics Activity of the W3 Consortium.
>> 
>>        PNG format can now be exported too!
>> 
>>        The libplot API has been extended to support the drawing of
>>        Postscript-style compound paths.
>> 
>> The plotutils package comes with a 175-page manual. Here is an older
>> version of the manual.
>> 
>> The package is free software. Its source code is distributed as a gzipped
>> tar file, 3.3 megabytes in size. Here is how you can get it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 16:04:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 11:04:27 -0400
Subject: [Rd] R 1.2 build
Message-ID: <39DB46FB.A92CCDC5@bank-banque-canada.ca>

I've been trying to build a bundle with the R-devel snapshot from
yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
trying to do this yet.)

It is failing with the message
tar : /dev/rmt/0 : Permission denied

It happens after "removing junk files" and just after the message
"building dse_2000.9-1.tar.gz"

It looks to be coming from the line in the build script
  system("tar ....
but I don't read perl very well.

(Using Solaris.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 16:22:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 17:22:48 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 11:04:27 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I've been trying to build a bundle with the R-devel snapshot from
> yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> trying to do this yet.)

On the contrary, this kind of info is very useful.

> It is failing with the message
> tar : /dev/rmt/0 : Permission denied
> 
> It happens after "removing junk files" and just after the message
> "building dse_2000.9-1.tar.gz"
> 
> It looks to be coming from the line in the build script
>   system("tar ....
> but I don't read perl very well.
> 
> (Using Solaris.)

I think the problem is that older versions of tar wants un-hyphened
options i.e. 

tar chXf $exclude $startdir/$filename $pkgname

rather than
 
tar -c -h -X $exclude -f $startdir/$filename $pkgname


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 16:25:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 17:25:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <14811.19431.443730.163540@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've been trying to build a bundle 

You are talking about 

     R CMD build ....

right? It would help next time if you give these details..

    PaulG> with the R-devel snapshot from yesterday. (Yes I know it is
    PaulG> unstable and just tell me if I shouldn't be trying to do this
    PaulG> yet.)

no, it should be ok, AFAIK

    PaulG> It is failing with the message
    PaulG> tar : /dev/rmt/0 : Permission denied

this very much looks like tar
is trying to really work on a tape {"Tape ARchiving"} instead of a 
file.
    PaulG> It happens after "removing junk files" and just after the message
    PaulG> "building dse_2000.9-1.tar.gz"

    PaulG> It looks to be coming from the line in the build script
    PaulG> system("tar ....

more exactly,
           system("tar -c -h -f $startdir/$filename $pkgs");

    PaulG> but I don't read perl very well.

Can you try to find out if the above command works in your shell,
e.g
	tar -c -h -f /tmp/ex.tar  d1 d2

where d1 and d2 must be valid directories ?

    PaulG> (Using Solaris.)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct  4 17:07:46 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 17:07:46 +0100 (BST)
Subject: [Rd] R 1.2 build
Message-ID: <200010041607.RAA02123@toucan.stats.ox.ac.uk>


> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 04 Oct 2000 17:22:48 +0200
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I've been trying to build a bundle with the R-devel snapshot from
> > yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> > trying to do this yet.)
> 
> On the contrary, this kind of info is very useful.
> 
> > It is failing with the message
> > tar : /dev/rmt/0 : Permission denied
> > 
> > It happens after "removing junk files" and just after the message
> > "building dse_2000.9-1.tar.gz"
> > 
> > It looks to be coming from the line in the build script
> >   system("tar ....
> > but I don't read perl very well.
> > 
> > (Using Solaris.)
> 
> I think the problem is that older versions of tar wants un-hyphened
> options i.e. 
> 
> tar chXf $exclude $startdir/$filename $pkgname
> 
> rather than
>  
> tar -c -h -X $exclude -f $startdir/$filename $pkgname

Um.  Real tar (the AT&T based one such as that on Solaris 2.7) needs
chXf. GNU tar is a rather different animal.

This is chiefly my fault: I modified this to work on Solaris, but tested
it on a machine where tar is GNU tar ....

You will note that build is not finished yet:

    ### !!! Missing: check & rebuild various indices !!!

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 17:57:19 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 12:57:19 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB616F.65A74589@bank-banque-canada.ca>

>I think the problem is that older versions of tar wants un-hyphened
>options i.e.

>tar chXf $exclude $startdir/$filename $pkgname

It works with
tar chf  $startdir/$filename $pkgname

I didn't try your example because I'm fairly sure $exclude should not
immediately follow f, but I'm not sure what the proper syntax should be.
(The man page is not very helpful.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 18:53:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 19:53:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 12:57:19 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca>
Message-ID: <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >tar chXf $exclude $startdir/$filename $pkgname
> 
> It works with
> tar chf  $startdir/$filename $pkgname
> 
> I didn't try your example because I'm fairly sure $exclude should not
> immediately follow f, but I'm not sure what the proper syntax should be.
> (The man page is not very helpful.)

I think it is OK as written - arguments to X and f modifiers in same
order as in the chXf. But if it bothers you, try 

tar chfX $startdir/$filename $exclude $pkgname

Lessee...:

[pd@arnold pd]$ echo junk/y > xfile
[pd@arnold pd]$ tar cvhXf xfile junk.tar junk
a junk/ 0K
a junk/y excluded
a junk/y.crypt 0K
a junk/y2 0K
a junk/R-intro/ 0K
a junk/R-intro/CVS/ 0K
a junk/R-intro/CVS/Repository 1K
....

Yup. Works.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 20:14:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 15:14:37 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca> <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB819C.69A65F44@bank-banque-canada.ca>

>tar  chXf  $exclude $startdir/$filename $pkgname

Yes it works, sorry for doubting.

One might consider putting "core" in the list of files to exclude.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 21:25:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 21:25:31 +0100 (BST)
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB819C.69A65F44@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>

On Wed, 4 Oct 2000, Paul Gilbert wrote:

> >tar  chXf  $exclude $startdir/$filename $pkgname
> 
> Yes it works, sorry for doubting.
> 
> One might consider putting "core" in the list of files to exclude.

There's also a list of files to delete, which seems an appropriate action
for a core file.  However, I would surprised to find core in the source
files for a package, as that implies that some executable had been run
within the package sources.  Assuming you had a core file there, do you
know how it happened?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Oct  5 08:50:28 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 5 Oct 2000 15:50:28 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010051548520.27447-100000@sununx.comp.nus.edu.sg>

Hi,
Thank you for all the help. i figured out what I was missing, I forgot to
declare the variables in my code. Duh. Now its working great.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medonline@hotmail.com  Thu Oct  5 14:06:15 2000
From: medonline@hotmail.com (medonline@hotmail.com)
Date: Thu, 05 Oct 2000 06:06:15 -0700
Subject: [Rd] The best Viagra prices are here.
Message-ID: <0000547f3c9f$00006c7c$00005a0b@>

<HTML>
<BODY>

<FONT face=3D"MS Sans Serif">
<FONT size=3D3> Viagra is scientifically proven to help/prevent impotence.=
<BR>
You've seen it everywhere:  ABC, NBC, CBS, and FOX.<BR>
Viagra is for everyone.  Aged 20-70?  Viagra can help.<BR>
Now you can get Viagra via Online Prescription.  <BR>
You can only get it at E-Meds.  See the link below.<BR>
There is no time like the present.  See what Viagra can do<BR>
for you.  You will NOT be dissapointed.  Everything you've <BR>
heard is true.  Give it a try, and you'll see. <BR>
<BR>
<BR>
<B> The E-Meds Online Pharmacy has it all.<B>0   Best of all, we have<BR>
Viagra.  The news is real; the rumors are true.  Viagra is the<BR>
physician-approved impotence solution for the new millenium. No<BR>
matter what your age, race, or age, Viagra can benefit your sex <BR>
life.  Give it a try; see what everyone is talking about. Need <BR>
anything else?  Claritin, Zyban, Propecia, Xenical?  We have it.
<FONT size=3D2> <BR>
<BR>
<FONT color=3D"l=01"><U><B> http://www.multirx.com/viagraone.htm<BR>
<FONT color=3D"#0000FF"><U>none<B>0 <a href=3D"http://www.multirx.com/viag=
raone.htm">Click here for Viagra.</a><BR>
<BR>
<BR>
<BR>
<BR>
This  message is sent in compliance of the new e-mail bill: SECTION 301. <=
BR>
Per Section 301, Paragraph (a)(2)(C) of S. 1618, further transmissions <BR=
>
to you by the sender of this email may be stopped at no cost to you.<BR>
Prevent bulk emailers from mailing you in the future.  Simply reply to thi=
s<BR>
email with your email address in the body, and you will be removed.<BR>
<BR>
</FONT></FONT></FONT><p><p><p><p><p><p><p><p><p><p>






<p><FONT face=3D"MS Sans Serif"><p><FONT size=3D3> Viagra is scientificall=
y proven to help/prevent impotence.<BR><p>You've seen it everywhere:  ABC,=
 NBC, CBS, and FOX.<BR><p>Viagra is for everyone.  Aged 20-70?  Viagra can=
 help.<BR><p>Now you can get Viagra via Online Prescription.  <BR><p>You c=
an only get it at E-Meds.  See the link below.<BR><p>There is no time like=
 the present.  See what Viagra can do<BR><p>for you.  You will NOT be diss=
apointed.  Everything you've <BR><p><p><p><p><p><p></BODY></HTML>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct  5 15:27:12 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 05 Oct 2000 10:27:12 -0400
Subject: [Rd] R 1.2 build
References: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>
Message-ID: <39DC8FC0.DA1459D2@bank-banque-canada.ca>

>However, I would surprised to find core in the source
>files for a package, as that implies that some executable had been run
>within the package sources.  Assuming you had a core file there, do you
>know how it happened?

I'm not certain, but I think what happened was that the first time I ran R CMD
check with R 1.2  (via my Makefile) I did not get things quite right and it ran
in my source tree rather than where I intended it to run.  (There are some
changes from 1.1.) I am getting a segfault with one example, but I haven't
tracked it down yet.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From netnews@newbeirut.com  Fri Oct  6 18:44:00 2000
From: netnews@newbeirut.com (Sayfco)
Date: Fri, 06 Oct 2000 19:44:00 +0200
Subject: [Rd] Your Dream House starting at $53000
Message-ID: <m13hJ67-002ha2C@phoenix.inco.com.lb>

This is a Multipart MIME message. Since your mail reader
does not understand this format, some or all of
this message may not be legible.

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_002_23068078_1184.3_23069265.3000488"


------=_NextPart_001_002_23068078_1184.3_23069265.3000488
Content-Type: text/html;
	charset=iso-8859-1
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Elie waked">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (Win98; I) [Netscape]">
   <title>index</title>
</head>
<body>
&nbsp;
<table BORDER COLS=1 WIDTH="100%" >
<tr>
<td BGCOLOR="#FFCC00">
<center><b>Distribute this message to your friends or display it on your
company board</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFECE0">
<center><a href="http://www.sayfco.com"><img SRC="cid:1184.3.23068085@ads12.jpg" BORDER=0 height=156 width=500></a>
<br><b><a href="http://www.sayfco.com">www.sayfco.com</a></b>
<br><b>E-mail:<a href="mailto:mail@sayfco.com">mail@sayfco.com</a></b>
<br><b>SWIMMING POOL, PARKING, GREEN SPACES &amp; 360 PANORAMIC VIEW.</b>
<br><b>BEIRUT - LEBANON&nbsp;</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFCC00">
<center>
<p><b>Do you have&nbsp; Product, Service, Offer, Message, Mail, Invitation,
etc., to distribute ?&nbsp;</b>
<br><b>We have the best way to send it to you via email to :&nbsp;</b>
<br><b>74'000 Lebanese Emails (Companies amd Individuals) for 75$ Only</b>
<br><b>Just call anytime at&nbsp; 03 213063&nbsp; Customer Support&nbsp;</b>
<br><b>&nbsp;Copyright &copy; 2000 Over Net Company for services. All rights
reserved.</b></center>
</td>
</tr>

<tr>
<td><font size=-1>To unsubscribe, reply with word "remove" into the subject
line</font></td>
</tr>
</table>

</body>
</html>

------=_NextPart_001_002_23068078_1184.3_23069265.3000488--

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: image/jpeg; name="ads12.jpg"
Content-Transfer-Encoding: base64
Content-ID: <1184.3.23068085@ads12.jpg>

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

------=_NextPart_000_001_23068078_1184.3_23069265.3000488--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Oct  6 01:58:42 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 6 Oct 2000 13:58:42 +1300
Subject: [Rd] Re: Hershey Fonts, PNG, SVG, .. graphics formats
References: <14811.13071.19421.380883@gargle.gargle.HOWL>
Message-ID: <004501c02f30$926879b0$175dd882@stat.auckland.ac.nz>

Hi


> I wonder if we couldn't just use the PNG , SVG, support from the
>   GNU plotutils
> from which we already have the Hershey scalable vector fonts [->
help(Hershey)]
> The new plotutils (July 2000) do support these (and will probably even
> better in the future, i.e., we can build on others people free software.
>
> Paul [who built "Hershey" into R], do you think this path is worth
pursuing?


What I wanted to do with the Hershey vector fonts was JUST grab all of the
vector font database information and all of the stuff that converted a
character string into a set of line-drawing commands (using the vector font
database).  This proved possible for the vector fonts, but that was because
I was able to find a fairly clear interface between the vector font code and
the device-handling code.  This meant I was able replace calls to the GNU
plotutils devices with calls to R graphics devices without (I think) too
much horribleness.

I was deliberately not trying to figure out how the GNU plotutils device
code worked, but the vague impression I obtained was that it was quite
complicated and differed quite a bit from R's concept of a device.

Now, without having looked at the PNG/SVG code, my guess would be that it
might be much more tightly bound to GNU's device-handling code - i.e.,
probably harder to only extract the PNG/SVG bits we want.

On a more positive note ... in general, the GNU plotutils code (at least the
bits I saw) impressed me.  It seemed well-documented, well-organised, and
VERY thorough.  Mad though it may sound, perhaps we might want to adopt ALL
of their device-handling code rather than trying to just get the PNG/SVG
bits (maybe one way to make our postscript woes disappear :)

I _suspect_ that a significant amount of time and effort would be involved
in trying to understand the PNG/SVG code (or all of the device-handling
code).  However, I also suspect that it would be worth the effort because
from what I've seen there's a lot of really good stuff in there.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  6 07:41:40 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 6 Oct 2000 08:41:40 +0200
Subject: [Rd] spam .. improving my filters
In-Reply-To: <m13hJ67-002ha2C@phoenix.inco.com.lb>
References: <m13hJ67-002ha2C@phoenix.inco.com.lb>
Message-ID: <14813.29732.68205.736536@gargle.gargle.HOWL>

I'm sorry for the recent spam
to this list (btw, I've no idea why R-devel was targeted more than R-help).

I'm constantly improving the anti-spam filters,
but it's delicate balance between errors of the first and second kind:
You all suffer from the first, I do additionally suffer from the second
kind:  Having to manually approve false bounces...

BTW:  Changing the list automation from majordomo to mailman 
      is coming quite close.
      I plan to migrate  R-devel as one of the first mailing lists, since I
      suppose that you are somewhat more sophisticated computer users than
      subscribers to other lists I manage.

Your list maintainer:

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  6 13:07:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 6 Oct 2000 14:07:48 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.53677.386845.624289@mithrandir.hornik.net>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net>
Message-ID: <14813.49300.795765.338583@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Prof Brian D Ripley writes:
>> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>>> > I think that both the names and components should match exactly (the
>>> > components recursively).  Unfortunately the named-component extraction

>>> > is partial matching (at least, sometimes) so the ordering of the names
>>> > always matters.  (There's an S/R difference here I keep forgetting to 
>>> > write down. I think it is 
>>> 
>>> > x <- list(aa=1, bb=2)
>>> > x["a"]
>>> 
>>> > which gives in S
>>> > $aa:
>>> > [1] 1
>>> > and in R
>>> > $"NA"
>>> > NULL
>>> > so S always partial matches, but R does not always.)
>>> 
>>> More precisely, we have
>>> 
R> x[["a"]]
>>> [1] 1
R> x["a"] 
>>> $"NA"
>>> NULL
>>> 
>>> Does this make sense at all?  Comparing it to
>>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>>> $"NA"
>>> [1] 3
>>> 
>>> I would think that the x["a"] incorrectly indicates that the list has a
>>> named component "NA" with value NULL ...

>> Yes, so would I. I think it is a bug in R.

> Agreed.  Should not be too hard to spot ...

>>> What should we do about all.equal.list()?  Should we deal with the named
>>> components first and strip them off, or always go the positional route?
>>> Your comment that lists are generic vectors would indicate that the
>>> second approach is more appropriate ...

>> See the first two lines I've left here. I think it should be
>> positional matching *and* the names should match too. That is,
>> all.equal.list would fail if one list had names and other did not.

> Well should it really FAIL?

> What would be the precendence of the comparisons?  E.g.,

> * compare the lenghts.  If different, only retain the components from 1
> to the smaller lenght.

> * Go through these.  If they have names, compare the names.  Then
> compare the values.

> [If both components have the same name but differ in value, the output
> would display the name and not the position, right?  I mean something
> like
>   msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
> rather than
>   msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
> ???]

The more I think about it, the less I am sure about what we really want.

In discussions with Fritz yesterday we noticed that quite often lists
are in fact used as hash tables; typically this is what is meant if all
components of the list have names.  Fritz suggested an option
	hash.order = FALSE
to all.equal.list() through which one could control the interpretation.
This option could also be passed on recursively.

I am not sure about this.  There is a difference between `typically' and
always.  Maybe we should have hash tables which can be implemented as
lists with class "hashtable".  This would be clean, but a substantial
change (e.g., most modelling functions in fact return hash tables in the
above sense) and I am not sure whether this is worth the effort.

We can fix the problems in the bug report by deleting the code in
all.equal.list() which compares the components.  That has the effect
that named components are referred to as positional even if their names
agree, and we should decide whether we want this or not.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Oct  6 15:35:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Oct 2000 10:35:49 -0400
Subject: [Rd] all.equal.list() sometimes fails with unnamed and
 namedcomponents (PR#674)
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net> <14813.49300.795765.338583@mithrandir.hornik.net>
Message-ID: <39DDE345.16666166@bank-banque-canada.ca>

>We can fix the problems in the bug report by deleting the code in
>all.equal.list() which compares the components.  That has the effect
>that named components are referred to as positional even if their names
>agree, and we should decide whether we want this or not.

Apologies if I've missed something, as I have not been following this discussion
very closely. However, this effect does not seem very good to me. I often build
lists by appending named components, and  delete named components by setting
them to NULL. I don't think it should be necessary to construct objects with the
named components in the same order for the results to be equal.

Of course, I start from the position that all lists should be named lists and
name truncation should be banned - and then realize this is unrealistic given
the current state of affairs. Perhaps we need a new object called "goodlist"
(rather than "hashtable").

One of the issues here is the difference between what interactive users want for
shortcuts and what package writers want for consistence. If list objects are
always accessed by functions (constructors, etc.), rather than having their
elements tweaked by users, then one tends to lean very heavily toward the
hashtable approach.

My 2 cents worth,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct  7 03:09:00 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 7 Oct 2000 04:09:00 +0200 (MET DST)
Subject: [Rd] documentation bug in readline() (PR#685)
Message-ID: <200010070209.EAA12979@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi -

the documentation for readline() should reflect the fact that the
prompt= arg is truncated to CONSOLE_PROMPT_SIZE chars, currently defined 
as 32 in src/main/scan.c.  assuming this is the correct behavior, an
updated copy of readline.Rd is attached.

--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, file:/home/peter/R/Home.RData, package:local,
package:distns, Autoloads, package:base
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii;
 name="readline.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="readline.Rd"

\name{readline}
\title{Read a Line from the Terminal}
\usage{
readline(prompt="")
}
\alias{readline}
\arguments{
  \item{prompt}{the string printed when prompting the user for input.
  This will be truncated to a maximum allowed length, currently 32 chars.
  Should usually end with a space \code{" "}.}
}
\description{
  \code{readline} reads a line from the terminal, returning it as a
  character string.
}
\examples{
fun <- function() {
  ANSWER <- readline("Are you a satisfied R user? ")
  if (substr(ANSWER, 1, 1) == "n")
    cat("This is impossible.  YOU LIED!\n")
  else
    cat("I knew it.\n")
}
fun()
}
\keyword{utilities}

--------------FBFC021C053198B1E0FE0848--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010070515.HAA31088@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct  9 10:23:33 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 9 Oct 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] cmdscale documentation (PR#687)
Message-ID: <200010090923.LAA22351@pubhealth.ku.dk>

In the value section of "?cmdscale" in the mva library the
returned object is a *matrix* if eig=FALSE, and a list with
components "points" and "eig" if eig=TRUE, rather than always a
list as described.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 10 08:47:55 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 10 Oct 2000 09:47:55 +0200 (MET DST)
Subject: [Rd] Unreliable example in ?layout (PR#688)
Message-ID: <200010100747.JAA03964@pubhealth.ku.dk>

In ?layout values of x and y from the standard gaussian that lie
outside (-3, 3) will occasionally cause an error in hist with
breaks=seq(-3, 3, 0.5).  One reliable solution (not quite as
pretty) would be to use runif instead of rnorm, ie

      x <- runif(50, -1, 1)
      y <- runif(50, -1, 1)
      xhist <- hist(x, breaks=seq(-1,1,0.25), plot=FALSE)
      yhist <- hist(y, breaks=seq(-1,1,0.25), plot=FALSE)
      top <- max(c(xhist$counts, yhist$counts))
      xrange <- c(-1,1)
      yrange <- c(-1,1)

      # and then as before.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 10 17:32:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 10 Oct 2000 18:32:48 +0200 (MET DST)
Subject: [Rd] Documentation problem for ecdf (PR#689)
Message-ID: <200010101632.SAA12520@pubhealth.ku.dk>

Full_Name: Kurt Hornik
Version: 1.2.0
OS: Linux
Submission from: (NULL) (137.208.57.56)


File `ecdf.Rd' contains

\usage{
ecdf(x)
plot(x, verticals = FALSE, col.01line = "gray70", \dots)
}
\arguments{
  \item{x}{numeric vector with the ``observations''.}

This is wrong, because in the plot usage `x' should be an object of class
"stepfun", and in fact the code says

  plot.ecdf <- function(..., verticals = FALSE, col.01line = "gray70") { ... }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 18:08:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 13:08:18 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E34D02.A97EC18E@bank-banque-canada.ca>

I see the default behavior of unlink  with respect to directories is changing in
1.2. This causes me a certain amount of difficulty: since the recursive argument
is not supported in S I will need to start building up my compatibility library
again (which is almost empty now).

Instead of changing unlink's default behavior it might be better to define a new
function (perhaps Sys.rm) with the new default behavior, and possibly even
depreciate unlink.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 20:30:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 15:30:32 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E36E58.F41A07ED@bank-banque-canada.ca>

>R for Windows:

>unlink deleted files and empty directories in recent versions, only files
>in earlier ones.

>Given the last, the default behaviour of unlink under R is not what you
>claim, so I suppose that your code is not fully R-compatible under 1.1.1?

Actually, I was just going by what R prior to 1.2 does in Solaris (i.e. delete
directories, empty or not) and what the R 1.2 documentation says:

    Note

    Prior to R version 1.2.0 the default on Unix was recursive = TRUE, and on
    Windows wmpty (sic) directories could be deleted.

In any case, the behavior of unlink seems to be inconsistent in various versions

of S and R and on different platforms. In this situation it is very difficult to

program with the function and I have usually found that it is better  to define
a good new function, try to make it consistent across platforms, and depreciate
the old function. I will do at least an S version of that in my compatability
library but I think it would be good for R if it were done in the base. Don't
you think Sys.rm would be a good name?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 10 19:01:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 10 Oct 2000 19:01:05 +0100 (BST)
Subject: [Rd] unlink in 1.2
In-Reply-To: <39E34D02.A97EC18E@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010101839210.27338-100000@auk.stats>

On Tue, 10 Oct 2000, Paul Gilbert wrote:

> I see the default behavior of unlink  with respect to directories is changing in
> 1.2. This causes me a certain amount of difficulty: since the recursive argument
> is not supported in S I will need to start building up my compatibility library
> again (which is almost empty now).
> 
> Instead of changing unlink's default behavior it might be better to define a new
> function (perhaps Sys.rm) with the new default behavior, and possibly even
> depreciate unlink.

I think you have misunderstood what unlink() was and is actually documented
to do. For example:

S-PLUS 3.4:

       Deletes the file represented by x.

with no mention of recursively removing directories.  Only some Unix
versions of S-PLUS 3.x did: no Windows version of S-PLUS ever has.

S-PLUS 5.1:

   unlink will remove files and directories, but only empty directories.
   Use rmdir to remove a directory and everything in it.

(BTW, that's not actually true, but it is what is documented.)

R for Windows:

unlink deleted files and empty directories in recent versions, only files
in earlier ones.

Given the last, the default behaviour of unlink under R is not what you
claim, so I suppose that your code is not fully R-compatible under 1.1.1?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 10:27:59 2000
From: td2mafea@uco.es (td2mafea@uco.es)
Date: Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)
Subject: [Rd] Bug? (PR#690)
Message-ID: <200010110927.LAA18569@pubhealth.ku.dk>

I don´t know if it is a bug, but what's wrong in the folloing (R version
1.1.1, August 15, 2000, under windows 98):
> x<-matrix(nrow=10, ncol=2)
> for (i in 1:10)
+ {
+ x[i][1]<-i
+ x[i][2]<-i^2
+ }
Warning messages:
1: number of items to replace is not a multiple of replacement length
2: number of items to replace is not a multiple of replacement length
3: number of items to replace is not a multiple of replacement length
4: number of items to replace is not a multiple of replacement length
5: number of items to replace is not a multiple of replacement length
6: number of items to replace is not a multiple of replacement length
7: number of items to replace is not a multiple of replacement length
8: number of items to replace is not a multiple of replacement length
9: number of items to replace is not a multiple of replacement length
10: number of items to replace is not a multiple of replacement length

Thanks

Armando Ferreira


----------------------------------------------------------------------------
-------------
Armando Mateus Ferreira
Escuela Técnica Superior de Inginieros Agrónomos y Montes
Universidad de Córdoba-España
Avda. Menendez Pidal, 14080 Córdoba
td2mafea@uco.es

Escola Superior Agrária
6000 Castelo Branco-Portugal
armando@esa.ipcb.pt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 11 10:45:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2000 11:45:12 +0200
Subject: [Rd] Bug? (PR#690)
In-Reply-To: td2mafea@uco.es's message of "Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)"
References: <200010110927.LAA18569@pubhealth.ku.dk>
Message-ID: <x2pul790ev.fsf@blueberry.kubism.ku.dk>

td2mafea@uco.es writes:

> I don´t know if it is a bug, but what's wrong in the folloing (R version
> 1.1.1, August 15, 2000, under windows 98):
> > x<-matrix(nrow=10, ncol=2)
> > for (i in 1:10)
> + {
> + x[i][1]<-i
> + x[i][2]<-i^2
> + }
> Warning messages:
> 1: number of items to replace is not a multiple of replacement length
> 2: number of items to replace is not a multiple of replacement length

Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
ignores dimensions:

> x<-matrix(1:20,nrow=10, ncol=2)
> x[1]
[1] 1
> x[12]
[1] 12


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 11:40:41 2000
From: td2mafea@uco.es (Armando Mateus Ferreira)
Date: Wed, 11 Oct 2000 12:40:41 +0200
Subject: [Rd] Bug? (PR#690)
References: <200010110927.LAA18569@pubhealth.ku.dk> <x2pul790ev.fsf@blueberry.kubism.ku.dk>
Message-ID: <002501c0336f$b3a81f20$bf73d696@uco.es>

It's exactly what i want. Thanks.
Armando Ferreira


----- Original Message -----
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
To: <td2mafea@uco.es>
Cc: <r-devel@stat.math.ethz.ch>; <R-bugs@biostat.ku.dk>
Sent: Wednesday, October 11, 2000 11:45 AM
Subject: Re: [Rd] Bug? (PR#690)


> td2mafea@uco.es writes:
>
> > I don´t know if it is a bug, but what's wrong in the folloing (R version
> > 1.1.1, August 15, 2000, under windows 98):
> > > x<-matrix(nrow=10, ncol=2)
> > > for (i in 1:10)
> > + {
> > + x[i][1]<-i
> > + x[i][2]<-i^2
> > + }
> > Warning messages:
> > 1: number of items to replace is not a multiple of replacement length
> > 2: number of items to replace is not a multiple of replacement length
>
> Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
> ignores dimensions:
>
> > x<-matrix(1:20,nrow=10, ncol=2)
> > x[1]
> [1] 1
> > x[12]
> [1] 12
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Wed Oct 11 16:10:31 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111510.RAA23967@pubhealth.ku.dk>

Full_Name: J Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (155.140.123.250)


After grep is called many times (> 250k), with constant strings as patterns,
it complains with "invalid regular expression" on calls that worked before
(with same pattern and x). At the same time copying to the clipboard
does no longer work with "out of memory" error (i.e. when trying to
copy the error message from grep to this msg.)
Also breaks other functions (regexpr, strsplit) that seems to use
the regex functions internally. Things work again after restarting R.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 16:32:15 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 11 Oct 2000 17:32:15 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111532.RAA24080@pubhealth.ku.dk>


> From: jutans@utans.u-net.com
> Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] invalid regular expression after many grep's (PR#691)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: J Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (155.140.123.250)
> 
> 
> After grep is called many times (> 250k), with constant strings as patterns,
> it complains with "invalid regular expression" on calls that worked before
> (with same pattern and x). At the same time copying to the clipboard
> does no longer work with "out of memory" error (i.e. when trying to
> copy the error message from grep to this msg.)
> Also breaks other functions (regexpr, strsplit) that seems to use
> the regex functions internally. Things work again after restarting R.

Looks like a memory/resource leak.  Can you send us an actual
failing example on your machine, starting from a clean session,
together with details of the machine (amount of RAM etc)?  That will
help us greatly to reproduce this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Wed Oct 11 18:25:04 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Wed, 11 Oct 2000 19:25:04 +0200 (MET DST)
Subject: [Rd] documentation bug in grep (PR#692)
Message-ID: <200010111725.TAA24663@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for grep mistakenly says "gsub" whn it should say "grep"
in the Details section of grep.Rd.  a diff -u with a corrected version
follows:

diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
--- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
+++ grep.Rd-new	Wed Oct 11 10:16:43 2000
@@ -46,7 +46,7 @@
   \code{extended} argument.
 }
 \value{
-    For \code{gsub} a vector giving either the indices of the elements
+    For \code{grep} a vector giving either the indices of the elements
     of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
     the matched elements.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 21:14:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Oct 2000 21:14:39 +0100 (BST)
Subject: [Rd] documentation bug in grep (PR#692)
In-Reply-To: <200010111725.TAA24663@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010112112450.18380-100000@auk.stats>

On Wed, 11 Oct 2000 pperkins@ucsd.edu wrote:

> Full_Name: Peter Perkins
> Version: 1.1.1
> OS: LinuxPPC
> Submission from: (NULL) (24.4.89.36)
> 
> 
> the man page for grep mistakenly says "gsub" whn it should say "grep"
> in the Details section of grep.Rd.  a diff -u with a corrected version

It's in the Value section!  Thank you, fixed now.

> follows:
> 
> diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
> --- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
> +++ grep.Rd-new	Wed Oct 11 10:16:43 2000
> @@ -46,7 +46,7 @@
>    \code{extended} argument.
>  }
>  \value{
> -    For \code{gsub} a vector giving either the indices of the elements
> +    For \code{grep} a vector giving either the indices of the elements
>      of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
>      the matched elements.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Rohith.Amaratunga@dsto.defence.gov.au  Thu Oct 12 04:11:36 2000
From: Rohith.Amaratunga@dsto.defence.gov.au (Rohith.Amaratunga@dsto.defence.gov.au)
Date: Thu, 12 Oct 2000 05:11:36 +0200 (MET DST)
Subject: [Rd] Bug report (PR#693)
Message-ID: <200010120311.FAA26294@pubhealth.ku.dk>

I am operating R on a linux platform and the version info is given below

platform 	i686-unknown-linux
arch	i686
os	linux
system	i686, linux
status
major	0
minor	90.1
year	1999
month	December
day	15
languag  R

I cannot get the correct grid lines when I use the command grid() on a log
scale.  I have also tried using grid(1) and a variety of numbers but with no
luck

Thanks

Rohith


Rohith Amaratunga
Aeronautical and Maritime Research Laboratory
506 Lorimer Street,
Fishermans Bend, Victoria 3207.
Tel: (03) 9626 7154 (B), 0417 317 445, (03) 9818 5776 (H)
E-mail: rohith.amaratunga@dsto.defence.gov.au


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Thu Oct 12 15:16:52 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Thu, 12 Oct 2000 16:16:52 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
Message-ID: <00101216345102.00374@ligarto>

Dear All,

A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
R-devel; my (mis?)understanding of scoping rules is
that it should have worked in both. The problems seem related to using the
name of the data frame for extracting weights or subsets within a function
call. The problems can be reproduced as follows:

**********************

datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
                    x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))

formula <- as.formula(y ~ x1)


# the following fails in R-1.2.0 but not in R-1.1.1
# > Error in eval(expr, envir, enclos) : Object "datos" not found
lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = datos$x2)},
       formula = formula) 



# fails in R-1.2.0, but not in R-1.1.1
# > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
my.lm <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
} 

my.lm(formula, datai)



# In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
my.lm2 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
#    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
} 

my.lm2(formula, datai)


##################
## The following all work in both R-1.2.0 and R-1.1.1

datax <- datai[datai$x3 < 5 & datai$counter==1,]
lm(formula, data = datax, weights = x2)
lm(formula, data = datax, weights = datax$x2)
lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

my.lm9 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, weights = x2, subset = counter == 1)
} 

my.lm9(formula, datai)

    



************************

versions: 

R-1.1.1
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status   Patched
major    1
minor    1.1
year     2000
month    October
day      11
language R                                                                               



R-development:
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    10                          
day      10                          
language R                           

********************



-- 
Ramón Díaz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 12 18:37:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2000 19:37:49 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: Ramon Diaz-Uriarte's message of "Thu, 12 Oct 2000 16:16:52 +0200"
References: <00101216345102.00374@ligarto>
Message-ID: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>

Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:
> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 

Ow!... This happens because of a change that makes formulas capture
their environment of definition.

A workaround is to explicitly set the environment of the formula to
the current environment, like this:

lapply(split(datai,datai$counter),
       function(datos,formula) {
	  environment(formula)<-environment()
	  lm(formula = formula, data = datos,
                                   weights = datos$x2)
       },
       formula = formula) 

but I bet Luke wants to comment on this...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:30:49 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:30:49 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <00101216345102.00374@ligarto>
Message-ID: <Pine.GSO.4.21.0010121016370.7271-100000@atlas.biostat.washington.edu>

On Thu, 12 Oct 2000, Ramon Diaz-Uriarte wrote:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:


There's something tricky happening with parent.frame()

lapply(1:10,function(x,y) {browser();x+y),y=1)

Browse[1]> eval(quote(parent.frame()),parent.frame())
<environment: 1004cb70>
Browse[1]> eval(quote(sys.frame(sys.parent())),parent.frame())
<environment: 1004cdc88>

so parent.frame() isn't an exact synonym for sys.frame(sys.parent()). I
think this i


There *has* also been a change in the scoping rules (only partly
deliberate) in model.frame as Peter pointed out, though I don't think it
is applying here. A formula now has an environment associated with it,
which is used as the default environment for variables not specified in
data=

If you do
  lapply(datai,function(w) model.frame(~w))
it works: the vector w is found in the environment of the anonymous
function.
If you do
  ff<- ~w
  lapply(datai,function(w) model.frame(ff))
it doesn't work, since the default environment is now the global one.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 
> 
> 
> 
> # fails in R-1.2.0, but not in R-1.1.1
> # > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
> my.lm <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
> } 
> 
> my.lm(formula, datai)
> 
> 
> 
> # In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
> my.lm2 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
> #    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
> } 
> 
> my.lm2(formula, datai)
> 
> 
> ##################
> ## The following all work in both R-1.2.0 and R-1.1.1
> 
> datax <- datai[datai$x3 < 5 & datai$counter==1,]
> lm(formula, data = datax, weights = x2)
> lm(formula, data = datax, weights = datax$x2)
> lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
> lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = x2)},
>        formula = formula) 
> 
> my.lm9 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, weights = x2, subset = counter == 1)
> } 
> 
> my.lm9(formula, datai)
> 
>     
> 
> 
> 
> ************************
> 
> versions: 
> 
> R-1.1.1
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status   Patched
> major    1
> minor    1.1
> year     2000
> month    October
> day      11
> language R                                                                               
> 
> 
> 
> R-development:
> platform i586-pc-linux-gnu           
> arch     i586                        
> os       linux-gnu                   
> system   i586, linux-gnu             
> status   Under development (unstable)
> major    1                           
> minor    2.0                         
> year     2000                        
> month    10                          
> day      10                          
> language R                           
> 
> ********************
> 
> 
> 
> -- 
> Ramón Díaz-Uriarte
> Triana 47
> 28016 Madrid
> Spain
> 
> email:ramon-diaz@teleline.es
> Phone: +-34-918-513-966
>        +-34-657-186-407	
> 
> 
> 
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:35:03 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:35:03 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010121033220.7271-100000@atlas.biostat.washington.edu>

On 12 Oct 2000, Peter Dalgaard BSA wrote:

> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:

There's a much simpler workaround

lapply(split(datai,datai$counter),function(dataos,formula) lm(formula,
  	data=datos,weights=x2), formula=formula)

because the weights will first be looked for in the data= argument

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Oct 12 20:03:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 12 Oct 2000 14:03:57 -0500 (CDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 12, 2000 07:37:49 pm"
Message-ID: <200010121903.OAA12130@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {
> 	  environment(formula)<-environment()
> 	  lm(formula = formula, data = datos,
>                                    weights = datos$x2)
>        },
>        formula = formula) 
> 
> but I bet Luke wants to comment on this...
> 

Not really, but I guess I have no choice :-).  Here is my take on this:

The simple solution is to use

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

i.e. use x2 instead of datos$x2 as the weights argument.  This works
in both 1.1.1 and in the devel branch.

A long-winded explanation:

What makes using lm and friends in functions difficult is that some of
its arguments are used for value and some are used for expression (for
lack of better terms).  Arguments used for value are ordinary function
arguments that are evaluated internally by the standard function
evaluation process; the data argument is one.  (For value arguments
you can almost think of them as being computed before the function
call and only their values are passed.)  Expression arguments are not
evaluated directly.  Instead their expressions are captured (by
substitute or something similar), those expressions are then examined,
possibly modified, and then possibly evaluated through an explicit
call to eval using some context. The weights argument is an expression
argument.

The key in understanding how expression arguments work is knowing and
perhaps controlling the environment used for evaluating them (*and*
knowing which they are--the documentation isn't as helpful as it could
be here).  The changes Robert made to lm and related functions are a
first step in trying to make the context in which expression arguments
are used a bit more rational and controllable, in particular when no
explicit data frames are supplied.

The 1.1.1 rules were to evaluate expression arguments in an
environment consisting of the data frame and the environment of the
caller of lm.  The (intended at least) new rules, which may still
change, are that the evaluation environment consist of the data frame
and the environment in which the formula was constructed.

The two approaches both use the data frame, if supplied, as the first
place to find variable; they only differ in how they handle the case
where the data frame does not contain the values.

The call used in this example is:

	lm(formula = formula, data = datos, weights = datos$x2)

An explicit data argument is given but the data frame datos only
contains the components y, x1, x2, x3, and counter.  The expression
provided as the weights argument is datos$x2.  When the expression is
evaluated, datos is not found in the data frame provided, so the
default environment is used.  Under 1.1.1 that is the caller's
environment and you get what you want. In the devel branch it is the
environment in which the formula was created, which is the global
environment.

With all that, back to the simple solution: The weights argument x2 is
an expression argument and is intended to refer to the x2 component of
the data frame.  When the expression is evaluated, the first place the
evaluation looks for variable values, both in 1.1.1 and in devel, is
the data frame.  So you get the answer you want in both cases.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 12:07:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131107.NAA15331@pubhealth.ku.dk>

I'm just back from a computer practical where we ran into

> "f" <- function(x) 2(x^2) # for 2 * x^2

This definition was taken as legitimate, although using the
function generated the error message

> f(3)
Error in f(3) : attempt to apply non-function

Am I right in thinking that in prevous versions of R this
definition would have been declared as a syntax error?  Surely a
number before an opening parenthesis is always a syntax error?
The other mistake does this:

> "f" <- function(x) 2x^2 # another attempt at 2 * x^2
Error: syntax error

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 14:08:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 15:08:19 +0200
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)"
References: <200010131107.NAA15331@pubhealth.ku.dk>
Message-ID: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I'm just back from a computer practical where we ran into
> 
> > "f" <- function(x) 2(x^2) # for 2 * x^2
> 
> This definition was taken as legitimate, although using the
> function generated the error message
> 
> > f(3)
> Error in f(3) : attempt to apply non-function
> 
> Am I right in thinking that in prevous versions of R this
> definition would have been declared as a syntax error? 

I don't think so... Splus 3.4 does likewise:

> 2(3)
Error: "2" is not a function
>  "f" <- function(x) 2(x^2)
> f(3)                    
Error in f(3): "2" is not a function
Dumped


> Surely a
> number before an opening parenthesis is always a syntax error?

Sounds like it might be so (although sometimes there are surprises).
However, it may not be all that easy or worth it to fix the parser to
recognise this case.

In general you can have any expression evaluating to the function
to be called. If you do f(x)(3), f(x) may or may not be a function
and you can only detect whether it is one at runtime.

>From the parsers point of view there are only a few cases where it is
manifestly obvious that an expression cannot lead to a valid function.
Consider for instance the following silly stunt:

> g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> g(3)
[1] 1.098612

The operative bit is in src/main/gram.y

expr	: 
      ...

        |       expr '(' sublist ')'            { $$ = xxfuncall($1,$3); }

in which the expr is unrestricted and can be any R expression. One
could, I suppose, define a (say) "funexpr" syntactic entity which is just
like an "expr", except that if it is non-complex, then it has to be an
identifier or a character string. I think it would get quite kludgy,
though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 14:33:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 08:33:57 -0500 (CDT)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 13, 2000 03:08:19 pm"
Message-ID: <200010131333.IAA23307@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> J.C.Rougier@durham.ac.uk writes:
> 
> > I'm just back from a computer practical where we ran into
> > 
> > > "f" <- function(x) 2(x^2) # for 2 * x^2
> > 
> > This definition was taken as legitimate, although using the
> > function generated the error message
> > 
> > > f(3)
> > Error in f(3) : attempt to apply non-function
> > 
> > Am I right in thinking that in prevous versions of R this
> > definition would have been declared as a syntax error? 
> 
> I don't think so... Splus 3.4 does likewise:
> 
> > 2(3)
> Error: "2" is not a function
> >  "f" <- function(x) 2(x^2)
> > f(3)                    
> Error in f(3): "2" is not a function
> Dumped
> 
> 
> > Surely a
> > number before an opening parenthesis is always a syntax error?
> 
> Sounds like it might be so (although sometimes there are surprises).
> However, it may not be all that easy or worth it to fix the parser to
> recognise this case.
> 
> In general you can have any expression evaluating to the function
> to be called. If you do f(x)(3), f(x) may or may not be a function
> and you can only detect whether it is one at runtime.
> 
> >From the parsers point of view there are only a few cases where it is
> manifestly obvious that an expression cannot lead to a valid function.
> Consider for instance the following silly stunt:
> 
> > g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> > g(3)
> [1] 1.098612
> 

I agree--I'd call this a type error in evaluation, not a syntax error.

One thing to keep in mind is that R expressions can be used for things
other that evaluation, for example in representing aspects of models.
Someone might want at some point to attach meaning to something like

	y ~ 2(x)+z

That would be impossible (or at least very dificult) if the expression
were made syntactically invalid.

It would be possible to have a semantic checking tool for R that walks
over the code and warns when it sees such an expression, but it should
not be considered an error since it could be legitimate.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:32 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:50:32 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131450.QAA18383@pubhealth.ku.dk>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Oct 2000 15:50:40 +0100 (BST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <200010131333.IAA23307@goose.stat.umn.edu>
Message-ID: <Pine.GSO.4.20.0010131543551.28177-100000@laplace>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:57:09 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)
Subject: [Rd] Cautionary tale about c (PR#695)
Message-ID: <200010131457.QAA18499@pubhealth.ku.dk>

This situation arose in a computer practical this morning.  A
student overwrote "c" with a function.  This messes up lots of
things, but it is difficult to remove the function "c" from the
global environment because it is used as a function in both "rm"
and "remove".  [The solution was to reassign "c" as a number, and
then remove it.]  Would it be reasonable in "rm" and "remove" to
insist that the "c" function is got from the base?  The same
might apply to ".Internal" and "as.character", which are also
used.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 16:34:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 17:34:07 +0200
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)"
References: <200010131457.QAA18499@pubhealth.ku.dk>
Message-ID: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.

Hmm. This would seem to be doable by having line 2 of rm() as

get("c","package:base")(list, names)

You do have to be circumspect: there are calls to match(),
as.character(), and pos.to.env() in that construction, but neither
uses c().
 
Currently, get("c", envir=NULL) also works, but (for other reasons)
I'm on the warpath against using NULL for the base environment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Oct 13 16:32:36 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 13 Oct 2000 08:32:36 -0700 (PDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010130831010.20300-100000@atlas.biostat.washington.edu>

On 13 Oct 2000, Peter Dalgaard BSA wrote:

> J.C.Rougier@durham.ac.uk writes:
> 
> > This situation arose in a computer practical this morning.  A
> > student overwrote "c" with a function.  This messes up lots of
> > things, but it is difficult to remove the function "c" from the
> > global environment because it is used as a function in both "rm"
> > and "remove".  [The solution was to reassign "c" as a number, and
> > then remove it.]  Would it be reasonable in "rm" and "remove" to
> > insist that the "c" function is got from the base?  The same
> > might apply to ".Internal" and "as.character", which are also
> > used.
> 
> Hmm. This would seem to be doable by having line 2 of rm() as
> 
> get("c","package:base")(list, names)
> 
> You do have to be circumspect: there are calls to match(),
> as.character(), and pos.to.env() in that construction, but neither
> uses c().
>  
> Currently, get("c", envir=NULL) also works, but (for other reasons)
> I'm on the warpath against using NULL for the base environment.

You can use .Primitive("c")(list, names) in this case, which doesn't rely
on any other functions.

Trying to do something similar for, say, as.character, assumes that
as.character is more likely to be redefined than `get', which I don't
believe

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 16:42:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 10:42:44 -0500 (CDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <200010131457.QAA18499@pubhealth.ku.dk> from "J.C.Rougier@durham.ac.uk" at "Oct 13, 2000 04:57:09 pm"
Message-ID: <200010131542.KAA25280@goose.stat.umn.edu>

J.C.Rougier@durham.ac.uk wrote:
> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.
> 

One thing we've been talking about a bit is adding some form of name
space management.  This would insure the the c referred to in rm would
be the c in base.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Oct 13 18:07:46 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 13 Oct 2000 19:07:46 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <200010121903.OAA12130@goose.stat.umn.edu>
References: <200010121903.OAA12130@goose.stat.umn.edu>
Message-ID: <00101319240704.01544@ligarto>

Thanks a lot to Thomas Lumley, Peter Dalgaard, and Luke Tierney for their
answers. 


I think I understand why the function failed, and the workaorunds. However,
would it be appropriate if a call such as:


my.function <- function(formula, data){
# other stuff
    lm(formula = formula, data = data, weights = data$x2)
} 

my.function(formula, datai)


where to return an error, instead of simply ignoring the weights=data$x2
argument? (especially since such a thing used to work and might be used in
other code)

Ramon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct 14 07:10:11 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 14 Oct 2000 08:10:11 +0200 (MET DST)
Subject: [Rd] sys.xxx documentation (PR#696)
Message-ID: <200010140610.IAA20750@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for sys.calls(), sys.frames(), sys.parents(), etc. lists
sys.nframe() and sys.function() in the usage section (and sys.nframe()
shows up in the examples), but they are never mentioned in the text of
the man page.

my suggested text for sys.nframe is, "sys.nframe returns the current size
of the frame stack, i.e., the frame number of the caller."  i have no idea
what sys.function does.

also, 

> sys.call and sys.frame both accept either positive or negative values
> for the argument which. Positive values of which are normal frame numbers
> whereas negative values are counted back from the frame number of the
> current evaluation. 

i believe this should be "accept integer values for the argument which", and
"Non-negative values of which are normal frame numbers"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 02:04:00 2000
From: flip@skidmore.edu (flip@skidmore.edu)
Date: Mon, 16 Oct 2000 03:04:00 +0200 (MET DST)
Subject: [Rd] build errors in configure script (PR#697)
Message-ID: <200010160104.DAA25206@pubhealth.ku.dk>

Full_Name: flip phillips
Version: 1.1.1
OS: Mac OS X
Submission from: (NULL) (24.29.65.207)


the lack of '-lm' in the Macintosh OS X / Dylan release seems to play a bit of
havoc w/ the build. For example, the test for libf2c.a fails, not because the
library is missing, but because -lm is missing. (the configure looks a little
like it wants to check for it but it doesn't really need to)

i fixed it temporarily by majing a null libm.a, but i suspect this should really
be changed in the configure script

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 16 07:45:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Oct 2000 08:45:29 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <200010160104.DAA25206@pubhealth.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
Message-ID: <14826.41993.450739.759375@mithrandir.hornik.net>

>>>>> flip  writes:

> Full_Name: flip phillips
> Version: 1.1.1
> OS: Mac OS X
> Submission from: (NULL) (24.29.65.207)


> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> not because the library is missing, but because -lm is missing. (the
> configure looks a little like it wants to check for it but it doesn't
> really need to)

> i fixed it temporarily by majing a null libm.a, but i suspect this
> should really be changed in the configure script

Do I understand this correctly that there is no libm.a on the above
platform?  What is used instead?

I think we could fix the problem, by first checking for libm.a (which we
do lateron anyway), and then do the Fortran checking.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 16 10:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2000 11:35:52 +0200
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: Kurt Hornik's message of "Mon, 16 Oct 2000 08:45:29 +0200 (CEST)"
References: <200010160104.DAA25206@pubhealth.ku.dk> <14826.41993.450739.759375@mithrandir.hornik.net>
Message-ID: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> > not because the library is missing, but because -lm is missing. (the
> > configure looks a little like it wants to check for it but it doesn't
> > really need to)
> 
> > i fixed it temporarily by majing a null libm.a, but i suspect this
> > should really be changed in the configure script
> 
> Do I understand this correctly that there is no libm.a on the above
> platform?  What is used instead?
> 
> I think we could fix the problem, by first checking for libm.a (which we
> do lateron anyway), and then do the Fortran checking.

Maybe we should wait for MOSX to come out of beta before changing
anything. I can imagine that more than one Unix program (to say the
least -- -lm is probably the one thing that has *never* been broken
before) would break because of this, so perhaps they want to fix it in
the OS ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 12:27:06 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 16 Oct 2000 12:27:06 +0100 (BST)
Subject: [Rd] Logical indexing
Message-ID: <Pine.GSO.4.20.0010161220350.2598-100000@laplace>

Am I right in thinking that R.1.1.1 is using a different convention (to
previous versions) regarding logical indexing of vectors and lists?  I
feel that supplying a boolean of the wrong length should generate an
error, but now

> (1:4)[rep(TRUE, 10)]
 [1]  1  2  3  4 NA NA NA NA NA NA

I think that if this effect is desired then

> (1:4)[1:10]

would be the appropriate syntax.  Preserving the integrity of the logical
operator provides a useful error trap for programmers who specifically
want to avoid this kind of behaviour.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 14:01:28 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 16 Oct 2000 15:01:28 +0200 (MET DST)
Subject: [Rd] print problem with data frames (PR#698)
Message-ID: <200010161301.PAA02685@pubhealth.ku.dk>

Another one from the student computer practicals: it is possible
to create a dataframe that cannot be printed.  Thus

> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> tmp
Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> print.default(tmp)
$"NA"
NULL

$"NA"
NULL

attr(,"class")
[1] "data.frame"

This obviously relates to my previous posting to r-devel about
subscripting objects with logical vectors that are not the right
length.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 14:43:51 2000
From: flip@skidmore.edu (flip phillips)
Date: Mon, 16 Oct 2000 09:43:51 -0400
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <B6107E57.1D0A%flip@skidmore.edu>

on 10/16/00 5:35 AM, Peter Dalgaard BSA at p.dalgaard@biostat.ku.dk wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
>>> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>>> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>>> not because the library is missing, but because -lm is missing. (the
>>> configure looks a little like it wants to check for it but it doesn't
>>> really need to)
>> 
>>> i fixed it temporarily by majing a null libm.a, but i suspect this
>>> should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.
> 
> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

This really isn't a MacOS X issue as much as a Darwin issue I believe.
Darwin is the open-source BDS based underpinnings of OS X. The TCL
implementation is unusual as well, and I'll take care of figuring that into
the equation as soon as I can get the rest of the thing to compile. Right
now I'm messing with shared library issues.

A look at the Darwin mailing lists might be in order to see why libm.a isn't
a part, etc. 


-- 
flip phillips, phd
skidmore college
http://www.skidmore.edu/~flip

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct 16 15:31:48 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Oct 2000 10:31:48 -0400
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <39f30e2f.320696055@fisher.stats.uwo.ca>

On Mon, 16 Oct 2000 15:01:28 +0200 (MET DST), you wrote in message
<200010161301.PAA02685@pubhealth.ku.dk>:

>Another one from the student computer practicals: it is possible
>to create a dataframe that cannot be printed.  Thus
>
>> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
>> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
>> tmp
>Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
 ...
>This obviously relates to my previous posting to r-devel about
>subscripting objects with logical vectors that are not the right
>length.

In this case the problem is that the indexing is missing a comma.  You
should have had 

  tmp <- fred[c(FALSE, FALSE, TRUE, TRUE),]

because that's how you select cases.  Without the comma, you're
treating the data.frame as a list containing two entries ("happy" and
"sad"), then creating a new one consisting of the 3rd and 4th entries
of that list (which are NA). It still has the data.frame class though,
so you get the error when you try to print it.

I think it might be nice to warn people about that kind of indexing,
because it's rarely intentional, but it would be really hard to do.
You'd need something like a "novice warning level" option, and writers
of procedures would have to anticipate all the common errors novices
would make.

Duncan Murdoch

P.S. to the developers: When I tried to copy and paste Jonathan's code
into a newly opened copy of R using the Edit menu, I got an error I
haven't seen before when I tried to open the menu:  "No selection".  I
can't reproduce this reliably yet, but I'll let you know if I figure
out what triggered it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Oct 16 16:06:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 17 Oct 2000 04:06:30 +1300
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>; from J.C.Rougier@durham.ac.uk on Mon, Oct 16, 2000 at 03:01:28PM +0200
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <20001017040630.A25302@stat1.stat.auckland.ac.nz>

This is known (at least to some of us) and there are other problems
with data frames and their printing. Hopefully I will have some 
fixes for 1.2.

  Robert

On Mon, Oct 16, 2000 at 03:01:28PM +0200, J.C.Rougier@durham.ac.uk wrote:
> Another one from the student computer practicals: it is possible
> to create a dataframe that cannot be printed.  Thus
> 
> > fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> > tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> > tmp
> Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> > print.default(tmp)
> $"NA"
> NULL
> 
> $"NA"
> NULL
> 
> attr(,"class")
> [1] "data.frame"
> 
> This obviously relates to my previous posting to r-devel about
> subscripting objects with logical vectors that are not the right
> length.
> 
> Cheers, Jonathan.
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 17 11:13:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Oct 2000 12:13:18 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
 <14826.41993.450739.759375@mithrandir.hornik.net>
 <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <14828.9790.506565.986235@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>> > not because the library is missing, but because -lm is missing. (the
>> > configure looks a little like it wants to check for it but it doesn't
>> > really need to)
>> 
>> > i fixed it temporarily by majing a null libm.a, but i suspect this
>> > should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.

> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

Sounds like a good plan to me.

Are there *UNIX* systems without -lm?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 16:41:44 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 08:41:44 -0700
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <87pukzxyo7.fsf@jeeves.blindglobe.net>


Suppose one wanted to build an R wizard for packaging...

One would need to specify and create:
        package-name/
        package-name/Description
        package-name/INDEX
        package-name/R/
        package-name/man/
        package-name/src/

>From this, we'd "probably" like to:
- script-up the Description
- provide a script for regenerating INDEX by calling out to the shell
- provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
- ??

thoughts?  (Sometimes, spending serious time with JDE suggests definite
improvements...)

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:09:41 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:09:41 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "17 Oct 2000 08:41:44 -0700")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <87itqrxxdm.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
    AJR> - provide a script for
    AJR> regenerating INDEX by calling out to the shell

I meant by this, an Emacs function, i.e. 
        M-x ess-regen-INDEX
which runs the appropriate R CMD script.




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 17 17:38:25 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Oct 2000 17:38:25 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>

On 17 Oct 2000, A.J. Rossini wrote:

> 
> Suppose one wanted to build an R wizard for packaging...
> 
> One would need to specify and create:
>         package-name/
>         package-name/Description
>         package-name/INDEX
>         package-name/R/
>         package-name/man/
>         package-name/src/
> 
> >From this, we'd "probably" like to:
> - script-up the Description
> - provide a script for regenerating INDEX by calling out to the shell
> - provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
> - ??
> 
> thoughts?  (Sometimes, spending serious time with JDE suggests definite
> improvements...)

I'm a bit lost: you of all people don't really want a Windows wizard do
you?

Given how much R CMD check and R CMD build will do for you, about all I
can see that one could usefully add is a template for DESCRIPTION (and
it is all u/case).  Well, one could get prompt() to generate templates
for allthe undocumented R objects, but then people would forget to
complete them....

Just how much time do people spend packaging new packages anyway?
I probably have as many on CRAN as anyone else, and I do this rarely.
Checking them is another matter!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:50:40 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:50:40 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 (Prof Brian Ripley's message of "Tue, 17 Oct 2000 17:38:25 +0100 (BST)")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
Message-ID: <87g0lvxvhb.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> I'm a bit lost: you of all people don't really want a Windows
    PBR> wizard do you?

No, an Emacs wizard.

    PBR> Just how much time do people spend packaging new packages
    PBR> anyway?  I probably have as many on CRAN as anyone else, and
    PBR> I do this rarely.  Checking them is another matter!

My thoughts were based on the recent thread re: local functions in a
package, and making that easier (as well as documented).

R will do a good bit, and the question is how much more would be
needed in support so that 
        M-x R-package-wizard
creates a filled out package framework (without the autocoding, of
course). 

best,
-tony        

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From -----sextoys@hotmail.com  Wed Oct 18 23:08:48 2000
From: -----sextoys@hotmail.com (www.sextoysrus.com.au)
Date: Wed, 18 Oct 2000 22:08:48
Subject: [Rd] Australia's Greatest Online Exotic Novelty Store is back...
Message-ID: <200010181106.NAA03235@stat.math.ethz.ch>

Too all our valued customers, please note our website " www.sextoysrus.com.au " is back 
online. 
Sorry for the inconvience.  ( HAPPY SHOPPING)
If you have received this email Via unsolicated means please delete. Thankyou.....
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct 18 12:23:52 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 18 Oct 2000 13:23:52 +0200 (CEST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87g0lvxvhb.fsf@jeeves.blindglobe.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 <87g0lvxvhb.fsf@jeeves.blindglobe.net>
Message-ID: <14829.34888.734719.113850@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
PBR> I'm a bit lost: you of all people don't really want a Windows
PBR> wizard do you?

> No, an Emacs wizard.

PBR> Just how much time do people spend packaging new packages
PBR> anyway?  I probably have as many on CRAN as anyone else, and
PBR> I do this rarely.  Checking them is another matter!

> My thoughts were based on the recent thread re: local functions in a
> package, and making that easier (as well as documented).

> R will do a good bit, and the question is how much more would be
> needed in support so that 
>         M-x R-package-wizard
> creates a filled out package framework (without the autocoding, of
> course). 

I think it would be nice to have a function for creating a DESCRIPTION
file, marking which fields are required and which ones are optional
(e.g., like AUCTeX bibtex mode).

Directory stubs are perhaps not that much needed.  Peter once suggested
to make the corresponding documentation in R-exts more hands-on, so that
one gets a simple worked-out packaging example, and I think we want to
do this (eventually).

The package wizard might also offer to generate files like TITLE, INDEX
and data/00Index automatically, but this is done by R CMD check/build
anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Oct 18 14:57:20 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Oct 2000 09:57:20 -0400
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <14829.34888.734719.113850@mithrandir.hornik.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net> <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats> <87g0lvxvhb.fsf@jeeves.blindglobe.net> <14829.34888.734719.113850@mithrandir.hornik.net>
Message-ID: <39f0a9dc.167697614@fisher.stats.uwo.ca>

For people like me who mainly use Windows, the package documentation
is rather intimidating.  It's not clear which parts of it work and
which don't, or what tools beyond base R I need to build a package
entirely within Windows (or if that is even possible).

A wizard would be helpful, but it's a lot of work for relatively few
people to use.  An easier solution would be a short document listing
all the steps necessary to build a package in Windows, including at
least pointers to the document of all the tools that should be
installed first.

This should probably contain two sections:  building a package that's
intended to be portable to other systems, and building one that's
going to be packaged in a .zip file for Windows-only use.

If someone wants to volunteer to answer questions when I get stuck,
I'll volunteer to produce the document.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 18 15:14:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Oct 2000 15:14:48 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <200010181414.PAA20875@toucan.stats.ox.ac.uk>

> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Wed, 18 Oct 2000 09:57:20 -0400
> 
> For people like me who mainly use Windows, the package documentation
> is rather intimidating.  It's not clear which parts of it work and
> which don't, or what tools beyond base R I need to build a package
> entirely within Windows (or if that is even possible).
> 
> A wizard would be helpful, but it's a lot of work for relatively few
> people to use.  An easier solution would be a short document listing
> all the steps necessary to build a package in Windows, including at
> least pointers to the document of all the tools that should be
> installed first.
> 
> This should probably contain two sections:  building a package that's
> intended to be portable to other systems, 

That is in `Writing R Extensions'.  Building it is exactly the same
as on Unix, but checking is not quite.

> and building one that's
> going to be packaged in a .zip file for Windows-only use.
> 
> If someone wants to volunteer to answer questions when I get stuck,
> I'll volunteer to produce the document.

Um.  I've already written one, called readme.packages in rw1011sp.zip.
It does have a list a tools to install first (and a reference
to an on-line portal for the current versions).  If you really
think that is inadequate (and it seems to have sufficed for those
who can follow instructions) please at least start from what is there.

The mechanics will change with R 1.2.0.  If you want to see where
this is going, take a look at the pre-release at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

and especially the revised `Writing R Extensions' manual there.  The
Windows and Unix procedures have become much closer.  Now don't go and
tell me I have wasted my time on making all these tools available on
Windows too, as well as writing manuals no one wanted/noticed!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 19 09:57:19 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 19 Oct 2000 09:57:19 +0100 (BST)
Subject: [Rd] Rterm on Windows 2000 now works.
Message-ID: <200010190857.JAA21730@toucan.stats.ox.ac.uk>

Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
documented (and I can find nothing about this in MicroSoft's Knowledge
Base except that it is known to happen under a debugger).

The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
now incoporates the fix, and we intend to make available a patched
R.dll for rw1011 shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 19:16:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 14:16:48 -0400
Subject: [Rd] remove(ls())
Message-ID: <39EF3A90.9580C6B5@bank-banque-canada.ca>

It's been a long time since I tried this:

> remove(ls())
Warning message:
remove: variable "ls()" was not found

Is it intentional that this does not work (in 1.1.1 and R-devel)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 19 19:48:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Oct 2000 19:48:21 +0100 (BST)
Subject: [Rd] remove(ls())
In-Reply-To: <39EF3A90.9580C6B5@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>

On Thu, 19 Oct 2000, Paul Gilbert wrote:

> It's been a long time since I tried this:
> 
> > remove(ls())
> Warning message:
> remove: variable "ls()" was not found
> 
> Is it intentional that this does not work (in 1.1.1 and R-devel)?

AFAIK only remove(list=ls()) has ever worked in R.

In R rm() and remove() are the same thing.  In S they are not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 20:18:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 15:18:26 -0400
Subject: [Rd] remove(ls())
References: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>
Message-ID: <39EF4902.ABD37F17@bank-banque-canada.ca>

>AFAIK only remove(list=ls()) has ever worked in R.

Ok, it is possible I've never tried this in R, and re-reading the documentation
now that I understand, I can see that it actually says that. This might be a
useful example in the help for remove, especially for anyone expecting S-like
behavior.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 19 21:34:53 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 19 Oct 2000 16:34:53 -0400 (EDT)
Subject: [Rd] legend -- one more try
Message-ID: <Pine.LNX.4.10.10010191627590.9311-100000@bolker.zoo.ufl.edu>


  Dermot MacSweeney pointed out to me that after my "fix" of legend(),
points were no longer coming out placed in the middle of the lines, but at
the right-hand edge.  It turns out that naively swapping the order of
point-drawing and line-drawing also messes up the bookkeeping that
legend() does on the current x-location.  Here's my patch, which fixes
that bookkeeping (and incidentally substitutes "seg.len" for 2 where it
refers to the length of the drawn line segments in units of x.char; one
could make seg.len user-settable, I don't know if it's worth the bother).

  This time the patch is against the current legend() in R-devel.

*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-     
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }
  
      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }
  
      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Oct 20 09:06:10 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Fri, 20 Oct 2000 10:06:10 +0200
Subject: [Rd] Rterm on Windows 2000 now works.
In-Reply-To: <200010190857.JAA21730@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Oct 19, 2000 at 09:57:19AM +0100
References: <200010190857.JAA21730@toucan.stats.ox.ac.uk>
Message-ID: <20001020100610.A18860@sirio.stat.unipd.it>

On Thu, Oct 19, 2000 at 09:57:19AM +0100, Prof Brian Ripley wrote:
> Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
> modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
> documented (and I can find nothing about this in MicroSoft's Knowledge
> Base except that it is known to happen under a debugger).
> 
> The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> now incoporates the fix, and we intend to make available a patched
> R.dll for rw1011 shortly.
> 
> -- 

  A patched R.dll for rw1011 is available at
      ftp://ftp.stat.unipd.it/users/guido/RWin/fixed/
  In few days, it will be also available from your preferred CRAN
  mirror, in /bin/windows/windows-NT/base/fixed.
  There is a two lines ReadMe explaining how to install.	

  I would be glad to hear about successes and failures (not on the
  list, however).

  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ratjamm@alum.mit.edu  Fri Oct 20 20:46:19 2000
From: ratjamm@alum.mit.edu (ratjamm@alum.mit.edu)
Date: Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)
Subject: [Rd] bug in pnorm (PR#699)
Message-ID: <200010201946.VAA13126@pubhealth.ku.dk>

Full_Name: James Michael Rath
Version: all (I think)
OS: doesn't matter
Submission from: (NULL) (129.116.226.162)


The code for pnorm in R was adapted from a Fortran library published in the ACM
TOMS journal.  The published version had a typographical error, though, which
was
pointed out in a second article published three years after the original.

The error was that a macro/variable named SIXTEN had a value of 1.6e0 instead of
the
correct 1.6e1 (that is, 16 not 1.6).  The author of the code for R (Ross
Ithaka?)
must have worked from an outdated version of SPECFUN and not the corrected one
that
now appears in CALGO, STATLIB, et cetera.

There is a macro in pnorm.c (in the nmath directory) which looks like:
#define SIXTEN	1.6	/* Magic Cutoff */
It should be something like:
#define SIXTEN	16.0	/* Magic Cutoff */

I know this appears in R version 1.1.1.  I know it also appears in older
versions.
I do not know if it appears in newer ones.


The relevant references from ACM TOMS are:

Cody, W. D.  "Algorithm 715: SPECFUN - A portable FORTRAN package of special
  function routines and test drivers," in ACM TOMS 19, 22-32, 1993.

Price, David T.  "Remark on algorithm 715," in ACM TOMS 22(2), 258, 1996.


Jim


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 20 22:56:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Oct 2000 23:56:59 +0200
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: ratjamm@alum.mit.edu's message of "Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)"
References: <200010201946.VAA13126@pubhealth.ku.dk>
Message-ID: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>

ratjamm@alum.mit.edu writes:

> There is a macro in pnorm.c (in the nmath directory) which looks like:
> #define SIXTEN	1.6	/* Magic Cutoff */
> It should be something like:
> #define SIXTEN	16.0	/* Magic Cutoff */
> 
> I know this appears in R version 1.1.1.  I know it also appears in older
> versions.
> I do not know if it appears in newer ones.

Hmm. I tried making the appropriate change and plotting 

plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))

for 

x<-seq(0,-16,-.01)

and

x<-seq(0,16,.01)

I'll be darned if I can spot the difference. Where would you expect to
find it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From organism@ticam.utexas.edu  Sat Oct 21 01:23:02 2000
From: organism@ticam.utexas.edu (James Michael Rath)
Date: Fri, 20 Oct 2000 19:23:02 -0500 (CDT)
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0010201741440.8601-100000@oreosis.ticam.utexas.edu>

> ratjamm@alum.mit.edu writes:
> 
> > There is a macro in pnorm.c (in the nmath directory) which looks like:
> > #define SIXTEN	1.6	/* Magic Cutoff */
> > It should be something like:
> > #define SIXTEN	16.0	/* Magic Cutoff */
> > 
> > I know this appears in R version 1.1.1.  I know it also appears in older
> > versions.
> > I do not know if it appears in newer ones.
> 
> Hmm. I tried making the appropriate change and plotting 
> 
> plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))
> 
> for 
> 
> x<-seq(0,-16,-.01)
> 
> and
> 
> x<-seq(0,16,.01)
> 
> I'll be darned if I can spot the difference. Where would you expect to
> find it?

I see that you're trying to test whether an approximation to the
derivative of pnorm is equal to dnorm.  If you look at the plot you
generated, either the old pnorm or the "correct" one will qualitatively
look like a flat line near y=1.  (A sidebar: I'm not sure why you chose to
examine things over the domain (-16,0) and (0,16).  I'm guessing you were
misled by the inappropriate labelling of SIXTEN as a "magic cutoff" by
Ihaka.  I'll explain the role of SIXTEN below.)

Qualitative accuracy was not what I had in mind.  The routines were
originally written by Cody to achieve full double precision accuracy (on
machines which could support it).  That is, he aimed for 18 decimal places
of accuracy in the routines.

When calculating pnorm(x), the range of abs(x) is split into four
pieces: (0,0.66291), (0.66291,sqrt(32), (sqrt(32),somelimit), and
everything else.  In the first piece, a certain rational approximation is
used to calculate the function value.  In the second two pieces, two
additional (each different) rational approximations are used modulo a
multiplication by exp(-0.5*x*x).  The calculation of the multiplication by
exp(-0.5*x*x) is where SIXTEN is used.

Lines 176-187 of pnorm.c in R version 1.1.1 looks like
#define do_del(X)							\
	xsq = floor(X * SIXTEN) / SIXTEN;				\
	del = (X - xsq) * (X + xsq);					\
	if(log_p) {							\
	    *cum = (-xsq * xsq * 0.5) + (-del * 0.5) + log(*cum);	\
	    if((lower && x > 0.) || (upper && x <= 0.))			\
		*ccum = log(1.0 - exp(*cum));				\
	}								\
	else {								\
	    *cum = exp(-xsq * xsq * 0.5) * exp(-del * 0.5) * *cum;	\
	    *ccum = 1.0 - *cum;						\
	}
This macro is then called on y (which was previously set to fabs(x)).  The
effect of the line "xsq = floor(y*SIXTEN)/SIXTEN" is to set xsq to a value
approximating y to the nearest sixteenth (from below).  The exponential is
then computed in two parts: we write y=xsq+(y-xsq) and compute
exp(-0.5*y*y)=exp(-0.5*xsq*xsq)*exp(-0.5*del).  Despite the algebraic
equivalence between these two expressions, the RHS is a more numerically
accurate formula than the LHS (for the domain we are interested in).

The effect of substituting 1.6 for 16 is twofold.  First, xsq only gets
rounded to the nearest 1.6eenth (to the closest multiple of 1/1.6).  The
change from exp(-0.5*y*y) to exp(-0.5*xsq*xsq)*exp(-0.5*del) then loses
most of its effectiveness.  Second, multiplication and division by 16 in
IEEE floating point arithmetic gets computed exactly.  The operations for
1.6 do not (1.6 ~ 1.10011... - it is a non-terminating binary
number).  This introduces spurious numerical errors where there should be
none.

The overall effect of changing 1.6 to 16 is subtle at best and insidious
at worst.  We had accuracy to full precision with 16, but now do not with
1.6.



After looking at the R code a bit more carefully, I notice there are a few
other significant (numerically, at least) changes to Cody's library.

The first has to do with the fuzzy "somelimit" that I used above in
describing the domain split.  If x is positive, then "somelimit" is the
largest number above which pnorm(x) is indistinguishable from 1 (to the
working precision).  If x is negative, then "somelimit" is the negative of
the smallest number below which pnorm(x) is indistinguishable from 0 (to
working precision).  Cody called these two (different) numbers XLOW and
XUPPR, and distinguished their use in the code.  Ihaka, on the other hand,
simply hard-coded 50 for both.  For double precision, XLOW should be about
-37.5 and XUPPR about 8.6.  This has two effects.  First, there is a
slow-down because calculations involving a rational asymptotic formula are
taking place when then don't have to.  This isn't too serious because
most people call pnorm with much smaller arguments most of the time (and
the time taken to calculate that asymptotic expression takes no more time
to calculate the other rational expressions used).  The second effect
could potentially be serious, though.  Cody's code didn't cause any IEEE
floating point error flags to be set unneccesarily.  Ihaka's code
does.  In order to put Ihaka's code back in line with Cody's code would
take only a minor modification (one extra comparison which wouldn't
reduce readability or the difficulty of the logic).

The second significant change has to do with the rounding to sixteenths
again.  The rounding takes place twice: once in the case where y is in 
(0.66291,sqrt(32), and once where y is in (sqrt(32),somelimit).  I only
discussed the first one above (for brevity's sake; perhaps I should've
mentioned it earlier).  My comments above about changing 1.6 to 16 apply
to both, but this second comment only applies to the second case.  Cody's
code actually rounds towards zero (towards the nearest sixteenth) whereas
Ihaka's code rounds towards minus infinity.  That is, Cody uses the
Fortran AINT routine whereas Ihaka uses C's floor.  At first thought, I'm
not really sure just what the impact on accuracy is.  I suspect there is
none because of the range of arguments involved; however, I cannot say
this for sure.  I can get back to you on this if you'd like.

My last comment (phew!) has to do with the computation of
log(pnorm(x)).  Although the calculation of pnorm is accurate to full
precision (that is, to within 1 ULP) and so it that of log, the
composition may not be.  I'm not sure what the impact is (it's late on
Friday afternoon, and I'm running out of steam; sorry :( ), but I will
definitely get back to you on this.  One thing that definitely does worry
me is the computation of log(1-exp(*cum)).


Thanks for sticking with me through this whole message.  Numerical
analysis may be boring, but it definitely it worth it.  (I don't mean to
offend anyone by "boring," either! :)


Thanks much and have a good weekend!

j




.--- .- -- . ...
-- .. -.-. .... .- . .-..
... - .- .--. .-.. . - --- -.
.-. .- - ....  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010210515.HAA16365@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 686 *
Subject: inquiry
From: <bench1@onenetnow.com>
Date: Mon, 9 Oct 2000 00:23:53
* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 688 *
Subject:  Unreliable example in ?layout 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 10 Oct 2000 08:48:10 +0100 (BST)
* PR# 687 *
Subject:  cmdscale documentation 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 9 Oct 2000 10:23:20 +0100 (BST)
* PR# 691 *
Subject: invalid regular expression after many grep's
From: jutans@utans.u-net.com
Date: Wed, 11 Oct 2000 17:10:29 +0200 (MET DST)
* PR# 690 *
Subject: Bug?
From: "Armando Mateus Ferreira" <td2mafea@uco.es>
Date: Wed, 11 Oct 2000 11:21:19 +0200
* PR# 689 *
Subject: Documentation problem for ecdf
From: Kurt.Hornik@ci.tuwien.ac.at
Date: Tue, 10 Oct 2000 18:32:46 +0200 (MET DST)
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
* PR# 692 *
Subject: documentation bug in grep
From: pperkins@ucsd.edu
Date: Wed, 11 Oct 2000 19:25:03 +0200 (MET DST)
* PR# 696 *
Subject: sys.xxx documentation
From: pperkins@ucsd.edu
Date: Sat, 14 Oct 2000 08:10:09 +0200 (MET DST)
* PR# 695 *
Subject:  Cautionary tale about c 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 15:57:27 +0100 (BST)
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 23 11:01:15 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 23 Oct 2000 12:01:15 +0200 (CEST)
Subject: [Rd] is.integer and rank
Message-ID: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>


Hello, 

why does

> test <- rank(sample(10))
> test
 [1]  4  8  9 10  2  1  7  6  3  5
> is.integer(test)
[1] FALSE
> is.double(test)
[1] TRUE

make sense in R-1.1.1?  

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 23 11:20:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Oct 2000 12:20:07 +0200
Subject: [Rd] is.integer and rank
In-Reply-To: Torsten Hothorn's message of "Mon, 23 Oct 2000 12:01:15 +0200 (CEST)"
References: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <x2k8az3lm0.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

> Hello, 
> 
> why does
> 
> > test <- rank(sample(10))
> > test
>  [1]  4  8  9 10  2  1  7  6  3  5
> > is.integer(test)
> [1] FALSE
> > is.double(test)
> [1] TRUE
> 
> make sense in R-1.1.1?  

Ranks have to be able to include non-integers, hence storage mode
double

> rank(c(1,2,2,3))
[1] 1.0 2.5 2.5 4.0

More confusing is:

> is.integer(1)
[1] FALSE

> is.integer(1:1)
[1] TRUE

(both of which is for a reason, although I have temporarily forgotten
why we make integer sequences integer.... Speed issues, possibly)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Mon Oct 23 12:16:01 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (emmanuel.charpentier@sap.ap-hop-paris.fr)
Date: Mon, 23 Oct 2000 13:16:01 +0200 (MET DST)
Subject: [Rd] Probable bug in RODBC 0.7.x (PR#700)
Message-ID: <200010231116.NAA23785@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: R 1.1.1
OS: Windows 98 FE / Linux (Debian 2.2)
Submission from: (NULL) (164.2.255.244)


This bug report is pro forma. I've already reported it informally on R-help and
R-devel.

The current (0.7) version of RODBC has a problem with missing values. It
correctly
gets missing "character" values (as blanks), but puts the last non-missing value
of
the same variable in place of missing "numeric" values. Doubleplus ungood ...

Example :

In database : ==>     What I got in R    What I expected

1  Foo 1.0            1 "Foo" 1.0        1 "Foo" 1.0
2      2.0            2 ""    2.0        2 ""    2.0
3  Bar                3 "Bar" 2.0        3 "Bar" NA
4  Gee 4.0            4 "Gee" 4.0        4 "Gee" 4.0

This has been checked on Windows (links to remote Postgres, local MS-Access and
local
Excel) and Linux (links to Postgres, both local and remote, ODBC
manager=unixODBC,
drivers=unixODBC-bundled drivers).

A cursory preliminary look at the code was unsuccessful. I have to delve into
the
ODBC interface specification and learn how to debug C under R in order to go
further.

Michael Lapsley, author of the RODBC package, is aware of the problem, but has
no
fix yet (as of beginning of October).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Oct 23 20:06:05 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 23 Oct 2000 21:06:05 +0200 (MET DST)
Subject: [Rd] ambiguous (duplicated) names in model.matrix() (PR#701)
Message-ID: <200010231906.VAA28560@pubhealth.ku.dk>

Interaction terms in model.matrix() use "." to spearate the components
that are separate by ":" in the corresponding terms().

Not only is this (IMHO) visually unpleasing, but can lead to ambiguous
labelling. Notice that "x.a"  is duplicated and that "x.a.x.b" is
ambiguous in this context:

> lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4))$x
   (Intercept) x.a x.b  x a x.a.x.b x.a
1            1   1   1  1 1       1   1
2            1   2   2  2 2       4   4
3            1   0   3  3 1       0   3
4            1   1   0  4 2       0   8
5            1   2   1  5 1       2   5
6            1   0   2  6 2       0  12
7            1   1   3  7 1       3   7
8            1   2   0  8 2       0  16
9            1   0   1  9 1       0   9
10           1   1   2 10 2       2  20
attr(,"assign")
[1] 0 1 2 3 4 5 6
> terms(lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4)))
y ~ x.a + x.b + x + a + x.a:x.b + x:a
attr(,"variables")
list(y, x.a, x.b, x, a)
attr(,"factors")
    x.a x.b x a x.a:x.b x:a
y     0   0 0 0       0   0
x.a   1   0 0 0       1   0
x.b   0   1 0 0       1   0
x     0   0 1 0       0   1
a     0   0 0 1       0   1
attr(,"term.labels")
[1] "x.a"     "x.b"     "x"       "a"       "x.a:x.b" "x:a"    
attr(,"order")
[1] 1 1 1 1 2 2
attr(,"intercept")
[1] 1
attr(,"response")
[1] 1
>

The prototype uses ":" in both cases.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Mon Oct 23 20:13:04 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Mon, 23 Oct 2000 21:13:04 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010231913.VAA28614@pubhealth.ku.dk>

Full_Name: Joachim Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (195.102.198.233)


There seems to be a small inconsistency with using median in sapply with
handling names (looks like it has to do with the different handling when the
length is even/odd)
Specifically, sapply will concatenate listelement names and a member name if the
length of the member is odd.
Example follows:

> TMP.list_list(item1=c(a1=1,a2=2,a3=3), item2=c(b1=1,b2=2))
> TMP.list
$item1
a1 a2 a3
 1  2  3

$item2
b1 b2
 1  2

> sapply(TMP.list, mean)
item1 item2
  2.0   1.5
> sapply(TMP.list, median)
item1.a2    item2            !!!!!!!!!!!! note the ".a2"
     2.0      1.5
>

> sapply(TMP.list, median, USE.NAMES=F)
item1.a2    item2
     2.0      1.5
> lapply(TMP.list, median)
$item1
a2
 2

$item2
[1] 1.5




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 23 21:12:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 23 Oct 2000 22:12:02 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010232012.WAA28837@pubhealth.ku.dk>

On Mon, 23 Oct 2000 jutans@utans.u-net.com wrote:

> Full_Name: Joachim Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (195.102.198.233)
> 
> 
> There seems to be a small inconsistency with using median in sapply with
> handling names (looks like it has to do with the different handling when the
> length is even/odd)
> Specifically, sapply will concatenate listelement names and a member name if the
> length of the member is odd.

The apparent inconsistency is in
> median(c(a1=1,a2=2,a3=3))
a2 
 2 
> median(c(b1=1,b2=2))
[1] 1.5

which makes sense as in the first case the median is an element of the
input, and in the second it is not. Given that, sapply is doing perfectly
sensible things.  The prototype has an x <- as.vector(x) in its median,
and so strips the names from x. If you really want that, try

sapply(TMP.list, function(x) as.vector(median(x)))
item1 item2 
  2.0   1.5 

I suspect this is a feature, not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From loecher@scr.siemens.com  Tue Oct 24 18:07:18 2000
From: loecher@scr.siemens.com (loecher@scr.siemens.com)
Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241707.TAA09950@pubhealth.ku.dk>

Full_Name: Markus Loecher
Version: 1.1.1
OS: Solaris
Submission from: (NULL) (129.73.1.1)


When trying to install R on a Sun SPARC, make fails in the very end, here is the
error message:

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

Any help ?

Thanks,

Markus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 24 18:21:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 24 Oct 2000 19:21:04 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241721.TAA10019@pubhealth.ku.dk>

This has been reported before as PR#677 (and prior to that too).

If you have JPEG but not PNG, on Solaris, you need to add #include
<setjmp.h> after  #include <jpeglib.h>.  It is fixed in the
development version.


> From: loecher@scr.siemens.com
> Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] installation problems with rbitmap.c (PR#703)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Markus Loecher
> Version: 1.1.1
> OS: Solaris
> Submission from: (NULL) (129.73.1.1)
> 
> 
> When trying to install R on a Sun SPARC, make fails in the very end, here is 
the
> error message:
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> Any help ?
> 
> Thanks,
> 
> Markus
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 25 11:57:14 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 25 Oct 2000 11:57:14 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <200010251057.LAA23396@toucan.stats.ox.ac.uk>

> Date: mer., 25 oct. 2000 12:38:55 +0200
> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>

> I think it would be nice to have par(ask=T) set by default in termplot(),
> like it is in plot.lm().

Well, it isn't really the default in plot.lm, the default for `ask' being

interactive() && one.fig && length(which) > 1 && .Device != "postscript"

Can you supply us with an appropriate patch for termplot and
termplot.Rd?  The issue is somewhat subtle.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 25 14:25:43 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 25 Oct 2000 15:25:43 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010251325.PAA23115@pubhealth.ku.dk>

Turns out that someone forgot to call regfree in the internal code for
strsplit and also forgot to free pt there.  After I found those two,
there is no more memory build up in your example, although I did
not have the patience for 200k calls. (After 1000 there had been
appreciable buildup, and there was exactly none after the fixes.)

The memory management on the next version of R for Windows will be
radically different, and you will be able to set a limit on
total malloc-ed space, for example.  (R-core: this is an
example why one might want to.)


> From: "Joachim Utans" <jutans@utans.u-net.com>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Date: Thu, 12 Oct 2000 20:32:40 +0100
> Subject: Re: [Rd] invalid regular expression after many grep's (PR#691)
> X-Keywords: 
> 
> 
> While trying to create a simple test it turns out that the real
> culprit appears to be strsplit. What I am doing is to parse
> many lengthy text-files, perform some substitutions and write out
> the results (I probably should use Perl but this also does other R
> calculations). Some of the actions performed call strsplit but
> the error message always came from grep, but they both call the
> underlying regexp functions I assume.
> 
> Below is an example that fails on my machine after around 200k
> iterations (this of course is an inappropriate use of strsplit
> as the loop is not necessary).
> Machine is 2*733 PIII, 256Mb RAM, starting R with --vanilla,
> and R_VSIZE=160M, R_NSIZE=1500k.
> 
> 
> bugtest <- function(n=500, file="d:/rw/faq") {
>      for (j in 1:n) {
> 	     tmp <- scan(file, "", sep="\n")
>     	 for (i in 1:length(tmp)) {
>         	  x <- strsplit(tmp[i], " ")[[1]]
> 	     }
>     }
> }
> 
> After exiting with q(), R then crashes (try to access memory at 0x0000)
> N.B. strsplit(.,NULL) does not crash, no regexpr involved(?)
> 
> Come to think of it, when R does crash for me I think a large fraction
> of crashes occurs in functions that in some way call strsplit, though
> I have not kept track of this.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Wed Oct 25 19:49:20 2000
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)
Subject: [Rd] problem with "breaks" in histogram (PR#710)
Message-ID: <200010251849.UAA25821@pubhealth.ku.dk>

Full_Name: Matthew Wiener
Version: 1.1.1
OS: linux
Submission from: (NULL) (156.40.248.102)


I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
for
PPC, and Irix 6.5.

t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
hist(t1, breaks = 10)    (OK)
hist(t1/50, breaks = 10)
	Error in hist.defauilt(t1/50, breaks = 10):
	        some 'x' not counted; maybe breaks do not span range of x


The breaks generated by the call
hist(t1/50, breaks = 10) are (as printed just after the call to "pretty" on line
32
of hist.default):  0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89 0.90 0.91 0.92 .

>hist(t1/50, breaks = seq(from = 0.82, to = 0.92, by = .01))
gives me the error, but

>hist(t1/50, breaks =  c(.82, .83, .84, .85, .86, .87, .88, .89, .9, .91, .92))
does not.

It seems to be a numerical precision problem in generating the breaks, and
maybe
in seq() in general.  I tried 
printing the breaks generated with seq() with 20 digits precision, and the 
first and last breaks were 0.81999999999999995115 and 
0.91999999999999992895, and counts confirms that the value of 0.92 is being
missed
in this case.

And if I try
> hist(t1[-2]/50, breaks = 10), 
the extreme breaks are 0.82000000000000006217 and
0.92000000000000003997  and you miss the value of 0.82.

Maybe some sort of rounding of the breaks is in order, but it would need to
take
into account the actual size of the numbers you're dealing with.

I hope this report has enough information.  If not, please let me know what
else I can provide.  Thanks for the terrific software.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 25 20:55:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2000 21:55:48 +0200
Subject: [Rd] problem with "breaks" in histogram (PR#710)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)"
References: <200010251849.UAA25821@pubhealth.ku.dk>
Message-ID: <x28zrc3dbv.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
> for
> PPC, and Irix 6.5.
> 
> t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
> hist(t1, breaks = 10)    (OK)
> hist(t1/50, breaks = 10)
> 	Error in hist.defauilt(t1/50, breaks = 10):
> 	        some 'x' not counted; maybe breaks do not span range of x
> 
...
> Maybe some sort of rounding of the breaks is in order, but it would need to
> take
> into account the actual size of the numbers you're dealing with.
> 
> I hope this report has enough information.  If not, please let me know what
> else I can provide.  Thanks for the terrific software.

This has been reported before (in the guise of "pretty(x) does not
cover range(x)" or something close to that) and is already fixed in
the development sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:48:28 2000
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 27 Oct 2000 14:48:28 +0200 (MET DST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
Message-ID: <200010271248.OAA16181@pubhealth.ku.dk>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:47:41 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Fri, 27 Oct 2000 14:47:41 +0200
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <3.0.32.20001027144740.0091e450@162.38.183.200>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 27 14:47:56 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)
Subject: [Rd] Bug in hsv() (PR#712)
Message-ID: <200010271347.PAA16894@pubhealth.ku.dk>

Ross posted this code:

 persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)

I hadn't seen the cm.colors function before; it's very nice!  I wanted
to modify it a bit to allow the start and end colors as well as the
max saturation to be specified, and I think I may have turned up a bug
in the hsv() function.  Here's the evidence of the bug:

Look at the results of these two calls to hsv:

> hsv(h=0.833333333333333,s=0.5,v=1)
[1] "#FF8080"
> hsv(h=0.8333333333333333,s=0.5,v=1)
[1] "#FF80FF"

I think the 3 color components are listed as hex values in Blue,
Green, Red order here.  The two calls have nearly identical parameters
(differing in hue only in the 16th decimal place), but the red
component is twice as strong in the second one.

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 27 18:04:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 2000 19:04:15 +0200
Subject: [Rd] Bug in hsv() (PR#712)
In-Reply-To: murdoch@stats.uwo.ca's message of "Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)"
References: <200010271347.PAA16894@pubhealth.ku.dk>
Message-ID: <x2r952gqr4.fsf@blueberry.kubism.ku.dk>

murdoch@stats.uwo.ca writes:

> Ross posted this code:
> 
>  persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)
> 
> I hadn't seen the cm.colors function before; it's very nice!  I wanted
> to modify it a bit to allow the start and end colors as well as the
> max saturation to be specified, and I think I may have turned up a bug
> in the hsv() function.  Here's the evidence of the bug:
> 
> Look at the results of these two calls to hsv:
> 
> > hsv(h=0.833333333333333,s=0.5,v=1)
> [1] "#FF8080"
> > hsv(h=0.8333333333333333,s=0.5,v=1)
> [1] "#FF80FF"
> 
> I think the 3 color components are listed as hex values in Blue,
> Green, Red order here.  The two calls have nearly identical parameters
> (differing in hue only in the 16th decimal place), but the red
> component is twice as strong in the second one.

Yes, this is a bug. It is also visible by viewing (h,hsv(h)) for
values of h close to 5/6. There appears to be a small window from
about 0.8333317 to 0.8333333 where the 3rd component is 00 instead of
FF. (The order of the components are Red, Green, Blue though....)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 28 10:15:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 28 Oct 2000 10:15:41 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
In-Reply-To: <200010271248.OAA16181@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010281015040.25429-100000@auk.stats>

Thank you, now incorporated in R-devel.

On Fri, 27 Oct 2000 paradis@isem.univ-montp2.fr wrote:

> At 11:57 25/10/00 +0100, Brian Ripley wrote:
> >> Date: mer., 25 oct. 2000 12:38:55 +0200
> >> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
> >
> >> I think it would be nice to have par(ask=T) set by default in termplot(),
> >> like it is in plot.lm().
> >
> >Well, it isn't really the default in plot.lm, the default for `ask' being
> >
> >interactive() && one.fig && length(which) > 1 && .Device != "postscript"
> >
> >Can you supply us with an appropriate patch for termplot and
> >termplot.Rd?  The issue is somewhat subtle.
> 
> So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
> plots cannot be really visualized. Here is a proposed modification for this
> function:
> 
> $ diff plot.lm.R plot.lm.new.R
> 7c7
> <          ask = interactive() && one.fig && length(which) > 1
> ---
> >          ask = interactive() && nb.fig < length(which)
> 52a53
> >    nb.fig <- prod(par("mfcol"))
> 
> 
> 
> The modification for termplot() follows in the same way:
> 
> $ diff termplot.R termplot.new.R
> 3a4,5
> >                      ask = interactive() && nb.fig < n.tms
> >          	     && .Device != "postscript",
> 46a49,55
> >     nb.fig <- prod(par("mfcol"))
> >     one.fig <- prod(par("mfcol")) == 1
> >     if (ask) {
> > 	op <- par(ask = TRUE)
> > 	on.exit(par(op))
> >     }
> >     ##---------- Do the individual plots : ----------
> 
> 
> I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
> to work OK. The corresponding modifications for the .Rd files are:
> 
> $ diff plot.lm.Rd plot.lm.new.Rd
> 11c11
> <         ask = interactive() && one.fig && length(which) > 1
> ---
> >         ask = interactive() && one.fig && nb.fig < length(which)
> 
> $ bdiff termplot.Rd termplot.new.Rd
> 11a12,13
> >          ask = interactive() && one.fig && nb.fig < length(which)
> >          	&& .Device != "postscript",
> 28a31,32
> >   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
> >     each plot, see \code{\link{par}(ask=.)}.}
> 
> 
> Emmanuel Paradis
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gnw3@acm.org  Sun Oct 29 13:48:10 2000
From: gnw3@acm.org (gnw3@acm.org)
Date: Sun, 29 Oct 2000 14:48:10 +0100 (MET)
Subject: [Rd] median(c(NA,NA),na.rm=T) fails (PR#713)
Message-ID: <200010291348.OAA22944@pubhealth.ku.dk>

Full_Name: George N. White III
Version: 1.1.1
OS: Linux
Submission from: (NULL) (192.75.95.37)


Calling median(c(NA,NA), ns.rm=T) passes a "null" vector to sort.  I would
expect it to return "NA", as suggested below:

> median
function (x, na.rm = FALSE) 
{
    if (na.rm) 
        x <- x[!is.na(x)]
    else if (any(is.na(x))) 
        return(NA)
    n <- length(x)
    if (n == 0) return(NA)  ################ suggested fix
    half <- (n + 1)/2
    if (n%%2 == 1) {
        sort(x, partial = half)[half]
    }
    else {
        sum(sort(x, partial = c(half, half + 1))[c(half, half + 
            1)])/2
    }
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Sun Oct 29 15:29:58 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Sun, 29 Oct 2000 16:29:58 +0100 (MET)
Subject: [Rd] prop.test and x = 0 (PR#714)
Message-ID: <200010291529.QAA23204@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


prop.test(0, 30)

95 percent confidence interval:
 0.003043053 0.141320480 

Clearly absurd.  You need theory to be this stupid. :-)

I suggest adding

if (p.c >= 1) p.u <- 1

just after line 59 of the current version of prop.test and

if (p.c <= 0) p.l <- 0

just after line 62 of the current version of prop.test.

With these patches, prop.test produces conservative confidence intervals
for all p and n = 30.  The current version fails catastrophically for 0 < p <
.003
where of course it has actual coverage probability zero.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 29 17:17:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Oct 2000 18:17:42 +0100 (MET)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200010291717.SAA23441@pubhealth.ku.dk>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I
am

[...]

> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width
to
> atleast
> 2000!

It's set as macro R_MAX_WIDTH_OPT in Print.h.  All you needed to do is to
change that and re-compile.  Simple, surely?   Even simple things like this
take time to track down and deal with, so it would be appreciated if bug
reporters could contribute to the R project by doing as much as they can
themselves.

Presumably it is there to protect people from themselves, but as e.g.
strings can come out much longer I don't think it is very effective.
Alternatively as it dates from the era of fixed-size output buffers it
might have been to protect R, but that seems no longer necessary,
at least on a Unix console (it might be on other output devices).

I've upped the limit to 10000 and added comments in the help file and
a more informative warning:

> options(width=-17)
Error in options(...) : invalid width parameter, allowed 10...10000


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 11:16:52 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Oct 2000 12:16:52 +0100 (MET)
Subject: [Rd] Printing list elements w/attributes (PR#715)
Message-ID: <200010311116.MAA11720@pubhealth.ku.dk>

This looks wrong {spotted when looking at the confidence interval in 
unclass(t.test(...))}:

l<-list(a=10)
attr(l$a,"xx")<-23
l

R gets

$a
[1] 10
$aattr(,"xx")
[1] 23

Splus has

$a:
[1] 10
attr($a, "xx"):
[1] 23

(Linux/RedHat6.2/ix86, R1.1.1 and current R-devel)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 31 15:28:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 31 Oct 2000 10:28:45 -0500
Subject: [Rd] conflicting types for `Rf_stirlerr
Message-ID: <39FEE52D.AED5CE58@bank-banque-canada.ca>

I'm having trouble making todays development snapshot:

-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1

[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel : uname
SunOS
[22] /home/mfa5/gilp/R-versions/R-devel : uname -r
5.6

More complete details follow.

Paul Gilbert
_______

[16] /home/mfa5/gilp/R-versions : tar -xf R-devel.tar
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions : cd R-devel
[18] /home/mfa5/gilp/R-versions/R-devel : ./configure
creating cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.6
loading site script ./config.site
loading build specific script ./config.site
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/home/mfa5/gilp/R-versions/R-devel/tools/install-sh -c
checking build system type... sparc-sun-solaris2.6
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
updating cache ./config.cache
loading cache ./config.cache within ltconfig
checking for object suffix... o
checking for executable suffix... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... yes
checking if gcc supports -fno-rtti -fno-exceptions ... yes
checking if gcc static flag -static works... -static
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking command to parse /usr/ccs/bin/nm -p output... ok
checking how to hardcode library paths into programs... immediate
checking for /usr/ccs/bin/ld option to reload object files... -r
checking dynamic linker characteristics... solaris2.6 ld.so
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... no
checking whether to build static libraries... yes
checking for objdir... .libs
creating libtool
updating cache ./config.cache
loading cache ./config.cache
checking for perl... /usr/bin/perl
checking whether perl version is at least 5... yes
checking for dvips... /apps/asd/unix/teTeX/bin/dvips
checking for tex... /apps/asd/unix/teTeX/bin/tex
checking for latex... /apps/asd/unix/teTeX/bin/latex
checking for makeindex... /apps/asd/unix/teTeX/bin/makeindex
checking for pdftex... /apps/asd/unix/teTeX/bin/pdftex
checking for pdflatex... /apps/asd/unix/teTeX/bin/pdflatex
checking for makeinfo... /apps/asd/unix/teTeX/bin/makeinfo
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for unzip... /usr/bin/unzip
checking for zip... /apps/mfa/bin/zip
checking for gcc... (cached) gcc
checking whether the C compiler (gcc -g -O2 ) works... yes
checking whether the C compiler (gcc -g -O2 ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking for g77... /home/mfa/gilp/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... yes
checking whether the Fortran 77 compiler (g77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... yes
checking whether g77 accepts -g... yes
checking for Fortran 77 libraries...  -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
-L/home/res/public/gnu/sun5.6/lib/gcc-lib/sparc-sun-solaris2.6/2.8.1
-L/home/res/public/gnu/sun5.6/sparc-sun-solaris2.6/lib -L/usr/ccs/bin
-L/usr/ccs/lib -L/home/res/public/gnu/sun5.6/lib -lm
checking whether g77 appends underscores... yes
checking whether g77 and gcc agree on int and double... yes
checking for c++... c++
checking whether the C++ compiler (c++  ) works... yes
checking whether the C++ compiler (c++  ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether c++ accepts -g... yes
checking how to run the C++ preprocessor... c++ -E
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for ATL_xerbla in -latlas... no
checking for dgemm_ in -lcxml... no
checking for dgemm_ in -ldxml... no
checking for dgemm_ in -lscs... no
checking for dgemm_ in -lcomplib.sgimath... no
checking for zherk in -lblas... no
checking for dgemm_ in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking for working alloca.h... yes
checking for alloca... yes
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for access... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for popen... yes
checking for putenv... yes
checking for rint... yes
checking for setenv... no
checking for strcoll... yes
checking for stat... yes
checking for strptime... yes
checking for system... yes
checking for times... yes
checking for unsetenv... no
checking for vsnprintf... yes
checking for strdup... yes
checking for __setfpucw... no
checking whether calloc is broken... no
checking whether finite is broken... no
checking whether log is broken... yes
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for floatingpoint.h... yes
checking for fpu_control.h... no
checking for grp.h... yes
checking for ieee754.h... no
checking for ieeefp.h... yes
checking for locale.h... yes
checking for netdb.h... yes
checking for netinet/in.h... yes
checking for netinet/tcp.h... yes
checking for pwd.h... yes
checking for readline/history.h... no
checking for readline/readline.h... no
checking for rpc/rpc.h... yes
checking for rpc/xdr.h... yes
checking for string.h... yes
checking for sys/param.h... yes
checking for sys/socket.h... yes
checking for sys/stat.h... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/utsname.h... yes
checking for unistd.h... yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking for BSD networking... yes
checking for main in -lz... (cached) no
checking return type of signal handlers... void
checking for pid_t... (cached) yes
checking for size_t... yes
checking for blkcnt_t... yes
checking whether byte ordering is bigendian... yes
checking for working const... yes
checking size of long... 4
checking for finite... (cached) yes
checking for isnan... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for xmkmf... /usr/openwin/bin/xmkmf
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... (cached) no
checking for gethostbyname in -lnsl... (cached) yes
checking for connect... (cached) no
checking for connect in -lsocket... (cached) yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for tclConfig.sh... no
checking for tkConfig.sh... no
checking for tcl.h... no
checking whether leap seconds are counted... no
checking for lpr... lpr
checking for paperconf... false
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating demos/dynload/Makefile
creating doc/Makefile
creating doc/html/Makefile
creating doc/html/search/Makefile
creating doc/manual/Makefile
creating etc/Makefile
creating etc/Makeconf
creating etc/Makeconf-tests
creating share/Makefile
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/library/base/DESCRIPTION
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/ctest/DESCRIPTION
creating src/library/ctest/Makefile
creating src/library/ctest/src/Makefile
creating src/library/eda/DESCRIPTION
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/DESCRIPTION
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/DESCRIPTION
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/DESCRIPTION
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/nls/DESCRIPTION
creating src/library/nls/Makefile
creating src/library/nls/src/Makefile
creating src/library/stepfun/DESCRIPTION
creating src/library/stepfun/Makefile
creating src/library/splines/DESCRIPTION
creating src/library/splines/Makefile
creating src/library/splines/src/Makefile
creating src/library/tcltk/DESCRIPTION
creating src/library/tcltk/Makefile
creating src/library/tcltk/src/Makefile
creating src/library/ts/DESCRIPTION
creating src/library/ts/Makefile
creating src/library/ts/src/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/nmath/standalone/Makefile
creating src/scripts/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rd2contents
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rprof
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build
creating src/scripts/build-help
creating src/scripts/check
creating src/scripts/extract-usage
creating src/unix/Makefile
creating src/unix/X11/Makefile
creating src/unix/gnome/Makefile
creating tests/Makefile
creating tests/Examples/Makefile
creating tools/Makefile
creating tools/Rdnewer
creating tools/help2man
creating tools/keyword-test
creating tools/install-info
creating tools/pkg2tex
creating src/include/config.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  C++ compiler:             c++  -g -O2
  FORTRAN compiler:         g77  -g -O2

  X11 support:              yes
  Gnome support:            no
  Tcl/Tk support:           no

  R profiling support:      no
  Build R shared library:   no

configure: warning: you cannot build info versions of the R manuals
[19] /home/mfa5/gilp/R-versions/R-devel : make
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Nothing to be done for `R'.
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'

make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
creating src/scripts/R.fe
mkdir ../../bin
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
mkdir ../../include
mkdir ../../include/R_ext
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
making Rsock.d from Rsock.c
making S_compat.d from S_compat.c
making approx.d from approx.c
making bakslv.d from bakslv.c
making binning.d from binning.c
making chisqsim.d from chisqsim.c
making chull.d from chull.c
making cpoly.d from cpoly.c
making cumsum.d from cumsum.c
making distance.d from distance.c
making fft.d from fft.c
making fmin.d from fmin.c
making fortran.d from fortran.c
making lbfgsb.d from lbfgsb.c
making loglin.d from loglin.c
making lowess.d from lowess.c
making machar.d from machar.c
making maxcol.d from maxcol.c
making massdist.d from massdist.c
making pretty.d from pretty.c
making rowsum.d from rowsum.c
making sock.d from sock.c
making splines.d from splines.c
making stem.d from stem.c
making strsignif.d from strsignif.c
making tabulate.d from tabulate.c
making uncmin.d from uncmin.c
making zeroin.d from zeroin.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c Rsock.c -o Rsock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c S_compat.c -o S_compat.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c approx.c -o approx.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c bakslv.c -o bakslv.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c binning.c -o binning.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chisqsim.c -o chisqsim.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chull.c -o chull.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cpoly.c -o cpoly.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cumsum.c -o cumsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c distance.c -o distance.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fft.c -o fft.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin.c -o fmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fortran.c -o fortran.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c loglin.c -o loglin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lowess.c -o lowess.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c machar.c -o machar.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c maxcol.c -o maxcol.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c massdist.c -o massdist.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c pretty.c -o pretty.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c rowsum.c -o rowsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sock.c -o sock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c splines.c -o splines.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stem.c -o stem.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c strsignif.c -o strsignif.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c tabulate.c -o tabulate.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c uncmin.c -o uncmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c zeroin.c -o zeroin.o
g77   -g -O2 -c ch2inv.f -o ch2inv.o
g77   -g -O2 -c chol.f -o chol.o
g77   -g -O2 -c dpbfa.f -o dpbfa.o
g77   -g -O2 -c dpbsl.f -o dpbsl.o
g77   -g -O2 -c dpoco.f -o dpoco.o
g77   -g -O2 -c dpodi.f -o dpodi.o
g77   -g -O2 -c dpofa.f -o dpofa.o
g77   -g -O2 -c dposl.f -o dposl.o
g77   -g -O2 -c dqrdc.f -o dqrdc.o
g77   -g -O2 -c dqrdc2.f -o dqrdc2.o
g77   -g -O2 -c dqrls.f -o dqrls.o
g77   -g -O2 -c dqrsl.f -o dqrsl.o
g77   -g -O2 -c dqrutl.f -o dqrutl.o
g77   -g -O2 -c dsvdc.f -o dsvdc.o
g77   -g -O2 -c dtrco.f -o dtrco.o
g77   -g -O2 -c dtrsl.f -o dtrsl.o
g77   -g -O2 -c eigen.f -o eigen.o
g77   -g -O2 -c lminfl.f -o lminfl.o
g77   -g -O2 -c blas.f -o blas.o
ar cr libappl.a Rsock.o S_compat.o approx.o bakslv.o binning.o chisqsim.o
chull.o cpoly.o cumsum.o distance.o fft.o fmin.o fortran.o lbfgsb.o loglin.o
lowess.o machar.o maxcol.o massdist.o pretty.o rowsum.o sock.o splines.o stem.o
strsignif.o tabulate.o uncmin.o zeroin.o ch2inv.o chol.o dpbfa.o dpbsl.o dpoco.o
dpodi.o dpofa.o dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o
dtrco.o dtrsl.o eigen.o lminfl.o blas.o
ranlib libappl.a
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
making mlutils.d from mlutils.c
making d1mach.d from d1mach.c
making i1mach.d from i1mach.c
making fmax2.d from fmax2.c
making fmin2.d from fmin2.c
making fmod.d from fmod.c
making fprec.d from fprec.c
making fround.d from fround.c
making ftrunc.d from ftrunc.c
making sign.d from sign.c
making fsign.d from fsign.c
making fsquare.d from fsquare.c
making fcube.d from fcube.c
making imax2.d from imax2.c
making imin2.d from imin2.c
making chebyshev.d from chebyshev.c
making log1p.d from log1p.c
making lgammacor.d from lgammacor.c
making gammalims.d from gammalims.c
making stirlerr.d from stirlerr.c
making gamma.d from gamma.c
making lgamma.d from lgamma.c
making gamma_cody.d from gamma_cody.c
making beta.d from beta.c
making lbeta.d from lbeta.c
making polygamma.d from polygamma.c
making bessel_i.d from bessel_i.c
making bessel_j.d from bessel_j.c
making bessel_k.d from bessel_k.c
making bessel_y.d from bessel_y.c
making choose.d from choose.c
making snorm.d from snorm.c
making sexp.d from sexp.c
making dgamma.d from dgamma.c
making pgamma.d from pgamma.c
making qgamma.d from qgamma.c
making rgamma.d from rgamma.c
making dbeta.d from dbeta.c
making pbeta.d from pbeta.c
making qbeta.d from qbeta.c
making rbeta.d from rbeta.c
making dunif.d from dunif.c
making punif.d from punif.c
making qunif.d from qunif.c
making runif.d from runif.c
making dnorm.d from dnorm.c
making pnorm.d from pnorm.c
making qnorm.d from qnorm.c
making rnorm.d from rnorm.c
making dlnorm.d from dlnorm.c
making plnorm.d from plnorm.c
making qlnorm.d from qlnorm.c
making rlnorm.d from rlnorm.c
making df.d from df.c
making pf.d from pf.c
making qf.d from qf.c
making rf.d from rf.c
making dt.d from dt.c
making pt.d from pt.c
making qt.d from qt.c
making rt.d from rt.c
making dchisq.d from dchisq.c
making pchisq.d from pchisq.c
making qchisq.d from qchisq.c
making rchisq.d from rchisq.c
making dbinom.d from dbinom.c
making pbinom.d from pbinom.c
making qbinom.d from qbinom.c
making rbinom.d from rbinom.c
making dcauchy.d from dcauchy.c
making pcauchy.d from pcauchy.c
making qcauchy.d from qcauchy.c
making rcauchy.d from rcauchy.c
making dexp.d from dexp.c
making pexp.d from pexp.c
making qexp.d from qexp.c
making rexp.d from rexp.c
making dgeom.d from dgeom.c
making pgeom.d from pgeom.c
making qgeom.d from qgeom.c
making rgeom.d from rgeom.c
making dhyper.d from dhyper.c
making phyper.d from phyper.c
making qhyper.d from qhyper.c
making rhyper.d from rhyper.c
making dnbinom.d from dnbinom.c
making pnbinom.d from pnbinom.c
making qnbinom.d from qnbinom.c
making rnbinom.d from rnbinom.c
making dpois.d from dpois.c
making ppois.d from ppois.c
making qpois.d from qpois.c
making rpois.d from rpois.c
making dweibull.d from dweibull.c
making pweibull.d from pweibull.c
making qweibull.d from qweibull.c
making rweibull.d from rweibull.c
making dlogis.d from dlogis.c
making plogis.d from plogis.c
making qlogis.d from qlogis.c
making rlogis.d from rlogis.c
making dnchisq.d from dnchisq.c
making pnchisq.d from pnchisq.c
making qnchisq.d from qnchisq.c
making dnbeta.d from dnbeta.c
making pnbeta.d from pnbeta.c
making pnf.d from pnf.c
making pnt.d from pnt.c
making ptukey.d from ptukey.c
making qtukey.d from qtukey.c
making wilcox.d from wilcox.c
making signrank.d from signrank.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c mlutils.c -o mlutils.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c d1mach.c -o d1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c i1mach.c -o i1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmax2.c -o fmax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin2.c -o fmin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmod.c -o fmod.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fprec.c -o fprec.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fround.c -o fround.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c ftrunc.c -o ftrunc.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sign.c -o sign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsign.c -o fsign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsquare.c -o fsquare.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fcube.c -o fcube.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imax2.c -o imax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imin2.c -o imin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chebyshev.c -o chebyshev.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c log1p.c -o log1p.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lgammacor.c -o lgammacor.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c gammalims.c -o gammalims.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src'
make: *** [R] Error 1
[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 15:46:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2000 16:46:43 +0100
Subject: [Rd] conflicting types for `Rf_stirlerr
In-Reply-To: Paul Gilbert's message of "Tue, 31 Oct 2000 10:28:45 -0500"
References: <39FEE52D.AED5CE58@bank-banque-canada.ca>
Message-ID: <x27l6prp24.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm having trouble making todays development snapshot:
> 
> -DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
> stirlerr.c:34: conflicting types for `Rf_stirlerr'
> ../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
> make[3]: *** [stirlerr.o] Error 1

A Mathlib.h got committed when it shouldn't have been. Should be OK in
tomorrows snapshot.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Oct 31 19:57:36 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 31 Oct 2000 14:57:36 -0500 (EST)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <20001031193640.B1043@ps2-4.ucl-41> (message from Zsombor
 Cseres-Gergely on Tue, 31 Oct 2000 19:36:40 +0000)
Message-ID: <200010311957.OAA26707@jessie.research.bell-labs.com>



 -->>> Moved to r-devel from r-help. <<<---



> Date: Tue, 31 Oct 2000 19:36:40 +0000
> From: Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk>
> Cc: r-help@stat.math.ethz.ch
> References: <Pine.GSO.4.21.0010301459460.14728-100000@atlas.biostat.washington.edu> <6rd7ghhpum.fsf@franz.stat.wisc.edu>
> Sender: owner-r-help@stat.math.ethz.ch
> Precedence: bulk
> 
> On Mon, Oct 30, 2000 at 05:27:29PM -0600, Douglas Bates wrote:
> 
> > You may want to try "make check" after configuring and compiling R.
> > That should use the postscript graphics device driver rather than
> > anything related to X.  We would be very interested in hearing if that
> > succeeds.
> 
> OK, one good and a bad news. Good news is that R runs with option --gui=none.
> It does demo()-s that does not involve graphics. 

That's good to hear.

> 
> Bad news is that make check fails saying: 
> 
> Fatal error: The X11 shared library could not be loaded.
>   The error was /home/zs/R-1.1.1/bin/R_X11.so: undefined symbol: R_GlobalEnv
> 

Just a quick thought....

Rather than being a problem with X11, it looks like it may be a
problem associated with dlopen() when the R_X11.so library is
explicitly loaded during the initialization. Basically, that `library'
(R_X11.so) has to resolve all of the symbols to which it refers, and
many of them are in the R executable (R.bin). Perhaps the linking and
loading mechanisms in Hurd do not export these symbols from the
application in a way that shared libraries can find them.  Or it may
be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
(although that shouldn't matter).

A mechanism that Luke and I chatted about that could tidy up some of
these things is to link both R.bin and also R_X11.so against libR.so.
So R.bin would consist of a single routine main() that initialized R
and run the mainloop.  As long as this doesn't introduce a noticeable
performance penalty, it might be worth doing to simplify setups like
this one and reduce the dependency on the non-standard behaviour of
dlopen().

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sws96srb@met.rdg.ac.uk  Mon Oct  2 13:24:39 2000
From: sws96srb@met.rdg.ac.uk (sws96srb@met.rdg.ac.uk)
Date: Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021224.OAA16613@pubhealth.ku.dk>

Full_Name: Sheila Bryant
Version: 1.1.1
OS: Solaris 2.6
Submission from: (NULL) (134.225.16.2)


During the 'make' process I get the following:

String found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 781, near
"("</TABLE>\n""
        (Missing operator before "</TABLE>\n"?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1234, near "
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1249, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1264, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1292, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1335, near "
txt_header"
        (Missing operator before txt_header?)

In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
5.002, 
gcc 2.95.2 Solaris 2.6, teTeX 0.4.

I've done a make html as well, to be on the safe side! Got the same dose of
warnings.
R istself starts up OK, but help.start() just gives me the information about
using 
existing browsers, but I never get any pages come up. I tried exiting netscape &

tried again, but no new browser was forthcoming. I've tried the FAQ and bug
reports, 
but maybe haven't asked the right question there!

I've probably missed something obvious, but just can't see it



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  2 13:58:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2000 14:58:58 +0200
Subject: [Rd] several documentation problems (PR#675)
In-Reply-To: sws96srb@met.rdg.ac.uk's message of "Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)"
References: <200010021224.OAA16613@pubhealth.ku.dk>
Message-ID: <x2em1zo0vh.fsf@blueberry.kubism.ku.dk>

sws96srb@met.rdg.ac.uk writes:

> In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> 5.002, 
> gcc 2.95.2 Solaris 2.6, teTeX 0.4.

Your perl version seems to be a bit old. Although we formally only
require Perl 5, 5.002 may have gone untested. The problems definitely
look Perl related.

There seems to be two types of problem:

The first one is

 780              print $htmlout
 781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
  
and the rest are like

1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
  
I the 1st case, we have nearly the same construction without the line
break in line 784, and that seems to work. You might try joining up
the lines.

In the other case, perhaps add parentheses around  mywrap..."\n"

Otherwise we'll need to bring in the real Perl experts. 

[Even if it would be easier for you to upgrade Perl, I think it would
be nice to get to the root of this problem.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 14:04:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 15:04:41 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021304.PAA17572@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Oct 2000 14:58:58 +0200
> 
> sws96srb@met.rdg.ac.uk writes:
> 
> > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > 5.002, 
> > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> 
> Your perl version seems to be a bit old. Although we formally only
> require Perl 5, 5.002 may have gone untested. The problems definitely
> look Perl related.

As far as I recall 5.002 was buggy and we rapidly went to 5.004.
(Something similar happened in RedHat Linux 5.2's Perl.)   We would
recommend upgrading to Perl 5.6.0.

> There seems to be two types of problem:
> 
> The first one is
> 
>  780              print $htmlout
>  781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
>   
> and the rest are like
> 
> 1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
>   
> I the 1st case, we have nearly the same construction without the line
> break in line 784, and that seems to work. You might try joining up
> the lines.
> 
> In the other case, perhaps add parentheses around  mywrap..."\n"

Another guess is that it might require &mywrap there.

> Otherwise we'll need to bring in the real Perl experts. 

I'm pretty sure that what we have is valid Perl, and that some versions
of Perl have choked on valid Perl.  Upgrading is the best answer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Oct  2 14:05:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 2 Oct 2000 15:05:12 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010021305.PAA17599@pubhealth.ku.dk>

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:

    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

Thank you for the bug report.
This bug is ``new'' (a bit more than a year!) and was introduced when
someone fixed another problem in pretty.c 
by adding "1e-5" fuzz a bit too generously
hmm,....... 
I'll have a look.

    david> Version: .... R 1.1.1 ...


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct  2 16:27:37 2000
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 2 Oct 2000 17:27:37 +0200 (MET DST)
Subject: [Rd] documentation error for deriv; MASS scripts ch8; (PR#676)
Message-ID: <200010021527.RAA19488@pubhealth.ku.dk>

Hola!

There is a bug in the documentation file for deriv, which says that
the third argument is unimplemented. It seems only to be implemented
differently than in s-plus. I show whith the MASS R-script
ch8 file as example:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                function(b0, b1, th, x) {})
> expn1
function(b0, b1, th, x) {}

which cannnot be used whith nls! But changing to:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                c("b0", "b1", "th", "x") )
> expn1
function (b0, b1, th, x) 
{
    .expr3 <- 2^(-x/th)
    .value <- b0 + b1 * .expr3
    .grad <- array(0, c(length(.value), 3), list(NULL, c("b0", 
        "b1", "th")))
    .grad[, "b0"] <- 1
    .grad[, "b1"] <- .expr3
    .grad[, "th"] <- b1 * (.expr3 * (log(2) * (x/th^2)))
    attr(.value, "gradient") <- .grad
    .value
}

gives the desired result. 

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Oct  2 16:52:47 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021552.RAA19800@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 1.1.1
OS: i86pc Solaris 2.7
Submission from: (NULL) (143.205.61.82)


jmp_buf type undeclared, may be related to the installed version of libjpeg
(this is v6b), compiler is gcc/g77 2.95.2:

root@pc05-stat[X11]# make
creating src/unix/X11/Makefile
making rbitmap.d from rbitmap.c
make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
gcc -I. -I../../../src/include -I../../../src/include
-I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
-DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known
make[1]: *** [rbitmap.o] Error 1
make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
make: *** [R] Error 2


Solution:
*************************************************
--- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
+++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
@@ -231,6 +231,9 @@
 #ifdef HAVE_JPEG
 
 #include <jpeglib.h>
+#if __sun__ & __i386
+#include <setjmp.h>
+#endif
 
 /* Here's the extended error handler struct */> version
         _                 
************************************************

with this patch R compiles and passes "make test", the 
full version is:

> version
         _                 
platform i386-pc-solaris2.7
arch     i386              
os       solaris2.7        
system   i386, solaris2.7  
status                     
major    1                 
minor    1.1               
year     2000              
month    August            
day      15                
language R                 


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 16:59:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 17:59:35 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021559.RAA19914@pubhealth.ku.dk>

It's related to having jpeg and not png, and it is already fixed in the
R-devel tree. An unconditional <setjmp.h> is fine.


> From: albrecht.gebhardt@uni-klu.ac.at
> Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
> 
> Full_Name: Albrecht Gebhardt
> Version: 1.1.1
> OS: i86pc Solaris 2.7
> Submission from: (NULL) (143.205.61.82)
> 
> 
> jmp_buf type undeclared, may be related to the installed version of libjpeg
> (this is v6b), compiler is gcc/g77 2.95.2:
> 
> root@pc05-stat[X11]# make
> creating src/unix/X11/Makefile
> making rbitmap.d from rbitmap.c
> make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
> gcc -I. -I../../../src/include -I../../../src/include
> -I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
> -DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> make[1]: *** [rbitmap.o] Error 1
> make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
> make: *** [R] Error 2
> 
> 
> Solution:
> *************************************************
> --- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
> +++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
> @@ -231,6 +231,9 @@
>  #ifdef HAVE_JPEG
>  
>  #include <jpeglib.h>
> +#if __sun__ & __i386
> +#include <setjmp.h>
> +#endif
> 

R-devel has

#ifdef HAVE_JPEG

#include <jpeglib.h>
#include <setjmp.h>

....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Oct  2 18:58:56 2000
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 2 Oct 2000 19:58:56 +0200 (MET DST)
Subject: [Rd] typo in documentation for read.table (PR#678)
Message-ID: <200010021758.TAA20496@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.1.0
OS: Linux 2.2.14 i686
Submission from: (NULL) (15.255.176.47)



In the documentation for read.table, the description of the argument
`strip.white'
uses `skip.white' instead.

> ?read.table
...
Usage:

     read.table(file, header = FALSE, sep = "", quote = "\"'", dec = ".",
                row.names, col.names, as.is = FALSE, na.strings = "NA",
                skip = 0, check.names = TRUE, strip.white = FALSE)
                                              ^^^^^^^^^^^
...
skip.white: logical. Used only when `sep' has been specified, and
^^^^^^^^^^allows the stripping of leading and trailing white space from
          `character' fields (`numeric' fields are always stripped). 
          See `scan' for further details, remembering that the columns
          may include the row names.
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] pretty not covering the range properly (PR#673)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 11:40:21 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 12:40:21 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010031040.MAA26597@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:

      MM> Ok, I've fixed pretty() for the development version such that 
      MM>    p <- pretty(x)
      MM>    all(p[1] <= x & x <= p[length(p)])
      MM> should be guaranteed (again).

    PD> Gulp. I'm pretty(!) sure there was a reason for changing it in the
    PD> other direction...
yes, the change last year (between 0.64 and 0.65) *was* for a good reason,
and I have not reverted that!
    PD> [I have a vague recollection of
    PD> pretty(pretty(x)) != pretty(x) or something like that]

    PD> Are we quite sure that it is not the caller that needs to be a
    PD> little more lenient in the bounds checking?

I've thought of that, too.
But no, I think we want to guarantuee the above 
    {which I had wrong in the last e-mail, it's "[length(p)]" !}
which we have had always in the documentation and which *is* S compatible.

    PD> OTOH, it's in code you wrote yourself...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  3 14:26:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 3 Oct 2000 15:26:35 +0200
Subject: [Rd] plot.table() ?
Message-ID: <14809.56971.828581.703850@gargle.gargle.HOWL>

I tend to use  table() quite a bit for quick "diagnostics", summary, etc.
I have wished for a more automatic way of plotting these.

One possibility would be something like the following function;
The question is if (something like) the following is worth providing (and then
maintaining...)  at all :

plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
                       xlab = NULL, ylab = deparse(substitute(x)),
                       frame.plot = is.num,
                       ...)
{
    rnk <- length(d <- dim(x))
    if(rnk == 0)
	stop("invalid table `x'")
    if(rnk == 1) {
        dn <- dimnames(x)
        nx <- dn[[1]]
        if(is.null(xlab)) xlab <- names(dn)
        if(is.null(xlab)) xlab <- ""
        ow <- options(warn = -1)
        is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
        x0 <- if(is.num) xx else seq(x)
	plot(x0, unclass(x), type = type, 
             ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
             lwd = lwd, ..., xaxt = "n")
        axis(1, at = x0, labels = nx)
    } else
	mosaicplot(x, ...)
}

------

Note that I have `optimized' it mainly for 1-D tables, but it also a way to
make the mosaicplots more known..

Also,
     plot(table(ff))  
is quite similar to 
     plot(ff)
when `ff' is a factor (the latter using barplot).

However,    plot(table(ff, f2))  is different and sometimes more
useful than       plot(ff, f2)
compare
	data(state)
	par(mfcol=c(1,2))
	plot(      state.division, state.region)#-> plot.factor
	plot(table(state.division, state.region))#-> plot.table


Also, try things

        plot(table(state.division))

	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sws96srb@met.reading.ac.uk  Tue Oct  3 14:44:55 2000
From: sws96srb@met.reading.ac.uk (sws96srb@met.reading.ac.uk)
Date: Tue, 3 Oct 2000 15:44:55 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010031344.PAA00416@pubhealth.ku.dk>



Prof Brian Ripley wrote:
> 
> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 02 Oct 2000 14:58:58 +0200
> >
> > sws96srb@met.rdg.ac.uk writes:
> >
> > > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > > 5.002,
> > > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> >
> > Your perl version seems to be a bit old. Although we formally only
> > require Perl 5, 5.002 may have gone untested. The problems definitely
> > look Perl related.
> 
> As far as I recall 5.002 was buggy and we rapidly went to 5.004.
> (Something similar happened in RedHat Linux 5.2's Perl.)   We would
> recommend upgrading to Perl 5.6.0.
> 

<snip>

Many thanks to everyone for the help. I've upgraded to Perl 5.6.0 and
all makes now flow through with no errors. 

-- 

Sheila


-----------------------------------------------------------------------------

Dr. Sheila Bryant                           Dept. of Meteorology,
Email: S.R.Bryant@reading.ac.uk             University of Reading,
Phone: 0118 931 6395                        Earley Gate, Whiteknights,
                                            PO Box 243
                                            Reading. RG6 6BB.   UK

-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:17:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:17:07 +0200 (CEST)
Subject: [Rd] plot.table() ?
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
References: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <14809.60003.615381.377841@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> I tend to use table() quite a bit for quick "diagnostics", summary,
> etc.  I have wished for a more automatic way of plotting these.

> One possibility would be something like the following function; The
> question is if (something like) the following is worth providing (and
> then maintaining...)  at all :

> plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
>                        xlab = NULL, ylab = deparse(substitute(x)),
>                        frame.plot = is.num,
>                        ...)
> {
>     rnk <- length(d <- dim(x))
>     if(rnk == 0)
> 	stop("invalid table `x'")
>     if(rnk == 1) {
>         dn <- dimnames(x)
>         nx <- dn[[1]]
>         if(is.null(xlab)) xlab <- names(dn)
>         if(is.null(xlab)) xlab <- ""
>         ow <- options(warn = -1)
>         is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
>         x0 <- if(is.num) xx else seq(x)
> 	plot(x0, unclass(x), type = type, 
>              ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
>              lwd = lwd, ..., xaxt = "n")
>         axis(1, at = x0, labels = nx)
>     } else
> 	mosaicplot(x, ...)
> }

> ------

> Note that I have `optimized' it mainly for 1-D tables, but it also a
> way to make the mosaicplots more known.

> Also,
>      plot(table(ff))  
> is quite similar to 
>      plot(ff)
> when `ff' is a factor (the latter using barplot).

> However,    plot(table(ff, f2))  is different and sometimes more
> useful than       plot(ff, f2)
> compare
> 	data(state)
> 	par(mfcol=c(1,2))
> 	plot(      state.division, state.region)#-> plot.factor
> 	plot(table(state.division, state.region))#-> plot.table


> Also, try things

>         plot(table(state.division))

> 	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)

In general I like the idea of having a plot method for contingency
tables.

One basic question is whether we feel comfortable enough with the
"table" class that was gradually introduced.  But in any case, xtabs()
assigns class c("xtabs", "table") which should be good enough.

I am not sure how much effort we want to put into this, but here are
some remarks.  I think the Poiss.tab example looks nice, but I am not
happy with the output of plot(table(state.division)) [not that I am
happy with calling barplot() directly in this case].  I would prefer
having ALL names as labels (perhaps rotated 45 degrees).  I am also not
sure about the bars in plot.table(), they look a bit tiny, no?

Re Mosaic plots, very nice idea, but e.g. the result of
  plot(table(state.division, state.region))
looks terrible.  I think this could be very confusing to plains users.
Hmm, how could we improve this?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:31:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:31:21 +0200 (CEST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
References: <200009281712.TAA20426@pubhealth.ku.dk>
 <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
Message-ID: <14809.60857.12878.62820@mithrandir.hornik.net>

>>>>> ben  writes:

> On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:
>> It's a feature, on the TODO list to be added one day.

>   A quick hack (if anyone wants to do it) is to change line 975 from

> /*	Rprintf("in lbfgsb - %s\n", task);*/

>  to

> 	if (trace) Rprintf("in lbfgsb - %s\n", task);

> however, the debugging output that you get is pretty ugly.

>> >   Also, a general question: are both nlm() and optim() going to
>> > be around indefinitely?  Should I be using one or the other?

>   Well, my question was more whether one was preferred or not ... I did
> see a comment in some NEWS file at some point that a built-in function had
> been switched to optim() and so should converge more often.

>   At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
> measure) with -ffloat-store.  The negative parameter jumps went away,
> but I can still provoke optim() to hang with the right (not uncommon)
> choice of bootstrap values.  Adding what I thought were reasonable
> parscale values makes my code hang in different places [i.e. the
> particular values that I give below are no longer a problem], but
> doesn't stop it hanging or even reduce the frequency with which it
> hangs.  Perhaps now that I have ffloat-store enabled the values below
> will hang under Solaris as well.

>   Should ffloat-store be enabled in general for compilation on Linux
> boxes?

I am not sure it should.  We try to be as defensive about compiler flags
as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
I'd prefer modifying the code if possible ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:04:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:04:07 +0200
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 16:31:21 +0200 (CEST)"
References: <200009281712.TAA20426@pubhealth.ku.dk> <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu> <14809.60857.12878.62820@mithrandir.hornik.net>
Message-ID: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >   Should ffloat-store be enabled in general for compilation on Linux
> > boxes?
> 
> I am not sure it should.  We try to be as defensive about compiler flags
> as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> I'd prefer modifying the code if possible ...

It definitely shouldn't... Basically what it does is to defeat the
"guard digits" that are used in Intel FPUs (internally using 10 bytes
rather than 8 for doubles). While there are some rare cases where this
messes up the "endgame" of numerical algorithms, it increases overall
numerical accuracy. Also, storing all floating-point values off-chip
causes a substantial decrease in performance.

In the case(-s ?) I've seen, a routine was trying too hard to squeeze
the last bit of precision out of a termination criterion.

Optimization is another likely culprit for this kind of trouble, so
perhaps one should try turning it off for this code?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Tue Oct  3 16:29:09 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (Emmanuel Charpentier)
Date: Tue, 03 Oct 2000 17:29:09 +0200
Subject: [Rd] Bug in RODBC ?
Message-ID: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>

Dear lists,

It seems that RODBC has a problem : when reading through ODBC from an Access
table with missing values, *character* missing values are (correctly) reported
as NA factor values. *Numeric* values, however, retain the value of the same
variable in the previous row.

My setup : R 1.1.1 under Win95, RODBC as compiled with the R Win CRAN
distribution, MS Access 97.

I just discovered this, and had no time to explore. I will try to debug this,
but my knowledge of the ODBC internals and gizzards being almost non-existent,
any clue from you would help me tremendously.

Is there a formal mechanism for bug reports ? If so, should I submit one ?

Sincerely yours,

					Emmanuel Charpentier
--
Emmanuel Charpentier			Tel :		+33-01 40 27 35 98
Secrétariat scientifique du CEDIT	Fax :		+33-01 40 27 55 65
Direction de la Politique Médicale // Assistance Publique - Hôpitaux de Paris
3, Avenue Victoria // F-75004 Paris /// France
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 16:40:47 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 17:40:47 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200009292118.XAA02892@pubhealth.ku.dk>
References: <200009292118.XAA02892@pubhealth.ku.dk>
Message-ID: <14809.65023.834763.292861@mithrandir.hornik.net>

>>>>> cberry  writes:

> examples:

> 1) Fails to report that components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component zap: Mean relative  difference: 1


> 2) Incorrectly asserts all are equal when components 2 and 3 differ

>> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
> [1] TRUE

> 3) Removing named component reveals differences:

>> all.equal(list(1,2,3,1),list(1,3,4,1))
> [1] "Component 2: Mean relative  difference: 0.5"      
> [2] "Component 3: Mean relative  difference: 0.3333333"

> 4) Unequal first component reveals differences

>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
> [1] "Component : Mean relative  difference: 0.5"
> [2] "Component : Mean relative  difference: 0.5"
> [3] "Component : Mean relative  difference: 0.5"
>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"
>> 

> 5) Second component IS equal, but:

>> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"

> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = June
>  day = 15
>  language = R

> Search Path:
>  .GlobalEnv, Autoloads, package:base

> Chuck Berry

I think the above happens because all.equal.list() is broken.  The fix
is not entirely clear, because I am not sure what we really want.

Anyway, in all of the above examples we compare lists which are named in
the sense that names() is not NULL, but not ``fully'' named in the sense
that any(nchar(names()) == NULL) is TRUE.  In this case, iseq gets set
to nt[c.in.t] which in the above example gives

Browse[1]> nt[c.in.t]
[1] ""    ""    ""    "zap"

Hence in the for(i in iseq) loop we do three comparisons of the first
component, due to subscripting with "".

The obvious idea is that we must use positional indices where we do not
have named ones.

Now for the problem I see in the current logic.  We currently do

   if both lists are named (at least partially) then ... else fi

Maybe we should change this as follows: if either of the two lists has
names, work though the named components.  Warn about the ones not
present in both.  Compare the ones present in both.  Then get rid of all
named components and compare what is left in positional order.

As I said, I am not sure that this is really what we want.

Comments?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:46:35 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:46:35 +0200
Subject: [Rd] Bug in RODBC ?
In-Reply-To: Emmanuel Charpentier's message of "Tue, 03 Oct 2000 17:29:09 +0200"
References: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>
Message-ID: <x24s2uudus.fsf@blueberry.kubism.ku.dk>

Emmanuel Charpentier <emmanuel.charpentier@sap.ap-hop-paris.fr> writes:

> Is there a formal mechanism for bug reports ? If so, should I submit one ?

Well, there's a slot for "add-ons" in the R bug repository, and that's
where we put reports that pertain to packages. However, the core group
does not take responsibility for fixing packages, and there's no way
of ensuring that package-writers even scan the repository for "their"
bugs. So a safer way would seem to be to contact the author directly.
That'll be Michael Lapsley <mlapsley@sthelier.sghms.ac.uk> according
to the CRAN entry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  3 16:45:37 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10010031125570.30418-100000@bolker.zoo.ufl.edu>


  Different day, more or less the same story -- turning off optimization
(and leaving out -ffloat-store) leads to hanging in different places, but
not any fewer hanging cases out of 1000 bootstrap samples.  I could try
the no optimization/-ffloat-store combination, but I strongly suspect the
results would be the same.  (As I mentioned before, I also get hanging in
different places with and without adding parscale to the optim() control
list.)
  These aren't pathological samples, as far as I can tell.
  I'm afraid that fussing with compiler options isn't going to do it ...
given enough time I might be able to dig into the lbfgsb.c code and figure
out what ABNORMAL_TERMINATION_IN_LNSRCH means and (at least) how to modify
the iteration counter so that optim() bails out when it gets into this
kind of loop rather than looping indefinitely.
  On the other hand, I might choose to work on adapting a different set of
code -- the "nlminb" function in Splus5 appears to be based on a different
set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
particular reasons for using a different algorithm here.

  I managed to strip down the full code that I use for doing the
bootstraps to about 58 lines (and I removed the embarrassing "<<-"
constructs), so that it if anyone wants to work on this they don't have to
come back to me for particular examples that hang for a particular
platform/set of compiler options/etc..  (It's still not pretty.)

  Ben Bolker

# Stripped-down file to find hanging optim() 

total <- rep(c(100,150,200,300,500,900),rep(2,6))
pred <- c(83,73,22,47,53,31,56,83,30,73,44,91)

nllfun2g.boot <- function(q,debug=FALSE,data.pred,data.total) {
  N1 <- q[1]
  N2 <- q[2]
  G <- q[3]
  maxval <- 1e8
  L <- cfunc2(data.total,N1,N2,G)
  r <- -sum(dbinom(data.pred, data.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}

cfunc2 <- function(input,N1,N2,G=1.0,debug=FALSE){
  if (debug)cat(c(N1,N2,G),"\n")
  pmin(1,1/((1+((input - N1)/N2))^G))
}

fuzz <- 0.001

do.boot <- function(tot=1000,seed=101) {
  bootmat <- matrix(nrow = tot, ncol = 5)
  set.seed(seed)
  i <- 1
  while (i<=tot) {
    print(i)
    boot.ind <- sample(1:length(pred), rep = TRUE)
    boot.pred <- pred[boot.ind]  ## kluge!
    boot.total <- total[boot.ind]
    n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
                   lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
                   method="L-BFGS-B",control=list(trace=FALSE,
                                       parscale=c(100,100,1)),
                   data.pred=boot.pred,
                   data.total=boot.total))
     if (is.null(class(n))) {
      bootmat[i,] <- c(n$val,n$par, n$convergence)
      i <- i+1
    }
  }
  bootmat
}

bootmat <- do.boot(5)

## find looping bootstrap sample

find.boot <- function(n,seed=101,cat=FALSE) {
  set.seed(seed)
  for (i in 1:n)
    boot.ind <- sample(1:length(pred), rep = TRUE)
  boot.pred <- pred[boot.ind]  ## kluge!
  boot.total <- total[boot.ind]
  if (cat) {
    cat(paste("boot.pred <- c(",paste(boot.pred,collapse=","),")",sep=""),"\n")
    cat(paste("boot.total <- c(",paste(boot.total,collapse=","),")",sep=""),"\n")
  }
  else list(boot.pred,boot.total)
}

On 3 Oct 2000, Peter Dalgaard BSA wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > >   Should ffloat-store be enabled in general for compilation on Linux
> > > boxes?
> > 
> > I am not sure it should.  We try to be as defensive about compiler flags
> > as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> > I'd prefer modifying the code if possible ...
> 
> It definitely shouldn't... Basically what it does is to defeat the
> "guard digits" that are used in Intel FPUs (internally using 10 bytes
> rather than 8 for doubles). While there are some rare cases where this
> messes up the "endgame" of numerical algorithms, it increases overall
> numerical accuracy. Also, storing all floating-point values off-chip
> causes a substantial decrease in performance.
> 
> In the case(-s ?) I've seen, a routine was trying too hard to squeeze
> the last bit of precision out of a termination criterion.
> 
> Optimization is another likely culprit for this kind of trouble, so
> perhaps one should try turning it off for this code?
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 16:51:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 16:51:10 +0100 (BST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200010031551.QAA02391@toucan.stats.ox.ac.uk>

> From: ben@zoo.ufl.edu
> Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)

[...]

>   On the other hand, I might choose to work on adapting a different set of
> code -- the "nlminb" function in Splus5 appears to be based on a different
> set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
> particular reasons for using a different algorithm here.

1) The one used in optim is later and supposedly better.

2) I do try not to copy S-PLUS (as distinct from S).

3) There are quite a few problems with nlminb too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 17:05:50 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 18:05:50 +0200
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 17:40:47 +0200 (CEST)"
References: <200009292118.XAA02892@pubhealth.ku.dk> <14809.65023.834763.292861@mithrandir.hornik.net>
Message-ID: <x21yxxvrj5.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Maybe we should change this as follows: if either of the two lists has
> names, work though the named components.  Warn about the ones not
> present in both.  Compare the ones present in both.  Then get rid of all
> named components and compare what is left in positional order.
> 
> As I said, I am not sure that this is really what we want.
> 
> Comments?

I think you might be right, and also that this is an easy thing to
implement. Then we'd have

all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE

Right?

However, BigBrother has

> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
[1] "Names: 2 string mismatches"
attr(, "continue"):
[1] T

> all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
[1] T

..which does look like a "compatible bug"

Hmm. Maybe one wants positional matching in any case? But then, what
is the named-component extraction about??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 17:26:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 17:26:24 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200010031626.RAA00492@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
components (PR#674)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 03 Oct 2000 18:05:50 +0200
> 
> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > Maybe we should change this as follows: if either of the two lists has
> > names, work though the named components.  Warn about the ones not
> > present in both.  Compare the ones present in both.  Then get rid of all
> > named components and compare what is left in positional order.
> > 
> > As I said, I am not sure that this is really what we want.
> > 
> > Comments?
> 
> I think you might be right, and also that this is an easy thing to
> implement. Then we'd have
> 
> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
> 
> Right?

Probably not. Lists do have orderings: they are not sets but generic
vectors.

> However, BigBrother has
> 
> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
> [1] "Names: 2 string mismatches"
> attr(, "continue"):
> [1] T
> 
> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
> [1] T

That's not what current versions of S-PLUS give, as one might hope.

> ..which does look like a "compatible bug"
> 
> Hmm. Maybe one wants positional matching in any case? But then, what
> is the named-component extraction about??

I think that both the names and components should match exactly (the
components recursively).  Unfortunately the named-component extraction
is partial matching (at least, sometimes) so the ordering of the names
always matters.  (There's an S/R difference here I keep forgetting to 
write down. I think it is 

x <- list(aa=1, bb=2)
x["a"]

which gives in S
$aa:
[1] 1
and in R
$"NA"
NULL
so S always partial matches, but R does not always.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 18:09:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 19:09:33 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#681)
Message-ID: <200010031709.TAA02504@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 18:09:58 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 3 Oct 2000 19:09:58 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#682)
Message-ID: <200010031709.TAA02520@pubhealth.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Oct  3 22:26:06 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 3 Oct 2000 14:26:06 -0700
Subject: [Rd] FW: Parse Errors
Message-ID: <MPEHJEGLNPNFGJFOJMKNIEDBCAAA.Don.Wingate@IntelliChem.com>

Earlier I posted the message below to R-announce. Please, let me appologize
for this mistake, it was not intended. The solution was provided by Duncan
Murdoch who passed on a message he recieved from Brian Ripley which informed
me that settimg R_Interactive to 1 changes the default behavor of aborting
on an error.

Thankyou, Don Wingate.


-----Original Message-----
From: Don Wingate [mailto:Don.Wingate@IntelliChem.com]
Sent: Tuesday, October 03, 2000 9:35 AM
To: r-announce@lists.R-project.org
Subject: Parse Errors


Dear R Development Team,

Using Thomas Baier's R Com Server -- or a dll I am building which supports
an evaluate function that is based on Baier's function R_Proxy_evaluate
contained in proxy_impl.c -- when I issue an invalid command to R such as
"plo(x)" the program crashes. There is code in R_Proxy_evaluate to test for
a parse error before actually generating code and issuing the command - He
calls R_Parse1Buffer(&lBuffer,0,&lStatus) and then tests the value of
lStatus for parse error. The trouble is that lStatus == PARSE_OK even though
the command is invalid, so the evaluation continues until eval() is called,
at which point R terminates and crashes the program.  (It does write an
error message to the console first, but crashes after that.)

Is there a way to handle this? The same command can be issued inside
RGui.exe or RTerm.exe with out a problem.

Thankyou, Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 04:40:40 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 11:40:40 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>

Hi, In C code called from .Call using the R interface, is it possible to
access the variables R_ColorTable and R_ColorTableSize? I tried 
extern int R_ColorTableSize; 
extern unsigned int R_ColorTable[]; 
extern char *DefaultPalette[]; 

as in Graphics.h but I guess that code doesn't get written into libR ? But
I can access 
extern void hsv2rgb
which is in graphics.c

Any help?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:25:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:25:12 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
References: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
Message-ID: <14810.52552.433477.593314@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

>> To: Kurt.Hornik@ci.tuwien.ac.at
>> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
>> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
> components (PR#674)
>> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>> Date: 03 Oct 2000 18:05:50 +0200
>> 
>> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> 
>> > Maybe we should change this as follows: if either of the two lists has
>> > names, work though the named components.  Warn about the ones not
>> > present in both.  Compare the ones present in both.  Then get rid of all
>> > named components and compare what is left in positional order.
>> > 
>> > As I said, I am not sure that this is really what we want.
>> > 
>> > Comments?
>> 
>> I think you might be right, and also that this is an easy thing to
>> implement. Then we'd have
>> 
>> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
>> 
>> Right?

> Probably not. Lists do have orderings: they are not sets but generic
> vectors.

>> However, BigBrother has
>> 
>> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
>> [1] "Names: 2 string mismatches"
>> attr(, "continue"):
>> [1] T
>> 
>> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
>> [1] T

> That's not what current versions of S-PLUS give, as one might hope.

>> ..which does look like a "compatible bug"
>> 
>> Hmm. Maybe one wants positional matching in any case? But then, what
>> is the named-component extraction about??

> I think that both the names and components should match exactly (the
> components recursively).  Unfortunately the named-component extraction
> is partial matching (at least, sometimes) so the ordering of the names
> always matters.  (There's an S/R difference here I keep forgetting to 
> write down. I think it is 

> x <- list(aa=1, bb=2)
> x["a"]

> which gives in S
> $aa:
> [1] 1
> and in R
> $"NA"
> NULL
> so S always partial matches, but R does not always.)

More precisely, we have

R> x[["a"]]
[1] 1
R> x["a"] 
$"NA"
NULL

Does this make sense at all?  Comparing it to

R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
$"NA"
[1] 3

I would think that the x["a"] incorrectly indicates that the list has a
named component "NA" with value NULL ...

What should we do about all.equal.list()?  Should we deal with the named
components first and strip them off, or always go the positional route?
Your comment that lists are generic vectors would indicate that the
second approach is more appropriate ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:27:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:27:02 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.52552.433477.593314@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Kurt Hornik wrote:

> > I think that both the names and components should match exactly (the
> > components recursively).  Unfortunately the named-component extraction

> > is partial matching (at least, sometimes) so the ordering of the names
> > always matters.  (There's an S/R difference here I keep forgetting to 
> > write down. I think it is 
> 
> > x <- list(aa=1, bb=2)
> > x["a"]
> 
> > which gives in S
> > $aa:
> > [1] 1
> > and in R
> > $"NA"
> > NULL
> > so S always partial matches, but R does not always.)
> 
> More precisely, we have
> 
> R> x[["a"]]
> [1] 1
> R> x["a"] 
> $"NA"
> NULL
> 
> Does this make sense at all?  Comparing it to
> 
> R> x <- list(aa=1, bb=2, "NA"=3)
> R> x["NA"]
> $"NA"
> [1] 3
> 
> I would think that the x["a"] incorrectly indicates that the list has a
> named component "NA" with value NULL ...

Yes, so would I. I think it is a bug in R.

> What should we do about all.equal.list()?  Should we deal with the named
> components first and strip them off, or always go the positional route?
> Your comment that lists are generic vectors would indicate that the
> second approach is more appropriate ...

See the first two lines I've left here. I think it should be positional
matching *and* the names should match too. That is, all.equal.list would
fail if one list had names and other did not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:35:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:35:34 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hi, In C code called from .Call using the R interface, is it possible to
> access the variables R_ColorTable and R_ColorTableSize? I tried 
> extern int R_ColorTableSize; 
> extern unsigned int R_ColorTable[]; 
> extern char *DefaultPalette[]; 
> 
> as in Graphics.h but I guess that code doesn't get written into libR ? But
> I can access 
> extern void hsv2rgb
> which is in graphics.c
> 
> Any help?

Are you doing this on Windows (you don't seem to say)?  If so the comment
in the Makefile

# R.dll exports all global symbols BUT import library (libR.a)
# only (all functions) + (global vars listed in exported-vars))

should answer your problem (add them to a local copy of R.exp and remake
libR.a).  The rationale was to avoid namespace pollution, as you will
need to remake globalvars.h and include that too.  exported-vars should
include all the variables in the public API.

I should point out that Graphics.h (it is capitalized) is not a distributed
header and not supported for use in addons.  We've had discussions about
changing some of that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:43:57 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:43:57 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
Message-ID: <14810.53677.386845.624289@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>> > I think that both the names and components should match exactly (the
>> > components recursively).  Unfortunately the named-component extraction

>> > is partial matching (at least, sometimes) so the ordering of the names
>> > always matters.  (There's an S/R difference here I keep forgetting to 
>> > write down. I think it is 
>> 
>> > x <- list(aa=1, bb=2)
>> > x["a"]
>> 
>> > which gives in S
>> > $aa:
>> > [1] 1
>> > and in R
>> > $"NA"
>> > NULL
>> > so S always partial matches, but R does not always.)
>> 
>> More precisely, we have
>> 
R> x[["a"]]
>> [1] 1
R> x["a"] 
>> $"NA"
>> NULL
>> 
>> Does this make sense at all?  Comparing it to
>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>> $"NA"
>> [1] 3
>> 
>> I would think that the x["a"] incorrectly indicates that the list has a
>> named component "NA" with value NULL ...

> Yes, so would I. I think it is a bug in R.

Agreed.  Should not be too hard to spot ...

>> What should we do about all.equal.list()?  Should we deal with the named
>> components first and strip them off, or always go the positional route?
>> Your comment that lists are generic vectors would indicate that the
>> second approach is more appropriate ...

> See the first two lines I've left here. I think it should be
> positional matching *and* the names should match too. That is,
> all.equal.list would fail if one list had names and other did not.

Well should it really FAIL?

What would be the precendence of the comparisons?  E.g.,

* compare the lenghts.  If different, only retain the components from 1
to the smaller lenght.

* Go through these.  If they have names, compare the names.  Then
compare the values.

[If both components have the same name but differ in value, the output
would display the name and not the position, right?  I mean something
like
  msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
rather than
  msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
???]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 08:37:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 08:37:02 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>

On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:

> I should point out that Graphics.h (it is capitalized) is not a distributed
> header and not supported for use in addons.  We've had discussions about
> changing some of that.

Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
R_ext and does not start with `R', only such headers are exported.

We have talked about exporting some of the graphics functions.  The
problem is the device driver defns, which I at least do not think are
stable enough to export. So the idea that we were exploring was to 
have *DevDesc as an opaque type in the exported header, and only allow
internal code access to its internals.  (If functions using *GPar 
need to be exported, then that would need to be made opaque too.)

Separately, Duncan TL was interested in accessing the driver part for an
addon driver, and I don't think we got too far in resolving that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 09:51:39 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 16:51:39 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>

Hi,
Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
 and the list of export functions would not be portable, would it? Just
some background, I am building an interactive color picker for R, and i
need to be able to Display the colors in the current palette so that they
can be edited. I can do something like 
current.palette<-palette()
.Call("colorpick",current.palette)

However, if there are named colors in the palette I have to do a lot of
dancing around to get it to a list of rgb values. I thought if there was
an easy way, I could avoid rewriting a lot of internal code.

Besides accessing the palette everything works dandy using graphapp. 


Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 4 Oct 2000, Prof Brian Ripley wrote:

> On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:
> 
> > I should point out that Graphics.h (it is capitalized) is not a distributed
> > header and not supported for use in addons.  We've had discussions about
> > changing some of that.
> 
> Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
> R_ext and does not start with `R', only such headers are exported.
> 
> We have talked about exporting some of the graphics functions.  The
> problem is the device driver defns, which I at least do not think are
> stable enough to export. So the idea that we were exploring was to 
> have *DevDesc as an opaque type in the exported header, and only allow
> internal code access to its internals.  (If functions using *GPar 
> need to be exported, then that would need to be made opaque too.)
> 
> Separately, Duncan TL was interested in accessing the driver part for an
> addon driver, and I don't think we got too far in resolving that.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 10:16:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 10:16:28 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
>  and the list of export functions would not be portable, would it? Just

You only need it to compile your DLL, and distributing that would be
portable (to Windows). As I said, using anything out of
Graphics.h is not guaranteed to work.  If we make part of Graphics.h
public then the variables will go in exported-vars.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 10:51:49 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 17:51:49 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>

Hmmm, did I miss something? I added 
R_ColorTable 
R_ColorTableSize 
to R.exp
and rebuilt libR.a then i added
                                                                               
#define R_ColorTableSize (*_imp__R_ColorTableSize) 
#define R_ColorTable(*_imp__R_ColorTable)
                                                                               
to globalvar.h
                                                                               
make pkg-colortools
                                                                               
results in   

gcc -Id:/Nicholas/rw1011/src/include -include
d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
-Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
colorpick.c: In function `create_dialog': colorpick.c:175:
`_imp__R_ColorTableSize' undeclared (first use in this function )
colorpick.c:175: (Each undeclared identifier is reported only once
colorpick.c:175: for each function it appears in.) colorpick.c:176:
`_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
At top level: colorpick.c:47: warning: `alts' defined but not used
make[2]: *** [colorpick.o] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 11:52:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 11:52:56 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hmmm, did I miss something? I added 

Given that this works for the normal system global vars, you must have!

> R_ColorTable 
> R_ColorTableSize 
> to R.exp
> and rebuilt libR.a then i added
>                                                                                
> #define R_ColorTableSize (*_imp__R_ColorTableSize) 
> #define R_ColorTable(*_imp__R_ColorTable)
>                                                                                
> to globalvar.h

You could just re-build globalvar.h.

>                                                                                
> make pkg-colortools
>                                                                                
> results in   
> 
> gcc -Id:/Nicholas/rw1011/src/include -include
> d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
> -Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
> colorpick.c: In function `create_dialog': colorpick.c:175:
> `_imp__R_ColorTableSize' undeclared (first use in this function )
> colorpick.c:175: (Each undeclared identifier is reported only once
> colorpick.c:175: for each function it appears in.) colorpick.c:176:
> `_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
> At top level: colorpick.c:47: warning: `alts' defined but not used
> make[2]: *** [colorpick.o] Error 1
> 

Did you declare  R_ColorTableSize and R_ColorTable?  If so, the define
should change them to declarations of _imp__R_ColorTableSize etc.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Wed Oct  4 12:59:14 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041159.NAA13214@pubhealth.ku.dk>

The following seems very strange:
> lgamma(-0.04)
[1] 3.243307
> gamma(-0.04)
[1] -25.61830
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 13:16:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 14:16:28 +0200 (CEST)
Subject: [Rd] gamma and lgamma functions (PR#684)
In-Reply-To: <200010041159.NAA13214@pubhealth.ku.dk>
References: <200010041159.NAA13214@pubhealth.ku.dk>
Message-ID: <14811.8092.895797.680324@mithrandir.hornik.net>

>>>>> james lindsey writes:

> The following seems very strange:
>> lgamma(-0.04)
> [1] 3.243307
>> gamma(-0.04)
> [1] -25.61830

I don't think so:

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
     gamma function.

Notice the ABSOULUTE VALUE.

R> log(abs(gamma(-0.04)))
[1] 3.243307

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 13:12:12 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 4 Oct 2000 14:12:12 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041212.OAA14250@pubhealth.ku.dk>

> From: james.lindsey@luc.ac.be
> Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
> 
> The following seems very strange:
> > lgamma(-0.04)
> [1] 3.243307
> > gamma(-0.04)
> [1] -25.61830
>   Jim

It is as documented, though: ?lgamma gives

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
                                               ^^^^^^^^^^^^^^^^^
     gamma function.

and log(25.61830) = 3.243307.

It's not S-compatible, I grant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 14:39:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 15:39:27 +0200
Subject: [Rd] Hershey Fonts, PNG, SVG, .. graphics formats
Message-ID: <14811.13071.19421.380883@gargle.gargle.HOWL>

I wonder if we couldn't just use the PNG , SVG, support from the
  GNU plotutils
from which we already have the Hershey scalable vector fonts [-> help(Hershey)]
The new plotutils (July 2000) do support these (and will probably even
better in the future, i.e., we can build on others people free software.

Paul [who built "Hershey" into R], do you think this path is worth pursuing?

>From  http://www.gnu.org/software/plotutils/plotutils.html

>> The GNU plotutils package contains software for both programmers and
>> technical users. Its centerpiece is libplot, a powerful C/C++ function
>> library for exporting 2-D vector graphics in many file formats, both vector
>> and raster. It can also do vector graphics animations.
>> 
>> libplot is device-independent in the sense that its API (application
>> programming interface) does not depend on the type of graphics file to be
>> exported.
>> 
>> Besides libplot, the package contains command-line programs for plotting
>> scientific data. Many of them use libplot to export graphics.
>> 
>> The current version is 2.4.1, released July 2000. It can be installed on
>> GNU/Linux, FreeBSD, and Unix systems.
>> 
>> 
>>        GNU libplot, and applications built on it, can now export graphics
>>        files in SVG format. SVG (Scalable Vector Graphics) is a new,
>>        XML-based format for Web graphics, which is being standardized by
>>        the Graphics Activity of the W3 Consortium.
>> 
>>        PNG format can now be exported too!
>> 
>>        The libplot API has been extended to support the drawing of
>>        Postscript-style compound paths.
>> 
>> The plotutils package comes with a 175-page manual. Here is an older
>> version of the manual.
>> 
>> The package is free software. Its source code is distributed as a gzipped
>> tar file, 3.3 megabytes in size. Here is how you can get it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 16:04:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 11:04:27 -0400
Subject: [Rd] R 1.2 build
Message-ID: <39DB46FB.A92CCDC5@bank-banque-canada.ca>

I've been trying to build a bundle with the R-devel snapshot from
yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
trying to do this yet.)

It is failing with the message
tar : /dev/rmt/0 : Permission denied

It happens after "removing junk files" and just after the message
"building dse_2000.9-1.tar.gz"

It looks to be coming from the line in the build script
  system("tar ....
but I don't read perl very well.

(Using Solaris.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 16:22:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 17:22:48 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 11:04:27 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I've been trying to build a bundle with the R-devel snapshot from
> yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> trying to do this yet.)

On the contrary, this kind of info is very useful.

> It is failing with the message
> tar : /dev/rmt/0 : Permission denied
> 
> It happens after "removing junk files" and just after the message
> "building dse_2000.9-1.tar.gz"
> 
> It looks to be coming from the line in the build script
>   system("tar ....
> but I don't read perl very well.
> 
> (Using Solaris.)

I think the problem is that older versions of tar wants un-hyphened
options i.e. 

tar chXf $exclude $startdir/$filename $pkgname

rather than
 
tar -c -h -X $exclude -f $startdir/$filename $pkgname


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 16:25:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 17:25:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <14811.19431.443730.163540@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've been trying to build a bundle 

You are talking about 

     R CMD build ....

right? It would help next time if you give these details..

    PaulG> with the R-devel snapshot from yesterday. (Yes I know it is
    PaulG> unstable and just tell me if I shouldn't be trying to do this
    PaulG> yet.)

no, it should be ok, AFAIK

    PaulG> It is failing with the message
    PaulG> tar : /dev/rmt/0 : Permission denied

this very much looks like tar
is trying to really work on a tape {"Tape ARchiving"} instead of a 
file.
    PaulG> It happens after "removing junk files" and just after the message
    PaulG> "building dse_2000.9-1.tar.gz"

    PaulG> It looks to be coming from the line in the build script
    PaulG> system("tar ....

more exactly,
           system("tar -c -h -f $startdir/$filename $pkgs");

    PaulG> but I don't read perl very well.

Can you try to find out if the above command works in your shell,
e.g
	tar -c -h -f /tmp/ex.tar  d1 d2

where d1 and d2 must be valid directories ?

    PaulG> (Using Solaris.)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct  4 17:07:46 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 17:07:46 +0100 (BST)
Subject: [Rd] R 1.2 build
Message-ID: <200010041607.RAA02123@toucan.stats.ox.ac.uk>


> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 04 Oct 2000 17:22:48 +0200
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I've been trying to build a bundle with the R-devel snapshot from
> > yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> > trying to do this yet.)
> 
> On the contrary, this kind of info is very useful.
> 
> > It is failing with the message
> > tar : /dev/rmt/0 : Permission denied
> > 
> > It happens after "removing junk files" and just after the message
> > "building dse_2000.9-1.tar.gz"
> > 
> > It looks to be coming from the line in the build script
> >   system("tar ....
> > but I don't read perl very well.
> > 
> > (Using Solaris.)
> 
> I think the problem is that older versions of tar wants un-hyphened
> options i.e. 
> 
> tar chXf $exclude $startdir/$filename $pkgname
> 
> rather than
>  
> tar -c -h -X $exclude -f $startdir/$filename $pkgname

Um.  Real tar (the AT&T based one such as that on Solaris 2.7) needs
chXf. GNU tar is a rather different animal.

This is chiefly my fault: I modified this to work on Solaris, but tested
it on a machine where tar is GNU tar ....

You will note that build is not finished yet:

    ### !!! Missing: check & rebuild various indices !!!

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 17:57:19 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 12:57:19 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB616F.65A74589@bank-banque-canada.ca>

>I think the problem is that older versions of tar wants un-hyphened
>options i.e.

>tar chXf $exclude $startdir/$filename $pkgname

It works with
tar chf  $startdir/$filename $pkgname

I didn't try your example because I'm fairly sure $exclude should not
immediately follow f, but I'm not sure what the proper syntax should be.
(The man page is not very helpful.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 18:53:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 19:53:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 12:57:19 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca>
Message-ID: <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >tar chXf $exclude $startdir/$filename $pkgname
> 
> It works with
> tar chf  $startdir/$filename $pkgname
> 
> I didn't try your example because I'm fairly sure $exclude should not
> immediately follow f, but I'm not sure what the proper syntax should be.
> (The man page is not very helpful.)

I think it is OK as written - arguments to X and f modifiers in same
order as in the chXf. But if it bothers you, try 

tar chfX $startdir/$filename $exclude $pkgname

Lessee...:

[pd@arnold pd]$ echo junk/y > xfile
[pd@arnold pd]$ tar cvhXf xfile junk.tar junk
a junk/ 0K
a junk/y excluded
a junk/y.crypt 0K
a junk/y2 0K
a junk/R-intro/ 0K
a junk/R-intro/CVS/ 0K
a junk/R-intro/CVS/Repository 1K
....

Yup. Works.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 20:14:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 15:14:37 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca> <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB819C.69A65F44@bank-banque-canada.ca>

>tar  chXf  $exclude $startdir/$filename $pkgname

Yes it works, sorry for doubting.

One might consider putting "core" in the list of files to exclude.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 21:25:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 21:25:31 +0100 (BST)
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB819C.69A65F44@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>

On Wed, 4 Oct 2000, Paul Gilbert wrote:

> >tar  chXf  $exclude $startdir/$filename $pkgname
> 
> Yes it works, sorry for doubting.
> 
> One might consider putting "core" in the list of files to exclude.

There's also a list of files to delete, which seems an appropriate action
for a core file.  However, I would surprised to find core in the source
files for a package, as that implies that some executable had been run
within the package sources.  Assuming you had a core file there, do you
know how it happened?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Oct  5 08:50:28 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 5 Oct 2000 15:50:28 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010051548520.27447-100000@sununx.comp.nus.edu.sg>

Hi,
Thank you for all the help. i figured out what I was missing, I forgot to
declare the variables in my code. Duh. Now its working great.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medonline@hotmail.com  Thu Oct  5 14:06:15 2000
From: medonline@hotmail.com (medonline@hotmail.com)
Date: Thu, 05 Oct 2000 06:06:15 -0700
Subject: [Rd] The best Viagra prices are here.
Message-ID: <0000547f3c9f$00006c7c$00005a0b@>

<HTML>
<BODY>

<FONT face=3D"MS Sans Serif">
<FONT size=3D3> Viagra is scientifically proven to help/prevent impotence.=
<BR>
You've seen it everywhere:  ABC, NBC, CBS, and FOX.<BR>
Viagra is for everyone.  Aged 20-70?  Viagra can help.<BR>
Now you can get Viagra via Online Prescription.  <BR>
You can only get it at E-Meds.  See the link below.<BR>
There is no time like the present.  See what Viagra can do<BR>
for you.  You will NOT be dissapointed.  Everything you've <BR>
heard is true.  Give it a try, and you'll see. <BR>
<BR>
<BR>
<B> The E-Meds Online Pharmacy has it all.<B>0   Best of all, we have<BR>
Viagra.  The news is real; the rumors are true.  Viagra is the<BR>
physician-approved impotence solution for the new millenium. No<BR>
matter what your age, race, or age, Viagra can benefit your sex <BR>
life.  Give it a try; see what everyone is talking about. Need <BR>
anything else?  Claritin, Zyban, Propecia, Xenical?  We have it.
<FONT size=3D2> <BR>
<BR>
<FONT color=3D"l=01"><U><B> http://www.multirx.com/viagraone.htm<BR>
<FONT color=3D"#0000FF"><U>none<B>0 <a href=3D"http://www.multirx.com/viag=
raone.htm">Click here for Viagra.</a><BR>
<BR>
<BR>
<BR>
<BR>
This  message is sent in compliance of the new e-mail bill: SECTION 301. <=
BR>
Per Section 301, Paragraph (a)(2)(C) of S. 1618, further transmissions <BR=
>
to you by the sender of this email may be stopped at no cost to you.<BR>
Prevent bulk emailers from mailing you in the future.  Simply reply to thi=
s<BR>
email with your email address in the body, and you will be removed.<BR>
<BR>
</FONT></FONT></FONT><p><p><p><p><p><p><p><p><p><p>






<p><FONT face=3D"MS Sans Serif"><p><FONT size=3D3> Viagra is scientificall=
y proven to help/prevent impotence.<BR><p>You've seen it everywhere:  ABC,=
 NBC, CBS, and FOX.<BR><p>Viagra is for everyone.  Aged 20-70?  Viagra can=
 help.<BR><p>Now you can get Viagra via Online Prescription.  <BR><p>You c=
an only get it at E-Meds.  See the link below.<BR><p>There is no time like=
 the present.  See what Viagra can do<BR><p>for you.  You will NOT be diss=
apointed.  Everything you've <BR><p><p><p><p><p><p></BODY></HTML>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct  5 15:27:12 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 05 Oct 2000 10:27:12 -0400
Subject: [Rd] R 1.2 build
References: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>
Message-ID: <39DC8FC0.DA1459D2@bank-banque-canada.ca>

>However, I would surprised to find core in the source
>files for a package, as that implies that some executable had been run
>within the package sources.  Assuming you had a core file there, do you
>know how it happened?

I'm not certain, but I think what happened was that the first time I ran R CMD
check with R 1.2  (via my Makefile) I did not get things quite right and it ran
in my source tree rather than where I intended it to run.  (There are some
changes from 1.1.) I am getting a segfault with one example, but I haven't
tracked it down yet.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From netnews@newbeirut.com  Fri Oct  6 18:44:00 2000
From: netnews@newbeirut.com (Sayfco)
Date: Fri, 06 Oct 2000 19:44:00 +0200
Subject: [Rd] Your Dream House starting at $53000
Message-ID: <m13hJ67-002ha2C@phoenix.inco.com.lb>

This is a Multipart MIME message. Since your mail reader
does not understand this format, some or all of
this message may not be legible.

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_002_23068078_1184.3_23069265.3000488"


------=_NextPart_001_002_23068078_1184.3_23069265.3000488
Content-Type: text/html;
	charset=iso-8859-1
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Elie waked">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (Win98; I) [Netscape]">
   <title>index</title>
</head>
<body>
&nbsp;
<table BORDER COLS=1 WIDTH="100%" >
<tr>
<td BGCOLOR="#FFCC00">
<center><b>Distribute this message to your friends or display it on your
company board</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFECE0">
<center><a href="http://www.sayfco.com"><img SRC="cid:1184.3.23068085@ads12.jpg" BORDER=0 height=156 width=500></a>
<br><b><a href="http://www.sayfco.com">www.sayfco.com</a></b>
<br><b>E-mail:<a href="mailto:mail@sayfco.com">mail@sayfco.com</a></b>
<br><b>SWIMMING POOL, PARKING, GREEN SPACES &amp; 360 PANORAMIC VIEW.</b>
<br><b>BEIRUT - LEBANON&nbsp;</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFCC00">
<center>
<p><b>Do you have&nbsp; Product, Service, Offer, Message, Mail, Invitation,
etc., to distribute ?&nbsp;</b>
<br><b>We have the best way to send it to you via email to :&nbsp;</b>
<br><b>74'000 Lebanese Emails (Companies amd Individuals) for 75$ Only</b>
<br><b>Just call anytime at&nbsp; 03 213063&nbsp; Customer Support&nbsp;</b>
<br><b>&nbsp;Copyright &copy; 2000 Over Net Company for services. All rights
reserved.</b></center>
</td>
</tr>

<tr>
<td><font size=-1>To unsubscribe, reply with word "remove" into the subject
line</font></td>
</tr>
</table>

</body>
</html>

------=_NextPart_001_002_23068078_1184.3_23069265.3000488--

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: image/jpeg; name="ads12.jpg"
Content-Transfer-Encoding: base64
Content-ID: <1184.3.23068085@ads12.jpg>

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

------=_NextPart_000_001_23068078_1184.3_23069265.3000488--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Oct  6 01:58:42 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 6 Oct 2000 13:58:42 +1300
Subject: [Rd] Re: Hershey Fonts, PNG, SVG, .. graphics formats
References: <14811.13071.19421.380883@gargle.gargle.HOWL>
Message-ID: <004501c02f30$926879b0$175dd882@stat.auckland.ac.nz>

Hi


> I wonder if we couldn't just use the PNG , SVG, support from the
>   GNU plotutils
> from which we already have the Hershey scalable vector fonts [->
help(Hershey)]
> The new plotutils (July 2000) do support these (and will probably even
> better in the future, i.e., we can build on others people free software.
>
> Paul [who built "Hershey" into R], do you think this path is worth
pursuing?


What I wanted to do with the Hershey vector fonts was JUST grab all of the
vector font database information and all of the stuff that converted a
character string into a set of line-drawing commands (using the vector font
database).  This proved possible for the vector fonts, but that was because
I was able to find a fairly clear interface between the vector font code and
the device-handling code.  This meant I was able replace calls to the GNU
plotutils devices with calls to R graphics devices without (I think) too
much horribleness.

I was deliberately not trying to figure out how the GNU plotutils device
code worked, but the vague impression I obtained was that it was quite
complicated and differed quite a bit from R's concept of a device.

Now, without having looked at the PNG/SVG code, my guess would be that it
might be much more tightly bound to GNU's device-handling code - i.e.,
probably harder to only extract the PNG/SVG bits we want.

On a more positive note ... in general, the GNU plotutils code (at least the
bits I saw) impressed me.  It seemed well-documented, well-organised, and
VERY thorough.  Mad though it may sound, perhaps we might want to adopt ALL
of their device-handling code rather than trying to just get the PNG/SVG
bits (maybe one way to make our postscript woes disappear :)

I _suspect_ that a significant amount of time and effort would be involved
in trying to understand the PNG/SVG code (or all of the device-handling
code).  However, I also suspect that it would be worth the effort because
from what I've seen there's a lot of really good stuff in there.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  6 07:41:40 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 6 Oct 2000 08:41:40 +0200
Subject: [Rd] spam .. improving my filters
In-Reply-To: <m13hJ67-002ha2C@phoenix.inco.com.lb>
References: <m13hJ67-002ha2C@phoenix.inco.com.lb>
Message-ID: <14813.29732.68205.736536@gargle.gargle.HOWL>

I'm sorry for the recent spam
to this list (btw, I've no idea why R-devel was targeted more than R-help).

I'm constantly improving the anti-spam filters,
but it's delicate balance between errors of the first and second kind:
You all suffer from the first, I do additionally suffer from the second
kind:  Having to manually approve false bounces...

BTW:  Changing the list automation from majordomo to mailman 
      is coming quite close.
      I plan to migrate  R-devel as one of the first mailing lists, since I
      suppose that you are somewhat more sophisticated computer users than
      subscribers to other lists I manage.

Your list maintainer:

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  6 13:07:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 6 Oct 2000 14:07:48 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.53677.386845.624289@mithrandir.hornik.net>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net>
Message-ID: <14813.49300.795765.338583@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Prof Brian D Ripley writes:
>> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>>> > I think that both the names and components should match exactly (the
>>> > components recursively).  Unfortunately the named-component extraction

>>> > is partial matching (at least, sometimes) so the ordering of the names
>>> > always matters.  (There's an S/R difference here I keep forgetting to 
>>> > write down. I think it is 
>>> 
>>> > x <- list(aa=1, bb=2)
>>> > x["a"]
>>> 
>>> > which gives in S
>>> > $aa:
>>> > [1] 1
>>> > and in R
>>> > $"NA"
>>> > NULL
>>> > so S always partial matches, but R does not always.)
>>> 
>>> More precisely, we have
>>> 
R> x[["a"]]
>>> [1] 1
R> x["a"] 
>>> $"NA"
>>> NULL
>>> 
>>> Does this make sense at all?  Comparing it to
>>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>>> $"NA"
>>> [1] 3
>>> 
>>> I would think that the x["a"] incorrectly indicates that the list has a
>>> named component "NA" with value NULL ...

>> Yes, so would I. I think it is a bug in R.

> Agreed.  Should not be too hard to spot ...

>>> What should we do about all.equal.list()?  Should we deal with the named
>>> components first and strip them off, or always go the positional route?
>>> Your comment that lists are generic vectors would indicate that the
>>> second approach is more appropriate ...

>> See the first two lines I've left here. I think it should be
>> positional matching *and* the names should match too. That is,
>> all.equal.list would fail if one list had names and other did not.

> Well should it really FAIL?

> What would be the precendence of the comparisons?  E.g.,

> * compare the lenghts.  If different, only retain the components from 1
> to the smaller lenght.

> * Go through these.  If they have names, compare the names.  Then
> compare the values.

> [If both components have the same name but differ in value, the output
> would display the name and not the position, right?  I mean something
> like
>   msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
> rather than
>   msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
> ???]

The more I think about it, the less I am sure about what we really want.

In discussions with Fritz yesterday we noticed that quite often lists
are in fact used as hash tables; typically this is what is meant if all
components of the list have names.  Fritz suggested an option
	hash.order = FALSE
to all.equal.list() through which one could control the interpretation.
This option could also be passed on recursively.

I am not sure about this.  There is a difference between `typically' and
always.  Maybe we should have hash tables which can be implemented as
lists with class "hashtable".  This would be clean, but a substantial
change (e.g., most modelling functions in fact return hash tables in the
above sense) and I am not sure whether this is worth the effort.

We can fix the problems in the bug report by deleting the code in
all.equal.list() which compares the components.  That has the effect
that named components are referred to as positional even if their names
agree, and we should decide whether we want this or not.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Oct  6 15:35:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Oct 2000 10:35:49 -0400
Subject: [Rd] all.equal.list() sometimes fails with unnamed and
 namedcomponents (PR#674)
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net> <14813.49300.795765.338583@mithrandir.hornik.net>
Message-ID: <39DDE345.16666166@bank-banque-canada.ca>

>We can fix the problems in the bug report by deleting the code in
>all.equal.list() which compares the components.  That has the effect
>that named components are referred to as positional even if their names
>agree, and we should decide whether we want this or not.

Apologies if I've missed something, as I have not been following this discussion
very closely. However, this effect does not seem very good to me. I often build
lists by appending named components, and  delete named components by setting
them to NULL. I don't think it should be necessary to construct objects with the
named components in the same order for the results to be equal.

Of course, I start from the position that all lists should be named lists and
name truncation should be banned - and then realize this is unrealistic given
the current state of affairs. Perhaps we need a new object called "goodlist"
(rather than "hashtable").

One of the issues here is the difference between what interactive users want for
shortcuts and what package writers want for consistence. If list objects are
always accessed by functions (constructors, etc.), rather than having their
elements tweaked by users, then one tends to lean very heavily toward the
hashtable approach.

My 2 cents worth,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct  7 03:09:00 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 7 Oct 2000 04:09:00 +0200 (MET DST)
Subject: [Rd] documentation bug in readline() (PR#685)
Message-ID: <200010070209.EAA12979@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi -

the documentation for readline() should reflect the fact that the
prompt= arg is truncated to CONSOLE_PROMPT_SIZE chars, currently defined 
as 32 in src/main/scan.c.  assuming this is the correct behavior, an
updated copy of readline.Rd is attached.

--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, file:/home/peter/R/Home.RData, package:local,
package:distns, Autoloads, package:base
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii;
 name="readline.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="readline.Rd"

\name{readline}
\title{Read a Line from the Terminal}
\usage{
readline(prompt="")
}
\alias{readline}
\arguments{
  \item{prompt}{the string printed when prompting the user for input.
  This will be truncated to a maximum allowed length, currently 32 chars.
  Should usually end with a space \code{" "}.}
}
\description{
  \code{readline} reads a line from the terminal, returning it as a
  character string.
}
\examples{
fun <- function() {
  ANSWER <- readline("Are you a satisfied R user? ")
  if (substr(ANSWER, 1, 1) == "n")
    cat("This is impossible.  YOU LIED!\n")
  else
    cat("I knew it.\n")
}
fun()
}
\keyword{utilities}

--------------FBFC021C053198B1E0FE0848--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010070515.HAA31088@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct  9 10:23:33 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 9 Oct 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] cmdscale documentation (PR#687)
Message-ID: <200010090923.LAA22351@pubhealth.ku.dk>

In the value section of "?cmdscale" in the mva library the
returned object is a *matrix* if eig=FALSE, and a list with
components "points" and "eig" if eig=TRUE, rather than always a
list as described.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 10 08:47:55 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 10 Oct 2000 09:47:55 +0200 (MET DST)
Subject: [Rd] Unreliable example in ?layout (PR#688)
Message-ID: <200010100747.JAA03964@pubhealth.ku.dk>

In ?layout values of x and y from the standard gaussian that lie
outside (-3, 3) will occasionally cause an error in hist with
breaks=seq(-3, 3, 0.5).  One reliable solution (not quite as
pretty) would be to use runif instead of rnorm, ie

      x <- runif(50, -1, 1)
      y <- runif(50, -1, 1)
      xhist <- hist(x, breaks=seq(-1,1,0.25), plot=FALSE)
      yhist <- hist(y, breaks=seq(-1,1,0.25), plot=FALSE)
      top <- max(c(xhist$counts, yhist$counts))
      xrange <- c(-1,1)
      yrange <- c(-1,1)

      # and then as before.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 10 17:32:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 10 Oct 2000 18:32:48 +0200 (MET DST)
Subject: [Rd] Documentation problem for ecdf (PR#689)
Message-ID: <200010101632.SAA12520@pubhealth.ku.dk>

Full_Name: Kurt Hornik
Version: 1.2.0
OS: Linux
Submission from: (NULL) (137.208.57.56)


File `ecdf.Rd' contains

\usage{
ecdf(x)
plot(x, verticals = FALSE, col.01line = "gray70", \dots)
}
\arguments{
  \item{x}{numeric vector with the ``observations''.}

This is wrong, because in the plot usage `x' should be an object of class
"stepfun", and in fact the code says

  plot.ecdf <- function(..., verticals = FALSE, col.01line = "gray70") { ... }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 18:08:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 13:08:18 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E34D02.A97EC18E@bank-banque-canada.ca>

I see the default behavior of unlink  with respect to directories is changing in
1.2. This causes me a certain amount of difficulty: since the recursive argument
is not supported in S I will need to start building up my compatibility library
again (which is almost empty now).

Instead of changing unlink's default behavior it might be better to define a new
function (perhaps Sys.rm) with the new default behavior, and possibly even
depreciate unlink.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 20:30:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 15:30:32 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E36E58.F41A07ED@bank-banque-canada.ca>

>R for Windows:

>unlink deleted files and empty directories in recent versions, only files
>in earlier ones.

>Given the last, the default behaviour of unlink under R is not what you
>claim, so I suppose that your code is not fully R-compatible under 1.1.1?

Actually, I was just going by what R prior to 1.2 does in Solaris (i.e. delete
directories, empty or not) and what the R 1.2 documentation says:

    Note

    Prior to R version 1.2.0 the default on Unix was recursive = TRUE, and on
    Windows wmpty (sic) directories could be deleted.

In any case, the behavior of unlink seems to be inconsistent in various versions

of S and R and on different platforms. In this situation it is very difficult to

program with the function and I have usually found that it is better  to define
a good new function, try to make it consistent across platforms, and depreciate
the old function. I will do at least an S version of that in my compatability
library but I think it would be good for R if it were done in the base. Don't
you think Sys.rm would be a good name?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 10 19:01:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 10 Oct 2000 19:01:05 +0100 (BST)
Subject: [Rd] unlink in 1.2
In-Reply-To: <39E34D02.A97EC18E@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010101839210.27338-100000@auk.stats>

On Tue, 10 Oct 2000, Paul Gilbert wrote:

> I see the default behavior of unlink  with respect to directories is changing in
> 1.2. This causes me a certain amount of difficulty: since the recursive argument
> is not supported in S I will need to start building up my compatibility library
> again (which is almost empty now).
> 
> Instead of changing unlink's default behavior it might be better to define a new
> function (perhaps Sys.rm) with the new default behavior, and possibly even
> depreciate unlink.

I think you have misunderstood what unlink() was and is actually documented
to do. For example:

S-PLUS 3.4:

       Deletes the file represented by x.

with no mention of recursively removing directories.  Only some Unix
versions of S-PLUS 3.x did: no Windows version of S-PLUS ever has.

S-PLUS 5.1:

   unlink will remove files and directories, but only empty directories.
   Use rmdir to remove a directory and everything in it.

(BTW, that's not actually true, but it is what is documented.)

R for Windows:

unlink deleted files and empty directories in recent versions, only files
in earlier ones.

Given the last, the default behaviour of unlink under R is not what you
claim, so I suppose that your code is not fully R-compatible under 1.1.1?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 10:27:59 2000
From: td2mafea@uco.es (td2mafea@uco.es)
Date: Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)
Subject: [Rd] Bug? (PR#690)
Message-ID: <200010110927.LAA18569@pubhealth.ku.dk>

I don´t know if it is a bug, but what's wrong in the folloing (R version
1.1.1, August 15, 2000, under windows 98):
> x<-matrix(nrow=10, ncol=2)
> for (i in 1:10)
+ {
+ x[i][1]<-i
+ x[i][2]<-i^2
+ }
Warning messages:
1: number of items to replace is not a multiple of replacement length
2: number of items to replace is not a multiple of replacement length
3: number of items to replace is not a multiple of replacement length
4: number of items to replace is not a multiple of replacement length
5: number of items to replace is not a multiple of replacement length
6: number of items to replace is not a multiple of replacement length
7: number of items to replace is not a multiple of replacement length
8: number of items to replace is not a multiple of replacement length
9: number of items to replace is not a multiple of replacement length
10: number of items to replace is not a multiple of replacement length

Thanks

Armando Ferreira


----------------------------------------------------------------------------
-------------
Armando Mateus Ferreira
Escuela Técnica Superior de Inginieros Agrónomos y Montes
Universidad de Córdoba-España
Avda. Menendez Pidal, 14080 Córdoba
td2mafea@uco.es

Escola Superior Agrária
6000 Castelo Branco-Portugal
armando@esa.ipcb.pt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 11 10:45:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2000 11:45:12 +0200
Subject: [Rd] Bug? (PR#690)
In-Reply-To: td2mafea@uco.es's message of "Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)"
References: <200010110927.LAA18569@pubhealth.ku.dk>
Message-ID: <x2pul790ev.fsf@blueberry.kubism.ku.dk>

td2mafea@uco.es writes:

> I don´t know if it is a bug, but what's wrong in the folloing (R version
> 1.1.1, August 15, 2000, under windows 98):
> > x<-matrix(nrow=10, ncol=2)
> > for (i in 1:10)
> + {
> + x[i][1]<-i
> + x[i][2]<-i^2
> + }
> Warning messages:
> 1: number of items to replace is not a multiple of replacement length
> 2: number of items to replace is not a multiple of replacement length

Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
ignores dimensions:

> x<-matrix(1:20,nrow=10, ncol=2)
> x[1]
[1] 1
> x[12]
[1] 12


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 11:40:41 2000
From: td2mafea@uco.es (Armando Mateus Ferreira)
Date: Wed, 11 Oct 2000 12:40:41 +0200
Subject: [Rd] Bug? (PR#690)
References: <200010110927.LAA18569@pubhealth.ku.dk> <x2pul790ev.fsf@blueberry.kubism.ku.dk>
Message-ID: <002501c0336f$b3a81f20$bf73d696@uco.es>

It's exactly what i want. Thanks.
Armando Ferreira


----- Original Message -----
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
To: <td2mafea@uco.es>
Cc: <r-devel@stat.math.ethz.ch>; <R-bugs@biostat.ku.dk>
Sent: Wednesday, October 11, 2000 11:45 AM
Subject: Re: [Rd] Bug? (PR#690)


> td2mafea@uco.es writes:
>
> > I don´t know if it is a bug, but what's wrong in the folloing (R version
> > 1.1.1, August 15, 2000, under windows 98):
> > > x<-matrix(nrow=10, ncol=2)
> > > for (i in 1:10)
> > + {
> > + x[i][1]<-i
> > + x[i][2]<-i^2
> > + }
> > Warning messages:
> > 1: number of items to replace is not a multiple of replacement length
> > 2: number of items to replace is not a multiple of replacement length
>
> Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
> ignores dimensions:
>
> > x<-matrix(1:20,nrow=10, ncol=2)
> > x[1]
> [1] 1
> > x[12]
> [1] 12
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Wed Oct 11 16:10:31 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111510.RAA23967@pubhealth.ku.dk>

Full_Name: J Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (155.140.123.250)


After grep is called many times (> 250k), with constant strings as patterns,
it complains with "invalid regular expression" on calls that worked before
(with same pattern and x). At the same time copying to the clipboard
does no longer work with "out of memory" error (i.e. when trying to
copy the error message from grep to this msg.)
Also breaks other functions (regexpr, strsplit) that seems to use
the regex functions internally. Things work again after restarting R.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 16:32:15 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 11 Oct 2000 17:32:15 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111532.RAA24080@pubhealth.ku.dk>


> From: jutans@utans.u-net.com
> Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] invalid regular expression after many grep's (PR#691)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: J Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (155.140.123.250)
> 
> 
> After grep is called many times (> 250k), with constant strings as patterns,
> it complains with "invalid regular expression" on calls that worked before
> (with same pattern and x). At the same time copying to the clipboard
> does no longer work with "out of memory" error (i.e. when trying to
> copy the error message from grep to this msg.)
> Also breaks other functions (regexpr, strsplit) that seems to use
> the regex functions internally. Things work again after restarting R.

Looks like a memory/resource leak.  Can you send us an actual
failing example on your machine, starting from a clean session,
together with details of the machine (amount of RAM etc)?  That will
help us greatly to reproduce this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Wed Oct 11 18:25:04 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Wed, 11 Oct 2000 19:25:04 +0200 (MET DST)
Subject: [Rd] documentation bug in grep (PR#692)
Message-ID: <200010111725.TAA24663@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for grep mistakenly says "gsub" whn it should say "grep"
in the Details section of grep.Rd.  a diff -u with a corrected version
follows:

diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
--- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
+++ grep.Rd-new	Wed Oct 11 10:16:43 2000
@@ -46,7 +46,7 @@
   \code{extended} argument.
 }
 \value{
-    For \code{gsub} a vector giving either the indices of the elements
+    For \code{grep} a vector giving either the indices of the elements
     of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
     the matched elements.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 21:14:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Oct 2000 21:14:39 +0100 (BST)
Subject: [Rd] documentation bug in grep (PR#692)
In-Reply-To: <200010111725.TAA24663@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010112112450.18380-100000@auk.stats>

On Wed, 11 Oct 2000 pperkins@ucsd.edu wrote:

> Full_Name: Peter Perkins
> Version: 1.1.1
> OS: LinuxPPC
> Submission from: (NULL) (24.4.89.36)
> 
> 
> the man page for grep mistakenly says "gsub" whn it should say "grep"
> in the Details section of grep.Rd.  a diff -u with a corrected version

It's in the Value section!  Thank you, fixed now.

> follows:
> 
> diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
> --- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
> +++ grep.Rd-new	Wed Oct 11 10:16:43 2000
> @@ -46,7 +46,7 @@
>    \code{extended} argument.
>  }
>  \value{
> -    For \code{gsub} a vector giving either the indices of the elements
> +    For \code{grep} a vector giving either the indices of the elements
>      of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
>      the matched elements.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Rohith.Amaratunga@dsto.defence.gov.au  Thu Oct 12 04:11:36 2000
From: Rohith.Amaratunga@dsto.defence.gov.au (Rohith.Amaratunga@dsto.defence.gov.au)
Date: Thu, 12 Oct 2000 05:11:36 +0200 (MET DST)
Subject: [Rd] Bug report (PR#693)
Message-ID: <200010120311.FAA26294@pubhealth.ku.dk>

I am operating R on a linux platform and the version info is given below

platform 	i686-unknown-linux
arch	i686
os	linux
system	i686, linux
status
major	0
minor	90.1
year	1999
month	December
day	15
languag  R

I cannot get the correct grid lines when I use the command grid() on a log
scale.  I have also tried using grid(1) and a variety of numbers but with no
luck

Thanks

Rohith


Rohith Amaratunga
Aeronautical and Maritime Research Laboratory
506 Lorimer Street,
Fishermans Bend, Victoria 3207.
Tel: (03) 9626 7154 (B), 0417 317 445, (03) 9818 5776 (H)
E-mail: rohith.amaratunga@dsto.defence.gov.au


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Thu Oct 12 15:16:52 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Thu, 12 Oct 2000 16:16:52 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
Message-ID: <00101216345102.00374@ligarto>

Dear All,

A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
R-devel; my (mis?)understanding of scoping rules is
that it should have worked in both. The problems seem related to using the
name of the data frame for extracting weights or subsets within a function
call. The problems can be reproduced as follows:

**********************

datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
                    x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))

formula <- as.formula(y ~ x1)


# the following fails in R-1.2.0 but not in R-1.1.1
# > Error in eval(expr, envir, enclos) : Object "datos" not found
lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = datos$x2)},
       formula = formula) 



# fails in R-1.2.0, but not in R-1.1.1
# > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
my.lm <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
} 

my.lm(formula, datai)



# In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
my.lm2 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
#    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
} 

my.lm2(formula, datai)


##################
## The following all work in both R-1.2.0 and R-1.1.1

datax <- datai[datai$x3 < 5 & datai$counter==1,]
lm(formula, data = datax, weights = x2)
lm(formula, data = datax, weights = datax$x2)
lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

my.lm9 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, weights = x2, subset = counter == 1)
} 

my.lm9(formula, datai)

    



************************

versions: 

R-1.1.1
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status   Patched
major    1
minor    1.1
year     2000
month    October
day      11
language R                                                                               



R-development:
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    10                          
day      10                          
language R                           

********************



-- 
Ramón Díaz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 12 18:37:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2000 19:37:49 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: Ramon Diaz-Uriarte's message of "Thu, 12 Oct 2000 16:16:52 +0200"
References: <00101216345102.00374@ligarto>
Message-ID: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>

Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:
> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 

Ow!... This happens because of a change that makes formulas capture
their environment of definition.

A workaround is to explicitly set the environment of the formula to
the current environment, like this:

lapply(split(datai,datai$counter),
       function(datos,formula) {
	  environment(formula)<-environment()
	  lm(formula = formula, data = datos,
                                   weights = datos$x2)
       },
       formula = formula) 

but I bet Luke wants to comment on this...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:30:49 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:30:49 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <00101216345102.00374@ligarto>
Message-ID: <Pine.GSO.4.21.0010121016370.7271-100000@atlas.biostat.washington.edu>

On Thu, 12 Oct 2000, Ramon Diaz-Uriarte wrote:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:


There's something tricky happening with parent.frame()

lapply(1:10,function(x,y) {browser();x+y),y=1)

Browse[1]> eval(quote(parent.frame()),parent.frame())
<environment: 1004cb70>
Browse[1]> eval(quote(sys.frame(sys.parent())),parent.frame())
<environment: 1004cdc88>

so parent.frame() isn't an exact synonym for sys.frame(sys.parent()). I
think this i


There *has* also been a change in the scoping rules (only partly
deliberate) in model.frame as Peter pointed out, though I don't think it
is applying here. A formula now has an environment associated with it,
which is used as the default environment for variables not specified in
data=

If you do
  lapply(datai,function(w) model.frame(~w))
it works: the vector w is found in the environment of the anonymous
function.
If you do
  ff<- ~w
  lapply(datai,function(w) model.frame(ff))
it doesn't work, since the default environment is now the global one.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 
> 
> 
> 
> # fails in R-1.2.0, but not in R-1.1.1
> # > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
> my.lm <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
> } 
> 
> my.lm(formula, datai)
> 
> 
> 
> # In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
> my.lm2 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
> #    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
> } 
> 
> my.lm2(formula, datai)
> 
> 
> ##################
> ## The following all work in both R-1.2.0 and R-1.1.1
> 
> datax <- datai[datai$x3 < 5 & datai$counter==1,]
> lm(formula, data = datax, weights = x2)
> lm(formula, data = datax, weights = datax$x2)
> lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
> lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = x2)},
>        formula = formula) 
> 
> my.lm9 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, weights = x2, subset = counter == 1)
> } 
> 
> my.lm9(formula, datai)
> 
>     
> 
> 
> 
> ************************
> 
> versions: 
> 
> R-1.1.1
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status   Patched
> major    1
> minor    1.1
> year     2000
> month    October
> day      11
> language R                                                                               
> 
> 
> 
> R-development:
> platform i586-pc-linux-gnu           
> arch     i586                        
> os       linux-gnu                   
> system   i586, linux-gnu             
> status   Under development (unstable)
> major    1                           
> minor    2.0                         
> year     2000                        
> month    10                          
> day      10                          
> language R                           
> 
> ********************
> 
> 
> 
> -- 
> Ramón Díaz-Uriarte
> Triana 47
> 28016 Madrid
> Spain
> 
> email:ramon-diaz@teleline.es
> Phone: +-34-918-513-966
>        +-34-657-186-407	
> 
> 
> 
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:35:03 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:35:03 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010121033220.7271-100000@atlas.biostat.washington.edu>

On 12 Oct 2000, Peter Dalgaard BSA wrote:

> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:

There's a much simpler workaround

lapply(split(datai,datai$counter),function(dataos,formula) lm(formula,
  	data=datos,weights=x2), formula=formula)

because the weights will first be looked for in the data= argument

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Oct 12 20:03:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 12 Oct 2000 14:03:57 -0500 (CDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 12, 2000 07:37:49 pm"
Message-ID: <200010121903.OAA12130@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {
> 	  environment(formula)<-environment()
> 	  lm(formula = formula, data = datos,
>                                    weights = datos$x2)
>        },
>        formula = formula) 
> 
> but I bet Luke wants to comment on this...
> 

Not really, but I guess I have no choice :-).  Here is my take on this:

The simple solution is to use

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

i.e. use x2 instead of datos$x2 as the weights argument.  This works
in both 1.1.1 and in the devel branch.

A long-winded explanation:

What makes using lm and friends in functions difficult is that some of
its arguments are used for value and some are used for expression (for
lack of better terms).  Arguments used for value are ordinary function
arguments that are evaluated internally by the standard function
evaluation process; the data argument is one.  (For value arguments
you can almost think of them as being computed before the function
call and only their values are passed.)  Expression arguments are not
evaluated directly.  Instead their expressions are captured (by
substitute or something similar), those expressions are then examined,
possibly modified, and then possibly evaluated through an explicit
call to eval using some context. The weights argument is an expression
argument.

The key in understanding how expression arguments work is knowing and
perhaps controlling the environment used for evaluating them (*and*
knowing which they are--the documentation isn't as helpful as it could
be here).  The changes Robert made to lm and related functions are a
first step in trying to make the context in which expression arguments
are used a bit more rational and controllable, in particular when no
explicit data frames are supplied.

The 1.1.1 rules were to evaluate expression arguments in an
environment consisting of the data frame and the environment of the
caller of lm.  The (intended at least) new rules, which may still
change, are that the evaluation environment consist of the data frame
and the environment in which the formula was constructed.

The two approaches both use the data frame, if supplied, as the first
place to find variable; they only differ in how they handle the case
where the data frame does not contain the values.

The call used in this example is:

	lm(formula = formula, data = datos, weights = datos$x2)

An explicit data argument is given but the data frame datos only
contains the components y, x1, x2, x3, and counter.  The expression
provided as the weights argument is datos$x2.  When the expression is
evaluated, datos is not found in the data frame provided, so the
default environment is used.  Under 1.1.1 that is the caller's
environment and you get what you want. In the devel branch it is the
environment in which the formula was created, which is the global
environment.

With all that, back to the simple solution: The weights argument x2 is
an expression argument and is intended to refer to the x2 component of
the data frame.  When the expression is evaluated, the first place the
evaluation looks for variable values, both in 1.1.1 and in devel, is
the data frame.  So you get the answer you want in both cases.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 12:07:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131107.NAA15331@pubhealth.ku.dk>

I'm just back from a computer practical where we ran into

> "f" <- function(x) 2(x^2) # for 2 * x^2

This definition was taken as legitimate, although using the
function generated the error message

> f(3)
Error in f(3) : attempt to apply non-function

Am I right in thinking that in prevous versions of R this
definition would have been declared as a syntax error?  Surely a
number before an opening parenthesis is always a syntax error?
The other mistake does this:

> "f" <- function(x) 2x^2 # another attempt at 2 * x^2
Error: syntax error

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 14:08:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 15:08:19 +0200
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)"
References: <200010131107.NAA15331@pubhealth.ku.dk>
Message-ID: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I'm just back from a computer practical where we ran into
> 
> > "f" <- function(x) 2(x^2) # for 2 * x^2
> 
> This definition was taken as legitimate, although using the
> function generated the error message
> 
> > f(3)
> Error in f(3) : attempt to apply non-function
> 
> Am I right in thinking that in prevous versions of R this
> definition would have been declared as a syntax error? 

I don't think so... Splus 3.4 does likewise:

> 2(3)
Error: "2" is not a function
>  "f" <- function(x) 2(x^2)
> f(3)                    
Error in f(3): "2" is not a function
Dumped


> Surely a
> number before an opening parenthesis is always a syntax error?

Sounds like it might be so (although sometimes there are surprises).
However, it may not be all that easy or worth it to fix the parser to
recognise this case.

In general you can have any expression evaluating to the function
to be called. If you do f(x)(3), f(x) may or may not be a function
and you can only detect whether it is one at runtime.

>From the parsers point of view there are only a few cases where it is
manifestly obvious that an expression cannot lead to a valid function.
Consider for instance the following silly stunt:

> g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> g(3)
[1] 1.098612

The operative bit is in src/main/gram.y

expr	: 
      ...

        |       expr '(' sublist ')'            { $$ = xxfuncall($1,$3); }

in which the expr is unrestricted and can be any R expression. One
could, I suppose, define a (say) "funexpr" syntactic entity which is just
like an "expr", except that if it is non-complex, then it has to be an
identifier or a character string. I think it would get quite kludgy,
though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 14:33:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 08:33:57 -0500 (CDT)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 13, 2000 03:08:19 pm"
Message-ID: <200010131333.IAA23307@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> J.C.Rougier@durham.ac.uk writes:
> 
> > I'm just back from a computer practical where we ran into
> > 
> > > "f" <- function(x) 2(x^2) # for 2 * x^2
> > 
> > This definition was taken as legitimate, although using the
> > function generated the error message
> > 
> > > f(3)
> > Error in f(3) : attempt to apply non-function
> > 
> > Am I right in thinking that in prevous versions of R this
> > definition would have been declared as a syntax error? 
> 
> I don't think so... Splus 3.4 does likewise:
> 
> > 2(3)
> Error: "2" is not a function
> >  "f" <- function(x) 2(x^2)
> > f(3)                    
> Error in f(3): "2" is not a function
> Dumped
> 
> 
> > Surely a
> > number before an opening parenthesis is always a syntax error?
> 
> Sounds like it might be so (although sometimes there are surprises).
> However, it may not be all that easy or worth it to fix the parser to
> recognise this case.
> 
> In general you can have any expression evaluating to the function
> to be called. If you do f(x)(3), f(x) may or may not be a function
> and you can only detect whether it is one at runtime.
> 
> >From the parsers point of view there are only a few cases where it is
> manifestly obvious that an expression cannot lead to a valid function.
> Consider for instance the following silly stunt:
> 
> > g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> > g(3)
> [1] 1.098612
> 

I agree--I'd call this a type error in evaluation, not a syntax error.

One thing to keep in mind is that R expressions can be used for things
other that evaluation, for example in representing aspects of models.
Someone might want at some point to attach meaning to something like

	y ~ 2(x)+z

That would be impossible (or at least very dificult) if the expression
were made syntactically invalid.

It would be possible to have a semantic checking tool for R that walks
over the code and warns when it sees such an expression, but it should
not be considered an error since it could be legitimate.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:32 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:50:32 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131450.QAA18383@pubhealth.ku.dk>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Oct 2000 15:50:40 +0100 (BST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <200010131333.IAA23307@goose.stat.umn.edu>
Message-ID: <Pine.GSO.4.20.0010131543551.28177-100000@laplace>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:57:09 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)
Subject: [Rd] Cautionary tale about c (PR#695)
Message-ID: <200010131457.QAA18499@pubhealth.ku.dk>

This situation arose in a computer practical this morning.  A
student overwrote "c" with a function.  This messes up lots of
things, but it is difficult to remove the function "c" from the
global environment because it is used as a function in both "rm"
and "remove".  [The solution was to reassign "c" as a number, and
then remove it.]  Would it be reasonable in "rm" and "remove" to
insist that the "c" function is got from the base?  The same
might apply to ".Internal" and "as.character", which are also
used.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 16:34:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 17:34:07 +0200
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)"
References: <200010131457.QAA18499@pubhealth.ku.dk>
Message-ID: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.

Hmm. This would seem to be doable by having line 2 of rm() as

get("c","package:base")(list, names)

You do have to be circumspect: there are calls to match(),
as.character(), and pos.to.env() in that construction, but neither
uses c().
 
Currently, get("c", envir=NULL) also works, but (for other reasons)
I'm on the warpath against using NULL for the base environment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Oct 13 16:32:36 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 13 Oct 2000 08:32:36 -0700 (PDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010130831010.20300-100000@atlas.biostat.washington.edu>

On 13 Oct 2000, Peter Dalgaard BSA wrote:

> J.C.Rougier@durham.ac.uk writes:
> 
> > This situation arose in a computer practical this morning.  A
> > student overwrote "c" with a function.  This messes up lots of
> > things, but it is difficult to remove the function "c" from the
> > global environment because it is used as a function in both "rm"
> > and "remove".  [The solution was to reassign "c" as a number, and
> > then remove it.]  Would it be reasonable in "rm" and "remove" to
> > insist that the "c" function is got from the base?  The same
> > might apply to ".Internal" and "as.character", which are also
> > used.
> 
> Hmm. This would seem to be doable by having line 2 of rm() as
> 
> get("c","package:base")(list, names)
> 
> You do have to be circumspect: there are calls to match(),
> as.character(), and pos.to.env() in that construction, but neither
> uses c().
>  
> Currently, get("c", envir=NULL) also works, but (for other reasons)
> I'm on the warpath against using NULL for the base environment.

You can use .Primitive("c")(list, names) in this case, which doesn't rely
on any other functions.

Trying to do something similar for, say, as.character, assumes that
as.character is more likely to be redefined than `get', which I don't
believe

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 16:42:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 10:42:44 -0500 (CDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <200010131457.QAA18499@pubhealth.ku.dk> from "J.C.Rougier@durham.ac.uk" at "Oct 13, 2000 04:57:09 pm"
Message-ID: <200010131542.KAA25280@goose.stat.umn.edu>

J.C.Rougier@durham.ac.uk wrote:
> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.
> 

One thing we've been talking about a bit is adding some form of name
space management.  This would insure the the c referred to in rm would
be the c in base.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Oct 13 18:07:46 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 13 Oct 2000 19:07:46 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <200010121903.OAA12130@goose.stat.umn.edu>
References: <200010121903.OAA12130@goose.stat.umn.edu>
Message-ID: <00101319240704.01544@ligarto>

Thanks a lot to Thomas Lumley, Peter Dalgaard, and Luke Tierney for their
answers. 


I think I understand why the function failed, and the workaorunds. However,
would it be appropriate if a call such as:


my.function <- function(formula, data){
# other stuff
    lm(formula = formula, data = data, weights = data$x2)
} 

my.function(formula, datai)


where to return an error, instead of simply ignoring the weights=data$x2
argument? (especially since such a thing used to work and might be used in
other code)

Ramon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct 14 07:10:11 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 14 Oct 2000 08:10:11 +0200 (MET DST)
Subject: [Rd] sys.xxx documentation (PR#696)
Message-ID: <200010140610.IAA20750@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for sys.calls(), sys.frames(), sys.parents(), etc. lists
sys.nframe() and sys.function() in the usage section (and sys.nframe()
shows up in the examples), but they are never mentioned in the text of
the man page.

my suggested text for sys.nframe is, "sys.nframe returns the current size
of the frame stack, i.e., the frame number of the caller."  i have no idea
what sys.function does.

also, 

> sys.call and sys.frame both accept either positive or negative values
> for the argument which. Positive values of which are normal frame numbers
> whereas negative values are counted back from the frame number of the
> current evaluation. 

i believe this should be "accept integer values for the argument which", and
"Non-negative values of which are normal frame numbers"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 02:04:00 2000
From: flip@skidmore.edu (flip@skidmore.edu)
Date: Mon, 16 Oct 2000 03:04:00 +0200 (MET DST)
Subject: [Rd] build errors in configure script (PR#697)
Message-ID: <200010160104.DAA25206@pubhealth.ku.dk>

Full_Name: flip phillips
Version: 1.1.1
OS: Mac OS X
Submission from: (NULL) (24.29.65.207)


the lack of '-lm' in the Macintosh OS X / Dylan release seems to play a bit of
havoc w/ the build. For example, the test for libf2c.a fails, not because the
library is missing, but because -lm is missing. (the configure looks a little
like it wants to check for it but it doesn't really need to)

i fixed it temporarily by majing a null libm.a, but i suspect this should really
be changed in the configure script

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 16 07:45:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Oct 2000 08:45:29 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <200010160104.DAA25206@pubhealth.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
Message-ID: <14826.41993.450739.759375@mithrandir.hornik.net>

>>>>> flip  writes:

> Full_Name: flip phillips
> Version: 1.1.1
> OS: Mac OS X
> Submission from: (NULL) (24.29.65.207)


> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> not because the library is missing, but because -lm is missing. (the
> configure looks a little like it wants to check for it but it doesn't
> really need to)

> i fixed it temporarily by majing a null libm.a, but i suspect this
> should really be changed in the configure script

Do I understand this correctly that there is no libm.a on the above
platform?  What is used instead?

I think we could fix the problem, by first checking for libm.a (which we
do lateron anyway), and then do the Fortran checking.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 16 10:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2000 11:35:52 +0200
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: Kurt Hornik's message of "Mon, 16 Oct 2000 08:45:29 +0200 (CEST)"
References: <200010160104.DAA25206@pubhealth.ku.dk> <14826.41993.450739.759375@mithrandir.hornik.net>
Message-ID: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> > not because the library is missing, but because -lm is missing. (the
> > configure looks a little like it wants to check for it but it doesn't
> > really need to)
> 
> > i fixed it temporarily by majing a null libm.a, but i suspect this
> > should really be changed in the configure script
> 
> Do I understand this correctly that there is no libm.a on the above
> platform?  What is used instead?
> 
> I think we could fix the problem, by first checking for libm.a (which we
> do lateron anyway), and then do the Fortran checking.

Maybe we should wait for MOSX to come out of beta before changing
anything. I can imagine that more than one Unix program (to say the
least -- -lm is probably the one thing that has *never* been broken
before) would break because of this, so perhaps they want to fix it in
the OS ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 12:27:06 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 16 Oct 2000 12:27:06 +0100 (BST)
Subject: [Rd] Logical indexing
Message-ID: <Pine.GSO.4.20.0010161220350.2598-100000@laplace>

Am I right in thinking that R.1.1.1 is using a different convention (to
previous versions) regarding logical indexing of vectors and lists?  I
feel that supplying a boolean of the wrong length should generate an
error, but now

> (1:4)[rep(TRUE, 10)]
 [1]  1  2  3  4 NA NA NA NA NA NA

I think that if this effect is desired then

> (1:4)[1:10]

would be the appropriate syntax.  Preserving the integrity of the logical
operator provides a useful error trap for programmers who specifically
want to avoid this kind of behaviour.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 14:01:28 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 16 Oct 2000 15:01:28 +0200 (MET DST)
Subject: [Rd] print problem with data frames (PR#698)
Message-ID: <200010161301.PAA02685@pubhealth.ku.dk>

Another one from the student computer practicals: it is possible
to create a dataframe that cannot be printed.  Thus

> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> tmp
Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> print.default(tmp)
$"NA"
NULL

$"NA"
NULL

attr(,"class")
[1] "data.frame"

This obviously relates to my previous posting to r-devel about
subscripting objects with logical vectors that are not the right
length.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 14:43:51 2000
From: flip@skidmore.edu (flip phillips)
Date: Mon, 16 Oct 2000 09:43:51 -0400
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <B6107E57.1D0A%flip@skidmore.edu>

on 10/16/00 5:35 AM, Peter Dalgaard BSA at p.dalgaard@biostat.ku.dk wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
>>> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>>> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>>> not because the library is missing, but because -lm is missing. (the
>>> configure looks a little like it wants to check for it but it doesn't
>>> really need to)
>> 
>>> i fixed it temporarily by majing a null libm.a, but i suspect this
>>> should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.
> 
> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

This really isn't a MacOS X issue as much as a Darwin issue I believe.
Darwin is the open-source BDS based underpinnings of OS X. The TCL
implementation is unusual as well, and I'll take care of figuring that into
the equation as soon as I can get the rest of the thing to compile. Right
now I'm messing with shared library issues.

A look at the Darwin mailing lists might be in order to see why libm.a isn't
a part, etc. 


-- 
flip phillips, phd
skidmore college
http://www.skidmore.edu/~flip

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct 16 15:31:48 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Oct 2000 10:31:48 -0400
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <39f30e2f.320696055@fisher.stats.uwo.ca>

On Mon, 16 Oct 2000 15:01:28 +0200 (MET DST), you wrote in message
<200010161301.PAA02685@pubhealth.ku.dk>:

>Another one from the student computer practicals: it is possible
>to create a dataframe that cannot be printed.  Thus
>
>> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
>> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
>> tmp
>Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
 ...
>This obviously relates to my previous posting to r-devel about
>subscripting objects with logical vectors that are not the right
>length.

In this case the problem is that the indexing is missing a comma.  You
should have had 

  tmp <- fred[c(FALSE, FALSE, TRUE, TRUE),]

because that's how you select cases.  Without the comma, you're
treating the data.frame as a list containing two entries ("happy" and
"sad"), then creating a new one consisting of the 3rd and 4th entries
of that list (which are NA). It still has the data.frame class though,
so you get the error when you try to print it.

I think it might be nice to warn people about that kind of indexing,
because it's rarely intentional, but it would be really hard to do.
You'd need something like a "novice warning level" option, and writers
of procedures would have to anticipate all the common errors novices
would make.

Duncan Murdoch

P.S. to the developers: When I tried to copy and paste Jonathan's code
into a newly opened copy of R using the Edit menu, I got an error I
haven't seen before when I tried to open the menu:  "No selection".  I
can't reproduce this reliably yet, but I'll let you know if I figure
out what triggered it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Oct 16 16:06:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 17 Oct 2000 04:06:30 +1300
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>; from J.C.Rougier@durham.ac.uk on Mon, Oct 16, 2000 at 03:01:28PM +0200
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <20001017040630.A25302@stat1.stat.auckland.ac.nz>

This is known (at least to some of us) and there are other problems
with data frames and their printing. Hopefully I will have some 
fixes for 1.2.

  Robert

On Mon, Oct 16, 2000 at 03:01:28PM +0200, J.C.Rougier@durham.ac.uk wrote:
> Another one from the student computer practicals: it is possible
> to create a dataframe that cannot be printed.  Thus
> 
> > fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> > tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> > tmp
> Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> > print.default(tmp)
> $"NA"
> NULL
> 
> $"NA"
> NULL
> 
> attr(,"class")
> [1] "data.frame"
> 
> This obviously relates to my previous posting to r-devel about
> subscripting objects with logical vectors that are not the right
> length.
> 
> Cheers, Jonathan.
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 17 11:13:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Oct 2000 12:13:18 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
 <14826.41993.450739.759375@mithrandir.hornik.net>
 <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <14828.9790.506565.986235@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>> > not because the library is missing, but because -lm is missing. (the
>> > configure looks a little like it wants to check for it but it doesn't
>> > really need to)
>> 
>> > i fixed it temporarily by majing a null libm.a, but i suspect this
>> > should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.

> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

Sounds like a good plan to me.

Are there *UNIX* systems without -lm?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 16:41:44 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 08:41:44 -0700
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <87pukzxyo7.fsf@jeeves.blindglobe.net>


Suppose one wanted to build an R wizard for packaging...

One would need to specify and create:
        package-name/
        package-name/Description
        package-name/INDEX
        package-name/R/
        package-name/man/
        package-name/src/

>From this, we'd "probably" like to:
- script-up the Description
- provide a script for regenerating INDEX by calling out to the shell
- provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
- ??

thoughts?  (Sometimes, spending serious time with JDE suggests definite
improvements...)

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:09:41 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:09:41 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "17 Oct 2000 08:41:44 -0700")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <87itqrxxdm.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
    AJR> - provide a script for
    AJR> regenerating INDEX by calling out to the shell

I meant by this, an Emacs function, i.e. 
        M-x ess-regen-INDEX
which runs the appropriate R CMD script.




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 17 17:38:25 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Oct 2000 17:38:25 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>

On 17 Oct 2000, A.J. Rossini wrote:

> 
> Suppose one wanted to build an R wizard for packaging...
> 
> One would need to specify and create:
>         package-name/
>         package-name/Description
>         package-name/INDEX
>         package-name/R/
>         package-name/man/
>         package-name/src/
> 
> >From this, we'd "probably" like to:
> - script-up the Description
> - provide a script for regenerating INDEX by calling out to the shell
> - provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
> - ??
> 
> thoughts?  (Sometimes, spending serious time with JDE suggests definite
> improvements...)

I'm a bit lost: you of all people don't really want a Windows wizard do
you?

Given how much R CMD check and R CMD build will do for you, about all I
can see that one could usefully add is a template for DESCRIPTION (and
it is all u/case).  Well, one could get prompt() to generate templates
for allthe undocumented R objects, but then people would forget to
complete them....

Just how much time do people spend packaging new packages anyway?
I probably have as many on CRAN as anyone else, and I do this rarely.
Checking them is another matter!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:50:40 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:50:40 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 (Prof Brian Ripley's message of "Tue, 17 Oct 2000 17:38:25 +0100 (BST)")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
Message-ID: <87g0lvxvhb.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> I'm a bit lost: you of all people don't really want a Windows
    PBR> wizard do you?

No, an Emacs wizard.

    PBR> Just how much time do people spend packaging new packages
    PBR> anyway?  I probably have as many on CRAN as anyone else, and
    PBR> I do this rarely.  Checking them is another matter!

My thoughts were based on the recent thread re: local functions in a
package, and making that easier (as well as documented).

R will do a good bit, and the question is how much more would be
needed in support so that 
        M-x R-package-wizard
creates a filled out package framework (without the autocoding, of
course). 

best,
-tony        

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From -----sextoys@hotmail.com  Wed Oct 18 23:08:48 2000
From: -----sextoys@hotmail.com (www.sextoysrus.com.au)
Date: Wed, 18 Oct 2000 22:08:48
Subject: [Rd] Australia's Greatest Online Exotic Novelty Store is back...
Message-ID: <200010181106.NAA03235@stat.math.ethz.ch>

Too all our valued customers, please note our website " www.sextoysrus.com.au " is back 
online. 
Sorry for the inconvience.  ( HAPPY SHOPPING)
If you have received this email Via unsolicated means please delete. Thankyou.....
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct 18 12:23:52 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 18 Oct 2000 13:23:52 +0200 (CEST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87g0lvxvhb.fsf@jeeves.blindglobe.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 <87g0lvxvhb.fsf@jeeves.blindglobe.net>
Message-ID: <14829.34888.734719.113850@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
PBR> I'm a bit lost: you of all people don't really want a Windows
PBR> wizard do you?

> No, an Emacs wizard.

PBR> Just how much time do people spend packaging new packages
PBR> anyway?  I probably have as many on CRAN as anyone else, and
PBR> I do this rarely.  Checking them is another matter!

> My thoughts were based on the recent thread re: local functions in a
> package, and making that easier (as well as documented).

> R will do a good bit, and the question is how much more would be
> needed in support so that 
>         M-x R-package-wizard
> creates a filled out package framework (without the autocoding, of
> course). 

I think it would be nice to have a function for creating a DESCRIPTION
file, marking which fields are required and which ones are optional
(e.g., like AUCTeX bibtex mode).

Directory stubs are perhaps not that much needed.  Peter once suggested
to make the corresponding documentation in R-exts more hands-on, so that
one gets a simple worked-out packaging example, and I think we want to
do this (eventually).

The package wizard might also offer to generate files like TITLE, INDEX
and data/00Index automatically, but this is done by R CMD check/build
anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Oct 18 14:57:20 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Oct 2000 09:57:20 -0400
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <14829.34888.734719.113850@mithrandir.hornik.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net> <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats> <87g0lvxvhb.fsf@jeeves.blindglobe.net> <14829.34888.734719.113850@mithrandir.hornik.net>
Message-ID: <39f0a9dc.167697614@fisher.stats.uwo.ca>

For people like me who mainly use Windows, the package documentation
is rather intimidating.  It's not clear which parts of it work and
which don't, or what tools beyond base R I need to build a package
entirely within Windows (or if that is even possible).

A wizard would be helpful, but it's a lot of work for relatively few
people to use.  An easier solution would be a short document listing
all the steps necessary to build a package in Windows, including at
least pointers to the document of all the tools that should be
installed first.

This should probably contain two sections:  building a package that's
intended to be portable to other systems, and building one that's
going to be packaged in a .zip file for Windows-only use.

If someone wants to volunteer to answer questions when I get stuck,
I'll volunteer to produce the document.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 18 15:14:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Oct 2000 15:14:48 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <200010181414.PAA20875@toucan.stats.ox.ac.uk>

> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Wed, 18 Oct 2000 09:57:20 -0400
> 
> For people like me who mainly use Windows, the package documentation
> is rather intimidating.  It's not clear which parts of it work and
> which don't, or what tools beyond base R I need to build a package
> entirely within Windows (or if that is even possible).
> 
> A wizard would be helpful, but it's a lot of work for relatively few
> people to use.  An easier solution would be a short document listing
> all the steps necessary to build a package in Windows, including at
> least pointers to the document of all the tools that should be
> installed first.
> 
> This should probably contain two sections:  building a package that's
> intended to be portable to other systems, 

That is in `Writing R Extensions'.  Building it is exactly the same
as on Unix, but checking is not quite.

> and building one that's
> going to be packaged in a .zip file for Windows-only use.
> 
> If someone wants to volunteer to answer questions when I get stuck,
> I'll volunteer to produce the document.

Um.  I've already written one, called readme.packages in rw1011sp.zip.
It does have a list a tools to install first (and a reference
to an on-line portal for the current versions).  If you really
think that is inadequate (and it seems to have sufficed for those
who can follow instructions) please at least start from what is there.

The mechanics will change with R 1.2.0.  If you want to see where
this is going, take a look at the pre-release at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

and especially the revised `Writing R Extensions' manual there.  The
Windows and Unix procedures have become much closer.  Now don't go and
tell me I have wasted my time on making all these tools available on
Windows too, as well as writing manuals no one wanted/noticed!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 19 09:57:19 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 19 Oct 2000 09:57:19 +0100 (BST)
Subject: [Rd] Rterm on Windows 2000 now works.
Message-ID: <200010190857.JAA21730@toucan.stats.ox.ac.uk>

Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
documented (and I can find nothing about this in MicroSoft's Knowledge
Base except that it is known to happen under a debugger).

The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
now incoporates the fix, and we intend to make available a patched
R.dll for rw1011 shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 19:16:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 14:16:48 -0400
Subject: [Rd] remove(ls())
Message-ID: <39EF3A90.9580C6B5@bank-banque-canada.ca>

It's been a long time since I tried this:

> remove(ls())
Warning message:
remove: variable "ls()" was not found

Is it intentional that this does not work (in 1.1.1 and R-devel)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 19 19:48:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Oct 2000 19:48:21 +0100 (BST)
Subject: [Rd] remove(ls())
In-Reply-To: <39EF3A90.9580C6B5@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>

On Thu, 19 Oct 2000, Paul Gilbert wrote:

> It's been a long time since I tried this:
> 
> > remove(ls())
> Warning message:
> remove: variable "ls()" was not found
> 
> Is it intentional that this does not work (in 1.1.1 and R-devel)?

AFAIK only remove(list=ls()) has ever worked in R.

In R rm() and remove() are the same thing.  In S they are not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 20:18:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 15:18:26 -0400
Subject: [Rd] remove(ls())
References: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>
Message-ID: <39EF4902.ABD37F17@bank-banque-canada.ca>

>AFAIK only remove(list=ls()) has ever worked in R.

Ok, it is possible I've never tried this in R, and re-reading the documentation
now that I understand, I can see that it actually says that. This might be a
useful example in the help for remove, especially for anyone expecting S-like
behavior.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 19 21:34:53 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 19 Oct 2000 16:34:53 -0400 (EDT)
Subject: [Rd] legend -- one more try
Message-ID: <Pine.LNX.4.10.10010191627590.9311-100000@bolker.zoo.ufl.edu>


  Dermot MacSweeney pointed out to me that after my "fix" of legend(),
points were no longer coming out placed in the middle of the lines, but at
the right-hand edge.  It turns out that naively swapping the order of
point-drawing and line-drawing also messes up the bookkeeping that
legend() does on the current x-location.  Here's my patch, which fixes
that bookkeeping (and incidentally substitutes "seg.len" for 2 where it
refers to the length of the drawn line segments in units of x.char; one
could make seg.len user-settable, I don't know if it's worth the bother).

  This time the patch is against the current legend() in R-devel.

*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-     
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }
  
      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }
  
      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Oct 20 09:06:10 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Fri, 20 Oct 2000 10:06:10 +0200
Subject: [Rd] Rterm on Windows 2000 now works.
In-Reply-To: <200010190857.JAA21730@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Oct 19, 2000 at 09:57:19AM +0100
References: <200010190857.JAA21730@toucan.stats.ox.ac.uk>
Message-ID: <20001020100610.A18860@sirio.stat.unipd.it>

On Thu, Oct 19, 2000 at 09:57:19AM +0100, Prof Brian Ripley wrote:
> Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
> modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
> documented (and I can find nothing about this in MicroSoft's Knowledge
> Base except that it is known to happen under a debugger).
> 
> The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> now incoporates the fix, and we intend to make available a patched
> R.dll for rw1011 shortly.
> 
> -- 

  A patched R.dll for rw1011 is available at
      ftp://ftp.stat.unipd.it/users/guido/RWin/fixed/
  In few days, it will be also available from your preferred CRAN
  mirror, in /bin/windows/windows-NT/base/fixed.
  There is a two lines ReadMe explaining how to install.	

  I would be glad to hear about successes and failures (not on the
  list, however).

  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ratjamm@alum.mit.edu  Fri Oct 20 20:46:19 2000
From: ratjamm@alum.mit.edu (ratjamm@alum.mit.edu)
Date: Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)
Subject: [Rd] bug in pnorm (PR#699)
Message-ID: <200010201946.VAA13126@pubhealth.ku.dk>

Full_Name: James Michael Rath
Version: all (I think)
OS: doesn't matter
Submission from: (NULL) (129.116.226.162)


The code for pnorm in R was adapted from a Fortran library published in the ACM
TOMS journal.  The published version had a typographical error, though, which
was
pointed out in a second article published three years after the original.

The error was that a macro/variable named SIXTEN had a value of 1.6e0 instead of
the
correct 1.6e1 (that is, 16 not 1.6).  The author of the code for R (Ross
Ithaka?)
must have worked from an outdated version of SPECFUN and not the corrected one
that
now appears in CALGO, STATLIB, et cetera.

There is a macro in pnorm.c (in the nmath directory) which looks like:
#define SIXTEN	1.6	/* Magic Cutoff */
It should be something like:
#define SIXTEN	16.0	/* Magic Cutoff */

I know this appears in R version 1.1.1.  I know it also appears in older
versions.
I do not know if it appears in newer ones.


The relevant references from ACM TOMS are:

Cody, W. D.  "Algorithm 715: SPECFUN - A portable FORTRAN package of special
  function routines and test drivers," in ACM TOMS 19, 22-32, 1993.

Price, David T.  "Remark on algorithm 715," in ACM TOMS 22(2), 258, 1996.


Jim


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 20 22:56:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Oct 2000 23:56:59 +0200
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: ratjamm@alum.mit.edu's message of "Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)"
References: <200010201946.VAA13126@pubhealth.ku.dk>
Message-ID: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>

ratjamm@alum.mit.edu writes:

> There is a macro in pnorm.c (in the nmath directory) which looks like:
> #define SIXTEN	1.6	/* Magic Cutoff */
> It should be something like:
> #define SIXTEN	16.0	/* Magic Cutoff */
> 
> I know this appears in R version 1.1.1.  I know it also appears in older
> versions.
> I do not know if it appears in newer ones.

Hmm. I tried making the appropriate change and plotting 

plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))

for 

x<-seq(0,-16,-.01)

and

x<-seq(0,16,.01)

I'll be darned if I can spot the difference. Where would you expect to
find it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From organism@ticam.utexas.edu  Sat Oct 21 01:23:02 2000
From: organism@ticam.utexas.edu (James Michael Rath)
Date: Fri, 20 Oct 2000 19:23:02 -0500 (CDT)
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0010201741440.8601-100000@oreosis.ticam.utexas.edu>

> ratjamm@alum.mit.edu writes:
> 
> > There is a macro in pnorm.c (in the nmath directory) which looks like:
> > #define SIXTEN	1.6	/* Magic Cutoff */
> > It should be something like:
> > #define SIXTEN	16.0	/* Magic Cutoff */
> > 
> > I know this appears in R version 1.1.1.  I know it also appears in older
> > versions.
> > I do not know if it appears in newer ones.
> 
> Hmm. I tried making the appropriate change and plotting 
> 
> plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))
> 
> for 
> 
> x<-seq(0,-16,-.01)
> 
> and
> 
> x<-seq(0,16,.01)
> 
> I'll be darned if I can spot the difference. Where would you expect to
> find it?

I see that you're trying to test whether an approximation to the
derivative of pnorm is equal to dnorm.  If you look at the plot you
generated, either the old pnorm or the "correct" one will qualitatively
look like a flat line near y=1.  (A sidebar: I'm not sure why you chose to
examine things over the domain (-16,0) and (0,16).  I'm guessing you were
misled by the inappropriate labelling of SIXTEN as a "magic cutoff" by
Ihaka.  I'll explain the role of SIXTEN below.)

Qualitative accuracy was not what I had in mind.  The routines were
originally written by Cody to achieve full double precision accuracy (on
machines which could support it).  That is, he aimed for 18 decimal places
of accuracy in the routines.

When calculating pnorm(x), the range of abs(x) is split into four
pieces: (0,0.66291), (0.66291,sqrt(32), (sqrt(32),somelimit), and
everything else.  In the first piece, a certain rational approximation is
used to calculate the function value.  In the second two pieces, two
additional (each different) rational approximations are used modulo a
multiplication by exp(-0.5*x*x).  The calculation of the multiplication by
exp(-0.5*x*x) is where SIXTEN is used.

Lines 176-187 of pnorm.c in R version 1.1.1 looks like
#define do_del(X)							\
	xsq = floor(X * SIXTEN) / SIXTEN;				\
	del = (X - xsq) * (X + xsq);					\
	if(log_p) {							\
	    *cum = (-xsq * xsq * 0.5) + (-del * 0.5) + log(*cum);	\
	    if((lower && x > 0.) || (upper && x <= 0.))			\
		*ccum = log(1.0 - exp(*cum));				\
	}								\
	else {								\
	    *cum = exp(-xsq * xsq * 0.5) * exp(-del * 0.5) * *cum;	\
	    *ccum = 1.0 - *cum;						\
	}
This macro is then called on y (which was previously set to fabs(x)).  The
effect of the line "xsq = floor(y*SIXTEN)/SIXTEN" is to set xsq to a value
approximating y to the nearest sixteenth (from below).  The exponential is
then computed in two parts: we write y=xsq+(y-xsq) and compute
exp(-0.5*y*y)=exp(-0.5*xsq*xsq)*exp(-0.5*del).  Despite the algebraic
equivalence between these two expressions, the RHS is a more numerically
accurate formula than the LHS (for the domain we are interested in).

The effect of substituting 1.6 for 16 is twofold.  First, xsq only gets
rounded to the nearest 1.6eenth (to the closest multiple of 1/1.6).  The
change from exp(-0.5*y*y) to exp(-0.5*xsq*xsq)*exp(-0.5*del) then loses
most of its effectiveness.  Second, multiplication and division by 16 in
IEEE floating point arithmetic gets computed exactly.  The operations for
1.6 do not (1.6 ~ 1.10011... - it is a non-terminating binary
number).  This introduces spurious numerical errors where there should be
none.

The overall effect of changing 1.6 to 16 is subtle at best and insidious
at worst.  We had accuracy to full precision with 16, but now do not with
1.6.



After looking at the R code a bit more carefully, I notice there are a few
other significant (numerically, at least) changes to Cody's library.

The first has to do with the fuzzy "somelimit" that I used above in
describing the domain split.  If x is positive, then "somelimit" is the
largest number above which pnorm(x) is indistinguishable from 1 (to the
working precision).  If x is negative, then "somelimit" is the negative of
the smallest number below which pnorm(x) is indistinguishable from 0 (to
working precision).  Cody called these two (different) numbers XLOW and
XUPPR, and distinguished their use in the code.  Ihaka, on the other hand,
simply hard-coded 50 for both.  For double precision, XLOW should be about
-37.5 and XUPPR about 8.6.  This has two effects.  First, there is a
slow-down because calculations involving a rational asymptotic formula are
taking place when then don't have to.  This isn't too serious because
most people call pnorm with much smaller arguments most of the time (and
the time taken to calculate that asymptotic expression takes no more time
to calculate the other rational expressions used).  The second effect
could potentially be serious, though.  Cody's code didn't cause any IEEE
floating point error flags to be set unneccesarily.  Ihaka's code
does.  In order to put Ihaka's code back in line with Cody's code would
take only a minor modification (one extra comparison which wouldn't
reduce readability or the difficulty of the logic).

The second significant change has to do with the rounding to sixteenths
again.  The rounding takes place twice: once in the case where y is in 
(0.66291,sqrt(32), and once where y is in (sqrt(32),somelimit).  I only
discussed the first one above (for brevity's sake; perhaps I should've
mentioned it earlier).  My comments above about changing 1.6 to 16 apply
to both, but this second comment only applies to the second case.  Cody's
code actually rounds towards zero (towards the nearest sixteenth) whereas
Ihaka's code rounds towards minus infinity.  That is, Cody uses the
Fortran AINT routine whereas Ihaka uses C's floor.  At first thought, I'm
not really sure just what the impact on accuracy is.  I suspect there is
none because of the range of arguments involved; however, I cannot say
this for sure.  I can get back to you on this if you'd like.

My last comment (phew!) has to do with the computation of
log(pnorm(x)).  Although the calculation of pnorm is accurate to full
precision (that is, to within 1 ULP) and so it that of log, the
composition may not be.  I'm not sure what the impact is (it's late on
Friday afternoon, and I'm running out of steam; sorry :( ), but I will
definitely get back to you on this.  One thing that definitely does worry
me is the computation of log(1-exp(*cum)).


Thanks for sticking with me through this whole message.  Numerical
analysis may be boring, but it definitely it worth it.  (I don't mean to
offend anyone by "boring," either! :)


Thanks much and have a good weekend!

j




.--- .- -- . ...
-- .. -.-. .... .- . .-..
... - .- .--. .-.. . - --- -.
.-. .- - ....  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010210515.HAA16365@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 686 *
Subject: inquiry
From: <bench1@onenetnow.com>
Date: Mon, 9 Oct 2000 00:23:53
* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 688 *
Subject:  Unreliable example in ?layout 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 10 Oct 2000 08:48:10 +0100 (BST)
* PR# 687 *
Subject:  cmdscale documentation 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 9 Oct 2000 10:23:20 +0100 (BST)
* PR# 691 *
Subject: invalid regular expression after many grep's
From: jutans@utans.u-net.com
Date: Wed, 11 Oct 2000 17:10:29 +0200 (MET DST)
* PR# 690 *
Subject: Bug?
From: "Armando Mateus Ferreira" <td2mafea@uco.es>
Date: Wed, 11 Oct 2000 11:21:19 +0200
* PR# 689 *
Subject: Documentation problem for ecdf
From: Kurt.Hornik@ci.tuwien.ac.at
Date: Tue, 10 Oct 2000 18:32:46 +0200 (MET DST)
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
* PR# 692 *
Subject: documentation bug in grep
From: pperkins@ucsd.edu
Date: Wed, 11 Oct 2000 19:25:03 +0200 (MET DST)
* PR# 696 *
Subject: sys.xxx documentation
From: pperkins@ucsd.edu
Date: Sat, 14 Oct 2000 08:10:09 +0200 (MET DST)
* PR# 695 *
Subject:  Cautionary tale about c 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 15:57:27 +0100 (BST)
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 23 11:01:15 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 23 Oct 2000 12:01:15 +0200 (CEST)
Subject: [Rd] is.integer and rank
Message-ID: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>


Hello, 

why does

> test <- rank(sample(10))
> test
 [1]  4  8  9 10  2  1  7  6  3  5
> is.integer(test)
[1] FALSE
> is.double(test)
[1] TRUE

make sense in R-1.1.1?  

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 23 11:20:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Oct 2000 12:20:07 +0200
Subject: [Rd] is.integer and rank
In-Reply-To: Torsten Hothorn's message of "Mon, 23 Oct 2000 12:01:15 +0200 (CEST)"
References: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <x2k8az3lm0.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

> Hello, 
> 
> why does
> 
> > test <- rank(sample(10))
> > test
>  [1]  4  8  9 10  2  1  7  6  3  5
> > is.integer(test)
> [1] FALSE
> > is.double(test)
> [1] TRUE
> 
> make sense in R-1.1.1?  

Ranks have to be able to include non-integers, hence storage mode
double

> rank(c(1,2,2,3))
[1] 1.0 2.5 2.5 4.0

More confusing is:

> is.integer(1)
[1] FALSE

> is.integer(1:1)
[1] TRUE

(both of which is for a reason, although I have temporarily forgotten
why we make integer sequences integer.... Speed issues, possibly)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Mon Oct 23 12:16:01 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (emmanuel.charpentier@sap.ap-hop-paris.fr)
Date: Mon, 23 Oct 2000 13:16:01 +0200 (MET DST)
Subject: [Rd] Probable bug in RODBC 0.7.x (PR#700)
Message-ID: <200010231116.NAA23785@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: R 1.1.1
OS: Windows 98 FE / Linux (Debian 2.2)
Submission from: (NULL) (164.2.255.244)


This bug report is pro forma. I've already reported it informally on R-help and
R-devel.

The current (0.7) version of RODBC has a problem with missing values. It
correctly
gets missing "character" values (as blanks), but puts the last non-missing value
of
the same variable in place of missing "numeric" values. Doubleplus ungood ...

Example :

In database : ==>     What I got in R    What I expected

1  Foo 1.0            1 "Foo" 1.0        1 "Foo" 1.0
2      2.0            2 ""    2.0        2 ""    2.0
3  Bar                3 "Bar" 2.0        3 "Bar" NA
4  Gee 4.0            4 "Gee" 4.0        4 "Gee" 4.0

This has been checked on Windows (links to remote Postgres, local MS-Access and
local
Excel) and Linux (links to Postgres, both local and remote, ODBC
manager=unixODBC,
drivers=unixODBC-bundled drivers).

A cursory preliminary look at the code was unsuccessful. I have to delve into
the
ODBC interface specification and learn how to debug C under R in order to go
further.

Michael Lapsley, author of the RODBC package, is aware of the problem, but has
no
fix yet (as of beginning of October).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Oct 23 20:06:05 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 23 Oct 2000 21:06:05 +0200 (MET DST)
Subject: [Rd] ambiguous (duplicated) names in model.matrix() (PR#701)
Message-ID: <200010231906.VAA28560@pubhealth.ku.dk>

Interaction terms in model.matrix() use "." to spearate the components
that are separate by ":" in the corresponding terms().

Not only is this (IMHO) visually unpleasing, but can lead to ambiguous
labelling. Notice that "x.a"  is duplicated and that "x.a.x.b" is
ambiguous in this context:

> lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4))$x
   (Intercept) x.a x.b  x a x.a.x.b x.a
1            1   1   1  1 1       1   1
2            1   2   2  2 2       4   4
3            1   0   3  3 1       0   3
4            1   1   0  4 2       0   8
5            1   2   1  5 1       2   5
6            1   0   2  6 2       0  12
7            1   1   3  7 1       3   7
8            1   2   0  8 2       0  16
9            1   0   1  9 1       0   9
10           1   1   2 10 2       2  20
attr(,"assign")
[1] 0 1 2 3 4 5 6
> terms(lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4)))
y ~ x.a + x.b + x + a + x.a:x.b + x:a
attr(,"variables")
list(y, x.a, x.b, x, a)
attr(,"factors")
    x.a x.b x a x.a:x.b x:a
y     0   0 0 0       0   0
x.a   1   0 0 0       1   0
x.b   0   1 0 0       1   0
x     0   0 1 0       0   1
a     0   0 0 1       0   1
attr(,"term.labels")
[1] "x.a"     "x.b"     "x"       "a"       "x.a:x.b" "x:a"    
attr(,"order")
[1] 1 1 1 1 2 2
attr(,"intercept")
[1] 1
attr(,"response")
[1] 1
>

The prototype uses ":" in both cases.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Mon Oct 23 20:13:04 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Mon, 23 Oct 2000 21:13:04 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010231913.VAA28614@pubhealth.ku.dk>

Full_Name: Joachim Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (195.102.198.233)


There seems to be a small inconsistency with using median in sapply with
handling names (looks like it has to do with the different handling when the
length is even/odd)
Specifically, sapply will concatenate listelement names and a member name if the
length of the member is odd.
Example follows:

> TMP.list_list(item1=c(a1=1,a2=2,a3=3), item2=c(b1=1,b2=2))
> TMP.list
$item1
a1 a2 a3
 1  2  3

$item2
b1 b2
 1  2

> sapply(TMP.list, mean)
item1 item2
  2.0   1.5
> sapply(TMP.list, median)
item1.a2    item2            !!!!!!!!!!!! note the ".a2"
     2.0      1.5
>

> sapply(TMP.list, median, USE.NAMES=F)
item1.a2    item2
     2.0      1.5
> lapply(TMP.list, median)
$item1
a2
 2

$item2
[1] 1.5




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 23 21:12:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 23 Oct 2000 22:12:02 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010232012.WAA28837@pubhealth.ku.dk>

On Mon, 23 Oct 2000 jutans@utans.u-net.com wrote:

> Full_Name: Joachim Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (195.102.198.233)
> 
> 
> There seems to be a small inconsistency with using median in sapply with
> handling names (looks like it has to do with the different handling when the
> length is even/odd)
> Specifically, sapply will concatenate listelement names and a member name if the
> length of the member is odd.

The apparent inconsistency is in
> median(c(a1=1,a2=2,a3=3))
a2 
 2 
> median(c(b1=1,b2=2))
[1] 1.5

which makes sense as in the first case the median is an element of the
input, and in the second it is not. Given that, sapply is doing perfectly
sensible things.  The prototype has an x <- as.vector(x) in its median,
and so strips the names from x. If you really want that, try

sapply(TMP.list, function(x) as.vector(median(x)))
item1 item2 
  2.0   1.5 

I suspect this is a feature, not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From loecher@scr.siemens.com  Tue Oct 24 18:07:18 2000
From: loecher@scr.siemens.com (loecher@scr.siemens.com)
Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241707.TAA09950@pubhealth.ku.dk>

Full_Name: Markus Loecher
Version: 1.1.1
OS: Solaris
Submission from: (NULL) (129.73.1.1)


When trying to install R on a Sun SPARC, make fails in the very end, here is the
error message:

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

Any help ?

Thanks,

Markus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 24 18:21:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 24 Oct 2000 19:21:04 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241721.TAA10019@pubhealth.ku.dk>

This has been reported before as PR#677 (and prior to that too).

If you have JPEG but not PNG, on Solaris, you need to add #include
<setjmp.h> after  #include <jpeglib.h>.  It is fixed in the
development version.


> From: loecher@scr.siemens.com
> Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] installation problems with rbitmap.c (PR#703)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Markus Loecher
> Version: 1.1.1
> OS: Solaris
> Submission from: (NULL) (129.73.1.1)
> 
> 
> When trying to install R on a Sun SPARC, make fails in the very end, here is 
the
> error message:
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> Any help ?
> 
> Thanks,
> 
> Markus
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Wed Oct 25 11:34:57 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Wed, 25 Oct 2000 12:34:57 +0200 (MET DST)
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <3.0.32.19700101010000.00916520@162.38.183.200>

Hi,

I think it would be nice to have par(ask=T) set by default in termplot(),
like it is in plot.lm().

Best,

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 25 11:57:14 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 25 Oct 2000 11:57:14 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <200010251057.LAA23396@toucan.stats.ox.ac.uk>

> Date: mer., 25 oct. 2000 12:38:55 +0200
> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>

> I think it would be nice to have par(ask=T) set by default in termplot(),
> like it is in plot.lm().

Well, it isn't really the default in plot.lm, the default for `ask' being

interactive() && one.fig && length(which) > 1 && .Device != "postscript"

Can you supply us with an appropriate patch for termplot and
termplot.Rd?  The issue is somewhat subtle.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 25 14:25:43 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 25 Oct 2000 15:25:43 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010251325.PAA23115@pubhealth.ku.dk>

Turns out that someone forgot to call regfree in the internal code for
strsplit and also forgot to free pt there.  After I found those two,
there is no more memory build up in your example, although I did
not have the patience for 200k calls. (After 1000 there had been
appreciable buildup, and there was exactly none after the fixes.)

The memory management on the next version of R for Windows will be
radically different, and you will be able to set a limit on
total malloc-ed space, for example.  (R-core: this is an
example why one might want to.)


> From: "Joachim Utans" <jutans@utans.u-net.com>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Date: Thu, 12 Oct 2000 20:32:40 +0100
> Subject: Re: [Rd] invalid regular expression after many grep's (PR#691)
> X-Keywords: 
> 
> 
> While trying to create a simple test it turns out that the real
> culprit appears to be strsplit. What I am doing is to parse
> many lengthy text-files, perform some substitutions and write out
> the results (I probably should use Perl but this also does other R
> calculations). Some of the actions performed call strsplit but
> the error message always came from grep, but they both call the
> underlying regexp functions I assume.
> 
> Below is an example that fails on my machine after around 200k
> iterations (this of course is an inappropriate use of strsplit
> as the loop is not necessary).
> Machine is 2*733 PIII, 256Mb RAM, starting R with --vanilla,
> and R_VSIZE=160M, R_NSIZE=1500k.
> 
> 
> bugtest <- function(n=500, file="d:/rw/faq") {
>      for (j in 1:n) {
> 	     tmp <- scan(file, "", sep="\n")
>     	 for (i in 1:length(tmp)) {
>         	  x <- strsplit(tmp[i], " ")[[1]]
> 	     }
>     }
> }
> 
> After exiting with q(), R then crashes (try to access memory at 0x0000)
> N.B. strsplit(.,NULL) does not crash, no regexpr involved(?)
> 
> Come to think of it, when R does crash for me I think a large fraction
> of crashes occurs in functions that in some way call strsplit, though
> I have not kept track of this.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Wed Oct 25 19:49:20 2000
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)
Subject: [Rd] problem with "breaks" in histogram (PR#710)
Message-ID: <200010251849.UAA25821@pubhealth.ku.dk>

Full_Name: Matthew Wiener
Version: 1.1.1
OS: linux
Submission from: (NULL) (156.40.248.102)


I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
for
PPC, and Irix 6.5.

t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
hist(t1, breaks = 10)    (OK)
hist(t1/50, breaks = 10)
	Error in hist.defauilt(t1/50, breaks = 10):
	        some 'x' not counted; maybe breaks do not span range of x


The breaks generated by the call
hist(t1/50, breaks = 10) are (as printed just after the call to "pretty" on line
32
of hist.default):  0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89 0.90 0.91 0.92 .

>hist(t1/50, breaks = seq(from = 0.82, to = 0.92, by = .01))
gives me the error, but

>hist(t1/50, breaks =  c(.82, .83, .84, .85, .86, .87, .88, .89, .9, .91, .92))
does not.

It seems to be a numerical precision problem in generating the breaks, and
maybe
in seq() in general.  I tried 
printing the breaks generated with seq() with 20 digits precision, and the 
first and last breaks were 0.81999999999999995115 and 
0.91999999999999992895, and counts confirms that the value of 0.92 is being
missed
in this case.

And if I try
> hist(t1[-2]/50, breaks = 10), 
the extreme breaks are 0.82000000000000006217 and
0.92000000000000003997  and you miss the value of 0.82.

Maybe some sort of rounding of the breaks is in order, but it would need to
take
into account the actual size of the numbers you're dealing with.

I hope this report has enough information.  If not, please let me know what
else I can provide.  Thanks for the terrific software.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 25 20:55:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2000 21:55:48 +0200
Subject: [Rd] problem with "breaks" in histogram (PR#710)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)"
References: <200010251849.UAA25821@pubhealth.ku.dk>
Message-ID: <x28zrc3dbv.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
> for
> PPC, and Irix 6.5.
> 
> t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
> hist(t1, breaks = 10)    (OK)
> hist(t1/50, breaks = 10)
> 	Error in hist.defauilt(t1/50, breaks = 10):
> 	        some 'x' not counted; maybe breaks do not span range of x
> 
...
> Maybe some sort of rounding of the breaks is in order, but it would need to
> take
> into account the actual size of the numbers you're dealing with.
> 
> I hope this report has enough information.  If not, please let me know what
> else I can provide.  Thanks for the terrific software.

This has been reported before (in the guise of "pretty(x) does not
cover range(x)" or something close to that) and is already fixed in
the development sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:48:28 2000
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 27 Oct 2000 14:48:28 +0200 (MET DST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
Message-ID: <200010271248.OAA16181@pubhealth.ku.dk>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:47:41 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Fri, 27 Oct 2000 14:47:41 +0200
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <3.0.32.20001027144740.0091e450@162.38.183.200>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 27 14:47:56 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)
Subject: [Rd] Bug in hsv() (PR#712)
Message-ID: <200010271347.PAA16894@pubhealth.ku.dk>

Ross posted this code:

 persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)

I hadn't seen the cm.colors function before; it's very nice!  I wanted
to modify it a bit to allow the start and end colors as well as the
max saturation to be specified, and I think I may have turned up a bug
in the hsv() function.  Here's the evidence of the bug:

Look at the results of these two calls to hsv:

> hsv(h=0.833333333333333,s=0.5,v=1)
[1] "#FF8080"
> hsv(h=0.8333333333333333,s=0.5,v=1)
[1] "#FF80FF"

I think the 3 color components are listed as hex values in Blue,
Green, Red order here.  The two calls have nearly identical parameters
(differing in hue only in the 16th decimal place), but the red
component is twice as strong in the second one.

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 27 18:04:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 2000 19:04:15 +0200
Subject: [Rd] Bug in hsv() (PR#712)
In-Reply-To: murdoch@stats.uwo.ca's message of "Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)"
References: <200010271347.PAA16894@pubhealth.ku.dk>
Message-ID: <x2r952gqr4.fsf@blueberry.kubism.ku.dk>

murdoch@stats.uwo.ca writes:

> Ross posted this code:
> 
>  persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)
> 
> I hadn't seen the cm.colors function before; it's very nice!  I wanted
> to modify it a bit to allow the start and end colors as well as the
> max saturation to be specified, and I think I may have turned up a bug
> in the hsv() function.  Here's the evidence of the bug:
> 
> Look at the results of these two calls to hsv:
> 
> > hsv(h=0.833333333333333,s=0.5,v=1)
> [1] "#FF8080"
> > hsv(h=0.8333333333333333,s=0.5,v=1)
> [1] "#FF80FF"
> 
> I think the 3 color components are listed as hex values in Blue,
> Green, Red order here.  The two calls have nearly identical parameters
> (differing in hue only in the 16th decimal place), but the red
> component is twice as strong in the second one.

Yes, this is a bug. It is also visible by viewing (h,hsv(h)) for
values of h close to 5/6. There appears to be a small window from
about 0.8333317 to 0.8333333 where the 3rd component is 00 instead of
FF. (The order of the components are Red, Green, Blue though....)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 28 10:15:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 28 Oct 2000 10:15:41 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
In-Reply-To: <200010271248.OAA16181@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010281015040.25429-100000@auk.stats>

Thank you, now incorporated in R-devel.

On Fri, 27 Oct 2000 paradis@isem.univ-montp2.fr wrote:

> At 11:57 25/10/00 +0100, Brian Ripley wrote:
> >> Date: mer., 25 oct. 2000 12:38:55 +0200
> >> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
> >
> >> I think it would be nice to have par(ask=T) set by default in termplot(),
> >> like it is in plot.lm().
> >
> >Well, it isn't really the default in plot.lm, the default for `ask' being
> >
> >interactive() && one.fig && length(which) > 1 && .Device != "postscript"
> >
> >Can you supply us with an appropriate patch for termplot and
> >termplot.Rd?  The issue is somewhat subtle.
> 
> So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
> plots cannot be really visualized. Here is a proposed modification for this
> function:
> 
> $ diff plot.lm.R plot.lm.new.R
> 7c7
> <          ask = interactive() && one.fig && length(which) > 1
> ---
> >          ask = interactive() && nb.fig < length(which)
> 52a53
> >    nb.fig <- prod(par("mfcol"))
> 
> 
> 
> The modification for termplot() follows in the same way:
> 
> $ diff termplot.R termplot.new.R
> 3a4,5
> >                      ask = interactive() && nb.fig < n.tms
> >          	     && .Device != "postscript",
> 46a49,55
> >     nb.fig <- prod(par("mfcol"))
> >     one.fig <- prod(par("mfcol")) == 1
> >     if (ask) {
> > 	op <- par(ask = TRUE)
> > 	on.exit(par(op))
> >     }
> >     ##---------- Do the individual plots : ----------
> 
> 
> I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
> to work OK. The corresponding modifications for the .Rd files are:
> 
> $ diff plot.lm.Rd plot.lm.new.Rd
> 11c11
> <         ask = interactive() && one.fig && length(which) > 1
> ---
> >         ask = interactive() && one.fig && nb.fig < length(which)
> 
> $ bdiff termplot.Rd termplot.new.Rd
> 11a12,13
> >          ask = interactive() && one.fig && nb.fig < length(which)
> >          	&& .Device != "postscript",
> 28a31,32
> >   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
> >     each plot, see \code{\link{par}(ask=.)}.}
> 
> 
> Emmanuel Paradis
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gnw3@acm.org  Sun Oct 29 13:48:10 2000
From: gnw3@acm.org (gnw3@acm.org)
Date: Sun, 29 Oct 2000 14:48:10 +0100 (MET)
Subject: [Rd] median(c(NA,NA),na.rm=T) fails (PR#713)
Message-ID: <200010291348.OAA22944@pubhealth.ku.dk>

Full_Name: George N. White III
Version: 1.1.1
OS: Linux
Submission from: (NULL) (192.75.95.37)


Calling median(c(NA,NA), ns.rm=T) passes a "null" vector to sort.  I would
expect it to return "NA", as suggested below:

> median
function (x, na.rm = FALSE) 
{
    if (na.rm) 
        x <- x[!is.na(x)]
    else if (any(is.na(x))) 
        return(NA)
    n <- length(x)
    if (n == 0) return(NA)  ################ suggested fix
    half <- (n + 1)/2
    if (n%%2 == 1) {
        sort(x, partial = half)[half]
    }
    else {
        sum(sort(x, partial = c(half, half + 1))[c(half, half + 
            1)])/2
    }
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Sun Oct 29 15:29:58 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Sun, 29 Oct 2000 16:29:58 +0100 (MET)
Subject: [Rd] prop.test and x = 0 (PR#714)
Message-ID: <200010291529.QAA23204@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


prop.test(0, 30)

95 percent confidence interval:
 0.003043053 0.141320480 

Clearly absurd.  You need theory to be this stupid. :-)

I suggest adding

if (p.c >= 1) p.u <- 1

just after line 59 of the current version of prop.test and

if (p.c <= 0) p.l <- 0

just after line 62 of the current version of prop.test.

With these patches, prop.test produces conservative confidence intervals
for all p and n = 30.  The current version fails catastrophically for 0 < p <
.003
where of course it has actual coverage probability zero.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 29 17:17:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Oct 2000 18:17:42 +0100 (MET)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200010291717.SAA23441@pubhealth.ku.dk>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I
am

[...]

> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width
to
> atleast
> 2000!

It's set as macro R_MAX_WIDTH_OPT in Print.h.  All you needed to do is to
change that and re-compile.  Simple, surely?   Even simple things like this
take time to track down and deal with, so it would be appreciated if bug
reporters could contribute to the R project by doing as much as they can
themselves.

Presumably it is there to protect people from themselves, but as e.g.
strings can come out much longer I don't think it is very effective.
Alternatively as it dates from the era of fixed-size output buffers it
might have been to protect R, but that seems no longer necessary,
at least on a Unix console (it might be on other output devices).

I've upped the limit to 10000 and added comments in the help file and
a more informative warning:

> options(width=-17)
Error in options(...) : invalid width parameter, allowed 10...10000


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 11:16:52 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Oct 2000 12:16:52 +0100 (MET)
Subject: [Rd] Printing list elements w/attributes (PR#715)
Message-ID: <200010311116.MAA11720@pubhealth.ku.dk>

This looks wrong {spotted when looking at the confidence interval in 
unclass(t.test(...))}:

l<-list(a=10)
attr(l$a,"xx")<-23
l

R gets

$a
[1] 10
$aattr(,"xx")
[1] 23

Splus has

$a:
[1] 10
attr($a, "xx"):
[1] 23

(Linux/RedHat6.2/ix86, R1.1.1 and current R-devel)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 31 15:28:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 31 Oct 2000 10:28:45 -0500
Subject: [Rd] conflicting types for `Rf_stirlerr
Message-ID: <39FEE52D.AED5CE58@bank-banque-canada.ca>

I'm having trouble making todays development snapshot:

-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1

[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel : uname
SunOS
[22] /home/mfa5/gilp/R-versions/R-devel : uname -r
5.6

More complete details follow.

Paul Gilbert
_______

[16] /home/mfa5/gilp/R-versions : tar -xf R-devel.tar
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions : cd R-devel
[18] /home/mfa5/gilp/R-versions/R-devel : ./configure
creating cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.6
loading site script ./config.site
loading build specific script ./config.site
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/home/mfa5/gilp/R-versions/R-devel/tools/install-sh -c
checking build system type... sparc-sun-solaris2.6
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
updating cache ./config.cache
loading cache ./config.cache within ltconfig
checking for object suffix... o
checking for executable suffix... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... yes
checking if gcc supports -fno-rtti -fno-exceptions ... yes
checking if gcc static flag -static works... -static
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking command to parse /usr/ccs/bin/nm -p output... ok
checking how to hardcode library paths into programs... immediate
checking for /usr/ccs/bin/ld option to reload object files... -r
checking dynamic linker characteristics... solaris2.6 ld.so
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... no
checking whether to build static libraries... yes
checking for objdir... .libs
creating libtool
updating cache ./config.cache
loading cache ./config.cache
checking for perl... /usr/bin/perl
checking whether perl version is at least 5... yes
checking for dvips... /apps/asd/unix/teTeX/bin/dvips
checking for tex... /apps/asd/unix/teTeX/bin/tex
checking for latex... /apps/asd/unix/teTeX/bin/latex
checking for makeindex... /apps/asd/unix/teTeX/bin/makeindex
checking for pdftex... /apps/asd/unix/teTeX/bin/pdftex
checking for pdflatex... /apps/asd/unix/teTeX/bin/pdflatex
checking for makeinfo... /apps/asd/unix/teTeX/bin/makeinfo
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for unzip... /usr/bin/unzip
checking for zip... /apps/mfa/bin/zip
checking for gcc... (cached) gcc
checking whether the C compiler (gcc -g -O2 ) works... yes
checking whether the C compiler (gcc -g -O2 ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking for g77... /home/mfa/gilp/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... yes
checking whether the Fortran 77 compiler (g77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... yes
checking whether g77 accepts -g... yes
checking for Fortran 77 libraries...  -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
-L/home/res/public/gnu/sun5.6/lib/gcc-lib/sparc-sun-solaris2.6/2.8.1
-L/home/res/public/gnu/sun5.6/sparc-sun-solaris2.6/lib -L/usr/ccs/bin
-L/usr/ccs/lib -L/home/res/public/gnu/sun5.6/lib -lm
checking whether g77 appends underscores... yes
checking whether g77 and gcc agree on int and double... yes
checking for c++... c++
checking whether the C++ compiler (c++  ) works... yes
checking whether the C++ compiler (c++  ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether c++ accepts -g... yes
checking how to run the C++ preprocessor... c++ -E
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for ATL_xerbla in -latlas... no
checking for dgemm_ in -lcxml... no
checking for dgemm_ in -ldxml... no
checking for dgemm_ in -lscs... no
checking for dgemm_ in -lcomplib.sgimath... no
checking for zherk in -lblas... no
checking for dgemm_ in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking for working alloca.h... yes
checking for alloca... yes
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for access... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for popen... yes
checking for putenv... yes
checking for rint... yes
checking for setenv... no
checking for strcoll... yes
checking for stat... yes
checking for strptime... yes
checking for system... yes
checking for times... yes
checking for unsetenv... no
checking for vsnprintf... yes
checking for strdup... yes
checking for __setfpucw... no
checking whether calloc is broken... no
checking whether finite is broken... no
checking whether log is broken... yes
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for floatingpoint.h... yes
checking for fpu_control.h... no
checking for grp.h... yes
checking for ieee754.h... no
checking for ieeefp.h... yes
checking for locale.h... yes
checking for netdb.h... yes
checking for netinet/in.h... yes
checking for netinet/tcp.h... yes
checking for pwd.h... yes
checking for readline/history.h... no
checking for readline/readline.h... no
checking for rpc/rpc.h... yes
checking for rpc/xdr.h... yes
checking for string.h... yes
checking for sys/param.h... yes
checking for sys/socket.h... yes
checking for sys/stat.h... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/utsname.h... yes
checking for unistd.h... yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking for BSD networking... yes
checking for main in -lz... (cached) no
checking return type of signal handlers... void
checking for pid_t... (cached) yes
checking for size_t... yes
checking for blkcnt_t... yes
checking whether byte ordering is bigendian... yes
checking for working const... yes
checking size of long... 4
checking for finite... (cached) yes
checking for isnan... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for xmkmf... /usr/openwin/bin/xmkmf
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... (cached) no
checking for gethostbyname in -lnsl... (cached) yes
checking for connect... (cached) no
checking for connect in -lsocket... (cached) yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for tclConfig.sh... no
checking for tkConfig.sh... no
checking for tcl.h... no
checking whether leap seconds are counted... no
checking for lpr... lpr
checking for paperconf... false
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating demos/dynload/Makefile
creating doc/Makefile
creating doc/html/Makefile
creating doc/html/search/Makefile
creating doc/manual/Makefile
creating etc/Makefile
creating etc/Makeconf
creating etc/Makeconf-tests
creating share/Makefile
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/library/base/DESCRIPTION
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/ctest/DESCRIPTION
creating src/library/ctest/Makefile
creating src/library/ctest/src/Makefile
creating src/library/eda/DESCRIPTION
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/DESCRIPTION
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/DESCRIPTION
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/DESCRIPTION
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/nls/DESCRIPTION
creating src/library/nls/Makefile
creating src/library/nls/src/Makefile
creating src/library/stepfun/DESCRIPTION
creating src/library/stepfun/Makefile
creating src/library/splines/DESCRIPTION
creating src/library/splines/Makefile
creating src/library/splines/src/Makefile
creating src/library/tcltk/DESCRIPTION
creating src/library/tcltk/Makefile
creating src/library/tcltk/src/Makefile
creating src/library/ts/DESCRIPTION
creating src/library/ts/Makefile
creating src/library/ts/src/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/nmath/standalone/Makefile
creating src/scripts/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rd2contents
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rprof
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build
creating src/scripts/build-help
creating src/scripts/check
creating src/scripts/extract-usage
creating src/unix/Makefile
creating src/unix/X11/Makefile
creating src/unix/gnome/Makefile
creating tests/Makefile
creating tests/Examples/Makefile
creating tools/Makefile
creating tools/Rdnewer
creating tools/help2man
creating tools/keyword-test
creating tools/install-info
creating tools/pkg2tex
creating src/include/config.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  C++ compiler:             c++  -g -O2
  FORTRAN compiler:         g77  -g -O2

  X11 support:              yes
  Gnome support:            no
  Tcl/Tk support:           no

  R profiling support:      no
  Build R shared library:   no

configure: warning: you cannot build info versions of the R manuals
[19] /home/mfa5/gilp/R-versions/R-devel : make
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Nothing to be done for `R'.
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'

make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
creating src/scripts/R.fe
mkdir ../../bin
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
mkdir ../../include
mkdir ../../include/R_ext
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
making Rsock.d from Rsock.c
making S_compat.d from S_compat.c
making approx.d from approx.c
making bakslv.d from bakslv.c
making binning.d from binning.c
making chisqsim.d from chisqsim.c
making chull.d from chull.c
making cpoly.d from cpoly.c
making cumsum.d from cumsum.c
making distance.d from distance.c
making fft.d from fft.c
making fmin.d from fmin.c
making fortran.d from fortran.c
making lbfgsb.d from lbfgsb.c
making loglin.d from loglin.c
making lowess.d from lowess.c
making machar.d from machar.c
making maxcol.d from maxcol.c
making massdist.d from massdist.c
making pretty.d from pretty.c
making rowsum.d from rowsum.c
making sock.d from sock.c
making splines.d from splines.c
making stem.d from stem.c
making strsignif.d from strsignif.c
making tabulate.d from tabulate.c
making uncmin.d from uncmin.c
making zeroin.d from zeroin.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c Rsock.c -o Rsock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c S_compat.c -o S_compat.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c approx.c -o approx.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c bakslv.c -o bakslv.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c binning.c -o binning.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chisqsim.c -o chisqsim.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chull.c -o chull.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cpoly.c -o cpoly.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cumsum.c -o cumsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c distance.c -o distance.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fft.c -o fft.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin.c -o fmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fortran.c -o fortran.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c loglin.c -o loglin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lowess.c -o lowess.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c machar.c -o machar.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c maxcol.c -o maxcol.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c massdist.c -o massdist.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c pretty.c -o pretty.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c rowsum.c -o rowsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sock.c -o sock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c splines.c -o splines.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stem.c -o stem.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c strsignif.c -o strsignif.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c tabulate.c -o tabulate.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c uncmin.c -o uncmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c zeroin.c -o zeroin.o
g77   -g -O2 -c ch2inv.f -o ch2inv.o
g77   -g -O2 -c chol.f -o chol.o
g77   -g -O2 -c dpbfa.f -o dpbfa.o
g77   -g -O2 -c dpbsl.f -o dpbsl.o
g77   -g -O2 -c dpoco.f -o dpoco.o
g77   -g -O2 -c dpodi.f -o dpodi.o
g77   -g -O2 -c dpofa.f -o dpofa.o
g77   -g -O2 -c dposl.f -o dposl.o
g77   -g -O2 -c dqrdc.f -o dqrdc.o
g77   -g -O2 -c dqrdc2.f -o dqrdc2.o
g77   -g -O2 -c dqrls.f -o dqrls.o
g77   -g -O2 -c dqrsl.f -o dqrsl.o
g77   -g -O2 -c dqrutl.f -o dqrutl.o
g77   -g -O2 -c dsvdc.f -o dsvdc.o
g77   -g -O2 -c dtrco.f -o dtrco.o
g77   -g -O2 -c dtrsl.f -o dtrsl.o
g77   -g -O2 -c eigen.f -o eigen.o
g77   -g -O2 -c lminfl.f -o lminfl.o
g77   -g -O2 -c blas.f -o blas.o
ar cr libappl.a Rsock.o S_compat.o approx.o bakslv.o binning.o chisqsim.o
chull.o cpoly.o cumsum.o distance.o fft.o fmin.o fortran.o lbfgsb.o loglin.o
lowess.o machar.o maxcol.o massdist.o pretty.o rowsum.o sock.o splines.o stem.o
strsignif.o tabulate.o uncmin.o zeroin.o ch2inv.o chol.o dpbfa.o dpbsl.o dpoco.o
dpodi.o dpofa.o dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o
dtrco.o dtrsl.o eigen.o lminfl.o blas.o
ranlib libappl.a
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
making mlutils.d from mlutils.c
making d1mach.d from d1mach.c
making i1mach.d from i1mach.c
making fmax2.d from fmax2.c
making fmin2.d from fmin2.c
making fmod.d from fmod.c
making fprec.d from fprec.c
making fround.d from fround.c
making ftrunc.d from ftrunc.c
making sign.d from sign.c
making fsign.d from fsign.c
making fsquare.d from fsquare.c
making fcube.d from fcube.c
making imax2.d from imax2.c
making imin2.d from imin2.c
making chebyshev.d from chebyshev.c
making log1p.d from log1p.c
making lgammacor.d from lgammacor.c
making gammalims.d from gammalims.c
making stirlerr.d from stirlerr.c
making gamma.d from gamma.c
making lgamma.d from lgamma.c
making gamma_cody.d from gamma_cody.c
making beta.d from beta.c
making lbeta.d from lbeta.c
making polygamma.d from polygamma.c
making bessel_i.d from bessel_i.c
making bessel_j.d from bessel_j.c
making bessel_k.d from bessel_k.c
making bessel_y.d from bessel_y.c
making choose.d from choose.c
making snorm.d from snorm.c
making sexp.d from sexp.c
making dgamma.d from dgamma.c
making pgamma.d from pgamma.c
making qgamma.d from qgamma.c
making rgamma.d from rgamma.c
making dbeta.d from dbeta.c
making pbeta.d from pbeta.c
making qbeta.d from qbeta.c
making rbeta.d from rbeta.c
making dunif.d from dunif.c
making punif.d from punif.c
making qunif.d from qunif.c
making runif.d from runif.c
making dnorm.d from dnorm.c
making pnorm.d from pnorm.c
making qnorm.d from qnorm.c
making rnorm.d from rnorm.c
making dlnorm.d from dlnorm.c
making plnorm.d from plnorm.c
making qlnorm.d from qlnorm.c
making rlnorm.d from rlnorm.c
making df.d from df.c
making pf.d from pf.c
making qf.d from qf.c
making rf.d from rf.c
making dt.d from dt.c
making pt.d from pt.c
making qt.d from qt.c
making rt.d from rt.c
making dchisq.d from dchisq.c
making pchisq.d from pchisq.c
making qchisq.d from qchisq.c
making rchisq.d from rchisq.c
making dbinom.d from dbinom.c
making pbinom.d from pbinom.c
making qbinom.d from qbinom.c
making rbinom.d from rbinom.c
making dcauchy.d from dcauchy.c
making pcauchy.d from pcauchy.c
making qcauchy.d from qcauchy.c
making rcauchy.d from rcauchy.c
making dexp.d from dexp.c
making pexp.d from pexp.c
making qexp.d from qexp.c
making rexp.d from rexp.c
making dgeom.d from dgeom.c
making pgeom.d from pgeom.c
making qgeom.d from qgeom.c
making rgeom.d from rgeom.c
making dhyper.d from dhyper.c
making phyper.d from phyper.c
making qhyper.d from qhyper.c
making rhyper.d from rhyper.c
making dnbinom.d from dnbinom.c
making pnbinom.d from pnbinom.c
making qnbinom.d from qnbinom.c
making rnbinom.d from rnbinom.c
making dpois.d from dpois.c
making ppois.d from ppois.c
making qpois.d from qpois.c
making rpois.d from rpois.c
making dweibull.d from dweibull.c
making pweibull.d from pweibull.c
making qweibull.d from qweibull.c
making rweibull.d from rweibull.c
making dlogis.d from dlogis.c
making plogis.d from plogis.c
making qlogis.d from qlogis.c
making rlogis.d from rlogis.c
making dnchisq.d from dnchisq.c
making pnchisq.d from pnchisq.c
making qnchisq.d from qnchisq.c
making dnbeta.d from dnbeta.c
making pnbeta.d from pnbeta.c
making pnf.d from pnf.c
making pnt.d from pnt.c
making ptukey.d from ptukey.c
making qtukey.d from qtukey.c
making wilcox.d from wilcox.c
making signrank.d from signrank.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c mlutils.c -o mlutils.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c d1mach.c -o d1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c i1mach.c -o i1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmax2.c -o fmax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin2.c -o fmin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmod.c -o fmod.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fprec.c -o fprec.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fround.c -o fround.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c ftrunc.c -o ftrunc.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sign.c -o sign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsign.c -o fsign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsquare.c -o fsquare.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fcube.c -o fcube.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imax2.c -o imax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imin2.c -o imin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chebyshev.c -o chebyshev.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c log1p.c -o log1p.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lgammacor.c -o lgammacor.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c gammalims.c -o gammalims.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src'
make: *** [R] Error 1
[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 15:46:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2000 16:46:43 +0100
Subject: [Rd] conflicting types for `Rf_stirlerr
In-Reply-To: Paul Gilbert's message of "Tue, 31 Oct 2000 10:28:45 -0500"
References: <39FEE52D.AED5CE58@bank-banque-canada.ca>
Message-ID: <x27l6prp24.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm having trouble making todays development snapshot:
> 
> -DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
> stirlerr.c:34: conflicting types for `Rf_stirlerr'
> ../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
> make[3]: *** [stirlerr.o] Error 1

A Mathlib.h got committed when it shouldn't have been. Should be OK in
tomorrows snapshot.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Oct 31 19:57:36 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 31 Oct 2000 14:57:36 -0500 (EST)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <20001031193640.B1043@ps2-4.ucl-41> (message from Zsombor
 Cseres-Gergely on Tue, 31 Oct 2000 19:36:40 +0000)
Message-ID: <200010311957.OAA26707@jessie.research.bell-labs.com>



 -->>> Moved to r-devel from r-help. <<<---



> Date: Tue, 31 Oct 2000 19:36:40 +0000
> From: Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk>
> Cc: r-help@stat.math.ethz.ch
> References: <Pine.GSO.4.21.0010301459460.14728-100000@atlas.biostat.washington.edu> <6rd7ghhpum.fsf@franz.stat.wisc.edu>
> Sender: owner-r-help@stat.math.ethz.ch
> Precedence: bulk
> 
> On Mon, Oct 30, 2000 at 05:27:29PM -0600, Douglas Bates wrote:
> 
> > You may want to try "make check" after configuring and compiling R.
> > That should use the postscript graphics device driver rather than
> > anything related to X.  We would be very interested in hearing if that
> > succeeds.
> 
> OK, one good and a bad news. Good news is that R runs with option --gui=none.
> It does demo()-s that does not involve graphics. 

That's good to hear.

> 
> Bad news is that make check fails saying: 
> 
> Fatal error: The X11 shared library could not be loaded.
>   The error was /home/zs/R-1.1.1/bin/R_X11.so: undefined symbol: R_GlobalEnv
> 

Just a quick thought....

Rather than being a problem with X11, it looks like it may be a
problem associated with dlopen() when the R_X11.so library is
explicitly loaded during the initialization. Basically, that `library'
(R_X11.so) has to resolve all of the symbols to which it refers, and
many of them are in the R executable (R.bin). Perhaps the linking and
loading mechanisms in Hurd do not export these symbols from the
application in a way that shared libraries can find them.  Or it may
be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
(although that shouldn't matter).

A mechanism that Luke and I chatted about that could tidy up some of
these things is to link both R.bin and also R_X11.so against libR.so.
So R.bin would consist of a single routine main() that initialized R
and run the mainloop.  As long as this doesn't introduce a noticeable
performance penalty, it might be worth doing to simplify setups like
this one and reduce the dependency on the non-standard behaviour of
dlopen().

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sws96srb@met.rdg.ac.uk  Mon Oct  2 13:24:39 2000
From: sws96srb@met.rdg.ac.uk (sws96srb@met.rdg.ac.uk)
Date: Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021224.OAA16613@pubhealth.ku.dk>

Full_Name: Sheila Bryant
Version: 1.1.1
OS: Solaris 2.6
Submission from: (NULL) (134.225.16.2)


During the 'make' process I get the following:

String found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 781, near
"("</TABLE>\n""
        (Missing operator before "</TABLE>\n"?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1234, near "
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1249, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1264, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1292, near "
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/export/bors/bors-01/sws96srb/R-1.1.1/etc/Rdconvlib.pl line 1335, near "
txt_header"
        (Missing operator before txt_header?)

In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
5.002, 
gcc 2.95.2 Solaris 2.6, teTeX 0.4.

I've done a make html as well, to be on the safe side! Got the same dose of
warnings.
R istself starts up OK, but help.start() just gives me the information about
using 
existing browsers, but I never get any pages come up. I tried exiting netscape &

tried again, but no new browser was forthcoming. I've tried the FAQ and bug
reports, 
but maybe haven't asked the right question there!

I've probably missed something obvious, but just can't see it



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  2 13:58:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2000 14:58:58 +0200
Subject: [Rd] several documentation problems (PR#675)
In-Reply-To: sws96srb@met.rdg.ac.uk's message of "Mon, 2 Oct 2000 14:24:39 +0200 (MET DST)"
References: <200010021224.OAA16613@pubhealth.ku.dk>
Message-ID: <x2em1zo0vh.fsf@blueberry.kubism.ku.dk>

sws96srb@met.rdg.ac.uk writes:

> In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> 5.002, 
> gcc 2.95.2 Solaris 2.6, teTeX 0.4.

Your perl version seems to be a bit old. Although we formally only
require Perl 5, 5.002 may have gone untested. The problems definitely
look Perl related.

There seems to be two types of problem:

The first one is

 780              print $htmlout
 781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
  
and the rest are like

1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
  
I the 1st case, we have nearly the same construction without the line
break in line 784, and that seems to work. You might try joining up
the lines.

In the other case, perhaps add parentheses around  mywrap..."\n"

Otherwise we'll need to bring in the real Perl experts. 

[Even if it would be easier for you to upgrade Perl, I think it would
be nice to get to the root of this problem.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 14:04:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 15:04:41 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010021304.PAA17572@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Oct 2000 14:58:58 +0200
> 
> sws96srb@met.rdg.ac.uk writes:
> 
> > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > 5.002, 
> > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> 
> Your perl version seems to be a bit old. Although we formally only
> require Perl 5, 5.002 may have gone untested. The problems definitely
> look Perl related.

As far as I recall 5.002 was buggy and we rapidly went to 5.004.
(Something similar happened in RedHat Linux 5.2's Perl.)   We would
recommend upgrading to Perl 5.6.0.

> There seems to be two types of problem:
> 
> The first one is
> 
>  780              print $htmlout
>  781                  ("</TABLE>\n", "<P>\n", text2html($text, 1), "</P>\n");
>   
> and the rest are like
> 
> 1234                  print $txtout mywrap($indent1, $indent2, $text), "\n";
>   
> I the 1st case, we have nearly the same construction without the line
> break in line 784, and that seems to work. You might try joining up
> the lines.
> 
> In the other case, perhaps add parentheses around  mywrap..."\n"

Another guess is that it might require &mywrap there.

> Otherwise we'll need to bring in the real Perl experts. 

I'm pretty sure that what we have is valid Perl, and that some versions
of Perl have choked on valid Perl.  Upgrading is the best answer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Oct  2 14:05:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 2 Oct 2000 15:05:12 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010021305.PAA17599@pubhealth.ku.dk>

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:

    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

Thank you for the bug report.
This bug is ``new'' (a bit more than a year!) and was introduced when
someone fixed another problem in pretty.c 
by adding "1e-5" fuzz a bit too generously
hmm,....... 
I'll have a look.

    david> Version: .... R 1.1.1 ...


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct  2 16:27:37 2000
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 2 Oct 2000 17:27:37 +0200 (MET DST)
Subject: [Rd] documentation error for deriv; MASS scripts ch8; (PR#676)
Message-ID: <200010021527.RAA19488@pubhealth.ku.dk>

Hola!

There is a bug in the documentation file for deriv, which says that
the third argument is unimplemented. It seems only to be implemented
differently than in s-plus. I show whith the MASS R-script
ch8 file as example:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                function(b0, b1, th, x) {})
> expn1
function(b0, b1, th, x) {}

which cannnot be used whith nls! But changing to:

> expn1 <- deriv(y ~ b0 + b1 * 2^(-x/th), c("b0", "b1", "th"),
+                c("b0", "b1", "th", "x") )
> expn1
function (b0, b1, th, x) 
{
    .expr3 <- 2^(-x/th)
    .value <- b0 + b1 * .expr3
    .grad <- array(0, c(length(.value), 3), list(NULL, c("b0", 
        "b1", "th")))
    .grad[, "b0"] <- 1
    .grad[, "b1"] <- .expr3
    .grad[, "th"] <- b1 * (.expr3 * (log(2) * (x/th^2)))
    attr(.value, "gradient") <- .grad
    .value
}

gives the desired result. 

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Oct  2 16:52:47 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021552.RAA19800@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 1.1.1
OS: i86pc Solaris 2.7
Submission from: (NULL) (143.205.61.82)


jmp_buf type undeclared, may be related to the installed version of libjpeg
(this is v6b), compiler is gcc/g77 2.95.2:

root@pc05-stat[X11]# make
creating src/unix/X11/Makefile
making rbitmap.d from rbitmap.c
make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
gcc -I. -I../../../src/include -I../../../src/include
-I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
-DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known
make[1]: *** [rbitmap.o] Error 1
make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
make: *** [R] Error 2


Solution:
*************************************************
--- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
+++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
@@ -231,6 +231,9 @@
 #ifdef HAVE_JPEG
 
 #include <jpeglib.h>
+#if __sun__ & __i386
+#include <setjmp.h>
+#endif
 
 /* Here's the extended error handler struct */> version
         _                 
************************************************

with this patch R compiles and passes "make test", the 
full version is:

> version
         _                 
platform i386-pc-solaris2.7
arch     i386              
os       solaris2.7        
system   i386, solaris2.7  
status                     
major    1                 
minor    1.1               
year     2000              
month    August            
day      15                
language R                 


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct  2 16:59:35 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Oct 2000 17:59:35 +0200 (MET DST)
Subject: [Rd] R build on i86pc Solaris 2.7 (PR#677)
Message-ID: <200010021559.RAA19914@pubhealth.ku.dk>

It's related to having jpeg and not png, and it is already fixed in the
R-devel tree. An unconditional <setjmp.h> is fine.


> From: albrecht.gebhardt@uni-klu.ac.at
> Date: Mon, 2 Oct 2000 17:52:47 +0200 (MET DST)
> 
> Full_Name: Albrecht Gebhardt
> Version: 1.1.1
> OS: i86pc Solaris 2.7
> Submission from: (NULL) (143.205.61.82)
> 
> 
> jmp_buf type undeclared, may be related to the installed version of libjpeg
> (this is v6b), compiler is gcc/g77 2.95.2:
> 
> root@pc05-stat[X11]# make
> creating src/unix/X11/Makefile
> making rbitmap.d from rbitmap.c
> make[1]: Entering directory `/usr/share/src/R-1.1.1/src/unix/X11'
> gcc -I. -I../../../src/include -I../../../src/include
> -I../../../src/include/R_ext -I/usr/openwin/include -I/usr/local/include
> -DHAVE_CONFIG_H -mieee-fp -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> make[1]: *** [rbitmap.o] Error 1
> make[1]: Leaving directory `/usr/share/src/R-1.1.1/src/unix/X11'
> make: *** [R] Error 2
> 
> 
> Solution:
> *************************************************
> --- src/unix/X11/rbitmap.c.jpeg-patch   Mon Oct  2 16:18:16 2000
> +++ src/unix/X11/rbitmap.c      Mon Oct  2 16:40:36 2000
> @@ -231,6 +231,9 @@
>  #ifdef HAVE_JPEG
>  
>  #include <jpeglib.h>
> +#if __sun__ & __i386
> +#include <setjmp.h>
> +#endif
> 

R-devel has

#ifdef HAVE_JPEG

#include <jpeglib.h>
#include <setjmp.h>

....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Oct  2 18:58:56 2000
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 2 Oct 2000 19:58:56 +0200 (MET DST)
Subject: [Rd] typo in documentation for read.table (PR#678)
Message-ID: <200010021758.TAA20496@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.1.0
OS: Linux 2.2.14 i686
Submission from: (NULL) (15.255.176.47)



In the documentation for read.table, the description of the argument
`strip.white'
uses `skip.white' instead.

> ?read.table
...
Usage:

     read.table(file, header = FALSE, sep = "", quote = "\"'", dec = ".",
                row.names, col.names, as.is = FALSE, na.strings = "NA",
                skip = 0, check.names = TRUE, strip.white = FALSE)
                                              ^^^^^^^^^^^
...
skip.white: logical. Used only when `sep' has been specified, and
^^^^^^^^^^allows the stripping of leading and trailing white space from
          `character' fields (`numeric' fields are always stripped). 
          See `scan' for further details, remembering that the columns
          may include the row names.
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] pretty not covering the range properly (PR#673)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 11:40:21 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 12:40:21 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200010031040.MAA26597@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:

      MM> Ok, I've fixed pretty() for the development version such that 
      MM>    p <- pretty(x)
      MM>    all(p[1] <= x & x <= p[length(p)])
      MM> should be guaranteed (again).

    PD> Gulp. I'm pretty(!) sure there was a reason for changing it in the
    PD> other direction...
yes, the change last year (between 0.64 and 0.65) *was* for a good reason,
and I have not reverted that!
    PD> [I have a vague recollection of
    PD> pretty(pretty(x)) != pretty(x) or something like that]

    PD> Are we quite sure that it is not the caller that needs to be a
    PD> little more lenient in the bounds checking?

I've thought of that, too.
But no, I think we want to guarantuee the above 
    {which I had wrong in the last e-mail, it's "[length(p)]" !}
which we have had always in the documentation and which *is* S compatible.

    PD> OTOH, it's in code you wrote yourself...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  3 14:26:35 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 3 Oct 2000 15:26:35 +0200
Subject: [Rd] plot.table() ?
Message-ID: <14809.56971.828581.703850@gargle.gargle.HOWL>

I tend to use  table() quite a bit for quick "diagnostics", summary, etc.
I have wished for a more automatic way of plotting these.

One possibility would be something like the following function;
The question is if (something like) the following is worth providing (and then
maintaining...)  at all :

plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
                       xlab = NULL, ylab = deparse(substitute(x)),
                       frame.plot = is.num,
                       ...)
{
    rnk <- length(d <- dim(x))
    if(rnk == 0)
	stop("invalid table `x'")
    if(rnk == 1) {
        dn <- dimnames(x)
        nx <- dn[[1]]
        if(is.null(xlab)) xlab <- names(dn)
        if(is.null(xlab)) xlab <- ""
        ow <- options(warn = -1)
        is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
        x0 <- if(is.num) xx else seq(x)
	plot(x0, unclass(x), type = type, 
             ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
             lwd = lwd, ..., xaxt = "n")
        axis(1, at = x0, labels = nx)
    } else
	mosaicplot(x, ...)
}

------

Note that I have `optimized' it mainly for 1-D tables, but it also a way to
make the mosaicplots more known..

Also,
     plot(table(ff))  
is quite similar to 
     plot(ff)
when `ff' is a factor (the latter using barplot).

However,    plot(table(ff, f2))  is different and sometimes more
useful than       plot(ff, f2)
compare
	data(state)
	par(mfcol=c(1,2))
	plot(      state.division, state.region)#-> plot.factor
	plot(table(state.division, state.region))#-> plot.table


Also, try things

        plot(table(state.division))

	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sws96srb@met.reading.ac.uk  Tue Oct  3 14:44:55 2000
From: sws96srb@met.reading.ac.uk (sws96srb@met.reading.ac.uk)
Date: Tue, 3 Oct 2000 15:44:55 +0200 (MET DST)
Subject: [Rd] several documentation problems (PR#675)
Message-ID: <200010031344.PAA00416@pubhealth.ku.dk>



Prof Brian Ripley wrote:
> 
> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 02 Oct 2000 14:58:58 +0200
> >
> > sws96srb@met.rdg.ac.uk writes:
> >
> > > In all sorts of places - wherever Rdconvlib.pl is used I guess. I have perl
> > > 5.002,
> > > gcc 2.95.2 Solaris 2.6, teTeX 0.4.
> >
> > Your perl version seems to be a bit old. Although we formally only
> > require Perl 5, 5.002 may have gone untested. The problems definitely
> > look Perl related.
> 
> As far as I recall 5.002 was buggy and we rapidly went to 5.004.
> (Something similar happened in RedHat Linux 5.2's Perl.)   We would
> recommend upgrading to Perl 5.6.0.
> 

<snip>

Many thanks to everyone for the help. I've upgraded to Perl 5.6.0 and
all makes now flow through with no errors. 

-- 

Sheila


-----------------------------------------------------------------------------

Dr. Sheila Bryant                           Dept. of Meteorology,
Email: S.R.Bryant@reading.ac.uk             University of Reading,
Phone: 0118 931 6395                        Earley Gate, Whiteknights,
                                            PO Box 243
                                            Reading. RG6 6BB.   UK

-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:17:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:17:07 +0200 (CEST)
Subject: [Rd] plot.table() ?
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
References: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <14809.60003.615381.377841@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> I tend to use table() quite a bit for quick "diagnostics", summary,
> etc.  I have wished for a more automatic way of plotting these.

> One possibility would be something like the following function; The
> question is if (something like) the following is worth providing (and
> then maintaining...)  at all :

> plot.table <- function(x, type = "h", ylim = c(0, max(x)), lwd = 2,
>                        xlab = NULL, ylab = deparse(substitute(x)),
>                        frame.plot = is.num,
>                        ...)
> {
>     rnk <- length(d <- dim(x))
>     if(rnk == 0)
> 	stop("invalid table `x'")
>     if(rnk == 1) {
>         dn <- dimnames(x)
>         nx <- dn[[1]]
>         if(is.null(xlab)) xlab <- names(dn)
>         if(is.null(xlab)) xlab <- ""
>         ow <- options(warn = -1)
>         is.num <- !any(is.na(xx <- as.numeric(nx))); options(ow)
>         x0 <- if(is.num) xx else seq(x)
> 	plot(x0, unclass(x), type = type, 
>              ylim = ylim, xlab = xlab, ylab = ylab, frame.plot = frame.plot,
>              lwd = lwd, ..., xaxt = "n")
>         axis(1, at = x0, labels = nx)
>     } else
> 	mosaicplot(x, ...)
> }

> ------

> Note that I have `optimized' it mainly for 1-D tables, but it also a
> way to make the mosaicplots more known.

> Also,
>      plot(table(ff))  
> is quite similar to 
>      plot(ff)
> when `ff' is a factor (the latter using barplot).

> However,    plot(table(ff, f2))  is different and sometimes more
> useful than       plot(ff, f2)
> compare
> 	data(state)
> 	par(mfcol=c(1,2))
> 	plot(      state.division, state.region)#-> plot.factor
> 	plot(table(state.division, state.region))#-> plot.table


> Also, try things

>         plot(table(state.division))

> 	Poiss.tab <- table(N = rpois(200, lam= 5)); plot(Poiss.tab)

In general I like the idea of having a plot method for contingency
tables.

One basic question is whether we feel comfortable enough with the
"table" class that was gradually introduced.  But in any case, xtabs()
assigns class c("xtabs", "table") which should be good enough.

I am not sure how much effort we want to put into this, but here are
some remarks.  I think the Poiss.tab example looks nice, but I am not
happy with the output of plot(table(state.division)) [not that I am
happy with calling barplot() directly in this case].  I would prefer
having ALL names as labels (perhaps rotated 45 degrees).  I am also not
sure about the bars in plot.table(), they look a bit tiny, no?

Re Mosaic plots, very nice idea, but e.g. the result of
  plot(table(state.division, state.region))
looks terrible.  I think this could be very confusing to plains users.
Hmm, how could we improve this?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 15:31:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 16:31:21 +0200 (CEST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
References: <200009281712.TAA20426@pubhealth.ku.dk>
 <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>
Message-ID: <14809.60857.12878.62820@mithrandir.hornik.net>

>>>>> ben  writes:

> On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:
>> It's a feature, on the TODO list to be added one day.

>   A quick hack (if anyone wants to do it) is to change line 975 from

> /*	Rprintf("in lbfgsb - %s\n", task);*/

>  to

> 	if (trace) Rprintf("in lbfgsb - %s\n", task);

> however, the debugging output that you get is pretty ugly.

>> >   Also, a general question: are both nlm() and optim() going to
>> > be around indefinitely?  Should I be using one or the other?

>   Well, my question was more whether one was preferred or not ... I did
> see a comment in some NEWS file at some point that a built-in function had
> been switched to optim() and so should converge more often.

>   At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
> measure) with -ffloat-store.  The negative parameter jumps went away,
> but I can still provoke optim() to hang with the right (not uncommon)
> choice of bootstrap values.  Adding what I thought were reasonable
> parscale values makes my code hang in different places [i.e. the
> particular values that I give below are no longer a problem], but
> doesn't stop it hanging or even reduce the frequency with which it
> hangs.  Perhaps now that I have ffloat-store enabled the values below
> will hang under Solaris as well.

>   Should ffloat-store be enabled in general for compilation on Linux
> boxes?

I am not sure it should.  We try to be as defensive about compiler flags
as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
I'd prefer modifying the code if possible ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:04:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:04:07 +0200
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 16:31:21 +0200 (CEST)"
References: <200009281712.TAA20426@pubhealth.ku.dk> <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu> <14809.60857.12878.62820@mithrandir.hornik.net>
Message-ID: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >   Should ffloat-store be enabled in general for compilation on Linux
> > boxes?
> 
> I am not sure it should.  We try to be as defensive about compiler flags
> as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> I'd prefer modifying the code if possible ...

It definitely shouldn't... Basically what it does is to defeat the
"guard digits" that are used in Intel FPUs (internally using 10 bytes
rather than 8 for doubles). While there are some rare cases where this
messes up the "endgame" of numerical algorithms, it increases overall
numerical accuracy. Also, storing all floating-point values off-chip
causes a substantial decrease in performance.

In the case(-s ?) I've seen, a routine was trying too hard to squeeze
the last bit of precision out of a termination criterion.

Optimization is another likely culprit for this kind of trouble, so
perhaps one should try turning it off for this code?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Tue Oct  3 16:29:09 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (Emmanuel Charpentier)
Date: Tue, 03 Oct 2000 17:29:09 +0200
Subject: [Rd] Bug in RODBC ?
Message-ID: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>

Dear lists,

It seems that RODBC has a problem : when reading through ODBC from an Access
table with missing values, *character* missing values are (correctly) reported
as NA factor values. *Numeric* values, however, retain the value of the same
variable in the previous row.

My setup : R 1.1.1 under Win95, RODBC as compiled with the R Win CRAN
distribution, MS Access 97.

I just discovered this, and had no time to explore. I will try to debug this,
but my knowledge of the ODBC internals and gizzards being almost non-existent,
any clue from you would help me tremendously.

Is there a formal mechanism for bug reports ? If so, should I submit one ?

Sincerely yours,

					Emmanuel Charpentier
--
Emmanuel Charpentier			Tel :		+33-01 40 27 35 98
Secrétariat scientifique du CEDIT	Fax :		+33-01 40 27 55 65
Direction de la Politique Médicale // Assistance Publique - Hôpitaux de Paris
3, Avenue Victoria // F-75004 Paris /// France
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct  3 16:40:47 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 3 Oct 2000 17:40:47 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200009292118.XAA02892@pubhealth.ku.dk>
References: <200009292118.XAA02892@pubhealth.ku.dk>
Message-ID: <14809.65023.834763.292861@mithrandir.hornik.net>

>>>>> cberry  writes:

> examples:

> 1) Fails to report that components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component zap: Mean relative  difference: 1


> 2) Incorrectly asserts all are equal when components 2 and 3 differ

>> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
> [1] TRUE

> 3) Removing named component reveals differences:

>> all.equal(list(1,2,3,1),list(1,3,4,1))
> [1] "Component 2: Mean relative  difference: 0.5"      
> [2] "Component 3: Mean relative  difference: 0.3333333"

> 4) Unequal first component reveals differences

>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
> [1] "Component : Mean relative  difference: 0.5"
> [2] "Component : Mean relative  difference: 0.5"
> [3] "Component : Mean relative  difference: 0.5"
>> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"
>> 

> 5) Second component IS equal, but:

>> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
> [1] "Component : Mean relative  difference: 0.5" 
> [2] "Component : Mean relative  difference: 0.5" 
> [3] "Component : Mean relative  difference: 0.5" 
> [4] "Component zap: Mean relative  difference: 1"

> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = June
>  day = 15
>  language = R

> Search Path:
>  .GlobalEnv, Autoloads, package:base

> Chuck Berry

I think the above happens because all.equal.list() is broken.  The fix
is not entirely clear, because I am not sure what we really want.

Anyway, in all of the above examples we compare lists which are named in
the sense that names() is not NULL, but not ``fully'' named in the sense
that any(nchar(names()) == NULL) is TRUE.  In this case, iseq gets set
to nt[c.in.t] which in the above example gives

Browse[1]> nt[c.in.t]
[1] ""    ""    ""    "zap"

Hence in the for(i in iseq) loop we do three comparisons of the first
component, due to subscripting with "".

The obvious idea is that we must use positional indices where we do not
have named ones.

Now for the problem I see in the current logic.  We currently do

   if both lists are named (at least partially) then ... else fi

Maybe we should change this as follows: if either of the two lists has
names, work though the named components.  Warn about the ones not
present in both.  Compare the ones present in both.  Then get rid of all
named components and compare what is left in positional order.

As I said, I am not sure that this is really what we want.

Comments?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 16:46:35 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 17:46:35 +0200
Subject: [Rd] Bug in RODBC ?
In-Reply-To: Emmanuel Charpentier's message of "Tue, 03 Oct 2000 17:29:09 +0200"
References: <39D9FB45.AAD289B1@sap.ap-hop-paris.fr>
Message-ID: <x24s2uudus.fsf@blueberry.kubism.ku.dk>

Emmanuel Charpentier <emmanuel.charpentier@sap.ap-hop-paris.fr> writes:

> Is there a formal mechanism for bug reports ? If so, should I submit one ?

Well, there's a slot for "add-ons" in the R bug repository, and that's
where we put reports that pertain to packages. However, the core group
does not take responsibility for fixing packages, and there's no way
of ensuring that package-writers even scan the repository for "their"
bugs. So a safer way would seem to be to contact the author directly.
That'll be Michael Lapsley <mlapsley@sthelier.sghms.ac.uk> according
to the CRAN entry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  3 16:45:37 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <x2aecmuftk.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10010031125570.30418-100000@bolker.zoo.ufl.edu>


  Different day, more or less the same story -- turning off optimization
(and leaving out -ffloat-store) leads to hanging in different places, but
not any fewer hanging cases out of 1000 bootstrap samples.  I could try
the no optimization/-ffloat-store combination, but I strongly suspect the
results would be the same.  (As I mentioned before, I also get hanging in
different places with and without adding parscale to the optim() control
list.)
  These aren't pathological samples, as far as I can tell.
  I'm afraid that fussing with compiler options isn't going to do it ...
given enough time I might be able to dig into the lbfgsb.c code and figure
out what ABNORMAL_TERMINATION_IN_LNSRCH means and (at least) how to modify
the iteration counter so that optim() bails out when it gets into this
kind of loop rather than looping indefinitely.
  On the other hand, I might choose to work on adapting a different set of
code -- the "nlminb" function in Splus5 appears to be based on a different
set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
particular reasons for using a different algorithm here.

  I managed to strip down the full code that I use for doing the
bootstraps to about 58 lines (and I removed the embarrassing "<<-"
constructs), so that it if anyone wants to work on this they don't have to
come back to me for particular examples that hang for a particular
platform/set of compiler options/etc..  (It's still not pretty.)

  Ben Bolker

# Stripped-down file to find hanging optim() 

total <- rep(c(100,150,200,300,500,900),rep(2,6))
pred <- c(83,73,22,47,53,31,56,83,30,73,44,91)

nllfun2g.boot <- function(q,debug=FALSE,data.pred,data.total) {
  N1 <- q[1]
  N2 <- q[2]
  G <- q[3]
  maxval <- 1e8
  L <- cfunc2(data.total,N1,N2,G)
  r <- -sum(dbinom(data.pred, data.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}

cfunc2 <- function(input,N1,N2,G=1.0,debug=FALSE){
  if (debug)cat(c(N1,N2,G),"\n")
  pmin(1,1/((1+((input - N1)/N2))^G))
}

fuzz <- 0.001

do.boot <- function(tot=1000,seed=101) {
  bootmat <- matrix(nrow = tot, ncol = 5)
  set.seed(seed)
  i <- 1
  while (i<=tot) {
    print(i)
    boot.ind <- sample(1:length(pred), rep = TRUE)
    boot.pred <- pred[boot.ind]  ## kluge!
    boot.total <- total[boot.ind]
    n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
                   lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
                   method="L-BFGS-B",control=list(trace=FALSE,
                                       parscale=c(100,100,1)),
                   data.pred=boot.pred,
                   data.total=boot.total))
     if (is.null(class(n))) {
      bootmat[i,] <- c(n$val,n$par, n$convergence)
      i <- i+1
    }
  }
  bootmat
}

bootmat <- do.boot(5)

## find looping bootstrap sample

find.boot <- function(n,seed=101,cat=FALSE) {
  set.seed(seed)
  for (i in 1:n)
    boot.ind <- sample(1:length(pred), rep = TRUE)
  boot.pred <- pred[boot.ind]  ## kluge!
  boot.total <- total[boot.ind]
  if (cat) {
    cat(paste("boot.pred <- c(",paste(boot.pred,collapse=","),")",sep=""),"\n")
    cat(paste("boot.total <- c(",paste(boot.total,collapse=","),")",sep=""),"\n")
  }
  else list(boot.pred,boot.total)
}

On 3 Oct 2000, Peter Dalgaard BSA wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > >   Should ffloat-store be enabled in general for compilation on Linux
> > > boxes?
> > 
> > I am not sure it should.  We try to be as defensive about compiler flags
> > as possible.  (We use -D__NO_MATH_INLINES because it fixes a >>bug<<.)
> > I'd prefer modifying the code if possible ...
> 
> It definitely shouldn't... Basically what it does is to defeat the
> "guard digits" that are used in Intel FPUs (internally using 10 bytes
> rather than 8 for doubles). While there are some rare cases where this
> messes up the "endgame" of numerical algorithms, it increases overall
> numerical accuracy. Also, storing all floating-point values off-chip
> causes a substantial decrease in performance.
> 
> In the case(-s ?) I've seen, a routine was trying too hard to squeeze
> the last bit of precision out of a termination criterion.
> 
> Optimization is another likely culprit for this kind of trouble, so
> perhaps one should try turning it off for this code?
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 16:51:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 16:51:10 +0100 (BST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200010031551.QAA02391@toucan.stats.ox.ac.uk>

> From: ben@zoo.ufl.edu
> Date: Tue, 3 Oct 2000 11:45:37 -0400 (EDT)

[...]

>   On the other hand, I might choose to work on adapting a different set of
> code -- the "nlminb" function in Splus5 appears to be based on a different
> set of Netlib FORTRAN code (dmnfb,dmngb,dmnhb) -- don't know the
> particular reasons for using a different algorithm here.

1) The one used in optim is later and supposedly better.

2) I do try not to copy S-PLUS (as distinct from S).

3) There are quite a few problems with nlminb too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 17:05:50 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 18:05:50 +0200
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: Kurt Hornik's message of "Tue, 3 Oct 2000 17:40:47 +0200 (CEST)"
References: <200009292118.XAA02892@pubhealth.ku.dk> <14809.65023.834763.292861@mithrandir.hornik.net>
Message-ID: <x21yxxvrj5.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Maybe we should change this as follows: if either of the two lists has
> names, work though the named components.  Warn about the ones not
> present in both.  Compare the ones present in both.  Then get rid of all
> named components and compare what is left in positional order.
> 
> As I said, I am not sure that this is really what we want.
> 
> Comments?

I think you might be right, and also that this is an easy thing to
implement. Then we'd have

all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE

Right?

However, BigBrother has

> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
[1] "Names: 2 string mismatches"
attr(, "continue"):
[1] T

> all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
[1] T

..which does look like a "compatible bug"

Hmm. Maybe one wants positional matching in any case? But then, what
is the named-component extraction about??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct  3 17:26:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 3 Oct 2000 17:26:24 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200010031626.RAA00492@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
components (PR#674)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 03 Oct 2000 18:05:50 +0200
> 
> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
> > Maybe we should change this as follows: if either of the two lists has
> > names, work though the named components.  Warn about the ones not
> > present in both.  Compare the ones present in both.  Then get rid of all
> > named components and compare what is left in positional order.
> > 
> > As I said, I am not sure that this is really what we want.
> > 
> > Comments?
> 
> I think you might be right, and also that this is an easy thing to
> implement. Then we'd have
> 
> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
> 
> Right?

Probably not. Lists do have orderings: they are not sets but generic
vectors.

> However, BigBrother has
> 
> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
> [1] "Names: 2 string mismatches"
> attr(, "continue"):
> [1] T
> 
> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
> [1] T

That's not what current versions of S-PLUS give, as one might hope.

> ..which does look like a "compatible bug"
> 
> Hmm. Maybe one wants positional matching in any case? But then, what
> is the named-component extraction about??

I think that both the names and components should match exactly (the
components recursively).  Unfortunately the named-component extraction
is partial matching (at least, sometimes) so the ordering of the names
always matters.  (There's an S/R difference here I keep forgetting to 
write down. I think it is 

x <- list(aa=1, bb=2)
x["a"]

which gives in S
$aa:
[1] 1
and in R
$"NA"
NULL
so S always partial matches, but R does not always.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 18:09:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 19:09:33 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#681)
Message-ID: <200010031709.TAA02504@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct  3 10:16:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
Message-ID: <200010030916.LAA25138@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "david" == david  <david@orion-10.cs.byu.edu> writes:
    david> When I issue the command: if ( c(2.8,3)[1] < pretty
    david> (c(2.8,3))[1]) print ("problem")

    david> the result is "problem" prints.  I have traced it to bits and
    david> the 2.8 of the returned vector from pretty is slightly larger.
    david> This seems to be due to the conversion to base 10 with the ns
    david> and unit variables in src/appl/pretty.c.

    david> Anyway if I do something like: hist(c(2.8,3)) it fails as well
    david> because it uses pretty.

    david> Thanks for you attention, DavidMcLaughlin@byu.edu

    MM> Thank you for the bug report.  This bug is ``new'' (a bit more than
    MM> a year!) and was introduced when someone fixed another problem in
    MM> pretty.c by adding "1e-5" fuzz a bit too generously hmm,.......
    MM> I'll have a look.

    david> Version: .... R 1.1.1 ...

Ok, I've fixed pretty() for the development version
such that
     p <- pretty(x)
     all(p[1] <= x & x <= p[2])

should be guaranteed (again).

Note however, that this really also changes some "results",
that may be unexpected,
e.g.

    R 1.1.1 :
    ---------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 3 1 2 2 1 1 2 1 1 1

    --------------

    R-devel [to be 1.2.0]:
    ---------------------

    > data(women); (hT <- hist(women$weight, nc= 7, plot = FALSE))[2]

    $counts
     [1] 2 2 2 1 2 1 2 1 1 1

    > 

------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 18:09:58 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 3 Oct 2000 19:09:58 +0200 (MET DST)
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se (PR#682)
Message-ID: <200010031709.TAA02520@pubhealth.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  3 10:57:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2000 11:57:32 +0200
Subject: [Rd] This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)"
References: <200010030916.LAA25138@pubhealth.ku.dk>
Message-ID: <x21yxyw8kz.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> Ok, I've fixed pretty() for the development version
> such that
>      p <- pretty(x)
>      all(p[1] <= x & x <= p[2])
> 
> should be guaranteed (again).

Gulp. I'm pretty(!) sure there was a reason for changing it in the
other direction... [I have a vague recollection of pretty(pretty(x))
!= pretty(x) or something like that] Are we quite sure that it is not
the caller that needs to be a little more lenient in the bounds
checking?

OTOH, it's in code you wrote yourself...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Tue Oct  3 22:26:06 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 3 Oct 2000 14:26:06 -0700
Subject: [Rd] FW: Parse Errors
Message-ID: <MPEHJEGLNPNFGJFOJMKNIEDBCAAA.Don.Wingate@IntelliChem.com>

Earlier I posted the message below to R-announce. Please, let me appologize
for this mistake, it was not intended. The solution was provided by Duncan
Murdoch who passed on a message he recieved from Brian Ripley which informed
me that settimg R_Interactive to 1 changes the default behavor of aborting
on an error.

Thankyou, Don Wingate.


-----Original Message-----
From: Don Wingate [mailto:Don.Wingate@IntelliChem.com]
Sent: Tuesday, October 03, 2000 9:35 AM
To: r-announce@lists.R-project.org
Subject: Parse Errors


Dear R Development Team,

Using Thomas Baier's R Com Server -- or a dll I am building which supports
an evaluate function that is based on Baier's function R_Proxy_evaluate
contained in proxy_impl.c -- when I issue an invalid command to R such as
"plo(x)" the program crashes. There is code in R_Proxy_evaluate to test for
a parse error before actually generating code and issuing the command - He
calls R_Parse1Buffer(&lBuffer,0,&lStatus) and then tests the value of
lStatus for parse error. The trouble is that lStatus == PARSE_OK even though
the command is invalid, so the evaluation continues until eval() is called,
at which point R terminates and crashes the program.  (It does write an
error message to the console first, but crashes after that.)

Is there a way to handle this? The same command can be issued inside
RGui.exe or RTerm.exe with out a problem.

Thankyou, Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 04:40:40 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 11:40:40 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <14809.56971.828581.703850@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>

Hi, In C code called from .Call using the R interface, is it possible to
access the variables R_ColorTable and R_ColorTableSize? I tried 
extern int R_ColorTableSize; 
extern unsigned int R_ColorTable[]; 
extern char *DefaultPalette[]; 

as in Graphics.h but I guess that code doesn't get written into libR ? But
I can access 
extern void hsv2rgb
which is in graphics.c

Any help?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:25:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:25:12 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
In-Reply-To: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
References: <200010031626.RAA00492@toucan.stats.ox.ac.uk>
Message-ID: <14810.52552.433477.593314@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

>> To: Kurt.Hornik@ci.tuwien.ac.at
>> Cc: cberry@tajo.ucsd.edu, r-devel@stat.math.ethz.ch
>> Subject: Re: [Rd] all.equal.list() sometimes fails with unnamed and named 
> components (PR#674)
>> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>> Date: 03 Oct 2000 18:05:50 +0200
>> 
>> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> 
>> > Maybe we should change this as follows: if either of the two lists has
>> > names, work though the named components.  Warn about the ones not
>> > present in both.  Compare the ones present in both.  Then get rid of all
>> > named components and compare what is left in positional order.
>> > 
>> > As I said, I am not sure that this is really what we want.
>> > 
>> > Comments?
>> 
>> I think you might be right, and also that this is an easy thing to
>> implement. Then we'd have
>> 
>> all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) == TRUE
>> 
>> Right?

> Probably not. Lists do have orderings: they are not sets but generic
> vectors.

>> However, BigBrother has
>> 
>> > all.equal(list(a=1,b=2,3,4),list(3,b=2,4,a=1)) 
>> [1] "Names: 2 string mismatches"
>> attr(, "continue"):
>> [1] T
>> 
>> > all.equal(list(a=1,b=2,3,4), list(a=1,b=2,4,3))
>> [1] T

> That's not what current versions of S-PLUS give, as one might hope.

>> ..which does look like a "compatible bug"
>> 
>> Hmm. Maybe one wants positional matching in any case? But then, what
>> is the named-component extraction about??

> I think that both the names and components should match exactly (the
> components recursively).  Unfortunately the named-component extraction
> is partial matching (at least, sometimes) so the ordering of the names
> always matters.  (There's an S/R difference here I keep forgetting to 
> write down. I think it is 

> x <- list(aa=1, bb=2)
> x["a"]

> which gives in S
> $aa:
> [1] 1
> and in R
> $"NA"
> NULL
> so S always partial matches, but R does not always.)

More precisely, we have

R> x[["a"]]
[1] 1
R> x["a"] 
$"NA"
NULL

Does this make sense at all?  Comparing it to

R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
$"NA"
[1] 3

I would think that the x["a"] incorrectly indicates that the list has a
named component "NA" with value NULL ...

What should we do about all.equal.list()?  Should we deal with the named
components first and strip them off, or always go the positional route?
Your comment that lists are generic vectors would indicate that the
second approach is more appropriate ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:27:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:27:02 +0100 (BST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.52552.433477.593314@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Kurt Hornik wrote:

> > I think that both the names and components should match exactly (the
> > components recursively).  Unfortunately the named-component extraction

> > is partial matching (at least, sometimes) so the ordering of the names
> > always matters.  (There's an S/R difference here I keep forgetting to 
> > write down. I think it is 
> 
> > x <- list(aa=1, bb=2)
> > x["a"]
> 
> > which gives in S
> > $aa:
> > [1] 1
> > and in R
> > $"NA"
> > NULL
> > so S always partial matches, but R does not always.)
> 
> More precisely, we have
> 
> R> x[["a"]]
> [1] 1
> R> x["a"] 
> $"NA"
> NULL
> 
> Does this make sense at all?  Comparing it to
> 
> R> x <- list(aa=1, bb=2, "NA"=3)
> R> x["NA"]
> $"NA"
> [1] 3
> 
> I would think that the x["a"] incorrectly indicates that the list has a
> named component "NA" with value NULL ...

Yes, so would I. I think it is a bug in R.

> What should we do about all.equal.list()?  Should we deal with the named
> components first and strip them off, or always go the positional route?
> Your comment that lists are generic vectors would indicate that the
> second approach is more appropriate ...

See the first two lines I've left here. I think it should be positional
matching *and* the names should match too. That is, all.equal.list would
fail if one list had names and other did not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 07:35:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 07:35:34 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041134050.29339-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hi, In C code called from .Call using the R interface, is it possible to
> access the variables R_ColorTable and R_ColorTableSize? I tried 
> extern int R_ColorTableSize; 
> extern unsigned int R_ColorTable[]; 
> extern char *DefaultPalette[]; 
> 
> as in Graphics.h but I guess that code doesn't get written into libR ? But
> I can access 
> extern void hsv2rgb
> which is in graphics.c
> 
> Any help?

Are you doing this on Windows (you don't seem to say)?  If so the comment
in the Makefile

# R.dll exports all global symbols BUT import library (libR.a)
# only (all functions) + (global vars listed in exported-vars))

should answer your problem (add them to a local copy of R.exp and remake
libR.a).  The rationale was to avoid namespace pollution, as you will
need to remake globalvars.h and include that too.  exported-vars should
include all the variables in the public API.

I should point out that Graphics.h (it is capitalized) is not a distributed
header and not supported for use in addons.  We've had discussions about
changing some of that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 07:43:57 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 08:43:57 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
Message-ID: <14810.53677.386845.624289@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>> > I think that both the names and components should match exactly (the
>> > components recursively).  Unfortunately the named-component extraction

>> > is partial matching (at least, sometimes) so the ordering of the names
>> > always matters.  (There's an S/R difference here I keep forgetting to 
>> > write down. I think it is 
>> 
>> > x <- list(aa=1, bb=2)
>> > x["a"]
>> 
>> > which gives in S
>> > $aa:
>> > [1] 1
>> > and in R
>> > $"NA"
>> > NULL
>> > so S always partial matches, but R does not always.)
>> 
>> More precisely, we have
>> 
R> x[["a"]]
>> [1] 1
R> x["a"] 
>> $"NA"
>> NULL
>> 
>> Does this make sense at all?  Comparing it to
>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>> $"NA"
>> [1] 3
>> 
>> I would think that the x["a"] incorrectly indicates that the list has a
>> named component "NA" with value NULL ...

> Yes, so would I. I think it is a bug in R.

Agreed.  Should not be too hard to spot ...

>> What should we do about all.equal.list()?  Should we deal with the named
>> components first and strip them off, or always go the positional route?
>> Your comment that lists are generic vectors would indicate that the
>> second approach is more appropriate ...

> See the first two lines I've left here. I think it should be
> positional matching *and* the names should match too. That is,
> all.equal.list would fail if one list had names and other did not.

Well should it really FAIL?

What would be the precendence of the comparisons?  E.g.,

* compare the lenghts.  If different, only retain the components from 1
to the smaller lenght.

* Go through these.  If they have names, compare the names.  Then
compare the values.

[If both components have the same name but differ in value, the output
would display the name and not the position, right?  I mean something
like
  msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
rather than
  msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
???]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 08:37:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 08:37:02 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040729080.16973-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>

On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:

> I should point out that Graphics.h (it is capitalized) is not a distributed
> header and not supported for use in addons.  We've had discussions about
> changing some of that.

Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
R_ext and does not start with `R', only such headers are exported.

We have talked about exporting some of the graphics functions.  The
problem is the device driver defns, which I at least do not think are
stable enough to export. So the idea that we were exploring was to 
have *DevDesc as an opaque type in the exported header, and only allow
internal code access to its internals.  (If functions using *GPar 
need to be exported, then that would need to be made opaque too.)

Separately, Duncan TL was interested in accessing the driver part for an
addon driver, and I don't think we got too far in resolving that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 09:51:39 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 16:51:39 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010040828090.1246-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>

Hi,
Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
 and the list of export functions would not be portable, would it? Just
some background, I am building an interactive color picker for R, and i
need to be able to Display the colors in the current palette so that they
can be edited. I can do something like 
current.palette<-palette()
.Call("colorpick",current.palette)

However, if there are named colors in the palette I have to do a lot of
dancing around to get it to a list of rgb values. I thought if there was
an easy way, I could avoid rewriting a lot of internal code.

Besides accessing the palette everything works dandy using graphapp. 


Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 4 Oct 2000, Prof Brian Ripley wrote:

> On Wed, 4 Oct 2000, Prof Brian D Ripley wrote:
> 
> > I should point out that Graphics.h (it is capitalized) is not a distributed
> > header and not supported for use in addons.  We've had discussions about
> > changing some of that.
> 
> Sorry, I garbled that.  What I meant to say is that Graphics.h is not in
> R_ext and does not start with `R', only such headers are exported.
> 
> We have talked about exporting some of the graphics functions.  The
> problem is the device driver defns, which I at least do not think are
> stable enough to export. So the idea that we were exploring was to 
> have *DevDesc as an opaque type in the exported header, and only allow
> internal code access to its internals.  (If functions using *GPar 
> need to be exported, then that would need to be made opaque too.)
> 
> Separately, Duncan TL was interested in accessing the driver part for an
> addon driver, and I don't think we got too far in resolving that.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 10:16:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 10:16:28 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041640330.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Thanks. I am working in windows, and adding R_ColorTable to globalvar.h
>  and the list of export functions would not be portable, would it? Just

You only need it to compile your DLL, and distributing that would be
portable (to Windows). As I said, using anything out of
Graphics.h is not guaranteed to work.  If we make part of Graphics.h
public then the variables will go in exported-vars.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Oct  4 10:51:49 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 4 Oct 2000 17:51:49 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041013230.1373-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>

Hmmm, did I miss something? I added 
R_ColorTable 
R_ColorTableSize 
to R.exp
and rebuilt libR.a then i added
                                                                               
#define R_ColorTableSize (*_imp__R_ColorTableSize) 
#define R_ColorTable(*_imp__R_ColorTable)
                                                                               
to globalvar.h
                                                                               
make pkg-colortools
                                                                               
results in   

gcc -Id:/Nicholas/rw1011/src/include -include
d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
-Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
colorpick.c: In function `create_dialog': colorpick.c:175:
`_imp__R_ColorTableSize' undeclared (first use in this function )
colorpick.c:175: (Each undeclared identifier is reported only once
colorpick.c:175: for each function it appears in.) colorpick.c:176:
`_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
At top level: colorpick.c:47: warning: `alts' defined but not used
make[2]: *** [colorpick.o] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 11:52:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 11:52:56 +0100 (BST)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.21.0010041749170.11956-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>

On Wed, 4 Oct 2000, Nicholas Lewin-Koh wrote:

> Hmmm, did I miss something? I added 

Given that this works for the normal system global vars, you must have!

> R_ColorTable 
> R_ColorTableSize 
> to R.exp
> and rebuilt libR.a then i added
>                                                                                
> #define R_ColorTableSize (*_imp__R_ColorTableSize) 
> #define R_ColorTable(*_imp__R_ColorTable)
>                                                                                
> to globalvar.h

You could just re-build globalvar.h.

>                                                                                
> make pkg-colortools
>                                                                                
> results in   
> 
> gcc -Id:/Nicholas/rw1011/src/include -include
> d:/Nicholas/rw1011/src/include/ globalvar.h -Wall -O2 
> -Id:/Nicholas/rw1011/src/gnuwin32/graphapp -c colorpick .c -o colorpick.o
> colorpick.c: In function `create_dialog': colorpick.c:175:
> `_imp__R_ColorTableSize' undeclared (first use in this function )
> colorpick.c:175: (Each undeclared identifier is reported only once
> colorpick.c:175: for each function it appears in.) colorpick.c:176:
> `_imp__R_ColorTable' undeclared (first use in this function) colorpick.c:
> At top level: colorpick.c:47: warning: `alts' defined but not used
> make[2]: *** [colorpick.o] Error 1
> 

Did you declare  R_ColorTableSize and R_ColorTable?  If so, the define
should change them to declarations of _imp__R_ColorTableSize etc.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Wed Oct  4 12:59:14 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041159.NAA13214@pubhealth.ku.dk>

The following seems very strange:
> lgamma(-0.04)
[1] 3.243307
> gamma(-0.04)
[1] -25.61830
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct  4 13:16:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 4 Oct 2000 14:16:28 +0200 (CEST)
Subject: [Rd] gamma and lgamma functions (PR#684)
In-Reply-To: <200010041159.NAA13214@pubhealth.ku.dk>
References: <200010041159.NAA13214@pubhealth.ku.dk>
Message-ID: <14811.8092.895797.680324@mithrandir.hornik.net>

>>>>> james lindsey writes:

> The following seems very strange:
>> lgamma(-0.04)
> [1] 3.243307
>> gamma(-0.04)
> [1] -25.61830

I don't think so:

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
     gamma function.

Notice the ABSOULUTE VALUE.

R> log(abs(gamma(-0.04)))
[1] 3.243307

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 13:12:12 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 4 Oct 2000 14:12:12 +0200 (MET DST)
Subject: [Rd] gamma and lgamma functions (PR#684)
Message-ID: <200010041212.OAA14250@pubhealth.ku.dk>

> From: james.lindsey@luc.ac.be
> Date: Wed, 4 Oct 2000 13:59:14 +0200 (MET DST)
> 
> The following seems very strange:
> > lgamma(-0.04)
> [1] 3.243307
> > gamma(-0.04)
> [1] -25.61830
>   Jim

It is as documented, though: ?lgamma gives

     The functions `gamma' and `lgamma' return the gamma function
     Gamma(x) and the natural logarithm of the absolute value of the
                                               ^^^^^^^^^^^^^^^^^
     gamma function.

and log(25.61830) = 3.243307.

It's not S-compatible, I grant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 14:39:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 15:39:27 +0200
Subject: [Rd] Hershey Fonts, PNG, SVG, .. graphics formats
Message-ID: <14811.13071.19421.380883@gargle.gargle.HOWL>

I wonder if we couldn't just use the PNG , SVG, support from the
  GNU plotutils
from which we already have the Hershey scalable vector fonts [-> help(Hershey)]
The new plotutils (July 2000) do support these (and will probably even
better in the future, i.e., we can build on others people free software.

Paul [who built "Hershey" into R], do you think this path is worth pursuing?

>From  http://www.gnu.org/software/plotutils/plotutils.html

>> The GNU plotutils package contains software for both programmers and
>> technical users. Its centerpiece is libplot, a powerful C/C++ function
>> library for exporting 2-D vector graphics in many file formats, both vector
>> and raster. It can also do vector graphics animations.
>> 
>> libplot is device-independent in the sense that its API (application
>> programming interface) does not depend on the type of graphics file to be
>> exported.
>> 
>> Besides libplot, the package contains command-line programs for plotting
>> scientific data. Many of them use libplot to export graphics.
>> 
>> The current version is 2.4.1, released July 2000. It can be installed on
>> GNU/Linux, FreeBSD, and Unix systems.
>> 
>> 
>>        GNU libplot, and applications built on it, can now export graphics
>>        files in SVG format. SVG (Scalable Vector Graphics) is a new,
>>        XML-based format for Web graphics, which is being standardized by
>>        the Graphics Activity of the W3 Consortium.
>> 
>>        PNG format can now be exported too!
>> 
>>        The libplot API has been extended to support the drawing of
>>        Postscript-style compound paths.
>> 
>> The plotutils package comes with a 175-page manual. Here is an older
>> version of the manual.
>> 
>> The package is free software. Its source code is distributed as a gzipped
>> tar file, 3.3 megabytes in size. Here is how you can get it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 16:04:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 11:04:27 -0400
Subject: [Rd] R 1.2 build
Message-ID: <39DB46FB.A92CCDC5@bank-banque-canada.ca>

I've been trying to build a bundle with the R-devel snapshot from
yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
trying to do this yet.)

It is failing with the message
tar : /dev/rmt/0 : Permission denied

It happens after "removing junk files" and just after the message
"building dse_2000.9-1.tar.gz"

It looks to be coming from the line in the build script
  system("tar ....
but I don't read perl very well.

(Using Solaris.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 16:22:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 17:22:48 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 11:04:27 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I've been trying to build a bundle with the R-devel snapshot from
> yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> trying to do this yet.)

On the contrary, this kind of info is very useful.

> It is failing with the message
> tar : /dev/rmt/0 : Permission denied
> 
> It happens after "removing junk files" and just after the message
> "building dse_2000.9-1.tar.gz"
> 
> It looks to be coming from the line in the build script
>   system("tar ....
> but I don't read perl very well.
> 
> (Using Solaris.)

I think the problem is that older versions of tar wants un-hyphened
options i.e. 

tar chXf $exclude $startdir/$filename $pkgname

rather than
 
tar -c -h -X $exclude -f $startdir/$filename $pkgname


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct  4 16:25:27 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 4 Oct 2000 17:25:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca>
Message-ID: <14811.19431.443730.163540@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've been trying to build a bundle 

You are talking about 

     R CMD build ....

right? It would help next time if you give these details..

    PaulG> with the R-devel snapshot from yesterday. (Yes I know it is
    PaulG> unstable and just tell me if I shouldn't be trying to do this
    PaulG> yet.)

no, it should be ok, AFAIK

    PaulG> It is failing with the message
    PaulG> tar : /dev/rmt/0 : Permission denied

this very much looks like tar
is trying to really work on a tape {"Tape ARchiving"} instead of a 
file.
    PaulG> It happens after "removing junk files" and just after the message
    PaulG> "building dse_2000.9-1.tar.gz"

    PaulG> It looks to be coming from the line in the build script
    PaulG> system("tar ....

more exactly,
           system("tar -c -h -f $startdir/$filename $pkgs");

    PaulG> but I don't read perl very well.

Can you try to find out if the above command works in your shell,
e.g
	tar -c -h -f /tmp/ex.tar  d1 d2

where d1 and d2 must be valid directories ?

    PaulG> (Using Solaris.)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct  4 17:07:46 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 4 Oct 2000 17:07:46 +0100 (BST)
Subject: [Rd] R 1.2 build
Message-ID: <200010041607.RAA02123@toucan.stats.ox.ac.uk>


> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 04 Oct 2000 17:22:48 +0200
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I've been trying to build a bundle with the R-devel snapshot from
> > yesterday. (Yes I know it is unstable and just tell me if I shouldn't be
> > trying to do this yet.)
> 
> On the contrary, this kind of info is very useful.
> 
> > It is failing with the message
> > tar : /dev/rmt/0 : Permission denied
> > 
> > It happens after "removing junk files" and just after the message
> > "building dse_2000.9-1.tar.gz"
> > 
> > It looks to be coming from the line in the build script
> >   system("tar ....
> > but I don't read perl very well.
> > 
> > (Using Solaris.)
> 
> I think the problem is that older versions of tar wants un-hyphened
> options i.e. 
> 
> tar chXf $exclude $startdir/$filename $pkgname
> 
> rather than
>  
> tar -c -h -X $exclude -f $startdir/$filename $pkgname

Um.  Real tar (the AT&T based one such as that on Solaris 2.7) needs
chXf. GNU tar is a rather different animal.

This is chiefly my fault: I modified this to work on Solaris, but tested
it on a machine where tar is GNU tar ....

You will note that build is not finished yet:

    ### !!! Missing: check & rebuild various indices !!!

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 17:57:19 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 12:57:19 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB616F.65A74589@bank-banque-canada.ca>

>I think the problem is that older versions of tar wants un-hyphened
>options i.e.

>tar chXf $exclude $startdir/$filename $pkgname

It works with
tar chf  $startdir/$filename $pkgname

I didn't try your example because I'm fairly sure $exclude should not
immediately follow f, but I'm not sure what the proper syntax should be.
(The man page is not very helpful.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  4 18:53:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2000 19:53:27 +0200
Subject: [Rd] R 1.2 build
In-Reply-To: Paul Gilbert's message of "Wed, 04 Oct 2000 12:57:19 -0400"
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca>
Message-ID: <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >tar chXf $exclude $startdir/$filename $pkgname
> 
> It works with
> tar chf  $startdir/$filename $pkgname
> 
> I didn't try your example because I'm fairly sure $exclude should not
> immediately follow f, but I'm not sure what the proper syntax should be.
> (The man page is not very helpful.)

I think it is OK as written - arguments to X and f modifiers in same
order as in the chXf. But if it bothers you, try 

tar chfX $startdir/$filename $exclude $pkgname

Lessee...:

[pd@arnold pd]$ echo junk/y > xfile
[pd@arnold pd]$ tar cvhXf xfile junk.tar junk
a junk/ 0K
a junk/y excluded
a junk/y.crypt 0K
a junk/y2 0K
a junk/R-intro/ 0K
a junk/R-intro/CVS/ 0K
a junk/R-intro/CVS/Repository 1K
....

Yup. Works.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct  4 20:14:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 04 Oct 2000 15:14:37 -0400
Subject: [Rd] R 1.2 build
References: <39DB46FB.A92CCDC5@bank-banque-canada.ca> <x21yxwwrzr.fsf@blueberry.kubism.ku.dk> <39DB616F.65A74589@bank-banque-canada.ca> <x2n1gkqyqw.fsf@blueberry.kubism.ku.dk>
Message-ID: <39DB819C.69A65F44@bank-banque-canada.ca>

>tar  chXf  $exclude $startdir/$filename $pkgname

Yes it works, sorry for doubting.

One might consider putting "core" in the list of files to exclude.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct  4 21:25:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Oct 2000 21:25:31 +0100 (BST)
Subject: [Rd] R 1.2 build
In-Reply-To: <39DB819C.69A65F44@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>

On Wed, 4 Oct 2000, Paul Gilbert wrote:

> >tar  chXf  $exclude $startdir/$filename $pkgname
> 
> Yes it works, sorry for doubting.
> 
> One might consider putting "core" in the list of files to exclude.

There's also a list of files to delete, which seems an appropriate action
for a core file.  However, I would surprised to find core in the source
files for a package, as that implies that some executable had been run
within the package sources.  Assuming you had a core file there, do you
know how it happened?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Oct  5 08:50:28 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 5 Oct 2000 15:50:28 +0800 (GMT-8)
Subject: [Rd] R_ColorTable
In-Reply-To: <Pine.GSO.4.05.10010041149480.1536-100000@toucan.stats>
Message-ID: <Pine.GSO.4.21.0010051548520.27447-100000@sununx.comp.nus.edu.sg>

Hi,
Thank you for all the help. i figured out what I was missing, I forgot to
declare the variables in my code. Duh. Now its working great.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medonline@hotmail.com  Thu Oct  5 14:06:15 2000
From: medonline@hotmail.com (medonline@hotmail.com)
Date: Thu, 05 Oct 2000 06:06:15 -0700
Subject: [Rd] The best Viagra prices are here.
Message-ID: <0000547f3c9f$00006c7c$00005a0b@>

<HTML>
<BODY>

<FONT face=3D"MS Sans Serif">
<FONT size=3D3> Viagra is scientifically proven to help/prevent impotence.=
<BR>
You've seen it everywhere:  ABC, NBC, CBS, and FOX.<BR>
Viagra is for everyone.  Aged 20-70?  Viagra can help.<BR>
Now you can get Viagra via Online Prescription.  <BR>
You can only get it at E-Meds.  See the link below.<BR>
There is no time like the present.  See what Viagra can do<BR>
for you.  You will NOT be dissapointed.  Everything you've <BR>
heard is true.  Give it a try, and you'll see. <BR>
<BR>
<BR>
<B> The E-Meds Online Pharmacy has it all.<B>0   Best of all, we have<BR>
Viagra.  The news is real; the rumors are true.  Viagra is the<BR>
physician-approved impotence solution for the new millenium. No<BR>
matter what your age, race, or age, Viagra can benefit your sex <BR>
life.  Give it a try; see what everyone is talking about. Need <BR>
anything else?  Claritin, Zyban, Propecia, Xenical?  We have it.
<FONT size=3D2> <BR>
<BR>
<FONT color=3D"l=01"><U><B> http://www.multirx.com/viagraone.htm<BR>
<FONT color=3D"#0000FF"><U>none<B>0 <a href=3D"http://www.multirx.com/viag=
raone.htm">Click here for Viagra.</a><BR>
<BR>
<BR>
<BR>
<BR>
This  message is sent in compliance of the new e-mail bill: SECTION 301. <=
BR>
Per Section 301, Paragraph (a)(2)(C) of S. 1618, further transmissions <BR=
>
to you by the sender of this email may be stopped at no cost to you.<BR>
Prevent bulk emailers from mailing you in the future.  Simply reply to thi=
s<BR>
email with your email address in the body, and you will be removed.<BR>
<BR>
</FONT></FONT></FONT><p><p><p><p><p><p><p><p><p><p>






<p><FONT face=3D"MS Sans Serif"><p><FONT size=3D3> Viagra is scientificall=
y proven to help/prevent impotence.<BR><p>You've seen it everywhere:  ABC,=
 NBC, CBS, and FOX.<BR><p>Viagra is for everyone.  Aged 20-70?  Viagra can=
 help.<BR><p>Now you can get Viagra via Online Prescription.  <BR><p>You c=
an only get it at E-Meds.  See the link below.<BR><p>There is no time like=
 the present.  See what Viagra can do<BR><p>for you.  You will NOT be diss=
apointed.  Everything you've <BR><p><p><p><p><p><p></BODY></HTML>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct  5 15:27:12 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 05 Oct 2000 10:27:12 -0400
Subject: [Rd] R 1.2 build
References: <Pine.GSO.4.05.10010042106080.18311-100000@auk.stats>
Message-ID: <39DC8FC0.DA1459D2@bank-banque-canada.ca>

>However, I would surprised to find core in the source
>files for a package, as that implies that some executable had been run
>within the package sources.  Assuming you had a core file there, do you
>know how it happened?

I'm not certain, but I think what happened was that the first time I ran R CMD
check with R 1.2  (via my Makefile) I did not get things quite right and it ran
in my source tree rather than where I intended it to run.  (There are some
changes from 1.1.) I am getting a segfault with one example, but I haven't
tracked it down yet.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From netnews@newbeirut.com  Fri Oct  6 18:44:00 2000
From: netnews@newbeirut.com (Sayfco)
Date: Fri, 06 Oct 2000 19:44:00 +0200
Subject: [Rd] Your Dream House starting at $53000
Message-ID: <m13hJ67-002ha2C@phoenix.inco.com.lb>

This is a Multipart MIME message. Since your mail reader
does not understand this format, some or all of
this message may not be legible.

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_002_23068078_1184.3_23069265.3000488"


------=_NextPart_001_002_23068078_1184.3_23069265.3000488
Content-Type: text/html;
	charset=iso-8859-1
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Elie waked">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (Win98; I) [Netscape]">
   <title>index</title>
</head>
<body>
&nbsp;
<table BORDER COLS=1 WIDTH="100%" >
<tr>
<td BGCOLOR="#FFCC00">
<center><b>Distribute this message to your friends or display it on your
company board</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFECE0">
<center><a href="http://www.sayfco.com"><img SRC="cid:1184.3.23068085@ads12.jpg" BORDER=0 height=156 width=500></a>
<br><b><a href="http://www.sayfco.com">www.sayfco.com</a></b>
<br><b>E-mail:<a href="mailto:mail@sayfco.com">mail@sayfco.com</a></b>
<br><b>SWIMMING POOL, PARKING, GREEN SPACES &amp; 360 PANORAMIC VIEW.</b>
<br><b>BEIRUT - LEBANON&nbsp;</b></center>
</td>
</tr>

<tr>
<td BGCOLOR="#FFCC00">
<center>
<p><b>Do you have&nbsp; Product, Service, Offer, Message, Mail, Invitation,
etc., to distribute ?&nbsp;</b>
<br><b>We have the best way to send it to you via email to :&nbsp;</b>
<br><b>74'000 Lebanese Emails (Companies amd Individuals) for 75$ Only</b>
<br><b>Just call anytime at&nbsp; 03 213063&nbsp; Customer Support&nbsp;</b>
<br><b>&nbsp;Copyright &copy; 2000 Over Net Company for services. All rights
reserved.</b></center>
</td>
</tr>

<tr>
<td><font size=-1>To unsubscribe, reply with word "remove" into the subject
line</font></td>
</tr>
</table>

</body>
</html>

------=_NextPart_001_002_23068078_1184.3_23069265.3000488--

------=_NextPart_000_001_23068078_1184.3_23069265.3000488
Content-Type: image/jpeg; name="ads12.jpg"
Content-Transfer-Encoding: base64
Content-ID: <1184.3.23068085@ads12.jpg>

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

------=_NextPart_000_001_23068078_1184.3_23069265.3000488--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Oct  6 01:58:42 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 6 Oct 2000 13:58:42 +1300
Subject: [Rd] Re: Hershey Fonts, PNG, SVG, .. graphics formats
References: <14811.13071.19421.380883@gargle.gargle.HOWL>
Message-ID: <004501c02f30$926879b0$175dd882@stat.auckland.ac.nz>

Hi


> I wonder if we couldn't just use the PNG , SVG, support from the
>   GNU plotutils
> from which we already have the Hershey scalable vector fonts [->
help(Hershey)]
> The new plotutils (July 2000) do support these (and will probably even
> better in the future, i.e., we can build on others people free software.
>
> Paul [who built "Hershey" into R], do you think this path is worth
pursuing?


What I wanted to do with the Hershey vector fonts was JUST grab all of the
vector font database information and all of the stuff that converted a
character string into a set of line-drawing commands (using the vector font
database).  This proved possible for the vector fonts, but that was because
I was able to find a fairly clear interface between the vector font code and
the device-handling code.  This meant I was able replace calls to the GNU
plotutils devices with calls to R graphics devices without (I think) too
much horribleness.

I was deliberately not trying to figure out how the GNU plotutils device
code worked, but the vague impression I obtained was that it was quite
complicated and differed quite a bit from R's concept of a device.

Now, without having looked at the PNG/SVG code, my guess would be that it
might be much more tightly bound to GNU's device-handling code - i.e.,
probably harder to only extract the PNG/SVG bits we want.

On a more positive note ... in general, the GNU plotutils code (at least the
bits I saw) impressed me.  It seemed well-documented, well-organised, and
VERY thorough.  Mad though it may sound, perhaps we might want to adopt ALL
of their device-handling code rather than trying to just get the PNG/SVG
bits (maybe one way to make our postscript woes disappear :)

I _suspect_ that a significant amount of time and effort would be involved
in trying to understand the PNG/SVG code (or all of the device-handling
code).  However, I also suspect that it would be worth the effort because
from what I've seen there's a lot of really good stuff in there.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  6 07:41:40 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 6 Oct 2000 08:41:40 +0200
Subject: [Rd] spam .. improving my filters
In-Reply-To: <m13hJ67-002ha2C@phoenix.inco.com.lb>
References: <m13hJ67-002ha2C@phoenix.inco.com.lb>
Message-ID: <14813.29732.68205.736536@gargle.gargle.HOWL>

I'm sorry for the recent spam
to this list (btw, I've no idea why R-devel was targeted more than R-help).

I'm constantly improving the anti-spam filters,
but it's delicate balance between errors of the first and second kind:
You all suffer from the first, I do additionally suffer from the second
kind:  Having to manually approve false bounces...

BTW:  Changing the list automation from majordomo to mailman 
      is coming quite close.
      I plan to migrate  R-devel as one of the first mailing lists, since I
      suppose that you are somewhat more sophisticated computer users than
      subscribers to other lists I manage.

Your list maintainer:

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  6 13:07:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 6 Oct 2000 14:07:48 +0200 (CEST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named
 components (PR#674)
In-Reply-To: <14810.53677.386845.624289@mithrandir.hornik.net>
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net>
Message-ID: <14813.49300.795765.338583@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Prof Brian D Ripley writes:
>> On Wed, 4 Oct 2000, Kurt Hornik wrote:
>>> > I think that both the names and components should match exactly (the
>>> > components recursively).  Unfortunately the named-component extraction

>>> > is partial matching (at least, sometimes) so the ordering of the names
>>> > always matters.  (There's an S/R difference here I keep forgetting to 
>>> > write down. I think it is 
>>> 
>>> > x <- list(aa=1, bb=2)
>>> > x["a"]
>>> 
>>> > which gives in S
>>> > $aa:
>>> > [1] 1
>>> > and in R
>>> > $"NA"
>>> > NULL
>>> > so S always partial matches, but R does not always.)
>>> 
>>> More precisely, we have
>>> 
R> x[["a"]]
>>> [1] 1
R> x["a"] 
>>> $"NA"
>>> NULL
>>> 
>>> Does this make sense at all?  Comparing it to
>>> 
R> x <- list(aa=1, bb=2, "NA"=3)
R> x["NA"]
>>> $"NA"
>>> [1] 3
>>> 
>>> I would think that the x["a"] incorrectly indicates that the list has a
>>> named component "NA" with value NULL ...

>> Yes, so would I. I think it is a bug in R.

> Agreed.  Should not be too hard to spot ...

>>> What should we do about all.equal.list()?  Should we deal with the named
>>> components first and strip them off, or always go the positional route?
>>> Your comment that lists are generic vectors would indicate that the
>>> second approach is more appropriate ...

>> See the first two lines I've left here. I think it should be
>> positional matching *and* the names should match too. That is,
>> all.equal.list would fail if one list had names and other did not.

> Well should it really FAIL?

> What would be the precendence of the comparisons?  E.g.,

> * compare the lenghts.  If different, only retain the components from 1
> to the smaller lenght.

> * Go through these.  If they have names, compare the names.  Then
> compare the values.

> [If both components have the same name but differ in value, the output
> would display the name and not the position, right?  I mean something
> like
>   msg <- c(msg, paste("Component ", nc[i], ": ", mi, sep=""))
> rather than
>   msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
> ???]

The more I think about it, the less I am sure about what we really want.

In discussions with Fritz yesterday we noticed that quite often lists
are in fact used as hash tables; typically this is what is meant if all
components of the list have names.  Fritz suggested an option
	hash.order = FALSE
to all.equal.list() through which one could control the interpretation.
This option could also be passed on recursively.

I am not sure about this.  There is a difference between `typically' and
always.  Maybe we should have hash tables which can be implemented as
lists with class "hashtable".  This would be clean, but a substantial
change (e.g., most modelling functions in fact return hash tables in the
above sense) and I am not sure whether this is worth the effort.

We can fix the problems in the bug report by deleting the code in
all.equal.list() which compares the components.  That has the effect
that named components are referred to as positional even if their names
agree, and we should decide whether we want this or not.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Oct  6 15:35:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Oct 2000 10:35:49 -0400
Subject: [Rd] all.equal.list() sometimes fails with unnamed and
 namedcomponents (PR#674)
References: <14810.52552.433477.593314@mithrandir.hornik.net>
 <Pine.GSO.4.05.10010040724190.16973-100000@auk.stats>
 <14810.53677.386845.624289@mithrandir.hornik.net> <14813.49300.795765.338583@mithrandir.hornik.net>
Message-ID: <39DDE345.16666166@bank-banque-canada.ca>

>We can fix the problems in the bug report by deleting the code in
>all.equal.list() which compares the components.  That has the effect
>that named components are referred to as positional even if their names
>agree, and we should decide whether we want this or not.

Apologies if I've missed something, as I have not been following this discussion
very closely. However, this effect does not seem very good to me. I often build
lists by appending named components, and  delete named components by setting
them to NULL. I don't think it should be necessary to construct objects with the
named components in the same order for the results to be equal.

Of course, I start from the position that all lists should be named lists and
name truncation should be banned - and then realize this is unrealistic given
the current state of affairs. Perhaps we need a new object called "goodlist"
(rather than "hashtable").

One of the issues here is the difference between what interactive users want for
shortcuts and what package writers want for consistence. If list objects are
always accessed by functions (constructors, etc.), rather than having their
elements tweaked by users, then one tends to lean very heavily toward the
hashtable approach.

My 2 cents worth,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct  7 03:09:00 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 7 Oct 2000 04:09:00 +0200 (MET DST)
Subject: [Rd] documentation bug in readline() (PR#685)
Message-ID: <200010070209.EAA12979@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi -

the documentation for readline() should reflect the fact that the
prompt= arg is truncated to CONSOLE_PROMPT_SIZE chars, currently defined 
as 32 in src/main/scan.c.  assuming this is the correct behavior, an
updated copy of readline.Rd is attached.

--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, file:/home/peter/R/Home.RData, package:local,
package:distns, Autoloads, package:base
--------------FBFC021C053198B1E0FE0848
Content-Type: text/plain; charset=us-ascii;
 name="readline.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="readline.Rd"

\name{readline}
\title{Read a Line from the Terminal}
\usage{
readline(prompt="")
}
\alias{readline}
\arguments{
  \item{prompt}{the string printed when prompting the user for input.
  This will be truncated to a maximum allowed length, currently 32 chars.
  Should usually end with a space \code{" "}.}
}
\description{
  \code{readline} reads a line from the terminal, returning it as a
  character string.
}
\examples{
fun <- function() {
  ANSWER <- readline("Are you a satisfied R user? ")
  if (substr(ANSWER, 1, 1) == "n")
    cat("This is impossible.  YOU LIED!\n")
  else
    cat("I knew it.\n")
}
fun()
}
\keyword{utilities}

--------------FBFC021C053198B1E0FE0848--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010070515.HAA31088@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct  9 10:23:33 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 9 Oct 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] cmdscale documentation (PR#687)
Message-ID: <200010090923.LAA22351@pubhealth.ku.dk>

In the value section of "?cmdscale" in the mva library the
returned object is a *matrix* if eig=FALSE, and a list with
components "points" and "eig" if eig=TRUE, rather than always a
list as described.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 10 08:47:55 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 10 Oct 2000 09:47:55 +0200 (MET DST)
Subject: [Rd] Unreliable example in ?layout (PR#688)
Message-ID: <200010100747.JAA03964@pubhealth.ku.dk>

In ?layout values of x and y from the standard gaussian that lie
outside (-3, 3) will occasionally cause an error in hist with
breaks=seq(-3, 3, 0.5).  One reliable solution (not quite as
pretty) would be to use runif instead of rnorm, ie

      x <- runif(50, -1, 1)
      y <- runif(50, -1, 1)
      xhist <- hist(x, breaks=seq(-1,1,0.25), plot=FALSE)
      yhist <- hist(y, breaks=seq(-1,1,0.25), plot=FALSE)
      top <- max(c(xhist$counts, yhist$counts))
      xrange <- c(-1,1)
      yrange <- c(-1,1)

      # and then as before.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 10 17:32:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 10 Oct 2000 18:32:48 +0200 (MET DST)
Subject: [Rd] Documentation problem for ecdf (PR#689)
Message-ID: <200010101632.SAA12520@pubhealth.ku.dk>

Full_Name: Kurt Hornik
Version: 1.2.0
OS: Linux
Submission from: (NULL) (137.208.57.56)


File `ecdf.Rd' contains

\usage{
ecdf(x)
plot(x, verticals = FALSE, col.01line = "gray70", \dots)
}
\arguments{
  \item{x}{numeric vector with the ``observations''.}

This is wrong, because in the plot usage `x' should be an object of class
"stepfun", and in fact the code says

  plot.ecdf <- function(..., verticals = FALSE, col.01line = "gray70") { ... }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 18:08:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 13:08:18 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E34D02.A97EC18E@bank-banque-canada.ca>

I see the default behavior of unlink  with respect to directories is changing in
1.2. This causes me a certain amount of difficulty: since the recursive argument
is not supported in S I will need to start building up my compatibility library
again (which is almost empty now).

Instead of changing unlink's default behavior it might be better to define a new
function (perhaps Sys.rm) with the new default behavior, and possibly even
depreciate unlink.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 10 20:30:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 10 Oct 2000 15:30:32 -0400
Subject: [Rd] unlink in 1.2
Message-ID: <39E36E58.F41A07ED@bank-banque-canada.ca>

>R for Windows:

>unlink deleted files and empty directories in recent versions, only files
>in earlier ones.

>Given the last, the default behaviour of unlink under R is not what you
>claim, so I suppose that your code is not fully R-compatible under 1.1.1?

Actually, I was just going by what R prior to 1.2 does in Solaris (i.e. delete
directories, empty or not) and what the R 1.2 documentation says:

    Note

    Prior to R version 1.2.0 the default on Unix was recursive = TRUE, and on
    Windows wmpty (sic) directories could be deleted.

In any case, the behavior of unlink seems to be inconsistent in various versions

of S and R and on different platforms. In this situation it is very difficult to

program with the function and I have usually found that it is better  to define
a good new function, try to make it consistent across platforms, and depreciate
the old function. I will do at least an S version of that in my compatability
library but I think it would be good for R if it were done in the base. Don't
you think Sys.rm would be a good name?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 10 19:01:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 10 Oct 2000 19:01:05 +0100 (BST)
Subject: [Rd] unlink in 1.2
In-Reply-To: <39E34D02.A97EC18E@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010101839210.27338-100000@auk.stats>

On Tue, 10 Oct 2000, Paul Gilbert wrote:

> I see the default behavior of unlink  with respect to directories is changing in
> 1.2. This causes me a certain amount of difficulty: since the recursive argument
> is not supported in S I will need to start building up my compatibility library
> again (which is almost empty now).
> 
> Instead of changing unlink's default behavior it might be better to define a new
> function (perhaps Sys.rm) with the new default behavior, and possibly even
> depreciate unlink.

I think you have misunderstood what unlink() was and is actually documented
to do. For example:

S-PLUS 3.4:

       Deletes the file represented by x.

with no mention of recursively removing directories.  Only some Unix
versions of S-PLUS 3.x did: no Windows version of S-PLUS ever has.

S-PLUS 5.1:

   unlink will remove files and directories, but only empty directories.
   Use rmdir to remove a directory and everything in it.

(BTW, that's not actually true, but it is what is documented.)

R for Windows:

unlink deleted files and empty directories in recent versions, only files
in earlier ones.

Given the last, the default behaviour of unlink under R is not what you
claim, so I suppose that your code is not fully R-compatible under 1.1.1?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 10:27:59 2000
From: td2mafea@uco.es (td2mafea@uco.es)
Date: Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)
Subject: [Rd] Bug? (PR#690)
Message-ID: <200010110927.LAA18569@pubhealth.ku.dk>

I don´t know if it is a bug, but what's wrong in the folloing (R version
1.1.1, August 15, 2000, under windows 98):
> x<-matrix(nrow=10, ncol=2)
> for (i in 1:10)
+ {
+ x[i][1]<-i
+ x[i][2]<-i^2
+ }
Warning messages:
1: number of items to replace is not a multiple of replacement length
2: number of items to replace is not a multiple of replacement length
3: number of items to replace is not a multiple of replacement length
4: number of items to replace is not a multiple of replacement length
5: number of items to replace is not a multiple of replacement length
6: number of items to replace is not a multiple of replacement length
7: number of items to replace is not a multiple of replacement length
8: number of items to replace is not a multiple of replacement length
9: number of items to replace is not a multiple of replacement length
10: number of items to replace is not a multiple of replacement length

Thanks

Armando Ferreira


----------------------------------------------------------------------------
-------------
Armando Mateus Ferreira
Escuela Técnica Superior de Inginieros Agrónomos y Montes
Universidad de Córdoba-España
Avda. Menendez Pidal, 14080 Córdoba
td2mafea@uco.es

Escola Superior Agrária
6000 Castelo Branco-Portugal
armando@esa.ipcb.pt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 11 10:45:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2000 11:45:12 +0200
Subject: [Rd] Bug? (PR#690)
In-Reply-To: td2mafea@uco.es's message of "Wed, 11 Oct 2000 11:27:59 +0200 (MET DST)"
References: <200010110927.LAA18569@pubhealth.ku.dk>
Message-ID: <x2pul790ev.fsf@blueberry.kubism.ku.dk>

td2mafea@uco.es writes:

> I don´t know if it is a bug, but what's wrong in the folloing (R version
> 1.1.1, August 15, 2000, under windows 98):
> > x<-matrix(nrow=10, ncol=2)
> > for (i in 1:10)
> + {
> + x[i][1]<-i
> + x[i][2]<-i^2
> + }
> Warning messages:
> 1: number of items to replace is not a multiple of replacement length
> 2: number of items to replace is not a multiple of replacement length

Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
ignores dimensions:

> x<-matrix(1:20,nrow=10, ncol=2)
> x[1]
[1] 1
> x[12]
[1] 12


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From td2mafea@uco.es  Wed Oct 11 11:40:41 2000
From: td2mafea@uco.es (Armando Mateus Ferreira)
Date: Wed, 11 Oct 2000 12:40:41 +0200
Subject: [Rd] Bug? (PR#690)
References: <200010110927.LAA18569@pubhealth.ku.dk> <x2pul790ev.fsf@blueberry.kubism.ku.dk>
Message-ID: <002501c0336f$b3a81f20$bf73d696@uco.es>

It's exactly what i want. Thanks.
Armando Ferreira


----- Original Message -----
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
To: <td2mafea@uco.es>
Cc: <r-devel@stat.math.ethz.ch>; <R-bugs@biostat.ku.dk>
Sent: Wednesday, October 11, 2000 11:45 AM
Subject: Re: [Rd] Bug? (PR#690)


> td2mafea@uco.es writes:
>
> > I don´t know if it is a bug, but what's wrong in the folloing (R version
> > 1.1.1, August 15, 2000, under windows 98):
> > > x<-matrix(nrow=10, ncol=2)
> > > for (i in 1:10)
> > + {
> > + x[i][1]<-i
> > + x[i][2]<-i^2
> > + }
> > Warning messages:
> > 1: number of items to replace is not a multiple of replacement length
> > 2: number of items to replace is not a multiple of replacement length
>
> Not a bug. You mean x[i,1] etc. Notice that single-indexing a matrix
> ignores dimensions:
>
> > x<-matrix(1:20,nrow=10, ncol=2)
> > x[1]
> [1] 1
> > x[12]
> [1] 12
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Wed Oct 11 16:10:31 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111510.RAA23967@pubhealth.ku.dk>

Full_Name: J Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (155.140.123.250)


After grep is called many times (> 250k), with constant strings as patterns,
it complains with "invalid regular expression" on calls that worked before
(with same pattern and x). At the same time copying to the clipboard
does no longer work with "out of memory" error (i.e. when trying to
copy the error message from grep to this msg.)
Also breaks other functions (regexpr, strsplit) that seems to use
the regex functions internally. Things work again after restarting R.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 16:32:15 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 11 Oct 2000 17:32:15 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010111532.RAA24080@pubhealth.ku.dk>


> From: jutans@utans.u-net.com
> Date: Wed, 11 Oct 2000 17:10:31 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] invalid regular expression after many grep's (PR#691)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: J Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (155.140.123.250)
> 
> 
> After grep is called many times (> 250k), with constant strings as patterns,
> it complains with "invalid regular expression" on calls that worked before
> (with same pattern and x). At the same time copying to the clipboard
> does no longer work with "out of memory" error (i.e. when trying to
> copy the error message from grep to this msg.)
> Also breaks other functions (regexpr, strsplit) that seems to use
> the regex functions internally. Things work again after restarting R.

Looks like a memory/resource leak.  Can you send us an actual
failing example on your machine, starting from a clean session,
together with details of the machine (amount of RAM etc)?  That will
help us greatly to reproduce this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Wed Oct 11 18:25:04 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Wed, 11 Oct 2000 19:25:04 +0200 (MET DST)
Subject: [Rd] documentation bug in grep (PR#692)
Message-ID: <200010111725.TAA24663@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for grep mistakenly says "gsub" whn it should say "grep"
in the Details section of grep.Rd.  a diff -u with a corrected version
follows:

diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
--- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
+++ grep.Rd-new	Wed Oct 11 10:16:43 2000
@@ -46,7 +46,7 @@
   \code{extended} argument.
 }
 \value{
-    For \code{gsub} a vector giving either the indices of the elements
+    For \code{grep} a vector giving either the indices of the elements
     of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
     the matched elements.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 11 21:14:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Oct 2000 21:14:39 +0100 (BST)
Subject: [Rd] documentation bug in grep (PR#692)
In-Reply-To: <200010111725.TAA24663@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010112112450.18380-100000@auk.stats>

On Wed, 11 Oct 2000 pperkins@ucsd.edu wrote:

> Full_Name: Peter Perkins
> Version: 1.1.1
> OS: LinuxPPC
> Submission from: (NULL) (24.4.89.36)
> 
> 
> the man page for grep mistakenly says "gsub" whn it should say "grep"
> in the Details section of grep.Rd.  a diff -u with a corrected version

It's in the Value section!  Thank you, fixed now.

> follows:
> 
> diff -u R-1.1.1/src/library/base/man/grep.Rd grep.Rd-new
> --- R-1.1.1/src/library/base/man/grep.Rd	Wed Apr 19 08:51:19 2000
> +++ grep.Rd-new	Wed Oct 11 10:16:43 2000
> @@ -46,7 +46,7 @@
>    \code{extended} argument.
>  }
>  \value{
> -    For \code{gsub} a vector giving either the indices of the elements
> +    For \code{grep} a vector giving either the indices of the elements
>      of \code{x} that yielded a match or, if \code{value} is \code{TRUE},
>      the matched elements.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Rohith.Amaratunga@dsto.defence.gov.au  Thu Oct 12 04:11:36 2000
From: Rohith.Amaratunga@dsto.defence.gov.au (Rohith.Amaratunga@dsto.defence.gov.au)
Date: Thu, 12 Oct 2000 05:11:36 +0200 (MET DST)
Subject: [Rd] Bug report (PR#693)
Message-ID: <200010120311.FAA26294@pubhealth.ku.dk>

I am operating R on a linux platform and the version info is given below

platform 	i686-unknown-linux
arch	i686
os	linux
system	i686, linux
status
major	0
minor	90.1
year	1999
month	December
day	15
languag  R

I cannot get the correct grid lines when I use the command grid() on a log
scale.  I have also tried using grid(1) and a variety of numbers but with no
luck

Thanks

Rohith


Rohith Amaratunga
Aeronautical and Maritime Research Laboratory
506 Lorimer Street,
Fishermans Bend, Victoria 3207.
Tel: (03) 9626 7154 (B), 0417 317 445, (03) 9818 5776 (H)
E-mail: rohith.amaratunga@dsto.defence.gov.au


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Thu Oct 12 15:16:52 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Thu, 12 Oct 2000 16:16:52 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
Message-ID: <00101216345102.00374@ligarto>

Dear All,

A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
R-devel; my (mis?)understanding of scoping rules is
that it should have worked in both. The problems seem related to using the
name of the data frame for extracting weights or subsets within a function
call. The problems can be reproduced as follows:

**********************

datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
                    x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))

formula <- as.formula(y ~ x1)


# the following fails in R-1.2.0 but not in R-1.1.1
# > Error in eval(expr, envir, enclos) : Object "datos" not found
lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = datos$x2)},
       formula = formula) 



# fails in R-1.2.0, but not in R-1.1.1
# > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
my.lm <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
} 

my.lm(formula, datai)



# In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
my.lm2 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
#    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
} 

my.lm2(formula, datai)


##################
## The following all work in both R-1.2.0 and R-1.1.1

datax <- datai[datai$x3 < 5 & datai$counter==1,]
lm(formula, data = datax, weights = x2)
lm(formula, data = datax, weights = datax$x2)
lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

my.lm9 <- function(formula, data){
    data <- data[data$x3 < 5, ]
    lm(formula = formula, data = data, weights = x2, subset = counter == 1)
} 

my.lm9(formula, datai)

    



************************

versions: 

R-1.1.1
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status   Patched
major    1
minor    1.1
year     2000
month    October
day      11
language R                                                                               



R-development:
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    10                          
day      10                          
language R                           

********************



-- 
Ramón Díaz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 12 18:37:49 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2000 19:37:49 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: Ramon Diaz-Uriarte's message of "Thu, 12 Oct 2000 16:16:52 +0200"
References: <00101216345102.00374@ligarto>
Message-ID: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>

Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:
> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 

Ow!... This happens because of a change that makes formulas capture
their environment of definition.

A workaround is to explicitly set the environment of the formula to
the current environment, like this:

lapply(split(datai,datai$counter),
       function(datos,formula) {
	  environment(formula)<-environment()
	  lm(formula = formula, data = datos,
                                   weights = datos$x2)
       },
       formula = formula) 

but I bet Luke wants to comment on this...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:30:49 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:30:49 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <00101216345102.00374@ligarto>
Message-ID: <Pine.GSO.4.21.0010121016370.7271-100000@atlas.biostat.washington.edu>

On Thu, 12 Oct 2000, Ramon Diaz-Uriarte wrote:

> Dear All,
> 
> A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> R-devel; my (mis?)understanding of scoping rules is
> that it should have worked in both. The problems seem related to using the
> name of the data frame for extracting weights or subsets within a function
> call. The problems can be reproduced as follows:


There's something tricky happening with parent.frame()

lapply(1:10,function(x,y) {browser();x+y),y=1)

Browse[1]> eval(quote(parent.frame()),parent.frame())
<environment: 1004cb70>
Browse[1]> eval(quote(sys.frame(sys.parent())),parent.frame())
<environment: 1004cdc88>

so parent.frame() isn't an exact synonym for sys.frame(sys.parent()). I
think this i


There *has* also been a change in the scoping rules (only partly
deliberate) in model.frame as Peter pointed out, though I don't think it
is applying here. A formula now has an environment associated with it,
which is used as the default environment for variables not specified in
data=

If you do
  lapply(datai,function(w) model.frame(~w))
it works: the vector w is found in the environment of the anonymous
function.
If you do
  ff<- ~w
  lapply(datai,function(w) model.frame(ff))
it doesn't work, since the default environment is now the global one.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
> **********************
> 
> datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
>                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> 
> formula <- as.formula(y ~ x1)
> 
> 
> # the following fails in R-1.2.0 but not in R-1.1.1
> # > Error in eval(expr, envir, enclos) : Object "datos" not found
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = datos$x2)},
>        formula = formula) 
> 
> 
> 
> # fails in R-1.2.0, but not in R-1.1.1
> # > Error in lm.fit(x, y, offset = offset) : 0 (non-NA) cases
> my.lm <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = data$counter == 1, weights = data$x2)
> } 
> 
> my.lm(formula, datai)
> 
> 
> 
> # In R-1.2.0 does NOT use weights (but it works in R-1.1.1)
> my.lm2 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)
> #    lm(formula = formula, data = data, subset = counter == 1, weights = data$x2)$weights
> } 
> 
> my.lm2(formula, datai)
> 
> 
> ##################
> ## The following all work in both R-1.2.0 and R-1.1.1
> 
> datax <- datai[datai$x3 < 5 & datai$counter==1,]
> lm(formula, data = datax, weights = x2)
> lm(formula, data = datax, weights = datax$x2)
> lm(formula, data = datai, subset = (counter == 1 & x3 < 5), weight = x2)
> lm(formula, data = datai, subset = (datai$counter == 1 & datai$x3 < 5), weight = datai$x2)
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {lm(formula = formula, data = datos,
>                                    weights = x2)},
>        formula = formula) 
> 
> my.lm9 <- function(formula, data){
>     data <- data[data$x3 < 5, ]
>     lm(formula = formula, data = data, weights = x2, subset = counter == 1)
> } 
> 
> my.lm9(formula, datai)
> 
>     
> 
> 
> 
> ************************
> 
> versions: 
> 
> R-1.1.1
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status   Patched
> major    1
> minor    1.1
> year     2000
> month    October
> day      11
> language R                                                                               
> 
> 
> 
> R-development:
> platform i586-pc-linux-gnu           
> arch     i586                        
> os       linux-gnu                   
> system   i586, linux-gnu             
> status   Under development (unstable)
> major    1                           
> minor    2.0                         
> year     2000                        
> month    10                          
> day      10                          
> language R                           
> 
> ********************
> 
> 
> 
> -- 
> Ramón Díaz-Uriarte
> Triana 47
> 28016 Madrid
> Spain
> 
> email:ramon-diaz@teleline.es
> Phone: +-34-918-513-966
>        +-34-657-186-407	
> 
> 
> 
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 12 18:35:03 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 12 Oct 2000 10:35:03 -0700 (PDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010121033220.7271-100000@atlas.biostat.washington.edu>

On 12 Oct 2000, Peter Dalgaard BSA wrote:

> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:

There's a much simpler workaround

lapply(split(datai,datai$counter),function(dataos,formula) lm(formula,
  	data=datos,weights=x2), formula=formula)

because the weights will first be looked for in the data= argument

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Oct 12 20:03:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 12 Oct 2000 14:03:57 -0500 (CDT)
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <x2hf6ikljm.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 12, 2000 07:37:49 pm"
Message-ID: <200010121903.OAA12130@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Ramon Diaz-Uriarte <ramon-diaz@teleline.es> writes:
> 
> > Dear All,
> > 
> > A library (PHYLOGR) that passed the usual tests in R-1.1.1 gives errors with
> > R-devel; my (mis?)understanding of scoping rules is
> > that it should have worked in both. The problems seem related to using the
> > name of the data frame for extracting weights or subsets within a function
> > call. The problems can be reproduced as follows:
> > 
> > **********************
> > 
> > datai <- data.frame( y = rnorm(10), x1 = rnorm(10), x2 = abs(rnorm(10)),
> >                     x3 = rep(seq(1,5),2), counter = rep(c(1,2),c(5,5)))
> > 
> > formula <- as.formula(y ~ x1)
> > 
> > 
> > # the following fails in R-1.2.0 but not in R-1.1.1
> > # > Error in eval(expr, envir, enclos) : Object "datos" not found
> > lapply(split(datai,datai$counter),
> >        function(datos,formula) {lm(formula = formula, data = datos,
> >                                    weights = datos$x2)},
> >        formula = formula) 
> 
> Ow!... This happens because of a change that makes formulas capture
> their environment of definition.
> 
> A workaround is to explicitly set the environment of the formula to
> the current environment, like this:
> 
> lapply(split(datai,datai$counter),
>        function(datos,formula) {
> 	  environment(formula)<-environment()
> 	  lm(formula = formula, data = datos,
>                                    weights = datos$x2)
>        },
>        formula = formula) 
> 
> but I bet Luke wants to comment on this...
> 

Not really, but I guess I have no choice :-).  Here is my take on this:

The simple solution is to use

lapply(split(datai,datai$counter),
       function(datos,formula) {lm(formula = formula, data = datos,
                                   weights = x2)},
       formula = formula) 

i.e. use x2 instead of datos$x2 as the weights argument.  This works
in both 1.1.1 and in the devel branch.

A long-winded explanation:

What makes using lm and friends in functions difficult is that some of
its arguments are used for value and some are used for expression (for
lack of better terms).  Arguments used for value are ordinary function
arguments that are evaluated internally by the standard function
evaluation process; the data argument is one.  (For value arguments
you can almost think of them as being computed before the function
call and only their values are passed.)  Expression arguments are not
evaluated directly.  Instead their expressions are captured (by
substitute or something similar), those expressions are then examined,
possibly modified, and then possibly evaluated through an explicit
call to eval using some context. The weights argument is an expression
argument.

The key in understanding how expression arguments work is knowing and
perhaps controlling the environment used for evaluating them (*and*
knowing which they are--the documentation isn't as helpful as it could
be here).  The changes Robert made to lm and related functions are a
first step in trying to make the context in which expression arguments
are used a bit more rational and controllable, in particular when no
explicit data frames are supplied.

The 1.1.1 rules were to evaluate expression arguments in an
environment consisting of the data frame and the environment of the
caller of lm.  The (intended at least) new rules, which may still
change, are that the evaluation environment consist of the data frame
and the environment in which the formula was constructed.

The two approaches both use the data frame, if supplied, as the first
place to find variable; they only differ in how they handle the case
where the data frame does not contain the values.

The call used in this example is:

	lm(formula = formula, data = datos, weights = datos$x2)

An explicit data argument is given but the data frame datos only
contains the components y, x1, x2, x3, and counter.  The expression
provided as the weights argument is datos$x2.  When the expression is
evaluated, datos is not found in the data frame provided, so the
default environment is used.  Under 1.1.1 that is the caller's
environment and you get what you want. In the devel branch it is the
environment in which the formula was created, which is the global
environment.

With all that, back to the simple solution: The weights argument x2 is
an expression argument and is intended to refer to the x2 component of
the data frame.  When the expression is evaluated, the first place the
evaluation looks for variable values, both in 1.1.1 and in devel, is
the data frame.  So you get the answer you want in both cases.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 12:07:26 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131107.NAA15331@pubhealth.ku.dk>

I'm just back from a computer practical where we ran into

> "f" <- function(x) 2(x^2) # for 2 * x^2

This definition was taken as legitimate, although using the
function generated the error message

> f(3)
Error in f(3) : attempt to apply non-function

Am I right in thinking that in prevous versions of R this
definition would have been declared as a syntax error?  Surely a
number before an opening parenthesis is always a syntax error?
The other mistake does this:

> "f" <- function(x) 2x^2 # another attempt at 2 * x^2
Error: syntax error

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 14:08:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 15:08:19 +0200
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 13:07:26 +0200 (MET DST)"
References: <200010131107.NAA15331@pubhealth.ku.dk>
Message-ID: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I'm just back from a computer practical where we ran into
> 
> > "f" <- function(x) 2(x^2) # for 2 * x^2
> 
> This definition was taken as legitimate, although using the
> function generated the error message
> 
> > f(3)
> Error in f(3) : attempt to apply non-function
> 
> Am I right in thinking that in prevous versions of R this
> definition would have been declared as a syntax error? 

I don't think so... Splus 3.4 does likewise:

> 2(3)
Error: "2" is not a function
>  "f" <- function(x) 2(x^2)
> f(3)                    
Error in f(3): "2" is not a function
Dumped


> Surely a
> number before an opening parenthesis is always a syntax error?

Sounds like it might be so (although sometimes there are surprises).
However, it may not be all that easy or worth it to fix the parser to
recognise this case.

In general you can have any expression evaluating to the function
to be called. If you do f(x)(3), f(x) may or may not be a function
and you can only detect whether it is one at runtime.

>From the parsers point of view there are only a few cases where it is
manifestly obvious that an expression cannot lead to a valid function.
Consider for instance the following silly stunt:

> g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> g(3)
[1] 1.098612

The operative bit is in src/main/gram.y

expr	: 
      ...

        |       expr '(' sublist ')'            { $$ = xxfuncall($1,$3); }

in which the expr is unrestricted and can be any R expression. One
could, I suppose, define a (say) "funexpr" syntactic entity which is just
like an "expr", except that if it is non-complex, then it has to be an
identifier or a character string. I think it would get quite kludgy,
though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 14:33:57 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 08:33:57 -0500 (CDT)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <x2u2ag7ut8.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Oct 13, 2000 03:08:19 pm"
Message-ID: <200010131333.IAA23307@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> J.C.Rougier@durham.ac.uk writes:
> 
> > I'm just back from a computer practical where we ran into
> > 
> > > "f" <- function(x) 2(x^2) # for 2 * x^2
> > 
> > This definition was taken as legitimate, although using the
> > function generated the error message
> > 
> > > f(3)
> > Error in f(3) : attempt to apply non-function
> > 
> > Am I right in thinking that in prevous versions of R this
> > definition would have been declared as a syntax error? 
> 
> I don't think so... Splus 3.4 does likewise:
> 
> > 2(3)
> Error: "2" is not a function
> >  "f" <- function(x) 2(x^2)
> > f(3)                    
> Error in f(3): "2" is not a function
> Dumped
> 
> 
> > Surely a
> > number before an opening parenthesis is always a syntax error?
> 
> Sounds like it might be so (although sometimes there are surprises).
> However, it may not be all that easy or worth it to fix the parser to
> recognise this case.
> 
> In general you can have any expression evaluating to the function
> to be called. If you do f(x)(3), f(x) may or may not be a function
> and you can only detect whether it is one at runtime.
> 
> >From the parsers point of view there are only a few cases where it is
> manifestly obvious that an expression cannot lead to a valid function.
> Consider for instance the following silly stunt:
> 
> > g<-function(x){"+"<-function(x,y)log;(2+2)(x)}
> > g(3)
> [1] 1.098612
> 

I agree--I'd call this a type error in evaluation, not a syntax error.

One thing to keep in mind is that R expressions can be used for things
other that evaluation, for example in representing aspects of models.
Someone might want at some point to attach meaning to something like

	y ~ 2(x)+z

That would be impossible (or at least very dificult) if the expression
were made syntactically invalid.

It would be possible to have a semantic checking tool for R that walks
over the code and warns when it sees such an expression, but it should
not be considered an error since it could be legitimate.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:32 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:50:32 +0200 (MET DST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
Message-ID: <200010131450.QAA18383@pubhealth.ku.dk>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:50:40 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Oct 2000 15:50:40 +0100 (BST)
Subject: [Rd] syntax confusion with function/non-function objects (PR#694)
In-Reply-To: <200010131333.IAA23307@goose.stat.umn.edu>
Message-ID: <Pine.GSO.4.20.0010131543551.28177-100000@laplace>

On Fri, 13 Oct 2000, Luke Tierney wrote:

> > In general you can have any expression evaluating to the function
> > to be called. If you do f(x)(3), f(x) may or may not be a function
> > and you can only detect whether it is one at runtime.

> I agree--I'd call this a type error in evaluation, not a syntax error.
> 
> One thing to keep in mind is that R expressions can be used for things
> other that evaluation, for example in representing aspects of models.
> Someone might want at some point to attach meaning to something like
> 
> 	y ~ 2(x)+z
> 
> That would be impossible (or at least very dificult) if the expression
> were made syntactically invalid.
> 
> It would be possible to have a semantic checking tool for R that walks
> over the code and warns when it sees such an expression, but it should
> not be considered an error since it could be legitimate.

I see the point.  It might be helpful to change the R error message in
line with Splus so that the source of the error is easy to identify.

Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 13 15:57:09 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)
Subject: [Rd] Cautionary tale about c (PR#695)
Message-ID: <200010131457.QAA18499@pubhealth.ku.dk>

This situation arose in a computer practical this morning.  A
student overwrote "c" with a function.  This messes up lots of
things, but it is difficult to remove the function "c" from the
global environment because it is used as a function in both "rm"
and "remove".  [The solution was to reassign "c" as a number, and
then remove it.]  Would it be reasonable in "rm" and "remove" to
insist that the "c" function is got from the base?  The same
might apply to ".Internal" and "as.character", which are also
used.

Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 13 16:34:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 2000 17:34:07 +0200
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 13 Oct 2000 16:57:09 +0200 (MET DST)"
References: <200010131457.QAA18499@pubhealth.ku.dk>
Message-ID: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.

Hmm. This would seem to be doable by having line 2 of rm() as

get("c","package:base")(list, names)

You do have to be circumspect: there are calls to match(),
as.character(), and pos.to.env() in that construction, but neither
uses c().
 
Currently, get("c", envir=NULL) also works, but (for other reasons)
I'm on the warpath against using NULL for the base environment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Oct 13 16:32:36 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 13 Oct 2000 08:32:36 -0700 (PDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <x2r95k7o28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0010130831010.20300-100000@atlas.biostat.washington.edu>

On 13 Oct 2000, Peter Dalgaard BSA wrote:

> J.C.Rougier@durham.ac.uk writes:
> 
> > This situation arose in a computer practical this morning.  A
> > student overwrote "c" with a function.  This messes up lots of
> > things, but it is difficult to remove the function "c" from the
> > global environment because it is used as a function in both "rm"
> > and "remove".  [The solution was to reassign "c" as a number, and
> > then remove it.]  Would it be reasonable in "rm" and "remove" to
> > insist that the "c" function is got from the base?  The same
> > might apply to ".Internal" and "as.character", which are also
> > used.
> 
> Hmm. This would seem to be doable by having line 2 of rm() as
> 
> get("c","package:base")(list, names)
> 
> You do have to be circumspect: there are calls to match(),
> as.character(), and pos.to.env() in that construction, but neither
> uses c().
>  
> Currently, get("c", envir=NULL) also works, but (for other reasons)
> I'm on the warpath against using NULL for the base environment.

You can use .Primitive("c")(list, names) in this case, which doesn't rely
on any other functions.

Trying to do something similar for, say, as.character, assumes that
as.character is more likely to be redefined than `get', which I don't
believe

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Fri Oct 13 16:42:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Fri, 13 Oct 2000 10:42:44 -0500 (CDT)
Subject: [Rd] Cautionary tale about c (PR#695)
In-Reply-To: <200010131457.QAA18499@pubhealth.ku.dk> from "J.C.Rougier@durham.ac.uk" at "Oct 13, 2000 04:57:09 pm"
Message-ID: <200010131542.KAA25280@goose.stat.umn.edu>

J.C.Rougier@durham.ac.uk wrote:
> This situation arose in a computer practical this morning.  A
> student overwrote "c" with a function.  This messes up lots of
> things, but it is difficult to remove the function "c" from the
> global environment because it is used as a function in both "rm"
> and "remove".  [The solution was to reassign "c" as a number, and
> then remove it.]  Would it be reasonable in "rm" and "remove" to
> insist that the "c" function is got from the base?  The same
> might apply to ".Internal" and "as.character", which are also
> used.
> 

One thing we've been talking about a bit is adding some form of name
space management.  This would insure the the c referred to in rm would
be the c in base.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Oct 13 18:07:46 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 13 Oct 2000 19:07:46 +0200
Subject: [Rd] works in R-1.1.1 but not in R-development; why?
In-Reply-To: <200010121903.OAA12130@goose.stat.umn.edu>
References: <200010121903.OAA12130@goose.stat.umn.edu>
Message-ID: <00101319240704.01544@ligarto>

Thanks a lot to Thomas Lumley, Peter Dalgaard, and Luke Tierney for their
answers. 


I think I understand why the function failed, and the workaorunds. However,
would it be appropriate if a call such as:


my.function <- function(formula, data){
# other stuff
    lm(formula = formula, data = data, weights = data$x2)
} 

my.function(formula, datai)


where to return an error, instead of simply ignoring the weights=data$x2
argument? (especially since such a thing used to work and might be used in
other code)

Ramon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Oct 14 07:10:11 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 14 Oct 2000 08:10:11 +0200 (MET DST)
Subject: [Rd] sys.xxx documentation (PR#696)
Message-ID: <200010140610.IAA20750@pubhealth.ku.dk>

Full_Name: Peter Perkins
Version: 1.1.1
OS: LinuxPPC
Submission from: (NULL) (24.4.89.36)


the man page for sys.calls(), sys.frames(), sys.parents(), etc. lists
sys.nframe() and sys.function() in the usage section (and sys.nframe()
shows up in the examples), but they are never mentioned in the text of
the man page.

my suggested text for sys.nframe is, "sys.nframe returns the current size
of the frame stack, i.e., the frame number of the caller."  i have no idea
what sys.function does.

also, 

> sys.call and sys.frame both accept either positive or negative values
> for the argument which. Positive values of which are normal frame numbers
> whereas negative values are counted back from the frame number of the
> current evaluation. 

i believe this should be "accept integer values for the argument which", and
"Non-negative values of which are normal frame numbers"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 02:04:00 2000
From: flip@skidmore.edu (flip@skidmore.edu)
Date: Mon, 16 Oct 2000 03:04:00 +0200 (MET DST)
Subject: [Rd] build errors in configure script (PR#697)
Message-ID: <200010160104.DAA25206@pubhealth.ku.dk>

Full_Name: flip phillips
Version: 1.1.1
OS: Mac OS X
Submission from: (NULL) (24.29.65.207)


the lack of '-lm' in the Macintosh OS X / Dylan release seems to play a bit of
havoc w/ the build. For example, the test for libf2c.a fails, not because the
library is missing, but because -lm is missing. (the configure looks a little
like it wants to check for it but it doesn't really need to)

i fixed it temporarily by majing a null libm.a, but i suspect this should really
be changed in the configure script

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 16 07:45:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Oct 2000 08:45:29 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <200010160104.DAA25206@pubhealth.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
Message-ID: <14826.41993.450739.759375@mithrandir.hornik.net>

>>>>> flip  writes:

> Full_Name: flip phillips
> Version: 1.1.1
> OS: Mac OS X
> Submission from: (NULL) (24.29.65.207)


> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> not because the library is missing, but because -lm is missing. (the
> configure looks a little like it wants to check for it but it doesn't
> really need to)

> i fixed it temporarily by majing a null libm.a, but i suspect this
> should really be changed in the configure script

Do I understand this correctly that there is no libm.a on the above
platform?  What is used instead?

I think we could fix the problem, by first checking for libm.a (which we
do lateron anyway), and then do the Fortran checking.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 16 10:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2000 11:35:52 +0200
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: Kurt Hornik's message of "Mon, 16 Oct 2000 08:45:29 +0200 (CEST)"
References: <200010160104.DAA25206@pubhealth.ku.dk> <14826.41993.450739.759375@mithrandir.hornik.net>
Message-ID: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
> > not because the library is missing, but because -lm is missing. (the
> > configure looks a little like it wants to check for it but it doesn't
> > really need to)
> 
> > i fixed it temporarily by majing a null libm.a, but i suspect this
> > should really be changed in the configure script
> 
> Do I understand this correctly that there is no libm.a on the above
> platform?  What is used instead?
> 
> I think we could fix the problem, by first checking for libm.a (which we
> do lateron anyway), and then do the Fortran checking.

Maybe we should wait for MOSX to come out of beta before changing
anything. I can imagine that more than one Unix program (to say the
least -- -lm is probably the one thing that has *never* been broken
before) would break because of this, so perhaps they want to fix it in
the OS ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 12:27:06 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 16 Oct 2000 12:27:06 +0100 (BST)
Subject: [Rd] Logical indexing
Message-ID: <Pine.GSO.4.20.0010161220350.2598-100000@laplace>

Am I right in thinking that R.1.1.1 is using a different convention (to
previous versions) regarding logical indexing of vectors and lists?  I
feel that supplying a boolean of the wrong length should generate an
error, but now

> (1:4)[rep(TRUE, 10)]
 [1]  1  2  3  4 NA NA NA NA NA NA

I think that if this effect is desired then

> (1:4)[1:10]

would be the appropriate syntax.  Preserving the integrity of the logical
operator provides a useful error trap for programmers who specifically
want to avoid this kind of behaviour.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Oct 16 14:01:28 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Mon, 16 Oct 2000 15:01:28 +0200 (MET DST)
Subject: [Rd] print problem with data frames (PR#698)
Message-ID: <200010161301.PAA02685@pubhealth.ku.dk>

Another one from the student computer practicals: it is possible
to create a dataframe that cannot be printed.  Thus

> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> tmp
Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> print.default(tmp)
$"NA"
NULL

$"NA"
NULL

attr(,"class")
[1] "data.frame"

This obviously relates to my previous posting to r-devel about
subscripting objects with logical vectors that are not the right
length.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From flip@skidmore.edu  Mon Oct 16 14:43:51 2000
From: flip@skidmore.edu (flip phillips)
Date: Mon, 16 Oct 2000 09:43:51 -0400
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <B6107E57.1D0A%flip@skidmore.edu>

on 10/16/00 5:35 AM, Peter Dalgaard BSA at p.dalgaard@biostat.ku.dk wrote:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
> 
>>> the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>>> a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>>> not because the library is missing, but because -lm is missing. (the
>>> configure looks a little like it wants to check for it but it doesn't
>>> really need to)
>> 
>>> i fixed it temporarily by majing a null libm.a, but i suspect this
>>> should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.
> 
> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

This really isn't a MacOS X issue as much as a Darwin issue I believe.
Darwin is the open-source BDS based underpinnings of OS X. The TCL
implementation is unusual as well, and I'll take care of figuring that into
the equation as soon as I can get the rest of the thing to compile. Right
now I'm messing with shared library issues.

A look at the Darwin mailing lists might be in order to see why libm.a isn't
a part, etc. 


-- 
flip phillips, phd
skidmore college
http://www.skidmore.edu/~flip

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct 16 15:31:48 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Oct 2000 10:31:48 -0400
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <39f30e2f.320696055@fisher.stats.uwo.ca>

On Mon, 16 Oct 2000 15:01:28 +0200 (MET DST), you wrote in message
<200010161301.PAA02685@pubhealth.ku.dk>:

>Another one from the student computer practicals: it is possible
>to create a dataframe that cannot be printed.  Thus
>
>> fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
>> tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
>> tmp
>Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
 ...
>This obviously relates to my previous posting to r-devel about
>subscripting objects with logical vectors that are not the right
>length.

In this case the problem is that the indexing is missing a comma.  You
should have had 

  tmp <- fred[c(FALSE, FALSE, TRUE, TRUE),]

because that's how you select cases.  Without the comma, you're
treating the data.frame as a list containing two entries ("happy" and
"sad"), then creating a new one consisting of the 3rd and 4th entries
of that list (which are NA). It still has the data.frame class though,
so you get the error when you try to print it.

I think it might be nice to warn people about that kind of indexing,
because it's rarely intentional, but it would be really hard to do.
You'd need something like a "novice warning level" option, and writers
of procedures would have to anticipate all the common errors novices
would make.

Duncan Murdoch

P.S. to the developers: When I tried to copy and paste Jonathan's code
into a newly opened copy of R using the Edit menu, I got an error I
haven't seen before when I tried to open the menu:  "No selection".  I
can't reproduce this reliably yet, but I'll let you know if I figure
out what triggered it.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Oct 16 16:06:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 17 Oct 2000 04:06:30 +1300
Subject: [Rd] print problem with data frames (PR#698)
In-Reply-To: <200010161301.PAA02685@pubhealth.ku.dk>; from J.C.Rougier@durham.ac.uk on Mon, Oct 16, 2000 at 03:01:28PM +0200
References: <200010161301.PAA02685@pubhealth.ku.dk>
Message-ID: <20001017040630.A25302@stat1.stat.auckland.ac.nz>

This is known (at least to some of us) and there are other problems
with data frames and their printing. Hopefully I will have some 
fixes for 1.2.

  Robert

On Mon, Oct 16, 2000 at 03:01:28PM +0200, J.C.Rougier@durham.ac.uk wrote:
> Another one from the student computer practicals: it is possible
> to create a dataframe that cannot be printed.  Thus
> 
> > fred <- data.frame(happy=c(TRUE, FALSE, TRUE), sad=7:9)
> > tmp <- fred[c(FALSE, FALSE, TRUE, TRUE)] # no error message!
> > tmp
> Error in as.matrix.data.frame(x) : dim<- length of dims do not match the length of object
> > print.default(tmp)
> $"NA"
> NULL
> 
> $"NA"
> NULL
> 
> attr(,"class")
> [1] "data.frame"
> 
> This obviously relates to my previous posting to r-devel about
> subscripting objects with logical vectors that are not the right
> length.
> 
> Cheers, Jonathan.
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Oct 17 11:13:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Oct 2000 12:13:18 +0200 (CEST)
Subject: [Rd] build errors in configure script (PR#697)
In-Reply-To: <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
References: <200010160104.DAA25206@pubhealth.ku.dk>
 <14826.41993.450739.759375@mithrandir.hornik.net>
 <x2og0li0w7.fsf@blueberry.kubism.ku.dk>
Message-ID: <14828.9790.506565.986235@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> > the lack of '-lm' in the Macintosh OS X / Dylan release seems to play
>> > a bit of havoc w/ the build. For example, the test for libf2c.a fails,
>> > not because the library is missing, but because -lm is missing. (the
>> > configure looks a little like it wants to check for it but it doesn't
>> > really need to)
>> 
>> > i fixed it temporarily by majing a null libm.a, but i suspect this
>> > should really be changed in the configure script
>> 
>> Do I understand this correctly that there is no libm.a on the above
>> platform?  What is used instead?
>> 
>> I think we could fix the problem, by first checking for libm.a (which we
>> do lateron anyway), and then do the Fortran checking.

> Maybe we should wait for MOSX to come out of beta before changing
> anything. I can imagine that more than one Unix program (to say the
> least -- -lm is probably the one thing that has *never* been broken
> before) would break because of this, so perhaps they want to fix it in
> the OS ...

Sounds like a good plan to me.

Are there *UNIX* systems without -lm?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 16:41:44 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 08:41:44 -0700
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <87pukzxyo7.fsf@jeeves.blindglobe.net>


Suppose one wanted to build an R wizard for packaging...

One would need to specify and create:
        package-name/
        package-name/Description
        package-name/INDEX
        package-name/R/
        package-name/man/
        package-name/src/

>From this, we'd "probably" like to:
- script-up the Description
- provide a script for regenerating INDEX by calling out to the shell
- provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
- ??

thoughts?  (Sometimes, spending serious time with JDE suggests definite
improvements...)

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:09:41 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:09:41 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 (A.J. Rossini's message of "17 Oct 2000 08:41:44 -0700")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <87itqrxxdm.fsf@jeeves.blindglobe.net>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
    AJR> - provide a script for
    AJR> regenerating INDEX by calling out to the shell

I meant by this, an Emacs function, i.e. 
        M-x ess-regen-INDEX
which runs the appropriate R CMD script.




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 17 17:38:25 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Oct 2000 17:38:25 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87pukzxyo7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>

On 17 Oct 2000, A.J. Rossini wrote:

> 
> Suppose one wanted to build an R wizard for packaging...
> 
> One would need to specify and create:
>         package-name/
>         package-name/Description
>         package-name/INDEX
>         package-name/R/
>         package-name/man/
>         package-name/src/
> 
> >From this, we'd "probably" like to:
> - script-up the Description
> - provide a script for regenerating INDEX by calling out to the shell
> - provide a dummy/sample package-name/R/zzz.R file with a .First.lib()
> - ??
> 
> thoughts?  (Sometimes, spending serious time with JDE suggests definite
> improvements...)

I'm a bit lost: you of all people don't really want a Windows wizard do
you?

Given how much R CMD check and R CMD build will do for you, about all I
can see that one could usefully add is a template for DESCRIPTION (and
it is all u/case).  Well, one could get prompt() to generate templates
for allthe undocumented R objects, but then people would forget to
complete them....

Just how much time do people spend packaging new packages anyway?
I probably have as many on CRAN as anyone else, and I do this rarely.
Checking them is another matter!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Tue Oct 17 17:50:40 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 17 Oct 2000 09:50:40 -0700
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 (Prof Brian Ripley's message of "Tue, 17 Oct 2000 17:38:25 +0100 (BST)")
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
Message-ID: <87g0lvxvhb.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    PBR> I'm a bit lost: you of all people don't really want a Windows
    PBR> wizard do you?

No, an Emacs wizard.

    PBR> Just how much time do people spend packaging new packages
    PBR> anyway?  I probably have as many on CRAN as anyone else, and
    PBR> I do this rarely.  Checking them is another matter!

My thoughts were based on the recent thread re: local functions in a
package, and making that easier (as well as documented).

R will do a good bit, and the question is how much more would be
needed in support so that 
        M-x R-package-wizard
creates a filled out package framework (without the autocoding, of
course). 

best,
-tony        

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From -----sextoys@hotmail.com  Wed Oct 18 23:08:48 2000
From: -----sextoys@hotmail.com (www.sextoysrus.com.au)
Date: Wed, 18 Oct 2000 22:08:48
Subject: [Rd] Australia's Greatest Online Exotic Novelty Store is back...
Message-ID: <200010181106.NAA03235@stat.math.ethz.ch>

Too all our valued customers, please note our website " www.sextoysrus.com.au " is back 
online. 
Sorry for the inconvience.  ( HAPPY SHOPPING)
If you have received this email Via unsolicated means please delete. Thankyou.....
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Oct 18 12:23:52 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 18 Oct 2000 13:23:52 +0200 (CEST)
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <87g0lvxvhb.fsf@jeeves.blindglobe.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net>
 <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats>
 <87g0lvxvhb.fsf@jeeves.blindglobe.net>
Message-ID: <14829.34888.734719.113850@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
PBR> I'm a bit lost: you of all people don't really want a Windows
PBR> wizard do you?

> No, an Emacs wizard.

PBR> Just how much time do people spend packaging new packages
PBR> anyway?  I probably have as many on CRAN as anyone else, and
PBR> I do this rarely.  Checking them is another matter!

> My thoughts were based on the recent thread re: local functions in a
> package, and making that easier (as well as documented).

> R will do a good bit, and the question is how much more would be
> needed in support so that 
>         M-x R-package-wizard
> creates a filled out package framework (without the autocoding, of
> course). 

I think it would be nice to have a function for creating a DESCRIPTION
file, marking which fields are required and which ones are optional
(e.g., like AUCTeX bibtex mode).

Directory stubs are perhaps not that much needed.  Peter once suggested
to make the corresponding documentation in R-exts more hands-on, so that
one gets a simple worked-out packaging example, and I think we want to
do this (eventually).

The package wizard might also offer to generate files like TITLE, INDEX
and data/00Index automatically, but this is done by R CMD check/build
anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Oct 18 14:57:20 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Oct 2000 09:57:20 -0400
Subject: [Rd] "wizard" for building R-packages...
In-Reply-To: <14829.34888.734719.113850@mithrandir.hornik.net>
References: <87pukzxyo7.fsf@jeeves.blindglobe.net> <Pine.GSO.4.05.10010171732420.1071-100000@toucan.stats> <87g0lvxvhb.fsf@jeeves.blindglobe.net> <14829.34888.734719.113850@mithrandir.hornik.net>
Message-ID: <39f0a9dc.167697614@fisher.stats.uwo.ca>

For people like me who mainly use Windows, the package documentation
is rather intimidating.  It's not clear which parts of it work and
which don't, or what tools beyond base R I need to build a package
entirely within Windows (or if that is even possible).

A wizard would be helpful, but it's a lot of work for relatively few
people to use.  An easier solution would be a short document listing
all the steps necessary to build a package in Windows, including at
least pointers to the document of all the tools that should be
installed first.

This should probably contain two sections:  building a package that's
intended to be portable to other systems, and building one that's
going to be packaged in a .zip file for Windows-only use.

If someone wants to volunteer to answer questions when I get stuck,
I'll volunteer to produce the document.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 18 15:14:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Oct 2000 15:14:48 +0100 (BST)
Subject: [Rd] "wizard" for building R-packages...
Message-ID: <200010181414.PAA20875@toucan.stats.ox.ac.uk>

> From: murdoch@stats.uwo.ca (Duncan Murdoch)
> Date: Wed, 18 Oct 2000 09:57:20 -0400
> 
> For people like me who mainly use Windows, the package documentation
> is rather intimidating.  It's not clear which parts of it work and
> which don't, or what tools beyond base R I need to build a package
> entirely within Windows (or if that is even possible).
> 
> A wizard would be helpful, but it's a lot of work for relatively few
> people to use.  An easier solution would be a short document listing
> all the steps necessary to build a package in Windows, including at
> least pointers to the document of all the tools that should be
> installed first.
> 
> This should probably contain two sections:  building a package that's
> intended to be portable to other systems, 

That is in `Writing R Extensions'.  Building it is exactly the same
as on Unix, but checking is not quite.

> and building one that's
> going to be packaged in a .zip file for Windows-only use.
> 
> If someone wants to volunteer to answer questions when I get stuck,
> I'll volunteer to produce the document.

Um.  I've already written one, called readme.packages in rw1011sp.zip.
It does have a list a tools to install first (and a reference
to an on-line portal for the current versions).  If you really
think that is inadequate (and it seems to have sufficed for those
who can follow instructions) please at least start from what is there.

The mechanics will change with R 1.2.0.  If you want to see where
this is going, take a look at the pre-release at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

and especially the revised `Writing R Extensions' manual there.  The
Windows and Unix procedures have become much closer.  Now don't go and
tell me I have wasted my time on making all these tools available on
Windows too, as well as writing manuals no one wanted/noticed!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 19 09:57:19 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 19 Oct 2000 09:57:19 +0100 (BST)
Subject: [Rd] Rterm on Windows 2000 now works.
Message-ID: <200010190857.JAA21730@toucan.stats.ox.ac.uk>

Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
documented (and I can find nothing about this in MicroSoft's Knowledge
Base except that it is known to happen under a debugger).

The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
now incoporates the fix, and we intend to make available a patched
R.dll for rw1011 shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 19:16:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 14:16:48 -0400
Subject: [Rd] remove(ls())
Message-ID: <39EF3A90.9580C6B5@bank-banque-canada.ca>

It's been a long time since I tried this:

> remove(ls())
Warning message:
remove: variable "ls()" was not found

Is it intentional that this does not work (in 1.1.1 and R-devel)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 19 19:48:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Oct 2000 19:48:21 +0100 (BST)
Subject: [Rd] remove(ls())
In-Reply-To: <39EF3A90.9580C6B5@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>

On Thu, 19 Oct 2000, Paul Gilbert wrote:

> It's been a long time since I tried this:
> 
> > remove(ls())
> Warning message:
> remove: variable "ls()" was not found
> 
> Is it intentional that this does not work (in 1.1.1 and R-devel)?

AFAIK only remove(list=ls()) has ever worked in R.

In R rm() and remove() are the same thing.  In S they are not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 19 20:18:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Oct 2000 15:18:26 -0400
Subject: [Rd] remove(ls())
References: <Pine.GSO.4.05.10010191946200.8353-100000@auk.stats>
Message-ID: <39EF4902.ABD37F17@bank-banque-canada.ca>

>AFAIK only remove(list=ls()) has ever worked in R.

Ok, it is possible I've never tried this in R, and re-reading the documentation
now that I understand, I can see that it actually says that. This might be a
useful example in the help for remove, especially for anyone expecting S-like
behavior.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 19 21:34:53 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 19 Oct 2000 16:34:53 -0400 (EDT)
Subject: [Rd] legend -- one more try
Message-ID: <Pine.LNX.4.10.10010191627590.9311-100000@bolker.zoo.ufl.edu>


  Dermot MacSweeney pointed out to me that after my "fix" of legend(),
points were no longer coming out placed in the middle of the lines, but at
the right-hand edge.  It turns out that naively swapping the order of
point-drawing and line-drawing also messes up the bookkeeping that
legend() does on the current x-location.  Here's my patch, which fixes
that bookkeeping (and incidentally substitutes "seg.len" for 2 where it
refers to the length of the drawn line segments in units of x.char; one
could make seg.len user-settable, I don't know if it's worth the bother).

  This time the patch is against the current legend() in R-devel.

*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-     
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }
  
      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }
  
      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Oct 20 09:06:10 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Fri, 20 Oct 2000 10:06:10 +0200
Subject: [Rd] Rterm on Windows 2000 now works.
In-Reply-To: <200010190857.JAA21730@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Oct 19, 2000 at 09:57:19AM +0100
References: <200010190857.JAA21730@toucan.stats.ox.ac.uk>
Message-ID: <20001020100610.A18860@sirio.stat.unipd.it>

On Thu, Oct 19, 2000 at 09:57:19AM +0100, Prof Brian Ripley wrote:
> Guido has fixed Rterm hanging on Windows 2000 in interactive and --ess
> modes.  The problem was that 'PulseEvent' doesn't work under 2000 as
> documented (and I can find nothing about this in MicroSoft's Knowledge
> Base except that it is known to happen under a debugger).
> 
> The cross-compiled pre-release at http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> now incoporates the fix, and we intend to make available a patched
> R.dll for rw1011 shortly.
> 
> -- 

  A patched R.dll for rw1011 is available at
      ftp://ftp.stat.unipd.it/users/guido/RWin/fixed/
  In few days, it will be also available from your preferred CRAN
  mirror, in /bin/windows/windows-NT/base/fixed.
  There is a two lines ReadMe explaining how to install.	

  I would be glad to hear about successes and failures (not on the
  list, however).

  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ratjamm@alum.mit.edu  Fri Oct 20 20:46:19 2000
From: ratjamm@alum.mit.edu (ratjamm@alum.mit.edu)
Date: Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)
Subject: [Rd] bug in pnorm (PR#699)
Message-ID: <200010201946.VAA13126@pubhealth.ku.dk>

Full_Name: James Michael Rath
Version: all (I think)
OS: doesn't matter
Submission from: (NULL) (129.116.226.162)


The code for pnorm in R was adapted from a Fortran library published in the ACM
TOMS journal.  The published version had a typographical error, though, which
was
pointed out in a second article published three years after the original.

The error was that a macro/variable named SIXTEN had a value of 1.6e0 instead of
the
correct 1.6e1 (that is, 16 not 1.6).  The author of the code for R (Ross
Ithaka?)
must have worked from an outdated version of SPECFUN and not the corrected one
that
now appears in CALGO, STATLIB, et cetera.

There is a macro in pnorm.c (in the nmath directory) which looks like:
#define SIXTEN	1.6	/* Magic Cutoff */
It should be something like:
#define SIXTEN	16.0	/* Magic Cutoff */

I know this appears in R version 1.1.1.  I know it also appears in older
versions.
I do not know if it appears in newer ones.


The relevant references from ACM TOMS are:

Cody, W. D.  "Algorithm 715: SPECFUN - A portable FORTRAN package of special
  function routines and test drivers," in ACM TOMS 19, 22-32, 1993.

Price, David T.  "Remark on algorithm 715," in ACM TOMS 22(2), 258, 1996.


Jim


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 20 22:56:59 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Oct 2000 23:56:59 +0200
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: ratjamm@alum.mit.edu's message of "Fri, 20 Oct 2000 21:46:19 +0200 (MET DST)"
References: <200010201946.VAA13126@pubhealth.ku.dk>
Message-ID: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>

ratjamm@alum.mit.edu writes:

> There is a macro in pnorm.c (in the nmath directory) which looks like:
> #define SIXTEN	1.6	/* Magic Cutoff */
> It should be something like:
> #define SIXTEN	16.0	/* Magic Cutoff */
> 
> I know this appears in R version 1.1.1.  I know it also appears in older
> versions.
> I do not know if it appears in newer ones.

Hmm. I tried making the appropriate change and plotting 

plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))

for 

x<-seq(0,-16,-.01)

and

x<-seq(0,16,.01)

I'll be darned if I can spot the difference. Where would you expect to
find it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From organism@ticam.utexas.edu  Sat Oct 21 01:23:02 2000
From: organism@ticam.utexas.edu (James Michael Rath)
Date: Fri, 20 Oct 2000 19:23:02 -0500 (CDT)
Subject: [Rd] bug in pnorm (PR#699)
In-Reply-To: <x2aebz5g7o.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0010201741440.8601-100000@oreosis.ticam.utexas.edu>

> ratjamm@alum.mit.edu writes:
> 
> > There is a macro in pnorm.c (in the nmath directory) which looks like:
> > #define SIXTEN	1.6	/* Magic Cutoff */
> > It should be something like:
> > #define SIXTEN	16.0	/* Magic Cutoff */
> > 
> > I know this appears in R version 1.1.1.  I know it also appears in older
> > versions.
> > I do not know if it appears in newer ones.
> 
> Hmm. I tried making the appropriate change and plotting 
> 
> plot(x,(pnorm(x+.00001)-pnorm(x-.00001))/dnorm(x))
> 
> for 
> 
> x<-seq(0,-16,-.01)
> 
> and
> 
> x<-seq(0,16,.01)
> 
> I'll be darned if I can spot the difference. Where would you expect to
> find it?

I see that you're trying to test whether an approximation to the
derivative of pnorm is equal to dnorm.  If you look at the plot you
generated, either the old pnorm or the "correct" one will qualitatively
look like a flat line near y=1.  (A sidebar: I'm not sure why you chose to
examine things over the domain (-16,0) and (0,16).  I'm guessing you were
misled by the inappropriate labelling of SIXTEN as a "magic cutoff" by
Ihaka.  I'll explain the role of SIXTEN below.)

Qualitative accuracy was not what I had in mind.  The routines were
originally written by Cody to achieve full double precision accuracy (on
machines which could support it).  That is, he aimed for 18 decimal places
of accuracy in the routines.

When calculating pnorm(x), the range of abs(x) is split into four
pieces: (0,0.66291), (0.66291,sqrt(32), (sqrt(32),somelimit), and
everything else.  In the first piece, a certain rational approximation is
used to calculate the function value.  In the second two pieces, two
additional (each different) rational approximations are used modulo a
multiplication by exp(-0.5*x*x).  The calculation of the multiplication by
exp(-0.5*x*x) is where SIXTEN is used.

Lines 176-187 of pnorm.c in R version 1.1.1 looks like
#define do_del(X)							\
	xsq = floor(X * SIXTEN) / SIXTEN;				\
	del = (X - xsq) * (X + xsq);					\
	if(log_p) {							\
	    *cum = (-xsq * xsq * 0.5) + (-del * 0.5) + log(*cum);	\
	    if((lower && x > 0.) || (upper && x <= 0.))			\
		*ccum = log(1.0 - exp(*cum));				\
	}								\
	else {								\
	    *cum = exp(-xsq * xsq * 0.5) * exp(-del * 0.5) * *cum;	\
	    *ccum = 1.0 - *cum;						\
	}
This macro is then called on y (which was previously set to fabs(x)).  The
effect of the line "xsq = floor(y*SIXTEN)/SIXTEN" is to set xsq to a value
approximating y to the nearest sixteenth (from below).  The exponential is
then computed in two parts: we write y=xsq+(y-xsq) and compute
exp(-0.5*y*y)=exp(-0.5*xsq*xsq)*exp(-0.5*del).  Despite the algebraic
equivalence between these two expressions, the RHS is a more numerically
accurate formula than the LHS (for the domain we are interested in).

The effect of substituting 1.6 for 16 is twofold.  First, xsq only gets
rounded to the nearest 1.6eenth (to the closest multiple of 1/1.6).  The
change from exp(-0.5*y*y) to exp(-0.5*xsq*xsq)*exp(-0.5*del) then loses
most of its effectiveness.  Second, multiplication and division by 16 in
IEEE floating point arithmetic gets computed exactly.  The operations for
1.6 do not (1.6 ~ 1.10011... - it is a non-terminating binary
number).  This introduces spurious numerical errors where there should be
none.

The overall effect of changing 1.6 to 16 is subtle at best and insidious
at worst.  We had accuracy to full precision with 16, but now do not with
1.6.



After looking at the R code a bit more carefully, I notice there are a few
other significant (numerically, at least) changes to Cody's library.

The first has to do with the fuzzy "somelimit" that I used above in
describing the domain split.  If x is positive, then "somelimit" is the
largest number above which pnorm(x) is indistinguishable from 1 (to the
working precision).  If x is negative, then "somelimit" is the negative of
the smallest number below which pnorm(x) is indistinguishable from 0 (to
working precision).  Cody called these two (different) numbers XLOW and
XUPPR, and distinguished their use in the code.  Ihaka, on the other hand,
simply hard-coded 50 for both.  For double precision, XLOW should be about
-37.5 and XUPPR about 8.6.  This has two effects.  First, there is a
slow-down because calculations involving a rational asymptotic formula are
taking place when then don't have to.  This isn't too serious because
most people call pnorm with much smaller arguments most of the time (and
the time taken to calculate that asymptotic expression takes no more time
to calculate the other rational expressions used).  The second effect
could potentially be serious, though.  Cody's code didn't cause any IEEE
floating point error flags to be set unneccesarily.  Ihaka's code
does.  In order to put Ihaka's code back in line with Cody's code would
take only a minor modification (one extra comparison which wouldn't
reduce readability or the difficulty of the logic).

The second significant change has to do with the rounding to sixteenths
again.  The rounding takes place twice: once in the case where y is in 
(0.66291,sqrt(32), and once where y is in (sqrt(32),somelimit).  I only
discussed the first one above (for brevity's sake; perhaps I should've
mentioned it earlier).  My comments above about changing 1.6 to 16 apply
to both, but this second comment only applies to the second case.  Cody's
code actually rounds towards zero (towards the nearest sixteenth) whereas
Ihaka's code rounds towards minus infinity.  That is, Cody uses the
Fortran AINT routine whereas Ihaka uses C's floor.  At first thought, I'm
not really sure just what the impact on accuracy is.  I suspect there is
none because of the range of arguments involved; however, I cannot say
this for sure.  I can get back to you on this if you'd like.

My last comment (phew!) has to do with the computation of
log(pnorm(x)).  Although the calculation of pnorm is accurate to full
precision (that is, to within 1 ULP) and so it that of log, the
composition may not be.  I'm not sure what the impact is (it's late on
Friday afternoon, and I'm running out of steam; sorry :( ), but I will
definitely get back to you on this.  One thing that definitely does worry
me is the computation of log(1-exp(*cum)).


Thanks for sticking with me through this whole message.  Numerical
analysis may be boring, but it definitely it worth it.  (I don't mean to
offend anyone by "boring," either! :)


Thanks much and have a good weekend!

j




.--- .- -- . ...
-- .. -.-. .... .- . .-..
... - .- .--. .-.. . - --- -.
.-. .- - ....  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Oct 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Oct 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200010210515.HAA16365@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 699 *
Subject: bug in pnorm
From: ratjamm@alum.mit.edu
Date: Fri, 20 Oct 2000 21:46:18 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 665 *
Subject: "[.data.frame" forgets about "AsIs"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 21 Sep 2000 10:18:46 +0200
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 668 *
Subject: eval functions...
From: aprasad@fs.fed.us
Date: Fri, 22 Sep 2000 22:30:58 +0200 (MET DST)
* PR# 667 *
Subject: (sem assunto)
From: rangearo@ufu.br (Paulo Roberto Rangearo Peres)
Date: Thu, 21 Sep 2000 15:27:53 -0300
* PR# 666 *
Subject: width in options()
From: aprasad@fs.fed.us
Date: Thu, 21 Sep 2000 17:46:25 +0200 (MET DST)
* PR# 671 *
Subject:  bounds violations, infinite loops in optim/L-BFGS-B 
From: bolker@zoo.ufl.edu
Date: Tue, 26 Sep 2000 10:17:27 -0400
* PR# 670 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/664
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Mon, 25 Sep 2000 12:28:32 +0200
Date: Mon, 25 Sep 2000 12:28:31 +0200
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 673 *
Subject:  pretty not covering the range properly 
From: David Paul McLaughlin <david@orion-10.cs.byu.edu>
Date: Fri, 25 Aug 2000 14:16:42 -0400
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
* PR# 676 *
Subject: documentation error for deriv; MASS scripts ch8;
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 02 Oct 2000 11:23:19 -0400
* PR# 675 *
Subject: several documentation problems
From: sws96srb@met.rdg.ac.uk
Date: Mon, 2 Oct 2000 14:24:37 +0200 (MET DST)
* PR# 680 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 679 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/678
Subject: typo in documentation for read.table
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: htang@hpl.hp.com
Date: Tue, 3 Oct 2000 08:34:25 +0200
Date: Tue, 3 Oct 2000 08:34:24 +0200
Date: Mon, 2 Oct 2000 19:58:55 +0200 (MET DST)
* PR# 677 *
Subject: R build on i86pc Solaris 2.7
From: albrecht.gebhardt@uni-klu.ac.at
Date: Mon, 2 Oct 2000 17:52:46 +0200 (MET DST)
* PR# 682 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Oct 2000 11:57:32 +0200
* PR# 681 *
Subject: This mail was found after problem with mailserver Oct 3rd - postmaster@hh.umu.se
From: maechler@stat.math.ethz.ch
Date: Tue, 3 Oct 2000 11:16:59 +0200 (MET DST)
* PR# 686 *
Subject: inquiry
From: <bench1@onenetnow.com>
Date: Mon, 9 Oct 2000 00:23:53
* PR# 685 *
Subject: documentation bug in readline()
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 06 Oct 2000 19:09:31 -0700
* PR# 684 *
Subject: gamma and lgamma functions
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Wed, 4 Oct 2000 13:59:21 +0200 (MET DST)
* PR# 688 *
Subject:  Unreliable example in ?layout 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 10 Oct 2000 08:48:10 +0100 (BST)
* PR# 687 *
Subject:  cmdscale documentation 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 9 Oct 2000 10:23:20 +0100 (BST)
* PR# 691 *
Subject: invalid regular expression after many grep's
From: jutans@utans.u-net.com
Date: Wed, 11 Oct 2000 17:10:29 +0200 (MET DST)
* PR# 690 *
Subject: Bug?
From: "Armando Mateus Ferreira" <td2mafea@uco.es>
Date: Wed, 11 Oct 2000 11:21:19 +0200
* PR# 689 *
Subject: Documentation problem for ecdf
From: Kurt.Hornik@ci.tuwien.ac.at
Date: Tue, 10 Oct 2000 18:32:46 +0200 (MET DST)
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
* PR# 692 *
Subject: documentation bug in grep
From: pperkins@ucsd.edu
Date: Wed, 11 Oct 2000 19:25:03 +0200 (MET DST)
* PR# 696 *
Subject: sys.xxx documentation
From: pperkins@ucsd.edu
Date: Sat, 14 Oct 2000 08:10:09 +0200 (MET DST)
* PR# 695 *
Subject:  Cautionary tale about c 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 15:57:27 +0100 (BST)
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 23 11:01:15 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 23 Oct 2000 12:01:15 +0200 (CEST)
Subject: [Rd] is.integer and rank
Message-ID: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>


Hello, 

why does

> test <- rank(sample(10))
> test
 [1]  4  8  9 10  2  1  7  6  3  5
> is.integer(test)
[1] FALSE
> is.double(test)
[1] TRUE

make sense in R-1.1.1?  

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 23 11:20:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Oct 2000 12:20:07 +0200
Subject: [Rd] is.integer and rank
In-Reply-To: Torsten Hothorn's message of "Mon, 23 Oct 2000 12:01:15 +0200 (CEST)"
References: <Pine.LNX.4.21.0010231157110.12947-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <x2k8az3lm0.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

> Hello, 
> 
> why does
> 
> > test <- rank(sample(10))
> > test
>  [1]  4  8  9 10  2  1  7  6  3  5
> > is.integer(test)
> [1] FALSE
> > is.double(test)
> [1] TRUE
> 
> make sense in R-1.1.1?  

Ranks have to be able to include non-integers, hence storage mode
double

> rank(c(1,2,2,3))
[1] 1.0 2.5 2.5 4.0

More confusing is:

> is.integer(1)
[1] FALSE

> is.integer(1:1)
[1] TRUE

(both of which is for a reason, although I have temporarily forgotten
why we make integer sequences integer.... Speed issues, possibly)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From emmanuel.charpentier@sap.ap-hop-paris.fr  Mon Oct 23 12:16:01 2000
From: emmanuel.charpentier@sap.ap-hop-paris.fr (emmanuel.charpentier@sap.ap-hop-paris.fr)
Date: Mon, 23 Oct 2000 13:16:01 +0200 (MET DST)
Subject: [Rd] Probable bug in RODBC 0.7.x (PR#700)
Message-ID: <200010231116.NAA23785@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: R 1.1.1
OS: Windows 98 FE / Linux (Debian 2.2)
Submission from: (NULL) (164.2.255.244)


This bug report is pro forma. I've already reported it informally on R-help and
R-devel.

The current (0.7) version of RODBC has a problem with missing values. It
correctly
gets missing "character" values (as blanks), but puts the last non-missing value
of
the same variable in place of missing "numeric" values. Doubleplus ungood ...

Example :

In database : ==>     What I got in R    What I expected

1  Foo 1.0            1 "Foo" 1.0        1 "Foo" 1.0
2      2.0            2 ""    2.0        2 ""    2.0
3  Bar                3 "Bar" 2.0        3 "Bar" NA
4  Gee 4.0            4 "Gee" 4.0        4 "Gee" 4.0

This has been checked on Windows (links to remote Postgres, local MS-Access and
local
Excel) and Linux (links to Postgres, both local and remote, ODBC
manager=unixODBC,
drivers=unixODBC-bundled drivers).

A cursory preliminary look at the code was unsuccessful. I have to delve into
the
ODBC interface specification and learn how to debug C under R in order to go
further.

Michael Lapsley, author of the RODBC package, is aware of the problem, but has
no
fix yet (as of beginning of October).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Oct 23 20:06:05 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 23 Oct 2000 21:06:05 +0200 (MET DST)
Subject: [Rd] ambiguous (duplicated) names in model.matrix() (PR#701)
Message-ID: <200010231906.VAA28560@pubhealth.ku.dk>

Interaction terms in model.matrix() use "." to spearate the components
that are separate by ":" in the corresponding terms().

Not only is this (IMHO) visually unpleasing, but can lead to ambiguous
labelling. Notice that "x.a"  is duplicated and that "x.a.x.b" is
ambiguous in this context:

> lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4))$x
   (Intercept) x.a x.b  x a x.a.x.b x.a
1            1   1   1  1 1       1   1
2            1   2   2  2 2       4   4
3            1   0   3  3 1       0   3
4            1   1   0  4 2       0   8
5            1   2   1  5 1       2   5
6            1   0   2  6 2       0  12
7            1   1   3  7 1       3   7
8            1   2   0  8 2       0  16
9            1   0   1  9 1       0   9
10           1   1   2 10 2       2  20
attr(,"assign")
[1] 0 1 2 3 4 5 6
> terms(lm( y~x.a*x.b+x*a, x=T, data=data.frame(y=rnorm(10),x=1:10,a=rep(1:2,5),x.a=(1:10)%%3,x.b=(1:10)%%4)))
y ~ x.a + x.b + x + a + x.a:x.b + x:a
attr(,"variables")
list(y, x.a, x.b, x, a)
attr(,"factors")
    x.a x.b x a x.a:x.b x:a
y     0   0 0 0       0   0
x.a   1   0 0 0       1   0
x.b   0   1 0 0       1   0
x     0   0 1 0       0   1
a     0   0 0 1       0   1
attr(,"term.labels")
[1] "x.a"     "x.b"     "x"       "a"       "x.a:x.b" "x:a"    
attr(,"order")
[1] 1 1 1 1 2 2
attr(,"intercept")
[1] 1
attr(,"response")
[1] 1
>

The prototype uses ":" in both cases.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jutans@utans.u-net.com  Mon Oct 23 20:13:04 2000
From: jutans@utans.u-net.com (jutans@utans.u-net.com)
Date: Mon, 23 Oct 2000 21:13:04 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010231913.VAA28614@pubhealth.ku.dk>

Full_Name: Joachim Utans
Version: 1.1.1
OS: NT4 (SP6)
Submission from: (NULL) (195.102.198.233)


There seems to be a small inconsistency with using median in sapply with
handling names (looks like it has to do with the different handling when the
length is even/odd)
Specifically, sapply will concatenate listelement names and a member name if the
length of the member is odd.
Example follows:

> TMP.list_list(item1=c(a1=1,a2=2,a3=3), item2=c(b1=1,b2=2))
> TMP.list
$item1
a1 a2 a3
 1  2  3

$item2
b1 b2
 1  2

> sapply(TMP.list, mean)
item1 item2
  2.0   1.5
> sapply(TMP.list, median)
item1.a2    item2            !!!!!!!!!!!! note the ".a2"
     2.0      1.5
>

> sapply(TMP.list, median, USE.NAMES=F)
item1.a2    item2
     2.0      1.5
> lapply(TMP.list, median)
$item1
a2
 2

$item2
[1] 1.5




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 23 21:12:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 23 Oct 2000 22:12:02 +0200 (MET DST)
Subject: [Rd] small inconistency: sapply & median (PR#702)
Message-ID: <200010232012.WAA28837@pubhealth.ku.dk>

On Mon, 23 Oct 2000 jutans@utans.u-net.com wrote:

> Full_Name: Joachim Utans
> Version: 1.1.1
> OS: NT4 (SP6)
> Submission from: (NULL) (195.102.198.233)
> 
> 
> There seems to be a small inconsistency with using median in sapply with
> handling names (looks like it has to do with the different handling when the
> length is even/odd)
> Specifically, sapply will concatenate listelement names and a member name if the
> length of the member is odd.

The apparent inconsistency is in
> median(c(a1=1,a2=2,a3=3))
a2 
 2 
> median(c(b1=1,b2=2))
[1] 1.5

which makes sense as in the first case the median is an element of the
input, and in the second it is not. Given that, sapply is doing perfectly
sensible things.  The prototype has an x <- as.vector(x) in its median,
and so strips the names from x. If you really want that, try

sapply(TMP.list, function(x) as.vector(median(x)))
item1 item2 
  2.0   1.5 

I suspect this is a feature, not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From loecher@scr.siemens.com  Tue Oct 24 18:07:18 2000
From: loecher@scr.siemens.com (loecher@scr.siemens.com)
Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241707.TAA09950@pubhealth.ku.dk>

Full_Name: Markus Loecher
Version: 1.1.1
OS: Solaris
Submission from: (NULL) (129.73.1.1)


When trying to install R on a Sun SPARC, make fails in the very end, here is the
error message:

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

Any help ?

Thanks,

Markus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 24 18:21:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 24 Oct 2000 19:21:04 +0200 (MET DST)
Subject: [Rd] installation problems with rbitmap.c (PR#703)
Message-ID: <200010241721.TAA10019@pubhealth.ku.dk>

This has been reported before as PR#677 (and prior to that too).

If you have JPEG but not PNG, on Solaris, you need to add #include
<setjmp.h> after  #include <jpeglib.h>.  It is fixed in the
development version.


> From: loecher@scr.siemens.com
> Date: Tue, 24 Oct 2000 19:07:18 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] installation problems with rbitmap.c (PR#703)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Markus Loecher
> Version: 1.1.1
> OS: Solaris
> Submission from: (NULL) (129.73.1.1)
> 
> 
> When trying to install R on a Sun SPARC, make fails in the very end, here is 
the
> error message:
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> Any help ?
> 
> Thanks,
> 
> Markus
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Wed Oct 25 11:34:57 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Wed, 25 Oct 2000 12:34:57 +0200 (MET DST)
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <3.0.32.19700101010000.00916520@162.38.183.200>

Hi,

I think it would be nice to have par(ask=T) set by default in termplot(),
like it is in plot.lm().

Best,

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Oct 25 11:57:14 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 25 Oct 2000 11:57:14 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <200010251057.LAA23396@toucan.stats.ox.ac.uk>

> Date: mer., 25 oct. 2000 12:38:55 +0200
> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>

> I think it would be nice to have par(ask=T) set by default in termplot(),
> like it is in plot.lm().

Well, it isn't really the default in plot.lm, the default for `ask' being

interactive() && one.fig && length(which) > 1 && .Device != "postscript"

Can you supply us with an appropriate patch for termplot and
termplot.Rd?  The issue is somewhat subtle.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 25 14:25:43 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 25 Oct 2000 15:25:43 +0200 (MET DST)
Subject: [Rd] invalid regular expression after many grep's (PR#691)
Message-ID: <200010251325.PAA23115@pubhealth.ku.dk>

Turns out that someone forgot to call regfree in the internal code for
strsplit and also forgot to free pt there.  After I found those two,
there is no more memory build up in your example, although I did
not have the patience for 200k calls. (After 1000 there had been
appreciable buildup, and there was exactly none after the fixes.)

The memory management on the next version of R for Windows will be
radically different, and you will be able to set a limit on
total malloc-ed space, for example.  (R-core: this is an
example why one might want to.)


> From: "Joachim Utans" <jutans@utans.u-net.com>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Date: Thu, 12 Oct 2000 20:32:40 +0100
> Subject: Re: [Rd] invalid regular expression after many grep's (PR#691)
> X-Keywords: 
> 
> 
> While trying to create a simple test it turns out that the real
> culprit appears to be strsplit. What I am doing is to parse
> many lengthy text-files, perform some substitutions and write out
> the results (I probably should use Perl but this also does other R
> calculations). Some of the actions performed call strsplit but
> the error message always came from grep, but they both call the
> underlying regexp functions I assume.
> 
> Below is an example that fails on my machine after around 200k
> iterations (this of course is an inappropriate use of strsplit
> as the loop is not necessary).
> Machine is 2*733 PIII, 256Mb RAM, starting R with --vanilla,
> and R_VSIZE=160M, R_NSIZE=1500k.
> 
> 
> bugtest <- function(n=500, file="d:/rw/faq") {
>      for (j in 1:n) {
> 	     tmp <- scan(file, "", sep="\n")
>     	 for (i in 1:length(tmp)) {
>         	  x <- strsplit(tmp[i], " ")[[1]]
> 	     }
>     }
> }
> 
> After exiting with q(), R then crashes (try to access memory at 0x0000)
> N.B. strsplit(.,NULL) does not crash, no regexpr involved(?)
> 
> Come to think of it, when R does crash for me I think a large fraction
> of crashes occurs in functions that in some way call strsplit, though
> I have not kept track of this.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Wed Oct 25 19:49:20 2000
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)
Subject: [Rd] problem with "breaks" in histogram (PR#710)
Message-ID: <200010251849.UAA25821@pubhealth.ku.dk>

Full_Name: Matthew Wiener
Version: 1.1.1
OS: linux
Submission from: (NULL) (156.40.248.102)


I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
for
PPC, and Irix 6.5.

t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
hist(t1, breaks = 10)    (OK)
hist(t1/50, breaks = 10)
	Error in hist.defauilt(t1/50, breaks = 10):
	        some 'x' not counted; maybe breaks do not span range of x


The breaks generated by the call
hist(t1/50, breaks = 10) are (as printed just after the call to "pretty" on line
32
of hist.default):  0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89 0.90 0.91 0.92 .

>hist(t1/50, breaks = seq(from = 0.82, to = 0.92, by = .01))
gives me the error, but

>hist(t1/50, breaks =  c(.82, .83, .84, .85, .86, .87, .88, .89, .9, .91, .92))
does not.

It seems to be a numerical precision problem in generating the breaks, and
maybe
in seq() in general.  I tried 
printing the breaks generated with seq() with 20 digits precision, and the 
first and last breaks were 0.81999999999999995115 and 
0.91999999999999992895, and counts confirms that the value of 0.92 is being
missed
in this case.

And if I try
> hist(t1[-2]/50, breaks = 10), 
the extreme breaks are 0.82000000000000006217 and
0.92000000000000003997  and you miss the value of 0.82.

Maybe some sort of rounding of the breaks is in order, but it would need to
take
into account the actual size of the numbers you're dealing with.

I hope this report has enough information.  If not, please let me know what
else I can provide.  Thanks for the terrific software.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 25 20:55:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2000 21:55:48 +0200
Subject: [Rd] problem with "breaks" in histogram (PR#710)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Wed, 25 Oct 2000 20:49:20 +0200 (MET DST)"
References: <200010251849.UAA25821@pubhealth.ku.dk>
Message-ID: <x28zrc3dbv.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> I've come across a glitch in hist.  I can reproduce it on linux for Intel, linux
> for
> PPC, and Irix 6.5.
> 
> t1 <- c(41, 42, 42, 43, 43, 43, 44, 44, 45, 46)
> hist(t1, breaks = 10)    (OK)
> hist(t1/50, breaks = 10)
> 	Error in hist.defauilt(t1/50, breaks = 10):
> 	        some 'x' not counted; maybe breaks do not span range of x
> 
...
> Maybe some sort of rounding of the breaks is in order, but it would need to
> take
> into account the actual size of the numbers you're dealing with.
> 
> I hope this report has enough information.  If not, please let me know what
> else I can provide.  Thanks for the terrific software.

This has been reported before (in the guise of "pretty(x) does not
cover range(x)" or something close to that) and is already fixed in
the development sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:48:28 2000
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 27 Oct 2000 14:48:28 +0200 (MET DST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
Message-ID: <200010271248.OAA16181@pubhealth.ku.dk>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Oct 27 13:47:41 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Fri, 27 Oct 2000 14:47:41 +0200
Subject: [Rd] par(ask=T) in termplot()
Message-ID: <3.0.32.20001027144740.0091e450@162.38.183.200>

At 11:57 25/10/00 +0100, Brian Ripley wrote:
>> Date: mer., 25 oct. 2000 12:38:55 +0200
>> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
>
>> I think it would be nice to have par(ask=T) set by default in termplot(),
>> like it is in plot.lm().
>
>Well, it isn't really the default in plot.lm, the default for `ask' being
>
>interactive() && one.fig && length(which) > 1 && .Device != "postscript"
>
>Can you supply us with an appropriate patch for termplot and
>termplot.Rd?  The issue is somewhat subtle.

So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
plots cannot be really visualized. Here is a proposed modification for this
function:

$ diff plot.lm.R plot.lm.new.R
7c7
<          ask = interactive() && one.fig && length(which) > 1
---
>          ask = interactive() && nb.fig < length(which)
52a53
>    nb.fig <- prod(par("mfcol"))



The modification for termplot() follows in the same way:

$ diff termplot.R termplot.new.R
3a4,5
>                      ask = interactive() && nb.fig < n.tms
>          	     && .Device != "postscript",
46a49,55
>     nb.fig <- prod(par("mfcol"))
>     one.fig <- prod(par("mfcol")) == 1
>     if (ask) {
> 	op <- par(ask = TRUE)
> 	on.exit(par(op))
>     }
>     ##---------- Do the individual plots : ----------


I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
to work OK. The corresponding modifications for the .Rd files are:

$ diff plot.lm.Rd plot.lm.new.Rd
11c11
<         ask = interactive() && one.fig && length(which) > 1
---
>         ask = interactive() && one.fig && nb.fig < length(which)

$ bdiff termplot.Rd termplot.new.Rd
11a12,13
>          ask = interactive() && one.fig && nb.fig < length(which)
>          	&& .Device != "postscript",
28a31,32
>   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
>     each plot, see \code{\link{par}(ask=.)}.}


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 27 14:47:56 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)
Subject: [Rd] Bug in hsv() (PR#712)
Message-ID: <200010271347.PAA16894@pubhealth.ku.dk>

Ross posted this code:

 persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)

I hadn't seen the cm.colors function before; it's very nice!  I wanted
to modify it a bit to allow the start and end colors as well as the
max saturation to be specified, and I think I may have turned up a bug
in the hsv() function.  Here's the evidence of the bug:

Look at the results of these two calls to hsv:

> hsv(h=0.833333333333333,s=0.5,v=1)
[1] "#FF8080"
> hsv(h=0.8333333333333333,s=0.5,v=1)
[1] "#FF80FF"

I think the 3 color components are listed as hex values in Blue,
Green, Red order here.  The two calls have nearly identical parameters
(differing in hue only in the 16th decimal place), but the red
component is twice as strong in the second one.

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 27 18:04:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 2000 19:04:15 +0200
Subject: [Rd] Bug in hsv() (PR#712)
In-Reply-To: murdoch@stats.uwo.ca's message of "Fri, 27 Oct 2000 15:47:56 +0200 (MET DST)"
References: <200010271347.PAA16894@pubhealth.ku.dk>
Message-ID: <x2r952gqr4.fsf@blueberry.kubism.ku.dk>

murdoch@stats.uwo.ca writes:

> Ross posted this code:
> 
>  persp(x, y, z, col = cm.colors(10)[floor(9 * hgt + 1)], theta = 35)
> 
> I hadn't seen the cm.colors function before; it's very nice!  I wanted
> to modify it a bit to allow the start and end colors as well as the
> max saturation to be specified, and I think I may have turned up a bug
> in the hsv() function.  Here's the evidence of the bug:
> 
> Look at the results of these two calls to hsv:
> 
> > hsv(h=0.833333333333333,s=0.5,v=1)
> [1] "#FF8080"
> > hsv(h=0.8333333333333333,s=0.5,v=1)
> [1] "#FF80FF"
> 
> I think the 3 color components are listed as hex values in Blue,
> Green, Red order here.  The two calls have nearly identical parameters
> (differing in hue only in the 16th decimal place), but the red
> component is twice as strong in the second one.

Yes, this is a bug. It is also visible by viewing (h,hsv(h)) for
values of h close to 5/6. There appears to be a small window from
about 0.8333317 to 0.8333333 where the 3rd component is 00 instead of
FF. (The order of the components are Red, Green, Blue though....)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 28 10:15:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 28 Oct 2000 10:15:41 +0100 (BST)
Subject: [Rd] par(ask=T) in termplot() (PR#711)
In-Reply-To: <200010271248.OAA16181@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10010281015040.25429-100000@auk.stats>

Thank you, now incorporated in R-devel.

On Fri, 27 Oct 2000 paradis@isem.univ-montp2.fr wrote:

> At 11:57 25/10/00 +0100, Brian Ripley wrote:
> >> Date: mer., 25 oct. 2000 12:38:55 +0200
> >> From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
> >
> >> I think it would be nice to have par(ask=T) set by default in termplot(),
> >> like it is in plot.lm().
> >
> >Well, it isn't really the default in plot.lm, the default for `ask' being
> >
> >interactive() && one.fig && length(which) > 1 && .Device != "postscript"
> >
> >Can you supply us with an appropriate patch for termplot and
> >termplot.Rd?  The issue is somewhat subtle.
> 
> So plot.lm() sets 'ask=F' if, eg, par(mfcol=c(2,1)) so that the first 2
> plots cannot be really visualized. Here is a proposed modification for this
> function:
> 
> $ diff plot.lm.R plot.lm.new.R
> 7c7
> <          ask = interactive() && one.fig && length(which) > 1
> ---
> >          ask = interactive() && nb.fig < length(which)
> 52a53
> >    nb.fig <- prod(par("mfcol"))
> 
> 
> 
> The modification for termplot() follows in the same way:
> 
> $ diff termplot.R termplot.new.R
> 3a4,5
> >                      ask = interactive() && nb.fig < n.tms
> >          	     && .Device != "postscript",
> 46a49,55
> >     nb.fig <- prod(par("mfcol"))
> >     one.fig <- prod(par("mfcol")) == 1
> >     if (ask) {
> > 	op <- par(ask = TRUE)
> > 	on.exit(par(op))
> >     }
> >     ##---------- Do the individual plots : ----------
> 
> 
> I have tested both with R-1.1.1 under WinNT and Solaris2.7, and they seem
> to work OK. The corresponding modifications for the .Rd files are:
> 
> $ diff plot.lm.Rd plot.lm.new.Rd
> 11c11
> <         ask = interactive() && one.fig && length(which) > 1
> ---
> >         ask = interactive() && one.fig && nb.fig < length(which)
> 
> $ bdiff termplot.Rd termplot.new.Rd
> 11a12,13
> >          ask = interactive() && one.fig && nb.fig < length(which)
> >          	&& .Device != "postscript",
> 28a31,32
> >   \item{ask}{logical; if \code{TRUE}, the user is \emph{ask}ed before
> >     each plot, see \code{\link{par}(ask=.)}.}
> 
> 
> Emmanuel Paradis
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gnw3@acm.org  Sun Oct 29 13:48:10 2000
From: gnw3@acm.org (gnw3@acm.org)
Date: Sun, 29 Oct 2000 14:48:10 +0100 (MET)
Subject: [Rd] median(c(NA,NA),na.rm=T) fails (PR#713)
Message-ID: <200010291348.OAA22944@pubhealth.ku.dk>

Full_Name: George N. White III
Version: 1.1.1
OS: Linux
Submission from: (NULL) (192.75.95.37)


Calling median(c(NA,NA), ns.rm=T) passes a "null" vector to sort.  I would
expect it to return "NA", as suggested below:

> median
function (x, na.rm = FALSE) 
{
    if (na.rm) 
        x <- x[!is.na(x)]
    else if (any(is.na(x))) 
        return(NA)
    n <- length(x)
    if (n == 0) return(NA)  ################ suggested fix
    half <- (n + 1)/2
    if (n%%2 == 1) {
        sort(x, partial = half)[half]
    }
    else {
        sum(sort(x, partial = c(half, half + 1))[c(half, half + 
            1)])/2
    }
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charlie@stat.umn.edu  Sun Oct 29 15:29:58 2000
From: charlie@stat.umn.edu (charlie@stat.umn.edu)
Date: Sun, 29 Oct 2000 16:29:58 +0100 (MET)
Subject: [Rd] prop.test and x = 0 (PR#714)
Message-ID: <200010291529.QAA23204@pubhealth.ku.dk>

Full_Name: Charles J. Geyer
Version: 1.1.1
OS: linux-gnu
Submission from: (NULL) (134.84.86.22)


prop.test(0, 30)

95 percent confidence interval:
 0.003043053 0.141320480 

Clearly absurd.  You need theory to be this stupid. :-)

I suggest adding

if (p.c >= 1) p.u <- 1

just after line 59 of the current version of prop.test and

if (p.c <= 0) p.l <- 0

just after line 62 of the current version of prop.test.

With these patches, prop.test produces conservative confidence intervals
for all p and n = 30.  The current version fails catastrophically for 0 < p <
.003
where of course it has actual coverage probability zero.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 29 17:17:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Oct 2000 18:17:42 +0100 (MET)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200010291717.SAA23441@pubhealth.ku.dk>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I
am

[...]

> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width
to
> atleast
> 2000!

It's set as macro R_MAX_WIDTH_OPT in Print.h.  All you needed to do is to
change that and re-compile.  Simple, surely?   Even simple things like this
take time to track down and deal with, so it would be appreciated if bug
reporters could contribute to the R project by doing as much as they can
themselves.

Presumably it is there to protect people from themselves, but as e.g.
strings can come out much longer I don't think it is very effective.
Alternatively as it dates from the era of fixed-size output buffers it
might have been to protect R, but that seems no longer necessary,
at least on a Unix console (it might be on other output devices).

I've upped the limit to 10000 and added comments in the help file and
a more informative warning:

> options(width=-17)
Error in options(...) : invalid width parameter, allowed 10...10000


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 11:16:52 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Oct 2000 12:16:52 +0100 (MET)
Subject: [Rd] Printing list elements w/attributes (PR#715)
Message-ID: <200010311116.MAA11720@pubhealth.ku.dk>

This looks wrong {spotted when looking at the confidence interval in 
unclass(t.test(...))}:

l<-list(a=10)
attr(l$a,"xx")<-23
l

R gets

$a
[1] 10
$aattr(,"xx")
[1] 23

Splus has

$a:
[1] 10
attr($a, "xx"):
[1] 23

(Linux/RedHat6.2/ix86, R1.1.1 and current R-devel)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 31 15:28:45 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 31 Oct 2000 10:28:45 -0500
Subject: [Rd] conflicting types for `Rf_stirlerr
Message-ID: <39FEE52D.AED5CE58@bank-banque-canada.ca>

I'm having trouble making todays development snapshot:

-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1

[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel : uname
SunOS
[22] /home/mfa5/gilp/R-versions/R-devel : uname -r
5.6

More complete details follow.

Paul Gilbert
_______

[16] /home/mfa5/gilp/R-versions : tar -xf R-devel.tar
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions :
[17] /home/mfa5/gilp/R-versions : cd R-devel
[18] /home/mfa5/gilp/R-versions/R-devel : ./configure
creating cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.6
loading site script ./config.site
loading build specific script ./config.site
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/home/mfa5/gilp/R-versions/R-devel/tools/install-sh -c
checking build system type... sparc-sun-solaris2.6
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
updating cache ./config.cache
loading cache ./config.cache within ltconfig
checking for object suffix... o
checking for executable suffix... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... yes
checking if gcc supports -fno-rtti -fno-exceptions ... yes
checking if gcc static flag -static works... -static
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking command to parse /usr/ccs/bin/nm -p output... ok
checking how to hardcode library paths into programs... immediate
checking for /usr/ccs/bin/ld option to reload object files... -r
checking dynamic linker characteristics... solaris2.6 ld.so
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... no
checking whether to build static libraries... yes
checking for objdir... .libs
creating libtool
updating cache ./config.cache
loading cache ./config.cache
checking for perl... /usr/bin/perl
checking whether perl version is at least 5... yes
checking for dvips... /apps/asd/unix/teTeX/bin/dvips
checking for tex... /apps/asd/unix/teTeX/bin/tex
checking for latex... /apps/asd/unix/teTeX/bin/latex
checking for makeindex... /apps/asd/unix/teTeX/bin/makeindex
checking for pdftex... /apps/asd/unix/teTeX/bin/pdftex
checking for pdflatex... /apps/asd/unix/teTeX/bin/pdflatex
checking for makeinfo... /apps/asd/unix/teTeX/bin/makeinfo
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for unzip... /usr/bin/unzip
checking for zip... /apps/mfa/bin/zip
checking for gcc... (cached) gcc
checking whether the C compiler (gcc -g -O2 ) works... yes
checking whether the C compiler (gcc -g -O2 ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking for g77... /home/mfa/gilp/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... yes
checking whether the Fortran 77 compiler (g77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... yes
checking whether g77 accepts -g... yes
checking for Fortran 77 libraries...  -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
-L/home/res/public/gnu/sun5.6/lib/gcc-lib/sparc-sun-solaris2.6/2.8.1
-L/home/res/public/gnu/sun5.6/sparc-sun-solaris2.6/lib -L/usr/ccs/bin
-L/usr/ccs/lib -L/home/res/public/gnu/sun5.6/lib -lm
checking whether g77 appends underscores... yes
checking whether g77 and gcc agree on int and double... yes
checking for c++... c++
checking whether the C++ compiler (c++  ) works... yes
checking whether the C++ compiler (c++  ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether c++ accepts -g... yes
checking how to run the C++ preprocessor... c++ -E
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for ATL_xerbla in -latlas... no
checking for dgemm_ in -lcxml... no
checking for dgemm_ in -ldxml... no
checking for dgemm_ in -lscs... no
checking for dgemm_ in -lcomplib.sgimath... no
checking for zherk in -lblas... no
checking for dgemm_ in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking for working alloca.h... yes
checking for alloca... yes
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for access... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for popen... yes
checking for putenv... yes
checking for rint... yes
checking for setenv... no
checking for strcoll... yes
checking for stat... yes
checking for strptime... yes
checking for system... yes
checking for times... yes
checking for unsetenv... no
checking for vsnprintf... yes
checking for strdup... yes
checking for __setfpucw... no
checking whether calloc is broken... no
checking whether finite is broken... no
checking whether log is broken... yes
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for floatingpoint.h... yes
checking for fpu_control.h... no
checking for grp.h... yes
checking for ieee754.h... no
checking for ieeefp.h... yes
checking for locale.h... yes
checking for netdb.h... yes
checking for netinet/in.h... yes
checking for netinet/tcp.h... yes
checking for pwd.h... yes
checking for readline/history.h... no
checking for readline/readline.h... no
checking for rpc/rpc.h... yes
checking for rpc/xdr.h... yes
checking for string.h... yes
checking for sys/param.h... yes
checking for sys/socket.h... yes
checking for sys/stat.h... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/utsname.h... yes
checking for unistd.h... yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking for BSD networking... yes
checking for main in -lz... (cached) no
checking return type of signal handlers... void
checking for pid_t... (cached) yes
checking for size_t... yes
checking for blkcnt_t... yes
checking whether byte ordering is bigendian... yes
checking for working const... yes
checking size of long... 4
checking for finite... (cached) yes
checking for isnan... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for xmkmf... /usr/openwin/bin/xmkmf
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... (cached) no
checking for gethostbyname in -lnsl... (cached) yes
checking for connect... (cached) no
checking for connect in -lsocket... (cached) yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for tclConfig.sh... no
checking for tkConfig.sh... no
checking for tcl.h... no
checking whether leap seconds are counted... no
checking for lpr... lpr
checking for paperconf... false
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating demos/dynload/Makefile
creating doc/Makefile
creating doc/html/Makefile
creating doc/html/search/Makefile
creating doc/manual/Makefile
creating etc/Makefile
creating etc/Makeconf
creating etc/Makeconf-tests
creating share/Makefile
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/library/base/DESCRIPTION
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/ctest/DESCRIPTION
creating src/library/ctest/Makefile
creating src/library/ctest/src/Makefile
creating src/library/eda/DESCRIPTION
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/DESCRIPTION
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/DESCRIPTION
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/DESCRIPTION
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/nls/DESCRIPTION
creating src/library/nls/Makefile
creating src/library/nls/src/Makefile
creating src/library/stepfun/DESCRIPTION
creating src/library/stepfun/Makefile
creating src/library/splines/DESCRIPTION
creating src/library/splines/Makefile
creating src/library/splines/src/Makefile
creating src/library/tcltk/DESCRIPTION
creating src/library/tcltk/Makefile
creating src/library/tcltk/src/Makefile
creating src/library/ts/DESCRIPTION
creating src/library/ts/Makefile
creating src/library/ts/src/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/nmath/standalone/Makefile
creating src/scripts/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rd2contents
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rprof
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build
creating src/scripts/build-help
creating src/scripts/check
creating src/scripts/extract-usage
creating src/unix/Makefile
creating src/unix/X11/Makefile
creating src/unix/gnome/Makefile
creating tests/Makefile
creating tests/Examples/Makefile
creating tools/Makefile
creating tools/Rdnewer
creating tools/help2man
creating tools/keyword-test
creating tools/install-info
creating tools/pkg2tex
creating src/include/config.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  C++ compiler:             c++  -g -O2
  FORTRAN compiler:         g77  -g -O2

  X11 support:              yes
  Gnome support:            no
  Tcl/Tk support:           no

  R profiling support:      no
  Build R shared library:   no

configure: warning: you cannot build info versions of the R manuals
[19] /home/mfa5/gilp/R-versions/R-devel : make
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Nothing to be done for `R'.
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/tools'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/afm'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'

make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html/search'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/html'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc/manual'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/doc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/etc'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/share'
make[1]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
creating src/scripts/R.fe
mkdir ../../bin
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/scripts'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
mkdir ../../include
mkdir ../../include/R_ext
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/include'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
making Rsock.d from Rsock.c
making S_compat.d from S_compat.c
making approx.d from approx.c
making bakslv.d from bakslv.c
making binning.d from binning.c
making chisqsim.d from chisqsim.c
making chull.d from chull.c
making cpoly.d from cpoly.c
making cumsum.d from cumsum.c
making distance.d from distance.c
making fft.d from fft.c
making fmin.d from fmin.c
making fortran.d from fortran.c
making lbfgsb.d from lbfgsb.c
making loglin.d from loglin.c
making lowess.d from lowess.c
making machar.d from machar.c
making maxcol.d from maxcol.c
making massdist.d from massdist.c
making pretty.d from pretty.c
making rowsum.d from rowsum.c
making sock.d from sock.c
making splines.d from splines.c
making stem.d from stem.c
making strsignif.d from strsignif.c
making tabulate.d from tabulate.c
making uncmin.d from uncmin.c
making zeroin.d from zeroin.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c Rsock.c -o Rsock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c S_compat.c -o S_compat.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c approx.c -o approx.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c bakslv.c -o bakslv.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c binning.c -o binning.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chisqsim.c -o chisqsim.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chull.c -o chull.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cpoly.c -o cpoly.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c cumsum.c -o cumsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c distance.c -o distance.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fft.c -o fft.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin.c -o fmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fortran.c -o fortran.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c loglin.c -o loglin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lowess.c -o lowess.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c machar.c -o machar.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c maxcol.c -o maxcol.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c massdist.c -o massdist.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c pretty.c -o pretty.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c rowsum.c -o rowsum.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sock.c -o sock.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c splines.c -o splines.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stem.c -o stem.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c strsignif.c -o strsignif.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c tabulate.c -o tabulate.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c uncmin.c -o uncmin.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c zeroin.c -o zeroin.o
g77   -g -O2 -c ch2inv.f -o ch2inv.o
g77   -g -O2 -c chol.f -o chol.o
g77   -g -O2 -c dpbfa.f -o dpbfa.o
g77   -g -O2 -c dpbsl.f -o dpbsl.o
g77   -g -O2 -c dpoco.f -o dpoco.o
g77   -g -O2 -c dpodi.f -o dpodi.o
g77   -g -O2 -c dpofa.f -o dpofa.o
g77   -g -O2 -c dposl.f -o dposl.o
g77   -g -O2 -c dqrdc.f -o dqrdc.o
g77   -g -O2 -c dqrdc2.f -o dqrdc2.o
g77   -g -O2 -c dqrls.f -o dqrls.o
g77   -g -O2 -c dqrsl.f -o dqrsl.o
g77   -g -O2 -c dqrutl.f -o dqrutl.o
g77   -g -O2 -c dsvdc.f -o dsvdc.o
g77   -g -O2 -c dtrco.f -o dtrco.o
g77   -g -O2 -c dtrsl.f -o dtrsl.o
g77   -g -O2 -c eigen.f -o eigen.o
g77   -g -O2 -c lminfl.f -o lminfl.o
g77   -g -O2 -c blas.f -o blas.o
ar cr libappl.a Rsock.o S_compat.o approx.o bakslv.o binning.o chisqsim.o
chull.o cpoly.o cumsum.o distance.o fft.o fmin.o fortran.o lbfgsb.o loglin.o
lowess.o machar.o maxcol.o massdist.o pretty.o rowsum.o sock.o splines.o stem.o
strsignif.o tabulate.o uncmin.o zeroin.o ch2inv.o chol.o dpbfa.o dpbsl.o dpoco.o
dpodi.o dpofa.o dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o
dtrco.o dtrsl.o eigen.o lminfl.o blas.o
ranlib libappl.a
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/appl'
make[2]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
making mlutils.d from mlutils.c
making d1mach.d from d1mach.c
making i1mach.d from i1mach.c
making fmax2.d from fmax2.c
making fmin2.d from fmin2.c
making fmod.d from fmod.c
making fprec.d from fprec.c
making fround.d from fround.c
making ftrunc.d from ftrunc.c
making sign.d from sign.c
making fsign.d from fsign.c
making fsquare.d from fsquare.c
making fcube.d from fcube.c
making imax2.d from imax2.c
making imin2.d from imin2.c
making chebyshev.d from chebyshev.c
making log1p.d from log1p.c
making lgammacor.d from lgammacor.c
making gammalims.d from gammalims.c
making stirlerr.d from stirlerr.c
making gamma.d from gamma.c
making lgamma.d from lgamma.c
making gamma_cody.d from gamma_cody.c
making beta.d from beta.c
making lbeta.d from lbeta.c
making polygamma.d from polygamma.c
making bessel_i.d from bessel_i.c
making bessel_j.d from bessel_j.c
making bessel_k.d from bessel_k.c
making bessel_y.d from bessel_y.c
making choose.d from choose.c
making snorm.d from snorm.c
making sexp.d from sexp.c
making dgamma.d from dgamma.c
making pgamma.d from pgamma.c
making qgamma.d from qgamma.c
making rgamma.d from rgamma.c
making dbeta.d from dbeta.c
making pbeta.d from pbeta.c
making qbeta.d from qbeta.c
making rbeta.d from rbeta.c
making dunif.d from dunif.c
making punif.d from punif.c
making qunif.d from qunif.c
making runif.d from runif.c
making dnorm.d from dnorm.c
making pnorm.d from pnorm.c
making qnorm.d from qnorm.c
making rnorm.d from rnorm.c
making dlnorm.d from dlnorm.c
making plnorm.d from plnorm.c
making qlnorm.d from qlnorm.c
making rlnorm.d from rlnorm.c
making df.d from df.c
making pf.d from pf.c
making qf.d from qf.c
making rf.d from rf.c
making dt.d from dt.c
making pt.d from pt.c
making qt.d from qt.c
making rt.d from rt.c
making dchisq.d from dchisq.c
making pchisq.d from pchisq.c
making qchisq.d from qchisq.c
making rchisq.d from rchisq.c
making dbinom.d from dbinom.c
making pbinom.d from pbinom.c
making qbinom.d from qbinom.c
making rbinom.d from rbinom.c
making dcauchy.d from dcauchy.c
making pcauchy.d from pcauchy.c
making qcauchy.d from qcauchy.c
making rcauchy.d from rcauchy.c
making dexp.d from dexp.c
making pexp.d from pexp.c
making qexp.d from qexp.c
making rexp.d from rexp.c
making dgeom.d from dgeom.c
making pgeom.d from pgeom.c
making qgeom.d from qgeom.c
making rgeom.d from rgeom.c
making dhyper.d from dhyper.c
making phyper.d from phyper.c
making qhyper.d from qhyper.c
making rhyper.d from rhyper.c
making dnbinom.d from dnbinom.c
making pnbinom.d from pnbinom.c
making qnbinom.d from qnbinom.c
making rnbinom.d from rnbinom.c
making dpois.d from dpois.c
making ppois.d from ppois.c
making qpois.d from qpois.c
making rpois.d from rpois.c
making dweibull.d from dweibull.c
making pweibull.d from pweibull.c
making qweibull.d from qweibull.c
making rweibull.d from rweibull.c
making dlogis.d from dlogis.c
making plogis.d from plogis.c
making qlogis.d from qlogis.c
making rlogis.d from rlogis.c
making dnchisq.d from dnchisq.c
making pnchisq.d from pnchisq.c
making qnchisq.d from qnchisq.c
making dnbeta.d from dnbeta.c
making pnbeta.d from pnbeta.c
making pnf.d from pnf.c
making pnt.d from pnt.c
making ptukey.d from ptukey.c
making qtukey.d from qtukey.c
making wilcox.d from wilcox.c
making signrank.d from signrank.c
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[3]: Entering directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c mlutils.c -o mlutils.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c d1mach.c -o d1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c i1mach.c -o i1mach.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmax2.c -o fmax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmin2.c -o fmin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fmod.c -o fmod.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fprec.c -o fprec.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fround.c -o fround.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c ftrunc.c -o ftrunc.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c sign.c -o sign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsign.c -o fsign.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fsquare.c -o fsquare.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c fcube.c -o fcube.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imax2.c -o imax2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c imin2.c -o imin2.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c chebyshev.c -o chebyshev.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c log1p.c -o log1p.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lgammacor.c -o lgammacor.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c gammalims.c -o gammalims.o
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
stirlerr.c:34: conflicting types for `Rf_stirlerr'
../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
make[3]: *** [stirlerr.o] Error 1
make[3]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/mfa5/gilp/R-versions/R-devel/src'
make: *** [R] Error 1
[20] /home/mfa5/gilp/R-versions/R-devel : uname -a
SunOS mfa99579 5.6 Generic_105181-11 sun4u sparc SUNW,Ultra-5_10
[21] /home/mfa5/gilp/R-versions/R-devel :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 31 15:46:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2000 16:46:43 +0100
Subject: [Rd] conflicting types for `Rf_stirlerr
In-Reply-To: Paul Gilbert's message of "Tue, 31 Oct 2000 10:28:45 -0500"
References: <39FEE52D.AED5CE58@bank-banque-canada.ca>
Message-ID: <x27l6prp24.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm having trouble making todays development snapshot:
> 
> -DHAVE_CONFIG_H   -g -O2 -c stirlerr.c -o stirlerr.o
> stirlerr.c:34: conflicting types for `Rf_stirlerr'
> ../../src/include/R_ext/Mathlib.h:557: previous declaration of `Rf_stirlerr'
> make[3]: *** [stirlerr.o] Error 1

A Mathlib.h got committed when it shouldn't have been. Should be OK in
tomorrows snapshot.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Oct 31 19:57:36 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 31 Oct 2000 14:57:36 -0500 (EST)
Subject: [Rd] Re: [R] Newbie questions
In-Reply-To: <20001031193640.B1043@ps2-4.ucl-41> (message from Zsombor
 Cseres-Gergely on Tue, 31 Oct 2000 19:36:40 +0000)
Message-ID: <200010311957.OAA26707@jessie.research.bell-labs.com>



 -->>> Moved to r-devel from r-help. <<<---



> Date: Tue, 31 Oct 2000 19:36:40 +0000
> From: Zsombor Cseres-Gergely <z.cseres-gergely@ucl.ac.uk>
> Cc: r-help@stat.math.ethz.ch
> References: <Pine.GSO.4.21.0010301459460.14728-100000@atlas.biostat.washington.edu> <6rd7ghhpum.fsf@franz.stat.wisc.edu>
> Sender: owner-r-help@stat.math.ethz.ch
> Precedence: bulk
> 
> On Mon, Oct 30, 2000 at 05:27:29PM -0600, Douglas Bates wrote:
> 
> > You may want to try "make check" after configuring and compiling R.
> > That should use the postscript graphics device driver rather than
> > anything related to X.  We would be very interested in hearing if that
> > succeeds.
> 
> OK, one good and a bad news. Good news is that R runs with option --gui=none.
> It does demo()-s that does not involve graphics. 

That's good to hear.

> 
> Bad news is that make check fails saying: 
> 
> Fatal error: The X11 shared library could not be loaded.
>   The error was /home/zs/R-1.1.1/bin/R_X11.so: undefined symbol: R_GlobalEnv
> 

Just a quick thought....

Rather than being a problem with X11, it looks like it may be a
problem associated with dlopen() when the R_X11.so library is
explicitly loaded during the initialization. Basically, that `library'
(R_X11.so) has to resolve all of the symbols to which it refers, and
many of them are in the R executable (R.bin). Perhaps the linking and
loading mechanisms in Hurd do not export these symbols from the
application in a way that shared libraries can find them.  Or it may
be as simple as the flag passed to dlopen() not being RTLD_GLOBAL
(although that shouldn't matter).

A mechanism that Luke and I chatted about that could tidy up some of
these things is to link both R.bin and also R_X11.so against libR.so.
So R.bin would consist of a single routine main() that initialized R
and run the mainloop.  As long as this doesn't introduce a noticeable
performance penalty, it might be worth doing to simplify setups like
this one and reduce the dependency on the non-standard behaviour of
dlopen().

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://stat.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

