From telford@progsoc.uts.edu.au  Tue Aug  1 07:06:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 1 Aug 2000 16:06:06 +1000
Subject: [Rd] Using the nls package
In-Reply-To: <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>; from ripley@stats.ox.ac.uk on Mon, Jul 31, 2000 at 07:20:32AM +0100
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>
Message-ID: <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>

On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> 
> How can you be sure?  What are `the same numbers'?  The parameters
> unchanged to machine precision, yes, but that's not what you print.

The only safe way I can think of would be to go for machine precision
as the default and then have some user-settable threshold for:

	( current residual / previous residual )

> > Yes, this is understandable but if most people are like me (questionable
> > assumption I admit) they try a few artificial examples first to get
> > the general idea of how these things work. I guess there is a certain
> > illogical assumption that if I try what seems to me to be an obviously
> > easy problem and it cannot handle it then something must be wrong and
> > trying harder problems is not going to help.
> 
> Perhaps you need to read up on the algorithmic theory so you are not so
> easily confused.  NLS problems with an exact-fit solution are a different
> sub-class with different effective algorithms.

Undoubtably there is a lot more reading that I can do to improve
my understanding. I'm just making a suggestion based on the observation
that the algorithm actually found the right answer very quickly.

> > SQUARES of the modulus of the residuals. Using the modulus itself
> > would be similar to using the absolute value of the residuals in the
> > non-complex case (not what we want I believe).
> 
> Sum of squares is common, and ises for complex linear regression in those
> cases where it makes sense (e.g. in time series regression one
> FFT-ed series on others).

As it turns out, I am working with FFT data, I am looking for a transfer
function that will fit some admittance measurements.

> > In either case, the documentation should mention that complex
> > numbers are not supported.
> 
> Why should documentation mention everything the function does not do? There
> are *lots* of places in R where numeric quantities must be real.  Linear
> regression (lm) for a start.  What nls says is
> 
>  formula: a nonlinear model formula including variables and parameters
> 
> which is none too explicit, but the reference (Bates & Watts) is,
> so I assume you did not read it.

The UTS library does have a copy but it isn't due back till September.

I searched a few of the local bookshops (over the internet) and
Diana Bates (with her children's stories) came up infinitely more often
than Douglas Bates and his regression. I will have to search the
University Co-op bookshop with my hands because the recent introduction of
GST has blown up their webpage.

Douglas, if you are reading this, what say you help me understand the
code in nls.R and nls.c and I'll promise to buy your book (though it could
take me a while to mail-order it in) ?

> A pretty good reasonable assumption is that statistics does not work
> in complexe numbers unless explicitly stated.

Consider also the case for fitting higher dimensional REAL data.
Admittedly, this is a contrived example but you may have an experiment
with one input variable and three output variables. You know from theory
that the output variables are all related to each other by some function
but you need to find particular parameters in that function:

> d <- data.frame( x=1:10 )
> d$y <- eval( expression( outer( x, 1:3 )), d )
> d$y <- d$y + rnorm( length( d$y ))
> library( nls )
> w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
Error in qr.qty(QR, resid) : qr and y must have the same number of rows

If the nls system supported these `wide' problems properly then complex
number support could just be recast as a special case of the same.
>From a mathematical point of view, this sort of regression can be recast
into a normal regression but with more sample points (and each sample
point repeated N times) and with a bogus input variable that gives the
column number. Thus, the same fundamental algorithm must work for both
cases if the structure of the data is suitably munged around.

I've been looking through the code in nls.c and nls.R quite closely and
I can see a lot of stuff which seems to be catering to cases of various
dimensional objects. I cannot fully comprehend what it does and I cannot
get a high dimensional case (such as the above) to work properly.

The crux of it seems to be that qr() needs a matrix to work on
so it uses as.matrix() to coerce its input. If you feed it a vector
you get a column matrix (sounds good), if you feed it a matrix you
have no problem, if you feed it a high dimensional tensor you get
a column vector (which surprised me), and qr() goes with that:

> dim( qr( 1:10 )$qr )
[1] 10  1
> dim( qr( outer( 1:3, 1:5 ))$qr )
[1] 3 5
> dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
[1] 24  1

The result is that the nls model comes to grief when it feeds
the three dimensional tensor into qr() then what it gets back
(i.e. a long, thin column matrix) does not match up with anything.

>  That's why in R
> 
> > sqrt(-1)
> [1] NaN
> Warning message: 
> NaNs produced in: sqrt(-1) 

But sqrt() DOES support complex numbers... so the assumption is that
most users will not expect complex numbers to crop up in their calculations
unless they were deliberately put there, but once deliberatly put there,
they work properly.

I would be happy to see two examples added to the documentation for sqrt,
those being sqrt(-1) and sqrt(-1+0i).

	- Tel



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  1 10:02:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 1 Aug 2000 11:02:05 +0200 (MET DST)
Subject: [Rd] anova() on three or more objects behaves inconsistently (PR#621)
Message-ID: <200008010902.LAA18683@pubhealth.ku.dk>

anova() on three or more objects behaves inconsistently in R.

In R anovalist.lm does a sequential ANOVA using pairwise F tests,
ignoring all the other objects, so the larger of the two models
provides the denominator.

In S anova.lmlist uses the denominator from the largest model (smallest
residual df) in the set, as does anova.glmlist in both.

I suggest that R's anovalist.lm is wrong (that might be a matter of opinion
and can certainly be argued), but anovalist.lm and anova.glmlist should
agree.

?anova says in R

     When given a sequence of objects, `anova' tests the models against
     one another in the order specified.

and in S

       When two or more objects are used in the call,  a  similar
       table  is  produced  showing  the  effects of the pairwise
       differences between the  models,  considered  sequentially
       from first to last.

neither of which are clear enough to disambiguate this.


Example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
quine.lo <- aov(log(Days+2.5) ~ 1, quine)
anova(quine.hi, quine.nxt, quine.lo)

quine.hi1 <- glm(log(Days + 2.5) ~ .^4, data=quine)
quine.nxt1 <- update(quine.hi1, . ~ . - Eth:Sex:Age:Lrn)
quine.lo1 <- glm(log(Days+2.5) ~ 1, data=quine)
anova(quine.hi1, quine.nxt1, quine.lo1, test="F")

S:

  Resid. Df      RSS             Test  Df Sum of Sq  F Value     Pr(F) 
1       118  63.3104                                                  
2       120  64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145 106.7871                  -25 -42.68810 3.182542 0.0000131

...

  Resid. Df Resid. Dev             Test  Df  Deviance  F Value     Pr(F) 
1       118    63.3104                                                  
2       120    64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145   106.7871                  -25 -42.68810 3.182542 0.0000131

R:
Analysis of Variance Table

Model 1: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 2: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 3: log(Days + 2.5) ~ 1
  Res.Df Res.Sum Sq  Df  Sum Sq F value    Pr(>F)
1    118     63.310                              
2    120     64.099  -2  -0.789  0.7350    0.4817
3    145    106.787 -25 -42.688  3.1967 1.148e-05

[The F value and p value are different here.]

...

  Resid. Df Resid. Dev  Df Deviance       F    Pr(>F)
1       118     63.310                               
2       120     64.099  -2   -0.789   0.735    0.4817
3       145    106.787 -25  -42.688   3.183 1.306e-05

As of the current patched version of R anova.glmlist is consistent when
reversing the order of the objects.


Also, the labelling is inconsistent, and for both is not very helpful:

> anova(quine.hi1, quine.nxt1, quine.lo1)
Analysis of Deviance Table 

Response: log(Days + 2.5)
                                                                         Resid. Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        118
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        120
1                                                                              145
                                                                         Resid. Dev
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      63.310
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      64.099
1                                                                           106.787
                                                                          Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",     
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",   -2
1                                                                        -25
                                                                         Deviance
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",          
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",    -0.789
1                                                                         -42.68

which gives problems later as the row names are not unique.



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = July
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Aug  1 16:03:44 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Aug 2000 10:03:44 -0500
Subject: [Rd] Using the nls package
In-Reply-To: Telford Tendys's message of "Tue, 1 Aug 2000 16:06:06 +1000"
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats> <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>
Message-ID: <6rvgxl9g6n.fsf@franz.stat.wisc.edu>

Telford Tendys <telford@progsoc.uts.edu.au> writes:

> On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> > 
> > How can you be sure?  What are `the same numbers'?  The parameters
> > unchanged to machine precision, yes, but that's not what you print.
> 
> The only safe way I can think of would be to go for machine precision
> as the default and then have some user-settable threshold for:
> 
> 	( current residual / previous residual )

A more common way of defining a criterion like that would be
    (previous RSS - current RSS)/(previous RSS)
if you have ensured that your algorithm cannot increase the RSS
(residual sum-of-squares) from one iteration to the next.

However, any such criterion that is based on the progress of the
iterations, instead of being based solely on the current position as
the orthogonality criterion is, exposes you to the danger of declaring
convergence when the algorithm has not reached the optimum.
B. D. McCullough has written several papers comparing the performance
of different statistical and econometrics packages on test problems,
frequently the test problems called the StRD prepared by NIST, the
National Institute for Standards and Technology in the USA.  (There is
a package called NISTnls on CRAN that contains that data sets for the
nonlinear least squares problems in the StRD.  You can run all those
tests with the shell command 'R CMD check NISTnls' after installing
that package.)  Some of the references by McCullough are

B. D. McCullough (1998), "Assessing the Reliability of Statistical
  Software: Part I", The American Statistician, 52(4), 358-366
B. D. McCullough (1999), "Assessing the Reliability of Statistical
  Software: Part II", The American Statistician, 53(2), 149-159
B. D. McCullough (1999), "Econometric Software Reliability: E-VIEWS,
  LIMDEP, SHAZAM, and TSP", Journal of Applied Econometrics, 14(2),
  191-202.
B. D. McCullough and Berry Wilson (1999), "On the Accuracy of
  Statistical Procedures in Microsoft EXCEL 97", Computational
  Statistics and Data Analysis, 31(1), 27-37.
B. D. McCullough (1999), "Experiences with the StRD: Application and
  Interpretation", in _Computing Science and Statistics_, 31, 16-21.

In that last paper listed above, McCullough writes:
 The StRD has been applied both formally and informally to over a
 dozen of the most popular statistics and econometrics packages, and
 only two of them have not produced nonlinear "solutions" with zero
 digits of accuracy: the statistical package S-PLUS (with analytic
 derivatives) and the econometrics package TSP (which has automatic
 analytic differentiation).

As I had a hand in writing the nls functions for both S-PLUS and R, I
happen to know that the algorithms are similar although the
implementations are quite different.  These functions are not fooled
into declaring convergence prematurely because they use the
orthogonality convergence criterion.

If we were to start introducing all kinds of ad-hoc rules for
declaring convergence in nls, simply to handle those cases of
artificial data that are generated without noise, we would run the
risk of ruining the good behavior of an algorithm that gives a
reliable indication of convergence.

> > > Yes, this is understandable but if most people are like me (questionable
> > > assumption I admit) they try a few artificial examples first to get
> > > the general idea of how these things work. I guess there is a certain
> > > illogical assumption that if I try what seems to me to be an obviously
> > > easy problem and it cannot handle it then something must be wrong and
> > > trying harder problems is not going to help.
> > 
> > Perhaps you need to read up on the algorithmic theory so you are not so
> > easily confused.  NLS problems with an exact-fit solution are a different
> > sub-class with different effective algorithms.
> 
> Undoubtably there is a lot more reading that I can do to improve
> my understanding. I'm just making a suggestion based on the observation
> that the algorithm actually found the right answer very quickly.

> I searched a few of the local bookshops (over the internet) and
> Diana Bates (with her children's stories) came up infinitely more often
> than Douglas Bates and his regression. I will have to search the
> University Co-op bookshop with my hands because the recent introduction of
> GST has blown up their webpage.
> 
> Douglas, if you are reading this, what say you help me understand the
> code in nls.R and nls.c and I'll promise to buy your book (though it could
> take me a while to mail-order it in) ?
> 
> > A pretty good reasonable assumption is that statistics does not work
> > in complexe numbers unless explicitly stated.
> 
> Consider also the case for fitting higher dimensional REAL data.
> Admittedly, this is a contrived example but you may have an experiment
> with one input variable and three output variables. You know from theory
> that the output variables are all related to each other by some function
> but you need to find particular parameters in that function:
> 
> > d <- data.frame( x=1:10 )
> > d$y <- eval( expression( outer( x, 1:3 )), d )
> > d$y <- d$y + rnorm( length( d$y ))
> > library( nls )
> > w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
> Error in qr.qty(QR, resid) : qr and y must have the same number of rows
> 
> If the nls system supported these `wide' problems properly then complex
> number support could just be recast as a special case of the same.
> >From a mathematical point of view, this sort of regression can be recast
> into a normal regression but with more sample points (and each sample
> point repeated N times) and with a bogus input variable that gives the
> column number. Thus, the same fundamental algorithm must work for both
> cases if the structure of the data is suitably munged around.

Such "wide" data are also the subject of a considerable amount of
research.  Usually the criterion used for parameter estimation is the
product of the singular values of the residual matrix, not simply the
sum of the squares of the residuals.  There is an entire chapter in
Bates and Watts (1988) devoted to the analysis of such multiresponse
data, including discussion of algorithms.  At present these algorithms
are not implemented in R.

> I've been looking through the code in nls.c and nls.R quite closely and
> I can see a lot of stuff which seems to be catering to cases of various
> dimensional objects. I cannot fully comprehend what it does and I cannot
> get a high dimensional case (such as the above) to work properly.
> 
> The crux of it seems to be that qr() needs a matrix to work on
> so it uses as.matrix() to coerce its input. If you feed it a vector
> you get a column matrix (sounds good), if you feed it a matrix you
> have no problem, if you feed it a high dimensional tensor you get
> a column vector (which surprised me), and qr() goes with that:
> 
> > dim( qr( 1:10 )$qr )
> [1] 10  1
> > dim( qr( outer( 1:3, 1:5 ))$qr )
> [1] 3 5
> > dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
> [1] 24  1
> 
> The result is that the nls model comes to grief when it feeds
> the three dimensional tensor into qr() then what it gets back
> (i.e. a long, thin column matrix) does not match up with anything.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Aug  2 10:10:39 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008020910.LAA27253@pubhealth.ku.dk>


It is quite tempting to start simple data entry sessions where
you need to type in the data like this:

my.frame<-data.frame(a=numeric(0),b=numeric(0))
fix(my.frame)

(and if factors are involved, that is pretty much what you'd have to do
in order to get the appropriate levels)

However, in the X version, this seems to cause the data editor to
freeze as soon as one hits Enter after inserting data into the
first cell. I haven't tried the Windows version yet.

[This is something it would be nice to have resolved in 1.1.1]

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = August
 day = 1
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Aug  2 11:08:11 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Wed, 2 Aug 2000 18:08:11 +0800 (WST)
Subject: [Rd] Installing R-1.1.0 (PR#612)
In-Reply-To: <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
References: <14712.8366.469912.970376@bossiaea.maths.uwa.edu.au>
 <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
Message-ID: <14727.62219.589371.855349@bossiaea.maths.uwa.edu.au>

Dear Brian,

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  >> My system is essentially a RedHat 6.0 with a 2.2.10 kernel.
  >> 
  >> I am using the Pentium GCC (http://www.goof.com/pcg/)
  >> 
  >> bossiaea:/opt/R/R-1.1.0$ which gcc /usr/local.own/bin/gcc
  >> bossiaea:/opt/R/R-1.1.0$ gcc --version pgcc-2.91.60

  BDR> I suspect a bug in that compiler, as you had problems with NAs,
  BDR> and that is the only thing that seems different from known
  BDR> working setups.  My suggestion would be to use gcc-2.95.2,
  BDR> which I compiled from source and works well for us on RH6.0.
  BDR> Or even try the compiler that comes with RH6.0 (egcs-2.91.66, I
  BDR> believe).
I finally got around to download the sources of gcc-2.95.2 and
installing it.  R-1.1.0 (and all packages that I install on my system)
compiled with gcc-2.95.2 now pass `make check'.  So I guess your
suspicion was correct.

Thanks for the help.

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:35:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2000 14:35:42 +0200
Subject: [Rd] data editor freeze on empty data frame (PR#622)
In-Reply-To: pd@blueberry.kubism.ku.dk's message of "Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)"
References: <200008020910.LAA27253@pubhealth.ku.dk>
Message-ID: <x2lmyf96xt.fsf@blueberry.kubism.ku.dk>

pd@blueberry.kubism.ku.dk writes:

> However, in the X version, this seems to cause the data editor to
> freeze as soon as one hits Enter after inserting data into the
> first cell. I haven't tried the Windows version yet.

Freezes the windows version as well, it seems. Also, the code for
editing factors using their numeric codes seems to have been broken in
1.1.0 (only converts back to factor if there are invalid levels). I'll
fix the latter.

[I'm also not happy with the code that autoinserts mistyped or
otherwise extraneous factor levels -- if they really are typos,
they'll be a pain to remove if one used fix(my.frame)! That
may be against policy to change in a patch release, though...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:55:39 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 2 Aug 2000 14:55:39 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#623)
Message-ID: <200008021255.OAA00687@pubhealth.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> (from R-help)
>     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> 
>     >  > > generated by R into a latex document.  Specifically, the latex package
>     >  > > graphicsx allow you to specify the bounding box of the postscript
>     >  > > file, so that you can just show _part_ of the postscript file if you
>     >  > > tell it to also clip the area outside of the bounding box.
>     > ...
>     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
>     >  > shouldn't do that, one should bracket clipped graphics within
>     >  > gsave/grestore instead. Sounds a bit tricky to get right.
>     > 
>     > Thanks.  To solve my current problem, I changed the definition of the
>     > `cl' operator in the postscript file to:
>     > 
>     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
>     >        4 -1 roll lineto  exch 1 index lineto lineto
>     >        closepath clip grestore newpath } def
>     > 
>     > [i.e. just adding the gsave ... grestore pair]
>     > 
>     > Whether this is the proper solution though is another matter...
> 
>     PD> It isn't. It grestore-s before actually plotting the stuff that
>     PD> needs to be clipped, so effectively you just disabled R's
>     PD> clipping. A better way would be to start the plotting with a "gs"
>     PD> and have
> 
>     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> 	   4 -1 roll lineto  exch 1 index lineto lineto
> 	   closepath clip newpath } def
> 
>     PD> and end everything with a "gr". Not too sure that is perfectly
>     PD> safe, though...
> 
> Are you working on this, Peter?
> Otherwise, "R-bugs" should probably get about the above report..

Done... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug  2 14:10:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 2 Aug 2000 14:10:21 +0100 (BST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008021310.OAA24728@toucan.stats.ox.ac.uk>


> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] data editor freeze on empty data frame (PR#622)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Aug 2000 14:35:42 +0200
> 
> pd@blueberry.kubism.ku.dk writes:
> 
> > However, in the X version, this seems to cause the data editor to
> > freeze as soon as one hits Enter after inserting data into the
> > first cell. I haven't tried the Windows version yet.
> 
> Freezes the windows version as well, it seems. Also, the code for
> editing factors using their numeric codes seems to have been broken in
> 1.1.0 (only converts back to factor if there are invalid levels). I'll
> fix the latter.

Found and corrected: an infinite loop in getccol when the length
was zero, of very long standing.

> [I'm also not happy with the code that autoinserts mistyped or
> otherwise extraneous factor levels -- if they really are typos,
> they'll be a pain to remove if one used fix(my.frame)! That
> may be against policy to change in a patch release, though...]

Until the data editor has a mode for factors, the current compromise,
to edit as character, seems the best one to me.  Using cut and paste
helps to eliminate typos.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug  2 17:40:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 2 Aug 2000 18:40:46 +0200 (MET DST)
Subject: [Rd] text( * , xpd = vv )  doesn't work and help(text.default) is wrong (PR#624)
Message-ID: <200008021640.SAA02325@pubhealth.ku.dk>

example(barplot)

calls an example of   text( ... , xpd = NA) 
which *did* work in earlier versions of R till 0.99, but has stopped
working since 1.0.0.
Only the global value, par("xpd"), is used to decide if text is clipped.

A simple example is

  plot(1); text(1,1.44,"BLA", col = "blue", cex = 2, xpd=F)

Also, ?text  doesn't mention the  xpd and 2 other parameters that
text.default explicitly has.

I'm about to try to fix this for 1.1.1
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:39:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
Message-ID: <200008022039.WAA03146@pubhealth.ku.dk>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:38:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex
 (PR#623)
In-Reply-To: <200008021255.OAA00687@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10008022134410.230-100000@tern.stats>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  3 16:32:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2000 17:32:39 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)"
References: <200008022039.WAA03146@pubhealth.ku.dk>
Message-ID: <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > 	   closepath clip newpath } def
> > > 
> > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > >     PD> safe, though...


>     The postscript produced by R is EPS (Encapsulated PostScript)
>     compatible,
> 
> yet initclip is not allowed in EPS files (PostScript Language Reference
> Manual, 2nd edition).  

Exactly. 

> I think the statement was possibly true once ....

I don't think so. This is a design problem.

Unfortunately, the simple fix above doesn't seem to work [for rather
foreseeable reasons]. mosaicplot() seems to crash ghostview and even
plot(1:10) comes out without axis titles. 

The latter item occurs because we're doing

clip(region1)
set font
draw text
clip(region2)
draw more text in same font

but restoring the graphics context prior to the first clipping 
requires the font to be set once again. And there are probably many
similar problems. Sigh. 

Paul, are you around?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Aug  4 00:13:27 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 4 Aug 2000 11:13:27 +1200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <003d01bffda0$6e4fee30$175dd882@stat.auckland.ac.nz>

hi


> > yet initclip is not allowed in EPS files (PostScript Language Reference
> > Manual, 2nd edition).
>
> Exactly.
>
> > I think the statement was possibly true once ....
>
> I don't think so. This is a design problem.
>
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles.
>
> The latter item occurs because we're doing
>
> clip(region1)
> set font
> draw text
> clip(region2)
> draw more text in same font
>
> but restoring the graphics context prior to the first clipping
> requires the font to be set once again. And there are probably many
> similar problems. Sigh.
>
> Paul, are you around?


Yes I'm around (I'm just concealed by my teaching load).  However, I may not
be much help.  This seems to be a problem with the definitions in the
postscript file header (set up in PSFileHeader).  [Trying not to sound like
I'm dodging a bullet ...] I have never delved too deeply into these so I
cannot really comment on their goodness or badness.  AFAIK this is all
pretty original stuff (by Ross ?), but I'm not sure what it was based on.
Something Ross has mentioned to me a couple of times is a library which
allows you to write C-like code which then gets processed into (correct,
efficient) postscript.  Maybe this would be a good solution (i.e., piggyback
on some other code which has got all of the postscript stuff properly sorted
out).  Sorry I can't be more help at this stage.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  4 08:48:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 4 Aug 2000 08:48:03 +0100 (GMT Daylight Time)
Subject: [Rd] binary file access package
Message-ID: <Pine.WNT.4.05.10008040839430.70-100000@tern.stats>

The src/contrib/Devel section on CRAN now has a package Rstreams for binary
file access, and there is also a pre-compiled Windows version on CRAN.

This was originally written by Duncan Murdoch using Delphi and the compiled
code has been re-written by me in C.  One of the demo applications included
is reading S binary objects (data objects, not language objects
such as functions) into R.

The main reason this is in Devel is that it should probably interact with
planned developments on file access (`connections') for future R versions.
It has a configure script, and runs on Solaris, Linux and Windows at least.

Future plans include the ability to read S's data.dump files.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  4 16:45:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2000 17:45:42 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: Peter Dalgaard BSA's message of "03 Aug 2000 17:32:39 +0200"
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2u2d158t5.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > > 	   closepath clip newpath } def
> > > > 
> > > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > > >     PD> safe, though...
...
> 
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles. 

However, fixing the font issue seems to have done the trick. Fix
committed to the development branch (to become R 1.2). I'm not
trusting that fix enough to let it go into 1.1.1.

Here's the patch in case someone needs it:


$ cvs diff -ur 1.29 src/main/devPS.c
Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.29
retrieving revision 1.30
diff -u -r1.29 -r1.30
--- src/main/devPS.c    2000/06/27 22:26:19     1.29
+++ src/main/devPS.c    2000/08/04 15:35:33     1.30
@@ -549,10 +549,10 @@
     fprintf(fp, "/gs  { gsave } def\n");
     fprintf(fp, "/gr  { grestore } def\n");
     if (landscape)
-       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate} def\n", paperwidth);
+       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate gs } def\n", paperwidth);
     else
-       fprintf(fp, "/bp  { gs } def\n");
-    fprintf(fp, "/ep  { showpage gr } def\n");
+       fprintf(fp, "/bp  { gs gs } def\n");
+    fprintf(fp, "/ep  { showpage gr gr } def\n");
     fprintf(fp, "/m   { moveto } def\n");
     fprintf(fp, "/l   { lineto } def\n");
     fprintf(fp, "/np  { newpath } def\n");
@@ -569,7 +569,7 @@
     fprintf(fp, "       ps mul neg 0 2 1 roll rmoveto\n");
     fprintf(fp, "       1 index stringwidth pop\n");
     fprintf(fp, "       mul neg 0 rmoveto show grestore } def\n");
-    fprintf(fp, "/cl  { initclip newpath 3 index 3 index moveto 1 index\n");
+    fprintf(fp, "/cl  { gr gs newpath 3 index 3 index moveto 1 index\n");
     fprintf(fp, "       4 -1 roll lineto  exch 1 index lineto lineto\n");
     fprintf(fp, "       closepath clip newpath } def\n");
     fprintf(fp, "/rgb { setrgbcolor } def\n");
@@ -1133,6 +1133,8 @@
     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 
     PostScriptSetClipRect(pd->psfp, x0, x1, y0, y1);
+    /* clipping does grestore so invalidate current font */
+    pd->fontsize = -1; 
 }
 
 static void PS_Resize(DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Aug  4 17:37:33 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 4 Aug 2000 18:37:33 +0200 (MET DST)
Subject: [Rd] Inverting matrix...
Message-ID: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>

Dear all,

Either I'm being totally blind now (as you know, the eyes are the first
thing that is blinded :-)), or something is missing in 
"An Introduction to R". The section heading of section 5.7.1 is
"Multiplication, inversion and solving linear equations", and since I was
looking for the canonical way of inverting a matrix, this was the place to
look. However, I found that solve() was not mentioned, I found that
strange... Was something forgotten here? :-)

I found the answer to my question in V&R, so don't be bothered about that,
but I thought you'd like to be told when things are unclear in the docs.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Aug  6 16:08:09 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 6 Aug 2000 23:08:09 +0800 (GMT-8)
Subject: [Rd] make pkg on windows NT
Message-ID: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>

Hi,

I am trying to compile a package i am developing on my home computer where
i am running Windows NT 4.0 service pack 6. Everything works fine on my
other computer at work running windows 98.

I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
version 2.95.2-1
installed seperately and first in the path. I have active perl 6.16 
as well. Here is the error I get when i run the make pkg-  script from the
gnuwin32 directory

bash-2.03$ make DEBUG=T pkg-maptools
make DLLNM=  EXTRADOCS= \
  -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
RLIB=
c:/Rnew/rw1010/library \
  -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
Syntax error: Unterminated quoted string
make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
make: *** [pkg-maptools] Error 2

also here is my R version info
$platform
[1] "Windows"
$arch
[1] "x86"
$os
[1] "Win32"
$system
[1] "x86, Win32"
$status
[1] ""
$major
[1] "1"
$minor
[1] "1.0"
$year
[1] "2000"
$month
[1] "June"
$day
[1] "15"
$language
[1] "R"


Oh and one last Question, I noted on Dr. Ripley's RTools page that he
recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
version. I have not noticed any problems yet with other stuff i have
compiled, are there any problems dynamically linking code built with the
other version that I am unaware Of?

thanks
Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  6 17:41:14 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 6 Aug 2000 17:41:14 +0100 (BST)
Subject: [Rd] make pkg on windows NT
In-Reply-To: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10008061738160.6687-100000@auk.stats>

On Sun, 6 Aug 2000, Nicholas Lewin-Koh wrote:

> Hi,
> 
> I am trying to compile a package i am developing on my home computer where
> i am running Windows NT 4.0 service pack 6. Everything works fine on my
> other computer at work running windows 98.
> 
> I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
> version 2.95.2-1
> installed seperately and first in the path. I have active perl 6.16 
> as well. Here is the error I get when i run the make pkg-  script from the
> gnuwin32 directory
> 
> bash-2.03$ make DEBUG=T pkg-maptools
> make DLLNM=  EXTRADOCS= \
>   -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
> RLIB=
> c:/Rnew/rw1010/library \
>   -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
> make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
> Syntax error: Unterminated quoted string
> make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
> make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
> make: *** [pkg-maptools] Error 2

That means that you have the wrong make and/or the wrong sh.  You need the
set in the tools distribution: certain Cygwin ones work but most do not. We
find it very frustrating too.


> Oh and one last Question, I noted on Dr. Ripley's RTools page that he
> recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
> version. I have not noticed any problems yet with other stuff i have
> compiled, are there any problems dynamically linking code built with the
> other version that I am unaware Of?

Yes. It won't work on many Windows 95 machines, as that page says.
If that is not an issue for you, by all means use the msvcrt version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug  7 06:15:06 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 Aug 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008070515.HAA08465@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 611 *
Subject: bug in loess
From: hdrees@statlab.uni-heidelberg.de
Date: Wed, 19 Jul 2000 17:47:04 +0200 (MET DST)
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 584 *
Subject: par(lty = "1") -- lty storage-etc bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 27 Jun 2000 09:11:36 +0200 (CEST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 612 *
Subject:  Installing R-1.1.0 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Thu, 20 Jul 2000 14:50:21 +0800
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400

Directory:  Language

* PR# 589 *
Subject: Bug with lists and expressions
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 04 Jul 2000 02:26:41 GMT
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 608 *
Subject: seg.fault in eval.c
From: Adrian Vance Custer <acuster@nopause.berkeley.edu>
Date: Sat, 15 Jul 2000 01:22:23 -0700
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 621 *
Subject: anova() on three or more objects behaves inconsistently
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 1 Aug 2000 10:02:18 +0100 (BST)
* PR# 600 *
Subject: Faulty handling of aliasing in predict.lm; wrong constant
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 12 Jul 2000 14:46:56 +1000

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
* PR# 615 *
Subject: binomial()
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 18:11:17 -0400
* PR# 614 *
Subject: scoping problems
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 17:48:49 -0400
* PR# 618 *
Subject: min(c()) = inf ???
From: Peter Malewski <y0004379@tu-bs.de>
Date: Wed, 26 Jul 2000 13:57:32 +0200 (METDST)
* PR# 617 *
Subject: Bug in stem?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Wed, 26 Jul 2000 11:28:04 +0200
* PR# 622 *
Subject:  data editor freeze on empty data frame 
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Wed, 2 Aug 2000 11:17:04 +0200
* PR# 619 *
Subject: Re: [R] gremlin in rep()
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Fri, 28 Jul 2000 08:20:21 -0700 (PDT)
* PR# 624 *
Subject: text( * , xpd = vv )  doesn't work and help(text.default) is wrong
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 2 Aug 2000 18:40:54 +0200 (CEST)
* PR# 623 *
Subject: Re: [R] problem clipping R postscript plots within latex
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 02 Aug 2000 15:01:52 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  7 13:54:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Aug 2000 14:54:08 +0200 (CEST)
Subject: [Rd] Inverting matrix...
In-Reply-To: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
References: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
Message-ID: <14734.45424.235538.710068@gargle.gargle.HOWL>

>>>>> "Kjetil" == Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

    Kjetil> Dear all, Either I'm being totally blind now (as you know, the
    Kjetil> eyes are the first thing that is blinded :-)), or something is
    Kjetil> missing in "An Introduction to R". The section heading of
    Kjetil> section 5.7.1 is "Multiplication, inversion and solving linear
    Kjetil> equations", and since I was looking for the canonical way of
    Kjetil> inverting a matrix, this was the place to look. However, I
    Kjetil> found that solve() was not mentioned, I found that
    Kjetil> strange... Was something forgotten here? :-)

    Kjetil> I found the answer to my question in V&R, so don't be bothered
    Kjetil> about that, but I thought you'd like to be told when things are
    Kjetil> unclear in the docs.

Thanks a lot Kjetil!

I've just committed a fix to this "documentation bug" for R 1.1.1, i.e.
R-release/patched

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 19:43:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
Message-ID: <200008071843.UAA03236@pubhealth.ku.dk>

predict.lm has been broken by recent changes to the patched branch.

It fails for all singular fits.  An example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
predict(quine.nxt)
  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
141 142 143 144 145 146 
 NA  NA  NA  NA  NA  NA 

The answeer should be (e.g. R 1.1.0)

> predict(quine.nxt)
      1       2       3       4       5       6       7       8 
2.19247 2.19247 2.19247 2.68311 2.68311 2.68311 2.68311 2.68311 
      9      10      11      12      13      14      15      16 
2.37260 2.37260 2.37260 2.53960 2.53960 3.53516 3.53516 3.53516 
     17      18      19      20      21      22      23      24 
3.53516 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 
     25      26      27      28      29      30      31      32 
3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 2.03746 
...

I believe this is a lot worse than that which the changes were intended to
fix. (Are we not supposed to be ultra-cautious about not making things
worse in that branch?)

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
status   Patched             
major    1                   
minor    1.0                 
year     2000                
month    August              
day      7                   
language R                   

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 20:30:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 21:30:43 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)"
References: <200008071843.UAA03236@pubhealth.ku.dk>
Message-ID: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> predict.lm has been broken by recent changes to the patched branch.
> 
> It fails for all singular fits.  An example:
> 
> library(MASS)
> data(quine)
> quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
> quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
> predict(quine.nxt)
>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
>  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
...
> I believe this is a lot worse than that which the changes were intended to
> fix. (Are we not supposed to be ultra-cautious about not making things
> worse in that branch?)

Sometimes the fix for one bug uncovers another. We have

> coef.aov
function (object, ...) 
{
    z <- object$coef
    z[!is.na(z)]
}
> coef.lm 
function (object, ...) 
object$coefficients

and both of these cannot be right when predict.lm calls coef(object)
and object$coefficients contains NA's. Using object$coefficients
inside predict.lm fixes things, but I'm still not happy with the two
different conventions for coef...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:18 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
Message-ID: <200008071958.VAA03515@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:22 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 7 Aug 2000 12:58:22 -0700 (PDT)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#626)
In-Reply-To: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0008071248130.17749-100000@atlas.biostat.washington.edu>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 22:06:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 23:06:56 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
In-Reply-To: thomas@biostat.washington.edu's message of "Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)"
References: <200008071958.VAA03515@pubhealth.ku.dk>
Message-ID: <x2og34232n.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> > > coef.aov
> > function (object, ...) 
> > {
> >     z <- object$coef
> >     z[!is.na(z)]
> > }
> > > coef.lm 
> > function (object, ...) 
> > object$coefficients
> 
> Ok, this explains it.  I *did* test it with a singular fit, but only with
> lm(), not with aov().
> 
> coef.lm seems a more sensible convention, since it's a lot easy to remove
> the NAs than to add them.

I've committed a fix for predict.lm to use object$coefficients
directly, but I haven't done anything with the coef() methods.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 23:41:49 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#628)
Message-ID: <200008072141.XAA03887@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#627)
In-Reply-To: <x2og34232n.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10008072237330.18074-100000@auk.stats>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Aug  8 06:11:19 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 8 Aug 2000 15:11:19 +1000
Subject: [Rd] New code -- genetic algorithm curve fitting (supports complex numbers)
Message-ID: <20000808151119.A22606@ftoomsh.progsoc.uts.edu.au>

OK, here is some code that may be of use to someone:

http://www.progsoc.uts.edu.au/~telford/samples/R/gafit_0.1.tar.gz

Hopefully it might make contrib status on CRAN :-)

It uses a genetic algorithm to seek the lowest value of some
user-defined target function (or seeks the most negative value if negative 
values are possible). By using a sum of squared residuals for the target
function, it supports least square nonlinear regression.

Any comments welcome, the algorithm is completely thrown together
out of my head (in about three days) but I have written genetic
algorithms before, the same ideas can be found elsewhere.

If you have an optimisation problem, you should be able to apply
my code to it within half an hour or so because it doesn't require
much knowledge to use. I would be interested if anyone can find a
problem that crashes it. I'm sure that there are many problems for
which it will get something roughly reasonable but not quite right --
this is in the nature of a stocastic search <shrug>. The user has
some control over ``thermal'' noise so setting that to a small value
can help squeeze a bit more accuracy out of it.

----------------------------------------------------------------------

I did finally bludgeon nls into complex number support,
I intend to release the patches to make this work but it is not
particularly elegant -- it just converts EVERYTHING that goes
through the target function into a vector of reals. Thus it does
handle wide data and complex numbers but it treats them all by
just breaking them down into individual reals and squaring the
residuals.

Sadly, when I finally did get it working it still didn't do what
I wanted because my function kept stopping with stepsize being
reduced below the minimum. On close analysis, I decided that the
nls function will stall in a local minimum if it follows the
gradient into such a minimum and then just keeps reducing its
step size until it halts with an error. This does seem to imply that
a large number of model functions will not work with nls
until a suitably close starting value can be found.

My genetic algorithm code may provide one method to find such
values that are somewhere close to a good fit.

	- Tel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  9 19:20:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Aug 2000 20:20:07 +0200 (CEST)
Subject: [Rd] GenGC changes
Message-ID: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>

As most R developers maybe are already aware of, R version 1.2.0
introduced a new `generational' garbage collector which means that
strings and vectors (and language objects) are handled differently from
the numerical atomic types.

>From ``Writing R Extensions'':

       Earlier code was written in a style like.
           VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
    but that is no longer allowed.  The functions `VECTOR_ELT' and
    `SET_VECTOR_ELT' must now be used to access and set elements of a
    generic vector.  There are analogous functions `STRING_ELT' and
    `SET_STRING_ELT' for character vectors.
    
       To convert existing code, use the following replacements.
    
         original                 replacement
         `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
         `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
         `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
         `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

The changes were committed to the r-devel true this Monday, and imply
that add-on packages using the original coding style will no longer work
with current versions of r-devel.  One possible solution for having
packages with sources which work for compilation under both 1.1 and 1.2
is to use conditionals of the form

    #if R_VERSION >= R_Version(1, 2, 0)
	new-style-code
    #else
	old-style-code
    #endif

I would like to ask add-on package maintainers of packages which are
affected by the change to produce updated versions of their packages
which work under both 1.1 and 1.2.  It seems that the following ones
require action:

	Java
	Matrix
	RMySQL
	RODBC
	foreign
	hdf5
	netCDF
	stataread

(Note that [currently], there is binary incompatibility between 1.1 and
1.2.)

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:25:46 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:25:46 -0600
Subject: [Rd] Circles on all R devices
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A0@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE);

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>Circles on all R devices</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E);</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00240.001284B0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:37 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:33:37 -0600
Subject: [Rd] circles overshoot
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A2@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:23 2000
From: valerio.aimale@biosgroup.com (valerio.aimale@biosgroup.com)
Date: Wed, 9 Aug 2000 22:33:23 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092033.WAA22498@pubhealth.ku.dk>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:51:18 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:51:18 -0600
Subject: No subject
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A3@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/plain;
	charset="iso-8859-1"

sorry for the multiple postings

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE></TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>sorry for the multiple postings</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00243.90D7CCA0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  9 22:44:02 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 9 Aug 2000 23:44:02 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092144.XAA22670@pubhealth.ku.dk>

valerio.aimale@biosgroup.com writes:

> Anyone ever tried to
> 
> plot(c(1.0,0,2),c(1.0,0,2));
> symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?
> 
> Why does the circle overshoot ?
> 
> The problem is the same on all devices (even with my pictex, which needs a
> lot of refurbishing), so I'd think it's something upstream to the devices
> code. 

Because the *plotting region* is not square... Try resizing the plot
window and you'll see the effect quite clearly.

> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
> <HTML>
....
> SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp; direct: 505.992.6741</FONT>
> <BR><FONT SIZE=3D2>Bios Group =
> LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=

Ahem. There are ways to turn that stuff off, you know....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Aug 10 02:23:26 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 10 Aug 2000 09:23:26 +0800 (GMT-8)
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0008100916420.17875-100000@sununx.comp.nus.edu.sg>


Hi,
I just completed a package for reading and writing dbf files, that I will
post soon so i will definately be affected since I used mostly the c
api. Would the option below mean that there would be macros defined in say
R.internals to have old style behave as new style, or would it be prefered
that maintainers write seperate routines for new and old versions. I am
imagining quite a bit of code bloat.

Nicholas

> 
>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif
> 
> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:
> 
> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread
> 
> (Note that [currently], there is binary incompatibility between 1.1 and
> 1.2.)
> 
> -k
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Aug 10 14:11:56 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 10 Aug 2000 15:11:56 +0200 (MET DST)
Subject: [Rd] lda and svd error (PR#630)
Message-ID: <200008101311.PAA01082@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII


For a matrix A:

> A
            [,1]       [,2]
 [1,] -2.4491897  0.2345687
 [2,]  0.1530018 -0.5513182
 [3,] -1.3877140  1.0925618
 [4,]  0.5521078  0.7036401
 [5,]  0.4744903 -1.0868091
 [6,] -0.4296282  0.3931673
 [7,] -0.2413387 -0.7461586
 [8,]  1.0567564 -1.1807899
 [9,]  0.7903647  0.8294825
[10,]  1.6456857 -0.2484038
[11,] -1.1795527 -0.6904602
[12,]  2.6470244  0.7050178
[13,]  1.8169865 -0.1057402
[14,]  1.9720294 -0.1091834

and groupings [1] 0 0 0 0 0 0 0 1 1 1 1 1 1 1

> library(MASS)
> lda(A, groupings)
Error in svd(X, nu = 0) : error  2  in dsvdc

is reported. This is hard to reproduce on other machines, even 

> write.table(A, "dummy")
> B <- as.matrix(read.table("dummy"))
> lda(B, groupings)

on the same machine works fine. I add my .RData file renamed 
as DataR (maybe this can help to reproduce the error). The error occured
during a simulation, I added the sources as "svderr.R".

Torsten

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

--1133331701-1931357602-965913218=:3057
Content-Type: APPLICATION/octet-stream; name=DataR
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513380.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename=DataR

UkRYMQoAAAAFAAAAAAAAAAMAAAADZGltAAAAAAEAAAABQQAAAAAAAAgAAAAI
Z3JvdXBpbmcAAAAMAAAADC5SYW5kb20uc2VlZAAAAAoAAAAKLlRyYWNlYmFj
awAAAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABf////8AAAACAAAAAAAA
AAD/////AAAAEAAAAAAAAAAAAAAAAQAAACoAAAAqc3RvcChwYXN0ZSgiZXJy
b3IgIiwgeiRpbmZvLCAiIGluIGRzdmRjIikpAAD/////AAAAAgAAAAAAAAAA
/////wAAABAAAAAAAAAAAAAAAAEAAAAOAAAADnN2ZChYLCBudSA9IDApAAD/
////AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAYAAAAGGxk
YS5kZWZhdWx0KEEsIGdyb3VwaW5nKf////8AAAACAAAAAAAAAAD/////AAAA
EAAAAAAAAAAAAAAAAQAAABEAAAARTmV4dE1ldGhvZCgibGRhIikAAAD/////
AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAXAAAAF2xkYS5t
YXRyaXgoQSwgZ3JvdXBpbmcpAP////8AAAACAAAAAAAAAAD/////AAAAEAAA
AAAAAAAAAAAAAQAAABAAAAAQbGRhKEEsIGdyb3VwaW5nKf//////////////
////////////////////////////AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAA
AAAABP////8AAAANAAAAAAAAAAAAAAADAAAAASGIE+ETc44V/////wAAAAIA
AAAAAAAAAAAAAAEAAAAAAAAAAAAAAAP/////AAAADgAAAAAAAAAAAAAADgAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAP/AAAAAAAAA/8AAAAAAAAD/wAAAAAAAAP/AAAAAAAAA/8AAA
AAAAAD/wAAAAAAAAP/AAAAAAAAD/////AAAAAgAAAAAAAAAAAAAAAQAAAAAA
AAAAAAAAAv////8AAAAOAAAAAAAAAAAAAAAcwAOX8MHIaeA/w5WQE34/vb/2
NBOMsXdCP+Gq3gvUFnM/3l4MaikJlL/bfwcqUk/Gv87kL9G6OKo/8Oh5XMER
GD/pSqrXVI3mP/pUuo1+UDG/8t9ys0UCeEAFLRsm5nqQP/0SYHbpeIM//41u
ti/9pT/OBliWQmStv+GkZimVGgA/8XsiHJT4IT/mhDhKsAtrv/FjkfP5/5w/
2SmnFC117r/n4IgDNauUv/Lkg+5c7Wg/6ose7jvUyb/Py7Hhj7m3v+YYP/an
MfY/5o+BfEI5N7+7Ecl7N0bPv7vzcZLmB6UAAAACAAAAAAAAAAAAAAABAAAA
AAAAAAAAAAAB/////wAAAA0AAAAAAAAAAAAAAAIAAAAOAAAAAv//////////
////////////////////////////////
--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="svderr.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513381.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename="svderr.R"

bGlicmFyeShNQVNTKQ0KDQpTU2xkYSA8LSBmdW5jdGlvbihYLCBZLCBxKQ0K
ew0KCW1YIDwtIHJlcCgxLCBucm93KFgpKSUqJXQoYXBwbHkoWCwgMiwgbWVh
bikpDQoJbVkgPC0gcmVwKDEsIG5yb3coWSkpJSoldChhcHBseShZLCAyLCBt
ZWFuKSkNCglYIDwtIHJiaW5kKFgsWSkNCglteCA8LSByYmluZChtWCwgbVkp
DQoJWCA8LSBYIC0gbXggDQogCVcgPC0gKHQoWCklKiVYKQ0KICAgICAgICBl
ZyA8LSBlaWdlbihzb2x2ZShkaWFnKGRpYWcoVykpKSUqJVcpDQoJcSA8LSBs
ZW5ndGgoZWckdmFsdWVzW2VnJHZhbHVlcyA+IDFdKQ0KICAgICAgICBEIDwt
IGVnJHZlY3RvcnNbLDE6cV0NCgkjIEQgPC0gMS9zcXJ0KGRpYWcoVykpDQoJ
cmV0dXJuKEQpDQp9DQoNCkVycm9yUmF0ZSA8LSBmdW5jdGlvbihkaXNjcmlt
LCBuKQ0Kew0KCWZvbmUgPC0gc3VtKGFzLmludGVnZXIoZGlzY3JpbVsxOm5d
KS0xKS9uDQoJZm51bGwgPC0gKG4gLSBzdW0oYXMuaW50ZWdlcihkaXNjcmlt
WyhuKzEpOigyKm4pXSktMSkpL24NCgkjIGNhdCgiZm51bGw6ICIsIGZudWxs
LCAiIGZvbmUgIiwgZm9uZSwgIlxuIikgDQoJKGZudWxsICsgZm9uZSkvMg0K
fQ0KDQpzaW0xIDwtIGZ1bmN0aW9uKE4sbSxuLCBtdTAsIG11MSwgUykNCnsN
CgllcnJTdGFuZCA8LSBjKCkNCgllcnJTUyA8LSBjKCkNCg0KCWZvciAoaSBp
biAxOk4pDQoJew0KCQlsZWFyblggPC0gbXZybm9ybShtLCBtdTAsIFMpDQoJ
CWxlYXJuWSA8LSBtdnJub3JtKG0sIG11MSwgUykNCgkJZ3JvdXBpbmcgPC0g
YyhyZXAoMCwgbSksIHJlcCgxLCBtKSkNCgkJbGRhU3RhbmQgPC0gbGRhKHJi
aW5kKGxlYXJuWCwgbGVhcm5ZKSwgZ3JvdXBpbmcpDQoJCUQgPC0gU1NsZGEo
bGVhcm5YLCBsZWFyblksIDQpDQoJCUEgPC0gcmJpbmQobGVhcm5YLCBsZWFy
blkpJSolRA0KCQlsZGFTUyA8LSBsZGEoQSwgZ3JvdXBpbmcpDQoJCXRlc3RY
IDwtIG12cm5vcm0obiwgbXUwLCBTKQ0KCQl0ZXN0WSA8LSBtdnJub3JtKG4s
IG11MSwgUykNCgkJZGlzY3JTdGFuZCA8LSBwcmVkaWN0LmxkYShsZGFTdGFu
ZCwgcmJpbmQodGVzdFgsIHRlc3RZKSkkY2xhc3MNCgkJZGlzY3JTUyA8LSBw
cmVkaWN0LmxkYShsZGFTUywgcmJpbmQodGVzdFgsIHRlc3RZKSUqJUQpJGNs
YXNzDQoJCWVyclN0YW5kIDwtIGMoZXJyU3RhbmQsIEVycm9yUmF0ZShkaXNj
clN0YW5kLCBuKSkNCgkJZXJyU1MgPC0gYyhlcnJTUywgRXJyb3JSYXRlKGRp
c2NyU1MsIG4pKQ0KCQljYXQoIlN0YW5kOiAiLCBlcnJTdGFuZFtpXSwgIiBT
UzogIiwgZXJyU1NbaV0sICJcbiIpDQogCX0NCgljYXQoIkVycm9yIFJhdGUg
U3RhbmRhcmQgTERBOiAiLCBtZWFuKGVyclN0YW5kKSwgIlxuIikNCgljYXQo
IkVycm9yIFJhdGUgU1MgTERBOiAiLCBtZWFuKGVyclNTKSwgIlxuIikNCgly
ZXR1cm4obGlzdChlcnJTdGFuZCwgZXJyU1MpKQ0KfQ0KDQojIFMgPC0gbWF0
cml4KGMoMSwwLCAwLjUsIDAsIDAsIDEsIDAsIDAuOSwgMC41LCAwLCAyLCAw
LjMsIDAsIDAuOSwgMC4zLCAxKSwgNCwgNCkNClMgPC0gbWF0cml4KGMoMSww
LDAsMC45LDAsMSwwLDAsMCwwLDEsMCwwLjksMCwwLDEpLCA0LCA0KQ0KbXUw
IDwtIHJlcCgwLCA0KQ0KbXUxIDwtIHJlcCgxLCA0KQ0KbSA8LSBjKDUsNywx
MCwxNSwyMCw1MCwxMDApDQpuIDwtIDEwMDANCk4gPC0gMTAwDQoNCmVyciA8
LSBwbm9ybSgtMC41KnNxcnQodChtdTEgLSBtdTApJSolc29sdmUoUyklKiUo
bXUxIC0gbXUwKSkpDQpjYXQoIkVycm9yIHJhdGU6ICIsIGVyciwgIlxuIikN
Cg0KZUwgPC0gYygpDQplU1MgPC1jKCkNCg0KZm9yIChqIGluIG0pDQp7DQoJ
ZXN0ZXJyIDwtIHNpbTEoTiwgaiwgbiwgbXUwLCBtdTEsIFMpDQoJZUwgPC0g
YyhlTCwgbWVhbihlc3RlcnJbWzFdXSkpDQoJZVNTIDwtIGMoZVNTLCBtZWFu
KGVzdGVycltbMl1dKSkNCn0NCg0K
--1133331701-1931357602-965913218=:3057--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Aug 10 15:56:12 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)
Subject: [Rd] svd error (PR#631)
Message-ID: <200008101456.QAA02593@pubhealth.ku.dk>

--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable

SVD-Error on

R 1.1.0
Windows 98


I get the following error applying  svd  on a positive definite matrix :

 > sk2
               [,1]         [,2]          [,3]          [,4]          [,5]
[1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
[2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
[3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
[4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
[5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00
 > svd(sk2)
Error in svd(sk2) : error  4  in dsvdc

The problem seems to be connected to accuracy since

 > svd(sk2-.0000000000000000001)

works correctly.

I've saved the matrix  sk2  in the attached file.

Regards,

J=F6rg Polzehl
--=====================_24736660==_
Content-Type: application/octet-stream; name="sk2"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="sk2"

UkRYMQoAAAACAAAAAAAAAAMAAAADZGltAAAAAAMAAAADc2syAAAAAAIAAAAAAAAAAAAAAAEAAAAA
AAAAAAAAAAL/////AAAADgAAAAAAAAAAAAAAGT/wvHknO/XaP7WYa3uwMRC/MmtTLMsBmL9VWix1
04ctP2B7EYuQF0Y/tZhre7AxED/yeXMzKfWjv0DiR8RYcTa/Y5KK1dPLfT9uNsdP3h7YvzJrUyzL
AZi/QOJHxFhxNj/wAAHM0oaKPuCxnUzM7+G+6cUur1Qr0r9VWix104ctv2OSitXTy30+4LGdTMzv
4T/wACa0QRFCvw3fsLftHfg/YHsRi5AXRj9uNsdP3h7YvunFLq9UK9K/Dd+wt+0d+D/wAFw7fg5q
AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAf////8AAAANAAAAAAAAAAAAAAACAAAABQAAAAX/
/////////////////////////w==
--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Dr. J=F6rg Polzehl
WIAS, Mohrenstr. 39
D-10117 Berlin, Germany
email: polzehl@wias-berlin.de
Tel. +49 30/20372 481
Fax: +49 30/2044975
WWW: http://www.wias-berlin.de/~polzehl

--=====================_24736660==_--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Aug 10 19:21:16 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 Aug 2000 13:21:16 -0500
Subject: [Rd] svd error (PR#631)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)"
References: <200008101456.QAA02593@pubhealth.ku.dk>
Message-ID: <6raeelx9ib.fsf@franz.stat.wisc.edu>

polzehl@wias-berlin.de writes:

> SVD-Error on
> 
> R 1.1.0
> Windows 98
> 
> 
> I get the following error applying  svd  on a positive definite matrix :
> 
>  > sk2
>                [,1]         [,2]          [,3]          [,4]          [,5]
> [1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
> [2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
> [3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
> [4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
> [5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00

If you know that the matrix is positive definite then you are probably
better off taking the svd of the Cholesky decomposition of the matrix.

> svd(chol(sk2), nu = 0)
$d
[1] 1.095806 1.000000 1.000000 1.000000 1.000000

$v
             [,1]          [,2]         [,3]        [,4]        [,5]
[1,] -0.478709768  0.0011572932  0.013159984  0.87312442 -0.09119310
[2,] -0.877614104 -0.0003224026  0.006761341 -0.47348540  0.07456035
[3,]  0.002923979 -0.4202666121  0.844168101 -0.04500196 -0.32973090
[4,]  0.013558325  0.7925962305  0.519924862  0.03162204  0.31667897
[5,] -0.020929998  0.4417756749 -0.129766919 -0.10217730 -0.88154213

The singular values of sk2 will be the squares of the singular values
of its Cholesky decomposition.  The left and right singular vectors of
sk2 are identical and can be expressed as the V shown here.  Note that
since one singular value has multiplicity 4, the last four columns of
v are not unique.

>  > svd(sk2)
> Error in svd(sk2) : error  4  in dsvdc

This is related to the convergence in the Linpack subroutine dsvdc.
It is a reasonably good singular value routine but it will
occasionally be unable to converge.  Svd routines often have
difficulty with matrices with repeated singular values, like sk2.

The Lapack routine used in SVD from the Matrix library is more
reliable

> SVD(sk2)
$d
[1] 1.200791 1.000000 1.000000 1.000000 1.000000

$u
             [,1]          [,2]          [,3]          [,4]         [,5]
[1,] -0.478709768  5.814978e-19 -1.734663e-19 -2.917201e-20  0.877973210
[2,] -0.877614104 -2.109493e-02 -1.889409e-02 -3.985595e-03 -0.478513967
[3,]  0.002923979 -4.102994e-02  7.970942e-02 -9.959678e-01  0.001594282
[4,]  0.013558325  1.644232e-01 -9.825683e-01 -8.535898e-02  0.007392597
[5,] -0.020929998  9.853104e-01  1.668804e-01 -2.731482e-02 -0.011411959

$vt
           [,1]         [,2]         [,3]         [,4]        [,5]
[1,] -0.4787098 -0.877614104  0.002923979  0.013558325 -0.02093000
[2,]  0.0000000 -0.021094933 -0.041029944  0.164423228  0.98531038
[3,]  0.0000000 -0.018894086  0.079709424 -0.982568251  0.16688036
[4,]  0.0000000 -0.003985595 -0.995967801 -0.085358979 -0.02731482
[5,]  0.8779732 -0.478513967  0.001594282  0.007392597 -0.01141196

A new release of the Matrix library will be uploaded to CRAN shortly.  I
would advise waiting for it to be compiled for Windows before using
the SVD function extensively.  In looking at PR#630 by Torsten Hothorn
I found a subtle bug in SVD.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 11 06:54:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 11 Aug 2000 07:54:32 +0200
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
References: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <200008110554.HAA20812@aragorn.ci.tuwien.ac.at>

>>>>> Kurt Hornik writes:

> As most R developers maybe are already aware of, R version 1.2.0
> introduced a new `generational' garbage collector which means that
> strings and vectors (and language objects) are handled differently
> from the numerical atomic types.

>> From ``Writing R Extensions'':

>        Earlier code was written in a style like.
>            VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
>     but that is no longer allowed.  The functions `VECTOR_ELT' and
>     `SET_VECTOR_ELT' must now be used to access and set elements of a
>     generic vector.  There are analogous functions `STRING_ELT' and
>     `SET_STRING_ELT' for character vectors.
    
>        To convert existing code, use the following replacements.
    
>          original                 replacement
>          `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
>          `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
>          `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
>          `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

> The changes were committed to the r-devel true this Monday, and imply
> that add-on packages using the original coding style will no longer
> work with current versions of r-devel.  One possible solution for
> having packages with sources which work for compilation under both 1.1
> and 1.2 is to use conditionals of the form

>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif

> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:

> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread

> (Note that [currently], there is binary incompatibility between 1.1
> and 1.2.)

As indicated, the above is only one possible solution.  Another, and
maybe the preferred one in order to avoid unnecessarily duplicating
code, is the use of a *PRIVATE* header file containing the following
code:

#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)	(STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)	(STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)	(VECTOR(x)[i] = (v))
#endif

(Note that in order to achieve maximal source compatibility in the 1.x
series, it is preferable to have add-on packages modified, as we cannot
easily control the `old' (pre-1.1.1) R versions included in various
distributions.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 16:06:11 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 11:06:11 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
Message-ID: <14740.5322.825671.12280@c1186.ae.ge.com>

Hello,
 I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
it instead of blas. However atlas for hp seems to missing some libs. I 
had to add -lblas in Makeconf. Everything builds ok. But modreg and
tcltk doesn't load. 
R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-August-9)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(modreg)
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
  can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
Error in library(modreg) : .First.lib failed
> 

First checked the lowessc.c routine and it had F77_SUB(...) but I
could not find a macro for that in the include files. There was
F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't
load.
Is there a way to get more info why it doesn't open?

TIA,
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 17:11:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 Aug 2000 17:11:32 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.5322.825671.12280@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008111659590.13373-100000@toucan.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Hello,
>  I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
> it instead of blas. However atlas for hp seems to missing some libs. I 
> had to add -lblas in Makeconf. Everything builds ok. But modreg and
> tcltk doesn't load. 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-August-9)

That might well be a problem. R-devel has been undergoing major
changes recently.  You should be able to use

  --with-blas             use specified BLAS library

to avoid atlas.  But BLAS configuration was changed in two steps,
and you may just have caught the middle.

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> > library(modreg)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
>   can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
> Error in library(modreg) : .First.lib failed
> > 
> 
> First checked the lowessc.c routine and it had F77_SUB(...) but I
> could not find a macro for that in the include files. There was
> F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't

Well, there is one (in R_ext/RS.h), *and* it is documented in `Writing R
Extensions'. (It seems pretty unlikely that something which has been in
R releases for a year or so would be wrong in a way like that.)

Making changes like that in the dark is not usually a good idea.  It is
likely that modreg.sl is  missing some blas libs, since you I suppose did
not change etc/Makeconf too.

> load.
> Is there a way to get more info why it doesn't open?

Is the error message correct?  It says the shared library cannot be
opened. Does it exist?  How helpful those messages are is OS-dependent.

I would take a look at your shared libraries with nm -g to see what
symbols are unsatisfied, as that is usually enough clue.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 20:05:39 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 15:05:39 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
References: <14740.12889.352584.694777@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
Message-ID: <14740.18299.166615.133823@c1186.ae.ge.com>

Prof Brian D Ripley writes:
 > > It seems like d1mach and a few others are not in any of the blas libs
 > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
 > > them when building modreg.sl
 > 
 > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
 > included on the load line, shared or not.

I get an error about non position independent code being in the
lib. Tells me to recompile with +z option !!  
This is a shortcoming of hp's linker I think. 

 > 
 > Try using --without-blas or --with-blas=no.  If that works,
 > try --with-blas=blas (or whatever).  If it does not work,
 > the problem is not blas-related.
 > 

OK, --without-blas worked. Everything loads now. Thanks.

I guess I still don't understand the config options :-(
--with-blas=/opt/fortran/lib/pa2.0/libblas.a
still grabs -latlas
My shell is bash.
I edited Makeconf and etc/Makeconf and did a make. Worked :-)
Thanks again, 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 20:17:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 11 Aug 2000 20:17:26 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.18299.166615.133823@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Prof Brian D Ripley writes:
>  > > It seems like d1mach and a few others are not in any of the blas libs
>  > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>  > > them when building modreg.sl
>  > 
>  > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>  > included on the load line, shared or not.
> 
> I get an error about non position independent code being in the
> lib. Tells me to recompile with +z option !!  
> This is a shortcoming of hp's linker I think. 

Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

I think that's it. Glad we got there.

>  > 
>  > Try using --without-blas or --with-blas=no.  If that works,
>  > try --with-blas=blas (or whatever).  If it does not work,
>  > the problem is not blas-related.
>  > 
> 
> OK, --without-blas worked. Everything loads now. Thanks.
> 
> I guess I still don't understand the config options :-(
> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

--with-blas=blas?  That's all that is likely to work. Set LD_LIBRARY_PATH
(or HP's equivalent) accordingly.

> still grabs -latlas
> My shell is bash.
> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Aug 13 08:00:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 Aug 2000 09:00:32 +0200
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
References: <14740.18299.166615.133823@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
Message-ID: <200008130700.JAA03995@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:
>> Prof Brian D Ripley writes:
>> > > It seems like d1mach and a few others are not in any of the blas libs
>> > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>> > > them when building modreg.sl
>> > 
>> > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>> > included on the load line, shared or not.
>> 
>> I get an error about non position independent code being in the
>> lib. Tells me to recompile with +z option !!  
>> This is a shortcoming of hp's linker I think. 

> Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

> I think that's it. Glad we got there.

>> > 
>> > Try using --without-blas or --with-blas=no.  If that works,
>> > try --with-blas=blas (or whatever).  If it does not work,
>> > the problem is not blas-related.
>> > 
>> 
>> OK, --without-blas worked. Everything loads now. Thanks.
>> 
>> I guess I still don't understand the config options :-(
>> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

> --with-blas=blas?  That's all that is likely to work. Set
> LD_LIBRARY_PATH (or HP's equivalent) accordingly.

>> still grabs -latlas
>> My shell is bash.
>> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

The (fast) BLAS configure code is taken from Octave.  It interprets an
option like

	--with-blas=/path/to/libblas.a

as a `suggestion' to be tried first.  If this fails, it goes on to check
for other blas libs it knows about.  Can you check your config.log to
see whether your --with-blas=/opt/fortran/lib/pa2.0/libblas.a test
failed?

The way to turn off all fast BLAS checking is

	--with-blas=no
	--without-blas

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From agusalon@mcr.ucm.es  Sun Aug 13 19:59:22 2000
From: agusalon@mcr.ucm.es (agusalon@mcr.ucm.es)
Date: Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008131859.UAA15816@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0008_01C00569.70069B40"


------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear Sirs:

I am reading the book Mixed-Effects Models in S and S-Plus, by Pinheiro =
and Bates,  (Springer-Verlag New York, 2000) but using the nlme library =
for R (version:3.1-7, dated: 2000-07-07), and for the Linux (Mandrake =
7.0) operating system.

Working the first example of the book (pp. 4 - 12), I reproduce the =
reported results but with one exception: the model on page 6, called =
fm2Rail.lm. The estimated coefficients that I get are not those reported =
on the book.

In the attached file (report), I am sending you the short program (which =
reproduces the one in the book) and the results for estimating the =
fm2Rail.lm model. The estimated coefficients which I get are:

    Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
    66.5    54.303    -4.692    -2.658    -0.567    11.192
which do not seem correct.

Those reported in the book are:

    Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
    31.667    50      54        82.667    84.667    96

I have tried several times and other examples but the function lm seems =
not to work correctly, and perhaps the problem is in the adaptation of =
nlme from S to R.

Would you, please, let me know what is the reason for the estimated =
coefficients which I get?

Thanking you for your attention, I am

Sincerely yours


Agustin Alonso-Rodriguez
Prof. of Econometrics
Real C. Univ. "Escorial-Maria Cristina"
28200 San Lorenzo del Escorial(Madrid)
Spain
aalonso@mcr.ucm.es



------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2014.210" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT size=3D2>Dear Sirs:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I am reading the book <U>Mixed-Effects Models in S =
and=20
S-Plus</U>, by Pinheiro and Bates,&nbsp; (Springer-Verlag New York, =
2000) but=20
using the nlme library for R (version:3.1-7, dated: 2000-07-07), and for =
the=20
Linux (Mandrake 7.0) operating system.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Working the first example of the book (pp. 4 - 12), =
I=20
reproduce the reported results but with one exception: the model on page =
6,=20
called fm2Rail.lm. The estimated coefficients that I get are not those =
reported=20
on the book.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>In the attached file (report), I am sending you the =
short=20
program (which reproduces the one in the book) and the results for =
estimating=20
the fm2Rail.lm model. The estimated coefficients which I get =
are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail^0&nbsp; Rail^1&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^2&nbsp;&nbsp; Rail^3&nbsp;&nbsp; =
Rail^4&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^5</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 66.5&nbsp;&nbsp;&nbsp;=20
54.303&nbsp;&nbsp;&nbsp; -4.692&nbsp;&nbsp;&nbsp; =
-2.658&nbsp;&nbsp;&nbsp;=20
-0.567&nbsp;&nbsp;&nbsp; 11.192</FONT></DIV>
<DIV><FONT size=3D2>which do not seem correct.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Those reported in the book are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail2&nbsp;&nbsp;&nbsp;=20
Rail5&nbsp;&nbsp;&nbsp; Rail1&nbsp;&nbsp;&nbsp;=20
Rail6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rail3&nbsp;&nbsp;&nbsp;=20
Rail4</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 31.667&nbsp;&nbsp;&nbsp;=20
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 54&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; =

82.667&nbsp;&nbsp;&nbsp; 84.667&nbsp;&nbsp;&nbsp; 96</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I have tried several times and other examples but =
the function=20
<STRONG>lm </STRONG>seems not to work correctly, and perhaps the problem =
is in=20
the adaptation of nlme from S to R.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Would you, please, let me know what is the reason =
for the=20
estimated coefficients which I get?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanking you for your attention, I am</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Sincerely yours</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Agustin Alonso-Rodriguez</FONT></DIV>
<DIV><FONT size=3D2>Prof. of Econometrics</FONT></DIV>
<DIV><FONT size=3D2>Real C. Univ. "Escorial-Maria Cristina"</FONT></DIV>
<DIV><FONT size=3D2>28200 San Lorenzo del Escorial(Madrid)</FONT></DIV>
<DIV><FONT size=3D2>Spain</FONT></DIV>
<DIV><FONT size=3D2><A=20
href=3D"mailto:aalonso@mcr.ucm.es">aalonso@mcr.ucm.es</A></FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_0008_01C00569.70069B40--

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: application/octet-stream;
	name="report"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="report"

1.- Program=0A=
=0A=
library(nlme)=0A=
data(Rail)=0A=
Rail=0A=
=0A=
# Fixed-effects model=0A=
fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
fm2Rail.lm=0A=
summary(fm2Rail.lm)=0A=
=0A=
=0A=
2.- Results=0A=
=0A=
=0A=
R : Copyright 2000, The R Development Core Team=0A=
Version 1.1.0  (June 15, 2000)=0A=
=0A=
R is free software and comes with ABSOLUTELY NO WARRANTY.=0A=
You are welcome to redistribute it under certain conditions.=0A=
Type	"?license" or "?licence" for distribution details.=0A=
=0A=
R is a collaborative project with many contributors.=0A=
Type	"?contributors" for a list.=0A=
=0A=
Type	"demo()" for some demos, "help()" for on-line help, or=0A=
    	"help.start()" for a HTML browser interface to help.=0A=
Type	"q()" to quit R.=0A=
=0A=
> library(nlme)=0A=
Loading required package: nls =0A=
> data(Rail)=0A=
> Rail=0A=
Grouped Data: travel ~ 1 | Rail=0A=
   Rail travel=0A=
1     1     55=0A=
2     1     53=0A=
3     1     54=0A=
4     2     26=0A=
5     2     37=0A=
6     2     32=0A=
7     3     78=0A=
8     3     91=0A=
9     3     85=0A=
10    4     92=0A=
11    4    100=0A=
12    4     96=0A=
13    5     49=0A=
14    5     51=0A=
15    5     50=0A=
16    6     80=0A=
17    6     85=0A=
18    6     83=0A=
> =0A=
> # Fixed-effects model=0A=
> fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
> fm2Rail.lm=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Coefficients:=0A=
Rail^0  Rail^1  Rail^2  Rail^3  Rail^4  Rail^5  =0A=
66.500  54.303  -4.692  -2.658  -0.567  11.192  =0A=
=0A=
> summary(fm2Rail.lm)=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Residuals:=0A=
    Min      1Q  Median      3Q     Max =0A=
-6.6667 -1.0000  0.1667  1.0000  6.3333 =0A=
=0A=
Coefficients:=0A=
       Estimate Std. Error t value Pr(>|t|)    =0A=
Rail^0  66.5000     0.9477  70.169  < 2e-16 ***=0A=
Rail^1  54.3032     2.3214  23.392 2.22e-11 ***=0A=
Rail^2  -4.6917     2.3214  -2.021 0.066161 .  =0A=
Rail^3  -2.6584     2.3214  -1.145 0.274458    =0A=
Rail^4  -0.5669     2.3214  -0.244 0.811181    =0A=
Rail^5  11.1919     2.3214   4.821 0.000418 ***=0A=
---=0A=
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 =0A=
=0A=
Residual standard error: 4.021 on 12 degrees of freedom=0A=
Multiple R-Squared: 0.9978,	Adjusted R-squared: 0.9967 =0A=
F-statistic: 916.6 on 6 and 12 degrees of freedom,	p-value: 2.998e-15 =0A=
=0A=
> =0A=

------=_NextPart_000_0007_01C00569.70069B40--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 13 22:59:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 2000 23:59:44 +0200
Subject: [Rd] Possible bug (PR#633)
In-Reply-To: agusalon@mcr.ucm.es's message of "Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)"
References: <200008131859.UAA15816@pubhealth.ku.dk>
Message-ID: <x2r97shlf3.fsf@blueberry.kubism.ku.dk>

agusalon@mcr.ucm.es writes:

>     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
>     66.5    54.303    -4.692    -2.658    -0.567    11.192
> which do not seem correct.
> 
> Those reported in the book are:
> 
>     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
>     31.667    50      54        82.667    84.667    96

This is a matter of differing conventions in handling

lm(travel ~ Rail - 1, data = Rail)

when Rail is an ordered factor. R uses polynomial contrasts in the
no-intercept case as it does when the intercept is present, whereas
Splus treats the ordered factor as if it were an unordered factor. If
you do something like the below, you get your coefficients.

I suspect that this could indeed be argued to be a bug in R, but
others may know better.

> lm(travel ~ factor(Rail,ordered=F)-1, data = Rail)

Call:
lm(formula = travel ~ factor(Rail, ordered = F) - 1, data = Rail)

Coefficients:
factor(Rail, ordered = F)2  factor(Rail, ordered = F)5  
                     31.67                       50.00  
factor(Rail, ordered = F)1  factor(Rail, ordered = F)6  
                     54.00                       82.67  
factor(Rail, ordered = F)3  factor(Rail, ordered = F)4  
                     84.67                       96.00  



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 14 07:48:39 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Aug 2000 08:48:39 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008140648.IAA17196@pubhealth.ku.dk>

On 13 Aug 2000, Peter Dalgaard BSA wrote:

> agusalon@mcr.ucm.es writes:
> 
> >     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
> >     66.5    54.303    -4.692    -2.658    -0.567    11.192
> > which do not seem correct.
> > 
> > Those reported in the book are:
> > 
> >     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
> >     31.667    50      54        82.667    84.667    96
> 
> This is a matter of differing conventions in handling
> 
> lm(travel ~ Rail - 1, data = Rail)
> 
> when Rail is an ordered factor. R uses polynomial contrasts in the
> no-intercept case as it does when the intercept is present, whereas
> Splus treats the ordered factor as if it were an unordered factor. If

S-PLUS does it internally, R via contr.*(n, contrast=F). Both 
systems give

> contr.treatment(6, contrasts=F)
  1 2 3 4 5 6
1 1 0 0 0 0 0
2 0 1 0 0 0 0
3 0 0 1 0 0 0
4 0 0 0 1 0 0
5 0 0 0 0 1 0
6 0 0 0 0 0 1

> contr.poly(6, contrasts=F)
     ^0         ^1         ^2         ^3         ^4          ^5
[1,]  1 -0.5976143  0.5455447 -0.3726780  0.1889822 -0.06299408
[2,]  1 -0.3585686 -0.1091089  0.5217492 -0.5669467  0.31497039
[3,]  1 -0.1195229 -0.4364358  0.2981424  0.3779645 -0.62994079
[4,]  1  0.1195229 -0.4364358 -0.2981424  0.3779645  0.62994079
[5,]  1  0.3585686 -0.1091089 -0.5217492 -0.5669467 -0.31497039
[6,]  1  0.5976143  0.5455447  0.3726780  0.1889822  0.06299408

but S-PLUS uses neither.

> you do something like the below, you get your coefficients.
> 
> I suspect that this could indeed be argued to be a bug in R, but
> others may know better.

I suspect it is an undocumented(?) feature.  However, as

lm(travel ~ Rail - 1, data = Rail)

and

lm(travel ~ Rail, data = Rail)

give the same results (up to the coefficient labels) it is not a useful
one, and so I guess we should change it.  Unfortunately we need either
to break the compatibility of contr.poly or to re-structure the internal
code.


Here's a simpler way to get the book's results:

> options(contrasts=rep("contr.treatment", 2))
> lm(travel ~ Rail - 1, data = Rail)

Call:
lm(formula = travel ~ Rail - 1, data = Rail)

Coefficients:
Rail2  Rail5  Rail1  Rail6  Rail3  Rail4  
31.67  50.00  54.00  82.67  84.67  96.00  

or

> contrasts(Rail$Rail) <- "contr.treatment"
> lm(formula = travel ~ Rail - 1, data = Rail)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Tue Aug 15 04:16:03 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Tue, 15 Aug 2000 11:16:03 +0800 (GMT-8)
Subject: [Rd] package (in development)
Message-ID: <Pine.GSO.4.21.0008151102090.2401-100000@sununx.comp.nus.edu.sg>

Hi,
I have submitted the package maptools (the file is maptools-0.1a.zip). The
archive contains the source ready to compile. I have tested everything on
windows 98 and NT and haven't found any major bugs (yet). It should work 
on lin/unix as well but I don't have easy access to a machine to test
it. 

Of interest might be the functions dbf.read and dbf.write.
Also there is a function to read ESRI shapefiles, which is stored as a map
object. I am still developing the map object, at the moment it is far too
bulky, and I think i could make it a lot more elegant using
attributes. Suggestions would be very very welcome. I am planing to
implement quadtree indexing, so that map objects can be used for spatial
statistics (range searching for building connectivity matrices). One thing
I noticed is that the polygon function cannot handle wierd cases such as
holes, I can work on that if no one else is.

Lastly there is ca color ramp function. I am planning to implement a more
sophisticated one with interpolation in the color cube between break
points. Is there a way to get the rgb values for all the colors listed
when colors() is typed?

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From monty@sprintmail.com  Tue Aug 15 14:40:00 2000
From: monty@sprintmail.com (monty@sprintmail.com)
Date: Tue, 15 Aug 2000 15:40:00 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151340.PAA05358@pubhealth.ku.dk>

Full_Name: Rod Montgomery
Version: 1.1.0
OS: Windows-95
Submission from: (NULL) (38.26.56.3)


File R-1.1.0/src/appl/lbfgsb.c --

Comment in code says two papers describing underlying math are in 
ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
but that directory seems not to exist.

(Actually, the comment does not give a URL - it just says
to look in that directory on that FTP server.)

Paper [1] does exist in 
ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps

Nocedal's bibliography page for L-BGFS-B is
http://www.ece.nwu.edu/~nocedal/lbfgsb.html
which points to .ps.gz forms of both papers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 15 14:54:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 15 Aug 2000 15:54:04 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151354.PAA05536@pubhealth.ku.dk>

Thanks.  These things have a habit of changing, and those refs are from
the original source.  The help page gives current ones.  Unfortunately
1.1.1 went out today, so I'll take a look closer to 1.2.0 release-time.


On Tue, 15 Aug 2000 monty@sprintmail.com wrote:

> Full_Name: Rod Montgomery
> Version: 1.1.0
> OS: Windows-95
> Submission from: (NULL) (38.26.56.3)
> 
> 
> File R-1.1.0/src/appl/lbfgsb.c --
> 
> Comment in code says two papers describing underlying math are in 
> ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
> but that directory seems not to exist.
> 
> (Actually, the comment does not give a URL - it just says
> to look in that directory on that FTP server.)
> 
> Paper [1] does exist in 
> ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps
> 
> Nocedal's bibliography page for L-BGFS-B is
> http://www.ece.nwu.edu/~nocedal/lbfgsb.html
> which points to .ps.gz forms of both papers.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Connolly@hort.cri.nz  Wed Aug 16 01:25:34 2000
From: P.Connolly@hort.cri.nz (P.Connolly@hort.cri.nz)
Date: Wed, 16 Aug 2000 02:25:34 +0200 (MET DST)
Subject: [Rd] Multiple pages with postscript() (PR#635)
Message-ID: <200008160025.CAA07887@pubhealth.ku.dk>

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

The function will produce a three page file, but only the first one
has the lwd parameter set.  The other pages have reverted to lwd = 1.

I've tried setting the lwd at different places, but the result is
always the same.  The same code does not have a problem in Splus 3.4.




test.device <-
function()
{
#  looks like the problem is in the postscript device
  
       postscript(file = paste("Test.ps"), horizontal = F)
       on.exit(dev.off())
       par(mai = rep(1, 4), lwd = 4)    
       for(j in 1:3) {
       plot(1:10, 11:20)
       title(paste("Testing  .... Page", j), line = -1, cex = 1.5)
    }
}

best


-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world's largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you've seen it.  ---Steven Wright
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 16 02:45:06 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 15 Aug 2000 21:45:06 -0400 (EDT)
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: <200008160025.CAA07887@pubhealth.ku.dk> (P.Connolly@hort.cri.nz)
Message-ID: <200008160145.VAA16148@jessie.research.bell-labs.com>


> 
> The function will produce a three page file, but only the first one
> has the lwd parameter set.  The other pages have reverted to lwd = 1.
> 
> I've tried setting the lwd at different places, but the result is
> always the same.  The same code does not have a problem in Splus 3.4.
> 
> 


Hi Patrick.
Thanks for the bug report. I took a quick look at the potential cause.

Here is a very simple workaround (i.e. I haven't investigated the other
side-effects):

diff -r1.28 devPS.c
1033c1033
<     if (pd->lty != newlty || pd->lwd != newlwd) {
---
>     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  

In other words, change the if() condition in the routine SetLineStyle()
in the file src/main/devPS.c to be true, regardless of whether the
values are the same or not. This appears to give the desired result.

Hopefully we will determine the appropriate reset configuration
as page changes occur. Anyone.... ?

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 16 10:15:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2000 11:15:43 +0200
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: Duncan Temple Lang's message of "Tue, 15 Aug 2000 21:45:06 -0400 (EDT)"
References: <200008160145.VAA16148@jessie.research.bell-labs.com>
Message-ID: <x266p17eio.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@research.bell-labs.com> writes:

> diff -r1.28 devPS.c
> 1033c1033
> <     if (pd->lty != newlty || pd->lwd != newlwd) {
> ---
> >     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  
> 
> In other words, change the if() condition in the routine SetLineStyle()
> in the file src/main/devPS.c to be true, regardless of whether the
> values are the same or not. This appears to give the desired result.
> 
> Hopefully we will determine the appropriate reset configuration
> as page changes occur. Anyone.... ?

Probably the code for "new page" needs to invalidate current status
(pd->xxx) of several items, or at least record the actual status. For
fonts we had a similar problem when the clipping changed (which got
fixed by setting it to -1), and I wouldn't be surprised if clipping
also could do strange stuff to the line widths. With a bit of luck, we
could in the same operation squash the "undefined in /bg" problem that
affects the PS output from "make check". Anyone...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jackman@stanford.edu  Wed Aug 16 18:16:56 2000
From: jackman@stanford.edu (jackman@stanford.edu)
Date: Wed, 16 Aug 2000 19:16:56 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008161716.TAA18739@pubhealth.ku.dk>

Full_Name: Simon Jackman
Version: 1.0
OS: win32, linux
Submission from: (NULL) (207.75.155.177)


the abbreivated state names given in data(state) contain numerous errors. 
Florida, 
Hawaii, Iowa, Michigan and Nebraska are wrongly abbreviated. 

compare R with S-plus on this.
> version
platform Windows   
arch     x86       
os       Win32     
system   x86, Win32
status             
major    1         
minor    1.0       
year     2000      
month    June      
day      15        
language R         
> data(state)
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FA" "GA" "HA" "ID" "IL" "IN" "IO"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MC" "MN" "MS" "MO" "MT" "NB" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"

but, say on splus for linux:
S-PLUS : Copyright (c) 1988, 1999 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 5.1 Release 1 for Linux 2.0.31 : 1999 
Working data will be in .Data 
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FL" "GA" "HI" "ID" "IL" "IN" "IA"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MI" "MN" "MS" "MO" "MT" "NE" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dick@b6ori1.bauv.unibw-muenchen.de  Thu Aug 17 10:09:05 2000
From: dick@b6ori1.bauv.unibw-muenchen.de (dick@b6ori1.bauv.unibw-muenchen.de)
Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170909.LAA22320@pubhealth.ku.dk>

Hi,

I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could compile
all Versions of R until 1.1.0.

When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
/R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
with the gcc compiler command

	gcc -I. -I../../../src/include -I../../../src/include
	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o

results in the following errors:

	rbitmap.c: In function `R_SaveAsPng':
	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
	function)
	rbitmap.c:168: (Each undeclared identifier is reported only once
	rbitmap.c:168: for each function it appears in.)
	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
this
	function)
	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
	function)

This file wasn't present in the R Versions before 1.1.0.

There don't seem to be any errors in the config.log file.

Does maybe anybodey know how to solve this problem?

Thank you
Thomas Dick

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 17 10:39:03 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Aug 2000 11:39:03 +0200
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
In-Reply-To: dick@b6ori1.bauv.unibw-muenchen.de's message of "Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)"
References: <200008170909.LAA22320@pubhealth.ku.dk>
Message-ID: <x2hf8ki5vs.fsf@blueberry.kubism.ku.dk>

dick@b6ori1.bauv.unibw-muenchen.de writes:

> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

A guess would be that your PNG library is old and that the PNG_
macros are not defined in png.h. But new enough that configure thinks
it is usable.

You might try turning off PNG support by commenting out

#define HAVE_PNG 1

in src/include/config.h after running configure. That would give you a
running R (hopefully) but obviously no support for .png bitmaps.
Otherwise maybe install a newer libpng &al.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 17 10:42:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Aug 2000 11:42:34 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170942.LAA22949@pubhealth.ku.dk>


> From: dick@b6ori1.bauv.unibw-muenchen.de
> Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
> 
> Hi,
> 
> I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could 
compile
> all Versions of R until 1.1.0.
> 
> When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
> /R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
> with the gcc compiler command
> 
> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

Update your libpng installation.  Those should be defined in png.h.
They certainly are in the current 1.0.8 and back to 1.0.6 at least.

If you don't want to do that, you can undef HAVE_PNG in config.h

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 17 14:28:11 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Aug 2000 15:28:11 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008171328.PAA25761@pubhealth.ku.dk>

>>>>> "Simon" == Simon Jackman <jackman@stanford.edu> writes:

    Simon> Full_Name: Simon Jackman

    Simon> the abbreivated state names given in data(state) contain
    Simon> numerous errors.

    Simon> Florida, Hawaii, Iowa, Michigan and Nebraska are wrongly
    Simon> abbreviated.

    Simon> compare R with S-plus on this.

even not being an American I do remember the official abbrevations,
and yes, R had them wrong {well they came from the other hemisphere..},
and they are now corrected for "R-devel"  aka "R 1.2 to be".

These were the 5 faults and their correction :

           old  new
 Florida    FA  FL
 Hawaii     HA  HI
 Iowa       IO  IA
 Michigan   MC  MI
 Nebraska   NB  NE

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Thu Aug 17 23:45:53 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Fri, 18 Aug 2000 08:45:53 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>

G'day R friends,

I didn't get any replies on the main list so I thought I'd try with the
experts.

I was wondering if anyone's ported R to os390.  If so, are the vsize and
nsize limits the same as other platforms?

I could really annoy those SAS guys then.

thanks,
John Strumila
john.strumila@team.telstra.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 18 16:19:22 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 18 Aug 2000 17:19:22 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181519.RAA05688@pubhealth.ku.dk>

make.function.html() produces ugly results. Have a look at the file 
..../r-directory/doc/html/function.html

The descriptions of datasets are wrong. Here are also the descriptions
of other function, which do not belong to these datasets.

Regards,
Uwe Ligges

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 18 17:51:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181651.SAA06029@pubhealth.ku.dk>

On Fri, 18 Aug 2000 ligges@statistik.uni-dortmund.de wrote:

> make.function.html() produces ugly results. Have a look at the file 
> ..../r-directory/doc/html/function.html

(after running make.function.html() on Windows: it seems fine as shipped).

> The descriptions of datasets are wrong. Here are also the descriptions
> of other function, which do not belong to these datasets.

This is a victim of a late change to the default arguments of scan.
Please add quote="" to both occurrences of scan in the function.

I think we've learnt not to change such things in a bug-fix release ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 18 21:37:01 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Aug 2000 22:37:01 +0200
Subject: [Rd] make.function.html and datasets (PR#638)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)"
References: <200008181651.SAA06029@pubhealth.ku.dk>
Message-ID: <x2em3mcnma.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> This is a victim of a late change to the default arguments of scan.
> Please add quote="" to both occurrences of scan in the function.
> 
> I think we've learnt not to change such things in a bug-fix release ....

Yep. (Actually, the change was not that late - July 25 - but it took
more than 2 weeks before someone noticed the unexpected side effects.
A hole in our bug-fishing net, obviously.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Aug 18 22:45:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 18 Aug 2000 14:45:37 -0700 (PDT)
Subject: [Rd] R on os390
In-Reply-To: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.GSO.4.21.0008181438140.10998-100000@atlas.biostat.washington.edu>

On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Mon Aug 21 01:11:17 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Mon, 21 Aug 2000 10:11:17 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD906698A4D@ntmsg0005.corpmail.telstra.com.au>

gday Thomas,

os390 uses 16/32 for int/long but the high order bit is not available, so
2gb is the best addressability.

The administrators of os390 tends to restrict virtual memory coz mainframe
RAM is historically expensive and paging is a very well understood/managed
resource.  Hence I don't know if I can physically grab 2Gb anyway.  On os390
this historically hasn't been a problem because it excels in I/O and
programs have been written with that in mind.  eg. SAS use of 'by' gets
around 'class' memory restrictions which means >2Gb files are handled
without much trouble.

I could only get nsize to about 200Mb (nsize=10,000K) on my redhat box.  Is
there something extra I need to do to increase this?

thanks,
John Strumila
 

-----Original Message-----
From: Thomas Lumley [mailto:thomas@biostat.washington.edu]
Sent: Saturday, 19 August 2000 7:46
To: Strumila, John
Cc: r-devel@stat.math.ethz.ch
Subject: Re: [Rd] R on os390


On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug 21 07:06:35 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Aug 2000 08:06:35 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008210606.IAA07166@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 638 *
Subject: make.function.html and datasets
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 18 Aug 2000 17:20:47 +0200
* PR# 637 *
Subject: Install Error on SGI Irix 6.5
From: "Thomas Dick" <dick@b6ori1.bauv.unibw-muenchen.de>
Date: Thu, 17 Aug 2000 11:09:11 +0000
* PR# 636 *
Subject: state name abbreviations
From: jackman@stanford.edu
Date: Wed, 16 Aug 2000 19:16:55 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stahel@stat.math.ethz.ch  Mon Aug 21 14:53:56 2000
From: stahel@stat.math.ethz.ch (stahel@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 15:53:56 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008211353.PAA20296@pubhealth.ku.dk>


symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
   ylim=c(1,5))
Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  : 
	formal argument "ylim" matched by multiple actual arguments

Since plot is called inside symbols, with specified xlim and ylim,
any specification through  ,...  hurts this call.

I am pretty sure that you won't like to hear the suggestion that
this error message 
  formal argument "anything" matched by multiple actual arguments
should only be a warning.
I would find this more convenient since foreseeing these collisions
and programming such arguments as explicit arguments of the "top" function
is a nuisance when writing functions just for one project.

Ceterum censeo: Thanks for your efforts for developing such a useful
                environment. 

Werner 

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, d.complexity, package:SfS, Autoloads, package:base

-- 
Werner Stahel

------------------ This message was sent by ---------------------------------
Werner Stahel                                     http://stat.ethz.ch/~stahel
Seminar fuer Statistik                               phone  : +41 1 632 34 30
ETH-Zentrum, LEO                                     fax    : +41 1 632 12 28
CH-8092 Zurich, Switzerland                          meet me: Leonhardstr. 27
-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Aug 21 17:17:35 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 21 Aug 2000 18:17:35 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008211353.PAA20296@pubhealth.ku.dk>
Message-ID: <39A1561F.65F06784@statistik.uni-dortmund.de>

stahel@stat.math.ethz.ch wrote:
> 
> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>    ylim=c(1,5))
> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>         formal argument "ylim" matched by multiple actual arguments
> 
> Since plot is called inside symbols, with specified xlim and ylim,
> any specification through  ,...  hurts this call.
> 
> I am pretty sure that you won't like to hear the suggestion that
> this error message
>   formal argument "anything" matched by multiple actual arguments
> should only be a warning.
> I would find this more convenient since foreseeing these collisions
> and programming such arguments as explicit arguments of the "top" function
> is a nuisance when writing functions just for one project.
> 
> Ceterum censeo: Thanks for your efforts for developing such a useful
>                 environment.


Suggestion for a fix:


function (x, y, circles, squares, rectangles, stars, thermometers, 
    boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
    ylab = "", xlim = NULL, ylim = NULL, ...) 
               ^^^^^^^^^^^^^^^^^^^^^^^^^
{
## [...] snip ##
  if (!add) { 
### check, wheter xlim and ylim are already specified:
        if(is.null(xlim)) {
            xlim <- range(x, na.rm = TRUE)
            xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
        }
        if(is.null(ylim)) {
            ylim <- range(y, na.rm = TRUE)
            ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
        }
        plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
            ylab = ylab, ...)
    }
    .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
}

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 21 17:28:22 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 18:28:22 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008211628.SAA21511@pubhealth.ku.dk>

{all recent versions of R}

Problem / design bug :

  diff.default() doesn't deal with "ts" objects properly,
  diff.ts() does, but that is only available from package "ts"
  where as the constructor function ts() is in base.

It's not sufficient to just move diff.ts() to package base,
since it relies itself on lag & lag.default which are also only in package 
ts.

----------------------------------------------------

A simple example :

> diff(ts(1:50, start= 1980, frequency = 12))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  : 
	invalid time series parameters specified

> library(ts)

> diff(ts(1:50, start= 1980, frequency = 12))
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
1980       1   1   1   1   1   1   1   1   1   1   1
1981   1   1   1   1   1   1   1   1   1   1   1   1
1982   1   1   1   1   1   1   1   1   1   1   1   1
1983   1   1   1   1   1   1   1   1   1   1   1   1
1984   1   1                                        

------
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 08:00:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 09:00:12 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220700.JAA24625@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> stahel@stat.math.ethz.ch wrote:
    >> 
    >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
    >>         ylim=c(1,5))
    >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
    >> formal argument "ylim" matched by multiple actual arguments
    >> 
    >> Since plot is called inside symbols, with specified xlim and ylim,
    >> any specification through  ,...  hurts this call.
yes,
and Uwe's fix cures this problem.
    [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
     copy it again now].

and I have committed it for the release patches (!! i.e. "1.1.1 patched")

    >> I am pretty sure that you won't like to hear the suggestion that
    >> this error message
    >>    formal argument "anything" matched by multiple actual arguments
    >>    should only be a warning.

    >> I would find this more convenient since foreseeing these collisions
    >> and programming such arguments as explicit arguments of the "top"
    >> function is a nuisance when writing functions just for one project.

Maybe this should be discussed a bit:
The error can only be made into a warning when it makes sense to assume
that it is always okay, to take the *LAST* actual argument as the 
desired one.   This is the case probably whenever "..." comes at the end of the
formal argument list -- which it is in about 95% of cases...

Hmm, what do others think?

    >> Ceterum censeo: Thanks for your efforts for developing such a useful
    >> environment.
Merci!

    Uwe> Suggestion for a fix:

      function (x, y, circles, squares, rectangles, stars, thermometers, 
	  boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
	  ylab = "", xlim = NULL, ylim = NULL, ...) 
		     ^^^^^^^^^^^^^^^^^^^^^^^^^
      {
      ## [...] snip ##
	if (!add) { 
      ### check, wheter xlim and ylim are already specified:
	      if(is.null(xlim)) {
		  xlim <- range(x, na.rm = TRUE)
		  xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
	      }
	      if(is.null(ylim)) {
		  ylim <- range(y, na.rm = TRUE)
		  ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
	      }
	      plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
		  ylab = ylab, ...)
	  }
	  .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
      }

    Uwe> Regards,
    Uwe> Uwe Ligges

Martin Maechler

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 22 08:45:48 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Aug 2000 09:45:48 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220745.JAA25729@pubhealth.ku.dk>

On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

> >>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> 
>     Uwe> stahel@stat.math.ethz.ch wrote:
>     >> 
>     >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>     >>         ylim=c(1,5))
>     >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>     >> formal argument "ylim" matched by multiple actual arguments
>     >> 
>     >> Since plot is called inside symbols, with specified xlim and ylim,
>     >> any specification through  ,...  hurts this call.
> yes,
> and Uwe's fix cures this problem.
>     [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
>      copy it again now].
> 
> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

Why is using NULL preferable here?  The standard paradigm as I understand
it is


         ylab = "", xlim, ylim, ...)
...
            if(missing(xlim)) {
                xlim <- range(x, na.rm = TRUE)
                xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
            }

In S there is a problem with passing down missingness, but not in R.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 22 10:48:17 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Aug 2000 11:48:17 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
Message-ID: <14754.19553.429605.429987@gargle.gargle.HOWL>

[now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
     
>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

    .............

    >> yes,
    >> and Uwe's fix cures this problem.
    >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

which has
		ylab = "", xlim = NULL, ylim = NULL, ...)
and later
		if(is.null(xlim)) { 
		   ... 
		}

    BDR> Why is using NULL preferable here?  The standard paradigm as I
    BDR> understand it is

    BDR> ylab = "", xlim, ylim, ...)
    BDR> ...
    BDR> if(missing(xlim)) {
    BDR>   xlim <- range(x, na.rm = TRUE)
    BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
    BDR> }

    BDR> In S there is a problem with passing down missingness, but not in R.

I know.  Note however that to be really useful one would have to able to
also *set* missingness for an argument (which I think we can't currently)

I might want to call

	symbols(.very.long.argument.list.etc.etc., 
                xlim = if(<something>) my.xlim else <<DEFAULT>>,
		...)

where with the NULL setup, I can even drop the else clause
{since  if(FALSE)  evaluates to NULL},
but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
to missing...

In short, we (Uwe, people here and me) *do* prefer NULL to missing...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug 22 12:19:44 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 22 Aug 2000 13:19:44 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL>
Message-ID: <39A261D0.4F731961@statistik.uni-dortmund.de>

Martin Maechler wrote:
> 
> [now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
>     .............
> 
>     >> yes,
>     >> and Uwe's fix cures this problem.
>     >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")
> 
> which has
>                 ylab = "", xlim = NULL, ylim = NULL, ...)
> and later
>                 if(is.null(xlim)) {
>                    ...
>                 }
> 
>     BDR> Why is using NULL preferable here?  The standard paradigm as I
>     BDR> understand it is
> 
>     BDR> ylab = "", xlim, ylim, ...)
>     BDR> ...
>     BDR> if(missing(xlim)) {
>     BDR>   xlim <- range(x, na.rm = TRUE)
>     BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
>     BDR> }
> 
>     BDR> In S there is a problem with passing down missingness, but not in R.
> 
> I know.  Note however that to be really useful one would have to able to
> also *set* missingness for an argument (which I think we can't currently)
> 
> I might want to call
> 
>         symbols(.very.long.argument.list.etc.etc.,
>                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
>                 ...)
> 
> where with the NULL setup, I can even drop the else clause
> {since  if(FALSE)  evaluates to NULL},
> but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> to missing...
> 
> In short, we (Uwe, people here and me) *do* prefer NULL to missing...

You are right.
Especially in the development of the scatterplot3d() function I have had
some problems with missing arguments (not only xlim), so I decided to
work with NULL as default instead of "missing".
And I don't see any problems so far.
The only reason to use "missing" is the "standard paradigm" argument, as
Prof. Ripley mentioned.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 13:10:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 14:10:14 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: Uwe Ligges's message of "Tue, 22 Aug 2000 13:19:44 +0200"
References: <200008220700.JAA24625@pubhealth.ku.dk> <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL> <39A261D0.4F731961@statistik.uni-dortmund.de>
Message-ID: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> > I know.  Note however that to be really useful one would have to able to
> > also *set* missingness for an argument (which I think we can't currently)
> > 
> > I might want to call
> > 
> >         symbols(.very.long.argument.list.etc.etc.,
> >                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
> >                 ...)
> > 
> > where with the NULL setup, I can even drop the else clause
> > {since  if(FALSE)  evaluates to NULL},
> > but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> > to missing...
> > 
> > In short, we (Uwe, people here and me) *do* prefer NULL to missing...
> 
> You are right.
...
> The only reason to use "missing" is the "standard paradigm" argument, as
> Prof. Ripley mentioned.

Also the fact that all those NULL defaults tend to clutter up the
code... 

I tend to see it the way that the "standard paradigm" is well
intended, but flawed -- mostly in the S incarnation, but also in R for
the reasons that Martin poins out. So another option could be to
fix things so that the paradigm worked.

Do we want to reconsider the semantics and include a "missing
constant"? In fact we have one (don't look now, Robert!):

missing.value<-quote()
missing(missing.value)
f<-function(x)missing(x)
f(missing.value)
y<-missing.value

However, things are not all that simple, e.g. constructions like

g<-function(y,x=if (y) 2 else missing.value) missing(x)

returns TRUE both for g(TRUE) and g(FALSE)

That actually makes sense, but this is perplexing:

> f<-function(x)missing(x)
> g<-function(y,x=if(y)2 else missing.value)f(x)
> g(F)
[1] FALSE
> g(T)
[1] FALSE
> g<-function(y,x=if(y)2 else missing.value)print(x)
> g(T)
[1] 2
> g(F)
Error in print(x) : Argument "missing.value" is missing, with no default

[You don't need to mess with missing.value to create this kind of
effect: 

> g<-function(y,x=y)f(x)
> g()
[1] TRUE
> g<-function(y,x=(y))f(x)
> g()
[1] FALSE

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 17:36:18 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008221636.SAA03685@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> {all recent versions of R} Problem / design bug :

    MM>   diff.default() doesn't deal with "ts" objects properly, diff.ts()
    MM> does, but that is only available from package "ts" where as the
    MM> constructor function ts() is in base.

    MM> It's not sufficient to just move diff.ts() to package base, since
    MM> it relies itself on lag & lag.default which are also only in
    MM> package ts.

    MM> ----------------------------------------------------

    MM> A simple example :

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM> Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences *
    MM> xtsp[3], : invalid time series parameters specified

    >> library(ts)

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM>      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 1980 1 1 1 1 1
    MM> 1 1 1 1 1 1 1981 1 1 1 1 1 1 1 1 1 1 1 1 1982 1 1 1 1 1 1 1 1 1 1 1
    MM> 1 1983 1 1 1 1 1 1 1 1 1 1 1 1 1984 1 1

---
answering myself :

One easy and "clean" fix is to put the following at the very beginning of
diff.default :

    if(is.ts(x)) {
        require(ts)
        UseMethod("diff")
    }

{and then remove the "tsp" stuff at the end of diff.default()}.

Now
	diff(ts(1:20))
gives a one line message
-------------------------------------
Loading required package: ts 
-------------------------------------
but I think this is really okay and desired to some extent.

As Prof Ripley pointed out in a private e-mail to me,
package ts  should really be used for everything "ts"ish,
but then we want to have very basic "ts" functionality in package base...

The above passes "make check" (and more).

Anybody against this?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 17:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 18:58:39 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)"
References: <200008221636.SAA03685@pubhealth.ku.dk>
Message-ID: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> One easy and "clean" fix is to put the following at the very beginning of
> diff.default :
> 
>     if(is.ts(x)) {
>         require(ts)
>         UseMethod("diff")
>     }
...
> The above passes "make check" (and more).
> 
> Anybody against this?

I'm not really pro or con, but what is wrong with autoloading diff.ts?? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 08:39:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 09:39:47 +0200 (CEST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
References: <200008221636.SAA03685@pubhealth.ku.dk>
 <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.32707.497714.333996@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

it does not work, i.e.

   autload("diff.ts", "ts")
   diff(ts(1:10))

does not load package ts.
It's not so clear if this is a bug in method dispatching ...
but assuming ``standard semantic'' (diff.ts is in search() i.e. diff()
				    should dispatch to it),
it is one..

Shall I 
 1) commit my proposed change to "R-release-patches" (since it fixes a bug
						     in R 1.1.1)
 2) submit a new bug report  about the non-dispatching to "Autoloads"
    objects
?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 23 09:53:34 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Aug 2000 10:53:34 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: Martin Maechler's message of "Wed, 23 Aug 2000 09:39:47 +0200 (CEST)"
References: <200008221636.SAA03685@pubhealth.ku.dk> <x2bsylfd1c.fsf@blueberry.kubism.ku.dk> <14755.32707.497714.333996@gargle.gargle.HOWL>
Message-ID: <x23djwcq9d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Shall I 
>  1) commit my proposed change to "R-release-patches" (since it fixes a bug
> 						     in R 1.1.1)
>  2) submit a new bug report  about the non-dispatching to "Autoloads"
>     objects

I'm inclined to say 2). 

1) would be wrong in any case (it's hardly a critical bug since you
can just preload ts and the fix is somewhat questionable when you
consider the full consequences). If anything, the fix would be for the
development version -- not that that really matters at this point,
since there's a very good chance that the next release will be 1.2.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 10:17:20 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 11:17:20 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
 <14754.19553.429605.429987@gargle.gargle.HOWL>
 <39A261D0.4F731961@statistik.uni-dortmund.de>
 <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.38560.233927.26543@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
    >> > I know.  Note however that to be really useful one would have to
    >> able to > also *set* missingness for an argument (which I think we
    >> can't currently)
    >> > 
    >> > I might want to call
    >> > 
    >> > symbols(.very.long.argument.list.etc.etc., > xlim =
    >> if(<something>) my.xlim else <<DEFAULT>>, > ...)
    >> > 
    >> > where with the NULL setup, I can even drop the else clause >
    >> {since if(FALSE) evaluates to NULL}, > but with the missing(xlim)
    >> paradigm, I should be able to set <<DEFAULT>> > to missing...
    >> > 
    >> > In short, we (Uwe, people here and me) *do* prefer NULL to
    >> missing...
    >> 
    >> You are right.
    PD> ...
    >> The only reason to use "missing" is the "standard paradigm"
    >> argument, as Prof. Ripley mentioned.

    PD> Also the fact that all those NULL defaults tend to clutter up the
    PD> code...
yes, the argument list

    PD> I tend to see it the way that the "standard paradigm" is well
    PD> intended, but flawed -- mostly in the S incarnation, but also in R
    PD> for the reasons that Martin poins out. So another option could be
    PD> to fix things so that the paradigm worked.
yes!

    PD> Do we want to reconsider the semantics and include a "missing
    PD> constant"? In fact we have one (don't look now, Robert!):

	[ `missing' spaces around "<-" added (above and below) by MM  ... ]

    >> missing.value <- quote()
    >> missing(missing.value)
    >> f <- function(x)missing(x)
    >> f(missing.value)
    >> y <- missing.value

wow!  (I  thought about you when I wrote above
       ``*set* missingness for an argument (which I think we can't currently)''
						  ^^^^^^^
      )						 

    PD> However, things are not all that simple, e.g. constructions like

    >> g <- function(y,x=if (y) 2 else missing.value) missing(x)

    PD> returns TRUE both for g(TRUE) and g(FALSE)

    PD> That actually makes sense,
yes

    PD> but this is perplexing:

    >> f <- function(x)missing(x)
    >> g <- function(y,x=if(y)2 else missing.value)f(x)
    >> g(F)
    PD> [1] FALSE
    >> g(T)
    PD> [1] FALSE
    >> g <- function(y,x=if(y)2 else missing.value)print(x)
    >> g(T)
    PD> [1] 2
    >> g(F)
    PD> Error in print(x) : Argument "missing.value" is missing, with no default

    PD> [You don't need to mess with missing.value to create this kind of
    PD> effect: 

    >> g <- function(y,x=y)f(x)
    >> g()
    PD> [1] TRUE
    >> g <- function(y,x=(y))f(x)
    >> g()
    PD> [1] FALSE

(that's a bug in the passing of "missingness", right ?)

--------

Coming back to your proposition:

Yes I think it's worth considering to make your "missing.value" a new
language constant.  However, the name "missing.value" is too easily
confused by what we (statisticians) usually  use  `NA' for.

Coffee discussion here lead to one of
       missing.argument
       missing.arg
or     MARG

So, this would need to
1)  declare "MARG" (or whatever)
    a constant, the same as "NA" or "NULL" or "TRUE"
2)  Maybe define a ``print method'' for it,
    the problem being that using a class or changing print.default() is not
    going to work, since the *generic*  print() now already gives the error

        Error in print(x) : Argument "MARG" is missing, with no default

   Hence, print may be changed to something like

     print <- function (x, ...) {
	 if(missing(x))
	     return(print("<<missing argument>>", quote = FALSE, ...))
	 UseMethod("print")
     }

     MARG <- quote()

     MARG ## still does not work !
     (MARG)## neither
     print(MARG) # does work

which is somewhat perplexing : 
There must be an internal extra "if(missing(.))"  even *before* print() is
called ...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Aug 23 10:48:06 2000
From: jens.oehlschlaegel@bbdo-interone.de (jens.oehlschlaegel@bbdo-interone.de)
Date: Wed, 23 Aug 2000 11:48:06 +0200 (MET DST)
Subject: [Rd] 2 Bugs in na.omit.default() (PR#641)
Message-ID: <200008230948.LAA08598@pubhealth.ku.dk>

# BUG 1: returns empty vector if no NAs present

> nona <- 1:10
> na.omit(nona)
numeric(0)

na.omit.default() has two lines where
  object[-omit]
is used, where omit represents positions of NAs and thus without NAs
  omit = numeric(0)
and since
  -numeric(0) = numeric(0)

  object[-omit] = numeric(0)

It looks like an earlier version of na.omit.default had 'omit' defined as
logical,
at least the last section
  if (any(omit))
seems to expect omit as logical
which leads to

# BUG 2: wrong indication of dropped elements
> withna <- c(NA, 1:10, NA)
> unclass(na.omit(withna))
 [1]  1  2  3  4  5  6  7  8  9 10
attr(,"na.action")
[1]  1 NA
attr(,"na.action")attr(,"class")
[1] "omit"


# suggested fix, experts PLEASE CROSS CHECK
na.omit.default <-
function (object)
{
    if (!is.atomic(object))
        return(object)
    d <- dim(object)
    if (length(d) > 2)
        return(object)
    if (length(d)) {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          omit <- unique(((omit - 1)%%d[1]) + 1)
          nm <- rownames(object)
          object <- object[-omit, , drop = FALSE]
        }
    }
    else {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          nm <- names(object)
          object <- object[-omit]
        }
    }
    if (hasomit) {
        names(omit) <- nm[omit]
        attr(omit, "class") <- "omit"
        attr(object, "na.action") <- omit
    }
    object
}







> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R



--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 24 16:08:57 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 24 Aug 2000 17:08:57 +0200 (MET DST)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
Message-ID: <200008241508.RAA24536@pubhealth.ku.dk>

(As mentioned before, on R-devel)

This code snippet shows what the Subject above says :

> autoload("diff.ts", file="ts")
> diff(ts(1:10,freq=2))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  :
	invalid time series parameters specified
> traceback()
[1] "tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3], "
[2] "    xtsp[2], xtsp[3]))"
[3] "diff.default(ts(1:10, freq = 2))"
[4] "diff(ts(1:10, freq = 2))"

[The R version doesn't matter; this has been true for 1.1.x as well]

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 2.0
 year = 2000
 month = 08
 day = 24
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 18:08:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 24 Aug 2000 10:08:09 -0700 (PDT)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: <200008241508.RAA24536@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>

On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:

> (As mentioned before, on R-devel)
> 
> This code snippet shows what the Subject above says :

The problem is that isFunction is false for diff.ts, since it is only a
promise, not a function.

I think the solution is for usemethod to force the promise (in lines 225ff
of objects.c), but I'm not sure how to do this.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 21:45:54 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 24 Aug 2000 22:45:54 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008242045.WAA25703@pubhealth.ku.dk>

On Thu, 24 Aug 2000, Troels Ring wrote:

> Dear friends.
> 
> Is this as expected ? Is alpha and beta too large simply ?
> 
>  > dbeta(.1,534,646)
> [1] NaN
> Warning message:
> NaNs produced in: dbeta(x, shape1, shape2, log)

well, it should work, but the correct answer is effectively zero.
  pbeta(.1,534,646) gives 3.6e-213

Perhaps more worrying is 
> dbeta(.25,534,646)
[1] Inf


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 24 23:41:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2000 00:41:27 +0200
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: Thomas Lumley's message of "Thu, 24 Aug 2000 10:08:09 -0700 (PDT)"
References: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>
Message-ID: <x2lmxm1duw.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
> > (As mentioned before, on R-devel)
> > 
> > This code snippet shows what the Subject above says :
> 
> The problem is that isFunction is false for diff.ts, since it is only a
> promise, not a function.
> 
> I think the solution is for usemethod to force the promise (in lines 225ff
> of objects.c), but I'm not sure how to do this.

Yes, must be the right thing to do. We must be doing the same thing
with regular function lookups, no? Not that there are many (if any)
relevant cases, but

> autoload(".TkRoot","tcltk")
> .TkRoot(x)
Error: couldn't find function ".TkRoot"

will cause the .TkRoot promise to be forced, loading tcltk *before* it
can figure out that it isn't a function. I see no reason for object
methods to behave any differently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 25 07:47:00 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 25 Aug 2000 08:47:00 +0200 (MET DST)
Subject: [Rd] crash using fisher.test on Windows; was [R] unexpected crash of R under (PR#644)
Message-ID: <200008250647.IAA27299@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> On Thu, 24 Aug 2000, Emmanuel Paradis wrote:
> 
> > Dear All,
> >
> > We encountered an unexpected crash with R under Windows when running
> > fisher.test(). We had this problem only under this OS and only with the
> > following data:
> >
> > > T
> >       [,1] [,2]
> >  [1,]    2    1
> >  [2,]    2    1
> >  [3,]    4    0
> >  [4,]    8    0
> >  [5,]    6    0
> >  [6,]    0    0
> >  [7,]    1    0
> >  [8,]    1    1
> >  [9,]    7    1
> > [10,]    8    2
> > [11,]    1    0
> > [12,]    3    1
> > [13,]    1    1
> > [14,]    3    0
> > [15,]    7    2
> > [16,]    4    1
> > [17,]    2    0
> > [18,]    2    0
> > [19,]    2    0
> >
> > The commands:
> >
> > library(ctest)
> > fisher.test(T)
> >
> > result in a crash of R with a system error. (Note that if we change T[19,2]
> > to the value "1", then there is no problem.) The crash occurs with R-1.0.1
> > under Win98, and with R-1.1.1 under WinNT (both with Rgui and with Rterm).
> > However, there is no problem at all under Solaris (tested with R-1.0.1 and
> > R-1.1.0).
> 
> Your pinpointing the blame on the Windows port of R is quite unfair. The
> problem is in your usage of the function: the workspace was too small and
> the code was writing outside it.  It is pure chance that did not affect any
> the other OSes you tried (or was that just one OS?).
> 
> fisher.ctest(T, workspace=1e6) works without crashing on Windows, Solaris
> and Linux here.


I tried with the default of workspace=200000 on WinNT and Solaris. The
crash (Dr. Watson) only happens on WinNT. On Solaris everything works
fine.

Now I tried it using workspace=1000 (too small). On Solaris AND WinNT
the same result:

 > fisher.test(T, workspace=1000)
 Error in fisher.test(T, workspace = 1000) : 
         FEXACT error 40.
 Out of workspace.

This is the error message, I would expect, but not a crash of R!
CC'ing to R-Bugs with modified subject.


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 25 14:20:10 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 25 Aug 2000 15:20:10 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008251320.PAA05152@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >> Dear friends.
    >> 
    >> Is this as expected ? Is alpha and beta too large simply ?
    >> 
    >> > dbeta(.1,534,646)
    >> [1] NaN
    >> Warning message:
    >> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >> dbeta(.25,534,646)
    TL> [1] Inf
yes.
and I see that it is one case where the log-density seems to be alright:

> dbeta(.25,534,646,log=TRUE)
[1] -109.939612

and also for the NaN case :

> dbeta(.1,534,646, log=TRUE)
[1] -480.725168

A workaround is  using   exp( log-density  ), i.e.

  exp(dbeta(x,a,b, log = TRUE)) :

Look at

> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
or
> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

--
I'll have a look.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 15:53:00 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 10:53:00 -0400
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
In-Reply-To: <200008251320.PAA05152@pubhealth.ku.dk>
References: <200008251320.PAA05152@pubhealth.ku.dk>
Message-ID: <39a683e6.3864125@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
message <200008251320.PAA05152@pubhealth.ku.dk>:

>Look at
>
>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

I never knew that plot could take a function!  

Could I make some suggestions?

1.  It should be mentioned more prominently in the documentation.
Since functions aren't a class, I scanned over the list of plot
methods without ever noticing that functions were mentioned there.
I'd suggest modifying the description of parameter x to read:

 x: the coordinates of points in the plot. Alternatively, a
single plotting structure, function or R object with a `plot' method
can be provided.


2.  If xlim is specified and from and to aren't, the from and to
values should default to xlim[1] and xlim[2], not 0 and 1.  

3.  The help for plot.function says:

"This used to be a quick hack which seems to serve a useful
purpose, but can give bad results for functions which are not
smooth."

That doesn't read right:  it makes me ask, "If it used to be a quick
hack, what is it now?"  I'd suggest:

"This function was a quick hack which seems to serve a useful
purpose, but it can give bad results for functions which are not
smooth."


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 25 17:57:50 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 25 Aug 2000 18:57:50 +0200 (CEST)
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <39a683e6.3864125@fisher.stats.uwo.ca>
References: <200008251320.PAA05152@pubhealth.ku.dk>
 <39a683e6.3864125@fisher.stats.uwo.ca>
Message-ID: <14758.42382.735308.898057@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <murdoch@stats.uwo.ca> writes:

    Duncan> On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
    Duncan> message <200008251320.PAA05152@pubhealth.ku.dk>:

    >> Look at
    >> 
    >>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

    Duncan> I never knew that plot could take a function!  
well..

    Duncan> Could I make some suggestions?
sure... no promisses though ;-)

    Duncan> 1.  It should be mentioned more prominently in the documentation.
    Duncan> Since functions aren't a class, I scanned over the list of plot
    Duncan> methods without ever noticing that functions were mentioned there.
    Duncan> I'd suggest modifying the description of parameter x to read:

    Duncan> x: the coordinates of points in the plot. Alternatively, a
    Duncan> single plotting structure, function or R object with a `plot' method
    Duncan> can be provided.

ok, done, thank you.
    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  

good idea,
and easy to implement...  
I would have it as

  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
              and \code{to}.}

(and not give a warning if someone uses  xlim  *and* e.g. `from').

    Duncan> 3.  The help for plot.function says:

    Duncan> "This used to be a quick hack which seems to serve a useful
    Duncan> purpose, but can give bad results for functions which are not
    Duncan> smooth."

    Duncan> That doesn't read right:  it makes me ask, "If it used to be a quick
    Duncan> hack, what is it now?"  I'd suggest:
yes..
    Duncan> "This function was a quick hack which seems to serve a useful
    Duncan> purpose, but it can give bad results for functions which are not
    Duncan> smooth."

"This" was now really implying  both  curve()  and plot.function()  ...

Could I just add one word, "now", to make it

>>    "This used to be a quick hack which now seems to serve a useful purpose,
>>                                        ===
>>     but can give bad results for functions which are not smooth."

--
Thank you,
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 19:10:18 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 14:10:18 -0400
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <14758.42382.735308.898057@gargle.gargle.HOWL>
References: <200008251320.PAA05152@pubhealth.ku.dk> <39a683e6.3864125@fisher.stats.uwo.ca> <14758.42382.735308.898057@gargle.gargle.HOWL>
Message-ID: <39a6b55a.2956059@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 18:57:50 +0200 (CEST), you wrote in message
<14758.42382.735308.898057@gargle.gargle.HOWL>:

>    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
>    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  
>
>good idea,
>and easy to implement...  
>I would have it as
>
>  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
>              and \code{to}.}
>
>(and not give a warning if someone uses  xlim  *and* e.g. `from').

Hmmm, I can see that someone might want both, and have them take
inconsistent values.  Then from and to should control the range of
values graphed, and xlim should control the plotting box.

For example,

  plot(function(x) x^2, xlim=c(-1,1), from=0, to=1)

should do what it does now, i.e. have the x-axis run from -1 to 1, but
only positive x values are graphed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Aug 26 08:41:53 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 26 Aug 2000 09:41:53 +0200 (MET DST)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200008260741.JAA00333@pubhealth.ku.dk>

hi -

i apologize if this is a duplicate.

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

perhaps unrelated but i thought i'd mention: unlist() complains about a
call/formula object, but sapply() does not (a call certainly "looks"
like a list, but includes names at some level).

- peter perkins


$ R --vanilla

> find(list)
[1] "package:base"
> find(unlist)
[1] "package:base"
> list1 <- list(a="a", b="b")
> unlist(list1)
  a   b
"a" "b"
> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b

> mode(list2)
[1] "list"
> mode(unlist(list2))
[1] "list"


--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Aug 26 08:47:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 26 Aug 2000 09:47:59 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008260747.JAA00545@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Aug 27 21:24:00 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 27 Aug 2000 22:24:00 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
Message-ID: <200008272024.WAA05134@pubhealth.ku.dk>

Dear R Team,

# Summary of the problem: setting contrasts as 
   > contrasts(g) <- contr.treatment 
or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
(i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
and fitting an lm model without an intercept results in a model matrix
that lacks one column.

(I do ask for forgiveness if this is not a bug but is due to my
ignorance.)

Many thanks for the extraordinary R.

Rashid Nassar


# Details:

# the data:
x <- gl(3,3)
y <- c(2,4,3,4,5,7,6,5,8)

## 1.  Using the default (treatment) contrasts unchanged gives correct 
       results.

## 2.  Setting contrasts using either of the following two forms also
       gives correct results:

> contrasts(x) <- "contr.treatment"
> contrasts(C(x,contr.treatment))

## 3. However I believe that the following (contr.treatment without quotation
marks) results in a problem (also contrasts(x) <- matrix(c(1,-1,0),ncol=1))
when an intercept is not included in the model:

> contrasts(x) <- contr.treatment 
> f4 <- lm(y ~ x - 1)
> summary(f4)

Coefficients:
   Estimate Std. Error t value Pr(>|t|)
x2    5.333      1.351   3.947  0.00555
x3    6.333      1.351   4.688  0.00224

> anova(f4)
Analysis of Variance Table

Response: y
          Df  Sum Sq Mean Sq F value   Pr(>F)
x          2 205.667 102.833  18.778 0.001537
Residuals  7  38.333   5.476                 

> model.matrix(f4)
  x2 x3
1  0  0
2  0  0
3  0  0
4  1  0
5  1  0
6  1  0
7  0  1
8  0  1
9  0  1

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 28 07:24:04 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 Aug 2000 08:24:04 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008280624.IAA06082@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <200008272024.WAA05134@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:59 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 08:28:59 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#647)
Message-ID: <200008280628.IAA06146@pubhealth.ku.dk>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Aug 28 12:17:48 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Mon, 28 Aug 2000 07:17:48 -0400 (EDT)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
In-Reply-To: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>

Dear Professor Ripley,

Thank you very much for your kind explanation.  If I may lamely say
something in my defence, even as I apologize for my error: I mistook the
sentence "the (quoted) name of a function" to mean "optionally quoted"
because of the parentheses surrounding "quoted", and was encouraged by the
fact that R did not complain when I gave the unquoted form and that it did
implement a change (although not the desired one), and (even more lamely)
the fact that none of the examples on the help page show the function
quoted, although I now realize that in the example the function has an
argument, and is not given simply the name of the function. 

Again, thank you for taking the time to reply and point out my mistake.

Rashid Nassar


On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:

> Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> 
> On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> 
> > Dear R Team,
> > 
> > # Summary of the problem: setting contrasts as 
> >    > contrasts(g) <- contr.treatment 
> > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > and fitting an lm model without an intercept results in a model matrix
> > that lacks one column.
> 
> Right, but first is not allowed by (?contrasts)
> 
>      ctr: either a matrix whose columns give coefficients for contrasts
>           in the levels of `x', or the (quoted) name of a function
>           which computes such matrices.
> 
> and the second is arguably correct: you chose to use only two columns.
> However, the behaviour is different in the development version, 
> which does not code x in models such as this, and so does not
> have the problem.
> 
> That is not precisely what S does, but seems a sane way of interpreting the
> contradictory information given (which is that you don't want an intercept
> and that you only want two columns for the coding matrix for x!  That
> applies to the function case too: there the coding matrix is evaluated
> before knowing if contrast are required, that is using argument contrasts =
> FALSE).
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:26:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>
Message-ID: <Pine.GSO.4.05.10008281225320.6947-100000@auk.stats>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:27:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 13:27:02 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#648)
Message-ID: <200008281127.NAA10878@pubhealth.ku.dk>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 20:38:58 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 15:38:58 -0400
Subject: [Rd] x11 configure test
References: <00082909165800.19652@friedman> <x2hf84m5xd.fsf@blueberry.kubism.ku.dk>
Message-ID: <39AC1152.244E4EBF@bank-banque-canada.ca>

>> the graphics window pops up in 6.3, but not in 6.4
>Sounds like X didn't get configured on the 6.4 box. Might you be
>missing an x11-devel package or some such?
                          ^^^^^^

Well I have Mandrake 7.0 installed on two very similar machines and R
1.1.1 configures with
X11 support      no
Gnome support no
Tcl/Tk support no

on one and

X11 support      yes
Gnome support no
Tcl/Tk support yes

on the other. Both are running X11 and Gnome. I think I was told that
Gnome support has to be specifically indicated to configure, but I don't
understand what is happening to X11 and Tcl/Tk. (Of course, it would't
be the first time I've messed up something re-installing Linux.) I do
think the X11 support test seems a bit too particular about something. I
was actually running X11 when I did the configure that gave "X11 support
no".

BTW, should Linux X11-development be necessary or just X11 support?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 29 21:03:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 29 Aug 2000 13:03:29 -0700 (PDT)
Subject: [Rd] x11 configure test
In-Reply-To: <39AC1152.244E4EBF@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>

On Tue, 29 Aug 2000, Paul Gilbert wrote:

> >> the graphics window pops up in 6.3, but not in 6.4
> >Sounds like X didn't get configured on the 6.4 box. Might you be
> >missing an x11-devel package or some such?
>                           ^^^^^^
> 
> Well I have Mandrake 7.0 installed on two very similar machines and R
> 1.1.1 configures with
> X11 support      no
> Gnome support no
> Tcl/Tk support no
> 
> on one and
> 
> X11 support      yes
> Gnome support no
> Tcl/Tk support yes
> 
> on the other. Both are running X11 and Gnome. I think I was told that
> Gnome support has to be specifically indicated to configure, but I don't
> understand what is happening to X11 and Tcl/Tk. (Of course, it would't
> be the first time I've messed up something re-installing Linux.) I do
> think the X11 support test seems a bit too particular about something. I
> was actually running X11 when I did the configure that gave "X11 support
> no".
> 
> BTW, should Linux X11-development be necessary or just X11 support?

You need x11-development, ie the X11 headers.  Configure does look in
quite a lot of places for both the headers and the libraries.

Tcl/Tk is less dedicated, but you can specify the location quite easily.  
You will have problems if the files have nonstandard names (eg on a
machine here tcl.h is the old version and the new version is tcl8.h, which
doesn't work)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 22:04:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 17:04:20 -0400
Subject: [Rd] x11 support
References: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>
Message-ID: <39AC2554.35E214E9@bank-banque-canada.ca>

>> BTW, should Linux X11-development be necessary or just X11 support?
>You need x11-development, ie the X11 headers.

This may be my problem. As I recall, one of the Linux install questions
is about X11 development. I didn't think of compiling R as X11
development, and I don't do anything else that would require me to
install this.

Perhaps this is relevant to the r-help question about X11 not working
with a recent SuSe install? Unfortunately I deleted that message.

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Wed Aug 30 16:02:15 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)
Subject: [Rd] Bug with tick marks on x-axis.
Message-ID: <200008301502.RAA23982@alpha.luc.ac.be>

Hi,
 I have a dataset where we are trying to model the resistance of
horses' lungs.  One of the covariates is the administered
pressure. This variable is a little odd in the sense that an increase
of pressure corresponds to a "more negative value" of the covariate. A
graph representing the change in resistance in function of the
pressure would be helpful for the biologist. But it should have the
x-axis (pressure) going from positive to negative pressure values to
correspond to an increase in pressure (this representation is clearer
to the biologists).
 Now under Windows 95 and 98 with rw1011, I get a problem with the
tick marks of the x-axis. Here is a small example:

x <- (0:-4)*10
y <- rnorm(5)
plot(x,y,type="l")                  # ok
plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

 I don't know if there is some way to get around this... it might be
easier to just use a previous version of R which does not contain that
bug.
 Thank you for any suggestions,
Patrick.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 30 16:22:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 2000 17:22:04 +0200
Subject: [Rd] Bug with tick marks on x-axis.
In-Reply-To: Patrick Lindsey's message of "Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)"
References: <200008301502.RAA23982@alpha.luc.ac.be>
Message-ID: <x2wvgy4vvn.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:


> plot(x,y,type="l")                  # ok
> plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

>  I don't know if there is some way to get around this... it might be
> easier to just use a previous version of R which does not contain that
> bug.
>  Thank you for any suggestions,

xlim is generally happier if you give it as (min,max) *in that order*.
We're not actually promising that things would work otherwise, are we?

A workaround would be to do the labeling yourself

plot(-x,y,type="l",xlim=c(0,40),axes=F)
box()
axis(1,at=-pretty(x),labels=pretty(x))
axis(2)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Wed Aug 30 23:18:48 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 00:18:48 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
Message-ID: <39AD8848.B272885D@epfl.ch>

Dear Mysql & R users,

first of all a big thanks to the authors of RMySQL.

I got the following table;
mysql> describe UserClick;
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| Field          | Type        | Null | Key | Default | Extra |
Privileges
|
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| UseTransaction | varchar(20) |      |     |         |       |
select,insert,update,references |
| Engine         | varchar(30) |      |     |         |       |
select,insert,update,references |
| URL            | text        |      |     |         |       |
select,insert,update,references |
+----------------+-------------+------+-----+---------+-------+-----------------

I access it via:
rs<-dbExecStatement(con,"SELECT *  from UserClick")
res<-fetch(rs)

Things go wrong withthe URL entry which is of type text;
$Engine
[1] "Armintest" "Test"      "Voila"     
$URL
$URL[[1]]
NULL
...


Any ideas of how I could fix that would be highly appreciated. If it's
not yet
implemented, if you give me a few indications, I would implement it.

Thanks,
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Aug 31 00:06:28 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 30 Aug 2000 18:06:28 -0500
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
In-Reply-To: "Armin S. A. Roehrl"'s message of "Thu, 31 Aug 2000 00:18:48 +0200"
References: <39AD8848.B272885D@epfl.ch>
Message-ID: <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>

>>>>> "Armin" == Armin S A Roehrl <Armin.Roehrl@epfl.ch> writes:

  Armin> Dear Mysql & R users, first of all a big thanks to the
  Armin> authors of RMySQL.

  Armin> I got the following table;
  mysql> describe UserClick;
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | Field | Type | Null | Key | Default | Extra | Privileges |
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | UseTransaction | varchar(20) | | | | |
  Armin> select,insert,update,references | | Engine | varchar(30) | |
  Armin> | | | select,insert,update,references | | URL | text | | | |
  Armin> | select,insert,update,references |
  Armin> +----------------+-------------+------+-----+---------+-------+-----------------

  Armin> I access it via: rs<-dbExecStatement(con,"SELECT * from
  Armin> UserClick") res<-fetch(rs)

  Armin> Things go wrong withthe URL entry which is of type text;
  Armin> $Engine [1] "Armintest" "Test" "Voila" $URL $URL[[1]] NULL
  Armin> ...


  Armin> Any ideas of how I could fix that would be highly
  Armin> appreciated. If it's not yet implemented, if you give me a
  Armin> few indications, I would implement it.

  Armin> Thanks, Armin

We have a newer version of the MySQL package (currently working in S). 
This may solve your problem. I am currently working on another project
but I would do the R port of the latest MySQL package in a few
days.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Thu Aug 31 00:21:04 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 01:21:04 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
References: <39AD8848.B272885D@epfl.ch> <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>
Message-ID: <39AD96E0.9B94E38D@epfl.ch>


> We have a newer version of the MySQL package (currently working in S).
> This may solve your problem. I am currently working on another project
> but I would do the R port of the latest MySQL package in a few
> days.

Brilliant! Looking forward to that.
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Thu Aug 31 06:28:03 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Thu, 31 Aug 2000 07:28:03 +0200 (MET DST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
Message-ID: <200008310528.HAA25038@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.0.1
OS: Windows NT 4 sp 6
Submission from: (NULL) (216.122.46.200)



I'm trying to read in a large matrix (800 x 800 or bigger)
and R prints an error telling me that my rows are not
all the same length.  I've double checked the text file
using gawk and it tells me that they are all the same.

When I pair it down to 247 x 247, then it works, but not
when I have 289 x 289.  I'm guesing that there is some
hardcoded 256 column limit, but I could be wrong.

Otherwise, I'm loving R.  Thank you so much!

Mark



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 31 07:23:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 Aug 2000 07:23:53 +0100 (BST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
In-Reply-To: <200008310528.HAA25038@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008310708570.12521-100000@auk.stats>

On Thu, 31 Aug 2000 r@marksmucker.com wrote:

> Full_Name: Mark Smucker
> Version: 1.0.1
> OS: Windows NT 4 sp 6
> Submission from: (NULL) (216.122.46.200)
> 
> 
> 
> I'm trying to read in a large matrix (800 x 800 or bigger)
> and R prints an error telling me that my rows are not
> all the same length.  I've double checked the text file
> using gawk and it tells me that they are all the same.
> 
> When I pair it down to 247 x 247, then it works, but not
> when I have 289 x 289.  I'm guesing that there is some
> hardcoded 256 column limit, but I could be wrong.

Not that I know of.  But as you want to read a matrix, you will
do much better to use scan to read it as than has less overhead
and allows you to use much shorter lines in the file.  It will
just read consecutive numbers.  As in

A <- matrix(scan("file", what=0), 800, 800, byrow=TRUE)

> Otherwise, I'm loving R.  Thank you so much!

Yours is two versions old now, so please update to 1.1.1.

Here is my test (on 1.1.1 on Windows)

> x <- rnorm(300*300)
> write(x, "file", 300)
> A <- matrix(scan("file", what=0), 300, 300, byrow=TRUE)
> B <- as.matrix(read.table("file"))
> range(A-B)
[1] 0 0

So no limit and no problem. I no longer have a copy of 1.0.1 installed, so
if this is still a problem after you upgrade, can you please re-submit the
bug report with an example that actually fails for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Thu Aug 31 22:52:13 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Thu, 31 Aug 2000 23:52:13 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200008312152.XAA05500@pubhealth.ku.dk>

Full_Name: Kenny Ye
Version: R-1.1.1
OS: Solaris 2.6
Submission from: (NULL) (129.49.6.133)


when i use plot(x,y,axes=F), the axes and the box are still ploted.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Aug  1 07:06:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 1 Aug 2000 16:06:06 +1000
Subject: [Rd] Using the nls package
In-Reply-To: <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>; from ripley@stats.ox.ac.uk on Mon, Jul 31, 2000 at 07:20:32AM +0100
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>
Message-ID: <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>

On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> 
> How can you be sure?  What are `the same numbers'?  The parameters
> unchanged to machine precision, yes, but that's not what you print.

The only safe way I can think of would be to go for machine precision
as the default and then have some user-settable threshold for:

	( current residual / previous residual )

> > Yes, this is understandable but if most people are like me (questionable
> > assumption I admit) they try a few artificial examples first to get
> > the general idea of how these things work. I guess there is a certain
> > illogical assumption that if I try what seems to me to be an obviously
> > easy problem and it cannot handle it then something must be wrong and
> > trying harder problems is not going to help.
> 
> Perhaps you need to read up on the algorithmic theory so you are not so
> easily confused.  NLS problems with an exact-fit solution are a different
> sub-class with different effective algorithms.

Undoubtably there is a lot more reading that I can do to improve
my understanding. I'm just making a suggestion based on the observation
that the algorithm actually found the right answer very quickly.

> > SQUARES of the modulus of the residuals. Using the modulus itself
> > would be similar to using the absolute value of the residuals in the
> > non-complex case (not what we want I believe).
> 
> Sum of squares is common, and ises for complex linear regression in those
> cases where it makes sense (e.g. in time series regression one
> FFT-ed series on others).

As it turns out, I am working with FFT data, I am looking for a transfer
function that will fit some admittance measurements.

> > In either case, the documentation should mention that complex
> > numbers are not supported.
> 
> Why should documentation mention everything the function does not do? There
> are *lots* of places in R where numeric quantities must be real.  Linear
> regression (lm) for a start.  What nls says is
> 
>  formula: a nonlinear model formula including variables and parameters
> 
> which is none too explicit, but the reference (Bates & Watts) is,
> so I assume you did not read it.

The UTS library does have a copy but it isn't due back till September.

I searched a few of the local bookshops (over the internet) and
Diana Bates (with her children's stories) came up infinitely more often
than Douglas Bates and his regression. I will have to search the
University Co-op bookshop with my hands because the recent introduction of
GST has blown up their webpage.

Douglas, if you are reading this, what say you help me understand the
code in nls.R and nls.c and I'll promise to buy your book (though it could
take me a while to mail-order it in) ?

> A pretty good reasonable assumption is that statistics does not work
> in complexe numbers unless explicitly stated.

Consider also the case for fitting higher dimensional REAL data.
Admittedly, this is a contrived example but you may have an experiment
with one input variable and three output variables. You know from theory
that the output variables are all related to each other by some function
but you need to find particular parameters in that function:

> d <- data.frame( x=1:10 )
> d$y <- eval( expression( outer( x, 1:3 )), d )
> d$y <- d$y + rnorm( length( d$y ))
> library( nls )
> w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
Error in qr.qty(QR, resid) : qr and y must have the same number of rows

If the nls system supported these `wide' problems properly then complex
number support could just be recast as a special case of the same.
>From a mathematical point of view, this sort of regression can be recast
into a normal regression but with more sample points (and each sample
point repeated N times) and with a bogus input variable that gives the
column number. Thus, the same fundamental algorithm must work for both
cases if the structure of the data is suitably munged around.

I've been looking through the code in nls.c and nls.R quite closely and
I can see a lot of stuff which seems to be catering to cases of various
dimensional objects. I cannot fully comprehend what it does and I cannot
get a high dimensional case (such as the above) to work properly.

The crux of it seems to be that qr() needs a matrix to work on
so it uses as.matrix() to coerce its input. If you feed it a vector
you get a column matrix (sounds good), if you feed it a matrix you
have no problem, if you feed it a high dimensional tensor you get
a column vector (which surprised me), and qr() goes with that:

> dim( qr( 1:10 )$qr )
[1] 10  1
> dim( qr( outer( 1:3, 1:5 ))$qr )
[1] 3 5
> dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
[1] 24  1

The result is that the nls model comes to grief when it feeds
the three dimensional tensor into qr() then what it gets back
(i.e. a long, thin column matrix) does not match up with anything.

>  That's why in R
> 
> > sqrt(-1)
> [1] NaN
> Warning message: 
> NaNs produced in: sqrt(-1) 

But sqrt() DOES support complex numbers... so the assumption is that
most users will not expect complex numbers to crop up in their calculations
unless they were deliberately put there, but once deliberatly put there,
they work properly.

I would be happy to see two examples added to the documentation for sqrt,
those being sqrt(-1) and sqrt(-1+0i).

	- Tel



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  1 10:02:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 1 Aug 2000 11:02:05 +0200 (MET DST)
Subject: [Rd] anova() on three or more objects behaves inconsistently (PR#621)
Message-ID: <200008010902.LAA18683@pubhealth.ku.dk>

anova() on three or more objects behaves inconsistently in R.

In R anovalist.lm does a sequential ANOVA using pairwise F tests,
ignoring all the other objects, so the larger of the two models
provides the denominator.

In S anova.lmlist uses the denominator from the largest model (smallest
residual df) in the set, as does anova.glmlist in both.

I suggest that R's anovalist.lm is wrong (that might be a matter of opinion
and can certainly be argued), but anovalist.lm and anova.glmlist should
agree.

?anova says in R

     When given a sequence of objects, `anova' tests the models against
     one another in the order specified.

and in S

       When two or more objects are used in the call,  a  similar
       table  is  produced  showing  the  effects of the pairwise
       differences between the  models,  considered  sequentially
       from first to last.

neither of which are clear enough to disambiguate this.


Example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
quine.lo <- aov(log(Days+2.5) ~ 1, quine)
anova(quine.hi, quine.nxt, quine.lo)

quine.hi1 <- glm(log(Days + 2.5) ~ .^4, data=quine)
quine.nxt1 <- update(quine.hi1, . ~ . - Eth:Sex:Age:Lrn)
quine.lo1 <- glm(log(Days+2.5) ~ 1, data=quine)
anova(quine.hi1, quine.nxt1, quine.lo1, test="F")

S:

  Resid. Df      RSS             Test  Df Sum of Sq  F Value     Pr(F) 
1       118  63.3104                                                  
2       120  64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145 106.7871                  -25 -42.68810 3.182542 0.0000131

...

  Resid. Df Resid. Dev             Test  Df  Deviance  F Value     Pr(F) 
1       118    63.3104                                                  
2       120    64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145   106.7871                  -25 -42.68810 3.182542 0.0000131

R:
Analysis of Variance Table

Model 1: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 2: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 3: log(Days + 2.5) ~ 1
  Res.Df Res.Sum Sq  Df  Sum Sq F value    Pr(>F)
1    118     63.310                              
2    120     64.099  -2  -0.789  0.7350    0.4817
3    145    106.787 -25 -42.688  3.1967 1.148e-05

[The F value and p value are different here.]

...

  Resid. Df Resid. Dev  Df Deviance       F    Pr(>F)
1       118     63.310                               
2       120     64.099  -2   -0.789   0.735    0.4817
3       145    106.787 -25  -42.688   3.183 1.306e-05

As of the current patched version of R anova.glmlist is consistent when
reversing the order of the objects.


Also, the labelling is inconsistent, and for both is not very helpful:

> anova(quine.hi1, quine.nxt1, quine.lo1)
Analysis of Deviance Table 

Response: log(Days + 2.5)
                                                                         Resid. Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        118
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        120
1                                                                              145
                                                                         Resid. Dev
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      63.310
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      64.099
1                                                                           106.787
                                                                          Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",     
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",   -2
1                                                                        -25
                                                                         Deviance
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",          
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",    -0.789
1                                                                         -42.68

which gives problems later as the row names are not unique.



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = July
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Aug  1 16:03:44 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Aug 2000 10:03:44 -0500
Subject: [Rd] Using the nls package
In-Reply-To: Telford Tendys's message of "Tue, 1 Aug 2000 16:06:06 +1000"
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats> <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>
Message-ID: <6rvgxl9g6n.fsf@franz.stat.wisc.edu>

Telford Tendys <telford@progsoc.uts.edu.au> writes:

> On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> > 
> > How can you be sure?  What are `the same numbers'?  The parameters
> > unchanged to machine precision, yes, but that's not what you print.
> 
> The only safe way I can think of would be to go for machine precision
> as the default and then have some user-settable threshold for:
> 
> 	( current residual / previous residual )

A more common way of defining a criterion like that would be
    (previous RSS - current RSS)/(previous RSS)
if you have ensured that your algorithm cannot increase the RSS
(residual sum-of-squares) from one iteration to the next.

However, any such criterion that is based on the progress of the
iterations, instead of being based solely on the current position as
the orthogonality criterion is, exposes you to the danger of declaring
convergence when the algorithm has not reached the optimum.
B. D. McCullough has written several papers comparing the performance
of different statistical and econometrics packages on test problems,
frequently the test problems called the StRD prepared by NIST, the
National Institute for Standards and Technology in the USA.  (There is
a package called NISTnls on CRAN that contains that data sets for the
nonlinear least squares problems in the StRD.  You can run all those
tests with the shell command 'R CMD check NISTnls' after installing
that package.)  Some of the references by McCullough are

B. D. McCullough (1998), "Assessing the Reliability of Statistical
  Software: Part I", The American Statistician, 52(4), 358-366
B. D. McCullough (1999), "Assessing the Reliability of Statistical
  Software: Part II", The American Statistician, 53(2), 149-159
B. D. McCullough (1999), "Econometric Software Reliability: E-VIEWS,
  LIMDEP, SHAZAM, and TSP", Journal of Applied Econometrics, 14(2),
  191-202.
B. D. McCullough and Berry Wilson (1999), "On the Accuracy of
  Statistical Procedures in Microsoft EXCEL 97", Computational
  Statistics and Data Analysis, 31(1), 27-37.
B. D. McCullough (1999), "Experiences with the StRD: Application and
  Interpretation", in _Computing Science and Statistics_, 31, 16-21.

In that last paper listed above, McCullough writes:
 The StRD has been applied both formally and informally to over a
 dozen of the most popular statistics and econometrics packages, and
 only two of them have not produced nonlinear "solutions" with zero
 digits of accuracy: the statistical package S-PLUS (with analytic
 derivatives) and the econometrics package TSP (which has automatic
 analytic differentiation).

As I had a hand in writing the nls functions for both S-PLUS and R, I
happen to know that the algorithms are similar although the
implementations are quite different.  These functions are not fooled
into declaring convergence prematurely because they use the
orthogonality convergence criterion.

If we were to start introducing all kinds of ad-hoc rules for
declaring convergence in nls, simply to handle those cases of
artificial data that are generated without noise, we would run the
risk of ruining the good behavior of an algorithm that gives a
reliable indication of convergence.

> > > Yes, this is understandable but if most people are like me (questionable
> > > assumption I admit) they try a few artificial examples first to get
> > > the general idea of how these things work. I guess there is a certain
> > > illogical assumption that if I try what seems to me to be an obviously
> > > easy problem and it cannot handle it then something must be wrong and
> > > trying harder problems is not going to help.
> > 
> > Perhaps you need to read up on the algorithmic theory so you are not so
> > easily confused.  NLS problems with an exact-fit solution are a different
> > sub-class with different effective algorithms.
> 
> Undoubtably there is a lot more reading that I can do to improve
> my understanding. I'm just making a suggestion based on the observation
> that the algorithm actually found the right answer very quickly.

> I searched a few of the local bookshops (over the internet) and
> Diana Bates (with her children's stories) came up infinitely more often
> than Douglas Bates and his regression. I will have to search the
> University Co-op bookshop with my hands because the recent introduction of
> GST has blown up their webpage.
> 
> Douglas, if you are reading this, what say you help me understand the
> code in nls.R and nls.c and I'll promise to buy your book (though it could
> take me a while to mail-order it in) ?
> 
> > A pretty good reasonable assumption is that statistics does not work
> > in complexe numbers unless explicitly stated.
> 
> Consider also the case for fitting higher dimensional REAL data.
> Admittedly, this is a contrived example but you may have an experiment
> with one input variable and three output variables. You know from theory
> that the output variables are all related to each other by some function
> but you need to find particular parameters in that function:
> 
> > d <- data.frame( x=1:10 )
> > d$y <- eval( expression( outer( x, 1:3 )), d )
> > d$y <- d$y + rnorm( length( d$y ))
> > library( nls )
> > w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
> Error in qr.qty(QR, resid) : qr and y must have the same number of rows
> 
> If the nls system supported these `wide' problems properly then complex
> number support could just be recast as a special case of the same.
> >From a mathematical point of view, this sort of regression can be recast
> into a normal regression but with more sample points (and each sample
> point repeated N times) and with a bogus input variable that gives the
> column number. Thus, the same fundamental algorithm must work for both
> cases if the structure of the data is suitably munged around.

Such "wide" data are also the subject of a considerable amount of
research.  Usually the criterion used for parameter estimation is the
product of the singular values of the residual matrix, not simply the
sum of the squares of the residuals.  There is an entire chapter in
Bates and Watts (1988) devoted to the analysis of such multiresponse
data, including discussion of algorithms.  At present these algorithms
are not implemented in R.

> I've been looking through the code in nls.c and nls.R quite closely and
> I can see a lot of stuff which seems to be catering to cases of various
> dimensional objects. I cannot fully comprehend what it does and I cannot
> get a high dimensional case (such as the above) to work properly.
> 
> The crux of it seems to be that qr() needs a matrix to work on
> so it uses as.matrix() to coerce its input. If you feed it a vector
> you get a column matrix (sounds good), if you feed it a matrix you
> have no problem, if you feed it a high dimensional tensor you get
> a column vector (which surprised me), and qr() goes with that:
> 
> > dim( qr( 1:10 )$qr )
> [1] 10  1
> > dim( qr( outer( 1:3, 1:5 ))$qr )
> [1] 3 5
> > dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
> [1] 24  1
> 
> The result is that the nls model comes to grief when it feeds
> the three dimensional tensor into qr() then what it gets back
> (i.e. a long, thin column matrix) does not match up with anything.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Aug  2 10:10:39 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008020910.LAA27253@pubhealth.ku.dk>


It is quite tempting to start simple data entry sessions where
you need to type in the data like this:

my.frame<-data.frame(a=numeric(0),b=numeric(0))
fix(my.frame)

(and if factors are involved, that is pretty much what you'd have to do
in order to get the appropriate levels)

However, in the X version, this seems to cause the data editor to
freeze as soon as one hits Enter after inserting data into the
first cell. I haven't tried the Windows version yet.

[This is something it would be nice to have resolved in 1.1.1]

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = August
 day = 1
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Aug  2 11:08:11 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Wed, 2 Aug 2000 18:08:11 +0800 (WST)
Subject: [Rd] Installing R-1.1.0 (PR#612)
In-Reply-To: <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
References: <14712.8366.469912.970376@bossiaea.maths.uwa.edu.au>
 <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
Message-ID: <14727.62219.589371.855349@bossiaea.maths.uwa.edu.au>

Dear Brian,

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  >> My system is essentially a RedHat 6.0 with a 2.2.10 kernel.
  >> 
  >> I am using the Pentium GCC (http://www.goof.com/pcg/)
  >> 
  >> bossiaea:/opt/R/R-1.1.0$ which gcc /usr/local.own/bin/gcc
  >> bossiaea:/opt/R/R-1.1.0$ gcc --version pgcc-2.91.60

  BDR> I suspect a bug in that compiler, as you had problems with NAs,
  BDR> and that is the only thing that seems different from known
  BDR> working setups.  My suggestion would be to use gcc-2.95.2,
  BDR> which I compiled from source and works well for us on RH6.0.
  BDR> Or even try the compiler that comes with RH6.0 (egcs-2.91.66, I
  BDR> believe).
I finally got around to download the sources of gcc-2.95.2 and
installing it.  R-1.1.0 (and all packages that I install on my system)
compiled with gcc-2.95.2 now pass `make check'.  So I guess your
suspicion was correct.

Thanks for the help.

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:35:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2000 14:35:42 +0200
Subject: [Rd] data editor freeze on empty data frame (PR#622)
In-Reply-To: pd@blueberry.kubism.ku.dk's message of "Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)"
References: <200008020910.LAA27253@pubhealth.ku.dk>
Message-ID: <x2lmyf96xt.fsf@blueberry.kubism.ku.dk>

pd@blueberry.kubism.ku.dk writes:

> However, in the X version, this seems to cause the data editor to
> freeze as soon as one hits Enter after inserting data into the
> first cell. I haven't tried the Windows version yet.

Freezes the windows version as well, it seems. Also, the code for
editing factors using their numeric codes seems to have been broken in
1.1.0 (only converts back to factor if there are invalid levels). I'll
fix the latter.

[I'm also not happy with the code that autoinserts mistyped or
otherwise extraneous factor levels -- if they really are typos,
they'll be a pain to remove if one used fix(my.frame)! That
may be against policy to change in a patch release, though...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:55:39 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 2 Aug 2000 14:55:39 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#623)
Message-ID: <200008021255.OAA00687@pubhealth.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> (from R-help)
>     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> 
>     >  > > generated by R into a latex document.  Specifically, the latex package
>     >  > > graphicsx allow you to specify the bounding box of the postscript
>     >  > > file, so that you can just show _part_ of the postscript file if you
>     >  > > tell it to also clip the area outside of the bounding box.
>     > ...
>     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
>     >  > shouldn't do that, one should bracket clipped graphics within
>     >  > gsave/grestore instead. Sounds a bit tricky to get right.
>     > 
>     > Thanks.  To solve my current problem, I changed the definition of the
>     > `cl' operator in the postscript file to:
>     > 
>     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
>     >        4 -1 roll lineto  exch 1 index lineto lineto
>     >        closepath clip grestore newpath } def
>     > 
>     > [i.e. just adding the gsave ... grestore pair]
>     > 
>     > Whether this is the proper solution though is another matter...
> 
>     PD> It isn't. It grestore-s before actually plotting the stuff that
>     PD> needs to be clipped, so effectively you just disabled R's
>     PD> clipping. A better way would be to start the plotting with a "gs"
>     PD> and have
> 
>     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> 	   4 -1 roll lineto  exch 1 index lineto lineto
> 	   closepath clip newpath } def
> 
>     PD> and end everything with a "gr". Not too sure that is perfectly
>     PD> safe, though...
> 
> Are you working on this, Peter?
> Otherwise, "R-bugs" should probably get about the above report..

Done... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug  2 14:10:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 2 Aug 2000 14:10:21 +0100 (BST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008021310.OAA24728@toucan.stats.ox.ac.uk>


> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] data editor freeze on empty data frame (PR#622)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Aug 2000 14:35:42 +0200
> 
> pd@blueberry.kubism.ku.dk writes:
> 
> > However, in the X version, this seems to cause the data editor to
> > freeze as soon as one hits Enter after inserting data into the
> > first cell. I haven't tried the Windows version yet.
> 
> Freezes the windows version as well, it seems. Also, the code for
> editing factors using their numeric codes seems to have been broken in
> 1.1.0 (only converts back to factor if there are invalid levels). I'll
> fix the latter.

Found and corrected: an infinite loop in getccol when the length
was zero, of very long standing.

> [I'm also not happy with the code that autoinserts mistyped or
> otherwise extraneous factor levels -- if they really are typos,
> they'll be a pain to remove if one used fix(my.frame)! That
> may be against policy to change in a patch release, though...]

Until the data editor has a mode for factors, the current compromise,
to edit as character, seems the best one to me.  Using cut and paste
helps to eliminate typos.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug  2 17:40:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 2 Aug 2000 18:40:46 +0200 (MET DST)
Subject: [Rd] text( * , xpd = vv )  doesn't work and help(text.default) is wrong (PR#624)
Message-ID: <200008021640.SAA02325@pubhealth.ku.dk>

example(barplot)

calls an example of   text( ... , xpd = NA) 
which *did* work in earlier versions of R till 0.99, but has stopped
working since 1.0.0.
Only the global value, par("xpd"), is used to decide if text is clipped.

A simple example is

  plot(1); text(1,1.44,"BLA", col = "blue", cex = 2, xpd=F)

Also, ?text  doesn't mention the  xpd and 2 other parameters that
text.default explicitly has.

I'm about to try to fix this for 1.1.1
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:39:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
Message-ID: <200008022039.WAA03146@pubhealth.ku.dk>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:38:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex
 (PR#623)
In-Reply-To: <200008021255.OAA00687@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10008022134410.230-100000@tern.stats>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  3 16:32:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2000 17:32:39 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)"
References: <200008022039.WAA03146@pubhealth.ku.dk>
Message-ID: <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > 	   closepath clip newpath } def
> > > 
> > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > >     PD> safe, though...


>     The postscript produced by R is EPS (Encapsulated PostScript)
>     compatible,
> 
> yet initclip is not allowed in EPS files (PostScript Language Reference
> Manual, 2nd edition).  

Exactly. 

> I think the statement was possibly true once ....

I don't think so. This is a design problem.

Unfortunately, the simple fix above doesn't seem to work [for rather
foreseeable reasons]. mosaicplot() seems to crash ghostview and even
plot(1:10) comes out without axis titles. 

The latter item occurs because we're doing

clip(region1)
set font
draw text
clip(region2)
draw more text in same font

but restoring the graphics context prior to the first clipping 
requires the font to be set once again. And there are probably many
similar problems. Sigh. 

Paul, are you around?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Aug  4 00:13:27 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 4 Aug 2000 11:13:27 +1200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <003d01bffda0$6e4fee30$175dd882@stat.auckland.ac.nz>

hi


> > yet initclip is not allowed in EPS files (PostScript Language Reference
> > Manual, 2nd edition).
>
> Exactly.
>
> > I think the statement was possibly true once ....
>
> I don't think so. This is a design problem.
>
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles.
>
> The latter item occurs because we're doing
>
> clip(region1)
> set font
> draw text
> clip(region2)
> draw more text in same font
>
> but restoring the graphics context prior to the first clipping
> requires the font to be set once again. And there are probably many
> similar problems. Sigh.
>
> Paul, are you around?


Yes I'm around (I'm just concealed by my teaching load).  However, I may not
be much help.  This seems to be a problem with the definitions in the
postscript file header (set up in PSFileHeader).  [Trying not to sound like
I'm dodging a bullet ...] I have never delved too deeply into these so I
cannot really comment on their goodness or badness.  AFAIK this is all
pretty original stuff (by Ross ?), but I'm not sure what it was based on.
Something Ross has mentioned to me a couple of times is a library which
allows you to write C-like code which then gets processed into (correct,
efficient) postscript.  Maybe this would be a good solution (i.e., piggyback
on some other code which has got all of the postscript stuff properly sorted
out).  Sorry I can't be more help at this stage.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  4 08:48:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 4 Aug 2000 08:48:03 +0100 (GMT Daylight Time)
Subject: [Rd] binary file access package
Message-ID: <Pine.WNT.4.05.10008040839430.70-100000@tern.stats>

The src/contrib/Devel section on CRAN now has a package Rstreams for binary
file access, and there is also a pre-compiled Windows version on CRAN.

This was originally written by Duncan Murdoch using Delphi and the compiled
code has been re-written by me in C.  One of the demo applications included
is reading S binary objects (data objects, not language objects
such as functions) into R.

The main reason this is in Devel is that it should probably interact with
planned developments on file access (`connections') for future R versions.
It has a configure script, and runs on Solaris, Linux and Windows at least.

Future plans include the ability to read S's data.dump files.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  4 16:45:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2000 17:45:42 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: Peter Dalgaard BSA's message of "03 Aug 2000 17:32:39 +0200"
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2u2d158t5.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > > 	   closepath clip newpath } def
> > > > 
> > > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > > >     PD> safe, though...
...
> 
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles. 

However, fixing the font issue seems to have done the trick. Fix
committed to the development branch (to become R 1.2). I'm not
trusting that fix enough to let it go into 1.1.1.

Here's the patch in case someone needs it:


$ cvs diff -ur 1.29 src/main/devPS.c
Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.29
retrieving revision 1.30
diff -u -r1.29 -r1.30
--- src/main/devPS.c    2000/06/27 22:26:19     1.29
+++ src/main/devPS.c    2000/08/04 15:35:33     1.30
@@ -549,10 +549,10 @@
     fprintf(fp, "/gs  { gsave } def\n");
     fprintf(fp, "/gr  { grestore } def\n");
     if (landscape)
-       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate} def\n", paperwidth);
+       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate gs } def\n", paperwidth);
     else
-       fprintf(fp, "/bp  { gs } def\n");
-    fprintf(fp, "/ep  { showpage gr } def\n");
+       fprintf(fp, "/bp  { gs gs } def\n");
+    fprintf(fp, "/ep  { showpage gr gr } def\n");
     fprintf(fp, "/m   { moveto } def\n");
     fprintf(fp, "/l   { lineto } def\n");
     fprintf(fp, "/np  { newpath } def\n");
@@ -569,7 +569,7 @@
     fprintf(fp, "       ps mul neg 0 2 1 roll rmoveto\n");
     fprintf(fp, "       1 index stringwidth pop\n");
     fprintf(fp, "       mul neg 0 rmoveto show grestore } def\n");
-    fprintf(fp, "/cl  { initclip newpath 3 index 3 index moveto 1 index\n");
+    fprintf(fp, "/cl  { gr gs newpath 3 index 3 index moveto 1 index\n");
     fprintf(fp, "       4 -1 roll lineto  exch 1 index lineto lineto\n");
     fprintf(fp, "       closepath clip newpath } def\n");
     fprintf(fp, "/rgb { setrgbcolor } def\n");
@@ -1133,6 +1133,8 @@
     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 
     PostScriptSetClipRect(pd->psfp, x0, x1, y0, y1);
+    /* clipping does grestore so invalidate current font */
+    pd->fontsize = -1; 
 }
 
 static void PS_Resize(DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Aug  4 17:37:33 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 4 Aug 2000 18:37:33 +0200 (MET DST)
Subject: [Rd] Inverting matrix...
Message-ID: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>

Dear all,

Either I'm being totally blind now (as you know, the eyes are the first
thing that is blinded :-)), or something is missing in 
"An Introduction to R". The section heading of section 5.7.1 is
"Multiplication, inversion and solving linear equations", and since I was
looking for the canonical way of inverting a matrix, this was the place to
look. However, I found that solve() was not mentioned, I found that
strange... Was something forgotten here? :-)

I found the answer to my question in V&R, so don't be bothered about that,
but I thought you'd like to be told when things are unclear in the docs.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Aug  6 16:08:09 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 6 Aug 2000 23:08:09 +0800 (GMT-8)
Subject: [Rd] make pkg on windows NT
Message-ID: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>

Hi,

I am trying to compile a package i am developing on my home computer where
i am running Windows NT 4.0 service pack 6. Everything works fine on my
other computer at work running windows 98.

I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
version 2.95.2-1
installed seperately and first in the path. I have active perl 6.16 
as well. Here is the error I get when i run the make pkg-  script from the
gnuwin32 directory

bash-2.03$ make DEBUG=T pkg-maptools
make DLLNM=  EXTRADOCS= \
  -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
RLIB=
c:/Rnew/rw1010/library \
  -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
Syntax error: Unterminated quoted string
make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
make: *** [pkg-maptools] Error 2

also here is my R version info
$platform
[1] "Windows"
$arch
[1] "x86"
$os
[1] "Win32"
$system
[1] "x86, Win32"
$status
[1] ""
$major
[1] "1"
$minor
[1] "1.0"
$year
[1] "2000"
$month
[1] "June"
$day
[1] "15"
$language
[1] "R"


Oh and one last Question, I noted on Dr. Ripley's RTools page that he
recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
version. I have not noticed any problems yet with other stuff i have
compiled, are there any problems dynamically linking code built with the
other version that I am unaware Of?

thanks
Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  6 17:41:14 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 6 Aug 2000 17:41:14 +0100 (BST)
Subject: [Rd] make pkg on windows NT
In-Reply-To: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10008061738160.6687-100000@auk.stats>

On Sun, 6 Aug 2000, Nicholas Lewin-Koh wrote:

> Hi,
> 
> I am trying to compile a package i am developing on my home computer where
> i am running Windows NT 4.0 service pack 6. Everything works fine on my
> other computer at work running windows 98.
> 
> I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
> version 2.95.2-1
> installed seperately and first in the path. I have active perl 6.16 
> as well. Here is the error I get when i run the make pkg-  script from the
> gnuwin32 directory
> 
> bash-2.03$ make DEBUG=T pkg-maptools
> make DLLNM=  EXTRADOCS= \
>   -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
> RLIB=
> c:/Rnew/rw1010/library \
>   -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
> make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
> Syntax error: Unterminated quoted string
> make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
> make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
> make: *** [pkg-maptools] Error 2

That means that you have the wrong make and/or the wrong sh.  You need the
set in the tools distribution: certain Cygwin ones work but most do not. We
find it very frustrating too.


> Oh and one last Question, I noted on Dr. Ripley's RTools page that he
> recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
> version. I have not noticed any problems yet with other stuff i have
> compiled, are there any problems dynamically linking code built with the
> other version that I am unaware Of?

Yes. It won't work on many Windows 95 machines, as that page says.
If that is not an issue for you, by all means use the msvcrt version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug  7 06:15:06 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 Aug 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008070515.HAA08465@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 611 *
Subject: bug in loess
From: hdrees@statlab.uni-heidelberg.de
Date: Wed, 19 Jul 2000 17:47:04 +0200 (MET DST)
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 584 *
Subject: par(lty = "1") -- lty storage-etc bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 27 Jun 2000 09:11:36 +0200 (CEST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 612 *
Subject:  Installing R-1.1.0 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Thu, 20 Jul 2000 14:50:21 +0800
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400

Directory:  Language

* PR# 589 *
Subject: Bug with lists and expressions
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 04 Jul 2000 02:26:41 GMT
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 608 *
Subject: seg.fault in eval.c
From: Adrian Vance Custer <acuster@nopause.berkeley.edu>
Date: Sat, 15 Jul 2000 01:22:23 -0700
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 621 *
Subject: anova() on three or more objects behaves inconsistently
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 1 Aug 2000 10:02:18 +0100 (BST)
* PR# 600 *
Subject: Faulty handling of aliasing in predict.lm; wrong constant
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 12 Jul 2000 14:46:56 +1000

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
* PR# 615 *
Subject: binomial()
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 18:11:17 -0400
* PR# 614 *
Subject: scoping problems
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 17:48:49 -0400
* PR# 618 *
Subject: min(c()) = inf ???
From: Peter Malewski <y0004379@tu-bs.de>
Date: Wed, 26 Jul 2000 13:57:32 +0200 (METDST)
* PR# 617 *
Subject: Bug in stem?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Wed, 26 Jul 2000 11:28:04 +0200
* PR# 622 *
Subject:  data editor freeze on empty data frame 
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Wed, 2 Aug 2000 11:17:04 +0200
* PR# 619 *
Subject: Re: [R] gremlin in rep()
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Fri, 28 Jul 2000 08:20:21 -0700 (PDT)
* PR# 624 *
Subject: text( * , xpd = vv )  doesn't work and help(text.default) is wrong
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 2 Aug 2000 18:40:54 +0200 (CEST)
* PR# 623 *
Subject: Re: [R] problem clipping R postscript plots within latex
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 02 Aug 2000 15:01:52 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  7 13:54:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Aug 2000 14:54:08 +0200 (CEST)
Subject: [Rd] Inverting matrix...
In-Reply-To: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
References: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
Message-ID: <14734.45424.235538.710068@gargle.gargle.HOWL>

>>>>> "Kjetil" == Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

    Kjetil> Dear all, Either I'm being totally blind now (as you know, the
    Kjetil> eyes are the first thing that is blinded :-)), or something is
    Kjetil> missing in "An Introduction to R". The section heading of
    Kjetil> section 5.7.1 is "Multiplication, inversion and solving linear
    Kjetil> equations", and since I was looking for the canonical way of
    Kjetil> inverting a matrix, this was the place to look. However, I
    Kjetil> found that solve() was not mentioned, I found that
    Kjetil> strange... Was something forgotten here? :-)

    Kjetil> I found the answer to my question in V&R, so don't be bothered
    Kjetil> about that, but I thought you'd like to be told when things are
    Kjetil> unclear in the docs.

Thanks a lot Kjetil!

I've just committed a fix to this "documentation bug" for R 1.1.1, i.e.
R-release/patched

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 19:43:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
Message-ID: <200008071843.UAA03236@pubhealth.ku.dk>

predict.lm has been broken by recent changes to the patched branch.

It fails for all singular fits.  An example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
predict(quine.nxt)
  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
141 142 143 144 145 146 
 NA  NA  NA  NA  NA  NA 

The answeer should be (e.g. R 1.1.0)

> predict(quine.nxt)
      1       2       3       4       5       6       7       8 
2.19247 2.19247 2.19247 2.68311 2.68311 2.68311 2.68311 2.68311 
      9      10      11      12      13      14      15      16 
2.37260 2.37260 2.37260 2.53960 2.53960 3.53516 3.53516 3.53516 
     17      18      19      20      21      22      23      24 
3.53516 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 
     25      26      27      28      29      30      31      32 
3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 2.03746 
...

I believe this is a lot worse than that which the changes were intended to
fix. (Are we not supposed to be ultra-cautious about not making things
worse in that branch?)

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
status   Patched             
major    1                   
minor    1.0                 
year     2000                
month    August              
day      7                   
language R                   

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 20:30:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 21:30:43 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)"
References: <200008071843.UAA03236@pubhealth.ku.dk>
Message-ID: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> predict.lm has been broken by recent changes to the patched branch.
> 
> It fails for all singular fits.  An example:
> 
> library(MASS)
> data(quine)
> quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
> quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
> predict(quine.nxt)
>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
>  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
...
> I believe this is a lot worse than that which the changes were intended to
> fix. (Are we not supposed to be ultra-cautious about not making things
> worse in that branch?)

Sometimes the fix for one bug uncovers another. We have

> coef.aov
function (object, ...) 
{
    z <- object$coef
    z[!is.na(z)]
}
> coef.lm 
function (object, ...) 
object$coefficients

and both of these cannot be right when predict.lm calls coef(object)
and object$coefficients contains NA's. Using object$coefficients
inside predict.lm fixes things, but I'm still not happy with the two
different conventions for coef...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:18 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
Message-ID: <200008071958.VAA03515@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:22 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 7 Aug 2000 12:58:22 -0700 (PDT)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#626)
In-Reply-To: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0008071248130.17749-100000@atlas.biostat.washington.edu>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 22:06:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 23:06:56 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
In-Reply-To: thomas@biostat.washington.edu's message of "Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)"
References: <200008071958.VAA03515@pubhealth.ku.dk>
Message-ID: <x2og34232n.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> > > coef.aov
> > function (object, ...) 
> > {
> >     z <- object$coef
> >     z[!is.na(z)]
> > }
> > > coef.lm 
> > function (object, ...) 
> > object$coefficients
> 
> Ok, this explains it.  I *did* test it with a singular fit, but only with
> lm(), not with aov().
> 
> coef.lm seems a more sensible convention, since it's a lot easy to remove
> the NAs than to add them.

I've committed a fix for predict.lm to use object$coefficients
directly, but I haven't done anything with the coef() methods.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 23:41:49 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#628)
Message-ID: <200008072141.XAA03887@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#627)
In-Reply-To: <x2og34232n.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10008072237330.18074-100000@auk.stats>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Aug  8 06:11:19 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 8 Aug 2000 15:11:19 +1000
Subject: [Rd] New code -- genetic algorithm curve fitting (supports complex numbers)
Message-ID: <20000808151119.A22606@ftoomsh.progsoc.uts.edu.au>

OK, here is some code that may be of use to someone:

http://www.progsoc.uts.edu.au/~telford/samples/R/gafit_0.1.tar.gz

Hopefully it might make contrib status on CRAN :-)

It uses a genetic algorithm to seek the lowest value of some
user-defined target function (or seeks the most negative value if negative 
values are possible). By using a sum of squared residuals for the target
function, it supports least square nonlinear regression.

Any comments welcome, the algorithm is completely thrown together
out of my head (in about three days) but I have written genetic
algorithms before, the same ideas can be found elsewhere.

If you have an optimisation problem, you should be able to apply
my code to it within half an hour or so because it doesn't require
much knowledge to use. I would be interested if anyone can find a
problem that crashes it. I'm sure that there are many problems for
which it will get something roughly reasonable but not quite right --
this is in the nature of a stocastic search <shrug>. The user has
some control over ``thermal'' noise so setting that to a small value
can help squeeze a bit more accuracy out of it.

----------------------------------------------------------------------

I did finally bludgeon nls into complex number support,
I intend to release the patches to make this work but it is not
particularly elegant -- it just converts EVERYTHING that goes
through the target function into a vector of reals. Thus it does
handle wide data and complex numbers but it treats them all by
just breaking them down into individual reals and squaring the
residuals.

Sadly, when I finally did get it working it still didn't do what
I wanted because my function kept stopping with stepsize being
reduced below the minimum. On close analysis, I decided that the
nls function will stall in a local minimum if it follows the
gradient into such a minimum and then just keeps reducing its
step size until it halts with an error. This does seem to imply that
a large number of model functions will not work with nls
until a suitably close starting value can be found.

My genetic algorithm code may provide one method to find such
values that are somewhere close to a good fit.

	- Tel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  9 19:20:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Aug 2000 20:20:07 +0200 (CEST)
Subject: [Rd] GenGC changes
Message-ID: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>

As most R developers maybe are already aware of, R version 1.2.0
introduced a new `generational' garbage collector which means that
strings and vectors (and language objects) are handled differently from
the numerical atomic types.

>From ``Writing R Extensions'':

       Earlier code was written in a style like.
           VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
    but that is no longer allowed.  The functions `VECTOR_ELT' and
    `SET_VECTOR_ELT' must now be used to access and set elements of a
    generic vector.  There are analogous functions `STRING_ELT' and
    `SET_STRING_ELT' for character vectors.
    
       To convert existing code, use the following replacements.
    
         original                 replacement
         `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
         `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
         `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
         `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

The changes were committed to the r-devel true this Monday, and imply
that add-on packages using the original coding style will no longer work
with current versions of r-devel.  One possible solution for having
packages with sources which work for compilation under both 1.1 and 1.2
is to use conditionals of the form

    #if R_VERSION >= R_Version(1, 2, 0)
	new-style-code
    #else
	old-style-code
    #endif

I would like to ask add-on package maintainers of packages which are
affected by the change to produce updated versions of their packages
which work under both 1.1 and 1.2.  It seems that the following ones
require action:

	Java
	Matrix
	RMySQL
	RODBC
	foreign
	hdf5
	netCDF
	stataread

(Note that [currently], there is binary incompatibility between 1.1 and
1.2.)

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:25:46 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:25:46 -0600
Subject: [Rd] Circles on all R devices
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A0@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE);

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>Circles on all R devices</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E);</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00240.001284B0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:37 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:33:37 -0600
Subject: [Rd] circles overshoot
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A2@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:23 2000
From: valerio.aimale@biosgroup.com (valerio.aimale@biosgroup.com)
Date: Wed, 9 Aug 2000 22:33:23 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092033.WAA22498@pubhealth.ku.dk>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:51:18 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:51:18 -0600
Subject: No subject
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A3@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/plain;
	charset="iso-8859-1"

sorry for the multiple postings

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE></TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>sorry for the multiple postings</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00243.90D7CCA0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  9 22:44:02 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 9 Aug 2000 23:44:02 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092144.XAA22670@pubhealth.ku.dk>

valerio.aimale@biosgroup.com writes:

> Anyone ever tried to
> 
> plot(c(1.0,0,2),c(1.0,0,2));
> symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?
> 
> Why does the circle overshoot ?
> 
> The problem is the same on all devices (even with my pictex, which needs a
> lot of refurbishing), so I'd think it's something upstream to the devices
> code. 

Because the *plotting region* is not square... Try resizing the plot
window and you'll see the effect quite clearly.

> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
> <HTML>
....
> SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp; direct: 505.992.6741</FONT>
> <BR><FONT SIZE=3D2>Bios Group =
> LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=

Ahem. There are ways to turn that stuff off, you know....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Aug 10 02:23:26 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 10 Aug 2000 09:23:26 +0800 (GMT-8)
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0008100916420.17875-100000@sununx.comp.nus.edu.sg>


Hi,
I just completed a package for reading and writing dbf files, that I will
post soon so i will definately be affected since I used mostly the c
api. Would the option below mean that there would be macros defined in say
R.internals to have old style behave as new style, or would it be prefered
that maintainers write seperate routines for new and old versions. I am
imagining quite a bit of code bloat.

Nicholas

> 
>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif
> 
> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:
> 
> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread
> 
> (Note that [currently], there is binary incompatibility between 1.1 and
> 1.2.)
> 
> -k
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Aug 10 14:11:56 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 10 Aug 2000 15:11:56 +0200 (MET DST)
Subject: [Rd] lda and svd error (PR#630)
Message-ID: <200008101311.PAA01082@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII


For a matrix A:

> A
            [,1]       [,2]
 [1,] -2.4491897  0.2345687
 [2,]  0.1530018 -0.5513182
 [3,] -1.3877140  1.0925618
 [4,]  0.5521078  0.7036401
 [5,]  0.4744903 -1.0868091
 [6,] -0.4296282  0.3931673
 [7,] -0.2413387 -0.7461586
 [8,]  1.0567564 -1.1807899
 [9,]  0.7903647  0.8294825
[10,]  1.6456857 -0.2484038
[11,] -1.1795527 -0.6904602
[12,]  2.6470244  0.7050178
[13,]  1.8169865 -0.1057402
[14,]  1.9720294 -0.1091834

and groupings [1] 0 0 0 0 0 0 0 1 1 1 1 1 1 1

> library(MASS)
> lda(A, groupings)
Error in svd(X, nu = 0) : error  2  in dsvdc

is reported. This is hard to reproduce on other machines, even 

> write.table(A, "dummy")
> B <- as.matrix(read.table("dummy"))
> lda(B, groupings)

on the same machine works fine. I add my .RData file renamed 
as DataR (maybe this can help to reproduce the error). The error occured
during a simulation, I added the sources as "svderr.R".

Torsten

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

--1133331701-1931357602-965913218=:3057
Content-Type: APPLICATION/octet-stream; name=DataR
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513380.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename=DataR

UkRYMQoAAAAFAAAAAAAAAAMAAAADZGltAAAAAAEAAAABQQAAAAAAAAgAAAAI
Z3JvdXBpbmcAAAAMAAAADC5SYW5kb20uc2VlZAAAAAoAAAAKLlRyYWNlYmFj
awAAAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABf////8AAAACAAAAAAAA
AAD/////AAAAEAAAAAAAAAAAAAAAAQAAACoAAAAqc3RvcChwYXN0ZSgiZXJy
b3IgIiwgeiRpbmZvLCAiIGluIGRzdmRjIikpAAD/////AAAAAgAAAAAAAAAA
/////wAAABAAAAAAAAAAAAAAAAEAAAAOAAAADnN2ZChYLCBudSA9IDApAAD/
////AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAYAAAAGGxk
YS5kZWZhdWx0KEEsIGdyb3VwaW5nKf////8AAAACAAAAAAAAAAD/////AAAA
EAAAAAAAAAAAAAAAAQAAABEAAAARTmV4dE1ldGhvZCgibGRhIikAAAD/////
AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAXAAAAF2xkYS5t
YXRyaXgoQSwgZ3JvdXBpbmcpAP////8AAAACAAAAAAAAAAD/////AAAAEAAA
AAAAAAAAAAAAAQAAABAAAAAQbGRhKEEsIGdyb3VwaW5nKf//////////////
////////////////////////////AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAA
AAAABP////8AAAANAAAAAAAAAAAAAAADAAAAASGIE+ETc44V/////wAAAAIA
AAAAAAAAAAAAAAEAAAAAAAAAAAAAAAP/////AAAADgAAAAAAAAAAAAAADgAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAP/AAAAAAAAA/8AAAAAAAAD/wAAAAAAAAP/AAAAAAAAA/8AAA
AAAAAD/wAAAAAAAAP/AAAAAAAAD/////AAAAAgAAAAAAAAAAAAAAAQAAAAAA
AAAAAAAAAv////8AAAAOAAAAAAAAAAAAAAAcwAOX8MHIaeA/w5WQE34/vb/2
NBOMsXdCP+Gq3gvUFnM/3l4MaikJlL/bfwcqUk/Gv87kL9G6OKo/8Oh5XMER
GD/pSqrXVI3mP/pUuo1+UDG/8t9ys0UCeEAFLRsm5nqQP/0SYHbpeIM//41u
ti/9pT/OBliWQmStv+GkZimVGgA/8XsiHJT4IT/mhDhKsAtrv/FjkfP5/5w/
2SmnFC117r/n4IgDNauUv/Lkg+5c7Wg/6ose7jvUyb/Py7Hhj7m3v+YYP/an
MfY/5o+BfEI5N7+7Ecl7N0bPv7vzcZLmB6UAAAACAAAAAAAAAAAAAAABAAAA
AAAAAAAAAAAB/////wAAAA0AAAAAAAAAAAAAAAIAAAAOAAAAAv//////////
////////////////////////////////
--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="svderr.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513381.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename="svderr.R"

bGlicmFyeShNQVNTKQ0KDQpTU2xkYSA8LSBmdW5jdGlvbihYLCBZLCBxKQ0K
ew0KCW1YIDwtIHJlcCgxLCBucm93KFgpKSUqJXQoYXBwbHkoWCwgMiwgbWVh
bikpDQoJbVkgPC0gcmVwKDEsIG5yb3coWSkpJSoldChhcHBseShZLCAyLCBt
ZWFuKSkNCglYIDwtIHJiaW5kKFgsWSkNCglteCA8LSByYmluZChtWCwgbVkp
DQoJWCA8LSBYIC0gbXggDQogCVcgPC0gKHQoWCklKiVYKQ0KICAgICAgICBl
ZyA8LSBlaWdlbihzb2x2ZShkaWFnKGRpYWcoVykpKSUqJVcpDQoJcSA8LSBs
ZW5ndGgoZWckdmFsdWVzW2VnJHZhbHVlcyA+IDFdKQ0KICAgICAgICBEIDwt
IGVnJHZlY3RvcnNbLDE6cV0NCgkjIEQgPC0gMS9zcXJ0KGRpYWcoVykpDQoJ
cmV0dXJuKEQpDQp9DQoNCkVycm9yUmF0ZSA8LSBmdW5jdGlvbihkaXNjcmlt
LCBuKQ0Kew0KCWZvbmUgPC0gc3VtKGFzLmludGVnZXIoZGlzY3JpbVsxOm5d
KS0xKS9uDQoJZm51bGwgPC0gKG4gLSBzdW0oYXMuaW50ZWdlcihkaXNjcmlt
WyhuKzEpOigyKm4pXSktMSkpL24NCgkjIGNhdCgiZm51bGw6ICIsIGZudWxs
LCAiIGZvbmUgIiwgZm9uZSwgIlxuIikgDQoJKGZudWxsICsgZm9uZSkvMg0K
fQ0KDQpzaW0xIDwtIGZ1bmN0aW9uKE4sbSxuLCBtdTAsIG11MSwgUykNCnsN
CgllcnJTdGFuZCA8LSBjKCkNCgllcnJTUyA8LSBjKCkNCg0KCWZvciAoaSBp
biAxOk4pDQoJew0KCQlsZWFyblggPC0gbXZybm9ybShtLCBtdTAsIFMpDQoJ
CWxlYXJuWSA8LSBtdnJub3JtKG0sIG11MSwgUykNCgkJZ3JvdXBpbmcgPC0g
YyhyZXAoMCwgbSksIHJlcCgxLCBtKSkNCgkJbGRhU3RhbmQgPC0gbGRhKHJi
aW5kKGxlYXJuWCwgbGVhcm5ZKSwgZ3JvdXBpbmcpDQoJCUQgPC0gU1NsZGEo
bGVhcm5YLCBsZWFyblksIDQpDQoJCUEgPC0gcmJpbmQobGVhcm5YLCBsZWFy
blkpJSolRA0KCQlsZGFTUyA8LSBsZGEoQSwgZ3JvdXBpbmcpDQoJCXRlc3RY
IDwtIG12cm5vcm0obiwgbXUwLCBTKQ0KCQl0ZXN0WSA8LSBtdnJub3JtKG4s
IG11MSwgUykNCgkJZGlzY3JTdGFuZCA8LSBwcmVkaWN0LmxkYShsZGFTdGFu
ZCwgcmJpbmQodGVzdFgsIHRlc3RZKSkkY2xhc3MNCgkJZGlzY3JTUyA8LSBw
cmVkaWN0LmxkYShsZGFTUywgcmJpbmQodGVzdFgsIHRlc3RZKSUqJUQpJGNs
YXNzDQoJCWVyclN0YW5kIDwtIGMoZXJyU3RhbmQsIEVycm9yUmF0ZShkaXNj
clN0YW5kLCBuKSkNCgkJZXJyU1MgPC0gYyhlcnJTUywgRXJyb3JSYXRlKGRp
c2NyU1MsIG4pKQ0KCQljYXQoIlN0YW5kOiAiLCBlcnJTdGFuZFtpXSwgIiBT
UzogIiwgZXJyU1NbaV0sICJcbiIpDQogCX0NCgljYXQoIkVycm9yIFJhdGUg
U3RhbmRhcmQgTERBOiAiLCBtZWFuKGVyclN0YW5kKSwgIlxuIikNCgljYXQo
IkVycm9yIFJhdGUgU1MgTERBOiAiLCBtZWFuKGVyclNTKSwgIlxuIikNCgly
ZXR1cm4obGlzdChlcnJTdGFuZCwgZXJyU1MpKQ0KfQ0KDQojIFMgPC0gbWF0
cml4KGMoMSwwLCAwLjUsIDAsIDAsIDEsIDAsIDAuOSwgMC41LCAwLCAyLCAw
LjMsIDAsIDAuOSwgMC4zLCAxKSwgNCwgNCkNClMgPC0gbWF0cml4KGMoMSww
LDAsMC45LDAsMSwwLDAsMCwwLDEsMCwwLjksMCwwLDEpLCA0LCA0KQ0KbXUw
IDwtIHJlcCgwLCA0KQ0KbXUxIDwtIHJlcCgxLCA0KQ0KbSA8LSBjKDUsNywx
MCwxNSwyMCw1MCwxMDApDQpuIDwtIDEwMDANCk4gPC0gMTAwDQoNCmVyciA8
LSBwbm9ybSgtMC41KnNxcnQodChtdTEgLSBtdTApJSolc29sdmUoUyklKiUo
bXUxIC0gbXUwKSkpDQpjYXQoIkVycm9yIHJhdGU6ICIsIGVyciwgIlxuIikN
Cg0KZUwgPC0gYygpDQplU1MgPC1jKCkNCg0KZm9yIChqIGluIG0pDQp7DQoJ
ZXN0ZXJyIDwtIHNpbTEoTiwgaiwgbiwgbXUwLCBtdTEsIFMpDQoJZUwgPC0g
YyhlTCwgbWVhbihlc3RlcnJbWzFdXSkpDQoJZVNTIDwtIGMoZVNTLCBtZWFu
KGVzdGVycltbMl1dKSkNCn0NCg0K
--1133331701-1931357602-965913218=:3057--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Aug 10 15:56:12 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)
Subject: [Rd] svd error (PR#631)
Message-ID: <200008101456.QAA02593@pubhealth.ku.dk>

--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable

SVD-Error on

R 1.1.0
Windows 98


I get the following error applying  svd  on a positive definite matrix :

 > sk2
               [,1]         [,2]          [,3]          [,4]          [,5]
[1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
[2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
[3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
[4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
[5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00
 > svd(sk2)
Error in svd(sk2) : error  4  in dsvdc

The problem seems to be connected to accuracy since

 > svd(sk2-.0000000000000000001)

works correctly.

I've saved the matrix  sk2  in the attached file.

Regards,

J=F6rg Polzehl
--=====================_24736660==_
Content-Type: application/octet-stream; name="sk2"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="sk2"

UkRYMQoAAAACAAAAAAAAAAMAAAADZGltAAAAAAMAAAADc2syAAAAAAIAAAAAAAAAAAAAAAEAAAAA
AAAAAAAAAAL/////AAAADgAAAAAAAAAAAAAAGT/wvHknO/XaP7WYa3uwMRC/MmtTLMsBmL9VWix1
04ctP2B7EYuQF0Y/tZhre7AxED/yeXMzKfWjv0DiR8RYcTa/Y5KK1dPLfT9uNsdP3h7YvzJrUyzL
AZi/QOJHxFhxNj/wAAHM0oaKPuCxnUzM7+G+6cUur1Qr0r9VWix104ctv2OSitXTy30+4LGdTMzv
4T/wACa0QRFCvw3fsLftHfg/YHsRi5AXRj9uNsdP3h7YvunFLq9UK9K/Dd+wt+0d+D/wAFw7fg5q
AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAf////8AAAANAAAAAAAAAAAAAAACAAAABQAAAAX/
/////////////////////////w==
--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Dr. J=F6rg Polzehl
WIAS, Mohrenstr. 39
D-10117 Berlin, Germany
email: polzehl@wias-berlin.de
Tel. +49 30/20372 481
Fax: +49 30/2044975
WWW: http://www.wias-berlin.de/~polzehl

--=====================_24736660==_--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Aug 10 19:21:16 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 Aug 2000 13:21:16 -0500
Subject: [Rd] svd error (PR#631)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)"
References: <200008101456.QAA02593@pubhealth.ku.dk>
Message-ID: <6raeelx9ib.fsf@franz.stat.wisc.edu>

polzehl@wias-berlin.de writes:

> SVD-Error on
> 
> R 1.1.0
> Windows 98
> 
> 
> I get the following error applying  svd  on a positive definite matrix :
> 
>  > sk2
>                [,1]         [,2]          [,3]          [,4]          [,5]
> [1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
> [2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
> [3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
> [4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
> [5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00

If you know that the matrix is positive definite then you are probably
better off taking the svd of the Cholesky decomposition of the matrix.

> svd(chol(sk2), nu = 0)
$d
[1] 1.095806 1.000000 1.000000 1.000000 1.000000

$v
             [,1]          [,2]         [,3]        [,4]        [,5]
[1,] -0.478709768  0.0011572932  0.013159984  0.87312442 -0.09119310
[2,] -0.877614104 -0.0003224026  0.006761341 -0.47348540  0.07456035
[3,]  0.002923979 -0.4202666121  0.844168101 -0.04500196 -0.32973090
[4,]  0.013558325  0.7925962305  0.519924862  0.03162204  0.31667897
[5,] -0.020929998  0.4417756749 -0.129766919 -0.10217730 -0.88154213

The singular values of sk2 will be the squares of the singular values
of its Cholesky decomposition.  The left and right singular vectors of
sk2 are identical and can be expressed as the V shown here.  Note that
since one singular value has multiplicity 4, the last four columns of
v are not unique.

>  > svd(sk2)
> Error in svd(sk2) : error  4  in dsvdc

This is related to the convergence in the Linpack subroutine dsvdc.
It is a reasonably good singular value routine but it will
occasionally be unable to converge.  Svd routines often have
difficulty with matrices with repeated singular values, like sk2.

The Lapack routine used in SVD from the Matrix library is more
reliable

> SVD(sk2)
$d
[1] 1.200791 1.000000 1.000000 1.000000 1.000000

$u
             [,1]          [,2]          [,3]          [,4]         [,5]
[1,] -0.478709768  5.814978e-19 -1.734663e-19 -2.917201e-20  0.877973210
[2,] -0.877614104 -2.109493e-02 -1.889409e-02 -3.985595e-03 -0.478513967
[3,]  0.002923979 -4.102994e-02  7.970942e-02 -9.959678e-01  0.001594282
[4,]  0.013558325  1.644232e-01 -9.825683e-01 -8.535898e-02  0.007392597
[5,] -0.020929998  9.853104e-01  1.668804e-01 -2.731482e-02 -0.011411959

$vt
           [,1]         [,2]         [,3]         [,4]        [,5]
[1,] -0.4787098 -0.877614104  0.002923979  0.013558325 -0.02093000
[2,]  0.0000000 -0.021094933 -0.041029944  0.164423228  0.98531038
[3,]  0.0000000 -0.018894086  0.079709424 -0.982568251  0.16688036
[4,]  0.0000000 -0.003985595 -0.995967801 -0.085358979 -0.02731482
[5,]  0.8779732 -0.478513967  0.001594282  0.007392597 -0.01141196

A new release of the Matrix library will be uploaded to CRAN shortly.  I
would advise waiting for it to be compiled for Windows before using
the SVD function extensively.  In looking at PR#630 by Torsten Hothorn
I found a subtle bug in SVD.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 11 06:54:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 11 Aug 2000 07:54:32 +0200
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
References: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <200008110554.HAA20812@aragorn.ci.tuwien.ac.at>

>>>>> Kurt Hornik writes:

> As most R developers maybe are already aware of, R version 1.2.0
> introduced a new `generational' garbage collector which means that
> strings and vectors (and language objects) are handled differently
> from the numerical atomic types.

>> From ``Writing R Extensions'':

>        Earlier code was written in a style like.
>            VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
>     but that is no longer allowed.  The functions `VECTOR_ELT' and
>     `SET_VECTOR_ELT' must now be used to access and set elements of a
>     generic vector.  There are analogous functions `STRING_ELT' and
>     `SET_STRING_ELT' for character vectors.
    
>        To convert existing code, use the following replacements.
    
>          original                 replacement
>          `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
>          `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
>          `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
>          `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

> The changes were committed to the r-devel true this Monday, and imply
> that add-on packages using the original coding style will no longer
> work with current versions of r-devel.  One possible solution for
> having packages with sources which work for compilation under both 1.1
> and 1.2 is to use conditionals of the form

>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif

> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:

> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread

> (Note that [currently], there is binary incompatibility between 1.1
> and 1.2.)

As indicated, the above is only one possible solution.  Another, and
maybe the preferred one in order to avoid unnecessarily duplicating
code, is the use of a *PRIVATE* header file containing the following
code:

#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)	(STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)	(STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)	(VECTOR(x)[i] = (v))
#endif

(Note that in order to achieve maximal source compatibility in the 1.x
series, it is preferable to have add-on packages modified, as we cannot
easily control the `old' (pre-1.1.1) R versions included in various
distributions.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 16:06:11 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 11:06:11 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
Message-ID: <14740.5322.825671.12280@c1186.ae.ge.com>

Hello,
 I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
it instead of blas. However atlas for hp seems to missing some libs. I 
had to add -lblas in Makeconf. Everything builds ok. But modreg and
tcltk doesn't load. 
R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-August-9)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(modreg)
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
  can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
Error in library(modreg) : .First.lib failed
> 

First checked the lowessc.c routine and it had F77_SUB(...) but I
could not find a macro for that in the include files. There was
F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't
load.
Is there a way to get more info why it doesn't open?

TIA,
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 17:11:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 Aug 2000 17:11:32 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.5322.825671.12280@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008111659590.13373-100000@toucan.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Hello,
>  I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
> it instead of blas. However atlas for hp seems to missing some libs. I 
> had to add -lblas in Makeconf. Everything builds ok. But modreg and
> tcltk doesn't load. 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-August-9)

That might well be a problem. R-devel has been undergoing major
changes recently.  You should be able to use

  --with-blas             use specified BLAS library

to avoid atlas.  But BLAS configuration was changed in two steps,
and you may just have caught the middle.

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> > library(modreg)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
>   can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
> Error in library(modreg) : .First.lib failed
> > 
> 
> First checked the lowessc.c routine and it had F77_SUB(...) but I
> could not find a macro for that in the include files. There was
> F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't

Well, there is one (in R_ext/RS.h), *and* it is documented in `Writing R
Extensions'. (It seems pretty unlikely that something which has been in
R releases for a year or so would be wrong in a way like that.)

Making changes like that in the dark is not usually a good idea.  It is
likely that modreg.sl is  missing some blas libs, since you I suppose did
not change etc/Makeconf too.

> load.
> Is there a way to get more info why it doesn't open?

Is the error message correct?  It says the shared library cannot be
opened. Does it exist?  How helpful those messages are is OS-dependent.

I would take a look at your shared libraries with nm -g to see what
symbols are unsatisfied, as that is usually enough clue.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 20:05:39 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 15:05:39 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
References: <14740.12889.352584.694777@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
Message-ID: <14740.18299.166615.133823@c1186.ae.ge.com>

Prof Brian D Ripley writes:
 > > It seems like d1mach and a few others are not in any of the blas libs
 > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
 > > them when building modreg.sl
 > 
 > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
 > included on the load line, shared or not.

I get an error about non position independent code being in the
lib. Tells me to recompile with +z option !!  
This is a shortcoming of hp's linker I think. 

 > 
 > Try using --without-blas or --with-blas=no.  If that works,
 > try --with-blas=blas (or whatever).  If it does not work,
 > the problem is not blas-related.
 > 

OK, --without-blas worked. Everything loads now. Thanks.

I guess I still don't understand the config options :-(
--with-blas=/opt/fortran/lib/pa2.0/libblas.a
still grabs -latlas
My shell is bash.
I edited Makeconf and etc/Makeconf and did a make. Worked :-)
Thanks again, 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 20:17:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 11 Aug 2000 20:17:26 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.18299.166615.133823@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Prof Brian D Ripley writes:
>  > > It seems like d1mach and a few others are not in any of the blas libs
>  > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>  > > them when building modreg.sl
>  > 
>  > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>  > included on the load line, shared or not.
> 
> I get an error about non position independent code being in the
> lib. Tells me to recompile with +z option !!  
> This is a shortcoming of hp's linker I think. 

Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

I think that's it. Glad we got there.

>  > 
>  > Try using --without-blas or --with-blas=no.  If that works,
>  > try --with-blas=blas (or whatever).  If it does not work,
>  > the problem is not blas-related.
>  > 
> 
> OK, --without-blas worked. Everything loads now. Thanks.
> 
> I guess I still don't understand the config options :-(
> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

--with-blas=blas?  That's all that is likely to work. Set LD_LIBRARY_PATH
(or HP's equivalent) accordingly.

> still grabs -latlas
> My shell is bash.
> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Aug 13 08:00:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 Aug 2000 09:00:32 +0200
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
References: <14740.18299.166615.133823@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
Message-ID: <200008130700.JAA03995@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:
>> Prof Brian D Ripley writes:
>> > > It seems like d1mach and a few others are not in any of the blas libs
>> > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>> > > them when building modreg.sl
>> > 
>> > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>> > included on the load line, shared or not.
>> 
>> I get an error about non position independent code being in the
>> lib. Tells me to recompile with +z option !!  
>> This is a shortcoming of hp's linker I think. 

> Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

> I think that's it. Glad we got there.

>> > 
>> > Try using --without-blas or --with-blas=no.  If that works,
>> > try --with-blas=blas (or whatever).  If it does not work,
>> > the problem is not blas-related.
>> > 
>> 
>> OK, --without-blas worked. Everything loads now. Thanks.
>> 
>> I guess I still don't understand the config options :-(
>> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

> --with-blas=blas?  That's all that is likely to work. Set
> LD_LIBRARY_PATH (or HP's equivalent) accordingly.

>> still grabs -latlas
>> My shell is bash.
>> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

The (fast) BLAS configure code is taken from Octave.  It interprets an
option like

	--with-blas=/path/to/libblas.a

as a `suggestion' to be tried first.  If this fails, it goes on to check
for other blas libs it knows about.  Can you check your config.log to
see whether your --with-blas=/opt/fortran/lib/pa2.0/libblas.a test
failed?

The way to turn off all fast BLAS checking is

	--with-blas=no
	--without-blas

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From agusalon@mcr.ucm.es  Sun Aug 13 19:59:22 2000
From: agusalon@mcr.ucm.es (agusalon@mcr.ucm.es)
Date: Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008131859.UAA15816@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0008_01C00569.70069B40"


------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear Sirs:

I am reading the book Mixed-Effects Models in S and S-Plus, by Pinheiro =
and Bates,  (Springer-Verlag New York, 2000) but using the nlme library =
for R (version:3.1-7, dated: 2000-07-07), and for the Linux (Mandrake =
7.0) operating system.

Working the first example of the book (pp. 4 - 12), I reproduce the =
reported results but with one exception: the model on page 6, called =
fm2Rail.lm. The estimated coefficients that I get are not those reported =
on the book.

In the attached file (report), I am sending you the short program (which =
reproduces the one in the book) and the results for estimating the =
fm2Rail.lm model. The estimated coefficients which I get are:

    Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
    66.5    54.303    -4.692    -2.658    -0.567    11.192
which do not seem correct.

Those reported in the book are:

    Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
    31.667    50      54        82.667    84.667    96

I have tried several times and other examples but the function lm seems =
not to work correctly, and perhaps the problem is in the adaptation of =
nlme from S to R.

Would you, please, let me know what is the reason for the estimated =
coefficients which I get?

Thanking you for your attention, I am

Sincerely yours


Agustin Alonso-Rodriguez
Prof. of Econometrics
Real C. Univ. "Escorial-Maria Cristina"
28200 San Lorenzo del Escorial(Madrid)
Spain
aalonso@mcr.ucm.es



------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2014.210" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT size=3D2>Dear Sirs:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I am reading the book <U>Mixed-Effects Models in S =
and=20
S-Plus</U>, by Pinheiro and Bates,&nbsp; (Springer-Verlag New York, =
2000) but=20
using the nlme library for R (version:3.1-7, dated: 2000-07-07), and for =
the=20
Linux (Mandrake 7.0) operating system.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Working the first example of the book (pp. 4 - 12), =
I=20
reproduce the reported results but with one exception: the model on page =
6,=20
called fm2Rail.lm. The estimated coefficients that I get are not those =
reported=20
on the book.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>In the attached file (report), I am sending you the =
short=20
program (which reproduces the one in the book) and the results for =
estimating=20
the fm2Rail.lm model. The estimated coefficients which I get =
are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail^0&nbsp; Rail^1&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^2&nbsp;&nbsp; Rail^3&nbsp;&nbsp; =
Rail^4&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^5</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 66.5&nbsp;&nbsp;&nbsp;=20
54.303&nbsp;&nbsp;&nbsp; -4.692&nbsp;&nbsp;&nbsp; =
-2.658&nbsp;&nbsp;&nbsp;=20
-0.567&nbsp;&nbsp;&nbsp; 11.192</FONT></DIV>
<DIV><FONT size=3D2>which do not seem correct.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Those reported in the book are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail2&nbsp;&nbsp;&nbsp;=20
Rail5&nbsp;&nbsp;&nbsp; Rail1&nbsp;&nbsp;&nbsp;=20
Rail6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rail3&nbsp;&nbsp;&nbsp;=20
Rail4</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 31.667&nbsp;&nbsp;&nbsp;=20
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 54&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; =

82.667&nbsp;&nbsp;&nbsp; 84.667&nbsp;&nbsp;&nbsp; 96</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I have tried several times and other examples but =
the function=20
<STRONG>lm </STRONG>seems not to work correctly, and perhaps the problem =
is in=20
the adaptation of nlme from S to R.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Would you, please, let me know what is the reason =
for the=20
estimated coefficients which I get?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanking you for your attention, I am</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Sincerely yours</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Agustin Alonso-Rodriguez</FONT></DIV>
<DIV><FONT size=3D2>Prof. of Econometrics</FONT></DIV>
<DIV><FONT size=3D2>Real C. Univ. "Escorial-Maria Cristina"</FONT></DIV>
<DIV><FONT size=3D2>28200 San Lorenzo del Escorial(Madrid)</FONT></DIV>
<DIV><FONT size=3D2>Spain</FONT></DIV>
<DIV><FONT size=3D2><A=20
href=3D"mailto:aalonso@mcr.ucm.es">aalonso@mcr.ucm.es</A></FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_0008_01C00569.70069B40--

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: application/octet-stream;
	name="report"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="report"

1.- Program=0A=
=0A=
library(nlme)=0A=
data(Rail)=0A=
Rail=0A=
=0A=
# Fixed-effects model=0A=
fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
fm2Rail.lm=0A=
summary(fm2Rail.lm)=0A=
=0A=
=0A=
2.- Results=0A=
=0A=
=0A=
R : Copyright 2000, The R Development Core Team=0A=
Version 1.1.0  (June 15, 2000)=0A=
=0A=
R is free software and comes with ABSOLUTELY NO WARRANTY.=0A=
You are welcome to redistribute it under certain conditions.=0A=
Type	"?license" or "?licence" for distribution details.=0A=
=0A=
R is a collaborative project with many contributors.=0A=
Type	"?contributors" for a list.=0A=
=0A=
Type	"demo()" for some demos, "help()" for on-line help, or=0A=
    	"help.start()" for a HTML browser interface to help.=0A=
Type	"q()" to quit R.=0A=
=0A=
> library(nlme)=0A=
Loading required package: nls =0A=
> data(Rail)=0A=
> Rail=0A=
Grouped Data: travel ~ 1 | Rail=0A=
   Rail travel=0A=
1     1     55=0A=
2     1     53=0A=
3     1     54=0A=
4     2     26=0A=
5     2     37=0A=
6     2     32=0A=
7     3     78=0A=
8     3     91=0A=
9     3     85=0A=
10    4     92=0A=
11    4    100=0A=
12    4     96=0A=
13    5     49=0A=
14    5     51=0A=
15    5     50=0A=
16    6     80=0A=
17    6     85=0A=
18    6     83=0A=
> =0A=
> # Fixed-effects model=0A=
> fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
> fm2Rail.lm=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Coefficients:=0A=
Rail^0  Rail^1  Rail^2  Rail^3  Rail^4  Rail^5  =0A=
66.500  54.303  -4.692  -2.658  -0.567  11.192  =0A=
=0A=
> summary(fm2Rail.lm)=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Residuals:=0A=
    Min      1Q  Median      3Q     Max =0A=
-6.6667 -1.0000  0.1667  1.0000  6.3333 =0A=
=0A=
Coefficients:=0A=
       Estimate Std. Error t value Pr(>|t|)    =0A=
Rail^0  66.5000     0.9477  70.169  < 2e-16 ***=0A=
Rail^1  54.3032     2.3214  23.392 2.22e-11 ***=0A=
Rail^2  -4.6917     2.3214  -2.021 0.066161 .  =0A=
Rail^3  -2.6584     2.3214  -1.145 0.274458    =0A=
Rail^4  -0.5669     2.3214  -0.244 0.811181    =0A=
Rail^5  11.1919     2.3214   4.821 0.000418 ***=0A=
---=0A=
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 =0A=
=0A=
Residual standard error: 4.021 on 12 degrees of freedom=0A=
Multiple R-Squared: 0.9978,	Adjusted R-squared: 0.9967 =0A=
F-statistic: 916.6 on 6 and 12 degrees of freedom,	p-value: 2.998e-15 =0A=
=0A=
> =0A=

------=_NextPart_000_0007_01C00569.70069B40--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 13 22:59:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 2000 23:59:44 +0200
Subject: [Rd] Possible bug (PR#633)
In-Reply-To: agusalon@mcr.ucm.es's message of "Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)"
References: <200008131859.UAA15816@pubhealth.ku.dk>
Message-ID: <x2r97shlf3.fsf@blueberry.kubism.ku.dk>

agusalon@mcr.ucm.es writes:

>     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
>     66.5    54.303    -4.692    -2.658    -0.567    11.192
> which do not seem correct.
> 
> Those reported in the book are:
> 
>     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
>     31.667    50      54        82.667    84.667    96

This is a matter of differing conventions in handling

lm(travel ~ Rail - 1, data = Rail)

when Rail is an ordered factor. R uses polynomial contrasts in the
no-intercept case as it does when the intercept is present, whereas
Splus treats the ordered factor as if it were an unordered factor. If
you do something like the below, you get your coefficients.

I suspect that this could indeed be argued to be a bug in R, but
others may know better.

> lm(travel ~ factor(Rail,ordered=F)-1, data = Rail)

Call:
lm(formula = travel ~ factor(Rail, ordered = F) - 1, data = Rail)

Coefficients:
factor(Rail, ordered = F)2  factor(Rail, ordered = F)5  
                     31.67                       50.00  
factor(Rail, ordered = F)1  factor(Rail, ordered = F)6  
                     54.00                       82.67  
factor(Rail, ordered = F)3  factor(Rail, ordered = F)4  
                     84.67                       96.00  



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 14 07:48:39 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Aug 2000 08:48:39 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008140648.IAA17196@pubhealth.ku.dk>

On 13 Aug 2000, Peter Dalgaard BSA wrote:

> agusalon@mcr.ucm.es writes:
> 
> >     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
> >     66.5    54.303    -4.692    -2.658    -0.567    11.192
> > which do not seem correct.
> > 
> > Those reported in the book are:
> > 
> >     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
> >     31.667    50      54        82.667    84.667    96
> 
> This is a matter of differing conventions in handling
> 
> lm(travel ~ Rail - 1, data = Rail)
> 
> when Rail is an ordered factor. R uses polynomial contrasts in the
> no-intercept case as it does when the intercept is present, whereas
> Splus treats the ordered factor as if it were an unordered factor. If

S-PLUS does it internally, R via contr.*(n, contrast=F). Both 
systems give

> contr.treatment(6, contrasts=F)
  1 2 3 4 5 6
1 1 0 0 0 0 0
2 0 1 0 0 0 0
3 0 0 1 0 0 0
4 0 0 0 1 0 0
5 0 0 0 0 1 0
6 0 0 0 0 0 1

> contr.poly(6, contrasts=F)
     ^0         ^1         ^2         ^3         ^4          ^5
[1,]  1 -0.5976143  0.5455447 -0.3726780  0.1889822 -0.06299408
[2,]  1 -0.3585686 -0.1091089  0.5217492 -0.5669467  0.31497039
[3,]  1 -0.1195229 -0.4364358  0.2981424  0.3779645 -0.62994079
[4,]  1  0.1195229 -0.4364358 -0.2981424  0.3779645  0.62994079
[5,]  1  0.3585686 -0.1091089 -0.5217492 -0.5669467 -0.31497039
[6,]  1  0.5976143  0.5455447  0.3726780  0.1889822  0.06299408

but S-PLUS uses neither.

> you do something like the below, you get your coefficients.
> 
> I suspect that this could indeed be argued to be a bug in R, but
> others may know better.

I suspect it is an undocumented(?) feature.  However, as

lm(travel ~ Rail - 1, data = Rail)

and

lm(travel ~ Rail, data = Rail)

give the same results (up to the coefficient labels) it is not a useful
one, and so I guess we should change it.  Unfortunately we need either
to break the compatibility of contr.poly or to re-structure the internal
code.


Here's a simpler way to get the book's results:

> options(contrasts=rep("contr.treatment", 2))
> lm(travel ~ Rail - 1, data = Rail)

Call:
lm(formula = travel ~ Rail - 1, data = Rail)

Coefficients:
Rail2  Rail5  Rail1  Rail6  Rail3  Rail4  
31.67  50.00  54.00  82.67  84.67  96.00  

or

> contrasts(Rail$Rail) <- "contr.treatment"
> lm(formula = travel ~ Rail - 1, data = Rail)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Tue Aug 15 04:16:03 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Tue, 15 Aug 2000 11:16:03 +0800 (GMT-8)
Subject: [Rd] package (in development)
Message-ID: <Pine.GSO.4.21.0008151102090.2401-100000@sununx.comp.nus.edu.sg>

Hi,
I have submitted the package maptools (the file is maptools-0.1a.zip). The
archive contains the source ready to compile. I have tested everything on
windows 98 and NT and haven't found any major bugs (yet). It should work 
on lin/unix as well but I don't have easy access to a machine to test
it. 

Of interest might be the functions dbf.read and dbf.write.
Also there is a function to read ESRI shapefiles, which is stored as a map
object. I am still developing the map object, at the moment it is far too
bulky, and I think i could make it a lot more elegant using
attributes. Suggestions would be very very welcome. I am planing to
implement quadtree indexing, so that map objects can be used for spatial
statistics (range searching for building connectivity matrices). One thing
I noticed is that the polygon function cannot handle wierd cases such as
holes, I can work on that if no one else is.

Lastly there is ca color ramp function. I am planning to implement a more
sophisticated one with interpolation in the color cube between break
points. Is there a way to get the rgb values for all the colors listed
when colors() is typed?

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From monty@sprintmail.com  Tue Aug 15 14:40:00 2000
From: monty@sprintmail.com (monty@sprintmail.com)
Date: Tue, 15 Aug 2000 15:40:00 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151340.PAA05358@pubhealth.ku.dk>

Full_Name: Rod Montgomery
Version: 1.1.0
OS: Windows-95
Submission from: (NULL) (38.26.56.3)


File R-1.1.0/src/appl/lbfgsb.c --

Comment in code says two papers describing underlying math are in 
ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
but that directory seems not to exist.

(Actually, the comment does not give a URL - it just says
to look in that directory on that FTP server.)

Paper [1] does exist in 
ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps

Nocedal's bibliography page for L-BGFS-B is
http://www.ece.nwu.edu/~nocedal/lbfgsb.html
which points to .ps.gz forms of both papers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 15 14:54:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 15 Aug 2000 15:54:04 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151354.PAA05536@pubhealth.ku.dk>

Thanks.  These things have a habit of changing, and those refs are from
the original source.  The help page gives current ones.  Unfortunately
1.1.1 went out today, so I'll take a look closer to 1.2.0 release-time.


On Tue, 15 Aug 2000 monty@sprintmail.com wrote:

> Full_Name: Rod Montgomery
> Version: 1.1.0
> OS: Windows-95
> Submission from: (NULL) (38.26.56.3)
> 
> 
> File R-1.1.0/src/appl/lbfgsb.c --
> 
> Comment in code says two papers describing underlying math are in 
> ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
> but that directory seems not to exist.
> 
> (Actually, the comment does not give a URL - it just says
> to look in that directory on that FTP server.)
> 
> Paper [1] does exist in 
> ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps
> 
> Nocedal's bibliography page for L-BGFS-B is
> http://www.ece.nwu.edu/~nocedal/lbfgsb.html
> which points to .ps.gz forms of both papers.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Connolly@hort.cri.nz  Wed Aug 16 01:25:34 2000
From: P.Connolly@hort.cri.nz (P.Connolly@hort.cri.nz)
Date: Wed, 16 Aug 2000 02:25:34 +0200 (MET DST)
Subject: [Rd] Multiple pages with postscript() (PR#635)
Message-ID: <200008160025.CAA07887@pubhealth.ku.dk>

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

The function will produce a three page file, but only the first one
has the lwd parameter set.  The other pages have reverted to lwd = 1.

I've tried setting the lwd at different places, but the result is
always the same.  The same code does not have a problem in Splus 3.4.




test.device <-
function()
{
#  looks like the problem is in the postscript device
  
       postscript(file = paste("Test.ps"), horizontal = F)
       on.exit(dev.off())
       par(mai = rep(1, 4), lwd = 4)    
       for(j in 1:3) {
       plot(1:10, 11:20)
       title(paste("Testing  .... Page", j), line = -1, cex = 1.5)
    }
}

best


-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world's largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you've seen it.  ---Steven Wright
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 16 02:45:06 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 15 Aug 2000 21:45:06 -0400 (EDT)
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: <200008160025.CAA07887@pubhealth.ku.dk> (P.Connolly@hort.cri.nz)
Message-ID: <200008160145.VAA16148@jessie.research.bell-labs.com>


> 
> The function will produce a three page file, but only the first one
> has the lwd parameter set.  The other pages have reverted to lwd = 1.
> 
> I've tried setting the lwd at different places, but the result is
> always the same.  The same code does not have a problem in Splus 3.4.
> 
> 


Hi Patrick.
Thanks for the bug report. I took a quick look at the potential cause.

Here is a very simple workaround (i.e. I haven't investigated the other
side-effects):

diff -r1.28 devPS.c
1033c1033
<     if (pd->lty != newlty || pd->lwd != newlwd) {
---
>     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  

In other words, change the if() condition in the routine SetLineStyle()
in the file src/main/devPS.c to be true, regardless of whether the
values are the same or not. This appears to give the desired result.

Hopefully we will determine the appropriate reset configuration
as page changes occur. Anyone.... ?

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 16 10:15:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2000 11:15:43 +0200
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: Duncan Temple Lang's message of "Tue, 15 Aug 2000 21:45:06 -0400 (EDT)"
References: <200008160145.VAA16148@jessie.research.bell-labs.com>
Message-ID: <x266p17eio.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@research.bell-labs.com> writes:

> diff -r1.28 devPS.c
> 1033c1033
> <     if (pd->lty != newlty || pd->lwd != newlwd) {
> ---
> >     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  
> 
> In other words, change the if() condition in the routine SetLineStyle()
> in the file src/main/devPS.c to be true, regardless of whether the
> values are the same or not. This appears to give the desired result.
> 
> Hopefully we will determine the appropriate reset configuration
> as page changes occur. Anyone.... ?

Probably the code for "new page" needs to invalidate current status
(pd->xxx) of several items, or at least record the actual status. For
fonts we had a similar problem when the clipping changed (which got
fixed by setting it to -1), and I wouldn't be surprised if clipping
also could do strange stuff to the line widths. With a bit of luck, we
could in the same operation squash the "undefined in /bg" problem that
affects the PS output from "make check". Anyone...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jackman@stanford.edu  Wed Aug 16 18:16:56 2000
From: jackman@stanford.edu (jackman@stanford.edu)
Date: Wed, 16 Aug 2000 19:16:56 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008161716.TAA18739@pubhealth.ku.dk>

Full_Name: Simon Jackman
Version: 1.0
OS: win32, linux
Submission from: (NULL) (207.75.155.177)


the abbreivated state names given in data(state) contain numerous errors. 
Florida, 
Hawaii, Iowa, Michigan and Nebraska are wrongly abbreviated. 

compare R with S-plus on this.
> version
platform Windows   
arch     x86       
os       Win32     
system   x86, Win32
status             
major    1         
minor    1.0       
year     2000      
month    June      
day      15        
language R         
> data(state)
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FA" "GA" "HA" "ID" "IL" "IN" "IO"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MC" "MN" "MS" "MO" "MT" "NB" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"

but, say on splus for linux:
S-PLUS : Copyright (c) 1988, 1999 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 5.1 Release 1 for Linux 2.0.31 : 1999 
Working data will be in .Data 
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FL" "GA" "HI" "ID" "IL" "IN" "IA"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MI" "MN" "MS" "MO" "MT" "NE" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dick@b6ori1.bauv.unibw-muenchen.de  Thu Aug 17 10:09:05 2000
From: dick@b6ori1.bauv.unibw-muenchen.de (dick@b6ori1.bauv.unibw-muenchen.de)
Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170909.LAA22320@pubhealth.ku.dk>

Hi,

I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could compile
all Versions of R until 1.1.0.

When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
/R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
with the gcc compiler command

	gcc -I. -I../../../src/include -I../../../src/include
	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o

results in the following errors:

	rbitmap.c: In function `R_SaveAsPng':
	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
	function)
	rbitmap.c:168: (Each undeclared identifier is reported only once
	rbitmap.c:168: for each function it appears in.)
	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
this
	function)
	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
	function)

This file wasn't present in the R Versions before 1.1.0.

There don't seem to be any errors in the config.log file.

Does maybe anybodey know how to solve this problem?

Thank you
Thomas Dick

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 17 10:39:03 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Aug 2000 11:39:03 +0200
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
In-Reply-To: dick@b6ori1.bauv.unibw-muenchen.de's message of "Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)"
References: <200008170909.LAA22320@pubhealth.ku.dk>
Message-ID: <x2hf8ki5vs.fsf@blueberry.kubism.ku.dk>

dick@b6ori1.bauv.unibw-muenchen.de writes:

> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

A guess would be that your PNG library is old and that the PNG_
macros are not defined in png.h. But new enough that configure thinks
it is usable.

You might try turning off PNG support by commenting out

#define HAVE_PNG 1

in src/include/config.h after running configure. That would give you a
running R (hopefully) but obviously no support for .png bitmaps.
Otherwise maybe install a newer libpng &al.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 17 10:42:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Aug 2000 11:42:34 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170942.LAA22949@pubhealth.ku.dk>


> From: dick@b6ori1.bauv.unibw-muenchen.de
> Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
> 
> Hi,
> 
> I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could 
compile
> all Versions of R until 1.1.0.
> 
> When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
> /R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
> with the gcc compiler command
> 
> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

Update your libpng installation.  Those should be defined in png.h.
They certainly are in the current 1.0.8 and back to 1.0.6 at least.

If you don't want to do that, you can undef HAVE_PNG in config.h

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 17 14:28:11 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Aug 2000 15:28:11 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008171328.PAA25761@pubhealth.ku.dk>

>>>>> "Simon" == Simon Jackman <jackman@stanford.edu> writes:

    Simon> Full_Name: Simon Jackman

    Simon> the abbreivated state names given in data(state) contain
    Simon> numerous errors.

    Simon> Florida, Hawaii, Iowa, Michigan and Nebraska are wrongly
    Simon> abbreviated.

    Simon> compare R with S-plus on this.

even not being an American I do remember the official abbrevations,
and yes, R had them wrong {well they came from the other hemisphere..},
and they are now corrected for "R-devel"  aka "R 1.2 to be".

These were the 5 faults and their correction :

           old  new
 Florida    FA  FL
 Hawaii     HA  HI
 Iowa       IO  IA
 Michigan   MC  MI
 Nebraska   NB  NE

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Thu Aug 17 23:45:53 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Fri, 18 Aug 2000 08:45:53 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>

G'day R friends,

I didn't get any replies on the main list so I thought I'd try with the
experts.

I was wondering if anyone's ported R to os390.  If so, are the vsize and
nsize limits the same as other platforms?

I could really annoy those SAS guys then.

thanks,
John Strumila
john.strumila@team.telstra.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 18 16:19:22 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 18 Aug 2000 17:19:22 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181519.RAA05688@pubhealth.ku.dk>

make.function.html() produces ugly results. Have a look at the file 
..../r-directory/doc/html/function.html

The descriptions of datasets are wrong. Here are also the descriptions
of other function, which do not belong to these datasets.

Regards,
Uwe Ligges

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 18 17:51:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181651.SAA06029@pubhealth.ku.dk>

On Fri, 18 Aug 2000 ligges@statistik.uni-dortmund.de wrote:

> make.function.html() produces ugly results. Have a look at the file 
> ..../r-directory/doc/html/function.html

(after running make.function.html() on Windows: it seems fine as shipped).

> The descriptions of datasets are wrong. Here are also the descriptions
> of other function, which do not belong to these datasets.

This is a victim of a late change to the default arguments of scan.
Please add quote="" to both occurrences of scan in the function.

I think we've learnt not to change such things in a bug-fix release ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 18 21:37:01 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Aug 2000 22:37:01 +0200
Subject: [Rd] make.function.html and datasets (PR#638)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)"
References: <200008181651.SAA06029@pubhealth.ku.dk>
Message-ID: <x2em3mcnma.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> This is a victim of a late change to the default arguments of scan.
> Please add quote="" to both occurrences of scan in the function.
> 
> I think we've learnt not to change such things in a bug-fix release ....

Yep. (Actually, the change was not that late - July 25 - but it took
more than 2 weeks before someone noticed the unexpected side effects.
A hole in our bug-fishing net, obviously.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Aug 18 22:45:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 18 Aug 2000 14:45:37 -0700 (PDT)
Subject: [Rd] R on os390
In-Reply-To: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.GSO.4.21.0008181438140.10998-100000@atlas.biostat.washington.edu>

On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Mon Aug 21 01:11:17 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Mon, 21 Aug 2000 10:11:17 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD906698A4D@ntmsg0005.corpmail.telstra.com.au>

gday Thomas,

os390 uses 16/32 for int/long but the high order bit is not available, so
2gb is the best addressability.

The administrators of os390 tends to restrict virtual memory coz mainframe
RAM is historically expensive and paging is a very well understood/managed
resource.  Hence I don't know if I can physically grab 2Gb anyway.  On os390
this historically hasn't been a problem because it excels in I/O and
programs have been written with that in mind.  eg. SAS use of 'by' gets
around 'class' memory restrictions which means >2Gb files are handled
without much trouble.

I could only get nsize to about 200Mb (nsize=10,000K) on my redhat box.  Is
there something extra I need to do to increase this?

thanks,
John Strumila
 

-----Original Message-----
From: Thomas Lumley [mailto:thomas@biostat.washington.edu]
Sent: Saturday, 19 August 2000 7:46
To: Strumila, John
Cc: r-devel@stat.math.ethz.ch
Subject: Re: [Rd] R on os390


On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug 21 07:06:35 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Aug 2000 08:06:35 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008210606.IAA07166@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 638 *
Subject: make.function.html and datasets
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 18 Aug 2000 17:20:47 +0200
* PR# 637 *
Subject: Install Error on SGI Irix 6.5
From: "Thomas Dick" <dick@b6ori1.bauv.unibw-muenchen.de>
Date: Thu, 17 Aug 2000 11:09:11 +0000
* PR# 636 *
Subject: state name abbreviations
From: jackman@stanford.edu
Date: Wed, 16 Aug 2000 19:16:55 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stahel@stat.math.ethz.ch  Mon Aug 21 14:53:56 2000
From: stahel@stat.math.ethz.ch (stahel@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 15:53:56 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008211353.PAA20296@pubhealth.ku.dk>


symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
   ylim=c(1,5))
Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  : 
	formal argument "ylim" matched by multiple actual arguments

Since plot is called inside symbols, with specified xlim and ylim,
any specification through  ,...  hurts this call.

I am pretty sure that you won't like to hear the suggestion that
this error message 
  formal argument "anything" matched by multiple actual arguments
should only be a warning.
I would find this more convenient since foreseeing these collisions
and programming such arguments as explicit arguments of the "top" function
is a nuisance when writing functions just for one project.

Ceterum censeo: Thanks for your efforts for developing such a useful
                environment. 

Werner 

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, d.complexity, package:SfS, Autoloads, package:base

-- 
Werner Stahel

------------------ This message was sent by ---------------------------------
Werner Stahel                                     http://stat.ethz.ch/~stahel
Seminar fuer Statistik                               phone  : +41 1 632 34 30
ETH-Zentrum, LEO                                     fax    : +41 1 632 12 28
CH-8092 Zurich, Switzerland                          meet me: Leonhardstr. 27
-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Aug 21 17:17:35 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 21 Aug 2000 18:17:35 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008211353.PAA20296@pubhealth.ku.dk>
Message-ID: <39A1561F.65F06784@statistik.uni-dortmund.de>

stahel@stat.math.ethz.ch wrote:
> 
> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>    ylim=c(1,5))
> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>         formal argument "ylim" matched by multiple actual arguments
> 
> Since plot is called inside symbols, with specified xlim and ylim,
> any specification through  ,...  hurts this call.
> 
> I am pretty sure that you won't like to hear the suggestion that
> this error message
>   formal argument "anything" matched by multiple actual arguments
> should only be a warning.
> I would find this more convenient since foreseeing these collisions
> and programming such arguments as explicit arguments of the "top" function
> is a nuisance when writing functions just for one project.
> 
> Ceterum censeo: Thanks for your efforts for developing such a useful
>                 environment.


Suggestion for a fix:


function (x, y, circles, squares, rectangles, stars, thermometers, 
    boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
    ylab = "", xlim = NULL, ylim = NULL, ...) 
               ^^^^^^^^^^^^^^^^^^^^^^^^^
{
## [...] snip ##
  if (!add) { 
### check, wheter xlim and ylim are already specified:
        if(is.null(xlim)) {
            xlim <- range(x, na.rm = TRUE)
            xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
        }
        if(is.null(ylim)) {
            ylim <- range(y, na.rm = TRUE)
            ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
        }
        plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
            ylab = ylab, ...)
    }
    .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
}

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 21 17:28:22 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 18:28:22 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008211628.SAA21511@pubhealth.ku.dk>

{all recent versions of R}

Problem / design bug :

  diff.default() doesn't deal with "ts" objects properly,
  diff.ts() does, but that is only available from package "ts"
  where as the constructor function ts() is in base.

It's not sufficient to just move diff.ts() to package base,
since it relies itself on lag & lag.default which are also only in package 
ts.

----------------------------------------------------

A simple example :

> diff(ts(1:50, start= 1980, frequency = 12))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  : 
	invalid time series parameters specified

> library(ts)

> diff(ts(1:50, start= 1980, frequency = 12))
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
1980       1   1   1   1   1   1   1   1   1   1   1
1981   1   1   1   1   1   1   1   1   1   1   1   1
1982   1   1   1   1   1   1   1   1   1   1   1   1
1983   1   1   1   1   1   1   1   1   1   1   1   1
1984   1   1                                        

------
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 08:00:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 09:00:12 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220700.JAA24625@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> stahel@stat.math.ethz.ch wrote:
    >> 
    >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
    >>         ylim=c(1,5))
    >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
    >> formal argument "ylim" matched by multiple actual arguments
    >> 
    >> Since plot is called inside symbols, with specified xlim and ylim,
    >> any specification through  ,...  hurts this call.
yes,
and Uwe's fix cures this problem.
    [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
     copy it again now].

and I have committed it for the release patches (!! i.e. "1.1.1 patched")

    >> I am pretty sure that you won't like to hear the suggestion that
    >> this error message
    >>    formal argument "anything" matched by multiple actual arguments
    >>    should only be a warning.

    >> I would find this more convenient since foreseeing these collisions
    >> and programming such arguments as explicit arguments of the "top"
    >> function is a nuisance when writing functions just for one project.

Maybe this should be discussed a bit:
The error can only be made into a warning when it makes sense to assume
that it is always okay, to take the *LAST* actual argument as the 
desired one.   This is the case probably whenever "..." comes at the end of the
formal argument list -- which it is in about 95% of cases...

Hmm, what do others think?

    >> Ceterum censeo: Thanks for your efforts for developing such a useful
    >> environment.
Merci!

    Uwe> Suggestion for a fix:

      function (x, y, circles, squares, rectangles, stars, thermometers, 
	  boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
	  ylab = "", xlim = NULL, ylim = NULL, ...) 
		     ^^^^^^^^^^^^^^^^^^^^^^^^^
      {
      ## [...] snip ##
	if (!add) { 
      ### check, wheter xlim and ylim are already specified:
	      if(is.null(xlim)) {
		  xlim <- range(x, na.rm = TRUE)
		  xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
	      }
	      if(is.null(ylim)) {
		  ylim <- range(y, na.rm = TRUE)
		  ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
	      }
	      plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
		  ylab = ylab, ...)
	  }
	  .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
      }

    Uwe> Regards,
    Uwe> Uwe Ligges

Martin Maechler

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 22 08:45:48 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Aug 2000 09:45:48 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220745.JAA25729@pubhealth.ku.dk>

On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

> >>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> 
>     Uwe> stahel@stat.math.ethz.ch wrote:
>     >> 
>     >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>     >>         ylim=c(1,5))
>     >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>     >> formal argument "ylim" matched by multiple actual arguments
>     >> 
>     >> Since plot is called inside symbols, with specified xlim and ylim,
>     >> any specification through  ,...  hurts this call.
> yes,
> and Uwe's fix cures this problem.
>     [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
>      copy it again now].
> 
> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

Why is using NULL preferable here?  The standard paradigm as I understand
it is


         ylab = "", xlim, ylim, ...)
...
            if(missing(xlim)) {
                xlim <- range(x, na.rm = TRUE)
                xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
            }

In S there is a problem with passing down missingness, but not in R.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 22 10:48:17 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Aug 2000 11:48:17 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
Message-ID: <14754.19553.429605.429987@gargle.gargle.HOWL>

[now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
     
>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

    .............

    >> yes,
    >> and Uwe's fix cures this problem.
    >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

which has
		ylab = "", xlim = NULL, ylim = NULL, ...)
and later
		if(is.null(xlim)) { 
		   ... 
		}

    BDR> Why is using NULL preferable here?  The standard paradigm as I
    BDR> understand it is

    BDR> ylab = "", xlim, ylim, ...)
    BDR> ...
    BDR> if(missing(xlim)) {
    BDR>   xlim <- range(x, na.rm = TRUE)
    BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
    BDR> }

    BDR> In S there is a problem with passing down missingness, but not in R.

I know.  Note however that to be really useful one would have to able to
also *set* missingness for an argument (which I think we can't currently)

I might want to call

	symbols(.very.long.argument.list.etc.etc., 
                xlim = if(<something>) my.xlim else <<DEFAULT>>,
		...)

where with the NULL setup, I can even drop the else clause
{since  if(FALSE)  evaluates to NULL},
but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
to missing...

In short, we (Uwe, people here and me) *do* prefer NULL to missing...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug 22 12:19:44 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 22 Aug 2000 13:19:44 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL>
Message-ID: <39A261D0.4F731961@statistik.uni-dortmund.de>

Martin Maechler wrote:
> 
> [now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
>     .............
> 
>     >> yes,
>     >> and Uwe's fix cures this problem.
>     >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")
> 
> which has
>                 ylab = "", xlim = NULL, ylim = NULL, ...)
> and later
>                 if(is.null(xlim)) {
>                    ...
>                 }
> 
>     BDR> Why is using NULL preferable here?  The standard paradigm as I
>     BDR> understand it is
> 
>     BDR> ylab = "", xlim, ylim, ...)
>     BDR> ...
>     BDR> if(missing(xlim)) {
>     BDR>   xlim <- range(x, na.rm = TRUE)
>     BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
>     BDR> }
> 
>     BDR> In S there is a problem with passing down missingness, but not in R.
> 
> I know.  Note however that to be really useful one would have to able to
> also *set* missingness for an argument (which I think we can't currently)
> 
> I might want to call
> 
>         symbols(.very.long.argument.list.etc.etc.,
>                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
>                 ...)
> 
> where with the NULL setup, I can even drop the else clause
> {since  if(FALSE)  evaluates to NULL},
> but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> to missing...
> 
> In short, we (Uwe, people here and me) *do* prefer NULL to missing...

You are right.
Especially in the development of the scatterplot3d() function I have had
some problems with missing arguments (not only xlim), so I decided to
work with NULL as default instead of "missing".
And I don't see any problems so far.
The only reason to use "missing" is the "standard paradigm" argument, as
Prof. Ripley mentioned.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 13:10:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 14:10:14 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: Uwe Ligges's message of "Tue, 22 Aug 2000 13:19:44 +0200"
References: <200008220700.JAA24625@pubhealth.ku.dk> <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL> <39A261D0.4F731961@statistik.uni-dortmund.de>
Message-ID: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> > I know.  Note however that to be really useful one would have to able to
> > also *set* missingness for an argument (which I think we can't currently)
> > 
> > I might want to call
> > 
> >         symbols(.very.long.argument.list.etc.etc.,
> >                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
> >                 ...)
> > 
> > where with the NULL setup, I can even drop the else clause
> > {since  if(FALSE)  evaluates to NULL},
> > but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> > to missing...
> > 
> > In short, we (Uwe, people here and me) *do* prefer NULL to missing...
> 
> You are right.
...
> The only reason to use "missing" is the "standard paradigm" argument, as
> Prof. Ripley mentioned.

Also the fact that all those NULL defaults tend to clutter up the
code... 

I tend to see it the way that the "standard paradigm" is well
intended, but flawed -- mostly in the S incarnation, but also in R for
the reasons that Martin poins out. So another option could be to
fix things so that the paradigm worked.

Do we want to reconsider the semantics and include a "missing
constant"? In fact we have one (don't look now, Robert!):

missing.value<-quote()
missing(missing.value)
f<-function(x)missing(x)
f(missing.value)
y<-missing.value

However, things are not all that simple, e.g. constructions like

g<-function(y,x=if (y) 2 else missing.value) missing(x)

returns TRUE both for g(TRUE) and g(FALSE)

That actually makes sense, but this is perplexing:

> f<-function(x)missing(x)
> g<-function(y,x=if(y)2 else missing.value)f(x)
> g(F)
[1] FALSE
> g(T)
[1] FALSE
> g<-function(y,x=if(y)2 else missing.value)print(x)
> g(T)
[1] 2
> g(F)
Error in print(x) : Argument "missing.value" is missing, with no default

[You don't need to mess with missing.value to create this kind of
effect: 

> g<-function(y,x=y)f(x)
> g()
[1] TRUE
> g<-function(y,x=(y))f(x)
> g()
[1] FALSE

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 17:36:18 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008221636.SAA03685@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> {all recent versions of R} Problem / design bug :

    MM>   diff.default() doesn't deal with "ts" objects properly, diff.ts()
    MM> does, but that is only available from package "ts" where as the
    MM> constructor function ts() is in base.

    MM> It's not sufficient to just move diff.ts() to package base, since
    MM> it relies itself on lag & lag.default which are also only in
    MM> package ts.

    MM> ----------------------------------------------------

    MM> A simple example :

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM> Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences *
    MM> xtsp[3], : invalid time series parameters specified

    >> library(ts)

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM>      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 1980 1 1 1 1 1
    MM> 1 1 1 1 1 1 1981 1 1 1 1 1 1 1 1 1 1 1 1 1982 1 1 1 1 1 1 1 1 1 1 1
    MM> 1 1983 1 1 1 1 1 1 1 1 1 1 1 1 1984 1 1

---
answering myself :

One easy and "clean" fix is to put the following at the very beginning of
diff.default :

    if(is.ts(x)) {
        require(ts)
        UseMethod("diff")
    }

{and then remove the "tsp" stuff at the end of diff.default()}.

Now
	diff(ts(1:20))
gives a one line message
-------------------------------------
Loading required package: ts 
-------------------------------------
but I think this is really okay and desired to some extent.

As Prof Ripley pointed out in a private e-mail to me,
package ts  should really be used for everything "ts"ish,
but then we want to have very basic "ts" functionality in package base...

The above passes "make check" (and more).

Anybody against this?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 17:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 18:58:39 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)"
References: <200008221636.SAA03685@pubhealth.ku.dk>
Message-ID: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> One easy and "clean" fix is to put the following at the very beginning of
> diff.default :
> 
>     if(is.ts(x)) {
>         require(ts)
>         UseMethod("diff")
>     }
...
> The above passes "make check" (and more).
> 
> Anybody against this?

I'm not really pro or con, but what is wrong with autoloading diff.ts?? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 08:39:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 09:39:47 +0200 (CEST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
References: <200008221636.SAA03685@pubhealth.ku.dk>
 <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.32707.497714.333996@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

it does not work, i.e.

   autload("diff.ts", "ts")
   diff(ts(1:10))

does not load package ts.
It's not so clear if this is a bug in method dispatching ...
but assuming ``standard semantic'' (diff.ts is in search() i.e. diff()
				    should dispatch to it),
it is one..

Shall I 
 1) commit my proposed change to "R-release-patches" (since it fixes a bug
						     in R 1.1.1)
 2) submit a new bug report  about the non-dispatching to "Autoloads"
    objects
?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 23 09:53:34 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Aug 2000 10:53:34 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: Martin Maechler's message of "Wed, 23 Aug 2000 09:39:47 +0200 (CEST)"
References: <200008221636.SAA03685@pubhealth.ku.dk> <x2bsylfd1c.fsf@blueberry.kubism.ku.dk> <14755.32707.497714.333996@gargle.gargle.HOWL>
Message-ID: <x23djwcq9d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Shall I 
>  1) commit my proposed change to "R-release-patches" (since it fixes a bug
> 						     in R 1.1.1)
>  2) submit a new bug report  about the non-dispatching to "Autoloads"
>     objects

I'm inclined to say 2). 

1) would be wrong in any case (it's hardly a critical bug since you
can just preload ts and the fix is somewhat questionable when you
consider the full consequences). If anything, the fix would be for the
development version -- not that that really matters at this point,
since there's a very good chance that the next release will be 1.2.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 10:17:20 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 11:17:20 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
 <14754.19553.429605.429987@gargle.gargle.HOWL>
 <39A261D0.4F731961@statistik.uni-dortmund.de>
 <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.38560.233927.26543@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
    >> > I know.  Note however that to be really useful one would have to
    >> able to > also *set* missingness for an argument (which I think we
    >> can't currently)
    >> > 
    >> > I might want to call
    >> > 
    >> > symbols(.very.long.argument.list.etc.etc., > xlim =
    >> if(<something>) my.xlim else <<DEFAULT>>, > ...)
    >> > 
    >> > where with the NULL setup, I can even drop the else clause >
    >> {since if(FALSE) evaluates to NULL}, > but with the missing(xlim)
    >> paradigm, I should be able to set <<DEFAULT>> > to missing...
    >> > 
    >> > In short, we (Uwe, people here and me) *do* prefer NULL to
    >> missing...
    >> 
    >> You are right.
    PD> ...
    >> The only reason to use "missing" is the "standard paradigm"
    >> argument, as Prof. Ripley mentioned.

    PD> Also the fact that all those NULL defaults tend to clutter up the
    PD> code...
yes, the argument list

    PD> I tend to see it the way that the "standard paradigm" is well
    PD> intended, but flawed -- mostly in the S incarnation, but also in R
    PD> for the reasons that Martin poins out. So another option could be
    PD> to fix things so that the paradigm worked.
yes!

    PD> Do we want to reconsider the semantics and include a "missing
    PD> constant"? In fact we have one (don't look now, Robert!):

	[ `missing' spaces around "<-" added (above and below) by MM  ... ]

    >> missing.value <- quote()
    >> missing(missing.value)
    >> f <- function(x)missing(x)
    >> f(missing.value)
    >> y <- missing.value

wow!  (I  thought about you when I wrote above
       ``*set* missingness for an argument (which I think we can't currently)''
						  ^^^^^^^
      )						 

    PD> However, things are not all that simple, e.g. constructions like

    >> g <- function(y,x=if (y) 2 else missing.value) missing(x)

    PD> returns TRUE both for g(TRUE) and g(FALSE)

    PD> That actually makes sense,
yes

    PD> but this is perplexing:

    >> f <- function(x)missing(x)
    >> g <- function(y,x=if(y)2 else missing.value)f(x)
    >> g(F)
    PD> [1] FALSE
    >> g(T)
    PD> [1] FALSE
    >> g <- function(y,x=if(y)2 else missing.value)print(x)
    >> g(T)
    PD> [1] 2
    >> g(F)
    PD> Error in print(x) : Argument "missing.value" is missing, with no default

    PD> [You don't need to mess with missing.value to create this kind of
    PD> effect: 

    >> g <- function(y,x=y)f(x)
    >> g()
    PD> [1] TRUE
    >> g <- function(y,x=(y))f(x)
    >> g()
    PD> [1] FALSE

(that's a bug in the passing of "missingness", right ?)

--------

Coming back to your proposition:

Yes I think it's worth considering to make your "missing.value" a new
language constant.  However, the name "missing.value" is too easily
confused by what we (statisticians) usually  use  `NA' for.

Coffee discussion here lead to one of
       missing.argument
       missing.arg
or     MARG

So, this would need to
1)  declare "MARG" (or whatever)
    a constant, the same as "NA" or "NULL" or "TRUE"
2)  Maybe define a ``print method'' for it,
    the problem being that using a class or changing print.default() is not
    going to work, since the *generic*  print() now already gives the error

        Error in print(x) : Argument "MARG" is missing, with no default

   Hence, print may be changed to something like

     print <- function (x, ...) {
	 if(missing(x))
	     return(print("<<missing argument>>", quote = FALSE, ...))
	 UseMethod("print")
     }

     MARG <- quote()

     MARG ## still does not work !
     (MARG)## neither
     print(MARG) # does work

which is somewhat perplexing : 
There must be an internal extra "if(missing(.))"  even *before* print() is
called ...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Aug 23 10:48:06 2000
From: jens.oehlschlaegel@bbdo-interone.de (jens.oehlschlaegel@bbdo-interone.de)
Date: Wed, 23 Aug 2000 11:48:06 +0200 (MET DST)
Subject: [Rd] 2 Bugs in na.omit.default() (PR#641)
Message-ID: <200008230948.LAA08598@pubhealth.ku.dk>

# BUG 1: returns empty vector if no NAs present

> nona <- 1:10
> na.omit(nona)
numeric(0)

na.omit.default() has two lines where
  object[-omit]
is used, where omit represents positions of NAs and thus without NAs
  omit = numeric(0)
and since
  -numeric(0) = numeric(0)

  object[-omit] = numeric(0)

It looks like an earlier version of na.omit.default had 'omit' defined as
logical,
at least the last section
  if (any(omit))
seems to expect omit as logical
which leads to

# BUG 2: wrong indication of dropped elements
> withna <- c(NA, 1:10, NA)
> unclass(na.omit(withna))
 [1]  1  2  3  4  5  6  7  8  9 10
attr(,"na.action")
[1]  1 NA
attr(,"na.action")attr(,"class")
[1] "omit"


# suggested fix, experts PLEASE CROSS CHECK
na.omit.default <-
function (object)
{
    if (!is.atomic(object))
        return(object)
    d <- dim(object)
    if (length(d) > 2)
        return(object)
    if (length(d)) {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          omit <- unique(((omit - 1)%%d[1]) + 1)
          nm <- rownames(object)
          object <- object[-omit, , drop = FALSE]
        }
    }
    else {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          nm <- names(object)
          object <- object[-omit]
        }
    }
    if (hasomit) {
        names(omit) <- nm[omit]
        attr(omit, "class") <- "omit"
        attr(object, "na.action") <- omit
    }
    object
}







> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R



--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 24 16:08:57 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 24 Aug 2000 17:08:57 +0200 (MET DST)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
Message-ID: <200008241508.RAA24536@pubhealth.ku.dk>

(As mentioned before, on R-devel)

This code snippet shows what the Subject above says :

> autoload("diff.ts", file="ts")
> diff(ts(1:10,freq=2))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  :
	invalid time series parameters specified
> traceback()
[1] "tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3], "
[2] "    xtsp[2], xtsp[3]))"
[3] "diff.default(ts(1:10, freq = 2))"
[4] "diff(ts(1:10, freq = 2))"

[The R version doesn't matter; this has been true for 1.1.x as well]

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 2.0
 year = 2000
 month = 08
 day = 24
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 18:08:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 24 Aug 2000 10:08:09 -0700 (PDT)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: <200008241508.RAA24536@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>

On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:

> (As mentioned before, on R-devel)
> 
> This code snippet shows what the Subject above says :

The problem is that isFunction is false for diff.ts, since it is only a
promise, not a function.

I think the solution is for usemethod to force the promise (in lines 225ff
of objects.c), but I'm not sure how to do this.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 21:45:54 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 24 Aug 2000 22:45:54 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008242045.WAA25703@pubhealth.ku.dk>

On Thu, 24 Aug 2000, Troels Ring wrote:

> Dear friends.
> 
> Is this as expected ? Is alpha and beta too large simply ?
> 
>  > dbeta(.1,534,646)
> [1] NaN
> Warning message:
> NaNs produced in: dbeta(x, shape1, shape2, log)

well, it should work, but the correct answer is effectively zero.
  pbeta(.1,534,646) gives 3.6e-213

Perhaps more worrying is 
> dbeta(.25,534,646)
[1] Inf


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 24 23:41:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2000 00:41:27 +0200
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: Thomas Lumley's message of "Thu, 24 Aug 2000 10:08:09 -0700 (PDT)"
References: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>
Message-ID: <x2lmxm1duw.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
> > (As mentioned before, on R-devel)
> > 
> > This code snippet shows what the Subject above says :
> 
> The problem is that isFunction is false for diff.ts, since it is only a
> promise, not a function.
> 
> I think the solution is for usemethod to force the promise (in lines 225ff
> of objects.c), but I'm not sure how to do this.

Yes, must be the right thing to do. We must be doing the same thing
with regular function lookups, no? Not that there are many (if any)
relevant cases, but

> autoload(".TkRoot","tcltk")
> .TkRoot(x)
Error: couldn't find function ".TkRoot"

will cause the .TkRoot promise to be forced, loading tcltk *before* it
can figure out that it isn't a function. I see no reason for object
methods to behave any differently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 25 07:47:00 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 25 Aug 2000 08:47:00 +0200 (MET DST)
Subject: [Rd] crash using fisher.test on Windows; was [R] unexpected crash of R under (PR#644)
Message-ID: <200008250647.IAA27299@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> On Thu, 24 Aug 2000, Emmanuel Paradis wrote:
> 
> > Dear All,
> >
> > We encountered an unexpected crash with R under Windows when running
> > fisher.test(). We had this problem only under this OS and only with the
> > following data:
> >
> > > T
> >       [,1] [,2]
> >  [1,]    2    1
> >  [2,]    2    1
> >  [3,]    4    0
> >  [4,]    8    0
> >  [5,]    6    0
> >  [6,]    0    0
> >  [7,]    1    0
> >  [8,]    1    1
> >  [9,]    7    1
> > [10,]    8    2
> > [11,]    1    0
> > [12,]    3    1
> > [13,]    1    1
> > [14,]    3    0
> > [15,]    7    2
> > [16,]    4    1
> > [17,]    2    0
> > [18,]    2    0
> > [19,]    2    0
> >
> > The commands:
> >
> > library(ctest)
> > fisher.test(T)
> >
> > result in a crash of R with a system error. (Note that if we change T[19,2]
> > to the value "1", then there is no problem.) The crash occurs with R-1.0.1
> > under Win98, and with R-1.1.1 under WinNT (both with Rgui and with Rterm).
> > However, there is no problem at all under Solaris (tested with R-1.0.1 and
> > R-1.1.0).
> 
> Your pinpointing the blame on the Windows port of R is quite unfair. The
> problem is in your usage of the function: the workspace was too small and
> the code was writing outside it.  It is pure chance that did not affect any
> the other OSes you tried (or was that just one OS?).
> 
> fisher.ctest(T, workspace=1e6) works without crashing on Windows, Solaris
> and Linux here.


I tried with the default of workspace=200000 on WinNT and Solaris. The
crash (Dr. Watson) only happens on WinNT. On Solaris everything works
fine.

Now I tried it using workspace=1000 (too small). On Solaris AND WinNT
the same result:

 > fisher.test(T, workspace=1000)
 Error in fisher.test(T, workspace = 1000) : 
         FEXACT error 40.
 Out of workspace.

This is the error message, I would expect, but not a crash of R!
CC'ing to R-Bugs with modified subject.


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 25 14:20:10 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 25 Aug 2000 15:20:10 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008251320.PAA05152@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >> Dear friends.
    >> 
    >> Is this as expected ? Is alpha and beta too large simply ?
    >> 
    >> > dbeta(.1,534,646)
    >> [1] NaN
    >> Warning message:
    >> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >> dbeta(.25,534,646)
    TL> [1] Inf
yes.
and I see that it is one case where the log-density seems to be alright:

> dbeta(.25,534,646,log=TRUE)
[1] -109.939612

and also for the NaN case :

> dbeta(.1,534,646, log=TRUE)
[1] -480.725168

A workaround is  using   exp( log-density  ), i.e.

  exp(dbeta(x,a,b, log = TRUE)) :

Look at

> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
or
> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

--
I'll have a look.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 15:53:00 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 10:53:00 -0400
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
In-Reply-To: <200008251320.PAA05152@pubhealth.ku.dk>
References: <200008251320.PAA05152@pubhealth.ku.dk>
Message-ID: <39a683e6.3864125@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
message <200008251320.PAA05152@pubhealth.ku.dk>:

>Look at
>
>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

I never knew that plot could take a function!  

Could I make some suggestions?

1.  It should be mentioned more prominently in the documentation.
Since functions aren't a class, I scanned over the list of plot
methods without ever noticing that functions were mentioned there.
I'd suggest modifying the description of parameter x to read:

 x: the coordinates of points in the plot. Alternatively, a
single plotting structure, function or R object with a `plot' method
can be provided.


2.  If xlim is specified and from and to aren't, the from and to
values should default to xlim[1] and xlim[2], not 0 and 1.  

3.  The help for plot.function says:

"This used to be a quick hack which seems to serve a useful
purpose, but can give bad results for functions which are not
smooth."

That doesn't read right:  it makes me ask, "If it used to be a quick
hack, what is it now?"  I'd suggest:

"This function was a quick hack which seems to serve a useful
purpose, but it can give bad results for functions which are not
smooth."


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 25 17:57:50 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 25 Aug 2000 18:57:50 +0200 (CEST)
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <39a683e6.3864125@fisher.stats.uwo.ca>
References: <200008251320.PAA05152@pubhealth.ku.dk>
 <39a683e6.3864125@fisher.stats.uwo.ca>
Message-ID: <14758.42382.735308.898057@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <murdoch@stats.uwo.ca> writes:

    Duncan> On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
    Duncan> message <200008251320.PAA05152@pubhealth.ku.dk>:

    >> Look at
    >> 
    >>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

    Duncan> I never knew that plot could take a function!  
well..

    Duncan> Could I make some suggestions?
sure... no promisses though ;-)

    Duncan> 1.  It should be mentioned more prominently in the documentation.
    Duncan> Since functions aren't a class, I scanned over the list of plot
    Duncan> methods without ever noticing that functions were mentioned there.
    Duncan> I'd suggest modifying the description of parameter x to read:

    Duncan> x: the coordinates of points in the plot. Alternatively, a
    Duncan> single plotting structure, function or R object with a `plot' method
    Duncan> can be provided.

ok, done, thank you.
    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  

good idea,
and easy to implement...  
I would have it as

  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
              and \code{to}.}

(and not give a warning if someone uses  xlim  *and* e.g. `from').

    Duncan> 3.  The help for plot.function says:

    Duncan> "This used to be a quick hack which seems to serve a useful
    Duncan> purpose, but can give bad results for functions which are not
    Duncan> smooth."

    Duncan> That doesn't read right:  it makes me ask, "If it used to be a quick
    Duncan> hack, what is it now?"  I'd suggest:
yes..
    Duncan> "This function was a quick hack which seems to serve a useful
    Duncan> purpose, but it can give bad results for functions which are not
    Duncan> smooth."

"This" was now really implying  both  curve()  and plot.function()  ...

Could I just add one word, "now", to make it

>>    "This used to be a quick hack which now seems to serve a useful purpose,
>>                                        ===
>>     but can give bad results for functions which are not smooth."

--
Thank you,
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 19:10:18 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 14:10:18 -0400
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <14758.42382.735308.898057@gargle.gargle.HOWL>
References: <200008251320.PAA05152@pubhealth.ku.dk> <39a683e6.3864125@fisher.stats.uwo.ca> <14758.42382.735308.898057@gargle.gargle.HOWL>
Message-ID: <39a6b55a.2956059@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 18:57:50 +0200 (CEST), you wrote in message
<14758.42382.735308.898057@gargle.gargle.HOWL>:

>    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
>    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  
>
>good idea,
>and easy to implement...  
>I would have it as
>
>  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
>              and \code{to}.}
>
>(and not give a warning if someone uses  xlim  *and* e.g. `from').

Hmmm, I can see that someone might want both, and have them take
inconsistent values.  Then from and to should control the range of
values graphed, and xlim should control the plotting box.

For example,

  plot(function(x) x^2, xlim=c(-1,1), from=0, to=1)

should do what it does now, i.e. have the x-axis run from -1 to 1, but
only positive x values are graphed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Aug 26 08:41:53 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 26 Aug 2000 09:41:53 +0200 (MET DST)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200008260741.JAA00333@pubhealth.ku.dk>

hi -

i apologize if this is a duplicate.

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

perhaps unrelated but i thought i'd mention: unlist() complains about a
call/formula object, but sapply() does not (a call certainly "looks"
like a list, but includes names at some level).

- peter perkins


$ R --vanilla

> find(list)
[1] "package:base"
> find(unlist)
[1] "package:base"
> list1 <- list(a="a", b="b")
> unlist(list1)
  a   b
"a" "b"
> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b

> mode(list2)
[1] "list"
> mode(unlist(list2))
[1] "list"


--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Aug 26 08:47:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 26 Aug 2000 09:47:59 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008260747.JAA00545@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Aug 27 21:24:00 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 27 Aug 2000 22:24:00 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
Message-ID: <200008272024.WAA05134@pubhealth.ku.dk>

Dear R Team,

# Summary of the problem: setting contrasts as 
   > contrasts(g) <- contr.treatment 
or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
(i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
and fitting an lm model without an intercept results in a model matrix
that lacks one column.

(I do ask for forgiveness if this is not a bug but is due to my
ignorance.)

Many thanks for the extraordinary R.

Rashid Nassar


# Details:

# the data:
x <- gl(3,3)
y <- c(2,4,3,4,5,7,6,5,8)

## 1.  Using the default (treatment) contrasts unchanged gives correct 
       results.

## 2.  Setting contrasts using either of the following two forms also
       gives correct results:

> contrasts(x) <- "contr.treatment"
> contrasts(C(x,contr.treatment))

## 3. However I believe that the following (contr.treatment without quotation
marks) results in a problem (also contrasts(x) <- matrix(c(1,-1,0),ncol=1))
when an intercept is not included in the model:

> contrasts(x) <- contr.treatment 
> f4 <- lm(y ~ x - 1)
> summary(f4)

Coefficients:
   Estimate Std. Error t value Pr(>|t|)
x2    5.333      1.351   3.947  0.00555
x3    6.333      1.351   4.688  0.00224

> anova(f4)
Analysis of Variance Table

Response: y
          Df  Sum Sq Mean Sq F value   Pr(>F)
x          2 205.667 102.833  18.778 0.001537
Residuals  7  38.333   5.476                 

> model.matrix(f4)
  x2 x3
1  0  0
2  0  0
3  0  0
4  1  0
5  1  0
6  1  0
7  0  1
8  0  1
9  0  1

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 28 07:24:04 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 Aug 2000 08:24:04 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008280624.IAA06082@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <200008272024.WAA05134@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:59 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 08:28:59 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#647)
Message-ID: <200008280628.IAA06146@pubhealth.ku.dk>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Aug 28 12:17:48 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Mon, 28 Aug 2000 07:17:48 -0400 (EDT)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
In-Reply-To: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>

Dear Professor Ripley,

Thank you very much for your kind explanation.  If I may lamely say
something in my defence, even as I apologize for my error: I mistook the
sentence "the (quoted) name of a function" to mean "optionally quoted"
because of the parentheses surrounding "quoted", and was encouraged by the
fact that R did not complain when I gave the unquoted form and that it did
implement a change (although not the desired one), and (even more lamely)
the fact that none of the examples on the help page show the function
quoted, although I now realize that in the example the function has an
argument, and is not given simply the name of the function. 

Again, thank you for taking the time to reply and point out my mistake.

Rashid Nassar


On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:

> Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> 
> On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> 
> > Dear R Team,
> > 
> > # Summary of the problem: setting contrasts as 
> >    > contrasts(g) <- contr.treatment 
> > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > and fitting an lm model without an intercept results in a model matrix
> > that lacks one column.
> 
> Right, but first is not allowed by (?contrasts)
> 
>      ctr: either a matrix whose columns give coefficients for contrasts
>           in the levels of `x', or the (quoted) name of a function
>           which computes such matrices.
> 
> and the second is arguably correct: you chose to use only two columns.
> However, the behaviour is different in the development version, 
> which does not code x in models such as this, and so does not
> have the problem.
> 
> That is not precisely what S does, but seems a sane way of interpreting the
> contradictory information given (which is that you don't want an intercept
> and that you only want two columns for the coding matrix for x!  That
> applies to the function case too: there the coding matrix is evaluated
> before knowing if contrast are required, that is using argument contrasts =
> FALSE).
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:26:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>
Message-ID: <Pine.GSO.4.05.10008281225320.6947-100000@auk.stats>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:27:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 13:27:02 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#648)
Message-ID: <200008281127.NAA10878@pubhealth.ku.dk>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 20:38:58 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 15:38:58 -0400
Subject: [Rd] x11 configure test
References: <00082909165800.19652@friedman> <x2hf84m5xd.fsf@blueberry.kubism.ku.dk>
Message-ID: <39AC1152.244E4EBF@bank-banque-canada.ca>

>> the graphics window pops up in 6.3, but not in 6.4
>Sounds like X didn't get configured on the 6.4 box. Might you be
>missing an x11-devel package or some such?
                          ^^^^^^

Well I have Mandrake 7.0 installed on two very similar machines and R
1.1.1 configures with
X11 support      no
Gnome support no
Tcl/Tk support no

on one and

X11 support      yes
Gnome support no
Tcl/Tk support yes

on the other. Both are running X11 and Gnome. I think I was told that
Gnome support has to be specifically indicated to configure, but I don't
understand what is happening to X11 and Tcl/Tk. (Of course, it would't
be the first time I've messed up something re-installing Linux.) I do
think the X11 support test seems a bit too particular about something. I
was actually running X11 when I did the configure that gave "X11 support
no".

BTW, should Linux X11-development be necessary or just X11 support?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 29 21:03:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 29 Aug 2000 13:03:29 -0700 (PDT)
Subject: [Rd] x11 configure test
In-Reply-To: <39AC1152.244E4EBF@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>

On Tue, 29 Aug 2000, Paul Gilbert wrote:

> >> the graphics window pops up in 6.3, but not in 6.4
> >Sounds like X didn't get configured on the 6.4 box. Might you be
> >missing an x11-devel package or some such?
>                           ^^^^^^
> 
> Well I have Mandrake 7.0 installed on two very similar machines and R
> 1.1.1 configures with
> X11 support      no
> Gnome support no
> Tcl/Tk support no
> 
> on one and
> 
> X11 support      yes
> Gnome support no
> Tcl/Tk support yes
> 
> on the other. Both are running X11 and Gnome. I think I was told that
> Gnome support has to be specifically indicated to configure, but I don't
> understand what is happening to X11 and Tcl/Tk. (Of course, it would't
> be the first time I've messed up something re-installing Linux.) I do
> think the X11 support test seems a bit too particular about something. I
> was actually running X11 when I did the configure that gave "X11 support
> no".
> 
> BTW, should Linux X11-development be necessary or just X11 support?

You need x11-development, ie the X11 headers.  Configure does look in
quite a lot of places for both the headers and the libraries.

Tcl/Tk is less dedicated, but you can specify the location quite easily.  
You will have problems if the files have nonstandard names (eg on a
machine here tcl.h is the old version and the new version is tcl8.h, which
doesn't work)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 22:04:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 17:04:20 -0400
Subject: [Rd] x11 support
References: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>
Message-ID: <39AC2554.35E214E9@bank-banque-canada.ca>

>> BTW, should Linux X11-development be necessary or just X11 support?
>You need x11-development, ie the X11 headers.

This may be my problem. As I recall, one of the Linux install questions
is about X11 development. I didn't think of compiling R as X11
development, and I don't do anything else that would require me to
install this.

Perhaps this is relevant to the r-help question about X11 not working
with a recent SuSe install? Unfortunately I deleted that message.

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Wed Aug 30 16:02:15 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)
Subject: [Rd] Bug with tick marks on x-axis.
Message-ID: <200008301502.RAA23982@alpha.luc.ac.be>

Hi,
 I have a dataset where we are trying to model the resistance of
horses' lungs.  One of the covariates is the administered
pressure. This variable is a little odd in the sense that an increase
of pressure corresponds to a "more negative value" of the covariate. A
graph representing the change in resistance in function of the
pressure would be helpful for the biologist. But it should have the
x-axis (pressure) going from positive to negative pressure values to
correspond to an increase in pressure (this representation is clearer
to the biologists).
 Now under Windows 95 and 98 with rw1011, I get a problem with the
tick marks of the x-axis. Here is a small example:

x <- (0:-4)*10
y <- rnorm(5)
plot(x,y,type="l")                  # ok
plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

 I don't know if there is some way to get around this... it might be
easier to just use a previous version of R which does not contain that
bug.
 Thank you for any suggestions,
Patrick.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 30 16:22:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 2000 17:22:04 +0200
Subject: [Rd] Bug with tick marks on x-axis.
In-Reply-To: Patrick Lindsey's message of "Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)"
References: <200008301502.RAA23982@alpha.luc.ac.be>
Message-ID: <x2wvgy4vvn.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:


> plot(x,y,type="l")                  # ok
> plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

>  I don't know if there is some way to get around this... it might be
> easier to just use a previous version of R which does not contain that
> bug.
>  Thank you for any suggestions,

xlim is generally happier if you give it as (min,max) *in that order*.
We're not actually promising that things would work otherwise, are we?

A workaround would be to do the labeling yourself

plot(-x,y,type="l",xlim=c(0,40),axes=F)
box()
axis(1,at=-pretty(x),labels=pretty(x))
axis(2)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Wed Aug 30 23:18:48 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 00:18:48 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
Message-ID: <39AD8848.B272885D@epfl.ch>

Dear Mysql & R users,

first of all a big thanks to the authors of RMySQL.

I got the following table;
mysql> describe UserClick;
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| Field          | Type        | Null | Key | Default | Extra |
Privileges
|
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| UseTransaction | varchar(20) |      |     |         |       |
select,insert,update,references |
| Engine         | varchar(30) |      |     |         |       |
select,insert,update,references |
| URL            | text        |      |     |         |       |
select,insert,update,references |
+----------------+-------------+------+-----+---------+-------+-----------------

I access it via:
rs<-dbExecStatement(con,"SELECT *  from UserClick")
res<-fetch(rs)

Things go wrong withthe URL entry which is of type text;
$Engine
[1] "Armintest" "Test"      "Voila"     
$URL
$URL[[1]]
NULL
...


Any ideas of how I could fix that would be highly appreciated. If it's
not yet
implemented, if you give me a few indications, I would implement it.

Thanks,
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Aug 31 00:06:28 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 30 Aug 2000 18:06:28 -0500
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
In-Reply-To: "Armin S. A. Roehrl"'s message of "Thu, 31 Aug 2000 00:18:48 +0200"
References: <39AD8848.B272885D@epfl.ch>
Message-ID: <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>

>>>>> "Armin" == Armin S A Roehrl <Armin.Roehrl@epfl.ch> writes:

  Armin> Dear Mysql & R users, first of all a big thanks to the
  Armin> authors of RMySQL.

  Armin> I got the following table;
  mysql> describe UserClick;
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | Field | Type | Null | Key | Default | Extra | Privileges |
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | UseTransaction | varchar(20) | | | | |
  Armin> select,insert,update,references | | Engine | varchar(30) | |
  Armin> | | | select,insert,update,references | | URL | text | | | |
  Armin> | select,insert,update,references |
  Armin> +----------------+-------------+------+-----+---------+-------+-----------------

  Armin> I access it via: rs<-dbExecStatement(con,"SELECT * from
  Armin> UserClick") res<-fetch(rs)

  Armin> Things go wrong withthe URL entry which is of type text;
  Armin> $Engine [1] "Armintest" "Test" "Voila" $URL $URL[[1]] NULL
  Armin> ...


  Armin> Any ideas of how I could fix that would be highly
  Armin> appreciated. If it's not yet implemented, if you give me a
  Armin> few indications, I would implement it.

  Armin> Thanks, Armin

We have a newer version of the MySQL package (currently working in S). 
This may solve your problem. I am currently working on another project
but I would do the R port of the latest MySQL package in a few
days.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Thu Aug 31 00:21:04 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 01:21:04 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
References: <39AD8848.B272885D@epfl.ch> <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>
Message-ID: <39AD96E0.9B94E38D@epfl.ch>


> We have a newer version of the MySQL package (currently working in S).
> This may solve your problem. I am currently working on another project
> but I would do the R port of the latest MySQL package in a few
> days.

Brilliant! Looking forward to that.
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Thu Aug 31 06:28:03 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Thu, 31 Aug 2000 07:28:03 +0200 (MET DST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
Message-ID: <200008310528.HAA25038@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.0.1
OS: Windows NT 4 sp 6
Submission from: (NULL) (216.122.46.200)



I'm trying to read in a large matrix (800 x 800 or bigger)
and R prints an error telling me that my rows are not
all the same length.  I've double checked the text file
using gawk and it tells me that they are all the same.

When I pair it down to 247 x 247, then it works, but not
when I have 289 x 289.  I'm guesing that there is some
hardcoded 256 column limit, but I could be wrong.

Otherwise, I'm loving R.  Thank you so much!

Mark



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 31 07:23:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 Aug 2000 07:23:53 +0100 (BST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
In-Reply-To: <200008310528.HAA25038@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008310708570.12521-100000@auk.stats>

On Thu, 31 Aug 2000 r@marksmucker.com wrote:

> Full_Name: Mark Smucker
> Version: 1.0.1
> OS: Windows NT 4 sp 6
> Submission from: (NULL) (216.122.46.200)
> 
> 
> 
> I'm trying to read in a large matrix (800 x 800 or bigger)
> and R prints an error telling me that my rows are not
> all the same length.  I've double checked the text file
> using gawk and it tells me that they are all the same.
> 
> When I pair it down to 247 x 247, then it works, but not
> when I have 289 x 289.  I'm guesing that there is some
> hardcoded 256 column limit, but I could be wrong.

Not that I know of.  But as you want to read a matrix, you will
do much better to use scan to read it as than has less overhead
and allows you to use much shorter lines in the file.  It will
just read consecutive numbers.  As in

A <- matrix(scan("file", what=0), 800, 800, byrow=TRUE)

> Otherwise, I'm loving R.  Thank you so much!

Yours is two versions old now, so please update to 1.1.1.

Here is my test (on 1.1.1 on Windows)

> x <- rnorm(300*300)
> write(x, "file", 300)
> A <- matrix(scan("file", what=0), 300, 300, byrow=TRUE)
> B <- as.matrix(read.table("file"))
> range(A-B)
[1] 0 0

So no limit and no problem. I no longer have a copy of 1.0.1 installed, so
if this is still a problem after you upgrade, can you please re-submit the
bug report with an example that actually fails for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Thu Aug 31 22:52:13 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Thu, 31 Aug 2000 23:52:13 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200008312152.XAA05500@pubhealth.ku.dk>

Full_Name: Kenny Ye
Version: R-1.1.1
OS: Solaris 2.6
Submission from: (NULL) (129.49.6.133)


when i use plot(x,y,axes=F), the axes and the box are still ploted.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Aug  1 07:06:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 1 Aug 2000 16:06:06 +1000
Subject: [Rd] Using the nls package
In-Reply-To: <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>; from ripley@stats.ox.ac.uk on Mon, Jul 31, 2000 at 07:20:32AM +0100
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats>
Message-ID: <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>

On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> 
> How can you be sure?  What are `the same numbers'?  The parameters
> unchanged to machine precision, yes, but that's not what you print.

The only safe way I can think of would be to go for machine precision
as the default and then have some user-settable threshold for:

	( current residual / previous residual )

> > Yes, this is understandable but if most people are like me (questionable
> > assumption I admit) they try a few artificial examples first to get
> > the general idea of how these things work. I guess there is a certain
> > illogical assumption that if I try what seems to me to be an obviously
> > easy problem and it cannot handle it then something must be wrong and
> > trying harder problems is not going to help.
> 
> Perhaps you need to read up on the algorithmic theory so you are not so
> easily confused.  NLS problems with an exact-fit solution are a different
> sub-class with different effective algorithms.

Undoubtably there is a lot more reading that I can do to improve
my understanding. I'm just making a suggestion based on the observation
that the algorithm actually found the right answer very quickly.

> > SQUARES of the modulus of the residuals. Using the modulus itself
> > would be similar to using the absolute value of the residuals in the
> > non-complex case (not what we want I believe).
> 
> Sum of squares is common, and ises for complex linear regression in those
> cases where it makes sense (e.g. in time series regression one
> FFT-ed series on others).

As it turns out, I am working with FFT data, I am looking for a transfer
function that will fit some admittance measurements.

> > In either case, the documentation should mention that complex
> > numbers are not supported.
> 
> Why should documentation mention everything the function does not do? There
> are *lots* of places in R where numeric quantities must be real.  Linear
> regression (lm) for a start.  What nls says is
> 
>  formula: a nonlinear model formula including variables and parameters
> 
> which is none too explicit, but the reference (Bates & Watts) is,
> so I assume you did not read it.

The UTS library does have a copy but it isn't due back till September.

I searched a few of the local bookshops (over the internet) and
Diana Bates (with her children's stories) came up infinitely more often
than Douglas Bates and his regression. I will have to search the
University Co-op bookshop with my hands because the recent introduction of
GST has blown up their webpage.

Douglas, if you are reading this, what say you help me understand the
code in nls.R and nls.c and I'll promise to buy your book (though it could
take me a while to mail-order it in) ?

> A pretty good reasonable assumption is that statistics does not work
> in complexe numbers unless explicitly stated.

Consider also the case for fitting higher dimensional REAL data.
Admittedly, this is a contrived example but you may have an experiment
with one input variable and three output variables. You know from theory
that the output variables are all related to each other by some function
but you need to find particular parameters in that function:

> d <- data.frame( x=1:10 )
> d$y <- eval( expression( outer( x, 1:3 )), d )
> d$y <- d$y + rnorm( length( d$y ))
> library( nls )
> w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
Error in qr.qty(QR, resid) : qr and y must have the same number of rows

If the nls system supported these `wide' problems properly then complex
number support could just be recast as a special case of the same.
>From a mathematical point of view, this sort of regression can be recast
into a normal regression but with more sample points (and each sample
point repeated N times) and with a bogus input variable that gives the
column number. Thus, the same fundamental algorithm must work for both
cases if the structure of the data is suitably munged around.

I've been looking through the code in nls.c and nls.R quite closely and
I can see a lot of stuff which seems to be catering to cases of various
dimensional objects. I cannot fully comprehend what it does and I cannot
get a high dimensional case (such as the above) to work properly.

The crux of it seems to be that qr() needs a matrix to work on
so it uses as.matrix() to coerce its input. If you feed it a vector
you get a column matrix (sounds good), if you feed it a matrix you
have no problem, if you feed it a high dimensional tensor you get
a column vector (which surprised me), and qr() goes with that:

> dim( qr( 1:10 )$qr )
[1] 10  1
> dim( qr( outer( 1:3, 1:5 ))$qr )
[1] 3 5
> dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
[1] 24  1

The result is that the nls model comes to grief when it feeds
the three dimensional tensor into qr() then what it gets back
(i.e. a long, thin column matrix) does not match up with anything.

>  That's why in R
> 
> > sqrt(-1)
> [1] NaN
> Warning message: 
> NaNs produced in: sqrt(-1) 

But sqrt() DOES support complex numbers... so the assumption is that
most users will not expect complex numbers to crop up in their calculations
unless they were deliberately put there, but once deliberatly put there,
they work properly.

I would be happy to see two examples added to the documentation for sqrt,
those being sqrt(-1) and sqrt(-1+0i).

	- Tel



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  1 10:02:05 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 1 Aug 2000 11:02:05 +0200 (MET DST)
Subject: [Rd] anova() on three or more objects behaves inconsistently (PR#621)
Message-ID: <200008010902.LAA18683@pubhealth.ku.dk>

anova() on three or more objects behaves inconsistently in R.

In R anovalist.lm does a sequential ANOVA using pairwise F tests,
ignoring all the other objects, so the larger of the two models
provides the denominator.

In S anova.lmlist uses the denominator from the largest model (smallest
residual df) in the set, as does anova.glmlist in both.

I suggest that R's anovalist.lm is wrong (that might be a matter of opinion
and can certainly be argued), but anovalist.lm and anova.glmlist should
agree.

?anova says in R

     When given a sequence of objects, `anova' tests the models against
     one another in the order specified.

and in S

       When two or more objects are used in the call,  a  similar
       table  is  produced  showing  the  effects of the pairwise
       differences between the  models,  considered  sequentially
       from first to last.

neither of which are clear enough to disambiguate this.


Example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
quine.lo <- aov(log(Days+2.5) ~ 1, quine)
anova(quine.hi, quine.nxt, quine.lo)

quine.hi1 <- glm(log(Days + 2.5) ~ .^4, data=quine)
quine.nxt1 <- update(quine.hi1, . ~ . - Eth:Sex:Age:Lrn)
quine.lo1 <- glm(log(Days+2.5) ~ 1, data=quine)
anova(quine.hi1, quine.nxt1, quine.lo1, test="F")

S:

  Resid. Df      RSS             Test  Df Sum of Sq  F Value     Pr(F) 
1       118  63.3104                                                  
2       120  64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145 106.7871                  -25 -42.68810 3.182542 0.0000131

...

  Resid. Df Resid. Dev             Test  Df  Deviance  F Value     Pr(F) 
1       118    63.3104                                                  
2       120    64.0990 -Eth:Sex:Age:Lrn  -2  -0.78865 0.734957 0.4817083
3       145   106.7871                  -25 -42.68810 3.182542 0.0000131

R:
Analysis of Variance Table

Model 1: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 2: log(Days + 2.5) ~ Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + 
Model 3: log(Days + 2.5) ~ 1
  Res.Df Res.Sum Sq  Df  Sum Sq F value    Pr(>F)
1    118     63.310                              
2    120     64.099  -2  -0.789  0.7350    0.4817
3    145    106.787 -25 -42.688  3.1967 1.148e-05

[The F value and p value are different here.]

...

  Resid. Df Resid. Dev  Df Deviance       F    Pr(>F)
1       118     63.310                               
2       120     64.099  -2   -0.789   0.735    0.4817
3       145    106.787 -25  -42.688   3.183 1.306e-05

As of the current patched version of R anova.glmlist is consistent when
reversing the order of the objects.


Also, the labelling is inconsistent, and for both is not very helpful:

> anova(quine.hi1, quine.nxt1, quine.lo1)
Analysis of Deviance Table 

Response: log(Days + 2.5)
                                                                         Resid. Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        118
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",        120
1                                                                              145
                                                                         Resid. Dev
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      63.310
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",      64.099
1                                                                           106.787
                                                                          Df
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",     
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",   -2
1                                                                        -25
                                                                         Deviance
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",          
c(\"Eth + Sex + Age + Lrn + Eth:Sex + Eth:Age + Eth:Lrn + Sex:Age + \",    -0.789
1                                                                         -42.68

which gives problems later as the row names are not unique.



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = July
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Aug  1 16:03:44 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 01 Aug 2000 10:03:44 -0500
Subject: [Rd] Using the nls package
In-Reply-To: Telford Tendys's message of "Tue, 1 Aug 2000 16:06:06 +1000"
References: <20000731121144.B18822@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10007310708440.10573-100000@auk.stats> <20000801160606.A2033@ftoomsh.progsoc.uts.edu.au>
Message-ID: <6rvgxl9g6n.fsf@franz.stat.wisc.edu>

Telford Tendys <telford@progsoc.uts.edu.au> writes:

> On Mon, Jul 31, 2000 at 07:20:32AM +0100, Prof Brian D Ripley wrote:
> > 
> > How can you be sure?  What are `the same numbers'?  The parameters
> > unchanged to machine precision, yes, but that's not what you print.
> 
> The only safe way I can think of would be to go for machine precision
> as the default and then have some user-settable threshold for:
> 
> 	( current residual / previous residual )

A more common way of defining a criterion like that would be
    (previous RSS - current RSS)/(previous RSS)
if you have ensured that your algorithm cannot increase the RSS
(residual sum-of-squares) from one iteration to the next.

However, any such criterion that is based on the progress of the
iterations, instead of being based solely on the current position as
the orthogonality criterion is, exposes you to the danger of declaring
convergence when the algorithm has not reached the optimum.
B. D. McCullough has written several papers comparing the performance
of different statistical and econometrics packages on test problems,
frequently the test problems called the StRD prepared by NIST, the
National Institute for Standards and Technology in the USA.  (There is
a package called NISTnls on CRAN that contains that data sets for the
nonlinear least squares problems in the StRD.  You can run all those
tests with the shell command 'R CMD check NISTnls' after installing
that package.)  Some of the references by McCullough are

B. D. McCullough (1998), "Assessing the Reliability of Statistical
  Software: Part I", The American Statistician, 52(4), 358-366
B. D. McCullough (1999), "Assessing the Reliability of Statistical
  Software: Part II", The American Statistician, 53(2), 149-159
B. D. McCullough (1999), "Econometric Software Reliability: E-VIEWS,
  LIMDEP, SHAZAM, and TSP", Journal of Applied Econometrics, 14(2),
  191-202.
B. D. McCullough and Berry Wilson (1999), "On the Accuracy of
  Statistical Procedures in Microsoft EXCEL 97", Computational
  Statistics and Data Analysis, 31(1), 27-37.
B. D. McCullough (1999), "Experiences with the StRD: Application and
  Interpretation", in _Computing Science and Statistics_, 31, 16-21.

In that last paper listed above, McCullough writes:
 The StRD has been applied both formally and informally to over a
 dozen of the most popular statistics and econometrics packages, and
 only two of them have not produced nonlinear "solutions" with zero
 digits of accuracy: the statistical package S-PLUS (with analytic
 derivatives) and the econometrics package TSP (which has automatic
 analytic differentiation).

As I had a hand in writing the nls functions for both S-PLUS and R, I
happen to know that the algorithms are similar although the
implementations are quite different.  These functions are not fooled
into declaring convergence prematurely because they use the
orthogonality convergence criterion.

If we were to start introducing all kinds of ad-hoc rules for
declaring convergence in nls, simply to handle those cases of
artificial data that are generated without noise, we would run the
risk of ruining the good behavior of an algorithm that gives a
reliable indication of convergence.

> > > Yes, this is understandable but if most people are like me (questionable
> > > assumption I admit) they try a few artificial examples first to get
> > > the general idea of how these things work. I guess there is a certain
> > > illogical assumption that if I try what seems to me to be an obviously
> > > easy problem and it cannot handle it then something must be wrong and
> > > trying harder problems is not going to help.
> > 
> > Perhaps you need to read up on the algorithmic theory so you are not so
> > easily confused.  NLS problems with an exact-fit solution are a different
> > sub-class with different effective algorithms.
> 
> Undoubtably there is a lot more reading that I can do to improve
> my understanding. I'm just making a suggestion based on the observation
> that the algorithm actually found the right answer very quickly.

> I searched a few of the local bookshops (over the internet) and
> Diana Bates (with her children's stories) came up infinitely more often
> than Douglas Bates and his regression. I will have to search the
> University Co-op bookshop with my hands because the recent introduction of
> GST has blown up their webpage.
> 
> Douglas, if you are reading this, what say you help me understand the
> code in nls.R and nls.c and I'll promise to buy your book (though it could
> take me a while to mail-order it in) ?
> 
> > A pretty good reasonable assumption is that statistics does not work
> > in complexe numbers unless explicitly stated.
> 
> Consider also the case for fitting higher dimensional REAL data.
> Admittedly, this is a contrived example but you may have an experiment
> with one input variable and three output variables. You know from theory
> that the output variables are all related to each other by some function
> but you need to find particular parameters in that function:
> 
> > d <- data.frame( x=1:10 )
> > d$y <- eval( expression( outer( x, 1:3 )), d )
> > d$y <- d$y + rnorm( length( d$y ))
> > library( nls )
> > w <- nls( y ~ I( outer( x, P1 * 1:3 ) + P2 ), d, start=list( P1=3, P2=3 ))
> Error in qr.qty(QR, resid) : qr and y must have the same number of rows
> 
> If the nls system supported these `wide' problems properly then complex
> number support could just be recast as a special case of the same.
> >From a mathematical point of view, this sort of regression can be recast
> into a normal regression but with more sample points (and each sample
> point repeated N times) and with a bogus input variable that gives the
> column number. Thus, the same fundamental algorithm must work for both
> cases if the structure of the data is suitably munged around.

Such "wide" data are also the subject of a considerable amount of
research.  Usually the criterion used for parameter estimation is the
product of the singular values of the residual matrix, not simply the
sum of the squares of the residuals.  There is an entire chapter in
Bates and Watts (1988) devoted to the analysis of such multiresponse
data, including discussion of algorithms.  At present these algorithms
are not implemented in R.

> I've been looking through the code in nls.c and nls.R quite closely and
> I can see a lot of stuff which seems to be catering to cases of various
> dimensional objects. I cannot fully comprehend what it does and I cannot
> get a high dimensional case (such as the above) to work properly.
> 
> The crux of it seems to be that qr() needs a matrix to work on
> so it uses as.matrix() to coerce its input. If you feed it a vector
> you get a column matrix (sounds good), if you feed it a matrix you
> have no problem, if you feed it a high dimensional tensor you get
> a column vector (which surprised me), and qr() goes with that:
> 
> > dim( qr( 1:10 )$qr )
> [1] 10  1
> > dim( qr( outer( 1:3, 1:5 ))$qr )
> [1] 3 5
> > dim( qr( outer( 1:2, outer( 1:3, 1:4 )))$qr )
> [1] 24  1
> 
> The result is that the nls model comes to grief when it feeds
> the three dimensional tensor into qr() then what it gets back
> (i.e. a long, thin column matrix) does not match up with anything.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Aug  2 10:10:39 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008020910.LAA27253@pubhealth.ku.dk>


It is quite tempting to start simple data entry sessions where
you need to type in the data like this:

my.frame<-data.frame(a=numeric(0),b=numeric(0))
fix(my.frame)

(and if factors are involved, that is pretty much what you'd have to do
in order to get the appropriate levels)

However, in the X version, this seems to cause the data editor to
freeze as soon as one hits Enter after inserting data into the
first cell. I haven't tried the Windows version yet.

[This is something it would be nice to have resolved in 1.1.1]

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = Patched
 major = 1
 minor = 1.0
 year = 2000
 month = August
 day = 1
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Aug  2 11:08:11 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Wed, 2 Aug 2000 18:08:11 +0800 (WST)
Subject: [Rd] Installing R-1.1.0 (PR#612)
In-Reply-To: <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
References: <14712.8366.469912.970376@bossiaea.maths.uwa.edu.au>
 <Pine.GSO.4.05.10007211128590.19846-100000@auk.stats>
Message-ID: <14727.62219.589371.855349@bossiaea.maths.uwa.edu.au>

Dear Brian,

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  >> My system is essentially a RedHat 6.0 with a 2.2.10 kernel.
  >> 
  >> I am using the Pentium GCC (http://www.goof.com/pcg/)
  >> 
  >> bossiaea:/opt/R/R-1.1.0$ which gcc /usr/local.own/bin/gcc
  >> bossiaea:/opt/R/R-1.1.0$ gcc --version pgcc-2.91.60

  BDR> I suspect a bug in that compiler, as you had problems with NAs,
  BDR> and that is the only thing that seems different from known
  BDR> working setups.  My suggestion would be to use gcc-2.95.2,
  BDR> which I compiled from source and works well for us on RH6.0.
  BDR> Or even try the compiler that comes with RH6.0 (egcs-2.91.66, I
  BDR> believe).
I finally got around to download the sources of gcc-2.95.2 and
installing it.  R-1.1.0 (and all packages that I install on my system)
compiled with gcc-2.95.2 now pass `make check'.  So I guess your
suspicion was correct.

Thanks for the help.

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:35:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2000 14:35:42 +0200
Subject: [Rd] data editor freeze on empty data frame (PR#622)
In-Reply-To: pd@blueberry.kubism.ku.dk's message of "Wed, 2 Aug 2000 11:10:39 +0200 (MET DST)"
References: <200008020910.LAA27253@pubhealth.ku.dk>
Message-ID: <x2lmyf96xt.fsf@blueberry.kubism.ku.dk>

pd@blueberry.kubism.ku.dk writes:

> However, in the X version, this seems to cause the data editor to
> freeze as soon as one hits Enter after inserting data into the
> first cell. I haven't tried the Windows version yet.

Freezes the windows version as well, it seems. Also, the code for
editing factors using their numeric codes seems to have been broken in
1.1.0 (only converts back to factor if there are invalid levels). I'll
fix the latter.

[I'm also not happy with the code that autoinserts mistyped or
otherwise extraneous factor levels -- if they really are typos,
they'll be a pain to remove if one used fix(my.frame)! That
may be against policy to change in a patch release, though...]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  2 13:55:39 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 2 Aug 2000 14:55:39 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#623)
Message-ID: <200008021255.OAA00687@pubhealth.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> (from R-help)
>     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> 
>     >  > > generated by R into a latex document.  Specifically, the latex package
>     >  > > graphicsx allow you to specify the bounding box of the postscript
>     >  > > file, so that you can just show _part_ of the postscript file if you
>     >  > > tell it to also clip the area outside of the bounding box.
>     > ...
>     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
>     >  > shouldn't do that, one should bracket clipped graphics within
>     >  > gsave/grestore instead. Sounds a bit tricky to get right.
>     > 
>     > Thanks.  To solve my current problem, I changed the definition of the
>     > `cl' operator in the postscript file to:
>     > 
>     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
>     >        4 -1 roll lineto  exch 1 index lineto lineto
>     >        closepath clip grestore newpath } def
>     > 
>     > [i.e. just adding the gsave ... grestore pair]
>     > 
>     > Whether this is the proper solution though is another matter...
> 
>     PD> It isn't. It grestore-s before actually plotting the stuff that
>     PD> needs to be clipped, so effectively you just disabled R's
>     PD> clipping. A better way would be to start the plotting with a "gs"
>     PD> and have
> 
>     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> 	   4 -1 roll lineto  exch 1 index lineto lineto
> 	   closepath clip newpath } def
> 
>     PD> and end everything with a "gr". Not too sure that is perfectly
>     PD> safe, though...
> 
> Are you working on this, Peter?
> Otherwise, "R-bugs" should probably get about the above report..

Done... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug  2 14:10:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 2 Aug 2000 14:10:21 +0100 (BST)
Subject: [Rd] data editor freeze on empty data frame (PR#622)
Message-ID: <200008021310.OAA24728@toucan.stats.ox.ac.uk>


> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] data editor freeze on empty data frame (PR#622)
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 02 Aug 2000 14:35:42 +0200
> 
> pd@blueberry.kubism.ku.dk writes:
> 
> > However, in the X version, this seems to cause the data editor to
> > freeze as soon as one hits Enter after inserting data into the
> > first cell. I haven't tried the Windows version yet.
> 
> Freezes the windows version as well, it seems. Also, the code for
> editing factors using their numeric codes seems to have been broken in
> 1.1.0 (only converts back to factor if there are invalid levels). I'll
> fix the latter.

Found and corrected: an infinite loop in getccol when the length
was zero, of very long standing.

> [I'm also not happy with the code that autoinserts mistyped or
> otherwise extraneous factor levels -- if they really are typos,
> they'll be a pain to remove if one used fix(my.frame)! That
> may be against policy to change in a patch release, though...]

Until the data editor has a mode for factors, the current compromise,
to edit as character, seems the best one to me.  Using cut and paste
helps to eliminate typos.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug  2 17:40:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 2 Aug 2000 18:40:46 +0200 (MET DST)
Subject: [Rd] text( * , xpd = vv )  doesn't work and help(text.default) is wrong (PR#624)
Message-ID: <200008021640.SAA02325@pubhealth.ku.dk>

example(barplot)

calls an example of   text( ... , xpd = NA) 
which *did* work in earlier versions of R till 0.99, but has stopped
working since 1.0.0.
Only the global value, par("xpd"), is used to decide if text is clipped.

A simple example is

  plot(1); text(1,1.44,"BLA", col = "blue", cex = 2, xpd=F)

Also, ?text  doesn't mention the  xpd and 2 other parameters that
text.default explicitly has.

I'm about to try to fix this for 1.1.1
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:39:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
Message-ID: <200008022039.WAA03146@pubhealth.ku.dk>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  2 21:38:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex
 (PR#623)
In-Reply-To: <200008021255.OAA00687@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10008022134410.230-100000@tern.stats>

On Wed, 2 Aug 2000 p.dalgaard@biostat.ku.dk wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > (from R-help)
> >     PD> Stephen Eglen <stephen@cogsci.ed.ac.uk> writes:
> > 
> >     >  > > generated by R into a latex document.  Specifically, the latex package
> >     >  > > graphicsx allow you to specify the bounding box of the postscript
> >     >  > > file, so that you can just show _part_ of the postscript file if you
> >     >  > > tell it to also clip the area outside of the bounding box.
> >     > ...
> >     >  > Ow. This stems from the use of "initclip" in the R-generated PS. One
> >     >  > shouldn't do that, one should bracket clipped graphics within
> >     >  > gsave/grestore instead. Sounds a bit tricky to get right.
> >     > 
> >     > Thanks.  To solve my current problem, I changed the definition of the
> >     > `cl' operator in the postscript file to:
> >     > 
> >     > /cl  { gsave initclip newpath 3 index 3 index moveto 1 index
> >     >        4 -1 roll lineto  exch 1 index lineto lineto
> >     >        closepath clip grestore newpath } def
> >     > 
> >     > [i.e. just adding the gsave ... grestore pair]
> >     > 
> >     > Whether this is the proper solution though is another matter...
> > 
> >     PD> It isn't. It grestore-s before actually plotting the stuff that
> >     PD> needs to be clipped, so effectively you just disabled R's
> >     PD> clipping. A better way would be to start the plotting with a "gs"
> >     PD> and have
> > 
> >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > 	   closepath clip newpath } def
> > 
> >     PD> and end everything with a "gr". Not too sure that is perfectly
> >     PD> safe, though...
> > 
> > Are you working on this, Peter?
> > Otherwise, "R-bugs" should probably get about the above report..
> 
> Done... 

Just to note that ?postscript says

    The postscript produced by R is EPS (Encapsulated PostScript)
    compatible,

yet initclip is not allowed in EPS files (PostScript Language Reference
Manual, 2nd edition).  I think the statement was possibly true once ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  3 16:32:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2000 17:32:39 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 2 Aug 2000 22:39:38 +0200 (MET DST)"
References: <200008022039.WAA03146@pubhealth.ku.dk>
Message-ID: <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > 	   closepath clip newpath } def
> > > 
> > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > >     PD> safe, though...


>     The postscript produced by R is EPS (Encapsulated PostScript)
>     compatible,
> 
> yet initclip is not allowed in EPS files (PostScript Language Reference
> Manual, 2nd edition).  

Exactly. 

> I think the statement was possibly true once ....

I don't think so. This is a design problem.

Unfortunately, the simple fix above doesn't seem to work [for rather
foreseeable reasons]. mosaicplot() seems to crash ghostview and even
plot(1:10) comes out without axis titles. 

The latter item occurs because we're doing

clip(region1)
set font
draw text
clip(region2)
draw more text in same font

but restoring the graphics context prior to the first clipping 
requires the font to be set once again. And there are probably many
similar problems. Sigh. 

Paul, are you around?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Fri Aug  4 00:13:27 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 4 Aug 2000 11:13:27 +1200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <003d01bffda0$6e4fee30$175dd882@stat.auckland.ac.nz>

hi


> > yet initclip is not allowed in EPS files (PostScript Language Reference
> > Manual, 2nd edition).
>
> Exactly.
>
> > I think the statement was possibly true once ....
>
> I don't think so. This is a design problem.
>
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles.
>
> The latter item occurs because we're doing
>
> clip(region1)
> set font
> draw text
> clip(region2)
> draw more text in same font
>
> but restoring the graphics context prior to the first clipping
> requires the font to be set once again. And there are probably many
> similar problems. Sigh.
>
> Paul, are you around?


Yes I'm around (I'm just concealed by my teaching load).  However, I may not
be much help.  This seems to be a problem with the definitions in the
postscript file header (set up in PSFileHeader).  [Trying not to sound like
I'm dodging a bullet ...] I have never delved too deeply into these so I
cannot really comment on their goodness or badness.  AFAIK this is all
pretty original stuff (by Ross ?), but I'm not sure what it was based on.
Something Ross has mentioned to me a couple of times is a library which
allows you to write C-like code which then gets processed into (correct,
efficient) postscript.  Maybe this would be a good solution (i.e., piggyback
on some other code which has got all of the postscript stuff properly sorted
out).  Sorry I can't be more help at this stage.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  4 08:48:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 4 Aug 2000 08:48:03 +0100 (GMT Daylight Time)
Subject: [Rd] binary file access package
Message-ID: <Pine.WNT.4.05.10008040839430.70-100000@tern.stats>

The src/contrib/Devel section on CRAN now has a package Rstreams for binary
file access, and there is also a pre-compiled Windows version on CRAN.

This was originally written by Duncan Murdoch using Delphi and the compiled
code has been re-written by me in C.  One of the demo applications included
is reading S binary objects (data objects, not language objects
such as functions) into R.

The main reason this is in Devel is that it should probably interact with
planned developments on file access (`connections') for future R versions.
It has a configure script, and runs on Solaris, Linux and Windows at least.

Future plans include the ability to read S's data.dump files.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  4 16:45:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2000 17:45:42 +0200
Subject: [Rd] Re: [R] problem clipping R postscript plots within latex (PR#625)
In-Reply-To: Peter Dalgaard BSA's message of "03 Aug 2000 17:32:39 +0200"
References: <200008022039.WAA03146@pubhealth.ku.dk> <x2hf92bbs8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2u2d158t5.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > > >     /cl  { gr gs newpath 3 index 3 index moveto 1 index
> > > > 	   4 -1 roll lineto  exch 1 index lineto lineto
> > > > 	   closepath clip newpath } def
> > > > 
> > > >     PD> and end everything with a "gr". Not too sure that is perfectly
> > > >     PD> safe, though...
...
> 
> Unfortunately, the simple fix above doesn't seem to work [for rather
> foreseeable reasons]. mosaicplot() seems to crash ghostview and even
> plot(1:10) comes out without axis titles. 

However, fixing the font issue seems to have done the trick. Fix
committed to the development branch (to become R 1.2). I'm not
trusting that fix enough to let it go into 1.1.1.

Here's the patch in case someone needs it:


$ cvs diff -ur 1.29 src/main/devPS.c
Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.29
retrieving revision 1.30
diff -u -r1.29 -r1.30
--- src/main/devPS.c    2000/06/27 22:26:19     1.29
+++ src/main/devPS.c    2000/08/04 15:35:33     1.30
@@ -549,10 +549,10 @@
     fprintf(fp, "/gs  { gsave } def\n");
     fprintf(fp, "/gr  { grestore } def\n");
     if (landscape)
-       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate} def\n", paperwidth);
+       fprintf(fp, "/bp  { gs %.2f 0 translate 90 rotate gs } def\n", paperwidth);
     else
-       fprintf(fp, "/bp  { gs } def\n");
-    fprintf(fp, "/ep  { showpage gr } def\n");
+       fprintf(fp, "/bp  { gs gs } def\n");
+    fprintf(fp, "/ep  { showpage gr gr } def\n");
     fprintf(fp, "/m   { moveto } def\n");
     fprintf(fp, "/l   { lineto } def\n");
     fprintf(fp, "/np  { newpath } def\n");
@@ -569,7 +569,7 @@
     fprintf(fp, "       ps mul neg 0 2 1 roll rmoveto\n");
     fprintf(fp, "       1 index stringwidth pop\n");
     fprintf(fp, "       mul neg 0 rmoveto show grestore } def\n");
-    fprintf(fp, "/cl  { initclip newpath 3 index 3 index moveto 1 index\n");
+    fprintf(fp, "/cl  { gr gs newpath 3 index 3 index moveto 1 index\n");
     fprintf(fp, "       4 -1 roll lineto  exch 1 index lineto lineto\n");
     fprintf(fp, "       closepath clip newpath } def\n");
     fprintf(fp, "/rgb { setrgbcolor } def\n");
@@ -1133,6 +1133,8 @@
     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 
     PostScriptSetClipRect(pd->psfp, x0, x1, y0, y1);
+    /* clipping does grestore so invalidate current font */
+    pd->fontsize = -1; 
 }
 
 static void PS_Resize(DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Aug  4 17:37:33 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 4 Aug 2000 18:37:33 +0200 (MET DST)
Subject: [Rd] Inverting matrix...
Message-ID: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>

Dear all,

Either I'm being totally blind now (as you know, the eyes are the first
thing that is blinded :-)), or something is missing in 
"An Introduction to R". The section heading of section 5.7.1 is
"Multiplication, inversion and solving linear equations", and since I was
looking for the canonical way of inverting a matrix, this was the place to
look. However, I found that solve() was not mentioned, I found that
strange... Was something forgotten here? :-)

I found the answer to my question in V&R, so don't be bothered about that,
but I thought you'd like to be told when things are unclear in the docs.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Aug  6 16:08:09 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 6 Aug 2000 23:08:09 +0800 (GMT-8)
Subject: [Rd] make pkg on windows NT
Message-ID: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>

Hi,

I am trying to compile a package i am developing on my home computer where
i am running Windows NT 4.0 service pack 6. Everything works fine on my
other computer at work running windows 98.

I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
version 2.95.2-1
installed seperately and first in the path. I have active perl 6.16 
as well. Here is the error I get when i run the make pkg-  script from the
gnuwin32 directory

bash-2.03$ make DEBUG=T pkg-maptools
make DLLNM=  EXTRADOCS= \
  -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
RLIB=
c:/Rnew/rw1010/library \
  -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
Syntax error: Unterminated quoted string
make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
make: *** [pkg-maptools] Error 2

also here is my R version info
$platform
[1] "Windows"
$arch
[1] "x86"
$os
[1] "Win32"
$system
[1] "x86, Win32"
$status
[1] ""
$major
[1] "1"
$minor
[1] "1.0"
$year
[1] "2000"
$month
[1] "June"
$day
[1] "15"
$language
[1] "R"


Oh and one last Question, I noted on Dr. Ripley's RTools page that he
recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
version. I have not noticed any problems yet with other stuff i have
compiled, are there any problems dynamically linking code built with the
other version that I am unaware Of?

thanks
Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  6 17:41:14 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 6 Aug 2000 17:41:14 +0100 (BST)
Subject: [Rd] make pkg on windows NT
In-Reply-To: <Pine.GSO.4.21.0008062250020.27384-100000@sununx.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.05.10008061738160.6687-100000@auk.stats>

On Sun, 6 Aug 2000, Nicholas Lewin-Koh wrote:

> Hi,
> 
> I am trying to compile a package i am developing on my home computer where
> i am running Windows NT 4.0 service pack 6. Everything works fine on my
> other computer at work running windows 98.
> 
> I am using the cygwin 1.1 bash shell and tolls with the MingW compiler,
> version 2.95.2-1
> installed seperately and first in the path. I have active perl 6.16 
> as well. Here is the error I get when i run the make pkg-  script from the
> gnuwin32 directory
> 
> bash-2.03$ make DEBUG=T pkg-maptools
> make DLLNM=  EXTRADOCS= \
>   -C c:/Rnew/rw1010/src/library/maptools PKG=maptools RHOME=c:/Rnew/rw1010
> RLIB=
> c:/Rnew/rw1010/library \
>   -f c:/Rnew/rw1010/src/gnuwin32/MakePkg
> make[1]: Entering directory `c:/Rnew/rw1010/src/library/maptools'
> Syntax error: Unterminated quoted string
> make[1]: *** [c:/Rnew/rw1010/library/maptools/zzzz] Error 2
> make[1]: Leaving directory `c:/Rnew/rw1010/src/library/maptools'
> make: *** [pkg-maptools] Error 2

That means that you have the wrong make and/or the wrong sh.  You need the
set in the tools distribution: certain Cygwin ones work but most do not. We
find it very frustrating too.


> Oh and one last Question, I noted on Dr. Ripley's RTools page that he
> recommends MingW 2.95.2-1 the crtdll version rather than the msvrt
> version. I have not noticed any problems yet with other stuff i have
> compiled, are there any problems dynamically linking code built with the
> other version that I am unaware Of?

Yes. It won't work on many Windows 95 machines, as that page says.
If that is not an issue for you, by all means use the msvcrt version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug  7 06:15:06 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 Aug 2000 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008070515.HAA08465@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 611 *
Subject: bug in loess
From: hdrees@statlab.uni-heidelberg.de
Date: Wed, 19 Jul 2000 17:47:04 +0200 (MET DST)
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 584 *
Subject: par(lty = "1") -- lty storage-etc bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 27 Jun 2000 09:11:36 +0200 (CEST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 612 *
Subject:  Installing R-1.1.0 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Thu, 20 Jul 2000 14:50:21 +0800
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400

Directory:  Language

* PR# 589 *
Subject: Bug with lists and expressions
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 04 Jul 2000 02:26:41 GMT
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 608 *
Subject: seg.fault in eval.c
From: Adrian Vance Custer <acuster@nopause.berkeley.edu>
Date: Sat, 15 Jul 2000 01:22:23 -0700
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 621 *
Subject: anova() on three or more objects behaves inconsistently
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 1 Aug 2000 10:02:18 +0100 (BST)
* PR# 600 *
Subject: Faulty handling of aliasing in predict.lm; wrong constant
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 12 Jul 2000 14:46:56 +1000

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
* PR# 615 *
Subject: binomial()
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 18:11:17 -0400
* PR# 614 *
Subject: scoping problems
From: halvorsen <kjetilh@umsanet.edu.bo>
Date: Mon, 24 Jul 2000 17:48:49 -0400
* PR# 618 *
Subject: min(c()) = inf ???
From: Peter Malewski <y0004379@tu-bs.de>
Date: Wed, 26 Jul 2000 13:57:32 +0200 (METDST)
* PR# 617 *
Subject: Bug in stem?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Wed, 26 Jul 2000 11:28:04 +0200
* PR# 622 *
Subject:  data editor freeze on empty data frame 
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Wed, 2 Aug 2000 11:17:04 +0200
* PR# 619 *
Subject: Re: [R] gremlin in rep()
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Fri, 28 Jul 2000 08:20:21 -0700 (PDT)
* PR# 624 *
Subject: text( * , xpd = vv )  doesn't work and help(text.default) is wrong
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 2 Aug 2000 18:40:54 +0200 (CEST)
* PR# 623 *
Subject: Re: [R] problem clipping R postscript plots within latex
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 02 Aug 2000 15:01:52 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  7 13:54:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Aug 2000 14:54:08 +0200 (CEST)
Subject: [Rd] Inverting matrix...
In-Reply-To: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
References: <Pine.OSF.4.05.10008041822240.17820-100000@alnair.uio.no>
Message-ID: <14734.45424.235538.710068@gargle.gargle.HOWL>

>>>>> "Kjetil" == Kjetil Kjernsmo <kjetil.kjernsmo@astro.uio.no> writes:

    Kjetil> Dear all, Either I'm being totally blind now (as you know, the
    Kjetil> eyes are the first thing that is blinded :-)), or something is
    Kjetil> missing in "An Introduction to R". The section heading of
    Kjetil> section 5.7.1 is "Multiplication, inversion and solving linear
    Kjetil> equations", and since I was looking for the canonical way of
    Kjetil> inverting a matrix, this was the place to look. However, I
    Kjetil> found that solve() was not mentioned, I found that
    Kjetil> strange... Was something forgotten here? :-)

    Kjetil> I found the answer to my question in V&R, so don't be bothered
    Kjetil> about that, but I thought you'd like to be told when things are
    Kjetil> unclear in the docs.

Thanks a lot Kjetil!

I've just committed a fix to this "documentation bug" for R 1.1.1, i.e.
R-release/patched

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 19:43:38 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
Message-ID: <200008071843.UAA03236@pubhealth.ku.dk>

predict.lm has been broken by recent changes to the patched branch.

It fails for all singular fits.  An example:

library(MASS)
data(quine)
quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
predict(quine.nxt)
  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
 81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 
 NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
141 142 143 144 145 146 
 NA  NA  NA  NA  NA  NA 

The answeer should be (e.g. R 1.1.0)

> predict(quine.nxt)
      1       2       3       4       5       6       7       8 
2.19247 2.19247 2.19247 2.68311 2.68311 2.68311 2.68311 2.68311 
      9      10      11      12      13      14      15      16 
2.37260 2.37260 2.37260 2.53960 2.53960 3.53516 3.53516 3.53516 
     17      18      19      20      21      22      23      24 
3.53516 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 3.24298 
     25      26      27      28      29      30      31      32 
3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 3.31368 2.03746 
...

I believe this is a lot worse than that which the changes were intended to
fix. (Are we not supposed to be ultra-cautious about not making things
worse in that branch?)

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
status   Patched             
major    1                   
minor    1.0                 
year     2000                
month    August              
day      7                   
language R                   

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 20:30:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 21:30:43 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#626)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Mon, 7 Aug 2000 20:43:38 +0200 (MET DST)"
References: <200008071843.UAA03236@pubhealth.ku.dk>
Message-ID: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> predict.lm has been broken by recent changes to the patched branch.
> 
> It fails for all singular fits.  An example:
> 
> library(MASS)
> data(quine)
> quine.hi <- aov(log(Days + 2.5) ~ .^4, quine)
> quine.nxt <- update(quine.hi, . ~ . - Eth:Sex:Age:Lrn)
> predict(quine.nxt)
>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 
>  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 
...
> I believe this is a lot worse than that which the changes were intended to
> fix. (Are we not supposed to be ultra-cautious about not making things
> worse in that branch?)

Sometimes the fix for one bug uncovers another. We have

> coef.aov
function (object, ...) 
{
    z <- object$coef
    z[!is.na(z)]
}
> coef.lm 
function (object, ...) 
object$coefficients

and both of these cannot be right when predict.lm calls coef(object)
and object$coefficients contains NA's. Using object$coefficients
inside predict.lm fixes things, but I'm still not happy with the two
different conventions for coef...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:18 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
Message-ID: <200008071958.VAA03515@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug  7 20:58:22 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 7 Aug 2000 12:58:22 -0700 (PDT)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#626)
In-Reply-To: <x2n1iouavw.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0008071248130.17749-100000@atlas.biostat.washington.edu>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > predict.lm has been broken by recent changes to the patched branch.
> > 
> > It fails for all singular fits.  An example:
<snip>
> Sometimes the fix for one bug uncovers another. We have
> 
> > coef.aov
> function (object, ...) 
> {
>     z <- object$coef
>     z[!is.na(z)]
> }
> > coef.lm 
> function (object, ...) 
> object$coefficients

Ok, this explains it.  I *did* test it with a singular fit, but only with
lm(), not with aov().

coef.lm seems a more sensible convention, since it's a lot easy to remove
the NAs than to add them.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  7 22:06:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2000 23:06:56 +0200
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#627)
In-Reply-To: thomas@biostat.washington.edu's message of "Mon, 7 Aug 2000 21:58:18 +0200 (MET DST)"
References: <200008071958.VAA03515@pubhealth.ku.dk>
Message-ID: <x2og34232n.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> > > coef.aov
> > function (object, ...) 
> > {
> >     z <- object$coef
> >     z[!is.na(z)]
> > }
> > > coef.lm 
> > function (object, ...) 
> > object$coefficients
> 
> Ok, this explains it.  I *did* test it with a singular fit, but only with
> lm(), not with aov().
> 
> coef.lm seems a more sensible convention, since it's a lot easy to remove
> the NAs than to add them.

I've committed a fix for predict.lm to use object$coefficients
directly, but I haven't done anything with the coef() methods.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 7 Aug 2000 23:41:49 +0200 (MET DST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7) (PR#628)
Message-ID: <200008072141.XAA03887@pubhealth.ku.dk>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  7 22:41:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
Subject: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
 (PR#627)
In-Reply-To: <x2og34232n.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10008072237330.18074-100000@auk.stats>

On 7 Aug 2000, Peter Dalgaard BSA wrote:

> thomas@biostat.washington.edu writes:
> 
> > > > coef.aov
> > > function (object, ...) 
> > > {
> > >     z <- object$coef
> > >     z[!is.na(z)]
> > > }
> > > > coef.lm 
> > > function (object, ...) 
> > > object$coefficients
> > 
> > Ok, this explains it.  I *did* test it with a singular fit, but only with
> > lm(), not with aov().
> > 
> > coef.lm seems a more sensible convention, since it's a lot easy to remove
> > the NAs than to add them.
> 
> I've committed a fix for predict.lm to use object$coefficients
> directly, but I haven't done anything with the coef() methods.

As far as I recall coef.aov is different for easier compatibility with S
output: coef.lm is definitely not compatible.  I think there should
probably be a distinction between the raw information in the object and the
information given by the coef accessor function, and each has its place.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Aug  8 06:11:19 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 8 Aug 2000 15:11:19 +1000
Subject: [Rd] New code -- genetic algorithm curve fitting (supports complex numbers)
Message-ID: <20000808151119.A22606@ftoomsh.progsoc.uts.edu.au>

OK, here is some code that may be of use to someone:

http://www.progsoc.uts.edu.au/~telford/samples/R/gafit_0.1.tar.gz

Hopefully it might make contrib status on CRAN :-)

It uses a genetic algorithm to seek the lowest value of some
user-defined target function (or seeks the most negative value if negative 
values are possible). By using a sum of squared residuals for the target
function, it supports least square nonlinear regression.

Any comments welcome, the algorithm is completely thrown together
out of my head (in about three days) but I have written genetic
algorithms before, the same ideas can be found elsewhere.

If you have an optimisation problem, you should be able to apply
my code to it within half an hour or so because it doesn't require
much knowledge to use. I would be interested if anyone can find a
problem that crashes it. I'm sure that there are many problems for
which it will get something roughly reasonable but not quite right --
this is in the nature of a stocastic search <shrug>. The user has
some control over ``thermal'' noise so setting that to a small value
can help squeeze a bit more accuracy out of it.

----------------------------------------------------------------------

I did finally bludgeon nls into complex number support,
I intend to release the patches to make this work but it is not
particularly elegant -- it just converts EVERYTHING that goes
through the target function into a vector of reals. Thus it does
handle wide data and complex numbers but it treats them all by
just breaking them down into individual reals and squaring the
residuals.

Sadly, when I finally did get it working it still didn't do what
I wanted because my function kept stopping with stepsize being
reduced below the minimum. On close analysis, I decided that the
nls function will stall in a local minimum if it follows the
gradient into such a minimum and then just keeps reducing its
step size until it halts with an error. This does seem to imply that
a large number of model functions will not work with nls
until a suitably close starting value can be found.

My genetic algorithm code may provide one method to find such
values that are somewhere close to a good fit.

	- Tel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  9 19:20:07 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Aug 2000 20:20:07 +0200 (CEST)
Subject: [Rd] GenGC changes
Message-ID: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>

As most R developers maybe are already aware of, R version 1.2.0
introduced a new `generational' garbage collector which means that
strings and vectors (and language objects) are handled differently from
the numerical atomic types.

>From ``Writing R Extensions'':

       Earlier code was written in a style like.
           VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
    but that is no longer allowed.  The functions `VECTOR_ELT' and
    `SET_VECTOR_ELT' must now be used to access and set elements of a
    generic vector.  There are analogous functions `STRING_ELT' and
    `SET_STRING_ELT' for character vectors.
    
       To convert existing code, use the following replacements.
    
         original                 replacement
         `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
         `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
         `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
         `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

The changes were committed to the r-devel true this Monday, and imply
that add-on packages using the original coding style will no longer work
with current versions of r-devel.  One possible solution for having
packages with sources which work for compilation under both 1.1 and 1.2
is to use conditionals of the form

    #if R_VERSION >= R_Version(1, 2, 0)
	new-style-code
    #else
	old-style-code
    #endif

I would like to ask add-on package maintainers of packages which are
affected by the change to produce updated versions of their packages
which work under both 1.1 and 1.2.  It seems that the following ones
require action:

	Java
	Matrix
	RMySQL
	RODBC
	foreign
	hdf5
	netCDF
	stataread

(Note that [currently], there is binary incompatibility between 1.1 and
1.2.)

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:25:46 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:25:46 -0600
Subject: [Rd] Circles on all R devices
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A0@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE);

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00240.001284B0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>Circles on all R devices</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E);</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00240.001284B0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:37 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:33:37 -0600
Subject: [Rd] circles overshoot
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A2@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:33:23 2000
From: valerio.aimale@biosgroup.com (valerio.aimale@biosgroup.com)
Date: Wed, 9 Aug 2000 22:33:23 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092033.WAA22498@pubhealth.ku.dk>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/plain;
	charset="iso-8859-1"


Anyone ever tried to

plot(c(1.0,0,2),c(1.0,0,2));
symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?

Why does the circle overshoot ?

The problem is the same on all devices (even with my pictex, which needs a
lot of refurbishing), so I'd think it's something upstream to the devices
code. 

Thanks,

Valerio.

(R-1.1.0 on Linux)

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00241.18831EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE>circles overshoot</TITLE>
</HEAD>
<BODY>
<BR>

<P><FONT SIZE=3D2>Anyone ever tried to</FONT>
</P>

<P><FONT SIZE=3D2>plot(c(1.0,0,2),c(1.0,0,2));</FONT>
<BR><FONT =
SIZE=3D2>symbols(c(1.0),c(1.0),circles=3D(c(1.0)),inch=3DFALSE,add=3DTRU=
E); #?</FONT>
</P>

<P><FONT SIZE=3D2>Why does the circle overshoot ?</FONT>
</P>

<P><FONT SIZE=3D2>The problem is the same on all devices (even with my =
pictex, which needs a lot of refurbishing), so I'd think it's something =
upstream to the devices code. </FONT></P>

<P><FONT SIZE=3D2>Thanks,</FONT>
</P>

<P><FONT SIZE=3D2>Valerio.</FONT>
</P>

<P><FONT SIZE=3D2>(R-1.1.0 on Linux)</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00241.18831EF0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From valerio.aimale@biosgroup.com  Wed Aug  9 21:51:18 2000
From: valerio.aimale@biosgroup.com (Valerio Aimale)
Date: Wed, 9 Aug 2000 14:51:18 -0600
Subject: No subject
Message-ID: <CD62E40B9F85D3118C490060B08744EF6BE3A3@ftp.biosgroup.com>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/plain;
	charset="iso-8859-1"

sorry for the multiple postings

---
Valerio Aimale
Scientist                       direct: 505.992.6741
Bios Group LP                     main: 505.992.6700
317 Paseo de Peralta               fax: 505.988.2229
Santa Fe, New Mexico 87501
USA 

------_=_NextPart_001_01C00243.90D7CCA0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2652.35">
<TITLE></TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>sorry for the multiple postings</FONT>
</P>

<P><FONT SIZE=3D2>---</FONT>
<BR><FONT SIZE=3D2>Valerio Aimale</FONT>
<BR><FONT =
SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; direct: 505.992.6741</FONT>
<BR><FONT SIZE=3D2>Bios Group =
LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main: =
505.992.6700</FONT>
<BR><FONT SIZE=3D2>317 Paseo de =
Peralta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; fax: 505.988.2229</FONT>
<BR><FONT SIZE=3D2>Santa Fe, New Mexico 87501</FONT>
<BR><FONT SIZE=3D2>USA </FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C00243.90D7CCA0--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  9 22:44:02 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 9 Aug 2000 23:44:02 +0200 (MET DST)
Subject: [Rd] circles overshoot (PR#629)
Message-ID: <200008092144.XAA22670@pubhealth.ku.dk>

valerio.aimale@biosgroup.com writes:

> Anyone ever tried to
> 
> plot(c(1.0,0,2),c(1.0,0,2));
> symbols(c(1.0),c(1.0),circles=(c(1.0)),inch=FALSE,add=TRUE); #?
> 
> Why does the circle overshoot ?
> 
> The problem is the same on all devices (even with my pictex, which needs a
> lot of refurbishing), so I'd think it's something upstream to the devices
> code. 

Because the *plotting region* is not square... Try resizing the plot
window and you'll see the effect quite clearly.

> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
> <HTML>
....
> SIZE=3D2>Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
> &nbsp; direct: 505.992.6741</FONT>
> <BR><FONT SIZE=3D2>Bios Group =
> LP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=

Ahem. There are ways to turn that stuff off, you know....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Aug 10 02:23:26 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 10 Aug 2000 09:23:26 +0800 (GMT-8)
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0008100916420.17875-100000@sununx.comp.nus.edu.sg>


Hi,
I just completed a package for reading and writing dbf files, that I will
post soon so i will definately be affected since I used mostly the c
api. Would the option below mean that there would be macros defined in say
R.internals to have old style behave as new style, or would it be prefered
that maintainers write seperate routines for new and old versions. I am
imagining quite a bit of code bloat.

Nicholas

> 
>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif
> 
> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:
> 
> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread
> 
> (Note that [currently], there is binary incompatibility between 1.1 and
> 1.2.)
> 
> -k
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Aug 10 14:11:56 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 10 Aug 2000 15:11:56 +0200 (MET DST)
Subject: [Rd] lda and svd error (PR#630)
Message-ID: <200008101311.PAA01082@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII


For a matrix A:

> A
            [,1]       [,2]
 [1,] -2.4491897  0.2345687
 [2,]  0.1530018 -0.5513182
 [3,] -1.3877140  1.0925618
 [4,]  0.5521078  0.7036401
 [5,]  0.4744903 -1.0868091
 [6,] -0.4296282  0.3931673
 [7,] -0.2413387 -0.7461586
 [8,]  1.0567564 -1.1807899
 [9,]  0.7903647  0.8294825
[10,]  1.6456857 -0.2484038
[11,] -1.1795527 -0.6904602
[12,]  2.6470244  0.7050178
[13,]  1.8169865 -0.1057402
[14,]  1.9720294 -0.1091834

and groupings [1] 0 0 0 0 0 0 0 1 1 1 1 1 1 1

> library(MASS)
> lda(A, groupings)
Error in svd(X, nu = 0) : error  2  in dsvdc

is reported. This is hard to reproduce on other machines, even 

> write.table(A, "dummy")
> B <- as.matrix(read.table("dummy"))
> lda(B, groupings)

on the same machine works fine. I add my .RData file renamed 
as DataR (maybe this can help to reproduce the error). The error occured
during a simulation, I added the sources as "svderr.R".

Torsten

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

--1133331701-1931357602-965913218=:3057
Content-Type: APPLICATION/octet-stream; name=DataR
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513380.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename=DataR

UkRYMQoAAAAFAAAAAAAAAAMAAAADZGltAAAAAAEAAAABQQAAAAAAAAgAAAAI
Z3JvdXBpbmcAAAAMAAAADC5SYW5kb20uc2VlZAAAAAoAAAAKLlRyYWNlYmFj
awAAAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABf////8AAAACAAAAAAAA
AAD/////AAAAEAAAAAAAAAAAAAAAAQAAACoAAAAqc3RvcChwYXN0ZSgiZXJy
b3IgIiwgeiRpbmZvLCAiIGluIGRzdmRjIikpAAD/////AAAAAgAAAAAAAAAA
/////wAAABAAAAAAAAAAAAAAAAEAAAAOAAAADnN2ZChYLCBudSA9IDApAAD/
////AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAYAAAAGGxk
YS5kZWZhdWx0KEEsIGdyb3VwaW5nKf////8AAAACAAAAAAAAAAD/////AAAA
EAAAAAAAAAAAAAAAAQAAABEAAAARTmV4dE1ldGhvZCgibGRhIikAAAD/////
AAAAAgAAAAAAAAAA/////wAAABAAAAAAAAAAAAAAAAEAAAAXAAAAF2xkYS5t
YXRyaXgoQSwgZ3JvdXBpbmcpAP////8AAAACAAAAAAAAAAD/////AAAAEAAA
AAAAAAAAAAAAAQAAABAAAAAQbGRhKEEsIGdyb3VwaW5nKf//////////////
////////////////////////////AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAA
AAAABP////8AAAANAAAAAAAAAAAAAAADAAAAASGIE+ETc44V/////wAAAAIA
AAAAAAAAAAAAAAEAAAAAAAAAAAAAAAP/////AAAADgAAAAAAAAAAAAAADgAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAP/AAAAAAAAA/8AAAAAAAAD/wAAAAAAAAP/AAAAAAAAA/8AAA
AAAAAD/wAAAAAAAAP/AAAAAAAAD/////AAAAAgAAAAAAAAAAAAAAAQAAAAAA
AAAAAAAAAv////8AAAAOAAAAAAAAAAAAAAAcwAOX8MHIaeA/w5WQE34/vb/2
NBOMsXdCP+Gq3gvUFnM/3l4MaikJlL/bfwcqUk/Gv87kL9G6OKo/8Oh5XMER
GD/pSqrXVI3mP/pUuo1+UDG/8t9ys0UCeEAFLRsm5nqQP/0SYHbpeIM//41u
ti/9pT/OBliWQmStv+GkZimVGgA/8XsiHJT4IT/mhDhKsAtrv/FjkfP5/5w/
2SmnFC117r/n4IgDNauUv/Lkg+5c7Wg/6ose7jvUyb/Py7Hhj7m3v+YYP/an
MfY/5o+BfEI5N7+7Ecl7N0bPv7vzcZLmB6UAAAACAAAAAAAAAAAAAAABAAAA
AAAAAAAAAAAB/////wAAAA0AAAAAAAAAAAAAAAIAAAAOAAAAAv//////////
////////////////////////////////
--1133331701-1931357602-965913218=:3057
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="svderr.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0008101513381.3057@artemis.imbe.med.uni-erlangen.de>
Content-Description: 
Content-Disposition: attachment; filename="svderr.R"

bGlicmFyeShNQVNTKQ0KDQpTU2xkYSA8LSBmdW5jdGlvbihYLCBZLCBxKQ0K
ew0KCW1YIDwtIHJlcCgxLCBucm93KFgpKSUqJXQoYXBwbHkoWCwgMiwgbWVh
bikpDQoJbVkgPC0gcmVwKDEsIG5yb3coWSkpJSoldChhcHBseShZLCAyLCBt
ZWFuKSkNCglYIDwtIHJiaW5kKFgsWSkNCglteCA8LSByYmluZChtWCwgbVkp
DQoJWCA8LSBYIC0gbXggDQogCVcgPC0gKHQoWCklKiVYKQ0KICAgICAgICBl
ZyA8LSBlaWdlbihzb2x2ZShkaWFnKGRpYWcoVykpKSUqJVcpDQoJcSA8LSBs
ZW5ndGgoZWckdmFsdWVzW2VnJHZhbHVlcyA+IDFdKQ0KICAgICAgICBEIDwt
IGVnJHZlY3RvcnNbLDE6cV0NCgkjIEQgPC0gMS9zcXJ0KGRpYWcoVykpDQoJ
cmV0dXJuKEQpDQp9DQoNCkVycm9yUmF0ZSA8LSBmdW5jdGlvbihkaXNjcmlt
LCBuKQ0Kew0KCWZvbmUgPC0gc3VtKGFzLmludGVnZXIoZGlzY3JpbVsxOm5d
KS0xKS9uDQoJZm51bGwgPC0gKG4gLSBzdW0oYXMuaW50ZWdlcihkaXNjcmlt
WyhuKzEpOigyKm4pXSktMSkpL24NCgkjIGNhdCgiZm51bGw6ICIsIGZudWxs
LCAiIGZvbmUgIiwgZm9uZSwgIlxuIikgDQoJKGZudWxsICsgZm9uZSkvMg0K
fQ0KDQpzaW0xIDwtIGZ1bmN0aW9uKE4sbSxuLCBtdTAsIG11MSwgUykNCnsN
CgllcnJTdGFuZCA8LSBjKCkNCgllcnJTUyA8LSBjKCkNCg0KCWZvciAoaSBp
biAxOk4pDQoJew0KCQlsZWFyblggPC0gbXZybm9ybShtLCBtdTAsIFMpDQoJ
CWxlYXJuWSA8LSBtdnJub3JtKG0sIG11MSwgUykNCgkJZ3JvdXBpbmcgPC0g
YyhyZXAoMCwgbSksIHJlcCgxLCBtKSkNCgkJbGRhU3RhbmQgPC0gbGRhKHJi
aW5kKGxlYXJuWCwgbGVhcm5ZKSwgZ3JvdXBpbmcpDQoJCUQgPC0gU1NsZGEo
bGVhcm5YLCBsZWFyblksIDQpDQoJCUEgPC0gcmJpbmQobGVhcm5YLCBsZWFy
blkpJSolRA0KCQlsZGFTUyA8LSBsZGEoQSwgZ3JvdXBpbmcpDQoJCXRlc3RY
IDwtIG12cm5vcm0obiwgbXUwLCBTKQ0KCQl0ZXN0WSA8LSBtdnJub3JtKG4s
IG11MSwgUykNCgkJZGlzY3JTdGFuZCA8LSBwcmVkaWN0LmxkYShsZGFTdGFu
ZCwgcmJpbmQodGVzdFgsIHRlc3RZKSkkY2xhc3MNCgkJZGlzY3JTUyA8LSBw
cmVkaWN0LmxkYShsZGFTUywgcmJpbmQodGVzdFgsIHRlc3RZKSUqJUQpJGNs
YXNzDQoJCWVyclN0YW5kIDwtIGMoZXJyU3RhbmQsIEVycm9yUmF0ZShkaXNj
clN0YW5kLCBuKSkNCgkJZXJyU1MgPC0gYyhlcnJTUywgRXJyb3JSYXRlKGRp
c2NyU1MsIG4pKQ0KCQljYXQoIlN0YW5kOiAiLCBlcnJTdGFuZFtpXSwgIiBT
UzogIiwgZXJyU1NbaV0sICJcbiIpDQogCX0NCgljYXQoIkVycm9yIFJhdGUg
U3RhbmRhcmQgTERBOiAiLCBtZWFuKGVyclN0YW5kKSwgIlxuIikNCgljYXQo
IkVycm9yIFJhdGUgU1MgTERBOiAiLCBtZWFuKGVyclNTKSwgIlxuIikNCgly
ZXR1cm4obGlzdChlcnJTdGFuZCwgZXJyU1MpKQ0KfQ0KDQojIFMgPC0gbWF0
cml4KGMoMSwwLCAwLjUsIDAsIDAsIDEsIDAsIDAuOSwgMC41LCAwLCAyLCAw
LjMsIDAsIDAuOSwgMC4zLCAxKSwgNCwgNCkNClMgPC0gbWF0cml4KGMoMSww
LDAsMC45LDAsMSwwLDAsMCwwLDEsMCwwLjksMCwwLDEpLCA0LCA0KQ0KbXUw
IDwtIHJlcCgwLCA0KQ0KbXUxIDwtIHJlcCgxLCA0KQ0KbSA8LSBjKDUsNywx
MCwxNSwyMCw1MCwxMDApDQpuIDwtIDEwMDANCk4gPC0gMTAwDQoNCmVyciA8
LSBwbm9ybSgtMC41KnNxcnQodChtdTEgLSBtdTApJSolc29sdmUoUyklKiUo
bXUxIC0gbXUwKSkpDQpjYXQoIkVycm9yIHJhdGU6ICIsIGVyciwgIlxuIikN
Cg0KZUwgPC0gYygpDQplU1MgPC1jKCkNCg0KZm9yIChqIGluIG0pDQp7DQoJ
ZXN0ZXJyIDwtIHNpbTEoTiwgaiwgbiwgbXUwLCBtdTEsIFMpDQoJZUwgPC0g
YyhlTCwgbWVhbihlc3RlcnJbWzFdXSkpDQoJZVNTIDwtIGMoZVNTLCBtZWFu
KGVzdGVycltbMl1dKSkNCn0NCg0K
--1133331701-1931357602-965913218=:3057--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From polzehl@wias-berlin.de  Thu Aug 10 15:56:12 2000
From: polzehl@wias-berlin.de (polzehl@wias-berlin.de)
Date: Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)
Subject: [Rd] svd error (PR#631)
Message-ID: <200008101456.QAA02593@pubhealth.ku.dk>

--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable

SVD-Error on

R 1.1.0
Windows 98


I get the following error applying  svd  on a positive definite matrix :

 > sk2
               [,1]         [,2]          [,3]          [,4]          [,5]
[1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
[2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
[3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
[4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
[5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00
 > svd(sk2)
Error in svd(sk2) : error  4  in dsvdc

The problem seems to be connected to accuracy since

 > svd(sk2-.0000000000000000001)

works correctly.

I've saved the matrix  sk2  in the attached file.

Regards,

J=F6rg Polzehl
--=====================_24736660==_
Content-Type: application/octet-stream; name="sk2"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="sk2"

UkRYMQoAAAACAAAAAAAAAAMAAAADZGltAAAAAAMAAAADc2syAAAAAAIAAAAAAAAAAAAAAAEAAAAA
AAAAAAAAAAL/////AAAADgAAAAAAAAAAAAAAGT/wvHknO/XaP7WYa3uwMRC/MmtTLMsBmL9VWix1
04ctP2B7EYuQF0Y/tZhre7AxED/yeXMzKfWjv0DiR8RYcTa/Y5KK1dPLfT9uNsdP3h7YvzJrUyzL
AZi/QOJHxFhxNj/wAAHM0oaKPuCxnUzM7+G+6cUur1Qr0r9VWix104ctv2OSitXTy30+4LGdTMzv
4T/wACa0QRFCvw3fsLftHfg/YHsRi5AXRj9uNsdP3h7YvunFLq9UK9K/Dd+wt+0d+D/wAFw7fg5q
AAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAf////8AAAANAAAAAAAAAAAAAAACAAAABQAAAAX/
/////////////////////////w==
--=====================_24736660==_
Content-Type: text/plain; charset="iso-8859-1"; format=flowed
Content-Transfer-Encoding: quoted-printable


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Dr. J=F6rg Polzehl
WIAS, Mohrenstr. 39
D-10117 Berlin, Germany
email: polzehl@wias-berlin.de
Tel. +49 30/20372 481
Fax: +49 30/2044975
WWW: http://www.wias-berlin.de/~polzehl

--=====================_24736660==_--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Aug 10 19:21:16 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 Aug 2000 13:21:16 -0500
Subject: [Rd] svd error (PR#631)
In-Reply-To: polzehl@wias-berlin.de's message of "Thu, 10 Aug 2000 16:56:12 +0200 (MET DST)"
References: <200008101456.QAA02593@pubhealth.ku.dk>
Message-ID: <6raeelx9ib.fsf@franz.stat.wisc.edu>

polzehl@wias-berlin.de writes:

> SVD-Error on
> 
> R 1.1.0
> Windows 98
> 
> 
> I get the following error applying  svd  on a positive definite matrix :
> 
>  > sk2
>                [,1]         [,2]          [,3]          [,4]          [,5]
> [1,]  1.0460139783  0.084356992 -2.810553e-04 -1.303237e-03  2.011809e-03
> [2,]  0.0843569924  1.154650879 -5.152560e-04 -2.389213e-03  3.688230e-03
> [3,] -0.0002810553 -0.000515256  1.000002e+00  7.960227e-06 -1.228821e-05
> [4,] -0.0013032374 -0.002389213  7.960227e-06  1.000037e+00 -5.697973e-05
> [5,]  0.0020118087  0.003688230 -1.228821e-05 -5.697973e-05  1.000088e+00

If you know that the matrix is positive definite then you are probably
better off taking the svd of the Cholesky decomposition of the matrix.

> svd(chol(sk2), nu = 0)
$d
[1] 1.095806 1.000000 1.000000 1.000000 1.000000

$v
             [,1]          [,2]         [,3]        [,4]        [,5]
[1,] -0.478709768  0.0011572932  0.013159984  0.87312442 -0.09119310
[2,] -0.877614104 -0.0003224026  0.006761341 -0.47348540  0.07456035
[3,]  0.002923979 -0.4202666121  0.844168101 -0.04500196 -0.32973090
[4,]  0.013558325  0.7925962305  0.519924862  0.03162204  0.31667897
[5,] -0.020929998  0.4417756749 -0.129766919 -0.10217730 -0.88154213

The singular values of sk2 will be the squares of the singular values
of its Cholesky decomposition.  The left and right singular vectors of
sk2 are identical and can be expressed as the V shown here.  Note that
since one singular value has multiplicity 4, the last four columns of
v are not unique.

>  > svd(sk2)
> Error in svd(sk2) : error  4  in dsvdc

This is related to the convergence in the Linpack subroutine dsvdc.
It is a reasonably good singular value routine but it will
occasionally be unable to converge.  Svd routines often have
difficulty with matrices with repeated singular values, like sk2.

The Lapack routine used in SVD from the Matrix library is more
reliable

> SVD(sk2)
$d
[1] 1.200791 1.000000 1.000000 1.000000 1.000000

$u
             [,1]          [,2]          [,3]          [,4]         [,5]
[1,] -0.478709768  5.814978e-19 -1.734663e-19 -2.917201e-20  0.877973210
[2,] -0.877614104 -2.109493e-02 -1.889409e-02 -3.985595e-03 -0.478513967
[3,]  0.002923979 -4.102994e-02  7.970942e-02 -9.959678e-01  0.001594282
[4,]  0.013558325  1.644232e-01 -9.825683e-01 -8.535898e-02  0.007392597
[5,] -0.020929998  9.853104e-01  1.668804e-01 -2.731482e-02 -0.011411959

$vt
           [,1]         [,2]         [,3]         [,4]        [,5]
[1,] -0.4787098 -0.877614104  0.002923979  0.013558325 -0.02093000
[2,]  0.0000000 -0.021094933 -0.041029944  0.164423228  0.98531038
[3,]  0.0000000 -0.018894086  0.079709424 -0.982568251  0.16688036
[4,]  0.0000000 -0.003985595 -0.995967801 -0.085358979 -0.02731482
[5,]  0.8779732 -0.478513967  0.001594282  0.007392597 -0.01141196

A new release of the Matrix library will be uploaded to CRAN shortly.  I
would advise waiting for it to be compiled for Windows before using
the SVD function extensively.  In looking at PR#630 by Torsten Hothorn
I found a subtle bug in SVD.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 11 06:54:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 11 Aug 2000 07:54:32 +0200
Subject: [Rd] GenGC changes
In-Reply-To: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
References: <14737.41175.808404.687281@aragorn.ci.tuwien.ac.at>
Message-ID: <200008110554.HAA20812@aragorn.ci.tuwien.ac.at>

>>>>> Kurt Hornik writes:

> As most R developers maybe are already aware of, R version 1.2.0
> introduced a new `generational' garbage collector which means that
> strings and vectors (and language objects) are handled differently
> from the numerical atomic types.

>> From ``Writing R Extensions'':

>        Earlier code was written in a style like.
>            VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
    
>     but that is no longer allowed.  The functions `VECTOR_ELT' and
>     `SET_VECTOR_ELT' must now be used to access and set elements of a
>     generic vector.  There are analogous functions `STRING_ELT' and
>     `SET_STRING_ELT' for character vectors.
    
>        To convert existing code, use the following replacements.
    
>          original                 replacement
>          `foo = VECTOR(bar)[i]'   `foo = VECTOR_ELT(bar, i)'
>          `VECTOR(foo)[j] = bar'   `SET_VECTOR_ELT(foo, j, bar)'
>          `foo = STRING(bar)[i]'   `foo = STRING_ELT(bar, i)'
>          `STRING(foo)[j] = bar'   `SET_STRING_ELT(foo, j, bar)'

> The changes were committed to the r-devel true this Monday, and imply
> that add-on packages using the original coding style will no longer
> work with current versions of r-devel.  One possible solution for
> having packages with sources which work for compilation under both 1.1
> and 1.2 is to use conditionals of the form

>     #if R_VERSION >= R_Version(1, 2, 0)
> 	new-style-code
>     #else
> 	old-style-code
>     #endif

> I would like to ask add-on package maintainers of packages which are
> affected by the change to produce updated versions of their packages
> which work under both 1.1 and 1.2.  It seems that the following ones
> require action:

> 	Java
> 	Matrix
> 	RMySQL
> 	RODBC
> 	foreign
> 	hdf5
> 	netCDF
> 	stataread

> (Note that [currently], there is binary incompatibility between 1.1
> and 1.2.)

As indicated, the above is only one possible solution.  Another, and
maybe the preferred one in order to avoid unnecessarily duplicating
code, is the use of a *PRIVATE* header file containing the following
code:

#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)	(STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)	(STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)	(VECTOR(x)[i] = (v))
#endif

(Note that in order to achieve maximal source compatibility in the 1.x
series, it is preferable to have add-on packages modified, as we cannot
easily control the `old' (pre-1.1.1) R versions included in various
distributions.)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 16:06:11 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 11:06:11 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
Message-ID: <14740.5322.825671.12280@c1186.ae.ge.com>

Hello,
 I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
it instead of blas. However atlas for hp seems to missing some libs. I 
had to add -lblas in Makeconf. Everything builds ok. But modreg and
tcltk doesn't load. 
R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-August-9)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(modreg)
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
  can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
Error in library(modreg) : .First.lib failed
> 

First checked the lowessc.c routine and it had F77_SUB(...) but I
could not find a macro for that in the include files. There was
F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't
load.
Is there a way to get more info why it doesn't open?

TIA,
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 17:11:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 Aug 2000 17:11:32 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.5322.825671.12280@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008111659590.13373-100000@toucan.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Hello,
>  I had to set CPPFLAGS and FC=fort77 but configure saw atlas and used
> it instead of blas. However atlas for hp seems to missing some libs. I 
> had to add -lblas in Makeconf. Everything builds ok. But modreg and
> tcltk doesn't load. 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-August-9)

That might well be a problem. R-devel has been undergoing major
changes recently.  You should be able to use

  --with-blas             use specified BLAS library

to avoid atlas.  But BLAS configuration was changed in two steps,
and you may just have caught the middle.

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> > library(modreg)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/home/absd00t/R-devel/library/modreg/libs/modreg.sl":
>   can't open /home/absd00t/R-devel/library/modreg/libs/modreg.sl
> Error in library(modreg) : .First.lib failed
> > 
> 
> First checked the lowessc.c routine and it had F77_SUB(...) but I
> could not find a macro for that in the include files. There was
> F77_SYMBOL() so I changed to F77_SUB to F77_SYMBOL, but it still doesn't

Well, there is one (in R_ext/RS.h), *and* it is documented in `Writing R
Extensions'. (It seems pretty unlikely that something which has been in
R releases for a year or so would be wrong in a way like that.)

Making changes like that in the dark is not usually a good idea.  It is
likely that modreg.sl is  missing some blas libs, since you I suppose did
not change etc/Makeconf too.

> load.
> Is there a way to get more info why it doesn't open?

Is the error message correct?  It says the shared library cannot be
opened. Does it exist?  How helpful those messages are is OS-dependent.

I would take a look at your shared libraries with nm -g to see what
symbols are unsatisfied, as that is usually enough clue.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Fri Aug 11 20:05:39 2000
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Fri, 11 Aug 2000 15:05:39 -0400 (EDT)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
References: <14740.12889.352584.694777@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008111849570.12722-100000@auk.stats>
Message-ID: <14740.18299.166615.133823@c1186.ae.ge.com>

Prof Brian D Ripley writes:
 > > It seems like d1mach and a few others are not in any of the blas libs
 > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
 > > them when building modreg.sl
 > 
 > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
 > included on the load line, shared or not.

I get an error about non position independent code being in the
lib. Tells me to recompile with +z option !!  
This is a shortcoming of hp's linker I think. 

 > 
 > Try using --without-blas or --with-blas=no.  If that works,
 > try --with-blas=blas (or whatever).  If it does not work,
 > the problem is not blas-related.
 > 

OK, --without-blas worked. Everything loads now. Thanks.

I guess I still don't understand the config options :-(
--with-blas=/opt/fortran/lib/pa2.0/libblas.a
still grabs -latlas
My shell is bash.
I edited Makeconf and etc/Makeconf and did a make. Worked :-)
Thanks again, 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 11 20:17:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 11 Aug 2000 20:17:26 +0100 (BST)
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <14740.18299.166615.133823@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>

On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:

> Prof Brian D Ripley writes:
>  > > It seems like d1mach and a few others are not in any of the blas libs
>  > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>  > > them when building modreg.sl
>  > 
>  > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>  > included on the load line, shared or not.
> 
> I get an error about non position independent code being in the
> lib. Tells me to recompile with +z option !!  
> This is a shortcoming of hp's linker I think. 

Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

I think that's it. Glad we got there.

>  > 
>  > Try using --without-blas or --with-blas=no.  If that works,
>  > try --with-blas=blas (or whatever).  If it does not work,
>  > the problem is not blas-related.
>  > 
> 
> OK, --without-blas worked. Everything loads now. Thanks.
> 
> I guess I still don't understand the config options :-(
> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

--with-blas=blas?  That's all that is likely to work. Set LD_LIBRARY_PATH
(or HP's equivalent) accordingly.

> still grabs -latlas
> My shell is bash.
> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Aug 13 08:00:32 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 Aug 2000 09:00:32 +0200
Subject: [Rd] R-devel Aug-09  1.2.0 build on hpux10.20
In-Reply-To: <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
References: <14740.18299.166615.133823@c1186.ae.ge.com>
 <Pine.GSO.4.05.10008112014440.19587-100000@auk.stats>
Message-ID: <200008130700.JAA03995@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 11 Aug 2000, U-E59264-Osman F Buyukisik wrote:
>> Prof Brian D Ripley writes:
>> > > It seems like d1mach and a few others are not in any of the blas libs
>> > > I have :-( Also my hp supplied blas libs are .a not shared. Can't load 
>> > > them when building modreg.sl
>> > 
>> > Why not?  That is what is supposed to happen when $(BLAS_LIBS) is
>> > included on the load line, shared or not.
>> 
>> I get an error about non position independent code being in the
>> lib. Tells me to recompile with +z option !!  
>> This is a shortcoming of hp's linker I think. 

> Ah, yes, and I guess you have the same problem with Tcl/Tk, then.

> I think that's it. Glad we got there.

>> > 
>> > Try using --without-blas or --with-blas=no.  If that works,
>> > try --with-blas=blas (or whatever).  If it does not work,
>> > the problem is not blas-related.
>> > 
>> 
>> OK, --without-blas worked. Everything loads now. Thanks.
>> 
>> I guess I still don't understand the config options :-(
>> --with-blas=/opt/fortran/lib/pa2.0/libblas.a

> --with-blas=blas?  That's all that is likely to work. Set
> LD_LIBRARY_PATH (or HP's equivalent) accordingly.

>> still grabs -latlas
>> My shell is bash.
>> I edited Makeconf and etc/Makeconf and did a make. Worked :-)

The (fast) BLAS configure code is taken from Octave.  It interprets an
option like

	--with-blas=/path/to/libblas.a

as a `suggestion' to be tried first.  If this fails, it goes on to check
for other blas libs it knows about.  Can you check your config.log to
see whether your --with-blas=/opt/fortran/lib/pa2.0/libblas.a test
failed?

The way to turn off all fast BLAS checking is

	--with-blas=no
	--without-blas

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From agusalon@mcr.ucm.es  Sun Aug 13 19:59:22 2000
From: agusalon@mcr.ucm.es (agusalon@mcr.ucm.es)
Date: Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008131859.UAA15816@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0008_01C00569.70069B40"


------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear Sirs:

I am reading the book Mixed-Effects Models in S and S-Plus, by Pinheiro =
and Bates,  (Springer-Verlag New York, 2000) but using the nlme library =
for R (version:3.1-7, dated: 2000-07-07), and for the Linux (Mandrake =
7.0) operating system.

Working the first example of the book (pp. 4 - 12), I reproduce the =
reported results but with one exception: the model on page 6, called =
fm2Rail.lm. The estimated coefficients that I get are not those reported =
on the book.

In the attached file (report), I am sending you the short program (which =
reproduces the one in the book) and the results for estimating the =
fm2Rail.lm model. The estimated coefficients which I get are:

    Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
    66.5    54.303    -4.692    -2.658    -0.567    11.192
which do not seem correct.

Those reported in the book are:

    Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
    31.667    50      54        82.667    84.667    96

I have tried several times and other examples but the function lm seems =
not to work correctly, and perhaps the problem is in the adaptation of =
nlme from S to R.

Would you, please, let me know what is the reason for the estimated =
coefficients which I get?

Thanking you for your attention, I am

Sincerely yours


Agustin Alonso-Rodriguez
Prof. of Econometrics
Real C. Univ. "Escorial-Maria Cristina"
28200 San Lorenzo del Escorial(Madrid)
Spain
aalonso@mcr.ucm.es



------=_NextPart_001_0008_01C00569.70069B40
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2014.210" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT size=3D2>Dear Sirs:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I am reading the book <U>Mixed-Effects Models in S =
and=20
S-Plus</U>, by Pinheiro and Bates,&nbsp; (Springer-Verlag New York, =
2000) but=20
using the nlme library for R (version:3.1-7, dated: 2000-07-07), and for =
the=20
Linux (Mandrake 7.0) operating system.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Working the first example of the book (pp. 4 - 12), =
I=20
reproduce the reported results but with one exception: the model on page =
6,=20
called fm2Rail.lm. The estimated coefficients that I get are not those =
reported=20
on the book.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>In the attached file (report), I am sending you the =
short=20
program (which reproduces the one in the book) and the results for =
estimating=20
the fm2Rail.lm model. The estimated coefficients which I get =
are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail^0&nbsp; Rail^1&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^2&nbsp;&nbsp; Rail^3&nbsp;&nbsp; =
Rail^4&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp; Rail^5</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 66.5&nbsp;&nbsp;&nbsp;=20
54.303&nbsp;&nbsp;&nbsp; -4.692&nbsp;&nbsp;&nbsp; =
-2.658&nbsp;&nbsp;&nbsp;=20
-0.567&nbsp;&nbsp;&nbsp; 11.192</FONT></DIV>
<DIV><FONT size=3D2>which do not seem correct.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Those reported in the book are:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; Rail2&nbsp;&nbsp;&nbsp;=20
Rail5&nbsp;&nbsp;&nbsp; Rail1&nbsp;&nbsp;&nbsp;=20
Rail6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rail3&nbsp;&nbsp;&nbsp;=20
Rail4</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp; 31.667&nbsp;&nbsp;&nbsp;=20
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 54&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; =

82.667&nbsp;&nbsp;&nbsp; 84.667&nbsp;&nbsp;&nbsp; 96</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>I have tried several times and other examples but =
the function=20
<STRONG>lm </STRONG>seems not to work correctly, and perhaps the problem =
is in=20
the adaptation of nlme from S to R.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Would you, please, let me know what is the reason =
for the=20
estimated coefficients which I get?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanking you for your attention, I am</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Sincerely yours</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>Agustin Alonso-Rodriguez</FONT></DIV>
<DIV><FONT size=3D2>Prof. of Econometrics</FONT></DIV>
<DIV><FONT size=3D2>Real C. Univ. "Escorial-Maria Cristina"</FONT></DIV>
<DIV><FONT size=3D2>28200 San Lorenzo del Escorial(Madrid)</FONT></DIV>
<DIV><FONT size=3D2>Spain</FONT></DIV>
<DIV><FONT size=3D2><A=20
href=3D"mailto:aalonso@mcr.ucm.es">aalonso@mcr.ucm.es</A></FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_0008_01C00569.70069B40--

------=_NextPart_000_0007_01C00569.70069B40
Content-Type: application/octet-stream;
	name="report"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="report"

1.- Program=0A=
=0A=
library(nlme)=0A=
data(Rail)=0A=
Rail=0A=
=0A=
# Fixed-effects model=0A=
fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
fm2Rail.lm=0A=
summary(fm2Rail.lm)=0A=
=0A=
=0A=
2.- Results=0A=
=0A=
=0A=
R : Copyright 2000, The R Development Core Team=0A=
Version 1.1.0  (June 15, 2000)=0A=
=0A=
R is free software and comes with ABSOLUTELY NO WARRANTY.=0A=
You are welcome to redistribute it under certain conditions.=0A=
Type	"?license" or "?licence" for distribution details.=0A=
=0A=
R is a collaborative project with many contributors.=0A=
Type	"?contributors" for a list.=0A=
=0A=
Type	"demo()" for some demos, "help()" for on-line help, or=0A=
    	"help.start()" for a HTML browser interface to help.=0A=
Type	"q()" to quit R.=0A=
=0A=
> library(nlme)=0A=
Loading required package: nls =0A=
> data(Rail)=0A=
> Rail=0A=
Grouped Data: travel ~ 1 | Rail=0A=
   Rail travel=0A=
1     1     55=0A=
2     1     53=0A=
3     1     54=0A=
4     2     26=0A=
5     2     37=0A=
6     2     32=0A=
7     3     78=0A=
8     3     91=0A=
9     3     85=0A=
10    4     92=0A=
11    4    100=0A=
12    4     96=0A=
13    5     49=0A=
14    5     51=0A=
15    5     50=0A=
16    6     80=0A=
17    6     85=0A=
18    6     83=0A=
> =0A=
> # Fixed-effects model=0A=
> fm2Rail.lm <- lm(travel ~ Rail - 1, data =3D Rail)=0A=
> fm2Rail.lm=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Coefficients:=0A=
Rail^0  Rail^1  Rail^2  Rail^3  Rail^4  Rail^5  =0A=
66.500  54.303  -4.692  -2.658  -0.567  11.192  =0A=
=0A=
> summary(fm2Rail.lm)=0A=
=0A=
Call:=0A=
lm(formula =3D travel ~ Rail - 1, data =3D Rail)=0A=
=0A=
Residuals:=0A=
    Min      1Q  Median      3Q     Max =0A=
-6.6667 -1.0000  0.1667  1.0000  6.3333 =0A=
=0A=
Coefficients:=0A=
       Estimate Std. Error t value Pr(>|t|)    =0A=
Rail^0  66.5000     0.9477  70.169  < 2e-16 ***=0A=
Rail^1  54.3032     2.3214  23.392 2.22e-11 ***=0A=
Rail^2  -4.6917     2.3214  -2.021 0.066161 .  =0A=
Rail^3  -2.6584     2.3214  -1.145 0.274458    =0A=
Rail^4  -0.5669     2.3214  -0.244 0.811181    =0A=
Rail^5  11.1919     2.3214   4.821 0.000418 ***=0A=
---=0A=
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 =0A=
=0A=
Residual standard error: 4.021 on 12 degrees of freedom=0A=
Multiple R-Squared: 0.9978,	Adjusted R-squared: 0.9967 =0A=
F-statistic: 916.6 on 6 and 12 degrees of freedom,	p-value: 2.998e-15 =0A=
=0A=
> =0A=

------=_NextPart_000_0007_01C00569.70069B40--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 13 22:59:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 2000 23:59:44 +0200
Subject: [Rd] Possible bug (PR#633)
In-Reply-To: agusalon@mcr.ucm.es's message of "Sun, 13 Aug 2000 20:59:22 +0200 (MET DST)"
References: <200008131859.UAA15816@pubhealth.ku.dk>
Message-ID: <x2r97shlf3.fsf@blueberry.kubism.ku.dk>

agusalon@mcr.ucm.es writes:

>     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
>     66.5    54.303    -4.692    -2.658    -0.567    11.192
> which do not seem correct.
> 
> Those reported in the book are:
> 
>     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
>     31.667    50      54        82.667    84.667    96

This is a matter of differing conventions in handling

lm(travel ~ Rail - 1, data = Rail)

when Rail is an ordered factor. R uses polynomial contrasts in the
no-intercept case as it does when the intercept is present, whereas
Splus treats the ordered factor as if it were an unordered factor. If
you do something like the below, you get your coefficients.

I suspect that this could indeed be argued to be a bug in R, but
others may know better.

> lm(travel ~ factor(Rail,ordered=F)-1, data = Rail)

Call:
lm(formula = travel ~ factor(Rail, ordered = F) - 1, data = Rail)

Coefficients:
factor(Rail, ordered = F)2  factor(Rail, ordered = F)5  
                     31.67                       50.00  
factor(Rail, ordered = F)1  factor(Rail, ordered = F)6  
                     54.00                       82.67  
factor(Rail, ordered = F)3  factor(Rail, ordered = F)4  
                     84.67                       96.00  



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 14 07:48:39 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Aug 2000 08:48:39 +0200 (MET DST)
Subject: [Rd] Possible bug (PR#633)
Message-ID: <200008140648.IAA17196@pubhealth.ku.dk>

On 13 Aug 2000, Peter Dalgaard BSA wrote:

> agusalon@mcr.ucm.es writes:
> 
> >     Rail^0  Rail^1       Rail^2   Rail^3   Rail^4       Rail^5
> >     66.5    54.303    -4.692    -2.658    -0.567    11.192
> > which do not seem correct.
> > 
> > Those reported in the book are:
> > 
> >     Rail2    Rail5    Rail1    Rail6       Rail3    Rail4
> >     31.667    50      54        82.667    84.667    96
> 
> This is a matter of differing conventions in handling
> 
> lm(travel ~ Rail - 1, data = Rail)
> 
> when Rail is an ordered factor. R uses polynomial contrasts in the
> no-intercept case as it does when the intercept is present, whereas
> Splus treats the ordered factor as if it were an unordered factor. If

S-PLUS does it internally, R via contr.*(n, contrast=F). Both 
systems give

> contr.treatment(6, contrasts=F)
  1 2 3 4 5 6
1 1 0 0 0 0 0
2 0 1 0 0 0 0
3 0 0 1 0 0 0
4 0 0 0 1 0 0
5 0 0 0 0 1 0
6 0 0 0 0 0 1

> contr.poly(6, contrasts=F)
     ^0         ^1         ^2         ^3         ^4          ^5
[1,]  1 -0.5976143  0.5455447 -0.3726780  0.1889822 -0.06299408
[2,]  1 -0.3585686 -0.1091089  0.5217492 -0.5669467  0.31497039
[3,]  1 -0.1195229 -0.4364358  0.2981424  0.3779645 -0.62994079
[4,]  1  0.1195229 -0.4364358 -0.2981424  0.3779645  0.62994079
[5,]  1  0.3585686 -0.1091089 -0.5217492 -0.5669467 -0.31497039
[6,]  1  0.5976143  0.5455447  0.3726780  0.1889822  0.06299408

but S-PLUS uses neither.

> you do something like the below, you get your coefficients.
> 
> I suspect that this could indeed be argued to be a bug in R, but
> others may know better.

I suspect it is an undocumented(?) feature.  However, as

lm(travel ~ Rail - 1, data = Rail)

and

lm(travel ~ Rail, data = Rail)

give the same results (up to the coefficient labels) it is not a useful
one, and so I guess we should change it.  Unfortunately we need either
to break the compatibility of contr.poly or to re-structure the internal
code.


Here's a simpler way to get the book's results:

> options(contrasts=rep("contr.treatment", 2))
> lm(travel ~ Rail - 1, data = Rail)

Call:
lm(formula = travel ~ Rail - 1, data = Rail)

Coefficients:
Rail2  Rail5  Rail1  Rail6  Rail3  Rail4  
31.67  50.00  54.00  82.67  84.67  96.00  

or

> contrasts(Rail$Rail) <- "contr.treatment"
> lm(formula = travel ~ Rail - 1, data = Rail)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Tue Aug 15 04:16:03 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Tue, 15 Aug 2000 11:16:03 +0800 (GMT-8)
Subject: [Rd] package (in development)
Message-ID: <Pine.GSO.4.21.0008151102090.2401-100000@sununx.comp.nus.edu.sg>

Hi,
I have submitted the package maptools (the file is maptools-0.1a.zip). The
archive contains the source ready to compile. I have tested everything on
windows 98 and NT and haven't found any major bugs (yet). It should work 
on lin/unix as well but I don't have easy access to a machine to test
it. 

Of interest might be the functions dbf.read and dbf.write.
Also there is a function to read ESRI shapefiles, which is stored as a map
object. I am still developing the map object, at the moment it is far too
bulky, and I think i could make it a lot more elegant using
attributes. Suggestions would be very very welcome. I am planing to
implement quadtree indexing, so that map objects can be used for spatial
statistics (range searching for building connectivity matrices). One thing
I noticed is that the polygon function cannot handle wierd cases such as
holes, I can work on that if no one else is.

Lastly there is ca color ramp function. I am planning to implement a more
sophisticated one with interpolation in the color cube between break
points. Is there a way to get the rgb values for all the colors listed
when colors() is typed?

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From monty@sprintmail.com  Tue Aug 15 14:40:00 2000
From: monty@sprintmail.com (monty@sprintmail.com)
Date: Tue, 15 Aug 2000 15:40:00 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151340.PAA05358@pubhealth.ku.dk>

Full_Name: Rod Montgomery
Version: 1.1.0
OS: Windows-95
Submission from: (NULL) (38.26.56.3)


File R-1.1.0/src/appl/lbfgsb.c --

Comment in code says two papers describing underlying math are in 
ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
but that directory seems not to exist.

(Actually, the comment does not give a URL - it just says
to look in that directory on that FTP server.)

Paper [1] does exist in 
ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps

Nocedal's bibliography page for L-BGFS-B is
http://www.ece.nwu.edu/~nocedal/lbfgsb.html
which points to .ps.gz forms of both papers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 15 14:54:04 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 15 Aug 2000 15:54:04 +0200 (MET DST)
Subject: [Rd] Defective pointer to tech report (PR#634)
Message-ID: <200008151354.PAA05536@pubhealth.ku.dk>

Thanks.  These things have a habit of changing, and those refs are from
the original source.  The help page gives current ones.  Unfortunately
1.1.1 went out today, so I'll take a look closer to 1.2.0 release-time.


On Tue, 15 Aug 2000 monty@sprintmail.com wrote:

> Full_Name: Rod Montgomery
> Version: 1.1.0
> OS: Windows-95
> Submission from: (NULL) (38.26.56.3)
> 
> 
> File R-1.1.0/src/appl/lbfgsb.c --
> 
> Comment in code says two papers describing underlying math are in 
> ftp://ece.nwu.edu/pub/lbfgs/lbfgs_bcm/
> but that directory seems not to exist.
> 
> (Actually, the comment does not give a URL - it just says
> to look in that directory on that FTP server.)
> 
> Paper [1] does exist in 
> ftp://ece.nwu.edu/pub/nocedal/papers/sisc95.ps
> 
> Nocedal's bibliography page for L-BGFS-B is
> http://www.ece.nwu.edu/~nocedal/lbfgsb.html
> which points to .ps.gz forms of both papers.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Connolly@hort.cri.nz  Wed Aug 16 01:25:34 2000
From: P.Connolly@hort.cri.nz (P.Connolly@hort.cri.nz)
Date: Wed, 16 Aug 2000 02:25:34 +0200 (MET DST)
Subject: [Rd] Multiple pages with postscript() (PR#635)
Message-ID: <200008160025.CAA07887@pubhealth.ku.dk>

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

The function will produce a three page file, but only the first one
has the lwd parameter set.  The other pages have reverted to lwd = 1.

I've tried setting the lwd at different places, but the result is
always the same.  The same code does not have a problem in Splus 3.4.




test.device <-
function()
{
#  looks like the problem is in the postscript device
  
       postscript(file = paste("Test.ps"), horizontal = F)
       on.exit(dev.off())
       par(mai = rep(1, 4), lwd = 4)    
       for(j in 1:3) {
       plot(1:10, 11:20)
       title(paste("Testing  .... Page", j), line = -1, cex = 1.5)
    }
}

best


-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world's largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you've seen it.  ---Steven Wright
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 16 02:45:06 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 15 Aug 2000 21:45:06 -0400 (EDT)
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: <200008160025.CAA07887@pubhealth.ku.dk> (P.Connolly@hort.cri.nz)
Message-ID: <200008160145.VAA16148@jessie.research.bell-labs.com>


> 
> The function will produce a three page file, but only the first one
> has the lwd parameter set.  The other pages have reverted to lwd = 1.
> 
> I've tried setting the lwd at different places, but the result is
> always the same.  The same code does not have a problem in Splus 3.4.
> 
> 


Hi Patrick.
Thanks for the bug report. I took a quick look at the potential cause.

Here is a very simple workaround (i.e. I haven't investigated the other
side-effects):

diff -r1.28 devPS.c
1033c1033
<     if (pd->lty != newlty || pd->lwd != newlwd) {
---
>     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  

In other words, change the if() condition in the routine SetLineStyle()
in the file src/main/devPS.c to be true, regardless of whether the
values are the same or not. This appears to give the desired result.

Hopefully we will determine the appropriate reset configuration
as page changes occur. Anyone.... ?

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 16 10:15:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2000 11:15:43 +0200
Subject: [Rd] Multiple pages with postscript() (PR#635)
In-Reply-To: Duncan Temple Lang's message of "Tue, 15 Aug 2000 21:45:06 -0400 (EDT)"
References: <200008160145.VAA16148@jessie.research.bell-labs.com>
Message-ID: <x266p17eio.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@research.bell-labs.com> writes:

> diff -r1.28 devPS.c
> 1033c1033
> <     if (pd->lty != newlty || pd->lwd != newlwd) {
> ---
> >     if (pd->lty != newlty || pd->lwd != newlwd || 1) {  
> 
> In other words, change the if() condition in the routine SetLineStyle()
> in the file src/main/devPS.c to be true, regardless of whether the
> values are the same or not. This appears to give the desired result.
> 
> Hopefully we will determine the appropriate reset configuration
> as page changes occur. Anyone.... ?

Probably the code for "new page" needs to invalidate current status
(pd->xxx) of several items, or at least record the actual status. For
fonts we had a similar problem when the clipping changed (which got
fixed by setting it to -1), and I wouldn't be surprised if clipping
also could do strange stuff to the line widths. With a bit of luck, we
could in the same operation squash the "undefined in /bg" problem that
affects the PS output from "make check". Anyone...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jackman@stanford.edu  Wed Aug 16 18:16:56 2000
From: jackman@stanford.edu (jackman@stanford.edu)
Date: Wed, 16 Aug 2000 19:16:56 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008161716.TAA18739@pubhealth.ku.dk>

Full_Name: Simon Jackman
Version: 1.0
OS: win32, linux
Submission from: (NULL) (207.75.155.177)


the abbreivated state names given in data(state) contain numerous errors. 
Florida, 
Hawaii, Iowa, Michigan and Nebraska are wrongly abbreviated. 

compare R with S-plus on this.
> version
platform Windows   
arch     x86       
os       Win32     
system   x86, Win32
status             
major    1         
minor    1.0       
year     2000      
month    June      
day      15        
language R         
> data(state)
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FA" "GA" "HA" "ID" "IL" "IN" "IO"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MC" "MN" "MS" "MO" "MT" "NB" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"

but, say on splus for linux:
S-PLUS : Copyright (c) 1988, 1999 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 5.1 Release 1 for Linux 2.0.31 : 1999 
Working data will be in .Data 
> state.abb
 [1] "AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FL" "GA" "HI" "ID" "IL" "IN" "IA"
[16] "KS" "KY" "LA" "ME" "MD" "MA" "MI" "MN" "MS" "MO" "MT" "NE" "NV" "NH" "NJ"
[31] "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT"
[46] "VA" "WA" "WV" "WI" "WY"



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dick@b6ori1.bauv.unibw-muenchen.de  Thu Aug 17 10:09:05 2000
From: dick@b6ori1.bauv.unibw-muenchen.de (dick@b6ori1.bauv.unibw-muenchen.de)
Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170909.LAA22320@pubhealth.ku.dk>

Hi,

I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could compile
all Versions of R until 1.1.0.

When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
/R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
with the gcc compiler command

	gcc -I. -I../../../src/include -I../../../src/include
	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o

results in the following errors:

	rbitmap.c: In function `R_SaveAsPng':
	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
	function)
	rbitmap.c:168: (Each undeclared identifier is reported only once
	rbitmap.c:168: for each function it appears in.)
	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
this
	function)
	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
	function)

This file wasn't present in the R Versions before 1.1.0.

There don't seem to be any errors in the config.log file.

Does maybe anybodey know how to solve this problem?

Thank you
Thomas Dick

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 17 10:39:03 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Aug 2000 11:39:03 +0200
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
In-Reply-To: dick@b6ori1.bauv.unibw-muenchen.de's message of "Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)"
References: <200008170909.LAA22320@pubhealth.ku.dk>
Message-ID: <x2hf8ki5vs.fsf@blueberry.kubism.ku.dk>

dick@b6ori1.bauv.unibw-muenchen.de writes:

> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

A guess would be that your PNG library is old and that the PNG_
macros are not defined in png.h. But new enough that configure thinks
it is usable.

You might try turning off PNG support by commenting out

#define HAVE_PNG 1

in src/include/config.h after running configure. That would give you a
running R (hopefully) but obviously no support for .png bitmaps.
Otherwise maybe install a newer libpng &al.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 17 10:42:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Aug 2000 11:42:34 +0200 (MET DST)
Subject: [Rd] Install Error on SGI Irix 6.5 (PR#637)
Message-ID: <200008170942.LAA22949@pubhealth.ku.dk>


> From: dick@b6ori1.bauv.unibw-muenchen.de
> Date: Thu, 17 Aug 2000 11:09:05 +0200 (MET DST)
> 
> Hi,
> 
> I'm using R since Version 0.99 on a SGI Indigo 2 with Irix 6.5. I could 
compile
> all Versions of R until 1.1.0.
> 
> When I try to compile Version 1.1.0 or 1.1.1 I get an error in the directory
> /R-1.1.1/src/unix/X11. Trying to compile the file rbitmap.c in this directory
> with the gcc compiler command
> 
> 	gcc -I. -I../../../src/include -I../../../src/include
> 	-I../../../src/include/R_ext  -I/usr/local/include -DHAVE_CONFIG_H
> 	-fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> 
> results in the following errors:
> 
> 	rbitmap.c: In function `R_SaveAsPng':
> 	rbitmap.c:168: `PNG_INTERLACE_NONE' undeclared (first use in this
> 	function)
> 	rbitmap.c:168: (Each undeclared identifier is reported only once
> 	rbitmap.c:168: for each function it appears in.)
> 	rbitmap.c:168: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in
> this
> 	function)
> 	rbitmap.c:169: `PNG_FILTER_TYPE_BASE' undeclared (first use in this
> 	function)
> 
> This file wasn't present in the R Versions before 1.1.0.
> 
> There don't seem to be any errors in the config.log file.
> 
> Does maybe anybodey know how to solve this problem?

Update your libpng installation.  Those should be defined in png.h.
They certainly are in the current 1.0.8 and back to 1.0.6 at least.

If you don't want to do that, you can undef HAVE_PNG in config.h

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 17 14:28:11 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Aug 2000 15:28:11 +0200 (MET DST)
Subject: [Rd] state name abbreviations (PR#636)
Message-ID: <200008171328.PAA25761@pubhealth.ku.dk>

>>>>> "Simon" == Simon Jackman <jackman@stanford.edu> writes:

    Simon> Full_Name: Simon Jackman

    Simon> the abbreivated state names given in data(state) contain
    Simon> numerous errors.

    Simon> Florida, Hawaii, Iowa, Michigan and Nebraska are wrongly
    Simon> abbreviated.

    Simon> compare R with S-plus on this.

even not being an American I do remember the official abbrevations,
and yes, R had them wrong {well they came from the other hemisphere..},
and they are now corrected for "R-devel"  aka "R 1.2 to be".

These were the 5 faults and their correction :

           old  new
 Florida    FA  FL
 Hawaii     HA  HI
 Iowa       IO  IA
 Michigan   MC  MI
 Nebraska   NB  NE

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Thu Aug 17 23:45:53 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Fri, 18 Aug 2000 08:45:53 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>

G'day R friends,

I didn't get any replies on the main list so I thought I'd try with the
experts.

I was wondering if anyone's ported R to os390.  If so, are the vsize and
nsize limits the same as other platforms?

I could really annoy those SAS guys then.

thanks,
John Strumila
john.strumila@team.telstra.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 18 16:19:22 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 18 Aug 2000 17:19:22 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181519.RAA05688@pubhealth.ku.dk>

make.function.html() produces ugly results. Have a look at the file 
..../r-directory/doc/html/function.html

The descriptions of datasets are wrong. Here are also the descriptions
of other function, which do not belong to these datasets.

Regards,
Uwe Ligges

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 18 17:51:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)
Subject: [Rd] make.function.html and datasets (PR#638)
Message-ID: <200008181651.SAA06029@pubhealth.ku.dk>

On Fri, 18 Aug 2000 ligges@statistik.uni-dortmund.de wrote:

> make.function.html() produces ugly results. Have a look at the file 
> ..../r-directory/doc/html/function.html

(after running make.function.html() on Windows: it seems fine as shipped).

> The descriptions of datasets are wrong. Here are also the descriptions
> of other function, which do not belong to these datasets.

This is a victim of a late change to the default arguments of scan.
Please add quote="" to both occurrences of scan in the function.

I think we've learnt not to change such things in a bug-fix release ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 18 21:37:01 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Aug 2000 22:37:01 +0200
Subject: [Rd] make.function.html and datasets (PR#638)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 18 Aug 2000 18:51:34 +0200 (MET DST)"
References: <200008181651.SAA06029@pubhealth.ku.dk>
Message-ID: <x2em3mcnma.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> This is a victim of a late change to the default arguments of scan.
> Please add quote="" to both occurrences of scan in the function.
> 
> I think we've learnt not to change such things in a bug-fix release ....

Yep. (Actually, the change was not that late - July 25 - but it took
more than 2 weeks before someone noticed the unexpected side effects.
A hole in our bug-fishing net, obviously.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Aug 18 22:45:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 18 Aug 2000 14:45:37 -0700 (PDT)
Subject: [Rd] R on os390
In-Reply-To: <61411576E951D211AF330008C7245DD90626FB4A@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.GSO.4.21.0008181438140.10998-100000@atlas.biostat.washington.edu>

On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Strumila@team.telstra.com  Mon Aug 21 01:11:17 2000
From: John.Strumila@team.telstra.com (Strumila, John)
Date: Mon, 21 Aug 2000 10:11:17 +1000
Subject: [Rd] R on os390
Message-ID: <61411576E951D211AF330008C7245DD906698A4D@ntmsg0005.corpmail.telstra.com.au>

gday Thomas,

os390 uses 16/32 for int/long but the high order bit is not available, so
2gb is the best addressability.

The administrators of os390 tends to restrict virtual memory coz mainframe
RAM is historically expensive and paging is a very well understood/managed
resource.  Hence I don't know if I can physically grab 2Gb anyway.  On os390
this historically hasn't been a problem because it excels in I/O and
programs have been written with that in mind.  eg. SAS use of 'by' gets
around 'class' memory restrictions which means >2Gb files are handled
without much trouble.

I could only get nsize to about 200Mb (nsize=10,000K) on my redhat box.  Is
there something extra I need to do to increase this?

thanks,
John Strumila
 

-----Original Message-----
From: Thomas Lumley [mailto:thomas@biostat.washington.edu]
Sent: Saturday, 19 August 2000 7:46
To: Strumila, John
Cc: r-devel@stat.math.ethz.ch
Subject: Re: [Rd] R on os390


On Fri, 18 Aug 2000, Strumila, John wrote:

> G'day R friends,
> 
> I didn't get any replies on the main list so I thought I'd try with the
> experts.
> 
> I was wondering if anyone's ported R to os390.  If so, are the vsize and
> nsize limits the same as other platforms?

I'm not aware of a port.

The vsize and nsize limits would take some surgery to fix, but they
already allow 2Gb of heap and 2Gb of cons cells, which is quite a lot.

I would like R to be able to use large memory, since it's becoming more
widely available, but quite a few changes are probably needed.

What size are int, long and pointer types on os390?


> I could really annoy those SAS guys then.

:)

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Aug 21 07:06:35 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Aug 2000 08:06:35 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200008210606.IAA07166@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 638 *
Subject: make.function.html and datasets
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 18 Aug 2000 17:20:47 +0200
* PR# 637 *
Subject: Install Error on SGI Irix 6.5
From: "Thomas Dick" <dick@b6ori1.bauv.unibw-muenchen.de>
Date: Thu, 17 Aug 2000 11:09:11 +0000
* PR# 636 *
Subject: state name abbreviations
From: jackman@stanford.edu
Date: Wed, 16 Aug 2000 19:16:55 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stahel@stat.math.ethz.ch  Mon Aug 21 14:53:56 2000
From: stahel@stat.math.ethz.ch (stahel@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 15:53:56 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008211353.PAA20296@pubhealth.ku.dk>


symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
   ylim=c(1,5))
Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  : 
	formal argument "ylim" matched by multiple actual arguments

Since plot is called inside symbols, with specified xlim and ylim,
any specification through  ,...  hurts this call.

I am pretty sure that you won't like to hear the suggestion that
this error message 
  formal argument "anything" matched by multiple actual arguments
should only be a warning.
I would find this more convenient since foreseeing these collisions
and programming such arguments as explicit arguments of the "top" function
is a nuisance when writing functions just for one project.

Ceterum censeo: Thanks for your efforts for developing such a useful
                environment. 

Werner 

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, d.complexity, package:SfS, Autoloads, package:base

-- 
Werner Stahel

------------------ This message was sent by ---------------------------------
Werner Stahel                                     http://stat.ethz.ch/~stahel
Seminar fuer Statistik                               phone  : +41 1 632 34 30
ETH-Zentrum, LEO                                     fax    : +41 1 632 12 28
CH-8092 Zurich, Switzerland                          meet me: Leonhardstr. 27
-----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Aug 21 17:17:35 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 21 Aug 2000 18:17:35 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008211353.PAA20296@pubhealth.ku.dk>
Message-ID: <39A1561F.65F06784@statistik.uni-dortmund.de>

stahel@stat.math.ethz.ch wrote:
> 
> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>    ylim=c(1,5))
> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>         formal argument "ylim" matched by multiple actual arguments
> 
> Since plot is called inside symbols, with specified xlim and ylim,
> any specification through  ,...  hurts this call.
> 
> I am pretty sure that you won't like to hear the suggestion that
> this error message
>   formal argument "anything" matched by multiple actual arguments
> should only be a warning.
> I would find this more convenient since foreseeing these collisions
> and programming such arguments as explicit arguments of the "top" function
> is a nuisance when writing functions just for one project.
> 
> Ceterum censeo: Thanks for your efforts for developing such a useful
>                 environment.


Suggestion for a fix:


function (x, y, circles, squares, rectangles, stars, thermometers, 
    boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
    ylab = "", xlim = NULL, ylim = NULL, ...) 
               ^^^^^^^^^^^^^^^^^^^^^^^^^
{
## [...] snip ##
  if (!add) { 
### check, wheter xlim and ylim are already specified:
        if(is.null(xlim)) {
            xlim <- range(x, na.rm = TRUE)
            xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
        }
        if(is.null(ylim)) {
            ylim <- range(y, na.rm = TRUE)
            ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
        }
        plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
            ylab = ylab, ...)
    }
    .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
}

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 21 17:28:22 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 21 Aug 2000 18:28:22 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008211628.SAA21511@pubhealth.ku.dk>

{all recent versions of R}

Problem / design bug :

  diff.default() doesn't deal with "ts" objects properly,
  diff.ts() does, but that is only available from package "ts"
  where as the constructor function ts() is in base.

It's not sufficient to just move diff.ts() to package base,
since it relies itself on lag & lag.default which are also only in package 
ts.

----------------------------------------------------

A simple example :

> diff(ts(1:50, start= 1980, frequency = 12))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  : 
	invalid time series parameters specified

> library(ts)

> diff(ts(1:50, start= 1980, frequency = 12))
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
1980       1   1   1   1   1   1   1   1   1   1   1
1981   1   1   1   1   1   1   1   1   1   1   1   1
1982   1   1   1   1   1   1   1   1   1   1   1   1
1983   1   1   1   1   1   1   1   1   1   1   1   1
1984   1   1                                        

------
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 08:00:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 09:00:12 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220700.JAA24625@pubhealth.ku.dk>

>>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

    Uwe> stahel@stat.math.ethz.ch wrote:
    >> 
    >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
    >>         ylim=c(1,5))
    >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
    >> formal argument "ylim" matched by multiple actual arguments
    >> 
    >> Since plot is called inside symbols, with specified xlim and ylim,
    >> any specification through  ,...  hurts this call.
yes,
and Uwe's fix cures this problem.
    [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
     copy it again now].

and I have committed it for the release patches (!! i.e. "1.1.1 patched")

    >> I am pretty sure that you won't like to hear the suggestion that
    >> this error message
    >>    formal argument "anything" matched by multiple actual arguments
    >>    should only be a warning.

    >> I would find this more convenient since foreseeing these collisions
    >> and programming such arguments as explicit arguments of the "top"
    >> function is a nuisance when writing functions just for one project.

Maybe this should be discussed a bit:
The error can only be made into a warning when it makes sense to assume
that it is always okay, to take the *LAST* actual argument as the 
desired one.   This is the case probably whenever "..." comes at the end of the
formal argument list -- which it is in about 95% of cases...

Hmm, what do others think?

    >> Ceterum censeo: Thanks for your efforts for developing such a useful
    >> environment.
Merci!

    Uwe> Suggestion for a fix:

      function (x, y, circles, squares, rectangles, stars, thermometers, 
	  boxplots, inches = TRUE, add = FALSE, fg = 1, bg = NA, xlab = "", 
	  ylab = "", xlim = NULL, ylim = NULL, ...) 
		     ^^^^^^^^^^^^^^^^^^^^^^^^^
      {
      ## [...] snip ##
	if (!add) { 
      ### check, wheter xlim and ylim are already specified:
	      if(is.null(xlim)) {
		  xlim <- range(x, na.rm = TRUE)
		  xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
	      }
	      if(is.null(ylim)) {
		  ylim <- range(y, na.rm = TRUE)
		  ylim <- ylim + c(-1, 1) * (0.1 * diff(ylim))
	      }
	      plot(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab, 
		  ylab = ylab, ...)
	  }
	  .Internal(symbols(x, y, type, data, inches, bg, fg, ...))
      }

    Uwe> Regards,
    Uwe> Uwe Ligges

Martin Maechler

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 22 08:45:48 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Aug 2000 09:45:48 +0200 (MET DST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
Message-ID: <200008220745.JAA25729@pubhealth.ku.dk>

On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

> >>>>> "Uwe" == Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> 
>     Uwe> stahel@stat.math.ethz.ch wrote:
>     >> 
>     >> symbols(iris[,1],iris[,2],rectangles=as.matrix(iris[,3:4]),inches=0.3,
>     >>         ylim=c(1,5))
>     >> Error in plot.default(NA, NA, type = "n", ylim = ylim, xlim = xlim, xlab = xlab,  :
>     >> formal argument "ylim" matched by multiple actual arguments
>     >> 
>     >> Since plot is called inside symbols, with specified xlim and ylim,
>     >> any specification through  ,...  hurts this call.
> yes,
> and Uwe's fix cures this problem.
>     [Uwe, you should have CC'ed  R-bugs, not (only) R-devel .. that's why I
>      copy it again now].
> 
> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

Why is using NULL preferable here?  The standard paradigm as I understand
it is


         ylab = "", xlim, ylim, ...)
...
            if(missing(xlim)) {
                xlim <- range(x, na.rm = TRUE)
                xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
            }

In S there is a problem with passing down missingness, but not in R.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 22 10:48:17 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Aug 2000 11:48:17 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
Message-ID: <14754.19553.429605.429987@gargle.gargle.HOWL>

[now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
     
>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:

    .............

    >> yes,
    >> and Uwe's fix cures this problem.
    >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")

which has
		ylab = "", xlim = NULL, ylim = NULL, ...)
and later
		if(is.null(xlim)) { 
		   ... 
		}

    BDR> Why is using NULL preferable here?  The standard paradigm as I
    BDR> understand it is

    BDR> ylab = "", xlim, ylim, ...)
    BDR> ...
    BDR> if(missing(xlim)) {
    BDR>   xlim <- range(x, na.rm = TRUE)
    BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
    BDR> }

    BDR> In S there is a problem with passing down missingness, but not in R.

I know.  Note however that to be really useful one would have to able to
also *set* missingness for an argument (which I think we can't currently)

I might want to call

	symbols(.very.long.argument.list.etc.etc., 
                xlim = if(<something>) my.xlim else <<DEFAULT>>,
		...)

where with the NULL setup, I can even drop the else clause
{since  if(FALSE)  evaluates to NULL},
but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
to missing...

In short, we (Uwe, people here and me) *do* prefer NULL to missing...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug 22 12:19:44 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 22 Aug 2000 13:19:44 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL>
Message-ID: <39A261D0.4F731961@statistik.uni-dortmund.de>

Martin Maechler wrote:
> 
> [now I'm not CC'ing R-bugs, since this is not about the bug anymore..]
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 22 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
>     .............
> 
>     >> yes,
>     >> and Uwe's fix cures this problem.
>     >> and I have committed it for the release patches (!! i.e. "1.1.1 patched")
> 
> which has
>                 ylab = "", xlim = NULL, ylim = NULL, ...)
> and later
>                 if(is.null(xlim)) {
>                    ...
>                 }
> 
>     BDR> Why is using NULL preferable here?  The standard paradigm as I
>     BDR> understand it is
> 
>     BDR> ylab = "", xlim, ylim, ...)
>     BDR> ...
>     BDR> if(missing(xlim)) {
>     BDR>   xlim <- range(x, na.rm = TRUE)
>     BDR>   xlim <- xlim + c(-1, 1) * (0.1 * diff(xlim))
>     BDR> }
> 
>     BDR> In S there is a problem with passing down missingness, but not in R.
> 
> I know.  Note however that to be really useful one would have to able to
> also *set* missingness for an argument (which I think we can't currently)
> 
> I might want to call
> 
>         symbols(.very.long.argument.list.etc.etc.,
>                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
>                 ...)
> 
> where with the NULL setup, I can even drop the else clause
> {since  if(FALSE)  evaluates to NULL},
> but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> to missing...
> 
> In short, we (Uwe, people here and me) *do* prefer NULL to missing...

You are right.
Especially in the development of the scatterplot3d() function I have had
some problems with missing arguments (not only xlim), so I decided to
work with NULL as default instead of "missing".
And I don't see any problems so far.
The only reason to use "missing" is the "standard paradigm" argument, as
Prof. Ripley mentioned.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 13:10:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 14:10:14 +0200
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: Uwe Ligges's message of "Tue, 22 Aug 2000 13:19:44 +0200"
References: <200008220700.JAA24625@pubhealth.ku.dk> <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats> <14754.19553.429605.429987@gargle.gargle.HOWL> <39A261D0.4F731961@statistik.uni-dortmund.de>
Message-ID: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> > I know.  Note however that to be really useful one would have to able to
> > also *set* missingness for an argument (which I think we can't currently)
> > 
> > I might want to call
> > 
> >         symbols(.very.long.argument.list.etc.etc.,
> >                 xlim = if(<something>) my.xlim else <<DEFAULT>>,
> >                 ...)
> > 
> > where with the NULL setup, I can even drop the else clause
> > {since  if(FALSE)  evaluates to NULL},
> > but with the   missing(xlim)  paradigm, I should be able to set <<DEFAULT>>
> > to missing...
> > 
> > In short, we (Uwe, people here and me) *do* prefer NULL to missing...
> 
> You are right.
...
> The only reason to use "missing" is the "standard paradigm" argument, as
> Prof. Ripley mentioned.

Also the fact that all those NULL defaults tend to clutter up the
code... 

I tend to see it the way that the "standard paradigm" is well
intended, but flawed -- mostly in the S incarnation, but also in R for
the reasons that Martin poins out. So another option could be to
fix things so that the paradigm worked.

Do we want to reconsider the semantics and include a "missing
constant"? In fact we have one (don't look now, Robert!):

missing.value<-quote()
missing(missing.value)
f<-function(x)missing(x)
f(missing.value)
y<-missing.value

However, things are not all that simple, e.g. constructions like

g<-function(y,x=if (y) 2 else missing.value) missing(x)

returns TRUE both for g(TRUE) and g(FALSE)

That actually makes sense, but this is perplexing:

> f<-function(x)missing(x)
> g<-function(y,x=if(y)2 else missing.value)f(x)
> g(F)
[1] FALSE
> g(T)
[1] FALSE
> g<-function(y,x=if(y)2 else missing.value)print(x)
> g(T)
[1] 2
> g(F)
Error in print(x) : Argument "missing.value" is missing, with no default

[You don't need to mess with missing.value to create this kind of
effect: 

> g<-function(y,x=y)f(x)
> g()
[1] TRUE
> g<-function(y,x=(y))f(x)
> g()
[1] FALSE

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 22 17:36:18 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200008221636.SAA03685@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> {all recent versions of R} Problem / design bug :

    MM>   diff.default() doesn't deal with "ts" objects properly, diff.ts()
    MM> does, but that is only available from package "ts" where as the
    MM> constructor function ts() is in base.

    MM> It's not sufficient to just move diff.ts() to package base, since
    MM> it relies itself on lag & lag.default which are also only in
    MM> package ts.

    MM> ----------------------------------------------------

    MM> A simple example :

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM> Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences *
    MM> xtsp[3], : invalid time series parameters specified

    >> library(ts)

    >> diff(ts(1:50, start= 1980, frequency = 12))
    MM>      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 1980 1 1 1 1 1
    MM> 1 1 1 1 1 1 1981 1 1 1 1 1 1 1 1 1 1 1 1 1982 1 1 1 1 1 1 1 1 1 1 1
    MM> 1 1983 1 1 1 1 1 1 1 1 1 1 1 1 1984 1 1

---
answering myself :

One easy and "clean" fix is to put the following at the very beginning of
diff.default :

    if(is.ts(x)) {
        require(ts)
        UseMethod("diff")
    }

{and then remove the "tsp" stuff at the end of diff.default()}.

Now
	diff(ts(1:20))
gives a one line message
-------------------------------------
Loading required package: ts 
-------------------------------------
but I think this is really okay and desired to some extent.

As Prof Ripley pointed out in a private e-mail to me,
package ts  should really be used for everything "ts"ish,
but then we want to have very basic "ts" functionality in package base...

The above passes "make check" (and more).

Anybody against this?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 22 17:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2000 18:58:39 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 22 Aug 2000 18:36:18 +0200 (MET DST)"
References: <200008221636.SAA03685@pubhealth.ku.dk>
Message-ID: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> One easy and "clean" fix is to put the following at the very beginning of
> diff.default :
> 
>     if(is.ts(x)) {
>         require(ts)
>         UseMethod("diff")
>     }
...
> The above passes "make check" (and more).
> 
> Anybody against this?

I'm not really pro or con, but what is wrong with autoloading diff.ts?? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 08:39:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 09:39:47 +0200 (CEST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
References: <200008221636.SAA03685@pubhealth.ku.dk>
 <x2bsylfd1c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.32707.497714.333996@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

it does not work, i.e.

   autload("diff.ts", "ts")
   diff(ts(1:10))

does not load package ts.
It's not so clear if this is a bug in method dispatching ...
but assuming ``standard semantic'' (diff.ts is in search() i.e. diff()
				    should dispatch to it),
it is one..

Shall I 
 1) commit my proposed change to "R-release-patches" (since it fixes a bug
						     in R 1.1.1)
 2) submit a new bug report  about the non-dispatching to "Autoloads"
    objects
?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 23 09:53:34 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Aug 2000 10:53:34 +0200
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
In-Reply-To: Martin Maechler's message of "Wed, 23 Aug 2000 09:39:47 +0200 (CEST)"
References: <200008221636.SAA03685@pubhealth.ku.dk> <x2bsylfd1c.fsf@blueberry.kubism.ku.dk> <14755.32707.497714.333996@gargle.gargle.HOWL>
Message-ID: <x23djwcq9d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Shall I 
>  1) commit my proposed change to "R-release-patches" (since it fixes a bug
> 						     in R 1.1.1)
>  2) submit a new bug report  about the non-dispatching to "Autoloads"
>     objects

I'm inclined to say 2). 

1) would be wrong in any case (it's hardly a critical bug since you
can just preload ts and the fix is somewhat questionable when you
consider the full consequences). If anything, the fix would be for the
development version -- not that that really matters at this point,
since there's a very good chance that the next release will be 1.2.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 23 10:17:20 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Aug 2000 11:17:20 +0200 (CEST)
Subject: [Rd] symbols: xlim and ylim cannot be specified (PR#639)
In-Reply-To: <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
References: <200008220700.JAA24625@pubhealth.ku.dk>
 <Pine.GSO.4.05.10008220841500.9118-100000@auk.stats>
 <14754.19553.429605.429987@gargle.gargle.HOWL>
 <39A261D0.4F731961@statistik.uni-dortmund.de>
 <x2em3hfqe0.fsf@blueberry.kubism.ku.dk>
Message-ID: <14755.38560.233927.26543@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
    >> > I know.  Note however that to be really useful one would have to
    >> able to > also *set* missingness for an argument (which I think we
    >> can't currently)
    >> > 
    >> > I might want to call
    >> > 
    >> > symbols(.very.long.argument.list.etc.etc., > xlim =
    >> if(<something>) my.xlim else <<DEFAULT>>, > ...)
    >> > 
    >> > where with the NULL setup, I can even drop the else clause >
    >> {since if(FALSE) evaluates to NULL}, > but with the missing(xlim)
    >> paradigm, I should be able to set <<DEFAULT>> > to missing...
    >> > 
    >> > In short, we (Uwe, people here and me) *do* prefer NULL to
    >> missing...
    >> 
    >> You are right.
    PD> ...
    >> The only reason to use "missing" is the "standard paradigm"
    >> argument, as Prof. Ripley mentioned.

    PD> Also the fact that all those NULL defaults tend to clutter up the
    PD> code...
yes, the argument list

    PD> I tend to see it the way that the "standard paradigm" is well
    PD> intended, but flawed -- mostly in the S incarnation, but also in R
    PD> for the reasons that Martin poins out. So another option could be
    PD> to fix things so that the paradigm worked.
yes!

    PD> Do we want to reconsider the semantics and include a "missing
    PD> constant"? In fact we have one (don't look now, Robert!):

	[ `missing' spaces around "<-" added (above and below) by MM  ... ]

    >> missing.value <- quote()
    >> missing(missing.value)
    >> f <- function(x)missing(x)
    >> f(missing.value)
    >> y <- missing.value

wow!  (I  thought about you when I wrote above
       ``*set* missingness for an argument (which I think we can't currently)''
						  ^^^^^^^
      )						 

    PD> However, things are not all that simple, e.g. constructions like

    >> g <- function(y,x=if (y) 2 else missing.value) missing(x)

    PD> returns TRUE both for g(TRUE) and g(FALSE)

    PD> That actually makes sense,
yes

    PD> but this is perplexing:

    >> f <- function(x)missing(x)
    >> g <- function(y,x=if(y)2 else missing.value)f(x)
    >> g(F)
    PD> [1] FALSE
    >> g(T)
    PD> [1] FALSE
    >> g <- function(y,x=if(y)2 else missing.value)print(x)
    >> g(T)
    PD> [1] 2
    >> g(F)
    PD> Error in print(x) : Argument "missing.value" is missing, with no default

    PD> [You don't need to mess with missing.value to create this kind of
    PD> effect: 

    >> g <- function(y,x=y)f(x)
    >> g()
    PD> [1] TRUE
    >> g <- function(y,x=(y))f(x)
    >> g()
    PD> [1] FALSE

(that's a bug in the passing of "missingness", right ?)

--------

Coming back to your proposition:

Yes I think it's worth considering to make your "missing.value" a new
language constant.  However, the name "missing.value" is too easily
confused by what we (statisticians) usually  use  `NA' for.

Coffee discussion here lead to one of
       missing.argument
       missing.arg
or     MARG

So, this would need to
1)  declare "MARG" (or whatever)
    a constant, the same as "NA" or "NULL" or "TRUE"
2)  Maybe define a ``print method'' for it,
    the problem being that using a class or changing print.default() is not
    going to work, since the *generic*  print() now already gives the error

        Error in print(x) : Argument "MARG" is missing, with no default

   Hence, print may be changed to something like

     print <- function (x, ...) {
	 if(missing(x))
	     return(print("<<missing argument>>", quote = FALSE, ...))
	 UseMethod("print")
     }

     MARG <- quote()

     MARG ## still does not work !
     (MARG)## neither
     print(MARG) # does work

which is somewhat perplexing : 
There must be an internal extra "if(missing(.))"  even *before* print() is
called ...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de  Wed Aug 23 10:48:06 2000
From: jens.oehlschlaegel@bbdo-interone.de (jens.oehlschlaegel@bbdo-interone.de)
Date: Wed, 23 Aug 2000 11:48:06 +0200 (MET DST)
Subject: [Rd] 2 Bugs in na.omit.default() (PR#641)
Message-ID: <200008230948.LAA08598@pubhealth.ku.dk>

# BUG 1: returns empty vector if no NAs present

> nona <- 1:10
> na.omit(nona)
numeric(0)

na.omit.default() has two lines where
  object[-omit]
is used, where omit represents positions of NAs and thus without NAs
  omit = numeric(0)
and since
  -numeric(0) = numeric(0)

  object[-omit] = numeric(0)

It looks like an earlier version of na.omit.default had 'omit' defined as
logical,
at least the last section
  if (any(omit))
seems to expect omit as logical
which leads to

# BUG 2: wrong indication of dropped elements
> withna <- c(NA, 1:10, NA)
> unclass(na.omit(withna))
 [1]  1  2  3  4  5  6  7  8  9 10
attr(,"na.action")
[1]  1 NA
attr(,"na.action")attr(,"class")
[1] "omit"


# suggested fix, experts PLEASE CROSS CHECK
na.omit.default <-
function (object)
{
    if (!is.atomic(object))
        return(object)
    d <- dim(object)
    if (length(d) > 2)
        return(object)
    if (length(d)) {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          omit <- unique(((omit - 1)%%d[1]) + 1)
          nm <- rownames(object)
          object <- object[-omit, , drop = FALSE]
        }
    }
    else {
        omit <- seq(along = object)[is.na(object)]
        hasomit <- length(omit)>0
        if (hasomit){
          nm <- names(object)
          object <- object[-omit]
        }
    }
    if (hasomit) {
        names(omit) <- nm[omit]
        attr(omit, "class") <- "omit"
        attr(object, "na.action") <- omit
    }
    object
}







> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R



--
Dr. Jens Oehlschlgel
Analyse
BBDO InterOne
Grnstr. 15
40212 Dsseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 24 16:08:57 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 24 Aug 2000 17:08:57 +0200 (MET DST)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
Message-ID: <200008241508.RAA24536@pubhealth.ku.dk>

(As mentioned before, on R-devel)

This code snippet shows what the Subject above says :

> autoload("diff.ts", file="ts")
> diff(ts(1:10,freq=2))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],  :
	invalid time series parameters specified
> traceback()
[1] "tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3], "
[2] "    xtsp[2], xtsp[3]))"
[3] "diff.default(ts(1:10, freq = 2))"
[4] "diff(ts(1:10, freq = 2))"

[The R version doesn't matter; this has been true for 1.1.x as well]

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 2.0
 year = 2000
 month = 08
 day = 24
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 18:08:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 24 Aug 2000 10:08:09 -0700 (PDT)
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: <200008241508.RAA24536@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>

On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:

> (As mentioned before, on R-devel)
> 
> This code snippet shows what the Subject above says :

The problem is that isFunction is false for diff.ts, since it is only a
promise, not a function.

I think the solution is for usemethod to force the promise (in lines 225ff
of objects.c), but I'm not sure how to do this.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Aug 24 21:45:54 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 24 Aug 2000 22:45:54 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008242045.WAA25703@pubhealth.ku.dk>

On Thu, 24 Aug 2000, Troels Ring wrote:

> Dear friends.
> 
> Is this as expected ? Is alpha and beta too large simply ?
> 
>  > dbeta(.1,534,646)
> [1] NaN
> Warning message:
> NaNs produced in: dbeta(x, shape1, shape2, log)

well, it should work, but the correct answer is effectively zero.
  pbeta(.1,534,646) gives 3.6e-213

Perhaps more worrying is 
> dbeta(.25,534,646)
[1] Inf


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 24 23:41:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2000 00:41:27 +0200
Subject: [Rd] Method dispatch fails for autoloaded methods (PR#642)
In-Reply-To: Thomas Lumley's message of "Thu, 24 Aug 2000 10:08:09 -0700 (PDT)"
References: <Pine.GSO.4.21.0008241005070.19023-100000@atlas.biostat.washington.edu>
Message-ID: <x2lmxm1duw.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On Thu, 24 Aug 2000 maechler@stat.math.ethz.ch wrote:
> 
> > (As mentioned before, on R-devel)
> > 
> > This code snippet shows what the Subject above says :
> 
> The problem is that isFunction is false for diff.ts, since it is only a
> promise, not a function.
> 
> I think the solution is for usemethod to force the promise (in lines 225ff
> of objects.c), but I'm not sure how to do this.

Yes, must be the right thing to do. We must be doing the same thing
with regular function lookups, no? Not that there are many (if any)
relevant cases, but

> autoload(".TkRoot","tcltk")
> .TkRoot(x)
Error: couldn't find function ".TkRoot"

will cause the .TkRoot promise to be forced, loading tcltk *before* it
can figure out that it isn't a function. I see no reason for object
methods to behave any differently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Aug 25 07:47:00 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 25 Aug 2000 08:47:00 +0200 (MET DST)
Subject: [Rd] crash using fisher.test on Windows; was [R] unexpected crash of R under (PR#644)
Message-ID: <200008250647.IAA27299@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> On Thu, 24 Aug 2000, Emmanuel Paradis wrote:
> 
> > Dear All,
> >
> > We encountered an unexpected crash with R under Windows when running
> > fisher.test(). We had this problem only under this OS and only with the
> > following data:
> >
> > > T
> >       [,1] [,2]
> >  [1,]    2    1
> >  [2,]    2    1
> >  [3,]    4    0
> >  [4,]    8    0
> >  [5,]    6    0
> >  [6,]    0    0
> >  [7,]    1    0
> >  [8,]    1    1
> >  [9,]    7    1
> > [10,]    8    2
> > [11,]    1    0
> > [12,]    3    1
> > [13,]    1    1
> > [14,]    3    0
> > [15,]    7    2
> > [16,]    4    1
> > [17,]    2    0
> > [18,]    2    0
> > [19,]    2    0
> >
> > The commands:
> >
> > library(ctest)
> > fisher.test(T)
> >
> > result in a crash of R with a system error. (Note that if we change T[19,2]
> > to the value "1", then there is no problem.) The crash occurs with R-1.0.1
> > under Win98, and with R-1.1.1 under WinNT (both with Rgui and with Rterm).
> > However, there is no problem at all under Solaris (tested with R-1.0.1 and
> > R-1.1.0).
> 
> Your pinpointing the blame on the Windows port of R is quite unfair. The
> problem is in your usage of the function: the workspace was too small and
> the code was writing outside it.  It is pure chance that did not affect any
> the other OSes you tried (or was that just one OS?).
> 
> fisher.ctest(T, workspace=1e6) works without crashing on Windows, Solaris
> and Linux here.


I tried with the default of workspace=200000 on WinNT and Solaris. The
crash (Dr. Watson) only happens on WinNT. On Solaris everything works
fine.

Now I tried it using workspace=1000 (too small). On Solaris AND WinNT
the same result:

 > fisher.test(T, workspace=1000)
 Error in fisher.test(T, workspace = 1000) : 
         FEXACT error 40.
 Out of workspace.

This is the error message, I would expect, but not a crash of R!
CC'ing to R-Bugs with modified subject.


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 25 14:20:10 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 25 Aug 2000 15:20:10 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008251320.PAA05152@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >> Dear friends.
    >> 
    >> Is this as expected ? Is alpha and beta too large simply ?
    >> 
    >> > dbeta(.1,534,646)
    >> [1] NaN
    >> Warning message:
    >> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >> dbeta(.25,534,646)
    TL> [1] Inf
yes.
and I see that it is one case where the log-density seems to be alright:

> dbeta(.25,534,646,log=TRUE)
[1] -109.939612

and also for the NaN case :

> dbeta(.1,534,646, log=TRUE)
[1] -480.725168

A workaround is  using   exp( log-density  ), i.e.

  exp(dbeta(x,a,b, log = TRUE)) :

Look at

> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
or
> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

--
I'll have a look.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 15:53:00 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 10:53:00 -0400
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
In-Reply-To: <200008251320.PAA05152@pubhealth.ku.dk>
References: <200008251320.PAA05152@pubhealth.ku.dk>
Message-ID: <39a683e6.3864125@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
message <200008251320.PAA05152@pubhealth.ku.dk>:

>Look at
>
>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

I never knew that plot could take a function!  

Could I make some suggestions?

1.  It should be mentioned more prominently in the documentation.
Since functions aren't a class, I scanned over the list of plot
methods without ever noticing that functions were mentioned there.
I'd suggest modifying the description of parameter x to read:

 x: the coordinates of points in the plot. Alternatively, a
single plotting structure, function or R object with a `plot' method
can be provided.


2.  If xlim is specified and from and to aren't, the from and to
values should default to xlim[1] and xlim[2], not 0 and 1.  

3.  The help for plot.function says:

"This used to be a quick hack which seems to serve a useful
purpose, but can give bad results for functions which are not
smooth."

That doesn't read right:  it makes me ask, "If it used to be a quick
hack, what is it now?"  I'd suggest:

"This function was a quick hack which seems to serve a useful
purpose, but it can give bad results for functions which are not
smooth."


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 25 17:57:50 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 25 Aug 2000 18:57:50 +0200 (CEST)
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <39a683e6.3864125@fisher.stats.uwo.ca>
References: <200008251320.PAA05152@pubhealth.ku.dk>
 <39a683e6.3864125@fisher.stats.uwo.ca>
Message-ID: <14758.42382.735308.898057@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <murdoch@stats.uwo.ca> writes:

    Duncan> On Fri, 25 Aug 2000 15:20:10 +0200 (MET DST), Martin Maechler wrote in
    Duncan> message <200008251320.PAA05152@pubhealth.ku.dk>:

    >> Look at
    >> 
    >>> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)

    Duncan> I never knew that plot could take a function!  
well..

    Duncan> Could I make some suggestions?
sure... no promisses though ;-)

    Duncan> 1.  It should be mentioned more prominently in the documentation.
    Duncan> Since functions aren't a class, I scanned over the list of plot
    Duncan> methods without ever noticing that functions were mentioned there.
    Duncan> I'd suggest modifying the description of parameter x to read:

    Duncan> x: the coordinates of points in the plot. Alternatively, a
    Duncan> single plotting structure, function or R object with a `plot' method
    Duncan> can be provided.

ok, done, thank you.
    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  

good idea,
and easy to implement...  
I would have it as

  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
              and \code{to}.}

(and not give a warning if someone uses  xlim  *and* e.g. `from').

    Duncan> 3.  The help for plot.function says:

    Duncan> "This used to be a quick hack which seems to serve a useful
    Duncan> purpose, but can give bad results for functions which are not
    Duncan> smooth."

    Duncan> That doesn't read right:  it makes me ask, "If it used to be a quick
    Duncan> hack, what is it now?"  I'd suggest:
yes..
    Duncan> "This function was a quick hack which seems to serve a useful
    Duncan> purpose, but it can give bad results for functions which are not
    Duncan> smooth."

"This" was now really implying  both  curve()  and plot.function()  ...

Could I just add one word, "now", to make it

>>    "This used to be a quick hack which now seems to serve a useful purpose,
>>                                        ===
>>     but can give bad results for functions which are not smooth."

--
Thank you,
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Aug 25 19:10:18 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Aug 2000 14:10:18 -0400
Subject: [Rd] Re: plot.function documentation (was ".. too large alpha ..")
In-Reply-To: <14758.42382.735308.898057@gargle.gargle.HOWL>
References: <200008251320.PAA05152@pubhealth.ku.dk> <39a683e6.3864125@fisher.stats.uwo.ca> <14758.42382.735308.898057@gargle.gargle.HOWL>
Message-ID: <39a6b55a.2956059@fisher.stats.uwo.ca>

On Fri, 25 Aug 2000 18:57:50 +0200 (CEST), you wrote in message
<14758.42382.735308.898057@gargle.gargle.HOWL>:

>    Duncan> 2.  If xlim is specified and from and to aren't, the from and to
>    Duncan> values should default to xlim[1] and xlim[2], not 0 and 1.  
>
>good idea,
>and easy to implement...  
>I would have it as
>
>  \item{xlim}{numeric of length 2; if specified, it replaces \code{from}
>              and \code{to}.}
>
>(and not give a warning if someone uses  xlim  *and* e.g. `from').

Hmmm, I can see that someone might want both, and have them take
inconsistent values.  Then from and to should control the range of
values graphed, and xlim should control the plotting box.

For example,

  plot(function(x) x^2, xlim=c(-1,1), from=0, to=1)

should do what it does now, i.e. have the x-axis run from -1 to 1, but
only positive x values are graphed.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Aug 26 08:41:53 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 26 Aug 2000 09:41:53 +0200 (MET DST)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200008260741.JAA00333@pubhealth.ku.dk>

hi -

i apologize if this is a duplicate.

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

perhaps unrelated but i thought i'd mention: unlist() complains about a
call/formula object, but sapply() does not (a call certainly "looks"
like a list, but includes names at some level).

- peter perkins


$ R --vanilla

> find(list)
[1] "package:base"
> find(unlist)
[1] "package:base"
> list1 <- list(a="a", b="b")
> unlist(list1)
  a   b
"a" "b"
> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b

> mode(list2)
[1] "list"
> mode(unlist(list2))
[1] "list"


--please do not edit the information below--

Version:
 platform = powerpc-unknown-linux-gnu
 arch = powerpc
 os = linux-gnu
 system = powerpc, linux-gnu
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Aug 26 08:47:59 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 26 Aug 2000 09:47:59 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008260747.JAA00545@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Aug 27 21:24:00 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 27 Aug 2000 22:24:00 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
Message-ID: <200008272024.WAA05134@pubhealth.ku.dk>

Dear R Team,

# Summary of the problem: setting contrasts as 
   > contrasts(g) <- contr.treatment 
or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
(i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
and fitting an lm model without an intercept results in a model matrix
that lacks one column.

(I do ask for forgiveness if this is not a bug but is due to my
ignorance.)

Many thanks for the extraordinary R.

Rashid Nassar


# Details:

# the data:
x <- gl(3,3)
y <- c(2,4,3,4,5,7,6,5,8)

## 1.  Using the default (treatment) contrasts unchanged gives correct 
       results.

## 2.  Setting contrasts using either of the following two forms also
       gives correct results:

> contrasts(x) <- "contr.treatment"
> contrasts(C(x,contr.treatment))

## 3. However I believe that the following (contr.treatment without quotation
marks) results in a problem (also contrasts(x) <- matrix(c(1,-1,0),ncol=1))
when an intercept is not included in the model:

> contrasts(x) <- contr.treatment 
> f4 <- lm(y ~ x - 1)
> summary(f4)

Coefficients:
   Estimate Std. Error t value Pr(>|t|)
x2    5.333      1.351   3.947  0.00555
x3    6.333      1.351   4.688  0.00224

> anova(f4)
Analysis of Variance Table

Response: y
          Df  Sum Sq Mean Sq F value   Pr(>F)
x          2 205.667 102.833  18.778 0.001537
Residuals  7  38.333   5.476                 

> model.matrix(f4)
  x2 x3
1  0  0
2  0  0
3  0  0
4  1  0
5  1  0
6  1  0
7  0  1
8  0  1
9  0  1

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Aug 28 07:24:04 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 Aug 2000 08:24:04 +0200 (MET DST)
Subject: [Rd] Re: [R] too large alpha or beta in dbeta ? (PR#643)
Message-ID: <200008280624.IAA06082@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
    TL> On Thu, 24 Aug 2000, Troels Ring wrote:
    >>> Dear friends.
    >>> 
    >>> Is this as expected ? Is alpha and beta too large simply ?
    >>> 
    >>> > dbeta(.1,534,646)
    >>> [1] NaN
    >>> Warning message:
    >>> NaNs produced in: dbeta(x, shape1, shape2, log)

    TL> well, it should work, but the correct answer is effectively zero.
    TL> pbeta(.1,534,646) gives 3.6e-213

    TL> Perhaps more worrying is 
    >>> dbeta(.25,534,646)
    TL> [1] Inf
    MM> yes.
    MM> and I see that it is one case where the log-density seems to be alright:

    >> dbeta(.25,534,646,log=TRUE)
    MM> [1] -109.939612

    MM> and also for the NaN case :

    >> dbeta(.1,534,646, log=TRUE)
    MM> [1] -480.725168

    MM> A workaround is  using   exp( log-density  ), i.e.

    MM> exp(dbeta(x,a,b, log = TRUE)) :

    MM> Look at

    >> plot(function(x)    dbeta(x, 534,646, log = TRUE), n = 1001)
    MM> or
    >> plot(function(x)exp(dbeta(x, 534,646, log = TRUE)), n = 1001)

    MM> --
    MM> I'll have a look.

fixed for R-devel (1.2 unstable),

and the patch is

--- src/nmath/dbeta.c	2000/03/03 17:18:30	1.7
+++ src/nmath/dbeta.c	2000/08/25 16:16:35	1.8
@@ -30,7 +30,15 @@
 #ifdef IEEE_754
     /* NaNs propagated correctly */
     if (ISNAN(x) || ISNAN(a) || ISNAN(b)) return x + a + b;
+
+# define xmax 171.61447887182298/* (fixme) -->> ./gammalims.c */
+
+#else
+    static double xmax = 0; double xmin;
+    if (xmax == 0)
+	gammalims(&xmin, &xmax);
 #endif
+
     if (a <= 0 || b <= 0) ML_ERR_return_NAN;
 
     if (x < 0 || x > 1)
@@ -35,10 +43,13 @@
 
     if (x < 0 || x > 1)
 	return R_D__0;
+
+#define R_LOG_DBETA log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b)
 
-    if(give_log) {
-	return log(x)*(a - 1) + log(1 - x)*(b - 1) - lbeta(a, b);
-    }
+    if(give_log)
+	return R_LOG_DBETA;
+    else if (a + b >= xmax) /* beta(a,b) might be = 0 numerically */
+	return exp(R_LOG_DBETA);
     else {
 	double y;
 	y = beta(a, b);


------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <200008272024.WAA05134@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 07:28:59 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 08:28:59 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#647)
Message-ID: <200008280628.IAA06146@pubhealth.ku.dk>

On Sun, 27 Aug 2000 rnassar@duke.edu wrote:

> Dear R Team,
> 
> # Summary of the problem: setting contrasts as 
>    > contrasts(g) <- contr.treatment 
> or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> and fitting an lm model without an intercept results in a model matrix
> that lacks one column.

Right, but first is not allowed by (?contrasts)

     ctr: either a matrix whose columns give coefficients for contrasts
          in the levels of `x', or the (quoted) name of a function
          which computes such matrices.

and the second is arguably correct: you chose to use only two columns.
However, the behaviour is different in the development version, 
which does not code x in models such as this, and so does not
have the problem.

That is not precisely what S does, but seems a sane way of interpreting the
contradictory information given (which is that you don't want an intercept
and that you only want two columns for the coding matrix for x!  That
applies to the function case too: there the coding matrix is evaluated
before knowing if contrast are required, that is using argument contrasts =
FALSE).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Aug 28 12:17:48 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Mon, 28 Aug 2000 07:17:48 -0400 (EDT)
Subject: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
In-Reply-To: <Pine.GSO.4.05.10008280715590.18116-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>

Dear Professor Ripley,

Thank you very much for your kind explanation.  If I may lamely say
something in my defence, even as I apologize for my error: I mistook the
sentence "the (quoted) name of a function" to mean "optionally quoted"
because of the parentheses surrounding "quoted", and was encouraged by the
fact that R did not complain when I gave the unquoted form and that it did
implement a change (although not the desired one), and (even more lamely)
the fact that none of the examples on the help page show the function
quoted, although I now realize that in the example the function has an
argument, and is not given simply the name of the function. 

Again, thank you for taking the time to reply and point out my mistake.

Rashid Nassar


On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:

> Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> 
> On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> 
> > Dear R Team,
> > 
> > # Summary of the problem: setting contrasts as 
> >    > contrasts(g) <- contr.treatment 
> > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > and fitting an lm model without an intercept results in a model matrix
> > that lacks one column.
> 
> Right, but first is not allowed by (?contrasts)
> 
>      ctr: either a matrix whose columns give coefficients for contrasts
>           in the levels of `x', or the (quoted) name of a function
>           which computes such matrices.
> 
> and the second is arguably correct: you chose to use only two columns.
> However, the behaviour is different in the development version, 
> which does not code x in models such as this, and so does not
> have the problem.
> 
> That is not precisely what S does, but seems a sane way of interpreting the
> contradictory information given (which is that you don't want an intercept
> and that you only want two columns for the coding matrix for x!  That
> applies to the function case too: there the coding matrix is evaluated
> before knowing if contrast are required, that is using argument contrasts =
> FALSE).
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:26:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one
 column (PR#646)
In-Reply-To: <Pine.SOL.3.91.1000828071122.17214A-100000@carr1.acpub.duke.edu>
Message-ID: <Pine.GSO.4.05.10008281225320.6947-100000@auk.stats>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 28 12:27:02 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Aug 2000 13:27:02 +0200 (MET DST)
Subject: [Rd] under certain conditions, model.matrix appears to lack one (PR#648)
Message-ID: <200008281127.NAA10878@pubhealth.ku.dk>

On Mon, 28 Aug 2000, Rashid Nassar wrote:

> Dear Professor Ripley,
> 
> Thank you very much for your kind explanation.  If I may lamely say
> something in my defence, even as I apologize for my error: I mistook the
> sentence "the (quoted) name of a function" to mean "optionally quoted"
> because of the parentheses surrounding "quoted", and was encouraged by the
> fact that R did not complain when I gave the unquoted form and that it did
> implement a change (although not the desired one), and (even more lamely)
> the fact that none of the examples on the help page show the function
> quoted, although I now realize that in the example the function has an
> argument, and is not given simply the name of the function. 
> 
> Again, thank you for taking the time to reply and point out my mistake.

That was not what I was trying to do!   If this had not already been fixed
as a result of another bug fix, it would be a bug we needed to address.


> 
> Rashid Nassar
> 
> 
> On Mon, 28 Aug 2000, Prof Brian D Ripley wrote:
> 
> > Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
> > From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> > To: rnassar@duke.edu
> > Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one column (PR#646)
> > 
> > On Sun, 27 Aug 2000 rnassar@duke.edu wrote:
> > 
> > > Dear R Team,
> > > 
> > > # Summary of the problem: setting contrasts as 
> > >    > contrasts(g) <- contr.treatment 
> > > or > contrasts(g) <- matrix(c(1,-1,0),ncol=1)
> > > (i.e. without quotes around `contr.treatment' or `contr.sum', etc.)
> > > and fitting an lm model without an intercept results in a model matrix
> > > that lacks one column.
> > 
> > Right, but first is not allowed by (?contrasts)
> > 
> >      ctr: either a matrix whose columns give coefficients for contrasts
> >           in the levels of `x', or the (quoted) name of a function
> >           which computes such matrices.
> > 
> > and the second is arguably correct: you chose to use only two columns.
> > However, the behaviour is different in the development version, 
> > which does not code x in models such as this, and so does not
> > have the problem.
> > 
> > That is not precisely what S does, but seems a sane way of interpreting the
> > contradictory information given (which is that you don't want an intercept
> > and that you only want two columns for the coding matrix for x!  That
> > applies to the function case too: there the coding matrix is evaluated
> > before knowing if contrast are required, that is using argument contrasts =
> > FALSE).
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 20:38:58 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 15:38:58 -0400
Subject: [Rd] x11 configure test
References: <00082909165800.19652@friedman> <x2hf84m5xd.fsf@blueberry.kubism.ku.dk>
Message-ID: <39AC1152.244E4EBF@bank-banque-canada.ca>

>> the graphics window pops up in 6.3, but not in 6.4
>Sounds like X didn't get configured on the 6.4 box. Might you be
>missing an x11-devel package or some such?
                          ^^^^^^

Well I have Mandrake 7.0 installed on two very similar machines and R
1.1.1 configures with
X11 support      no
Gnome support no
Tcl/Tk support no

on one and

X11 support      yes
Gnome support no
Tcl/Tk support yes

on the other. Both are running X11 and Gnome. I think I was told that
Gnome support has to be specifically indicated to configure, but I don't
understand what is happening to X11 and Tcl/Tk. (Of course, it would't
be the first time I've messed up something re-installing Linux.) I do
think the X11 support test seems a bit too particular about something. I
was actually running X11 when I did the configure that gave "X11 support
no".

BTW, should Linux X11-development be necessary or just X11 support?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 29 21:03:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 29 Aug 2000 13:03:29 -0700 (PDT)
Subject: [Rd] x11 configure test
In-Reply-To: <39AC1152.244E4EBF@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>

On Tue, 29 Aug 2000, Paul Gilbert wrote:

> >> the graphics window pops up in 6.3, but not in 6.4
> >Sounds like X didn't get configured on the 6.4 box. Might you be
> >missing an x11-devel package or some such?
>                           ^^^^^^
> 
> Well I have Mandrake 7.0 installed on two very similar machines and R
> 1.1.1 configures with
> X11 support      no
> Gnome support no
> Tcl/Tk support no
> 
> on one and
> 
> X11 support      yes
> Gnome support no
> Tcl/Tk support yes
> 
> on the other. Both are running X11 and Gnome. I think I was told that
> Gnome support has to be specifically indicated to configure, but I don't
> understand what is happening to X11 and Tcl/Tk. (Of course, it would't
> be the first time I've messed up something re-installing Linux.) I do
> think the X11 support test seems a bit too particular about something. I
> was actually running X11 when I did the configure that gave "X11 support
> no".
> 
> BTW, should Linux X11-development be necessary or just X11 support?

You need x11-development, ie the X11 headers.  Configure does look in
quite a lot of places for both the headers and the libraries.

Tcl/Tk is less dedicated, but you can specify the location quite easily.  
You will have problems if the files have nonstandard names (eg on a
machine here tcl.h is the old version and the new version is tcl8.h, which
doesn't work)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 29 22:04:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Aug 2000 17:04:20 -0400
Subject: [Rd] x11 support
References: <Pine.GSO.4.21.0008291256040.5886-100000@atlas.biostat.washington.edu>
Message-ID: <39AC2554.35E214E9@bank-banque-canada.ca>

>> BTW, should Linux X11-development be necessary or just X11 support?
>You need x11-development, ie the X11 headers.

This may be my problem. As I recall, one of the Linux install questions
is about X11 development. I didn't think of compiling R as X11
development, and I don't do anything else that would require me to
install this.

Perhaps this is relevant to the r-help question about X11 not working
with a recent SuSe install? Unfortunately I deleted that message.

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Wed Aug 30 16:02:15 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)
Subject: [Rd] Bug with tick marks on x-axis.
Message-ID: <200008301502.RAA23982@alpha.luc.ac.be>

Hi,
 I have a dataset where we are trying to model the resistance of
horses' lungs.  One of the covariates is the administered
pressure. This variable is a little odd in the sense that an increase
of pressure corresponds to a "more negative value" of the covariate. A
graph representing the change in resistance in function of the
pressure would be helpful for the biologist. But it should have the
x-axis (pressure) going from positive to negative pressure values to
correspond to an increase in pressure (this representation is clearer
to the biologists).
 Now under Windows 95 and 98 with rw1011, I get a problem with the
tick marks of the x-axis. Here is a small example:

x <- (0:-4)*10
y <- rnorm(5)
plot(x,y,type="l")                  # ok
plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

 I don't know if there is some way to get around this... it might be
easier to just use a previous version of R which does not contain that
bug.
 Thank you for any suggestions,
Patrick.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug 30 16:22:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 2000 17:22:04 +0200
Subject: [Rd] Bug with tick marks on x-axis.
In-Reply-To: Patrick Lindsey's message of "Wed, 30 Aug 2000 17:02:15 +0200 (MET DST)"
References: <200008301502.RAA23982@alpha.luc.ac.be>
Message-ID: <x2wvgy4vvn.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:


> plot(x,y,type="l")                  # ok
> plot(x,y,type="l",xlim=c(0,-40))    # missing all except the last tick mark (-40)

>  I don't know if there is some way to get around this... it might be
> easier to just use a previous version of R which does not contain that
> bug.
>  Thank you for any suggestions,

xlim is generally happier if you give it as (min,max) *in that order*.
We're not actually promising that things would work otherwise, are we?

A workaround would be to do the labeling yourself

plot(-x,y,type="l",xlim=c(0,40),axes=F)
box()
axis(1,at=-pretty(x),labels=pretty(x))
axis(2)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Wed Aug 30 23:18:48 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 00:18:48 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
Message-ID: <39AD8848.B272885D@epfl.ch>

Dear Mysql & R users,

first of all a big thanks to the authors of RMySQL.

I got the following table;
mysql> describe UserClick;
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| Field          | Type        | Null | Key | Default | Extra |
Privileges
|
+----------------+-------------+------+-----+---------+-------+---------------------------------+
| UseTransaction | varchar(20) |      |     |         |       |
select,insert,update,references |
| Engine         | varchar(30) |      |     |         |       |
select,insert,update,references |
| URL            | text        |      |     |         |       |
select,insert,update,references |
+----------------+-------------+------+-----+---------+-------+-----------------

I access it via:
rs<-dbExecStatement(con,"SELECT *  from UserClick")
res<-fetch(rs)

Things go wrong withthe URL entry which is of type text;
$Engine
[1] "Armintest" "Test"      "Voila"     
$URL
$URL[[1]]
NULL
...


Any ideas of how I could fix that would be highly appreciated. If it's
not yet
implemented, if you give me a few indications, I would implement it.

Thanks,
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Aug 31 00:06:28 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 30 Aug 2000 18:06:28 -0500
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
In-Reply-To: "Armin S. A. Roehrl"'s message of "Thu, 31 Aug 2000 00:18:48 +0200"
References: <39AD8848.B272885D@epfl.ch>
Message-ID: <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>

>>>>> "Armin" == Armin S A Roehrl <Armin.Roehrl@epfl.ch> writes:

  Armin> Dear Mysql & R users, first of all a big thanks to the
  Armin> authors of RMySQL.

  Armin> I got the following table;
  mysql> describe UserClick;
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | Field | Type | Null | Key | Default | Extra | Privileges |
  Armin> +----------------+-------------+------+-----+---------+-------+---------------------------------+
  Armin> | UseTransaction | varchar(20) | | | | |
  Armin> select,insert,update,references | | Engine | varchar(30) | |
  Armin> | | | select,insert,update,references | | URL | text | | | |
  Armin> | select,insert,update,references |
  Armin> +----------------+-------------+------+-----+---------+-------+-----------------

  Armin> I access it via: rs<-dbExecStatement(con,"SELECT * from
  Armin> UserClick") res<-fetch(rs)

  Armin> Things go wrong withthe URL entry which is of type text;
  Armin> $Engine [1] "Armintest" "Test" "Voila" $URL $URL[[1]] NULL
  Armin> ...


  Armin> Any ideas of how I could fix that would be highly
  Armin> appreciated. If it's not yet implemented, if you give me a
  Armin> few indications, I would implement it.

  Armin> Thanks, Armin

We have a newer version of the MySQL package (currently working in S). 
This may solve your problem. I am currently working on another project
but I would do the R port of the latest MySQL package in a few
days.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Armin.Roehrl@epfl.ch  Thu Aug 31 00:21:04 2000
From: Armin.Roehrl@epfl.ch (Armin S. A. Roehrl)
Date: Thu, 31 Aug 2000 01:21:04 +0200
Subject: [Rd] does RMySQL support the MySQL String Column Type TEXT ?
References: <39AD8848.B272885D@epfl.ch> <qxp7l8y8i2z.fsf@verdi.stat.wisc.edu>
Message-ID: <39AD96E0.9B94E38D@epfl.ch>


> We have a newer version of the MySQL package (currently working in S).
> This may solve your problem. I am currently working on another project
> but I would do the R port of the latest MySQL package in a few
> days.

Brilliant! Looking forward to that.
	Armin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r@marksmucker.com  Thu Aug 31 06:28:03 2000
From: r@marksmucker.com (r@marksmucker.com)
Date: Thu, 31 Aug 2000 07:28:03 +0200 (MET DST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
Message-ID: <200008310528.HAA25038@pubhealth.ku.dk>

Full_Name: Mark Smucker
Version: 1.0.1
OS: Windows NT 4 sp 6
Submission from: (NULL) (216.122.46.200)



I'm trying to read in a large matrix (800 x 800 or bigger)
and R prints an error telling me that my rows are not
all the same length.  I've double checked the text file
using gawk and it tells me that they are all the same.

When I pair it down to 247 x 247, then it works, but not
when I have 289 x 289.  I'm guesing that there is some
hardcoded 256 column limit, but I could be wrong.

Otherwise, I'm loving R.  Thank you so much!

Mark



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 31 07:23:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 Aug 2000 07:23:53 +0100 (BST)
Subject: [Rd] Unable to read.table with > 256? columns (PR#649)
In-Reply-To: <200008310528.HAA25038@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10008310708570.12521-100000@auk.stats>

On Thu, 31 Aug 2000 r@marksmucker.com wrote:

> Full_Name: Mark Smucker
> Version: 1.0.1
> OS: Windows NT 4 sp 6
> Submission from: (NULL) (216.122.46.200)
> 
> 
> 
> I'm trying to read in a large matrix (800 x 800 or bigger)
> and R prints an error telling me that my rows are not
> all the same length.  I've double checked the text file
> using gawk and it tells me that they are all the same.
> 
> When I pair it down to 247 x 247, then it works, but not
> when I have 289 x 289.  I'm guesing that there is some
> hardcoded 256 column limit, but I could be wrong.

Not that I know of.  But as you want to read a matrix, you will
do much better to use scan to read it as than has less overhead
and allows you to use much shorter lines in the file.  It will
just read consecutive numbers.  As in

A <- matrix(scan("file", what=0), 800, 800, byrow=TRUE)

> Otherwise, I'm loving R.  Thank you so much!

Yours is two versions old now, so please update to 1.1.1.

Here is my test (on 1.1.1 on Windows)

> x <- rnorm(300*300)
> write(x, "file", 300)
> A <- matrix(scan("file", what=0), 300, 300, byrow=TRUE)
> B <- as.matrix(read.table("file"))
> range(A-B)
[1] 0 0

So no limit and no problem. I no longer have a copy of 1.0.1 installed, so
if this is still a problem after you upgrade, can you please re-submit the
bug report with an example that actually fails for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Thu Aug 31 22:52:13 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Thu, 31 Aug 2000 23:52:13 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200008312152.XAA05500@pubhealth.ku.dk>

Full_Name: Kenny Ye
Version: R-1.1.1
OS: Solaris 2.6
Submission from: (NULL) (129.49.6.133)


when i use plot(x,y,axes=F), the axes and the box are still ploted.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

