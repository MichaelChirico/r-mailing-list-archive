From ford@signal.qinetiq.com  Fri Feb  1 11:37:18 2002
From: ford@signal.qinetiq.com (ford@signal.qinetiq.com)
Date: Fri, 1 Feb 2002 12:37:18 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011137.MAA15619@pubhealth.ku.dk>

Full_Name: Ashley Ford
Version: 1.4.0
OS: Windows NT4
Submission from: (NULL) (146.80.9.20)


I am suffering from a memory leak in read.table in the new precompiled windows
1.4.
it works fine in 1.3

Create a 90000 line file of 7 variables eg
perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
$i,$i*$e,3,4,5,6,7,8,9}' > n90000

R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

n9<-read.table("n90000")
Error: cannot allocate vector of size 75 Kb
In addition: Warning message: 
Reached total allocation of 63Mb: see help(memory.size) 
> gc()
         used (Mb) gc trigger (Mb)
Ncells 206781  5.6     467875 12.5
Vcells 109631  0.9     786432  6.0

On a machine with 512Mb it takes over 10 minutes before running out of memory

On Version 1.3.1  (2001-08-31)
it works fine 
date();n9<-read.table("n90000");date();str(n9)
[1] "Tue Jan 29 20:41:30 2002"
[1] "Tue Jan 29 20:43:29 2002"
`data.frame':   90000 obs. of  7 variables:
 $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
 $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
 $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
 $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
 $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
 $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
 $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> gc()
         used (Mb) gc trigger (Mb)
Ncells 278967  7.5     984024 26.3
Vcells 801283  6.2    2620390 20.0

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 11:45:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 12:45:40 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011145.MAA15818@pubhealth.ku.dk>

This was not a memory leak: it just used more memory.  That should have
been evident from your gc() results, which were not showing extra
memory usage.

It is already fixed in the current version of R, 1.4.1.

On Fri, 1 Feb 2002 ford@signal.qinetiq.com wrote:

> Full_Name: Ashley Ford
> Version: 1.4.0
> OS: Windows NT4
> Submission from: (NULL) (146.80.9.20)
>
>
> I am suffering from a memory leak in read.table in the new precompiled windows
> 1.4.
> it works fine in 1.3

There are no such versions. This matters, as the problem does not
occur in 1.4.1, only 1.4.0, and the `new precompiled Windows 1.4' is in
fact 1.4.1.


> Create a 90000 line file of 7 variables eg
> perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
> $i,$i*$e,3,4,5,6,7,8,9}' > n90000
>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> n9<-read.table("n90000")
> Error: cannot allocate vector of size 75 Kb
> In addition: Warning message:
> Reached total allocation of 63Mb: see help(memory.size)
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 206781  5.6     467875 12.5
> Vcells 109631  0.9     786432  6.0
>
> On a machine with 512Mb it takes over 10 minutes before running out of memory
>
> On Version 1.3.1  (2001-08-31)
> it works fine
> date();n9<-read.table("n90000");date();str(n9)
> [1] "Tue Jan 29 20:41:30 2002"
> [1] "Tue Jan 29 20:43:29 2002"
> `data.frame':   90000 obs. of  7 variables:
>  $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
>  $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
>  $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
>  $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
>  $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
>  $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
>  $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 278967  7.5     984024 26.3
> Vcells 801283  6.2    2620390 20.0
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From amurta@ipimar.pt  Fri Feb  1 15:49:08 2002
From: amurta@ipimar.pt (amurta@ipimar.pt)
Date: Fri, 1 Feb 2002 16:49:08 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011549.QAA21060@pubhealth.ku.dk>

Hi

I have written a small function to calculate distances between pairs of
landmarks ('my.dist' bellow). I gave it to a colleague that works with
MSWindows and the function doesn't give the right answer:

R 1.4.1 for Linux: 

> my.dist()
[1]  22 561  

R 1.4.1 for Windows:

> my.dist()
[1]  22 560
Warning message:
Replacement length not a multiple of the elements to replace in
matrix(...)


FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
same (wrong) answer as R 1.4.1 for Windows.


----------------------------------------------

xy3 <- matrix(round(100*runif(22*68)),22,68)

my.dist <- function(x = xy3){

 landmarks.x <- as.matrix(x[, 1:34])
 landmarks.y <- as.matrix(x[, 35:68])

 x1 <- c()
 x2 <- c()
 y1 <- c()
 y2 <- c()

 for(i in 1:(ncol(landmarks.x) - 1)) {
  x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
  x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
  y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
  y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
 }

 distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
 comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))

 dist.out <- matrix(distan, nrow(x), comb)
 dim(dist.out)
}


-- 
                           Alberto G. Murta                      
           IPIMAR - Institute of Fisheries and Sea Research
            Avenida de Brasilia, 1449-006 Lisboa, Portugal       
Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 16:16:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 17:16:54 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011616.RAA21394@pubhealth.ku.dk>

1) This is a random input, which might make it non-reproducible.

2) Solaris 2.7 gives 560 too.

You appear to be trying to calculate 34!/2*32! in a *very* inefficient
way, and then not rounding it.  And your answer depends on comb being an
integer.  So use (34*33)/2

In summary: you have used an unstable algorithm, and the bug is using that
algorithm.  For only slightly large inputs it would fail altogether.


On Fri, 1 Feb 2002 amurta@ipimar.pt wrote:

> Hi
>
> I have written a small function to calculate distances between pairs of
> landmarks ('my.dist' bellow). I gave it to a colleague that works with
> MSWindows and the function doesn't give the right answer:
>
> R 1.4.1 for Linux:
>
> > my.dist()
> [1]  22 561
>
> R 1.4.1 for Windows:
>
> > my.dist()
> [1]  22 560
> Warning message:
> Replacement length not a multiple of the elements to replace in
> matrix(...)
>
>
> FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
> same (wrong) answer as R 1.4.1 for Windows.
>
>
> ----------------------------------------------
>
> xy3 <- matrix(round(100*runif(22*68)),22,68)
>
> my.dist <- function(x = xy3){
>
>  landmarks.x <- as.matrix(x[, 1:34])
>  landmarks.y <- as.matrix(x[, 35:68])
>
>  x1 <- c()
>  x2 <- c()
>  y1 <- c()
>  y2 <- c()
>
>  for(i in 1:(ncol(landmarks.x) - 1)) {
>   x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
>   x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
>   y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
>   y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
>  }
>
>  distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
>  comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))
>
>  dist.out <- matrix(distan, nrow(x), comb)
>  dim(dist.out)
> }
>
>
> --
>                            Alberto G. Murta
>            IPIMAR - Institute of Fisheries and Sea Research
>             Avenida de Brasilia, 1449-006 Lisboa, Portugal
> Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Fri Feb  1 16:30:46 2002
From: p.ribeiro@lancaster.ac.uk (p.ribeiro@lancaster.ac.uk)
Date: Fri, 1 Feb 2002 17:30:46 +0100 (MET)
Subject: [Rd] documentation for abline and terms.object (PR#1294)
Message-ID: <200202011630.RAA21517@pubhealth.ku.dk>

Hi
I found two small errors in the (HTML) documentation:

abline{base}:
abline(a, b, untf = FALSE,\ dots)
                          ^^^^^^
terms.object{base}:
there is no description for the argument "response"

Cheers
P.J.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Feb  1 17:34:36 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 1 Feb 2002 18:34:36 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202011734.SAA21991@pubhealth.ku.dk>


  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From forporphyry@hotmail.com  Fri Feb  1 19:19:25 2002
From: forporphyry@hotmail.com (forporphyry@hotmail.com)
Date: Fri, 1 Feb 2002 20:19:25 +0100 (MET)
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
Message-ID: <200202011919.UAA22550@pubhealth.ku.dk>

Dear Team,

Don't understand output below.  Please advise.  Windows98 and 
rw1041(patched) from 1/25/02.

Graham Lawrence


C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin


C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
Bad command or file name

C:\>Rcmd

C:\>Rcmd Install
Bad command or file name

C:\>dir C:\R\rw1041\bin

Volume in drive C has no label
Volume Serial Number is 0000-0000
Directory of C:\R\rw1041\bin

.              <DIR>        01-29-02 12:31p .
.             <DIR>        01-29-02 12:31p ..
BATCH                2,437  09-17-00 11:51p BATCH
HELPPR~1 BAT           436  12-28-99  2:25p helpPRINT.bat
R        DLL     1,532,416  01-23-02  4:39p R.dll
RBITMAP  DLL       132,608  01-23-02  4:42p Rbitmap.dll
RGUI     EXE         8,192  01-23-02 12:17p Rgui.exe
RPROXY   DLL        18,432  01-23-02 12:17p Rproxy.dll
RSETREG  EXE         8,192  01-23-02 12:17p RSetReg.exe
RTERM    EXE         9,216  01-23-02 12:17p Rterm.exe
RCHTML   DLL         4,096  01-16-02  6:01p Rchtml.dll
BUILD               10,458  01-23-02  4:43p build
CHECK               32,895  01-23-02  4:43p check
INSTALL              7,040  01-23-02  4:43p INSTALL
MASSAG~1             4,045  01-23-02  4:43p massage-Examples
RCMD     EXE         8,704  01-23-02  4:43p Rcmd.exe
RD2DVI   SH          8,862  01-23-02  4:43p Rd2dvi.sh
RD2TXT               1,012  01-23-02  4:43p Rd2txt
RDCONV               3,454  01-23-02  4:43p Rdconv
RDIFF    SH            811  01-23-02  4:43p Rdiff.sh
RDINDEX              4,141  01-23-02  4:43p Rdindex
REMOVE               2,352  01-23-02  4:43p REMOVE
RPROF                3,085  01-23-02  4:43p Rprof
SD2RD               16,834  01-23-02  4:43p Sd2Rd
SHLIB                2,483  01-23-02  4:43p SHLIB
        23 file(s)      1,822,201 bytes
         2 dir(s)     350,396,416 bytes free

C:\>set
TMP=c:\windows\TEMP
TEMP=C:\windows\TEMP
PROMPT=$p$g
winbootdir=C:\WINDOWS
COMSPEC=C:\COMMAND.COM
LOG=NUL
DSHD=C:
QRCD=N:
BOTD=C:
MFG=YES
ZIPD=D:
CPQD=N:
EN=EN
LANG=EN
LIB=c:\stdlib\lib
INCLUDE=c:\stdlib\include
HLP=c:\hpc21\
windir=C:\WINDOWS
BLASTER=A220 I5 D1 T4 P330
PATH=C:\BIN;C:\MINGW32;C:\PERL;C:\HTMLWORK;C:\R\RW1041\BIN;C:\TCL;C:\TCL\BIN
CMDLINE=Rcmd Install

C:\>


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  1 21:19:49 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 01 Feb 2002 22:19:49 +0100
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
References: <200202011919.UAA22550@pubhealth.ku.dk>
Message-ID: <3C5B0675.609D267B@statistik.uni-dortmund.de>

forporphyry@hotmail.com wrote:
> 
> Dear Team,
> 
> Don't understand output below.  

If you don't understand the output, why do you think it is a bug?
The question seems to belong to R-Help, not to R-Bugs.


> Please advise.  Windows98 and rw1041(patched) from 1/25/02.
> 
> Graham Lawrence
> 
> C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin
> 
> C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
> Bad command or file name

Two solutions:
a) use slashes "/" instead of backslashes "\" in the path:
      Rcmd INSTALL C:/R/lattice_0.4-0.tar.gz

b) cd to "C:/R" and type "Rcmd INSTALL lattice_0.4-0.tar.gz"

> [...]

Uwe Ligges

BTW: There is a binary version (for windows) of lattice on CRAN.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:10 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:10 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1297)
Message-ID: <200202012254.XAA23376@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:35 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:35 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1298)
Message-ID: <200202012254.XAA23390@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 04:52:01 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 03 Feb 2002 23:52:01 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:24:19 -0800 (PST)"
References: <Pine.A41.4.44.0201301220150.117500-100000@homer04.u.washington.edu>
Message-ID: <px3d0hq26m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > I just tried it with CC=cc and FC=f77, and I got the coredump in the same
> > place.  This is on AIX 4.3.3 with Maintenance Level 09.
> 
> Hmm. According to R I have
>    platform rs6000-ibm-aix4.3.3.0
> 
> There's another few AIX users at CMU, so we should find out how widespread
> this is fairly soon.

I guess I'm one of them...  I recompiled R yesterday using gcc and g77
and have had no problems with compiling or 'make check' (On the same
platform as Thomas).

Since I don't have cc or f77 installed, I can't check what's going
wrong.  If you have a chance to use the GNU tools, my suggestion is to
do so.

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 05:00:09 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 04 Feb 2002 00:00:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:17:29 -0800 (PST)"
References: <Pine.A41.4.44.0201301155360.117500-100000@homer04.u.washington.edu>
Message-ID: <pxy9i9on8m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > Thanks for the reply.  I tried building without the modules package, and
> > got past that point.  Now the build fails trying to link tcltk.so.  Seems
> > the tclConfig.sh on my host refers to a file that does not exist
> > (/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).
> >
> > I'll freely admit to being clueless about most of this.  I don't know
> > anything about R; I'm just a sysadmin trying to build/install it for a
> > user who needs it.
> 
> Our autodetection of tcl/tk is less reliable than most stuff, partly
> because the tclConfig.sh and similar files are sometimes inaccurate.  If
> your users don't need tcl/tk (which is a fairly low-level set of
> facilities for writing GUIs) you can again remove tcltk from the R_PKGS
> line of Makeconf, or reconfigure
>    ./configure --without-tcltk
> 
> If your users do need this package then you (or they) need to track down
> where tcl and tk lurk and provide this information to R. Probably the
> easiest way would be to install a new version of Tcl and Tk, which should
> produce an honest set of configuration files.

hmm, that used to be the case.  Up to around 8.0, 8.1? tcl/tk was
great in its installation.  Now it, eh, sucks.  The installation of
8.3 and 8.4 has more bugs than the one Dan pointed out.

Dan: you can look at tclConfig.sh and tkConfig.sh.  Some files are
referenced incorrectly--you have to change the filenames to the
installed version instead of the build version.  You'll also have to
get rid of comments in compiler flags.
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Tue Feb  5 13:44:54 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Tue, 05 Feb 2002 08:44:54 -0500
Subject: [Rd] htmlhelp() question
Message-ID: <3C5FE1D6.1040307@wfu.edu>

I wonder if anyone who has worked on the win32 version of
R could help me with a HtmlHelp question?

When you're building a win32 program using mingw (in my
case, cross-compiling under GNU/Linux), what import
library do you use to link against the HtmlHelp()
function?  I have got a copy of MS's htmlhelp.lib, but
mingw doesn't seem to like this format; it wants an
archive in .a format.  Since I know R uses htmlhelp
under win32, and I gather it's built using mingw, I
wonder if anyone has managed to create an htmlhelp.a
or hhctrl.a import library.

Thanks.

Allin Cottrell
Wake Forest University

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Wed Feb  6 14:19:25 2002
From: p.ribeiro@lancaster.ac.uk (Paulo Justiniano Ribeiro Jr)
Date: Wed, 6 Feb 2002 14:19:25 +0000 (GMT)
Subject: [Rd] chol: test for symmetry
Message-ID: <Pine.GSO.4.21.0202061414270.3556-100000@unixb.lancs.ac.uk>

Hi
Considering that the description of chol says:
"Compute the Choleski factorization of a symmetric (Hermitian), positive
definite square matrix."

I was wondering whether it would be worth adding a check for the
symmetry of the matrix.
As it is now the function returns "something" for a non-symmetric matrix:

> chol(cbind(c(2,1.5,0),c(1.5,1.8,.2),c(0,0.5,1.5)))
         [,1]      [,2]      [,3]
[1,] 1.414214 1.0606602 0.0000000
[2,] 0.000000 0.8215838 0.6085806
[3,] 0.000000 0.0000000 1.0628404


Cheers
P.J


Paulo Justiniano Ribeiro Jr
Dept Maths & Stats  -  Fylde College
Lancaster University
Lancaster LA1 4YF   -  U.K.

e-mail: Paulo.Ribeiro@est.ufpr.br
http://www.maths.lancs.ac.uk/~ribeiro (english)
http://www.est.ufpr.br/~ribeiro (portugues)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 01:38:13 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Wed, 6 Feb 2002 20:38:13 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC855F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>

On Tue, 5 Feb 2002, Liaw, Andy wrote:

> I thought it was documented that htmlhelp can not be built with
> cross compilers.

Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
MkChmDll script in the R sources.  This looked promising: it builds a
libhhctrl.a import library by a sort of "fakery", echoing the
appropriate function name into a .def file and then compiling an .a
lib with dlltool, with only this .def as input. I tried this, and my
program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
specific) says:

<myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16

and aborts at startup.

The machine I tested on has hhctrl.ocx in windows/system OK.

Looking back at the R sources it seems that libhhctrl.a is somehow
tied up with Rchtml.dll, in the source for which it is stated,

"Can be built with VC++6 ..."

So at this point I wonder if Andy is right: is there really any way to
import the HtmlHelp() function without using a Microsoft compiler?

It seems as if there ought to be a way, but it might involve having
access to the source code for HHCTRL.OCX, whatever sort of beast that
may be.

Or am I (I hope) missing something?

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Feb 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202070615.g176F3e31806@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1157 *
Subject: identify(...plot=F)
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Fri, 2 Nov 2001 09:43:49 +0800 (WST)
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb  7 07:49:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 7 Feb 2002 07:49:57 +0000 (GMT)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>

Let me stress that the R instructions do work, Rchtml.dll is by default
built with mingw, and it also works when cross-compiled under mingw.

Also, there is no `fakery': what is done is a standard way to build an
import library.

On Wed, 6 Feb 2002, Allin Cottrell wrote:

> On Tue, 5 Feb 2002, Liaw, Andy wrote:
>
> > I thought it was documented that htmlhelp can not be built with
> > cross compilers.
>
> Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
> MkChmDll script in the R sources.  This looked promising: it builds a
> libhhctrl.a import library by a sort of "fakery", echoing the
> appropriate function name into a .def file and then compiling an .a
> lib with dlltool, with only this .def as input. I tried this, and my
> program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
> But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
> specific) says:
>
> <myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16
>
> and aborts at startup.
>
> The machine I tested on has hhctrl.ocx in windows/system OK.
>
> Looking back at the R sources it seems that libhhctrl.a is somehow
> tied up with Rchtml.dll, in the source for which it is stated,
>
> "Can be built with VC++6 ..."
>
> So at this point I wonder if Andy is right: is there really any way to
> import the HtmlHelp() function without using a Microsoft compiler?
>
> It seems as if there ought to be a way, but it might involve having
> access to the source code for HHCTRL.OCX, whatever sort of beast that
> may be.
>
> Or am I (I hope) missing something?
>
> Allin Cottrell.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 14:28:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 7 Feb 2002 09:28:24 -0500
Subject: [Rd] Problems sending email to r-bugs
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>


Hi all,

I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
the bug report has not shown up in the database, nor does it appear to have
been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
messages or warnings from the mail server, so I'm not sure what is wrong. Is
there a problem with r-bugs@biostat.ku.dk or is it on my end?

I'm including the text of my bug report below. 

-Greg

-----------------------

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which 
> include pie charts.   (NB: No piechart arguments please, the 
> main chart on the page is a proper bar chart representing the 
> same information.)
> 
> When I plot pie charts in a column, the piechart at the top 
> of a column is always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 
> 2/3 of the others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in 
> the second column:
> 
> 
> This occurs both on the x11 and postscript devices, although 
> it is less noticeable on the latter.  It doesn't seem happen 
> for 'hist' or 'plot'. As I've only recently started using 
> layout, I don't know if this occurs with other plotting 
> devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 15:15:35 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 16:15:35 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <x2heote31k.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> the bug report has not shown up in the database, nor does it appear to have
> been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> messages or warnings from the mail server, so I'm not sure what is wrong. Is
> there a problem with r-bugs@biostat.ku.dk or is it on my end?
> 
> I'm including the text of my bug report below. 

We had a switch of IP addresses over the weekend and Jitterbug uses an
explicit IP address in the config file...

Will fix, please retry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 15:21:29 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Thu, 7 Feb 2002 10:21:29 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>
Message-ID: <Pine.LNX.4.44.0202071020170.31581-100000@ricardo.ecn.wfu.edu>

On Thu, 7 Feb 2002, Prof Brian D Ripley wrote:

> Let me stress that the R instructions do work, Rchtml.dll is by default
> built with mingw, and it also works when cross-compiled under mingw.
>
> Also, there is no `fakery': what is done is a standard way to build an
> import library.

Sorry, I don't know much about Windows dlls (as is probably obvious).
I will study harder and have another go at it.

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Feb  7 15:45:58 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Feb 2002 10:45:58 -0500
Subject: [Rd] Problems sending email to r-bugs
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <3C62A136.578BF04A@bank-banque-canada.ca>

"Warnes, Gregory R" wrote:
> 
> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ...

Are you sending email directly or using bug.report()? If you are using
bug.report(), what editor are you using? The reason I ask is that some editors
(e.g. nedit) spawn another process and return, in which case the Unix version of
bug.report() throws away everything you type and sends an almost empty message,
with no warning. This is a known, reported, bug. The fix is to add an argument
wait=TRUE as in the Windows version.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 16:07:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 17:07:57 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <x2heote31k.fsf@blueberry.kubism.ku.dk>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
 <x2heote31k.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21yfxe0ma.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > Hi all,
> > 
> > I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> > the bug report has not shown up in the database, nor does it appear to have
> > been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> > I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> > messages or warnings from the mail server, so I'm not sure what is wrong. Is
> > there a problem with r-bugs@biostat.ku.dk or is it on my end?
> > 
> > I'm including the text of my bug report below. 
> 
> We had a switch of IP addresses over the weekend and Jitterbug uses an
> explicit IP address in the config file...
> 
> Will fix, please retry.

Sorry, it's still not working. A link involved in the home directory
of r-bugs got removed on the mail server, so .forward processing is
off. The messages are sitting in the inbox. 

I can't fix this today (no permissions on the mail server).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 18:10:34 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 7 Feb 2002 19:10:34 +0100 (MET)
Subject: [Rd] testing (PR#1299)
Message-ID: <200202071810.TAA06333@pubhealth.ku.dk>

Just testing the email interface...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 18:12:14 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Thu, 7 Feb 2002 19:12:14 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202071812.TAA06359@pubhealth.ku.dk>


Third try...

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which include pie
> charts.   (NB: No piechart arguments please, the main chart on the page is
> a proper bar chart representing the same information.)
> 
> When I plot pie charts in a column, the piechart at the top of a column is
> always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 2/3 of the
> others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in the second
> column:
> 
> 
> This occurs both on the x11 and postscript devices, although it is less
> noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> I've only recently started using layout, I don't know if this occurs with
> other plotting devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Feb  7 18:13:00 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Thu, 7 Feb 2002 19:13:00 +0100 (MET)
Subject: [Rd] PR# 1147
Message-ID: <200202071813.TAA06390@pubhealth.ku.dk>

Apropops todays automatic bug report: The bug #1147 I reported
(postscript, problems with screen layout) which I treported some time
ago, does not anymore occur R1.4.0, windows 98, when I test with the
same code that caused the original problem. Fixed as a by-product of the
internal changes to graphics code?

Kjetil Halvorsen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Feb  7 18:13:46 2002
From: joehl@web.de (joehl@web.de)
Date: Thu, 7 Feb 2002 19:13:46 +0100 (MET)
Subject: [Rd] incorrect handling of arrays of list elements (PR#1301)
Message-ID: <200202071813.TAA06413@pubhealth.ku.dk>



After checking with the prototype I hope the following to justifies a bug-report:

# you find pure replication syntax at the end


> # the prototype allows for the following, which fails in R
> matrix(vector("list", 6), 3, 2)
Error in matrix(vector("list", 6), 3, 2) : 
        Unimplemented feature in copyVector
> 
> # however the desired object seems to be legally in R as we get the same via
> tt <- vector("list", 6)
> dim(tt) <- c(3,2)
> tt
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # preparing to show further problems
> tt[[1,1]] <- letters
> tt
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # works fine
> tt[[1,1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"
> 
> # the prototype allows subscripting and assigning to subscripted such objects 
> 
> # erroneously NULL in R
> tt[1,1]
[[1]]
NULL

> 
> # erroneously NULL in R
> tt[1,]
[[1]]
NULL

[[2]]
NULL

> 
> # erroneously NULL in R
> tt[, 1]
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

> 
> # erroneously NULL in R
> tt[,]
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # fine in R
> tt[]
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # fine in R
> tt[cbind(1,1)]
[[1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"

> 
> # of course the same problems in assignments 
> tt[1,1] <- tt[1,1]
Error: incompatible types in subset assignment
> tt[1,1] <- list(letters)
Error: incompatible types in subset assignment
> tt[1,] <- tt[1,]
Error: incompatible types in subset assignment
> tt[,1] <- tt[,1]
Error: incompatible types in subset assignment
> tt[,] <- tt[,]
Error: incompatible types in subset assignment
> 
> # and again fine
> tt[[1]] <- tt[[1]] 
> tt[] <- tt[]
> tt[cbind(1,1)] <- tt[cbind(1,1)] 
> 


# the prototype allows for the following, which fails in R
matrix(vector("list", 6), 3, 2)

# however the desired object seems to be legally in R as we get the same via
tt <- vector("list", 6)
dim(tt) <- c(3,2)
tt

# preparing to show further problems
tt[[1,1]] <- letters
tt

# works fine
tt[[1,1]]

# the prototype allows subscripting and assigning to subscripted such objects 

# erroneously NULL in R
tt[1,1]

# erroneously NULL in R
tt[1,]

# erroneously NULL in R
tt[, 1]

# erroneously NULL in R
tt[,]

# fine in R
tt[]

# fine in R
tt[cbind(1,1)]

# of course the same problems in assignments 
tt[1,1] <- tt[1,1]
tt[1,1] <- list(letters)
tt[1,] <- tt[1,]
tt[,1] <- tt[,1]
tt[,] <- tt[,]

# and again fine
tt[[1]] <- tt[[1]] 
tt[] <- tt[]
tt[cbind(1,1)] <- tt[cbind(1,1)] 



> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R 



Best regards

Jens Oehlschlaegel

________________________________________________________________
Keine verlorenen Lotto-Quittungen, keine vergessenen Gewinne mehr! 
Beim WEB.DE Lottoservice: http://tippen2.web.de/?x=13




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 18:15:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 19:15:14 +0100 (MET)
Subject: [Rd] Re: [R] expressions in legends (PR#1302)
Message-ID: <200202071815.TAA06435@pubhealth.ku.dk>

Robert Cunningham wrote:
> 
> Dear R-users,
> 
> A few days ago I met the problem of using text produced with
> expression() in legend() being elevated relative to text produced
> without the expression() so that the alignment with pch and lty is
> also messed up. After ferreting through the help I finally came across
> an answer, the adj argument of legend(). You can see and example of
> this in the Math expressions example section of ?legends. Of course,
> many users would, I am sure, overlook this option and 'put up' with
> the mis-aligned legend. I wonder why expression() causes this problem
> and whether anything can be done about it (other that the adj hack).
> 
> For those unaware of the problem paste this example into your R.
> 
> plot(1:10,1:10)
> legend(1,10,"Non expression_species",pch=21,lty=1,bty='n')
> legend(5,10,expression(italic("Expression species")),pch=21,lty=1,bty='n',col=2)
> legend(8.1,10,expression(italic("E. species")),pch=21,lty=1,bty='n',col=2,adj=c(0,0.6))
> 
> The first legend key is ordinary text, the second expression(italic())
> with no adjustment, the third with the adjustment.


This looks like a bug, so moved to r-bugs.

Let's simplify your example:

 plot(1:10)
 text(5, 10, "No expression ", adj=1)
 text(5, 10, expression(" expression"), adj=0)

So the bug is in text(), not in legend.
I'll try to investigate the problem later this day / week.

Uwe Ligges


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Feb  7 18:16:14 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 7 Feb 2002 19:16:14 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202071816.TAA06457@pubhealth.ku.dk>

Forward to r-bugs to maintain a record.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711
----- Forwarded by Woodrow Setzer/RTP/USEPA/US on 02/04/02 08:53 AM
-----
                                                                                                                      
                    Woodrow Setzer                                                                                    
                                         To:     bolker@zoo.ufl.edu                                                   
                    02/01/02 03:23       cc:     owner-r-devel@stat.math.ethz.ch                                      
                    PM                   Subject:     Re: [Rd] typo and user-proofing in odesolve() (PR#1295)         
                                         (Document link: Woody Setzer)                                                
                                                                                                                      



Probably r-devel is not the right place for this discussion, since
odesolve is not an "official" part of R (not even a recommended
package).  I'll respond here to get it in the record, though.  I expect
to have a new release of odesolve ready in a couple of weeks.  lsoda
already calls func() once, to determine the number of "extra" values
returned; it was foolish of me not to test for the kind of value
returned at the same time.  That fix is already in the next release.
I'll see what other defensive checking can be done, as well.
Thanks for the spelling correction.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                              
                    bolker@zoo.ufl.edu                                                                                        
                    Sent by:                     To:     r-devel@stat.math.ethz.ch                                            
                    owner-r-devel@stat.ma        cc:                                                                          
                    th.ethz.ch                   Subject:     [Rd] typo and user-proofing in odesolve() (PR#1295)             
                                                                                                                              
                                                                                                                              
                    02/01/02 12:34 PM                                                                                         
                                                                                                                              
                                                                                                                              





  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example
below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]
+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:16:23 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:16:23 +0100 (MET)
Subject: [Rd] failure of http://r-bugs.biostat.ku.dk/cgi-bin/R (PR#1303)
Message-ID: <200202071816.TAA06475@pubhealth.ku.dk>

Hi,

The following script

	http://r-bugs.biostat.ku.dk/cgi-bin/R

fails with the following error

	The system encountered a fatal error
	After command: 
	Received: 
	The last error code was: No route to host 

	Web interface using JitterBug.

when trying to submit a new bug.

Best Regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:17:24 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:17:24 +0100 (MET)
Subject: [Rd] R loads uncorrect readline library (PR#1304)
Message-ID: <200202071817.TAA06501@pubhealth.ku.dk>

Hello,

We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.

Running R on Red Hat 7.2 fails with the following error message:

$ R
/usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
libreadline.so.4.1: cannot open shared object file: No such file or directory
$ 

This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
readline-4.2. Both are supposed to be binary compatible.

R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

Best regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 21:26:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 22:26:15 +0100
Subject: [Rd] R loads uncorrect readline library (PR#1304)
In-Reply-To: <200202071817.TAA06501@pubhealth.ku.dk>
References: <200202071817.TAA06501@pubhealth.ku.dk>
Message-ID: <x23d0dasqw.fsf@blueberry.kubism.ku.dk>

papadopo@shfj.cea.fr writes:

> Hello,
> 
> We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.
> 
> Running R on Red Hat 7.2 fails with the following error message:
> 
> $ R
> /usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
> libreadline.so.4.1: cannot open shared object file: No such file or directory
> $ 
> 
> This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
> readline-4.2. Both are supposed to be binary compatible.
> 
> R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

A build issue, rather than a bug in R as such. This is what happens
when you build against libreadline on RH7.1.

RedHat supplies the readline41-4.1-10 package in 7.2 for
compatibility, which is the preferred workaround.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:54:27 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:54:27 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072154.WAA07020@pubhealth.ku.dk>

gregory_r_warnes@groton.pfizer.com wrote:
> 
> Third try...
> 
> >  -----Original Message-----
> > From:         Warnes, Gregory R
> > Sent: Tuesday, February 05, 2002 4:12 PM
> > To:   'R-bugs'
> > Subject:      layout and piechart diameter problem
> >
> >
> > I've been using layout to create some graphics pages which include pie
> > charts.   (NB: No piechart arguments please, the main chart on the page is
> > a proper bar chart representing the same information.)
> >
> > When I plot pie charts in a column, the piechart at the top of a column is
> > always smaller than the others:
> >
> > For example:
> >
> >       layout( matrix(c(1,1,2,
> >                        1,1,3,
> >                        1,1,4), ncol=3, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> > In column 3, the first piechart has a radius something like 2/3 of the
> > others.
> >
> > This also happens for:
> >
> >       layout( matrix(c(1,2,
> >                        1,3,
> >                        1,4), ncol=2, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> >
> > For this:
> >
> >       layout( matrix(c(1,3,
> >                        1,4,
> >                        2,5), ncol=2, byrow=T))
> >       for(i in 1:5) piechart( 1:3 )
> >
> > the piechart at the bottom left is smaller than the three in the second
> > column:
> >
> >
> > This occurs both on the x11 and postscript devices, although it is less
> > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > I've only recently started using layout, I don't know if this occurs with
> > other plotting devices or commands.

Probably only if the functions are making use of par("pin") (and friends
?) as piechart() does:

layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
par("pin")
plot(1); par("pin")  # Here it goes wrong for the next plot.
plot(1); par("pin")
plot(1); par("pin")
plot(1)


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:59:16 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:59:16 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072159.WAA07049@pubhealth.ku.dk>



Uwe Ligges wrote:
> 
> gregory_r_warnes@groton.pfizer.com wrote:
> >
> > Third try...
> >
> > >  -----Original Message-----
> > > From:         Warnes, Gregory R
> > > Sent: Tuesday, February 05, 2002 4:12 PM
> > > To:   'R-bugs'
> > > Subject:      layout and piechart diameter problem
> > >
> > >
> > > I've been using layout to create some graphics pages which include pie
> > > charts.   (NB: No piechart arguments please, the main chart on the page is
> > > a proper bar chart representing the same information.)
> > >
> > > When I plot pie charts in a column, the piechart at the top of a column is
> > > always smaller than the others:
> > >
> > > For example:
> > >
> > >       layout( matrix(c(1,1,2,
> > >                        1,1,3,
> > >                        1,1,4), ncol=3, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > > In column 3, the first piechart has a radius something like 2/3 of the
> > > others.
> > >
> > > This also happens for:
> > >
> > >       layout( matrix(c(1,2,
> > >                        1,3,
> > >                        1,4), ncol=2, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > >
> > > For this:
> > >
> > >       layout( matrix(c(1,3,
> > >                        1,4,
> > >                        2,5), ncol=2, byrow=T))
> > >       for(i in 1:5) piechart( 1:3 )
> > >
> > > the piechart at the bottom left is smaller than the three in the second
> > > column:
> > >
> > >
> > > This occurs both on the x11 and postscript devices, although it is less
> > > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > > I've only recently started using layout, I don't know if this occurs with
> > > other plotting devices or commands.
> 
> Probably only if the functions are making use of par("pin") (and friends
> ?) as piechart() does:
> 
> layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
> par("pin")
> plot(1); par("pin")  # Here it goes wrong for the next plot.
> plot(1); par("pin")
> plot(1); par("pin")
> plot(1)

And let me add, it is everytime the second one:

layout(matrix(c(1,3, 1,4, 2,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,2, 1,4, 3,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,3, 1,2, 4,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Feb  8 13:25:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 8 Feb 2002 05:25:27 -0800
Subject: [Rd] timing Mac R's
Message-ID: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>


--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Here is the same thing as before, now done a bit more systematically. The
rather bad performance of R-patched on eigen is a mystery (to me), the 
gain
in La.eigen when using ATLAS is probably not Altivec, but using
threaded level 3 BLAS on a dual processor machine.


--Apple-Mail-1-507788993
Content-Disposition: attachment;
	filename=timing.pdf
Content-Transfer-Encoding: base64
Content-Type: application/pdf;
	x-unix-mode=0644;
	name="timing.pdf"

JVBERi0xLjMKMyAwIG9iaiA8PAovTGVuZ3RoIDEzODAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNv
ZGUKPj4Kc3RyZWFtCnjafRfLcts47O6v8G3lGYvhUxL35jpJN50m3TruNjNtD4qsxJoqlleW67Zf
vwBByS9lRweAIADiTUoMOXxiKI1h0sphpDQTPB5mL4M388HFtYmHQjBrzHD+5Fjniy/B/Ob25u7t
KFTSBLeTkTHBlBazP+5H3+bvLq5FNLTMRgqlhGEK1qG0LEkSp+DdKOLB5G4USsODyyuC76+uPn0m
8UgenBozE4lhaCTTJnLi047Lwp5GpoSZWHrzPozCSAagPRLB3OFXDr9zOFH2du4PCoVOmBAKTOXM
SuGUCTYKBec8uFk1dbXYZk1RrcBgkfAoEKgFTg2FYlaTb7IVeJOvsuVLWn8Hbik0D2QPt2q5p2n9
6BRDJH6MhAnyekMn8UjGJ7Kxlz0wjiQ/3BN8wDOjKH7lTHkqNy3TzabIUIrLJFC9Uuq10ywolBgT
ldgTWbJUt5KXab0rvPQ/IyHEgZtaR4HuOVjv3ZyRpGBAA1TxRL0i0nk4C9dpky3zhcuZ5YHp5Vd7
/kU+glKmHJQYkSTWJ1LklelyV62ycot+bKgyTBA5fgGFxKUehjpmkY3agjqvcegRqZWv35vz8tZQ
3tZv78tYuIBIX/CXjvLJ4dMDnhuHt03RV/YKOlNHR2WPKVbSBs2y2BC2qpqcsJ2HWfWyTmu/eKq2
EI2gptVBBXvx6ongrGX3nLdpRggWE8IHRnC+9Jq/cqHrTUMLsAYDGzrzo6MkNiggE7NvJcBnYVss
iT7uKxGMgWrVXq4CrCa0WdZ5TkLOQ6RR7V48CEHrQx/BZh1pZ/N5de2LXp0EBimk32hvB1AgVFCA
6HZWpCXRvB/jE1YuL3h0wWXLtK/147M6xefWHWhOoiBdoXBs/RGAHBwRJz3tEduTg2JKNkLUbRjH
6EBzz1uVXYJA4aHseYth8UH/BfV2RUjhoRs9SRI8jPvoMY4kl97WowOWKea+m3dAeKkWeb+WVvtu
WWRLz5ynK2/Uri/ZdZ6W5S+aU4ti0xSr522xWRJhU/w8m/AbRqPivKApXtoGL2m2LFZ+sfNwu/GI
ixHAlMBiSzUDY/LtX7+J9lYTbCrM3Q6qHK6jsddXNEvCnNcAHwgIDoNXEf6VG24+KgtQ9DQgJYsi
fXov/L97SsVdOSB+VEpKJc473MBhU5RY2rgioxG7/fuzR+rpmEScHUiCEHnpJ5l5xM0dQBrfqn2T
5PrDDB8o89nkjmGq/TDCeut6OTkdcrjrZwXkoiyJsjcbyT7WQH/OMiJJON1dnkDEKE/W6zLv6YTj
wGiNGkILrzXlcuJI5LhWbXiQK44JIce1H3dIOfYSKfN263QCoVw7Sc9LnsIsZTs0FLx93k/uW1La
EAahcHyw7eOA18GYKCSJhIMZBkuqKdV7L59lACiPMMT7TQQvuAgm7tExd+bhulo3xUvx29UVlz5K
QKcoAULthBg2EULMUsFyiJkRes9YHpuHJEXgTXeaK2anHcbEIl+Me0ztusgPeZwaq+fS4+s6z4p2
onMwP6/Tpr1MuB8KgEzKptjbk2GN9DQildbnUcIDkBNwGablpiKsSb+PREd3xiBSrddV3WxXRfPL
73j+7jWAi7x4zldeI/ojrAzepwx3g3ZLunF7pPwHmpzWRbV9/Zo/vUE53Tamex2278tq2xBSwuxM
a8LT8jl/rFNaPLYvdBeawdV8IPzvUChkwuABBn8dlnF4LsH/0L+DL9/4cDHgw3cDzpRNhjvAYUha
O3wZGMviOPLLcnA/+Ngp65yA55Wx+1+rg3+k9s/qMm3ynj8oy1QUe5Y/yfZrcGOb1v6mScYEJeeS
dQoSUBA5BdqwGHSF7asP36Gtz/8BvaNwgWVuZHN0cmVhbQplbmRvYmoKMiAwIG9iaiA8PAovVHlw
ZSAvUGFnZQovQ29udGVudHMgMyAwIFIKL1Jlc291cmNlcyAxIDAgUgovTWVkaWFCb3ggWzAgMCA2
MTIgNzkyXQovUGFyZW50IDEyIDAgUgo+PiBlbmRvYmoKMSAwIG9iaiA8PAovRm9udCA8PCAvRjU3
IDUgMCBSIC9GMTYgNyAwIFIgL0Y2MiA5IDAgUiAvRjU2IDExIDAgUiA+PgovUHJvY1NldCBbIC9Q
REYgL1RleHQgXQo+PiBlbmRvYmoKMTUgMCBvYmogPDwKL0xlbmd0aCA1OTUgICAgICAgCi9GaWx0
ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp42s1W227TQBB9z1dYfnIE3u6svTcJHpISRC+0Uhsu
UikSFBcsEQcS94G/Z3fWDd7ENU4wAUWZPY5nzpwdr+IDATUfCIAJIiQLhNJEaRXczAbj6eDgOYhA
ES1EML3FzOmnq4gNY+A6VdHxUNBodDaMGafRs4lbTyeTV2+G19NjLAYgmnNbDYkkKk2DmCVEgyMi
Lk+weh4nLE2qVuNVgiZcpPa+ItzodLdNSwGRESBYdIjxBcaXGEcYLzDnxBFxXesUgwAizE8xo0Qz
hpRf8q8fs0X5JL69K27KfF68o5zaAIaH0ggO7A/zuzJbWLDMvq8SHnsX4aPQrjFgreluNMdg9p4q
bPRtkRelTQ+rlo6/eMopDTdqpF+z/LEssxkp81lmL7P8c4ZCKyoLDY1lqX/bVPyXjLJ9UkCbRrW9
DMvT887+BeX6tE4/kC5Hq12JIen/LOxIKvegtGFquxyzB8Rs+wx7YlX7YA2X818zE9sOzBbbdVHM
FzPX/r34g1Ftz6f+Lp83Hhn2sB3Z83b2wrfuChgnVArzCuYENMceyW9twWG7Lai/+MeIzzEao5DI
NHqNF847XCC+xHi0SrWeYlNrDKky5ggqvwCVWKjkclnLRZMDlZ6jwlmj80u3viVNbqQqMa6EiGra
V3DtTkyTR2h4OpjPUpNyNqrsiiYy9eDq9j3oSMOEB3elAeXBVhrZPgT8X36ob0LrfbmZqfbxKuEe
dCMyx9CDXTewScN93FUPTqL51d7tGVBCtQe7bmGdBrQHdzsRRgL3YBPNYDId/ATwmkQvZW5kc3Ry
ZWFtCmVuZG9iagoxNCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMTUgMCBSCi9SZXNv
dXJjZXMgMTMgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVu
ZG9iagoxMyAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNjIgOSAwIFIgL0Y1OSAxNyAw
IFIgL0Y1NyA1IDAgUiA+PgovUHJvY1NldCBbIC9QREYgL1RleHQgXQo+PiBlbmRvYmoKMjAgMCBv
YmogPDwKL0xlbmd0aCA2NjcgICAgICAgCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp4
2qWWy27bMBBF9/4KIZvKC034fhToIk2bwkWTArV2aRa2ozQGYiuw3EX/vqQo2Ro/VIWFFjoih5cU
pZlLmhB30YQpC8ayRBl/N8liNfqYjy5vqEoMWKWS/KmOzB/v03xyO7n7Ms44k+nt1ViQ9Do8/Hg3
HWdUCi1SPn7Iv17eSJtQClZKPz6jggNjScY4WFpL3dOHcaYISS++zeB5+TIvNtvQsP5ACSEXXsZN
m1E3RJj9GCZczN1ViNUGuEG4625hoAwTCGNllELYK6MPNqIq91ughr0/lSAZwqiFu7FEIxy6cCwj
gEqEQ1dz9P767Ptz0pmRCQFEYt4FtHBm6ViIcxAIhy79QEaBZZhPradOr31+OFkmQDayLlWgSSLd
CapzhzaZOFm7fBMyvX6ZVdVyASdEpQajTBM/rffWj3gqN00wIZ1oroG73QnR6xChutO76sBV0//p
xHSUgRJtgA5zPZZF5Uml67KZ/iehYr2snkPzvFjMfldF6CqfQuOqWJWbP6HtdVPOX4pVBaerCgVF
jAMNzMqD3+mgqMihNYURUBphXE5Z0F2ipulsYVBGWeBd6hUx/RswvKpSaYEhjCsH7g+UEnNvcpoe
IYbwTXXl2GAG/wuUAFUI43aC7AsjeVNhPJTZlWny7zJtIoxWn7c2zRHGOqQ0CGNlbJeG5tZ/2KzW
CKNt1iCMleESYfQx46TN5svVcv0rhFTb8vW1eAwPs+37AHv7Ba6PsO0dZHV8kNUxxdLv03B3BWln
kEhaKeCWIsPz8WcMT7hE5KbH8HyK2X7DM9buDc/PFQzPU214TPGO4fnmneH5B294/t4ang/3hpfV
H8Wdp91BhFn0bc55IYk0QX3eBIVBGGuC7XGowVMyo8/56C/XPssNZW5kc3RyZWFtCmVuZG9iagox
OSAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMjAgMCBSCi9SZXNvdXJjZXMgMTggMCBS
Ci9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVuZG9iagoxOCAwIG9i
aiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcgMCBSIC9GNTcgNSAwIFIgL0YxMDAgMjIg
MCBSIC9GNjcgMjUgMCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyOCAw
IG9iaiA8PAovTGVuZ3RoIDYxMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFt
CnjapVZLb9swDL7nVxg9OQezIvUesEOHpsCKIgM6bz0UPXRrtwVYH1jz/zHJshPLchzbRQD7M0V9
fElkMGPuhxmSAqUpU8aCsSb7+bT4VC5OL1BlBqxSWfmr0iwfbnOxLFBaYfLLpWL52XpZkGT5+Sq8
r1arbzfLu/Ly9ELaDBGslGF3QRwsVhS3eOe0BWP5+mxZKPdGC7aN0NSLDXCMngMdhzB7Er/j5M/m
74/Hf9vw9fwRGWMnhzZw1raqBFiK8U6hAeOIOHAT40EiPUAkeIzHelTl4uoeOumQA9mIa8CA6wju
lhtwIIQujWyjsaV8jy/Hs5AeikP+G9pVoIZjTXdpiCI4l0bICE5KxNvLPgVqXPwoQZkIznLc7eUy
gvNoFDAdwbGHMolf912DcvO0ef4dVN62L6+vjw/h4377IYDGEwYou6hZC15U/XLf8pCEa6aYFRwB
eeidEPQUtfUkkOB1dz3fKViQSvh1A9raetnbo/zaPfMb9+D550qw7qHlGgzJet/3lNYCNUZd71ZY
sVL+tXoG2i+VfN0TW4FWgjXGdXXm2ibV0WEdn9Qt3arvY23qOowJhJZye04UtXaB2p09Pdzp5cCd
9hou/6wpGWM7GXZlFRq4RgKkSXlS2XEe1cOj6SiPfsfE8yrSMfqpSpEZJyUdSfdwKAp/chIyJ1Vs
BJlOybCPTIjpnk2cfl6DAG03/a5dTy4tAaeUh08urfPH9PjDpvozagR2Y3B9SiW1cFI/vaYW1pPx
PjI+48h5MtHr2ZxTMm4oNv9gZGLXS2cEgUnstVSYw2SLVbn4D5AUfKxlbmRzdHJlYW0KZW5kb2Jq
CjI3IDAgb2JqIDw8Ci9UeXBlIC9QYWdlCi9Db250ZW50cyAyOCAwIFIKL1Jlc291cmNlcyAyNiAw
IFIKL01lZGlhQm94IFswIDAgNjEyIDc5Ml0KL1BhcmVudCAxMiAwIFIKPj4gZW5kb2JqCjI2IDAg
b2JqIDw8Ci9Gb250IDw8IC9GMTYgNyAwIFIgL0Y1OSAxNyAwIFIgL0Y2MiA5IDAgUiAvRjU3IDUg
MCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagozMSAwIG9iaiA8PAovTGVu
Z3RoIDUzMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFtCnjatZZNb9RADIbv
+yuiXkgOce358vjAARBFRZRDm1vVQ+kuKlL5EFT8frzJwjaZbLIZQDlk1vI847U9fkMF6kOFCQJR
TBHi9h2Lu8+rl83q9IxCEUFCKJqPrWezvi6b84vz92+q2hpfXryoHJavuh+Xz66qmrxjV/rqpnl7
eualIALxfru/JmfBmKI2FoRa1DXdVHVALNUrWN1sdI2AuLdyz7pfKl/jqUlZLvZhJz++fn/sll+e
88mUKwWGGJUb+weHCLZv3i+ncOzBuxTHARwdgeMBLhKQT3Fq5nAY15Ztn3eFG6dhdbE6MLArDj9x
amtCuwpf1t9uH+/uN2sYK+POtSYGI36Q+vtPDx82++x7xOn8I4iM1R1ped0VNmiX31Y5AsYJjM0Y
jF1GRw7SQjiTFyGI6eliwOHy0xVGLoXp5fLL86Lb/Ghk1mTk5d0tLO0YcK5bPakKeB7aZusL/o/j
Ict2MRmK5TSU7dyYCWU+C2mDpO1JYaw9KaM9pZ2B/aAFBJf+kcNBhb+c4mE6GVq60Sni5R9OEc6D
xZA93zhf18RDxFQ5JHTzdrGuCRg7IkQIjjN0jSP4EdXVU5Cydc0eoWvrTUW+/FkRlpuH/65uDiQZ
EGoLS++Vaz8qhpzUNs8JMeVEXDo7F8uZx+47pn8N1OoyRMMJECYwtRpefqd0m6UxWJbMH5az1etm
9QsCmGW2ZW5kc3RyZWFtCmVuZG9iagozMCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMg
MzEgMCBSCi9SZXNvdXJjZXMgMjkgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQg
MTIgMCBSCj4+IGVuZG9iagoyOSAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcg
MCBSIC9GNTcgNSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM0IDAg
b2JqIDw8Ci9MZW5ndGggMTYwNSAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJlYW0K
eNrtWltv2zYUfvevMPIkAxXLQ5EU+TAUXZtiLYJ1a1x0QNsHxVZiob6slrOg/36HF/kiKbLSKJ7b
BQEsipfvfDw8/HSkEPoU/6APTBIZs75Umiit+qNZ79dh7+krkH1FtJT94aXtORx/DOQgBKG5Ct4M
JA2e/z4ImaDBy1N3PTs9ff9h8Hn45ukrofsARAvhRocsIhosxEf4PAglpQEQzl2JEkqLOhmV62wJ
QQ0MIAxXZRxBqzhC3B2HixocuCvOyVlCJtn0Il2uXMX8F6CUnuyMiUu2KYnQELBd65Tw3dpNsWki
lDBRBxaJ7wLjtWBCtwArTfMkX2ycIk8a7QKJa+wCUfw7JoFrS+vAWrk3roBFUS0YuzuzHY/EzR6J
I2dY7RqOud00W9WbYhOciu0GLMMpRSRrAVf2iuREqSqcFESr2+GszGyUAiKOcxT9EK9MOsaCuI6S
bXcUhPHIq9KLdQdNhOSmXRGBkuaa3yIVFqBWScCupnxmf9/bmnNbfm1/t3ue19ALgUsCmqOeUaIZ
s/DDSerkb5VcTH3xIp0uBkwEN+72KjM3/wxABGnuqhJ3+Xqdjb64Yn49myXLb+5mcekxC/Blml9P
V7n1Re902AOv3hEQEAwJafQ/10a9v/Y+fqb9cY/23/Rw06Ok32CZInHdn/WYligEkb+f9s57f67B
QlSO9fLehmTHUURyJR9bu0DoMW1W5z4YShIey3uCCAKqz/GHbz/Xth9NLkZ+Ey4eS66N0A/hevjD
szAPigqNmESMd0UD2vA4q/MGblnQh6VR6w4UFH3QVTmXZQ6A0kk74RAThXLXhkRcJoESRCV0QcLs
VnbPjRYaXQHUldAM+5l0qG2YvEiWF4u5U+u35+76V3nRFBCceCeLxghXrUIHdCV0OKGcHZiFkA8n
KSYvxMdxGxoVQcFXkyhWnbDARzC0UrZYVVjgbpAdyZqAlitSo2s0ZgfVeBZVwoIxEuMMjknYjFAV
WfSPqEcvpkmeZ6NjUCNGj0ON1KMardVI/+RqpDDL0m1IPHtWIaEJFfGjGO0TI3H35Eg3yZHoSgjE
feToUCxA8iY5El3JkbiPHImu5GgPC8Wa5Eh0JEd7V6RJjkRHciTuI0fiyF76VGcvfceha62enS+T
5U3mhQ0IDqgVtW6yWYoTa8OJk+rHAgz8qJvHmCA85m1oiKqa4BaKOnJFxFplwYxENQKvuskr2qdY
DI4hxYIjeOGDWDy+8H2na0V7LfrD/LMhWY0m6bhJkQ6W4MADplkbRdrDQrMGRRJdKdI+VxDepEiH
yrJqcr3/IMuCh8uyWm8bULRJkcSxKVL8Y2ZHL9PNP0Gnj1nSUWVJQMQxZEnNmvS/ypKaNeln+38f
vtaC+fITUcJZvOdT0jRNltNvpfMR4+zSyMtlukzno/Uhi2W6PmaxKjouk1myykZkEEaSBh8Giga+
abSYj6bX49SecxFExxh4oAiLpDX8iQoK+AODkEMcvDJKtlgOkDwL0uwqnT9BGModJ9DRWv1M2ene
Ms8Wczciy11DcrG4Xrkq7mpW2Sz1jZcDwFnkq9SbWU0Sj+eNsOLLmqGMXDWDneM+W2bt0RE7oXIn
MzFWM7GIyeAsIcXcIi6d2YjF67mZPltGctd6k60mru35AACC4dnzc9dil8Q0+HmbOuZq3LwrE3EH
jbY9wSgOz93VBQBFwvPU1RjbFtrcbMw/8ePmY1+48J1EEIfKgznPm2LZnvN8YbF6rmr7A2drp0d1
0YQAhcchBmPOuAwEuJAxJ4UWs3Q1yeZXrjpfLZP5le9ztfD1NLCRhlVuMUzpXfi3eyWw2DS4mWSj
yW0et9a4Qhiz2UxpkkwvXSnBS+DbC0/5Fl/r4tMMNxPwdTem68LdrDcH1zsBZKhJZahNPUK2cr0K
QunX62SKnKqLsKFid79XgXfheCf1cAes/FoV8d28UHyzUK/NQFUojzKrYU7w2aok/5KXWtcZkKK7
GmAqMt+7iEVlT5x6BB+LWNyJReUn5o3csu/vEI7xepZiM8vCLYjAPE9mDC7T1BcX7vqJAncGfL2n
DdrTtpHiqGNd4pG2wI3lbF4Y8DDObU+31GO/wOWOvl16u8vFxrPmUVFEn73xNEXJu3hf5KvrR0uT
L80D+l8H9ZIeZW5kc3RyZWFtCmVuZG9iagozMyAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVu
dHMgMzQgMCBSCi9SZXNvdXJjZXMgMzIgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJl
bnQgMTIgMCBSCj4+IGVuZG9iagozMiAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkg
MTcgMCBSIC9GNjIgOSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM3
IDAgb2JqIDw8Ci9MZW5ndGggNDgxICAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJl
YW0KeNpdUk2P0zAQvfdX5IYtEWM7sWNzYqmWVREL0jZISMDBbdw2UupKsbsr/j3jj5YuijSeGc97
8zwZVlH4WMWlJkrzSqp4qmp7XHzsF+8+MVkpoqWs+l2q7IefqF89rr4+4LrhAj3e4ZaiZQ6e3qxx
zUTbtajDv/vPCc4Y0UJEfM24IFx1Vc0bolni+kUFlWAYrlvWoaezc6PbA4sSKBxsdpZm3pxc9CV6
xkwgO/sxJwQa3aV6tqV+GHcY5OzsbF3IMOuizudxPrkjJH0pPNniuVOIiisGr+UMpILCViWJ+zGS
5b645kKhycyYKbRPoX7Vbms9gWEA44N1djbT9Cdjvq3z+SNjvLVHnzPhlM9NoTMlDQ+DlgW+GUO+
3WFGkfHBzkkvfSU1HIyLZRTZ43kywQ45Wk7G+3H7Nkcvh3F7yO5VBs1t6aURvW2U4n/czoT/RkLL
8yjSJP94ySsNe9Ok/85bIlsNJyedbJPS77gWaW/Afkn2DsZGKVpf8R3RXYQ3HZGNuuwebhiUthq8
WjK0AssBFO1tZlnyiUzIGzFAp+IOpr2UifS+PppxKmMYhhk3HbLeX1f4CpaUNLQpUt4Xcn1zTxrR
levBTtaeXz74YAI5bydD7HCOkMV9v/gLD9ndpWVuZHN0cmVhbQplbmRvYmoKMzYgMCBvYmogPDwK
L1R5cGUgL1BhZ2UKL0NvbnRlbnRzIDM3IDAgUgovUmVzb3VyY2VzIDM1IDAgUgovTWVkaWFCb3gg
WzAgMCA2MTIgNzkyXQovUGFyZW50IDM4IDAgUgo+PiBlbmRvYmoKMzUgMCBvYmogPDwKL0ZvbnQg
PDwgL0YxNiA3IDAgUiAvRjYyIDkgMCBSIC9GNTYgMTEgMCBSIC9GNTkgMTcgMCBSID4+Ci9Qcm9j
U2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyNCAwIG9iaiA8PAovTGVuZ3RoMSA4MjcKL0xl
bmd0aDIgMTA5MQovTGVuZ3RoMyA1MzIKL0xlbmd0aCAxNjg1ICAgICAgCi9GaWx0ZXIgL0ZsYXRl
RGVjb2RlCj4+CnN0cmVhbQp42u1Sa1QT5xaNdpXWiN5qLyhLqx/KS1PCTHiGNK0oBhDiA0IEQe04
mYSBMBPCRBMVhOIDFKuAIi20BgKCWgi1NK0P5KVixVBBHpeKCEpBWMqzRaxK7wDarou9v+6/uzrz
Z87Ze87ZZ59jbbk+wN5DQm7DBCRB2cNs2B0IRQHBawHMhiCIaW29SokhFE4SngiFuQOYy3UBHioZ
4LgADuTOcXWHXZnWYBWp0ChxWRgF7NBlkyQhjoYhmBwEKPDtSASbJnnjBIUTsr8iB9sEvw98CJTN
hGEgwVEKbMNkOMF0GFflQ0hJwJ1MS1SKV9B2TBlN6wJ2E0qXAVqnhCTkGiDBpEyHtSSFoxiwe60Z
x/6v5P13cS/5fyic2kigksvXIpF0qwnfXoORSFyueUlAqDARHolN5WzEJhsKMQmuipyK+lCIHEc9
CJkcA9BkCo8W4GpMsh6n0DAgReTR2GQ+kJBgSjlOYOvJaHx8acAehqApmCgMRyMILDoaOE9CGCGZ
Kpp2fUKyg0AoEPv7siZPYgJbj9BOiTSKP8SMkydi+M+YnlSJq0EIRK8Gpon0++pr85ReqwmUlIw7
z3F2AYhSiWiYEF2K4+wMdsEAp1WrAaam53RgEyRF/wIUKioGSEklc/wYXNyAAxalQuTjaebrY6xc
Sap3QcCe6+wEYMjJEXAhKOY/aYEEHqXCfDxpP9xcHbmOE1lUpVRiBDVxdLRBr2IpTm8Bw9QYymxp
IlHe3vAThv2nY1frbp0x+enA8yg0LydfnJfxW/F2x6S2Q+emNd4R2HqvicuFDfo7F4f4Hhsb9B2x
EQv38RvmWY/6NYqmn008G9vfdmeoshoutRbvDiihbj7hzj+YxuDOOGixJ8u3O1io8WS9f1DmGdMp
yODMWd0clpnSv3RLwWwD48ynS+MkgyK7FelXKgPXjh2+965+9HYt1P5Zmqp8rKumONyiyMQkQrzE
sJDc6cWC1900PfmjTbfhY36uZU9t8eXkwhgP7YtvHcSFzVVY3pa+x4zNxpY5N/nxX5xcs2AeJ/zj
jIQ+34jCy/yinMG+ood7dTJDZhCySFR+RfV7aHECC7Vtz5qvSrtfpB1C36mHZng7vptTUlHuMee7
D7sPuZm3Vs9ZZ+ECj6SUmbW2ZI8mjnGWu5apOiysEkLvv/d1o2XE46OjHyxacDx1QflOXXPQ+Y5e
7teJ3ILWiq67s3qkPxNxDikLbqgLGwLF3UUln2r63KJuFzKdhTMrVzHu5rHqQ2/026StENcVhGuV
Ra2bmorQkUc/q9b4mFGtHwQlvzls/KWiwk93ZvHyR56RM+SznuwoL3HKOWZ+SACZ/ZRTGK3KeDu4
NtA387aJ34aTF1z8Am0hxNRqK+HfuKO3zZxKPd64vG4YZpf2P9YM1WYevp7Qu1J3XEaWVp178dT1
819FWd8GvTjJy82nZrMeCt+8QNZlRzl9f9nOK43hxpJuze7PNbbuVx5IyDQPkQ9ozmRtUG4pIT+6
e0TLqnb63b3+FJ/H+kT4Rf6DXbxzma49/uvYVsUunURSbfwj09jELg01UuMrWXLNKZWX5ys56tob
0J4YP+/IN1VDuqPzWq5Ww4fSuV4X9IkNIT1Ni04cNRiml4Wor9wYnv7PxdTtJCJc4O+1/8hV+ROF
1fWt0MxpRq8LIXuuJ9t8efXF5uSRiFIr9Q/tni4DLMi/0VO+u3HgaeUb55an6k8/M/HTWsH3n204
toy1GMSfjpeLt5tY9jVtao5igoT0rCNuv+Hr4uPYaelxKazOf3hqbymasnOTvBoY4s7I8+kXL4Vu
3PjNqblNxnb+nfuXgmdZBTwOHK2yGzzubuOvXpa++o3vLAzbrI/lXpsbPw2p68l4K+hZwcKuK7Kn
NdiAs119TfqPliuGWpx+zVNMr9n91XPhibrz5azgMUd9Z7myv/mJb9ym842J5FjxYFDqnuF7G5im
FVt0O43xVYO8i3z9fmWr7ittyYcP0j/ncQf25TxjmBclxRl7d1bzYwPyY4qRxV2CoIJLbdqGGzf1
Bd11Z4XlxsqoHV7/Gmxe6qjpT6pSLInbdy0z6HlprdnCoX1tqv7CvZ3mMWVnRQ+1K3xrvevdBubr
Tn2yp3fuqs6R69LatzpqygoUll63bBnSRwcD8j/Sg1uW9aH2yYe/X+KfHeY9bMG7N9Pmy4rn9QWz
f8hhpBjNTgGOvWk04B14Gmr7oIMdFfkQ+h8f5t8F/i8KoHIMUVJkJKKMYP4bSF+g6GVuZHN0cmVh
bQplbmRvYmoKMjUgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9FbmNvZGlu
ZyAzOSAwIFIKL0ZpcnN0Q2hhciA2OAovTGFzdENoYXIgNjgKL1dpZHRocyA0MCAwIFIKL0Jhc2VG
b250IC9GTUZWUksrTVRTWU4KL0ZvbnREZXNjcmlwdG9yIDIzIDAgUgo+PiBlbmRvYmoKMjMgMCBv
YmogPDwKL0FzY2VudCA2NjcKL0NhcEhlaWdodCAzNjIKL0Rlc2NlbnQgLTkwCi9Gb250TmFtZSAv
Rk1GVlJLK01UU1lOCi9JdGFsaWNBbmdsZSAwCi9TdGVtViA1MAovWEhlaWdodCA0NjAKL0ZvbnRC
Qm94IFswIC05NTQgMTA0MyA5MDBdCi9GbGFncyA0Ci9DaGFyU2V0ICgvZXF1YWwpCi9Gb250Rmls
ZSAyNCAwIFIKPj4gZW5kb2JqCjQwIDAgb2JqCls3ODAgXQplbmRvYmoKMzkgMCBvYmogPDwKL1R5
cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAgLy5ub3RkZWYgNjgvZXF1YWwgNjkvLm5vdGRl
Zl0KPj4gZW5kb2JqCjQxIDAgb2JqIDw8Ci9UeXBlIC9FbmNvZGluZwovRGlmZmVyZW5jZXMgWyAw
IC8ubm90ZGVmIDEvZG90YWNjZW50L2ZpL2ZsL2ZyYWN0aW9uL2h1bmdhcnVtbGF1dC9Mc2xhc2gv
bHNsYXNoL29nb25lay9yaW5nIDEwLy5ub3RkZWYgMTEvYnJldmUvbWludXMgMTMvLm5vdGRlZiAx
NC9aY2Fyb24vemNhcm9uL2Nhcm9uL2RvdGxlc3NpL2RvdGxlc3NqL2ZmL2ZmaS9mZmwgMjIvLm5v
dGRlZiAzMC9ncmF2ZS9xdW90ZXNpbmdsZS9zcGFjZS9leGNsYW0vcXVvdGVkYmwvbnVtYmVyc2ln
bi9kb2xsYXIvcGVyY2VudC9hbXBlcnNhbmQvcXVvdGVyaWdodC9wYXJlbmxlZnQvcGFyZW5yaWdo
dC9hc3Rlcmlzay9wbHVzL2NvbW1hL2h5cGhlbi9wZXJpb2Qvc2xhc2gvemVyby9vbmUvdHdvL3Ro
cmVlL2ZvdXIvZml2ZS9zaXgvc2V2ZW4vZWlnaHQvbmluZS9jb2xvbi9zZW1pY29sb24vbGVzcy9l
cXVhbC9ncmVhdGVyL3F1ZXN0aW9uL2F0L0EvQi9DL0QvRS9GL0cvSC9JL0ovSy9ML00vTi9PL1Av
US9SL1MvVC9VL1YvVy9YL1kvWi9icmFja2V0bGVmdC9iYWNrc2xhc2gvYnJhY2tldHJpZ2h0L2Fz
Y2lpY2lyY3VtL3VuZGVyc2NvcmUvcXVvdGVsZWZ0L2EvYi9jL2QvZS9mL2cvaC9pL2ovay9sL20v
bi9vL3AvcS9yL3MvdC91L3Yvdy94L3kvei9icmFjZWxlZnQvYmFyL2JyYWNlcmlnaHQvYXNjaWl0
aWxkZSAxMjcvLm5vdGRlZiAxMzAvcXVvdGVzaW5nbGJhc2UvZmxvcmluL3F1b3RlZGJsYmFzZS9l
bGxpcHNpcy9kYWdnZXIvZGFnZ2VyZGJsL2NpcmN1bWZsZXgvcGVydGhvdXNhbmQvU2Nhcm9uL2d1
aWxzaW5nbGxlZnQvT0UgMTQxLy5ub3RkZWYgMTQ3L3F1b3RlZGJsbGVmdC9xdW90ZWRibHJpZ2h0
L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNpbmdscmln
aHQvb2UgMTU3Ly5ub3RkZWYgMTU5L1lkaWVyZXNpcyAxNjAvLm5vdGRlZiAxNjEvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L2h5cGhlbi9yZWdp
c3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJpb3Iv
YWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Ivb3Jk
bWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0ZXJz
L3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVzaXMv
QXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMvSWdy
YXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2FjdXRl
L09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9VYWN1
dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2ZS9h
YWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9lZ3Jh
dmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1mbGV4
L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRlL29k
aWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJlc2lz
L3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoyMiAwIG9iaiA8PAovVHlwZSAvRm9u
dAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQxIDAgUgovQmFzZUZvbnQgL1RpbWVzLUl0YWxp
Ywo+PiBlbmRvYmoKNDIgMCBvYmogPDwKL1R5cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAg
Ly5ub3RkZWYgMS91bmkyMEFDIDIvLm5vdGRlZiA0L2ZyYWN0aW9uL2RvdGFjY2VudC9odW5nYXJ1
bWxhdXQvb2dvbmVrL2ZsIDkvLm5vdGRlZiAxMC9jd20vZmYvZmkgMTMvLm5vdGRlZiAxNC9mZmkv
ZmZsL2RvdGxlc3NpL2RvdGxlc3NqL2dyYXZlL2FjdXRlL2Nhcm9uL2JyZXZlL21hY3Jvbi9yaW5n
L2NlZGlsbGEvZ2VybWFuZGJscy9hZS9vZS9vc2xhc2gvQUUvT0UvT3NsYXNoL3NwYWNlL2V4Y2xh
bS9xdW90ZWRibC9udW1iZXJzaWduL2RvbGxhci9wZXJjZW50L2FtcGVyc2FuZC9xdW90ZXJpZ2h0
L3BhcmVubGVmdC9wYXJlbnJpZ2h0L2FzdGVyaXNrL3BsdXMvY29tbWEvaHlwaGVuL3BlcmlvZC9z
bGFzaC96ZXJvL29uZS90d28vdGhyZWUvZm91ci9maXZlL3NpeC9zZXZlbi9laWdodC9uaW5lL2Nv
bG9uL3NlbWljb2xvbi9sZXNzL2VxdWFsL2dyZWF0ZXIvcXVlc3Rpb24vYXQvQS9CL0MvRC9FL0Yv
Ry9IL0kvSi9LL0wvTS9OL08vUC9RL1IvUy9UL1UvVi9XL1gvWS9aL2JyYWNrZXRsZWZ0L2JhY2tz
bGFzaC9icmFja2V0cmlnaHQvY2lyY3VtZmxleC91bmRlcnNjb3JlL3F1b3RlbGVmdC9hL2IvYy9k
L2UvZi9nL2gvaS9qL2svbC9tL24vby9wL3Evci9zL3QvdS92L3cveC95L3ovYnJhY2VsZWZ0L2Jh
ci9icmFjZXJpZ2h0L3RpbGRlL2RpZXJlc2lzL0xzbGFzaC9xdW90ZXNpbmdsZS9xdW90ZXNpbmds
YmFzZS9mbG9yaW4vcXVvdGVkYmxiYXNlL2VsbGlwc2lzL2RhZ2dlci9kYWdnZXJkYmwvY2lyY3Vt
ZmxleC9wZXJ0aG91c2FuZC9TY2Fyb24vZ3VpbHNpbmdsbGVmdC9PRS9aY2Fyb24vYXNjaWljaXJj
dW0vbWludXMvbHNsYXNoL3F1b3RlbGVmdC9xdW90ZXJpZ2h0L3F1b3RlZGJsbGVmdC9xdW90ZWRi
bHJpZ2h0L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNp
bmdscmlnaHQvb2UvemNhcm9uL2FzY2lpdGlsZGUvWWRpZXJlc2lzL25ic3BhY2UvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L3NmdGh5cGhlbi9y
ZWdpc3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJp
b3IvYWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Iv
b3JkbWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0
ZXJzL3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVz
aXMvQXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMv
SWdyYXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2Fj
dXRlL09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9V
YWN1dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2
ZS9hYWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9l
Z3JhdmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1m
bGV4L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRl
L29kaWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJl
c2lzL3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoxNyAwIG9iaiA8PAovVHlwZSAv
Rm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZvbnQgL0NvdXJpZXIK
Pj4gZW5kb2JqCjExIDAgb2JqIDw8Ci9UeXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2Rp
bmcgNDIgMCBSCi9CYXNlRm9udCAvVGltZXMtSXRhbGljCj4+IGVuZG9iago5IDAgb2JqIDw8Ci9U
eXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2RpbmcgNDEgMCBSCi9CYXNlRm9udCAvVGlt
ZXMtUm9tYW4KPj4gZW5kb2JqCjcgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUx
Ci9FbmNvZGluZyA0MiAwIFIKL0Jhc2VGb250IC9UaW1lcy1Sb21hbgo+PiBlbmRvYmoKNSAwIG9i
aiA8PAovVHlwZSAvRm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZv
bnQgL1RpbWVzLUJvbGQKPj4gZW5kb2JqCjEyIDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQg
NgovUGFyZW50IDQzIDAgUgovS2lkcyBbMiAwIFIgMTQgMCBSIDE5IDAgUiAyNyAwIFIgMzAgMCBS
IDMzIDAgUl0KPj4gZW5kb2JqCjM4IDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQgMQovUGFy
ZW50IDQzIDAgUgovS2lkcyBbMzYgMCBSXQo+PiBlbmRvYmoKNDMgMCBvYmogPDwKL1R5cGUgL1Bh
Z2VzCi9Db3VudCA3Ci9LaWRzIFsxMiAwIFIgMzggMCBSXQo+PiBlbmRvYmoKNDQgMCBvYmogPDwK
L1R5cGUgL0NhdGFsb2cKL1BhZ2VzIDQzIDAgUgo+PiBlbmRvYmoKNDUgMCBvYmogPDwKL1Byb2R1
Y2VyIChwZGZUZVgtMC4xNGgpCi9DcmVhdG9yIChUZVgpCi9DcmVhdGlvbkRhdGUgKEQ6MjAwMjAy
MDgwNDU5MDApCj4+IGVuZG9iagp4cmVmCjAgNDYKMDAwMDAwMDAwNCA2NTUzNSBmIAowMDAwMDAx
NTcyIDAwMDAwIG4gCjAwMDAwMDE0NjcgMDAwMDAgbiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAw
MDAwMDA2IDAwMDAwIGYgCjAwMDAwMTQyNDQgMDAwMDAgbiAKMDAwMDAwMDAwOCAwMDAwMCBmIAow
MDAwMDE0MTU1IDAwMDAwIG4gCjAwMDAwMDAwMTAgMDAwMDAgZiAKMDAwMDAxNDA2NiAwMDAwMCBu
IAowMDAwMDAwMDE2IDAwMDAwIGYgCjAwMDAwMTM5NzUgMDAwMDAgbiAKMDAwMDAxNDMzMiAwMDAw
MCBuIAowMDAwMDAyNDU2IDAwMDAwIG4gCjAwMDAwMDIzNDggMDAwMDAgbiAKMDAwMDAwMTY3NCAw
MDAwMCBuIAowMDAwMDAwMDIxIDAwMDAwIGYgCjAwMDAwMTM4ODkgMDAwMDAgbiAKMDAwMDAwMzQx
MyAwMDAwMCBuIAowMDAwMDAzMzA1IDAwMDAwIG4gCjAwMDAwMDI1NTkgMDAwMDAgbiAKMDAwMDAw
MDAwMCAwMDAwMCBmIAowMDAwMDExOTQ4IDAwMDAwIG4gCjAwMDAwMDk4NTUgMDAwMDAgbiAKMDAw
MDAwNzg5NSAwMDAwMCBuIAowMDAwMDA5Njk5IDAwMDAwIG4gCjAwMDAwMDQzMjcgMDAwMDAgbiAK
MDAwMDAwNDIxOSAwMDAwMCBuIAowMDAwMDAzNTMwIDAwMDAwIG4gCjAwMDAwMDUxNDcgMDAwMDAg
biAKMDAwMDAwNTAzOSAwMDAwMCBuIAowMDAwMDA0NDMwIDAwMDAwIG4gCjAwMDAwMDcwMzEgMDAw
MDAgbiAKMDAwMDAwNjkyMyAwMDAwMCBuIAowMDAwMDA1MjM5IDAwMDAwIG4gCjAwMDAwMDc3OTEg
MDAwMDAgbiAKMDAwMDAwNzY4MyAwMDAwMCBuIAowMDAwMDA3MTIzIDAwMDAwIG4gCjAwMDAwMTQ0
NDAgMDAwMDAgbiAKMDAwMDAxMDA3NCAwMDAwMCBuIAowMDAwMDEwMDUxIDAwMDAwIG4gCjAwMDAw
MTAxNTkgMDAwMDAgbiAKMDAwMDAxMjAzOSAwMDAwMCBuIAowMDAwMDE0NTE0IDAwMDAwIG4gCjAw
MDAwMTQ1ODAgMDAwMDAgbiAKMDAwMDAxNDYzMSAwMDAwMCBuIAp0cmFpbGVyCjw8Ci9TaXplIDQ2
Ci9Sb290IDQ0IDAgUgovSW5mbyA0NSAwIFIKPj4Kc3RhcnR4cmVmCjE0NzI2CiUlRU9GCg==

--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed



===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

--Apple-Mail-1-507788993--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 08:30:16 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Feb 2002 08:30:16 +0000 (GMT Standard Time)
Subject: [Rd] timing Mac R's
In-Reply-To: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.WNT.4.44.0202080820010.716-100000@tern.stats>

On Fri, 8 Feb 2002, Jan de Leeuw wrote:

> Here is the same thing as before, now done a bit more systematically. The
> rather bad performance of R-patched on eigen is a mystery (to me), the
> gain
> in La.eigen when using ATLAS is probably not Altivec, but using
> threaded level 3 BLAS on a dual processor machine.

Well, it's almost entirely in the algorithm used in LAPACK.  There is no
single precision used.  DSYEVR was designed as `the holy grail' for that
problem, and it uses level 3 BLAS much better than its predecessors.
I see an 8x speed up on my PIII Linux box on your tests (and the ATLAS
there is only using one processor to keep the build portable).

My guess (and only a guess) is that you have an alignment problem. I am
pretty sure there is no change in the internal code across the versions you
used, but some compilers and chips will run code much faster with certain
alignments than others. Sparc for example needs -dalign under it's native
compiler, and without that (which used to be necessary under S-PLUS) there
could be performance changes of this nature under very small code changes.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  8 13:27:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 8 Feb 2002 14:27:14 +0100 (MET)
Subject: [Rd] interaction.plot (with misplaced legend) (PR#1305)
Message-ID: <200202081327.OAA12329@pubhealth.ku.dk>

Kaiya Liu wrote:
> 
> Hi,
> 
> I encountered a problem when I did interaction plots using the
> interaction.plot() function. The labels for the trace factor appeared on
> the plot when I did the plots in separate windows, but disappeared/cut off
> when multiple plots were placed in one window. Can anybody help me?

>From the example of ?interaction.plot:

 data(ToothGrowth)
 attach(ToothGrowth)
 interaction.plot(dose, supp, len, fixed=TRUE) # OK

But the following looks quite ugly:

 par(mfrow=c(1,2))
 interaction.plot(dose, supp, len, fixed=TRUE)
 interaction.plot(dose, supp, len, fixed=TRUE)

 par(mfrow=c(2,2))
 interaction.plot(dose, supp, len, fixed=TRUE)



There is not only a problem with the legend, also the magnification of
the axis annotation is not homogeneous, because for the x-axis
annotation mtext() is used. I'd suggest to change line 35:
  mtext(xlabs, 1, at = xvals) # old
to
  axis(1, at = xvals, labels = xlabs, ...) # new
   

Uwe Ligges

===============
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 13:27:59 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 8 Feb 2002 13:27:59 +0000 (GMT)
Subject: [Rd] Cross-compiling to Windows
Message-ID: <Pine.LNX.4.31.0202081322220.2328-100000@gannet.stats>

I have built a new Linux->mingw32 cross-compiler using the equivalent of
MinGW-1.1 updated by the latest header files.  Links are on the Rtools
portal.  I've tested it as far as cross-compiling R-devel and running some
tests.  There were several cross-compilers I found on the Web, but all
lacked Fortran support.

If you are upgrading, beware that this is mingw32- and not
i386-mingw32msvc-, so MkRules will need to be changed.  (Also, beware that
HEADERS there must be correct: if wrong compilation may succeed but use
the Linux headers.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Feb 11 06:46:21 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 11 Feb 2002 07:46:21 +0100 (MET)
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
Message-ID: <200202110646.HAA18810@pubhealth.ku.dk>

I just downloaded rw1041 (the latest windows binary).  Everything installed
fine.  

When I start a new Rgui, and type "demo(graphics)", after pressing
return to start, a graphics window appears.  When I get to the second
prompt:

  > opar <- c(opar, par(bg = "white"))
  > plot(x, ann = FALSE, type = "n")
  Hit <Return> to see next plot: 

at this point, the cursor is an hourglass and just waits -- nothing is
drawn into the graphics window.  This is repeatable on both a Win 98
and Win 2000 ME setup.

However, if after starting a new Rgui, I first do
> hist(rnorm(100))
> demo(graphics)
then both the histogram and the subsequent graphics demo work fine.

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Feb 11 07:44:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Feb 2002 08:44:07 +0100
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
In-Reply-To: <200202110646.HAA18810@pubhealth.ku.dk>
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <x2heoolayg.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.  
> 
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
> 
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot: 
> 
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

??

This *has* been tried before, y'know... Did you remember to click the
text window to give it keyboard focus?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Feb 11 11:02:58 2002
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 11 Feb 2002 06:02:58 -0500
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <3C67A4E1.4C857EA8@epm.net.co>

This is a multi-part message in MIME format.
--------------CC6F2641AA04ACFC35187237
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7Bit



eglen@pcg.wustl.edu wrote:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.
>
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
>
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot:

There is no problem at all!



>
>
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

Just go to the R Console window and "Hit <Return> to see next plot:"

If you want to see the R Console windows and the R Graphics at the same time,
tile them with the Tile option on the Windows bar menu options.

>
>
> However, if after starting a new Rgui, I first do
> > hist(rnorm(100))
> > demo(graphics)
> then both the histogram and the subsequent graphics demo work fine.
>
> Stephen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------CC6F2641AA04ACFC35187237
Content-Type: text/x-vcard; charset=us-ascii;
 name="krcabrer.vcf"
Content-Description: Card for Kenneth Cabrera
Content-Disposition: attachment;
 filename="krcabrer.vcf"
Content-Transfer-Encoding: 7Bit

begin:vcard 
n:Cabrera;Kenneth
tel;cell:504 0339
tel;work:4309317
x-mozilla-html:FALSE
org:Universidad Nacional de Colombia;ICNE
adr:;;A.A. 3840;Medellín;Antioquia;00000;Colombia
version:2.1
email;internet:krcabrer@epm.net.co
title:Profesor
fn:Kenneth Cabrera
end:vcard

--------------CC6F2641AA04ACFC35187237--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Wed Feb 13 13:47:04 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Wed, 13 Feb 2002 14:47:04 +0100 (MET)
Subject: [Rd] Re: identify(...plot=F) (PR#1157)
Message-ID: <200202131347.OAA08062@pubhealth.ku.dk>


Thanks very much for your email and for fixing the mild bug
in identify().

Can you tell me, is it fixed in R 1.4.1 (which I have not yet installed;
we're still running R 1.4.0) or do I need to get ``R.patched''
(or whatever it's called)?

					cheers,

						Rolf

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Feb 14 02:41:16 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 13 Feb 2002 18:41:16 -0800
Subject: [Rd] R-patched and R-devel
Message-ID: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>

If I configure in R-patched and R-devel, with the same options to
configure, then R-patched says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm_ in -lf77blas... yes

which R-devel says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm in -lf77blas... no

This is on the same computer and using the same libraries. Observe
in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
what is intended ?

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stevelyn@mediaone.net  Thu Feb 14 02:45:14 2002
From: stevelyn@mediaone.net (stevelyn@mediaone.net)
Date: Thu, 14 Feb 2002 03:45:14 +0100 (MET)
Subject: [Rd] Command History (PR#1310)
Message-ID: <200202140245.DAA10700@pubhealth.ku.dk>

Greetings,

I don't know if this is a bug or something I did wrong. The symptom is that 
my command history is now broken. For example, the up arrow now results in 
^[OA each time it is depressed.

The build commands I used were as follows:

cp R-1.4.1.tgz /usr/lib/R
cd /usr/lib/R
tar -xvvzf R-1.4.1.tgz
cd R-1.4.1
./configure
make
make check	# No errors resulted
make dvi
make pdf
make info
make install
make install-dvi
make install-pdf
make install-info
rehash		# An alias for hash -r

A previous version of R I was using (1.3.0) was installed in a different tree 
and is no longer in use (the R script points to the new tree). I am running 
SuSE 7.3, and the former version of R did not have this problem.

Please let me know if this is a bug or if I've done something wrong.

Thanks & Best Regards,
Steve

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Feb 14 03:25:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 13 Feb 2002 21:25:58 -0600
Subject: [Rd] Command History (PR#1310)
In-Reply-To: <200202140245.DAA10700@pubhealth.ku.dk>
References: <200202140245.DAA10700@pubhealth.ku.dk>
Message-ID: <20020214032558.GA6646@sonny.eddelbuettel.com>

On Thu, Feb 14, 2002 at 03:45:14AM +0100, stevelyn@mediaone.net wrote:
[...]
> ./configure
[...]

You missed the notice about readline support.

> Please let me know if this is a bug or if I've done something wrong.

Make sure that -dev version of your distributions readline package is
installed, and found by R.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 07:16:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 08:16:28 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <15467.25676.681887.923785@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes

> which R-devel says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no

> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Don't think so :-)

The code in r-devel runs the BLAS tests before it has figure out the
characteristics of the Fortran compiler.  Argh.  Will fix.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 14 07:51:23 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 14 Feb 2002 07:51:23 +0000 (GMT)
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>

On Wed, 13 Feb 2002, Jan de Leeuw wrote:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes
>
> which R-devel says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no
>
> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Confirmed here. It seems related to the change to autoconf 2.5x,
but it is not working as intended.  The configure code has

if test "${r_cv_prog_f77_append_underscore}" = yes \
  || test -n "${F2C}"; then
  dgemm_func=dgemm_
else
  dgemm_func=dgemm
fi
...
    AC_CHECK_LIB(f77blas, $dgemm_func,
                 BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

and r_cv_prog_f77_append_underscore is being set correctly, but only later
in the configure.  I think that comes from following the autoconf
recommended order of tests (libraries, headers, ...), but we need an
exception here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 08:45:43 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 09:45:43 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
 <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
Message-ID: <15467.31031.226217.928717@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 13 Feb 2002, Jan de Leeuw wrote:
>> If I configure in R-patched and R-devel, with the same options to
>> configure, then R-patched says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm_ in -lf77blas... yes
>> 
>> which R-devel says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm in -lf77blas... no
>> 
>> This is on the same computer and using the same libraries. Observe
>> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
>> what is intended ?

> Confirmed here. It seems related to the change to autoconf 2.5x,
> but it is not working as intended.  The configure code has

> if test "${r_cv_prog_f77_append_underscore}" = yes \
>   || test -n "${F2C}"; then
>   dgemm_func=dgemm_
> else
>   dgemm_func=dgemm
> fi
> ...
>     AC_CHECK_LIB(f77blas, $dgemm_func,
>                  BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

> and r_cv_prog_f77_append_underscore is being set correctly, but only
> later in the configure.  I think that comes from following the
> autoconf recommended order of tests (libraries, headers, ...), but we
> need an exception here.

Right.  The recipe has

     checks for programs
     checks for libraries
     checks for header files
     checks for types
     checks for structures
     checks for compiler characteristics
     checks for library functions

and this is mostly based on the idea that everything happens in C.  Will
move the BLAS tests to section library functions.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Feb 14 22:29:11 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Feb 2002 23:29:11 +0100 (MET)
Subject: [Rd] Makeconf problem (PR#1311)
Message-ID: <200202142229.XAA17547@pubhealth.ku.dk>

Full_Name: Byron Ellis
Version: 1.5.0
OS: Solaris 2.8
Submission from: (NULL) (140.247.27.60)


the INSTALL variable gets set to tools/install-sh, I'm guessing it should
actually be set to $(top_srcdir)/tools/install-sh

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Feb 15 10:33:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 15 Feb 2002 11:33:18 +0100
Subject: [Rd] Makeconf problem (PR#1311)
In-Reply-To: <200202142229.XAA17547@pubhealth.ku.dk>
References: <200202142229.XAA17547@pubhealth.ku.dk>
Message-ID: <15468.58350.693889.850281@mithrandir.hornik.net>

>>>>> bellis  writes:

> Full_Name: Byron Ellis
> Version: 1.5.0
> OS: Solaris 2.8
> Submission from: (NULL) (140.247.27.60)

> the INSTALL variable gets set to tools/install-sh, I'm guessing it
> should actually be set to $(top_srcdir)/tools/install-sh

Thanks for catching this.  Apparently I only tried the effect of using
just AC_PROG_INSTALL with srcdir != builddir.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 15:16:44 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 10:16:44 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0201301150260.117500-100000@homer04.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>

On Wed, 30 Jan 2002, Thomas Lumley wrote:

> I've just compiled R 1.4.1 on AIX 4.3 with
>
> bash% CC=cc FC=f77 ./configure
> bash% make
>
> It all seems to work (I'm running make check, but the computer is very
> slow).

I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
I still have problems.  If I could bother you a bit more, I'd like to
compare some notes.

My environment is as follows:

    RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
	calls it "powerpc-ibm-aix4.3.3.0"
    IBM C for AIX Compiler 5.0.2.2
    IBM XL Fortran Compiler 7.1.1.1
    Perl 5.005 patch 03
    makeinfo 4.0
    readline 4.2
    zlib 1.1.3
    libjpeg 6b
    libpng 1.2.0
    tcl/tk 8.3.3
    GNU make 3.79.1

This is what I started with in my config.site file:

    R_PAPERSIZE=letter
    CC=cc
    CFLAGS="-g"
    FC=f77
    CXX=g++
    MAKE=/opt/freeware/bin/make

I originally configured with "configure --enable-R-shlib" (because my
R user thought he needed it), and I gradually concluded that this was
causing lots of my problems, so I dropped it.  Now I just use "configure"
with no options.

R now runs (sort of).  It still coredumps on exit with segmentation
faults.  Sometimes it also coredumps during operation with an illegal
instruction fault.  I did run through "make check" using the expedient
of hacking the Makefiles to ignore exit errors, so it would plow ahead
even after getting the exit coredumps, and it looks like it got through
all the tests.

My user also wanted to install the Rggobi package into R, which I've
done.  Ggobi itself seems to work fine, but when I type the "ggobi"
command in R, I get an illegal instruction coredump.  Not sure if that's
an R problem or a Ggobi problem.

Do you see anything in my environment that is "wrong"?  What level of
AIX (version and maintenance level) are you building on?  What model of
RS/6000?

Thanks for your time.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Feb 15 19:12:54 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Feb 2002 11:12:54 -0800 (PST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>

On Fri, 15 Feb 2002, Dan Million wrote:

> On Wed, 30 Jan 2002, Thomas Lumley wrote:
>
> > I've just compiled R 1.4.1 on AIX 4.3 with
> >
> > bash% CC=cc FC=f77 ./configure
> > bash% make
> >
> > It all seems to work (I'm running make check, but the computer is very
> > slow).
>
> I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
> I still have problems.  If I could bother you a bit more, I'd like to
> compare some notes.
>
> My environment is as follows:
>
>     RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
> 	calls it "powerpc-ibm-aix4.3.3.0"
>     IBM C for AIX Compiler 5.0.2.2
>     IBM XL Fortran Compiler 7.1.1.1
>     Perl 5.005 patch 03
>     makeinfo 4.0
>     readline 4.2
>     zlib 1.1.3
>     libjpeg 6b
>     libpng 1.2.0
>     tcl/tk 8.3.3
>     GNU make 3.79.1
>
> This is what I started with in my config.site file:
>
>     R_PAPERSIZE=letter
>     CC=cc
>     CFLAGS="-g"
>     FC=f77
>     CXX=g++
>     MAKE=/opt/freeware/bin/make
>

That all looks reasonable. I've got Perl 5.6.0, but Perl isn't needed at
runtime. I don't have makeinfo or readline. I don't know if g++ is
compatible with the C and Fortran compilers but there isn't any C++ in the
base R.

>
> Do you see anything in my environment that is "wrong"?  What level of
> AIX (version and maintenance level) are you building on?  What model of
> RS/6000?

Some of this I'll need to get from our administrators.

It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
7015/R24.
lslpp  -L suggests that the versions of various components of AIX are
mostly 4.3.3.10 or 4.3.3.25

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 19:47:19 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 14:47:19 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>

On Fri, 15 Feb 2002, Thomas Lumley wrote:

> > Do you see anything in my environment that is "wrong"?  What level of
> > AIX (version and maintenance level) are you building on?  What model of
> > RS/6000?
>
> Some of this I'll need to get from our administrators.
>
> It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
> 7015/R24.
> lslpp  -L suggests that the versions of various components of AIX are
> mostly 4.3.3.10 or 4.3.3.25

Yes, it sounds like you're running on pretty old hardware, and using a
fairly back-level version of AIX 4.3.3.  Maintenance level 2 or 3 maybe.
I'm afraid that IBM has introduced so much new stuff (including bugs) in
some of the recent maintenance level patches that we're probably comparing
apples and oranges here.

If you're interested, you can get the maintenance level by typing:

	instfix -i | grep ML

and look at the last line printed, which should look something like:

	All filesets for 4330-03_AIX_ML were found.

indicating that the machine is at ML03.

By the way, my user has emphasized that they really need the R shared
library.  And if I build with --enable-R-shlib, then chunks of R simply
don't work at all (like the X11 support).  Ah well....

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ckhung@cyut.edu.tw  Sat Feb 16 00:35:27 2002
From: ckhung@cyut.edu.tw (ckhung@cyut.edu.tw)
Date: Sat, 16 Feb 2002 01:35:27 +0100 (MET)
Subject: [Rd] latitude <-> longitude in quake.tab (PR#1312)
Message-ID: <200202160035.BAA23321@pubhealth.ku.dk>

Full_Name: Chao-Kuei Hung
Version: 1.3.1
OS: RedHat Linux 7.0
Submission from: (NULL) (163.32.17.245)


Dear all,

I checked a world map and realized that Tonga Trench lies
near 20S176W, i.e. latitude -20, longitude 184. The labels
in the file library/base/data/quakes.tab got latitude
and longitude mixed up. (Latitudes should always be within
+-90 anyway :-) Thanks for your attention.

BTW, it would be nice if there are more real-world sample
data files with categorical data

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sat Feb 16 04:27:29 2002
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Sat, 16 Feb 2002 05:27:29 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160427.FAA23581@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.4.1
OS: redhat 7.1
Submission from: (NULL) (128.252.204.36)


Hi, the top of the file
R-1.4.1/src/gnuwin32/readme

looks like:

R @RVER@ for Windows
===================

and further down, this @RVER@ is repeated, e.g. in section 3:

3) The full distribution consists of several zip files:

@RWVER@b.zip				the base system
@RWVER@h.zip				text help
...
Is this intentional?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 16 08:02:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Feb 2002 09:02:00 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160802.JAA23780@pubhealth.ku.dk>

On Sat, 16 Feb 2002 stephen@cogsci.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.4.1
> OS: redhat 7.1
> Submission from: (NULL) (128.252.204.36)
>
>
> Hi, the top of the file
> R-1.4.1/src/gnuwin32/readme
>
> looks like:
>
> R @RVER@ for Windows
> ===================
>
> and further down, this @RVER@ is repeated, e.g. in section 3:
>
> 3) The full distribution consists of several zip files:
>
> @RWVER@b.zip				the base system
> @RWVER@h.zip				text help
> ...
> Is this intentional?

Yes. Lots of source files are processed prior to installation.

rw1041/README does not have @RVER@ in it.

Submitting incorrect bug reports does add to the work of the volunteer
team, so please do read the BUGS section in the FAQ carefully.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jzacks@artsci.wustl.edu  Sun Feb 17 20:39:11 2002
From: jzacks@artsci.wustl.edu (jzacks@artsci.wustl.edu)
Date: Sun, 17 Feb 2002 21:39:11 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202172039.VAA26668@pubhealth.ku.dk>

Full_Name: Jeff Zacks
Version: 1.4.0
OS: Mac OS X
Submission from: (NULL) (209.16.201.87)


Hi,

I believe there may be a problem with how Error strata are handled in aov, for
designs with multiple error strata involving multiple interactions.  The
following performs the expected repeated-measures ANOVA when called in S-Plus,
gives an error when called in R.

In this example, the design is a simple 2x2x2 repeated-measures design with 2
subjects.

Hope this is helpful.

Best,

Jeff Zacks

> dat <- read.table("foo", header=T)
> dat
   Subj within1 within2 within3 depvar
1     A       0       0       1      1
2     A       0       1       0      2
3     A       1       0       0      3
4     A       0       1       1      4
5     A       1       0       1      5
6     A       1       1       0      6
7     B       0       0       1      2
8     B       0       1       0      3
9     B       1       0       0      4
10    B       0       1       1      5
11    B       1       0       1      6
12    B       1       1       0      7
> summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
Subj:within2:within3), data=dat))
Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :

	object is not a matrix
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 18 09:55:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Feb 2002 10:55:49 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202180955.KAA29237@pubhealth.ku.dk>

On Sun, 17 Feb 2002 jzacks@artsci.wustl.edu wrote:

> Full_Name: Jeff Zacks
> Version: 1.4.0
> OS: Mac OS X
> Submission from: (NULL) (209.16.201.87)
>
>
> Hi,
>
> I believe there may be a problem with how Error strata are handled in aov, for
> designs with multiple error strata involving multiple interactions.  The
> following performs the expected repeated-measures ANOVA when called in S-Plus,
> gives an error when called in R.

The problem is the length of your Error formula.  In aov there is a
line:

eTerm <- deparse(errorterm[[2]])

change it to

eTerm <- deparse(errorterm[[2]], width = 500)

and later

lmcall$formula <- form <- update(formula, paste(". ~ .-",
deparse(errorterm)))

needs to be deparse(errorterm, width=500)

and then correct the formula you gave (there is no withn3, so this cannot
have worked in S-PLUS).

With those corrections I get the same answers as S-PLUS 6.0.

> In this example, the design is a simple 2x2x2 repeated-measures design with 2
> subjects.
>
> Hope this is helpful.
>
> Best,
>
> Jeff Zacks
>
> > dat <- read.table("foo", header=T)
> > dat
>    Subj within1 within2 within3 depvar
> 1     A       0       0       1      1
> 2     A       0       1       0      2
> 3     A       1       0       0      3
> 4     A       0       1       1      4
> 5     A       1       0       1      5
> 6     A       1       1       0      6
> 7     B       0       0       1      2
> 8     B       0       1       0      3
> 9     B       1       0       0      4
> 10    B       0       1       1      5
> 11    B       1       0       1      6
> 12    B       1       1       0      7
> > summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
> Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
> Subj:within2:within3), data=dat))
> Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :
>
> 	object is not a matrix
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Feb 18 17:53:43 2002
From: lio@hpss1.ccs.ornl.gov (lio@hpss1.ccs.ornl.gov)
Date: Mon, 18 Feb 2002 18:53:43 +0100 (MET)
Subject: [Rd] shared libraries on AIX (PR#1316)
Message-ID: <200202181753.SAA04415@pubhealth.ku.dk>

Full_Name: Daniel L. Million
Version: 1.4.1
OS: AIX 4.3.3/5.1
Submission from: (NULL) (160.91.192.125)


R almost works if I build on AIX without the R shared library (except for
crashing
on exit and a few other anomalies).  I can't get it to do much at all if I
build
with --enable-R-shlib.

For example, it won't load the X11 driver.  I ran R in a debugger and traced it
down to the point where R_load_X11_shlib successfully loads the R_X11.so
library
and calls R_init_X11.  This calls R_setX11Routines in src/unix/X11.c.  On entry

to this function, ptr_X11DeviceDriver = 0x2002eb20 and dev = 0x2014ba08.  After
the statement

    ptr_X11DeviceDriver = dev;

is executed, ptr_X11DeviceDriver remains unchanged at 0x2002eb20 !!  So when I
type "X11()" at the R prompt, all I ever get is the stub message, "the x11
device
has not been loaded".

I don't know enough about how shared libraries interact to understand why this
pointer is apparently write-protected.  I'm hoping someone here can give me a
clue.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Feb 19 00:22:59 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 19 Feb 2002 01:22:59 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
Message-ID: <200202190022.BAA05385@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe
Submission from: (NULL) (217.208.14.137)


Doing the following

library(methods)
setGeneric("foo", function(x) standardGeneric("foo"))
setMethod("foo", "ANY", function(x) cat(x))

fails with

Error in while (value[n] == "ANY") n <- n - 1 : 
        missing value where logical needed

It looks like the line

  while (value[n] == "ANY") n <- n - 1

in the source for matchSignature() should be

  while (n > 0 && value[n] == "ANY") n <- n - 1


FYI: I tried my suggested modification at it seems to work.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ottisopt@yahoo.com  Tue Feb 19 06:43:11 2002
From: ottisopt@yahoo.com (ottisopt@yahoo.com)
Date: Tue, 19 Feb 2002 02:43:11 -0400
Subject: [Rd] News Update: Diamond Entertainment Corp.
Message-ID: <B0000011338@wi-poli.poli.cl>

For latest news on Diamond Entertainment Corp. (SYMBOL: DMEC), click this link:




http://finance.yahoo.com/q?s=dmec.ob&d=v1









Disclaimer: The writers of this e-mail do not make specific trading recommendations or give individualized market advice. Information contained in this e-mail is provided as an information service only. It is recommended that you get personal advice from an investment professional before buying or selling stocks or other securities. The securities markets are highly speculative areas for investments and only you can determine what level of risk is appropriate for you.  In no way should this be construed as a recommendation to buy or sell a particular security.

All our mailings are sent complying to the proposed United States Federal requirements for commercial e-mail: Section 301 Paragraph (a)(2)(C) of S. 618. Please see the bottom of this message for further information and removal instructions.

This is not a spam! Your are receiving this email either because, you have sent me and email in the past, or you are on a list of marketers requesting information. If this is not the case, PLEASE accept my sincerest apologies and reply with "remove" in the subject field. I will remove your name immediately!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Feb 19 20:21:05 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 19 Feb 2002 15:21:05 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Fri, 15 Feb 2002 14:47:19 -0500 (EST)"
References: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <px664t1avi.fsf@infiniti.ece.cmu.edu>


Dan,

- have you tried gcc instead of xlc?  It's surprisingly easy to
  install for AIX.
- have you tried to turn off all optimizations (explicitly if needed)?

My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
seen a problem yet.  

> By the way, my user has emphasized that they really need the R shared
> library.  And if I build with --enable-R-shlib, then chunks of R simply
> don't work at all (like the X11 support).  Ah well....

I could try building the shared lib.  But without knowing that you
could switch to gcc, I wouldn't help.  (I can't run xlc).

  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 20:36:01 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 15:36:01 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px664t1avi.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>

On 19 Feb 2002, Thomas Vogels wrote:

> - have you tried gcc instead of xlc?  It's surprisingly easy to
>   install for AIX.
> - have you tried to turn off all optimizations (explicitly if needed)?

I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
objects with IBM XL Fortran objects in the same library.

> My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
> seen a problem yet.
>
> > By the way, my user has emphasized that they really need the R shared
> > library.  And if I build with --enable-R-shlib, then chunks of R simply
> > don't work at all (like the X11 support).  Ah well....
>
> I could try building the shared lib.  But without knowing that you
> could switch to gcc, I wouldn't help.  (I can't run xlc).

I'm finding more and more problems with the R shared library.  I don't
think it's being built correctly at all.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 19 20:43:09 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2002 20:43:09 +0000 (GMT)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>

On Tue, 19 Feb 2002, Dan Million wrote:

> On 19 Feb 2002, Thomas Vogels wrote:
>
> > - have you tried gcc instead of xlc?  It's surprisingly easy to
> >   install for AIX.
> > - have you tried to turn off all optimizations (explicitly if needed)?
>
> I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> objects with IBM XL Fortran objects in the same library.

gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
for evidence.)  You should be able to install the parts you (or someone)
omitted before.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 21:54:25 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 16:54:25 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>
Message-ID: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>

On Tue, 19 Feb 2002, Prof Brian Ripley wrote:

> > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > objects with IBM XL Fortran objects in the same library.
>
> gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> for evidence.)  You should be able to install the parts you (or someone)
> omitted before.

Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
package does not include g77.  I realize I could start all over and get
another gcc package from somewhere else.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Feb 19 23:49:30 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 19 Feb 2002 18:49:30 -0500
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
References: <200202190022.BAA05385@pubhealth.ku.dk>
Message-ID: <3C72E48A.CB993116@research.bell-labs.com>

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: R v1.4.1
> OS: WinMe
> Submission from: (NULL) (217.208.14.137)
> 
> Doing the following
> 
> library(methods)
> setGeneric("foo", function(x) standardGeneric("foo"))
> setMethod("foo", "ANY", function(x) cat(x))
> 
> fails with
> 
> Error in while (value[n] == "ANY") n <- n - 1 :
>         missing value where logical needed
> 
> It looks like the line
> 
>   while (value[n] == "ANY") n <- n - 1
> 
> in the source for matchSignature() should be
> 
>   while (n > 0 && value[n] == "ANY") n <- n - 1
> 
> FYI: I tried my suggested modification at it seems to work.

Yes, thanks, that's correct.

It had been fixed in r-patched and r-devel, but too late for 1.4.1.


> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Wed Feb 20 08:06:34 2002
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Wed, 20 Feb 2002 09:06:34 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
In-Reply-To: <3C72E48A.CB993116@research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10202200857570.21509-100000@speed.maths.lth.se>

Great.

/Henrik


On Tue, 19 Feb 2002, John Chambers wrote:

> hb@maths.lth.se wrote:
> > 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.1
> > OS: WinMe
> > Submission from: (NULL) (217.208.14.137)
> > 
> > Doing the following
> > 
> > library(methods)
> > setGeneric("foo", function(x) standardGeneric("foo"))
> > setMethod("foo", "ANY", function(x) cat(x))
> > 
> > fails with
> > 
> > Error in while (value[n] == "ANY") n <- n - 1 :
> >         missing value where logical needed
> > 
> > It looks like the line
> > 
> >   while (value[n] == "ANY") n <- n - 1
> > 
> > in the source for matchSignature() should be
> > 
> >   while (n > 0 && value[n] == "ANY") n <- n - 1
> > 
> > FYI: I tried my suggested modification at it seems to work.
> 
> Yes, thanks, that's correct.
> 
> It had been fixed in r-patched and r-devel, but too late for 1.4.1.
> 
> 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 09:54:16 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 10:54:16 +0100
Subject: [Rd] f2c problem
Message-ID: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>

In building princurve package for MacOS I need to use f2c on fortran 
files.

Here is the output of f2c for getlam.f

getlam.f:
    getlam:
    newlam:
    lamix:
Error on line 116 of getlam.f: Declaration error for v: adjustable 
dimension on non-argument
Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size

what I found strange is that both newlam and get lam have definitions 
like


  subroutine newlam(n,p,sx,lambda,tag)
       integer n,p,tag(n)
       double precision sx(n,p),lambda(n),lami


but for some reason f2c complains only with the last lamix subroutine

   subroutine lamix(ns,p,x,s,lambda,dismin,temps)
       integer ns,p
       double precision lambda,x(p),s(ns,p),dismin,temps(p)
       double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w

probably because v is not passed as an argument.

Any idea on how to manage this in f2c ?

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Feb 20 10:27:46 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 20 Feb 2002 11:27:46 +0100 (CET)
Subject: [Rd] f2c problem
In-Reply-To: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>
Message-ID: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> In building princurve package for MacOS I need to use f2c on fortran 
> files.
> 
> Here is the output of f2c for getlam.f
> 
> getlam.f:
>     getlam:
>     newlam:
>     lamix:
> Error on line 116 of getlam.f: Declaration error for v: adjustable 
> dimension on non-argument
> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
> 
> what I found strange is that both newlam and get lam have definitions 
> like
> 
> 
>   subroutine newlam(n,p,sx,lambda,tag)
>        integer n,p,tag(n)
>        double precision sx(n,p),lambda(n),lami
> 
> 
> but for some reason f2c complains only with the last lamix subroutine
> 
>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>        integer ns,p
>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
> 
> probably because v is not passed as an argument.

Definitely because v is local; this construct is a gcc extension to the 
standard, I think. Solutions: 1) pass v as an argument and reserv space
in the calling function. 2) Instead of  p, use 1000 (or some other
large number, which p never will exceed). 3) Use gcc.

Göran
> 
> Any idea on how to manage this in f2c ?
> 
> Stefano
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 10:34:27 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 10:34:27 +0000
Subject: [Rd] Pivoting in chol
Message-ID: <3C737BB3.13BE8B84@durham.ac.uk>

This is a multi-part message in MIME format.
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Everyone,

I have modified my version of R-1.4.1 to include choleski with pivoting
(like in Splus).  I thought R-core might consider including this in the
next version of R, so I give below the steps required to facilitate
this.

1. Copied Linpack routine "dchdc.f" into src/appl

2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES

3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in

4. Modifed src/library/base/R/chol.R (attached) and 
src/library/base/man/chol.Rd (also attached)

5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.

6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".

I was following my nose a bit during this process.  Everything seems to
be OK but if I have done something drastic I would appreciate it if
someone could tell me!

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.R"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.R"

# modifed J.C.Rougier <J.C.Rougier@durham.ac.uk>, 19.02.02
# to allow cholesky decomposition with pivoting.
#
#chol <- function(x)
#{
#    if(!is.numeric(x))
#	stop("non-numeric argument to chol")
#
#    if(is.matrix(x)) {
#	if(nrow(x) != ncol(x))
#	    stop("non-square matrix in chol")
#	n <- nrow(x)
#    }
#    else {
#	if(length(x) != 1)
#	    stop("non-matrix argument to chol")
#	n <- as.integer(1)
#    }
#
#    if(!is.double(x)) storage.mode(x) <- "double"
#
#    z <- .Fortran("chol",
#		  x=x,
#		  n,
#		  n,
#		  v=matrix(0, nr=n, nc=n),
#		  info=integer(1),
#		  DUP=FALSE, PACKAGE="base")
#    if(z$info)
#	stop("non-positive definite matrix in chol")
#    z$v
#}

"chol" <- function(x, pivot = FALSE)
{
  if (is.complex(x))
    stop("complex matrices not permitted at present")
  else if (!is.numeric(x))
    stop("non-numeric argument")
  x <- as.matrix(x)
  if (length(p <- unique(dim(x))) > 1)
    stop("non-square matrix")

  x[lower.tri(x)] <- 0
  if (!is.double(x))
    storage.mode(x) <- "double"

  z <- .Fortran("dchdc",
    x = x,
    as.integer(p),
    as.integer(p),
    double(p),
    piv = as.integer(rep(0, p)),
    as.integer(pivot),
    rank = integer(1),
    package = "BASE"
  )[c(1, 5, 7)]

  if (!pivot && z$rank<p)
    stop("matrix not positive definite")

  robj <- z$x
  if (pivot) {
    attr(robj, "pivot") <- z$piv
    attr(robj, "rank") <- z$rank
  }
  robj
}

chol2inv <- function(x, size=ncol(x))
{
    if(!is.numeric(x))
	stop("non-numeric argument to chol2inv")
    if (!is.null(attr(x, "pivot")))
        stop("not implemented for pivoted Choleski decomposition") # JCR added
    if(is.matrix(x)) {
	nr <- nrow(x)
	nc <- ncol(x)
    }
    else {
	nr <- length(x)
	nc <- as.integer(1)
    }
    size <- as.integer(size)
    if(size <= 0 || size > nr || size > nc)
	stop("invalid size argument in chol2inv")
    if(!is.double(x)) storage.mode(x) <- "double"
    z <- .Fortran("ch2inv",
		  x=x,
		  nr,
		  size,
		  v=matrix(0, nr=size, nc=size),
		  info=integer(1),
		  DUP=FALSE, PACKAGE="base")
    if(z$info)
	stop("singular matrix in chol2inv")
    z$v
}

--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.Rd"

\name{chol}

\alias{chol}

\title{The Choleski Decomposition}

\description{
  Compute the Choleski factorization of a symmetric real non-negative
  definite square matrix, i.e. the matrix \code{Q} for which
  \code{t(Q) \%*\% Q} equals \code{x}.  }

\usage{
chol(x, pivot = FALSE)
}

\arguments{
  \item{x}{a symmetric, positive definite matrix}
  \item{pivot}{Should pivoting be used?}
}
\value{
  The Choleski decomposition of \code{x}, as an upper-triangular
  matrix.  If pivoting is used, then two additional attributes
  \code{pivot} and \code{rank} are also returned (see Details for more
  information).
}

\details{
  Note that only the upper triangular part of \code{x} is used, so
  that \code{t(Q) \%*\% Q} only equals \code{x} when \code{x} is
  symmetric.

  If \code{pivot=FALSE} and \code{x} is not non-negative definite an
  error occurs.  If \code{x} is positive semi-definite (ie some zero
  eigenvalues) an error may or may not occur, depending on
  finite precision numerical errors.

  If \code{pivot=TRUE}, then the Choleski decomposition of a positive
  semi-definite \code{x} can be computed.  The rank of \code{x} is
  returned as \code{attr(Q, "rank")}, subject to numerical errors.
  The pivot is returned as \code{attr(Q, "pivot")}.  It is no longer
  the case that \code{t(Q) \%*\% Q} equals \code{x}.  However, setting
  \code{pivot <- attr(Q, "pivot")} and \code{oo <- order(pivot)}, it
  is now true that \code{t(Q[, oo]) \%*\% Q[, oo]} equals \code{x},
  or, alternatively, \code{t(Q) \%*\% Q} equals \code{x[pivot,
  pivot]}.  See the examples for more information.
}

\section{Warning}{
  The code does not check for symmetry or for non-negative
  definiteness.  If \code{pivot=TRUE} and \code{x} is not non-negative
  definite then there will be no error message but a meaningless
  result will occur.  So only use \code{pivot=TRUE} when \code{x} is
  non-negative definite by construction.
}

\references{
  Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
  \emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.
}

\seealso{
  \code{\link{chol2inv}} for its \emph{inverse} (without pivoting),
  \code{\link{backsolve}} for solving linear systems with upper
  triangular left sides.

  \code{\link{qr}}, \code{\link{svd}} for related matrix factorizations.
}

\examples{
x <- matrix(c(1:5, (1:5)^2), 5, 2)
m <- crossprod(x)
Q <- chol(m)
all.equal.numeric(t(Q) \%*\% Q, m) # TRUE

Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# now for something postitive semi definite

x <- cbind(x, x[, 1]+3*x[, 2])
m <- crossprod(x)
qr(m)$rank # is 2, as it should be

test <- try(Q <- chol(m))
inherits(test, "try-error") # TRUE

Q <- chol(m, pivot=TRUE) # nb wrong rank here ... you have been warned!
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# and something meaningless

m <- matrix(1:16, 4, 4)
m <- m + t(m) # not nnd
Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
all.equal(t(Q) \%*\% Q, m[pivot, pivot]) # FALSE!
}

\keyword{algebra}
\keyword{array}

--------------06648C7828389FFEA9FD7F0C--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Feb 20 10:59:43 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Feb 2002 10:59:43 +0000 (GMT)
Subject: [Rd] Pivoting in chol
In-Reply-To: <3C737BB3.13BE8B84@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>

Jonathan,

I think our general policy is to move towards using LAPACK for its
superior algorithms and better use of enhanced BLAS routines.  Is there a
suitable LAPACK alternative: my LAPACK manual is in my office and I am
not? (We are also tending to use .Call rather than .Fortran/.C to control
better the making of copies.)

We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
packages might well rely on them, see R-exts.texi.

Brian

On Wed, 20 Feb 2002, Jonathan Rougier wrote:

> Hi Everyone,
>
> I have modified my version of R-1.4.1 to include choleski with pivoting
> (like in Splus).  I thought R-core might consider including this in the
> next version of R, so I give below the steps required to facilitate
> this.
>
> 1. Copied Linpack routine "dchdc.f" into src/appl
>
> 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
>
> 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
>
> 4. Modifed src/library/base/R/chol.R (attached) and
> src/library/base/man/chol.Rd (also attached)
>
> 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
>
> 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
>
> I was following my nose a bit during this process.  Everything seems to
> be OK but if I have done something drastic I would appreciate it if
> someone could tell me!
>
> Cheers, Jonathan.
> --
> Jonathan Rougier                       Science Laboratories
> Department of Mathematical Sciences    South Road
> University of Durham                   Durham DH1 3LE
> tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 11:14:51 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 12:14:51 +0100
Subject: [Rd] f2c problem
In-Reply-To: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>
Message-ID: <0F4576C7-25F3-11D6-B62B-003065CC4CB8@mclink.it>

ok, in this case I need to write to the package maintainer. Thanks.

stefano

p.s. on MacOS there is no even the idea of g77 nor gcc.




On Mercoledì, febbraio 20, 2002, at 11:27 , Göran Broström wrote:

> On Wed, 20 Feb 2002, Stefano Iacus wrote:
>
>> In building princurve package for MacOS I need to use f2c on fortran
>> files.
>>
>> Here is the output of f2c for getlam.f
>>
>> getlam.f:
>>     getlam:
>>     newlam:
>>     lamix:
>> Error on line 116 of getlam.f: Declaration error for v: adjustable
>> dimension on non-argument
>> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
>>
>> what I found strange is that both newlam and get lam have definitions
>> like
>>
>>
>>   subroutine newlam(n,p,sx,lambda,tag)
>>        integer n,p,tag(n)
>>        double precision sx(n,p),lambda(n),lami
>>
>>
>> but for some reason f2c complains only with the last lamix subroutine
>>
>>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>>        integer ns,p
>>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
>>
>> probably because v is not passed as an argument.
>
> Definitely because v is local; this construct is a gcc extension to the
> standard, I think. Solutions: 1) pass v as an argument and reserv space
> in the calling function. 2) Instead of  p, use 1000 (or some other
> large number, which p never will exceed). 3) Use gcc.
>
> Göran
>>
>> Any idea on how to manage this in f2c ?
>>
>> Stefano
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>> -.-.-.-
>> r-devel mailing list -- Read 
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>> _._._._
>>
>
> --
>  Göran Broström                      tel: +46 90 786 5223
>  professor                           fax: +46 90 786 6614
>  Department of Statistics            http://www.stat.umu.se/egna/gb/
>  Umeå University
>  SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 11:16:54 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 11:16:54 +0000
Subject: [Rd] Pivoting in chol
References: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>
Message-ID: <3C7385A6.B29155D6@durham.ac.uk>

Hi Brian,

Prof Brian Ripley wrote:

> I think our general policy is to move towards using LAPACK for its
> superior algorithms and better use of enhanced BLAS routines.  Is there a
> suitable LAPACK alternative: my LAPACK manual is in my office and I am
> not? (We are also tending to use .Call rather than .Fortran/.C to control
> better the making of copies.)

The Lapack routine is "dpotrf", which does not pivot: I searched netlib
for all the words "cholesky lapack double pivot" and drew a blank.

> We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
> packages might well rely on them, see R-exts.texi.

That's true -- I'll put them back!

Cheers, Jonathan.

> On Wed, 20 Feb 2002, Jonathan Rougier wrote:
> 
> > Hi Everyone,
> >
> > I have modified my version of R-1.4.1 to include choleski with pivoting
> > (like in Splus).  I thought R-core might consider including this in the
> > next version of R, so I give below the steps required to facilitate
> > this.
> >
> > 1. Copied Linpack routine "dchdc.f" into src/appl
> >
> > 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
> >
> > 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
> >
> > 4. Modifed src/library/base/R/chol.R (attached) and
> > src/library/base/man/chol.Rd (also attached)
> >
> > 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> > src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> > src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
> >
> > 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
> >
> > I was following my nose a bit during this process.  Everything seems to
> > be OK but if I have done something drastic I would appreciate it if
> > someone could tell me!
> >
> > Cheers, Jonathan.
> > --
> > Jonathan Rougier                       Science Laboratories
> > Department of Mathematical Sciences    South Road
> > University of Durham                   Durham DH1 3LE
> > tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> > http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From d.orme@ic.ac.uk  Wed Feb 20 15:41:29 2002
From: d.orme@ic.ac.uk (d.orme@ic.ac.uk)
Date: Wed, 20 Feb 2002 16:41:29 +0100 (MET)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
Message-ID: <200202201541.QAA20109@pubhealth.ku.dk>

Full_Name: David Orme
Version: 1.4.0
OS: Mac OS 9.1
Submission from: (NULL) (155.198.17.121)


 R crashes (politely and without further repercussions) with a type 3 error
under the following conditions:

Open more than one macintosh() graphics device:
> macintosh()
> macintosh()

and hence there are two devices...
> dev.list()
Macintosh Macintosh 
        2         3 
..with device 3 active.

Selecting device 2 with the mouse brings that device window to the front but
does not make it active - although the device name in the window title bar
flickers briefly to active and then back to inactive. Closing the inactive
device (2) by mouse clicking on the close box causes the crash - I've replicated
this six or seven times successively on my G3.

Using dev.off(2) behaves as expected.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 16:21:53 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 17:21:53 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>

(I'm actually on OSX and rel 1.4.1 of R but) it is normal that an 
inactive window is not activated by mouse clicking. Mouse clicking put 
only the windows in front of the others (and it is activated as a 
window  but not as a device). To activate the "device" linked to a 
window you can use the menus, for example, once you have put the window 
in front.

I'll investigate what is happening under OS 9.1 because under OSX I 
cannot reproduce the problem.

thanks for spotting this.

stefano


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Feb 20 16:29:57 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 20 Feb 2002 08:29:57 -0800 (PST)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>
Message-ID: <Pine.A41.4.44.0202200826380.112560-100000@homer06.u.washington.edu>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> (I'm actually on OSX and rel 1.4.1 of R but) it is normal that an
> inactive window is not activated by mouse clicking. Mouse clicking put
> only the windows in front of the others (and it is activated as a
> window  but not as a device). To activate the "device" linked to a
> window you can use the menus, for example, once you have put the window
> in front.

Another note: it has historically been a bad idea to use the window
manager to destroy an R or S graphical device -- dev.off() has been
strongly recommended.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Feb 20 18:15:29 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 20 Feb 2002 13:15:29 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Tue, 19 Feb 2002 16:54:25 -0500 (EST)"
References: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>
Message-ID: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>


Dan Million <lio@hpss1.ccs.ornl.gov> writes:

> On Tue, 19 Feb 2002, Prof Brian Ripley wrote:
> 
> > > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > > objects with IBM XL Fortran objects in the same library.
> >
> > gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> > for evidence.)  You should be able to install the parts you (or someone)
> > omitted before.
> 
> Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> package does not include g77.  I realize I could start all over and get
> another gcc package from somewhere else.

I would recommend that.  As I said, gcc is relatively easy to
install.  I followed the info provided and didn't run into any
problems. (That's status from last summer, I don't think that this
changed.)  And yes, you don't want to mix gcc with xlf.
Don't get another 'gcc package'.  Download the source tarball from
gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
use, I possibly can reproduce your problems on my AIX box (if any remain).
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 21:15:12 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 16:15:12 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>


Hi Guys,

I've again been surprised when something like

> m <- matrix("", nrow=3,ncol=3)
> index_i <- c(2,1,3)
> index_j <- c(1,3,2)
> vals    <- c("a","b","c")
> m[ index_i, index_j ] <- vals
> m

gives block-wise application of the assignment:

     [,1] [,2] [,3]
[1,] "b"  "b"  "b" 
[2,] "a"  "a"  "a" 
[3,] "c"  "c"  "c" 

when what I wanted was by-element assignment:

     [,1] [,2] [,3]
[1,]   ""   ""  "b"
[2,]  "a"   ""   ""
[3,]   ""  "c"   ""


I always end up writing the code:

> for( p in length(index_i) )
>    m[ index_i[p], index_j[p] ] <- vals[p]

to do what I want.

So, I'm thinking about creating a patch to the R source to add an optional
parameter, say "block",  to the "[<-" call for matrixes and data frames.  

When "block=T" (the default) the old behaviour is preserved.  When "block=F"
the behavior I want occures so that 

> m[ index_i, index_j, block=F ] <- vals

would do what I want.


Comments?  Cheers?  Jeers?  Silence?


-Greg

 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Wed Feb 20 21:36:41 2002
From: david.meyer@ci.tuwien.ac.at (David Meyer)
Date: Wed, 20 Feb 2002 22:36:41 +0100
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <3C7416E9.19D7807@ci.tuwien.ac.at>

"Warnes, Gregory R" wrote:
> 
> Hi Guys,
> 
> I've again been surprised when something like
> 
> > m <- matrix("", nrow=3,ncol=3)
> > index_i <- c(2,1,3)
> > index_j <- c(1,3,2)
> > vals    <- c("a","b","c")
> > m[ index_i, index_j ] <- vals
> > m
> 
> gives block-wise application of the assignment:
> 
>      [,1] [,2] [,3]
> [1,] "b"  "b"  "b"
> [2,] "a"  "a"  "a"
> [3,] "c"  "c"  "c"
> 

Yes, you need to provide the indices as matrix, like:

m[cbind(index_i,index_j)]

(BTW: Hou do you manage to get index_i <- c(...) properly working? My R
version still treats _ as a replacement for <-)

> when what I wanted was by-element assignment:
> 
>      [,1] [,2] [,3]
> [1,]   ""   ""  "b"
> [2,]  "a"   ""   ""
> [3,]   ""  "c"   ""
> 
> I always end up writing the code:
> 
> > for( p in length(index_i) )
> >    m[ index_i[p], index_j[p] ] <- vals[p]
> 
> to do what I want.
> 
> So, I'm thinking about creating a patch to the R source to add an optional
> parameter, say "block",  to the "[<-" call for matrixes and data frames.
> 
> When "block=T" (the default) the old behaviour is preserved.  When "block=F"
> the behavior I want occures so that
> 
> > m[ index_i, index_j, block=F ] <- vals
> 
> would do what I want.
> 
> Comments?  Cheers?  Jeers?  Silence?
> 
> -Greg
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:04:53 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:04:53 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CB@groexmbcr02.pfizer.com>

Hi All,

Typo in my code (as pointed out by David Meyer),  "index_i" and "index_j"
should be "index.i" and "index.j".   

-Greg


> -----Original Message-----
> From: David Meyer [mailto:david.meyer@ci.tuwien.ac.at]
> Sent: Wednesday, February 20, 2002 4:37 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] Feature Request: "matrix[1:10,1:10, 
> block=F] <- 1:10"
> 
> 
> "Warnes, Gregory R" wrote:
> > 
> > Hi Guys,
> > 
> > I've again been surprised when something like
> > 
> > > m <- matrix("", nrow=3,ncol=3)
> > > index_i <- c(2,1,3)
> > > index_j <- c(1,3,2)
> > > vals    <- c("a","b","c")
> > > m[ index_i, index_j ] <- vals
> > > m
> > 
> > gives block-wise application of the assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,] "b"  "b"  "b"
> > [2,] "a"  "a"  "a"
> > [3,] "c"  "c"  "c"
> > 
> 
> Yes, you need to provide the indices as matrix, like:
> 
> m[cbind(index_i,index_j)]
> 
> (BTW: Hou do you manage to get index_i <- c(...) properly 
> working? My R
> version still treats _ as a replacement for <-)
> 
> > when what I wanted was by-element assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,]   ""   ""  "b"
> > [2,]  "a"   ""   ""
> > [3,]   ""  "c"   ""
> > 
> > I always end up writing the code:
> > 
> > > for( p in length(index_i) )
> > >    m[ index_i[p], index_j[p] ] <- vals[p]
> > 
> > to do what I want.
> > 
> > So, I'm thinking about creating a patch to the R source to 
> add an optional
> > parameter, say "block",  to the "[<-" call for matrixes and 
> data frames.
> > 
> > When "block=T" (the default) the old behaviour is 
> preserved.  When "block=F"
> > the behavior I want occures so that
> > 
> > > m[ index_i, index_j, block=F ] <- vals
> > 
> > would do what I want.
> > 
> > Comments?  Cheers?  Jeers?  Silence?
> > 
> > -Greg
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Feb 20 22:20:45 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 20 Feb 2002 17:20:45 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <15476.8509.861348.611923@gargle.gargle.HOWL>

Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
 R> m <- matrix("", nrow=3,ncol=3)
 R> index_i <- c(2,1,3)
 R> index_j <- c(1,3,2)
 R> vals    <- c("a","b","c")
 R> m[ index_i, index_j ] <- vals

but what he wants to get is:
 >      [,1] [,2] [,3]
 > [1,]   ""   ""  "b"
 > [2,]  "a"   ""   ""
 > [3,]   ""  "c"   ""

Just do this instead:
 R> m[ cbind(index_i, index_j) ] <- vals

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:44:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:44:24 -0500
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>



Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
[brahm@alum.mit.edu] who suggested:

  m[ cbind(index.i, index.j) ] <- vals

This works fine for the example I gave.  

Unfortunately, this approach doesn't extend to using the row and column
names to make assignments:

> m <- matrix("",ncol=3,nrow=3)
> dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> m
  A  B  C 
a "" "" ""
b "" "" ""
c "" "" ""
> 
> index.i <- c("b","a","c")
> index.j <- c("B","A","C")
> vals <- c("1","2","3")
> 
> m[ cbind(index.i, index.j) ] <- vals
> m
                                      b   a   c   B   A   C 
 ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3" 

This looks like a bug...

-Greg

> -----Original Message-----
> From: David Brahm [mailto:brahm@alum.mit.edu]
> Sent: Wednesday, February 20, 2002 5:21 PM
> To: gregory_r_warnes@groton.pfizer.com
> Cc: r-devel@hypatia.math.ethz.ch
> Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
> 
> 
> Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
>  R> m <- matrix("", nrow=3,ncol=3)
>  R> index_i <- c(2,1,3)
>  R> index_j <- c(1,3,2)
>  R> vals    <- c("a","b","c")
>  R> m[ index_i, index_j ] <- vals
> 
> but what he wants to get is:
>  >      [,1] [,2] [,3]
>  > [1,]   ""   ""  "b"
>  > [2,]  "a"   ""   ""
>  > [3,]   ""  "c"   ""
> 
> Just do this instead:
>  R> m[ cbind(index_i, index_j) ] <- vals
> 
> -- 
>                               -- David Brahm (brahm@alum.mit.edu)
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Feb 2002 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202210615.g1L6F4B02792@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1317 *
Subject: library(methods): setMethod with "ANY" fails.
From: hb@maths.lth.se
Date: Tue, 19 Feb 2002 01:22:58 +0100 (MET)
* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1319 *
Subject: Maritime Newsletter (Week 8)
From: MarineDigital Inc<newsletter@marinedigital.com>
Date: Thu, 21 Feb 2002 05:53:14 +0900
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 06:48:25 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 21 Feb 2002 06:48:25 +0000 (GMT)
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0202210640450.19128-100000@gannet.stats>

On Wed, 20 Feb 2002, Warnes, Gregory R wrote:

> Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
> [brahm@alum.mit.edu] who suggested:
>
>   m[ cbind(index.i, index.j) ] <- vals
>
> This works fine for the example I gave.
>
> Unfortunately, this approach doesn't extend to using the row and column
> names to make assignments:
>
> > m <- matrix("",ncol=3,nrow=3)
> > dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> > m
>   A  B  C
> a "" "" ""
> b "" "" ""
> c "" "" ""
> >
> > index.i <- c("b","a","c")
> > index.j <- c("B","A","C")
> > vals <- c("1","2","3")
> >
> > m[ cbind(index.i, index.j) ] <- vals
> > m
>                                       b   a   c   B   A   C
>  ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3"
>
> This looks like a bug...

It's as documented.  Take a look at e.g. the description of indexing
in Venables & Ripley.  You can use match() to turn names into numbers.

>From the R Language Definition:

    It is possible to use a matrix of integers as an index ...

S throws an error in your example, and perhaps R should too.  But not
giving errors when used in undocumented ways is not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:07:31 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:07:31 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>

On 20 Feb 2002, Thomas Vogels wrote:

> Dan Million <lio@hpss1.ccs.ornl.gov> writes:
>
> > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > package does not include g77.  I realize I could start all over and get
> > another gcc package from somewhere else.
>
> I would recommend that.  As I said, gcc is relatively easy to
> install.  I followed the info provided and didn't run into any
> problems. (That's status from last summer, I don't think that this
> changed.)  And yes, you don't want to mix gcc with xlf.
> Don't get another 'gcc package'.  Download the source tarball from
> gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> use, I possibly can reproduce your problems on my AIX box (if any remain).
>   -tom

I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
and the results are just the same; it still doesn't build the shared
libraries correctly, and R still coredumps.  Can't say I see much
improvement here.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Thu Feb 21 22:35:09 2002
From: tov@ece.cmu.edu (Thomas J Vogels)
Date: Thu, 21 Feb 2002 17:35:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
References: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>
Message-ID: <3C75761D.6210E3C9@ece.cmu.edu>

Dan Million wrote:

> On 20 Feb 2002, Thomas Vogels wrote:
>
> > Dan Million <lio@hpss1.ccs.ornl.gov> writes:
> >
> > > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > > package does not include g77.  I realize I could start all over and get
> > > another gcc package from somewhere else.
> >
> > I would recommend that.  As I said, gcc is relatively easy to
> > install.  I followed the info provided and didn't run into any
> > problems. (That's status from last summer, I don't think that this
> > changed.)  And yes, you don't want to mix gcc with xlf.
> > Don't get another 'gcc package'.  Download the source tarball from
> > gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> > use, I possibly can reproduce your problems on my AIX box (if any remain).
> >   -tom
>
> I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> and the results are just the same; it still doesn't build the shared
> libraries correctly, and R still coredumps.  Can't say I see much
> improvement here.
>
> Dan

Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
gcc first.
  -tom


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:39:14 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:39:14 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <3C75761D.6210E3C9@ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211234130.12424-100000@hpss1.ccs.ornl.gov>

On Thu, 21 Feb 2002, Thomas J Vogels wrote:

> > I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> > and the results are just the same; it still doesn't build the shared
> > libraries correctly, and R still coredumps.  Can't say I see much
> > improvement here.
> >
> > Dan
>
> Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
> earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
> gcc first.
>   -tom

Yes, I've been trying on AIX 4.3.3 and AIX 5.1 both.  On earlier attempts,
results were identical on both, so I've started to assume that there are
no significant OS differences to worry about.  I'll probably be trying it
on AIX 4.3.3 also, just to cover all the bases.

I'm going to try building two separate trees, one with plain R, and the
other strictly for the R shared library.  I think that will avoid some of
my library problems, but the coredump doesn't want to go away, it seems.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jblewis@ucla.edu  Thu Feb 21 19:51:27 2002
From: jblewis@ucla.edu (jblewis@ucla.edu)
Date: Thu, 21 Feb 2002 20:51:27 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202211951.UAA29055@pubhealth.ku.dk>

Full_Name: Jeffrey B. Lewis
Version: 1.4.0
OS: MS2000 5.00.2195
Submission from: (NULL) (128.97.223.213)


Here is an example,

> pi;
[1] 0.7
>

On my home machine running (I think) the same build of R but on WIN98
returns that 3.141... The basic trigometric functions return their 
correct values. So it seems to be a problem in the definition of 
this constant.  

Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 20:55:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 21 Feb 2002 21:55:08 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202212055.VAA29171@pubhealth.ku.dk>

What is `MS2000'?  bug.report() cannot possibly generate that under
Windows, so I presume this is some sort of Windows clone.

You know, people do spend a lot of time carefully checking ports of R
against known results.  Did you really believe that the official R port
for Windows produced pi = 0.7 on an uncorrupted operating system?

Three possibilities occur to me:

1) You have defined an object called pi somewhere in your search path.

2) The base R code has been corrupted (it contains pi <- 4*atan(1), BTW)

3) Your OS has corrupted components and so is computing atan incorrectly.

Try 4*atan(1).  If that is incorrect, re-install your OS. If it is
correct, try re-installing R (which in any case you want to do as 1.4.1 is
current).

On Thu, 21 Feb 2002 jblewis@ucla.edu wrote:

> Full_Name: Jeffrey B. Lewis
> Version: 1.4.0
> OS: MS2000 5.00.2195
> Submission from: (NULL) (128.97.223.213)
>
>
> Here is an example,

An example of what?

> > pi;
> [1] 0.7
> >
>
> On my home machine running (I think) the same build of R but on WIN98
> returns that 3.141... The basic trigometric functions return their > correct values. So it seems to be a problem in the definition of
> this constant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb 22 07:18:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Feb 2002 08:18:44 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320) (fwd)
Message-ID: <200202220718.IAA00194@pubhealth.ku.dk>

Filing response for the record

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Thu, 21 Feb 2002 13:45:06 -0800
From: Jeffrey Lewis <jblewis@ucla.edu>
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] pi returns 0.7 (PR#1320)

Brian,

Didn't use bug.report().  Typed MS2000 into a web form.
This is windows 2000 factory installed on an 12 week old
Dell machine.

4*atan(1) returns the correect answer, in fact, that I have been
using for pi since I realized the problem.

It seems R is loading a previously saved workspace.  I did not think
that
I had ever ``saved'' a workspace, but it seems that I did and that
somehow
pi was assigned in that workspace.

I am somewhat surprised that R would let you redefine built-in constants
without warning.

Thank you for your kind suggestions. I apologize for wasting your time.

Jeff


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Fri Feb 22 13:41:19 2002
From: alobo@ija.csic.es (alobo@ija.csic.es)
Date: Fri, 22 Feb 2002 14:41:19 +0100 (MET)
Subject: [Rd] Gnome causes different behaviour of some R functions (PR#1321)
Message-ID: <200202221341.OAA04115@pubhealth.ku.dk>

Full_Name: Agustin Lobo
Version: 1.4.0
OS: linux (suse 7.3)
Submission from: (NULL) (193.144.102.102)


 Saving lda.default as text files from within gui="none" and from within
 gui="gnome" 
 and comparing afterwards with diff, I get:
 
 alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
 1c1
 < function (x, grouping, prior = proportions, tol = 1, method =
 c("moment",
 ---
> function (x, grouping, prior = proportions, tol = 1e-04, method =
 c("moment",
 61c61
 <             if (all(abs(w - w0) < 0,01))
 ---
>             if (all(abs(w - w0) < 0.01))
 109c109
 <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
 ---
>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)


While lda.default works fine within R --gui="none", it produces the following
error
from within R --gui="gnome" for the same data:

> a
<-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="moment")
Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
: 
        length of dimnames[2] not equal to array extent
In addition: Warning message: 
variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
= mod23puriflda[, 

This problem is not particular to lda.default. The following code, which works
fine from within R --gui="none", fails from within within R --gui="gnome":

> x1<-rnorm(20)
> x2<-rnorm(20)
> boxplot(list(x1=x1,x2=x2))
Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
	missing value where logical needed



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Feb 22 17:59:35 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 22 Feb 2002 12:59:35 -0500
Subject: [Rd] c-c problem when R compiled with pthread
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>

Dear R-devel,

I've run into this problem that when I hit c-c to interrupt a command or
computation, the R session just ends.

The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
with 2GB ram.

1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
needed pthread.  C-c at the R prompt ends the R session.

2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
Same thing happened.  However,
I tried running this version of R under ESS, and c-c c-c works fine.
Pressing the "interrupt" button in the R gnome interface also worked fine.

3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.

This seems to suggest pthread as the problem.  Can anyone offer
clues/solutions?  

Regards,
Andy 

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Feb 22 18:58:16 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 22 Feb 2002 12:58:16 -0600
Subject: [Rd] c-c problem when R compiled with pthread
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>; from andy_liaw@merck.com on Fri, Feb 22, 2002 at 12:59:35PM -0500
References: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>
Message-ID: <20020222125816.B18743@nokomis.stat.umn.edu>

Sounds like a thread started by MKL or Atlas is not masking SIGINT
signals and has a default SIGINT handler. If MKL/Atlas do not provide
a way of getting their worker threads to ignore interrupts (which is
probably the only safe thing they can do) then this may be a tough one
to solve.
  
I suspect you would have the same problem in ESS/Gnome if you fire up
a long-enough-running calculation that uses BLAS and C-c that (if you
have 2 processors you might have this problem about 50% of the time
and possibly something worse the other 50%, depending on how they do
things).
  
Running strace might help figure out in more detail what is happening.

luke

On Fri, Feb 22, 2002 at 12:59:35PM -0500, Liaw, Andy wrote:
> Dear R-devel,
> 
> I've run into this problem that when I hit c-c to interrupt a command or
> computation, the R session just ends.
> 
> The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
> with 2GB ram.
> 
> 1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
> needed pthread.  C-c at the R prompt ends the R session.
> 
> 2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
> Same thing happened.  However,
> I tried running this version of R under ESS, and c-c c-c works fine.
> Pressing the "interrupt" button in the R gnome interface also worked fine.
> 
> 3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.
> 
> This seems to suggest pthread as the problem.  Can anyone offer
> clues/solutions?  
> 
> Regards,
> Andy 
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stud8351@ma.tum.de  Sat Feb 23 03:56:15 2002
From: stud8351@ma.tum.de (stud8351@ma.tum.de)
Date: Sat, 23 Feb 2002 04:56:15 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230356.EAA01726@pubhealth.ku.dk>

Full_Name: Christof Boeckler
Version: 1.4.1
OS: linux 2.4, x86
Submission from: (NULL) (217.233.100.207)


Hello R-gurus,

I have a little contribution to the wishlist:

Since (?) I am using the more recent ec-font-family with LaTeX instead of the
original cm-family, I did not manage to use this new feature about using (TeX's)
cm-fonts for PS-output. I got the following errors when trying to use such a
file:

dvips: Font CMR10 used in file fig.eps is not in the mapping file.
dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMMI10 used in file fig.eps is not in the mapping file.

Does anyone know what went wrong? Under these circumstances, is it possible to
use this feature at all? If not, I would be happy to see that feature in a
future version of R.

I'd appreciate any comments. 

Thanks
       Christof

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 07:33:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 08:33:40 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230733.IAA01976@pubhealth.ku.dk>

First you need to get postscript Type 1 versions of the EC fonts.
For a long time there were none available.  There is now the CM-Super
font package, which is 55Mb in size and so not in the standard TeX
distributions (it's much larger than they are).

If you do have them, postscript() already has the ability to use new font
families, so all you have to do is to make use of it.

On Sat, 23 Feb 2002 stud8351@ma.tum.de wrote:

> Full_Name: Christof Boeckler
> Version: 1.4.1
> OS: linux 2.4, x86
> Submission from: (NULL) (217.233.100.207)
>
>
> Hello R-gurus,
>
> I have a little contribution to the wishlist:
>
> Since (?) I am using the more recent ec-font-family with LaTeX instead of the
> original cm-family, I did not manage to use this new feature about using (TeX's)
> cm-fonts for PS-output. I got the following errors when trying to use such a
> file:
>
> dvips: Font CMR10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMMI10 used in file fig.eps is not in the mapping file.
>
> Does anyone know what went wrong?

Yes. You don't have the CM type 1 fonts installed (or not installed so
dvips can use them).   I don't know why you think R-bugs is an appropriate
forum for dvips problems, though.

> Under these circumstances, is it possible to
> use this feature at all? If not, I would be happy to see that feature in a
> future version of R.

It's already there.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 16:57:14 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 17:57:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231657.RAA02935@pubhealth.ku.dk>

Dear R-developers

There is a discrepancy between the variables found by typing
names(options()) and the variables described on the help page for the
function ``options''.

The following variables are in names(options()) but not described on the
help page :

"error.messages"
"repositories"
"show.coef.Pvalues"
"help.try.all.packages"
"download.info"
"dvipscmd"

Since options() is part of ``base R'' and the homepage claims that the
options described there are the only options used by ``base R'', this
may be considered as a
bug.

The following variables are described on the help
page, but are not in names(options()):

error
show.error.messages
download.file.method
de.cellwidth
internet.info


I had a problem with the option ``show.error.messages'' which may be
related to this option not being in names(options()) (I do not claim to
understand how options() really work).
Reporting and checking a problem with ``show.error.messages'' is
actually confusing, since this option changes the printed output from
errors. Here is the problem and my comments on the output (consider
starting a fresh R session).

stop("test - err. mess. printed ")
## prints error mesage, unless ``show.error.messages=FALSE''
op <- options()
options(show.error.messages=FALSE)
stop("test - err. mess. printed ")
## as expected, nothing is printed
options(op)
stop("test - err. mess. printed ")
## Reseting the options, we expect to see the print. Nothing is printed
!


My temporary solution to the problem was to include 

options(show.error.messages=TRUE)

in my .Rprofile file


>  version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R 



Cheers Ole

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Sat Feb 23 18:18:17 2002
From: jago@mclink.it (Stefano Iacus)
Date: Sat, 23 Feb 2002 19:18:17 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <B5D43EA5-2889-11D6-BE74-003065CC4CB8@mclink.it>

It has been fixed in R-devel now. Thanks David.


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 18:25:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 19:25:00 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231825.TAA03056@pubhealth.ku.dk>

Much of this is not a bug.  The situation is complex.

The options list is dynamic: users can add new options at any time.
Options need not be set, and which options are set depends on
the platform.  Many options if unset have an internal default: this is a
protection against a damaged set of options, in particular a broken system
Rprofile file.

It is an incorrect assumption that setting the previous options returned
does re-set the options: it only resets those that were previously set,
not those set since.

In many cases setting an option to NULL will unset it.

There is at least one bug: download.info should not be set, it having been
changed to internet.info (which has an internal default).

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Dear R-developers
>
> There is a discrepancy between the variables found by typing
> names(options()) and the variables described on the help page for the
> function ``options''.
>
> The following variables are in names(options()) but not described on the
> help page :
>
> "error.messages"
> "repositories"
> "show.coef.Pvalues"
> "help.try.all.packages"
> "download.info"
> "dvipscmd"

Some options are documented where they are used: numbers 2 and 4 are, I
know.  I believe `error.messages' is obselete.

> Since options() is part of ``base R'' and the homepage claims that the
> options described there are the only options used by ``base R'', this
> may be considered as a
> bug.

That claim is a bug, not least because ``base R'' is undefined!

> The following variables are described on the help
> page, but are not in names(options()):
>
> error
> show.error.messages
> download.file.method
> de.cellwidth
> internet.info

Right. They can be set if needed, but have internal defaults.

> I had a problem with the option ``show.error.messages'' which may be
> related to this option not being in names(options()) (I do not claim to
> understand how options() really work).
> Reporting and checking a problem with ``show.error.messages'' is
> actually confusing, since this option changes the printed output from
> errors. Here is the problem and my comments on the output (consider
> starting a fresh R session).
>
> stop("test - err. mess. printed ")
> ## prints error mesage, unless ``show.error.messages=FALSE''
> op <- options()
> options(show.error.messages=FALSE)
> stop("test - err. mess. printed ")
> ## as expected, nothing is printed
> options(op)
> stop("test - err. mess. printed ")
> ## Reseting the options, we expect to see the print. Nothing is printed

That does not `reset the options', nor is that what the help page example
says it does (note the word `initial').  The same thing happens with
options("error").

I'll add an explicit default for that one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 20:05:29 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 21:05:29 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232005.VAA03212@pubhealth.ku.dk>

Not all options listed on the help page for options() are set initially.
This should be said on the help page.

ripley@stats.ox.ac.uk wrote:
> 
> Much of this is not a bug.  The situation is complex.
> 
> The options list is dynamic: users can add new options at any time.
> Options need not be set, and which options are set depends on
> the platform.  Many options if unset have an internal default: this is a
> protection against a damaged set of options, in particular a broken system
> Rprofile file.
> 
> It is an incorrect assumption that setting the previous options returned
> does re-set the options: it only resets those that were previously set,
> not those set since.
> 
> In many cases setting an option to NULL will unset it.
> 
> There is at least one bug: download.info should not be set, it having been
> changed to internet.info (which has an internal default).
> 
> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:
> 
> > Dear R-developers
> >
> > There is a discrepancy between the variables found by typing
> > names(options()) and the variables described on the help page for the
> > function ``options''.
> >
> > The following variables are in names(options()) but not described on the
> > help page :
> >
> > "error.messages"
> > "repositories"
> > "show.coef.Pvalues"
> > "help.try.all.packages"
> > "download.info"
> > "dvipscmd"
> 
> Some options are documented where they are used: numbers 2 and 4 are, I
> know.  I believe `error.messages' is obselete.
> 
> > Since options() is part of ``base R'' and the homepage claims that the
> > options described there are the only options used by ``base R'', this
> > may be considered as a
> > bug.
> 
> That claim is a bug, not least because ``base R'' is undefined!
> 
> > The following variables are described on the help
> > page, but are not in names(options()):
> >
> > error
> > show.error.messages
> > download.file.method
> > de.cellwidth
> > internet.info
> 
> Right. They can be set if needed, but have internal defaults.
> 
> > I had a problem with the option ``show.error.messages'' which may be
> > related to this option not being in names(options()) (I do not claim to
> > understand how options() really work).
> > Reporting and checking a problem with ``show.error.messages'' is
> > actually confusing, since this option changes the printed output from
> > errors. Here is the problem and my comments on the output (consider
> > starting a fresh R session).
> >
> > stop("test - err. mess. printed ")
> > ## prints error mesage, unless ``show.error.messages=FALSE''
> > op <- options()
> > options(show.error.messages=FALSE)
> > stop("test - err. mess. printed ")
> > ## as expected, nothing is printed
> > options(op)
> > stop("test - err. mess. printed ")
> > ## Reseting the options, we expect to see the print. Nothing is printed
> 
> That does not `reset the options', nor is that what the help page example
> says it does (note the word `initial').  The same thing happens with
> options("error").
> 
> I'll add an explicit default for that one.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 20:30:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 21:30:15 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232030.VAA03252@pubhealth.ku.dk>

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Not all options listed on the help page for options() are set initially.
> This should be said on the help page.

Is it said that they are?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From meyer@ci.tuwien.ac.at  Mon Feb 25 10:34:25 2002
From: meyer@ci.tuwien.ac.at (meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 11:34:25 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without response (PR#1325)
Message-ID: <200202251034.LAA08726@pubhealth.ku.dk>

if the terms-object contains no response, delete.response mutilates the 
predvars-attribute in the line:

attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

which should probably changed to:

    if (length(f) == 3) 
	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 02
 day = 24
 language = R

Search Path:
 .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 14:38:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 15:38:44 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without (PR#1326)
Message-ID: <200202251438.PAA11872@pubhealth.ku.dk>

Thanks, fixed now.

Why were you calling delete.response on an object with no response, BTW?
I wonder whether delete.response should not be a no-op in that case (it is
in S), if there is any reason to handle it at all.

On Mon, 25 Feb 2002 meyer@ci.tuwien.ac.at wrote:

> if the terms-object contains no response, delete.response mutilates the
> predvars-attribute in the line:
>
> attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> which should probably changed to:
>
>     if (length(f) == 3)
> 	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> <<insert bug report here>>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 02
>  day = 24
>  language = R
>
> Search Path:
>  .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Feb 27 15:42:51 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 27 Feb 2002 10:42:51 -0500
Subject: [Rd] Suggestion for rug():  include "line" and "pos" parameters, or ...
Message-ID: <s2vp7u41iuv6gpt8tksc3mrq8k09q7dogg@4ax.com>

The rug() function works by drawing an axis with tickmarks at the data
points.  Recently I wanted to make a visual comparison of two sets of
arrival times by drawing one rug above the other.  The axis() function
used by rug() has optional parameters "line" and "pos" to allow this,
but rug() doesn't.  

Simply adding line and pos as parameters which are passed to axis(),
or adding a "..." parameter to be passed to axis(), would fix this.

I don't know which is preferable. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Mon Feb 25 15:44:55 2002
From: david.meyer@ci.tuwien.ac.at (david.meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 16:44:55 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1327)
Message-ID: <200202251544.QAA12655@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> Thanks, fixed now.
> 
> Why were you calling delete.response on an object with no response, BTW?

I used it in predict.svm(), and the terms-object contained in the svm
model just happens to have no response for the ``one-class
classification'' if svm was called e.g. by:

m <- svm(~a+b).

Because of the second line in delete.response()

    if (length(f) == 3) 
        f[[2]] <- NULL

handling the no-response case, I believed I was allowed to use
delete.response() without checking for this.

> I wonder whether delete.response should not be a no-op in that case (it is
> in S), if there is any reason to handle it at all.

So people will have to check for it before using delete.response() -
this is probably more secure indeed.

-d
> 

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 15:50:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 16:50:35 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1328)
Message-ID: <200202251550.QAA12726@pubhealth.ku.dk>

On Mon, 25 Feb 2002, David Meyer wrote:

> Prof Brian D Ripley wrote:
> >
> > Thanks, fixed now.
> >
> > Why were you calling delete.response on an object with no response, BTW?
>
> I used it in predict.svm(), and the terms-object contained in the svm
> model just happens to have no response for the ``one-class
> classification'' if svm was called e.g. by:
>
> m <- svm(~a+b).
>
> Because of the second line in delete.response()
>
>     if (length(f) == 3)
>         f[[2]] <- NULL
>
> handling the no-response case, I believed I was allowed to use
> delete.response() without checking for this.

Indeed you were. But delete.response does change the terms object in that
case, and I suspect it should either return it unchanged (as S does) or
give an error.

> > I wonder whether delete.response should not be a no-op in that case (it is
> > in S), if there is any reason to handle it at all.
>
> So people will have to check for it before using delete.response() -
> this is probably more secure indeed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Feb 25 20:59:36 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 25 Feb 2002 14:59:36 -0600
Subject: [Rd] File permissions test during R CMD check
Message-ID: <20020225205936.GA15595@sonny.eddelbuettel.com>


I (still) use RCS, and not CVS, for my own projects. R CMD check does not
like the 0444 file permissions on files check into RCS.  

I conjecture that this stems from desire to have the installed files in a
state in which they can be edited, but I might be off base ... In case my
conjecture holds, would it be possible to relax the restriction during R CMD
check, but then install the files as 0644 ?

Other than that, R CMD check is a very impressive tool.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Feb 26 07:51:39 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 26 Feb 2002 08:51:39 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.16011.518674.971231@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> I (still) use RCS, and not CVS, for my own projects. R CMD check does
> not like the 0444 file permissions on files check into RCS.

> I conjecture that this stems from desire to have the installed files
> in a state in which they can be edited, but I might be off base ... In
> case my conjecture holds, would it be possible to relax the
> restriction during R CMD check, but then install the files as 0644 ?

Not as long as R CMD build takes what is in the source dirs.

There are some comments about possible improvements to permission tests
in the code of check, but in any case all files that are to be installed
should be at least 644.  We could relax that for e.g. C source or
headers, but not e.g. for DESCRIPTION.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 09:05:13 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 09:05:13 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15483.16011.518674.971231@mithrandir.hornik.net>
Message-ID: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>

On Tue, 26 Feb 2002, Kurt Hornik wrote:

> >>>>> Dirk Eddelbuettel writes:
>
> > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > not like the 0444 file permissions on files check into RCS.
>
> > I conjecture that this stems from desire to have the installed files
> > in a state in which they can be edited, but I might be off base ... In
> > case my conjecture holds, would it be possible to relax the
> > restriction during R CMD check, but then install the files as 0644 ?
>
> Not as long as R CMD build takes what is in the source dirs.
>
> There are some comments about possible improvements to permission tests
> in the code of check, but in any case all files that are to be installed
> should be at least 644.  We could relax that for e.g. C source or
> headers, but not e.g. for DESCRIPTION.

First comment: there is a --no-perms option to turn the check off.

I don't think there is a problem with DESCRIPTION, since we make the
installed copy with cat and sed.  However, the data file and inst files are
copied and so might have permissions copied too, but the data files have
chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
Installing read-only files makes updating packages a lot harder and would
break the current mechanisms for installing updates over existing copies.
But that only argues for the installed copies being at least 644.

There are a number of S users of SCCS/RCS who distribute tarballs with
read-only permissions.  Inevitably I find I need to make some changes and
get obstructed.  That's not supposed to happen with R packages, but it does
and so I do think we want the C source files and headers in an editable
state.

One other minor point: the source tarball will be used on OSes other than
Unix-alikes.  I guess of those only NTFS on Windows NT/2000/XP has a real
file security system (which is based on VMS and is far more elaborate than
0644) and I am not at all clear what would happen if a read-only tarball
was used there, nor how easy it would be to make Rcmd INSTALL cope with
one.  I don't want to begin to think about cross-platform remote-mounted
file systems ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 12:25:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 26 Feb 2002 13:25:30 +0100 (MET)
Subject: [Rd] subscripting problems with matrix lists (PR#1329)
Message-ID: <200202261225.NAA18768@pubhealth.ku.dk>

R 1.4.1 (and R-devel)
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
     [,1]        [,2]
[1,] "Numeric,3" "Numeric,1"
[2,] "Numeric,3" "Character,3"
> m[[1,2]]
[1] 3.141593
> m[[2,2]]
[1] "a" "b" "c"

correct so far, but
> m[2,2]
[[1]]
NULL

> m[,2]
[[1]]
NULL

[[2]]
NULL

which are lists of the correct length but wrong content.

This works correctly in S:
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
           [,1]         [,2]
[1,] numeric, 3 3.1416
[2,] numeric, 3 character, 3
> m[[1,2]]
[1] 3.1416
> m[[2,2]]
[1] "a" "b" "c"
> m[2,2]
$a4:
[1] "a" "b" "c"

> m[,2]
$a3:
[1] 3.1416

$a4:
[1] "a" "b" "c"

The printout is a little better, too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:20:11 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:20:11 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
References: <15483.16011.518674.971231@mithrandir.hornik.net> <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
Message-ID: <20020226132011.GA21081@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> On Tue, 26 Feb 2002, Kurt Hornik wrote:
> 
> > >>>>> Dirk Eddelbuettel writes:
> >
> > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > not like the 0444 file permissions on files check into RCS.
> >
> > > I conjecture that this stems from desire to have the installed files
> > > in a state in which they can be edited, but I might be off base ... In
> > > case my conjecture holds, would it be possible to relax the
> > > restriction during R CMD check, but then install the files as 0644 ?
> >
> > Not as long as R CMD build takes what is in the source dirs.
> >
> > There are some comments about possible improvements to permission tests
> > in the code of check, but in any case all files that are to be installed
> > should be at least 644.  We could relax that for e.g. C source or
> > headers, but not e.g. for DESCRIPTION.

I also checked in the .R and .Rd files.

> First comment: there is a --no-perms option to turn the check off.

Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
not turned on at the archive guard's machine.

> I don't think there is a problem with DESCRIPTION, since we make the
> installed copy with cat and sed.  However, the data file and inst files are
> copied and so might have permissions copied too, but the data files have
> chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> Installing read-only files makes updating packages a lot harder and would
> break the current mechanisms for installing updates over existing copies.

Right -- That is why I suggest to alter file perms/modes on /installation/
not package creation.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 13:37:14 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 13:37:14 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020226132011.GA21081@sonny.eddelbuettel.com>
Message-ID: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>

On Tue, 26 Feb 2002, Dirk Eddelbuettel wrote:

> On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> > On Tue, 26 Feb 2002, Kurt Hornik wrote:
> >
> > > >>>>> Dirk Eddelbuettel writes:
> > >
> > > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > > not like the 0444 file permissions on files check into RCS.
> > >
> > > > I conjecture that this stems from desire to have the installed files
> > > > in a state in which they can be edited, but I might be off base ... In
> > > > case my conjecture holds, would it be possible to relax the
> > > > restriction during R CMD check, but then install the files as 0644 ?
> > >
> > > Not as long as R CMD build takes what is in the source dirs.
> > >
> > > There are some comments about possible improvements to permission tests
> > > in the code of check, but in any case all files that are to be installed
> > > should be at least 644.  We could relax that for e.g. C source or
> > > headers, but not e.g. for DESCRIPTION.
>
> I also checked in the .R and .Rd files.
>
> > First comment: there is a --no-perms option to turn the check off.
>
> Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
> not turned on at the archive guard's machine.
>
> > I don't think there is a problem with DESCRIPTION, since we make the
> > installed copy with cat and sed.  However, the data file and inst files are
> > copied and so might have permissions copied too, but the data files have
> > chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> > Installing read-only files makes updating packages a lot harder and would
> > break the current mechanisms for installing updates over existing copies.
>
> Right -- That is why I suggest to alter file perms/modes on /installation/
> not package creation.

and you omitted two paras of why I thought that was not the answer.
Briefly:

1) It's not clear we can alter perm/modes on installation on all OSes.
2) Users may need to modify the source files to get the package to install
(especially the C files).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:52:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:52:05 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
References: <20020226132011.GA21081@sonny.eddelbuettel.com> <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
Message-ID: <20020226135205.GA25774@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 01:37:14PM +0000, Prof Brian D Ripley wrote:
> > Right -- That is why I suggest to alter file perms/modes on /installation/
> > not package creation.
> 
> and you omitted two paras of why I thought that was not the answer.
> Briefly:
> 
> 1) It's not clear we can alter perm/modes on installation on all OSes.
> 2) Users may need to modify the source files to get the package to install
> (especially the C files).

What I don't get is that I need to be root on my Unix boxen too in order to
install R package (at least into their default loci where I prefer to keep
them).  With either the big bad root hat on, on the fact that you should
inherit ownership alteration rights within your local directories (below
$HOME) say I do not see 2) as an issue.

I cannot speak to 1).

It was just a suggestion, anyway. I wrote myself a release.sh which grabs
files, copies them locally, alters them then runs R CMD build.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Feb 26 14:18:08 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Feb 2002 15:18:08 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.39200.764473.501866@gargle.gargle.HOWL>

>>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org> writes:

    Dirk> I (still) use RCS, and not CVS, for my own projects. R
    Dirk> CMD check does not like the 0444 file permissions on
    Dirk> files check into RCS.

    Dirk> I conjecture that this stems from desire to have the
    Dirk> installed files in a state in which they can be
    Dirk> edited, but I might be off base ... In case my
    Dirk> conjecture holds, would it be possible to relax the
    Dirk> restriction during R CMD check, but then install the
    Dirk> files as 0644 ?

Dirk, I've had the exaxt same situation months ago (since then
R-devel was "1.4.0 to be") and reacted the same way as you, just
to R-core instead of R-devel back then ....
My solution was to manually "rcs -U" all the relevant files, and
from then on, rcs kept them rw-r--r-- (aka 644) as desired.
I haven't seen a reason why I should use RCS locks when I'm the
only one accessing these files.

    Dirk> Other than that, R CMD check is a very impressive
    Dirk> tool.

(yes, and because of that and later submission to CRAN
 I agree that "--no-perms" is not a solution to me neither).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Feb 26 20:04:11 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Feb 2002 21:04:11 +0100 (MET)
Subject: [Rd] itemize/item crashes R CMD check (PR#1330)
Message-ID: <200202262004.VAA22254@pubhealth.ku.dk>


I can crash R CMD check with the following message:

 This shouldn't happen at /usr/local/lib/R/share/perl/R/Rdconv.pm line 1226, <rdfile> line 24.
 
under the following circumstances --

an \itemize{} environment in the \details{} section with
an item that continues on more than one line, delimited by
curly brackets.  It looks like \items would rather be
delimited by spaces than by curly brackets.

  This isn't clear from the R-exts manual (p. 15), which says:

The \itemize and \enumerate commands take a single argument,
within which there may be one or more \item commands. The
text following each \item is formatted as one
or more paragraphs, suitably indented and with the first
paragraph marked with a bullet
point (\itemize) or a number (\enumerate).

  I was misled by the analogy with LaTeX, where you would
delimit \item by curly brackets.
  The workaround is easy -- just delimit by spaces instead
of curly brackets -- but in any case, it seems that a
"This shouldn't happen ..." message shouldn't be visible to
the user ...

example:
\name{test}
\alias{test}
\title{test}
\description{test}
\usage{
test(x)
}
\arguments{
  \item{x}{test}
}
\details{
  Criteria:
  \itemize{
    \item{test: this is an item that is quite long quite long quite long quite long
         and continues on another line}
    \item{test2}
    \item{test3}
  }
}
\value{
   test
}
\author{Ben Bolker}
\keyword{misc}
--------------------

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 21:23:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 21:23:45 +0000 (GMT)
Subject: [Rd] Re: [R] abs() on data frames?!
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEFGCKAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0202262054210.2185-100000@auk.stats>

Moved to R-devel, as this will get very technical!

On Tue, 26 Feb 2002, Henrik Bengtsson wrote:

> I might be wrong, but didn't the following work before R v1.4.x?
>
> R --vanilla
> > df <- data.frame(-10:10)
> > abs(df)
> Error in abs(df) : non-numeric argument to function
>
> I have tried this on both Rv1.4.1 on WinMe and Rv1.4.0 on Solaris 8. I
> regexp searched bugs.r-project.org on "abs" but I found nothing about this.
> I can't see why abs(df) shouldn't work when sqrt(df), log(df) etc works.

Both log and abs should be members of the group generic Math, and
Math.data.frame exists. In R sqrt is dispatched on that group, although I
don't see it documented as part of it,

But it looks like abs is being handled by the complex arithmetic section of
the code, as if it were Mod.

I do recall discussions of this long ago, but doubt if this has been
changed recently.  Indeed, the names.c file has

/* KH(1999/09/12)-> complex: {"abs", do_math1, 0, 1, 1, PP_FUNCALL}, */

I'll fix it in R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Feb 27 08:16:09 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Wed, 27 Feb 2002 09:16:09 +0100 (MET)
Subject: [Rd] Bug in glm.fit? (PR#1331)
Message-ID: <200202270816.JAA23941@pubhealth.ku.dk>

G'day all,

I had a look at the GLM code of R (1.4.1) and I believe that there are
problems with the function "glm.fit" that may bite in rare
circumstances.  Note, I have no data set with which I ran into
trouble.  This report is solely based on having a look at the code.

Below I append a listing of the glm.fit function as produced by my
system.  I have added line numbers so that I can easily refer to the
code that is, in my opinion, problematic.  I also append a modified
version that, hopefully, solves these problems.  At least on
"example(glm)" both functions produce the same output (if the random
number generator is set to the same seed).

Short summary: I envisage problems with glm.fit if two conditions are
met simultaneously.  Namely, (1) the design matrix is such that the QR
algorithm used in the weighted least squares (WLS) step has to pivot
columns (lines 81-86) and (2) during the iterations the step size has
to be truncated (either lines 98-114 or lines 115-130).

More details:
In line 90, the variables "start" and "coef" are set to the
coefficients of the WLS and "start" is then permuted (line 91) to take
a possible pivoting of the QR algorithm into account.  Note that
"coef" is not permutated.   Also, since the weights in the iterative
weighted least squares algorithm change in each iteration (lines
60-139) it is theoretically possible that on some executions of this
chunk pivoting occurs and on others there is no pivoting.

Hoever, if the new coefficients are unsuitable and either the block at
lines 98-114 or lines 115-130 is entered, then "start" is modified by
shrinking it toward "coefold".  There are two problems:
1) If this happens the first time the loop in lines 60-139 is executed,
   then coefold is initialised to the value of "start" that was passed
down to the routine (line 58).  This might well be NULL (usually is?).
In this case line 105 and line 122 would produce a new "start" which
is numeric(0) and glm.fit would stop execution pretty soon thereafter.
2) If it happens during a later execution of the loop in lines 60-139,
   then "coefold" was set to the value "coef" of the prior execution
of the loop (line 137).  Depending on whether either of the code
chunks at lines 98-114 or lines 115-130 have been executed on that
previous occastion, "coefold" may or may not be permuted to the same
order as "start" in this moment.  Hence, it could happen that "start"
is shrunken towards something that doesn't make sense in line 105 or
line 122.

Relating to point 2) above.  Theoretically, during the main loop
(lines 60-139) either of the chunks in lines 98-114 or lines 115-130
could be entered.  In these chunks "coef" is set to the shrunken
"start" at the end (line 111 or line 126).  If, with the ``deviance
for the shrunken "start"'' the convergence criterion in line 131 is
fulfilled, then the main loop would finish.  In other words, at line
140 there is no way to tell whether "coef" is in the order of
"fit$coefficients" or has been permutated to have the same order as
"start".  In the later case, the additional permutation in line 157
would garble the solution.

I hope that the revised version that I append below, works around all
these potential problems without breaking anything.  As I said, I ran
"example(glm)" with the revised version and got the same results.  But
I guess you guys have far more exhaustive tests and may want to do
some further test to ensure that nothing is broken.

The revised version also makes some cosmetic changes that reflect my
preferences :-) :
1) Given the default values of the parameters "weights" and "offset" I
   was surprised about the tests in lines 17 and 19.  They seemed
superfluous.  Until I noticed that "glm" can call "glm.fit" with
actual arguments for these parameters that are NULL.  Hence, I suggest
that the default values for these arguments should be NULL.  This
makes it easier to understand the code of "glm.fit" (if one looks only
at "glm.fit" and not at all the code "glm", "glm.fit" &c
simultaneously). 
2) As mentioned above, "coefold" may be initialised to NULL in line 58
   if the parameter "start" is not specified.  (Which typically would be
the case?)  But furthermore, in lines 44-53 the test for the parameter
"start" is mangled into the test for the parameter "etastart".  If
"etastart" is not specified but a bad "start" (not the correct
length), the bad "start" would be caught.  But if a valid "etastart"
is specified, then a bad "start" would not be caught since those tests
are not executed.  (Are there users that specify both?).  Anyway, I
have untangled those sanity check.  Also to get a clean initialisation
for "coefold".
3) Given that the column names of fit$qr are (correctly) set in line
   171, I didn't see the purpose of line 155.  That line anyhow sets
the column names wrongly if pivoting has occured.  So I deleted that
line. 

That's all for now.  Thanks for the great package and I hope that this
bug report will be useful.

Cheers,

        Berwin

========================= original glm.fit =========================
  1  glm.fit <-
  2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL, 
  3      mustart = NULL, offset = rep(0, nobs), family = gaussian(), 
  4      control = glm.control(), intercept = TRUE) 
  5  {
  6      x <- as.matrix(x)
  7      xnames <- dimnames(x)[[2]]
  8      ynames <- names(y)
  9      conv <- FALSE
 10      nobs <- NROW(y)
 11      nvars <- NCOL(x)
 12      if (nvars == 0) {
 13          cc <- match.call()
 14          cc[[1]] <- as.name("glm.fit.null")
 15          return(eval(cc, parent.frame()))
 16      }
 17      if (is.null(weights)) 
 18          weights <- rep(1, nobs)
 19      if (is.null(offset)) 
 20          offset <- rep(0, nobs)
 21      variance <- family$variance
 22      dev.resids <- family$dev.resids
 23      aic <- family$aic
 24      linkinv <- family$linkinv
 25      mu.eta <- family$mu.eta
 26      if (!is.function(variance) || !is.function(linkinv)) 
 27          stop("illegal `family' argument")
 28      valideta <- family$valideta
 29      if (is.null(valideta)) 
 30          valideta <- function(eta) TRUE
 31      validmu <- family$validmu
 32      if (is.null(validmu)) 
 33          validmu <- function(mu) TRUE
 34      if (is.null(mustart)) {
 35          eval(family$initialize)
 36      }
 37      else {
 38          mukeep <- mustart
 39          eval(family$initialize)
 40          mustart <- mukeep
 41      }
 42      if (NCOL(y) > 1) 
 43          stop("y must be univariate unless binomial")
 44      eta <- if (!is.null(etastart) && valideta(etastart)) 
 45          etastart
 46      else if (!is.null(start)) 
 47          if (length(start) != nvars) 
 48              stop(paste("Length of start should equal", nvars, 
 49                  "and correspond to initial coefs for", deparse(xnames)))
 50          else as.vector(if (NCOL(x) == 1) 
 51              x * start
 52          else x %*% start)
 53      else family$linkfun(mustart)
 54      mu <- linkinv(eta)
 55      if (!(validmu(mu) && valideta(eta))) 
 56          stop("Can't find valid starting values: please specify some")
 57      devold <- sum(dev.resids(y, mu, weights))
 58      coefold <- start
 59      boundary <- FALSE
 60      for (iter in 1:control$maxit) {
 61          good <- weights > 0
 62          varmu <- variance(mu)[good]
 63          if (any(is.na(varmu))) 
 64              stop("NAs in V(mu)")
 65          if (any(varmu == 0)) 
 66              stop("0s in V(mu)")
 67          mu.eta.val <- mu.eta(eta)
 68          if (any(is.na(mu.eta.val[good]))) 
 69              stop("NAs in d(mu)/d(eta)")
 70          good <- (weights > 0) & (mu.eta.val != 0)
 71          if (all(!good)) {
 72              conv <- FALSE
 73              warning(paste("No observations informative at iteration", 
 74                  iter))
 75              break
 76          }
 77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
 78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
 79          ngoodobs <- as.integer(nobs - sum(!good))
 80          ncols <- as.integer(1)
 81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
 82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
 83                  control$epsilon/1000), coefficients = numeric(nvars), 
 84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
 85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
 86              work = double(2 * nvars), PACKAGE = "base")
 87          if (nobs < fit$rank) 
 88              stop(paste("X matrix has rank", fit$rank, "but only", 
 89                  nobs, "observations"))
 90          start <- coef <- fit$coefficients
 91          start[fit$pivot] <- coef
 92          eta <- drop(x %*% start)
 93          mu <- linkinv(eta <- eta + offset)
 94          dev <- sum(dev.resids(y, mu, weights))
 95          if (control$trace) 
 96              cat("Deviance =", dev, "Iterations -", iter, "\n")
 97          boundary <- FALSE
 98          if (is.na(dev) || any(is.na(coef))) {
 99              warning("Step size truncated due to divergence")
100              ii <- 1
101              while ((is.na(dev) || any(is.na(start)))) {
102                  if (ii > control$maxit) 
103                    stop("inner loop 1; can't correct step size")
104                  ii <- ii + 1
105                  start <- (start + coefold)/2
106                  eta <- drop(x %*% start)
107                  mu <- linkinv(eta <- eta + offset)
108                  dev <- sum(dev.resids(y, mu, weights))
109              }
110              boundary <- TRUE
111              coef <- start
112              if (control$trace) 
113                  cat("New Deviance =", dev, "\n")
114          }
115          if (!(valideta(eta) && validmu(mu))) {
116              warning("Step size truncated: out of bounds.")
117              ii <- 1
118              while (!(valideta(eta) && validmu(mu))) {
119                  if (ii > control$maxit) 
120                    stop("inner loop 2; can't correct step size")
121                  ii <- ii + 1
122                  start <- (start + coefold)/2
123                  mu <- linkinv(eta <- eta + offset)
124              }
125              boundary <- TRUE
126              coef <- start
127              dev <- sum(dev.resids(y, mu, weights))
128              if (control$trace) 
129                  cat("New Deviance =", dev, "\n")
130          }
131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
132              conv <- TRUE
133              break
134          }
135          else {
136              devold <- dev
137              coefold <- coef
138          }
139      }
140      if (!conv) 
141          warning("Algorithm did not converge")
142      if (boundary) 
143          warning("Algorithm stopped at boundary value")
144      eps <- 10 * .Machine$double.eps
145      if (family$family == "binomial") {
146          if (any(mu > 1 - eps) || any(mu < eps)) 
147              warning("fitted probabilities numerically 0 or 1 occurred")
148      }
149      if (family$family == "poisson") {
150          if (any(mu < eps)) 
151              warning("fitted rates numerically 0 occurred")
152      }
153      if (fit$rank != nvars) {
154          coef[seq(fit$rank + 1, nvars)] <- NA
155          dimnames(fit$qr) <- list(NULL, xnames)
156      }
157      coef[fit$pivot] <- coef
158      xxnames <- xnames[fit$pivot]
159      residuals <- rep(NA, nobs)
160      residuals[good] <- z - (eta - offset)[good]
161      fit$qr <- as.matrix(fit$qr)
162      nr <- min(sum(good), nvars)
163      if (nr < nvars) {
164          Rmat <- diag(nvars)
165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
166      }
167      else Rmat <- fit$qr[1:nvars, 1:nvars]
168      Rmat <- as.matrix(Rmat)
169      Rmat[row(Rmat) > col(Rmat)] <- 0
170      names(coef) <- xnames
171      colnames(fit$qr) <- xxnames
172      dimnames(Rmat) <- list(xxnames, xxnames)
173      names(residuals) <- ynames
174      names(mu) <- ynames
175      names(eta) <- ynames
176      wt <- rep(0, nobs)
177      wt[good] <- w^2
178      names(wt) <- ynames
179      names(weights) <- ynames
180      names(y) <- ynames
181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
182          fit$rank))
183      wtdmu <- if (intercept) 
184          sum(weights * y)/sum(weights)
185      else linkinv(offset)
186      nulldev <- sum(dev.resids(y, wtdmu, weights))
187      n.ok <- nobs - sum(weights == 0)
188      nulldf <- n.ok - as.integer(intercept)
189      resdf <- n.ok - fit$rank
190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
191      list(coefficients = coef, residuals = residuals, fitted.values = mu, 
192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
193              "rank", "qraux", "pivot", "tol")], family = family, 
194          linear.predictors = eta, deviance = dev, aic = aic.model, 
195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
196          df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
197          boundary = boundary)
198  }
========================= modified glm.fit =========================
glm.fit <- 
function (x, y, weights = NULL, start = NULL, etastart = NULL, 
    mustart = NULL, offset = NULL, family = gaussian(), 
    control = glm.control(), intercept = TRUE) 
{
    x <- as.matrix(x)
    xnames <- dimnames(x)[[2]]
    ynames <- names(y)
    conv <- FALSE
    nobs <- NROW(y)
    nvars <- NCOL(x)
    if (nvars == 0) {
        cc <- match.call()
        cc[[1]] <- as.name("glm.fit.null")
        return(eval(cc, parent.frame()))
    }
    if (is.null(weights)) 
        weights <- rep(1, nobs)
    if (is.null(offset)) 
        offset <- rep(0, nobs)
    variance <- family$variance
    dev.resids <- family$dev.resids
    aic <- family$aic
    linkinv <- family$linkinv
    mu.eta <- family$mu.eta
    if (!is.function(variance) || !is.function(linkinv)) 
        stop("illegal `family' argument")
    valideta <- family$valideta
    if (is.null(valideta)) 
        valideta <- function(eta) TRUE
    validmu <- family$validmu
    if (is.null(validmu)) 
        validmu <- function(mu) TRUE
    if (is.null(mustart)) {
        eval(family$initialize)
    }
    else {
        mukeep <- mustart
        eval(family$initialize)
        mustart <- mukeep
    }
    if (NCOL(y) > 1) 
        stop("y must be univariate unless binomial")
    if (!is.null(start)){
      if (length(start) != nvars) 
        stop(paste("Length of start should equal", nvars, 
                   "and correspond to initial coefs for", deparse(xnames)))
      coef <- coefold <- start  # initialise coef here in order to
                                # be able to subset it below 
    }
    else
      coef <- coefold <- rep(0,nvars)
    eta <- if (!is.null(etastart) && valideta(etastart)) 
      etastart
    else if (!is.null(start)) 
      as.vector(if (NCOL(x) == 1) 
                x * start
      else x %*% start)
    else family$linkfun(mustart)
    mu <- linkinv(eta)
    if (!(validmu(mu) && valideta(eta))) 
        stop("Can't find valid starting values: please specify some")
    devold <- sum(dev.resids(y, mu, weights))
    boundary <- FALSE
    for (iter in 1:control$maxit) {
        good <- weights > 0
        varmu <- variance(mu)[good]
        if (any(is.na(varmu))) 
            stop("NAs in V(mu)")
        if (any(varmu == 0)) 
            stop("0s in V(mu)")
        mu.eta.val <- mu.eta(eta)
        if (any(is.na(mu.eta.val[good]))) 
            stop("NAs in d(mu)/d(eta)")
        good <- (weights > 0) & (mu.eta.val != 0)
        if (all(!good)) {
            conv <- FALSE
            warning(paste("No observations informative at iteration", 
                iter))
            break
        }
        z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
        w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
        ngoodobs <- as.integer(nobs - sum(!good))
        ncols <- as.integer(1)
        fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
            p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
                control$epsilon/1000), coefficients = numeric(nvars), 
            residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
            rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
            work = double(2 * nvars), PACKAGE = "base")
        if (nobs < fit$rank) 
            stop(paste("X matrix has rank", fit$rank, "but only", 
                nobs, "observations"))
        coef[fit$pivot] <- fit$coefficients
        eta <- drop(x %*% coef)
        mu <- linkinv(eta <- eta + offset)
        dev <- sum(dev.resids(y, mu, weights))
        if (control$trace) 
            cat("Deviance =", dev, "Iterations -", iter, "\n")
        boundary <- FALSE
        if (is.na(dev) || any(is.na(coef))) {
            warning("Step size truncated due to divergence")
            ii <- 1
            while ((is.na(dev) || any(is.na(coef)))) {
                if (ii > control$maxit) 
                  stop("inner loop 1; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)
                mu <- linkinv(eta <- eta + offset)
                dev <- sum(dev.resids(y, mu, weights))
            }
            boundary <- TRUE
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (!(valideta(eta) && validmu(mu))) {
            warning("Step size truncated: out of bounds.")
            ii <- 1
            while (!(valideta(eta) && validmu(mu))) {
                if (ii > control$maxit) 
                  stop("inner loop 2; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                mu <- linkinv(eta <- eta + offset)
            }
            boundary <- TRUE
            dev <- sum(dev.resids(y, mu, weights))
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
            conv <- TRUE
            break
        }
        else {
            devold <- dev
            coefold <- coef
        }
    }
    if (!conv) 
        warning("Algorithm did not converge")
    if (boundary) 
        warning("Algorithm stopped at boundary value")
    eps <- 10 * .Machine$double.eps
    if (family$family == "binomial") {
        if (any(mu > 1 - eps) || any(mu < eps)) 
            warning("fitted probabilities numerically 0 or 1 occurred")
    }
    if (family$family == "poisson") {
        if (any(mu < eps)) 
            warning("fitted rates numerically 0 occurred")
    }
    if (fit$rank != nvars) {
        coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
    }
    xxnames <- xnames[fit$pivot]
    residuals <- rep(NA, nobs)
    residuals[good] <- z - (eta - offset)[good]
    fit$qr <- as.matrix(fit$qr)
    nr <- min(sum(good), nvars)
    if (nr < nvars) {
        Rmat <- diag(nvars)
        Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
    }
    else Rmat <- fit$qr[1:nvars, 1:nvars]
    Rmat <- as.matrix(Rmat)
    Rmat[row(Rmat) > col(Rmat)] <- 0
    names(coef) <- xnames
    colnames(fit$qr) <- xxnames
    dimnames(Rmat) <- list(xxnames, xxnames)
    names(residuals) <- ynames
    names(mu) <- ynames
    names(eta) <- ynames
    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
    names(weights) <- ynames
    names(y) <- ynames
    names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
        fit$rank))
    wtdmu <- if (intercept) 
        sum(weights * y)/sum(weights)
    else linkinv(offset)
    nulldev <- sum(dev.resids(y, wtdmu, weights))
    n.ok <- nobs - sum(weights == 0)
    nulldf <- n.ok - as.integer(intercept)
    resdf <- n.ok - fit$rank
    aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
    list(coefficients = coef, residuals = residuals, fitted.values = mu, 
        effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
            "rank", "qraux", "pivot", "tol")], family = family, 
        linear.predictors = eta, deviance = dev, aic = aic.model, 
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
        df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
        boundary = boundary)
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Feb 27 18:54:25 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 27 Feb 2002 13:54:25 -0500 (EST)
Subject: [Rd] rbinom rounds size argument
Message-ID: <Pine.LNX.4.30.0202271352210.25741-100000@bolker.zoo.ufl.edu>


  rbinom (R-1.4.1) silently rounds its "size" argument.
  The C code contains

    n = floor(nin + 0.5);

  I would argue that this should this either be documented or changed (to
return NA).  (The behavior is inconsistent with dbinom).

  I can submit a bug report if people agree it's a bug.

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Feb 27 23:10:02 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 27 Feb 2002 17:10:02 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
Message-ID: <20020227231002.GA4104@sonny.eddelbuettel.com>


As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
just fine and passes the desired options on to gcc/g++.

I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
other than by edting $RHOME/etc/Makeconf. 

While editing Makeconf is probably good enough for most users, it is not
something I can do during (automated, unattended) builds of Debian packages.
However, I need this to change the optimization switches for the survival
package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
r-recommended for details).

Is there an easy way to control these compiler switches?

Thanks, Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tod@gentoo.org  Thu Feb 28 01:15:27 2002
From: tod@gentoo.org (Tod M Neidt)
Date: 27 Feb 2002 19:15:27 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
In-Reply-To: <20020227231002.GA4104@sonny.eddelbuettel.com>
References: <20020227231002.GA4104@sonny.eddelbuettel.com>
Message-ID: <1014858928.28052.3.camel@Q.neidt.net>

On Wed, 2002-02-27 at 17:10, Dirk Eddelbuettel wrote:
> 
> As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
> just fine and passes the desired options on to gcc/g++.
> 
> I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
> other than by edting $RHOME/etc/Makeconf. 
> 
> While editing Makeconf is probably good enough for most users, it is not
> something I can do during (automated, unattended) builds of Debian packages.
> However, I need this to change the optimization switches for the survival
> package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
> architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
> r-recommended for details).
> 
> Is there an easy way to control these compiler switches?
> 
Hi!

If there isn't anyway to do this currently, I would "second" the request
for it to do so sometime in the future.  I am interested in creating
automated build scripts for another distribution.

Regards,

tod


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Michael.Jacob@bruker-axs.de  Thu Feb 28 09:57:42 2002
From: Michael.Jacob@bruker-axs.de (Michael.Jacob@bruker-axs.de)
Date: Thu, 28 Feb 2002 10:57:42 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202280957.KAA04663@pubhealth.ku.dk>

Full_Name: Michael Jacob
Version: 1.4.1
OS: Windows 2000 SP2
Submission from: (NULL) (195.27.237.226)


Hi,

there seems to be a bug in julian():

> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> julian(Sys.time())
Error in fromchar(x) : character string is not in a standard unambiguous format
> julian
function (x, ...) 
UseMethod("julian")
> julian.POSIXt
function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...) 
{
    if (length(origin) != 1) 
        stop("`origin' must be of length one")
    res <- difftime(as.POSIXct(x), origin, units = "days")
    structure(res, origin = origin)
}
> as.POSIXct("1970-01-01", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
[1] "1970-01-01 02:00:00 W. Europe Standard Time"
> 

The problem is, that as.POSIXct() does not parse the default argument to
julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
missing or equal to zero.

Best Regards

Michael

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 10:12:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 11:12:38 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202281012.LAA04863@pubhealth.ku.dk>

These are work correctly on my Windows 2000 and XP systems. That means the
bug must be in your Windows system if as I presume you are using the
binaries from CRAN.  Have you tried the advice in the rw-FAQ about trying
another msvcrt.dll?  That has solved a couple of the time-related problems.

On Thu, 28 Feb 2002 Michael.Jacob@bruker-axs.de wrote:

> Full_Name: Michael Jacob
> Version: 1.4.1
> OS: Windows 2000 SP2
> Submission from: (NULL) (195.27.237.226)
>
>
> Hi,
>
> there seems to be a bug in julian():
>
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > julian(Sys.time())
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > julian
> function (x, ...)
> UseMethod("julian")
> > julian.POSIXt
> function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...)
> {
>     if (length(origin) != 1)
>         stop("`origin' must be of length one")
>     res <- difftime(as.POSIXct(x), origin, units = "days")
>     structure(res, origin = origin)
> }
> > as.POSIXct("1970-01-01", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
> [1] "1970-01-01 02:00:00 W. Europe Standard Time"
> >
>
> The problem is, that as.POSIXct() does not parse the default argument to
> julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
> missing or equal to zero.
>
> Best Regards
>
> Michael
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aiesales@ns1.ehost2102.com  Thu Feb 28 12:49:28 2002
From: aiesales@ns1.ehost2102.com (aiesales@ns1.ehost2102.com)
Date: Thu, 28 Feb 2002 07:49:28 -0500
Subject: [Rd] Thanks For Lunch Mike
Message-ID: <200202281249.g1SCnR308796@mx03aba.westnet24.com>

Mike,


  Thanks again for lunch it was great!


Best regards,

Steve
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 16:20:04 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 17:20:04 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281620.RAA09131@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.0
OS: Solaris 8
Submission from: (NULL) (130.235.3.49)


When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
"cannot close output sink connection":
 
 % R --vanilla

 tmpfile <- tempfile()  # Create a filename that does not exist
 for(k in 1:100) {
   cat(k, ": ");
   try(fh <- file(tmpfile, "r"))
   close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
 }
 
1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
...
47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
Error in close.connection(file("tmp.txt", "w")) :
        cannot close output sink connection
 
It always happens after 48 failed file openings.


To me it looks like failed 'file(tmpfile, "r")' does not correctly
clean up after itself. And since 'fh' is never assigned it can neither
be solved by a 'close(fh)'.

FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
will produce a "sink stack is full" error.

FYI2: After the failure above, trying to call sink() will result in a
      "Segmentation fault" and [R] is stopped.

Background: I ran into this problem after have been running the same
script several times over several days I eventually ran into the problem.
It was hard to identify the problem, but I believe the above example shows
the core of it and I could not track the problem further.

Unfortunately, I do not have access to R v1.4.1 for Solaris 8.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 18:00:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 19:00:00 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281800.TAA09556@pubhealth.ku.dk>

On Thu, 28 Feb 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: R v1.4.0
> OS: Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> "cannot close output sink connection":
>
>  % R --vanilla
>
>  tmpfile <- tempfile()  # Create a filename that does not exist
>  for(k in 1:100) {
>    cat(k, ": ");
>    try(fh <- file(tmpfile, "r"))
>    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
>  }
>
> 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> ...
> 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> Error in close.connection(file("tmp.txt", "w")) :
>         cannot close output sink connection
>
> It always happens after 48 failed file openings.
>
>
> To me it looks like failed 'file(tmpfile, "r")' does not correctly
> clean up after itself. And since 'fh' is never assigned it can neither
> be solved by a 'close(fh)'.

It does correctly clean up: it should leave a connection which is not
opened.  That may not be the best design, but it is the design.

Take a look at closeAllConnections.

It's better to call file() and then open(), which will avoid the problem.


> FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> will produce a "sink stack is full" error.
>
> FYI2: After the failure above, trying to call sink() will result in a
>       "Segmentation fault" and [R] is stopped.
>
> Background: I ran into this problem after have been running the same
> script several times over several days I eventually ran into the problem.
> It was hard to identify the problem, but I believe the above example shows
> the core of it and I could not track the problem further.
>
> Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 19:16:08 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 20:16:08 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281916.UAA09739@pubhealth.ku.dk>

On Thu, 28 Feb 2002, Prof Brian Ripley wrote:

> On Thu, 28 Feb 2002 hb@maths.lth.se wrote:
> 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.0
> > OS: Solaris 8
> > Submission from: (NULL) (130.235.3.49)
> >
> >
> > When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> > "cannot close output sink connection":
> >
> >  % R --vanilla
> >
> >  tmpfile <- tempfile()  # Create a filename that does not exist
> >  for(k in 1:100) {
> >    cat(k, ": ");
> >    try(fh <- file(tmpfile, "r"))
> >    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
> >  }
> >
> > 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> > 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> > ...
> > 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> > Error in close.connection(file("tmp.txt", "w")) :
> >         cannot close output sink connection
> >
> > It always happens after 48 failed file openings.
> >
> >
> > To me it looks like failed 'file(tmpfile, "r")' does not correctly
> > clean up after itself. And since 'fh' is never assigned it can neither
> > be solved by a 'close(fh)'.
> 
> It does correctly clean up: it should leave a connection which is not
> opened.  That may not be the best design, but it is the design.
> 
> Take a look at closeAllConnections.

Accepting the design, calling file(tempfile(), open="r"), will, as
you say, create a "closed" connection as seen by
showConnections(all=TRUE) and it can be deleted by identifying the
connection id from the list and the closing it with

  fh <- getConnection(id)
  close(fh)

or one could call closeAllConnections(), which is not always what you
want. However, if one creates TOO MANY failed connections as above,
neither of the above works:

  % R --vanilla

  K <- 48; # K <- 47 is ok.
  tmpfile <- tempfile()
  for(k in 1:K) try(fh <- file(tmpfile, "r"))

will make [R] stall when closeAllConnections() is called. Doing Ctrl+C and
trying do anything, e.g. "ls() [ENTER]", will generate a "Segmentation
fault" or "0 [ENTER]" will generate a "Bus error". Trying to use

  fh <- getConnection(id)
  close(fh)

gives "Error in close.connection(fh) : cannot close output sink
connection". In this case there is not fatal quitting of [R].

I don't think it is a common thing to end up in this situation, but even
with the design you refer to, I still think something should be fixed
since it is possible to force [R] into an instable and unleavable state,
which is likely to crash [R].

> It's better to call file() and then open(), which will avoid the problem.

I definitely agree, now when you have told me.
 
> > FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> > will produce a "sink stack is full" error.
> >
> > FYI2: After the failure above, trying to call sink() will result in a
> >       "Segmentation fault" and [R] is stopped.
> >
> > Background: I ran into this problem after have been running the same
> > script several times over several days I eventually ran into the problem.
> > It was hard to identify the problem, but I believe the above example shows
> > the core of it and I could not track the problem further.
> >
> > Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

Thanks

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/bioinformatics/




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:48:19 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:48:19 +0100 (MET)
Subject: [Rd] pweibull.c (PR#1334)
Message-ID: <200202282048.VAA09961@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pweibull can be improved in the lower_tail=TRUE and
log_p=FALSE
case by using expm1.  Something like

-expm1(-pow(x / scale, shape)),

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:54:29 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:54:29 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200202282054.VAA09998@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pexp can be improved in the lower_tail=TRUE and log_p=FALSE
case by using expm1.  Something like

-expm1 (-x / scale);

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ford@signal.qinetiq.com  Fri Feb  1 11:37:18 2002
From: ford@signal.qinetiq.com (ford@signal.qinetiq.com)
Date: Fri, 1 Feb 2002 12:37:18 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011137.MAA15619@pubhealth.ku.dk>

Full_Name: Ashley Ford
Version: 1.4.0
OS: Windows NT4
Submission from: (NULL) (146.80.9.20)


I am suffering from a memory leak in read.table in the new precompiled windows
1.4.
it works fine in 1.3

Create a 90000 line file of 7 variables eg
perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
$i,$i*$e,3,4,5,6,7,8,9}' > n90000

R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

n9<-read.table("n90000")
Error: cannot allocate vector of size 75 Kb
In addition: Warning message: 
Reached total allocation of 63Mb: see help(memory.size) 
> gc()
         used (Mb) gc trigger (Mb)
Ncells 206781  5.6     467875 12.5
Vcells 109631  0.9     786432  6.0

On a machine with 512Mb it takes over 10 minutes before running out of memory

On Version 1.3.1  (2001-08-31)
it works fine 
date();n9<-read.table("n90000");date();str(n9)
[1] "Tue Jan 29 20:41:30 2002"
[1] "Tue Jan 29 20:43:29 2002"
`data.frame':   90000 obs. of  7 variables:
 $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
 $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
 $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
 $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
 $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
 $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
 $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> gc()
         used (Mb) gc trigger (Mb)
Ncells 278967  7.5     984024 26.3
Vcells 801283  6.2    2620390 20.0

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 11:45:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 12:45:40 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011145.MAA15818@pubhealth.ku.dk>

This was not a memory leak: it just used more memory.  That should have
been evident from your gc() results, which were not showing extra
memory usage.

It is already fixed in the current version of R, 1.4.1.

On Fri, 1 Feb 2002 ford@signal.qinetiq.com wrote:

> Full_Name: Ashley Ford
> Version: 1.4.0
> OS: Windows NT4
> Submission from: (NULL) (146.80.9.20)
>
>
> I am suffering from a memory leak in read.table in the new precompiled windows
> 1.4.
> it works fine in 1.3

There are no such versions. This matters, as the problem does not
occur in 1.4.1, only 1.4.0, and the `new precompiled Windows 1.4' is in
fact 1.4.1.


> Create a 90000 line file of 7 variables eg
> perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
> $i,$i*$e,3,4,5,6,7,8,9}' > n90000
>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> n9<-read.table("n90000")
> Error: cannot allocate vector of size 75 Kb
> In addition: Warning message:
> Reached total allocation of 63Mb: see help(memory.size)
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 206781  5.6     467875 12.5
> Vcells 109631  0.9     786432  6.0
>
> On a machine with 512Mb it takes over 10 minutes before running out of memory
>
> On Version 1.3.1  (2001-08-31)
> it works fine
> date();n9<-read.table("n90000");date();str(n9)
> [1] "Tue Jan 29 20:41:30 2002"
> [1] "Tue Jan 29 20:43:29 2002"
> `data.frame':   90000 obs. of  7 variables:
>  $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
>  $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
>  $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
>  $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
>  $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
>  $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
>  $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 278967  7.5     984024 26.3
> Vcells 801283  6.2    2620390 20.0
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From amurta@ipimar.pt  Fri Feb  1 15:49:08 2002
From: amurta@ipimar.pt (amurta@ipimar.pt)
Date: Fri, 1 Feb 2002 16:49:08 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011549.QAA21060@pubhealth.ku.dk>

Hi

I have written a small function to calculate distances between pairs of
landmarks ('my.dist' bellow). I gave it to a colleague that works with
MSWindows and the function doesn't give the right answer:

R 1.4.1 for Linux: 

> my.dist()
[1]  22 561  

R 1.4.1 for Windows:

> my.dist()
[1]  22 560
Warning message:
Replacement length not a multiple of the elements to replace in
matrix(...)


FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
same (wrong) answer as R 1.4.1 for Windows.


----------------------------------------------

xy3 <- matrix(round(100*runif(22*68)),22,68)

my.dist <- function(x = xy3){

 landmarks.x <- as.matrix(x[, 1:34])
 landmarks.y <- as.matrix(x[, 35:68])

 x1 <- c()
 x2 <- c()
 y1 <- c()
 y2 <- c()

 for(i in 1:(ncol(landmarks.x) - 1)) {
  x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
  x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
  y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
  y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
 }

 distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
 comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))

 dist.out <- matrix(distan, nrow(x), comb)
 dim(dist.out)
}


-- 
                           Alberto G. Murta                      
           IPIMAR - Institute of Fisheries and Sea Research
            Avenida de Brasilia, 1449-006 Lisboa, Portugal       
Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 16:16:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 17:16:54 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011616.RAA21394@pubhealth.ku.dk>

1) This is a random input, which might make it non-reproducible.

2) Solaris 2.7 gives 560 too.

You appear to be trying to calculate 34!/2*32! in a *very* inefficient
way, and then not rounding it.  And your answer depends on comb being an
integer.  So use (34*33)/2

In summary: you have used an unstable algorithm, and the bug is using that
algorithm.  For only slightly large inputs it would fail altogether.


On Fri, 1 Feb 2002 amurta@ipimar.pt wrote:

> Hi
>
> I have written a small function to calculate distances between pairs of
> landmarks ('my.dist' bellow). I gave it to a colleague that works with
> MSWindows and the function doesn't give the right answer:
>
> R 1.4.1 for Linux:
>
> > my.dist()
> [1]  22 561
>
> R 1.4.1 for Windows:
>
> > my.dist()
> [1]  22 560
> Warning message:
> Replacement length not a multiple of the elements to replace in
> matrix(...)
>
>
> FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
> same (wrong) answer as R 1.4.1 for Windows.
>
>
> ----------------------------------------------
>
> xy3 <- matrix(round(100*runif(22*68)),22,68)
>
> my.dist <- function(x = xy3){
>
>  landmarks.x <- as.matrix(x[, 1:34])
>  landmarks.y <- as.matrix(x[, 35:68])
>
>  x1 <- c()
>  x2 <- c()
>  y1 <- c()
>  y2 <- c()
>
>  for(i in 1:(ncol(landmarks.x) - 1)) {
>   x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
>   x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
>   y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
>   y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
>  }
>
>  distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
>  comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))
>
>  dist.out <- matrix(distan, nrow(x), comb)
>  dim(dist.out)
> }
>
>
> --
>                            Alberto G. Murta
>            IPIMAR - Institute of Fisheries and Sea Research
>             Avenida de Brasilia, 1449-006 Lisboa, Portugal
> Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Fri Feb  1 16:30:46 2002
From: p.ribeiro@lancaster.ac.uk (p.ribeiro@lancaster.ac.uk)
Date: Fri, 1 Feb 2002 17:30:46 +0100 (MET)
Subject: [Rd] documentation for abline and terms.object (PR#1294)
Message-ID: <200202011630.RAA21517@pubhealth.ku.dk>

Hi
I found two small errors in the (HTML) documentation:

abline{base}:
abline(a, b, untf = FALSE,\ dots)
                          ^^^^^^
terms.object{base}:
there is no description for the argument "response"

Cheers
P.J.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Feb  1 17:34:36 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 1 Feb 2002 18:34:36 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202011734.SAA21991@pubhealth.ku.dk>


  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From forporphyry@hotmail.com  Fri Feb  1 19:19:25 2002
From: forporphyry@hotmail.com (forporphyry@hotmail.com)
Date: Fri, 1 Feb 2002 20:19:25 +0100 (MET)
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
Message-ID: <200202011919.UAA22550@pubhealth.ku.dk>

Dear Team,

Don't understand output below.  Please advise.  Windows98 and 
rw1041(patched) from 1/25/02.

Graham Lawrence


C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin


C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
Bad command or file name

C:\>Rcmd

C:\>Rcmd Install
Bad command or file name

C:\>dir C:\R\rw1041\bin

Volume in drive C has no label
Volume Serial Number is 0000-0000
Directory of C:\R\rw1041\bin

.              <DIR>        01-29-02 12:31p .
.             <DIR>        01-29-02 12:31p ..
BATCH                2,437  09-17-00 11:51p BATCH
HELPPR~1 BAT           436  12-28-99  2:25p helpPRINT.bat
R        DLL     1,532,416  01-23-02  4:39p R.dll
RBITMAP  DLL       132,608  01-23-02  4:42p Rbitmap.dll
RGUI     EXE         8,192  01-23-02 12:17p Rgui.exe
RPROXY   DLL        18,432  01-23-02 12:17p Rproxy.dll
RSETREG  EXE         8,192  01-23-02 12:17p RSetReg.exe
RTERM    EXE         9,216  01-23-02 12:17p Rterm.exe
RCHTML   DLL         4,096  01-16-02  6:01p Rchtml.dll
BUILD               10,458  01-23-02  4:43p build
CHECK               32,895  01-23-02  4:43p check
INSTALL              7,040  01-23-02  4:43p INSTALL
MASSAG~1             4,045  01-23-02  4:43p massage-Examples
RCMD     EXE         8,704  01-23-02  4:43p Rcmd.exe
RD2DVI   SH          8,862  01-23-02  4:43p Rd2dvi.sh
RD2TXT               1,012  01-23-02  4:43p Rd2txt
RDCONV               3,454  01-23-02  4:43p Rdconv
RDIFF    SH            811  01-23-02  4:43p Rdiff.sh
RDINDEX              4,141  01-23-02  4:43p Rdindex
REMOVE               2,352  01-23-02  4:43p REMOVE
RPROF                3,085  01-23-02  4:43p Rprof
SD2RD               16,834  01-23-02  4:43p Sd2Rd
SHLIB                2,483  01-23-02  4:43p SHLIB
        23 file(s)      1,822,201 bytes
         2 dir(s)     350,396,416 bytes free

C:\>set
TMP=c:\windows\TEMP
TEMP=C:\windows\TEMP
PROMPT=$p$g
winbootdir=C:\WINDOWS
COMSPEC=C:\COMMAND.COM
LOG=NUL
DSHD=C:
QRCD=N:
BOTD=C:
MFG=YES
ZIPD=D:
CPQD=N:
EN=EN
LANG=EN
LIB=c:\stdlib\lib
INCLUDE=c:\stdlib\include
HLP=c:\hpc21\
windir=C:\WINDOWS
BLASTER=A220 I5 D1 T4 P330
PATH=C:\BIN;C:\MINGW32;C:\PERL;C:\HTMLWORK;C:\R\RW1041\BIN;C:\TCL;C:\TCL\BIN
CMDLINE=Rcmd Install

C:\>


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  1 21:19:49 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 01 Feb 2002 22:19:49 +0100
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
References: <200202011919.UAA22550@pubhealth.ku.dk>
Message-ID: <3C5B0675.609D267B@statistik.uni-dortmund.de>

forporphyry@hotmail.com wrote:
> 
> Dear Team,
> 
> Don't understand output below.  

If you don't understand the output, why do you think it is a bug?
The question seems to belong to R-Help, not to R-Bugs.


> Please advise.  Windows98 and rw1041(patched) from 1/25/02.
> 
> Graham Lawrence
> 
> C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin
> 
> C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
> Bad command or file name

Two solutions:
a) use slashes "/" instead of backslashes "\" in the path:
      Rcmd INSTALL C:/R/lattice_0.4-0.tar.gz

b) cd to "C:/R" and type "Rcmd INSTALL lattice_0.4-0.tar.gz"

> [...]

Uwe Ligges

BTW: There is a binary version (for windows) of lattice on CRAN.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:10 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:10 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1297)
Message-ID: <200202012254.XAA23376@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:35 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:35 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1298)
Message-ID: <200202012254.XAA23390@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 04:52:01 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 03 Feb 2002 23:52:01 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:24:19 -0800 (PST)"
References: <Pine.A41.4.44.0201301220150.117500-100000@homer04.u.washington.edu>
Message-ID: <px3d0hq26m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > I just tried it with CC=cc and FC=f77, and I got the coredump in the same
> > place.  This is on AIX 4.3.3 with Maintenance Level 09.
> 
> Hmm. According to R I have
>    platform rs6000-ibm-aix4.3.3.0
> 
> There's another few AIX users at CMU, so we should find out how widespread
> this is fairly soon.

I guess I'm one of them...  I recompiled R yesterday using gcc and g77
and have had no problems with compiling or 'make check' (On the same
platform as Thomas).

Since I don't have cc or f77 installed, I can't check what's going
wrong.  If you have a chance to use the GNU tools, my suggestion is to
do so.

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 05:00:09 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 04 Feb 2002 00:00:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:17:29 -0800 (PST)"
References: <Pine.A41.4.44.0201301155360.117500-100000@homer04.u.washington.edu>
Message-ID: <pxy9i9on8m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > Thanks for the reply.  I tried building without the modules package, and
> > got past that point.  Now the build fails trying to link tcltk.so.  Seems
> > the tclConfig.sh on my host refers to a file that does not exist
> > (/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).
> >
> > I'll freely admit to being clueless about most of this.  I don't know
> > anything about R; I'm just a sysadmin trying to build/install it for a
> > user who needs it.
> 
> Our autodetection of tcl/tk is less reliable than most stuff, partly
> because the tclConfig.sh and similar files are sometimes inaccurate.  If
> your users don't need tcl/tk (which is a fairly low-level set of
> facilities for writing GUIs) you can again remove tcltk from the R_PKGS
> line of Makeconf, or reconfigure
>    ./configure --without-tcltk
> 
> If your users do need this package then you (or they) need to track down
> where tcl and tk lurk and provide this information to R. Probably the
> easiest way would be to install a new version of Tcl and Tk, which should
> produce an honest set of configuration files.

hmm, that used to be the case.  Up to around 8.0, 8.1? tcl/tk was
great in its installation.  Now it, eh, sucks.  The installation of
8.3 and 8.4 has more bugs than the one Dan pointed out.

Dan: you can look at tclConfig.sh and tkConfig.sh.  Some files are
referenced incorrectly--you have to change the filenames to the
installed version instead of the build version.  You'll also have to
get rid of comments in compiler flags.
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Tue Feb  5 13:44:54 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Tue, 05 Feb 2002 08:44:54 -0500
Subject: [Rd] htmlhelp() question
Message-ID: <3C5FE1D6.1040307@wfu.edu>

I wonder if anyone who has worked on the win32 version of
R could help me with a HtmlHelp question?

When you're building a win32 program using mingw (in my
case, cross-compiling under GNU/Linux), what import
library do you use to link against the HtmlHelp()
function?  I have got a copy of MS's htmlhelp.lib, but
mingw doesn't seem to like this format; it wants an
archive in .a format.  Since I know R uses htmlhelp
under win32, and I gather it's built using mingw, I
wonder if anyone has managed to create an htmlhelp.a
or hhctrl.a import library.

Thanks.

Allin Cottrell
Wake Forest University

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Wed Feb  6 14:19:25 2002
From: p.ribeiro@lancaster.ac.uk (Paulo Justiniano Ribeiro Jr)
Date: Wed, 6 Feb 2002 14:19:25 +0000 (GMT)
Subject: [Rd] chol: test for symmetry
Message-ID: <Pine.GSO.4.21.0202061414270.3556-100000@unixb.lancs.ac.uk>

Hi
Considering that the description of chol says:
"Compute the Choleski factorization of a symmetric (Hermitian), positive
definite square matrix."

I was wondering whether it would be worth adding a check for the
symmetry of the matrix.
As it is now the function returns "something" for a non-symmetric matrix:

> chol(cbind(c(2,1.5,0),c(1.5,1.8,.2),c(0,0.5,1.5)))
         [,1]      [,2]      [,3]
[1,] 1.414214 1.0606602 0.0000000
[2,] 0.000000 0.8215838 0.6085806
[3,] 0.000000 0.0000000 1.0628404


Cheers
P.J


Paulo Justiniano Ribeiro Jr
Dept Maths & Stats  -  Fylde College
Lancaster University
Lancaster LA1 4YF   -  U.K.

e-mail: Paulo.Ribeiro@est.ufpr.br
http://www.maths.lancs.ac.uk/~ribeiro (english)
http://www.est.ufpr.br/~ribeiro (portugues)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 01:38:13 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Wed, 6 Feb 2002 20:38:13 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC855F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>

On Tue, 5 Feb 2002, Liaw, Andy wrote:

> I thought it was documented that htmlhelp can not be built with
> cross compilers.

Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
MkChmDll script in the R sources.  This looked promising: it builds a
libhhctrl.a import library by a sort of "fakery", echoing the
appropriate function name into a .def file and then compiling an .a
lib with dlltool, with only this .def as input. I tried this, and my
program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
specific) says:

<myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16

and aborts at startup.

The machine I tested on has hhctrl.ocx in windows/system OK.

Looking back at the R sources it seems that libhhctrl.a is somehow
tied up with Rchtml.dll, in the source for which it is stated,

"Can be built with VC++6 ..."

So at this point I wonder if Andy is right: is there really any way to
import the HtmlHelp() function without using a Microsoft compiler?

It seems as if there ought to be a way, but it might involve having
access to the source code for HHCTRL.OCX, whatever sort of beast that
may be.

Or am I (I hope) missing something?

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Feb 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202070615.g176F3e31806@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1157 *
Subject: identify(...plot=F)
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Fri, 2 Nov 2001 09:43:49 +0800 (WST)
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb  7 07:49:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 7 Feb 2002 07:49:57 +0000 (GMT)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>

Let me stress that the R instructions do work, Rchtml.dll is by default
built with mingw, and it also works when cross-compiled under mingw.

Also, there is no `fakery': what is done is a standard way to build an
import library.

On Wed, 6 Feb 2002, Allin Cottrell wrote:

> On Tue, 5 Feb 2002, Liaw, Andy wrote:
>
> > I thought it was documented that htmlhelp can not be built with
> > cross compilers.
>
> Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
> MkChmDll script in the R sources.  This looked promising: it builds a
> libhhctrl.a import library by a sort of "fakery", echoing the
> appropriate function name into a .def file and then compiling an .a
> lib with dlltool, with only this .def as input. I tried this, and my
> program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
> But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
> specific) says:
>
> <myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16
>
> and aborts at startup.
>
> The machine I tested on has hhctrl.ocx in windows/system OK.
>
> Looking back at the R sources it seems that libhhctrl.a is somehow
> tied up with Rchtml.dll, in the source for which it is stated,
>
> "Can be built with VC++6 ..."
>
> So at this point I wonder if Andy is right: is there really any way to
> import the HtmlHelp() function without using a Microsoft compiler?
>
> It seems as if there ought to be a way, but it might involve having
> access to the source code for HHCTRL.OCX, whatever sort of beast that
> may be.
>
> Or am I (I hope) missing something?
>
> Allin Cottrell.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 14:28:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 7 Feb 2002 09:28:24 -0500
Subject: [Rd] Problems sending email to r-bugs
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>


Hi all,

I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
the bug report has not shown up in the database, nor does it appear to have
been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
messages or warnings from the mail server, so I'm not sure what is wrong. Is
there a problem with r-bugs@biostat.ku.dk or is it on my end?

I'm including the text of my bug report below. 

-Greg

-----------------------

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which 
> include pie charts.   (NB: No piechart arguments please, the 
> main chart on the page is a proper bar chart representing the 
> same information.)
> 
> When I plot pie charts in a column, the piechart at the top 
> of a column is always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 
> 2/3 of the others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in 
> the second column:
> 
> 
> This occurs both on the x11 and postscript devices, although 
> it is less noticeable on the latter.  It doesn't seem happen 
> for 'hist' or 'plot'. As I've only recently started using 
> layout, I don't know if this occurs with other plotting 
> devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 15:15:35 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 16:15:35 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <x2heote31k.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> the bug report has not shown up in the database, nor does it appear to have
> been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> messages or warnings from the mail server, so I'm not sure what is wrong. Is
> there a problem with r-bugs@biostat.ku.dk or is it on my end?
> 
> I'm including the text of my bug report below. 

We had a switch of IP addresses over the weekend and Jitterbug uses an
explicit IP address in the config file...

Will fix, please retry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 15:21:29 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Thu, 7 Feb 2002 10:21:29 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>
Message-ID: <Pine.LNX.4.44.0202071020170.31581-100000@ricardo.ecn.wfu.edu>

On Thu, 7 Feb 2002, Prof Brian D Ripley wrote:

> Let me stress that the R instructions do work, Rchtml.dll is by default
> built with mingw, and it also works when cross-compiled under mingw.
>
> Also, there is no `fakery': what is done is a standard way to build an
> import library.

Sorry, I don't know much about Windows dlls (as is probably obvious).
I will study harder and have another go at it.

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Feb  7 15:45:58 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Feb 2002 10:45:58 -0500
Subject: [Rd] Problems sending email to r-bugs
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <3C62A136.578BF04A@bank-banque-canada.ca>

"Warnes, Gregory R" wrote:
> 
> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ...

Are you sending email directly or using bug.report()? If you are using
bug.report(), what editor are you using? The reason I ask is that some editors
(e.g. nedit) spawn another process and return, in which case the Unix version of
bug.report() throws away everything you type and sends an almost empty message,
with no warning. This is a known, reported, bug. The fix is to add an argument
wait=TRUE as in the Windows version.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 16:07:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 17:07:57 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <x2heote31k.fsf@blueberry.kubism.ku.dk>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
 <x2heote31k.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21yfxe0ma.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > Hi all,
> > 
> > I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> > the bug report has not shown up in the database, nor does it appear to have
> > been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> > I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> > messages or warnings from the mail server, so I'm not sure what is wrong. Is
> > there a problem with r-bugs@biostat.ku.dk or is it on my end?
> > 
> > I'm including the text of my bug report below. 
> 
> We had a switch of IP addresses over the weekend and Jitterbug uses an
> explicit IP address in the config file...
> 
> Will fix, please retry.

Sorry, it's still not working. A link involved in the home directory
of r-bugs got removed on the mail server, so .forward processing is
off. The messages are sitting in the inbox. 

I can't fix this today (no permissions on the mail server).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 18:10:34 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 7 Feb 2002 19:10:34 +0100 (MET)
Subject: [Rd] testing (PR#1299)
Message-ID: <200202071810.TAA06333@pubhealth.ku.dk>

Just testing the email interface...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 18:12:14 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Thu, 7 Feb 2002 19:12:14 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202071812.TAA06359@pubhealth.ku.dk>


Third try...

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which include pie
> charts.   (NB: No piechart arguments please, the main chart on the page is
> a proper bar chart representing the same information.)
> 
> When I plot pie charts in a column, the piechart at the top of a column is
> always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 2/3 of the
> others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in the second
> column:
> 
> 
> This occurs both on the x11 and postscript devices, although it is less
> noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> I've only recently started using layout, I don't know if this occurs with
> other plotting devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Feb  7 18:13:00 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Thu, 7 Feb 2002 19:13:00 +0100 (MET)
Subject: [Rd] PR# 1147
Message-ID: <200202071813.TAA06390@pubhealth.ku.dk>

Apropops todays automatic bug report: The bug #1147 I reported
(postscript, problems with screen layout) which I treported some time
ago, does not anymore occur R1.4.0, windows 98, when I test with the
same code that caused the original problem. Fixed as a by-product of the
internal changes to graphics code?

Kjetil Halvorsen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Feb  7 18:13:46 2002
From: joehl@web.de (joehl@web.de)
Date: Thu, 7 Feb 2002 19:13:46 +0100 (MET)
Subject: [Rd] incorrect handling of arrays of list elements (PR#1301)
Message-ID: <200202071813.TAA06413@pubhealth.ku.dk>



After checking with the prototype I hope the following to justifies a bug-report:

# you find pure replication syntax at the end


> # the prototype allows for the following, which fails in R
> matrix(vector("list", 6), 3, 2)
Error in matrix(vector("list", 6), 3, 2) : 
        Unimplemented feature in copyVector
> 
> # however the desired object seems to be legally in R as we get the same via
> tt <- vector("list", 6)
> dim(tt) <- c(3,2)
> tt
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # preparing to show further problems
> tt[[1,1]] <- letters
> tt
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # works fine
> tt[[1,1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"
> 
> # the prototype allows subscripting and assigning to subscripted such objects 
> 
> # erroneously NULL in R
> tt[1,1]
[[1]]
NULL

> 
> # erroneously NULL in R
> tt[1,]
[[1]]
NULL

[[2]]
NULL

> 
> # erroneously NULL in R
> tt[, 1]
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

> 
> # erroneously NULL in R
> tt[,]
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # fine in R
> tt[]
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # fine in R
> tt[cbind(1,1)]
[[1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"

> 
> # of course the same problems in assignments 
> tt[1,1] <- tt[1,1]
Error: incompatible types in subset assignment
> tt[1,1] <- list(letters)
Error: incompatible types in subset assignment
> tt[1,] <- tt[1,]
Error: incompatible types in subset assignment
> tt[,1] <- tt[,1]
Error: incompatible types in subset assignment
> tt[,] <- tt[,]
Error: incompatible types in subset assignment
> 
> # and again fine
> tt[[1]] <- tt[[1]] 
> tt[] <- tt[]
> tt[cbind(1,1)] <- tt[cbind(1,1)] 
> 


# the prototype allows for the following, which fails in R
matrix(vector("list", 6), 3, 2)

# however the desired object seems to be legally in R as we get the same via
tt <- vector("list", 6)
dim(tt) <- c(3,2)
tt

# preparing to show further problems
tt[[1,1]] <- letters
tt

# works fine
tt[[1,1]]

# the prototype allows subscripting and assigning to subscripted such objects 

# erroneously NULL in R
tt[1,1]

# erroneously NULL in R
tt[1,]

# erroneously NULL in R
tt[, 1]

# erroneously NULL in R
tt[,]

# fine in R
tt[]

# fine in R
tt[cbind(1,1)]

# of course the same problems in assignments 
tt[1,1] <- tt[1,1]
tt[1,1] <- list(letters)
tt[1,] <- tt[1,]
tt[,1] <- tt[,1]
tt[,] <- tt[,]

# and again fine
tt[[1]] <- tt[[1]] 
tt[] <- tt[]
tt[cbind(1,1)] <- tt[cbind(1,1)] 



> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R 



Best regards

Jens Oehlschlaegel

________________________________________________________________
Keine verlorenen Lotto-Quittungen, keine vergessenen Gewinne mehr! 
Beim WEB.DE Lottoservice: http://tippen2.web.de/?x=13




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 18:15:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 19:15:14 +0100 (MET)
Subject: [Rd] Re: [R] expressions in legends (PR#1302)
Message-ID: <200202071815.TAA06435@pubhealth.ku.dk>

Robert Cunningham wrote:
> 
> Dear R-users,
> 
> A few days ago I met the problem of using text produced with
> expression() in legend() being elevated relative to text produced
> without the expression() so that the alignment with pch and lty is
> also messed up. After ferreting through the help I finally came across
> an answer, the adj argument of legend(). You can see and example of
> this in the Math expressions example section of ?legends. Of course,
> many users would, I am sure, overlook this option and 'put up' with
> the mis-aligned legend. I wonder why expression() causes this problem
> and whether anything can be done about it (other that the adj hack).
> 
> For those unaware of the problem paste this example into your R.
> 
> plot(1:10,1:10)
> legend(1,10,"Non expression_species",pch=21,lty=1,bty='n')
> legend(5,10,expression(italic("Expression species")),pch=21,lty=1,bty='n',col=2)
> legend(8.1,10,expression(italic("E. species")),pch=21,lty=1,bty='n',col=2,adj=c(0,0.6))
> 
> The first legend key is ordinary text, the second expression(italic())
> with no adjustment, the third with the adjustment.


This looks like a bug, so moved to r-bugs.

Let's simplify your example:

 plot(1:10)
 text(5, 10, "No expression ", adj=1)
 text(5, 10, expression(" expression"), adj=0)

So the bug is in text(), not in legend.
I'll try to investigate the problem later this day / week.

Uwe Ligges


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Feb  7 18:16:14 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 7 Feb 2002 19:16:14 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202071816.TAA06457@pubhealth.ku.dk>

Forward to r-bugs to maintain a record.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711
----- Forwarded by Woodrow Setzer/RTP/USEPA/US on 02/04/02 08:53 AM
-----
                                                                                                                      
                    Woodrow Setzer                                                                                    
                                         To:     bolker@zoo.ufl.edu                                                   
                    02/01/02 03:23       cc:     owner-r-devel@stat.math.ethz.ch                                      
                    PM                   Subject:     Re: [Rd] typo and user-proofing in odesolve() (PR#1295)         
                                         (Document link: Woody Setzer)                                                
                                                                                                                      



Probably r-devel is not the right place for this discussion, since
odesolve is not an "official" part of R (not even a recommended
package).  I'll respond here to get it in the record, though.  I expect
to have a new release of odesolve ready in a couple of weeks.  lsoda
already calls func() once, to determine the number of "extra" values
returned; it was foolish of me not to test for the kind of value
returned at the same time.  That fix is already in the next release.
I'll see what other defensive checking can be done, as well.
Thanks for the spelling correction.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                              
                    bolker@zoo.ufl.edu                                                                                        
                    Sent by:                     To:     r-devel@stat.math.ethz.ch                                            
                    owner-r-devel@stat.ma        cc:                                                                          
                    th.ethz.ch                   Subject:     [Rd] typo and user-proofing in odesolve() (PR#1295)             
                                                                                                                              
                                                                                                                              
                    02/01/02 12:34 PM                                                                                         
                                                                                                                              
                                                                                                                              





  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example
below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]
+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:16:23 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:16:23 +0100 (MET)
Subject: [Rd] failure of http://r-bugs.biostat.ku.dk/cgi-bin/R (PR#1303)
Message-ID: <200202071816.TAA06475@pubhealth.ku.dk>

Hi,

The following script

	http://r-bugs.biostat.ku.dk/cgi-bin/R

fails with the following error

	The system encountered a fatal error
	After command: 
	Received: 
	The last error code was: No route to host 

	Web interface using JitterBug.

when trying to submit a new bug.

Best Regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:17:24 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:17:24 +0100 (MET)
Subject: [Rd] R loads uncorrect readline library (PR#1304)
Message-ID: <200202071817.TAA06501@pubhealth.ku.dk>

Hello,

We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.

Running R on Red Hat 7.2 fails with the following error message:

$ R
/usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
libreadline.so.4.1: cannot open shared object file: No such file or directory
$ 

This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
readline-4.2. Both are supposed to be binary compatible.

R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

Best regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 21:26:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 22:26:15 +0100
Subject: [Rd] R loads uncorrect readline library (PR#1304)
In-Reply-To: <200202071817.TAA06501@pubhealth.ku.dk>
References: <200202071817.TAA06501@pubhealth.ku.dk>
Message-ID: <x23d0dasqw.fsf@blueberry.kubism.ku.dk>

papadopo@shfj.cea.fr writes:

> Hello,
> 
> We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.
> 
> Running R on Red Hat 7.2 fails with the following error message:
> 
> $ R
> /usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
> libreadline.so.4.1: cannot open shared object file: No such file or directory
> $ 
> 
> This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
> readline-4.2. Both are supposed to be binary compatible.
> 
> R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

A build issue, rather than a bug in R as such. This is what happens
when you build against libreadline on RH7.1.

RedHat supplies the readline41-4.1-10 package in 7.2 for
compatibility, which is the preferred workaround.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:54:27 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:54:27 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072154.WAA07020@pubhealth.ku.dk>

gregory_r_warnes@groton.pfizer.com wrote:
> 
> Third try...
> 
> >  -----Original Message-----
> > From:         Warnes, Gregory R
> > Sent: Tuesday, February 05, 2002 4:12 PM
> > To:   'R-bugs'
> > Subject:      layout and piechart diameter problem
> >
> >
> > I've been using layout to create some graphics pages which include pie
> > charts.   (NB: No piechart arguments please, the main chart on the page is
> > a proper bar chart representing the same information.)
> >
> > When I plot pie charts in a column, the piechart at the top of a column is
> > always smaller than the others:
> >
> > For example:
> >
> >       layout( matrix(c(1,1,2,
> >                        1,1,3,
> >                        1,1,4), ncol=3, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> > In column 3, the first piechart has a radius something like 2/3 of the
> > others.
> >
> > This also happens for:
> >
> >       layout( matrix(c(1,2,
> >                        1,3,
> >                        1,4), ncol=2, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> >
> > For this:
> >
> >       layout( matrix(c(1,3,
> >                        1,4,
> >                        2,5), ncol=2, byrow=T))
> >       for(i in 1:5) piechart( 1:3 )
> >
> > the piechart at the bottom left is smaller than the three in the second
> > column:
> >
> >
> > This occurs both on the x11 and postscript devices, although it is less
> > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > I've only recently started using layout, I don't know if this occurs with
> > other plotting devices or commands.

Probably only if the functions are making use of par("pin") (and friends
?) as piechart() does:

layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
par("pin")
plot(1); par("pin")  # Here it goes wrong for the next plot.
plot(1); par("pin")
plot(1); par("pin")
plot(1)


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:59:16 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:59:16 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072159.WAA07049@pubhealth.ku.dk>



Uwe Ligges wrote:
> 
> gregory_r_warnes@groton.pfizer.com wrote:
> >
> > Third try...
> >
> > >  -----Original Message-----
> > > From:         Warnes, Gregory R
> > > Sent: Tuesday, February 05, 2002 4:12 PM
> > > To:   'R-bugs'
> > > Subject:      layout and piechart diameter problem
> > >
> > >
> > > I've been using layout to create some graphics pages which include pie
> > > charts.   (NB: No piechart arguments please, the main chart on the page is
> > > a proper bar chart representing the same information.)
> > >
> > > When I plot pie charts in a column, the piechart at the top of a column is
> > > always smaller than the others:
> > >
> > > For example:
> > >
> > >       layout( matrix(c(1,1,2,
> > >                        1,1,3,
> > >                        1,1,4), ncol=3, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > > In column 3, the first piechart has a radius something like 2/3 of the
> > > others.
> > >
> > > This also happens for:
> > >
> > >       layout( matrix(c(1,2,
> > >                        1,3,
> > >                        1,4), ncol=2, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > >
> > > For this:
> > >
> > >       layout( matrix(c(1,3,
> > >                        1,4,
> > >                        2,5), ncol=2, byrow=T))
> > >       for(i in 1:5) piechart( 1:3 )
> > >
> > > the piechart at the bottom left is smaller than the three in the second
> > > column:
> > >
> > >
> > > This occurs both on the x11 and postscript devices, although it is less
> > > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > > I've only recently started using layout, I don't know if this occurs with
> > > other plotting devices or commands.
> 
> Probably only if the functions are making use of par("pin") (and friends
> ?) as piechart() does:
> 
> layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
> par("pin")
> plot(1); par("pin")  # Here it goes wrong for the next plot.
> plot(1); par("pin")
> plot(1); par("pin")
> plot(1)

And let me add, it is everytime the second one:

layout(matrix(c(1,3, 1,4, 2,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,2, 1,4, 3,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,3, 1,2, 4,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Feb  8 13:25:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 8 Feb 2002 05:25:27 -0800
Subject: [Rd] timing Mac R's
Message-ID: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>


--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Here is the same thing as before, now done a bit more systematically. The
rather bad performance of R-patched on eigen is a mystery (to me), the 
gain
in La.eigen when using ATLAS is probably not Altivec, but using
threaded level 3 BLAS on a dual processor machine.


--Apple-Mail-1-507788993
Content-Disposition: attachment;
	filename=timing.pdf
Content-Transfer-Encoding: base64
Content-Type: application/pdf;
	x-unix-mode=0644;
	name="timing.pdf"

JVBERi0xLjMKMyAwIG9iaiA8PAovTGVuZ3RoIDEzODAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNv
ZGUKPj4Kc3RyZWFtCnjafRfLcts47O6v8G3lGYvhUxL35jpJN50m3TruNjNtD4qsxJoqlleW67Zf
vwBByS9lRweAIADiTUoMOXxiKI1h0sphpDQTPB5mL4M388HFtYmHQjBrzHD+5Fjniy/B/Ob25u7t
KFTSBLeTkTHBlBazP+5H3+bvLq5FNLTMRgqlhGEK1qG0LEkSp+DdKOLB5G4USsODyyuC76+uPn0m
8UgenBozE4lhaCTTJnLi047Lwp5GpoSZWHrzPozCSAagPRLB3OFXDr9zOFH2du4PCoVOmBAKTOXM
SuGUCTYKBec8uFk1dbXYZk1RrcBgkfAoEKgFTg2FYlaTb7IVeJOvsuVLWn8Hbik0D2QPt2q5p2n9
6BRDJH6MhAnyekMn8UjGJ7Kxlz0wjiQ/3BN8wDOjKH7lTHkqNy3TzabIUIrLJFC9Uuq10ywolBgT
ldgTWbJUt5KXab0rvPQ/IyHEgZtaR4HuOVjv3ZyRpGBAA1TxRL0i0nk4C9dpky3zhcuZ5YHp5Vd7
/kU+glKmHJQYkSTWJ1LklelyV62ycot+bKgyTBA5fgGFxKUehjpmkY3agjqvcegRqZWv35vz8tZQ
3tZv78tYuIBIX/CXjvLJ4dMDnhuHt03RV/YKOlNHR2WPKVbSBs2y2BC2qpqcsJ2HWfWyTmu/eKq2
EI2gptVBBXvx6ongrGX3nLdpRggWE8IHRnC+9Jq/cqHrTUMLsAYDGzrzo6MkNiggE7NvJcBnYVss
iT7uKxGMgWrVXq4CrCa0WdZ5TkLOQ6RR7V48CEHrQx/BZh1pZ/N5de2LXp0EBimk32hvB1AgVFCA
6HZWpCXRvB/jE1YuL3h0wWXLtK/147M6xefWHWhOoiBdoXBs/RGAHBwRJz3tEduTg2JKNkLUbRjH
6EBzz1uVXYJA4aHseYth8UH/BfV2RUjhoRs9SRI8jPvoMY4kl97WowOWKea+m3dAeKkWeb+WVvtu
WWRLz5ynK2/Uri/ZdZ6W5S+aU4ti0xSr522xWRJhU/w8m/AbRqPivKApXtoGL2m2LFZ+sfNwu/GI
ixHAlMBiSzUDY/LtX7+J9lYTbCrM3Q6qHK6jsddXNEvCnNcAHwgIDoNXEf6VG24+KgtQ9DQgJYsi
fXov/L97SsVdOSB+VEpKJc473MBhU5RY2rgioxG7/fuzR+rpmEScHUiCEHnpJ5l5xM0dQBrfqn2T
5PrDDB8o89nkjmGq/TDCeut6OTkdcrjrZwXkoiyJsjcbyT7WQH/OMiJJON1dnkDEKE/W6zLv6YTj
wGiNGkILrzXlcuJI5LhWbXiQK44JIce1H3dIOfYSKfN263QCoVw7Sc9LnsIsZTs0FLx93k/uW1La
EAahcHyw7eOA18GYKCSJhIMZBkuqKdV7L59lACiPMMT7TQQvuAgm7tExd+bhulo3xUvx29UVlz5K
QKcoAULthBg2EULMUsFyiJkRes9YHpuHJEXgTXeaK2anHcbEIl+Me0ztusgPeZwaq+fS4+s6z4p2
onMwP6/Tpr1MuB8KgEzKptjbk2GN9DQildbnUcIDkBNwGablpiKsSb+PREd3xiBSrddV3WxXRfPL
73j+7jWAi7x4zldeI/ojrAzepwx3g3ZLunF7pPwHmpzWRbV9/Zo/vUE53Tamex2278tq2xBSwuxM
a8LT8jl/rFNaPLYvdBeawdV8IPzvUChkwuABBn8dlnF4LsH/0L+DL9/4cDHgw3cDzpRNhjvAYUha
O3wZGMviOPLLcnA/+Ngp65yA55Wx+1+rg3+k9s/qMm3ynj8oy1QUe5Y/yfZrcGOb1v6mScYEJeeS
dQoSUBA5BdqwGHSF7asP36Gtz/8BvaNwgWVuZHN0cmVhbQplbmRvYmoKMiAwIG9iaiA8PAovVHlw
ZSAvUGFnZQovQ29udGVudHMgMyAwIFIKL1Jlc291cmNlcyAxIDAgUgovTWVkaWFCb3ggWzAgMCA2
MTIgNzkyXQovUGFyZW50IDEyIDAgUgo+PiBlbmRvYmoKMSAwIG9iaiA8PAovRm9udCA8PCAvRjU3
IDUgMCBSIC9GMTYgNyAwIFIgL0Y2MiA5IDAgUiAvRjU2IDExIDAgUiA+PgovUHJvY1NldCBbIC9Q
REYgL1RleHQgXQo+PiBlbmRvYmoKMTUgMCBvYmogPDwKL0xlbmd0aCA1OTUgICAgICAgCi9GaWx0
ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp42s1W227TQBB9z1dYfnIE3u6svTcJHpISRC+0Uhsu
UikSFBcsEQcS94G/Z3fWDd7ENU4wAUWZPY5nzpwdr+IDATUfCIAJIiQLhNJEaRXczAbj6eDgOYhA
ES1EML3FzOmnq4gNY+A6VdHxUNBodDaMGafRs4lbTyeTV2+G19NjLAYgmnNbDYkkKk2DmCVEgyMi
Lk+weh4nLE2qVuNVgiZcpPa+ItzodLdNSwGRESBYdIjxBcaXGEcYLzDnxBFxXesUgwAizE8xo0Qz
hpRf8q8fs0X5JL69K27KfF68o5zaAIaH0ggO7A/zuzJbWLDMvq8SHnsX4aPQrjFgreluNMdg9p4q
bPRtkRelTQ+rlo6/eMopDTdqpF+z/LEssxkp81lmL7P8c4ZCKyoLDY1lqX/bVPyXjLJ9UkCbRrW9
DMvT887+BeX6tE4/kC5Hq12JIen/LOxIKvegtGFquxyzB8Rs+wx7YlX7YA2X818zE9sOzBbbdVHM
FzPX/r34g1Ftz6f+Lp83Hhn2sB3Z83b2wrfuChgnVArzCuYENMceyW9twWG7Lai/+MeIzzEao5DI
NHqNF847XCC+xHi0SrWeYlNrDKky5ggqvwCVWKjkclnLRZMDlZ6jwlmj80u3viVNbqQqMa6EiGra
V3DtTkyTR2h4OpjPUpNyNqrsiiYy9eDq9j3oSMOEB3elAeXBVhrZPgT8X36ob0LrfbmZqfbxKuEe
dCMyx9CDXTewScN93FUPTqL51d7tGVBCtQe7bmGdBrQHdzsRRgL3YBPNYDId/ATwmkQvZW5kc3Ry
ZWFtCmVuZG9iagoxNCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMTUgMCBSCi9SZXNv
dXJjZXMgMTMgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVu
ZG9iagoxMyAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNjIgOSAwIFIgL0Y1OSAxNyAw
IFIgL0Y1NyA1IDAgUiA+PgovUHJvY1NldCBbIC9QREYgL1RleHQgXQo+PiBlbmRvYmoKMjAgMCBv
YmogPDwKL0xlbmd0aCA2NjcgICAgICAgCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp4
2qWWy27bMBBF9/4KIZvKC034fhToIk2bwkWTArV2aRa2ozQGYiuw3EX/vqQo2Ro/VIWFFjoih5cU
pZlLmhB30YQpC8ayRBl/N8liNfqYjy5vqEoMWKWS/KmOzB/v03xyO7n7Ms44k+nt1ViQ9Do8/Hg3
HWdUCi1SPn7Iv17eSJtQClZKPz6jggNjScY4WFpL3dOHcaYISS++zeB5+TIvNtvQsP5ACSEXXsZN
m1E3RJj9GCZczN1ViNUGuEG4625hoAwTCGNllELYK6MPNqIq91ughr0/lSAZwqiFu7FEIxy6cCwj
gEqEQ1dz9P767Ptz0pmRCQFEYt4FtHBm6ViIcxAIhy79QEaBZZhPradOr31+OFkmQDayLlWgSSLd
CapzhzaZOFm7fBMyvX6ZVdVyASdEpQajTBM/rffWj3gqN00wIZ1oroG73QnR6xChutO76sBV0//p
xHSUgRJtgA5zPZZF5Uml67KZ/iehYr2snkPzvFjMfldF6CqfQuOqWJWbP6HtdVPOX4pVBaerCgVF
jAMNzMqD3+mgqMihNYURUBphXE5Z0F2ipulsYVBGWeBd6hUx/RswvKpSaYEhjCsH7g+UEnNvcpoe
IYbwTXXl2GAG/wuUAFUI43aC7AsjeVNhPJTZlWny7zJtIoxWn7c2zRHGOqQ0CGNlbJeG5tZ/2KzW
CKNt1iCMleESYfQx46TN5svVcv0rhFTb8vW1eAwPs+37AHv7Ba6PsO0dZHV8kNUxxdLv03B3BWln
kEhaKeCWIsPz8WcMT7hE5KbH8HyK2X7DM9buDc/PFQzPU214TPGO4fnmneH5B294/t4ang/3hpfV
H8Wdp91BhFn0bc55IYk0QX3eBIVBGGuC7XGowVMyo8/56C/XPssNZW5kc3RyZWFtCmVuZG9iagox
OSAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMjAgMCBSCi9SZXNvdXJjZXMgMTggMCBS
Ci9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVuZG9iagoxOCAwIG9i
aiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcgMCBSIC9GNTcgNSAwIFIgL0YxMDAgMjIg
MCBSIC9GNjcgMjUgMCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyOCAw
IG9iaiA8PAovTGVuZ3RoIDYxMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFt
CnjapVZLb9swDL7nVxg9OQezIvUesEOHpsCKIgM6bz0UPXRrtwVYH1jz/zHJshPLchzbRQD7M0V9
fElkMGPuhxmSAqUpU8aCsSb7+bT4VC5OL1BlBqxSWfmr0iwfbnOxLFBaYfLLpWL52XpZkGT5+Sq8
r1arbzfLu/Ly9ELaDBGslGF3QRwsVhS3eOe0BWP5+mxZKPdGC7aN0NSLDXCMngMdhzB7Er/j5M/m
74/Hf9vw9fwRGWMnhzZw1raqBFiK8U6hAeOIOHAT40EiPUAkeIzHelTl4uoeOumQA9mIa8CA6wju
lhtwIIQujWyjsaV8jy/Hs5AeikP+G9pVoIZjTXdpiCI4l0bICE5KxNvLPgVqXPwoQZkIznLc7eUy
gvNoFDAdwbGHMolf912DcvO0ef4dVN62L6+vjw/h4377IYDGEwYou6hZC15U/XLf8pCEa6aYFRwB
eeidEPQUtfUkkOB1dz3fKViQSvh1A9raetnbo/zaPfMb9+D550qw7qHlGgzJet/3lNYCNUZd71ZY
sVL+tXoG2i+VfN0TW4FWgjXGdXXm2ibV0WEdn9Qt3arvY23qOowJhJZye04UtXaB2p09Pdzp5cCd
9hou/6wpGWM7GXZlFRq4RgKkSXlS2XEe1cOj6SiPfsfE8yrSMfqpSpEZJyUdSfdwKAp/chIyJ1Vs
BJlOybCPTIjpnk2cfl6DAG03/a5dTy4tAaeUh08urfPH9PjDpvozagR2Y3B9SiW1cFI/vaYW1pPx
PjI+48h5MtHr2ZxTMm4oNv9gZGLXS2cEgUnstVSYw2SLVbn4D5AUfKxlbmRzdHJlYW0KZW5kb2Jq
CjI3IDAgb2JqIDw8Ci9UeXBlIC9QYWdlCi9Db250ZW50cyAyOCAwIFIKL1Jlc291cmNlcyAyNiAw
IFIKL01lZGlhQm94IFswIDAgNjEyIDc5Ml0KL1BhcmVudCAxMiAwIFIKPj4gZW5kb2JqCjI2IDAg
b2JqIDw8Ci9Gb250IDw8IC9GMTYgNyAwIFIgL0Y1OSAxNyAwIFIgL0Y2MiA5IDAgUiAvRjU3IDUg
MCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagozMSAwIG9iaiA8PAovTGVu
Z3RoIDUzMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFtCnjatZZNb9RADIbv
+yuiXkgOce358vjAARBFRZRDm1vVQ+kuKlL5EFT8frzJwjaZbLIZQDlk1vI847U9fkMF6kOFCQJR
TBHi9h2Lu8+rl83q9IxCEUFCKJqPrWezvi6b84vz92+q2hpfXryoHJavuh+Xz66qmrxjV/rqpnl7
eualIALxfru/JmfBmKI2FoRa1DXdVHVALNUrWN1sdI2AuLdyz7pfKl/jqUlZLvZhJz++fn/sll+e
88mUKwWGGJUb+weHCLZv3i+ncOzBuxTHARwdgeMBLhKQT3Fq5nAY15Ztn3eFG6dhdbE6MLArDj9x
amtCuwpf1t9uH+/uN2sYK+POtSYGI36Q+vtPDx82++x7xOn8I4iM1R1ped0VNmiX31Y5AsYJjM0Y
jF1GRw7SQjiTFyGI6eliwOHy0xVGLoXp5fLL86Lb/Ghk1mTk5d0tLO0YcK5bPakKeB7aZusL/o/j
Ict2MRmK5TSU7dyYCWU+C2mDpO1JYaw9KaM9pZ2B/aAFBJf+kcNBhb+c4mE6GVq60Sni5R9OEc6D
xZA93zhf18RDxFQ5JHTzdrGuCRg7IkQIjjN0jSP4EdXVU5Cydc0eoWvrTUW+/FkRlpuH/65uDiQZ
EGoLS++Vaz8qhpzUNs8JMeVEXDo7F8uZx+47pn8N1OoyRMMJECYwtRpefqd0m6UxWJbMH5az1etm
9QsCmGW2ZW5kc3RyZWFtCmVuZG9iagozMCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMg
MzEgMCBSCi9SZXNvdXJjZXMgMjkgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQg
MTIgMCBSCj4+IGVuZG9iagoyOSAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcg
MCBSIC9GNTcgNSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM0IDAg
b2JqIDw8Ci9MZW5ndGggMTYwNSAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJlYW0K
eNrtWltv2zYUfvevMPIkAxXLQ5EU+TAUXZtiLYJ1a1x0QNsHxVZiob6slrOg/36HF/kiKbLSKJ7b
BQEsipfvfDw8/HSkEPoU/6APTBIZs75Umiit+qNZ79dh7+krkH1FtJT94aXtORx/DOQgBKG5Ct4M
JA2e/z4ImaDBy1N3PTs9ff9h8Hn45ukrofsARAvhRocsIhosxEf4PAglpQEQzl2JEkqLOhmV62wJ
QQ0MIAxXZRxBqzhC3B2HixocuCvOyVlCJtn0Il2uXMX8F6CUnuyMiUu2KYnQELBd65Tw3dpNsWki
lDBRBxaJ7wLjtWBCtwArTfMkX2ycIk8a7QKJa+wCUfw7JoFrS+vAWrk3roBFUS0YuzuzHY/EzR6J
I2dY7RqOud00W9WbYhOciu0GLMMpRSRrAVf2iuREqSqcFESr2+GszGyUAiKOcxT9EK9MOsaCuI6S
bXcUhPHIq9KLdQdNhOSmXRGBkuaa3yIVFqBWScCupnxmf9/bmnNbfm1/t3ue19ALgUsCmqOeUaIZ
s/DDSerkb5VcTH3xIp0uBkwEN+72KjM3/wxABGnuqhJ3+Xqdjb64Yn49myXLb+5mcekxC/Blml9P
V7n1Re902AOv3hEQEAwJafQ/10a9v/Y+fqb9cY/23/Rw06Ok32CZInHdn/WYligEkb+f9s57f67B
QlSO9fLehmTHUURyJR9bu0DoMW1W5z4YShIey3uCCAKqz/GHbz/Xth9NLkZ+Ey4eS66N0A/hevjD
szAPigqNmESMd0UD2vA4q/MGblnQh6VR6w4UFH3QVTmXZQ6A0kk74RAThXLXhkRcJoESRCV0QcLs
VnbPjRYaXQHUldAM+5l0qG2YvEiWF4u5U+u35+76V3nRFBCceCeLxghXrUIHdCV0OKGcHZiFkA8n
KSYvxMdxGxoVQcFXkyhWnbDARzC0UrZYVVjgbpAdyZqAlitSo2s0ZgfVeBZVwoIxEuMMjknYjFAV
WfSPqEcvpkmeZ6NjUCNGj0ON1KMardVI/+RqpDDL0m1IPHtWIaEJFfGjGO0TI3H35Eg3yZHoSgjE
feToUCxA8iY5El3JkbiPHImu5GgPC8Wa5Eh0JEd7V6RJjkRHciTuI0fiyF76VGcvfceha62enS+T
5U3mhQ0IDqgVtW6yWYoTa8OJk+rHAgz8qJvHmCA85m1oiKqa4BaKOnJFxFplwYxENQKvuskr2qdY
DI4hxYIjeOGDWDy+8H2na0V7LfrD/LMhWY0m6bhJkQ6W4MADplkbRdrDQrMGRRJdKdI+VxDepEiH
yrJqcr3/IMuCh8uyWm8bULRJkcSxKVL8Y2ZHL9PNP0Gnj1nSUWVJQMQxZEnNmvS/ypKaNeln+38f
vtaC+fITUcJZvOdT0jRNltNvpfMR4+zSyMtlukzno/Uhi2W6PmaxKjouk1myykZkEEaSBh8Giga+
abSYj6bX49SecxFExxh4oAiLpDX8iQoK+AODkEMcvDJKtlgOkDwL0uwqnT9BGModJ9DRWv1M2ene
Ms8Wczciy11DcrG4Xrkq7mpW2Sz1jZcDwFnkq9SbWU0Sj+eNsOLLmqGMXDWDneM+W2bt0RE7oXIn
MzFWM7GIyeAsIcXcIi6d2YjF67mZPltGctd6k60mru35AACC4dnzc9dil8Q0+HmbOuZq3LwrE3EH
jbY9wSgOz93VBQBFwvPU1RjbFtrcbMw/8ePmY1+48J1EEIfKgznPm2LZnvN8YbF6rmr7A2drp0d1
0YQAhcchBmPOuAwEuJAxJ4UWs3Q1yeZXrjpfLZP5le9ztfD1NLCRhlVuMUzpXfi3eyWw2DS4mWSj
yW0et9a4Qhiz2UxpkkwvXSnBS+DbC0/5Fl/r4tMMNxPwdTem68LdrDcH1zsBZKhJZahNPUK2cr0K
QunX62SKnKqLsKFid79XgXfheCf1cAes/FoV8d28UHyzUK/NQFUojzKrYU7w2aok/5KXWtcZkKK7
GmAqMt+7iEVlT5x6BB+LWNyJReUn5o3csu/vEI7xepZiM8vCLYjAPE9mDC7T1BcX7vqJAncGfL2n
DdrTtpHiqGNd4pG2wI3lbF4Y8DDObU+31GO/wOWOvl16u8vFxrPmUVFEn73xNEXJu3hf5KvrR0uT
L80D+l8H9ZIeZW5kc3RyZWFtCmVuZG9iagozMyAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVu
dHMgMzQgMCBSCi9SZXNvdXJjZXMgMzIgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJl
bnQgMTIgMCBSCj4+IGVuZG9iagozMiAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkg
MTcgMCBSIC9GNjIgOSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM3
IDAgb2JqIDw8Ci9MZW5ndGggNDgxICAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJl
YW0KeNpdUk2P0zAQvfdX5IYtEWM7sWNzYqmWVREL0jZISMDBbdw2UupKsbsr/j3jj5YuijSeGc97
8zwZVlH4WMWlJkrzSqp4qmp7XHzsF+8+MVkpoqWs+l2q7IefqF89rr4+4LrhAj3e4ZaiZQ6e3qxx
zUTbtajDv/vPCc4Y0UJEfM24IFx1Vc0bolni+kUFlWAYrlvWoaezc6PbA4sSKBxsdpZm3pxc9CV6
xkwgO/sxJwQa3aV6tqV+GHcY5OzsbF3IMOuizudxPrkjJH0pPNniuVOIiisGr+UMpILCViWJ+zGS
5b645kKhycyYKbRPoX7Vbms9gWEA44N1djbT9Cdjvq3z+SNjvLVHnzPhlM9NoTMlDQ+DlgW+GUO+
3WFGkfHBzkkvfSU1HIyLZRTZ43kywQ45Wk7G+3H7Nkcvh3F7yO5VBs1t6aURvW2U4n/czoT/RkLL
8yjSJP94ySsNe9Ok/85bIlsNJyedbJPS77gWaW/Afkn2DsZGKVpf8R3RXYQ3HZGNuuwebhiUthq8
WjK0AssBFO1tZlnyiUzIGzFAp+IOpr2UifS+PppxKmMYhhk3HbLeX1f4CpaUNLQpUt4Xcn1zTxrR
levBTtaeXz74YAI5bydD7HCOkMV9v/gLD9ndpWVuZHN0cmVhbQplbmRvYmoKMzYgMCBvYmogPDwK
L1R5cGUgL1BhZ2UKL0NvbnRlbnRzIDM3IDAgUgovUmVzb3VyY2VzIDM1IDAgUgovTWVkaWFCb3gg
WzAgMCA2MTIgNzkyXQovUGFyZW50IDM4IDAgUgo+PiBlbmRvYmoKMzUgMCBvYmogPDwKL0ZvbnQg
PDwgL0YxNiA3IDAgUiAvRjYyIDkgMCBSIC9GNTYgMTEgMCBSIC9GNTkgMTcgMCBSID4+Ci9Qcm9j
U2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyNCAwIG9iaiA8PAovTGVuZ3RoMSA4MjcKL0xl
bmd0aDIgMTA5MQovTGVuZ3RoMyA1MzIKL0xlbmd0aCAxNjg1ICAgICAgCi9GaWx0ZXIgL0ZsYXRl
RGVjb2RlCj4+CnN0cmVhbQp42u1Sa1QT5xaNdpXWiN5qLyhLqx/KS1PCTHiGNK0oBhDiA0IEQe04
mYSBMBPCRBMVhOIDFKuAIi20BgKCWgi1NK0P5KVixVBBHpeKCEpBWMqzRaxK7wDarou9v+6/uzrz
Z87Ze87ZZ59jbbk+wN5DQm7DBCRB2cNs2B0IRQHBawHMhiCIaW29SokhFE4SngiFuQOYy3UBHioZ
4LgADuTOcXWHXZnWYBWp0ChxWRgF7NBlkyQhjoYhmBwEKPDtSASbJnnjBIUTsr8iB9sEvw98CJTN
hGEgwVEKbMNkOMF0GFflQ0hJwJ1MS1SKV9B2TBlN6wJ2E0qXAVqnhCTkGiDBpEyHtSSFoxiwe60Z
x/6v5P13cS/5fyic2kigksvXIpF0qwnfXoORSFyueUlAqDARHolN5WzEJhsKMQmuipyK+lCIHEc9
CJkcA9BkCo8W4GpMsh6n0DAgReTR2GQ+kJBgSjlOYOvJaHx8acAehqApmCgMRyMILDoaOE9CGCGZ
Kpp2fUKyg0AoEPv7siZPYgJbj9BOiTSKP8SMkydi+M+YnlSJq0EIRK8Gpon0++pr85ReqwmUlIw7
z3F2AYhSiWiYEF2K4+wMdsEAp1WrAaam53RgEyRF/wIUKioGSEklc/wYXNyAAxalQuTjaebrY6xc
Sap3QcCe6+wEYMjJEXAhKOY/aYEEHqXCfDxpP9xcHbmOE1lUpVRiBDVxdLRBr2IpTm8Bw9QYymxp
IlHe3vAThv2nY1frbp0x+enA8yg0LydfnJfxW/F2x6S2Q+emNd4R2HqvicuFDfo7F4f4Hhsb9B2x
EQv38RvmWY/6NYqmn008G9vfdmeoshoutRbvDiihbj7hzj+YxuDOOGixJ8u3O1io8WS9f1DmGdMp
yODMWd0clpnSv3RLwWwD48ynS+MkgyK7FelXKgPXjh2+965+9HYt1P5Zmqp8rKumONyiyMQkQrzE
sJDc6cWC1900PfmjTbfhY36uZU9t8eXkwhgP7YtvHcSFzVVY3pa+x4zNxpY5N/nxX5xcs2AeJ/zj
jIQ+34jCy/yinMG+ood7dTJDZhCySFR+RfV7aHECC7Vtz5qvSrtfpB1C36mHZng7vptTUlHuMee7
D7sPuZm3Vs9ZZ+ECj6SUmbW2ZI8mjnGWu5apOiysEkLvv/d1o2XE46OjHyxacDx1QflOXXPQ+Y5e
7teJ3ILWiq67s3qkPxNxDikLbqgLGwLF3UUln2r63KJuFzKdhTMrVzHu5rHqQ2/026StENcVhGuV
Ra2bmorQkUc/q9b4mFGtHwQlvzls/KWiwk93ZvHyR56RM+SznuwoL3HKOWZ+SACZ/ZRTGK3KeDu4
NtA387aJ34aTF1z8Am0hxNRqK+HfuKO3zZxKPd64vG4YZpf2P9YM1WYevp7Qu1J3XEaWVp178dT1
819FWd8GvTjJy82nZrMeCt+8QNZlRzl9f9nOK43hxpJuze7PNbbuVx5IyDQPkQ9ozmRtUG4pIT+6
e0TLqnb63b3+FJ/H+kT4Rf6DXbxzma49/uvYVsUunURSbfwj09jELg01UuMrWXLNKZWX5ys56tob
0J4YP+/IN1VDuqPzWq5Ww4fSuV4X9IkNIT1Ni04cNRiml4Wor9wYnv7PxdTtJCJc4O+1/8hV+ROF
1fWt0MxpRq8LIXuuJ9t8efXF5uSRiFIr9Q/tni4DLMi/0VO+u3HgaeUb55an6k8/M/HTWsH3n204
toy1GMSfjpeLt5tY9jVtao5igoT0rCNuv+Hr4uPYaelxKazOf3hqbymasnOTvBoY4s7I8+kXL4Vu
3PjNqblNxnb+nfuXgmdZBTwOHK2yGzzubuOvXpa++o3vLAzbrI/lXpsbPw2p68l4K+hZwcKuK7Kn
NdiAs119TfqPliuGWpx+zVNMr9n91XPhibrz5azgMUd9Z7myv/mJb9ym842J5FjxYFDqnuF7G5im
FVt0O43xVYO8i3z9fmWr7ittyYcP0j/ncQf25TxjmBclxRl7d1bzYwPyY4qRxV2CoIJLbdqGGzf1
Bd11Z4XlxsqoHV7/Gmxe6qjpT6pSLInbdy0z6HlprdnCoX1tqv7CvZ3mMWVnRQ+1K3xrvevdBubr
Tn2yp3fuqs6R69LatzpqygoUll63bBnSRwcD8j/Sg1uW9aH2yYe/X+KfHeY9bMG7N9Pmy4rn9QWz
f8hhpBjNTgGOvWk04B14Gmr7oIMdFfkQ+h8f5t8F/i8KoHIMUVJkJKKMYP4bSF+g6GVuZHN0cmVh
bQplbmRvYmoKMjUgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9FbmNvZGlu
ZyAzOSAwIFIKL0ZpcnN0Q2hhciA2OAovTGFzdENoYXIgNjgKL1dpZHRocyA0MCAwIFIKL0Jhc2VG
b250IC9GTUZWUksrTVRTWU4KL0ZvbnREZXNjcmlwdG9yIDIzIDAgUgo+PiBlbmRvYmoKMjMgMCBv
YmogPDwKL0FzY2VudCA2NjcKL0NhcEhlaWdodCAzNjIKL0Rlc2NlbnQgLTkwCi9Gb250TmFtZSAv
Rk1GVlJLK01UU1lOCi9JdGFsaWNBbmdsZSAwCi9TdGVtViA1MAovWEhlaWdodCA0NjAKL0ZvbnRC
Qm94IFswIC05NTQgMTA0MyA5MDBdCi9GbGFncyA0Ci9DaGFyU2V0ICgvZXF1YWwpCi9Gb250Rmls
ZSAyNCAwIFIKPj4gZW5kb2JqCjQwIDAgb2JqCls3ODAgXQplbmRvYmoKMzkgMCBvYmogPDwKL1R5
cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAgLy5ub3RkZWYgNjgvZXF1YWwgNjkvLm5vdGRl
Zl0KPj4gZW5kb2JqCjQxIDAgb2JqIDw8Ci9UeXBlIC9FbmNvZGluZwovRGlmZmVyZW5jZXMgWyAw
IC8ubm90ZGVmIDEvZG90YWNjZW50L2ZpL2ZsL2ZyYWN0aW9uL2h1bmdhcnVtbGF1dC9Mc2xhc2gv
bHNsYXNoL29nb25lay9yaW5nIDEwLy5ub3RkZWYgMTEvYnJldmUvbWludXMgMTMvLm5vdGRlZiAx
NC9aY2Fyb24vemNhcm9uL2Nhcm9uL2RvdGxlc3NpL2RvdGxlc3NqL2ZmL2ZmaS9mZmwgMjIvLm5v
dGRlZiAzMC9ncmF2ZS9xdW90ZXNpbmdsZS9zcGFjZS9leGNsYW0vcXVvdGVkYmwvbnVtYmVyc2ln
bi9kb2xsYXIvcGVyY2VudC9hbXBlcnNhbmQvcXVvdGVyaWdodC9wYXJlbmxlZnQvcGFyZW5yaWdo
dC9hc3Rlcmlzay9wbHVzL2NvbW1hL2h5cGhlbi9wZXJpb2Qvc2xhc2gvemVyby9vbmUvdHdvL3Ro
cmVlL2ZvdXIvZml2ZS9zaXgvc2V2ZW4vZWlnaHQvbmluZS9jb2xvbi9zZW1pY29sb24vbGVzcy9l
cXVhbC9ncmVhdGVyL3F1ZXN0aW9uL2F0L0EvQi9DL0QvRS9GL0cvSC9JL0ovSy9ML00vTi9PL1Av
US9SL1MvVC9VL1YvVy9YL1kvWi9icmFja2V0bGVmdC9iYWNrc2xhc2gvYnJhY2tldHJpZ2h0L2Fz
Y2lpY2lyY3VtL3VuZGVyc2NvcmUvcXVvdGVsZWZ0L2EvYi9jL2QvZS9mL2cvaC9pL2ovay9sL20v
bi9vL3AvcS9yL3MvdC91L3Yvdy94L3kvei9icmFjZWxlZnQvYmFyL2JyYWNlcmlnaHQvYXNjaWl0
aWxkZSAxMjcvLm5vdGRlZiAxMzAvcXVvdGVzaW5nbGJhc2UvZmxvcmluL3F1b3RlZGJsYmFzZS9l
bGxpcHNpcy9kYWdnZXIvZGFnZ2VyZGJsL2NpcmN1bWZsZXgvcGVydGhvdXNhbmQvU2Nhcm9uL2d1
aWxzaW5nbGxlZnQvT0UgMTQxLy5ub3RkZWYgMTQ3L3F1b3RlZGJsbGVmdC9xdW90ZWRibHJpZ2h0
L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNpbmdscmln
aHQvb2UgMTU3Ly5ub3RkZWYgMTU5L1lkaWVyZXNpcyAxNjAvLm5vdGRlZiAxNjEvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L2h5cGhlbi9yZWdp
c3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJpb3Iv
YWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Ivb3Jk
bWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0ZXJz
L3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVzaXMv
QXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMvSWdy
YXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2FjdXRl
L09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9VYWN1
dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2ZS9h
YWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9lZ3Jh
dmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1mbGV4
L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRlL29k
aWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJlc2lz
L3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoyMiAwIG9iaiA8PAovVHlwZSAvRm9u
dAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQxIDAgUgovQmFzZUZvbnQgL1RpbWVzLUl0YWxp
Ywo+PiBlbmRvYmoKNDIgMCBvYmogPDwKL1R5cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAg
Ly5ub3RkZWYgMS91bmkyMEFDIDIvLm5vdGRlZiA0L2ZyYWN0aW9uL2RvdGFjY2VudC9odW5nYXJ1
bWxhdXQvb2dvbmVrL2ZsIDkvLm5vdGRlZiAxMC9jd20vZmYvZmkgMTMvLm5vdGRlZiAxNC9mZmkv
ZmZsL2RvdGxlc3NpL2RvdGxlc3NqL2dyYXZlL2FjdXRlL2Nhcm9uL2JyZXZlL21hY3Jvbi9yaW5n
L2NlZGlsbGEvZ2VybWFuZGJscy9hZS9vZS9vc2xhc2gvQUUvT0UvT3NsYXNoL3NwYWNlL2V4Y2xh
bS9xdW90ZWRibC9udW1iZXJzaWduL2RvbGxhci9wZXJjZW50L2FtcGVyc2FuZC9xdW90ZXJpZ2h0
L3BhcmVubGVmdC9wYXJlbnJpZ2h0L2FzdGVyaXNrL3BsdXMvY29tbWEvaHlwaGVuL3BlcmlvZC9z
bGFzaC96ZXJvL29uZS90d28vdGhyZWUvZm91ci9maXZlL3NpeC9zZXZlbi9laWdodC9uaW5lL2Nv
bG9uL3NlbWljb2xvbi9sZXNzL2VxdWFsL2dyZWF0ZXIvcXVlc3Rpb24vYXQvQS9CL0MvRC9FL0Yv
Ry9IL0kvSi9LL0wvTS9OL08vUC9RL1IvUy9UL1UvVi9XL1gvWS9aL2JyYWNrZXRsZWZ0L2JhY2tz
bGFzaC9icmFja2V0cmlnaHQvY2lyY3VtZmxleC91bmRlcnNjb3JlL3F1b3RlbGVmdC9hL2IvYy9k
L2UvZi9nL2gvaS9qL2svbC9tL24vby9wL3Evci9zL3QvdS92L3cveC95L3ovYnJhY2VsZWZ0L2Jh
ci9icmFjZXJpZ2h0L3RpbGRlL2RpZXJlc2lzL0xzbGFzaC9xdW90ZXNpbmdsZS9xdW90ZXNpbmds
YmFzZS9mbG9yaW4vcXVvdGVkYmxiYXNlL2VsbGlwc2lzL2RhZ2dlci9kYWdnZXJkYmwvY2lyY3Vt
ZmxleC9wZXJ0aG91c2FuZC9TY2Fyb24vZ3VpbHNpbmdsbGVmdC9PRS9aY2Fyb24vYXNjaWljaXJj
dW0vbWludXMvbHNsYXNoL3F1b3RlbGVmdC9xdW90ZXJpZ2h0L3F1b3RlZGJsbGVmdC9xdW90ZWRi
bHJpZ2h0L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNp
bmdscmlnaHQvb2UvemNhcm9uL2FzY2lpdGlsZGUvWWRpZXJlc2lzL25ic3BhY2UvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L3NmdGh5cGhlbi9y
ZWdpc3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJp
b3IvYWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Iv
b3JkbWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0
ZXJzL3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVz
aXMvQXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMv
SWdyYXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2Fj
dXRlL09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9V
YWN1dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2
ZS9hYWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9l
Z3JhdmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1m
bGV4L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRl
L29kaWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJl
c2lzL3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoxNyAwIG9iaiA8PAovVHlwZSAv
Rm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZvbnQgL0NvdXJpZXIK
Pj4gZW5kb2JqCjExIDAgb2JqIDw8Ci9UeXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2Rp
bmcgNDIgMCBSCi9CYXNlRm9udCAvVGltZXMtSXRhbGljCj4+IGVuZG9iago5IDAgb2JqIDw8Ci9U
eXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2RpbmcgNDEgMCBSCi9CYXNlRm9udCAvVGlt
ZXMtUm9tYW4KPj4gZW5kb2JqCjcgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUx
Ci9FbmNvZGluZyA0MiAwIFIKL0Jhc2VGb250IC9UaW1lcy1Sb21hbgo+PiBlbmRvYmoKNSAwIG9i
aiA8PAovVHlwZSAvRm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZv
bnQgL1RpbWVzLUJvbGQKPj4gZW5kb2JqCjEyIDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQg
NgovUGFyZW50IDQzIDAgUgovS2lkcyBbMiAwIFIgMTQgMCBSIDE5IDAgUiAyNyAwIFIgMzAgMCBS
IDMzIDAgUl0KPj4gZW5kb2JqCjM4IDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQgMQovUGFy
ZW50IDQzIDAgUgovS2lkcyBbMzYgMCBSXQo+PiBlbmRvYmoKNDMgMCBvYmogPDwKL1R5cGUgL1Bh
Z2VzCi9Db3VudCA3Ci9LaWRzIFsxMiAwIFIgMzggMCBSXQo+PiBlbmRvYmoKNDQgMCBvYmogPDwK
L1R5cGUgL0NhdGFsb2cKL1BhZ2VzIDQzIDAgUgo+PiBlbmRvYmoKNDUgMCBvYmogPDwKL1Byb2R1
Y2VyIChwZGZUZVgtMC4xNGgpCi9DcmVhdG9yIChUZVgpCi9DcmVhdGlvbkRhdGUgKEQ6MjAwMjAy
MDgwNDU5MDApCj4+IGVuZG9iagp4cmVmCjAgNDYKMDAwMDAwMDAwNCA2NTUzNSBmIAowMDAwMDAx
NTcyIDAwMDAwIG4gCjAwMDAwMDE0NjcgMDAwMDAgbiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAw
MDAwMDA2IDAwMDAwIGYgCjAwMDAwMTQyNDQgMDAwMDAgbiAKMDAwMDAwMDAwOCAwMDAwMCBmIAow
MDAwMDE0MTU1IDAwMDAwIG4gCjAwMDAwMDAwMTAgMDAwMDAgZiAKMDAwMDAxNDA2NiAwMDAwMCBu
IAowMDAwMDAwMDE2IDAwMDAwIGYgCjAwMDAwMTM5NzUgMDAwMDAgbiAKMDAwMDAxNDMzMiAwMDAw
MCBuIAowMDAwMDAyNDU2IDAwMDAwIG4gCjAwMDAwMDIzNDggMDAwMDAgbiAKMDAwMDAwMTY3NCAw
MDAwMCBuIAowMDAwMDAwMDIxIDAwMDAwIGYgCjAwMDAwMTM4ODkgMDAwMDAgbiAKMDAwMDAwMzQx
MyAwMDAwMCBuIAowMDAwMDAzMzA1IDAwMDAwIG4gCjAwMDAwMDI1NTkgMDAwMDAgbiAKMDAwMDAw
MDAwMCAwMDAwMCBmIAowMDAwMDExOTQ4IDAwMDAwIG4gCjAwMDAwMDk4NTUgMDAwMDAgbiAKMDAw
MDAwNzg5NSAwMDAwMCBuIAowMDAwMDA5Njk5IDAwMDAwIG4gCjAwMDAwMDQzMjcgMDAwMDAgbiAK
MDAwMDAwNDIxOSAwMDAwMCBuIAowMDAwMDAzNTMwIDAwMDAwIG4gCjAwMDAwMDUxNDcgMDAwMDAg
biAKMDAwMDAwNTAzOSAwMDAwMCBuIAowMDAwMDA0NDMwIDAwMDAwIG4gCjAwMDAwMDcwMzEgMDAw
MDAgbiAKMDAwMDAwNjkyMyAwMDAwMCBuIAowMDAwMDA1MjM5IDAwMDAwIG4gCjAwMDAwMDc3OTEg
MDAwMDAgbiAKMDAwMDAwNzY4MyAwMDAwMCBuIAowMDAwMDA3MTIzIDAwMDAwIG4gCjAwMDAwMTQ0
NDAgMDAwMDAgbiAKMDAwMDAxMDA3NCAwMDAwMCBuIAowMDAwMDEwMDUxIDAwMDAwIG4gCjAwMDAw
MTAxNTkgMDAwMDAgbiAKMDAwMDAxMjAzOSAwMDAwMCBuIAowMDAwMDE0NTE0IDAwMDAwIG4gCjAw
MDAwMTQ1ODAgMDAwMDAgbiAKMDAwMDAxNDYzMSAwMDAwMCBuIAp0cmFpbGVyCjw8Ci9TaXplIDQ2
Ci9Sb290IDQ0IDAgUgovSW5mbyA0NSAwIFIKPj4Kc3RhcnR4cmVmCjE0NzI2CiUlRU9GCg==

--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed



===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

--Apple-Mail-1-507788993--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 08:30:16 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Feb 2002 08:30:16 +0000 (GMT Standard Time)
Subject: [Rd] timing Mac R's
In-Reply-To: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.WNT.4.44.0202080820010.716-100000@tern.stats>

On Fri, 8 Feb 2002, Jan de Leeuw wrote:

> Here is the same thing as before, now done a bit more systematically. The
> rather bad performance of R-patched on eigen is a mystery (to me), the
> gain
> in La.eigen when using ATLAS is probably not Altivec, but using
> threaded level 3 BLAS on a dual processor machine.

Well, it's almost entirely in the algorithm used in LAPACK.  There is no
single precision used.  DSYEVR was designed as `the holy grail' for that
problem, and it uses level 3 BLAS much better than its predecessors.
I see an 8x speed up on my PIII Linux box on your tests (and the ATLAS
there is only using one processor to keep the build portable).

My guess (and only a guess) is that you have an alignment problem. I am
pretty sure there is no change in the internal code across the versions you
used, but some compilers and chips will run code much faster with certain
alignments than others. Sparc for example needs -dalign under it's native
compiler, and without that (which used to be necessary under S-PLUS) there
could be performance changes of this nature under very small code changes.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  8 13:27:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 8 Feb 2002 14:27:14 +0100 (MET)
Subject: [Rd] interaction.plot (with misplaced legend) (PR#1305)
Message-ID: <200202081327.OAA12329@pubhealth.ku.dk>

Kaiya Liu wrote:
> 
> Hi,
> 
> I encountered a problem when I did interaction plots using the
> interaction.plot() function. The labels for the trace factor appeared on
> the plot when I did the plots in separate windows, but disappeared/cut off
> when multiple plots were placed in one window. Can anybody help me?

>From the example of ?interaction.plot:

 data(ToothGrowth)
 attach(ToothGrowth)
 interaction.plot(dose, supp, len, fixed=TRUE) # OK

But the following looks quite ugly:

 par(mfrow=c(1,2))
 interaction.plot(dose, supp, len, fixed=TRUE)
 interaction.plot(dose, supp, len, fixed=TRUE)

 par(mfrow=c(2,2))
 interaction.plot(dose, supp, len, fixed=TRUE)



There is not only a problem with the legend, also the magnification of
the axis annotation is not homogeneous, because for the x-axis
annotation mtext() is used. I'd suggest to change line 35:
  mtext(xlabs, 1, at = xvals) # old
to
  axis(1, at = xvals, labels = xlabs, ...) # new
   

Uwe Ligges

===============
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 13:27:59 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 8 Feb 2002 13:27:59 +0000 (GMT)
Subject: [Rd] Cross-compiling to Windows
Message-ID: <Pine.LNX.4.31.0202081322220.2328-100000@gannet.stats>

I have built a new Linux->mingw32 cross-compiler using the equivalent of
MinGW-1.1 updated by the latest header files.  Links are on the Rtools
portal.  I've tested it as far as cross-compiling R-devel and running some
tests.  There were several cross-compilers I found on the Web, but all
lacked Fortran support.

If you are upgrading, beware that this is mingw32- and not
i386-mingw32msvc-, so MkRules will need to be changed.  (Also, beware that
HEADERS there must be correct: if wrong compilation may succeed but use
the Linux headers.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Feb 11 06:46:21 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 11 Feb 2002 07:46:21 +0100 (MET)
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
Message-ID: <200202110646.HAA18810@pubhealth.ku.dk>

I just downloaded rw1041 (the latest windows binary).  Everything installed
fine.  

When I start a new Rgui, and type "demo(graphics)", after pressing
return to start, a graphics window appears.  When I get to the second
prompt:

  > opar <- c(opar, par(bg = "white"))
  > plot(x, ann = FALSE, type = "n")
  Hit <Return> to see next plot: 

at this point, the cursor is an hourglass and just waits -- nothing is
drawn into the graphics window.  This is repeatable on both a Win 98
and Win 2000 ME setup.

However, if after starting a new Rgui, I first do
> hist(rnorm(100))
> demo(graphics)
then both the histogram and the subsequent graphics demo work fine.

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Feb 11 07:44:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Feb 2002 08:44:07 +0100
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
In-Reply-To: <200202110646.HAA18810@pubhealth.ku.dk>
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <x2heoolayg.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.  
> 
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
> 
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot: 
> 
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

??

This *has* been tried before, y'know... Did you remember to click the
text window to give it keyboard focus?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Feb 11 11:02:58 2002
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 11 Feb 2002 06:02:58 -0500
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <3C67A4E1.4C857EA8@epm.net.co>

This is a multi-part message in MIME format.
--------------CC6F2641AA04ACFC35187237
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7Bit



eglen@pcg.wustl.edu wrote:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.
>
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
>
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot:

There is no problem at all!



>
>
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

Just go to the R Console window and "Hit <Return> to see next plot:"

If you want to see the R Console windows and the R Graphics at the same time,
tile them with the Tile option on the Windows bar menu options.

>
>
> However, if after starting a new Rgui, I first do
> > hist(rnorm(100))
> > demo(graphics)
> then both the histogram and the subsequent graphics demo work fine.
>
> Stephen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------CC6F2641AA04ACFC35187237
Content-Type: text/x-vcard; charset=us-ascii;
 name="krcabrer.vcf"
Content-Description: Card for Kenneth Cabrera
Content-Disposition: attachment;
 filename="krcabrer.vcf"
Content-Transfer-Encoding: 7Bit

begin:vcard 
n:Cabrera;Kenneth
tel;cell:504 0339
tel;work:4309317
x-mozilla-html:FALSE
org:Universidad Nacional de Colombia;ICNE
adr:;;A.A. 3840;Medellín;Antioquia;00000;Colombia
version:2.1
email;internet:krcabrer@epm.net.co
title:Profesor
fn:Kenneth Cabrera
end:vcard

--------------CC6F2641AA04ACFC35187237--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Wed Feb 13 13:47:04 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Wed, 13 Feb 2002 14:47:04 +0100 (MET)
Subject: [Rd] Re: identify(...plot=F) (PR#1157)
Message-ID: <200202131347.OAA08062@pubhealth.ku.dk>


Thanks very much for your email and for fixing the mild bug
in identify().

Can you tell me, is it fixed in R 1.4.1 (which I have not yet installed;
we're still running R 1.4.0) or do I need to get ``R.patched''
(or whatever it's called)?

					cheers,

						Rolf

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Feb 14 02:41:16 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 13 Feb 2002 18:41:16 -0800
Subject: [Rd] R-patched and R-devel
Message-ID: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>

If I configure in R-patched and R-devel, with the same options to
configure, then R-patched says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm_ in -lf77blas... yes

which R-devel says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm in -lf77blas... no

This is on the same computer and using the same libraries. Observe
in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
what is intended ?

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stevelyn@mediaone.net  Thu Feb 14 02:45:14 2002
From: stevelyn@mediaone.net (stevelyn@mediaone.net)
Date: Thu, 14 Feb 2002 03:45:14 +0100 (MET)
Subject: [Rd] Command History (PR#1310)
Message-ID: <200202140245.DAA10700@pubhealth.ku.dk>

Greetings,

I don't know if this is a bug or something I did wrong. The symptom is that 
my command history is now broken. For example, the up arrow now results in 
^[OA each time it is depressed.

The build commands I used were as follows:

cp R-1.4.1.tgz /usr/lib/R
cd /usr/lib/R
tar -xvvzf R-1.4.1.tgz
cd R-1.4.1
./configure
make
make check	# No errors resulted
make dvi
make pdf
make info
make install
make install-dvi
make install-pdf
make install-info
rehash		# An alias for hash -r

A previous version of R I was using (1.3.0) was installed in a different tree 
and is no longer in use (the R script points to the new tree). I am running 
SuSE 7.3, and the former version of R did not have this problem.

Please let me know if this is a bug or if I've done something wrong.

Thanks & Best Regards,
Steve

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Feb 14 03:25:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 13 Feb 2002 21:25:58 -0600
Subject: [Rd] Command History (PR#1310)
In-Reply-To: <200202140245.DAA10700@pubhealth.ku.dk>
References: <200202140245.DAA10700@pubhealth.ku.dk>
Message-ID: <20020214032558.GA6646@sonny.eddelbuettel.com>

On Thu, Feb 14, 2002 at 03:45:14AM +0100, stevelyn@mediaone.net wrote:
[...]
> ./configure
[...]

You missed the notice about readline support.

> Please let me know if this is a bug or if I've done something wrong.

Make sure that -dev version of your distributions readline package is
installed, and found by R.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 07:16:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 08:16:28 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <15467.25676.681887.923785@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes

> which R-devel says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no

> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Don't think so :-)

The code in r-devel runs the BLAS tests before it has figure out the
characteristics of the Fortran compiler.  Argh.  Will fix.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 14 07:51:23 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 14 Feb 2002 07:51:23 +0000 (GMT)
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>

On Wed, 13 Feb 2002, Jan de Leeuw wrote:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes
>
> which R-devel says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no
>
> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Confirmed here. It seems related to the change to autoconf 2.5x,
but it is not working as intended.  The configure code has

if test "${r_cv_prog_f77_append_underscore}" = yes \
  || test -n "${F2C}"; then
  dgemm_func=dgemm_
else
  dgemm_func=dgemm
fi
...
    AC_CHECK_LIB(f77blas, $dgemm_func,
                 BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

and r_cv_prog_f77_append_underscore is being set correctly, but only later
in the configure.  I think that comes from following the autoconf
recommended order of tests (libraries, headers, ...), but we need an
exception here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 08:45:43 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 09:45:43 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
 <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
Message-ID: <15467.31031.226217.928717@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 13 Feb 2002, Jan de Leeuw wrote:
>> If I configure in R-patched and R-devel, with the same options to
>> configure, then R-patched says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm_ in -lf77blas... yes
>> 
>> which R-devel says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm in -lf77blas... no
>> 
>> This is on the same computer and using the same libraries. Observe
>> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
>> what is intended ?

> Confirmed here. It seems related to the change to autoconf 2.5x,
> but it is not working as intended.  The configure code has

> if test "${r_cv_prog_f77_append_underscore}" = yes \
>   || test -n "${F2C}"; then
>   dgemm_func=dgemm_
> else
>   dgemm_func=dgemm
> fi
> ...
>     AC_CHECK_LIB(f77blas, $dgemm_func,
>                  BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

> and r_cv_prog_f77_append_underscore is being set correctly, but only
> later in the configure.  I think that comes from following the
> autoconf recommended order of tests (libraries, headers, ...), but we
> need an exception here.

Right.  The recipe has

     checks for programs
     checks for libraries
     checks for header files
     checks for types
     checks for structures
     checks for compiler characteristics
     checks for library functions

and this is mostly based on the idea that everything happens in C.  Will
move the BLAS tests to section library functions.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Feb 14 22:29:11 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Feb 2002 23:29:11 +0100 (MET)
Subject: [Rd] Makeconf problem (PR#1311)
Message-ID: <200202142229.XAA17547@pubhealth.ku.dk>

Full_Name: Byron Ellis
Version: 1.5.0
OS: Solaris 2.8
Submission from: (NULL) (140.247.27.60)


the INSTALL variable gets set to tools/install-sh, I'm guessing it should
actually be set to $(top_srcdir)/tools/install-sh

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Feb 15 10:33:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 15 Feb 2002 11:33:18 +0100
Subject: [Rd] Makeconf problem (PR#1311)
In-Reply-To: <200202142229.XAA17547@pubhealth.ku.dk>
References: <200202142229.XAA17547@pubhealth.ku.dk>
Message-ID: <15468.58350.693889.850281@mithrandir.hornik.net>

>>>>> bellis  writes:

> Full_Name: Byron Ellis
> Version: 1.5.0
> OS: Solaris 2.8
> Submission from: (NULL) (140.247.27.60)

> the INSTALL variable gets set to tools/install-sh, I'm guessing it
> should actually be set to $(top_srcdir)/tools/install-sh

Thanks for catching this.  Apparently I only tried the effect of using
just AC_PROG_INSTALL with srcdir != builddir.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 15:16:44 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 10:16:44 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0201301150260.117500-100000@homer04.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>

On Wed, 30 Jan 2002, Thomas Lumley wrote:

> I've just compiled R 1.4.1 on AIX 4.3 with
>
> bash% CC=cc FC=f77 ./configure
> bash% make
>
> It all seems to work (I'm running make check, but the computer is very
> slow).

I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
I still have problems.  If I could bother you a bit more, I'd like to
compare some notes.

My environment is as follows:

    RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
	calls it "powerpc-ibm-aix4.3.3.0"
    IBM C for AIX Compiler 5.0.2.2
    IBM XL Fortran Compiler 7.1.1.1
    Perl 5.005 patch 03
    makeinfo 4.0
    readline 4.2
    zlib 1.1.3
    libjpeg 6b
    libpng 1.2.0
    tcl/tk 8.3.3
    GNU make 3.79.1

This is what I started with in my config.site file:

    R_PAPERSIZE=letter
    CC=cc
    CFLAGS="-g"
    FC=f77
    CXX=g++
    MAKE=/opt/freeware/bin/make

I originally configured with "configure --enable-R-shlib" (because my
R user thought he needed it), and I gradually concluded that this was
causing lots of my problems, so I dropped it.  Now I just use "configure"
with no options.

R now runs (sort of).  It still coredumps on exit with segmentation
faults.  Sometimes it also coredumps during operation with an illegal
instruction fault.  I did run through "make check" using the expedient
of hacking the Makefiles to ignore exit errors, so it would plow ahead
even after getting the exit coredumps, and it looks like it got through
all the tests.

My user also wanted to install the Rggobi package into R, which I've
done.  Ggobi itself seems to work fine, but when I type the "ggobi"
command in R, I get an illegal instruction coredump.  Not sure if that's
an R problem or a Ggobi problem.

Do you see anything in my environment that is "wrong"?  What level of
AIX (version and maintenance level) are you building on?  What model of
RS/6000?

Thanks for your time.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Feb 15 19:12:54 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Feb 2002 11:12:54 -0800 (PST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>

On Fri, 15 Feb 2002, Dan Million wrote:

> On Wed, 30 Jan 2002, Thomas Lumley wrote:
>
> > I've just compiled R 1.4.1 on AIX 4.3 with
> >
> > bash% CC=cc FC=f77 ./configure
> > bash% make
> >
> > It all seems to work (I'm running make check, but the computer is very
> > slow).
>
> I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
> I still have problems.  If I could bother you a bit more, I'd like to
> compare some notes.
>
> My environment is as follows:
>
>     RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
> 	calls it "powerpc-ibm-aix4.3.3.0"
>     IBM C for AIX Compiler 5.0.2.2
>     IBM XL Fortran Compiler 7.1.1.1
>     Perl 5.005 patch 03
>     makeinfo 4.0
>     readline 4.2
>     zlib 1.1.3
>     libjpeg 6b
>     libpng 1.2.0
>     tcl/tk 8.3.3
>     GNU make 3.79.1
>
> This is what I started with in my config.site file:
>
>     R_PAPERSIZE=letter
>     CC=cc
>     CFLAGS="-g"
>     FC=f77
>     CXX=g++
>     MAKE=/opt/freeware/bin/make
>

That all looks reasonable. I've got Perl 5.6.0, but Perl isn't needed at
runtime. I don't have makeinfo or readline. I don't know if g++ is
compatible with the C and Fortran compilers but there isn't any C++ in the
base R.

>
> Do you see anything in my environment that is "wrong"?  What level of
> AIX (version and maintenance level) are you building on?  What model of
> RS/6000?

Some of this I'll need to get from our administrators.

It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
7015/R24.
lslpp  -L suggests that the versions of various components of AIX are
mostly 4.3.3.10 or 4.3.3.25

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 19:47:19 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 14:47:19 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>

On Fri, 15 Feb 2002, Thomas Lumley wrote:

> > Do you see anything in my environment that is "wrong"?  What level of
> > AIX (version and maintenance level) are you building on?  What model of
> > RS/6000?
>
> Some of this I'll need to get from our administrators.
>
> It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
> 7015/R24.
> lslpp  -L suggests that the versions of various components of AIX are
> mostly 4.3.3.10 or 4.3.3.25

Yes, it sounds like you're running on pretty old hardware, and using a
fairly back-level version of AIX 4.3.3.  Maintenance level 2 or 3 maybe.
I'm afraid that IBM has introduced so much new stuff (including bugs) in
some of the recent maintenance level patches that we're probably comparing
apples and oranges here.

If you're interested, you can get the maintenance level by typing:

	instfix -i | grep ML

and look at the last line printed, which should look something like:

	All filesets for 4330-03_AIX_ML were found.

indicating that the machine is at ML03.

By the way, my user has emphasized that they really need the R shared
library.  And if I build with --enable-R-shlib, then chunks of R simply
don't work at all (like the X11 support).  Ah well....

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ckhung@cyut.edu.tw  Sat Feb 16 00:35:27 2002
From: ckhung@cyut.edu.tw (ckhung@cyut.edu.tw)
Date: Sat, 16 Feb 2002 01:35:27 +0100 (MET)
Subject: [Rd] latitude <-> longitude in quake.tab (PR#1312)
Message-ID: <200202160035.BAA23321@pubhealth.ku.dk>

Full_Name: Chao-Kuei Hung
Version: 1.3.1
OS: RedHat Linux 7.0
Submission from: (NULL) (163.32.17.245)


Dear all,

I checked a world map and realized that Tonga Trench lies
near 20S176W, i.e. latitude -20, longitude 184. The labels
in the file library/base/data/quakes.tab got latitude
and longitude mixed up. (Latitudes should always be within
+-90 anyway :-) Thanks for your attention.

BTW, it would be nice if there are more real-world sample
data files with categorical data

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sat Feb 16 04:27:29 2002
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Sat, 16 Feb 2002 05:27:29 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160427.FAA23581@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.4.1
OS: redhat 7.1
Submission from: (NULL) (128.252.204.36)


Hi, the top of the file
R-1.4.1/src/gnuwin32/readme

looks like:

R @RVER@ for Windows
===================

and further down, this @RVER@ is repeated, e.g. in section 3:

3) The full distribution consists of several zip files:

@RWVER@b.zip				the base system
@RWVER@h.zip				text help
...
Is this intentional?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 16 08:02:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Feb 2002 09:02:00 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160802.JAA23780@pubhealth.ku.dk>

On Sat, 16 Feb 2002 stephen@cogsci.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.4.1
> OS: redhat 7.1
> Submission from: (NULL) (128.252.204.36)
>
>
> Hi, the top of the file
> R-1.4.1/src/gnuwin32/readme
>
> looks like:
>
> R @RVER@ for Windows
> ===================
>
> and further down, this @RVER@ is repeated, e.g. in section 3:
>
> 3) The full distribution consists of several zip files:
>
> @RWVER@b.zip				the base system
> @RWVER@h.zip				text help
> ...
> Is this intentional?

Yes. Lots of source files are processed prior to installation.

rw1041/README does not have @RVER@ in it.

Submitting incorrect bug reports does add to the work of the volunteer
team, so please do read the BUGS section in the FAQ carefully.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jzacks@artsci.wustl.edu  Sun Feb 17 20:39:11 2002
From: jzacks@artsci.wustl.edu (jzacks@artsci.wustl.edu)
Date: Sun, 17 Feb 2002 21:39:11 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202172039.VAA26668@pubhealth.ku.dk>

Full_Name: Jeff Zacks
Version: 1.4.0
OS: Mac OS X
Submission from: (NULL) (209.16.201.87)


Hi,

I believe there may be a problem with how Error strata are handled in aov, for
designs with multiple error strata involving multiple interactions.  The
following performs the expected repeated-measures ANOVA when called in S-Plus,
gives an error when called in R.

In this example, the design is a simple 2x2x2 repeated-measures design with 2
subjects.

Hope this is helpful.

Best,

Jeff Zacks

> dat <- read.table("foo", header=T)
> dat
   Subj within1 within2 within3 depvar
1     A       0       0       1      1
2     A       0       1       0      2
3     A       1       0       0      3
4     A       0       1       1      4
5     A       1       0       1      5
6     A       1       1       0      6
7     B       0       0       1      2
8     B       0       1       0      3
9     B       1       0       0      4
10    B       0       1       1      5
11    B       1       0       1      6
12    B       1       1       0      7
> summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
Subj:within2:within3), data=dat))
Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :

	object is not a matrix
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 18 09:55:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Feb 2002 10:55:49 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202180955.KAA29237@pubhealth.ku.dk>

On Sun, 17 Feb 2002 jzacks@artsci.wustl.edu wrote:

> Full_Name: Jeff Zacks
> Version: 1.4.0
> OS: Mac OS X
> Submission from: (NULL) (209.16.201.87)
>
>
> Hi,
>
> I believe there may be a problem with how Error strata are handled in aov, for
> designs with multiple error strata involving multiple interactions.  The
> following performs the expected repeated-measures ANOVA when called in S-Plus,
> gives an error when called in R.

The problem is the length of your Error formula.  In aov there is a
line:

eTerm <- deparse(errorterm[[2]])

change it to

eTerm <- deparse(errorterm[[2]], width = 500)

and later

lmcall$formula <- form <- update(formula, paste(". ~ .-",
deparse(errorterm)))

needs to be deparse(errorterm, width=500)

and then correct the formula you gave (there is no withn3, so this cannot
have worked in S-PLUS).

With those corrections I get the same answers as S-PLUS 6.0.

> In this example, the design is a simple 2x2x2 repeated-measures design with 2
> subjects.
>
> Hope this is helpful.
>
> Best,
>
> Jeff Zacks
>
> > dat <- read.table("foo", header=T)
> > dat
>    Subj within1 within2 within3 depvar
> 1     A       0       0       1      1
> 2     A       0       1       0      2
> 3     A       1       0       0      3
> 4     A       0       1       1      4
> 5     A       1       0       1      5
> 6     A       1       1       0      6
> 7     B       0       0       1      2
> 8     B       0       1       0      3
> 9     B       1       0       0      4
> 10    B       0       1       1      5
> 11    B       1       0       1      6
> 12    B       1       1       0      7
> > summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
> Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
> Subj:within2:within3), data=dat))
> Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :
>
> 	object is not a matrix
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Feb 18 17:53:43 2002
From: lio@hpss1.ccs.ornl.gov (lio@hpss1.ccs.ornl.gov)
Date: Mon, 18 Feb 2002 18:53:43 +0100 (MET)
Subject: [Rd] shared libraries on AIX (PR#1316)
Message-ID: <200202181753.SAA04415@pubhealth.ku.dk>

Full_Name: Daniel L. Million
Version: 1.4.1
OS: AIX 4.3.3/5.1
Submission from: (NULL) (160.91.192.125)


R almost works if I build on AIX without the R shared library (except for
crashing
on exit and a few other anomalies).  I can't get it to do much at all if I
build
with --enable-R-shlib.

For example, it won't load the X11 driver.  I ran R in a debugger and traced it
down to the point where R_load_X11_shlib successfully loads the R_X11.so
library
and calls R_init_X11.  This calls R_setX11Routines in src/unix/X11.c.  On entry

to this function, ptr_X11DeviceDriver = 0x2002eb20 and dev = 0x2014ba08.  After
the statement

    ptr_X11DeviceDriver = dev;

is executed, ptr_X11DeviceDriver remains unchanged at 0x2002eb20 !!  So when I
type "X11()" at the R prompt, all I ever get is the stub message, "the x11
device
has not been loaded".

I don't know enough about how shared libraries interact to understand why this
pointer is apparently write-protected.  I'm hoping someone here can give me a
clue.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Feb 19 00:22:59 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 19 Feb 2002 01:22:59 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
Message-ID: <200202190022.BAA05385@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe
Submission from: (NULL) (217.208.14.137)


Doing the following

library(methods)
setGeneric("foo", function(x) standardGeneric("foo"))
setMethod("foo", "ANY", function(x) cat(x))

fails with

Error in while (value[n] == "ANY") n <- n - 1 : 
        missing value where logical needed

It looks like the line

  while (value[n] == "ANY") n <- n - 1

in the source for matchSignature() should be

  while (n > 0 && value[n] == "ANY") n <- n - 1


FYI: I tried my suggested modification at it seems to work.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ottisopt@yahoo.com  Tue Feb 19 06:43:11 2002
From: ottisopt@yahoo.com (ottisopt@yahoo.com)
Date: Tue, 19 Feb 2002 02:43:11 -0400
Subject: [Rd] News Update: Diamond Entertainment Corp.
Message-ID: <B0000011338@wi-poli.poli.cl>

For latest news on Diamond Entertainment Corp. (SYMBOL: DMEC), click this link:




http://finance.yahoo.com/q?s=dmec.ob&d=v1









Disclaimer: The writers of this e-mail do not make specific trading recommendations or give individualized market advice. Information contained in this e-mail is provided as an information service only. It is recommended that you get personal advice from an investment professional before buying or selling stocks or other securities. The securities markets are highly speculative areas for investments and only you can determine what level of risk is appropriate for you.  In no way should this be construed as a recommendation to buy or sell a particular security.

All our mailings are sent complying to the proposed United States Federal requirements for commercial e-mail: Section 301 Paragraph (a)(2)(C) of S. 618. Please see the bottom of this message for further information and removal instructions.

This is not a spam! Your are receiving this email either because, you have sent me and email in the past, or you are on a list of marketers requesting information. If this is not the case, PLEASE accept my sincerest apologies and reply with "remove" in the subject field. I will remove your name immediately!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Feb 19 20:21:05 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 19 Feb 2002 15:21:05 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Fri, 15 Feb 2002 14:47:19 -0500 (EST)"
References: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <px664t1avi.fsf@infiniti.ece.cmu.edu>


Dan,

- have you tried gcc instead of xlc?  It's surprisingly easy to
  install for AIX.
- have you tried to turn off all optimizations (explicitly if needed)?

My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
seen a problem yet.  

> By the way, my user has emphasized that they really need the R shared
> library.  And if I build with --enable-R-shlib, then chunks of R simply
> don't work at all (like the X11 support).  Ah well....

I could try building the shared lib.  But without knowing that you
could switch to gcc, I wouldn't help.  (I can't run xlc).

  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 20:36:01 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 15:36:01 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px664t1avi.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>

On 19 Feb 2002, Thomas Vogels wrote:

> - have you tried gcc instead of xlc?  It's surprisingly easy to
>   install for AIX.
> - have you tried to turn off all optimizations (explicitly if needed)?

I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
objects with IBM XL Fortran objects in the same library.

> My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
> seen a problem yet.
>
> > By the way, my user has emphasized that they really need the R shared
> > library.  And if I build with --enable-R-shlib, then chunks of R simply
> > don't work at all (like the X11 support).  Ah well....
>
> I could try building the shared lib.  But without knowing that you
> could switch to gcc, I wouldn't help.  (I can't run xlc).

I'm finding more and more problems with the R shared library.  I don't
think it's being built correctly at all.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 19 20:43:09 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2002 20:43:09 +0000 (GMT)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>

On Tue, 19 Feb 2002, Dan Million wrote:

> On 19 Feb 2002, Thomas Vogels wrote:
>
> > - have you tried gcc instead of xlc?  It's surprisingly easy to
> >   install for AIX.
> > - have you tried to turn off all optimizations (explicitly if needed)?
>
> I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> objects with IBM XL Fortran objects in the same library.

gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
for evidence.)  You should be able to install the parts you (or someone)
omitted before.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 21:54:25 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 16:54:25 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>
Message-ID: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>

On Tue, 19 Feb 2002, Prof Brian Ripley wrote:

> > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > objects with IBM XL Fortran objects in the same library.
>
> gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> for evidence.)  You should be able to install the parts you (or someone)
> omitted before.

Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
package does not include g77.  I realize I could start all over and get
another gcc package from somewhere else.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Feb 19 23:49:30 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 19 Feb 2002 18:49:30 -0500
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
References: <200202190022.BAA05385@pubhealth.ku.dk>
Message-ID: <3C72E48A.CB993116@research.bell-labs.com>

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: R v1.4.1
> OS: WinMe
> Submission from: (NULL) (217.208.14.137)
> 
> Doing the following
> 
> library(methods)
> setGeneric("foo", function(x) standardGeneric("foo"))
> setMethod("foo", "ANY", function(x) cat(x))
> 
> fails with
> 
> Error in while (value[n] == "ANY") n <- n - 1 :
>         missing value where logical needed
> 
> It looks like the line
> 
>   while (value[n] == "ANY") n <- n - 1
> 
> in the source for matchSignature() should be
> 
>   while (n > 0 && value[n] == "ANY") n <- n - 1
> 
> FYI: I tried my suggested modification at it seems to work.

Yes, thanks, that's correct.

It had been fixed in r-patched and r-devel, but too late for 1.4.1.


> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Wed Feb 20 08:06:34 2002
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Wed, 20 Feb 2002 09:06:34 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
In-Reply-To: <3C72E48A.CB993116@research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10202200857570.21509-100000@speed.maths.lth.se>

Great.

/Henrik


On Tue, 19 Feb 2002, John Chambers wrote:

> hb@maths.lth.se wrote:
> > 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.1
> > OS: WinMe
> > Submission from: (NULL) (217.208.14.137)
> > 
> > Doing the following
> > 
> > library(methods)
> > setGeneric("foo", function(x) standardGeneric("foo"))
> > setMethod("foo", "ANY", function(x) cat(x))
> > 
> > fails with
> > 
> > Error in while (value[n] == "ANY") n <- n - 1 :
> >         missing value where logical needed
> > 
> > It looks like the line
> > 
> >   while (value[n] == "ANY") n <- n - 1
> > 
> > in the source for matchSignature() should be
> > 
> >   while (n > 0 && value[n] == "ANY") n <- n - 1
> > 
> > FYI: I tried my suggested modification at it seems to work.
> 
> Yes, thanks, that's correct.
> 
> It had been fixed in r-patched and r-devel, but too late for 1.4.1.
> 
> 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 09:54:16 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 10:54:16 +0100
Subject: [Rd] f2c problem
Message-ID: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>

In building princurve package for MacOS I need to use f2c on fortran 
files.

Here is the output of f2c for getlam.f

getlam.f:
    getlam:
    newlam:
    lamix:
Error on line 116 of getlam.f: Declaration error for v: adjustable 
dimension on non-argument
Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size

what I found strange is that both newlam and get lam have definitions 
like


  subroutine newlam(n,p,sx,lambda,tag)
       integer n,p,tag(n)
       double precision sx(n,p),lambda(n),lami


but for some reason f2c complains only with the last lamix subroutine

   subroutine lamix(ns,p,x,s,lambda,dismin,temps)
       integer ns,p
       double precision lambda,x(p),s(ns,p),dismin,temps(p)
       double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w

probably because v is not passed as an argument.

Any idea on how to manage this in f2c ?

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Feb 20 10:27:46 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 20 Feb 2002 11:27:46 +0100 (CET)
Subject: [Rd] f2c problem
In-Reply-To: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>
Message-ID: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> In building princurve package for MacOS I need to use f2c on fortran 
> files.
> 
> Here is the output of f2c for getlam.f
> 
> getlam.f:
>     getlam:
>     newlam:
>     lamix:
> Error on line 116 of getlam.f: Declaration error for v: adjustable 
> dimension on non-argument
> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
> 
> what I found strange is that both newlam and get lam have definitions 
> like
> 
> 
>   subroutine newlam(n,p,sx,lambda,tag)
>        integer n,p,tag(n)
>        double precision sx(n,p),lambda(n),lami
> 
> 
> but for some reason f2c complains only with the last lamix subroutine
> 
>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>        integer ns,p
>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
> 
> probably because v is not passed as an argument.

Definitely because v is local; this construct is a gcc extension to the 
standard, I think. Solutions: 1) pass v as an argument and reserv space
in the calling function. 2) Instead of  p, use 1000 (or some other
large number, which p never will exceed). 3) Use gcc.

Göran
> 
> Any idea on how to manage this in f2c ?
> 
> Stefano
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 10:34:27 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 10:34:27 +0000
Subject: [Rd] Pivoting in chol
Message-ID: <3C737BB3.13BE8B84@durham.ac.uk>

This is a multi-part message in MIME format.
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Everyone,

I have modified my version of R-1.4.1 to include choleski with pivoting
(like in Splus).  I thought R-core might consider including this in the
next version of R, so I give below the steps required to facilitate
this.

1. Copied Linpack routine "dchdc.f" into src/appl

2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES

3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in

4. Modifed src/library/base/R/chol.R (attached) and 
src/library/base/man/chol.Rd (also attached)

5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.

6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".

I was following my nose a bit during this process.  Everything seems to
be OK but if I have done something drastic I would appreciate it if
someone could tell me!

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.R"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.R"

# modifed J.C.Rougier <J.C.Rougier@durham.ac.uk>, 19.02.02
# to allow cholesky decomposition with pivoting.
#
#chol <- function(x)
#{
#    if(!is.numeric(x))
#	stop("non-numeric argument to chol")
#
#    if(is.matrix(x)) {
#	if(nrow(x) != ncol(x))
#	    stop("non-square matrix in chol")
#	n <- nrow(x)
#    }
#    else {
#	if(length(x) != 1)
#	    stop("non-matrix argument to chol")
#	n <- as.integer(1)
#    }
#
#    if(!is.double(x)) storage.mode(x) <- "double"
#
#    z <- .Fortran("chol",
#		  x=x,
#		  n,
#		  n,
#		  v=matrix(0, nr=n, nc=n),
#		  info=integer(1),
#		  DUP=FALSE, PACKAGE="base")
#    if(z$info)
#	stop("non-positive definite matrix in chol")
#    z$v
#}

"chol" <- function(x, pivot = FALSE)
{
  if (is.complex(x))
    stop("complex matrices not permitted at present")
  else if (!is.numeric(x))
    stop("non-numeric argument")
  x <- as.matrix(x)
  if (length(p <- unique(dim(x))) > 1)
    stop("non-square matrix")

  x[lower.tri(x)] <- 0
  if (!is.double(x))
    storage.mode(x) <- "double"

  z <- .Fortran("dchdc",
    x = x,
    as.integer(p),
    as.integer(p),
    double(p),
    piv = as.integer(rep(0, p)),
    as.integer(pivot),
    rank = integer(1),
    package = "BASE"
  )[c(1, 5, 7)]

  if (!pivot && z$rank<p)
    stop("matrix not positive definite")

  robj <- z$x
  if (pivot) {
    attr(robj, "pivot") <- z$piv
    attr(robj, "rank") <- z$rank
  }
  robj
}

chol2inv <- function(x, size=ncol(x))
{
    if(!is.numeric(x))
	stop("non-numeric argument to chol2inv")
    if (!is.null(attr(x, "pivot")))
        stop("not implemented for pivoted Choleski decomposition") # JCR added
    if(is.matrix(x)) {
	nr <- nrow(x)
	nc <- ncol(x)
    }
    else {
	nr <- length(x)
	nc <- as.integer(1)
    }
    size <- as.integer(size)
    if(size <= 0 || size > nr || size > nc)
	stop("invalid size argument in chol2inv")
    if(!is.double(x)) storage.mode(x) <- "double"
    z <- .Fortran("ch2inv",
		  x=x,
		  nr,
		  size,
		  v=matrix(0, nr=size, nc=size),
		  info=integer(1),
		  DUP=FALSE, PACKAGE="base")
    if(z$info)
	stop("singular matrix in chol2inv")
    z$v
}

--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.Rd"

\name{chol}

\alias{chol}

\title{The Choleski Decomposition}

\description{
  Compute the Choleski factorization of a symmetric real non-negative
  definite square matrix, i.e. the matrix \code{Q} for which
  \code{t(Q) \%*\% Q} equals \code{x}.  }

\usage{
chol(x, pivot = FALSE)
}

\arguments{
  \item{x}{a symmetric, positive definite matrix}
  \item{pivot}{Should pivoting be used?}
}
\value{
  The Choleski decomposition of \code{x}, as an upper-triangular
  matrix.  If pivoting is used, then two additional attributes
  \code{pivot} and \code{rank} are also returned (see Details for more
  information).
}

\details{
  Note that only the upper triangular part of \code{x} is used, so
  that \code{t(Q) \%*\% Q} only equals \code{x} when \code{x} is
  symmetric.

  If \code{pivot=FALSE} and \code{x} is not non-negative definite an
  error occurs.  If \code{x} is positive semi-definite (ie some zero
  eigenvalues) an error may or may not occur, depending on
  finite precision numerical errors.

  If \code{pivot=TRUE}, then the Choleski decomposition of a positive
  semi-definite \code{x} can be computed.  The rank of \code{x} is
  returned as \code{attr(Q, "rank")}, subject to numerical errors.
  The pivot is returned as \code{attr(Q, "pivot")}.  It is no longer
  the case that \code{t(Q) \%*\% Q} equals \code{x}.  However, setting
  \code{pivot <- attr(Q, "pivot")} and \code{oo <- order(pivot)}, it
  is now true that \code{t(Q[, oo]) \%*\% Q[, oo]} equals \code{x},
  or, alternatively, \code{t(Q) \%*\% Q} equals \code{x[pivot,
  pivot]}.  See the examples for more information.
}

\section{Warning}{
  The code does not check for symmetry or for non-negative
  definiteness.  If \code{pivot=TRUE} and \code{x} is not non-negative
  definite then there will be no error message but a meaningless
  result will occur.  So only use \code{pivot=TRUE} when \code{x} is
  non-negative definite by construction.
}

\references{
  Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
  \emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.
}

\seealso{
  \code{\link{chol2inv}} for its \emph{inverse} (without pivoting),
  \code{\link{backsolve}} for solving linear systems with upper
  triangular left sides.

  \code{\link{qr}}, \code{\link{svd}} for related matrix factorizations.
}

\examples{
x <- matrix(c(1:5, (1:5)^2), 5, 2)
m <- crossprod(x)
Q <- chol(m)
all.equal.numeric(t(Q) \%*\% Q, m) # TRUE

Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# now for something postitive semi definite

x <- cbind(x, x[, 1]+3*x[, 2])
m <- crossprod(x)
qr(m)$rank # is 2, as it should be

test <- try(Q <- chol(m))
inherits(test, "try-error") # TRUE

Q <- chol(m, pivot=TRUE) # nb wrong rank here ... you have been warned!
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# and something meaningless

m <- matrix(1:16, 4, 4)
m <- m + t(m) # not nnd
Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
all.equal(t(Q) \%*\% Q, m[pivot, pivot]) # FALSE!
}

\keyword{algebra}
\keyword{array}

--------------06648C7828389FFEA9FD7F0C--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Feb 20 10:59:43 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Feb 2002 10:59:43 +0000 (GMT)
Subject: [Rd] Pivoting in chol
In-Reply-To: <3C737BB3.13BE8B84@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>

Jonathan,

I think our general policy is to move towards using LAPACK for its
superior algorithms and better use of enhanced BLAS routines.  Is there a
suitable LAPACK alternative: my LAPACK manual is in my office and I am
not? (We are also tending to use .Call rather than .Fortran/.C to control
better the making of copies.)

We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
packages might well rely on them, see R-exts.texi.

Brian

On Wed, 20 Feb 2002, Jonathan Rougier wrote:

> Hi Everyone,
>
> I have modified my version of R-1.4.1 to include choleski with pivoting
> (like in Splus).  I thought R-core might consider including this in the
> next version of R, so I give below the steps required to facilitate
> this.
>
> 1. Copied Linpack routine "dchdc.f" into src/appl
>
> 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
>
> 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
>
> 4. Modifed src/library/base/R/chol.R (attached) and
> src/library/base/man/chol.Rd (also attached)
>
> 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
>
> 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
>
> I was following my nose a bit during this process.  Everything seems to
> be OK but if I have done something drastic I would appreciate it if
> someone could tell me!
>
> Cheers, Jonathan.
> --
> Jonathan Rougier                       Science Laboratories
> Department of Mathematical Sciences    South Road
> University of Durham                   Durham DH1 3LE
> tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 11:14:51 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 12:14:51 +0100
Subject: [Rd] f2c problem
In-Reply-To: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>
Message-ID: <0F4576C7-25F3-11D6-B62B-003065CC4CB8@mclink.it>

ok, in this case I need to write to the package maintainer. Thanks.

stefano

p.s. on MacOS there is no even the idea of g77 nor gcc.




On Mercoledì, febbraio 20, 2002, at 11:27 , Göran Broström wrote:

> On Wed, 20 Feb 2002, Stefano Iacus wrote:
>
>> In building princurve package for MacOS I need to use f2c on fortran
>> files.
>>
>> Here is the output of f2c for getlam.f
>>
>> getlam.f:
>>     getlam:
>>     newlam:
>>     lamix:
>> Error on line 116 of getlam.f: Declaration error for v: adjustable
>> dimension on non-argument
>> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
>>
>> what I found strange is that both newlam and get lam have definitions
>> like
>>
>>
>>   subroutine newlam(n,p,sx,lambda,tag)
>>        integer n,p,tag(n)
>>        double precision sx(n,p),lambda(n),lami
>>
>>
>> but for some reason f2c complains only with the last lamix subroutine
>>
>>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>>        integer ns,p
>>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
>>
>> probably because v is not passed as an argument.
>
> Definitely because v is local; this construct is a gcc extension to the
> standard, I think. Solutions: 1) pass v as an argument and reserv space
> in the calling function. 2) Instead of  p, use 1000 (or some other
> large number, which p never will exceed). 3) Use gcc.
>
> Göran
>>
>> Any idea on how to manage this in f2c ?
>>
>> Stefano
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>> -.-.-.-
>> r-devel mailing list -- Read 
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>> _._._._
>>
>
> --
>  Göran Broström                      tel: +46 90 786 5223
>  professor                           fax: +46 90 786 6614
>  Department of Statistics            http://www.stat.umu.se/egna/gb/
>  Umeå University
>  SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 11:16:54 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 11:16:54 +0000
Subject: [Rd] Pivoting in chol
References: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>
Message-ID: <3C7385A6.B29155D6@durham.ac.uk>

Hi Brian,

Prof Brian Ripley wrote:

> I think our general policy is to move towards using LAPACK for its
> superior algorithms and better use of enhanced BLAS routines.  Is there a
> suitable LAPACK alternative: my LAPACK manual is in my office and I am
> not? (We are also tending to use .Call rather than .Fortran/.C to control
> better the making of copies.)

The Lapack routine is "dpotrf", which does not pivot: I searched netlib
for all the words "cholesky lapack double pivot" and drew a blank.

> We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
> packages might well rely on them, see R-exts.texi.

That's true -- I'll put them back!

Cheers, Jonathan.

> On Wed, 20 Feb 2002, Jonathan Rougier wrote:
> 
> > Hi Everyone,
> >
> > I have modified my version of R-1.4.1 to include choleski with pivoting
> > (like in Splus).  I thought R-core might consider including this in the
> > next version of R, so I give below the steps required to facilitate
> > this.
> >
> > 1. Copied Linpack routine "dchdc.f" into src/appl
> >
> > 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
> >
> > 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
> >
> > 4. Modifed src/library/base/R/chol.R (attached) and
> > src/library/base/man/chol.Rd (also attached)
> >
> > 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> > src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> > src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
> >
> > 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
> >
> > I was following my nose a bit during this process.  Everything seems to
> > be OK but if I have done something drastic I would appreciate it if
> > someone could tell me!
> >
> > Cheers, Jonathan.
> > --
> > Jonathan Rougier                       Science Laboratories
> > Department of Mathematical Sciences    South Road
> > University of Durham                   Durham DH1 3LE
> > tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> > http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From d.orme@ic.ac.uk  Wed Feb 20 15:41:29 2002
From: d.orme@ic.ac.uk (d.orme@ic.ac.uk)
Date: Wed, 20 Feb 2002 16:41:29 +0100 (MET)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
Message-ID: <200202201541.QAA20109@pubhealth.ku.dk>

Full_Name: David Orme
Version: 1.4.0
OS: Mac OS 9.1
Submission from: (NULL) (155.198.17.121)


 R crashes (politely and without further repercussions) with a type 3 error
under the following conditions:

Open more than one macintosh() graphics device:
> macintosh()
> macintosh()

and hence there are two devices...
> dev.list()
Macintosh Macintosh 
        2         3 
..with device 3 active.

Selecting device 2 with the mouse brings that device window to the front but
does not make it active - although the device name in the window title bar
flickers briefly to active and then back to inactive. Closing the inactive
device (2) by mouse clicking on the close box causes the crash - I've replicated
this six or seven times successively on my G3.

Using dev.off(2) behaves as expected.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 16:21:53 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 17:21:53 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>

(I'm actually on OSX and rel 1.4.1 of R but) it is normal that an 
inactive window is not activated by mouse clicking. Mouse clicking put 
only the windows in front of the others (and it is activated as a 
window  but not as a device). To activate the "device" linked to a 
window you can use the menus, for example, once you have put the window 
in front.

I'll investigate what is happening under OS 9.1 because under OSX I 
cannot reproduce the problem.

thanks for spotting this.

stefano


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Feb 20 16:29:57 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 20 Feb 2002 08:29:57 -0800 (PST)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>
Message-ID: <Pine.A41.4.44.0202200826380.112560-100000@homer06.u.washington.edu>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> (I'm actually on OSX and rel 1.4.1 of R but) it is normal that an
> inactive window is not activated by mouse clicking. Mouse clicking put
> only the windows in front of the others (and it is activated as a
> window  but not as a device). To activate the "device" linked to a
> window you can use the menus, for example, once you have put the window
> in front.

Another note: it has historically been a bad idea to use the window
manager to destroy an R or S graphical device -- dev.off() has been
strongly recommended.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Feb 20 18:15:29 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 20 Feb 2002 13:15:29 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Tue, 19 Feb 2002 16:54:25 -0500 (EST)"
References: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>
Message-ID: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>


Dan Million <lio@hpss1.ccs.ornl.gov> writes:

> On Tue, 19 Feb 2002, Prof Brian Ripley wrote:
> 
> > > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > > objects with IBM XL Fortran objects in the same library.
> >
> > gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> > for evidence.)  You should be able to install the parts you (or someone)
> > omitted before.
> 
> Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> package does not include g77.  I realize I could start all over and get
> another gcc package from somewhere else.

I would recommend that.  As I said, gcc is relatively easy to
install.  I followed the info provided and didn't run into any
problems. (That's status from last summer, I don't think that this
changed.)  And yes, you don't want to mix gcc with xlf.
Don't get another 'gcc package'.  Download the source tarball from
gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
use, I possibly can reproduce your problems on my AIX box (if any remain).
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 21:15:12 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 16:15:12 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>


Hi Guys,

I've again been surprised when something like

> m <- matrix("", nrow=3,ncol=3)
> index_i <- c(2,1,3)
> index_j <- c(1,3,2)
> vals    <- c("a","b","c")
> m[ index_i, index_j ] <- vals
> m

gives block-wise application of the assignment:

     [,1] [,2] [,3]
[1,] "b"  "b"  "b" 
[2,] "a"  "a"  "a" 
[3,] "c"  "c"  "c" 

when what I wanted was by-element assignment:

     [,1] [,2] [,3]
[1,]   ""   ""  "b"
[2,]  "a"   ""   ""
[3,]   ""  "c"   ""


I always end up writing the code:

> for( p in length(index_i) )
>    m[ index_i[p], index_j[p] ] <- vals[p]

to do what I want.

So, I'm thinking about creating a patch to the R source to add an optional
parameter, say "block",  to the "[<-" call for matrixes and data frames.  

When "block=T" (the default) the old behaviour is preserved.  When "block=F"
the behavior I want occures so that 

> m[ index_i, index_j, block=F ] <- vals

would do what I want.


Comments?  Cheers?  Jeers?  Silence?


-Greg

 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Wed Feb 20 21:36:41 2002
From: david.meyer@ci.tuwien.ac.at (David Meyer)
Date: Wed, 20 Feb 2002 22:36:41 +0100
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <3C7416E9.19D7807@ci.tuwien.ac.at>

"Warnes, Gregory R" wrote:
> 
> Hi Guys,
> 
> I've again been surprised when something like
> 
> > m <- matrix("", nrow=3,ncol=3)
> > index_i <- c(2,1,3)
> > index_j <- c(1,3,2)
> > vals    <- c("a","b","c")
> > m[ index_i, index_j ] <- vals
> > m
> 
> gives block-wise application of the assignment:
> 
>      [,1] [,2] [,3]
> [1,] "b"  "b"  "b"
> [2,] "a"  "a"  "a"
> [3,] "c"  "c"  "c"
> 

Yes, you need to provide the indices as matrix, like:

m[cbind(index_i,index_j)]

(BTW: Hou do you manage to get index_i <- c(...) properly working? My R
version still treats _ as a replacement for <-)

> when what I wanted was by-element assignment:
> 
>      [,1] [,2] [,3]
> [1,]   ""   ""  "b"
> [2,]  "a"   ""   ""
> [3,]   ""  "c"   ""
> 
> I always end up writing the code:
> 
> > for( p in length(index_i) )
> >    m[ index_i[p], index_j[p] ] <- vals[p]
> 
> to do what I want.
> 
> So, I'm thinking about creating a patch to the R source to add an optional
> parameter, say "block",  to the "[<-" call for matrixes and data frames.
> 
> When "block=T" (the default) the old behaviour is preserved.  When "block=F"
> the behavior I want occures so that
> 
> > m[ index_i, index_j, block=F ] <- vals
> 
> would do what I want.
> 
> Comments?  Cheers?  Jeers?  Silence?
> 
> -Greg
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:04:53 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:04:53 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CB@groexmbcr02.pfizer.com>

Hi All,

Typo in my code (as pointed out by David Meyer),  "index_i" and "index_j"
should be "index.i" and "index.j".   

-Greg


> -----Original Message-----
> From: David Meyer [mailto:david.meyer@ci.tuwien.ac.at]
> Sent: Wednesday, February 20, 2002 4:37 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] Feature Request: "matrix[1:10,1:10, 
> block=F] <- 1:10"
> 
> 
> "Warnes, Gregory R" wrote:
> > 
> > Hi Guys,
> > 
> > I've again been surprised when something like
> > 
> > > m <- matrix("", nrow=3,ncol=3)
> > > index_i <- c(2,1,3)
> > > index_j <- c(1,3,2)
> > > vals    <- c("a","b","c")
> > > m[ index_i, index_j ] <- vals
> > > m
> > 
> > gives block-wise application of the assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,] "b"  "b"  "b"
> > [2,] "a"  "a"  "a"
> > [3,] "c"  "c"  "c"
> > 
> 
> Yes, you need to provide the indices as matrix, like:
> 
> m[cbind(index_i,index_j)]
> 
> (BTW: Hou do you manage to get index_i <- c(...) properly 
> working? My R
> version still treats _ as a replacement for <-)
> 
> > when what I wanted was by-element assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,]   ""   ""  "b"
> > [2,]  "a"   ""   ""
> > [3,]   ""  "c"   ""
> > 
> > I always end up writing the code:
> > 
> > > for( p in length(index_i) )
> > >    m[ index_i[p], index_j[p] ] <- vals[p]
> > 
> > to do what I want.
> > 
> > So, I'm thinking about creating a patch to the R source to 
> add an optional
> > parameter, say "block",  to the "[<-" call for matrixes and 
> data frames.
> > 
> > When "block=T" (the default) the old behaviour is 
> preserved.  When "block=F"
> > the behavior I want occures so that
> > 
> > > m[ index_i, index_j, block=F ] <- vals
> > 
> > would do what I want.
> > 
> > Comments?  Cheers?  Jeers?  Silence?
> > 
> > -Greg
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Feb 20 22:20:45 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 20 Feb 2002 17:20:45 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <15476.8509.861348.611923@gargle.gargle.HOWL>

Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
 R> m <- matrix("", nrow=3,ncol=3)
 R> index_i <- c(2,1,3)
 R> index_j <- c(1,3,2)
 R> vals    <- c("a","b","c")
 R> m[ index_i, index_j ] <- vals

but what he wants to get is:
 >      [,1] [,2] [,3]
 > [1,]   ""   ""  "b"
 > [2,]  "a"   ""   ""
 > [3,]   ""  "c"   ""

Just do this instead:
 R> m[ cbind(index_i, index_j) ] <- vals

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:44:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:44:24 -0500
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>



Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
[brahm@alum.mit.edu] who suggested:

  m[ cbind(index.i, index.j) ] <- vals

This works fine for the example I gave.  

Unfortunately, this approach doesn't extend to using the row and column
names to make assignments:

> m <- matrix("",ncol=3,nrow=3)
> dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> m
  A  B  C 
a "" "" ""
b "" "" ""
c "" "" ""
> 
> index.i <- c("b","a","c")
> index.j <- c("B","A","C")
> vals <- c("1","2","3")
> 
> m[ cbind(index.i, index.j) ] <- vals
> m
                                      b   a   c   B   A   C 
 ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3" 

This looks like a bug...

-Greg

> -----Original Message-----
> From: David Brahm [mailto:brahm@alum.mit.edu]
> Sent: Wednesday, February 20, 2002 5:21 PM
> To: gregory_r_warnes@groton.pfizer.com
> Cc: r-devel@hypatia.math.ethz.ch
> Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
> 
> 
> Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
>  R> m <- matrix("", nrow=3,ncol=3)
>  R> index_i <- c(2,1,3)
>  R> index_j <- c(1,3,2)
>  R> vals    <- c("a","b","c")
>  R> m[ index_i, index_j ] <- vals
> 
> but what he wants to get is:
>  >      [,1] [,2] [,3]
>  > [1,]   ""   ""  "b"
>  > [2,]  "a"   ""   ""
>  > [3,]   ""  "c"   ""
> 
> Just do this instead:
>  R> m[ cbind(index_i, index_j) ] <- vals
> 
> -- 
>                               -- David Brahm (brahm@alum.mit.edu)
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Feb 2002 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202210615.g1L6F4B02792@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1317 *
Subject: library(methods): setMethod with "ANY" fails.
From: hb@maths.lth.se
Date: Tue, 19 Feb 2002 01:22:58 +0100 (MET)
* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1319 *
Subject: Maritime Newsletter (Week 8)
From: MarineDigital Inc<newsletter@marinedigital.com>
Date: Thu, 21 Feb 2002 05:53:14 +0900
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 06:48:25 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 21 Feb 2002 06:48:25 +0000 (GMT)
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0202210640450.19128-100000@gannet.stats>

On Wed, 20 Feb 2002, Warnes, Gregory R wrote:

> Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
> [brahm@alum.mit.edu] who suggested:
>
>   m[ cbind(index.i, index.j) ] <- vals
>
> This works fine for the example I gave.
>
> Unfortunately, this approach doesn't extend to using the row and column
> names to make assignments:
>
> > m <- matrix("",ncol=3,nrow=3)
> > dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> > m
>   A  B  C
> a "" "" ""
> b "" "" ""
> c "" "" ""
> >
> > index.i <- c("b","a","c")
> > index.j <- c("B","A","C")
> > vals <- c("1","2","3")
> >
> > m[ cbind(index.i, index.j) ] <- vals
> > m
>                                       b   a   c   B   A   C
>  ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3"
>
> This looks like a bug...

It's as documented.  Take a look at e.g. the description of indexing
in Venables & Ripley.  You can use match() to turn names into numbers.

>From the R Language Definition:

    It is possible to use a matrix of integers as an index ...

S throws an error in your example, and perhaps R should too.  But not
giving errors when used in undocumented ways is not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:07:31 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:07:31 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>

On 20 Feb 2002, Thomas Vogels wrote:

> Dan Million <lio@hpss1.ccs.ornl.gov> writes:
>
> > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > package does not include g77.  I realize I could start all over and get
> > another gcc package from somewhere else.
>
> I would recommend that.  As I said, gcc is relatively easy to
> install.  I followed the info provided and didn't run into any
> problems. (That's status from last summer, I don't think that this
> changed.)  And yes, you don't want to mix gcc with xlf.
> Don't get another 'gcc package'.  Download the source tarball from
> gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> use, I possibly can reproduce your problems on my AIX box (if any remain).
>   -tom

I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
and the results are just the same; it still doesn't build the shared
libraries correctly, and R still coredumps.  Can't say I see much
improvement here.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Thu Feb 21 22:35:09 2002
From: tov@ece.cmu.edu (Thomas J Vogels)
Date: Thu, 21 Feb 2002 17:35:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
References: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>
Message-ID: <3C75761D.6210E3C9@ece.cmu.edu>

Dan Million wrote:

> On 20 Feb 2002, Thomas Vogels wrote:
>
> > Dan Million <lio@hpss1.ccs.ornl.gov> writes:
> >
> > > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > > package does not include g77.  I realize I could start all over and get
> > > another gcc package from somewhere else.
> >
> > I would recommend that.  As I said, gcc is relatively easy to
> > install.  I followed the info provided and didn't run into any
> > problems. (That's status from last summer, I don't think that this
> > changed.)  And yes, you don't want to mix gcc with xlf.
> > Don't get another 'gcc package'.  Download the source tarball from
> > gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> > use, I possibly can reproduce your problems on my AIX box (if any remain).
> >   -tom
>
> I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> and the results are just the same; it still doesn't build the shared
> libraries correctly, and R still coredumps.  Can't say I see much
> improvement here.
>
> Dan

Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
gcc first.
  -tom


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:39:14 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:39:14 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <3C75761D.6210E3C9@ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211234130.12424-100000@hpss1.ccs.ornl.gov>

On Thu, 21 Feb 2002, Thomas J Vogels wrote:

> > I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> > and the results are just the same; it still doesn't build the shared
> > libraries correctly, and R still coredumps.  Can't say I see much
> > improvement here.
> >
> > Dan
>
> Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
> earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
> gcc first.
>   -tom

Yes, I've been trying on AIX 4.3.3 and AIX 5.1 both.  On earlier attempts,
results were identical on both, so I've started to assume that there are
no significant OS differences to worry about.  I'll probably be trying it
on AIX 4.3.3 also, just to cover all the bases.

I'm going to try building two separate trees, one with plain R, and the
other strictly for the R shared library.  I think that will avoid some of
my library problems, but the coredump doesn't want to go away, it seems.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jblewis@ucla.edu  Thu Feb 21 19:51:27 2002
From: jblewis@ucla.edu (jblewis@ucla.edu)
Date: Thu, 21 Feb 2002 20:51:27 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202211951.UAA29055@pubhealth.ku.dk>

Full_Name: Jeffrey B. Lewis
Version: 1.4.0
OS: MS2000 5.00.2195
Submission from: (NULL) (128.97.223.213)


Here is an example,

> pi;
[1] 0.7
>

On my home machine running (I think) the same build of R but on WIN98
returns that 3.141... The basic trigometric functions return their 
correct values. So it seems to be a problem in the definition of 
this constant.  

Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 20:55:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 21 Feb 2002 21:55:08 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202212055.VAA29171@pubhealth.ku.dk>

What is `MS2000'?  bug.report() cannot possibly generate that under
Windows, so I presume this is some sort of Windows clone.

You know, people do spend a lot of time carefully checking ports of R
against known results.  Did you really believe that the official R port
for Windows produced pi = 0.7 on an uncorrupted operating system?

Three possibilities occur to me:

1) You have defined an object called pi somewhere in your search path.

2) The base R code has been corrupted (it contains pi <- 4*atan(1), BTW)

3) Your OS has corrupted components and so is computing atan incorrectly.

Try 4*atan(1).  If that is incorrect, re-install your OS. If it is
correct, try re-installing R (which in any case you want to do as 1.4.1 is
current).

On Thu, 21 Feb 2002 jblewis@ucla.edu wrote:

> Full_Name: Jeffrey B. Lewis
> Version: 1.4.0
> OS: MS2000 5.00.2195
> Submission from: (NULL) (128.97.223.213)
>
>
> Here is an example,

An example of what?

> > pi;
> [1] 0.7
> >
>
> On my home machine running (I think) the same build of R but on WIN98
> returns that 3.141... The basic trigometric functions return their > correct values. So it seems to be a problem in the definition of
> this constant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb 22 07:18:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Feb 2002 08:18:44 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320) (fwd)
Message-ID: <200202220718.IAA00194@pubhealth.ku.dk>

Filing response for the record

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Thu, 21 Feb 2002 13:45:06 -0800
From: Jeffrey Lewis <jblewis@ucla.edu>
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] pi returns 0.7 (PR#1320)

Brian,

Didn't use bug.report().  Typed MS2000 into a web form.
This is windows 2000 factory installed on an 12 week old
Dell machine.

4*atan(1) returns the correect answer, in fact, that I have been
using for pi since I realized the problem.

It seems R is loading a previously saved workspace.  I did not think
that
I had ever ``saved'' a workspace, but it seems that I did and that
somehow
pi was assigned in that workspace.

I am somewhat surprised that R would let you redefine built-in constants
without warning.

Thank you for your kind suggestions. I apologize for wasting your time.

Jeff


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Fri Feb 22 13:41:19 2002
From: alobo@ija.csic.es (alobo@ija.csic.es)
Date: Fri, 22 Feb 2002 14:41:19 +0100 (MET)
Subject: [Rd] Gnome causes different behaviour of some R functions (PR#1321)
Message-ID: <200202221341.OAA04115@pubhealth.ku.dk>

Full_Name: Agustin Lobo
Version: 1.4.0
OS: linux (suse 7.3)
Submission from: (NULL) (193.144.102.102)


 Saving lda.default as text files from within gui="none" and from within
 gui="gnome" 
 and comparing afterwards with diff, I get:
 
 alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
 1c1
 < function (x, grouping, prior = proportions, tol = 1, method =
 c("moment",
 ---
> function (x, grouping, prior = proportions, tol = 1e-04, method =
 c("moment",
 61c61
 <             if (all(abs(w - w0) < 0,01))
 ---
>             if (all(abs(w - w0) < 0.01))
 109c109
 <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
 ---
>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)


While lda.default works fine within R --gui="none", it produces the following
error
from within R --gui="gnome" for the same data:

> a
<-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="moment")
Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
: 
        length of dimnames[2] not equal to array extent
In addition: Warning message: 
variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
= mod23puriflda[, 

This problem is not particular to lda.default. The following code, which works
fine from within R --gui="none", fails from within within R --gui="gnome":

> x1<-rnorm(20)
> x2<-rnorm(20)
> boxplot(list(x1=x1,x2=x2))
Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
	missing value where logical needed



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Feb 22 17:59:35 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 22 Feb 2002 12:59:35 -0500
Subject: [Rd] c-c problem when R compiled with pthread
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>

Dear R-devel,

I've run into this problem that when I hit c-c to interrupt a command or
computation, the R session just ends.

The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
with 2GB ram.

1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
needed pthread.  C-c at the R prompt ends the R session.

2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
Same thing happened.  However,
I tried running this version of R under ESS, and c-c c-c works fine.
Pressing the "interrupt" button in the R gnome interface also worked fine.

3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.

This seems to suggest pthread as the problem.  Can anyone offer
clues/solutions?  

Regards,
Andy 

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Feb 22 18:58:16 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 22 Feb 2002 12:58:16 -0600
Subject: [Rd] c-c problem when R compiled with pthread
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>; from andy_liaw@merck.com on Fri, Feb 22, 2002 at 12:59:35PM -0500
References: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>
Message-ID: <20020222125816.B18743@nokomis.stat.umn.edu>

Sounds like a thread started by MKL or Atlas is not masking SIGINT
signals and has a default SIGINT handler. If MKL/Atlas do not provide
a way of getting their worker threads to ignore interrupts (which is
probably the only safe thing they can do) then this may be a tough one
to solve.
  
I suspect you would have the same problem in ESS/Gnome if you fire up
a long-enough-running calculation that uses BLAS and C-c that (if you
have 2 processors you might have this problem about 50% of the time
and possibly something worse the other 50%, depending on how they do
things).
  
Running strace might help figure out in more detail what is happening.

luke

On Fri, Feb 22, 2002 at 12:59:35PM -0500, Liaw, Andy wrote:
> Dear R-devel,
> 
> I've run into this problem that when I hit c-c to interrupt a command or
> computation, the R session just ends.
> 
> The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
> with 2GB ram.
> 
> 1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
> needed pthread.  C-c at the R prompt ends the R session.
> 
> 2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
> Same thing happened.  However,
> I tried running this version of R under ESS, and c-c c-c works fine.
> Pressing the "interrupt" button in the R gnome interface also worked fine.
> 
> 3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.
> 
> This seems to suggest pthread as the problem.  Can anyone offer
> clues/solutions?  
> 
> Regards,
> Andy 
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stud8351@ma.tum.de  Sat Feb 23 03:56:15 2002
From: stud8351@ma.tum.de (stud8351@ma.tum.de)
Date: Sat, 23 Feb 2002 04:56:15 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230356.EAA01726@pubhealth.ku.dk>

Full_Name: Christof Boeckler
Version: 1.4.1
OS: linux 2.4, x86
Submission from: (NULL) (217.233.100.207)


Hello R-gurus,

I have a little contribution to the wishlist:

Since (?) I am using the more recent ec-font-family with LaTeX instead of the
original cm-family, I did not manage to use this new feature about using (TeX's)
cm-fonts for PS-output. I got the following errors when trying to use such a
file:

dvips: Font CMR10 used in file fig.eps is not in the mapping file.
dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMMI10 used in file fig.eps is not in the mapping file.

Does anyone know what went wrong? Under these circumstances, is it possible to
use this feature at all? If not, I would be happy to see that feature in a
future version of R.

I'd appreciate any comments. 

Thanks
       Christof

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 07:33:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 08:33:40 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230733.IAA01976@pubhealth.ku.dk>

First you need to get postscript Type 1 versions of the EC fonts.
For a long time there were none available.  There is now the CM-Super
font package, which is 55Mb in size and so not in the standard TeX
distributions (it's much larger than they are).

If you do have them, postscript() already has the ability to use new font
families, so all you have to do is to make use of it.

On Sat, 23 Feb 2002 stud8351@ma.tum.de wrote:

> Full_Name: Christof Boeckler
> Version: 1.4.1
> OS: linux 2.4, x86
> Submission from: (NULL) (217.233.100.207)
>
>
> Hello R-gurus,
>
> I have a little contribution to the wishlist:
>
> Since (?) I am using the more recent ec-font-family with LaTeX instead of the
> original cm-family, I did not manage to use this new feature about using (TeX's)
> cm-fonts for PS-output. I got the following errors when trying to use such a
> file:
>
> dvips: Font CMR10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMMI10 used in file fig.eps is not in the mapping file.
>
> Does anyone know what went wrong?

Yes. You don't have the CM type 1 fonts installed (or not installed so
dvips can use them).   I don't know why you think R-bugs is an appropriate
forum for dvips problems, though.

> Under these circumstances, is it possible to
> use this feature at all? If not, I would be happy to see that feature in a
> future version of R.

It's already there.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 16:57:14 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 17:57:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231657.RAA02935@pubhealth.ku.dk>

Dear R-developers

There is a discrepancy between the variables found by typing
names(options()) and the variables described on the help page for the
function ``options''.

The following variables are in names(options()) but not described on the
help page :

"error.messages"
"repositories"
"show.coef.Pvalues"
"help.try.all.packages"
"download.info"
"dvipscmd"

Since options() is part of ``base R'' and the homepage claims that the
options described there are the only options used by ``base R'', this
may be considered as a
bug.

The following variables are described on the help
page, but are not in names(options()):

error
show.error.messages
download.file.method
de.cellwidth
internet.info


I had a problem with the option ``show.error.messages'' which may be
related to this option not being in names(options()) (I do not claim to
understand how options() really work).
Reporting and checking a problem with ``show.error.messages'' is
actually confusing, since this option changes the printed output from
errors. Here is the problem and my comments on the output (consider
starting a fresh R session).

stop("test - err. mess. printed ")
## prints error mesage, unless ``show.error.messages=FALSE''
op <- options()
options(show.error.messages=FALSE)
stop("test - err. mess. printed ")
## as expected, nothing is printed
options(op)
stop("test - err. mess. printed ")
## Reseting the options, we expect to see the print. Nothing is printed
!


My temporary solution to the problem was to include 

options(show.error.messages=TRUE)

in my .Rprofile file


>  version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R 



Cheers Ole

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Sat Feb 23 18:18:17 2002
From: jago@mclink.it (Stefano Iacus)
Date: Sat, 23 Feb 2002 19:18:17 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <B5D43EA5-2889-11D6-BE74-003065CC4CB8@mclink.it>

It has been fixed in R-devel now. Thanks David.


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 18:25:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 19:25:00 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231825.TAA03056@pubhealth.ku.dk>

Much of this is not a bug.  The situation is complex.

The options list is dynamic: users can add new options at any time.
Options need not be set, and which options are set depends on
the platform.  Many options if unset have an internal default: this is a
protection against a damaged set of options, in particular a broken system
Rprofile file.

It is an incorrect assumption that setting the previous options returned
does re-set the options: it only resets those that were previously set,
not those set since.

In many cases setting an option to NULL will unset it.

There is at least one bug: download.info should not be set, it having been
changed to internet.info (which has an internal default).

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Dear R-developers
>
> There is a discrepancy between the variables found by typing
> names(options()) and the variables described on the help page for the
> function ``options''.
>
> The following variables are in names(options()) but not described on the
> help page :
>
> "error.messages"
> "repositories"
> "show.coef.Pvalues"
> "help.try.all.packages"
> "download.info"
> "dvipscmd"

Some options are documented where they are used: numbers 2 and 4 are, I
know.  I believe `error.messages' is obselete.

> Since options() is part of ``base R'' and the homepage claims that the
> options described there are the only options used by ``base R'', this
> may be considered as a
> bug.

That claim is a bug, not least because ``base R'' is undefined!

> The following variables are described on the help
> page, but are not in names(options()):
>
> error
> show.error.messages
> download.file.method
> de.cellwidth
> internet.info

Right. They can be set if needed, but have internal defaults.

> I had a problem with the option ``show.error.messages'' which may be
> related to this option not being in names(options()) (I do not claim to
> understand how options() really work).
> Reporting and checking a problem with ``show.error.messages'' is
> actually confusing, since this option changes the printed output from
> errors. Here is the problem and my comments on the output (consider
> starting a fresh R session).
>
> stop("test - err. mess. printed ")
> ## prints error mesage, unless ``show.error.messages=FALSE''
> op <- options()
> options(show.error.messages=FALSE)
> stop("test - err. mess. printed ")
> ## as expected, nothing is printed
> options(op)
> stop("test - err. mess. printed ")
> ## Reseting the options, we expect to see the print. Nothing is printed

That does not `reset the options', nor is that what the help page example
says it does (note the word `initial').  The same thing happens with
options("error").

I'll add an explicit default for that one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 20:05:29 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 21:05:29 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232005.VAA03212@pubhealth.ku.dk>

Not all options listed on the help page for options() are set initially.
This should be said on the help page.

ripley@stats.ox.ac.uk wrote:
> 
> Much of this is not a bug.  The situation is complex.
> 
> The options list is dynamic: users can add new options at any time.
> Options need not be set, and which options are set depends on
> the platform.  Many options if unset have an internal default: this is a
> protection against a damaged set of options, in particular a broken system
> Rprofile file.
> 
> It is an incorrect assumption that setting the previous options returned
> does re-set the options: it only resets those that were previously set,
> not those set since.
> 
> In many cases setting an option to NULL will unset it.
> 
> There is at least one bug: download.info should not be set, it having been
> changed to internet.info (which has an internal default).
> 
> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:
> 
> > Dear R-developers
> >
> > There is a discrepancy between the variables found by typing
> > names(options()) and the variables described on the help page for the
> > function ``options''.
> >
> > The following variables are in names(options()) but not described on the
> > help page :
> >
> > "error.messages"
> > "repositories"
> > "show.coef.Pvalues"
> > "help.try.all.packages"
> > "download.info"
> > "dvipscmd"
> 
> Some options are documented where they are used: numbers 2 and 4 are, I
> know.  I believe `error.messages' is obselete.
> 
> > Since options() is part of ``base R'' and the homepage claims that the
> > options described there are the only options used by ``base R'', this
> > may be considered as a
> > bug.
> 
> That claim is a bug, not least because ``base R'' is undefined!
> 
> > The following variables are described on the help
> > page, but are not in names(options()):
> >
> > error
> > show.error.messages
> > download.file.method
> > de.cellwidth
> > internet.info
> 
> Right. They can be set if needed, but have internal defaults.
> 
> > I had a problem with the option ``show.error.messages'' which may be
> > related to this option not being in names(options()) (I do not claim to
> > understand how options() really work).
> > Reporting and checking a problem with ``show.error.messages'' is
> > actually confusing, since this option changes the printed output from
> > errors. Here is the problem and my comments on the output (consider
> > starting a fresh R session).
> >
> > stop("test - err. mess. printed ")
> > ## prints error mesage, unless ``show.error.messages=FALSE''
> > op <- options()
> > options(show.error.messages=FALSE)
> > stop("test - err. mess. printed ")
> > ## as expected, nothing is printed
> > options(op)
> > stop("test - err. mess. printed ")
> > ## Reseting the options, we expect to see the print. Nothing is printed
> 
> That does not `reset the options', nor is that what the help page example
> says it does (note the word `initial').  The same thing happens with
> options("error").
> 
> I'll add an explicit default for that one.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 20:30:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 21:30:15 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232030.VAA03252@pubhealth.ku.dk>

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Not all options listed on the help page for options() are set initially.
> This should be said on the help page.

Is it said that they are?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From meyer@ci.tuwien.ac.at  Mon Feb 25 10:34:25 2002
From: meyer@ci.tuwien.ac.at (meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 11:34:25 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without response (PR#1325)
Message-ID: <200202251034.LAA08726@pubhealth.ku.dk>

if the terms-object contains no response, delete.response mutilates the 
predvars-attribute in the line:

attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

which should probably changed to:

    if (length(f) == 3) 
	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 02
 day = 24
 language = R

Search Path:
 .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 14:38:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 15:38:44 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without (PR#1326)
Message-ID: <200202251438.PAA11872@pubhealth.ku.dk>

Thanks, fixed now.

Why were you calling delete.response on an object with no response, BTW?
I wonder whether delete.response should not be a no-op in that case (it is
in S), if there is any reason to handle it at all.

On Mon, 25 Feb 2002 meyer@ci.tuwien.ac.at wrote:

> if the terms-object contains no response, delete.response mutilates the
> predvars-attribute in the line:
>
> attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> which should probably changed to:
>
>     if (length(f) == 3)
> 	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> <<insert bug report here>>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 02
>  day = 24
>  language = R
>
> Search Path:
>  .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Feb 27 15:42:51 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 27 Feb 2002 10:42:51 -0500
Subject: [Rd] Suggestion for rug():  include "line" and "pos" parameters, or ...
Message-ID: <s2vp7u41iuv6gpt8tksc3mrq8k09q7dogg@4ax.com>

The rug() function works by drawing an axis with tickmarks at the data
points.  Recently I wanted to make a visual comparison of two sets of
arrival times by drawing one rug above the other.  The axis() function
used by rug() has optional parameters "line" and "pos" to allow this,
but rug() doesn't.  

Simply adding line and pos as parameters which are passed to axis(),
or adding a "..." parameter to be passed to axis(), would fix this.

I don't know which is preferable. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Mon Feb 25 15:44:55 2002
From: david.meyer@ci.tuwien.ac.at (david.meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 16:44:55 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1327)
Message-ID: <200202251544.QAA12655@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> Thanks, fixed now.
> 
> Why were you calling delete.response on an object with no response, BTW?

I used it in predict.svm(), and the terms-object contained in the svm
model just happens to have no response for the ``one-class
classification'' if svm was called e.g. by:

m <- svm(~a+b).

Because of the second line in delete.response()

    if (length(f) == 3) 
        f[[2]] <- NULL

handling the no-response case, I believed I was allowed to use
delete.response() without checking for this.

> I wonder whether delete.response should not be a no-op in that case (it is
> in S), if there is any reason to handle it at all.

So people will have to check for it before using delete.response() -
this is probably more secure indeed.

-d
> 

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 15:50:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 16:50:35 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1328)
Message-ID: <200202251550.QAA12726@pubhealth.ku.dk>

On Mon, 25 Feb 2002, David Meyer wrote:

> Prof Brian D Ripley wrote:
> >
> > Thanks, fixed now.
> >
> > Why were you calling delete.response on an object with no response, BTW?
>
> I used it in predict.svm(), and the terms-object contained in the svm
> model just happens to have no response for the ``one-class
> classification'' if svm was called e.g. by:
>
> m <- svm(~a+b).
>
> Because of the second line in delete.response()
>
>     if (length(f) == 3)
>         f[[2]] <- NULL
>
> handling the no-response case, I believed I was allowed to use
> delete.response() without checking for this.

Indeed you were. But delete.response does change the terms object in that
case, and I suspect it should either return it unchanged (as S does) or
give an error.

> > I wonder whether delete.response should not be a no-op in that case (it is
> > in S), if there is any reason to handle it at all.
>
> So people will have to check for it before using delete.response() -
> this is probably more secure indeed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Feb 25 20:59:36 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 25 Feb 2002 14:59:36 -0600
Subject: [Rd] File permissions test during R CMD check
Message-ID: <20020225205936.GA15595@sonny.eddelbuettel.com>


I (still) use RCS, and not CVS, for my own projects. R CMD check does not
like the 0444 file permissions on files check into RCS.  

I conjecture that this stems from desire to have the installed files in a
state in which they can be edited, but I might be off base ... In case my
conjecture holds, would it be possible to relax the restriction during R CMD
check, but then install the files as 0644 ?

Other than that, R CMD check is a very impressive tool.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Feb 26 07:51:39 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 26 Feb 2002 08:51:39 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.16011.518674.971231@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> I (still) use RCS, and not CVS, for my own projects. R CMD check does
> not like the 0444 file permissions on files check into RCS.

> I conjecture that this stems from desire to have the installed files
> in a state in which they can be edited, but I might be off base ... In
> case my conjecture holds, would it be possible to relax the
> restriction during R CMD check, but then install the files as 0644 ?

Not as long as R CMD build takes what is in the source dirs.

There are some comments about possible improvements to permission tests
in the code of check, but in any case all files that are to be installed
should be at least 644.  We could relax that for e.g. C source or
headers, but not e.g. for DESCRIPTION.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 09:05:13 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 09:05:13 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15483.16011.518674.971231@mithrandir.hornik.net>
Message-ID: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>

On Tue, 26 Feb 2002, Kurt Hornik wrote:

> >>>>> Dirk Eddelbuettel writes:
>
> > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > not like the 0444 file permissions on files check into RCS.
>
> > I conjecture that this stems from desire to have the installed files
> > in a state in which they can be edited, but I might be off base ... In
> > case my conjecture holds, would it be possible to relax the
> > restriction during R CMD check, but then install the files as 0644 ?
>
> Not as long as R CMD build takes what is in the source dirs.
>
> There are some comments about possible improvements to permission tests
> in the code of check, but in any case all files that are to be installed
> should be at least 644.  We could relax that for e.g. C source or
> headers, but not e.g. for DESCRIPTION.

First comment: there is a --no-perms option to turn the check off.

I don't think there is a problem with DESCRIPTION, since we make the
installed copy with cat and sed.  However, the data file and inst files are
copied and so might have permissions copied too, but the data files have
chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
Installing read-only files makes updating packages a lot harder and would
break the current mechanisms for installing updates over existing copies.
But that only argues for the installed copies being at least 644.

There are a number of S users of SCCS/RCS who distribute tarballs with
read-only permissions.  Inevitably I find I need to make some changes and
get obstructed.  That's not supposed to happen with R packages, but it does
and so I do think we want the C source files and headers in an editable
state.

One other minor point: the source tarball will be used on OSes other than
Unix-alikes.  I guess of those only NTFS on Windows NT/2000/XP has a real
file security system (which is based on VMS and is far more elaborate than
0644) and I am not at all clear what would happen if a read-only tarball
was used there, nor how easy it would be to make Rcmd INSTALL cope with
one.  I don't want to begin to think about cross-platform remote-mounted
file systems ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 12:25:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 26 Feb 2002 13:25:30 +0100 (MET)
Subject: [Rd] subscripting problems with matrix lists (PR#1329)
Message-ID: <200202261225.NAA18768@pubhealth.ku.dk>

R 1.4.1 (and R-devel)
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
     [,1]        [,2]
[1,] "Numeric,3" "Numeric,1"
[2,] "Numeric,3" "Character,3"
> m[[1,2]]
[1] 3.141593
> m[[2,2]]
[1] "a" "b" "c"

correct so far, but
> m[2,2]
[[1]]
NULL

> m[,2]
[[1]]
NULL

[[2]]
NULL

which are lists of the correct length but wrong content.

This works correctly in S:
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
           [,1]         [,2]
[1,] numeric, 3 3.1416
[2,] numeric, 3 character, 3
> m[[1,2]]
[1] 3.1416
> m[[2,2]]
[1] "a" "b" "c"
> m[2,2]
$a4:
[1] "a" "b" "c"

> m[,2]
$a3:
[1] 3.1416

$a4:
[1] "a" "b" "c"

The printout is a little better, too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:20:11 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:20:11 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
References: <15483.16011.518674.971231@mithrandir.hornik.net> <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
Message-ID: <20020226132011.GA21081@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> On Tue, 26 Feb 2002, Kurt Hornik wrote:
> 
> > >>>>> Dirk Eddelbuettel writes:
> >
> > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > not like the 0444 file permissions on files check into RCS.
> >
> > > I conjecture that this stems from desire to have the installed files
> > > in a state in which they can be edited, but I might be off base ... In
> > > case my conjecture holds, would it be possible to relax the
> > > restriction during R CMD check, but then install the files as 0644 ?
> >
> > Not as long as R CMD build takes what is in the source dirs.
> >
> > There are some comments about possible improvements to permission tests
> > in the code of check, but in any case all files that are to be installed
> > should be at least 644.  We could relax that for e.g. C source or
> > headers, but not e.g. for DESCRIPTION.

I also checked in the .R and .Rd files.

> First comment: there is a --no-perms option to turn the check off.

Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
not turned on at the archive guard's machine.

> I don't think there is a problem with DESCRIPTION, since we make the
> installed copy with cat and sed.  However, the data file and inst files are
> copied and so might have permissions copied too, but the data files have
> chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> Installing read-only files makes updating packages a lot harder and would
> break the current mechanisms for installing updates over existing copies.

Right -- That is why I suggest to alter file perms/modes on /installation/
not package creation.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 13:37:14 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 13:37:14 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020226132011.GA21081@sonny.eddelbuettel.com>
Message-ID: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>

On Tue, 26 Feb 2002, Dirk Eddelbuettel wrote:

> On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> > On Tue, 26 Feb 2002, Kurt Hornik wrote:
> >
> > > >>>>> Dirk Eddelbuettel writes:
> > >
> > > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > > not like the 0444 file permissions on files check into RCS.
> > >
> > > > I conjecture that this stems from desire to have the installed files
> > > > in a state in which they can be edited, but I might be off base ... In
> > > > case my conjecture holds, would it be possible to relax the
> > > > restriction during R CMD check, but then install the files as 0644 ?
> > >
> > > Not as long as R CMD build takes what is in the source dirs.
> > >
> > > There are some comments about possible improvements to permission tests
> > > in the code of check, but in any case all files that are to be installed
> > > should be at least 644.  We could relax that for e.g. C source or
> > > headers, but not e.g. for DESCRIPTION.
>
> I also checked in the .R and .Rd files.
>
> > First comment: there is a --no-perms option to turn the check off.
>
> Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
> not turned on at the archive guard's machine.
>
> > I don't think there is a problem with DESCRIPTION, since we make the
> > installed copy with cat and sed.  However, the data file and inst files are
> > copied and so might have permissions copied too, but the data files have
> > chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> > Installing read-only files makes updating packages a lot harder and would
> > break the current mechanisms for installing updates over existing copies.
>
> Right -- That is why I suggest to alter file perms/modes on /installation/
> not package creation.

and you omitted two paras of why I thought that was not the answer.
Briefly:

1) It's not clear we can alter perm/modes on installation on all OSes.
2) Users may need to modify the source files to get the package to install
(especially the C files).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:52:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:52:05 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
References: <20020226132011.GA21081@sonny.eddelbuettel.com> <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
Message-ID: <20020226135205.GA25774@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 01:37:14PM +0000, Prof Brian D Ripley wrote:
> > Right -- That is why I suggest to alter file perms/modes on /installation/
> > not package creation.
> 
> and you omitted two paras of why I thought that was not the answer.
> Briefly:
> 
> 1) It's not clear we can alter perm/modes on installation on all OSes.
> 2) Users may need to modify the source files to get the package to install
> (especially the C files).

What I don't get is that I need to be root on my Unix boxen too in order to
install R package (at least into their default loci where I prefer to keep
them).  With either the big bad root hat on, on the fact that you should
inherit ownership alteration rights within your local directories (below
$HOME) say I do not see 2) as an issue.

I cannot speak to 1).

It was just a suggestion, anyway. I wrote myself a release.sh which grabs
files, copies them locally, alters them then runs R CMD build.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Feb 26 14:18:08 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Feb 2002 15:18:08 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.39200.764473.501866@gargle.gargle.HOWL>

>>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org> writes:

    Dirk> I (still) use RCS, and not CVS, for my own projects. R
    Dirk> CMD check does not like the 0444 file permissions on
    Dirk> files check into RCS.

    Dirk> I conjecture that this stems from desire to have the
    Dirk> installed files in a state in which they can be
    Dirk> edited, but I might be off base ... In case my
    Dirk> conjecture holds, would it be possible to relax the
    Dirk> restriction during R CMD check, but then install the
    Dirk> files as 0644 ?

Dirk, I've had the exaxt same situation months ago (since then
R-devel was "1.4.0 to be") and reacted the same way as you, just
to R-core instead of R-devel back then ....
My solution was to manually "rcs -U" all the relevant files, and
from then on, rcs kept them rw-r--r-- (aka 644) as desired.
I haven't seen a reason why I should use RCS locks when I'm the
only one accessing these files.

    Dirk> Other than that, R CMD check is a very impressive
    Dirk> tool.

(yes, and because of that and later submission to CRAN
 I agree that "--no-perms" is not a solution to me neither).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Feb 26 20:04:11 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Feb 2002 21:04:11 +0100 (MET)
Subject: [Rd] itemize/item crashes R CMD check (PR#1330)
Message-ID: <200202262004.VAA22254@pubhealth.ku.dk>


I can crash R CMD check with the following message:

 This shouldn't happen at /usr/local/lib/R/share/perl/R/Rdconv.pm line 1226, <rdfile> line 24.
 
under the following circumstances --

an \itemize{} environment in the \details{} section with
an item that continues on more than one line, delimited by
curly brackets.  It looks like \items would rather be
delimited by spaces than by curly brackets.

  This isn't clear from the R-exts manual (p. 15), which says:

The \itemize and \enumerate commands take a single argument,
within which there may be one or more \item commands. The
text following each \item is formatted as one
or more paragraphs, suitably indented and with the first
paragraph marked with a bullet
point (\itemize) or a number (\enumerate).

  I was misled by the analogy with LaTeX, where you would
delimit \item by curly brackets.
  The workaround is easy -- just delimit by spaces instead
of curly brackets -- but in any case, it seems that a
"This shouldn't happen ..." message shouldn't be visible to
the user ...

example:
\name{test}
\alias{test}
\title{test}
\description{test}
\usage{
test(x)
}
\arguments{
  \item{x}{test}
}
\details{
  Criteria:
  \itemize{
    \item{test: this is an item that is quite long quite long quite long quite long
         and continues on another line}
    \item{test2}
    \item{test3}
  }
}
\value{
   test
}
\author{Ben Bolker}
\keyword{misc}
--------------------

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 21:23:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 21:23:45 +0000 (GMT)
Subject: [Rd] Re: [R] abs() on data frames?!
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEFGCKAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0202262054210.2185-100000@auk.stats>

Moved to R-devel, as this will get very technical!

On Tue, 26 Feb 2002, Henrik Bengtsson wrote:

> I might be wrong, but didn't the following work before R v1.4.x?
>
> R --vanilla
> > df <- data.frame(-10:10)
> > abs(df)
> Error in abs(df) : non-numeric argument to function
>
> I have tried this on both Rv1.4.1 on WinMe and Rv1.4.0 on Solaris 8. I
> regexp searched bugs.r-project.org on "abs" but I found nothing about this.
> I can't see why abs(df) shouldn't work when sqrt(df), log(df) etc works.

Both log and abs should be members of the group generic Math, and
Math.data.frame exists. In R sqrt is dispatched on that group, although I
don't see it documented as part of it,

But it looks like abs is being handled by the complex arithmetic section of
the code, as if it were Mod.

I do recall discussions of this long ago, but doubt if this has been
changed recently.  Indeed, the names.c file has

/* KH(1999/09/12)-> complex: {"abs", do_math1, 0, 1, 1, PP_FUNCALL}, */

I'll fix it in R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Feb 27 08:16:09 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Wed, 27 Feb 2002 09:16:09 +0100 (MET)
Subject: [Rd] Bug in glm.fit? (PR#1331)
Message-ID: <200202270816.JAA23941@pubhealth.ku.dk>

G'day all,

I had a look at the GLM code of R (1.4.1) and I believe that there are
problems with the function "glm.fit" that may bite in rare
circumstances.  Note, I have no data set with which I ran into
trouble.  This report is solely based on having a look at the code.

Below I append a listing of the glm.fit function as produced by my
system.  I have added line numbers so that I can easily refer to the
code that is, in my opinion, problematic.  I also append a modified
version that, hopefully, solves these problems.  At least on
"example(glm)" both functions produce the same output (if the random
number generator is set to the same seed).

Short summary: I envisage problems with glm.fit if two conditions are
met simultaneously.  Namely, (1) the design matrix is such that the QR
algorithm used in the weighted least squares (WLS) step has to pivot
columns (lines 81-86) and (2) during the iterations the step size has
to be truncated (either lines 98-114 or lines 115-130).

More details:
In line 90, the variables "start" and "coef" are set to the
coefficients of the WLS and "start" is then permuted (line 91) to take
a possible pivoting of the QR algorithm into account.  Note that
"coef" is not permutated.   Also, since the weights in the iterative
weighted least squares algorithm change in each iteration (lines
60-139) it is theoretically possible that on some executions of this
chunk pivoting occurs and on others there is no pivoting.

Hoever, if the new coefficients are unsuitable and either the block at
lines 98-114 or lines 115-130 is entered, then "start" is modified by
shrinking it toward "coefold".  There are two problems:
1) If this happens the first time the loop in lines 60-139 is executed,
   then coefold is initialised to the value of "start" that was passed
down to the routine (line 58).  This might well be NULL (usually is?).
In this case line 105 and line 122 would produce a new "start" which
is numeric(0) and glm.fit would stop execution pretty soon thereafter.
2) If it happens during a later execution of the loop in lines 60-139,
   then "coefold" was set to the value "coef" of the prior execution
of the loop (line 137).  Depending on whether either of the code
chunks at lines 98-114 or lines 115-130 have been executed on that
previous occastion, "coefold" may or may not be permuted to the same
order as "start" in this moment.  Hence, it could happen that "start"
is shrunken towards something that doesn't make sense in line 105 or
line 122.

Relating to point 2) above.  Theoretically, during the main loop
(lines 60-139) either of the chunks in lines 98-114 or lines 115-130
could be entered.  In these chunks "coef" is set to the shrunken
"start" at the end (line 111 or line 126).  If, with the ``deviance
for the shrunken "start"'' the convergence criterion in line 131 is
fulfilled, then the main loop would finish.  In other words, at line
140 there is no way to tell whether "coef" is in the order of
"fit$coefficients" or has been permutated to have the same order as
"start".  In the later case, the additional permutation in line 157
would garble the solution.

I hope that the revised version that I append below, works around all
these potential problems without breaking anything.  As I said, I ran
"example(glm)" with the revised version and got the same results.  But
I guess you guys have far more exhaustive tests and may want to do
some further test to ensure that nothing is broken.

The revised version also makes some cosmetic changes that reflect my
preferences :-) :
1) Given the default values of the parameters "weights" and "offset" I
   was surprised about the tests in lines 17 and 19.  They seemed
superfluous.  Until I noticed that "glm" can call "glm.fit" with
actual arguments for these parameters that are NULL.  Hence, I suggest
that the default values for these arguments should be NULL.  This
makes it easier to understand the code of "glm.fit" (if one looks only
at "glm.fit" and not at all the code "glm", "glm.fit" &c
simultaneously). 
2) As mentioned above, "coefold" may be initialised to NULL in line 58
   if the parameter "start" is not specified.  (Which typically would be
the case?)  But furthermore, in lines 44-53 the test for the parameter
"start" is mangled into the test for the parameter "etastart".  If
"etastart" is not specified but a bad "start" (not the correct
length), the bad "start" would be caught.  But if a valid "etastart"
is specified, then a bad "start" would not be caught since those tests
are not executed.  (Are there users that specify both?).  Anyway, I
have untangled those sanity check.  Also to get a clean initialisation
for "coefold".
3) Given that the column names of fit$qr are (correctly) set in line
   171, I didn't see the purpose of line 155.  That line anyhow sets
the column names wrongly if pivoting has occured.  So I deleted that
line. 

That's all for now.  Thanks for the great package and I hope that this
bug report will be useful.

Cheers,

        Berwin

========================= original glm.fit =========================
  1  glm.fit <-
  2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL, 
  3      mustart = NULL, offset = rep(0, nobs), family = gaussian(), 
  4      control = glm.control(), intercept = TRUE) 
  5  {
  6      x <- as.matrix(x)
  7      xnames <- dimnames(x)[[2]]
  8      ynames <- names(y)
  9      conv <- FALSE
 10      nobs <- NROW(y)
 11      nvars <- NCOL(x)
 12      if (nvars == 0) {
 13          cc <- match.call()
 14          cc[[1]] <- as.name("glm.fit.null")
 15          return(eval(cc, parent.frame()))
 16      }
 17      if (is.null(weights)) 
 18          weights <- rep(1, nobs)
 19      if (is.null(offset)) 
 20          offset <- rep(0, nobs)
 21      variance <- family$variance
 22      dev.resids <- family$dev.resids
 23      aic <- family$aic
 24      linkinv <- family$linkinv
 25      mu.eta <- family$mu.eta
 26      if (!is.function(variance) || !is.function(linkinv)) 
 27          stop("illegal `family' argument")
 28      valideta <- family$valideta
 29      if (is.null(valideta)) 
 30          valideta <- function(eta) TRUE
 31      validmu <- family$validmu
 32      if (is.null(validmu)) 
 33          validmu <- function(mu) TRUE
 34      if (is.null(mustart)) {
 35          eval(family$initialize)
 36      }
 37      else {
 38          mukeep <- mustart
 39          eval(family$initialize)
 40          mustart <- mukeep
 41      }
 42      if (NCOL(y) > 1) 
 43          stop("y must be univariate unless binomial")
 44      eta <- if (!is.null(etastart) && valideta(etastart)) 
 45          etastart
 46      else if (!is.null(start)) 
 47          if (length(start) != nvars) 
 48              stop(paste("Length of start should equal", nvars, 
 49                  "and correspond to initial coefs for", deparse(xnames)))
 50          else as.vector(if (NCOL(x) == 1) 
 51              x * start
 52          else x %*% start)
 53      else family$linkfun(mustart)
 54      mu <- linkinv(eta)
 55      if (!(validmu(mu) && valideta(eta))) 
 56          stop("Can't find valid starting values: please specify some")
 57      devold <- sum(dev.resids(y, mu, weights))
 58      coefold <- start
 59      boundary <- FALSE
 60      for (iter in 1:control$maxit) {
 61          good <- weights > 0
 62          varmu <- variance(mu)[good]
 63          if (any(is.na(varmu))) 
 64              stop("NAs in V(mu)")
 65          if (any(varmu == 0)) 
 66              stop("0s in V(mu)")
 67          mu.eta.val <- mu.eta(eta)
 68          if (any(is.na(mu.eta.val[good]))) 
 69              stop("NAs in d(mu)/d(eta)")
 70          good <- (weights > 0) & (mu.eta.val != 0)
 71          if (all(!good)) {
 72              conv <- FALSE
 73              warning(paste("No observations informative at iteration", 
 74                  iter))
 75              break
 76          }
 77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
 78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
 79          ngoodobs <- as.integer(nobs - sum(!good))
 80          ncols <- as.integer(1)
 81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
 82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
 83                  control$epsilon/1000), coefficients = numeric(nvars), 
 84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
 85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
 86              work = double(2 * nvars), PACKAGE = "base")
 87          if (nobs < fit$rank) 
 88              stop(paste("X matrix has rank", fit$rank, "but only", 
 89                  nobs, "observations"))
 90          start <- coef <- fit$coefficients
 91          start[fit$pivot] <- coef
 92          eta <- drop(x %*% start)
 93          mu <- linkinv(eta <- eta + offset)
 94          dev <- sum(dev.resids(y, mu, weights))
 95          if (control$trace) 
 96              cat("Deviance =", dev, "Iterations -", iter, "\n")
 97          boundary <- FALSE
 98          if (is.na(dev) || any(is.na(coef))) {
 99              warning("Step size truncated due to divergence")
100              ii <- 1
101              while ((is.na(dev) || any(is.na(start)))) {
102                  if (ii > control$maxit) 
103                    stop("inner loop 1; can't correct step size")
104                  ii <- ii + 1
105                  start <- (start + coefold)/2
106                  eta <- drop(x %*% start)
107                  mu <- linkinv(eta <- eta + offset)
108                  dev <- sum(dev.resids(y, mu, weights))
109              }
110              boundary <- TRUE
111              coef <- start
112              if (control$trace) 
113                  cat("New Deviance =", dev, "\n")
114          }
115          if (!(valideta(eta) && validmu(mu))) {
116              warning("Step size truncated: out of bounds.")
117              ii <- 1
118              while (!(valideta(eta) && validmu(mu))) {
119                  if (ii > control$maxit) 
120                    stop("inner loop 2; can't correct step size")
121                  ii <- ii + 1
122                  start <- (start + coefold)/2
123                  mu <- linkinv(eta <- eta + offset)
124              }
125              boundary <- TRUE
126              coef <- start
127              dev <- sum(dev.resids(y, mu, weights))
128              if (control$trace) 
129                  cat("New Deviance =", dev, "\n")
130          }
131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
132              conv <- TRUE
133              break
134          }
135          else {
136              devold <- dev
137              coefold <- coef
138          }
139      }
140      if (!conv) 
141          warning("Algorithm did not converge")
142      if (boundary) 
143          warning("Algorithm stopped at boundary value")
144      eps <- 10 * .Machine$double.eps
145      if (family$family == "binomial") {
146          if (any(mu > 1 - eps) || any(mu < eps)) 
147              warning("fitted probabilities numerically 0 or 1 occurred")
148      }
149      if (family$family == "poisson") {
150          if (any(mu < eps)) 
151              warning("fitted rates numerically 0 occurred")
152      }
153      if (fit$rank != nvars) {
154          coef[seq(fit$rank + 1, nvars)] <- NA
155          dimnames(fit$qr) <- list(NULL, xnames)
156      }
157      coef[fit$pivot] <- coef
158      xxnames <- xnames[fit$pivot]
159      residuals <- rep(NA, nobs)
160      residuals[good] <- z - (eta - offset)[good]
161      fit$qr <- as.matrix(fit$qr)
162      nr <- min(sum(good), nvars)
163      if (nr < nvars) {
164          Rmat <- diag(nvars)
165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
166      }
167      else Rmat <- fit$qr[1:nvars, 1:nvars]
168      Rmat <- as.matrix(Rmat)
169      Rmat[row(Rmat) > col(Rmat)] <- 0
170      names(coef) <- xnames
171      colnames(fit$qr) <- xxnames
172      dimnames(Rmat) <- list(xxnames, xxnames)
173      names(residuals) <- ynames
174      names(mu) <- ynames
175      names(eta) <- ynames
176      wt <- rep(0, nobs)
177      wt[good] <- w^2
178      names(wt) <- ynames
179      names(weights) <- ynames
180      names(y) <- ynames
181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
182          fit$rank))
183      wtdmu <- if (intercept) 
184          sum(weights * y)/sum(weights)
185      else linkinv(offset)
186      nulldev <- sum(dev.resids(y, wtdmu, weights))
187      n.ok <- nobs - sum(weights == 0)
188      nulldf <- n.ok - as.integer(intercept)
189      resdf <- n.ok - fit$rank
190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
191      list(coefficients = coef, residuals = residuals, fitted.values = mu, 
192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
193              "rank", "qraux", "pivot", "tol")], family = family, 
194          linear.predictors = eta, deviance = dev, aic = aic.model, 
195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
196          df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
197          boundary = boundary)
198  }
========================= modified glm.fit =========================
glm.fit <- 
function (x, y, weights = NULL, start = NULL, etastart = NULL, 
    mustart = NULL, offset = NULL, family = gaussian(), 
    control = glm.control(), intercept = TRUE) 
{
    x <- as.matrix(x)
    xnames <- dimnames(x)[[2]]
    ynames <- names(y)
    conv <- FALSE
    nobs <- NROW(y)
    nvars <- NCOL(x)
    if (nvars == 0) {
        cc <- match.call()
        cc[[1]] <- as.name("glm.fit.null")
        return(eval(cc, parent.frame()))
    }
    if (is.null(weights)) 
        weights <- rep(1, nobs)
    if (is.null(offset)) 
        offset <- rep(0, nobs)
    variance <- family$variance
    dev.resids <- family$dev.resids
    aic <- family$aic
    linkinv <- family$linkinv
    mu.eta <- family$mu.eta
    if (!is.function(variance) || !is.function(linkinv)) 
        stop("illegal `family' argument")
    valideta <- family$valideta
    if (is.null(valideta)) 
        valideta <- function(eta) TRUE
    validmu <- family$validmu
    if (is.null(validmu)) 
        validmu <- function(mu) TRUE
    if (is.null(mustart)) {
        eval(family$initialize)
    }
    else {
        mukeep <- mustart
        eval(family$initialize)
        mustart <- mukeep
    }
    if (NCOL(y) > 1) 
        stop("y must be univariate unless binomial")
    if (!is.null(start)){
      if (length(start) != nvars) 
        stop(paste("Length of start should equal", nvars, 
                   "and correspond to initial coefs for", deparse(xnames)))
      coef <- coefold <- start  # initialise coef here in order to
                                # be able to subset it below 
    }
    else
      coef <- coefold <- rep(0,nvars)
    eta <- if (!is.null(etastart) && valideta(etastart)) 
      etastart
    else if (!is.null(start)) 
      as.vector(if (NCOL(x) == 1) 
                x * start
      else x %*% start)
    else family$linkfun(mustart)
    mu <- linkinv(eta)
    if (!(validmu(mu) && valideta(eta))) 
        stop("Can't find valid starting values: please specify some")
    devold <- sum(dev.resids(y, mu, weights))
    boundary <- FALSE
    for (iter in 1:control$maxit) {
        good <- weights > 0
        varmu <- variance(mu)[good]
        if (any(is.na(varmu))) 
            stop("NAs in V(mu)")
        if (any(varmu == 0)) 
            stop("0s in V(mu)")
        mu.eta.val <- mu.eta(eta)
        if (any(is.na(mu.eta.val[good]))) 
            stop("NAs in d(mu)/d(eta)")
        good <- (weights > 0) & (mu.eta.val != 0)
        if (all(!good)) {
            conv <- FALSE
            warning(paste("No observations informative at iteration", 
                iter))
            break
        }
        z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
        w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
        ngoodobs <- as.integer(nobs - sum(!good))
        ncols <- as.integer(1)
        fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
            p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
                control$epsilon/1000), coefficients = numeric(nvars), 
            residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
            rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
            work = double(2 * nvars), PACKAGE = "base")
        if (nobs < fit$rank) 
            stop(paste("X matrix has rank", fit$rank, "but only", 
                nobs, "observations"))
        coef[fit$pivot] <- fit$coefficients
        eta <- drop(x %*% coef)
        mu <- linkinv(eta <- eta + offset)
        dev <- sum(dev.resids(y, mu, weights))
        if (control$trace) 
            cat("Deviance =", dev, "Iterations -", iter, "\n")
        boundary <- FALSE
        if (is.na(dev) || any(is.na(coef))) {
            warning("Step size truncated due to divergence")
            ii <- 1
            while ((is.na(dev) || any(is.na(coef)))) {
                if (ii > control$maxit) 
                  stop("inner loop 1; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)
                mu <- linkinv(eta <- eta + offset)
                dev <- sum(dev.resids(y, mu, weights))
            }
            boundary <- TRUE
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (!(valideta(eta) && validmu(mu))) {
            warning("Step size truncated: out of bounds.")
            ii <- 1
            while (!(valideta(eta) && validmu(mu))) {
                if (ii > control$maxit) 
                  stop("inner loop 2; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                mu <- linkinv(eta <- eta + offset)
            }
            boundary <- TRUE
            dev <- sum(dev.resids(y, mu, weights))
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
            conv <- TRUE
            break
        }
        else {
            devold <- dev
            coefold <- coef
        }
    }
    if (!conv) 
        warning("Algorithm did not converge")
    if (boundary) 
        warning("Algorithm stopped at boundary value")
    eps <- 10 * .Machine$double.eps
    if (family$family == "binomial") {
        if (any(mu > 1 - eps) || any(mu < eps)) 
            warning("fitted probabilities numerically 0 or 1 occurred")
    }
    if (family$family == "poisson") {
        if (any(mu < eps)) 
            warning("fitted rates numerically 0 occurred")
    }
    if (fit$rank != nvars) {
        coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
    }
    xxnames <- xnames[fit$pivot]
    residuals <- rep(NA, nobs)
    residuals[good] <- z - (eta - offset)[good]
    fit$qr <- as.matrix(fit$qr)
    nr <- min(sum(good), nvars)
    if (nr < nvars) {
        Rmat <- diag(nvars)
        Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
    }
    else Rmat <- fit$qr[1:nvars, 1:nvars]
    Rmat <- as.matrix(Rmat)
    Rmat[row(Rmat) > col(Rmat)] <- 0
    names(coef) <- xnames
    colnames(fit$qr) <- xxnames
    dimnames(Rmat) <- list(xxnames, xxnames)
    names(residuals) <- ynames
    names(mu) <- ynames
    names(eta) <- ynames
    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
    names(weights) <- ynames
    names(y) <- ynames
    names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
        fit$rank))
    wtdmu <- if (intercept) 
        sum(weights * y)/sum(weights)
    else linkinv(offset)
    nulldev <- sum(dev.resids(y, wtdmu, weights))
    n.ok <- nobs - sum(weights == 0)
    nulldf <- n.ok - as.integer(intercept)
    resdf <- n.ok - fit$rank
    aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
    list(coefficients = coef, residuals = residuals, fitted.values = mu, 
        effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
            "rank", "qraux", "pivot", "tol")], family = family, 
        linear.predictors = eta, deviance = dev, aic = aic.model, 
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
        df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
        boundary = boundary)
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Feb 27 18:54:25 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 27 Feb 2002 13:54:25 -0500 (EST)
Subject: [Rd] rbinom rounds size argument
Message-ID: <Pine.LNX.4.30.0202271352210.25741-100000@bolker.zoo.ufl.edu>


  rbinom (R-1.4.1) silently rounds its "size" argument.
  The C code contains

    n = floor(nin + 0.5);

  I would argue that this should this either be documented or changed (to
return NA).  (The behavior is inconsistent with dbinom).

  I can submit a bug report if people agree it's a bug.

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Feb 27 23:10:02 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 27 Feb 2002 17:10:02 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
Message-ID: <20020227231002.GA4104@sonny.eddelbuettel.com>


As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
just fine and passes the desired options on to gcc/g++.

I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
other than by edting $RHOME/etc/Makeconf. 

While editing Makeconf is probably good enough for most users, it is not
something I can do during (automated, unattended) builds of Debian packages.
However, I need this to change the optimization switches for the survival
package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
r-recommended for details).

Is there an easy way to control these compiler switches?

Thanks, Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tod@gentoo.org  Thu Feb 28 01:15:27 2002
From: tod@gentoo.org (Tod M Neidt)
Date: 27 Feb 2002 19:15:27 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
In-Reply-To: <20020227231002.GA4104@sonny.eddelbuettel.com>
References: <20020227231002.GA4104@sonny.eddelbuettel.com>
Message-ID: <1014858928.28052.3.camel@Q.neidt.net>

On Wed, 2002-02-27 at 17:10, Dirk Eddelbuettel wrote:
> 
> As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
> just fine and passes the desired options on to gcc/g++.
> 
> I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
> other than by edting $RHOME/etc/Makeconf. 
> 
> While editing Makeconf is probably good enough for most users, it is not
> something I can do during (automated, unattended) builds of Debian packages.
> However, I need this to change the optimization switches for the survival
> package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
> architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
> r-recommended for details).
> 
> Is there an easy way to control these compiler switches?
> 
Hi!

If there isn't anyway to do this currently, I would "second" the request
for it to do so sometime in the future.  I am interested in creating
automated build scripts for another distribution.

Regards,

tod


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Michael.Jacob@bruker-axs.de  Thu Feb 28 09:57:42 2002
From: Michael.Jacob@bruker-axs.de (Michael.Jacob@bruker-axs.de)
Date: Thu, 28 Feb 2002 10:57:42 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202280957.KAA04663@pubhealth.ku.dk>

Full_Name: Michael Jacob
Version: 1.4.1
OS: Windows 2000 SP2
Submission from: (NULL) (195.27.237.226)


Hi,

there seems to be a bug in julian():

> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> julian(Sys.time())
Error in fromchar(x) : character string is not in a standard unambiguous format
> julian
function (x, ...) 
UseMethod("julian")
> julian.POSIXt
function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...) 
{
    if (length(origin) != 1) 
        stop("`origin' must be of length one")
    res <- difftime(as.POSIXct(x), origin, units = "days")
    structure(res, origin = origin)
}
> as.POSIXct("1970-01-01", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
[1] "1970-01-01 02:00:00 W. Europe Standard Time"
> 

The problem is, that as.POSIXct() does not parse the default argument to
julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
missing or equal to zero.

Best Regards

Michael

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 10:12:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 11:12:38 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202281012.LAA04863@pubhealth.ku.dk>

These are work correctly on my Windows 2000 and XP systems. That means the
bug must be in your Windows system if as I presume you are using the
binaries from CRAN.  Have you tried the advice in the rw-FAQ about trying
another msvcrt.dll?  That has solved a couple of the time-related problems.

On Thu, 28 Feb 2002 Michael.Jacob@bruker-axs.de wrote:

> Full_Name: Michael Jacob
> Version: 1.4.1
> OS: Windows 2000 SP2
> Submission from: (NULL) (195.27.237.226)
>
>
> Hi,
>
> there seems to be a bug in julian():
>
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > julian(Sys.time())
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > julian
> function (x, ...)
> UseMethod("julian")
> > julian.POSIXt
> function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...)
> {
>     if (length(origin) != 1)
>         stop("`origin' must be of length one")
>     res <- difftime(as.POSIXct(x), origin, units = "days")
>     structure(res, origin = origin)
> }
> > as.POSIXct("1970-01-01", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
> [1] "1970-01-01 02:00:00 W. Europe Standard Time"
> >
>
> The problem is, that as.POSIXct() does not parse the default argument to
> julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
> missing or equal to zero.
>
> Best Regards
>
> Michael
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aiesales@ns1.ehost2102.com  Thu Feb 28 12:49:28 2002
From: aiesales@ns1.ehost2102.com (aiesales@ns1.ehost2102.com)
Date: Thu, 28 Feb 2002 07:49:28 -0500
Subject: [Rd] Thanks For Lunch Mike
Message-ID: <200202281249.g1SCnR308796@mx03aba.westnet24.com>

Mike,


  Thanks again for lunch it was great!


Best regards,

Steve
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 16:20:04 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 17:20:04 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281620.RAA09131@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.0
OS: Solaris 8
Submission from: (NULL) (130.235.3.49)


When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
"cannot close output sink connection":
 
 % R --vanilla

 tmpfile <- tempfile()  # Create a filename that does not exist
 for(k in 1:100) {
   cat(k, ": ");
   try(fh <- file(tmpfile, "r"))
   close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
 }
 
1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
...
47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
Error in close.connection(file("tmp.txt", "w")) :
        cannot close output sink connection
 
It always happens after 48 failed file openings.


To me it looks like failed 'file(tmpfile, "r")' does not correctly
clean up after itself. And since 'fh' is never assigned it can neither
be solved by a 'close(fh)'.

FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
will produce a "sink stack is full" error.

FYI2: After the failure above, trying to call sink() will result in a
      "Segmentation fault" and [R] is stopped.

Background: I ran into this problem after have been running the same
script several times over several days I eventually ran into the problem.
It was hard to identify the problem, but I believe the above example shows
the core of it and I could not track the problem further.

Unfortunately, I do not have access to R v1.4.1 for Solaris 8.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 18:00:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 19:00:00 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281800.TAA09556@pubhealth.ku.dk>

On Thu, 28 Feb 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: R v1.4.0
> OS: Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> "cannot close output sink connection":
>
>  % R --vanilla
>
>  tmpfile <- tempfile()  # Create a filename that does not exist
>  for(k in 1:100) {
>    cat(k, ": ");
>    try(fh <- file(tmpfile, "r"))
>    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
>  }
>
> 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> ...
> 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> Error in close.connection(file("tmp.txt", "w")) :
>         cannot close output sink connection
>
> It always happens after 48 failed file openings.
>
>
> To me it looks like failed 'file(tmpfile, "r")' does not correctly
> clean up after itself. And since 'fh' is never assigned it can neither
> be solved by a 'close(fh)'.

It does correctly clean up: it should leave a connection which is not
opened.  That may not be the best design, but it is the design.

Take a look at closeAllConnections.

It's better to call file() and then open(), which will avoid the problem.


> FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> will produce a "sink stack is full" error.
>
> FYI2: After the failure above, trying to call sink() will result in a
>       "Segmentation fault" and [R] is stopped.
>
> Background: I ran into this problem after have been running the same
> script several times over several days I eventually ran into the problem.
> It was hard to identify the problem, but I believe the above example shows
> the core of it and I could not track the problem further.
>
> Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 19:16:08 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 20:16:08 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281916.UAA09739@pubhealth.ku.dk>

On Thu, 28 Feb 2002, Prof Brian Ripley wrote:

> On Thu, 28 Feb 2002 hb@maths.lth.se wrote:
> 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.0
> > OS: Solaris 8
> > Submission from: (NULL) (130.235.3.49)
> >
> >
> > When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> > "cannot close output sink connection":
> >
> >  % R --vanilla
> >
> >  tmpfile <- tempfile()  # Create a filename that does not exist
> >  for(k in 1:100) {
> >    cat(k, ": ");
> >    try(fh <- file(tmpfile, "r"))
> >    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
> >  }
> >
> > 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> > 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> > ...
> > 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> > Error in close.connection(file("tmp.txt", "w")) :
> >         cannot close output sink connection
> >
> > It always happens after 48 failed file openings.
> >
> >
> > To me it looks like failed 'file(tmpfile, "r")' does not correctly
> > clean up after itself. And since 'fh' is never assigned it can neither
> > be solved by a 'close(fh)'.
> 
> It does correctly clean up: it should leave a connection which is not
> opened.  That may not be the best design, but it is the design.
> 
> Take a look at closeAllConnections.

Accepting the design, calling file(tempfile(), open="r"), will, as
you say, create a "closed" connection as seen by
showConnections(all=TRUE) and it can be deleted by identifying the
connection id from the list and the closing it with

  fh <- getConnection(id)
  close(fh)

or one could call closeAllConnections(), which is not always what you
want. However, if one creates TOO MANY failed connections as above,
neither of the above works:

  % R --vanilla

  K <- 48; # K <- 47 is ok.
  tmpfile <- tempfile()
  for(k in 1:K) try(fh <- file(tmpfile, "r"))

will make [R] stall when closeAllConnections() is called. Doing Ctrl+C and
trying do anything, e.g. "ls() [ENTER]", will generate a "Segmentation
fault" or "0 [ENTER]" will generate a "Bus error". Trying to use

  fh <- getConnection(id)
  close(fh)

gives "Error in close.connection(fh) : cannot close output sink
connection". In this case there is not fatal quitting of [R].

I don't think it is a common thing to end up in this situation, but even
with the design you refer to, I still think something should be fixed
since it is possible to force [R] into an instable and unleavable state,
which is likely to crash [R].

> It's better to call file() and then open(), which will avoid the problem.

I definitely agree, now when you have told me.
 
> > FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> > will produce a "sink stack is full" error.
> >
> > FYI2: After the failure above, trying to call sink() will result in a
> >       "Segmentation fault" and [R] is stopped.
> >
> > Background: I ran into this problem after have been running the same
> > script several times over several days I eventually ran into the problem.
> > It was hard to identify the problem, but I believe the above example shows
> > the core of it and I could not track the problem further.
> >
> > Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

Thanks

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/bioinformatics/




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:48:19 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:48:19 +0100 (MET)
Subject: [Rd] pweibull.c (PR#1334)
Message-ID: <200202282048.VAA09961@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pweibull can be improved in the lower_tail=TRUE and
log_p=FALSE
case by using expm1.  Something like

-expm1(-pow(x / scale, shape)),

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:54:29 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:54:29 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200202282054.VAA09998@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pexp can be improved in the lower_tail=TRUE and log_p=FALSE
case by using expm1.  Something like

-expm1 (-x / scale);

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ford@signal.qinetiq.com  Fri Feb  1 11:37:18 2002
From: ford@signal.qinetiq.com (ford@signal.qinetiq.com)
Date: Fri, 1 Feb 2002 12:37:18 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011137.MAA15619@pubhealth.ku.dk>

Full_Name: Ashley Ford
Version: 1.4.0
OS: Windows NT4
Submission from: (NULL) (146.80.9.20)


I am suffering from a memory leak in read.table in the new precompiled windows
1.4.
it works fine in 1.3

Create a 90000 line file of 7 variables eg
perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
$i,$i*$e,3,4,5,6,7,8,9}' > n90000

R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

n9<-read.table("n90000")
Error: cannot allocate vector of size 75 Kb
In addition: Warning message: 
Reached total allocation of 63Mb: see help(memory.size) 
> gc()
         used (Mb) gc trigger (Mb)
Ncells 206781  5.6     467875 12.5
Vcells 109631  0.9     786432  6.0

On a machine with 512Mb it takes over 10 minutes before running out of memory

On Version 1.3.1  (2001-08-31)
it works fine 
date();n9<-read.table("n90000");date();str(n9)
[1] "Tue Jan 29 20:41:30 2002"
[1] "Tue Jan 29 20:43:29 2002"
`data.frame':   90000 obs. of  7 variables:
 $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
 $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
 $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
 $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
 $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
 $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
 $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> gc()
         used (Mb) gc trigger (Mb)
Ncells 278967  7.5     984024 26.3
Vcells 801283  6.2    2620390 20.0

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 11:45:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 12:45:40 +0100 (MET)
Subject: [Rd] Memory leak in read.table (PR#1292)
Message-ID: <200202011145.MAA15818@pubhealth.ku.dk>

This was not a memory leak: it just used more memory.  That should have
been evident from your gc() results, which were not showing extra
memory usage.

It is already fixed in the current version of R, 1.4.1.

On Fri, 1 Feb 2002 ford@signal.qinetiq.com wrote:

> Full_Name: Ashley Ford
> Version: 1.4.0
> OS: Windows NT4
> Submission from: (NULL) (146.80.9.20)
>
>
> I am suffering from a memory leak in read.table in the new precompiled windows
> 1.4.
> it works fine in 1.3

There are no such versions. This matters, as the problem does not
occur in 1.4.1, only 1.4.0, and the `new precompiled Windows 1.4' is in
fact 1.4.1.


> Create a 90000 line file of 7 variables eg
> perl -e '$e=exp(1);for($i=0;$i<90000;$i++){printf "%d".(" %f"x6)."\n",
> $i,$i*$e,3,4,5,6,7,8,9}' > n90000
>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> n9<-read.table("n90000")
> Error: cannot allocate vector of size 75 Kb
> In addition: Warning message:
> Reached total allocation of 63Mb: see help(memory.size)
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 206781  5.6     467875 12.5
> Vcells 109631  0.9     786432  6.0
>
> On a machine with 512Mb it takes over 10 minutes before running out of memory
>
> On Version 1.3.1  (2001-08-31)
> it works fine
> date();n9<-read.table("n90000");date();str(n9)
> [1] "Tue Jan 29 20:41:30 2002"
> [1] "Tue Jan 29 20:43:29 2002"
> `data.frame':   90000 obs. of  7 variables:
>  $ V1: num  2 3 4 5 6 7 8 9 10 11 ...
>  $ V2: num   5.44  8.15 10.87 13.59 16.31 ...
>  $ V3: num  3 3 3 3 3 3 3 3 3 3 ...
>  $ V4: num  4 4 4 4 4 4 4 4 4 4 ...
>  $ V5: num  5 5 5 5 5 5 5 5 5 5 ...
>  $ V6: num  6 6 6 6 6 6 6 6 6 6 ...
>  $ V7: num  7 7 7 7 7 7 7 7 7 7 ...
> > gc()
>          used (Mb) gc trigger (Mb)
> Ncells 278967  7.5     984024 26.3
> Vcells 801283  6.2    2620390 20.0
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From amurta@ipimar.pt  Fri Feb  1 15:49:08 2002
From: amurta@ipimar.pt (amurta@ipimar.pt)
Date: Fri, 1 Feb 2002 16:49:08 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011549.QAA21060@pubhealth.ku.dk>

Hi

I have written a small function to calculate distances between pairs of
landmarks ('my.dist' bellow). I gave it to a colleague that works with
MSWindows and the function doesn't give the right answer:

R 1.4.1 for Linux: 

> my.dist()
[1]  22 561  

R 1.4.1 for Windows:

> my.dist()
[1]  22 560
Warning message:
Replacement length not a multiple of the elements to replace in
matrix(...)


FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
same (wrong) answer as R 1.4.1 for Windows.


----------------------------------------------

xy3 <- matrix(round(100*runif(22*68)),22,68)

my.dist <- function(x = xy3){

 landmarks.x <- as.matrix(x[, 1:34])
 landmarks.y <- as.matrix(x[, 35:68])

 x1 <- c()
 x2 <- c()
 y1 <- c()
 y2 <- c()

 for(i in 1:(ncol(landmarks.x) - 1)) {
  x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
  x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
  y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
  y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
 }

 distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
 comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))

 dist.out <- matrix(distan, nrow(x), comb)
 dim(dist.out)
}


-- 
                           Alberto G. Murta                      
           IPIMAR - Institute of Fisheries and Sea Research
            Avenida de Brasilia, 1449-006 Lisboa, Portugal       
Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  1 16:16:54 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Feb 2002 17:16:54 +0100 (MET)
Subject: [Rd] Different behaviour in Linux and Windows (PR#1293)
Message-ID: <200202011616.RAA21394@pubhealth.ku.dk>

1) This is a random input, which might make it non-reproducible.

2) Solaris 2.7 gives 560 too.

You appear to be trying to calculate 34!/2*32! in a *very* inefficient
way, and then not rounding it.  And your answer depends on comb being an
integer.  So use (34*33)/2

In summary: you have used an unstable algorithm, and the bug is using that
algorithm.  For only slightly large inputs it would fail altogether.


On Fri, 1 Feb 2002 amurta@ipimar.pt wrote:

> Hi
>
> I have written a small function to calculate distances between pairs of
> landmarks ('my.dist' bellow). I gave it to a colleague that works with
> MSWindows and the function doesn't give the right answer:
>
> R 1.4.1 for Linux:
>
> > my.dist()
> [1]  22 561
>
> R 1.4.1 for Windows:
>
> > my.dist()
> [1]  22 560
> Warning message:
> Replacement length not a multiple of the elements to replace in
> matrix(...)
>
>
> FYI: S+ 2000 pro. rel.2 for Windows and S+ 6.0 for Linux both give the
> same (wrong) answer as R 1.4.1 for Windows.
>
>
> ----------------------------------------------
>
> xy3 <- matrix(round(100*runif(22*68)),22,68)
>
> my.dist <- function(x = xy3){
>
>  landmarks.x <- as.matrix(x[, 1:34])
>  landmarks.y <- as.matrix(x[, 35:68])
>
>  x1 <- c()
>  x2 <- c()
>  y1 <- c()
>  y2 <- c()
>
>  for(i in 1:(ncol(landmarks.x) - 1)) {
>   x1 <- c(x1, rep(landmarks.x[, i], ncol(landmarks.x) - i))
>   x2 <- c(x2, c(landmarks.x[,  - (1:i)]))
>   y1 <- c(y1, rep(landmarks.y[, i], ncol(landmarks.x) - i))
>   y2 <- c(y2, c(landmarks.y[,  - (1:i)]))
>  }
>
>  distan <- sqrt((x1 - x2)^2 + (y1 - y2)^2)
>  comb <- prod(ncol(landmarks.x):1)/(2 * prod((ncol(landmarks.x) - 2):1))
>
>  dist.out <- matrix(distan, nrow(x), comb)
>  dim(dist.out)
> }
>
>
> --
>                            Alberto G. Murta
>            IPIMAR - Institute of Fisheries and Sea Research
>             Avenida de Brasilia, 1449-006 Lisboa, Portugal
> Tel:+351 213027062; Fax:+351 213015849; http://www.ipimar.pt/pelagicos/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Fri Feb  1 16:30:46 2002
From: p.ribeiro@lancaster.ac.uk (p.ribeiro@lancaster.ac.uk)
Date: Fri, 1 Feb 2002 17:30:46 +0100 (MET)
Subject: [Rd] documentation for abline and terms.object (PR#1294)
Message-ID: <200202011630.RAA21517@pubhealth.ku.dk>

Hi
I found two small errors in the (HTML) documentation:

abline{base}:
abline(a, b, untf = FALSE,\ dots)
                          ^^^^^^
terms.object{base}:
there is no description for the argument "response"

Cheers
P.J.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Feb  1 17:34:36 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 1 Feb 2002 18:34:36 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202011734.SAA21991@pubhealth.ku.dk>


  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From forporphyry@hotmail.com  Fri Feb  1 19:19:25 2002
From: forporphyry@hotmail.com (forporphyry@hotmail.com)
Date: Fri, 1 Feb 2002 20:19:25 +0100 (MET)
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
Message-ID: <200202011919.UAA22550@pubhealth.ku.dk>

Dear Team,

Don't understand output below.  Please advise.  Windows98 and 
rw1041(patched) from 1/25/02.

Graham Lawrence


C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin


C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
Bad command or file name

C:\>Rcmd

C:\>Rcmd Install
Bad command or file name

C:\>dir C:\R\rw1041\bin

Volume in drive C has no label
Volume Serial Number is 0000-0000
Directory of C:\R\rw1041\bin

.              <DIR>        01-29-02 12:31p .
.             <DIR>        01-29-02 12:31p ..
BATCH                2,437  09-17-00 11:51p BATCH
HELPPR~1 BAT           436  12-28-99  2:25p helpPRINT.bat
R        DLL     1,532,416  01-23-02  4:39p R.dll
RBITMAP  DLL       132,608  01-23-02  4:42p Rbitmap.dll
RGUI     EXE         8,192  01-23-02 12:17p Rgui.exe
RPROXY   DLL        18,432  01-23-02 12:17p Rproxy.dll
RSETREG  EXE         8,192  01-23-02 12:17p RSetReg.exe
RTERM    EXE         9,216  01-23-02 12:17p Rterm.exe
RCHTML   DLL         4,096  01-16-02  6:01p Rchtml.dll
BUILD               10,458  01-23-02  4:43p build
CHECK               32,895  01-23-02  4:43p check
INSTALL              7,040  01-23-02  4:43p INSTALL
MASSAG~1             4,045  01-23-02  4:43p massage-Examples
RCMD     EXE         8,704  01-23-02  4:43p Rcmd.exe
RD2DVI   SH          8,862  01-23-02  4:43p Rd2dvi.sh
RD2TXT               1,012  01-23-02  4:43p Rd2txt
RDCONV               3,454  01-23-02  4:43p Rdconv
RDIFF    SH            811  01-23-02  4:43p Rdiff.sh
RDINDEX              4,141  01-23-02  4:43p Rdindex
REMOVE               2,352  01-23-02  4:43p REMOVE
RPROF                3,085  01-23-02  4:43p Rprof
SD2RD               16,834  01-23-02  4:43p Sd2Rd
SHLIB                2,483  01-23-02  4:43p SHLIB
        23 file(s)      1,822,201 bytes
         2 dir(s)     350,396,416 bytes free

C:\>set
TMP=c:\windows\TEMP
TEMP=C:\windows\TEMP
PROMPT=$p$g
winbootdir=C:\WINDOWS
COMSPEC=C:\COMMAND.COM
LOG=NUL
DSHD=C:
QRCD=N:
BOTD=C:
MFG=YES
ZIPD=D:
CPQD=N:
EN=EN
LANG=EN
LIB=c:\stdlib\lib
INCLUDE=c:\stdlib\include
HLP=c:\hpc21\
windir=C:\WINDOWS
BLASTER=A220 I5 D1 T4 P330
PATH=C:\BIN;C:\MINGW32;C:\PERL;C:\HTMLWORK;C:\R\RW1041\BIN;C:\TCL;C:\TCL\BIN
CMDLINE=Rcmd Install

C:\>


_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  1 21:19:49 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 01 Feb 2002 22:19:49 +0100
Subject: [Rd] Rcmd Install gives Bad command or file name (PR#1296)
References: <200202011919.UAA22550@pubhealth.ku.dk>
Message-ID: <3C5B0675.609D267B@statistik.uni-dortmund.de>

forporphyry@hotmail.com wrote:
> 
> Dear Team,
> 
> Don't understand output below.  

If you don't understand the output, why do you think it is a bug?
The question seems to belong to R-Help, not to R-Bugs.


> Please advise.  Windows98 and rw1041(patched) from 1/25/02.
> 
> Graham Lawrence
> 
> C:\>PATH=C:\bin;C:\mingw32;C:\Perl;C:\HtmlWork;C:\R\rw1041\bin;C:\Tcl;C:\Tcl\bin
> 
> C:\>Rcmd INSTALL C:\R\lattice_0.4-0.tar.gz
> Bad command or file name

Two solutions:
a) use slashes "/" instead of backslashes "\" in the path:
      Rcmd INSTALL C:/R/lattice_0.4-0.tar.gz

b) cd to "C:/R" and type "Rcmd INSTALL lattice_0.4-0.tar.gz"

> [...]

Uwe Ligges

BTW: There is a binary version (for windows) of lattice on CRAN.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:10 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:10 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1297)
Message-ID: <200202012254.XAA23376@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmat@coh.org  Fri Feb  1 22:54:35 2002
From: jlongmat@coh.org (jlongmat@coh.org)
Date: Fri, 1 Feb 2002 23:54:35 +0100 (MET)
Subject: [Rd] comment.char in read.fwf (PR#1298)
Message-ID: <200202012254.XAA23390@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: Version 1.4.0 Patched (2002-01-23)
OS: Windows NT 4.0
Submission from: (NULL) (151.152.101.44)


In read.fwf, ... args are passed to read.table, as stated in the documentation. 
However, passing comment.char in this manner is defeated by the call to scan
that precedes the call to read.table.  The problem is that scan has a default
comment.char="#", and read.fwf doesn't pass ... to scan.  A simple solution is
to put comment.char="" in the call to scan, so that the entire string is passed
to read.table.  That seems to be the intended purpose of the call to scan
anyway. 

Here is an example where I'd like to specify comment.char="" to turn off the
interpretation of comments altogether.
Contents of file test.dat:
123ABC123
123#3 123
123XYZ123

> read.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123  NA  NA
3 123 XYZ 123

Replacing this assignment in read.fwf:
    raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE, n = n)
with this in Xread.fwf:
   raw <- scan(file, what = "", sep = "\n", quote = "", quiet = TRUE,
      n = n, comment.char="")
we get:
Xread.fwf("test.dat", widths=c(3,3,3), sep="\t", comment.char="")
   V1  V2  V3
1 123 ABC 123
2 123 #3  123
3 123 XYZ 123

as we should.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 04:52:01 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 03 Feb 2002 23:52:01 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:24:19 -0800 (PST)"
References: <Pine.A41.4.44.0201301220150.117500-100000@homer04.u.washington.edu>
Message-ID: <px3d0hq26m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > I just tried it with CC=cc and FC=f77, and I got the coredump in the same
> > place.  This is on AIX 4.3.3 with Maintenance Level 09.
> 
> Hmm. According to R I have
>    platform rs6000-ibm-aix4.3.3.0
> 
> There's another few AIX users at CMU, so we should find out how widespread
> this is fairly soon.

I guess I'm one of them...  I recompiled R yesterday using gcc and g77
and have had no problems with compiling or 'make check' (On the same
platform as Thomas).

Since I don't have cc or f77 installed, I can't check what's going
wrong.  If you have a chance to use the GNU tools, my suggestion is to
do so.

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Feb  4 05:00:09 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 04 Feb 2002 00:00:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Thomas Lumley's message of "Wed, 30 Jan 2002 12:17:29 -0800 (PST)"
References: <Pine.A41.4.44.0201301155360.117500-100000@homer04.u.washington.edu>
Message-ID: <pxy9i9on8m.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley@u.washington.edu> writes:

> On Wed, 30 Jan 2002, Dan Million wrote:
> 
> > Thanks for the reply.  I tried building without the modules package, and
> > got past that point.  Now the build fails trying to link tcltk.so.  Seems
> > the tclConfig.sh on my host refers to a file that does not exist
> > (/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).
> >
> > I'll freely admit to being clueless about most of this.  I don't know
> > anything about R; I'm just a sysadmin trying to build/install it for a
> > user who needs it.
> 
> Our autodetection of tcl/tk is less reliable than most stuff, partly
> because the tclConfig.sh and similar files are sometimes inaccurate.  If
> your users don't need tcl/tk (which is a fairly low-level set of
> facilities for writing GUIs) you can again remove tcltk from the R_PKGS
> line of Makeconf, or reconfigure
>    ./configure --without-tcltk
> 
> If your users do need this package then you (or they) need to track down
> where tcl and tk lurk and provide this information to R. Probably the
> easiest way would be to install a new version of Tcl and Tk, which should
> produce an honest set of configuration files.

hmm, that used to be the case.  Up to around 8.0, 8.1? tcl/tk was
great in its installation.  Now it, eh, sucks.  The installation of
8.3 and 8.4 has more bugs than the one Dan pointed out.

Dan: you can look at tclConfig.sh and tkConfig.sh.  Some files are
referenced incorrectly--you have to change the filenames to the
installed version instead of the build version.  You'll also have to
get rid of comments in compiler flags.
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Tue Feb  5 13:44:54 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Tue, 05 Feb 2002 08:44:54 -0500
Subject: [Rd] htmlhelp() question
Message-ID: <3C5FE1D6.1040307@wfu.edu>

I wonder if anyone who has worked on the win32 version of
R could help me with a HtmlHelp question?

When you're building a win32 program using mingw (in my
case, cross-compiling under GNU/Linux), what import
library do you use to link against the HtmlHelp()
function?  I have got a copy of MS's htmlhelp.lib, but
mingw doesn't seem to like this format; it wants an
archive in .a format.  Since I know R uses htmlhelp
under win32, and I gather it's built using mingw, I
wonder if anyone has managed to create an htmlhelp.a
or hhctrl.a import library.

Thanks.

Allin Cottrell
Wake Forest University

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.ribeiro@lancaster.ac.uk  Wed Feb  6 14:19:25 2002
From: p.ribeiro@lancaster.ac.uk (Paulo Justiniano Ribeiro Jr)
Date: Wed, 6 Feb 2002 14:19:25 +0000 (GMT)
Subject: [Rd] chol: test for symmetry
Message-ID: <Pine.GSO.4.21.0202061414270.3556-100000@unixb.lancs.ac.uk>

Hi
Considering that the description of chol says:
"Compute the Choleski factorization of a symmetric (Hermitian), positive
definite square matrix."

I was wondering whether it would be worth adding a check for the
symmetry of the matrix.
As it is now the function returns "something" for a non-symmetric matrix:

> chol(cbind(c(2,1.5,0),c(1.5,1.8,.2),c(0,0.5,1.5)))
         [,1]      [,2]      [,3]
[1,] 1.414214 1.0606602 0.0000000
[2,] 0.000000 0.8215838 0.6085806
[3,] 0.000000 0.0000000 1.0628404


Cheers
P.J


Paulo Justiniano Ribeiro Jr
Dept Maths & Stats  -  Fylde College
Lancaster University
Lancaster LA1 4YF   -  U.K.

e-mail: Paulo.Ribeiro@est.ufpr.br
http://www.maths.lancs.ac.uk/~ribeiro (english)
http://www.est.ufpr.br/~ribeiro (portugues)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 01:38:13 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Wed, 6 Feb 2002 20:38:13 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC855F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>

On Tue, 5 Feb 2002, Liaw, Andy wrote:

> I thought it was documented that htmlhelp can not be built with
> cross compilers.

Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
MkChmDll script in the R sources.  This looked promising: it builds a
libhhctrl.a import library by a sort of "fakery", echoing the
appropriate function name into a .def file and then compiling an .a
lib with dlltool, with only this .def as input. I tried this, and my
program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
specific) says:

<myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16

and aborts at startup.

The machine I tested on has hhctrl.ocx in windows/system OK.

Looking back at the R sources it seems that libhhctrl.a is somehow
tied up with Rchtml.dll, in the source for which it is stated,

"Can be built with VC++6 ..."

So at this point I wonder if Andy is right: is there really any way to
import the HtmlHelp() function without using a Microsoft compiler?

It seems as if there ought to be a way, but it might involve having
access to the source code for HHCTRL.OCX, whatever sort of beast that
may be.

Or am I (I hope) missing something?

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Feb 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202070615.g176F3e31806@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1157 *
Subject: identify(...plot=F)
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Fri, 2 Nov 2001 09:43:49 +0800 (WST)
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb  7 07:49:57 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 7 Feb 2002 07:49:57 +0000 (GMT)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.LNX.4.44.0202062021220.13868-100000@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>

Let me stress that the R instructions do work, Rchtml.dll is by default
built with mingw, and it also works when cross-compiled under mingw.

Also, there is no `fakery': what is done is a standard way to build an
import library.

On Wed, 6 Feb 2002, Allin Cottrell wrote:

> On Tue, 5 Feb 2002, Liaw, Andy wrote:
>
> > I thought it was documented that htmlhelp can not be built with
> > cross compilers.
>
> Hmm, I begin to wonder.  Brian Ripley offered me a reference to the
> MkChmDll script in the R sources.  This looked promising: it builds a
> libhhctrl.a import library by a sort of "fakery", echoing the
> appropriate function name into a .def file and then compiling an .a
> lib with dlltool, with only this .def as input. I tried this, and my
> program (which calls HtmlHelp()) linked just fine using libhhctrl.a.
> But I'm afraid it wouldn't run.  At runtime, Windows (win98, to be
> specific) says:
>
> <myprog> linked to missing export HHCTRL.OCX:HtmlHelpA@16
>
> and aborts at startup.
>
> The machine I tested on has hhctrl.ocx in windows/system OK.
>
> Looking back at the R sources it seems that libhhctrl.a is somehow
> tied up with Rchtml.dll, in the source for which it is stated,
>
> "Can be built with VC++6 ..."
>
> So at this point I wonder if Andy is right: is there really any way to
> import the HtmlHelp() function without using a Microsoft compiler?
>
> It seems as if there ought to be a way, but it might involve having
> access to the source code for HHCTRL.OCX, whatever sort of beast that
> may be.
>
> Or am I (I hope) missing something?
>
> Allin Cottrell.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 14:28:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 7 Feb 2002 09:28:24 -0500
Subject: [Rd] Problems sending email to r-bugs
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>


Hi all,

I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
the bug report has not shown up in the database, nor does it appear to have
been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
messages or warnings from the mail server, so I'm not sure what is wrong. Is
there a problem with r-bugs@biostat.ku.dk or is it on my end?

I'm including the text of my bug report below. 

-Greg

-----------------------

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which 
> include pie charts.   (NB: No piechart arguments please, the 
> main chart on the page is a proper bar chart representing the 
> same information.)
> 
> When I plot pie charts in a column, the piechart at the top 
> of a column is always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 
> 2/3 of the others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in 
> the second column:
> 
> 
> This occurs both on the x11 and postscript devices, although 
> it is less noticeable on the latter.  It doesn't seem happen 
> for 'hist' or 'plot'. As I've only recently started using 
> layout, I don't know if this occurs with other plotting 
> devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 15:15:35 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 16:15:35 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <x2heote31k.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> the bug report has not shown up in the database, nor does it appear to have
> been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> messages or warnings from the mail server, so I'm not sure what is wrong. Is
> there a problem with r-bugs@biostat.ku.dk or is it on my end?
> 
> I'm including the text of my bug report below. 

We had a switch of IP addresses over the weekend and Jitterbug uses an
explicit IP address in the config file...

Will fix, please retry.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@wfu.edu  Thu Feb  7 15:21:29 2002
From: cottrell@wfu.edu (Allin Cottrell)
Date: Thu, 7 Feb 2002 10:21:29 -0500 (EST)
Subject: [Rd] htmlhelp() question
In-Reply-To: <Pine.GSO.4.44.0202070744510.10137-100000@auk.stats>
Message-ID: <Pine.LNX.4.44.0202071020170.31581-100000@ricardo.ecn.wfu.edu>

On Thu, 7 Feb 2002, Prof Brian D Ripley wrote:

> Let me stress that the R instructions do work, Rchtml.dll is by default
> built with mingw, and it also works when cross-compiled under mingw.
>
> Also, there is no `fakery': what is done is a standard way to build an
> import library.

Sorry, I don't know much about Windows dlls (as is probably obvious).
I will study harder and have another go at it.

Allin Cottrell.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Feb  7 15:45:58 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Feb 2002 10:45:58 -0500
Subject: [Rd] Problems sending email to r-bugs
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
Message-ID: <3C62A136.578BF04A@bank-banque-canada.ca>

"Warnes, Gregory R" wrote:
> 
> Hi all,
> 
> I've twice tried to send a bug report to r-bugs@biostat.ku.dk ...

Are you sending email directly or using bug.report()? If you are using
bug.report(), what editor are you using? The reason I ask is that some editors
(e.g. nedit) spawn another process and return, in which case the Unix version of
bug.report() throws away everything you type and sends an almost empty message,
with no warning. This is a known, reported, bug. The fix is to add an argument
wait=TRUE as in the Windows version.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 16:07:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 17:07:57 +0100
Subject: [Rd] Problems sending email to r-bugs
In-Reply-To: <x2heote31k.fsf@blueberry.kubism.ku.dk>
References: <5429125E11E4D411AF7300805FE603A8040DE619@groexmbcr02.pfizer.com>
 <x2heote31k.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21yfxe0ma.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > Hi all,
> > 
> > I've twice tried to send a bug report to r-bugs@biostat.ku.dk ,  however,
> > the bug report has not shown up in the database, nor does it appear to have
> > been copied to R-devel.  One message was sent Tue Feb-05-2002 at 4:12pm EST,
> > I resent at Wed Feb-06-2002 at 12:52 EST.    I haven't recieved any error
> > messages or warnings from the mail server, so I'm not sure what is wrong. Is
> > there a problem with r-bugs@biostat.ku.dk or is it on my end?
> > 
> > I'm including the text of my bug report below. 
> 
> We had a switch of IP addresses over the weekend and Jitterbug uses an
> explicit IP address in the config file...
> 
> Will fix, please retry.

Sorry, it's still not working. A link involved in the home directory
of r-bugs got removed on the mail server, so .forward processing is
off. The messages are sitting in the inbox. 

I can't fix this today (no permissions on the mail server).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 18:10:34 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 7 Feb 2002 19:10:34 +0100 (MET)
Subject: [Rd] testing (PR#1299)
Message-ID: <200202071810.TAA06333@pubhealth.ku.dk>

Just testing the email interface...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Feb  7 18:12:14 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Thu, 7 Feb 2002 19:12:14 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202071812.TAA06359@pubhealth.ku.dk>


Third try...

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which include pie
> charts.   (NB: No piechart arguments please, the main chart on the page is
> a proper bar chart representing the same information.)
> 
> When I plot pie charts in a column, the piechart at the top of a column is
> always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 2/3 of the
> others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in the second
> column:
> 
> 
> This occurs both on the x11 and postscript devices, although it is less
> noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> I've only recently started using layout, I don't know if this occurs with
> other plotting devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Feb  7 18:13:00 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Thu, 7 Feb 2002 19:13:00 +0100 (MET)
Subject: [Rd] PR# 1147
Message-ID: <200202071813.TAA06390@pubhealth.ku.dk>

Apropops todays automatic bug report: The bug #1147 I reported
(postscript, problems with screen layout) which I treported some time
ago, does not anymore occur R1.4.0, windows 98, when I test with the
same code that caused the original problem. Fixed as a by-product of the
internal changes to graphics code?

Kjetil Halvorsen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Feb  7 18:13:46 2002
From: joehl@web.de (joehl@web.de)
Date: Thu, 7 Feb 2002 19:13:46 +0100 (MET)
Subject: [Rd] incorrect handling of arrays of list elements (PR#1301)
Message-ID: <200202071813.TAA06413@pubhealth.ku.dk>



After checking with the prototype I hope the following to justifies a bug-report:

# you find pure replication syntax at the end


> # the prototype allows for the following, which fails in R
> matrix(vector("list", 6), 3, 2)
Error in matrix(vector("list", 6), 3, 2) : 
        Unimplemented feature in copyVector
> 
> # however the desired object seems to be legally in R as we get the same via
> tt <- vector("list", 6)
> dim(tt) <- c(3,2)
> tt
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # preparing to show further problems
> tt[[1,1]] <- letters
> tt
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # works fine
> tt[[1,1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"
> 
> # the prototype allows subscripting and assigning to subscripted such objects 
> 
> # erroneously NULL in R
> tt[1,1]
[[1]]
NULL

> 
> # erroneously NULL in R
> tt[1,]
[[1]]
NULL

[[2]]
NULL

> 
> # erroneously NULL in R
> tt[, 1]
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

> 
> # erroneously NULL in R
> tt[,]
     [,1]   [,2]  
[1,] "NULL" "NULL"
[2,] "NULL" "NULL"
[3,] "NULL" "NULL"
> 
> # fine in R
> tt[]
     [,1]           [,2]  
[1,] "Character,26" "NULL"
[2,] "NULL"         "NULL"
[3,] "NULL"         "NULL"
> 
> # fine in R
> tt[cbind(1,1)]
[[1]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"

> 
> # of course the same problems in assignments 
> tt[1,1] <- tt[1,1]
Error: incompatible types in subset assignment
> tt[1,1] <- list(letters)
Error: incompatible types in subset assignment
> tt[1,] <- tt[1,]
Error: incompatible types in subset assignment
> tt[,1] <- tt[,1]
Error: incompatible types in subset assignment
> tt[,] <- tt[,]
Error: incompatible types in subset assignment
> 
> # and again fine
> tt[[1]] <- tt[[1]] 
> tt[] <- tt[]
> tt[cbind(1,1)] <- tt[cbind(1,1)] 
> 


# the prototype allows for the following, which fails in R
matrix(vector("list", 6), 3, 2)

# however the desired object seems to be legally in R as we get the same via
tt <- vector("list", 6)
dim(tt) <- c(3,2)
tt

# preparing to show further problems
tt[[1,1]] <- letters
tt

# works fine
tt[[1,1]]

# the prototype allows subscripting and assigning to subscripted such objects 

# erroneously NULL in R
tt[1,1]

# erroneously NULL in R
tt[1,]

# erroneously NULL in R
tt[, 1]

# erroneously NULL in R
tt[,]

# fine in R
tt[]

# fine in R
tt[cbind(1,1)]

# of course the same problems in assignments 
tt[1,1] <- tt[1,1]
tt[1,1] <- list(letters)
tt[1,] <- tt[1,]
tt[,1] <- tt[,1]
tt[,] <- tt[,]

# and again fine
tt[[1]] <- tt[[1]] 
tt[] <- tt[]
tt[cbind(1,1)] <- tt[cbind(1,1)] 



> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R 



Best regards

Jens Oehlschlaegel

________________________________________________________________
Keine verlorenen Lotto-Quittungen, keine vergessenen Gewinne mehr! 
Beim WEB.DE Lottoservice: http://tippen2.web.de/?x=13




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 18:15:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 19:15:14 +0100 (MET)
Subject: [Rd] Re: [R] expressions in legends (PR#1302)
Message-ID: <200202071815.TAA06435@pubhealth.ku.dk>

Robert Cunningham wrote:
> 
> Dear R-users,
> 
> A few days ago I met the problem of using text produced with
> expression() in legend() being elevated relative to text produced
> without the expression() so that the alignment with pch and lty is
> also messed up. After ferreting through the help I finally came across
> an answer, the adj argument of legend(). You can see and example of
> this in the Math expressions example section of ?legends. Of course,
> many users would, I am sure, overlook this option and 'put up' with
> the mis-aligned legend. I wonder why expression() causes this problem
> and whether anything can be done about it (other that the adj hack).
> 
> For those unaware of the problem paste this example into your R.
> 
> plot(1:10,1:10)
> legend(1,10,"Non expression_species",pch=21,lty=1,bty='n')
> legend(5,10,expression(italic("Expression species")),pch=21,lty=1,bty='n',col=2)
> legend(8.1,10,expression(italic("E. species")),pch=21,lty=1,bty='n',col=2,adj=c(0,0.6))
> 
> The first legend key is ordinary text, the second expression(italic())
> with no adjustment, the third with the adjustment.


This looks like a bug, so moved to r-bugs.

Let's simplify your example:

 plot(1:10)
 text(5, 10, "No expression ", adj=1)
 text(5, 10, expression(" expression"), adj=0)

So the bug is in text(), not in legend.
I'll try to investigate the problem later this day / week.

Uwe Ligges


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Feb  7 18:16:14 2002
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 7 Feb 2002 19:16:14 +0100 (MET)
Subject: [Rd] typo and user-proofing in odesolve() (PR#1295)
Message-ID: <200202071816.TAA06457@pubhealth.ku.dk>

Forward to r-bugs to maintain a record.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711
----- Forwarded by Woodrow Setzer/RTP/USEPA/US on 02/04/02 08:53 AM
-----
                                                                                                                      
                    Woodrow Setzer                                                                                    
                                         To:     bolker@zoo.ufl.edu                                                   
                    02/01/02 03:23       cc:     owner-r-devel@stat.math.ethz.ch                                      
                    PM                   Subject:     Re: [Rd] typo and user-proofing in odesolve() (PR#1295)         
                                         (Document link: Woody Setzer)                                                
                                                                                                                      



Probably r-devel is not the right place for this discussion, since
odesolve is not an "official" part of R (not even a recommended
package).  I'll respond here to get it in the record, though.  I expect
to have a new release of odesolve ready in a couple of weeks.  lsoda
already calls func() once, to determine the number of "extra" values
returned; it was foolish of me not to test for the kind of value
returned at the same time.  That fix is already in the next release.
I'll see what other defensive checking can be done, as well.
Thanks for the spelling correction.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                              
                    bolker@zoo.ufl.edu                                                                                        
                    Sent by:                     To:     r-devel@stat.math.ethz.ch                                            
                    owner-r-devel@stat.ma        cc:                                                                          
                    th.ethz.ch                   Subject:     [Rd] typo and user-proofing in odesolve() (PR#1295)             
                                                                                                                              
                                                                                                                              
                    02/01/02 12:34 PM                                                                                         
                                                                                                                              
                                                                                                                              





  A couple of minor points about the odesolve package
(which I am otherwise enjoying very much):

 1. "scalar" is misspelled as "scaler" in the definitions of
the rtol and atol parameters

 2. it is possible to crash R by doing something dumb, e.g
failing to read the documentation carefully enough and (a)
returning only a vector of derivatives and not a list of
(derivatives, global values) and (b) making the derivative
vector shorter than the vector of initial conditions (see example
below).

  I know that this is my fault, but it might be possible/useful
to "user-proof" lsoda() some more (try func() once and see if
it returns a list of the appropriate form, check the derivative
vector for length matching the IC vector, etc ...

tderiv <- function(t,x,parms) {
#  return(list(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]
+x[2])),NULL))
   return(c(x[1]*parms[1],x[2]*parms[2],parms[3]*(x[1]+x[2])))
}

lsoda(rep(1,2),c(0:20),tderiv,c(0.01,-0.01,1.2))


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:16:23 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:16:23 +0100 (MET)
Subject: [Rd] failure of http://r-bugs.biostat.ku.dk/cgi-bin/R (PR#1303)
Message-ID: <200202071816.TAA06475@pubhealth.ku.dk>

Hi,

The following script

	http://r-bugs.biostat.ku.dk/cgi-bin/R

fails with the following error

	The system encountered a fatal error
	After command: 
	Received: 
	The last error code was: No route to host 

	Web interface using JitterBug.

when trying to submit a new bug.

Best Regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From papadopo@shfj.cea.fr  Thu Feb  7 18:17:24 2002
From: papadopo@shfj.cea.fr (papadopo@shfj.cea.fr)
Date: Thu, 7 Feb 2002 19:17:24 +0100 (MET)
Subject: [Rd] R loads uncorrect readline library (PR#1304)
Message-ID: <200202071817.TAA06501@pubhealth.ku.dk>

Hello,

We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.

Running R on Red Hat 7.2 fails with the following error message:

$ R
/usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
libreadline.so.4.1: cannot open shared object file: No such file or directory
$ 

This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
readline-4.2. Both are supposed to be binary compatible.

R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

Best regards,
Dimitri



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Feb  7 21:26:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Feb 2002 22:26:15 +0100
Subject: [Rd] R loads uncorrect readline library (PR#1304)
In-Reply-To: <200202071817.TAA06501@pubhealth.ku.dk>
References: <200202071817.TAA06501@pubhealth.ku.dk>
Message-ID: <x23d0dasqw.fsf@blueberry.kubism.ku.dk>

papadopo@shfj.cea.fr writes:

> Hello,
> 
> We have built R 1.4.1 on Red Hat 7.1 for use on both Red Hat 7.1 and 7.2.
> 
> Running R on Red Hat 7.2 fails with the following error message:
> 
> $ R
> /usr/local/r-1.4.1/lib/R/bin/R.bin: error while loading shared libraries: 
> libreadline.so.4.1: cannot open shared object file: No such file or directory
> $ 
> 
> This is because Red Hat 7.1 provides readline-4.1 while Red Hat 7.2. provides
> readline-4.2. Both are supposed to be binary compatible.
> 
> R should attempt to load  libreadline.so.4 instead of libreadline.so.4.1.

A build issue, rather than a bug in R as such. This is what happens
when you build against libreadline on RH7.1.

RedHat supplies the readline41-4.1-10 package in 7.2 for
compatibility, which is the preferred workaround.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:54:27 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:54:27 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072154.WAA07020@pubhealth.ku.dk>

gregory_r_warnes@groton.pfizer.com wrote:
> 
> Third try...
> 
> >  -----Original Message-----
> > From:         Warnes, Gregory R
> > Sent: Tuesday, February 05, 2002 4:12 PM
> > To:   'R-bugs'
> > Subject:      layout and piechart diameter problem
> >
> >
> > I've been using layout to create some graphics pages which include pie
> > charts.   (NB: No piechart arguments please, the main chart on the page is
> > a proper bar chart representing the same information.)
> >
> > When I plot pie charts in a column, the piechart at the top of a column is
> > always smaller than the others:
> >
> > For example:
> >
> >       layout( matrix(c(1,1,2,
> >                        1,1,3,
> >                        1,1,4), ncol=3, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> > In column 3, the first piechart has a radius something like 2/3 of the
> > others.
> >
> > This also happens for:
> >
> >       layout( matrix(c(1,2,
> >                        1,3,
> >                        1,4), ncol=2, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> >
> > For this:
> >
> >       layout( matrix(c(1,3,
> >                        1,4,
> >                        2,5), ncol=2, byrow=T))
> >       for(i in 1:5) piechart( 1:3 )
> >
> > the piechart at the bottom left is smaller than the three in the second
> > column:
> >
> >
> > This occurs both on the x11 and postscript devices, although it is less
> > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > I've only recently started using layout, I don't know if this occurs with
> > other plotting devices or commands.

Probably only if the functions are making use of par("pin") (and friends
?) as piechart() does:

layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
par("pin")
plot(1); par("pin")  # Here it goes wrong for the next plot.
plot(1); par("pin")
plot(1); par("pin")
plot(1)


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Feb  7 21:59:16 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 7 Feb 2002 22:59:16 +0100 (MET)
Subject: [Rd] FW: layout and piechart diameter problem (PR#1300)
Message-ID: <200202072159.WAA07049@pubhealth.ku.dk>



Uwe Ligges wrote:
> 
> gregory_r_warnes@groton.pfizer.com wrote:
> >
> > Third try...
> >
> > >  -----Original Message-----
> > > From:         Warnes, Gregory R
> > > Sent: Tuesday, February 05, 2002 4:12 PM
> > > To:   'R-bugs'
> > > Subject:      layout and piechart diameter problem
> > >
> > >
> > > I've been using layout to create some graphics pages which include pie
> > > charts.   (NB: No piechart arguments please, the main chart on the page is
> > > a proper bar chart representing the same information.)
> > >
> > > When I plot pie charts in a column, the piechart at the top of a column is
> > > always smaller than the others:
> > >
> > > For example:
> > >
> > >       layout( matrix(c(1,1,2,
> > >                        1,1,3,
> > >                        1,1,4), ncol=3, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > > In column 3, the first piechart has a radius something like 2/3 of the
> > > others.
> > >
> > > This also happens for:
> > >
> > >       layout( matrix(c(1,2,
> > >                        1,3,
> > >                        1,4), ncol=2, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > >
> > > For this:
> > >
> > >       layout( matrix(c(1,3,
> > >                        1,4,
> > >                        2,5), ncol=2, byrow=T))
> > >       for(i in 1:5) piechart( 1:3 )
> > >
> > > the piechart at the bottom left is smaller than the three in the second
> > > column:
> > >
> > >
> > > This occurs both on the x11 and postscript devices, although it is less
> > > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > > I've only recently started using layout, I don't know if this occurs with
> > > other plotting devices or commands.
> 
> Probably only if the functions are making use of par("pin") (and friends
> ?) as piechart() does:
> 
> layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
> par("pin")
> plot(1); par("pin")  # Here it goes wrong for the next plot.
> plot(1); par("pin")
> plot(1); par("pin")
> plot(1)

And let me add, it is everytime the second one:

layout(matrix(c(1,3, 1,4, 2,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,2, 1,4, 3,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,3, 1,2, 4,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Feb  8 13:25:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 8 Feb 2002 05:25:27 -0800
Subject: [Rd] timing Mac R's
Message-ID: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>


--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Here is the same thing as before, now done a bit more systematically. The
rather bad performance of R-patched on eigen is a mystery (to me), the 
gain
in La.eigen when using ATLAS is probably not Altivec, but using
threaded level 3 BLAS on a dual processor machine.


--Apple-Mail-1-507788993
Content-Disposition: attachment;
	filename=timing.pdf
Content-Transfer-Encoding: base64
Content-Type: application/pdf;
	x-unix-mode=0644;
	name="timing.pdf"

JVBERi0xLjMKMyAwIG9iaiA8PAovTGVuZ3RoIDEzODAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNv
ZGUKPj4Kc3RyZWFtCnjafRfLcts47O6v8G3lGYvhUxL35jpJN50m3TruNjNtD4qsxJoqlleW67Zf
vwBByS9lRweAIADiTUoMOXxiKI1h0sphpDQTPB5mL4M388HFtYmHQjBrzHD+5Fjniy/B/Ob25u7t
KFTSBLeTkTHBlBazP+5H3+bvLq5FNLTMRgqlhGEK1qG0LEkSp+DdKOLB5G4USsODyyuC76+uPn0m
8UgenBozE4lhaCTTJnLi047Lwp5GpoSZWHrzPozCSAagPRLB3OFXDr9zOFH2du4PCoVOmBAKTOXM
SuGUCTYKBec8uFk1dbXYZk1RrcBgkfAoEKgFTg2FYlaTb7IVeJOvsuVLWn8Hbik0D2QPt2q5p2n9
6BRDJH6MhAnyekMn8UjGJ7Kxlz0wjiQ/3BN8wDOjKH7lTHkqNy3TzabIUIrLJFC9Uuq10ywolBgT
ldgTWbJUt5KXab0rvPQ/IyHEgZtaR4HuOVjv3ZyRpGBAA1TxRL0i0nk4C9dpky3zhcuZ5YHp5Vd7
/kU+glKmHJQYkSTWJ1LklelyV62ycot+bKgyTBA5fgGFxKUehjpmkY3agjqvcegRqZWv35vz8tZQ
3tZv78tYuIBIX/CXjvLJ4dMDnhuHt03RV/YKOlNHR2WPKVbSBs2y2BC2qpqcsJ2HWfWyTmu/eKq2
EI2gptVBBXvx6ongrGX3nLdpRggWE8IHRnC+9Jq/cqHrTUMLsAYDGzrzo6MkNiggE7NvJcBnYVss
iT7uKxGMgWrVXq4CrCa0WdZ5TkLOQ6RR7V48CEHrQx/BZh1pZ/N5de2LXp0EBimk32hvB1AgVFCA
6HZWpCXRvB/jE1YuL3h0wWXLtK/147M6xefWHWhOoiBdoXBs/RGAHBwRJz3tEduTg2JKNkLUbRjH
6EBzz1uVXYJA4aHseYth8UH/BfV2RUjhoRs9SRI8jPvoMY4kl97WowOWKea+m3dAeKkWeb+WVvtu
WWRLz5ynK2/Uri/ZdZ6W5S+aU4ti0xSr522xWRJhU/w8m/AbRqPivKApXtoGL2m2LFZ+sfNwu/GI
ixHAlMBiSzUDY/LtX7+J9lYTbCrM3Q6qHK6jsddXNEvCnNcAHwgIDoNXEf6VG24+KgtQ9DQgJYsi
fXov/L97SsVdOSB+VEpKJc473MBhU5RY2rgioxG7/fuzR+rpmEScHUiCEHnpJ5l5xM0dQBrfqn2T
5PrDDB8o89nkjmGq/TDCeut6OTkdcrjrZwXkoiyJsjcbyT7WQH/OMiJJON1dnkDEKE/W6zLv6YTj
wGiNGkILrzXlcuJI5LhWbXiQK44JIce1H3dIOfYSKfN263QCoVw7Sc9LnsIsZTs0FLx93k/uW1La
EAahcHyw7eOA18GYKCSJhIMZBkuqKdV7L59lACiPMMT7TQQvuAgm7tExd+bhulo3xUvx29UVlz5K
QKcoAULthBg2EULMUsFyiJkRes9YHpuHJEXgTXeaK2anHcbEIl+Me0ztusgPeZwaq+fS4+s6z4p2
onMwP6/Tpr1MuB8KgEzKptjbk2GN9DQildbnUcIDkBNwGablpiKsSb+PREd3xiBSrddV3WxXRfPL
73j+7jWAi7x4zldeI/ojrAzepwx3g3ZLunF7pPwHmpzWRbV9/Zo/vUE53Tamex2278tq2xBSwuxM
a8LT8jl/rFNaPLYvdBeawdV8IPzvUChkwuABBn8dlnF4LsH/0L+DL9/4cDHgw3cDzpRNhjvAYUha
O3wZGMviOPLLcnA/+Ngp65yA55Wx+1+rg3+k9s/qMm3ynj8oy1QUe5Y/yfZrcGOb1v6mScYEJeeS
dQoSUBA5BdqwGHSF7asP36Gtz/8BvaNwgWVuZHN0cmVhbQplbmRvYmoKMiAwIG9iaiA8PAovVHlw
ZSAvUGFnZQovQ29udGVudHMgMyAwIFIKL1Jlc291cmNlcyAxIDAgUgovTWVkaWFCb3ggWzAgMCA2
MTIgNzkyXQovUGFyZW50IDEyIDAgUgo+PiBlbmRvYmoKMSAwIG9iaiA8PAovRm9udCA8PCAvRjU3
IDUgMCBSIC9GMTYgNyAwIFIgL0Y2MiA5IDAgUiAvRjU2IDExIDAgUiA+PgovUHJvY1NldCBbIC9Q
REYgL1RleHQgXQo+PiBlbmRvYmoKMTUgMCBvYmogPDwKL0xlbmd0aCA1OTUgICAgICAgCi9GaWx0
ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp42s1W227TQBB9z1dYfnIE3u6svTcJHpISRC+0Uhsu
UikSFBcsEQcS94G/Z3fWDd7ENU4wAUWZPY5nzpwdr+IDATUfCIAJIiQLhNJEaRXczAbj6eDgOYhA
ES1EML3FzOmnq4gNY+A6VdHxUNBodDaMGafRs4lbTyeTV2+G19NjLAYgmnNbDYkkKk2DmCVEgyMi
Lk+weh4nLE2qVuNVgiZcpPa+ItzodLdNSwGRESBYdIjxBcaXGEcYLzDnxBFxXesUgwAizE8xo0Qz
hpRf8q8fs0X5JL69K27KfF68o5zaAIaH0ggO7A/zuzJbWLDMvq8SHnsX4aPQrjFgreluNMdg9p4q
bPRtkRelTQ+rlo6/eMopDTdqpF+z/LEssxkp81lmL7P8c4ZCKyoLDY1lqX/bVPyXjLJ9UkCbRrW9
DMvT887+BeX6tE4/kC5Hq12JIen/LOxIKvegtGFquxyzB8Rs+wx7YlX7YA2X818zE9sOzBbbdVHM
FzPX/r34g1Ftz6f+Lp83Hhn2sB3Z83b2wrfuChgnVArzCuYENMceyW9twWG7Lai/+MeIzzEao5DI
NHqNF847XCC+xHi0SrWeYlNrDKky5ggqvwCVWKjkclnLRZMDlZ6jwlmj80u3viVNbqQqMa6EiGra
V3DtTkyTR2h4OpjPUpNyNqrsiiYy9eDq9j3oSMOEB3elAeXBVhrZPgT8X36ob0LrfbmZqfbxKuEe
dCMyx9CDXTewScN93FUPTqL51d7tGVBCtQe7bmGdBrQHdzsRRgL3YBPNYDId/ATwmkQvZW5kc3Ry
ZWFtCmVuZG9iagoxNCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMTUgMCBSCi9SZXNv
dXJjZXMgMTMgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVu
ZG9iagoxMyAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNjIgOSAwIFIgL0Y1OSAxNyAw
IFIgL0Y1NyA1IDAgUiA+PgovUHJvY1NldCBbIC9QREYgL1RleHQgXQo+PiBlbmRvYmoKMjAgMCBv
YmogPDwKL0xlbmd0aCA2NjcgICAgICAgCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp4
2qWWy27bMBBF9/4KIZvKC034fhToIk2bwkWTArV2aRa2ozQGYiuw3EX/vqQo2Ro/VIWFFjoih5cU
pZlLmhB30YQpC8ayRBl/N8liNfqYjy5vqEoMWKWS/KmOzB/v03xyO7n7Ms44k+nt1ViQ9Do8/Hg3
HWdUCi1SPn7Iv17eSJtQClZKPz6jggNjScY4WFpL3dOHcaYISS++zeB5+TIvNtvQsP5ACSEXXsZN
m1E3RJj9GCZczN1ViNUGuEG4625hoAwTCGNllELYK6MPNqIq91ughr0/lSAZwqiFu7FEIxy6cCwj
gEqEQ1dz9P767Ptz0pmRCQFEYt4FtHBm6ViIcxAIhy79QEaBZZhPradOr31+OFkmQDayLlWgSSLd
CapzhzaZOFm7fBMyvX6ZVdVyASdEpQajTBM/rffWj3gqN00wIZ1oroG73QnR6xChutO76sBV0//p
xHSUgRJtgA5zPZZF5Uml67KZ/iehYr2snkPzvFjMfldF6CqfQuOqWJWbP6HtdVPOX4pVBaerCgVF
jAMNzMqD3+mgqMihNYURUBphXE5Z0F2ipulsYVBGWeBd6hUx/RswvKpSaYEhjCsH7g+UEnNvcpoe
IYbwTXXl2GAG/wuUAFUI43aC7AsjeVNhPJTZlWny7zJtIoxWn7c2zRHGOqQ0CGNlbJeG5tZ/2KzW
CKNt1iCMleESYfQx46TN5svVcv0rhFTb8vW1eAwPs+37AHv7Ba6PsO0dZHV8kNUxxdLv03B3BWln
kEhaKeCWIsPz8WcMT7hE5KbH8HyK2X7DM9buDc/PFQzPU214TPGO4fnmneH5B294/t4ang/3hpfV
H8Wdp91BhFn0bc55IYk0QX3eBIVBGGuC7XGowVMyo8/56C/XPssNZW5kc3RyZWFtCmVuZG9iagox
OSAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMgMjAgMCBSCi9SZXNvdXJjZXMgMTggMCBS
Ci9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQgMTIgMCBSCj4+IGVuZG9iagoxOCAwIG9i
aiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcgMCBSIC9GNTcgNSAwIFIgL0YxMDAgMjIg
MCBSIC9GNjcgMjUgMCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyOCAw
IG9iaiA8PAovTGVuZ3RoIDYxMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFt
CnjapVZLb9swDL7nVxg9OQezIvUesEOHpsCKIgM6bz0UPXRrtwVYH1jz/zHJshPLchzbRQD7M0V9
fElkMGPuhxmSAqUpU8aCsSb7+bT4VC5OL1BlBqxSWfmr0iwfbnOxLFBaYfLLpWL52XpZkGT5+Sq8
r1arbzfLu/Ly9ELaDBGslGF3QRwsVhS3eOe0BWP5+mxZKPdGC7aN0NSLDXCMngMdhzB7Er/j5M/m
74/Hf9vw9fwRGWMnhzZw1raqBFiK8U6hAeOIOHAT40EiPUAkeIzHelTl4uoeOumQA9mIa8CA6wju
lhtwIIQujWyjsaV8jy/Hs5AeikP+G9pVoIZjTXdpiCI4l0bICE5KxNvLPgVqXPwoQZkIznLc7eUy
gvNoFDAdwbGHMolf912DcvO0ef4dVN62L6+vjw/h4377IYDGEwYou6hZC15U/XLf8pCEa6aYFRwB
eeidEPQUtfUkkOB1dz3fKViQSvh1A9raetnbo/zaPfMb9+D550qw7qHlGgzJet/3lNYCNUZd71ZY
sVL+tXoG2i+VfN0TW4FWgjXGdXXm2ibV0WEdn9Qt3arvY23qOowJhJZye04UtXaB2p09Pdzp5cCd
9hou/6wpGWM7GXZlFRq4RgKkSXlS2XEe1cOj6SiPfsfE8yrSMfqpSpEZJyUdSfdwKAp/chIyJ1Vs
BJlOybCPTIjpnk2cfl6DAG03/a5dTy4tAaeUh08urfPH9PjDpvozagR2Y3B9SiW1cFI/vaYW1pPx
PjI+48h5MtHr2ZxTMm4oNv9gZGLXS2cEgUnstVSYw2SLVbn4D5AUfKxlbmRzdHJlYW0KZW5kb2Jq
CjI3IDAgb2JqIDw8Ci9UeXBlIC9QYWdlCi9Db250ZW50cyAyOCAwIFIKL1Jlc291cmNlcyAyNiAw
IFIKL01lZGlhQm94IFswIDAgNjEyIDc5Ml0KL1BhcmVudCAxMiAwIFIKPj4gZW5kb2JqCjI2IDAg
b2JqIDw8Ci9Gb250IDw8IC9GMTYgNyAwIFIgL0Y1OSAxNyAwIFIgL0Y2MiA5IDAgUiAvRjU3IDUg
MCBSID4+Ci9Qcm9jU2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagozMSAwIG9iaiA8PAovTGVu
Z3RoIDUzMCAgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFtCnjatZZNb9RADIbv
+yuiXkgOce358vjAARBFRZRDm1vVQ+kuKlL5EFT8frzJwjaZbLIZQDlk1vI847U9fkMF6kOFCQJR
TBHi9h2Lu8+rl83q9IxCEUFCKJqPrWezvi6b84vz92+q2hpfXryoHJavuh+Xz66qmrxjV/rqpnl7
eualIALxfru/JmfBmKI2FoRa1DXdVHVALNUrWN1sdI2AuLdyz7pfKl/jqUlZLvZhJz++fn/sll+e
88mUKwWGGJUb+weHCLZv3i+ncOzBuxTHARwdgeMBLhKQT3Fq5nAY15Ztn3eFG6dhdbE6MLArDj9x
amtCuwpf1t9uH+/uN2sYK+POtSYGI36Q+vtPDx82++x7xOn8I4iM1R1ped0VNmiX31Y5AsYJjM0Y
jF1GRw7SQjiTFyGI6eliwOHy0xVGLoXp5fLL86Lb/Ghk1mTk5d0tLO0YcK5bPakKeB7aZusL/o/j
Ict2MRmK5TSU7dyYCWU+C2mDpO1JYaw9KaM9pZ2B/aAFBJf+kcNBhb+c4mE6GVq60Sni5R9OEc6D
xZA93zhf18RDxFQ5JHTzdrGuCRg7IkQIjjN0jSP4EdXVU5Cydc0eoWvrTUW+/FkRlpuH/65uDiQZ
EGoLS++Vaz8qhpzUNs8JMeVEXDo7F8uZx+47pn8N1OoyRMMJECYwtRpefqd0m6UxWJbMH5az1etm
9QsCmGW2ZW5kc3RyZWFtCmVuZG9iagozMCAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVudHMg
MzEgMCBSCi9SZXNvdXJjZXMgMjkgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJlbnQg
MTIgMCBSCj4+IGVuZG9iagoyOSAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkgMTcg
MCBSIC9GNTcgNSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM0IDAg
b2JqIDw8Ci9MZW5ndGggMTYwNSAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJlYW0K
eNrtWltv2zYUfvevMPIkAxXLQ5EU+TAUXZtiLYJ1a1x0QNsHxVZiob6slrOg/36HF/kiKbLSKJ7b
BQEsipfvfDw8/HSkEPoU/6APTBIZs75Umiit+qNZ79dh7+krkH1FtJT94aXtORx/DOQgBKG5Ct4M
JA2e/z4ImaDBy1N3PTs9ff9h8Hn45ukrofsARAvhRocsIhosxEf4PAglpQEQzl2JEkqLOhmV62wJ
QQ0MIAxXZRxBqzhC3B2HixocuCvOyVlCJtn0Il2uXMX8F6CUnuyMiUu2KYnQELBd65Tw3dpNsWki
lDBRBxaJ7wLjtWBCtwArTfMkX2ycIk8a7QKJa+wCUfw7JoFrS+vAWrk3roBFUS0YuzuzHY/EzR6J
I2dY7RqOud00W9WbYhOciu0GLMMpRSRrAVf2iuREqSqcFESr2+GszGyUAiKOcxT9EK9MOsaCuI6S
bXcUhPHIq9KLdQdNhOSmXRGBkuaa3yIVFqBWScCupnxmf9/bmnNbfm1/t3ue19ALgUsCmqOeUaIZ
s/DDSerkb5VcTH3xIp0uBkwEN+72KjM3/wxABGnuqhJ3+Xqdjb64Yn49myXLb+5mcekxC/Blml9P
V7n1Re902AOv3hEQEAwJafQ/10a9v/Y+fqb9cY/23/Rw06Ok32CZInHdn/WYligEkb+f9s57f67B
QlSO9fLehmTHUURyJR9bu0DoMW1W5z4YShIey3uCCAKqz/GHbz/Xth9NLkZ+Ey4eS66N0A/hevjD
szAPigqNmESMd0UD2vA4q/MGblnQh6VR6w4UFH3QVTmXZQ6A0kk74RAThXLXhkRcJoESRCV0QcLs
VnbPjRYaXQHUldAM+5l0qG2YvEiWF4u5U+u35+76V3nRFBCceCeLxghXrUIHdCV0OKGcHZiFkA8n
KSYvxMdxGxoVQcFXkyhWnbDARzC0UrZYVVjgbpAdyZqAlitSo2s0ZgfVeBZVwoIxEuMMjknYjFAV
WfSPqEcvpkmeZ6NjUCNGj0ON1KMardVI/+RqpDDL0m1IPHtWIaEJFfGjGO0TI3H35Eg3yZHoSgjE
feToUCxA8iY5El3JkbiPHImu5GgPC8Wa5Eh0JEd7V6RJjkRHciTuI0fiyF76VGcvfceha62enS+T
5U3mhQ0IDqgVtW6yWYoTa8OJk+rHAgz8qJvHmCA85m1oiKqa4BaKOnJFxFplwYxENQKvuskr2qdY
DI4hxYIjeOGDWDy+8H2na0V7LfrD/LMhWY0m6bhJkQ6W4MADplkbRdrDQrMGRRJdKdI+VxDepEiH
yrJqcr3/IMuCh8uyWm8bULRJkcSxKVL8Y2ZHL9PNP0Gnj1nSUWVJQMQxZEnNmvS/ypKaNeln+38f
vtaC+fITUcJZvOdT0jRNltNvpfMR4+zSyMtlukzno/Uhi2W6PmaxKjouk1myykZkEEaSBh8Giga+
abSYj6bX49SecxFExxh4oAiLpDX8iQoK+AODkEMcvDJKtlgOkDwL0uwqnT9BGModJ9DRWv1M2ene
Ms8Wczciy11DcrG4Xrkq7mpW2Sz1jZcDwFnkq9SbWU0Sj+eNsOLLmqGMXDWDneM+W2bt0RE7oXIn
MzFWM7GIyeAsIcXcIi6d2YjF67mZPltGctd6k60mru35AACC4dnzc9dil8Q0+HmbOuZq3LwrE3EH
jbY9wSgOz93VBQBFwvPU1RjbFtrcbMw/8ePmY1+48J1EEIfKgznPm2LZnvN8YbF6rmr7A2drp0d1
0YQAhcchBmPOuAwEuJAxJ4UWs3Q1yeZXrjpfLZP5le9ztfD1NLCRhlVuMUzpXfi3eyWw2DS4mWSj
yW0et9a4Qhiz2UxpkkwvXSnBS+DbC0/5Fl/r4tMMNxPwdTem68LdrDcH1zsBZKhJZahNPUK2cr0K
QunX62SKnKqLsKFid79XgXfheCf1cAes/FoV8d28UHyzUK/NQFUojzKrYU7w2aok/5KXWtcZkKK7
GmAqMt+7iEVlT5x6BB+LWNyJReUn5o3csu/vEI7xepZiM8vCLYjAPE9mDC7T1BcX7vqJAncGfL2n
DdrTtpHiqGNd4pG2wI3lbF4Y8DDObU+31GO/wOWOvl16u8vFxrPmUVFEn73xNEXJu3hf5KvrR0uT
L80D+l8H9ZIeZW5kc3RyZWFtCmVuZG9iagozMyAwIG9iaiA8PAovVHlwZSAvUGFnZQovQ29udGVu
dHMgMzQgMCBSCi9SZXNvdXJjZXMgMzIgMCBSCi9NZWRpYUJveCBbMCAwIDYxMiA3OTJdCi9QYXJl
bnQgMTIgMCBSCj4+IGVuZG9iagozMiAwIG9iaiA8PAovRm9udCA8PCAvRjE2IDcgMCBSIC9GNTkg
MTcgMCBSIC9GNjIgOSAwIFIgPj4KL1Byb2NTZXQgWyAvUERGIC9UZXh0IF0KPj4gZW5kb2JqCjM3
IDAgb2JqIDw8Ci9MZW5ndGggNDgxICAgICAgIAovRmlsdGVyIC9GbGF0ZURlY29kZQo+PgpzdHJl
YW0KeNpdUk2P0zAQvfdX5IYtEWM7sWNzYqmWVREL0jZISMDBbdw2UupKsbsr/j3jj5YuijSeGc97
8zwZVlH4WMWlJkrzSqp4qmp7XHzsF+8+MVkpoqWs+l2q7IefqF89rr4+4LrhAj3e4ZaiZQ6e3qxx
zUTbtajDv/vPCc4Y0UJEfM24IFx1Vc0bolni+kUFlWAYrlvWoaezc6PbA4sSKBxsdpZm3pxc9CV6
xkwgO/sxJwQa3aV6tqV+GHcY5OzsbF3IMOuizudxPrkjJH0pPNniuVOIiisGr+UMpILCViWJ+zGS
5b645kKhycyYKbRPoX7Vbms9gWEA44N1djbT9Cdjvq3z+SNjvLVHnzPhlM9NoTMlDQ+DlgW+GUO+
3WFGkfHBzkkvfSU1HIyLZRTZ43kywQ45Wk7G+3H7Nkcvh3F7yO5VBs1t6aURvW2U4n/czoT/RkLL
8yjSJP94ySsNe9Ok/85bIlsNJyedbJPS77gWaW/Afkn2DsZGKVpf8R3RXYQ3HZGNuuwebhiUthq8
WjK0AssBFO1tZlnyiUzIGzFAp+IOpr2UifS+PppxKmMYhhk3HbLeX1f4CpaUNLQpUt4Xcn1zTxrR
levBTtaeXz74YAI5bydD7HCOkMV9v/gLD9ndpWVuZHN0cmVhbQplbmRvYmoKMzYgMCBvYmogPDwK
L1R5cGUgL1BhZ2UKL0NvbnRlbnRzIDM3IDAgUgovUmVzb3VyY2VzIDM1IDAgUgovTWVkaWFCb3gg
WzAgMCA2MTIgNzkyXQovUGFyZW50IDM4IDAgUgo+PiBlbmRvYmoKMzUgMCBvYmogPDwKL0ZvbnQg
PDwgL0YxNiA3IDAgUiAvRjYyIDkgMCBSIC9GNTYgMTEgMCBSIC9GNTkgMTcgMCBSID4+Ci9Qcm9j
U2V0IFsgL1BERiAvVGV4dCBdCj4+IGVuZG9iagoyNCAwIG9iaiA8PAovTGVuZ3RoMSA4MjcKL0xl
bmd0aDIgMTA5MQovTGVuZ3RoMyA1MzIKL0xlbmd0aCAxNjg1ICAgICAgCi9GaWx0ZXIgL0ZsYXRl
RGVjb2RlCj4+CnN0cmVhbQp42u1Sa1QT5xaNdpXWiN5qLyhLqx/KS1PCTHiGNK0oBhDiA0IEQe04
mYSBMBPCRBMVhOIDFKuAIi20BgKCWgi1NK0P5KVixVBBHpeKCEpBWMqzRaxK7wDarou9v+6/uzrz
Z87Ze87ZZ59jbbk+wN5DQm7DBCRB2cNs2B0IRQHBawHMhiCIaW29SokhFE4SngiFuQOYy3UBHioZ
4LgADuTOcXWHXZnWYBWp0ChxWRgF7NBlkyQhjoYhmBwEKPDtSASbJnnjBIUTsr8iB9sEvw98CJTN
hGEgwVEKbMNkOMF0GFflQ0hJwJ1MS1SKV9B2TBlN6wJ2E0qXAVqnhCTkGiDBpEyHtSSFoxiwe60Z
x/6v5P13cS/5fyic2kigksvXIpF0qwnfXoORSFyueUlAqDARHolN5WzEJhsKMQmuipyK+lCIHEc9
CJkcA9BkCo8W4GpMsh6n0DAgReTR2GQ+kJBgSjlOYOvJaHx8acAehqApmCgMRyMILDoaOE9CGCGZ
Kpp2fUKyg0AoEPv7siZPYgJbj9BOiTSKP8SMkydi+M+YnlSJq0EIRK8Gpon0++pr85ReqwmUlIw7
z3F2AYhSiWiYEF2K4+wMdsEAp1WrAaam53RgEyRF/wIUKioGSEklc/wYXNyAAxalQuTjaebrY6xc
Sap3QcCe6+wEYMjJEXAhKOY/aYEEHqXCfDxpP9xcHbmOE1lUpVRiBDVxdLRBr2IpTm8Bw9QYymxp
IlHe3vAThv2nY1frbp0x+enA8yg0LydfnJfxW/F2x6S2Q+emNd4R2HqvicuFDfo7F4f4Hhsb9B2x
EQv38RvmWY/6NYqmn008G9vfdmeoshoutRbvDiihbj7hzj+YxuDOOGixJ8u3O1io8WS9f1DmGdMp
yODMWd0clpnSv3RLwWwD48ynS+MkgyK7FelXKgPXjh2+965+9HYt1P5Zmqp8rKumONyiyMQkQrzE
sJDc6cWC1900PfmjTbfhY36uZU9t8eXkwhgP7YtvHcSFzVVY3pa+x4zNxpY5N/nxX5xcs2AeJ/zj
jIQ+34jCy/yinMG+ood7dTJDZhCySFR+RfV7aHECC7Vtz5qvSrtfpB1C36mHZng7vptTUlHuMee7
D7sPuZm3Vs9ZZ+ECj6SUmbW2ZI8mjnGWu5apOiysEkLvv/d1o2XE46OjHyxacDx1QflOXXPQ+Y5e
7teJ3ILWiq67s3qkPxNxDikLbqgLGwLF3UUln2r63KJuFzKdhTMrVzHu5rHqQ2/026StENcVhGuV
Ra2bmorQkUc/q9b4mFGtHwQlvzls/KWiwk93ZvHyR56RM+SznuwoL3HKOWZ+SACZ/ZRTGK3KeDu4
NtA387aJ34aTF1z8Am0hxNRqK+HfuKO3zZxKPd64vG4YZpf2P9YM1WYevp7Qu1J3XEaWVp178dT1
819FWd8GvTjJy82nZrMeCt+8QNZlRzl9f9nOK43hxpJuze7PNbbuVx5IyDQPkQ9ozmRtUG4pIT+6
e0TLqnb63b3+FJ/H+kT4Rf6DXbxzma49/uvYVsUunURSbfwj09jELg01UuMrWXLNKZWX5ys56tob
0J4YP+/IN1VDuqPzWq5Ww4fSuV4X9IkNIT1Ni04cNRiml4Wor9wYnv7PxdTtJCJc4O+1/8hV+ROF
1fWt0MxpRq8LIXuuJ9t8efXF5uSRiFIr9Q/tni4DLMi/0VO+u3HgaeUb55an6k8/M/HTWsH3n204
toy1GMSfjpeLt5tY9jVtao5igoT0rCNuv+Hr4uPYaelxKazOf3hqbymasnOTvBoY4s7I8+kXL4Vu
3PjNqblNxnb+nfuXgmdZBTwOHK2yGzzubuOvXpa++o3vLAzbrI/lXpsbPw2p68l4K+hZwcKuK7Kn
NdiAs119TfqPliuGWpx+zVNMr9n91XPhibrz5azgMUd9Z7myv/mJb9ym842J5FjxYFDqnuF7G5im
FVt0O43xVYO8i3z9fmWr7ittyYcP0j/ncQf25TxjmBclxRl7d1bzYwPyY4qRxV2CoIJLbdqGGzf1
Bd11Z4XlxsqoHV7/Gmxe6qjpT6pSLInbdy0z6HlprdnCoX1tqv7CvZ3mMWVnRQ+1K3xrvevdBubr
Tn2yp3fuqs6R69LatzpqygoUll63bBnSRwcD8j/Sg1uW9aH2yYe/X+KfHeY9bMG7N9Pmy4rn9QWz
f8hhpBjNTgGOvWk04B14Gmr7oIMdFfkQ+h8f5t8F/i8KoHIMUVJkJKKMYP4bSF+g6GVuZHN0cmVh
bQplbmRvYmoKMjUgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9FbmNvZGlu
ZyAzOSAwIFIKL0ZpcnN0Q2hhciA2OAovTGFzdENoYXIgNjgKL1dpZHRocyA0MCAwIFIKL0Jhc2VG
b250IC9GTUZWUksrTVRTWU4KL0ZvbnREZXNjcmlwdG9yIDIzIDAgUgo+PiBlbmRvYmoKMjMgMCBv
YmogPDwKL0FzY2VudCA2NjcKL0NhcEhlaWdodCAzNjIKL0Rlc2NlbnQgLTkwCi9Gb250TmFtZSAv
Rk1GVlJLK01UU1lOCi9JdGFsaWNBbmdsZSAwCi9TdGVtViA1MAovWEhlaWdodCA0NjAKL0ZvbnRC
Qm94IFswIC05NTQgMTA0MyA5MDBdCi9GbGFncyA0Ci9DaGFyU2V0ICgvZXF1YWwpCi9Gb250Rmls
ZSAyNCAwIFIKPj4gZW5kb2JqCjQwIDAgb2JqCls3ODAgXQplbmRvYmoKMzkgMCBvYmogPDwKL1R5
cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAgLy5ub3RkZWYgNjgvZXF1YWwgNjkvLm5vdGRl
Zl0KPj4gZW5kb2JqCjQxIDAgb2JqIDw8Ci9UeXBlIC9FbmNvZGluZwovRGlmZmVyZW5jZXMgWyAw
IC8ubm90ZGVmIDEvZG90YWNjZW50L2ZpL2ZsL2ZyYWN0aW9uL2h1bmdhcnVtbGF1dC9Mc2xhc2gv
bHNsYXNoL29nb25lay9yaW5nIDEwLy5ub3RkZWYgMTEvYnJldmUvbWludXMgMTMvLm5vdGRlZiAx
NC9aY2Fyb24vemNhcm9uL2Nhcm9uL2RvdGxlc3NpL2RvdGxlc3NqL2ZmL2ZmaS9mZmwgMjIvLm5v
dGRlZiAzMC9ncmF2ZS9xdW90ZXNpbmdsZS9zcGFjZS9leGNsYW0vcXVvdGVkYmwvbnVtYmVyc2ln
bi9kb2xsYXIvcGVyY2VudC9hbXBlcnNhbmQvcXVvdGVyaWdodC9wYXJlbmxlZnQvcGFyZW5yaWdo
dC9hc3Rlcmlzay9wbHVzL2NvbW1hL2h5cGhlbi9wZXJpb2Qvc2xhc2gvemVyby9vbmUvdHdvL3Ro
cmVlL2ZvdXIvZml2ZS9zaXgvc2V2ZW4vZWlnaHQvbmluZS9jb2xvbi9zZW1pY29sb24vbGVzcy9l
cXVhbC9ncmVhdGVyL3F1ZXN0aW9uL2F0L0EvQi9DL0QvRS9GL0cvSC9JL0ovSy9ML00vTi9PL1Av
US9SL1MvVC9VL1YvVy9YL1kvWi9icmFja2V0bGVmdC9iYWNrc2xhc2gvYnJhY2tldHJpZ2h0L2Fz
Y2lpY2lyY3VtL3VuZGVyc2NvcmUvcXVvdGVsZWZ0L2EvYi9jL2QvZS9mL2cvaC9pL2ovay9sL20v
bi9vL3AvcS9yL3MvdC91L3Yvdy94L3kvei9icmFjZWxlZnQvYmFyL2JyYWNlcmlnaHQvYXNjaWl0
aWxkZSAxMjcvLm5vdGRlZiAxMzAvcXVvdGVzaW5nbGJhc2UvZmxvcmluL3F1b3RlZGJsYmFzZS9l
bGxpcHNpcy9kYWdnZXIvZGFnZ2VyZGJsL2NpcmN1bWZsZXgvcGVydGhvdXNhbmQvU2Nhcm9uL2d1
aWxzaW5nbGxlZnQvT0UgMTQxLy5ub3RkZWYgMTQ3L3F1b3RlZGJsbGVmdC9xdW90ZWRibHJpZ2h0
L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNpbmdscmln
aHQvb2UgMTU3Ly5ub3RkZWYgMTU5L1lkaWVyZXNpcyAxNjAvLm5vdGRlZiAxNjEvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L2h5cGhlbi9yZWdp
c3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJpb3Iv
YWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Ivb3Jk
bWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0ZXJz
L3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVzaXMv
QXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMvSWdy
YXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2FjdXRl
L09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9VYWN1
dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2ZS9h
YWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9lZ3Jh
dmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1mbGV4
L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRlL29k
aWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJlc2lz
L3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoyMiAwIG9iaiA8PAovVHlwZSAvRm9u
dAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQxIDAgUgovQmFzZUZvbnQgL1RpbWVzLUl0YWxp
Ywo+PiBlbmRvYmoKNDIgMCBvYmogPDwKL1R5cGUgL0VuY29kaW5nCi9EaWZmZXJlbmNlcyBbIDAg
Ly5ub3RkZWYgMS91bmkyMEFDIDIvLm5vdGRlZiA0L2ZyYWN0aW9uL2RvdGFjY2VudC9odW5nYXJ1
bWxhdXQvb2dvbmVrL2ZsIDkvLm5vdGRlZiAxMC9jd20vZmYvZmkgMTMvLm5vdGRlZiAxNC9mZmkv
ZmZsL2RvdGxlc3NpL2RvdGxlc3NqL2dyYXZlL2FjdXRlL2Nhcm9uL2JyZXZlL21hY3Jvbi9yaW5n
L2NlZGlsbGEvZ2VybWFuZGJscy9hZS9vZS9vc2xhc2gvQUUvT0UvT3NsYXNoL3NwYWNlL2V4Y2xh
bS9xdW90ZWRibC9udW1iZXJzaWduL2RvbGxhci9wZXJjZW50L2FtcGVyc2FuZC9xdW90ZXJpZ2h0
L3BhcmVubGVmdC9wYXJlbnJpZ2h0L2FzdGVyaXNrL3BsdXMvY29tbWEvaHlwaGVuL3BlcmlvZC9z
bGFzaC96ZXJvL29uZS90d28vdGhyZWUvZm91ci9maXZlL3NpeC9zZXZlbi9laWdodC9uaW5lL2Nv
bG9uL3NlbWljb2xvbi9sZXNzL2VxdWFsL2dyZWF0ZXIvcXVlc3Rpb24vYXQvQS9CL0MvRC9FL0Yv
Ry9IL0kvSi9LL0wvTS9OL08vUC9RL1IvUy9UL1UvVi9XL1gvWS9aL2JyYWNrZXRsZWZ0L2JhY2tz
bGFzaC9icmFja2V0cmlnaHQvY2lyY3VtZmxleC91bmRlcnNjb3JlL3F1b3RlbGVmdC9hL2IvYy9k
L2UvZi9nL2gvaS9qL2svbC9tL24vby9wL3Evci9zL3QvdS92L3cveC95L3ovYnJhY2VsZWZ0L2Jh
ci9icmFjZXJpZ2h0L3RpbGRlL2RpZXJlc2lzL0xzbGFzaC9xdW90ZXNpbmdsZS9xdW90ZXNpbmds
YmFzZS9mbG9yaW4vcXVvdGVkYmxiYXNlL2VsbGlwc2lzL2RhZ2dlci9kYWdnZXJkYmwvY2lyY3Vt
ZmxleC9wZXJ0aG91c2FuZC9TY2Fyb24vZ3VpbHNpbmdsbGVmdC9PRS9aY2Fyb24vYXNjaWljaXJj
dW0vbWludXMvbHNsYXNoL3F1b3RlbGVmdC9xdW90ZXJpZ2h0L3F1b3RlZGJsbGVmdC9xdW90ZWRi
bHJpZ2h0L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNp
bmdscmlnaHQvb2UvemNhcm9uL2FzY2lpdGlsZGUvWWRpZXJlc2lzL25ic3BhY2UvZXhjbGFtZG93
bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9j
b3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L3NmdGh5cGhlbi9y
ZWdpc3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJp
b3IvYWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Iv
b3JkbWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0
ZXJzL3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVz
aXMvQXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMv
SWdyYXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2Fj
dXRlL09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9V
YWN1dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2
ZS9hYWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9l
Z3JhdmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1m
bGV4L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRl
L29kaWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJl
c2lzL3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdCj4+IGVuZG9iagoxNyAwIG9iaiA8PAovVHlwZSAv
Rm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZvbnQgL0NvdXJpZXIK
Pj4gZW5kb2JqCjExIDAgb2JqIDw8Ci9UeXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2Rp
bmcgNDIgMCBSCi9CYXNlRm9udCAvVGltZXMtSXRhbGljCj4+IGVuZG9iago5IDAgb2JqIDw8Ci9U
eXBlIC9Gb250Ci9TdWJ0eXBlIC9UeXBlMQovRW5jb2RpbmcgNDEgMCBSCi9CYXNlRm9udCAvVGlt
ZXMtUm9tYW4KPj4gZW5kb2JqCjcgMCBvYmogPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUx
Ci9FbmNvZGluZyA0MiAwIFIKL0Jhc2VGb250IC9UaW1lcy1Sb21hbgo+PiBlbmRvYmoKNSAwIG9i
aiA8PAovVHlwZSAvRm9udAovU3VidHlwZSAvVHlwZTEKL0VuY29kaW5nIDQyIDAgUgovQmFzZUZv
bnQgL1RpbWVzLUJvbGQKPj4gZW5kb2JqCjEyIDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQg
NgovUGFyZW50IDQzIDAgUgovS2lkcyBbMiAwIFIgMTQgMCBSIDE5IDAgUiAyNyAwIFIgMzAgMCBS
IDMzIDAgUl0KPj4gZW5kb2JqCjM4IDAgb2JqIDw8Ci9UeXBlIC9QYWdlcwovQ291bnQgMQovUGFy
ZW50IDQzIDAgUgovS2lkcyBbMzYgMCBSXQo+PiBlbmRvYmoKNDMgMCBvYmogPDwKL1R5cGUgL1Bh
Z2VzCi9Db3VudCA3Ci9LaWRzIFsxMiAwIFIgMzggMCBSXQo+PiBlbmRvYmoKNDQgMCBvYmogPDwK
L1R5cGUgL0NhdGFsb2cKL1BhZ2VzIDQzIDAgUgo+PiBlbmRvYmoKNDUgMCBvYmogPDwKL1Byb2R1
Y2VyIChwZGZUZVgtMC4xNGgpCi9DcmVhdG9yIChUZVgpCi9DcmVhdGlvbkRhdGUgKEQ6MjAwMjAy
MDgwNDU5MDApCj4+IGVuZG9iagp4cmVmCjAgNDYKMDAwMDAwMDAwNCA2NTUzNSBmIAowMDAwMDAx
NTcyIDAwMDAwIG4gCjAwMDAwMDE0NjcgMDAwMDAgbiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAw
MDAwMDA2IDAwMDAwIGYgCjAwMDAwMTQyNDQgMDAwMDAgbiAKMDAwMDAwMDAwOCAwMDAwMCBmIAow
MDAwMDE0MTU1IDAwMDAwIG4gCjAwMDAwMDAwMTAgMDAwMDAgZiAKMDAwMDAxNDA2NiAwMDAwMCBu
IAowMDAwMDAwMDE2IDAwMDAwIGYgCjAwMDAwMTM5NzUgMDAwMDAgbiAKMDAwMDAxNDMzMiAwMDAw
MCBuIAowMDAwMDAyNDU2IDAwMDAwIG4gCjAwMDAwMDIzNDggMDAwMDAgbiAKMDAwMDAwMTY3NCAw
MDAwMCBuIAowMDAwMDAwMDIxIDAwMDAwIGYgCjAwMDAwMTM4ODkgMDAwMDAgbiAKMDAwMDAwMzQx
MyAwMDAwMCBuIAowMDAwMDAzMzA1IDAwMDAwIG4gCjAwMDAwMDI1NTkgMDAwMDAgbiAKMDAwMDAw
MDAwMCAwMDAwMCBmIAowMDAwMDExOTQ4IDAwMDAwIG4gCjAwMDAwMDk4NTUgMDAwMDAgbiAKMDAw
MDAwNzg5NSAwMDAwMCBuIAowMDAwMDA5Njk5IDAwMDAwIG4gCjAwMDAwMDQzMjcgMDAwMDAgbiAK
MDAwMDAwNDIxOSAwMDAwMCBuIAowMDAwMDAzNTMwIDAwMDAwIG4gCjAwMDAwMDUxNDcgMDAwMDAg
biAKMDAwMDAwNTAzOSAwMDAwMCBuIAowMDAwMDA0NDMwIDAwMDAwIG4gCjAwMDAwMDcwMzEgMDAw
MDAgbiAKMDAwMDAwNjkyMyAwMDAwMCBuIAowMDAwMDA1MjM5IDAwMDAwIG4gCjAwMDAwMDc3OTEg
MDAwMDAgbiAKMDAwMDAwNzY4MyAwMDAwMCBuIAowMDAwMDA3MTIzIDAwMDAwIG4gCjAwMDAwMTQ0
NDAgMDAwMDAgbiAKMDAwMDAxMDA3NCAwMDAwMCBuIAowMDAwMDEwMDUxIDAwMDAwIG4gCjAwMDAw
MTAxNTkgMDAwMDAgbiAKMDAwMDAxMjAzOSAwMDAwMCBuIAowMDAwMDE0NTE0IDAwMDAwIG4gCjAw
MDAwMTQ1ODAgMDAwMDAgbiAKMDAwMDAxNDYzMSAwMDAwMCBuIAp0cmFpbGVyCjw8Ci9TaXplIDQ2
Ci9Sb290IDQ0IDAgUgovSW5mbyA0NSAwIFIKPj4Kc3RhcnR4cmVmCjE0NzI2CiUlRU9GCg==

--Apple-Mail-1-507788993
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed



===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

--Apple-Mail-1-507788993--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 08:30:16 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Feb 2002 08:30:16 +0000 (GMT Standard Time)
Subject: [Rd] timing Mac R's
In-Reply-To: <50B1526D-1C97-11D6-B72F-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.WNT.4.44.0202080820010.716-100000@tern.stats>

On Fri, 8 Feb 2002, Jan de Leeuw wrote:

> Here is the same thing as before, now done a bit more systematically. The
> rather bad performance of R-patched on eigen is a mystery (to me), the
> gain
> in La.eigen when using ATLAS is probably not Altivec, but using
> threaded level 3 BLAS on a dual processor machine.

Well, it's almost entirely in the algorithm used in LAPACK.  There is no
single precision used.  DSYEVR was designed as `the holy grail' for that
problem, and it uses level 3 BLAS much better than its predecessors.
I see an 8x speed up on my PIII Linux box on your tests (and the ATLAS
there is only using one processor to keep the build portable).

My guess (and only a guess) is that you have an alignment problem. I am
pretty sure there is no change in the internal code across the versions you
used, but some compilers and chips will run code much faster with certain
alignments than others. Sparc for example needs -dalign under it's native
compiler, and without that (which used to be necessary under S-PLUS) there
could be performance changes of this nature under very small code changes.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Feb  8 13:27:14 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 8 Feb 2002 14:27:14 +0100 (MET)
Subject: [Rd] interaction.plot (with misplaced legend) (PR#1305)
Message-ID: <200202081327.OAA12329@pubhealth.ku.dk>

Kaiya Liu wrote:
> 
> Hi,
> 
> I encountered a problem when I did interaction plots using the
> interaction.plot() function. The labels for the trace factor appeared on
> the plot when I did the plots in separate windows, but disappeared/cut off
> when multiple plots were placed in one window. Can anybody help me?

>From the example of ?interaction.plot:

 data(ToothGrowth)
 attach(ToothGrowth)
 interaction.plot(dose, supp, len, fixed=TRUE) # OK

But the following looks quite ugly:

 par(mfrow=c(1,2))
 interaction.plot(dose, supp, len, fixed=TRUE)
 interaction.plot(dose, supp, len, fixed=TRUE)

 par(mfrow=c(2,2))
 interaction.plot(dose, supp, len, fixed=TRUE)



There is not only a problem with the legend, also the magnification of
the axis annotation is not homogeneous, because for the x-axis
annotation mtext() is used. I'd suggest to change line 35:
  mtext(xlabs, 1, at = xvals) # old
to
  axis(1, at = xvals, labels = xlabs, ...) # new
   

Uwe Ligges

===============
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb  8 13:27:59 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 8 Feb 2002 13:27:59 +0000 (GMT)
Subject: [Rd] Cross-compiling to Windows
Message-ID: <Pine.LNX.4.31.0202081322220.2328-100000@gannet.stats>

I have built a new Linux->mingw32 cross-compiler using the equivalent of
MinGW-1.1 updated by the latest header files.  Links are on the Rtools
portal.  I've tested it as far as cross-compiling R-devel and running some
tests.  There were several cross-compilers I found on the Web, but all
lacked Fortran support.

If you are upgrading, beware that this is mingw32- and not
i386-mingw32msvc-, so MkRules will need to be changed.  (Also, beware that
HEADERS there must be correct: if wrong compilation may succeed but use
the Linux headers.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Feb 11 06:46:21 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 11 Feb 2002 07:46:21 +0100 (MET)
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
Message-ID: <200202110646.HAA18810@pubhealth.ku.dk>

I just downloaded rw1041 (the latest windows binary).  Everything installed
fine.  

When I start a new Rgui, and type "demo(graphics)", after pressing
return to start, a graphics window appears.  When I get to the second
prompt:

  > opar <- c(opar, par(bg = "white"))
  > plot(x, ann = FALSE, type = "n")
  Hit <Return> to see next plot: 

at this point, the cursor is an hourglass and just waits -- nothing is
drawn into the graphics window.  This is repeatable on both a Win 98
and Win 2000 ME setup.

However, if after starting a new Rgui, I first do
> hist(rnorm(100))
> demo(graphics)
then both the histogram and the subsequent graphics demo work fine.

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Feb 11 07:44:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Feb 2002 08:44:07 +0100
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
In-Reply-To: <200202110646.HAA18810@pubhealth.ku.dk>
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <x2heoolayg.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.  
> 
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
> 
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot: 
> 
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

??

This *has* been tried before, y'know... Did you remember to click the
text window to give it keyboard focus?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Feb 11 11:02:58 2002
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 11 Feb 2002 06:02:58 -0500
Subject: [Rd] demo(graphics) problem under rw1041 (PR#1307)
References: <200202110646.HAA18810@pubhealth.ku.dk>
Message-ID: <3C67A4E1.4C857EA8@epm.net.co>

This is a multi-part message in MIME format.
--------------CC6F2641AA04ACFC35187237
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7Bit



eglen@pcg.wustl.edu wrote:

> I just downloaded rw1041 (the latest windows binary).  Everything installed
> fine.
>
> When I start a new Rgui, and type "demo(graphics)", after pressing
> return to start, a graphics window appears.  When I get to the second
> prompt:
>
>   > opar <- c(opar, par(bg = "white"))
>   > plot(x, ann = FALSE, type = "n")
>   Hit <Return> to see next plot:

There is no problem at all!



>
>
> at this point, the cursor is an hourglass and just waits -- nothing is
> drawn into the graphics window.  This is repeatable on both a Win 98
> and Win 2000 ME setup.

Just go to the R Console window and "Hit <Return> to see next plot:"

If you want to see the R Console windows and the R Graphics at the same time,
tile them with the Tile option on the Windows bar menu options.

>
>
> However, if after starting a new Rgui, I first do
> > hist(rnorm(100))
> > demo(graphics)
> then both the histogram and the subsequent graphics demo work fine.
>
> Stephen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------CC6F2641AA04ACFC35187237
Content-Type: text/x-vcard; charset=us-ascii;
 name="krcabrer.vcf"
Content-Description: Card for Kenneth Cabrera
Content-Disposition: attachment;
 filename="krcabrer.vcf"
Content-Transfer-Encoding: 7Bit

begin:vcard 
n:Cabrera;Kenneth
tel;cell:504 0339
tel;work:4309317
x-mozilla-html:FALSE
org:Universidad Nacional de Colombia;ICNE
adr:;;A.A. 3840;Medellín;Antioquia;00000;Colombia
version:2.1
email;internet:krcabrer@epm.net.co
title:Profesor
fn:Kenneth Cabrera
end:vcard

--------------CC6F2641AA04ACFC35187237--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Wed Feb 13 13:47:04 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Wed, 13 Feb 2002 14:47:04 +0100 (MET)
Subject: [Rd] Re: identify(...plot=F) (PR#1157)
Message-ID: <200202131347.OAA08062@pubhealth.ku.dk>


Thanks very much for your email and for fixing the mild bug
in identify().

Can you tell me, is it fixed in R 1.4.1 (which I have not yet installed;
we're still running R 1.4.0) or do I need to get ``R.patched''
(or whatever it's called)?

					cheers,

						Rolf

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Feb 14 02:41:16 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 13 Feb 2002 18:41:16 -0800
Subject: [Rd] R-patched and R-devel
Message-ID: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>

If I configure in R-patched and R-devel, with the same options to
configure, then R-patched says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm_ in -lf77blas... yes

which R-devel says

checking for ATL_xerbla in -latlas... yes
checking for cblas_dgemm in -lcblas... yes
checking for dgemm in -lf77blas... no

This is on the same computer and using the same libraries. Observe
in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
what is intended ?

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stevelyn@mediaone.net  Thu Feb 14 02:45:14 2002
From: stevelyn@mediaone.net (stevelyn@mediaone.net)
Date: Thu, 14 Feb 2002 03:45:14 +0100 (MET)
Subject: [Rd] Command History (PR#1310)
Message-ID: <200202140245.DAA10700@pubhealth.ku.dk>

Greetings,

I don't know if this is a bug or something I did wrong. The symptom is that 
my command history is now broken. For example, the up arrow now results in 
^[OA each time it is depressed.

The build commands I used were as follows:

cp R-1.4.1.tgz /usr/lib/R
cd /usr/lib/R
tar -xvvzf R-1.4.1.tgz
cd R-1.4.1
./configure
make
make check	# No errors resulted
make dvi
make pdf
make info
make install
make install-dvi
make install-pdf
make install-info
rehash		# An alias for hash -r

A previous version of R I was using (1.3.0) was installed in a different tree 
and is no longer in use (the R script points to the new tree). I am running 
SuSE 7.3, and the former version of R did not have this problem.

Please let me know if this is a bug or if I've done something wrong.

Thanks & Best Regards,
Steve

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Feb 14 03:25:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 13 Feb 2002 21:25:58 -0600
Subject: [Rd] Command History (PR#1310)
In-Reply-To: <200202140245.DAA10700@pubhealth.ku.dk>
References: <200202140245.DAA10700@pubhealth.ku.dk>
Message-ID: <20020214032558.GA6646@sonny.eddelbuettel.com>

On Thu, Feb 14, 2002 at 03:45:14AM +0100, stevelyn@mediaone.net wrote:
[...]
> ./configure
[...]

You missed the notice about readline support.

> Please let me know if this is a bug or if I've done something wrong.

Make sure that -dev version of your distributions readline package is
installed, and found by R.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 07:16:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 08:16:28 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <15467.25676.681887.923785@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes

> which R-devel says

> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no

> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Don't think so :-)

The code in r-devel runs the BLAS tests before it has figure out the
characteristics of the Fortran compiler.  Argh.  Will fix.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 14 07:51:23 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 14 Feb 2002 07:51:23 +0000 (GMT)
Subject: [Rd] R-patched and R-devel
In-Reply-To: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>

On Wed, 13 Feb 2002, Jan de Leeuw wrote:

> If I configure in R-patched and R-devel, with the same options to
> configure, then R-patched says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm_ in -lf77blas... yes
>
> which R-devel says
>
> checking for ATL_xerbla in -latlas... yes
> checking for cblas_dgemm in -lcblas... yes
> checking for dgemm in -lf77blas... no
>
> This is on the same computer and using the same libraries. Observe
> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
> what is intended ?

Confirmed here. It seems related to the change to autoconf 2.5x,
but it is not working as intended.  The configure code has

if test "${r_cv_prog_f77_append_underscore}" = yes \
  || test -n "${F2C}"; then
  dgemm_func=dgemm_
else
  dgemm_func=dgemm
fi
...
    AC_CHECK_LIB(f77blas, $dgemm_func,
                 BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

and r_cv_prog_f77_append_underscore is being set correctly, but only later
in the configure.  I think that comes from following the autoconf
recommended order of tests (libraries, headers, ...), but we need an
exception here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Feb 14 08:45:43 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2002 09:45:43 +0100
Subject: [Rd] R-patched and R-devel
In-Reply-To: <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
References: <51C449F9-20F4-11D6-927D-000393860F3C@stat.ucla.edu>
 <Pine.GSO.4.44.0202140741290.251-100000@auk.stats>
Message-ID: <15467.31031.226217.928717@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Wed, 13 Feb 2002, Jan de Leeuw wrote:
>> If I configure in R-patched and R-devel, with the same options to
>> configure, then R-patched says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm_ in -lf77blas... yes
>> 
>> which R-devel says
>> 
>> checking for ATL_xerbla in -latlas... yes
>> checking for cblas_dgemm in -lcblas... yes
>> checking for dgemm in -lf77blas... no
>> 
>> This is on the same computer and using the same libraries. Observe
>> in R-patched we check for dgemm_ and in R-devel for dgemm. Is that
>> what is intended ?

> Confirmed here. It seems related to the change to autoconf 2.5x,
> but it is not working as intended.  The configure code has

> if test "${r_cv_prog_f77_append_underscore}" = yes \
>   || test -n "${F2C}"; then
>   dgemm_func=dgemm_
> else
>   dgemm_func=dgemm
> fi
> ...
>     AC_CHECK_LIB(f77blas, $dgemm_func,
>                  BLAS_LIBS="-lf77blas $BLAS_LIBS", , $BLAS_LIBS $FLIBS)

> and r_cv_prog_f77_append_underscore is being set correctly, but only
> later in the configure.  I think that comes from following the
> autoconf recommended order of tests (libraries, headers, ...), but we
> need an exception here.

Right.  The recipe has

     checks for programs
     checks for libraries
     checks for header files
     checks for types
     checks for structures
     checks for compiler characteristics
     checks for library functions

and this is mostly based on the idea that everything happens in C.  Will
move the BLAS tests to section library functions.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Feb 14 22:29:11 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Feb 2002 23:29:11 +0100 (MET)
Subject: [Rd] Makeconf problem (PR#1311)
Message-ID: <200202142229.XAA17547@pubhealth.ku.dk>

Full_Name: Byron Ellis
Version: 1.5.0
OS: Solaris 2.8
Submission from: (NULL) (140.247.27.60)


the INSTALL variable gets set to tools/install-sh, I'm guessing it should
actually be set to $(top_srcdir)/tools/install-sh

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Feb 15 10:33:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 15 Feb 2002 11:33:18 +0100
Subject: [Rd] Makeconf problem (PR#1311)
In-Reply-To: <200202142229.XAA17547@pubhealth.ku.dk>
References: <200202142229.XAA17547@pubhealth.ku.dk>
Message-ID: <15468.58350.693889.850281@mithrandir.hornik.net>

>>>>> bellis  writes:

> Full_Name: Byron Ellis
> Version: 1.5.0
> OS: Solaris 2.8
> Submission from: (NULL) (140.247.27.60)

> the INSTALL variable gets set to tools/install-sh, I'm guessing it
> should actually be set to $(top_srcdir)/tools/install-sh

Thanks for catching this.  Apparently I only tried the effect of using
just AC_PROG_INSTALL with srcdir != builddir.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 15:16:44 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 10:16:44 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0201301150260.117500-100000@homer04.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>

On Wed, 30 Jan 2002, Thomas Lumley wrote:

> I've just compiled R 1.4.1 on AIX 4.3 with
>
> bash% CC=cc FC=f77 ./configure
> bash% make
>
> It all seems to work (I'm running make check, but the computer is very
> slow).

I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
I still have problems.  If I could bother you a bit more, I'd like to
compare some notes.

My environment is as follows:

    RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
	calls it "powerpc-ibm-aix4.3.3.0"
    IBM C for AIX Compiler 5.0.2.2
    IBM XL Fortran Compiler 7.1.1.1
    Perl 5.005 patch 03
    makeinfo 4.0
    readline 4.2
    zlib 1.1.3
    libjpeg 6b
    libpng 1.2.0
    tcl/tk 8.3.3
    GNU make 3.79.1

This is what I started with in my config.site file:

    R_PAPERSIZE=letter
    CC=cc
    CFLAGS="-g"
    FC=f77
    CXX=g++
    MAKE=/opt/freeware/bin/make

I originally configured with "configure --enable-R-shlib" (because my
R user thought he needed it), and I gradually concluded that this was
causing lots of my problems, so I dropped it.  Now I just use "configure"
with no options.

R now runs (sort of).  It still coredumps on exit with segmentation
faults.  Sometimes it also coredumps during operation with an illegal
instruction fault.  I did run through "make check" using the expedient
of hacking the Makefiles to ignore exit errors, so it would plow ahead
even after getting the exit coredumps, and it looks like it got through
all the tests.

My user also wanted to install the Rggobi package into R, which I've
done.  Ggobi itself seems to work fine, but when I type the "ggobi"
command in R, I get an illegal instruction coredump.  Not sure if that's
an R problem or a Ggobi problem.

Do you see anything in my environment that is "wrong"?  What level of
AIX (version and maintenance level) are you building on?  What model of
RS/6000?

Thanks for your time.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Feb 15 19:12:54 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Feb 2002 11:12:54 -0800 (PST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202150730190.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>

On Fri, 15 Feb 2002, Dan Million wrote:

> On Wed, 30 Jan 2002, Thomas Lumley wrote:
>
> > I've just compiled R 1.4.1 on AIX 4.3 with
> >
> > bash% CC=cc FC=f77 ./configure
> > bash% make
> >
> > It all seems to work (I'm running make check, but the computer is very
> > slow).
>
> I've just built R 1.4.1 on AIX 4.3 myself, and while I've made progress,
> I still have problems.  If I could bother you a bit more, I'd like to
> compare some notes.
>
> My environment is as follows:
>
>     RS/6000 model H70 (PowerPC_RS64-II) running AIX 4.3.3 ML09; configure
> 	calls it "powerpc-ibm-aix4.3.3.0"
>     IBM C for AIX Compiler 5.0.2.2
>     IBM XL Fortran Compiler 7.1.1.1
>     Perl 5.005 patch 03
>     makeinfo 4.0
>     readline 4.2
>     zlib 1.1.3
>     libjpeg 6b
>     libpng 1.2.0
>     tcl/tk 8.3.3
>     GNU make 3.79.1
>
> This is what I started with in my config.site file:
>
>     R_PAPERSIZE=letter
>     CC=cc
>     CFLAGS="-g"
>     FC=f77
>     CXX=g++
>     MAKE=/opt/freeware/bin/make
>

That all looks reasonable. I've got Perl 5.6.0, but Perl isn't needed at
runtime. I don't have makeinfo or readline. I don't know if g++ is
compatible with the C and Fortran compilers but there isn't any C++ in the
base R.

>
> Do you see anything in my environment that is "wrong"?  What level of
> AIX (version and maintenance level) are you building on?  What model of
> RS/6000?

Some of this I'll need to get from our administrators.

It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
7015/R24.
lslpp  -L suggests that the versions of various components of AIX are
mostly 4.3.3.10 or 4.3.3.25

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Fri Feb 15 19:47:19 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Fri, 15 Feb 2002 14:47:19 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0202151027570.62228-100000@homer11.u.washington.edu>
Message-ID: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>

On Fri, 15 Feb 2002, Thomas Lumley wrote:

> > Do you see anything in my environment that is "wrong"?  What level of
> > AIX (version and maintenance level) are you building on?  What model of
> > RS/6000?
>
> Some of this I'll need to get from our administrators.
>
> It's a cluster of RS/6000s and from uname they appear to be 7015/R00 or
> 7015/R24.
> lslpp  -L suggests that the versions of various components of AIX are
> mostly 4.3.3.10 or 4.3.3.25

Yes, it sounds like you're running on pretty old hardware, and using a
fairly back-level version of AIX 4.3.3.  Maintenance level 2 or 3 maybe.
I'm afraid that IBM has introduced so much new stuff (including bugs) in
some of the recent maintenance level patches that we're probably comparing
apples and oranges here.

If you're interested, you can get the maintenance level by typing:

	instfix -i | grep ML

and look at the last line printed, which should look something like:

	All filesets for 4330-03_AIX_ML were found.

indicating that the machine is at ML03.

By the way, my user has emphasized that they really need the R shared
library.  And if I build with --enable-R-shlib, then chunks of R simply
don't work at all (like the X11 support).  Ah well....

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ckhung@cyut.edu.tw  Sat Feb 16 00:35:27 2002
From: ckhung@cyut.edu.tw (ckhung@cyut.edu.tw)
Date: Sat, 16 Feb 2002 01:35:27 +0100 (MET)
Subject: [Rd] latitude <-> longitude in quake.tab (PR#1312)
Message-ID: <200202160035.BAA23321@pubhealth.ku.dk>

Full_Name: Chao-Kuei Hung
Version: 1.3.1
OS: RedHat Linux 7.0
Submission from: (NULL) (163.32.17.245)


Dear all,

I checked a world map and realized that Tonga Trench lies
near 20S176W, i.e. latitude -20, longitude 184. The labels
in the file library/base/data/quakes.tab got latitude
and longitude mixed up. (Latitudes should always be within
+-90 anyway :-) Thanks for your attention.

BTW, it would be nice if there are more real-world sample
data files with categorical data

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sat Feb 16 04:27:29 2002
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Sat, 16 Feb 2002 05:27:29 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160427.FAA23581@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.4.1
OS: redhat 7.1
Submission from: (NULL) (128.252.204.36)


Hi, the top of the file
R-1.4.1/src/gnuwin32/readme

looks like:

R @RVER@ for Windows
===================

and further down, this @RVER@ is repeated, e.g. in section 3:

3) The full distribution consists of several zip files:

@RWVER@b.zip				the base system
@RWVER@h.zip				text help
...
Is this intentional?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 16 08:02:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Feb 2002 09:02:00 +0100 (MET)
Subject: [Rd] gnuwin32/readme has @RVER@ still in it (PR#1313)
Message-ID: <200202160802.JAA23780@pubhealth.ku.dk>

On Sat, 16 Feb 2002 stephen@cogsci.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.4.1
> OS: redhat 7.1
> Submission from: (NULL) (128.252.204.36)
>
>
> Hi, the top of the file
> R-1.4.1/src/gnuwin32/readme
>
> looks like:
>
> R @RVER@ for Windows
> ===================
>
> and further down, this @RVER@ is repeated, e.g. in section 3:
>
> 3) The full distribution consists of several zip files:
>
> @RWVER@b.zip				the base system
> @RWVER@h.zip				text help
> ...
> Is this intentional?

Yes. Lots of source files are processed prior to installation.

rw1041/README does not have @RVER@ in it.

Submitting incorrect bug reports does add to the work of the volunteer
team, so please do read the BUGS section in the FAQ carefully.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jzacks@artsci.wustl.edu  Sun Feb 17 20:39:11 2002
From: jzacks@artsci.wustl.edu (jzacks@artsci.wustl.edu)
Date: Sun, 17 Feb 2002 21:39:11 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202172039.VAA26668@pubhealth.ku.dk>

Full_Name: Jeff Zacks
Version: 1.4.0
OS: Mac OS X
Submission from: (NULL) (209.16.201.87)


Hi,

I believe there may be a problem with how Error strata are handled in aov, for
designs with multiple error strata involving multiple interactions.  The
following performs the expected repeated-measures ANOVA when called in S-Plus,
gives an error when called in R.

In this example, the design is a simple 2x2x2 repeated-measures design with 2
subjects.

Hope this is helpful.

Best,

Jeff Zacks

> dat <- read.table("foo", header=T)
> dat
   Subj within1 within2 within3 depvar
1     A       0       0       1      1
2     A       0       1       0      2
3     A       1       0       0      3
4     A       0       1       1      4
5     A       1       0       1      5
6     A       1       1       0      6
7     B       0       0       1      2
8     B       0       1       0      3
9     B       1       0       0      4
10    B       0       1       1      5
11    B       1       0       1      6
12    B       1       1       0      7
> summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
Subj:within2:within3), data=dat))
Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :

	object is not a matrix
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 18 09:55:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Feb 2002 10:55:49 +0100 (MET)
Subject: [Rd] Error strata in aov (PR#1315)
Message-ID: <200202180955.KAA29237@pubhealth.ku.dk>

On Sun, 17 Feb 2002 jzacks@artsci.wustl.edu wrote:

> Full_Name: Jeff Zacks
> Version: 1.4.0
> OS: Mac OS X
> Submission from: (NULL) (209.16.201.87)
>
>
> Hi,
>
> I believe there may be a problem with how Error strata are handled in aov, for
> designs with multiple error strata involving multiple interactions.  The
> following performs the expected repeated-measures ANOVA when called in S-Plus,
> gives an error when called in R.

The problem is the length of your Error formula.  In aov there is a
line:

eTerm <- deparse(errorterm[[2]])

change it to

eTerm <- deparse(errorterm[[2]], width = 500)

and later

lmcall$formula <- form <- update(formula, paste(". ~ .-",
deparse(errorterm)))

needs to be deparse(errorterm, width=500)

and then correct the formula you gave (there is no withn3, so this cannot
have worked in S-PLUS).

With those corrections I get the same answers as S-PLUS 6.0.

> In this example, the design is a simple 2x2x2 repeated-measures design with 2
> subjects.
>
> Hope this is helpful.
>
> Best,
>
> Jeff Zacks
>
> > dat <- read.table("foo", header=T)
> > dat
>    Subj within1 within2 within3 depvar
> 1     A       0       0       1      1
> 2     A       0       1       0      2
> 3     A       1       0       0      3
> 4     A       0       1       1      4
> 5     A       1       0       1      5
> 6     A       1       1       0      6
> 7     B       0       0       1      2
> 8     B       0       1       0      3
> 9     B       1       0       0      4
> 10    B       0       1       1      5
> 11    B       1       0       1      6
> 12    B       1       1       0      7
> > summary(aov(depvar ~ within1*within2*withn3 + Error(Subj:within1 +
> Subj:within2 + Subj:within3 + Subj:within1:within2 + Subj:within1+within3 +
> Subj:within2:within3), data=dat))
> Error in model.frame.default(formula = depvar ~ Subj:within1 + Subj:within2 +  :
>
> 	object is not a matrix
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Feb 18 17:53:43 2002
From: lio@hpss1.ccs.ornl.gov (lio@hpss1.ccs.ornl.gov)
Date: Mon, 18 Feb 2002 18:53:43 +0100 (MET)
Subject: [Rd] shared libraries on AIX (PR#1316)
Message-ID: <200202181753.SAA04415@pubhealth.ku.dk>

Full_Name: Daniel L. Million
Version: 1.4.1
OS: AIX 4.3.3/5.1
Submission from: (NULL) (160.91.192.125)


R almost works if I build on AIX without the R shared library (except for
crashing
on exit and a few other anomalies).  I can't get it to do much at all if I
build
with --enable-R-shlib.

For example, it won't load the X11 driver.  I ran R in a debugger and traced it
down to the point where R_load_X11_shlib successfully loads the R_X11.so
library
and calls R_init_X11.  This calls R_setX11Routines in src/unix/X11.c.  On entry

to this function, ptr_X11DeviceDriver = 0x2002eb20 and dev = 0x2014ba08.  After
the statement

    ptr_X11DeviceDriver = dev;

is executed, ptr_X11DeviceDriver remains unchanged at 0x2002eb20 !!  So when I
type "X11()" at the R prompt, all I ever get is the stub message, "the x11
device
has not been loaded".

I don't know enough about how shared libraries interact to understand why this
pointer is apparently write-protected.  I'm hoping someone here can give me a
clue.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Feb 19 00:22:59 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 19 Feb 2002 01:22:59 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
Message-ID: <200202190022.BAA05385@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe
Submission from: (NULL) (217.208.14.137)


Doing the following

library(methods)
setGeneric("foo", function(x) standardGeneric("foo"))
setMethod("foo", "ANY", function(x) cat(x))

fails with

Error in while (value[n] == "ANY") n <- n - 1 : 
        missing value where logical needed

It looks like the line

  while (value[n] == "ANY") n <- n - 1

in the source for matchSignature() should be

  while (n > 0 && value[n] == "ANY") n <- n - 1


FYI: I tried my suggested modification at it seems to work.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ottisopt@yahoo.com  Tue Feb 19 06:43:11 2002
From: ottisopt@yahoo.com (ottisopt@yahoo.com)
Date: Tue, 19 Feb 2002 02:43:11 -0400
Subject: [Rd] News Update: Diamond Entertainment Corp.
Message-ID: <B0000011338@wi-poli.poli.cl>

For latest news on Diamond Entertainment Corp. (SYMBOL: DMEC), click this link:




http://finance.yahoo.com/q?s=dmec.ob&d=v1









Disclaimer: The writers of this e-mail do not make specific trading recommendations or give individualized market advice. Information contained in this e-mail is provided as an information service only. It is recommended that you get personal advice from an investment professional before buying or selling stocks or other securities. The securities markets are highly speculative areas for investments and only you can determine what level of risk is appropriate for you.  In no way should this be construed as a recommendation to buy or sell a particular security.

All our mailings are sent complying to the proposed United States Federal requirements for commercial e-mail: Section 301 Paragraph (a)(2)(C) of S. 618. Please see the bottom of this message for further information and removal instructions.

This is not a spam! Your are receiving this email either because, you have sent me and email in the past, or you are on a list of marketers requesting information. If this is not the case, PLEASE accept my sincerest apologies and reply with "remove" in the subject field. I will remove your name immediately!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Feb 19 20:21:05 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 19 Feb 2002 15:21:05 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Fri, 15 Feb 2002 14:47:19 -0500 (EST)"
References: <Pine.A41.4.31.0202151440090.18556-100000@hpss1.ccs.ornl.gov>
Message-ID: <px664t1avi.fsf@infiniti.ece.cmu.edu>


Dan,

- have you tried gcc instead of xlc?  It's surprisingly easy to
  install for AIX.
- have you tried to turn off all optimizations (explicitly if needed)?

My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
seen a problem yet.  

> By the way, my user has emphasized that they really need the R shared
> library.  And if I build with --enable-R-shlib, then chunks of R simply
> don't work at all (like the X11 support).  Ah well....

I could try building the shared lib.  But without knowing that you
could switch to gcc, I wouldn't help.  (I can't run xlc).

  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 20:36:01 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 15:36:01 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px664t1avi.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>

On 19 Feb 2002, Thomas Vogels wrote:

> - have you tried gcc instead of xlc?  It's surprisingly easy to
>   install for AIX.
> - have you tried to turn off all optimizations (explicitly if needed)?

I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
objects with IBM XL Fortran objects in the same library.

> My AIX box also has ML 9 but I'm not using xlc but gcc.  And I haven't
> seen a problem yet.
>
> > By the way, my user has emphasized that they really need the R shared
> > library.  And if I build with --enable-R-shlib, then chunks of R simply
> > don't work at all (like the X11 support).  Ah well....
>
> I could try building the shared lib.  But without knowing that you
> could switch to gcc, I wouldn't help.  (I can't run xlc).

I'm finding more and more problems with the R shared library.  I don't
think it's being built correctly at all.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 19 20:43:09 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2002 20:43:09 +0000 (GMT)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0202191534130.18582-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>

On Tue, 19 Feb 2002, Dan Million wrote:

> On 19 Feb 2002, Thomas Vogels wrote:
>
> > - have you tried gcc instead of xlc?  It's surprisingly easy to
> >   install for AIX.
> > - have you tried to turn off all optimizations (explicitly if needed)?
>
> I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> objects with IBM XL Fortran objects in the same library.

gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
for evidence.)  You should be able to install the parts you (or someone)
omitted before.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Tue Feb 19 21:54:25 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Tue, 19 Feb 2002 16:54:25 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.LNX.4.31.0202192040190.10225-100000@gannet.stats>
Message-ID: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>

On Tue, 19 Feb 2002, Prof Brian Ripley wrote:

> > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > objects with IBM XL Fortran objects in the same library.
>
> gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> for evidence.)  You should be able to install the parts you (or someone)
> omitted before.

Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
package does not include g77.  I realize I could start all over and get
another gcc package from somewhere else.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Feb 19 23:49:30 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 19 Feb 2002 18:49:30 -0500
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
References: <200202190022.BAA05385@pubhealth.ku.dk>
Message-ID: <3C72E48A.CB993116@research.bell-labs.com>

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: R v1.4.1
> OS: WinMe
> Submission from: (NULL) (217.208.14.137)
> 
> Doing the following
> 
> library(methods)
> setGeneric("foo", function(x) standardGeneric("foo"))
> setMethod("foo", "ANY", function(x) cat(x))
> 
> fails with
> 
> Error in while (value[n] == "ANY") n <- n - 1 :
>         missing value where logical needed
> 
> It looks like the line
> 
>   while (value[n] == "ANY") n <- n - 1
> 
> in the source for matchSignature() should be
> 
>   while (n > 0 && value[n] == "ANY") n <- n - 1
> 
> FYI: I tried my suggested modification at it seems to work.

Yes, thanks, that's correct.

It had been fixed in r-patched and r-devel, but too late for 1.4.1.


> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Wed Feb 20 08:06:34 2002
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Wed, 20 Feb 2002 09:06:34 +0100 (MET)
Subject: [Rd] library(methods): setMethod with "ANY" fails. (PR#1317)
In-Reply-To: <3C72E48A.CB993116@research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10202200857570.21509-100000@speed.maths.lth.se>

Great.

/Henrik


On Tue, 19 Feb 2002, John Chambers wrote:

> hb@maths.lth.se wrote:
> > 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.1
> > OS: WinMe
> > Submission from: (NULL) (217.208.14.137)
> > 
> > Doing the following
> > 
> > library(methods)
> > setGeneric("foo", function(x) standardGeneric("foo"))
> > setMethod("foo", "ANY", function(x) cat(x))
> > 
> > fails with
> > 
> > Error in while (value[n] == "ANY") n <- n - 1 :
> >         missing value where logical needed
> > 
> > It looks like the line
> > 
> >   while (value[n] == "ANY") n <- n - 1
> > 
> > in the source for matchSignature() should be
> > 
> >   while (n > 0 && value[n] == "ANY") n <- n - 1
> > 
> > FYI: I tried my suggested modification at it seems to work.
> 
> Yes, thanks, that's correct.
> 
> It had been fixed in r-patched and r-devel, but too late for 1.4.1.
> 
> 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 09:54:16 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 10:54:16 +0100
Subject: [Rd] f2c problem
Message-ID: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>

In building princurve package for MacOS I need to use f2c on fortran 
files.

Here is the output of f2c for getlam.f

getlam.f:
    getlam:
    newlam:
    lamix:
Error on line 116 of getlam.f: Declaration error for v: adjustable 
dimension on non-argument
Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size

what I found strange is that both newlam and get lam have definitions 
like


  subroutine newlam(n,p,sx,lambda,tag)
       integer n,p,tag(n)
       double precision sx(n,p),lambda(n),lami


but for some reason f2c complains only with the last lamix subroutine

   subroutine lamix(ns,p,x,s,lambda,dismin,temps)
       integer ns,p
       double precision lambda,x(p),s(ns,p),dismin,temps(p)
       double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w

probably because v is not passed as an argument.

Any idea on how to manage this in f2c ?

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Feb 20 10:27:46 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 20 Feb 2002 11:27:46 +0100 (CET)
Subject: [Rd] f2c problem
In-Reply-To: <CD0C9ECC-25E7-11D6-B62B-003065CC4CB8@mclink.it>
Message-ID: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> In building princurve package for MacOS I need to use f2c on fortran 
> files.
> 
> Here is the output of f2c for getlam.f
> 
> getlam.f:
>     getlam:
>     newlam:
>     lamix:
> Error on line 116 of getlam.f: Declaration error for v: adjustable 
> dimension on non-argument
> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
> 
> what I found strange is that both newlam and get lam have definitions 
> like
> 
> 
>   subroutine newlam(n,p,sx,lambda,tag)
>        integer n,p,tag(n)
>        double precision sx(n,p),lambda(n),lami
> 
> 
> but for some reason f2c complains only with the last lamix subroutine
> 
>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>        integer ns,p
>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
> 
> probably because v is not passed as an argument.

Definitely because v is local; this construct is a gcc extension to the 
standard, I think. Solutions: 1) pass v as an argument and reserv space
in the calling function. 2) Instead of  p, use 1000 (or some other
large number, which p never will exceed). 3) Use gcc.

Göran
> 
> Any idea on how to manage this in f2c ?
> 
> Stefano
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 10:34:27 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 10:34:27 +0000
Subject: [Rd] Pivoting in chol
Message-ID: <3C737BB3.13BE8B84@durham.ac.uk>

This is a multi-part message in MIME format.
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Everyone,

I have modified my version of R-1.4.1 to include choleski with pivoting
(like in Splus).  I thought R-core might consider including this in the
next version of R, so I give below the steps required to facilitate
this.

1. Copied Linpack routine "dchdc.f" into src/appl

2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES

3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in

4. Modifed src/library/base/R/chol.R (attached) and 
src/library/base/man/chol.Rd (also attached)

5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.

6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".

I was following my nose a bit during this process.  Everything seems to
be OK but if I have done something drastic I would appreciate it if
someone could tell me!

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.R"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.R"

# modifed J.C.Rougier <J.C.Rougier@durham.ac.uk>, 19.02.02
# to allow cholesky decomposition with pivoting.
#
#chol <- function(x)
#{
#    if(!is.numeric(x))
#	stop("non-numeric argument to chol")
#
#    if(is.matrix(x)) {
#	if(nrow(x) != ncol(x))
#	    stop("non-square matrix in chol")
#	n <- nrow(x)
#    }
#    else {
#	if(length(x) != 1)
#	    stop("non-matrix argument to chol")
#	n <- as.integer(1)
#    }
#
#    if(!is.double(x)) storage.mode(x) <- "double"
#
#    z <- .Fortran("chol",
#		  x=x,
#		  n,
#		  n,
#		  v=matrix(0, nr=n, nc=n),
#		  info=integer(1),
#		  DUP=FALSE, PACKAGE="base")
#    if(z$info)
#	stop("non-positive definite matrix in chol")
#    z$v
#}

"chol" <- function(x, pivot = FALSE)
{
  if (is.complex(x))
    stop("complex matrices not permitted at present")
  else if (!is.numeric(x))
    stop("non-numeric argument")
  x <- as.matrix(x)
  if (length(p <- unique(dim(x))) > 1)
    stop("non-square matrix")

  x[lower.tri(x)] <- 0
  if (!is.double(x))
    storage.mode(x) <- "double"

  z <- .Fortran("dchdc",
    x = x,
    as.integer(p),
    as.integer(p),
    double(p),
    piv = as.integer(rep(0, p)),
    as.integer(pivot),
    rank = integer(1),
    package = "BASE"
  )[c(1, 5, 7)]

  if (!pivot && z$rank<p)
    stop("matrix not positive definite")

  robj <- z$x
  if (pivot) {
    attr(robj, "pivot") <- z$piv
    attr(robj, "rank") <- z$rank
  }
  robj
}

chol2inv <- function(x, size=ncol(x))
{
    if(!is.numeric(x))
	stop("non-numeric argument to chol2inv")
    if (!is.null(attr(x, "pivot")))
        stop("not implemented for pivoted Choleski decomposition") # JCR added
    if(is.matrix(x)) {
	nr <- nrow(x)
	nc <- ncol(x)
    }
    else {
	nr <- length(x)
	nc <- as.integer(1)
    }
    size <- as.integer(size)
    if(size <= 0 || size > nr || size > nc)
	stop("invalid size argument in chol2inv")
    if(!is.double(x)) storage.mode(x) <- "double"
    z <- .Fortran("ch2inv",
		  x=x,
		  nr,
		  size,
		  v=matrix(0, nr=size, nc=size),
		  info=integer(1),
		  DUP=FALSE, PACKAGE="base")
    if(z$info)
	stop("singular matrix in chol2inv")
    z$v
}

--------------06648C7828389FFEA9FD7F0C
Content-Type: text/plain; charset=us-ascii;
 name="chol.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="chol.Rd"

\name{chol}

\alias{chol}

\title{The Choleski Decomposition}

\description{
  Compute the Choleski factorization of a symmetric real non-negative
  definite square matrix, i.e. the matrix \code{Q} for which
  \code{t(Q) \%*\% Q} equals \code{x}.  }

\usage{
chol(x, pivot = FALSE)
}

\arguments{
  \item{x}{a symmetric, positive definite matrix}
  \item{pivot}{Should pivoting be used?}
}
\value{
  The Choleski decomposition of \code{x}, as an upper-triangular
  matrix.  If pivoting is used, then two additional attributes
  \code{pivot} and \code{rank} are also returned (see Details for more
  information).
}

\details{
  Note that only the upper triangular part of \code{x} is used, so
  that \code{t(Q) \%*\% Q} only equals \code{x} when \code{x} is
  symmetric.

  If \code{pivot=FALSE} and \code{x} is not non-negative definite an
  error occurs.  If \code{x} is positive semi-definite (ie some zero
  eigenvalues) an error may or may not occur, depending on
  finite precision numerical errors.

  If \code{pivot=TRUE}, then the Choleski decomposition of a positive
  semi-definite \code{x} can be computed.  The rank of \code{x} is
  returned as \code{attr(Q, "rank")}, subject to numerical errors.
  The pivot is returned as \code{attr(Q, "pivot")}.  It is no longer
  the case that \code{t(Q) \%*\% Q} equals \code{x}.  However, setting
  \code{pivot <- attr(Q, "pivot")} and \code{oo <- order(pivot)}, it
  is now true that \code{t(Q[, oo]) \%*\% Q[, oo]} equals \code{x},
  or, alternatively, \code{t(Q) \%*\% Q} equals \code{x[pivot,
  pivot]}.  See the examples for more information.
}

\section{Warning}{
  The code does not check for symmetry or for non-negative
  definiteness.  If \code{pivot=TRUE} and \code{x} is not non-negative
  definite then there will be no error message but a meaningless
  result will occur.  So only use \code{pivot=TRUE} when \code{x} is
  non-negative definite by construction.
}

\references{
  Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
  \emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.
}

\seealso{
  \code{\link{chol2inv}} for its \emph{inverse} (without pivoting),
  \code{\link{backsolve}} for solving linear systems with upper
  triangular left sides.

  \code{\link{qr}}, \code{\link{svd}} for related matrix factorizations.
}

\examples{
x <- matrix(c(1:5, (1:5)^2), 5, 2)
m <- crossprod(x)
Q <- chol(m)
all.equal.numeric(t(Q) \%*\% Q, m) # TRUE

Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# now for something postitive semi definite

x <- cbind(x, x[, 1]+3*x[, 2])
m <- crossprod(x)
qr(m)$rank # is 2, as it should be

test <- try(Q <- chol(m))
inherits(test, "try-error") # TRUE

Q <- chol(m, pivot=TRUE) # nb wrong rank here ... you have been warned!
pivot <- attr(Q, "pivot")
oo <- order(pivot)
all.equal.numeric(t(Q[, oo]) \%*\% Q[, oo], m) # TRUE
all.equal.numeric(t(Q) \%*\% Q, m[pivot, pivot]) # TRUE

# and something meaningless

m <- matrix(1:16, 4, 4)
m <- m + t(m) # not nnd
Q <- chol(m, pivot=TRUE)
pivot <- attr(Q, "pivot")
all.equal(t(Q) \%*\% Q, m[pivot, pivot]) # FALSE!
}

\keyword{algebra}
\keyword{array}

--------------06648C7828389FFEA9FD7F0C--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Feb 20 10:59:43 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Feb 2002 10:59:43 +0000 (GMT)
Subject: [Rd] Pivoting in chol
In-Reply-To: <3C737BB3.13BE8B84@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>

Jonathan,

I think our general policy is to move towards using LAPACK for its
superior algorithms and better use of enhanced BLAS routines.  Is there a
suitable LAPACK alternative: my LAPACK manual is in my office and I am
not? (We are also tending to use .Call rather than .Fortran/.C to control
better the making of copies.)

We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
packages might well rely on them, see R-exts.texi.

Brian

On Wed, 20 Feb 2002, Jonathan Rougier wrote:

> Hi Everyone,
>
> I have modified my version of R-1.4.1 to include choleski with pivoting
> (like in Splus).  I thought R-core might consider including this in the
> next version of R, so I give below the steps required to facilitate
> this.
>
> 1. Copied Linpack routine "dchdc.f" into src/appl
>
> 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
>
> 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
>
> 4. Modifed src/library/base/R/chol.R (attached) and
> src/library/base/man/chol.Rd (also attached)
>
> 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
>
> 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
>
> I was following my nose a bit during this process.  Everything seems to
> be OK but if I have done something drastic I would appreciate it if
> someone could tell me!
>
> Cheers, Jonathan.
> --
> Jonathan Rougier                       Science Laboratories
> Department of Mathematical Sciences    South Road
> University of Durham                   Durham DH1 3LE
> tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 11:14:51 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 12:14:51 +0100
Subject: [Rd] f2c problem
In-Reply-To: <Pine.LNX.4.44.0202201122330.30989-100000@tal.stat.umu.se>
Message-ID: <0F4576C7-25F3-11D6-B62B-003065CC4CB8@mclink.it>

ok, in this case I need to write to the package maintainer. Thanks.

stefano

p.s. on MacOS there is no even the idea of g77 nor gcc.




On Mercoledì, febbraio 20, 2002, at 11:27 , Göran Broström wrote:

> On Wed, 20 Feb 2002, Stefano Iacus wrote:
>
>> In building princurve package for MacOS I need to use f2c on fortran
>> files.
>>
>> Here is the output of f2c for getlam.f
>>
>> getlam.f:
>>     getlam:
>>     newlam:
>>     lamix:
>> Error on line 116 of getlam.f: Declaration error for v: adjustable
>> dimension on non-argument
>> Error on line 116 of getlam.f: wr_ardecls:  nonconstant array size
>>
>> what I found strange is that both newlam and get lam have definitions
>> like
>>
>>
>>   subroutine newlam(n,p,sx,lambda,tag)
>>        integer n,p,tag(n)
>>        double precision sx(n,p),lambda(n),lami
>>
>>
>> but for some reason f2c complains only with the last lamix subroutine
>>
>>    subroutine lamix(ns,p,x,s,lambda,dismin,temps)
>>        integer ns,p
>>        double precision lambda,x(p),s(ns,p),dismin,temps(p)
>>        double precision v(2,p),d1sqr,d2sqr,d12,dsqr, d1,w
>>
>> probably because v is not passed as an argument.
>
> Definitely because v is local; this construct is a gcc extension to the
> standard, I think. Solutions: 1) pass v as an argument and reserv space
> in the calling function. 2) Instead of  p, use 1000 (or some other
> large number, which p never will exceed). 3) Use gcc.
>
> Göran
>>
>> Any idea on how to manage this in f2c ?
>>
>> Stefano
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>> -.-.-.-
>> r-devel mailing list -- Read 
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>> _._._._
>>
>
> --
>  Göran Broström                      tel: +46 90 786 5223
>  professor                           fax: +46 90 786 6614
>  Department of Statistics            http://www.stat.umu.se/egna/gb/
>  Umeå University
>  SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Feb 20 11:16:54 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Feb 2002 11:16:54 +0000
Subject: [Rd] Pivoting in chol
References: <Pine.LNX.4.31.0202201050320.22913-100000@gannet.stats>
Message-ID: <3C7385A6.B29155D6@durham.ac.uk>

Hi Brian,

Prof Brian Ripley wrote:

> I think our general policy is to move towards using LAPACK for its
> superior algorithms and better use of enhanced BLAS routines.  Is there a
> suitable LAPACK alternative: my LAPACK manual is in my office and I am
> not? (We are also tending to use .Call rather than .Fortran/.C to control
> better the making of copies.)

The Lapack routine is "dpotrf", which does not pivot: I searched netlib
for all the words "cholesky lapack double pivot" and drew a blank.

> We can't remove LINPACK routines which are in include/R_ext/Linpack.h:
> packages might well rely on them, see R-exts.texi.

That's true -- I'll put them back!

Cheers, Jonathan.

> On Wed, 20 Feb 2002, Jonathan Rougier wrote:
> 
> > Hi Everyone,
> >
> > I have modified my version of R-1.4.1 to include choleski with pivoting
> > (like in Splus).  I thought R-core might consider including this in the
> > next version of R, so I give below the steps required to facilitate
> > this.
> >
> > 1. Copied Linpack routine "dchdc.f" into src/appl
> >
> > 2. Inserted line F77_SUBROUTINE(dchdc) in src/appl/ROUTINES
> >
> > 3. Inserted "dchdc.f" into SOURCES_F in appl/Makefile.in
> >
> > 4. Modifed src/library/base/R/chol.R (attached) and
> > src/library/base/man/chol.Rd (also attached)
> >
> > 5. Tidied up.  Removed "chol.f", "dpoco.f" and "dposl.f" from
> > src/appl/Makefile.in, src/appl/ROUTINES, src/include/R_ext/Applic.h,
> > src/include/R_ext/Linpack.h, src/unix/FFDecl.h and src/unix/FFTab.h.
> >
> > 6. Note: Cannot remove "dpofa.f" because it is used in "lbfgsb.c".
> >
> > I was following my nose a bit during this process.  Everything seems to
> > be OK but if I have done something drastic I would appreciate it if
> > someone could tell me!
> >
> > Cheers, Jonathan.
> > --
> > Jonathan Rougier                       Science Laboratories
> > Department of Mathematical Sciences    South Road
> > University of Durham                   Durham DH1 3LE
> > tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
> > http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From d.orme@ic.ac.uk  Wed Feb 20 15:41:29 2002
From: d.orme@ic.ac.uk (d.orme@ic.ac.uk)
Date: Wed, 20 Feb 2002 16:41:29 +0100 (MET)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
Message-ID: <200202201541.QAA20109@pubhealth.ku.dk>

Full_Name: David Orme
Version: 1.4.0
OS: Mac OS 9.1
Submission from: (NULL) (155.198.17.121)


 R crashes (politely and without further repercussions) with a type 3 error
under the following conditions:

Open more than one macintosh() graphics device:
> macintosh()
> macintosh()

and hence there are two devices...
> dev.list()
Macintosh Macintosh 
        2         3 
..with device 3 active.

Selecting device 2 with the mouse brings that device window to the front but
does not make it active - although the device name in the window title bar
flickers briefly to active and then back to inactive. Closing the inactive
device (2) by mouse clicking on the close box causes the crash - I've replicated
this six or seven times successively on my G3.

Using dev.off(2) behaves as expected.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Feb 20 16:21:53 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 20 Feb 2002 17:21:53 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>

(I'm actually on OSX and rel 1.4.1 of R but) it is normal that an 
inactive window is not activated by mouse clicking. Mouse clicking put 
only the windows in front of the others (and it is activated as a 
window  but not as a device). To activate the "device" linked to a 
window you can use the menus, for example, once you have put the window 
in front.

I'll investigate what is happening under OS 9.1 because under OSX I 
cannot reproduce the problem.

thanks for spotting this.

stefano


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Feb 20 16:29:57 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 20 Feb 2002 08:29:57 -0800 (PST)
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <F3A38020-261D-11D6-BC30-003065CC4CB8@mclink.it>
Message-ID: <Pine.A41.4.44.0202200826380.112560-100000@homer06.u.washington.edu>

On Wed, 20 Feb 2002, Stefano Iacus wrote:

> (I'm actually on OSX and rel 1.4.1 of R but) it is normal that an
> inactive window is not activated by mouse clicking. Mouse clicking put
> only the windows in front of the others (and it is activated as a
> window  but not as a device). To activate the "device" linked to a
> window you can use the menus, for example, once you have put the window
> in front.

Another note: it has historically been a bad idea to use the window
manager to destroy an R or S graphical device -- dev.off() has been
strongly recommended.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Feb 20 18:15:29 2002
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 20 Feb 2002 13:15:29 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: Dan Million's message of "Tue, 19 Feb 2002 16:54:25 -0500 (EST)"
References: <Pine.A41.4.31.0202191652270.18622-100000@hpss1.ccs.ornl.gov>
Message-ID: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>


Dan Million <lio@hpss1.ccs.ornl.gov> writes:

> On Tue, 19 Feb 2002, Prof Brian Ripley wrote:
> 
> > > I have gcc; the trouble is I don't have g77, and I don't want to mix gcc
> > > objects with IBM XL Fortran objects in the same library.
> >
> > gcc is the Gnu Compiler Collection: g77 is part of it!  (see gcc.gnu.org
> > for evidence.)  You should be able to install the parts you (or someone)
> > omitted before.
> 
> Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> package does not include g77.  I realize I could start all over and get
> another gcc package from somewhere else.

I would recommend that.  As I said, gcc is relatively easy to
install.  I followed the info provided and didn't run into any
problems. (That's status from last summer, I don't think that this
changed.)  And yes, you don't want to mix gcc with xlf.
Don't get another 'gcc package'.  Download the source tarball from
gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
use, I possibly can reproduce your problems on my AIX box (if any remain).
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 21:15:12 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 16:15:12 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>


Hi Guys,

I've again been surprised when something like

> m <- matrix("", nrow=3,ncol=3)
> index_i <- c(2,1,3)
> index_j <- c(1,3,2)
> vals    <- c("a","b","c")
> m[ index_i, index_j ] <- vals
> m

gives block-wise application of the assignment:

     [,1] [,2] [,3]
[1,] "b"  "b"  "b" 
[2,] "a"  "a"  "a" 
[3,] "c"  "c"  "c" 

when what I wanted was by-element assignment:

     [,1] [,2] [,3]
[1,]   ""   ""  "b"
[2,]  "a"   ""   ""
[3,]   ""  "c"   ""


I always end up writing the code:

> for( p in length(index_i) )
>    m[ index_i[p], index_j[p] ] <- vals[p]

to do what I want.

So, I'm thinking about creating a patch to the R source to add an optional
parameter, say "block",  to the "[<-" call for matrixes and data frames.  

When "block=T" (the default) the old behaviour is preserved.  When "block=F"
the behavior I want occures so that 

> m[ index_i, index_j, block=F ] <- vals

would do what I want.


Comments?  Cheers?  Jeers?  Silence?


-Greg

 



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Wed Feb 20 21:36:41 2002
From: david.meyer@ci.tuwien.ac.at (David Meyer)
Date: Wed, 20 Feb 2002 22:36:41 +0100
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <3C7416E9.19D7807@ci.tuwien.ac.at>

"Warnes, Gregory R" wrote:
> 
> Hi Guys,
> 
> I've again been surprised when something like
> 
> > m <- matrix("", nrow=3,ncol=3)
> > index_i <- c(2,1,3)
> > index_j <- c(1,3,2)
> > vals    <- c("a","b","c")
> > m[ index_i, index_j ] <- vals
> > m
> 
> gives block-wise application of the assignment:
> 
>      [,1] [,2] [,3]
> [1,] "b"  "b"  "b"
> [2,] "a"  "a"  "a"
> [3,] "c"  "c"  "c"
> 

Yes, you need to provide the indices as matrix, like:

m[cbind(index_i,index_j)]

(BTW: Hou do you manage to get index_i <- c(...) properly working? My R
version still treats _ as a replacement for <-)

> when what I wanted was by-element assignment:
> 
>      [,1] [,2] [,3]
> [1,]   ""   ""  "b"
> [2,]  "a"   ""   ""
> [3,]   ""  "c"   ""
> 
> I always end up writing the code:
> 
> > for( p in length(index_i) )
> >    m[ index_i[p], index_j[p] ] <- vals[p]
> 
> to do what I want.
> 
> So, I'm thinking about creating a patch to the R source to add an optional
> parameter, say "block",  to the "[<-" call for matrixes and data frames.
> 
> When "block=T" (the default) the old behaviour is preserved.  When "block=F"
> the behavior I want occures so that
> 
> > m[ index_i, index_j, block=F ] <- vals
> 
> would do what I want.
> 
> Comments?  Cheers?  Jeers?  Silence?
> 
> -Greg
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:04:53 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:04:53 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CB@groexmbcr02.pfizer.com>

Hi All,

Typo in my code (as pointed out by David Meyer),  "index_i" and "index_j"
should be "index.i" and "index.j".   

-Greg


> -----Original Message-----
> From: David Meyer [mailto:david.meyer@ci.tuwien.ac.at]
> Sent: Wednesday, February 20, 2002 4:37 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] Feature Request: "matrix[1:10,1:10, 
> block=F] <- 1:10"
> 
> 
> "Warnes, Gregory R" wrote:
> > 
> > Hi Guys,
> > 
> > I've again been surprised when something like
> > 
> > > m <- matrix("", nrow=3,ncol=3)
> > > index_i <- c(2,1,3)
> > > index_j <- c(1,3,2)
> > > vals    <- c("a","b","c")
> > > m[ index_i, index_j ] <- vals
> > > m
> > 
> > gives block-wise application of the assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,] "b"  "b"  "b"
> > [2,] "a"  "a"  "a"
> > [3,] "c"  "c"  "c"
> > 
> 
> Yes, you need to provide the indices as matrix, like:
> 
> m[cbind(index_i,index_j)]
> 
> (BTW: Hou do you manage to get index_i <- c(...) properly 
> working? My R
> version still treats _ as a replacement for <-)
> 
> > when what I wanted was by-element assignment:
> > 
> >      [,1] [,2] [,3]
> > [1,]   ""   ""  "b"
> > [2,]  "a"   ""   ""
> > [3,]   ""  "c"   ""
> > 
> > I always end up writing the code:
> > 
> > > for( p in length(index_i) )
> > >    m[ index_i[p], index_j[p] ] <- vals[p]
> > 
> > to do what I want.
> > 
> > So, I'm thinking about creating a patch to the R source to 
> add an optional
> > parameter, say "block",  to the "[<-" call for matrixes and 
> data frames.
> > 
> > When "block=T" (the default) the old behaviour is 
> preserved.  When "block=F"
> > the behavior I want occures so that
> > 
> > > m[ index_i, index_j, block=F ] <- vals
> > 
> > would do what I want.
> > 
> > Comments?  Cheers?  Jeers?  Silence?
> > 
> > -Greg
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Feb 20 22:20:45 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 20 Feb 2002 17:20:45 -0500
Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8040DE6C6@groexmbcr02.pfizer.com>
Message-ID: <15476.8509.861348.611923@gargle.gargle.HOWL>

Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
 R> m <- matrix("", nrow=3,ncol=3)
 R> index_i <- c(2,1,3)
 R> index_j <- c(1,3,2)
 R> vals    <- c("a","b","c")
 R> m[ index_i, index_j ] <- vals

but what he wants to get is:
 >      [,1] [,2] [,3]
 > [1,]   ""   ""  "b"
 > [2,]  "a"   ""   ""
 > [3,]   ""  "c"   ""

Just do this instead:
 R> m[ cbind(index_i, index_j) ] <- vals

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Feb 20 22:44:24 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 20 Feb 2002 17:44:24 -0500
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>



Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
[brahm@alum.mit.edu] who suggested:

  m[ cbind(index.i, index.j) ] <- vals

This works fine for the example I gave.  

Unfortunately, this approach doesn't extend to using the row and column
names to make assignments:

> m <- matrix("",ncol=3,nrow=3)
> dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> m
  A  B  C 
a "" "" ""
b "" "" ""
c "" "" ""
> 
> index.i <- c("b","a","c")
> index.j <- c("B","A","C")
> vals <- c("1","2","3")
> 
> m[ cbind(index.i, index.j) ] <- vals
> m
                                      b   a   c   B   A   C 
 ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3" 

This looks like a bug...

-Greg

> -----Original Message-----
> From: David Brahm [mailto:brahm@alum.mit.edu]
> Sent: Wednesday, February 20, 2002 5:21 PM
> To: gregory_r_warnes@groton.pfizer.com
> Cc: r-devel@hypatia.math.ethz.ch
> Subject: [Rd] Feature Request: "matrix[1:10,1:10, block=F] <- 1:10"
> 
> 
> Gregory R Warnes <gregory_r_warnes@groton.pfizer.com> wrote:
>  R> m <- matrix("", nrow=3,ncol=3)
>  R> index_i <- c(2,1,3)
>  R> index_j <- c(1,3,2)
>  R> vals    <- c("a","b","c")
>  R> m[ index_i, index_j ] <- vals
> 
> but what he wants to get is:
>  >      [,1] [,2] [,3]
>  > [1,]   ""   ""  "b"
>  > [2,]  "a"   ""   ""
>  > [3,]   ""  "c"   ""
> 
> Just do this instead:
>  R> m[ cbind(index_i, index_j) ] <- vals
> 
> -- 
>                               -- David Brahm (brahm@alum.mit.edu)
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Feb 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Feb 2002 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200202210615.g1L6F4B02792@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1317 *
Subject: library(methods): setMethod with "ANY" fails.
From: hb@maths.lth.se
Date: Tue, 19 Feb 2002 01:22:58 +0100 (MET)
* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1319 *
Subject: Maritime Newsletter (Week 8)
From: MarineDigital Inc<newsletter@marinedigital.com>
Date: Thu, 21 Feb 2002 05:53:14 +0900
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 06:48:25 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 21 Feb 2002 06:48:25 +0000 (GMT)
Subject: [Rd] Bug in "[<-.matrix"?   (Was: Feature Request: "matrix[1:10,1:10,
 block=F] <- 1:10")
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE6CF@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0202210640450.19128-100000@gannet.stats>

On Wed, 20 Feb 2002, Warnes, Gregory R wrote:

> Thanks to David Meyer [david.meyer@ci.tuwien.ac.at] and David Brahm
> [brahm@alum.mit.edu] who suggested:
>
>   m[ cbind(index.i, index.j) ] <- vals
>
> This works fine for the example I gave.
>
> Unfortunately, this approach doesn't extend to using the row and column
> names to make assignments:
>
> > m <- matrix("",ncol=3,nrow=3)
> > dimnames(m) <- list(c("a","b","c"), c("A","B","C"))
> > m
>   A  B  C
> a "" "" ""
> b "" "" ""
> c "" "" ""
> >
> > index.i <- c("b","a","c")
> > index.j <- c("B","A","C")
> > vals <- c("1","2","3")
> >
> > m[ cbind(index.i, index.j) ] <- vals
> > m
>                                       b   a   c   B   A   C
>  ""  ""  ""  ""  ""  ""  ""  ""  "" "1" "2" "3" "1" "2" "3"
>
> This looks like a bug...

It's as documented.  Take a look at e.g. the description of indexing
in Venables & Ripley.  You can use match() to turn names into numbers.

>From the R Language Definition:

    It is possible to use a matrix of integers as an index ...

S throws an error in your example, and perhaps R should too.  But not
giving errors when used in undocumented ways is not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:07:31 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:07:31 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <px8z9ovx32.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>

On 20 Feb 2002, Thomas Vogels wrote:

> Dan Million <lio@hpss1.ccs.ornl.gov> writes:
>
> > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > package does not include g77.  I realize I could start all over and get
> > another gcc package from somewhere else.
>
> I would recommend that.  As I said, gcc is relatively easy to
> install.  I followed the info provided and didn't run into any
> problems. (That's status from last summer, I don't think that this
> changed.)  And yes, you don't want to mix gcc with xlf.
> Don't get another 'gcc package'.  Download the source tarball from
> gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> use, I possibly can reproduce your problems on my AIX box (if any remain).
>   -tom

I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
and the results are just the same; it still doesn't build the shared
libraries correctly, and R still coredumps.  Can't say I see much
improvement here.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Thu Feb 21 22:35:09 2002
From: tov@ece.cmu.edu (Thomas J Vogels)
Date: Thu, 21 Feb 2002 17:35:09 -0500
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
References: <Pine.A41.4.31.0202211206080.12424-100000@hpss1.ccs.ornl.gov>
Message-ID: <3C75761D.6210E3C9@ece.cmu.edu>

Dan Million wrote:

> On 20 Feb 2002, Thomas Vogels wrote:
>
> > Dan Million <lio@hpss1.ccs.ornl.gov> writes:
> >
> > > Not exactly; I installed gcc as a Linux-compatible RPM from IBM.  Their
> > > package does not include g77.  I realize I could start all over and get
> > > another gcc package from somewhere else.
> >
> > I would recommend that.  As I said, gcc is relatively easy to
> > install.  I followed the info provided and didn't run into any
> > problems. (That's status from last summer, I don't think that this
> > changed.)  And yes, you don't want to mix gcc with xlf.
> > Don't get another 'gcc package'.  Download the source tarball from
> > gnu.org (or a mirror).  Side benefit: we'll know  what compilers you
> > use, I possibly can reproduce your problems on my AIX box (if any remain).
> >   -tom
>
> I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> and the results are just the same; it still doesn't build the shared
> libraries correctly, and R still coredumps.  Can't say I see much
> improvement here.
>
> Dan

Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
gcc first.
  -tom


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Thu Feb 21 17:39:14 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Thu, 21 Feb 2002 12:39:14 -0500 (EST)
Subject: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <3C75761D.6210E3C9@ece.cmu.edu>
Message-ID: <Pine.A41.4.31.0202211234130.12424-100000@hpss1.ccs.ornl.gov>

On Thu, 21 Feb 2002, Thomas J Vogels wrote:

> > I've just finished building GCC 3.0.3 on my AIX 5.1 system.  I rebuilt R,
> > and the results are just the same; it still doesn't build the shared
> > libraries correctly, and R still coredumps.  Can't say I see much
> > improvement here.
> >
> > Dan
>
> Hmm.  I'll try to compile it over the weekend.  Did I miss something or were
> earlier reports about AIX 4.3?  Also, I'll probably try an earlier version of
> gcc first.
>   -tom

Yes, I've been trying on AIX 4.3.3 and AIX 5.1 both.  On earlier attempts,
results were identical on both, so I've started to assume that there are
no significant OS differences to worry about.  I'll probably be trying it
on AIX 4.3.3 also, just to cover all the bases.

I'm going to try building two separate trees, one with plain R, and the
other strictly for the R shared library.  I think that will avoid some of
my library problems, but the coredump doesn't want to go away, it seems.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jblewis@ucla.edu  Thu Feb 21 19:51:27 2002
From: jblewis@ucla.edu (jblewis@ucla.edu)
Date: Thu, 21 Feb 2002 20:51:27 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202211951.UAA29055@pubhealth.ku.dk>

Full_Name: Jeffrey B. Lewis
Version: 1.4.0
OS: MS2000 5.00.2195
Submission from: (NULL) (128.97.223.213)


Here is an example,

> pi;
[1] 0.7
>

On my home machine running (I think) the same build of R but on WIN98
returns that 3.141... The basic trigometric functions return their 
correct values. So it seems to be a problem in the definition of 
this constant.  

Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 21 20:55:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 21 Feb 2002 21:55:08 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320)
Message-ID: <200202212055.VAA29171@pubhealth.ku.dk>

What is `MS2000'?  bug.report() cannot possibly generate that under
Windows, so I presume this is some sort of Windows clone.

You know, people do spend a lot of time carefully checking ports of R
against known results.  Did you really believe that the official R port
for Windows produced pi = 0.7 on an uncorrupted operating system?

Three possibilities occur to me:

1) You have defined an object called pi somewhere in your search path.

2) The base R code has been corrupted (it contains pi <- 4*atan(1), BTW)

3) Your OS has corrupted components and so is computing atan incorrectly.

Try 4*atan(1).  If that is incorrect, re-install your OS. If it is
correct, try re-installing R (which in any case you want to do as 1.4.1 is
current).

On Thu, 21 Feb 2002 jblewis@ucla.edu wrote:

> Full_Name: Jeffrey B. Lewis
> Version: 1.4.0
> OS: MS2000 5.00.2195
> Submission from: (NULL) (128.97.223.213)
>
>
> Here is an example,

An example of what?

> > pi;
> [1] 0.7
> >
>
> On my home machine running (I think) the same build of R but on WIN98
> returns that 3.141... The basic trigometric functions return their > correct values. So it seems to be a problem in the definition of
> this constant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Feb 22 07:18:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Feb 2002 08:18:44 +0100 (MET)
Subject: [Rd] pi returns 0.7 (PR#1320) (fwd)
Message-ID: <200202220718.IAA00194@pubhealth.ku.dk>

Filing response for the record

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Thu, 21 Feb 2002 13:45:06 -0800
From: Jeffrey Lewis <jblewis@ucla.edu>
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] pi returns 0.7 (PR#1320)

Brian,

Didn't use bug.report().  Typed MS2000 into a web form.
This is windows 2000 factory installed on an 12 week old
Dell machine.

4*atan(1) returns the correect answer, in fact, that I have been
using for pi since I realized the problem.

It seems R is loading a previously saved workspace.  I did not think
that
I had ever ``saved'' a workspace, but it seems that I did and that
somehow
pi was assigned in that workspace.

I am somewhat surprised that R would let you redefine built-in constants
without warning.

Thank you for your kind suggestions. I apologize for wasting your time.

Jeff


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Fri Feb 22 13:41:19 2002
From: alobo@ija.csic.es (alobo@ija.csic.es)
Date: Fri, 22 Feb 2002 14:41:19 +0100 (MET)
Subject: [Rd] Gnome causes different behaviour of some R functions (PR#1321)
Message-ID: <200202221341.OAA04115@pubhealth.ku.dk>

Full_Name: Agustin Lobo
Version: 1.4.0
OS: linux (suse 7.3)
Submission from: (NULL) (193.144.102.102)


 Saving lda.default as text files from within gui="none" and from within
 gui="gnome" 
 and comparing afterwards with diff, I get:
 
 alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
 1c1
 < function (x, grouping, prior = proportions, tol = 1, method =
 c("moment",
 ---
> function (x, grouping, prior = proportions, tol = 1e-04, method =
 c("moment",
 61c61
 <             if (all(abs(w - w0) < 0,01))
 ---
>             if (all(abs(w - w0) < 0.01))
 109c109
 <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
 ---
>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)


While lda.default works fine within R --gui="none", it produces the following
error
from within R --gui="gnome" for the same data:

> a
<-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="moment")
Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
: 
        length of dimnames[2] not equal to array extent
In addition: Warning message: 
variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
= mod23puriflda[, 

This problem is not particular to lda.default. The following code, which works
fine from within R --gui="none", fails from within within R --gui="gnome":

> x1<-rnorm(20)
> x2<-rnorm(20)
> boxplot(list(x1=x1,x2=x2))
Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
	missing value where logical needed



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Feb 22 17:59:35 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 22 Feb 2002 12:59:35 -0500
Subject: [Rd] c-c problem when R compiled with pthread
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>

Dear R-devel,

I've run into this problem that when I hit c-c to interrupt a command or
computation, the R session just ends.

The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
with 2GB ram.

1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
needed pthread.  C-c at the R prompt ends the R session.

2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
Same thing happened.  However,
I tried running this version of R under ESS, and c-c c-c works fine.
Pressing the "interrupt" button in the R gnome interface also worked fine.

3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.

This seems to suggest pthread as the problem.  Can anyone offer
clues/solutions?  

Regards,
Andy 

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw@merck.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Feb 22 18:58:16 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 22 Feb 2002 12:58:16 -0600
Subject: [Rd] c-c problem when R compiled with pthread
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>; from andy_liaw@merck.com on Fri, Feb 22, 2002 at 12:59:35PM -0500
References: <51F9C42DA15CD311BD220008C707D81903DC85EA@usrymx10.merck.com>
Message-ID: <20020222125816.B18743@nokomis.stat.umn.edu>

Sounds like a thread started by MKL or Atlas is not masking SIGINT
signals and has a default SIGINT handler. If MKL/Atlas do not provide
a way of getting their worker threads to ignore interrupts (which is
probably the only safe thing they can do) then this may be a tough one
to solve.
  
I suspect you would have the same problem in ESS/Gnome if you fire up
a long-enough-running calculation that uses BLAS and C-c that (if you
have 2 processors you might have this problem about 50% of the time
and possibly something worse the other 50%, depending on how they do
things).
  
Running strace might help figure out in more detail what is happening.

luke

On Fri, Feb 22, 2002 at 12:59:35PM -0500, Liaw, Andy wrote:
> Dear R-devel,
> 
> I've run into this problem that when I hit c-c to interrupt a command or
> computation, the R session just ends.
> 
> The info: R-1.4.1 compiled from source on Linux Mandrake 7.1.  Dual P-3 Xeon
> with 2GB ram.
> 
> 1.  Compiled R with link to Intel Math Kernel Library (for fast BLAS), which
> needed pthread.  C-c at the R prompt ends the R session.
> 
> 2.  Compiled R with link to (threaded) ATLAS, which again needed pthread.
> Same thing happened.  However,
> I tried running this version of R under ESS, and c-c c-c works fine.
> Pressing the "interrupt" button in the R gnome interface also worked fine.
> 
> 3.  Compiled R without link to MKL or ATLAS.  C-c works as expected.
> 
> This seems to suggest pthread as the problem.  Can anyone offer
> clues/solutions?  
> 
> Regards,
> Andy 
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY70-38            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stud8351@ma.tum.de  Sat Feb 23 03:56:15 2002
From: stud8351@ma.tum.de (stud8351@ma.tum.de)
Date: Sat, 23 Feb 2002 04:56:15 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230356.EAA01726@pubhealth.ku.dk>

Full_Name: Christof Boeckler
Version: 1.4.1
OS: linux 2.4, x86
Submission from: (NULL) (217.233.100.207)


Hello R-gurus,

I have a little contribution to the wishlist:

Since (?) I am using the more recent ec-font-family with LaTeX instead of the
original cm-family, I did not manage to use this new feature about using (TeX's)
cm-fonts for PS-output. I got the following errors when trying to use such a
file:

dvips: Font CMR10 used in file fig.eps is not in the mapping file.
dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
dvips: Font CMMI10 used in file fig.eps is not in the mapping file.

Does anyone know what went wrong? Under these circumstances, is it possible to
use this feature at all? If not, I would be happy to see that feature in a
future version of R.

I'd appreciate any comments. 

Thanks
       Christof

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 07:33:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 08:33:40 +0100 (MET)
Subject: [Rd] wish: postscript-device - LaTeX ec-fonts (PR#1322)
Message-ID: <200202230733.IAA01976@pubhealth.ku.dk>

First you need to get postscript Type 1 versions of the EC fonts.
For a long time there were none available.  There is now the CM-Super
font package, which is 55Mb in size and so not in the standard TeX
distributions (it's much larger than they are).

If you do have them, postscript() already has the ability to use new font
families, so all you have to do is to make use of it.

On Sat, 23 Feb 2002 stud8351@ma.tum.de wrote:

> Full_Name: Christof Boeckler
> Version: 1.4.1
> OS: linux 2.4, x86
> Submission from: (NULL) (217.233.100.207)
>
>
> Hello R-gurus,
>
> I have a little contribution to the wishlist:
>
> Since (?) I am using the more recent ec-font-family with LaTeX instead of the
> original cm-family, I did not manage to use this new feature about using (TeX's)
> cm-fonts for PS-output. I got the following errors when trying to use such a
> file:
>
> dvips: Font CMR10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBX10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBXSL10 used in file fig.eps is not in the mapping file.
> dvips: Font CMSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMBSY10 used in file fig.eps is not in the mapping file.
> dvips: Font CMMI10 used in file fig.eps is not in the mapping file.
>
> Does anyone know what went wrong?

Yes. You don't have the CM type 1 fonts installed (or not installed so
dvips can use them).   I don't know why you think R-bugs is an appropriate
forum for dvips problems, though.

> Under these circumstances, is it possible to
> use this feature at all? If not, I would be happy to see that feature in a
> future version of R.

It's already there.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 16:57:14 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 17:57:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231657.RAA02935@pubhealth.ku.dk>

Dear R-developers

There is a discrepancy between the variables found by typing
names(options()) and the variables described on the help page for the
function ``options''.

The following variables are in names(options()) but not described on the
help page :

"error.messages"
"repositories"
"show.coef.Pvalues"
"help.try.all.packages"
"download.info"
"dvipscmd"

Since options() is part of ``base R'' and the homepage claims that the
options described there are the only options used by ``base R'', this
may be considered as a
bug.

The following variables are described on the help
page, but are not in names(options()):

error
show.error.messages
download.file.method
de.cellwidth
internet.info


I had a problem with the option ``show.error.messages'' which may be
related to this option not being in names(options()) (I do not claim to
understand how options() really work).
Reporting and checking a problem with ``show.error.messages'' is
actually confusing, since this option changes the printed output from
errors. Here is the problem and my comments on the output (consider
starting a fresh R session).

stop("test - err. mess. printed ")
## prints error mesage, unless ``show.error.messages=FALSE''
op <- options()
options(show.error.messages=FALSE)
stop("test - err. mess. printed ")
## as expected, nothing is printed
options(op)
stop("test - err. mess. printed ")
## Reseting the options, we expect to see the print. Nothing is printed
!


My temporary solution to the problem was to include 

options(show.error.messages=TRUE)

in my .Rprofile file


>  version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R 



Cheers Ole

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Sat Feb 23 18:18:17 2002
From: jago@mclink.it (Stefano Iacus)
Date: Sat, 23 Feb 2002 19:18:17 +0100
Subject: [Rd] Multiple macintosh() graphics devices (PR#1318)
In-Reply-To: <200202201541.QAA20109@pubhealth.ku.dk>
Message-ID: <B5D43EA5-2889-11D6-BE74-003065CC4CB8@mclink.it>

It has been fixed in R-devel now. Thanks David.


On Mercoledì, febbraio 20, 2002, at 04:41 , d.orme@ic.ac.uk wrote:

> Full_Name: David Orme
> Version: 1.4.0
> OS: Mac OS 9.1
> Submission from: (NULL) (155.198.17.121)
>
>
>  R crashes (politely and without further repercussions) with a type 3 
> error
> under the following conditions:
>
> Open more than one macintosh() graphics device:
>> macintosh()
>> macintosh()
>
> and hence there are two devices...
>> dev.list()
> Macintosh Macintosh
>         2         3
> ..with device 3 active.
>
> Selecting device 2 with the mouse brings that device window to the 
> front but
> does not make it active - although the device name in the window title 
> bar
> flickers briefly to active and then back to inactive. Closing the 
> inactive
> device (2) by mouse clicking on the close box causes the crash - I've 
> replicated
> this six or seven times successively on my G3.
>
> Using dev.off(2) behaves as expected.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 18:25:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 19:25:00 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202231825.TAA03056@pubhealth.ku.dk>

Much of this is not a bug.  The situation is complex.

The options list is dynamic: users can add new options at any time.
Options need not be set, and which options are set depends on
the platform.  Many options if unset have an internal default: this is a
protection against a damaged set of options, in particular a broken system
Rprofile file.

It is an incorrect assumption that setting the previous options returned
does re-set the options: it only resets those that were previously set,
not those set since.

In many cases setting an option to NULL will unset it.

There is at least one bug: download.info should not be set, it having been
changed to internet.info (which has an internal default).

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Dear R-developers
>
> There is a discrepancy between the variables found by typing
> names(options()) and the variables described on the help page for the
> function ``options''.
>
> The following variables are in names(options()) but not described on the
> help page :
>
> "error.messages"
> "repositories"
> "show.coef.Pvalues"
> "help.try.all.packages"
> "download.info"
> "dvipscmd"

Some options are documented where they are used: numbers 2 and 4 are, I
know.  I believe `error.messages' is obselete.

> Since options() is part of ``base R'' and the homepage claims that the
> options described there are the only options used by ``base R'', this
> may be considered as a
> bug.

That claim is a bug, not least because ``base R'' is undefined!

> The following variables are described on the help
> page, but are not in names(options()):
>
> error
> show.error.messages
> download.file.method
> de.cellwidth
> internet.info

Right. They can be set if needed, but have internal defaults.

> I had a problem with the option ``show.error.messages'' which may be
> related to this option not being in names(options()) (I do not claim to
> understand how options() really work).
> Reporting and checking a problem with ``show.error.messages'' is
> actually confusing, since this option changes the printed output from
> errors. Here is the problem and my comments on the output (consider
> starting a fresh R session).
>
> stop("test - err. mess. printed ")
> ## prints error mesage, unless ``show.error.messages=FALSE''
> op <- options()
> options(show.error.messages=FALSE)
> stop("test - err. mess. printed ")
> ## as expected, nothing is printed
> options(op)
> stop("test - err. mess. printed ")
> ## Reseting the options, we expect to see the print. Nothing is printed

That does not `reset the options', nor is that what the help page example
says it does (note the word `initial').  The same thing happens with
options("error").

I'll add an explicit default for that one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Sat Feb 23 20:05:29 2002
From: o.christensen@lancaster.ac.uk (o.christensen@lancaster.ac.uk)
Date: Sat, 23 Feb 2002 21:05:29 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232005.VAA03212@pubhealth.ku.dk>

Not all options listed on the help page for options() are set initially.
This should be said on the help page.

ripley@stats.ox.ac.uk wrote:
> 
> Much of this is not a bug.  The situation is complex.
> 
> The options list is dynamic: users can add new options at any time.
> Options need not be set, and which options are set depends on
> the platform.  Many options if unset have an internal default: this is a
> protection against a damaged set of options, in particular a broken system
> Rprofile file.
> 
> It is an incorrect assumption that setting the previous options returned
> does re-set the options: it only resets those that were previously set,
> not those set since.
> 
> In many cases setting an option to NULL will unset it.
> 
> There is at least one bug: download.info should not be set, it having been
> changed to internet.info (which has an internal default).
> 
> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:
> 
> > Dear R-developers
> >
> > There is a discrepancy between the variables found by typing
> > names(options()) and the variables described on the help page for the
> > function ``options''.
> >
> > The following variables are in names(options()) but not described on the
> > help page :
> >
> > "error.messages"
> > "repositories"
> > "show.coef.Pvalues"
> > "help.try.all.packages"
> > "download.info"
> > "dvipscmd"
> 
> Some options are documented where they are used: numbers 2 and 4 are, I
> know.  I believe `error.messages' is obselete.
> 
> > Since options() is part of ``base R'' and the homepage claims that the
> > options described there are the only options used by ``base R'', this
> > may be considered as a
> > bug.
> 
> That claim is a bug, not least because ``base R'' is undefined!
> 
> > The following variables are described on the help
> > page, but are not in names(options()):
> >
> > error
> > show.error.messages
> > download.file.method
> > de.cellwidth
> > internet.info
> 
> Right. They can be set if needed, but have internal defaults.
> 
> > I had a problem with the option ``show.error.messages'' which may be
> > related to this option not being in names(options()) (I do not claim to
> > understand how options() really work).
> > Reporting and checking a problem with ``show.error.messages'' is
> > actually confusing, since this option changes the printed output from
> > errors. Here is the problem and my comments on the output (consider
> > starting a fresh R session).
> >
> > stop("test - err. mess. printed ")
> > ## prints error mesage, unless ``show.error.messages=FALSE''
> > op <- options()
> > options(show.error.messages=FALSE)
> > stop("test - err. mess. printed ")
> > ## as expected, nothing is printed
> > options(op)
> > stop("test - err. mess. printed ")
> > ## Reseting the options, we expect to see the print. Nothing is printed
> 
> That does not `reset the options', nor is that what the help page example
> says it does (note the word `initial').  The same thing happens with
> options("error").
> 
> I'll add an explicit default for that one.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Feb 23 20:30:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 23 Feb 2002 21:30:15 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200202232030.VAA03252@pubhealth.ku.dk>

On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk wrote:

> Not all options listed on the help page for options() are set initially.
> This should be said on the help page.

Is it said that they are?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From meyer@ci.tuwien.ac.at  Mon Feb 25 10:34:25 2002
From: meyer@ci.tuwien.ac.at (meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 11:34:25 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without response (PR#1325)
Message-ID: <200202251034.LAA08726@pubhealth.ku.dk>

if the terms-object contains no response, delete.response mutilates the 
predvars-attribute in the line:

attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

which should probably changed to:

    if (length(f) == 3) 
	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 02
 day = 24
 language = R

Search Path:
 .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 14:38:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 15:38:44 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects without (PR#1326)
Message-ID: <200202251438.PAA11872@pubhealth.ku.dk>

Thanks, fixed now.

Why were you calling delete.response on an object with no response, BTW?
I wonder whether delete.response should not be a no-op in that case (it is
in S), if there is any reason to handle it at all.

On Mon, 25 Feb 2002 meyer@ci.tuwien.ac.at wrote:

> if the terms-object contains no response, delete.response mutilates the
> predvars-attribute in the line:
>
> attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> which should probably changed to:
>
>     if (length(f) == 3)
> 	attr(tt, "predvars") <- attr(termobj, "predvars")[-2]
>
> <<insert bug report here>>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 02
>  day = 24
>  language = R
>
> Search Path:
>  .GlobalEnv, X, iris, package:e1071, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Feb 27 15:42:51 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 27 Feb 2002 10:42:51 -0500
Subject: [Rd] Suggestion for rug():  include "line" and "pos" parameters, or ...
Message-ID: <s2vp7u41iuv6gpt8tksc3mrq8k09q7dogg@4ax.com>

The rug() function works by drawing an axis with tickmarks at the data
points.  Recently I wanted to make a visual comparison of two sets of
arrival times by drawing one rug above the other.  The axis() function
used by rug() has optional parameters "line" and "pos" to allow this,
but rug() doesn't.  

Simply adding line and pos as parameters which are passed to axis(),
or adding a "..." parameter to be passed to axis(), would fix this.

I don't know which is preferable. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.meyer@ci.tuwien.ac.at  Mon Feb 25 15:44:55 2002
From: david.meyer@ci.tuwien.ac.at (david.meyer@ci.tuwien.ac.at)
Date: Mon, 25 Feb 2002 16:44:55 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1327)
Message-ID: <200202251544.QAA12655@pubhealth.ku.dk>

Prof Brian D Ripley wrote:
> 
> Thanks, fixed now.
> 
> Why were you calling delete.response on an object with no response, BTW?

I used it in predict.svm(), and the terms-object contained in the svm
model just happens to have no response for the ``one-class
classification'' if svm was called e.g. by:

m <- svm(~a+b).

Because of the second line in delete.response()

    if (length(f) == 3) 
        f[[2]] <- NULL

handling the no-response case, I believed I was allowed to use
delete.response() without checking for this.

> I wonder whether delete.response should not be a no-op in that case (it is
> in S), if there is any reason to handle it at all.

So people will have to check for it before using delete.response() -
this is probably more secure indeed.

-d
> 

-- 
	Mag. David Meyer		Wiedner Hauptstrasse 8-10
Vienna University of Technology		A-1040 Vienna/AUSTRIA
       Department for			Tel.: (+431) 58801/10772
Statistics and Probability Theory	mail: david.meyer@ci.tuwien.ac.at

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Feb 25 15:50:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Feb 2002 16:50:35 +0100 (MET)
Subject: [Rd] delete.response() incorrectly handles terms-objects (PR#1328)
Message-ID: <200202251550.QAA12726@pubhealth.ku.dk>

On Mon, 25 Feb 2002, David Meyer wrote:

> Prof Brian D Ripley wrote:
> >
> > Thanks, fixed now.
> >
> > Why were you calling delete.response on an object with no response, BTW?
>
> I used it in predict.svm(), and the terms-object contained in the svm
> model just happens to have no response for the ``one-class
> classification'' if svm was called e.g. by:
>
> m <- svm(~a+b).
>
> Because of the second line in delete.response()
>
>     if (length(f) == 3)
>         f[[2]] <- NULL
>
> handling the no-response case, I believed I was allowed to use
> delete.response() without checking for this.

Indeed you were. But delete.response does change the terms object in that
case, and I suspect it should either return it unchanged (as S does) or
give an error.

> > I wonder whether delete.response should not be a no-op in that case (it is
> > in S), if there is any reason to handle it at all.
>
> So people will have to check for it before using delete.response() -
> this is probably more secure indeed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Feb 25 20:59:36 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 25 Feb 2002 14:59:36 -0600
Subject: [Rd] File permissions test during R CMD check
Message-ID: <20020225205936.GA15595@sonny.eddelbuettel.com>


I (still) use RCS, and not CVS, for my own projects. R CMD check does not
like the 0444 file permissions on files check into RCS.  

I conjecture that this stems from desire to have the installed files in a
state in which they can be edited, but I might be off base ... In case my
conjecture holds, would it be possible to relax the restriction during R CMD
check, but then install the files as 0644 ?

Other than that, R CMD check is a very impressive tool.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Feb 26 07:51:39 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 26 Feb 2002 08:51:39 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.16011.518674.971231@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> I (still) use RCS, and not CVS, for my own projects. R CMD check does
> not like the 0444 file permissions on files check into RCS.

> I conjecture that this stems from desire to have the installed files
> in a state in which they can be edited, but I might be off base ... In
> case my conjecture holds, would it be possible to relax the
> restriction during R CMD check, but then install the files as 0644 ?

Not as long as R CMD build takes what is in the source dirs.

There are some comments about possible improvements to permission tests
in the code of check, but in any case all files that are to be installed
should be at least 644.  We could relax that for e.g. C source or
headers, but not e.g. for DESCRIPTION.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 09:05:13 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 09:05:13 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15483.16011.518674.971231@mithrandir.hornik.net>
Message-ID: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>

On Tue, 26 Feb 2002, Kurt Hornik wrote:

> >>>>> Dirk Eddelbuettel writes:
>
> > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > not like the 0444 file permissions on files check into RCS.
>
> > I conjecture that this stems from desire to have the installed files
> > in a state in which they can be edited, but I might be off base ... In
> > case my conjecture holds, would it be possible to relax the
> > restriction during R CMD check, but then install the files as 0644 ?
>
> Not as long as R CMD build takes what is in the source dirs.
>
> There are some comments about possible improvements to permission tests
> in the code of check, but in any case all files that are to be installed
> should be at least 644.  We could relax that for e.g. C source or
> headers, but not e.g. for DESCRIPTION.

First comment: there is a --no-perms option to turn the check off.

I don't think there is a problem with DESCRIPTION, since we make the
installed copy with cat and sed.  However, the data file and inst files are
copied and so might have permissions copied too, but the data files have
chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
Installing read-only files makes updating packages a lot harder and would
break the current mechanisms for installing updates over existing copies.
But that only argues for the installed copies being at least 644.

There are a number of S users of SCCS/RCS who distribute tarballs with
read-only permissions.  Inevitably I find I need to make some changes and
get obstructed.  That's not supposed to happen with R packages, but it does
and so I do think we want the C source files and headers in an editable
state.

One other minor point: the source tarball will be used on OSes other than
Unix-alikes.  I guess of those only NTFS on Windows NT/2000/XP has a real
file security system (which is based on VMS and is far more elaborate than
0644) and I am not at all clear what would happen if a read-only tarball
was used there, nor how easy it would be to make Rcmd INSTALL cope with
one.  I don't want to begin to think about cross-platform remote-mounted
file systems ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 12:25:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 26 Feb 2002 13:25:30 +0100 (MET)
Subject: [Rd] subscripting problems with matrix lists (PR#1329)
Message-ID: <200202261225.NAA18768@pubhealth.ku.dk>

R 1.4.1 (and R-devel)
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
     [,1]        [,2]
[1,] "Numeric,3" "Numeric,1"
[2,] "Numeric,3" "Character,3"
> m[[1,2]]
[1] 3.141593
> m[[2,2]]
[1] "a" "b" "c"

correct so far, but
> m[2,2]
[[1]]
NULL

> m[,2]
[[1]]
NULL

[[2]]
NULL

which are lists of the correct length but wrong content.

This works correctly in S:
> m <- list(a1=1:3, a2=4:6,a3=pi,a4=c("a","b","c"))
> dim(m) <- c(2,2)
> m
           [,1]         [,2]
[1,] numeric, 3 3.1416
[2,] numeric, 3 character, 3
> m[[1,2]]
[1] 3.1416
> m[[2,2]]
[1] "a" "b" "c"
> m[2,2]
$a4:
[1] "a" "b" "c"

> m[,2]
$a3:
[1] 3.1416

$a4:
[1] "a" "b" "c"

The printout is a little better, too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:20:11 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:20:11 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
References: <15483.16011.518674.971231@mithrandir.hornik.net> <Pine.WNT.4.44.0202260835550.1280-100000@tern.stats>
Message-ID: <20020226132011.GA21081@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> On Tue, 26 Feb 2002, Kurt Hornik wrote:
> 
> > >>>>> Dirk Eddelbuettel writes:
> >
> > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > not like the 0444 file permissions on files check into RCS.
> >
> > > I conjecture that this stems from desire to have the installed files
> > > in a state in which they can be edited, but I might be off base ... In
> > > case my conjecture holds, would it be possible to relax the
> > > restriction during R CMD check, but then install the files as 0644 ?
> >
> > Not as long as R CMD build takes what is in the source dirs.
> >
> > There are some comments about possible improvements to permission tests
> > in the code of check, but in any case all files that are to be installed
> > should be at least 644.  We could relax that for e.g. C source or
> > headers, but not e.g. for DESCRIPTION.

I also checked in the .R and .Rd files.

> First comment: there is a --no-perms option to turn the check off.

Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
not turned on at the archive guard's machine.

> I don't think there is a problem with DESCRIPTION, since we make the
> installed copy with cat and sed.  However, the data file and inst files are
> copied and so might have permissions copied too, but the data files have
> chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> Installing read-only files makes updating packages a lot harder and would
> break the current mechanisms for installing updates over existing copies.

Right -- That is why I suggest to alter file perms/modes on /installation/
not package creation.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 13:37:14 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 13:37:14 +0000 (GMT Standard Time)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020226132011.GA21081@sonny.eddelbuettel.com>
Message-ID: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>

On Tue, 26 Feb 2002, Dirk Eddelbuettel wrote:

> On Tue, Feb 26, 2002 at 09:05:13AM +0000, Prof Brian D Ripley wrote:
> > On Tue, 26 Feb 2002, Kurt Hornik wrote:
> >
> > > >>>>> Dirk Eddelbuettel writes:
> > >
> > > > I (still) use RCS, and not CVS, for my own projects. R CMD check does
> > > > not like the 0444 file permissions on files check into RCS.
> > >
> > > > I conjecture that this stems from desire to have the installed files
> > > > in a state in which they can be edited, but I might be off base ... In
> > > > case my conjecture holds, would it be possible to relax the
> > > > restriction during R CMD check, but then install the files as 0644 ?
> > >
> > > Not as long as R CMD build takes what is in the source dirs.
> > >
> > > There are some comments about possible improvements to permission tests
> > > in the code of check, but in any case all files that are to be installed
> > > should be at least 644.  We could relax that for e.g. C source or
> > > headers, but not e.g. for DESCRIPTION.
>
> I also checked in the .R and .Rd files.
>
> > First comment: there is a --no-perms option to turn the check off.
>
> Sure, I use that here, but it doesn't buy me lunch as it is (presumably)
> not turned on at the archive guard's machine.
>
> > I don't think there is a problem with DESCRIPTION, since we make the
> > installed copy with cat and sed.  However, the data file and inst files are
> > copied and so might have permissions copied too, but the data files have
> > chmod 644 in (Unix) INSTALL.  The files in inst do need to be checked.
> > Installing read-only files makes updating packages a lot harder and would
> > break the current mechanisms for installing updates over existing copies.
>
> Right -- That is why I suggest to alter file perms/modes on /installation/
> not package creation.

and you omitted two paras of why I thought that was not the answer.
Briefly:

1) It's not clear we can alter perm/modes on installation on all OSes.
2) Users may need to modify the source files to get the package to install
(especially the C files).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Feb 26 13:52:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2002 07:52:05 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
References: <20020226132011.GA21081@sonny.eddelbuettel.com> <Pine.WNT.4.44.0202261332010.332-100000@tern.stats>
Message-ID: <20020226135205.GA25774@sonny.eddelbuettel.com>

On Tue, Feb 26, 2002 at 01:37:14PM +0000, Prof Brian D Ripley wrote:
> > Right -- That is why I suggest to alter file perms/modes on /installation/
> > not package creation.
> 
> and you omitted two paras of why I thought that was not the answer.
> Briefly:
> 
> 1) It's not clear we can alter perm/modes on installation on all OSes.
> 2) Users may need to modify the source files to get the package to install
> (especially the C files).

What I don't get is that I need to be root on my Unix boxen too in order to
install R package (at least into their default loci where I prefer to keep
them).  With either the big bad root hat on, on the fact that you should
inherit ownership alteration rights within your local directories (below
$HOME) say I do not see 2) as an issue.

I cannot speak to 1).

It was just a suggestion, anyway. I wrote myself a release.sh which grabs
files, copies them locally, alters them then runs R CMD build.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Feb 26 14:18:08 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Feb 2002 15:18:08 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <20020225205936.GA15595@sonny.eddelbuettel.com>
References: <20020225205936.GA15595@sonny.eddelbuettel.com>
Message-ID: <15483.39200.764473.501866@gargle.gargle.HOWL>

>>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org> writes:

    Dirk> I (still) use RCS, and not CVS, for my own projects. R
    Dirk> CMD check does not like the 0444 file permissions on
    Dirk> files check into RCS.

    Dirk> I conjecture that this stems from desire to have the
    Dirk> installed files in a state in which they can be
    Dirk> edited, but I might be off base ... In case my
    Dirk> conjecture holds, would it be possible to relax the
    Dirk> restriction during R CMD check, but then install the
    Dirk> files as 0644 ?

Dirk, I've had the exaxt same situation months ago (since then
R-devel was "1.4.0 to be") and reacted the same way as you, just
to R-core instead of R-devel back then ....
My solution was to manually "rcs -U" all the relevant files, and
from then on, rcs kept them rw-r--r-- (aka 644) as desired.
I haven't seen a reason why I should use RCS locks when I'm the
only one accessing these files.

    Dirk> Other than that, R CMD check is a very impressive
    Dirk> tool.

(yes, and because of that and later submission to CRAN
 I agree that "--no-perms" is not a solution to me neither).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Feb 26 20:04:11 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Feb 2002 21:04:11 +0100 (MET)
Subject: [Rd] itemize/item crashes R CMD check (PR#1330)
Message-ID: <200202262004.VAA22254@pubhealth.ku.dk>


I can crash R CMD check with the following message:

 This shouldn't happen at /usr/local/lib/R/share/perl/R/Rdconv.pm line 1226, <rdfile> line 24.
 
under the following circumstances --

an \itemize{} environment in the \details{} section with
an item that continues on more than one line, delimited by
curly brackets.  It looks like \items would rather be
delimited by spaces than by curly brackets.

  This isn't clear from the R-exts manual (p. 15), which says:

The \itemize and \enumerate commands take a single argument,
within which there may be one or more \item commands. The
text following each \item is formatted as one
or more paragraphs, suitably indented and with the first
paragraph marked with a bullet
point (\itemize) or a number (\enumerate).

  I was misled by the analogy with LaTeX, where you would
delimit \item by curly brackets.
  The workaround is easy -- just delimit by spaces instead
of curly brackets -- but in any case, it seems that a
"This shouldn't happen ..." message shouldn't be visible to
the user ...

example:
\name{test}
\alias{test}
\title{test}
\description{test}
\usage{
test(x)
}
\arguments{
  \item{x}{test}
}
\details{
  Criteria:
  \itemize{
    \item{test: this is an item that is quite long quite long quite long quite long
         and continues on another line}
    \item{test2}
    \item{test3}
  }
}
\value{
   test
}
\author{Ben Bolker}
\keyword{misc}
--------------------

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Feb 26 21:23:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 26 Feb 2002 21:23:45 +0000 (GMT)
Subject: [Rd] Re: [R] abs() on data frames?!
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEFGCKAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0202262054210.2185-100000@auk.stats>

Moved to R-devel, as this will get very technical!

On Tue, 26 Feb 2002, Henrik Bengtsson wrote:

> I might be wrong, but didn't the following work before R v1.4.x?
>
> R --vanilla
> > df <- data.frame(-10:10)
> > abs(df)
> Error in abs(df) : non-numeric argument to function
>
> I have tried this on both Rv1.4.1 on WinMe and Rv1.4.0 on Solaris 8. I
> regexp searched bugs.r-project.org on "abs" but I found nothing about this.
> I can't see why abs(df) shouldn't work when sqrt(df), log(df) etc works.

Both log and abs should be members of the group generic Math, and
Math.data.frame exists. In R sqrt is dispatched on that group, although I
don't see it documented as part of it,

But it looks like abs is being handled by the complex arithmetic section of
the code, as if it were Mod.

I do recall discussions of this long ago, but doubt if this has been
changed recently.  Indeed, the names.c file has

/* KH(1999/09/12)-> complex: {"abs", do_math1, 0, 1, 1, PP_FUNCALL}, */

I'll fix it in R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Wed Feb 27 08:16:09 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Wed, 27 Feb 2002 09:16:09 +0100 (MET)
Subject: [Rd] Bug in glm.fit? (PR#1331)
Message-ID: <200202270816.JAA23941@pubhealth.ku.dk>

G'day all,

I had a look at the GLM code of R (1.4.1) and I believe that there are
problems with the function "glm.fit" that may bite in rare
circumstances.  Note, I have no data set with which I ran into
trouble.  This report is solely based on having a look at the code.

Below I append a listing of the glm.fit function as produced by my
system.  I have added line numbers so that I can easily refer to the
code that is, in my opinion, problematic.  I also append a modified
version that, hopefully, solves these problems.  At least on
"example(glm)" both functions produce the same output (if the random
number generator is set to the same seed).

Short summary: I envisage problems with glm.fit if two conditions are
met simultaneously.  Namely, (1) the design matrix is such that the QR
algorithm used in the weighted least squares (WLS) step has to pivot
columns (lines 81-86) and (2) during the iterations the step size has
to be truncated (either lines 98-114 or lines 115-130).

More details:
In line 90, the variables "start" and "coef" are set to the
coefficients of the WLS and "start" is then permuted (line 91) to take
a possible pivoting of the QR algorithm into account.  Note that
"coef" is not permutated.   Also, since the weights in the iterative
weighted least squares algorithm change in each iteration (lines
60-139) it is theoretically possible that on some executions of this
chunk pivoting occurs and on others there is no pivoting.

Hoever, if the new coefficients are unsuitable and either the block at
lines 98-114 or lines 115-130 is entered, then "start" is modified by
shrinking it toward "coefold".  There are two problems:
1) If this happens the first time the loop in lines 60-139 is executed,
   then coefold is initialised to the value of "start" that was passed
down to the routine (line 58).  This might well be NULL (usually is?).
In this case line 105 and line 122 would produce a new "start" which
is numeric(0) and glm.fit would stop execution pretty soon thereafter.
2) If it happens during a later execution of the loop in lines 60-139,
   then "coefold" was set to the value "coef" of the prior execution
of the loop (line 137).  Depending on whether either of the code
chunks at lines 98-114 or lines 115-130 have been executed on that
previous occastion, "coefold" may or may not be permuted to the same
order as "start" in this moment.  Hence, it could happen that "start"
is shrunken towards something that doesn't make sense in line 105 or
line 122.

Relating to point 2) above.  Theoretically, during the main loop
(lines 60-139) either of the chunks in lines 98-114 or lines 115-130
could be entered.  In these chunks "coef" is set to the shrunken
"start" at the end (line 111 or line 126).  If, with the ``deviance
for the shrunken "start"'' the convergence criterion in line 131 is
fulfilled, then the main loop would finish.  In other words, at line
140 there is no way to tell whether "coef" is in the order of
"fit$coefficients" or has been permutated to have the same order as
"start".  In the later case, the additional permutation in line 157
would garble the solution.

I hope that the revised version that I append below, works around all
these potential problems without breaking anything.  As I said, I ran
"example(glm)" with the revised version and got the same results.  But
I guess you guys have far more exhaustive tests and may want to do
some further test to ensure that nothing is broken.

The revised version also makes some cosmetic changes that reflect my
preferences :-) :
1) Given the default values of the parameters "weights" and "offset" I
   was surprised about the tests in lines 17 and 19.  They seemed
superfluous.  Until I noticed that "glm" can call "glm.fit" with
actual arguments for these parameters that are NULL.  Hence, I suggest
that the default values for these arguments should be NULL.  This
makes it easier to understand the code of "glm.fit" (if one looks only
at "glm.fit" and not at all the code "glm", "glm.fit" &c
simultaneously). 
2) As mentioned above, "coefold" may be initialised to NULL in line 58
   if the parameter "start" is not specified.  (Which typically would be
the case?)  But furthermore, in lines 44-53 the test for the parameter
"start" is mangled into the test for the parameter "etastart".  If
"etastart" is not specified but a bad "start" (not the correct
length), the bad "start" would be caught.  But if a valid "etastart"
is specified, then a bad "start" would not be caught since those tests
are not executed.  (Are there users that specify both?).  Anyway, I
have untangled those sanity check.  Also to get a clean initialisation
for "coefold".
3) Given that the column names of fit$qr are (correctly) set in line
   171, I didn't see the purpose of line 155.  That line anyhow sets
the column names wrongly if pivoting has occured.  So I deleted that
line. 

That's all for now.  Thanks for the great package and I hope that this
bug report will be useful.

Cheers,

        Berwin

========================= original glm.fit =========================
  1  glm.fit <-
  2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL, 
  3      mustart = NULL, offset = rep(0, nobs), family = gaussian(), 
  4      control = glm.control(), intercept = TRUE) 
  5  {
  6      x <- as.matrix(x)
  7      xnames <- dimnames(x)[[2]]
  8      ynames <- names(y)
  9      conv <- FALSE
 10      nobs <- NROW(y)
 11      nvars <- NCOL(x)
 12      if (nvars == 0) {
 13          cc <- match.call()
 14          cc[[1]] <- as.name("glm.fit.null")
 15          return(eval(cc, parent.frame()))
 16      }
 17      if (is.null(weights)) 
 18          weights <- rep(1, nobs)
 19      if (is.null(offset)) 
 20          offset <- rep(0, nobs)
 21      variance <- family$variance
 22      dev.resids <- family$dev.resids
 23      aic <- family$aic
 24      linkinv <- family$linkinv
 25      mu.eta <- family$mu.eta
 26      if (!is.function(variance) || !is.function(linkinv)) 
 27          stop("illegal `family' argument")
 28      valideta <- family$valideta
 29      if (is.null(valideta)) 
 30          valideta <- function(eta) TRUE
 31      validmu <- family$validmu
 32      if (is.null(validmu)) 
 33          validmu <- function(mu) TRUE
 34      if (is.null(mustart)) {
 35          eval(family$initialize)
 36      }
 37      else {
 38          mukeep <- mustart
 39          eval(family$initialize)
 40          mustart <- mukeep
 41      }
 42      if (NCOL(y) > 1) 
 43          stop("y must be univariate unless binomial")
 44      eta <- if (!is.null(etastart) && valideta(etastart)) 
 45          etastart
 46      else if (!is.null(start)) 
 47          if (length(start) != nvars) 
 48              stop(paste("Length of start should equal", nvars, 
 49                  "and correspond to initial coefs for", deparse(xnames)))
 50          else as.vector(if (NCOL(x) == 1) 
 51              x * start
 52          else x %*% start)
 53      else family$linkfun(mustart)
 54      mu <- linkinv(eta)
 55      if (!(validmu(mu) && valideta(eta))) 
 56          stop("Can't find valid starting values: please specify some")
 57      devold <- sum(dev.resids(y, mu, weights))
 58      coefold <- start
 59      boundary <- FALSE
 60      for (iter in 1:control$maxit) {
 61          good <- weights > 0
 62          varmu <- variance(mu)[good]
 63          if (any(is.na(varmu))) 
 64              stop("NAs in V(mu)")
 65          if (any(varmu == 0)) 
 66              stop("0s in V(mu)")
 67          mu.eta.val <- mu.eta(eta)
 68          if (any(is.na(mu.eta.val[good]))) 
 69              stop("NAs in d(mu)/d(eta)")
 70          good <- (weights > 0) & (mu.eta.val != 0)
 71          if (all(!good)) {
 72              conv <- FALSE
 73              warning(paste("No observations informative at iteration", 
 74                  iter))
 75              break
 76          }
 77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
 78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
 79          ngoodobs <- as.integer(nobs - sum(!good))
 80          ncols <- as.integer(1)
 81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
 82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
 83                  control$epsilon/1000), coefficients = numeric(nvars), 
 84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
 85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
 86              work = double(2 * nvars), PACKAGE = "base")
 87          if (nobs < fit$rank) 
 88              stop(paste("X matrix has rank", fit$rank, "but only", 
 89                  nobs, "observations"))
 90          start <- coef <- fit$coefficients
 91          start[fit$pivot] <- coef
 92          eta <- drop(x %*% start)
 93          mu <- linkinv(eta <- eta + offset)
 94          dev <- sum(dev.resids(y, mu, weights))
 95          if (control$trace) 
 96              cat("Deviance =", dev, "Iterations -", iter, "\n")
 97          boundary <- FALSE
 98          if (is.na(dev) || any(is.na(coef))) {
 99              warning("Step size truncated due to divergence")
100              ii <- 1
101              while ((is.na(dev) || any(is.na(start)))) {
102                  if (ii > control$maxit) 
103                    stop("inner loop 1; can't correct step size")
104                  ii <- ii + 1
105                  start <- (start + coefold)/2
106                  eta <- drop(x %*% start)
107                  mu <- linkinv(eta <- eta + offset)
108                  dev <- sum(dev.resids(y, mu, weights))
109              }
110              boundary <- TRUE
111              coef <- start
112              if (control$trace) 
113                  cat("New Deviance =", dev, "\n")
114          }
115          if (!(valideta(eta) && validmu(mu))) {
116              warning("Step size truncated: out of bounds.")
117              ii <- 1
118              while (!(valideta(eta) && validmu(mu))) {
119                  if (ii > control$maxit) 
120                    stop("inner loop 2; can't correct step size")
121                  ii <- ii + 1
122                  start <- (start + coefold)/2
123                  mu <- linkinv(eta <- eta + offset)
124              }
125              boundary <- TRUE
126              coef <- start
127              dev <- sum(dev.resids(y, mu, weights))
128              if (control$trace) 
129                  cat("New Deviance =", dev, "\n")
130          }
131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
132              conv <- TRUE
133              break
134          }
135          else {
136              devold <- dev
137              coefold <- coef
138          }
139      }
140      if (!conv) 
141          warning("Algorithm did not converge")
142      if (boundary) 
143          warning("Algorithm stopped at boundary value")
144      eps <- 10 * .Machine$double.eps
145      if (family$family == "binomial") {
146          if (any(mu > 1 - eps) || any(mu < eps)) 
147              warning("fitted probabilities numerically 0 or 1 occurred")
148      }
149      if (family$family == "poisson") {
150          if (any(mu < eps)) 
151              warning("fitted rates numerically 0 occurred")
152      }
153      if (fit$rank != nvars) {
154          coef[seq(fit$rank + 1, nvars)] <- NA
155          dimnames(fit$qr) <- list(NULL, xnames)
156      }
157      coef[fit$pivot] <- coef
158      xxnames <- xnames[fit$pivot]
159      residuals <- rep(NA, nobs)
160      residuals[good] <- z - (eta - offset)[good]
161      fit$qr <- as.matrix(fit$qr)
162      nr <- min(sum(good), nvars)
163      if (nr < nvars) {
164          Rmat <- diag(nvars)
165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
166      }
167      else Rmat <- fit$qr[1:nvars, 1:nvars]
168      Rmat <- as.matrix(Rmat)
169      Rmat[row(Rmat) > col(Rmat)] <- 0
170      names(coef) <- xnames
171      colnames(fit$qr) <- xxnames
172      dimnames(Rmat) <- list(xxnames, xxnames)
173      names(residuals) <- ynames
174      names(mu) <- ynames
175      names(eta) <- ynames
176      wt <- rep(0, nobs)
177      wt[good] <- w^2
178      names(wt) <- ynames
179      names(weights) <- ynames
180      names(y) <- ynames
181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
182          fit$rank))
183      wtdmu <- if (intercept) 
184          sum(weights * y)/sum(weights)
185      else linkinv(offset)
186      nulldev <- sum(dev.resids(y, wtdmu, weights))
187      n.ok <- nobs - sum(weights == 0)
188      nulldf <- n.ok - as.integer(intercept)
189      resdf <- n.ok - fit$rank
190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
191      list(coefficients = coef, residuals = residuals, fitted.values = mu, 
192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
193              "rank", "qraux", "pivot", "tol")], family = family, 
194          linear.predictors = eta, deviance = dev, aic = aic.model, 
195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
196          df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
197          boundary = boundary)
198  }
========================= modified glm.fit =========================
glm.fit <- 
function (x, y, weights = NULL, start = NULL, etastart = NULL, 
    mustart = NULL, offset = NULL, family = gaussian(), 
    control = glm.control(), intercept = TRUE) 
{
    x <- as.matrix(x)
    xnames <- dimnames(x)[[2]]
    ynames <- names(y)
    conv <- FALSE
    nobs <- NROW(y)
    nvars <- NCOL(x)
    if (nvars == 0) {
        cc <- match.call()
        cc[[1]] <- as.name("glm.fit.null")
        return(eval(cc, parent.frame()))
    }
    if (is.null(weights)) 
        weights <- rep(1, nobs)
    if (is.null(offset)) 
        offset <- rep(0, nobs)
    variance <- family$variance
    dev.resids <- family$dev.resids
    aic <- family$aic
    linkinv <- family$linkinv
    mu.eta <- family$mu.eta
    if (!is.function(variance) || !is.function(linkinv)) 
        stop("illegal `family' argument")
    valideta <- family$valideta
    if (is.null(valideta)) 
        valideta <- function(eta) TRUE
    validmu <- family$validmu
    if (is.null(validmu)) 
        validmu <- function(mu) TRUE
    if (is.null(mustart)) {
        eval(family$initialize)
    }
    else {
        mukeep <- mustart
        eval(family$initialize)
        mustart <- mukeep
    }
    if (NCOL(y) > 1) 
        stop("y must be univariate unless binomial")
    if (!is.null(start)){
      if (length(start) != nvars) 
        stop(paste("Length of start should equal", nvars, 
                   "and correspond to initial coefs for", deparse(xnames)))
      coef <- coefold <- start  # initialise coef here in order to
                                # be able to subset it below 
    }
    else
      coef <- coefold <- rep(0,nvars)
    eta <- if (!is.null(etastart) && valideta(etastart)) 
      etastart
    else if (!is.null(start)) 
      as.vector(if (NCOL(x) == 1) 
                x * start
      else x %*% start)
    else family$linkfun(mustart)
    mu <- linkinv(eta)
    if (!(validmu(mu) && valideta(eta))) 
        stop("Can't find valid starting values: please specify some")
    devold <- sum(dev.resids(y, mu, weights))
    boundary <- FALSE
    for (iter in 1:control$maxit) {
        good <- weights > 0
        varmu <- variance(mu)[good]
        if (any(is.na(varmu))) 
            stop("NAs in V(mu)")
        if (any(varmu == 0)) 
            stop("0s in V(mu)")
        mu.eta.val <- mu.eta(eta)
        if (any(is.na(mu.eta.val[good]))) 
            stop("NAs in d(mu)/d(eta)")
        good <- (weights > 0) & (mu.eta.val != 0)
        if (all(!good)) {
            conv <- FALSE
            warning(paste("No observations informative at iteration", 
                iter))
            break
        }
        z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
        w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
        ngoodobs <- as.integer(nobs - sum(!good))
        ncols <- as.integer(1)
        fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs), 
            p = nvars, y = w * z, ny = ncols, tol = min(1e-07, 
                control$epsilon/1000), coefficients = numeric(nvars), 
            residuals = numeric(ngoodobs), effects = numeric(ngoodobs), 
            rank = integer(1), pivot = 1:nvars, qraux = double(nvars), 
            work = double(2 * nvars), PACKAGE = "base")
        if (nobs < fit$rank) 
            stop(paste("X matrix has rank", fit$rank, "but only", 
                nobs, "observations"))
        coef[fit$pivot] <- fit$coefficients
        eta <- drop(x %*% coef)
        mu <- linkinv(eta <- eta + offset)
        dev <- sum(dev.resids(y, mu, weights))
        if (control$trace) 
            cat("Deviance =", dev, "Iterations -", iter, "\n")
        boundary <- FALSE
        if (is.na(dev) || any(is.na(coef))) {
            warning("Step size truncated due to divergence")
            ii <- 1
            while ((is.na(dev) || any(is.na(coef)))) {
                if (ii > control$maxit) 
                  stop("inner loop 1; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)
                mu <- linkinv(eta <- eta + offset)
                dev <- sum(dev.resids(y, mu, weights))
            }
            boundary <- TRUE
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (!(valideta(eta) && validmu(mu))) {
            warning("Step size truncated: out of bounds.")
            ii <- 1
            while (!(valideta(eta) && validmu(mu))) {
                if (ii > control$maxit) 
                  stop("inner loop 2; can't correct step size")
                ii <- ii + 1
                coef <- (coef + coefold)/2
                mu <- linkinv(eta <- eta + offset)
            }
            boundary <- TRUE
            dev <- sum(dev.resids(y, mu, weights))
            if (control$trace) 
                cat("New Deviance =", dev, "\n")
        }
        if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
            conv <- TRUE
            break
        }
        else {
            devold <- dev
            coefold <- coef
        }
    }
    if (!conv) 
        warning("Algorithm did not converge")
    if (boundary) 
        warning("Algorithm stopped at boundary value")
    eps <- 10 * .Machine$double.eps
    if (family$family == "binomial") {
        if (any(mu > 1 - eps) || any(mu < eps)) 
            warning("fitted probabilities numerically 0 or 1 occurred")
    }
    if (family$family == "poisson") {
        if (any(mu < eps)) 
            warning("fitted rates numerically 0 occurred")
    }
    if (fit$rank != nvars) {
        coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
    }
    xxnames <- xnames[fit$pivot]
    residuals <- rep(NA, nobs)
    residuals[good] <- z - (eta - offset)[good]
    fit$qr <- as.matrix(fit$qr)
    nr <- min(sum(good), nvars)
    if (nr < nvars) {
        Rmat <- diag(nvars)
        Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
    }
    else Rmat <- fit$qr[1:nvars, 1:nvars]
    Rmat <- as.matrix(Rmat)
    Rmat[row(Rmat) > col(Rmat)] <- 0
    names(coef) <- xnames
    colnames(fit$qr) <- xxnames
    dimnames(Rmat) <- list(xxnames, xxnames)
    names(residuals) <- ynames
    names(mu) <- ynames
    names(eta) <- ynames
    wt <- rep(0, nobs)
    wt[good] <- w^2
    names(wt) <- ynames
    names(weights) <- ynames
    names(y) <- ynames
    names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) - 
        fit$rank))
    wtdmu <- if (intercept) 
        sum(weights * y)/sum(weights)
    else linkinv(offset)
    nulldev <- sum(dev.resids(y, wtdmu, weights))
    n.ok <- nobs - sum(weights == 0)
    nulldf <- n.ok - as.integer(intercept)
    resdf <- n.ok - fit$rank
    aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
    list(coefficients = coef, residuals = residuals, fitted.values = mu, 
        effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr", 
            "rank", "qraux", "pivot", "tol")], family = family, 
        linear.predictors = eta, deviance = dev, aic = aic.model, 
        null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights, 
        df.residual = resdf, df.null = nulldf, y = y, converged = conv, 
        boundary = boundary)
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Feb 27 18:54:25 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 27 Feb 2002 13:54:25 -0500 (EST)
Subject: [Rd] rbinom rounds size argument
Message-ID: <Pine.LNX.4.30.0202271352210.25741-100000@bolker.zoo.ufl.edu>


  rbinom (R-1.4.1) silently rounds its "size" argument.
  The C code contains

    n = floor(nin + 0.5);

  I would argue that this should this either be documented or changed (to
return NA).  (The behavior is inconsistent with dbinom).

  I can submit a bug report if people agree it's a bug.

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Feb 27 23:10:02 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 27 Feb 2002 17:10:02 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
Message-ID: <20020227231002.GA4104@sonny.eddelbuettel.com>


As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
just fine and passes the desired options on to gcc/g++.

I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
other than by edting $RHOME/etc/Makeconf. 

While editing Makeconf is probably good enough for most users, it is not
something I can do during (automated, unattended) builds of Debian packages.
However, I need this to change the optimization switches for the survival
package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
r-recommended for details).

Is there an easy way to control these compiler switches?

Thanks, Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tod@gentoo.org  Thu Feb 28 01:15:27 2002
From: tod@gentoo.org (Tod M Neidt)
Date: 27 Feb 2002 19:15:27 -0600
Subject: [Rd] Can one set CFLAGS/CXXFLAGS during R INSTALL ?
In-Reply-To: <20020227231002.GA4104@sonny.eddelbuettel.com>
References: <20020227231002.GA4104@sonny.eddelbuettel.com>
Message-ID: <1014858928.28052.3.camel@Q.neidt.net>

On Wed, 2002-02-27 at 17:10, Dirk Eddelbuettel wrote:
> 
> As far as I can see, and even test, R COMPILE CXXFLAGS="..." foo.c works
> just fine and passes the desired options on to gcc/g++.
> 
> I have not been able to find a way to do this with R INSTALL foo*.tar.gz,
> other than by edting $RHOME/etc/Makeconf. 
> 
> While editing Makeconf is probably good enough for most users, it is not
> something I can do during (automated, unattended) builds of Debian packages.
> However, I need this to change the optimization switches for the survival
> package as some of the cox*.c files kill gcc with -O, -O1 or -O2 on the m68k
> architecture (see bugs.debian.org/135943 or buildd.debian.org and search for
> r-recommended for details).
> 
> Is there an easy way to control these compiler switches?
> 
Hi!

If there isn't anyway to do this currently, I would "second" the request
for it to do so sometime in the future.  I am interested in creating
automated build scripts for another distribution.

Regards,

tod


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Michael.Jacob@bruker-axs.de  Thu Feb 28 09:57:42 2002
From: Michael.Jacob@bruker-axs.de (Michael.Jacob@bruker-axs.de)
Date: Thu, 28 Feb 2002 10:57:42 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202280957.KAA04663@pubhealth.ku.dk>

Full_Name: Michael Jacob
Version: 1.4.1
OS: Windows 2000 SP2
Submission from: (NULL) (195.27.237.226)


Hi,

there seems to be a bug in julian():

> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> julian(Sys.time())
Error in fromchar(x) : character string is not in a standard unambiguous format
> julian
function (x, ...) 
UseMethod("julian")
> julian.POSIXt
function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...) 
{
    if (length(origin) != 1) 
        stop("`origin' must be of length one")
    res <- difftime(as.POSIXct(x), origin, units = "days")
    structure(res, origin = origin)
}
> as.POSIXct("1970-01-01", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
Error in fromchar(x) : character string is not in a standard unambiguous format
> as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
[1] "1970-01-01 02:00:00 W. Europe Standard Time"
> 

The problem is, that as.POSIXct() does not parse the default argument to
julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
missing or equal to zero.

Best Regards

Michael

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 10:12:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 11:12:38 +0100 (MET)
Subject: [Rd] Bug in julian() (PR#1332)
Message-ID: <200202281012.LAA04863@pubhealth.ku.dk>

These are work correctly on my Windows 2000 and XP systems. That means the
bug must be in your Windows system if as I presume you are using the
binaries from CRAN.  Have you tried the advice in the rw-FAQ about trying
another msvcrt.dll?  That has solved a couple of the time-related problems.

On Thu, 28 Feb 2002 Michael.Jacob@bruker-axs.de wrote:

> Full_Name: Michael Jacob
> Version: 1.4.1
> OS: Windows 2000 SP2
> Submission from: (NULL) (195.27.237.226)
>
>
> Hi,
>
> there seems to be a bug in julian():
>
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=C;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > julian(Sys.time())
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > julian
> function (x, ...)
> UseMethod("julian")
> > julian.POSIXt
> function (x, origin = as.POSIXct("1970-01-01", tz = "GMT"), ...)
> {
>     if (length(origin) != 1)
>         stop("`origin' must be of length one")
>     res <- difftime(as.POSIXct(x), origin, units = "days")
>     structure(res, origin = origin)
> }
> > as.POSIXct("1970-01-01", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 00:00:00", tz = "GMT")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> > as.POSIXct("1970-01-01 01:00:00", tz = "GMT")
> [1] "1970-01-01 02:00:00 W. Europe Standard Time"
> >
>
> The problem is, that as.POSIXct() does not parse the default argument to
> julian() correctly. It seems to set is.na() to TRUE, whenever the hour is
> missing or equal to zero.
>
> Best Regards
>
> Michael
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aiesales@ns1.ehost2102.com  Thu Feb 28 12:49:28 2002
From: aiesales@ns1.ehost2102.com (aiesales@ns1.ehost2102.com)
Date: Thu, 28 Feb 2002 07:49:28 -0500
Subject: [Rd] Thanks For Lunch Mike
Message-ID: <200202281249.g1SCnR308796@mx03aba.westnet24.com>

Mike,


  Thanks again for lunch it was great!


Best regards,

Steve
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 16:20:04 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 17:20:04 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281620.RAA09131@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.0
OS: Solaris 8
Submission from: (NULL) (130.235.3.49)


When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
"cannot close output sink connection":
 
 % R --vanilla

 tmpfile <- tempfile()  # Create a filename that does not exist
 for(k in 1:100) {
   cat(k, ": ");
   try(fh <- file(tmpfile, "r"))
   close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
 }
 
1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
...
47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
Error in close.connection(file("tmp.txt", "w")) :
        cannot close output sink connection
 
It always happens after 48 failed file openings.


To me it looks like failed 'file(tmpfile, "r")' does not correctly
clean up after itself. And since 'fh' is never assigned it can neither
be solved by a 'close(fh)'.

FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
will produce a "sink stack is full" error.

FYI2: After the failure above, trying to call sink() will result in a
      "Segmentation fault" and [R] is stopped.

Background: I ran into this problem after have been running the same
script several times over several days I eventually ran into the problem.
It was hard to identify the problem, but I believe the above example shows
the core of it and I could not track the problem further.

Unfortunately, I do not have access to R v1.4.1 for Solaris 8.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Feb 28 18:00:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Feb 2002 19:00:00 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281800.TAA09556@pubhealth.ku.dk>

On Thu, 28 Feb 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: R v1.4.0
> OS: Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> "cannot close output sink connection":
>
>  % R --vanilla
>
>  tmpfile <- tempfile()  # Create a filename that does not exist
>  for(k in 1:100) {
>    cat(k, ": ");
>    try(fh <- file(tmpfile, "r"))
>    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
>  }
>
> 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> ...
> 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> Error in close.connection(file("tmp.txt", "w")) :
>         cannot close output sink connection
>
> It always happens after 48 failed file openings.
>
>
> To me it looks like failed 'file(tmpfile, "r")' does not correctly
> clean up after itself. And since 'fh' is never assigned it can neither
> be solved by a 'close(fh)'.

It does correctly clean up: it should leave a connection which is not
opened.  That may not be the best design, but it is the design.

Take a look at closeAllConnections.

It's better to call file() and then open(), which will avoid the problem.


> FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> will produce a "sink stack is full" error.
>
> FYI2: After the failure above, trying to call sink() will result in a
>       "Segmentation fault" and [R] is stopped.
>
> Background: I ran into this problem after have been running the same
> script several times over several days I eventually ran into the problem.
> It was hard to identify the problem, but I believe the above example shows
> the core of it and I could not track the problem further.
>
> Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Thu Feb 28 19:16:08 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Thu, 28 Feb 2002 20:16:08 +0100 (MET)
Subject: [Rd] Failed file("foo", "r") keeps file open? (PR#1333)
Message-ID: <200202281916.UAA09739@pubhealth.ku.dk>

On Thu, 28 Feb 2002, Prof Brian Ripley wrote:

> On Thu, 28 Feb 2002 hb@maths.lth.se wrote:
> 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.4.0
> > OS: Solaris 8
> > Submission from: (NULL) (130.235.3.49)
> >
> >
> > When I am trying the following on Rv1.4.0 on Solaris 8, I get that the
> > "cannot close output sink connection":
> >
> >  % R --vanilla
> >
> >  tmpfile <- tempfile()  # Create a filename that does not exist
> >  for(k in 1:100) {
> >    cat(k, ": ");
> >    try(fh <- file(tmpfile, "r"))
> >    close(file("tmp.txt", "w"))   # Opens and closes a file for writing.
> >  }
> >
> > 1 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S167e'
> > 2 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S2781'
> > ...
> > 47 Error in file(tempfile(), "r") : cannot open file `/tmp/fileR70d5S345b'
> > Error in close.connection(file("tmp.txt", "w")) :
> >         cannot close output sink connection
> >
> > It always happens after 48 failed file openings.
> >
> >
> > To me it looks like failed 'file(tmpfile, "r")' does not correctly
> > clean up after itself. And since 'fh' is never assigned it can neither
> > be solved by a 'close(fh)'.
> 
> It does correctly clean up: it should leave a connection which is not
> opened.  That may not be the best design, but it is the design.
> 
> Take a look at closeAllConnections.

Accepting the design, calling file(tempfile(), open="r"), will, as
you say, create a "closed" connection as seen by
showConnections(all=TRUE) and it can be deleted by identifying the
connection id from the list and the closing it with

  fh <- getConnection(id)
  close(fh)

or one could call closeAllConnections(), which is not always what you
want. However, if one creates TOO MANY failed connections as above,
neither of the above works:

  % R --vanilla

  K <- 48; # K <- 47 is ok.
  tmpfile <- tempfile()
  for(k in 1:K) try(fh <- file(tmpfile, "r"))

will make [R] stall when closeAllConnections() is called. Doing Ctrl+C and
trying do anything, e.g. "ls() [ENTER]", will generate a "Segmentation
fault" or "0 [ENTER]" will generate a "Bus error". Trying to use

  fh <- getConnection(id)
  close(fh)

gives "Error in close.connection(fh) : cannot close output sink
connection". In this case there is not fatal quitting of [R].

I don't think it is a common thing to end up in this situation, but even
with the design you refer to, I still think something should be fixed
since it is possible to force [R] into an instable and unleavable state,
which is likely to crash [R].

> It's better to call file() and then open(), which will avoid the problem.

I definitely agree, now when you have told me.
 
> > FYI: Doing a cat(file="tmp.txt", k") instead of the close(file(...)) call,
> > will produce a "sink stack is full" error.
> >
> > FYI2: After the failure above, trying to call sink() will result in a
> >       "Segmentation fault" and [R] is stopped.
> >
> > Background: I ran into this problem after have been running the same
> > script several times over several days I eventually ran into the problem.
> > It was hard to identify the problem, but I believe the above example shows
> > the core of it and I could not track the problem further.
> >
> > Unfortunately, I do not have access to R v1.4.1 for Solaris 8.
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

Thanks

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/bioinformatics/




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:48:19 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:48:19 +0100 (MET)
Subject: [Rd] pweibull.c (PR#1334)
Message-ID: <200202282048.VAA09961@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pweibull can be improved in the lower_tail=TRUE and
log_p=FALSE
case by using expm1.  Something like

-expm1(-pow(x / scale, shape)),

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Thu Feb 28 20:54:29 2002
From: terra@diku.dk (terra@diku.dk)
Date: Thu, 28 Feb 2002 21:54:29 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200202282054.VAA09998@pubhealth.ku.dk>

Full_Name: M Welinder
Version: 1.4
OS: (src)
Submission from: (NULL) (192.5.35.38)


It seems to me that pexp can be improved in the lower_tail=TRUE and log_p=FALSE
case by using expm1.  Something like

-expm1 (-x / scale);

I think.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

