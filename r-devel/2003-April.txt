From h95mr at mun.ca  Tue Apr  1 03:02:07 2003
From: h95mr at mun.ca (h95mr@mun.ca)
Date: Tue Apr  1 02:02:24 2003
Subject: [Rd] predict in Pspline package (PR#2714)
Message-ID: <200304010002.h31027n9022168@pubhealth.ku.dk>

To whom it may concern,

I don't know whether this is really a bug with the Pspline package or 
only a problem with my installation. Things work fine in Linux but 
not in Mac OS X (Darwin). Both system run the latest public versions 
of R and Pspline.

predict.smooth.Pspline produces only NaN instead of predicted values 
when norder>2:

>  library (Pspline)
>  tt <- seq (0,1,length=20)
>  xt <- tt^3
>
>  fit <- smooth.Pspline (tt, xt, norder=3,spar=0.0001, method=1)
>  predict.smooth.Pspline (fit, tt, nderiv=0)[,1]
  [1] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 
NaN NaN NaN
[20] NaN
>

smooth.Pspline seems to work fine since
>plot (tt,xt)
>lines (fit)
produces the expected result (curve fits data closely). Using norder 
= 2 instead works fine:

>  fit2 <- smooth.Pspline(tt,xt,norder=2,spar=0.0001,method=1)
>  lines(fit2, col="red")
>  px <- predict(fit2,tt)[,1]
>  round(px,2)
  [1] 0.00 0.00 0.00 0.00 0.01 0.02 0.03 0.05 0.07 0.11 0.15 0.19 0.25 0.32 0.40
[16] 0.49 0.60 0.72 0.85 0.99
>  round(xt,2)
  [1] 0.00 0.00 0.00 0.00 0.01 0.02 0.03 0.05 0.07 0.11 0.15 0.19 0.25 0.32 0.40
[16] 0.49 0.60 0.72 0.85 1.00
>
>
>  version
          _                     
platform powerpc-apple-darwin6.2
arch     powerpc               
os       darwin6.2             
system   powerpc, darwin6.2    
status                         
major    1                     
minor    6.1                   
year     2002                  
month    11                    
day      01                    
language R            



The same code works fine in Linux:

>  rm (list=ls())
>  library(pspline)
>  tt <- seq (0,1,length=20)
>  xt <- tt^3
>  fit <- smooth.Pspline (tt, xt, norder=3,spar=0.0001, method=1)
>  px<-predict(fit,tt)[,1]
>  round(px,2)
  [1] 0.00 0.00 0.00 0.00 0.01 0.02 0.03 0.05 0.07 0.11 0.15 0.19 0.25 0.32 0.40
[16] 0.49 0.60 0.72 0.85 1.00
>
>  version
          _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    6.1
year     2002
month    11
day      01
language R
>


Please let me know if I can help in any way troubleshooting this 
issue. Kind regards,
	Martin



-- 


Martin Renner                        email: h95mr@mun.ca
Department of Biology                http://www.ucs.mun.ca/~h95mr/
Memorial University of Newfoundland  Office: SN-2093
St. John's, NL, A1B 3X9    	     phone: (709) 737-3239
CANADA                               fax:   (709) 737-3018

What difference does it make to the dead, the orphans, and the 
homeless, whether the mad destruction is brought under the name of 
totalitarianism or the holy name of liberty and democracy?  - Gandhi

From myxvfirefrore at yahoo.com  Tue Apr  1 05:47:31 2003
From: myxvfirefrore at yahoo.com (Henry)
Date: Tue Apr  1 05:48:08 2003
Subject: [Rd] Fwd: APRIL FOOLS DAY PRANK
Message-ID: <200304010347.h313lR2t010251@hypatia.math.ethz.ch>

=============APRIL FOOL`S PRANK==============


==New Features==

# Voice recognition! (live feedback from victims response).
# 17 Different pranks to play on your mates.
# Call back feature (call back your victim if they hang up).
# Listen in to the prank as your victim is wound up.


INSTRUCTIONS:

1 Dial 0906 664 1901  (Dial 09067 380 080 for the original service)
2 Select the prank 
3 Enter your victims phone number
4 Listen to their reaction as the computer dials out to them!



Calls to 09067 380 080 cost one pound per minute. Calls to 0906 664 1901 cost one pound and fifty pence per minute. Service provider: TPX 0871 872 3731. This email was sent from outside the UK. You are not on any distribution list which is controlled by the service provider. Promotion code: nhmxu

From ripley at stats.ox.ac.uk  Tue Apr  1 09:39:03 2003
From: ripley at stats.ox.ac.uk (Prof. Brian Ripley)
Date: Tue Apr  1 09:39:24 2003
Subject: [Rd] predict in Pspline package (PR#2714)
In-Reply-To: <200304010002.h31027n9022168@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304010831580.9425-100000@gannet.stats>

There is a pspline package, but no Pspline package.  I presume you mean
*pspline*, and have no idea how library(Pspline) would work.

For *pspline* your example works correctly on Linux, Solaris and Windows, 
so the problem is definitely with your installation (and perhaps your OS).

[Note that testing something where the fit is exact is not a very clever 
idea: you don't need smoothing splines to fit a cubic.  It is entirely 
possible that a realistic problem would work.]

In any case, we cannot debug your machine: you have the source code so
please debug it yourself and if a MacOS-specific patch is needed please
submit it to the maintainer (who might decline to add workarounds for
broken systems).


On Tue, 1 Apr 2003 h95mr@mun.ca wrote:

> To whom it may concern,
> 
> I don't know whether this is really a bug with the Pspline package or 
> only a problem with my installation. Things work fine in Linux but 
> not in Mac OS X (Darwin). Both system run the latest public versions 
> of R and Pspline.
> 
> predict.smooth.Pspline produces only NaN instead of predicted values 
> when norder>2:
> 
> >  library (Pspline)
> >  tt <- seq (0,1,length=20)
> >  xt <- tt^3
> >
> >  fit <- smooth.Pspline (tt, xt, norder=3,spar=0.0001, method=1)
> >  predict.smooth.Pspline (fit, tt, nderiv=0)[,1]
>   [1] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 
> NaN NaN NaN
> [20] NaN
> >
> 
> smooth.Pspline seems to work fine since
> >plot (tt,xt)
> >lines (fit)
> produces the expected result (curve fits data closely). Using norder 
> = 2 instead works fine:
> 
> >  fit2 <- smooth.Pspline(tt,xt,norder=2,spar=0.0001,method=1)
> >  lines(fit2, col="red")
> >  px <- predict(fit2,tt)[,1]
> >  round(px,2)
>   [1] 0.00 0.00 0.00 0.00 0.01 0.02 0.03 0.05 0.07 0.11 0.15 0.19 0.25 0.32 0.40
> [16] 0.49 0.60 0.72 0.85 0.99
> >  round(xt,2)
>   [1] 0.00 0.00 0.00 0.00 0.01 0.02 0.03 0.05 0.07 0.11 0.15 0.19 0.25 0.32 0.40
> [16] 0.49 0.60 0.72 0.85 1.00
> >
> >
> >  version
>           _                     
> platform powerpc-apple-darwin6.2
> arch     powerpc               
> os       darwin6.2             
> system   powerpc, darwin6.2    
> status                         
> major    1                     
> minor    6.1                   
> year     2002                  
> month    11                    
> day      01                    
> language R            

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Mark.Bravington at csiro.au  Tue Apr  1 10:48:49 2003
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Tue Apr  1 09:49:09 2003
Subject: [Rd] predict (PR#2686)
Message-ID: <200304010748.h317mnn9024158@pubhealth.ku.dk>

>> <Bravington wrote:>
>>>> `predict' complains about new factor levels, even if the 
>>>> "new" levels are
>>>> merely levels in the original that didn't occur in the 
>>>> original fit and were
>>>> sensibly dropped, and that don't occur in the prediction 
>>>> data either. 
 
>> <Ripley replied:>
>>> This is intentional.  The coding for factors is based on the 
>>> full set of 
>>> levels, and should be comparable for different prediction sets.
>>>
>>> If you are using factors with fictitious levels the fix is obvious: 
>>> improve the design.
 
>> <Bravington again:>
>> There is still an inconsistency bug between `lm' and `predict.lm',
though.
>> `lm' intentionally overlooks inactive levels of a factor, 

> <Ripley again:>
> Only if an argument is set, and originally lm did not do so.

<Bravington again:>
But `lm' always does this now, doesn't it? -- even if it didn't originally.
I think you can't not drop unused levels, even if you wanted to.

>> but `predict.lm'doesn't, even when it legitimately could. 
>> In particular, it is a bit odd to
>> have no problem predicting without a `newdata' argument even when the
>> original data had inactive factor levels, but then to get an error if
>> `newdata=<<original data>>' is supplied explicitly! (See example.)
>
> <Ripley:>
>Read again.  predict.lm is consistent across its inputs: 
>unlike lm it can
>take variable `newdata'.  As I said the intention is to be consistent
>across *prediction sets*.  Omitting newdata is not giving a prediction
>set.

<Bravington again:>
Mmm-- that's getting a bit metaphysical for me-- when is a prediction not a
prediction, and what is ``predict'' actually doing if it is not predicting?!


Anyhow, according to the help page for `predict.lm':

     If the fit is rank-deficient, some of the columns of the design
     matrix will have been dropped.  Prediction from such a fit only
     makes sense if `newdata' is contained in the same subspace as the
     original data. That cannot be checked accurately, so a warning is
     issued.
     
The subspace condition is obviously satisfied if the prediction data is the
same as the original data-- so prediction does "make sense" in that context
according to the documentation (as well as common sense. Normally I am no
fan of slavish adherence to documentation, but in my own interests I'll make
an exception...). And yet there's an error message, not even a warning.

Prediction from the original data was just an example, of course; my general
proposal is that inactive factor levels in the prediction set should be
dropped. I don't see how this could ever cause inconsistent behaviour across
prediction sets-- have I missed something?

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au

From ripley at stats.ox.ac.uk  Tue Apr  1 11:22:39 2003
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Apr  1 10:22:58 2003
Subject: [Rd] predict (PR#2686)
Message-ID: <200304010822.h318Mdn9024768@pubhealth.ku.dk>

On Tue, 1 Apr 2003 Mark.Bravington@csiro.au wrote:

> Prediction from the original data was just an example, of course; my general
> proposal is that inactive factor levels in the prediction set should be
> dropped. I don't see how this could ever cause inconsistent behaviour across
> prediction sets-- have I missed something?

Yes, repeatedly: `inactive' depends on the prediction set, and that's not 
thought desirable.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Simon.Urbanek at math.uni-augsburg.de  Tue Apr  1 14:10:15 2003
From: Simon.Urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Tue Apr  1 13:10:28 2003
Subject: [Rd] predict in Pspline package (PR#2714)
In-Reply-To: <200304010002.h31027n9022168@pubhealth.ku.dk>
Message-ID: <843437E6-6432-11D7-8C58-000393816814@math.uni-augsburg.de>

On Tuesday, April 1, 2003, at 02:02  AM, h95mr@mun.ca wrote:

> To whom it may concern,
>
> I don't know whether this is really a bug with the Pspline package or
> only a problem with my installation. Things work fine in Linux but
> not in Mac OS X (Darwin). Both system run the latest public versions
> of R and Pspline.
1.6.1 is not really latest public version of R.

R 1.6.2 works fine for Mac OS X 1.2.4:

 > library(pspline)
 > tt <- seq (0,1,length=20)
 > xt <- tt^3
 > fit <- smooth.Pspline (tt, xt, norder=3,spar=0.0001, method=1)
 > predict.smooth.Pspline (fit, tt, nderiv=0)[,1]
  [1]  0.0040913548  0.0002529571 -0.0004989511  0.0019184414  
0.0077153296
  [6]  0.0172687013  0.0311322187  0.0500210668  0.0747811296  
0.1063514794
[11]  0.1457260829  0.1939169313  0.2519179914  0.3206683353  
0.4010138472
[16]  0.4936697119  0.5991895918  0.7179504746  0.8501625554  
0.9959086452

Try the latest version of R and see if it works for you.

btw: library(Pspline) works only because of case-insensitivity of HFS+.

-
platform powerpc-apple-darwin6.4
arch     powerpc
os       darwin6.4
system   powerpc, darwin6.4
status   Patched
major    1
minor    6.2
year     2003
month    03
day      17

Cheers
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
University of Augsburg
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2280

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From roger at ysidro.econ.uiuc.edu  Tue Apr  1 06:18:44 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Tue Apr  1 13:13:39 2003
Subject: [Rd] setGeneric
In-Reply-To: <200304011015.h31AEd2w012474@hypatia.math.ethz.ch>
Message-ID: <Pine.SOL.4.30.0304010505550.24055-100000@ysidro.econ.uiuc.edu>

I'm still having difficulties with methods...is the following behavior expected?
(This is without loading any libraries)

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-03-31)


> ls()
character(0)
>
> diag(2)
     [,1] [,2]
[1,]    1    0
[2,]    0    1
> setGeneric("diag")
[1] "diag"
> diag(2)
Error in diag(2) : Object "n" not found
>

Seems to be a perverse consequence of some slightly fancy use of lazy evaluation....


url:	www.econ.uiuc.edu	Roger Koenker		Dept. of Economics UCL,
email	rkoenker@uiuc.edu	Department of Economics Drayton House,
vox: 	217-333-4558		University of Illinois	30 Gorden St,
fax:   	217-244-6678		Champaign, IL 61820	London,WC1H 0AX, UK
							vox:	020-7679-5838

From klaus.hermann at metagen.de  Tue Apr  1 16:24:45 2003
From: klaus.hermann at metagen.de (klaus.hermann@metagen.de)
Date: Tue Apr  1 15:25:03 2003
Subject: [Rd] computation with vectors of length 0 (PR#2716)
Message-ID: <200304011324.h31DOjn9029959@pubhealth.ku.dk>

Full_Name: Klaus Hermann
Version: 1.5.0
OS: SUNRAY - Unix
Submission from: (NULL) (213.61.59.254)


if we produce a numeric vector of length 0 and want compute the sum over its
elements
the sum function returns 0 - this is obviously misleading. Better would be to
return
NA  and give a corresponding warning.
There should be a unified strategy to handle vectors of length 0.
For example the functions sum, mean, sd handle such vectors in a different way

example:

classfreq <- c(3,3,3,3);
classfreq <- classfreq[classfreq != 3];

sum(classfreq);
mean(classfreq);
sd(classfreq);

From jswinton at Proteom.com  Tue Apr  1 15:33:39 2003
From: jswinton at Proteom.com (Jonathan Swinton)
Date: Tue Apr  1 15:33:55 2003
Subject: [Rd] Old style and new style classes
Message-ID: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>


I have been writing quick and dirty S-plus code for years, but for a recent project I took the plunge, bought Venables and Ripley's S Programming, and implemented a class library using new style classes (in S-Plus 6.0). It worked quite nicely and I am wondering about making more routine use of them. Before I make much more of an investment, I have a few questions, both factual and subjective, that I'd be grateful for opinions on. 

1) I don't use R at the moment, but I might, and might want to target users who do. The documentation at http://cran.r-project.org/doc/manuals/R-lang.pdf seems to suggest that R 1.6.2 supports only old style classes, but http://developer.r-project.org/methodsPackage.html implies that new style classes can be used with the aid of a methods package from John Chambers. Venables and Ripley only describe old-style classes for R and add in their online supplement that there are 'small changes' between S-Plus and R for new style classes. Can the new style class mechanism be used in practice transparently and portably between S-Plus and R?

2) The s-news archives hold a few complaints about the design of the new style classes scattered over the last few years. On mature reflection, do people have opinions about the practical workability of old or new style classes for implementing reusable, object oriented code?

3) There are also some hints (eg top line of http://developer.r-project.org/classIssues.html) that new style classes have not been committed to by some active developers. Is this true? Do new style classes have an active future? Is R committed to them?   Insightful?   

I use old-style (S version3 engine) and new-style (S version4) classes in the sense of Venables and Ripley. 

 -------------------------------------
 Dr Jonathan Swinton
 Proteom Ltd 
 Babraham Hall
 Babraham
 Cambridge CB2 4AT
  www.proteom.com
 
 -----------------------------------

From ripley at stats.ox.ac.uk  Tue Apr  1 15:57:30 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  1 15:57:44 2003
Subject: [Rd] Re: [S] Old style and new style classes
In-Reply-To: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>
Message-ID: <Pine.LNX.4.44.0304011440490.10742-100000@gannet.stats>

On Tue, 1 Apr 2003, Jonathan Swinton wrote:

> I have been writing quick and dirty S-plus code for years, but for a
> recent project I took the plunge, bought Venables and Ripley's S
> Programming, and implemented a class library using new style classes (in
> S-Plus 6.0). It worked quite nicely and I am wondering about making more
> routine use of them. Before I make much more of an investment, I have a
> few questions, both factual and subjective, that I'd be grateful for
> opinions on.

> 1) I don't use R at the moment, but I might, and might want to target
> users who do. The documentation at
> http://cran.r-project.org/doc/manuals/R-lang.pdf seems to suggest that R
> 1.6.2 supports only old style classes, but
> http://developer.r-project.org/methodsPackage.html implies that new
> style classes can be used with the aid of a methods package from John
> Chambers. Venables and Ripley only describe old-style classes for R and
> add in their online supplement that there are 'small changes' between 
> S-Plus and R for new style classes. Can the new style class mechanism be 
> used in practice transparently and portably between S-Plus and R?

R did not support S4 classes in 1999 when S Programming was written.
It does now, and as from version 1.7.0 (due April 16) it will support
them by default as the "methods" package will be loaded by default.

My experience is that those small differences have been a big disincentive
to portability.  There has recently been a big push to getting S4 classes
working well in R, but the details still catch me out a lot.
It is not clear that the R implementation is converging towards the S-PLUS 
6.x one, though.

> 2) The s-news archives hold a few complaints about the design of the
new style classes scattered over the last few years. On mature reflection, 
do people have opinions about the practical workability of old or new style 
classes for implementing reusable, object oriented code?

I think it is too early for `mature reflection': see my next answer.

> 3) There are also some hints (eg top line of 
http://developer.r-project.org/classIssues.html) that new style classes 
have not been committed to by some active developers. Is this true? 
Do new style classes have an active future? Is R committed to them?   
Insightful?

A very small proportion of active developers have been using them. Only
about 6 of the 206 packages on CRAN use them and 4 of those are variations
on the DBI theme.  There are very few third-party uses of S4 classes
available for S-PLUS 6.x.  (The BioConductor project uses S4 classes under
R, and there is an S-PLUS product based on that which I suppose does too.)

There is a lot more current interest in S4 classes in the R community: 
time will tell if this blossoms or dies off.

Until recently the desire to make code available for S-PLUS 2000 and R
was a major impediment to using S4 classes, but soon it will be reasonable 
to assume that most users have them available.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jmc at research.bell-labs.com  Tue Apr  1 10:23:42 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Apr  1 16:24:24 2003
Subject: [Rd] setGeneric
References: <Pine.SOL.4.30.0304010505550.24055-100000@ysidro.econ.uiuc.edu>
Message-ID: <3E89A0EE.4036A4C5@research.bell-labs.com>

I think this is a consequence of the extra context added to make methods
work right with R lexical scoping, namespaces, etc.  Or a subtlety in
R's definition of missing()?

The problem is that somehow the default expression for argument `ncol'
makes that argument appear NOT to be missing.  But an attempt to
evaluate it fails because the local variable `n' hasn't been defined
yet.

The following debugging snippets, using trace on the method for
"numeric", show what's happening.  But as to why, we need some expert
help! (Luke?)

R> trace("diag", sig="numeric", browser)
[1] "diag"
R> diag(2)
Tracing diag(2) on entry 
Called from: diag(2)
Browse[1]> missing(x)
[1] FALSE
Browse[1]> missing(nrow)
[1] TRUE
Browse[1]> missing(ncol)
[1] FALSE
Browse[1]> ncol
Error during wrapup: Object "n" not found

R> selectMethod("diag", "numeric")
Method Definition (Class "MethodDefinitionWithTrace"):

function (x = 1, nrow, ncol = n) 
{
......

By the way, while this example seems to be some obscure glitch, there is
a real potential for code that relies heavily on lazy evaluation to
break when functions are made generic, just for the simple reason that
arguments involved in method signatures (ANY defined method signature)
may need to be evaluated to dispatch the method, before they would
normally be needed in the body of the original non-generic function.

John

Roger Koenker wrote:
> 
> I'm still having difficulties with methods...is the following behavior expected?
> (This is without loading any libraries)
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.7.0 Under development (unstable) (2003-03-31)
> 
> > ls()
> character(0)
> >
> > diag(2)
>      [,1] [,2]
> [1,]    1    0
> [2,]    0    1
> > setGeneric("diag")
> [1] "diag"
> > diag(2)
> Error in diag(2) : Object "n" not found
> >
> 
> Seems to be a perverse consequence of some slightly fancy use of lazy evaluation....
> 
> url:    www.econ.uiuc.edu       Roger Koenker           Dept. of Economics UCL,
> email   rkoenker@uiuc.edu       Department of Economics Drayton House,
> vox:    217-333-4558            University of Illinois  30 Gorden St,
> fax:    217-244-6678            Champaign, IL 61820     London,WC1H 0AX, UK
>                                                         vox:    020-7679-5838
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From fharrell at virginia.edu  Tue Apr  1 10:31:31 2003
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Tue Apr  1 16:26:24 2003
Subject: [Rd] Re: [S] Old style and new style classes
In-Reply-To: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>
References: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>
Message-ID: <20030401093131.4d94f4e8.fharrell@virginia.edu>

On Tue, 1 Apr 2003 14:33:39 +0100
Jonathan Swinton <jswinton@proteom.com> wrote:

> 
> I have been writing quick and dirty S-plus code for years, but for a recent project I took the plunge, bought Venables and Ripley's S Programming, and implemented a class library using new style classes (in S-Plus 6.0). It worked quite nicely and I am wondering about making more routine use of them. Before I make much more of an investment, I have a few questions, both factual and subjective, that I'd be grateful for opinions on. 
> 
> 1) I don't use R at the moment, but I might, and might want to target users who do. The documentation at http://cran.r-project.org/doc/manuals/R-lang.pdf seems to suggest that R 1.6.2 supports only old style classes, but http://developer.r-project.org/methodsPackage.html implies that new style classes can be used with the aid of a methods package from John Chambers. Venables and Ripley only describe old-style classes for R and add in their online supplement that there are 'small changes' between S-Plus and R for new style classes. Can the new style class mechanism be used in practice transparently and portably between S-Plus and R?
> 
> 2) The s-news archives hold a few complaints about the design of the new style classes scattered over the last few years. On mature reflection, do people have opinions about the practical workability of old or new style classes for implementing reusable, object oriented code?
> 
> 3) There are also some hints (eg top line of http://developer.r-project.org/classIssues.html) that new style classes have not been committed to by some active developers. Is this true? Do new style classes have an active future? Is R committed to them?   Insightful?   
> 
> I use old-style (S version3 engine) and new-style (S version4) classes in the sense of Venables and Ripley. 
> 
>  -------------------------------------
>  Dr Jonathan Swinton
>  Proteom Ltd 
>  Babraham Hall
>  Babraham
>  Cambridge CB2 4AT
>   www.proteom.com
>  
>
Jonathan,

I think you are asking the right questions.  SV4 has caused severe problems in S-Plus mainly due to lack of multiple inheritance.  I have been burned MANY times when running an object through a method (e.g., imputation) that sticks on an additional class.  Right now I am teaching a class using S-Plus 6 with my impute function in the Hmisc library and strange error messages are driving the students crazy.  So far all my tests in the R 1.7 development version indicate that R, unlike S-Plus, is backward compatible with old-style classes and methods.  But if you want to be compatible with S-Plus it would be nice if we could just avoid new classes and methods.  Unfortunately S-Plus does not let us do that either, because multiple old-style classes is not allowed any more.  

In the bigger picture,  I am still not really convinced that new classes and methods offer advantages to data analysts.  The new methods are not as flexible and take longer to program.  I frequently stick on a new element of a fit object list for debugging or for enhancing functions that others wrote.  You can't really do this with SV4.  Also, new methods and classes have made some code non-transportable across systems (primarily to older versions of S-Plus).  There are now packages on CRAN that use slots to address elements while other versions of these same packages use list elements.  Hence some code retrieves details of fit objects using @ and some needs to use $.  I know that retrieving pieces of fit objects is inelegant (extractor methods should be written) but it is very common that I don't want to take the time to write an extractor method for every application, and I sure hate to waste time sensing whether the object was created using old vs. new style classes.

I know that new classes and methods are more elegant from a computer science perspective, but I analyze data and like to use what works (e.g., I really like both Perl and Python).  New methods provide much more safety.  I have found though that I don't need this kind of protection from myself.  I have plenty of other problems to worry about.

That's my $.02 worth.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat

From ripley at stats.ox.ac.uk  Tue Apr  1 17:13:43 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  1 17:13:59 2003
Subject: [Rd] computation with vectors of length 0 (PR#2716)
In-Reply-To: <200304011324.h31DOjn9029959@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304011605110.11091-100000@gannet.stats>

Your report is `obviously misleading', as you seem unaware of the standard 
mathematical definitions.  You also seem unaware that R statements are
terminated by a newline, so you have a while series of empty statements
and should not have the semicolons.

The sum of an empty vector is 0, by definition.
The mean of an empty vector is 0/0 = NaN, by definition.
The variance and hence the standard deviation are undefined unless n >= 1.

None of them are missing, so it would be incorrect to return NA.

On Tue, 1 Apr 2003 klaus.hermann@metagen.de wrote:

> Full_Name: Klaus Hermann
> Version: 1.5.0
> OS: SUNRAY - Unix
> Submission from: (NULL) (213.61.59.254)
> 
> 
> if we produce a numeric vector of length 0 and want compute the sum over its
> elements
> the sum function returns 0 - this is obviously misleading. Better would be to
> return
> NA  and give a corresponding warning.
> There should be a unified strategy to handle vectors of length 0.

There is: to use the standard mathematical definitions.  One could debate 
what var(numeric(0)) should be, but we decided that was most consistently 
an error.

> For example the functions sum, mean, sd handle such vectors in a different way
> 
> example:
> 
> classfreq <- c(3,3,3,3);
> classfreq <- classfreq[classfreq != 3];
> 
> sum(classfreq);
> mean(classfreq);
> sd(classfreq);


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From emmanueleze at latinmail.com  Tue Apr  1 10:02:37 2003
From: emmanueleze at latinmail.com (EMMANUEL  EZE)
Date: Tue Apr  1 18:18:46 2003
Subject: [Rd] INVESTMENT DISCUSSION.
Message-ID: <200304011618.h31GIA2s005828@hypatia.math.ethz.ch>

FROM:Barrister Shina Lawal( Solicitor)

Dear sir/ceo, 
  
I am Barrister Shina Lawal( Solicitor), I am the 
Personal Attorney to Mr.Michael Baek national of 
Your country, who used to work with shell development, 
Company in Nigeria. 

On the 21st of April 2000, my client, his wife and 
Their three children were involved in a car accident 
Along Sagamu/Lagos Express Road. Unfortunately they All 
Lost their lives in the event of the accident, since 
Then I have made several enquiries to your Embassy to 
Locate any of my clients extended relatives, this 
Has also proved unsuccessful. After these several 
Unsuccessful attempts, I decided to trace his 
Relatives over the Internet, to locate any member of 
His family but of no avail, hence I contacted you. 

I contacted you to assist in repatriating the money 
In addition, property left behind by my client before they get 
Confiscated or declared unserviceable by the bank 
Where this huge deposits were lodged. Particularly, the 
Bank where the deceased had an account valued at about 
US$30million dollars. 

Conseqently, The bank issued me a notice to provide 
The next of kin or have the account confiscated within 
The next ten official working days. Since I have been 
Unsuccessful in locating the the relatives 
For over 2 years now I seek your consent to present 
You as the next of kin of the deceased since you are 
>From the same country and you, share the same surname 
So that the proceeds of this account valued at US$30 
Million dollars can be paid to you and then you and me 
Can share the money. 55% to me and 40% to you, while 5% 
Should be for expenses or tax as your government may 
Require. 

I have all necessary legal documents that can be used to back up 
Any claim we may make. All I require is 
Your honest cooperation to enable us sees this deal 
Through. I guarantee that this will be executed under 
A legitimate arrangement that will protect you from 
Any breach of the law. Please get in touch with me by my email to 
Enable us discuss further. 

Best regards, 
Barrister Shina Lawal.{esq}

From pgilbert at bank-banque-canada.ca  Tue Apr  1 13:25:52 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Tue Apr  1 19:26:30 2003
Subject: [Rd] Could not create DVI version
Message-ID: <3E89CBA0.26D2619B@bank-banque-canada.ca>

In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
"R CMD check" after I build a package:

* creating setRNG-manual.tex ... OK
* checking setRNG-manual.tex ... ERROR
Could not create DVI version.
This typically indicates Rd problems.

I can manually gererate the dvi from setRNG-manual.tex, so I don't think
my latex is defective as I speculated last week. The file texput.log
indicates

This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
APR 2003 12:09
**\nonstopmode\inputsetRNG-manual.tex
! Emergency stop.
<*> \nonstopmode\inputsetRNG-manual.tex
                                       
*** (job aborted, no legal \end found)


I don't know what this is suppose to mean, or whether this is where I am
suppose to look for the source of the problem. Other than the ongoing
occassional segfault problems with sweave (gc?), everything works fine
in Mandrake 9.0 and 9.1 (with R-1.7.0beta from 2003-03-31).

Paul Gilbert

From ripley at stats.ox.ac.uk  Tue Apr  1 20:54:10 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  1 20:54:24 2003
Subject: [Rd] Could not create DVI version
In-Reply-To: <3E89CBA0.26D2619B@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0304011953130.11960-100000@gannet.stats>

On Tue, 1 Apr 2003, Paul Gilbert wrote:

> In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
> "R CMD check" after I build a package:
> 
> * creating setRNG-manual.tex ... OK
> * checking setRNG-manual.tex ... ERROR
> Could not create DVI version.
> This typically indicates Rd problems.
> 
> I can manually gererate the dvi from setRNG-manual.tex, so I don't think
> my latex is defective as I speculated last week. The file texput.log
> indicates
> 
> This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
> APR 2003 12:09
> **\nonstopmode\inputsetRNG-manual.tex
> ! Emergency stop.
> <*> \nonstopmode\inputsetRNG-manual.tex
>                                        
> *** (job aborted, no legal \end found)
> 
> 
> I don't know what this is suppose to mean, or whether this is where I am
> suppose to look for the source of the problem. Other than the ongoing
> occassional segfault problems with sweave (gc?), everything works fine
> in Mandrake 9.0 and 9.1 (with R-1.7.0beta from 2003-03-31).

I've seen that several times: I think there is an Sweave-related gc 
problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jerome at hivnet.ubc.ca  Tue Apr  1 22:23:38 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Tue Apr  1 21:23:57 2003
Subject: [Rd] 
	lme() and nlme() give inconsistent numbers of degrees of freedom
	(PR#2384)
Message-ID: <200304011923.h31JNcn9002406@pubhealth.ku.dk>


I apologize for cross-posting.

In the reproducable example below, I fit the same model with lme() and 
nlme(). However, I get 12 degrees of freedom with lme() and 2 df with 
nlme().

library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

When I try the same thing with set.seed(18), I get 12 df for both.

I have submitted a bug report on that issue on Dec 20th and I have tried 
to find the source of the problem, but no success. You can check what I 
found so far at:
http://r-bugs.biostat.ku.dk/cgi-bin/R/Add-ons?id=2384

Can anyone help find the source of this problem?

Sincerely,
Jerome Asselin

R 1.6.2 on Red Hat Linux 7.2
Package: nlme 3.1-38

From ripley at stats.ox.ac.uk  Tue Apr  1 21:39:32 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  1 21:39:47 2003
Subject: [Rd] Could not create DVI version
In-Reply-To: <Pine.LNX.4.44.0304011953130.11960-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0304012010070.12034-100000@gannet.stats>

I can run R CMD check with current CVS version of R on dse_2003.3-1 on
Solaris 8 successfully (using gcc 3.2, but that's not relevant here).

There is

  est.wt.variables                  text    html    latex
     missing link(s):  est.min.sqerror

but that's a long-standing error in your packages.


This does look like a problem in your Solaris setup.

On Tue, 1 Apr 2003, Prof Brian Ripley wrote:

> On Tue, 1 Apr 2003, Paul Gilbert wrote:
> 
> > In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
> > "R CMD check" after I build a package:
> > 
> > * creating setRNG-manual.tex ... OK
> > * checking setRNG-manual.tex ... ERROR
> > Could not create DVI version.
> > This typically indicates Rd problems.
> > 
> > I can manually gererate the dvi from setRNG-manual.tex, so I don't think
> > my latex is defective as I speculated last week. 

Your Perl?

> The file texput.log
> > indicates
> > 
> > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
> > APR 2003 12:09
> > **\nonstopmode\inputsetRNG-manual.tex
                        ^ 
I get

**\nonstopmode{}\input{setRNG-manual.tex}

so something is wrong.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pgilbert at bank-banque-canada.ca  Tue Apr  1 17:27:41 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Tue Apr  1 23:28:34 2003
Subject: [Rd] Could not create DVI version
References: <Pine.LNX.4.44.0304012010070.12034-100000@gannet.stats>
Message-ID: <3E8A044D.FFC11A27@bank-banque-canada.ca>

Prof Brian Ripley wrote:
> 
> I can run R CMD check with current CVS version of R on dse_2003.3-1 on
> Solaris 8 successfully (using gcc 3.2, but that's not relevant here).

I just confirmed that I get the same problem with that version of dse.
I'm using  SunOS 5.8 and perl, v5.6.1 built for sun4-solaris.

> There is
> 
>   est.wt.variables                  text    html    latex
>      missing link(s):  est.min.sqerror
> 
> but that's a long-standing error in your packages.

Fixed in my sources now.
 
> This does look like a problem in your Solaris setup.
> 
> On Tue, 1 Apr 2003, Prof Brian Ripley wrote:
> 
> > On Tue, 1 Apr 2003, Paul Gilbert wrote:
> >
> > > In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
> > > "R CMD check" after I build a package:
> > >
> > > * creating setRNG-manual.tex ... OK
> > > * checking setRNG-manual.tex ... ERROR
> > > Could not create DVI version.
> > > This typically indicates Rd problems.
> > >
> > > I can manually gererate the dvi from setRNG-manual.tex, so I don't  think
> > > my latex is defective as I speculated last week.
> 
> Your Perl?

> > The file texput.log
> > > indicates
> > >
> > > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
> > > APR 2003 12:09
> > > **\nonstopmode\inputsetRNG-manual.tex
>                         ^
> I get
> 
> **\nonstopmode{}\input{setRNG-manual.tex}
> 
> so something is wrong.

Yes. Any suggestions of something else I should try?

Thanks,
Paul

> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From luke at stat.uiowa.edu  Tue Apr  1 17:22:43 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Wed Apr  2 00:23:02 2003
Subject: [Rd] setGeneric
In-Reply-To: <3E89A0EE.4036A4C5@research.bell-labs.com>
Message-ID: <Pine.LNX.4.44.0304011619150.3296-100000@nokomis2.stat.umn.edu>

On Tue, 1 Apr 2003, John Chambers wrote:

> I think this is a consequence of the extra context added to make methods
> work right with R lexical scoping, namespaces, etc.  Or a subtlety in
> R's definition of missing()?
> 
> The problem is that somehow the default expression for argument `ncol'
> makes that argument appear NOT to be missing.  But an attempt to
> evaluate it fails because the local variable `n' hasn't been defined
> yet.
> 
> The following debugging snippets, using trace on the method for
> "numeric", show what's happening.  But as to why, we need some expert
> help! (Luke?)

We need a bit more info transferred across from the generic and we
need to reset the environments of the promises for missing arguments.
I'll look into it.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From luke at stat.uiowa.edu  Tue Apr  1 21:45:16 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Wed Apr  2 04:45:33 2003
Subject: [Rd] setGeneric
In-Reply-To: <Pine.LNX.4.44.0304011619150.3296-100000@nokomis2.stat.umn.edu>
Message-ID: <Pine.LNX.4.44.0304012044010.3296-100000@nokomis2.stat.umn.edu>

On Tue, 1 Apr 2003, Luke Tierney wrote:

> On Tue, 1 Apr 2003, John Chambers wrote:
> 
> > I think this is a consequence of the extra context added to make methods
> > work right with R lexical scoping, namespaces, etc.  Or a subtlety in
> > R's definition of missing()?
> > 
> > The problem is that somehow the default expression for argument `ncol'
> > makes that argument appear NOT to be missing.  But an attempt to
> > evaluate it fails because the local variable `n' hasn't been defined
> > yet.
> > 
> > The following debugging snippets, using trace on the method for
> > "numeric", show what's happening.  But as to why, we need some expert
> > help! (Luke?)
> 
> We need a bit more info transferred across from the generic and we
> need to reset the environments of the promises for missing arguments.
> I'll look into it.

A workaround should be in place in R-devel now.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ripley at stats.ox.ac.uk  Wed Apr  2 08:30:33 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr  2 08:30:51 2003
Subject: [Rd] Could not create DVI version
In-Reply-To: <3E8A044D.FFC11A27@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0304020728060.11976-100000@gannet.stats>

On Tue, 1 Apr 2003, Paul Gilbert wrote:

> Prof Brian Ripley wrote:
> > 
> > I can run R CMD check with current CVS version of R on dse_2003.3-1 on
> > Solaris 8 successfully (using gcc 3.2, but that's not relevant here).
> 
> I just confirmed that I get the same problem with that version of dse.
> I'm using  SunOS 5.8 and perl, v5.6.1 built for sun4-solaris.
> 
> > There is
> > 
> >   est.wt.variables                  text    html    latex
> >      missing link(s):  est.min.sqerror
> > 
> > but that's a long-standing error in your packages.
> 
> Fixed in my sources now.
>  
> > This does look like a problem in your Solaris setup.
> > 
> > On Tue, 1 Apr 2003, Prof Brian Ripley wrote:
> > 
> > > On Tue, 1 Apr 2003, Paul Gilbert wrote:
> > >
> > > > In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
> > > > "R CMD check" after I build a package:
> > > >
> > > > * creating setRNG-manual.tex ... OK
> > > > * checking setRNG-manual.tex ... ERROR
> > > > Could not create DVI version.
> > > > This typically indicates Rd problems.
> > > >
> > > > I can manually gererate the dvi from setRNG-manual.tex, so I don't  think
> > > > my latex is defective as I speculated last week.
> > 
> > Your Perl?
> 
> > > The file texput.log
> > > > indicates
> > > >
> > > > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
> > > > APR 2003 12:09
> > > > **\nonstopmode\inputsetRNG-manual.tex
> >                         ^
> > I get
> > 
> > **\nonstopmode{}\input{setRNG-manual.tex}
> > 
> > so something is wrong.
> 
> Yes. Any suggestions of something else I should try?

What locale are you using?  Might it be worth using 

setenv LANG=C  (or your shell's equivalent)
R CMD check dse

?  I'm wondering about the input encoding to LaTeX: not that I know much 
about it as an Anglophone.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From roger at ysidro.econ.uiuc.edu  Wed Apr  2 03:14:53 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Wed Apr  2 10:10:04 2003
Subject: [Rd] setGeneric
In-Reply-To: <Pine.LNX.4.44.0304012044010.3296-100000@nokomis2.stat.umn.edu>
Message-ID: <Pine.SOL.4.30.0304020206130.25772-100000@ysidro.econ.uiuc.edu>

On Tue, 1 Apr 2003, Luke Tierney wrote:

> > On Tue, 1 Apr 2003, John Chambers wrote:
> >
> > > I think this is a consequence of the extra context added to make methods
> > > work right with R lexical scoping, namespaces, etc.  Or a subtlety in
> > > R's definition of missing()?
> > >
> >
> > We need a bit more info transferred across from the generic and we
> > need to reset the environments of the promises for missing arguments.
> > I'll look into it.
>
> A workaround should be in place in R-devel now.
>

Thanks very much!  It looks like the problems we had are now resolved in the new
R-devel, and SparseM is back in business.

Roger

url:	www.econ.uiuc.edu	Roger Koenker		Dept. of Economics UCL,
email	rkoenker@uiuc.edu	Department of Economics Drayton House,
vox: 	217-333-4558		University of Illinois	30 Gordon St,
fax:   	217-244-6678		Champaign, IL 61820	London,WC1H 0AX, UK

From pgilbert at bank-banque-canada.ca  Wed Apr  2 11:00:08 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed Apr  2 16:58:20 2003
Subject: [Rd] Could not create DVI version
References: <Pine.LNX.4.44.0304020728060.11976-100000@gannet.stats>
Message-ID: <3E8AFAF8.8C0121DB@bank-banque-canada.ca>

Brian

I tried LANG=C without success, but it seems there is something in our latex
startup script that causes the problem. The latex call actually executes a csh
script that sets local variables then executes the latex binary. If I bypass the
script and make a direct call to the binary then the problem goes away.

Thanks for your help.

Paul

Prof Brian Ripley wrote:
> 
> On Tue, 1 Apr 2003, Paul Gilbert wrote:
> 
> > Prof Brian Ripley wrote:
> > >
> > > I can run R CMD check with current CVS version of R on dse_2003.3-1 on
> > > Solaris 8 successfully (using gcc 3.2, but that's not relevant here).
> >
> > I just confirmed that I get the same problem with that version of dse.
> > I'm using  SunOS 5.8 and perl, v5.6.1 built for sun4-solaris.
> >
> > > There is
> > >
> > >   est.wt.variables                  text    html    latex
> > >      missing link(s):  est.min.sqerror
> > >
> > > but that's a long-standing error in your packages.
> >
> > Fixed in my sources now.
> >
> > > This does look like a problem in your Solaris setup.
> > >
> > > On Tue, 1 Apr 2003, Prof Brian Ripley wrote:
> > >
> > > > On Tue, 1 Apr 2003, Paul Gilbert wrote:
> > > >
> > > > > In Solaris with R-1.7.0beta from 2003-04-01 I still have a problem with
> > > > > "R CMD check" after I build a package:
> > > > >
> > > > > * creating setRNG-manual.tex ... OK
> > > > > * checking setRNG-manual.tex ... ERROR
> > > > > Could not create DVI version.
> > > > > This typically indicates Rd problems.
> > > > >
> > > > > I can manually gererate the dvi from setRNG-manual.tex, so I don't  think
> > > > > my latex is defective as I speculated last week.
> > >
> > > Your Perl?
> >
> > > > The file texput.log
> > > > > indicates
> > > > >
> > > > > This is TeX, Version 3.14159 (Web2C 7.3.1) (format=latex 2001.1.12)  1
> > > > > APR 2003 12:09
> > > > > **\nonstopmode\inputsetRNG-manual.tex
> > >                         ^
> > > I get
> > >
> > > **\nonstopmode{}\input{setRNG-manual.tex}
> > >
> > > so something is wrong.
> >
> > Yes. Any suggestions of something else I should try?
> 
> What locale are you using?  Might it be worth using
> 
> setenv LANG=C  (or your shell's equivalent)
> R CMD check dse

> ?  I'm wondering about the input encoding to LaTeX: not that I know much
> about it as an Anglophone.
 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From mschwartz at medanalytics.com  Wed Apr  2 12:08:59 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Wed Apr  2 19:09:37 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta April 2 Latest
Message-ID: <3E8B192B.2000108@medanalytics.com>

Hi all,

I am now up and running on RH 9.  Went pretty smoothly (about 1 hour for 
  the clean install, though still doing some "tweaking".) There are 
already about 40 update RPMS including a new kernel via RHN, which I 
have installed.

Noticeable improvements since 8.0, especially with the new version of 
XFree86, which yields sharper fonts that are now (with TTF fonts 
installed) arguably comparable to MS's ClearType under WinXP on my 1600 
x 1200 LCD panel Dell laptop.

Back to the task at hand:

This morning (my time) I downloaded:

R-1.7.0beta_latest.tar.gz        02-Apr-2003 07:04   8.8M

from CRAN U.S and received the following errors during make check:

...
running code in 'arith-true.R' ... OK
comparing 'arith-true.Rout' to './arith-true.Rout.save' ...71c71
< [1] FALSE
---
 > [1] TRUE
73c73
< [1] FALSE
---
 > [1] TRUE
make[3]: *** [arith-true.Rout] Error 1
...


I have not yet seen other posts on this, so I am unsure if this is 
unique to RH 9 or not.  No other errors were found.

If you need more information or need me to run other code, let me know.

Regards,

Marc Schwartz

From pgilbert at bank-banque-canada.ca  Wed Apr  2 16:29:50 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed Apr  2 22:28:05 2003
Subject: [Rd] pacf.mts
Message-ID: <3E8B483E.F158AB3F@bank-banque-canada.ca>

I am getting the following:

*** Weave Errors ***
Error in driver$runcode(drobj, chunk, chunkopts) : 
        Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"
*** Source Errors ***
Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"
make[1]: *** [checkVignettes] Error 1


I don't really understand the new namespace mechanism, so I am not sure if this
is a problem with R-1.7.0beta, or because of a change I should be making in my
code. Does it make sense that the generic pacf is found, but not the method
pacf.mts? (I am calling pacf and not pacf.mts.)

Paul

From fharrell at virginia.edu  Tue Apr  1 10:31:31 2003
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu Apr  3 00:55:52 2003
Subject: [Rd] [R] Re: [S] Old style and new style classes
In-Reply-To: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>
References: <54C6B7921595FF40AB81D151FDFB7F4F0AAB5C@fps01.proteom.com>
Message-ID: <20030401093131.4d94f4e8.fharrell@virginia.edu>

On Tue, 1 Apr 2003 14:33:39 +0100
Jonathan Swinton <jswinton@proteom.com> wrote:

> 
> I have been writing quick and dirty S-plus code for years, but for a recent project I took the plunge, bought Venables and Ripley's S Programming, and implemented a class library using new style classes (in S-Plus 6.0). It worked quite nicely and I am wondering about making more routine use of them. Before I make much more of an investment, I have a few questions, both factual and subjective, that I'd be grateful for opinions on. 
> 
> 1) I don't use R at the moment, but I might, and might want to target users who do. The documentation at http://cran.r-project.org/doc/manuals/R-lang.pdf seems to suggest that R 1.6.2 supports only old style classes, but http://developer.r-project.org/methodsPackage.html implies that new style classes can be used with the aid of a methods package from John Chambers. Venables and Ripley only describe old-style classes for R and add in their online supplement that there are 'small changes' between S-Plus and R for new style classes. Can the new style class mechanism be used in practice transparently and portably between S-Plus and R?
> 
> 2) The s-news archives hold a few complaints about the design of the new style classes scattered over the last few years. On mature reflection, do people have opinions about the practical workability of old or new style classes for implementing reusable, object oriented code?
> 
> 3) There are also some hints (eg top line of http://developer.r-project.org/classIssues.html) that new style classes have not been committed to by some active developers. Is this true? Do new style classes have an active future? Is R committed to them?   Insightful?   
> 
> I use old-style (S version3 engine) and new-style (S version4) classes in the sense of Venables and Ripley. 
> 
>  -------------------------------------
>  Dr Jonathan Swinton
>  Proteom Ltd 
>  Babraham Hall
>  Babraham
>  Cambridge CB2 4AT
>   www.proteom.com
>  
>
Jonathan,

I think you are asking the right questions.  SV4 has caused severe problems in S-Plus mainly due to lack of multiple inheritance.  I have been burned MANY times when running an object through a method (e.g., imputation) that sticks on an additional class.  Right now I am teaching a class using S-Plus 6 with my impute function in the Hmisc library and strange error messages are driving the students crazy.  So far all my tests in the R 1.7 development version indicate that R, unlike S-Plus, is backward compatible with old-style classes and methods.  But if you want to be compatible with S-Plus it would be nice if we could just avoid new classes and methods.  Unfortunately S-Plus does not let us do that either, because multiple old-style classes is not allowed any more.  

In the bigger picture,  I am still not really convinced that new classes and methods offer advantages to data analysts.  The new methods are not as flexible and take longer to program.  I frequently stick on a new element of a fit object list for debugging or for enhancing functions that others wrote.  You can't really do this with SV4.  Also, new methods and classes have made some code non-transportable across systems (primarily to older versions of S-Plus).  There are now packages on CRAN that use slots to address elements while other versions of these same packages use list elements.  Hence some code retrieves details of fit objects using @ and some needs to use $.  I know that retrieving pieces of fit objects is inelegant (extractor methods should be written) but it is very common that I don't want to take the time to write an extractor method for every application, and I sure hate to waste time sensing whether the object was created using old vs. new style classes.

I know that new classes and methods are more elegant from a computer science perspective, but I analyze data and like to use what works (e.g., I really like both Perl and Python).  New methods provide much more safety.  I have found though that I don't need this kind of protection from myself.  I have plenty of other problems to worry about.

That's my $.02 worth.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat

______________________________________________
R-help@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-help

From jerome at hivnet.ubc.ca  Thu Apr  3 03:37:43 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Thu Apr  3 02:38:00 2003
Subject: [Rd] [R] (PR#2720)
Message-ID: <200304030037.h330bhn9014679@pubhealth.ku.dk>


I apologize for cross-posting.

In the reproducable example below, I fit the same model with lme() and 
nlme(). However, I get 12 degrees of freedom with lme() and 2 df with 
nlme().

library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

When I try the same thing with set.seed(18), I get 12 df for both.

I have submitted a bug report on that issue on Dec 20th and I have tried 
to find the source of the problem, but no success. You can check what I 
found so far at:
http://r-bugs.biostat.ku.dk/cgi-bin/R/Add-ons?id=2384

Can anyone help find the source of this problem?

Sincerely,
Jerome Asselin

R 1.6.2 on Red Hat Linux 7.2
Package: nlme 3.1-38

______________________________________________
R-help@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-help

From maechler at stat.math.ethz.ch  Thu Apr  3 09:36:31 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu Apr  3 08:36:41 2003
Subject: [Rd] pacf.mts
In-Reply-To: <3E8B483E.F158AB3F@bank-banque-canada.ca>
References: <3E8B483E.F158AB3F@bank-banque-canada.ca>
Message-ID: <16011.54895.435927.127269@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca>
>>>>>     on Wed, 02 Apr 2003 15:29:50 -0500 writes:

    PaulG> I am getting the following:

    PaulG> *** Weave Errors ***
    PaulG> Error in driver$runcode(drobj, chunk, chunkopts) : 
    PaulG> Error in eval(expr, envir, enclos) : couldn't find
    PaulG> function "pacf.mts"

    PaulG> *** Source Errors ***
    PaulG> Error in eval(expr, envir, enclos) : couldn't find
    PaulG> function "pacf.mts"
    PaulG> make[1]: *** [checkVignettes] Error 1


    PaulG> I don't really understand the new namespace
    PaulG> mechanism, so I am not sure if this is a problem with
    PaulG> R-1.7.0beta, or because of a change I should be
    PaulG> making in my code. Does it make sense that the
    PaulG> generic pacf is found, but not the method pacf.mts?

yes, that was the idea of "hiding" methods in the namespace,
such that users cannot call the methods directly.

    PaulG> (I am calling pacf and not pacf.mts.)

hmm, so I don't see why the problem above happens.
Can you give a bit more details on how you triggered the errors
above ?

Thanks (to everyone else who does) for beta testing R-beta !
Martin

From christen at chemie.hu-berlin.de  Thu Apr  3 09:49:06 2003
From: christen at chemie.hu-berlin.de (christen@chemie.hu-berlin.de)
Date: Thu Apr  3 08:49:23 2003
Subject: [Rd] write.matrix has limited line length -> truncation (PR#2722)
Message-ID: <200304030649.h336n6n9015805@pubhealth.ku.dk>

Full_Name: Dr. Wolfgang Christen
Version: 1.62
OS: Windows 2000
Submission from: (NULL) (141.20.76.99)


I have a matrix of 705 x 999 elements and would like to save the data to a file
using the follwing line:
write.matrix ( format ( U1r, digits = 15 ), file = "C:\\Documents and
Settings\\Administrator\\My Documents\\R\\plot-u2-2.txt" )

Then I had to find out that only 195 (out of 705) columns were saved :-(

I tried then to reduce the accuracy to 5 digits, which gave me 373 columns,
already better, but still insufficient. 

So my suspicion is that an internal line buffer is limited to something less
than 4k and all subsequent data gets truncated and thus will not be saved.

From wolfram at fischer-zim.ch  Thu Apr  3 13:11:59 2003
From: wolfram at fischer-zim.ch (Wolfram Fischer)
Date: Thu Apr  3 12:09:39 2003
Subject: [Rd] histogram {lattice}: width of outmost bars
Message-ID: <20030403121159.A2005@s1x.zimnet.ch>

[R 1.6.1]

OBSERVATION

data( state )
histogram( ~ state.region
	, equal.widths = TRUE	# is not necessary with factors
	, scales = list( x = list( at = 1 : nlevels( state.region )
		, labels = as.character( levels( state.region ) )
		))
	)

The width of the bars touching the panel border
("Northeast" and "West") is not the same as the
width of the bars between these outmost bars.


PROPOSAL

All bars should have the same width.

I.e. the distance between the outmost tickmarks
to the panel border should be half the distance
between two neighbouring tickmarks.


Wolfram Fischer

From wolfgang.waser at rz.hu-berlin.de  Thu Apr  3 15:04:47 2003
From: wolfgang.waser at rz.hu-berlin.de (wolfgang.waser@rz.hu-berlin.de)
Date: Thu Apr  3 14:05:05 2003
Subject: [Rd] Graphics, grid with type="b" causes problems (PR#2723)
Message-ID: <200304031204.h33C4ln9027041@pubhealth.ku.dk>

Full_Name: Wolfgang Waser
Version: 1.6.2
OS: Windows98SE / SuSE Linux 8.1
Submission from: (NULL) (141.20.60.4)


Including >type="l"< or >type="b"< in plot command causes problems with grid:

.....
layout <- par(fin=c(3.46,3.46),mai=c(0.63,0.63,0.05,0.05),mgp=c(2,0.7,0),
	tcl=0.35,las=1,cex.axis=0.9,cex.lab=1,ps=10)

plot(data.trout[,1],data.trout[,2],xlim=range(6.5,8.5),ylim=range(120,470),
	xlab="pH",ylab=expression(paste("P"[O[2]],
	" (Torr)")),bg="white",grid(lty=2,lwd=0.6))
.....

This plot works fine. Note: the grid is "in the back", i.e. does not overlay
tick marks, plot symbols or boundary lines.

Including type="b" (or "l") causes an error message:

...
Error in plot.window(xlim, ylim, log, asp, ...) : 
	"log=" specification must be character
...

Including >log=""< within the plot command gets rid of the message. However, now
the grid (light grey) overlays tick marks, lines of the plot, and boundary
lines.

Regards

Wolfgang

From bates at stat.wisc.edu  Thu Apr  3 09:28:36 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Apr  3 16:28:50 2003
Subject: [Rd] [R] (PR#2720)
In-Reply-To: <200304030037.h330bhn9014679@pubhealth.ku.dk>
References: <200304030037.h330bhn9014679@pubhealth.ku.dk>
Message-ID: <6ry92rhcyz.fsf@bates4.stat.wisc.edu>

Instead of submitting the same bug report multiple times and
harrassing the developers of nlme via personal email you could perhaps
have read the section in Pinheiro and Bates (2000) on calculation of
degrees of freedom.  Had you taken a few minutes to do so you would
have discovered that the calculation of the degrees of freedom for the
constant in a linear mixed-effects model is a special case.  By
disguising the linear model as a nonlinear model you have managed to
defeat the detection of this special case and ended up with a
different number of degrees of freedom.

jerome@hivnet.ubc.ca writes:

> I apologize for cross-posting.
> 
> In the reproducable example below, I fit the same model with lme() and 
> nlme(). However, I get 12 degrees of freedom with lme() and 2 df with 
> nlme().
> 
> library(nlme)
> set.seed(14)
> 
> a <- 2
> x <- rep(rnorm(3),rep(5,3))
> id <- rep(c("a","b","c"),rep(5,3))
> y <- a+x+rnorm(15)
> data <- data.frame(y=y,id=id)
> initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))
> 
> summary(fit.lme <-
>               lme(y ~ 1,data=data,random=~1|id,method="ML"))
> summary(fit.nlme <-
>               nlme(y ~ a + x, fixed= a~1, random=x~1|id,
>               data=data, start=list(fixed=c(a=2),
>               random=list(id=initx)),method="ML"))
> 
> When I try the same thing with set.seed(18), I get 12 df for both.
> 
> I have submitted a bug report on that issue on Dec 20th and I have tried 
> to find the source of the problem, but no success. You can check what I 
> found so far at:
> http://r-bugs.biostat.ku.dk/cgi-bin/R/Add-ons?id=2384
> 
> Can anyone help find the source of this problem?
> 
> Sincerely,
> Jerome Asselin
> 
> R 1.6.2 on Red Hat Linux 7.2
> Package: nlme 3.1-38
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

From Friedrich.Leisch at univie.ac.at  Thu Apr  3 17:46:11 2003
From: Friedrich.Leisch at univie.ac.at (Friedrich.Leisch@univie.ac.at)
Date: Thu Apr  3 16:46:32 2003
Subject: [Rd] Could not create DVI version
In-Reply-To: <Pine.LNX.4.44.0304011953130.11960-100000@gannet.stats>
References: <3E89CBA0.26D2619B@bank-banque-canada.ca>
	<Pine.LNX.4.44.0304011953130.11960-100000@gannet.stats>
Message-ID: <16012.18739.643429.280543@ci.tuwien.ac.at>

>>>>> On Tue, 1 Apr 2003 19:54:10 +0100 (BST),
>>>>> Prof Brian Ripley (PBR) wrote:

[...]

  > I've seen that several times: I think there is an Sweave-related gc 
  > problem.

Anything reproducible?

Paul nd I tried to nail down the problem several times ... but as the
bug didn't shon on our machines, it was impossible for me to track
down the bug yet.

As Sweave uses only S code, it can only be an R bug triggered by
Sweave ...

.f

From andy_liaw at merck.com  Thu Apr  3 11:52:21 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu Apr  3 17:52:44 2003
Subject: [Rd] debugging question
Message-ID: <3A822319EB35174CA3714066D590DCD5C4F92E@usrymx25.merck.com>

Dear R-devel,

A user reported a strange problem with predict.randomForest in the
randomForest package yesterday, and I'm baffled by it.  The code at the end
of the message produces the error.  The problem is that, in
predict.randomForest, there's a .Fortran call to "runforest".  One of the
arguments passed in is "countts", which is a vector of doubles.  The error
occured because when the .Fortran call returned, that component of the
output is mysteriously turned into numeric(0)!  I checked that vector inside
the Fortran code (dimensioned as a matrix), and it looked fine.  Can anyone
provide some hint as to what the problem could be?

While I'm at it, can some one provide some tips on debugging Fortran code
with GDB?  The gdb manual has very little info on this topic.  For example,
how do I examine (print) arrays and values of arguments being passed in?

Any help much appreciated!

Regards,
Andy

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com

==========================
library(randomForest)
library(mlbench)
data(Soybean)

Soybean <- Soybean[complete.cases(Soybean),]
## Drop empty levels:
Soybean <- lapply(Soybean, function(x) factor(as.character(x)))
nreps <- 100
rf.err <- numeric(nreps)

for (i in 1:nreps) {
  test <- sample(nrow(Soybean), 150, replace=FALSE)
  sb.rf <- randomForest(Class~., data=Soybean, subset=-test)
  sb.rf.pred <- predict(sb.rf, Soybean[test,])
  sb.rf.table <- table(sb.rf.pred, Soybean$Class[test])
  rf.err[i] <- sum(diag(sb.rf.table))
  print(1-sum(diag(sb.rf.table))/length(test))
}

------------------------------------------------------------------------------

From maechler at stat.math.ethz.ch  Thu Apr  3 19:36:12 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu Apr  3 18:36:23 2003
Subject: [Rd] Re: Outbound e-mail slow from R servers?
In-Reply-To: <3E8C5224.9090109@medanalytics.com>
References: <3E8C5224.9090109@medanalytics.com>
Message-ID: <16012.25340.851344.274158@gargle.gargle.HOWL>

>>>>> "Marc" == Marc Schwartz <mschwartz@medanalytics.com>
>>>>>     on Thu, 03 Apr 2003 09:24:20 -0600 writes:

    Marc> Martin,

    Marc> Not sure if you are aware of this, but since yesterday
    Marc> there seems to be multi-hour delays in outbound e-mail
    Marc> from r-help and r-devel.  Inbound mail seems to show
    Marc> up on the archive OK.

    Marc> I am just now getting posts from late yesterday my
    Marc> time.  My post to r-devel on RH9 yesterday morning did
    Marc> not show up back to me until last night (my time).

    Marc> HTH,

Indeed that helped a bit, particularly
since I'm in a two day course today and tomorrow and haven't had
time to look closely.

What happened is that the mailman software has occasionally been producing
too long delays (of e.g., half an hour, even for R-core with 17 addresses!),
for quite a few weeks now -- which it didn't several weeks ago.
The first thing I was advised to try was to revert the mailman
and sendmail settings to their defaults -- which I had done
yesterday.  Additionally, yesterday a big part of ETH had severe
network problems during noon time -- hence it wasn't too easy to
find out which timeouts where caused by what.

I have now  re-reverted the mailman settings to what they
were before yesterday, and will start tackling the "only"
halfhour delays (which I think come from the different qrunner setup
that mailman 2.1.x is using -- which is active since about March 4).

Thanks for adverting me!

BTW: If anyone has time for writing a small perl or python script
that automatically retrieves the mailman delay from the two
"Received:" headers in each message that contain "hypatia" --
I'd be quite grateful..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From fbiz at mideastmail.net  Fri Apr  4 04:13:47 2003
From: fbiz at mideastmail.net (Fbiz Marketing)
Date: Thu Apr  3 22:13:35 2003
Subject: [Rd] New Coin Operated Mobile Phone Charger -  Seeking Overseas
	Distributors
Message-ID: <E191B4Z-000140-00@bernie.ethz.ch>

ProductPublic Mobile Phone Multi-charger
(With/Without Coin Module)
Functions1.  Accept coins.
2.  Allows conversation while charging. 
2.  10 travel charger plugs for most models. 
3.  Light box advertising. 
4.  UV phone sanitizing
InputAC 110 - 250V  50~60Hz
Output< 12 V   1C 5 A x 10
Measurement29 cm x 20 cm x 51.6 cm
Net Weight5  kg
Contacthttp://www.YukiCharger.com 
sales@YukiCharger.com 
Tel:  +65-68542061 
Fax: +65-68542062

  
Suitable for: 
Convenience Store, Retail Outlets, Restaurants, Shopping Mall Reception, Airports, Train Stations, Newspapers Kiosk etc 

You are receiving this notification of business opportunity from F-Biz marketing or through one of its network of affiliated sites.   If you feel you have received this email in error or would like to be permanently removed from our list, please type 'Remove'.  We will attend to you request immediately.

	[[alternate HTML version deleted]]

From p.dalgaard at biostat.ku.dk  Fri Apr  4 01:38:03 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Apr  4 00:38:06 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta April 2 Latest
In-Reply-To: <3E8B192B.2000108@medanalytics.com>
References: <3E8B192B.2000108@medanalytics.com>
Message-ID: <x28yur8awk.fsf@biostat.ku.dk>

Marc Schwartz <mschwartz@medanalytics.com> writes:

> Hi all,
> 
> I am now up and running on RH 9.  Went pretty smoothly (about 1 hour
> for the clean install, though still doing some "tweaking".) There are
> already about 40 update RPMS including a new kernel via RHN, which I
> have installed.
> 
> Noticeable improvements since 8.0, especially with the new version of
> XFree86, which yields sharper fonts that are now (with TTF fonts
> installed) arguably comparable to MS's ClearType under WinXP on my
> 1600 x 1200 LCD panel Dell laptop.
> 
> Back to the task at hand:
> 
> This morning (my time) I downloaded:
> 
> R-1.7.0beta_latest.tar.gz        02-Apr-2003 07:04   8.8M
> 
> from CRAN U.S and received the following errors during make check:
> 
> ...
> running code in 'arith-true.R' ... OK
> comparing 'arith-true.Rout' to './arith-true.Rout.save' ...71c71
> < [1] FALSE
> ---
>  > [1] TRUE
> 73c73
> < [1] FALSE
> ---
>  > [1] TRUE
> make[3]: *** [arith-true.Rout] Error 1
> ...
> 
> 
> I have not yet seen other posts on this, so I am unsure if this is
> unique to RH 9 or not.  No other errors were found.
> 
> If you need more information or need me to run other code, let me know.


Ick! Not good. Could you try figuring out which lines differ?

diff -u $builddir/tests/arith-true.Rout.fail $srcdir/tests/arith-true.Rout.save

should do the trick. The line numbers from Rdiff are generated after
removing some lines, so figuring out which are lines 71 and 73 is
tricky, and I suspect they aren't the same as on my machine(?!).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From mschwartz at medanalytics.com  Thu Apr  3 18:14:10 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Fri Apr  4 01:15:01 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta April 2 Latest
In-Reply-To: <3E8CBD3D.1000704@medanalytics.com>
References: <3E8CBD3D.1000704@medanalytics.com>
Message-ID: <3E8CC042.9050506@medanalytics.com>

Peter Dalgaard BSA wrote:
>> Marc Schwartz <mschwartz at medanalytics.com> writes: 
>> SNIP
>> This morning (my time) I downloaded:
>> 
>> R-1.7.0beta_latest.tar.gz        02-Apr-2003 07:04   8.8M
>> 
>> from CRAN U.S and received the following errors during make check:
>> 
>> ... running code in 'arith-true.R' ... OK comparing
>> 'arith-true.Rout' to './arith-true.Rout.save' ...71c71 <
> [1]
>> FALSE ---
>>> [1] TRUE
>> 73c73 < [1] FALSE ---
>>> [1] TRUE
>> make[3]: *** [arith-true.Rout] Error 1 ...
>> 
>> 
>> I have not yet seen other posts on this, so I am unsure if this is 
>> unique to RH 9 or not.  No other errors were found.
>> 
>> If you need more information or need me to run other code, let me 
>> know.
> 
> 
> Ick! Not good. Could you try figuring out which lines differ?
> 
> diff -u $builddir/tests/arith-true.Rout.fail 
> $srcdir/tests/arith-true.Rout.save
> 
> should do the trick. The line numbers from Rdiff are generated after 
> removing some lines, so figuring out which are lines 71 and 73 is 
> tricky, and I suspect they aren't the same as on my machine(?!).


Peter,

The following is the output of:

$ diff -u arith-true.Rout.fail arith-true.Rout.save

--- arith-true.Rout.fail        2003-04-02 10:48:10.000000000 -0600
+++ arith-true.Rout.save        2002-08-05 11:51:42.000000000 -0500
@@ -1,6 +1,6 @@

-R : Copyright 2003, The R Development Core Team
-Version 1.7.0 Under development (unstable) (2003-04-02)
+R : Copyright 2002, The R Development Core Team
+Version 1.6.0 Under development (unstable) (2002-08-05)

  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
@@ -81,9 +81,9 @@
  >
  > ## These are "double"s:
  > all(!is.nan(c(1.,NA)))
-[1] FALSE
+[1] TRUE
  > all(c(FALSE,TRUE,FALSE) == is.nan(c   (1.,NaN,NA)))
-[1] FALSE
+[1] TRUE
  > all(c(FALSE,TRUE,FALSE) == is.nan(list(1.,NaN,NA)))
  [1] TRUE
  >
@@ -289,5 +289,5 @@
  >
  > ## Last Line:
  > cat('Time elapsed: ', proc.time() - .proctime00,'\n')
-Time elapsed:  2.5 0.06 3.16 0 0
+Time elapsed:  2.07 0.1 2.22 0 0
  >

I see that there is a new update this morning, so if you would like me 
to download and use that new version, let me know.

Best,

Marc Schwartz

From james at freelancepropaganda.com  Fri Apr  4 07:04:50 2003
From: james at freelancepropaganda.com (james@freelancepropaganda.com)
Date: Fri Apr  4 06:05:10 2003
Subject: [Rd] Default broswer for OS X (PR#2725)
Message-ID: <200304040404.h3444opD003415@pubhealth.ku.dk>

Full_Name: James Howison
Version: 1.6.2
OS: OS X (fink install)
Submission from: (NULL) (66.67.80.30)


The default browser for the html help system is not set correctly for OS X.

This makes the html help work great on OS X:

> options(browser = "open")
> help.start()

"open" is an OS X launcher app that inspects a file and launches it with the
appropriate application (it is the same as double clicking).  It launches in the
system preferred browser - which is great - integration with the OS for free :)

Perhaps this could be added to the darwin.hints file (if such a thing is used
for R) or otherwise added in so that it is the default.

The user-experience is definately increased by being able to read the help at
the same time one uses it :)

I've promoted the packager for the OS X fink package to set this as the default
in the build if that is possible.

From deepayan at stat.wisc.edu  Fri Apr  4 01:31:26 2003
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Fri Apr  4 08:32:26 2003
Subject: [Rd] histogram {lattice}: width of outmost bars
In-Reply-To: <20030403121159.A2005@s1x.zimnet.ch>
References: <20030403121159.A2005@s1x.zimnet.ch>
Message-ID: <200304040031.26202.deepayan@stat.wisc.edu>

On Thursday 03 April 2003 05:11 am, Wolfram Fischer wrote:
> [R 1.6.1]
>
> OBSERVATION
>
> data( state )
> histogram( ~ state.region
> 	, equal.widths = TRUE	# is not necessary with factors
> 	, scales = list( x = list( at = 1 : nlevels( state.region )
> 		, labels = as.character( levels( state.region ) )
> 		))
> 	)
>
> The width of the bars touching the panel border
> ("Northeast" and "West") is not the same as the
> width of the bars between these outmost bars.

Could you try with R 1.6.2 ? (The output of the above code doesn't look wrong 
to me with 1.6.2).

Deepayan

From etebabs81 at hotmail.com  Fri Apr  4 09:22:19 2003
From: etebabs81 at hotmail.com (Edward)
Date: Fri Apr  4 09:22:57 2003
Subject: [Rd] Fwd: APRIL FOOL PRANK
Message-ID: <E191LXD-0002mj-00@bernie.ethz.ch>

=============APRIL FOOLS PRANK==============


==New Features==

# Voice recognition! (live feedback from victims response).
# 17 Different pranks to play on your mates.
# Call back feature (call back your victim if they hang up).
# Listen in to the prank as your victim is wound up.


INSTRUCTIONS:

1 Dial 0906 664 1901  (Dial 09067 380 080 for the original service)
2 Select the prank 
3 Enter your victims phone number
4 Listen to their reaction as the computer dials out to them!



Calls to 09067 380 080 cost one pound per minute. Calls to 0906 664 1901 cost one pound and fifty pence per minute. Service provider: TPX 0871 872 3731. This email was sent from outside the UK. You are not on any distribution list which is controlled by the service provider. Promotion code: tvnpf

From nikko at hailmail.net  Fri Apr  4 18:07:00 2003
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Fri Apr  4 10:56:02 2003
Subject: [Rd] Bug in %in% (match)
Message-ID: <1049447236.11249.7.camel@sta49.stat.nus.edu.sg>

Hi,
Am I hitting some limit in match? Consider the following example:

> tst<-seq(100,125,by=.2)%in%seq(0,800,by=.1)
> sum(tst)
[1] 76
> seq(100,125,by=.2)
  [1] 100.0 100.2 100.4 100.6 100.8 101.0 101.2 101.4 101.6 101.8 102.0
102.2
 [13] 102.4 102.6 102.8 103.0 103.2 103.4 103.6 103.8 104.0 104.2 104.4
104.6
 [25] 104.8 105.0 105.2 105.4 105.6 105.8 106.0 106.2 106.4 106.6 106.8
107.0
 [37] 107.2 107.4 107.6 107.8 108.0 108.2 108.4 108.6 108.8 109.0 109.2
109.4
 [49] 109.6 109.8 110.0 110.2 110.4 110.6 110.8 111.0 111.2 111.4 111.6
111.8
 [61] 112.0 112.2 112.4 112.6 112.8 113.0 113.2 113.4 113.6 113.8 114.0
114.2
 [73] 114.4 114.6 114.8 115.0 115.2 115.4 115.6 115.8 116.0 116.2 116.4
116.6
 [85] 116.8 117.0 117.2 117.4 117.6 117.8 118.0 118.2 118.4 118.6 118.8
119.0
 [97] 119.2 119.4 119.6 119.8 120.0 120.2 120.4 120.6 120.8 121.0 121.2
121.4
[109] 121.6 121.8 122.0 122.2 122.4 122.6 122.8 123.0 123.2 123.4 123.6
123.8
[121] 124.0 124.2 124.4 124.6 124.8 125.0
> seq(100,125,by=.2)[tst]
 [1] 100.0 100.2 100.4 101.0 101.2 101.4 102.0 102.2 102.4 103.0 103.2
103.4
[13] 104.0 104.2 104.4 105.0 105.2 105.4 106.0 106.2 106.4 107.0 107.2
107.4
[25] 108.0 108.2 108.4 109.0 109.2 109.4 110.0 110.2 110.4 111.0 111.2
111.4
[37] 112.0 112.2 112.4 113.0 113.2 113.4 114.0 114.2 114.4 115.0 115.2
115.4
[49] 116.0 116.2 116.4 117.0 117.2 117.4 118.0 118.2 118.4 119.0 119.2
119.4
[61] 120.0 120.2 120.4 121.0 121.2 121.4 122.0 122.2 122.4 123.0 123.2
123.4
[73] 124.0 124.2 124.4 125.0

But
tst<-seq(100,125,by=.2)%in%seq(100,125,by=.1)
> sum(tst)
[1] 126
> seq(100,125,by=.2)[tst]
  [1] 100.0 100.2 100.4 100.6 100.8 101.0 101.2 101.4 101.6 101.8 102.0
102.2
 [13] 102.4 102.6 102.8 103.0 103.2 103.4 103.6 103.8 104.0 104.2 104.4
104.6
 [25] 104.8 105.0 105.2 105.4 105.6 105.8 106.0 106.2 106.4 106.6 106.8
107.0
 [37] 107.2 107.4 107.6 107.8 108.0 108.2 108.4 108.6 108.8 109.0 109.2
109.4
 [49] 109.6 109.8 110.0 110.2 110.4 110.6 110.8 111.0 111.2 111.4 111.6
111.8
 [61] 112.0 112.2 112.4 112.6 112.8 113.0 113.2 113.4 113.6 113.8 114.0
114.2
 [73] 114.4 114.6 114.8 115.0 115.2 115.4 115.6 115.8 116.0 116.2 116.4
116.6
 [85] 116.8 117.0 117.2 117.4 117.6 117.8 118.0 118.2 118.4 118.6 118.8
119.0
 [97] 119.2 119.4 119.6 119.8 120.0 120.2 120.4 120.6 120.8 121.0 121.2
121.4
[109] 121.6 121.8 122.0 122.2 122.4 122.6 122.8 123.0 123.2 123.4 123.6
123.8
[121] 124.0 124.2 124.4 124.6 124.8 125.0

Gives the correct answer. Did I miss something?

Nicholas
---------------------------------
pertinent R info

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    6.2
year     2003
month    01
day      10
language R

From martyn.byng at nag.co.uk  Fri Apr  4 12:21:17 2003
From: martyn.byng at nag.co.uk (martyn.byng@nag.co.uk)
Date: Fri Apr  4 11:21:34 2003
Subject: [Rd] R crashes on calling a Fortran routine (PR#2728)
Message-ID: <200304040921.h349LHpD006011@pubhealth.ku.dk>

Full_Name: martyn byng
Version: 1.6.2
OS: windows 2000 (professional)
Submission from: (NULL) (62.231.145.253)


I am having problems calling a fortran routine from within R. When the routine
is called, R exits with an application error:
"The instruction at 0x004a8b7d referenced memory at 0x200000015. The memory
could not be written".

The R code used to call the routine is:
.Fortran("GTEST",a=as.integer(1),b=as.integer(3),c=as.integer(-10),d=as.integer(0),e=as.integer(0))

The Fortran routine itself, is just a dummy routine, created to try and find out
why a more complex routine was causing R to crash, and consists of:

     SUBROUTINE GTEST_(A,B,C,D,E)
	INTEGER A,B,C,D,E

	!DEC$ ATTRIBUTES DLLEXPORT :: GTEST_
	!DEC$ ATTRIBUTES ALIAS:'GTEST_' :: GTEST_

      END

Where the !DEC commands are needed in Visual Fortran to create the DLL (I think
!, these were copied from an example file on the compaq web page).

The strange thing about this is that if I remove variable E from the subroutine
definition and recreate the DLL everything works as expected. The routine causes
R to crash only when it has more than 4 variables.

The Fortran code was compiled into a Windows 32bit DLL using Compaq Visual
Fortran Professional, edition 6.1.0

From edd at debian.org  Fri Apr  4 15:27:18 2003
From: edd at debian.org (edd@debian.org)
Date: Fri Apr  4 14:27:35 2003
Subject: [Rd] Re: Bug#187537: r-base: FTBFS: hangs in tcltk test (PR#2730)
Message-ID: <200304041227.h34CRIpD008491@pubhealth.ku.dk>


Thanks for the bug report. I will pass it on to R Core.

On Thu, Apr 03, 2003 at 11:01:23PM -0800, Daniel Schepler wrote:
> Package: r-base
> Version: 1.6.2.cvs.20030403-1
> Severity: serious
> 
> Whenever I try to build r-base using pbuilder, it gets stuck at the
> following point:
> 
> ...
> collecting examples for package 'tcltk' ...
> make[6]: Entering directory `/tmp/buildd/r-base-1.6.2.cvs.20030403/src/library'
>  >>> Building/Updating help pages for package 'tcltk'
>      Formats: text example
> make[6]: Leaving directory `/tmp/buildd/r-base-1.6.2.cvs.20030403/src/library'
> running code in 'tcltk-Ex.R' ...
> 
> Part of the output of ps aufwwx reads:
> #1234     1727  0.0  0.1  2132 1000 pts/4    S    22:02   0:00                                                                              \_ /bin/sh -c ../../bin/R --vanilla < tcltk-Ex.R > tcltk-Ex.Rout 2>&1 || (mv tcltk-Ex.Rout tcltk-Ex.Rout.fail && exit 1)
> #1234     1728  0.1  2.6 24524 17004 pts/4   S    22:02   0:03                                                                                  \_ /tmp/buildd/r-base-1.6.2.cvs.20030403/bin/R.bin --vanilla
> #1234     1731  0.0  0.0     0    0 pts/4    Z    22:02   0:00                                                                                      \_ [R.bin] <defunct>
> 
> strace -p 1728 doesn't show anything useful, but top shows no CPU
> being consumed by the process (which is strange).

Hm, I have not seen that. But Doug Bates mentioned something about building
remotely, and having had a problem.

I have never seen this, and am building both locally and remotely.

> In case this makes any difference, I am redirecting the stdout and
> stderr of pbuilder into a pipe, while leaving stdin unchanged.

Don't know, it may. But that does not propagate to what happens inside
pbuilder, i.e. in the processes started by it, does it? 

Most of the other build systems work, see
     http://buildd.debian.org/build.php?pkg=r-base
The most recent hppa error looks spurious and related to Build-Depends.

Just to confirm, you are building on m68k, correct?  

Dirk


-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

From pgilbert at bank-banque-canada.ca  Fri Apr  4 11:19:33 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Apr  4 17:21:12 2003
Subject: [Rd] pacf.mts
References: <3E8B483E.F158AB3F@bank-banque-canada.ca>
	<16011.54895.435927.127269@gargle.gargle.HOWL>
Message-ID: <3E8DA285.9BA1B28F@bank-banque-canada.ca>

Martin Maechler wrote:
> 
> >>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca>
> >>>>>     on Wed, 02 Apr 2003 15:29:50 -0500 writes:
> 
>     PaulG> I am getting the following:
> 
>     PaulG> *** Weave Errors ***
>     PaulG> Error in driver$runcode(drobj, chunk, chunkopts) :
>     PaulG> Error in eval(expr, envir, enclos) : couldn't find
>     PaulG> function "pacf.mts"
> 
>     PaulG> *** Source Errors ***
>     PaulG> Error in eval(expr, envir, enclos) : couldn't find
>     PaulG> function "pacf.mts"
>     PaulG> make[1]: *** [checkVignettes] Error 1
> 
>     PaulG> I don't really understand the new namespace
>     PaulG> mechanism, so I am not sure if this is a problem with
>     PaulG> R-1.7.0beta, or because of a change I should be
>     PaulG> making in my code. Does it make sense that the
>     PaulG> generic pacf is found, but not the method pacf.mts?
> 
> yes, that was the idea of "hiding" methods in the namespace,
> such that users cannot call the methods directly.
> 
>     PaulG> (I am calling pacf and not pacf.mts.)
> 
> hmm, so I don't see why the problem above happens.
> Can you give a bit more details on how you triggered the errors
> above ?

First I just wanted to confirm that this is not something related to
namespaces that I don't understand. From your comment above, I think my
understanding is roughly correct, so I will try to isolate the problem a
bit more carefully.

I am a bit suspicious that this is related to the other sweave/gc
problem I am having, because the error message is somewhat similar to
the message I get when I don't get a segfault. (These errors have always
become segfaults when I set gctorture.) If this is the problem then it
likely has nothing to do with namespaces or sweave, other than the fact
that something tickles a deeper problem in R.

Paul

> Thanks (to everyone else who does) for beta testing R-beta !
> Martin
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From B.Rowlingson at lancaster.ac.uk  Fri Apr  4 19:39:30 2003
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri Apr  4 19:39:42 2003
Subject: [Rd] I hope Sally also loves Bob...
Message-ID: <3E8DC352.1090702@lancaster.ac.uk>


  A ridiculous number of answers to a fairly trivial query on R-news 
lately - 13 messages on the archive so far telling how to do 
paste(c("Bob","loves","Sally"),collapse=" ").

  I think a lot of this is due to the increased latency because of 
network and mailer problems that Martin mentioned earlier, but there's 
an inherent latency in mailing lists that means any trivial query is in 
danger of being swamped by a dozen identical responses.

  There are very low-latency options - web-based forums. Some people 
object to them since it requires them to visit a site to check for new 
messages, rather than have them appear in their mailboxes. Well, some 
systems can email you new messages or new thread-starters. The important 
thing is that any response is up instantly such that there's no need for 
a dozen identical responses.

  Mailing lists are fine for low-level, low-interactivity information 
transfer, but R-help isn't that anymore.

  Is there any interest in this from R-core or anyone around R-core 
(R-mantle??)? Please email me if you have any desire to see something 
like this, or if you can supply any resources to get something going. I 
may be able to requisition a stray server from somewhere to get 
something going.

Barry Rowlingson
Maths and Stats
Lancaster University
Lancaster, UK

From p.dalgaard at biostat.ku.dk  Fri Apr  4 22:09:32 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Apr  4 21:09:40 2003
Subject: [Rd] Bug in %in% (match)
In-Reply-To: <1049447236.11249.7.camel@sta49.stat.nus.edu.sg>
References: <1049447236.11249.7.camel@sta49.stat.nus.edu.sg>
Message-ID: <x2pto2w043.fsf@biostat.ku.dk>

Nicholas Lewin-Koh <nikko@hailmail.net> writes:

> Hi,
> Am I hitting some limit in match? Consider the following example:
> 
> > tst<-seq(100,125,by=.2)%in%seq(0,800,by=.1)
> > sum(tst)
> [1] 76

> Gives the correct answer. Did I miss something?

The fact that 1/5 and 1/10 are not represented exactly in a binary
computer? 

> sum(tst<-seq(100,125,by=.2)%in%seq(0,800,by=.1))
[1] 76
> sum(tst<-seq(100,125,by=.2)%in%round(seq(0,800,by=.1),1))
[1] 126

And, just to be sure:

> sum(round(seq(100,125,by=.2),1)%in%round(seq(0,800,by=.1),1))
[1] 126


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tplate at blackmesacapital.com  Fri Apr  4 13:18:55 2003
From: tplate at blackmesacapital.com (Tony Plate)
Date: Fri Apr  4 21:19:30 2003
Subject: [Rd] Bug in %in% (match)
In-Reply-To: <1049447236.11249.7.camel@sta49.stat.nus.edu.sg>
Message-ID: <5.2.1.1.2.20030404115958.00af1c40@mailhost.blackmesacapital.com>

You're hitting a limit in floating point number representation (not in 
match), where you are coming across the fact that sometimes in floating 
point arithmetic you can get results like  x + 0.1 + 0.1 != x + 0.2 (which 
is partly due to the fact that decimal fractions cannot be represented 
exactly in binary floating point numbers).

Consider:

 > table(seq(100,125,by=0.2) %in% seq(93,125,by=0.1)) # start the superset 
at 93 -- works OK

TRUE
  126
 >
 > table(seq(100,125,by=0.2) %in% seq(92,125,by=0.1)) # starting the 
superset at 92 instead of 93

FALSE  TRUE
     1   125

By way of further explanation:

 > table(round(seq(100,125,by=0.2),digits=1) %in% 
round(seq(92,125,by=0.1),digits=1)) # round both sets to 1 decimal digit -- 
works OK

TRUE
  126
 > table(seq(92,125,by=0.1) == round(seq(92,125,by=0.1),digits=1)) # see 
how many numbers in the by=0.1 sequence are not equal to their rounded versions

FALSE  TRUE
     2   329
 >
 > seq(92,125,by=0.1)[seq(92,125,by=0.1) != 
round(seq(92,125,by=0.1),digits=1)] # the guilty parties
[1] 124.3 124.8
 >

(Also, note that the differences between the rounded and non-rounded 
sequences are far larger for sequences starting at 0).


At Friday 05:07 PM 4/4/2003 +0800, Nicholas Lewin-Koh wrote:
>Hi,
>Am I hitting some limit in match? Consider the following example:
>
> > tst<-seq(100,125,by=.2)%in%seq(0,800,by=.1)
> > sum(tst)
>[1] 76
> > seq(100,125,by=.2)
>   [1] 100.0 100.2 100.4 100.6 100.8 101.0 101.2 101.4 101.6 101.8 102.0
>102.2
>  [13] 102.4 102.6 102.8 103.0 103.2 103.4 103.6 103.8 104.0 104.2 104.4
>104.6
>  [25] 104.8 105.0 105.2 105.4 105.6 105.8 106.0 106.2 106.4 106.6 106.8
>107.0
>  [37] 107.2 107.4 107.6 107.8 108.0 108.2 108.4 108.6 108.8 109.0 109.2
>109.4
>  [49] 109.6 109.8 110.0 110.2 110.4 110.6 110.8 111.0 111.2 111.4 111.6
>111.8
>  [61] 112.0 112.2 112.4 112.6 112.8 113.0 113.2 113.4 113.6 113.8 114.0
>114.2
>  [73] 114.4 114.6 114.8 115.0 115.2 115.4 115.6 115.8 116.0 116.2 116.4
>116.6
>  [85] 116.8 117.0 117.2 117.4 117.6 117.8 118.0 118.2 118.4 118.6 118.8
>119.0
>  [97] 119.2 119.4 119.6 119.8 120.0 120.2 120.4 120.6 120.8 121.0 121.2
>121.4
>[109] 121.6 121.8 122.0 122.2 122.4 122.6 122.8 123.0 123.2 123.4 123.6
>123.8
>[121] 124.0 124.2 124.4 124.6 124.8 125.0
> > seq(100,125,by=.2)[tst]
>  [1] 100.0 100.2 100.4 101.0 101.2 101.4 102.0 102.2 102.4 103.0 103.2
>103.4
>[13] 104.0 104.2 104.4 105.0 105.2 105.4 106.0 106.2 106.4 107.0 107.2
>107.4
>[25] 108.0 108.2 108.4 109.0 109.2 109.4 110.0 110.2 110.4 111.0 111.2
>111.4
>[37] 112.0 112.2 112.4 113.0 113.2 113.4 114.0 114.2 114.4 115.0 115.2
>115.4
>[49] 116.0 116.2 116.4 117.0 117.2 117.4 118.0 118.2 118.4 119.0 119.2
>119.4
>[61] 120.0 120.2 120.4 121.0 121.2 121.4 122.0 122.2 122.4 123.0 123.2
>123.4
>[73] 124.0 124.2 124.4 125.0
>
>But
>tst<-seq(100,125,by=.2)%in%seq(100,125,by=.1)
> > sum(tst)
>[1] 126
> > seq(100,125,by=.2)[tst]
>   [1] 100.0 100.2 100.4 100.6 100.8 101.0 101.2 101.4 101.6 101.8 102.0
>102.2
>  [13] 102.4 102.6 102.8 103.0 103.2 103.4 103.6 103.8 104.0 104.2 104.4
>104.6
>  [25] 104.8 105.0 105.2 105.4 105.6 105.8 106.0 106.2 106.4 106.6 106.8
>107.0
>  [37] 107.2 107.4 107.6 107.8 108.0 108.2 108.4 108.6 108.8 109.0 109.2
>109.4
>  [49] 109.6 109.8 110.0 110.2 110.4 110.6 110.8 111.0 111.2 111.4 111.6
>111.8
>  [61] 112.0 112.2 112.4 112.6 112.8 113.0 113.2 113.4 113.6 113.8 114.0
>114.2
>  [73] 114.4 114.6 114.8 115.0 115.2 115.4 115.6 115.8 116.0 116.2 116.4
>116.6
>  [85] 116.8 117.0 117.2 117.4 117.6 117.8 118.0 118.2 118.4 118.6 118.8
>119.0
>  [97] 119.2 119.4 119.6 119.8 120.0 120.2 120.4 120.6 120.8 121.0 121.2
>121.4
>[109] 121.6 121.8 122.0 122.2 122.4 122.6 122.8 123.0 123.2 123.4 123.6
>123.8
>[121] 124.0 124.2 124.4 124.6 124.8 125.0
>
>Gives the correct answer. Did I miss something?
>
>Nicholas
>---------------------------------
>pertinent R info
>
>platform i686-pc-linux-gnu
>arch     i686
>os       linux-gnu
>system   i686, linux-gnu
>status
>major    1
>minor    6.2
>year     2003
>month    01
>day      10
>language R
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From pgilbert at bank-banque-canada.ca  Fri Apr  4 23:38:18 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Sat Apr  5 05:36:35 2003
Subject: [Rd] sweave/gc segfault bt
Message-ID: <3E8E4FAA.DE3678B8@bank-banque-canada.ca>

Below is a gdb bt from a segfault provoke by my vignette for dse2. This seems to
be relatively reproducible in the sense that I got a segfault three times
(without gctorture) on Mandrake 9.0 and also caught it in Mandrake 9.1, at what
looks to my untrained eye to be about the same place (actual at
connections.c:293 in Mandrake 9.1). This is the build from Friday morning.

Paul Gilbert

R_LIBS=/home/paul/dse/src/pac/dse2/tmp.R-1.7.0:/home/paul/dse/CHECKED.R-1.7.0/Rlibs 
PADI=/home/paul/dse/src/pac/padi/exec
PATH=/usr//bin:/bin:/usr/bin::/usr/local/bin:/usr/X11R6/bin:/usr/games:~/bin:~/bin:/home/paul/dse/src/pac/padi/exec
R -d gdb 
GNU gdb 5.2.1-2mdk (Mandrake Linux)
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for
details.
This GDB was configured as "i586-mandrake-linux-gnu"...
(gdb) run
Starting program: /home/paul/toolchain/R/R-1.7.0/bin/R.bin 

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-04)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(tools)
> checkVignettes(dir='/home/paul/dse/src/pac/dse2', workdir = 'cur',
keepfiles=TRUE)

Program received signal SIGSEGV, Segmentation fault.
0x080784ff in file_fgetc (con=0xbfffc8a0) at connections.c:291
291             fseek(this->fp, this->rpos, SEEK_SET);
(gdb) bt
#0  0x080784ff in file_fgetc (con=0xbfffc8a0) at connections.c:291
#1  0x080a9f12 in con_getc () at /ext/R/cvs/R-devel/src/main/gram.y:1130
#2  0x080a8a2b in xxgetc () at /ext/R/cvs/R-devel/src/main/gram.y:287
#3  0x080aab78 in SymbolValue (c=0) at
/ext/R/cvs/R-devel/src/main/gram.y:1673
#4  0x080aad30 in token () at /ext/R/cvs/R-devel/src/main/gram.y:1744
#5  0x080ab12a in Rf_yylex () at /ext/R/cvs/R-devel/src/main/gram.y:1886
#6  0x080a89f4 in Rf_yyparse () at
/usr/local/share/bison/bison.simple:595
#7  0x080a9afd in R_Parse1 (status=0x46)
    at /ext/R/cvs/R-devel/src/main/gram.y:948
#8  0x080a9e1e in R_Parse (n=-1, status=0xbfffcdf8)
    at /ext/R/cvs/R-devel/src/main/gram.y:1083
#9  0x080a9fa3 in R_ParseConn (con=0x1, n=-1, status=0xbfffcdf8)
    at /ext/R/cvs/R-devel/src/main/gram.y:1147
#10 0x08117b61 in do_parse (call=0x883dc90, op=0x8205704,
args=0x88397c0, 
    env=0x94f5cf0) at source.c:76
#11 0x080c9e24 in do_internal (call=0x883dc04, op=0x81fbcc8,
args=0x94f52d4, 
    env=0x94f5cf0) at names.c:1056
#12 0x080a3d18 in Rf_eval (e=0x883dc04, rho=0x94f5cf0) at eval.c:418
#13 0x080a5172 in do_begin (call=0x883d3e0, op=0x81fc17c,
args=0x883dbe8, 
    rho=0x94f5cf0) at eval.c:1072
#14 0x080a3d18 in Rf_eval (e=0x883d3e0, rho=0x94f5cf0) at eval.c:418
#15 0x080a3fa5 in Rf_applyClosure (call=0x8955188, op=0x883db08, 
    arglist=0x94f5bbc, rho=0x94f57b0, suppliedenv=0x81f6ca0) at
eval.c:609
---Type <return> to continue, or q <return> to quit---
#16 0x080a3b27 in Rf_eval (e=0x8955188, rho=0x94f57b0) at eval.c:453
#17 0x080a5895 in do_set (call=0x8955134, op=0x94f57b0, args=0x8955150, 
    rho=0x94f57b0) at eval.c:1283
#18 0x080a3d18 in Rf_eval (e=0x8955134, rho=0x94f57b0) at eval.c:418
#19 0x080a5a7b in Rf_evalList (el=0x89550c4, rho=0x94f57b0) at
eval.c:1372
#20 0x080a3c40 in Rf_eval (e=0x89550a8, rho=0x94f57b0) at eval.c:439
#21 0x080a5895 in do_set (call=0x8955054, op=0x94f57b0, args=0x8955070, 
    rho=0x94f57b0) at eval.c:1283
#22 0x080a3d18 in Rf_eval (e=0x8955054, rho=0x94f57b0) at eval.c:418
#23 0x080a5172 in do_begin (call=0x8954178, op=0x81fc17c,
args=0x8955038, 
    rho=0x94f57b0) at eval.c:1072
#24 0x080a3d18 in Rf_eval (e=0x8954178, rho=0x94f57b0) at eval.c:418
#25 0x080a3fa5 in Rf_applyClosure (call=0x8e217b8, op=0x8959458, 
    arglist=0x94f5698, rho=0x8ef6f8c, suppliedenv=0x81f6ca0) at
eval.c:609
#26 0x080a3b27 in Rf_eval (e=0x8e217b8, rho=0x8ef6f8c) at eval.c:453
#27 0x080a3a46 in Rf_eval (e=0x94f66e8, rho=0x94f6790) at eval.c:383
#28 0x080a398f in Rf_eval (e=0x82702e0, rho=0x94f6790) at eval.c:360
#29 0x080a5172 in do_begin (call=0x87d55a0, op=0x81fc17c,
args=0x87d54f8, 
    rho=0x94f6790) at eval.c:1072
#30 0x080a3d18 in Rf_eval (e=0x87d55a0, rho=0x94f6790) at eval.c:418
#31 0x080a3d18 in Rf_eval (e=0x87d6198, rho=0x94f6790) at eval.c:418
#32 0x080a5172 in do_begin (call=0x87d5ae0, op=0x81fc17c,
args=0x87d617c, 
    rho=0x94f6790) at eval.c:1072
---Type <return> to continue, or q <return> to quit---
#33 0x080a3d18 in Rf_eval (e=0x87d5ae0, rho=0x94f6790) at eval.c:418
#34 0x080a3fa5 in Rf_applyClosure (call=0x8e2172c, op=0x87d609c, 
    arglist=0x94f6720, rho=0x8ef6f8c, suppliedenv=0x81f6ca0) at
eval.c:609
#35 0x080a3b27 in Rf_eval (e=0x8e2172c, rho=0x8ef6f8c) at eval.c:453
#36 0x080a5895 in do_set (call=0x8e216d8, op=0x8ef6f8c, args=0x8e216f4, 
    rho=0x8ef6f8c) at eval.c:1283
#37 0x080a3d18 in Rf_eval (e=0x8e216d8, rho=0x8ef6f8c) at eval.c:418
#38 0x080a5172 in do_begin (call=0x8e216bc, op=0x81fc17c,
args=0x8e216a0, 
    rho=0x8ef6f8c) at eval.c:1072
#39 0x080a3d18 in Rf_eval (e=0x8e216bc, rho=0x8ef6f8c) at eval.c:418
#40 0x080a4b3c in do_for (call=0x8e21390, op=0x81f6680, args=0x8e213ac, 
    rho=0x8ef6f8c) at eval.c:968
#41 0x080a3d18 in Rf_eval (e=0x8e21390, rho=0x8ef6f8c) at eval.c:418
#42 0x080a5172 in do_begin (call=0x8e2187c, op=0x81fc17c,
args=0x8e21374, 
    rho=0x8ef6f8c) at eval.c:1072
#43 0x080a3d18 in Rf_eval (e=0x8e2187c, rho=0x8ef6f8c) at eval.c:418
#44 0x080a3d18 in Rf_eval (e=0x8e222b4, rho=0x8ef6f8c) at eval.c:418
#45 0x080a5172 in do_begin (call=0x8e1e5ac, op=0x81fc17c,
args=0x8e22298, 
    rho=0x8ef6f8c) at eval.c:1072
#46 0x080a3d18 in Rf_eval (e=0x8e1e5ac, rho=0x8ef6f8c) at eval.c:418
#47 0x080a3fa5 in Rf_applyClosure (call=0x8ef714c, op=0x8e407d8, 
    arglist=0x8ef70dc, rho=0x820d51c, suppliedenv=0x81f6ca0) at
eval.c:609
#48 0x080a3b27 in Rf_eval (e=0x8ef714c, rho=0x820d51c) at eval.c:453
---Type <return> to continue, or q <return> to quit---
#49 0x080bdbc7 in Rf_ReplIteration (rho=0x820d51c, savestack=1,
browselevel=0, 
    state=0xbffff0e0) at main.c:236
#50 0x080bdd82 in R_ReplConsole (rho=0x820d51c, savestack=0,
browselevel=0)
    at main.c:284
#51 0x080be64f in run_Rmainloop () at main.c:615
#52 0x081251ec in main (ac=1, av=0xbffff5c4) at system.c:99
#53 0x4009a082 in __libc_start_main () from /lib/i686/libc.so.6
(gdb)

From jago at mclink.it  Sat Apr  5 15:38:02 2003
From: jago at mclink.it (Stefano Iacus)
Date: Sat Apr  5 14:38:11 2003
Subject: [Rd] Default broswer for OS X (PR#2725)
In-Reply-To: <200304040404.h3444opD003415@pubhealth.ku.dk>
Message-ID: <70FE0BBE-6763-11D7-85B2-003065CC4CB8@mclink.it>

This could be nice for the vignettes too.
stefano

On Venerd?, apr 4, 2003, at 06:04 Europe/Rome, 
james@freelancepropaganda.com wrote:

> Full_Name: James Howison
> Version: 1.6.2
> OS: OS X (fink install)
> Submission from: (NULL) (66.67.80.30)
>
>
> The default browser for the html help system is not set correctly for 
> OS X.
>
> This makes the html help work great on OS X:
>
>> options(browser = "open")
>> help.start()
>
> "open" is an OS X launcher app that inspects a file and launches it 
> with the
> appropriate application (it is the same as double clicking).  It 
> launches in the
> system preferred browser - which is great - integration with the OS 
> for free :)
>
> Perhaps this could be added to the darwin.hints file (if such a thing 
> is used
> for R) or otherwise added in so that it is the default.
>
> The user-experience is definately increased by being able to read the 
> help at
> the same time one uses it :)
>
> I've promoted the packager for the OS X fink package to set this as 
> the default
> in the build if that is possible.
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From ligges at statistik.uni-dortmund.de  Sat Apr  5 16:31:28 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Apr  5 15:31:54 2003
Subject: [Rd] Graphics, grid with type="b" causes problems (PR#2723)
In-Reply-To: <200304031204.h33C4ln9027041@pubhealth.ku.dk>
References: <200304031204.h33C4ln9027041@pubhealth.ku.dk>
Message-ID: <3E8EDAB0.1080104@statistik.uni-dortmund.de>

wolfgang.waser@rz.hu-berlin.de wrote:
> Full_Name: Wolfgang Waser
> Version: 1.6.2
> OS: Windows98SE / SuSE Linux 8.1
> Submission from: (NULL) (141.20.60.4)
> 
> 
> Including >type="l"< or >type="b"< in plot command causes problems with grid:
> 
> .....
> layout <- par(fin=c(3.46,3.46),mai=c(0.63,0.63,0.05,0.05),mgp=c(2,0.7,0),
> 	tcl=0.35,las=1,cex.axis=0.9,cex.lab=1,ps=10)
> 
> plot(data.trout[,1],data.trout[,2],xlim=range(6.5,8.5),ylim=range(120,470),
> 	xlab="pH",ylab=expression(paste("P"[O[2]],
> 	" (Torr)")),bg="white",grid(lty=2,lwd=0.6))
> .....
> 
> This plot works fine. Note: the grid is "in the back", i.e. does not overlay
> tick marks, plot symbols or boundary lines.

This is not directly reproducible without the object "data.trout".

Where is the documentation that states something like
    plot(1:10, grid())
should work?

It works fine? From my point of view the appearance of a grid in that 
plot() instead of an error message is completely unexpected (and does 
not happen for a simple example).



> Including type="b" (or "l") causes an error message:
> 
> ...
> Error in plot.window(xlim, ylim, log, asp, ...) : 
> 	"log=" specification must be character
> ...
> 
> Including >log=""< within the plot command gets rid of the message. However, now
> the grid (light grey) overlays tick marks, lines of the plot, and boundary
> lines.

In your first call, grid(..) was mapped to the argument "type". Now, the 
next free argument name in plot.default() is "log", which your grid(..) 
statements is mapped to.

Please use grid() separately. Overplotting is expected, so you have to 
overplot again with the relevant things.

This is *not* a bug (hence no need to send a bug report!).

Uwe Ligges


> Regards
> 
> Wolfgang
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Sat Apr  5 17:04:17 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Apr  5 16:04:43 2003
Subject: [Rd] write.matrix has limited line length -> truncation (PR#2722)
In-Reply-To: <200304030649.h336n6n9015805@pubhealth.ku.dk>
References: <200304030649.h336n6n9015805@pubhealth.ku.dk>
Message-ID: <3E8EE261.9070108@statistik.uni-dortmund.de>

christen@chemie.hu-berlin.de wrote:
> Full_Name: Dr. Wolfgang Christen
> Version: 1.62
> OS: Windows 2000
> Submission from: (NULL) (141.20.76.99)
> 
> 
> I have a matrix of 705 x 999 elements and would like to save the data to a file
> using the follwing line:
> write.matrix ( format ( U1r, digits = 15 ), file = "C:\\Documents and
> Settings\\Administrator\\My Documents\\R\\plot-u2-2.txt" )
> 
> Then I had to find out that only 195 (out of 705) columns were saved :-(
> 
> I tried then to reduce the accuracy to 5 digits, which gave me 373 columns,
> already better, but still insufficient. 
> 
> So my suspicion is that an internal line buffer is limited to something less
> than 4k and all subsequent data gets truncated and thus will not be saved.

I've just tried it out with a 1000x1000 matrix with R-1.6.2 on WinNT4.0:

library(MASS)
set.seed(123)
write.matrix(matrix(format(rnorm(1000000), digits = 15),
     ncol = 1000), file = "c:/test.txt")

It works! So could you provide an example (don't send a file, please!)?

Uwe Ligges

From mikalzet at libero.it  Sat Apr  5 23:26:47 2003
From: mikalzet at libero.it (mikalzet@libero.it)
Date: Sat Apr  5 22:27:07 2003
Subject: [Rd] bug in install-info.pl ?
Message-ID: <Pine.LNX.4.50.0304052220130.2682-100000@macchinetta>


I have run across a minor problem which would seem to be a bug in the
install-info.pl script. My data regard R 1.6.2 but I don't suppose the
script has been changed so perhaps this could be fixed for R 1.7.0.

Someone mailed me saying they could not recompile my R 1.6.2 src.rpm for
mandrake 9.1. This was the error message:

.....
Checking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/R-root
error: Installed (but unpackaged) file(s) found:
?? /usr/share/info/dir.old.bz2

RPM build errors:
??? Installed (but unpackaged) file(s) found:
?? /usr/share/info/dir.old.bz2


I therefore obtained a version of 9.1 and reproduced the problem.

Build functions correctly; the packaging process fails. RPM 4.0.4 provided
my mandrake 9.1 contains a script called check-files which aborts
packaging on discovering, in the directory tree containing the files to be
packaged, a file which will not be included in the final rpm.

The file in this case is:

../R-root/usr/share/info/dir.old.bz2

Deleting this file after the build process and before the check-files
script enters into play allows the packaging process to terminate
correctly.

This could be an error in the spec file, I suppose, but my impression is
that this file is created (but not deleted, as it should be) by the
install-info.pl script. On earlier versions of mandrake the problem does
not come up because no check-files script exists, and so presence of
unused files is not noticed.

Could a perl guru take a look at the script and tell me if my diagnosis is
correct ?

Thank you

-- 
Michele Alzetta

From schepler at math.berkeley.edu  Sun Apr  6 01:06:20 2003
From: schepler at math.berkeley.edu (schepler@math.berkeley.edu)
Date: Sun Apr  6 00:06:37 2003
Subject: [Rd] Re: Bug#187537: r-base: FTBFS: hangs in tcltk test (PR#2733)
Message-ID: <200304052206.h35M6KpD015852@pubhealth.ku.dk>

Dirk Eddelbuettel <edd@debian.org> writes:

> Thanks for the bug report. I will pass it on to R Core.
>
> > In case this makes any difference, I am redirecting the stdout and
> > stderr of pbuilder into a pipe, while leaving stdin unchanged.
> 
> Don't know, it may. But that does not propagate to what happens inside
> pbuilder, i.e. in the processes started by it, does it? 
> 
> Most of the other build systems work, see
>      http://buildd.debian.org/build.php?pkg=r-base
> The most recent hppa error looks spurious and related to Build-Depends.

I just reproduced the hang on a standard pbuilder setup: after
installing pbuilder and editing MIRRORSITE in /etc/pbuilderrc to your
liking and setting DISTRIBUTION to sid, you should just be able to run
pbuilder create, then "pbuilder build r-base_*.dsc 2>&1|tee
build-log".  This reproduced the bug for me.  (I'm not sure whether
pbuilder is actually required, but I didn't feel like installing the
Build-Depends for r-base in the root filesystem.)

> Just to confirm, you are building on m68k, correct?  

No, i386.
-- 
Daniel Schepler              "Please don't disillusion me.  I
schepler@math.berkeley.edu    haven't had breakfast yet."
                                 -- Orson Scott Card

From mschwartz at medanalytics.com  Sat Apr  5 18:45:54 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Sun Apr  6 01:46:22 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta - Errors Resolved
Message-ID: <3E8F6AB2.1080605@medanalytics.com>

Hi all,

As you may recall, earlier this week I posted about errors in make check 
using 1.7.0 Beta under RH 9.

Peter kindly contacted me off list and we have been running some checks 
and possible resolutions the past couple of days.

The errors turned out to be (run individually):

 > !is.nan(c(1.,NA))
[1]  TRUE FALSE

 > is.nan(c   (1.,NaN,NA))
[1] FALSE  TRUE  TRUE

 > is.nan(list(1.,NaN,NA))
[1] FALSE  TRUE FALSE

 > is.nan(as.numeric(NA))
[1] TRUE


After doing some debugging, we identified some problems that ultimately 
led us to the conclusion that there are optimization problems with the 
current gcc in RH 9, which is:

gcc (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)

We confirmed this running

./configure CFLAGS="-O0 -g"

and I was able to run make check without errors.

Bottom line, it appears that R_NaReal was not being set properly. It 
would take the value of nan(0x8000000000000) instead of 
nan(0x80000000007a2). This is set in R_NaReal = R_ValueOfNA().

The present version in arithmetic.c is:

  117 static double R_ValueOfNA(void)
  118 {
  119     ieee_double x;
  120     x.word[hw] = 0x7ff00000;
  121     x.word[lw] = 1954;
  122     return x.value;
  123 }

The change is in line 119 to:

volatile ieee_double x;

This has resolved the problem and now results in no errors being 
reported during make check with the default ./configure.

Thus, now using:

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-05)

I get:

 > !is.nan(c(1.,NA))
[1] TRUE TRUE

 > is.nan(c   (1.,NaN,NA))
[1] FALSE  TRUE FALSE

 > is.nan(list(1.,NaN,NA))
[1] FALSE  TRUE FALSE

 > is.nan(as.numeric(NA))
[1] FALSE


Many thanks to Peter for his patience and support is guiding me through 
this process!  Peter has indicated that he will incorporate this change 
into the base code.

Best regards,

Marc Schwartz

From Mark.Bravington at csiro.au  Sun Apr  6 17:32:40 2003
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Sun Apr  6 08:33:07 2003
Subject: [Rd] namespaces and assignment: a problem/question
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B45B3@molly.tas.csiro.au>

This is a question about namespaces and assignment. It's occasioned because
one of my functions stopped working at about R1.6 with the arrival of
'namespace:base', and I'm anxious to find out what will happen when 1.7
arrives. But the question might be of more general relevance (hence my
desire to get it in before "lockdown" on 9th April).

I have a function 'mtrace' which is supposed to overwrite the "most
findable" instance of its argument. 'mtrace' could be called either from the
command line, or from inside another function (i.e. somewhere in a stack of
temporary frames). Conceptually, what 'mtrace' does is:

mtrace( fname) {
  # fname is a character string that is a function name
  old.version <- get( fname, inherits=TRUE)
  new.version <- some.modification.of( old.version)
  
  # Overwrite old.version with new.version
  do.call( '<<-', fname, new.version)
}

The 'do.call( "<<-"...)' always used to overwrite into the environment where
'fname' originally lived, regardless of whether this was a frame in the set
of enclosures of the frame where 'mtrace' was called, or in the search path
of permanent workspaces. In particular, this ensured that the next time
'fname' was invoked (from the same frame as 'mtrace', or from a descendant),
the modified version would be called.

Since R1.6.?, though, this hasn't worked for functions defined in
'package:base'. Although it's possible to explicitly overwrite things in
'base' using 'assign', '<<-' no longer works (it creates a copy in
'.GlobalEnv' instead). Unfortunately, I can't use 'assign' directly, because
if 'fname' actually lives in an enclosing frame rather than a permanent
workspace, there is no way to figure out which enclosing frame, and thus
where to assign 'fname' to. [I recall reading somewhere about "there is no
way to identify the enclosing environment of a given environment".]

My current hack is to check whether the environment of 'fname' is
'.BaseNamespaceEnv', and if so to use 'assign( envir=' rather than '<<-'.
However, this isn't really satisfactory, as it's possible for a function to
have environment '.BaseNamespaceEnv' but not to reside in 'package:base'. I
also have no idea whether this sort of thing would work at all when 1.7.0
arrives.

One way around all this, might be to have an analog of 'find' that looks
through temporary enclosures before peeking into the search path. [?Also
some extension of 'find' that could take a package as a starting point, then
look through namespace imports? Here I am well out of my depth]  Then I
could just use 'superfind' followed by 'assign'. Is this a meaningful idea?
Could it be implemented simply? (Presumably yes, by just mirroring the way R
searches for objects..?)

It seems to me as though there might be a logical gap hereabouts with
assignment. I've had a bit of a look in the new "A simple implementation of
name spaces for R", and it seems that the section on "Sealing" is relevant--
e.g. are values being sealed rather than bindings? But I don't want to
inadvertently give any misleading impression that I actually understand how
namespaces will work! There are some complexities here (for me anyway), so
I'd much appreciate any guidance

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au

From pgilbert at bank-banque-canada.ca  Sun Apr  6 12:44:00 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Sun Apr  6 17:45:28 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta - Errors Resolved
References: <3E8F6AB2.1080605@medanalytics.com>
Message-ID: <3E904B40.679D128C@bank-banque-canada.ca>

I don't seem to have this problem on Mandrake 9.1 which has 
gcc 3.2.2 (Mandrake Linux 9.1 3.2.2-3mdk) and using R-1.7.0beta2003-03-31
compiled with the defaults. That is, I get the latter results even without the
fix.

Paul Gilbert

Marc Schwartz wrote:
> 
> Hi all,
> 
> As you may recall, earlier this week I posted about errors in make check
> using 1.7.0 Beta under RH 9.
> 
> Peter kindly contacted me off list and we have been running some checks
> and possible resolutions the past couple of days.
> 
> The errors turned out to be (run individually):
> 
>  > !is.nan(c(1.,NA))
> [1]  TRUE FALSE
> 
>  > is.nan(c   (1.,NaN,NA))
> [1] FALSE  TRUE  TRUE
> 
>  > is.nan(list(1.,NaN,NA))
> [1] FALSE  TRUE FALSE
> 
>  > is.nan(as.numeric(NA))
> [1] TRUE
> 
> After doing some debugging, we identified some problems that ultimately
> led us to the conclusion that there are optimization problems with the
> current gcc in RH 9, which is:
> 
> gcc (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)
> 
> We confirmed this running
> 
> ./configure CFLAGS="-O0 -g"
> 
> and I was able to run make check without errors.
> 
> Bottom line, it appears that R_NaReal was not being set properly. It
> would take the value of nan(0x8000000000000) instead of
> nan(0x80000000007a2). This is set in R_NaReal = R_ValueOfNA().
> 
> The present version in arithmetic.c is:
> 
>   117 static double R_ValueOfNA(void)
>   118 {
>   119     ieee_double x;
>   120     x.word[hw] = 0x7ff00000;
>   121     x.word[lw] = 1954;
>   122     return x.value;
>   123 }
> 
> The change is in line 119 to:
> 
> volatile ieee_double x;
> 
> This has resolved the problem and now results in no errors being
> reported during make check with the default ./configure.
> 
> Thus, now using:
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.7.0 Under development (unstable) (2003-04-05)
> 
> I get:
> 
>  > !is.nan(c(1.,NA))
> [1] TRUE TRUE
> 
>  > is.nan(c   (1.,NaN,NA))
> [1] FALSE  TRUE FALSE
> 
>  > is.nan(list(1.,NaN,NA))
> [1] FALSE  TRUE FALSE
> 
>  > is.nan(as.numeric(NA))
> [1] FALSE
> 
> Many thanks to Peter for his patience and support is guiding me through
> this process!  Peter has indicated that he will incorporate this change
> into the base code.
> 
> Best regards,
> 
> Marc Schwartz
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From mschwartz at medanalytics.com  Sun Apr  6 14:44:21 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Sun Apr  6 20:45:01 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta - Errors Resolved
In-Reply-To: <3E904B40.679D128C@bank-banque-canada.ca>
References: <3E8F6AB2.1080605@medanalytics.com>
	<3E904B40.679D128C@bank-banque-canada.ca>
Message-ID: <3E907585.2070009@medanalytics.com>

Paul Gilbert wrote:
> I don't seem to have this problem on Mandrake 9.1 which has 
> gcc 3.2.2 (Mandrake Linux 9.1 3.2.2-3mdk) and using R-1.7.0beta2003-03-31
> compiled with the defaults. That is, I get the latter results even without the
> fix.
> 
> Paul Gilbert


The only thought that I can offer is that RH has done something to the 
version of gcc released with RH 9.

Martyn and I had an offlist exchange last week and he is going to be 
installing RH 9 on his home system, if he has not done so already. It 
will be interesting to see if he can confirm or deny the behavior that I 
have seen with the "pre-fix" code.

If he can, then it would suggest that there is something with the RH 9 
version of gcc. If not, then perhaps there is something with my 
particular install, though I did do a "clean" install and not an upgrade 
from RH 8.0 and I have installed all RH 9 updates via RHN.

Note the specfic details of 'gcc --version' for RH 9:

gcc (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)

The "official" release of 3.2.2 from gcc.gnu.org is dated February 05, 
2003. So there is at least some potential for distribution specific 
issues it would seem.

Best regards,

Marc Schwartz

From edd at debian.org  Mon Apr  7 05:20:31 2003
From: edd at debian.org (edd@debian.org)
Date: Mon Apr  7 04:20:49 2003
Subject: [Rd] Re: Bug#187537: r-base: FTBFS: hangs in tcltk test (PR#2736)
Message-ID: <200304070220.h372KVpD019838@pubhealth.ku.dk>

severity 187537 wishlist
tags 187537 + upstream
thanks

I am downgrading because it a) does not affect normal build, b) does not
affect autobuilders, and c) is not related to Debian changes to the build
process as far as I can see.  a) and b) take care of the downgraded
severity, c) is for the upstream tag.

Let me know if you disagree, strongly or mildly.

Dirk

-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

From edd at debian.org  Sun Apr  6 22:31:09 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon Apr  7 04:31:46 2003
Subject: [Rd] Re: Bug#187537: r-base: FTBFS: hangs in tcltk test (PR#2736)
In-Reply-To: <200304070220.h372KVpD019838@pubhealth.ku.dk>
References: <200304070220.h372KVpD019838@pubhealth.ku.dk>
Message-ID: <20030407023109.GA17645@sonny.eddelbuettel.com>


Damn. That was meant for control@bugs.debian.org.  Sorry for the line noise.

Dirk

On Mon, Apr 07, 2003 at 04:20:31AM +0200, edd@debian.org wrote:
> severity 187537 wishlist
> tags 187537 + upstream
> thanks
> 
> I am downgrading because it a) does not affect normal build, b) does not
> affect autobuilders, and c) is not related to Debian changes to the build
> process as far as I can see.  a) and b) take care of the downgraded
> severity, c) is for the upstream tag.
> 
> Let me know if you disagree, strongly or mildly.
> 
> Dirk
> 
> -- 
> Wishful thinking can dominate much of the work of a profession for a decade,
> but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

From pd at pubhealth.ku.dk  Mon Apr  7 08:15:03 2003
From: pd at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon Apr  7 07:14:48 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200304070515.h375F3ij001984@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0, 0.6-8
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500
* PR# 2480 *
Subject: bug in CrossTable (package:gregmisc)
From: John_Hendrickx@yahoo.com
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
* PR# 2499 *
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
Date: Mon, 27 Jan 2003 17:28:11 +0100
..Needs to resubmit in more useful format.
* PR# 2520 *
Subject: Apparent parser problem
From: "Jim Rogers" <jrogers@cantatapharm.com>
Date: Sat, 1 Feb 2003 16:51:41 -0500
..Its an ESS or XEmacs problem. I redirected him to ESS-bugs.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
* PR# 2545 *
Subject: colSums etc. documentation
From: "Gunter, Bert" <bert_gunter@merck.com>
Date: Thu, 13 Feb 2003 09:08:44 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200
* PR# 2578 *
Subject: "trace" argument in legend()
From: jerome@hivnet.ubc.ca
Date: Mon, 24 Feb 2003 18:53:29 +0100 (MET)
* PR# 2630 *
Subject: plot() with type="s" and lty=2
From: jerome@hivnet.ubc.ca
Date: Wed, 12 Mar 2003 23:35:59 +0100 (MET)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!
* PR# 2639 *
Subject: Bug in read.socket
From: mckay@gmr.com
Date: Fri, 14 Mar 2003 14:28:58 +0100 (MET)

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 2541 *
Subject: cbind rises floating point exception 
From: Ramon Diaz <rdiaz@cnio.es>
Date: Tue, 11 Feb 2003 19:23:53 +0100
..The problem here is that a 1x0 matrix and 0-length vector
..are not conformable.  The test for a zero-row was wrong.
..
..Fixed for 1.7.0

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)
* PR# 2550 *
Subject: eigen() error: R Version 1.6.1 on Mac OS X
From: "Daniel E. Weeks" <dweeks@watson.hgen.pitt.edu>
Date: Fri, 14 Feb 2003 15:36:15 -0500

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.
* PR# 2644 *
Subject: R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: faheem@email.unc.edu
Date: Sun, 16 Mar 2003 19:47:55 +0100 (MET)
* PR# 2645 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Faheem Mitha <faheem@email.unc.edu>
Date: Sun, 16 Mar 2003 15:44:14 -0500 (EST)
..part of 2644
* PR# 2648 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
Date: Mon, 17 Mar 2003 21:32:55 +0100
..part of 2644

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
* PR# 2577 *
Subject: Problem with hessian in deriv3 
From: j.c.rougier@durham.ac.uk
Date: Mon, 24 Feb 2003 17:01:47 GMT
* PR# 2593 *
Subject: density(), with argument of length 1
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 1 Mar 2003 16:35:56 +1100 (EST)
* PR# 2628 *
Subject: cex.axis in boxplot
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Wed, 12 Mar 2003 17:27:34 +0100 (CET)
* PR# 2656 *
Subject: recursive default argument reference in debugger
From: pburns@pburns.seanet.com
Date: Wed, 19 Mar 2003 12:23:40 +0100 (MET)
* PR# 2687 *
Subject: termplot
From: Mark.Bravington@csiro.au
Date: Wed, 26 Mar 2003 10:32:17 +1100
* PR# 2718 *
Subject: =?GB2312?B?zqrE47f+zvE=?=
From: "dds" <wyhao33@yahoo.com.cn>
Date: Wed, 2 Apr 2003 17:10:47 +0800
* PR# 2719 *
Subject: cozlar rhjection
From: "Jillian Diggs" <xxib2ityh@aol.com>
Date: Wed, 02 Apr 03 15:05:17 GMT
* PR# 2720 *
Subject: [R] 
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Date: Tue, 1 Apr 2003 11:22:55 -0800
* PR# 2721 *
Subject: Fwd: Thinking about a DVD-R? Don't waste your money!
From: "Jocelyn Madden" <Darleen1698t@msnbc.com>
Date: Thu, 03 Apr 03 16:55:39 GMT
* PR# 2722 *
Subject: write.matrix has limited line length -> truncation
From: christen@chemie.hu-berlin.de
Date: Thu, 3 Apr 2003 08:49:05 +0200 (MET DST)
* PR# 2723 *
Subject: Graphics, grid with type="b" causes problems
From: wolfgang.waser@rz.hu-berlin.de
Date: Thu, 3 Apr 2003 14:04:46 +0200 (MET DST)
* PR# 2724 *
Subject: mild encoulter
From: "Nadine Barrera" <4w0w1gdbbw18@hotmail.com>
Date: Thu, 03 Apr 03 12:57:06 GMT
* PR# 2725 *
Subject: Default broswer for OS X
From: james@freelancepropaganda.com
Date: Fri, 4 Apr 2003 06:04:48 +0200 (MET DST)
* PR# 2726 *
Subject: Re: COPY ANY DVD TO A CD
From: "Virgil Landis" <Leonel8953x@mailservant.com>
Date: Sat, 05 Apr 03 10:30:35 GMT
* PR# 2727 *
Subject: hjlddown ballnon
From: "Graciela Frye" <tmt5cn2x@aol.com>
Date: Fri, 04 Apr 03 07:10:31 GMT
* PR# 2728 *
Subject: R crashes on calling a Fortran routine
From: martyn.byng@nag.co.uk
Date: Fri, 4 Apr 2003 11:21:16 +0200 (MET DST)
* PR# 2729 *
Subject: Re: DVD copier program request
From: "Jermaine Ford" <Myles3162s@flagmail.com>
Date: Sat, 05 Apr 03 08:26:46 GMT
* PR# 2730 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Fri, 4 Apr 2003 06:27:15 -0600
* PR# 2731 *
Subject: URGENT RESPONSES NEEDED
From: "ABU MOBUTU." <abumobutu@netsape.net>
Date: Fri, 04 Apr 2003 18:49:45 +0200
* PR# 2732 *
Subject: ATTN:  Interest rates are lower than ever, but maybe not for long
From: "Jan Parson" <3o655kum3v@bushinternet.com>
Date: Sat, 05 Apr 03 12:10:54 GMT
* PR# 2733 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Daniel Schepler <schepler@math.berkeley.edu>
Date: 05 Apr 2003 14:06:09 -0800
* PR# 2734 *
Subject: COPY ANY DVD TO A CD
From: DVD Professional <cgrdennis4@yahoo.com>
Date: Sun, 6 Apr 2003 01:58:05 +0200
* PR# 2735 *
Subject: objeciive discgpline
From: "Etta Melvin" <t81i1s5a0h@yahoo.com>
Date: Sun, 06 Apr 03 00:55:35 GMT
* PR# 2736 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Sun, 6 Apr 2003 21:20:29 -0500

From plummer at iarc.fr  Mon Apr  7 10:29:09 2003
From: plummer at iarc.fr (Martyn Plummer)
Date: Mon Apr  7 09:29:40 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta - Errors Resolved
In-Reply-To: <3E907585.2070009@medanalytics.com>
References: <3E8F6AB2.1080605@medanalytics.com>
	<3E904B40.679D128C@bank-banque-canada.ca> 
	<3E907585.2070009@medanalytics.com>
Message-ID: <1049700549.965.25.camel@xena>

On Sun, 2003-04-06 at 20:44, Marc Schwartz wrote:
> Paul Gilbert wrote:
> > I don't seem to have this problem on Mandrake 9.1 which has 
> > gcc 3.2.2 (Mandrake Linux 9.1 3.2.2-3mdk) and using R-1.7.0beta2003-03-31
> > compiled with the defaults. That is, I get the latter results even without the
> > fix.
> > 
> > Paul Gilbert
> 
> 
> The only thought that I can offer is that RH has done something to the 
> version of gcc released with RH 9.
> 
> Martyn and I had an offlist exchange last week and he is going to be 
> installing RH 9 on his home system, if he has not done so already. It 
> will be interesting to see if he can confirm or deny the behavior that I 
> have seen with the "pre-fix" code.
> 
> If he can, then it would suggest that there is something with the RH 9 
> version of gcc. If not, then perhaps there is something with my 
> particular install, though I did do a "clean" install and not an upgrade 
> from RH 8.0 and I have installed all RH 9 updates via RHN.
> 
> Note the specfic details of 'gcc --version' for RH 9:
> 
> gcc (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)
> 
> The "official" release of 3.2.2 from gcc.gnu.org is dated February 05, 
> 2003. So there is at least some potential for distribution specific 
> issues it would seem.

I have been working independently of Marc and Peter (bit of a waste of
my weekend on reflection) to find the bug.  I have abstracted a small
program from the R sources that will reproduce the problem, and I will
use this in my bug report to Red Hat. It should print the number 0 then
exit. The bug manifests itself when you optimize, and in this case, the
program prints 1.

I found out - quite by accident - that the "-pedantic" flag turns off
the bug, although I can't imagine why. Any suggestions?

Martyn
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RNAcheck.c
Type: text/x-c
Size: 1005 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030407/b5cca4e1/RNAcheck.bin
From MartynB at nag.co.uk  Mon Apr  7 13:43:05 2003
From: MartynB at nag.co.uk (MartynB@nag.co.uk)
Date: Mon Apr  7 12:43:22 2003
Subject: [Rd] (PR#2728)
Message-ID: <200304071043.h37Ah5pD024134@pubhealth.ku.dk>

This problem appears to have been caused by compiling the .DLL with the
wrong calling convention (stdcall rather than cdecl)

________________________________________________________________________
This e-mail has been scanned for all viruses by Star Internet. T... {{dropped}}

From christen at chemie.hu-berlin.de  Mon Apr  7 16:17:48 2003
From: christen at chemie.hu-berlin.de (christen@chemie.hu-berlin.de)
Date: Mon Apr  7 15:18:06 2003
Subject: FW: [Rd] write.matrix has limited line length -> truncation (PR#2722)
Message-ID: <200304071317.h37DHmpD026776@pubhealth.ku.dk>

> I have to admit that the reported "bug" is a bug in my data viewer... while it
> works for a few rows and many columns, it has problems importing large arrays.
> And everything concerning R is fine :-)
>
> Sorry!
>
> Wolfgang Christen

From possolo at crd.ge.com  Mon Apr  7 16:19:56 2003
From: possolo at crd.ge.com (possolo@crd.ge.com)
Date: Mon Apr  7 15:20:13 2003
Subject: [Rd] Plot Dates (PR#2737)
Message-ID: <200304071319.h37DJupD026825@pubhealth.ku.dk>

Full_Name: Antonio Possolo
Version: 1.6.2
OS: Linux & Windows2000
Submission from: (NULL) (192.35.44.3)


x <- as.POSIXct(strptime(c("1993-5-11", "1994-11-23",
                           "1995-7-8", "1996-10-15"), format="%Y-%m-%d"))
y <- c(15, 32, 47, 61)
plot(x, y, xlab="Date", ylab="Count")

Warns "parameter "ylab" couldn't be set in high-level plot() function",
but generates the label as specified.
Without 'ylab="Count"' no warning message is issued.

From plummer at iarc.fr  Mon Apr  7 19:25:26 2003
From: plummer at iarc.fr (Martyn Plummer)
Date: Mon Apr  7 18:25:53 2003
Subject: [Rd] RH 9 and R 1.7.0 Beta - response from Red Hat
Message-ID: <1049732726.11916.46.camel@xena>

Attached is Red Hat's judgement on my bug report for the missing value
corruption problem that appears in RH 9.

https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=88174

Martyn
-------------- next part --------------
An embedded message was scrubbed...
From: bugzilla@redhat.com
Subject: [Bug 88174] Optimization causes corruption of NA value in the R
	language
Date: Mon, 7 Apr 2003 12:13:24 -0400
Size: 1998
Url: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030407/b0300c56/attachment.txt
From mschwartz at medanalytics.com  Mon Apr  7 12:54:31 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Mon Apr  7 18:54:58 2003
Subject: [Rd] RE: RH 9 and R 1.7.0 Beta - response from Red Hat
In-Reply-To: <1049732726.11916.46.camel@xena>
Message-ID: <004b01c2fd26$5d72e2b0$0201a8c0@MARC>

>-----Original Message-----
>From: Martyn Plummer [mailto:plummer@iarc.fr] 
>Sent: Monday, April 07, 2003 11:25 AM
>To: r-devel@r-project.org
>Cc: Marc Schwartz; Peter Dalgaard
>Subject: RH 9 and R 1.7.0 Beta - response from Red Hat
>
>
>Attached is Red Hat's judgement on my bug report for the 
>missing value corruption problem that appears in RH 9.
>
>https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=88174
>
>Martyn


Martyn,

First, my apologies.  In hindsight, I should have sent you an e-mail
on Friday to inform you that Peter had contacted me. I was not aware
at the time that you had RH 9 running yet and so had not considered
the possibility that you might be working on the bug in parallel.
Sorry.

Thanks for confirming the problem and for posting the code and the bug
to RH.  I was on the RH web site reading Jakub's reply to your post as
your message above came through. 

There are other bugs posted there attributed to real.c, with comments
to the effect that the rewrite of real.c for gcc 3.4 CVS was
undertaken specifically to fix some of them. Jakub's reply would
suggest that they went ahead and incorporated some or all of the 3.4
real.c updates into 3.3.

Given his comments, it is curious however that this behavior is not
seen elsewhere using 3.2.2, unless other distros have included the
3.3/3.4 real.c changes or some other workaround as an incremental bug
fix into 3.2.2. This would possibly fit with my prior comments
regarding distro specific gcc version issues, since Paul did not see
this on Mandrake.

No response though by Jakub to the -pedantic issue, which is a
curiosity.

Best regards,

Marc Schwartz

From ligges at statistik.uni-dortmund.de  Mon Apr  7 23:14:49 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Apr  7 22:15:02 2003
Subject: [Rd] Plot Dates (PR#2737)
References: <200304071319.h37DJupD026825@pubhealth.ku.dk>
Message-ID: <3E91DC39.575CF8FB@statistik.uni-dortmund.de>



possolo@crd.ge.com wrote:
> 
> Full_Name: Antonio Possolo
> Version: 1.6.2
> OS: Linux & Windows2000
> Submission from: (NULL) (192.35.44.3)
> 
> x <- as.POSIXct(strptime(c("1993-5-11", "1994-11-23",
>                            "1995-7-8", "1996-10-15"), format="%Y-%m-%d"))
> y <- c(15, 32, 47, 61)
> plot(x, y, xlab="Date", ylab="Count")
> 
> Warns "parameter "ylab" couldn't be set in high-level plot() function",
> but generates the label as specified.
> Without 'ylab="Count"' no warning message is issued.

Not really a bug. It's a warning message, not an error, and the result
is as expected. The underlying problem has been discussed (at least
mentioned) several times - and I don't know an _optimal_ solution.

The warning comes from axis.POSIXct(1, x, ...) within plot.POSIXct(),
because axis() doesn't understand "ylab" which is passed by the ...
argument.

Uwe Ligges

From dan.field at av.com  Mon Apr  7 23:20:30 2003
From: dan.field at av.com (dan.field@av.com)
Date: Mon Apr  7 22:20:46 2003
Subject: [Rd] kendall's tau-b computation (PR#2742)
Message-ID: <200304072020.h37KKUpD029674@pubhealth.ku.dk>

Full_Name: Dan Field
Version: 1.6.2
OS: N/A
Submission from: (NULL) (209.115.168.187)



In kendall.c (library is ctest), the limits for the first loop in routine
kendall_tau run from 0 through n-1, and the inner loop runs from 0 through i-1. 
This causes the each pair at index i to be compared with itself; my
understanding is that there should only be n*(n-1)/2 pairs under consideration
for concordance, discordance, and ties.

From p.dalgaard at biostat.ku.dk  Tue Apr  8 16:25:54 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr  8 15:25:46 2003
Subject: [Rd] kendall's tau-b computation (PR#2742)
In-Reply-To: <200304072020.h37KKUpD029674@pubhealth.ku.dk>
References: <200304072020.h37KKUpD029674@pubhealth.ku.dk>
Message-ID: <x2d6jx86jh.fsf@biostat.ku.dk>

dan.field@av.com writes:

> In kendall.c (library is ctest), the limits for the first loop in routine
> kendall_tau run from 0 through n-1, and the inner loop runs from 0 through i-1. 
> This causes the each pair at index i to be compared with itself; my
> understanding is that there should only be n*(n-1)/2 pairs under consideration
> for concordance, discordance, and ties.

??? 

Are you saying that j==i becomes true, when j runs from 0 to i-1?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From Dan.Field at av.com  Tue Apr  8 09:46:37 2003
From: Dan.Field at av.com (Dan Field)
Date: Tue Apr  8 16:46:41 2003
Subject: [Rd] kendall's tau-b computation (PR#2742)
In-Reply-To: <x2d6jx86jh.fsf@biostat.ku.dk>
Message-ID: <PEEHLJBCHOGCHCJADBJDCEACDDAA.Dan.Field@av.com>


Hmm; I had another look and my original comment is incorrect.  I apologize for the bogus bug report.

The reason I looked at this in the first place is because I implemented my own version in order to get around the O(n^2) running
time (one of my lists has only 4 possible values so I can bin the other list items and then sort each of the bins).  I was using the
version in this library to compare the resulting value of tau with my own and found that I was getting disagreement in the 3rd
decimal place and thus looked at the code to understand why.

Given that my original report was in error, I'm still trying to discover the source of the disagreement.  Most likely it's a bug in
my own code.

Thanks for the quick response; please accept my apologies.

-----Original Message-----
From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
Sent: Tuesday, April 08, 2003 7:26 AM
To: dan.field@av.com
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: [Rd] kendall's tau-b computation (PR#2742)


dan.field@av.com writes:

> In kendall.c (library is ctest), the limits for the first loop in routine
> kendall_tau run from 0 through n-1, and the inner loop runs from 0 through i-1.
> This causes the each pair at index i to be compared with itself; my
> understanding is that there should only be n*(n-1)/2 pairs under consideration
> for concordance, discordance, and ties.

???

Are you saying that j==i becomes true, when j runs from 0 to i-1?

--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Tue Apr  8 20:26:16 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  8 20:26:30 2003
Subject: (PR#2722) [Rd] Christen claimed `write.matrix has limited line
 length -> truncation', without a shred of evidence. 
In-Reply-To: <200304030649.h336n6n9015805@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304081903420.19379-100000@gannet.stats>

Is this the write.matrix from package MASS not being given due credit?

If so, that uses cat, and if that has a line-length limit it is in the OS
and not in R.  (Some deficient OSes will have line-length limits under
some circumstances, but I believe never less than 8095.)

Under Linux:

> A <- matrix(rnorm(705*10), 10)
> library(MASS)
> write.matrix(format(A, digits=15), file="foo")
> q()
Save workspace image? [y/n/c]: n
gannet% wc foo
     10    7050  155100 foo

and that means there are 7050 entries in 10 lines of around 15k chars
each.  No evidence of truncation there!

Under Windows XP I get identical results.

BTW, please read the section on BUGS in the FAQ, and next time do send a 
reproducible example (and a non-zero amount of evidence for the claimed 
bug).

BDR

On Thu, 3 Apr 2003 christen@chemie.hu-berlin.de wrote:

> Full_Name: Dr. Wolfgang Christen
> Version: 1.62

There is no such version: did you misread 1.6.2? 

> OS: Windows 2000
> Submission from: (NULL) (141.20.76.99)
> 
> 
> I have a matrix of 705 x 999 elements and would like to save the data to a file
> using the follwing line:
> write.matrix ( format ( U1r, digits = 15 ), file = "C:\\Documents and
> Settings\\Administrator\\My Documents\\R\\plot-u2-2.txt" )
> 
> Then I had to find out that only 195 (out of 705) columns were saved :-(

Where is your evidence?  Perhaps the tools *you* used truncated the file?

> I tried then to reduce the accuracy to 5 digits, which gave me 373 columns,
> already better, but still insufficient. 
> 
> So my suspicion is that an internal line buffer is limited to something less
> than 4k and all subsequent data gets truncated and thus will not be saved.

Don't send suspicions: send real experimental data.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr  8 20:26:16 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr  8 20:26:44 2003
Subject: (PR#2722) [Rd] Christen claimed `write.matrix has limited line
 length -> truncation', without a shred of evidence. 
In-Reply-To: <200304030649.h336n6n9015805@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304081903420.19379-100000@gannet.stats>

Is this the write.matrix from package MASS not being given due credit?

If so, that uses cat, and if that has a line-length limit it is in the OS
and not in R.  (Some deficient OSes will have line-length limits under
some circumstances, but I believe never less than 8095.)

Under Linux:

> A <- matrix(rnorm(705*10), 10)
> library(MASS)
> write.matrix(format(A, digits=15), file="foo")
> q()
Save workspace image? [y/n/c]: n
gannet% wc foo
     10    7050  155100 foo

and that means there are 7050 entries in 10 lines of around 15k chars
each.  No evidence of truncation there!

Under Windows XP I get identical results.

BTW, please read the section on BUGS in the FAQ, and next time do send a 
reproducible example (and a non-zero amount of evidence for the claimed 
bug).

BDR

On Thu, 3 Apr 2003 christen@chemie.hu-berlin.de wrote:

> Full_Name: Dr. Wolfgang Christen
> Version: 1.62

There is no such version: did you misread 1.6.2? 

> OS: Windows 2000
> Submission from: (NULL) (141.20.76.99)
> 
> 
> I have a matrix of 705 x 999 elements and would like to save the data to a file
> using the follwing line:
> write.matrix ( format ( U1r, digits = 15 ), file = "C:\\Documents and
> Settings\\Administrator\\My Documents\\R\\plot-u2-2.txt" )
> 
> Then I had to find out that only 195 (out of 705) columns were saved :-(

Where is your evidence?  Perhaps the tools *you* used truncated the file?

> I tried then to reduce the accuracy to 5 digits, which gave me 373 columns,
> already better, but still insufficient. 
> 
> So my suspicion is that an internal line buffer is limited to something less
> than 4k and all subsequent data gets truncated and thus will not be saved.

Don't send suspicions: send real experimental data.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From laurent at cbs.dtu.dk  Wed Apr  9 05:23:34 2003
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Wed Apr  9 04:18:33 2003
Subject: [Rd] 'Apparently' trouble with name spaces and Sweave...
Message-ID: <20030409022334.GG14601432@genome.cbs.dtu.dk>

Ben Bolstad experienced something odd while running R CMD check over
a package of ours using r-devel (yesterday's fresh).
He tracked down the problem to a vignette calling 'library(MASS)'.

Please kindly ignore if this is a known (and temporary) issue.




Laurent




----- Forwarded message from Ben Bolstad <bolstad@stat.berkeley.edu> -----

Return-Path: <bolstad@stat.berkeley.edu>
X-Original-To: laurent@cbs.dtu.dk
Delivered-To: laurent@cbs.dtu.dk
Received: from avocet.mail.pas.earthlink.net (avocet.mail.pas.earthlink.net [207.217.120.50])
	by genome.cbs.dtu.dk (Postfix) with ESMTP id 826362633D9E
	for <laurent@cbs.dtu.dk>; Tue,  8 Apr 2003 21:27:29 +0200 (MDT)
Received: from h-68-164-84-127.snvacaid.covad.net ([68.164.84.127] helo=[192.168.0.3])
	by avocet.mail.pas.earthlink.net with esmtp (Exim 3.33 #1)
	id 192yfb-0003Hu-00; Tue, 08 Apr 2003 12:22:11 -0700
Subject: build problem with affy
From: Ben Bolstad <bolstad@stat.berkeley.edu>
To: rafa@jhu.edu
Cc: Laurent Gautier <laurent@cbs.dtu.dk>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-Mailer: Ximian Evolution 1.0.8 (1.0.8-11) 
Date: 08 Apr 2003 12:22:10 -0700
Message-Id: <1049829731.3929.50.camel@bmbbox.dyndns.org>
Mime-Version: 1.0
Status: O
Content-Length: 1446
Lines: 34

I am getting this error when doing a R CMD build --force on affy

I am using an updated R-devel rsync'ed this morning and I am using the
latest MASS package (which was my first thought). I am not having
problems building other packages.

Any thoughts? 

* creating vignettes ... ERROR
Error in namespaceExport(ns, exports) : undefined exports: abbey,
accdeaths, Aids2, Animals, anorexia, austres, bacteria, beav1, beav2,
biopsy, birthwt, Boston, cabbages, caith, Cars93, cats, cement, chem,
coop, cpus, crabs, Cushings, DDT, deaths, drivers, eagles, epil, farms,
fdeaths, fgl,
forbes, GAGurine, galaxies, gehan, genotype, geyser, gilgais, hills,
housing, immer, Insurance, leuk, lh, mammals, MASS.data.load, mcycle,
mdeaths, Melanoma, menarche, michelson, minn38, motors, muscle, newcomb,
nlschools, nottem, npk, npr1, oats, OME, painters, petrol, phones,
Pima.te, Pima.tr, Pima.tr2, quine, Rabbit, road, rock, rotifer, Rubber,
ships, shoes, shrimp, shuttle, Sitka, Sitka89, Skye, snails, SP500,
steam, stormer, survey, synth.te, synth.tr, topo, Traffic, UScereal,
UScrime, VA, waders, whiteside, wtloss
Error in library(MASS) : package/namespace load failed
Error in driver$runcode(drobj, chunk, chunkopts) :
        Error in library(MASS) : package/namespace load failed
Error in buildVignettes(dir = ".") : Error in driver$runcode(drobj,
chunk, chunkopts) :
        Error in library(MASS) : package/namespace load failed
Execution halted






----- End forwarded message -----

-- 
--------------------------------------------------------------
currently at the National Yang-Ming University in Taipei, Taiwan
--------------------------------------------------------------
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			DK-2800 Lyngby,Denmark	
tel: +45 45 25 24 89		http://www.cbs.dtu.dk/laurent

From laurent at cbs.dtu.dk  Wed Apr  9 05:23:34 2003
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Wed Apr  9 04:18:46 2003
Subject: [Rd] 'Apparently' trouble with name spaces and Sweave...
Message-ID: <20030409022334.GG14601432@genome.cbs.dtu.dk>

Ben Bolstad experienced something odd while running R CMD check over
a package of ours using r-devel (yesterday's fresh).
He tracked down the problem to a vignette calling 'library(MASS)'.

Please kindly ignore if this is a known (and temporary) issue.




Laurent




----- Forwarded message from Ben Bolstad <bolstad@stat.berkeley.edu> -----

Return-Path: <bolstad@stat.berkeley.edu>
X-Original-To: laurent@cbs.dtu.dk
Delivered-To: laurent@cbs.dtu.dk
Received: from avocet.mail.pas.earthlink.net (avocet.mail.pas.earthlink.net [207.217.120.50])
	by genome.cbs.dtu.dk (Postfix) with ESMTP id 826362633D9E
	for <laurent@cbs.dtu.dk>; Tue,  8 Apr 2003 21:27:29 +0200 (MDT)
Received: from h-68-164-84-127.snvacaid.covad.net ([68.164.84.127] helo=[192.168.0.3])
	by avocet.mail.pas.earthlink.net with esmtp (Exim 3.33 #1)
	id 192yfb-0003Hu-00; Tue, 08 Apr 2003 12:22:11 -0700
Subject: build problem with affy
From: Ben Bolstad <bolstad@stat.berkeley.edu>
To: rafa@jhu.edu
Cc: Laurent Gautier <laurent@cbs.dtu.dk>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-Mailer: Ximian Evolution 1.0.8 (1.0.8-11) 
Date: 08 Apr 2003 12:22:10 -0700
Message-Id: <1049829731.3929.50.camel@bmbbox.dyndns.org>
Mime-Version: 1.0
Status: O
Content-Length: 1446
Lines: 34

I am getting this error when doing a R CMD build --force on affy

I am using an updated R-devel rsync'ed this morning and I am using the
latest MASS package (which was my first thought). I am not having
problems building other packages.

Any thoughts? 

* creating vignettes ... ERROR
Error in namespaceExport(ns, exports) : undefined exports: abbey,
accdeaths, Aids2, Animals, anorexia, austres, bacteria, beav1, beav2,
biopsy, birthwt, Boston, cabbages, caith, Cars93, cats, cement, chem,
coop, cpus, crabs, Cushings, DDT, deaths, drivers, eagles, epil, farms,
fdeaths, fgl,
forbes, GAGurine, galaxies, gehan, genotype, geyser, gilgais, hills,
housing, immer, Insurance, leuk, lh, mammals, MASS.data.load, mcycle,
mdeaths, Melanoma, menarche, michelson, minn38, motors, muscle, newcomb,
nlschools, nottem, npk, npr1, oats, OME, painters, petrol, phones,
Pima.te, Pima.tr, Pima.tr2, quine, Rabbit, road, rock, rotifer, Rubber,
ships, shoes, shrimp, shuttle, Sitka, Sitka89, Skye, snails, SP500,
steam, stormer, survey, synth.te, synth.tr, topo, Traffic, UScereal,
UScrime, VA, waders, whiteside, wtloss
Error in library(MASS) : package/namespace load failed
Error in driver$runcode(drobj, chunk, chunkopts) :
        Error in library(MASS) : package/namespace load failed
Error in buildVignettes(dir = ".") : Error in driver$runcode(drobj,
chunk, chunkopts) :
        Error in library(MASS) : package/namespace load failed
Execution halted






----- End forwarded message -----

-- 
--------------------------------------------------------------
currently at the National Yang-Ming University in Taipei, Taiwan
--------------------------------------------------------------
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			DK-2800 Lyngby,Denmark	
tel: +45 45 25 24 89		http://www.cbs.dtu.dk/laurent

From ripley at stats.ox.ac.uk  Wed Apr  9 09:18:50 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr  9 09:19:02 2003
Subject: [Rd] 'Apparently' trouble with name spaces and Sweave...
In-Reply-To: <20030409022334.GG14601432@genome.cbs.dtu.dk>
Message-ID: <Pine.LNX.4.44.0304090813340.20345-100000@gannet.stats>

On Wed, 9 Apr 2003, Laurent Gautier wrote:

> Ben Bolstad experienced something odd while running R CMD check over
> a package of ours using r-devel (yesterday's fresh).
> He tracked down the problem to a vignette calling 'library(MASS)'.
> 
> Please kindly ignore if this is a known (and temporary) issue.

It is not a known issue, but we have no idea how to reproduce this from
your message.  My guess is that your build of MASS is faulty, as you seem
to be missing all the data files.  Does library(MASS) on its own work?  
Did you do `make check-all' on your build?

Why did you clog the list with this three times, including full email
headers which are of no interest to us?

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From laurent at cbs.dtu.dk  Wed Apr  9 10:54:59 2003
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Wed Apr  9 09:50:15 2003
Subject: [Rd] 'Apparently' trouble with name spaces and Sweave...
In-Reply-To: <Pine.LNX.4.44.0304090813340.20345-100000@gannet.stats>
References: <20030409022334.GG14601432@genome.cbs.dtu.dk>
	<Pine.LNX.4.44.0304090813340.20345-100000@gannet.stats>
Message-ID: <20030409075459.GK14601432@genome.cbs.dtu.dk>

I CCed Ben Bolstad, whom I mistakingly forget in my previous post.

Thanks,

L.

PS: The mail abuse was perpretrated by putting 'r-devel@stat.math.ethz.ch'
in the field 'To:' of my mailing software. Lack of sleep could have make me 
write, inadvertantly, twice the same recipient. Unbearable
mail headers should be absent from this post. 


On Wed, Apr 09, 2003 at 08:18:50AM +0100, Prof Brian Ripley wrote:
> On Wed, 9 Apr 2003, Laurent Gautier wrote:
> 
> > Ben Bolstad experienced something odd while running R CMD check over
> > a package of ours using r-devel (yesterday's fresh).
> > He tracked down the problem to a vignette calling 'library(MASS)'.
> > 
> > Please kindly ignore if this is a known (and temporary) issue.
> 
> It is not a known issue, but we have no idea how to reproduce this from
> your message.  My guess is that your build of MASS is faulty, as you seem
> to be missing all the data files.  Does library(MASS) on its own work?  
> Did you do `make check-all' on your build?
>

From lvcaroline at seductive.com  Wed Apr  9 18:54:32 2003
From: lvcaroline at seductive.com (Kathryn)
Date: Wed Apr  9 14:55:16 2003
Subject: [Rd] r-devel lkq
Message-ID: <200304091255.h39CsxAP000456@hypatia.math.ethz.ch>

r-devel
kjiu

nvgkabclyhpmtjujjdjefylhvhc

From bolstad at stat.berkeley.edu  Wed Apr  9 14:09:34 2003
From: bolstad at stat.berkeley.edu (Ben Bolstad)
Date: Wed Apr  9 22:09:56 2003
Subject: [Rd] 
	MASS and R-devel WAS: 'Apparently' trouble with name spaces and
	Sweave...
In-Reply-To: <20030409075459.GK14601432@genome.cbs.dtu.dk>
References: <20030409022334.GG14601432@genome.cbs.dtu.dk>
	 <Pine.LNX.4.44.0304090813340.20345-100000@gannet.stats>
	 <20030409075459.GK14601432@genome.cbs.dtu.dk>
Message-ID: <1049918974.24688.43.camel@bmbbox.dyndns.org>


> > It is not a known issue, but we have no idea how to reproduce this from
> > your message.  My guess is that your build of MASS is faulty, as you seem
> > to be missing all the data files.  Does library(MASS) on its own work?  
> > Did you do `make check-all' on your build?

The problem is with library(MASS).

> library(MASS)
Error in namespaceExport(ns, exports) : undefined exports: abbey,
accdeaths, Aids2, Animals, anorexia, austres, bacteria, beav1, beav2,
biopsy, birthwt, Boston, cabbages, caith, Cars93, cats, cement, chem,
coop, cpus, crabs, Cushings, DDT,
deaths, drivers, eagles, epil, farms, fdeaths, fgl, forbes, GAGurine,
galaxies,
gehan, genotype, geyser, gilgais, hills, housing, immer, Insurance,
leuk, lh, mammals, MASS.data.load, mcycle, mdeaths, Melanoma, menarche,
michelson, minn38, motors, muscle, newcomb, nlschools, nottem, npk,
npr1, oats, OME, painters, petrol, phones, Pima.te, Pima.tr, Pima.tr2,
quine, Rabbit, road, rock, rotifer, Rubber, ships, shoes, shrimp,
shuttle, Sitka, Sitka89, Skye, snails, SP500, steam, stormer, survey,
synth.te, synth.tr, topo, Traffic, UScereal, UScrime, VA, waders,
whiteside, wtloss
Error in library(MASS) : package/namespace load failed


I have checked the MASS installation and all the data files are there
and i can manually load() them just fine.

make check-all on my current rsync'ed R-devel chokes at.

make[3]: Entering directory `/R/tests/Examples'
collecting examples for package 'survival' ...
file ../../library/survival/R-ex cannot be opened at
../../share/perl/massage-Examples.pl line 107.
survival-Ex.R is unchanged
running code in 'survival-Ex.R' ...make[3]: *** [survival-Ex.Rout] Error
1
make[3]: Leaving directory `/R/tests/Examples'
make[2]: *** [test-Examples-Recommended] Error 2
make[2]: Leaving directory `/R/tests/Examples'
make[1]: *** [test-Examples-Recommended] Error 2
make[1]: Leaving directory `/R/tests'
make: *** [check-all] Error 2

Thanks,

Ben

From ripley at stats.ox.ac.uk  Thu Apr 10 08:58:51 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 10 08:59:05 2003
Subject: [Rd]  MASS and R-devel WAS: 'Apparently' trouble with name spaces
 and Sweave...
In-Reply-To: <1049918974.24688.43.camel@bmbbox.dyndns.org>
Message-ID: <Pine.LNX.4.44.0304100752470.2243-100000@gannet.stats>

On 9 Apr 2003, Ben Bolstad wrote:

> 
> > > It is not a known issue, but we have no idea how to reproduce this from
> > > your message.  My guess is that your build of MASS is faulty, as you seem
> > > to be missing all the data files.  Does library(MASS) on its own work?  
> > > Did you do `make check-all' on your build?
> 
> The problem is with library(MASS).

No, the problem is with your installation: everyone else is getting all 
these checks to pass.  You did not check the installation fully ....

> I have checked the MASS installation and all the data files are there
> and i can manually load() them just fine.

But that is not how they work: they are promises to load and you are
missing the promises.  How can you `have checked' something you don't 
understand?

> make check-all on my current rsync'ed R-devel chokes at.

Ahah: do you have correct versions of the recommended packages?  That is,
run tools/rsync-recommended?

> make[3]: Entering directory `/R/tests/Examples'
> collecting examples for package 'survival' ...
> file ../../library/survival/R-ex cannot be opened at
> ../../share/perl/massage-Examples.pl line 107.
> survival-Ex.R is unchanged

That's another error in your installation not seen elsewhere.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hornik at ci.tuwien.ac.at  Thu Apr 10 18:36:42 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Thu Apr 10 17:39:08 2003
Subject: [Rd] Default broswer for OS X (PR#2725)
In-Reply-To: <70FE0BBE-6763-11D7-85B2-003065CC4CB8@mclink.it>
References: <200304040404.h3444opD003415@pubhealth.ku.dk>
	<70FE0BBE-6763-11D7-85B2-003065CC4CB8@mclink.it>
Message-ID: <16021.36746.570027.437027@mithrandir.hornik.net>

>>>>> Stefano Iacus writes:

> This could be nice for the vignettes too.
> stefano

I am not sure if the original message is a bug report or a feature
request for a certain binary distribution?

Configure currently checks for R_BROWSER being set and then for

  netscape mozilla galeon kfmclient opera gnome-moz-remote open

in that order.  One could special-case the order for OSX but as it is
trivial to change things at both configure and run time ...

-k

> On Venerd?, apr 4, 2003, at 06:04 Europe/Rome, 
> james@freelancepropaganda.com wrote:

>> Full_Name: James Howison
>> Version: 1.6.2
>> OS: OS X (fink install)
>> Submission from: (NULL) (66.67.80.30)
>> 
>> 
>> The default browser for the html help system is not set correctly for 
>> OS X.
>> 
>> This makes the html help work great on OS X:
>> 
>>> options(browser = "open")
>>> help.start()
>> 
>> "open" is an OS X launcher app that inspects a file and launches it 
>> with the
>> appropriate application (it is the same as double clicking).  It 
>> launches in the
>> system preferred browser - which is great - integration with the OS 
>> for free :)
>> 
>> Perhaps this could be added to the darwin.hints file (if such a thing 
>> is used
>> for R) or otherwise added in so that it is the default.
>> 
>> The user-experience is definately increased by being able to read the 
>> help at
>> the same time one uses it :)
>> 
>> I've promoted the packager for the OS X fink package to set this as 
>> the default
>> in the build if that is possible.
>> 
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>> 

> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From pgilbert at bank-banque-canada.ca  Thu Apr 10 16:06:01 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu Apr 10 21:06:48 2003
Subject: [Rd] pacf.mts
Message-ID: <3E95C099.1C70E426@bank-banque-canada.ca>

I think this is a bug. Sorry I'm still using a version from a couple of
days ago.


R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-08)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

>  library(ts)
>  z <- matrix (rnorm(200), 100,2)
> zz <- acf(z, plot=FALSE, type= "partial")$acf
Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"
> 

Paul Gilbert

From ripley at stats.ox.ac.uk  Thu Apr 10 21:51:15 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 10 21:51:28 2003
Subject: [Rd] pacf.mts
In-Reply-To: <3E95C099.1C70E426@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0304102048300.14877-100000@gannet.stats>

Why are you doing it like that?  z is not a time series: if it were it 
works: try acf(as.ts(z), ...)

I think the bug is 99.99% in your mis-usage of acf.

On Thu, 10 Apr 2003, Paul Gilbert wrote:

> I think this is a bug. Sorry I'm still using a version from a couple of
> days ago.
> 
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.7.0 Under development (unstable) (2003-04-08)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> >  library(ts)
> >  z <- matrix (rnorm(200), 100,2)
> > zz <- acf(z, plot=FALSE, type= "partial")$acf
> Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"
> > 
> 
> Paul Gilbert
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Thu Apr 10 23:03:00 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Apr 10 22:02:06 2003
Subject: [Rd] pacf.mts
In-Reply-To: <3E95C099.1C70E426@bank-banque-canada.ca>
References: <3E95C099.1C70E426@bank-banque-canada.ca>
Message-ID: <x2u1d6glxn.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think this is a bug. Sorry I'm still using a version from a couple of
> days ago.

It is, but maybe not the easiest one to fix, and we're already in code
freeze...

> >  library(ts)
> >  z <- matrix (rnorm(200), 100,2)
> > zz <- acf(z, plot=FALSE, type= "partial")$acf
> Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"

The issue is that certain programming techniques are not compatible
with namespaces. In this case we have in pacf.default:

    if (is.matrix(x)) {
        m <- match.call()
        m[[1]] <- as.name("pacf.mts")
        return(eval(m, parent.frame()))
    }

but pacf.mts is not visible in the parent.frame(). Since the content
of the if() block is obviously nonfunctional, I suppose we could
accept a fix that is clearly local to the block. Does it work to set 

m[[1]] <- pacf.mts 

??

Then again, there's a fairly obvious workaround:

acf(as.ts(z), plot=FALSE, type= "partial")
    ********

(obviously, the same issues apply to pacf())


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pgilbert at bank-banque-canada.ca  Thu Apr 10 17:46:21 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu Apr 10 22:47:33 2003
Subject: [Rd] pacf.mts
References: <3E95C099.1C70E426@bank-banque-canada.ca>
	<x2u1d6glxn.fsf@biostat.ku.dk>
Message-ID: <3E95D81D.8C5D4364@bank-banque-canada.ca>

Ok, I can use

 acf(as.ts(z), plot=FALSE, type= "partial")

whether we call it a work around or the proper usage. (My way has worked
for a long time in both R and Splus, but I'm prepared to modernize.)

But shouldn't the error message say something about not finding a
default method?

Paul

Peter Dalgaard BSA wrote:
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I think this is a bug. Sorry I'm still using a version from a couple of
> > days ago.
> 
> It is, but maybe not the easiest one to fix, and we're already in code
> freeze...
> 
> > >  library(ts)
> > >  z <- matrix (rnorm(200), 100,2)
> > > zz <- acf(z, plot=FALSE, type= "partial")$acf
> > Error in eval(expr, envir, enclos) : couldn't find function "pacf.mts"
> 
> The issue is that certain programming techniques are not compatible
> with namespaces. In this case we have in pacf.default:
> 
>     if (is.matrix(x)) {
>         m <- match.call()
>         m[[1]] <- as.name("pacf.mts")
>         return(eval(m, parent.frame()))
>     }
> 
> but pacf.mts is not visible in the parent.frame(). Since the content
> of the if() block is obviously nonfunctional, I suppose we could
> accept a fix that is clearly local to the block. Does it work to set
> 
> m[[1]] <- pacf.mts
> 
> ??
> 
> Then again, there's a fairly obvious workaround:
> 
> acf(as.ts(z), plot=FALSE, type= "partial")
>     ********
> 
> (obviously, the same issues apply to pacf())
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From jfox at mcmaster.ca  Thu Apr 10 18:23:37 2003
From: jfox at mcmaster.ca (John Fox)
Date: Thu Apr 10 23:23:43 2003
Subject: [Rd] aliased coefficients in summary.glm
Message-ID: <5.1.0.14.2.20030410171330.01e816b8@mcmail.cis.mcmaster.ca>

Dear list members,

I was reminded of what I see as a problem with summary.glm this week when 
some of my students fell into a trap in a homework exercise, defining a 
logit model in which coefficients were aliased. When this happens in lm, 
summary.lm prints a message ["Coefficients: (1 not defined because of 
singularities)"], but summary.glm is silent. In both instances, the print 
methods show aliased coefficients as NA.

At minimum, I think that it would be desirable for summary.glm to indicate 
that there's a problem. In addition, I would prefer that both summary.glm 
and summary.lm include aliased coefficients (as NA) in the table of 
coefficients.

Thanks for your attention,
  John
-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

From hornik at ci.tuwien.ac.at  Fri Apr 11 11:37:21 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Fri Apr 11 10:39:41 2003
Subject: [Rd] bug in install-info.pl ?
In-Reply-To: <Pine.LNX.4.50.0304052220130.2682-100000@macchinetta>
References: <Pine.LNX.4.50.0304052220130.2682-100000@macchinetta>
Message-ID: <16022.32449.919999.844392@mithrandir.hornik.net>

>>>>> mikalzet  writes:

> I have run across a minor problem which would seem to be a bug in the
> install-info.pl script. My data regard R 1.6.2 but I don't suppose the
> script has been changed so perhaps this could be fixed for R 1.7.0.

> Someone mailed me saying they could not recompile my R 1.6.2 src.rpm for
> mandrake 9.1. This was the error message:

> .....
> Checking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/R-root
> error: Installed (but unpackaged) file(s) found:
> ,b  (B /usr/share/info/dir.old.bz2

> RPM build errors:
> ,b   (B Installed (but unpackaged) file(s) found:
> ,b  (B /usr/share/info/dir.old.bz2


> I therefore obtained a version of 9.1 and reproduced the problem.

> Build functions correctly; the packaging process fails. RPM 4.0.4
> provided my mandrake 9.1 contains a script called check-files which
> aborts packaging on discovering, in the directory tree containing the
> files to be packaged, a file which will not be included in the final
> rpm.

> The file in this case is:

> ../R-root/usr/share/info/dir.old.bz2

> Deleting this file after the build process and before the check-files
> script enters into play allows the packaging process to terminate
> correctly.

> This could be an error in the spec file, I suppose, but my impression
> is that this file is created (but not deleted, as it should be) by the
> install-info.pl script. On earlier versions of mandrake the problem
> does not come up because no check-files script exists, and so presence
> of unused files is not noticed.

> Could a perl guru take a look at the script and tell me if my
> diagnosis is correct ?

I don't see any 'bz2' in the install-info.pl script.

Now the configure mechanism first checks for an install-info *program*
and if this is not found (and Perl 5.004 or better was found) uses the
install-info script: can you look at your config.status what
INSTALL_INFO ended up being?

-k

From Michael.Man at pfizer.com  Fri Apr 11 17:02:29 2003
From: Michael.Man at pfizer.com (Michael.Man@pfizer.com)
Date: Fri Apr 11 16:02:48 2003
Subject: [Rd] bug in read.table (PR#2764)
Message-ID: <200304111402.h3BE2TpD011855@pubhealth.ku.dk>

Hi, there might be a bug in read.delim (also read.table) in R.1.6.2.  I
included the correct input done in R1.6.1 first, then the wrong input in
R1.6.2.  The discrepancies are highlighted in red.

Michael Man  


####### correct input in R1.6.1 ##########################
> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.1            
year     2002           
month    11             
day      01             
language R  

Browse[1]> jk2_read.delim(hd.file,sep="\t")
Browse[1]> jk2[4:6,]
  Wells    Drug Time Dose Animal.number Replicate
4    A4 Control                       2         a
5    A5 Control                       2         b
6    A6 Control                       2         c


##### bug below ######################
> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R             

Browse[1]> jk2_read.delim(hd.file,sep="\t")
Browse[1]> jk2[4:6,1:6]
   AWells    Drug Time Dose Animal.number Replicate 
4      A4 Control                       2         a   
5       5 Control                       2         b   
6      A6 Control                       2         c 



LEGAL NOTICE\ Unless expressly stated otherwise, this message is... {{dropped}}

From ripley at stats.ox.ac.uk  Fri Apr 11 16:14:33 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 11 16:14:43 2003
Subject: [Rd] bug in read.table (PR#2764)
In-Reply-To: <200304111402.h3BE2TpD011855@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304111510120.21064-100000@gannet.stats>

Without the file, how can we do anything about this?  My guess is that
this is a MacOS file, in which case the problem is PR#2469 which is long
solved.  Please try R-patched or a beta of R-1.7.0.

>From the NEWS file in R-patched

BUG FIXES

    o   The fix to PR#2396 broke read.table() on files with CR line
        endings. (PR#2469) Separate problem with this on Carbon Mac
        build fixed as well.

The other workaround is to use files in the native file format ....


BTW, `_' is deprecated, so please don't use it in postings, especially in 
the unreadable way shown here.

On Fri, 11 Apr 2003 Michael.Man@pfizer.com wrote:

> Hi, there might be a bug in read.delim (also read.table) in R.1.6.2.  I
> included the correct input done in R1.6.1 first, then the wrong input in
> R1.6.2.  The discrepancies are highlighted in red.
> 
> Michael Man  
> 
> 
> ####### correct input in R1.6.1 ##########################
> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.1            
> year     2002           
> month    11             
> day      01             
> language R  
> 
> Browse[1]> jk2_read.delim(hd.file,sep="\t")
> Browse[1]> jk2[4:6,]
>   Wells    Drug Time Dose Animal.number Replicate
> 4    A4 Control                       2         a
> 5    A5 Control                       2         b
> 6    A6 Control                       2         c
> 
> 
> ##### bug below ######################
> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.2            
> year     2003           
> month    01             
> day      10             
> language R             
> 
> Browse[1]> jk2_read.delim(hd.file,sep="\t")
> Browse[1]> jk2[4:6,1:6]
>    AWells    Drug Time Dose Animal.number Replicate 
> 4      A4 Control                       2         a   
> 5       5 Control                       2         b   
> 6      A6 Control                       2         c 
> 
> 
> 
> LEGAL NOTICE\ Unless expressly stated otherwise, this message is... {{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From david.barron at said-business-school.oxford.ac.uk  Fri Apr 11 20:11:37 2003
From: david.barron at said-business-school.oxford.ac.uk (david.barron@said-business-school.oxford.ac.uk)
Date: Fri Apr 11 19:11:53 2003
Subject: [Rd] lattice bug? (PR#2765)
Message-ID: <200304111711.h3BHBbpD013024@pubhealth.ku.dk>

I've been experimenting with the lattice graphics in chapter 3 of MASS.  The
code to produce figure 3.14 is:

data(crabs)
library(mva)
lcrabs.pc <- predict(princomp(log(crabs[,4:8])))
crabs.grp <- c("B", "b", "O", "o")[rep(1:4, rep(50,4))]
splom( ~lcrabs.pc[, 1:3], groups = crabs.grp,
   panel = panel.superpose,
   key = list(text = list(c("Blue male", "Blue female",
                           "Orange Male", "Orange female")),
       points = Rows(trellis.par.get("superpose.symbol"), 1:4),
       columns = 4)
  )

This fails with the error: Error in 1:ncol(x) : NA/NaN argument

I traced this to the line in the splom function:

   for (j in 1:ncol(x)) id.na <- id.na | is.na(x[, j])

but the root of the problem actually seems to be earlier, when
latticParseFormula is called.

 form <- if (inherits(formula, "formula"))
        latticeParseFormula(formula, data)
    x <- as.data.frame(form$right)

This seems not to work properly if data=parent.frame().  Should it?
Apologies if this is something known, or if I'm doing something wrong!

I'm using R 1.6.2 under Windows 2000 Pro and lattice Version: 0.7-1 Date:
2003/03/15.

Thanks,
David

===================================================
David Barron
Jesus College
Oxford OX1 3DW
01865 279684

From ripley at stats.ox.ac.uk  Fri Apr 11 19:23:28 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 11 19:23:40 2003
Subject: [Rd] lattice bug? (PR#2765)
In-Reply-To: <200304111711.h3BHBbpD013024@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304111821430.25359-100000@gannet.stats>

Works perfectly with the current lattice -- 0.7-4.  It's already been 
reported and fixed.

On Fri, 11 Apr 2003 david.barron@said-business-school.oxford.ac.uk wrote:

> I've been experimenting with the lattice graphics in chapter 3 of MASS.  The
> code to produce figure 3.14 is:
> 
> data(crabs)
> library(mva)
> lcrabs.pc <- predict(princomp(log(crabs[,4:8])))
> crabs.grp <- c("B", "b", "O", "o")[rep(1:4, rep(50,4))]
> splom( ~lcrabs.pc[, 1:3], groups = crabs.grp,
>    panel = panel.superpose,
>    key = list(text = list(c("Blue male", "Blue female",
>                            "Orange Male", "Orange female")),
>        points = Rows(trellis.par.get("superpose.symbol"), 1:4),
>        columns = 4)
>   )
> 
> This fails with the error: Error in 1:ncol(x) : NA/NaN argument
> 
> I traced this to the line in the splom function:
> 
>    for (j in 1:ncol(x)) id.na <- id.na | is.na(x[, j])
> 
> but the root of the problem actually seems to be earlier, when
> latticParseFormula is called.
> 
>  form <- if (inherits(formula, "formula"))
>         latticeParseFormula(formula, data)
>     x <- as.data.frame(form$right)
> 
> This seems not to work properly if data=parent.frame().  Should it?
> Apologies if this is something known, or if I'm doing something wrong!
> 
> I'm using R 1.6.2 under Windows 2000 Pro and lattice Version: 0.7-1 Date:
> 2003/03/15.
> 
> Thanks,
> David
> 
> ===================================================
> David Barron
> Jesus College
> Oxford OX1 3DW
> 01865 279684
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Michael.Man at pfizer.com  Fri Apr 11 16:23:40 2003
From: Michael.Man at pfizer.com (Man, Michael)
Date: Fri Apr 11 21:24:20 2003
Subject: [Rd] bug in read.table (PR#2764)
Message-ID: <4E2F83D5DEE32C41B4816FE9D634624208C2467E@anagrdexm01.research.aa.wl.com>

Professor Ripley,

Thanks for your help.  The file was indeed generated on MacOS, which was
unknown to me till I checked with the sender.     

Michael

 -----Original Message-----
From: 	Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
Sent:	Friday, April 11, 2003 10:15 AM
To:	Michael.Man@pfizer.com
Cc:	r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject:	Re: [Rd] bug in read.table (PR#2764)

Without the file, how can we do anything about this?  My guess is that
this is a MacOS file, in which case the problem is PR#2469 which is long
solved.  Please try R-patched or a beta of R-1.7.0.

>From the NEWS file in R-patched

BUG FIXES

    o   The fix to PR#2396 broke read.table() on files with CR line
        endings. (PR#2469) Separate problem with this on Carbon Mac
        build fixed as well.

The other workaround is to use files in the native file format ....


BTW, `_' is deprecated, so please don't use it in postings, especially in 
the unreadable way shown here.

On Fri, 11 Apr 2003 Michael.Man@pfizer.com wrote:

> Hi, there might be a bug in read.delim (also read.table) in R.1.6.2.  I
> included the correct input done in R1.6.1 first, then the wrong input in
> R1.6.2.  The discrepancies are highlighted in red.
> 
> Michael Man  
> 
> 
> ####### correct input in R1.6.1 ##########################
> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.1            
> year     2002           
> month    11             
> day      01             
> language R  
> 
> Browse[1]> jk2_read.delim(hd.file,sep="\t")
> Browse[1]> jk2[4:6,]
>   Wells    Drug Time Dose Animal.number Replicate
> 4    A4 Control                       2         a
> 5    A5 Control                       2         b
> 6    A6 Control                       2         c
> 
> 
> ##### bug below ######################
> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.2            
> year     2003           
> month    01             
> day      10             
> language R             
> 
> Browse[1]> jk2_read.delim(hd.file,sep="\t")
> Browse[1]> jk2[4:6,1:6]
>    AWells    Drug Time Dose Animal.number Replicate 
> 4      A4 Control                       2         a   
> 5       5 Control                       2         b   
> 6      A6 Control                       2         c 
> 
> 
> 
> LEGAL NOTICE\ Unless expressly stated otherwise, this message is...
{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


LEGAL NOTICE\ Unless expressly stated otherwise, this message is... {{dropped}}

From ligges at statistik.uni-dortmund.de  Sat Apr 12 20:50:08 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Apr 12 19:50:24 2003
Subject: [Rd] R-1.7.0-beta: in check-all test-IsAs fails on WinNT4.0
Message-ID: <3E9851D0.1050501@statistik.uni-dortmund.de>

Todays R-1.7.0-beta (see below) compiles fine on, but it doesn't pass
  make check-all
on WinNT4.0, SP6.

Looking closer, test-IsAs fails:

D:\uwe-ns\R-1.7.0\tests>make -f Makefile.win test-IsAs
running tests of consistency of as/is.*
make[1]: Entering directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
creating 'isas-tests.R'
make[1]: *** [isas-tests.R] Error 253
make[1]: Leaving directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
make: *** [test-IsAs] Error 2

Rterm crashes with a "stack overflow".

The strange thing: I can run the test manually without any problems (I 
tried to invoke rterm the same way as in the makefiles -- well, 
apparently I just *tried*)!
It looks like the file "isas-tests.R" which should be sink()ed in 
"isas-tests.Rin" won't be created. Any ideas?

Uwe Ligges

          _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status   Under development (unstable)
major    1
minor    7.0
year     2003
month    04
day      12
language R

From robert_dodier at yahoo.com  Mon Apr 14 05:56:03 2003
From: robert_dodier at yahoo.com (robert_dodier@yahoo.com)
Date: Mon Apr 14 08:56:00 2003
Subject: [Rd] ctl-D, cancel, ctl-D yields seg fault (PR#2773)
Message-ID: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>

Full_Name: Robert Dodier
Version: 1.2.0  (2000-12-15)
OS: RH Linux 7.1
Submission from: (NULL) (128.138.88.127)


If I start up R and just do:

> <ctl-D>
Save workspace image? [y/n/c]: c
> <ctl-D>

then R segfaults.

"gdb `locate R.bin` core" reports:
(gdb) where
#0  0x080a2282 in Rf_mainloop () at eval.c:41

However, if I use q() then there is no segfault:
> q()
Save workspace image? [y/n/c]: c
> q()
Save workspace image? [y/n/c]: n

and it exits without further ado.

Also, <ctl-D> followed by 'y' or 'n' exits without segfault.

I searched the bug archive but I didn't find this
bug, so here it is. 

Regards,
Robert Dodier
robert_dodier@yahoo.com

From ripley at stats.ox.ac.uk  Mon Apr 14 09:32:10 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Apr 14 09:32:26 2003
Subject: [Rd] aliased coefficients in summary.glm
In-Reply-To: <5.1.0.14.2.20030410171330.01e816b8@mcmail.cis.mcmaster.ca>
Message-ID: <Pine.LNX.4.44.0304140829510.7075-100000@gannet.stats>

John,

This has only just arrived.  It is not a good time to be raising such 
issues (1.7.0 is frozen, so this would have to be for 1.8.0).  Could you 
send it as a wishlist item to R-bugs?  Otherwise it is very likely to be 
forgotten about.

Brian

On Thu, 10 Apr 2003, John Fox wrote:

> Dear list members,
> 
> I was reminded of what I see as a problem with summary.glm this week when 
> some of my students fell into a trap in a homework exercise, defining a 
> logit model in which coefficients were aliased. When this happens in lm, 
> summary.lm prints a message ["Coefficients: (1 not defined because of 
> singularities)"], but summary.glm is silent. In both instances, the print 
> methods show aliased coefficients as NA.
> 
> At minimum, I think that it would be desirable for summary.glm to indicate 
> that there's a problem. In addition, I would prefer that both summary.glm 
> and summary.lm include aliased coefficients (as NA) in the table of 
> coefficients.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From B.Rowlingson at lancaster.ac.uk  Mon Apr 14 11:21:37 2003
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon Apr 14 11:21:47 2003
Subject: [Rd] ctl-D, cancel, ctl-D yields seg fault (PR#2773)
In-Reply-To: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>
References: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>
Message-ID: <3E9A7DA1.5050406@lancaster.ac.uk>

robert_dodier@yahoo.com wrote:
> Full_Name: Robert Dodier
> Version: 1.2.0  (2000-12-15)
> OS: RH Linux 7.1
> Submission from: (NULL) (128.138.88.127)
> 
> 
> If I start up R and just do:
> 
> 
>><ctl-D>
> 
> Save workspace image? [y/n/c]: c
> 
>><ctl-D>
> 
> 
> then R segfaults.

  Then dont do that.

  Its like the old joke: Man goes to doctor and waves his arm in a funny 
way and says "It hurts when I do that", and the doctor says "then dont 
do that".

  More seriously, I dont think bugs in version 1.2.0 are a priority - 
and even my ancient 1.6.0 doesn't crash like that. If it really bothers 
you, upgrade, since there are probably zillions of other more serious 
problems in 1.2.0 that will bite you.

Baz

From ripley at stats.ox.ac.uk  Mon Apr 14 11:22:17 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Apr 14 11:22:30 2003
Subject: [Rd] ctl-D, cancel, ctl-D yields seg fault (PR#2773)
In-Reply-To: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304141018410.8431-100000@gannet.stats>

On Mon, 14 Apr 2003 robert_dodier@yahoo.com wrote:

> Full_Name: Robert Dodier
> Version: 1.2.0  (2000-12-15)

That's over two years old!

> OS: RH Linux 7.1
> Submission from: (NULL) (128.138.88.127)
> 
> 
> If I start up R and just do:
> 
> > <ctl-D>
> Save workspace image? [y/n/c]: c
> > <ctl-D>
> 
> then R segfaults.
> 
> "gdb `locate R.bin` core" reports:
> (gdb) where
> #0  0x080a2282 in Rf_mainloop () at eval.c:41
> 
> However, if I use q() then there is no segfault:
> > q()
> Save workspace image? [y/n/c]: c
> > q()
> Save workspace image? [y/n/c]: n
> 
> and it exits without further ado.
> 
> Also, <ctl-D> followed by 'y' or 'n' exits without segfault.
> 
> I searched the bug archive but I didn't find this
> bug, so here it is. 

It does not happen in current versions of R, at least on RedHat 8.0.
Note that as you are (I presume) using readline, one would need to
test on the (long superceded) RH7.1 to be sure.

Please update your R and try again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Mon Apr 14 12:41:54 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Apr 14 11:40:39 2003
Subject: [Rd] ctl-D, cancel, ctl-D yields seg fault (PR#2773)
In-Reply-To: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>
References: <200304140256.h3E2u3pD022236@pubhealth.ku.dk>
Message-ID: <x2d6jp4dr1.fsf@biostat.ku.dk>

robert_dodier@yahoo.com writes:

> Full_Name: Robert Dodier
> Version: 1.2.0  (2000-12-15)
> OS: RH Linux 7.1
> Submission from: (NULL) (128.138.88.127)

I know we've been having mailing list delays, but this looks a bit
extreme. R-1.2.0 is almost two and a half years old! 

It's not happening with 1.6.2 (although it is still possible to tease
the system enough that you exit R with the terminal in noecho mode).
 
> 
> If I start up R and just do:
> 
> > <ctl-D>
> Save workspace image? [y/n/c]: c
> > <ctl-D>
> 
> then R segfaults.

> Also, <ctl-D> followed by 'y' or 'n' exits without segfault.
> 
> I searched the bug archive but I didn't find this
> bug, so here it is. 

Sometimes we do fix bugs without someone reporting them first... It
should have been in the NEWS file though, but I can't find it there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From allsi at eau.ee  Mon Apr 14 15:37:04 2003
From: allsi at eau.ee (Allan Sims)
Date: Mon Apr 14 12:37:49 2003
Subject: [Rd] compile error RH9 & R162
Message-ID: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>

Hi,

I tried to compile source because for RH9.0 doesn't exist binary. During
compiling I got error:
***********************
make[3]: Entering directory `/home/allans/R-1.6.2/src/library/methods'
dumping R code in package 'methods'
Error in eval(expr, envir, enclos) : couldn't find function "character"
Execution halted
make[3]: *** [../../../library/methods/R/all.rda] Error 1
***********************
What I have to do to solve this?

Allan Sims
allsi@eau.ee

From p.dalgaard at biostat.ku.dk  Mon Apr 14 14:45:04 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Apr 14 13:43:44 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>
References: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>
Message-ID: <x24r51481r.fsf@biostat.ku.dk>

Allan Sims <allsi@eau.ee> writes:

> Hi,
> 
> I tried to compile source because for RH9.0 doesn't exist binary. During
> compiling I got error:
> ***********************
> make[3]: Entering directory `/home/allans/R-1.6.2/src/library/methods'
> dumping R code in package 'methods'
> Error in eval(expr, envir, enclos) : couldn't find function "character"
> Execution halted
> make[3]: *** [../../../library/methods/R/all.rda] Error 1
> ***********************
> What I have to do to solve this?

You might try the RH8 RPMs. Please tell us if they don't work, but I
see no obvious reason for them not to. 

I haven't seen that particular issue before, but some of us wasted a
good bit of last weekend tracking down another rather nasty issue with
the RH9 version of gcc. Have a look at

http://maths.newcastle.edu.au/~rking/R/help/03a/3769.html

and its neighbours.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jfox at mcmaster.ca  Mon Apr 14 14:59:26 2003
From: jfox at mcmaster.ca (jfox@mcmaster.ca)
Date: Mon Apr 14 13:59:42 2003
Subject: [Rd] suggested changes to summary.glm and summary.lm (PR#2776)
Message-ID: <200304141159.h3EBxQpD026575@pubhealth.ku.dk>

Something for the wish list (not really a bug):

I was reminded of what I see as a problem with summary.glm last week when 
some of my students fell into a trap in a homework exercise, defining a 
logit model in which coefficients were aliased. When this happens in lm, 
summary.lm prints a message ["Coefficients: (1 not defined because of 
singularities)"], but summary.glm is silent. In both instances, the print 
methods show aliased coefficients as NA.

At minimum, I think that it would be desirable for summary.glm to indicate 
that there's a problem. In addition, I would prefer that both summary.glm 
and summary.lm include aliased coefficients (as NA) in the table of 
coefficients.

Thanks for your consideration,
  John
-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

From allsi at eau.ee  Mon Apr 14 17:24:32 2003
From: allsi at eau.ee (Allan Sims)
Date: Mon Apr 14 14:25:14 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: <x24r51481r.fsf@biostat.ku.dk>
References: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>
	<x24r51481r.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.52.0304141618120.61408@ph.eau.ee>

Hi,

I tried to install RPM for RH80 to computer with RH90. In download page
some short help with some requirement. I fill those requirement and still
I have problem. Have someone experience with that:
************************************************'
[root@mekor4 allans]# locate libtcl
/usr/lib/libtcl.so
/usr/lib/libtcl8.3.so
/usr/lib/libtclstub8.3.a
[root@mekor4 allans]# rpm -i R-1.6.2-1.i386.rpm
warning: R-1.6.2-1.i386.rpm: V3 DSA signature: NOKEY, key ID 97d3544e
error: Failed dependencies:
        libtcl.so.0 is needed by R-1.6.2-1
        libtk.so.0 is needed by R-1.6.2-1
*****************************************

Allan Sims
allsi@eau.ee

On Mon, 14 Apr 2003, Peter Dalgaard BSA wrote:

> Allan Sims <allsi@eau.ee> writes:
>
> > Hi,
> >
> > I tried to compile source because for RH9.0 doesn't exist binary. During
> > compiling I got error:
> > ***********************
> > make[3]: Entering directory `/home/allans/R-1.6.2/src/library/methods'
> > dumping R code in package 'methods'
> > Error in eval(expr, envir, enclos) : couldn't find function "character"
> > Execution halted
> > make[3]: *** [../../../library/methods/R/all.rda] Error 1
> > ***********************
> > What I have to do to solve this?
>
> You might try the RH8 RPMs. Please tell us if they don't work, but I
> see no obvious reason for them not to.
>
> I haven't seen that particular issue before, but some of us wasted a
> good bit of last weekend tracking down another rather nasty issue with
> the RH9 version of gcc. Have a look at
>
> http://maths.newcastle.edu.au/~rking/R/help/03a/3769.html
>
> and its neighbours.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

From p.dalgaard at biostat.ku.dk  Mon Apr 14 15:48:05 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Apr 14 14:46:41 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: <Pine.A41.4.52.0304141618120.61408@ph.eau.ee>
References: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>
	<x24r51481r.fsf@biostat.ku.dk>
	<Pine.A41.4.52.0304141618120.61408@ph.eau.ee>
Message-ID: <x2r8852qka.fsf@biostat.ku.dk>

Allan Sims <allsi@eau.ee> writes:

> Hi,
> 
> I tried to install RPM for RH80 to computer with RH90. In download page
> some short help with some requirement. I fill those requirement and still
> I have problem. Have someone experience with that:
> ************************************************'
> [root@mekor4 allans]# locate libtcl
> /usr/lib/libtcl.so
> /usr/lib/libtcl8.3.so
> /usr/lib/libtclstub8.3.a
> [root@mekor4 allans]# rpm -i R-1.6.2-1.i386.rpm
> warning: R-1.6.2-1.i386.rpm: V3 DSA signature: NOKEY, key ID 97d3544e
> error: Failed dependencies:
>         libtcl.so.0 is needed by R-1.6.2-1
>         libtk.so.0 is needed by R-1.6.2-1
> *****************************************

Hmmm.... The RH8.0 situation is

s -l /usr/lib/libtcl*
lrwxrwxrwx    1 root     root           11 Jan 23 10:18 /usr/lib/libtcl.so -> libtcl.so.0
-r-xr-xr-x    1 root     root       605121 Aug 20  2002 /usr/lib/libtcl.so.0
lrwxrwxrwx    1 root     root           11 Jan 23 10:18 /usr/lib/libtcl8.3.so -> libtcl.so.0

and libtk similarly. That looks a bit weird, so I can't really blame
RH for fixing it up, but I'd suspect that all you need to do is to

ln -s /usr/lib/libtcl8.3.so usr/lib/libtcl.so.0
ln -s /usr/lib/libtk8.3.so usr/lib/libtk.so.0

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tlumley at u.washington.edu  Mon Apr 14 08:05:44 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon Apr 14 16:06:02 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: <Pine.A41.4.52.0304141434330.56156@ph.eau.ee>
Message-ID: <Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>

On Mon, 14 Apr 2003, Allan Sims wrote:

> Hi,
>
> I tried to compile source because for RH9.0 doesn't exist binary.

I don't know about that error, but R 1.6.2 has a problem with the version
of gcc used on RH9 -- it ends up being unable to distinguish NA and NaN.
You should either try the development snapshot or wait for R1.7.0 next
week.

	-thomas

From plummer at iarc.fr  Tue Apr 15 11:53:40 2003
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue Apr 15 10:53:34 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: 
	<Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>
References: 
	<Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>
Message-ID: <1050396820.12378.1.camel@xena>

On Mon, 2003-04-14 at 16:05, Thomas Lumley wrote:
> On Mon, 14 Apr 2003, Allan Sims wrote:
> 
> > Hi,
> >
> > I tried to compile source because for RH9.0 doesn't exist binary.
> 
> I don't know about that error, but R 1.6.2 has a problem with the version
> of gcc used on RH9 -- it ends up being unable to distinguish NA and NaN.
> You should either try the development snapshot or wait for R1.7.0 next
> week.
> 
> 	-thomas

??? I thought it was tomorrow. Did I miss something? The imminent
release of R 1.7.0 is the reason why I haven't created an RPM for RH 9.

Martyn

From plummer at iarc.fr  Tue Apr 15 11:53:40 2003
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue Apr 15 10:53:48 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: 
	<Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>
References: 
	<Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>
Message-ID: <1050396820.12378.1.camel@xena>

On Mon, 2003-04-14 at 16:05, Thomas Lumley wrote:
> On Mon, 14 Apr 2003, Allan Sims wrote:
> 
> > Hi,
> >
> > I tried to compile source because for RH9.0 doesn't exist binary.
> 
> I don't know about that error, but R 1.6.2 has a problem with the version
> of gcc used on RH9 -- it ends up being unable to distinguish NA and NaN.
> You should either try the development snapshot or wait for R1.7.0 next
> week.
> 
> 	-thomas

??? I thought it was tomorrow. Did I miss something? The imminent
release of R 1.7.0 is the reason why I haven't created an RPM for RH 9.

Martyn

From p.dalgaard at biostat.ku.dk  Tue Apr 15 12:04:14 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 15 11:02:45 2003
Subject: [Rd] compile error RH9 & R162
In-Reply-To: <1050396820.12378.1.camel@xena>
References: <Pine.A41.4.44.0304140704050.226560-100000@homer06.u.washington.edu>
	<1050396820.12378.1.camel@xena>
Message-ID: <x2of38169d.fsf@biostat.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> > You should either try the development snapshot or wait for R1.7.0 next
> > week.
> > 
> > 	-thomas
> 
> ??? I thought it was tomorrow. Did I miss something? The imminent
> release of R 1.7.0 is the reason why I haven't created an RPM for RH 9.

It *is* tomorrow (if the CVS server comes back on line!). Thomas is
probably just allowing a little time for platform maintainers to roll
out the binaries.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pgilbert at bank-banque-canada.ca  Tue Apr 15 09:38:42 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Tue Apr 15 14:39:48 2003
Subject: [Rd] cran.us.r-project.org off
Message-ID: <3E9BFD52.6AE026D5@bank-banque-canada.ca>

cran.us.r-project.org seems to be off line this morning.

Paul Gilbert

From ripley at stats.ox.ac.uk  Tue Apr 15 14:48:52 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 15 14:49:03 2003
Subject: [Rd] cran.us.r-project.org off
In-Reply-To: <3E9BFD52.6AE026D5@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0304151348050.16629-100000@gannet.stats>

Yes, and it was offline part of the weekend too.  Problematic for the 
release tomorrow if this persists.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Tue Apr 15 15:59:10 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 15 14:57:40 2003
Subject: [Rd] cran.us.r-project.org off
In-Reply-To: <3E9BFD52.6AE026D5@bank-banque-canada.ca>
References: <3E9BFD52.6AE026D5@bank-banque-canada.ca>
Message-ID: <x2brz729y9.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> cran.us.r-project.org seems to be off line this morning.

...and with it the R CVS archive and the developers web pages.
Hopefully, someone in Wisconsin has been alerted to the fact by now.
Otherwise, I fear we'll have to postpone the planned release tomorrow.

Notice that this machine is also the physical "r-project.org"
redirecting mail to "lists.r-project.org" in Zurich. So mail adressed
to (e.g.) r-help@r-project.org is not going through, please use
...@lists.r-project.org or ...@stat.math.ethz.ch .


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tlumley at u.washington.edu  Tue Apr 15 07:54:12 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Apr 15 15:55:10 2003
Subject: [Rd] cran.us.r-project.org off
In-Reply-To: <x2brz729y9.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.44.0304150651130.35162-100000@homer34.u.washington.edu>

On 15 Apr 2003, Peter Dalgaard BSA wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
>
> > cran.us.r-project.org seems to be off line this morning.
>
> ...and with it the R CVS archive and the developers web pages.
> Hopefully, someone in Wisconsin has been alerted to the fact by now.
> Otherwise, I fear we'll have to postpone the planned release tomorrow.

I called Doug Bates by phone and he had already rebooted things.  I can
now get cvs.  I don't know if everything else works.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From bates at stat.wisc.edu  Tue Apr 15 10:07:52 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Tue Apr 15 16:08:40 2003
Subject: [R] Re: [Rd] cran.us.r-project.org off
In-Reply-To: <x2brz729y9.fsf@biostat.ku.dk>
References: <3E9BFD52.6AE026D5@bank-banque-canada.ca>
	<x2brz729y9.fsf@biostat.ku.dk>
Message-ID: <6rllybkg5j.fsf@bates4.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > cran.us.r-project.org seems to be off line this morning.
> 
> ...and with it the R CVS archive and the developers web pages.
> Hopefully, someone in Wisconsin has been alerted to the fact by now.
> Otherwise, I fear we'll have to postpone the planned release tomorrow.
> 
> Notice that this machine is also the physical "r-project.org"
> redirecting mail to "lists.r-project.org" in Zurich. So mail adressed
> to (e.g.) r-help@r-project.org is not going through, please use
> ...@lists.r-project.org or ...@stat.math.ethz.ch .

Should be back now.

From p.dalgaard at biostat.ku.dk  Tue Apr 15 17:16:45 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 15 16:15:55 2003
Subject: [Rd] cran.us.r-project.org off
In-Reply-To: <Pine.A41.4.44.0304150651130.35162-100000@homer34.u.washington.edu>
References: <Pine.A41.4.44.0304150651130.35162-100000@homer34.u.washington.edu>
Message-ID: <x24r4z26cy.fsf@biostat.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On 15 Apr 2003, Peter Dalgaard BSA wrote:
> 
> > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> >
> > > cran.us.r-project.org seems to be off line this morning.
> >
> > ...and with it the R CVS archive and the developers web pages.
> > Hopefully, someone in Wisconsin has been alerted to the fact by now.
> > Otherwise, I fear we'll have to postpone the planned release tomorrow.
> 
> I called Doug Bates by phone and he had already rebooted things.  I can
> now get cvs.  I don't know if everything else works.

The web access was down for a while, other things seem to be OK. The
daily snapshot got built with a couple of glitches (a CVS conflict
over the FAQ, and apparently it couldn't fetch the Recommended
packages because of a name resolution failure).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pgilbert at bank-banque-canada.ca  Tue Apr 15 11:38:57 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Tue Apr 15 16:41:04 2003
Subject: [Rd] cran.us.r-project.org off
References: 
	<Pine.A41.4.44.0304150651130.35162-100000@homer34.u.washington.edu>
	<x24r4z26cy.fsf@biostat.ku.dk>
Message-ID: <3E9C1981.436AB114@bank-banque-canada.ca>

Peter Dalgaard BSA wrote:
> 
> Thomas Lumley <tlumley@u.washington.edu> writes:
> 
> > On 15 Apr 2003, Peter Dalgaard BSA wrote:
> >
> > > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> > >
> > > > cran.us.r-project.org seems to be off line this morning.
> > >
> > > ...and with it the R CVS archive and the developers web pages.
> > > Hopefully, someone in Wisconsin has been alerted to the fact by now.
> > > Otherwise, I fear we'll have to postpone the planned release tomorrow.
> >
> > I called Doug Bates by phone and he had already rebooted things.  I can
> > now get cvs.  I don't know if everything else works.
> 
> The web access was down for a while, other things seem to be OK. 

Web access seems to be ok now.

>The
> daily snapshot got built with a couple of glitches (a CVS conflict
> over the FAQ, and apparently it couldn't fetch the Recommended
> packages because of a name resolution failure).
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From veraf at stat.sc.edu  Tue Apr 15 22:33:50 2003
From: veraf at stat.sc.edu (veraf@stat.sc.edu)
Date: Tue Apr 15 21:34:08 2003
Subject: [Rd] Labeling in lm() (PR#2785)
Message-ID: <200304151933.h3FJXopD007746@pubhealth.ku.dk>

Full_Name: Francisco Vera
Version: 1.6.2
OS: Windows XP
Submission from: (NULL) (66.20.153.135)


When I run the following code:

m1<-lm(y~A*B)
m2<-lm(y~A/B)
anova(m1)
anova(m2)

I obtain the results I want from both, the cross classified and the nested
model, except for the labeling. The terms for m1 are A, B and A:B (good); the
terms for m2 are A and A:B (wrong). I would expect for terms in m2 to be A and
B%in%A. The same mistake happens if I use the formula "y~A+B%in%A" instead of
"y~A/B". The values for the term A:B in m2 are correct, they correspond to
B%in%A and are different from A:B of m1. The only problem is the labeling.

From p.dalgaard at biostat.ku.dk  Tue Apr 15 23:09:11 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 15 22:07:44 2003
Subject: [Rd] Labeling in lm() (PR#2785)
In-Reply-To: <200304151933.h3FJXopD007746@pubhealth.ku.dk>
References: <200304151933.h3FJXopD007746@pubhealth.ku.dk>
Message-ID: <x2n0irzfo8.fsf@biostat.ku.dk>

veraf@stat.sc.edu writes:

> Full_Name: Francisco Vera
> Version: 1.6.2
> OS: Windows XP
> Submission from: (NULL) (66.20.153.135)
> 
> 
> When I run the following code:
> 
> m1<-lm(y~A*B)
> m2<-lm(y~A/B)
> anova(m1)
> anova(m2)
> 
> I obtain the results I want from both, the cross classified and the nested
> model, except for the labeling. The terms for m1 are A, B and A:B (good); the
> terms for m2 are A and A:B (wrong). I would expect for terms in m2 to be A and
> B%in%A. The same mistake happens if I use the formula "y~A+B%in%A" instead of
> "y~A/B". The values for the term A:B in m2 are correct, they correspond to
> B%in%A and are different from A:B of m1. The only problem is the labeling.

This is not a bug. The colon operator is equivalent to %in% (b%in%a is
the same as a:b), and in both cases it describes the cross-terms
effect after removal of the specified main effects. In the nested
case, you just don't remove main efects of B because that doesn't make
sense. Just because S-PLUS uses a different labeling it doesn't mean
that R's is wrong.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From willy.valdivia at ndsu.nodak.edu  Wed Apr 16 02:08:10 2003
From: willy.valdivia at ndsu.nodak.edu (Willy Valdivia Granda)
Date: Wed Apr 16 08:08:58 2003
Subject: [Rd] third virtual conference on genomics and bioinformatics
In-Reply-To: <200304151002.h3FA1iAS020250@hypatia.math.ethz.ch>
Message-ID: <AJEGLGKNDNHFFJLPNEIOEEJDCJAA.willy.valdivia@ndsu.nodak.edu>

Hello All

The third virtual conference on genomics and bioinformatics will host by
North Dakota State University September 16-19, 2003
More details http://www.ndsu.edu/virtual-genomics/conference_2003.htm
Call for papers and 2002 accepted papers
http://www.ndsu.edu/virtual-genomics/papers_2003.htm

Third Virtual Conference on Genomics and Bioinformatics: September 16-19,
2003

Advances in sequence analysis, transcriptional profiling, protein structural
elucidation and well other genomic techniques are producing an overwhelming
accumulation of data and the shift in the way biological research is
conducted. As new disciplines are integrated, the "Virtual Conferences on
Genomics and Bioinformatics" was develop as a way to provide an advanced
collaborative environment for the exchange and discussion of information
related to innovations of the post-genomic era. Since 2001 the Virtual
Conferences is featuring high profile researchers and educators working
actively in the development of new applications to understand complex
biological systems. Without registration fees, and using the Access Grid
technology and live video streaming the 2002 Virtual Conference is broadcast
simultaneously to more 2000 researchers in 40 countries and 33 states within
the US.

The main goals of the Virtual Conference in Genomics and Bioinformatics:

- Transcend geographical and economical barriers to the exchange of ideas
that facilitates the interaction and collaboration  among scientists and
educators around the world.
- Address the benefits and limitations of the newest developments in
post-genomic technologies.
- Explore the social and ethical implications of genomic and bioinformatic
research.
- Establish new ways to introduce high school community about today's
multidisciplinary science.

2003 VCGB Topics and Speakers (More speakers TBA)

Computational Chemistry and Structural Genomics
Kim Baldrigde, San Diego Supercomputer Center. USA
Jim Briggs, University of Houston. USA
Jan Jensen, University of Iowa. USA
Nathan Baker, Washington University in St. Louis School of Medicine. USA
Julie Mitchell, San Diego Supercomputer Center/UCSD. USA

Complex Biological Systems
George M. Church, Harvard Medical School & MIT Health Sciences & Technology.
USA
Eberhard Voit, Medical University of South Carolina. USA
Yaneer Bar-Yam, New England Complex Systems Institute. USA
Zoltan N. Oltvai, Northwestern University. USA.
Andreas Wagner, University of New Mexico. USA
Deanne Taylor. Serono Reproductive Biology. USA
Toni Kazic, University of Missouri Columbia. USA

RNA-interference
Michael T. McManus, Center for Cancer Research. Massachusetts Institute of
Technology, USA

Genomics of Infectious Diseases
Larry Simpson Howard Hughes Medical Institute/UCLA. USA
Jose Stoute, US Army Medical Research Command. USA
John H Adams, Center for Tropical Disease Research & Training. University of
Notre Dame, USA

Bioinformatics
Elia Stupka, Temasek Life Sciences Laboratory. Singapore
Mark Wilkinson, Illuminae Media, Canada
Akihiko Konagaya, RIKEN Genomic Sciences Center, Japan
David Sankoff, Department of Mathematics and Statistics. University of
Ottawa. Canada

Transcriptional Analysis
Bruce Aronow, Cincinnati Childrens Hospital Medical Center. USA

Bioethics and Intellectual Property Rights Protection
Dennis Fernandez, Fernandez and Associates LLP. USA

From ligges at statistik.uni-dortmund.de  Wed Apr 16 10:29:16 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Apr 16 09:29:26 2003
Subject: [Rd] R-1.7.0-beta: in check-all test-IsAs fails on WinNT4.0
In-Reply-To: <3E9851D0.1050501@statistik.uni-dortmund.de>
References: <3E9851D0.1050501@statistik.uni-dortmund.de>
Message-ID: <3E9D064C.8080202@statistik.uni-dortmund.de>

Uwe Ligges wrote:
> Todays R-1.7.0-beta (see below) compiles fine on, but it doesn't pass
>  make check-all
> on WinNT4.0, SP6.
> 
> Looking closer, test-IsAs fails:
> 
> D:\uwe-ns\R-1.7.0\tests>make -f Makefile.win test-IsAs
> running tests of consistency of as/is.*
> make[1]: Entering directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
> creating 'isas-tests.R'
> make[1]: *** [isas-tests.R] Error 253
> make[1]: Leaving directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
> make: *** [test-IsAs] Error 2
> 
> Rterm crashes with a "stack overflow".
> 
> The strange thing: I can run the test manually without any problems (I 
> tried to invoke rterm the same way as in the makefiles -- well, 
> apparently I just *tried*)!


Yep. I did it again (and hopefully correct) and in the following case 
Rterm.exe crashes with a stack overflow:

D:\uwe-ns\R-1.7.0\tests>d:\uwe-ns\r-1.7.0\bin\rterm --vanilla --slave 
LC_ALL=C SRCDIR=. < isas-tests.Rin

which is the way R is called in the Makefile for test-IsAs, AFAICS.

I know, it's much too late for this report, but in fact I was too busy 
with an S course during the last 7 days to look closer. Sorry.

Uwe Ligges


> It looks like the file "isas-tests.R" which should be sink()ed in 
> "isas-tests.Rin" won't be created. Any ideas?
> 
> Uwe Ligges
> 
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status   Under development (unstable)
> major    1
> minor    7.0
> year     2003
> month    04
> day      12
> language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Wed Apr 16 12:39:46 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Apr 16 11:39:52 2003
Subject: [Rd] R-1.7.0-beta: in check-all test-IsAs fails on WinNT4.0
In-Reply-To: <3E9D064C.8080202@statistik.uni-dortmund.de>
References: <3E9851D0.1050501@statistik.uni-dortmund.de>
	<3E9D064C.8080202@statistik.uni-dortmund.de>
Message-ID: <3E9D24E2.8040700@statistik.uni-dortmund.de>

Uwe Ligges wrote:
> Uwe Ligges wrote:
> 
>> Todays R-1.7.0-beta (see below) compiles fine on, but it doesn't pass
>>  make check-all
>> on WinNT4.0, SP6.
>>
>> Looking closer, test-IsAs fails:
>>
>> D:\uwe-ns\R-1.7.0\tests>make -f Makefile.win test-IsAs
>> running tests of consistency of as/is.*
>> make[1]: Entering directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
>> creating 'isas-tests.R'
>> make[1]: *** [isas-tests.R] Error 253
>> make[1]: Leaving directory `/cygdrive/d/uwe-ns/R-1.7.0/tests'
>> make: *** [test-IsAs] Error 2
>>
>> Rterm crashes with a "stack overflow".
>>
>> The strange thing: I can run the test manually without any problems (I 
>> tried to invoke rterm the same way as in the makefiles -- well, 
>> apparently I just *tried*)!
> 
> 
> 
> Yep. I did it again (and hopefully correct) and in the following case 
> Rterm.exe crashes with a stack overflow:
> 
> D:\uwe-ns\R-1.7.0\tests>d:\uwe-ns\r-1.7.0\bin\rterm --vanilla --slave 
> LC_ALL=C SRCDIR=. < isas-tests.Rin
> 
> which is the way R is called in the Makefile for test-IsAs, AFAICS.
> 
> I know, it's much too late for this report, but in fact I was too busy 
> with an S course during the last 7 days to look closer. Sorry.


Sorry for wasting bandwidth:
The problem already seems to be resolved in yesterdays beta!


But there is still another one in .../tests/Makefile.win:

[...]
test-Packages:
     @echo
     @echo "---- checking base packages ----"
     @for p in $(R_PKGS_BASE); do \
       echo ; \
       echo "* checking package '$${p}'"; \
       rcmd check ../src/library/$${p} || echo; \
     done
[...]

In the last but one line of the given code, rcmd won't be found if the 
path is not specified! Instead that line should read:

$(RHOME)/bin/rcmd check ../src/library/$${p} || echo; \

Uwe Ligges

From pgilbert at bank-banque-canada.ca  Wed Apr 16 15:48:16 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed Apr 16 20:50:17 2003
Subject: [Rd] vignette segfault bt
Message-ID: <3E9DA570.CA1CB3A9@bank-banque-canada.ca>

The released version of R-1.7.0 builds and checks fine on Mandrake 9.1, but I am
still having trouble with my vignettes and sweave causing segfaults.
Unfortunately the segfaults with the release version are happening in tests
where I have much more difficulty trapping them. I did also build
R-1.7.0beta_2003-04-16 this morning, and for that the segfaults occurred in a
test which is much easier for me to reproduce. Below are gdb bt outputs, the
first without gctorture and the second with it. (I think they are the same.)

Paul
_____

GNU gdb 5.3-22mdk (Mandrake Linux)
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for
details.
This GDB was configured as "i586-mandrake-linux-gnu"...
(gdb) run
Starting program:
/home/paul/dse/src/pac/R-test/R-1.7.0beta_2003.04.16/bin/R.bin  
 
R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-16)
 
R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.
 
R is a collaborative project with many contributors.
Type `contributors()' for more information.
 
Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.
 
>  library(tools)
> checkVignettes(dir='/home/paul/dse/src/pac/monitor', workdir = 'cur',
keepfiles=TRUE)
 
Program received signal SIGILL, Illegal instruction.
0x080786ff in file_fgetc (con=0xbfffc830) at connections.c:289
289             this->wpos = ftell(this->fp);
(gdb) bt
#0  0x080786ff in file_fgetc (con=0xbfffc830) at connections.c:289
#1  0x080a9ce1 in con_getc () at /ext/R/cvs/R-devel/src/main/gram.y:1130
#2  0x080a881b in xxgetc () at /ext/R/cvs/R-devel/src/main/gram.y:287
#3  0x080aa947 in SymbolValue (c=255)
    at /ext/R/cvs/R-devel/src/main/gram.y:1673
#4  0x080aab01 in token () at /ext/R/cvs/R-devel/src/main/gram.y:1744
#5  0x080aaefa in Rf_yylex () at /ext/R/cvs/R-devel/src/main/gram.y:1886
#6  0x080a87e4 in Rf_yyparse () at
/usr/local/share/bison/bison.simple:595
#7  0x080a98cd in R_Parse1 (status=0x46)
    at /ext/R/cvs/R-devel/src/main/gram.y:948
#8  0x080a9bee in R_Parse (n=-1, status=0xbfffcd68)
    at /ext/R/cvs/R-devel/src/main/gram.y:1083
#9  0x081175d1 in do_parse (call=0x883d674, op=0x8205024,
args=0x8839138,
    env=0x9207e84) at source.c:76
#10 0x080c99e4 in do_internal (call=0x883d5e8, op=0x81fb5e8,
args=0x92088bc,
    env=0x9207e84) at names.c:1056
#11 0x080a3b28 in Rf_eval (e=0x883d5e8, rho=0x9207e84) at eval.c:418
#12 0x080a4f62 in do_begin (call=0x883cdc4, op=0x81fba9c,
args=0x883d5cc,
    rho=0x9207e84) at eval.c:1072
#13 0x080a3b28 in Rf_eval (e=0x883cdc4, rho=0x9207e84) at eval.c:418
#14 0x080a3db2 in Rf_applyClosure (call=0x8954ae0, op=0x883d4ec,
    arglist=0x9207f64, rho=0x9208338, suppliedenv=0x81f65c0) at
eval.c:609
#15 0x080a3937 in Rf_eval (e=0x8954ae0, rho=0x9208338) at eval.c:453
---Type <return> to continue, or q <return> to quit---
#16 0x080a5685 in do_set (call=0x8954a8c, op=0x9208338, args=0x8954aa8,
    rho=0x9208338) at eval.c:1283
#17 0x080a3b28 in Rf_eval (e=0x8954a8c, rho=0x9208338) at eval.c:418
#18 0x080a586b in Rf_evalList (el=0x8954a1c, rho=0x9208338) at
eval.c:1372
#19 0x080a3a50 in Rf_eval (e=0x8954a00, rho=0x9208338) at eval.c:439
#20 0x080a5685 in do_set (call=0x89549ac, op=0x9208338, args=0x89549c8,
    rho=0x9208338) at eval.c:1283
#21 0x080a3b28 in Rf_eval (e=0x89549ac, rho=0x9208338) at eval.c:418
#22 0x080a4f62 in do_begin (call=0x8953ad0, op=0x81fba9c,
args=0x8954990,
    rho=0x9208338) at eval.c:1072
#23 0x080a3b28 in Rf_eval (e=0x8953ad0, rho=0x9208338) at eval.c:418
#24 0x080a3db2 in Rf_applyClosure (call=0x8720f1c, op=0x8958db0,
    arglist=0x9208434, rho=0x8e5d4d0, suppliedenv=0x81f65c0) at
eval.c:609
#25 0x080a3937 in Rf_eval (e=0x8720f1c, rho=0x8e5d4d0) at eval.c:453
#26 0x080a3856 in Rf_eval (e=0x9206f1c, rho=0x9206e90) at eval.c:383
#27 0x080a379f in Rf_eval (e=0x826fc38, rho=0x9206e90) at eval.c:360
#28 0x080a4f62 in do_begin (call=0x87d4f84, op=0x81fba9c,
args=0x87d4edc,
    rho=0x9206e90) at eval.c:1072
#29 0x080a3b28 in Rf_eval (e=0x87d4f84, rho=0x9206e90) at eval.c:418
#30 0x080a3b28 in Rf_eval (e=0x87d5b7c, rho=0x9206e90) at eval.c:418
#31 0x080a4f62 in do_begin (call=0x87d54c4, op=0x81fba9c,
args=0x87d5b60,
    rho=0x9206e90) at eval.c:1072
#32 0x080a3b28 in Rf_eval (e=0x87d54c4, rho=0x9206e90) at eval.c:418
---Type <return> to continue, or q <return> to quit---
#33 0x080a3db2 in Rf_applyClosure (call=0x8721018, op=0x87d5a80,
    arglist=0x9206f00, rho=0x8e5d4d0, suppliedenv=0x81f65c0) at
eval.c:609
#34 0x080a3937 in Rf_eval (e=0x8721018, rho=0x8e5d4d0) at eval.c:453
#35 0x080a5685 in do_set (call=0x8721088, op=0x8e5d4d0, args=0x8721050,
    rho=0x8e5d4d0) at eval.c:1283
#36 0x080a3b28 in Rf_eval (e=0x8721088, rho=0x8e5d4d0) at eval.c:418
#37 0x080a4f62 in do_begin (call=0x87210a4, op=0x81fba9c,
args=0x87210c0,
    rho=0x8e5d4d0) at eval.c:1072
#38 0x080a3b28 in Rf_eval (e=0x87210a4, rho=0x8e5d4d0) at eval.c:418
#39 0x080a495c in do_for (call=0x872089c, op=0x81f5fa0, args=0x8720810,
    rho=0x8e5d4d0) at eval.c:968
#40 0x080a3b28 in Rf_eval (e=0x872089c, rho=0x8e5d4d0) at eval.c:418
#41 0x080a4f62 in do_begin (call=0x8720d40, op=0x81fba9c,
args=0x87208b8,
    rho=0x8e5d4d0) at eval.c:1072
#42 0x080a3b28 in Rf_eval (e=0x8720d40, rho=0x8e5d4d0) at eval.c:418
#43 0x080a3b28 in Rf_eval (e=0x87209b4, rho=0x8e5d4d0) at eval.c:418
#44 0x080a4f62 in do_begin (call=0x8726138, op=0x81fba9c,
args=0x87209d0,
    rho=0x8e5d4d0) at eval.c:1072
#45 0x080a3b28 in Rf_eval (e=0x8726138, rho=0x8e5d4d0) at eval.c:418
#46 0x080a3db2 in Rf_applyClosure (call=0x8e5d690, op=0x86cd684,
    arglist=0x8e5d620, rho=0x820ce3c, suppliedenv=0x81f65c0) at
eval.c:609
#47 0x080a3937 in Rf_eval (e=0x8e5d690, rho=0x820ce3c) at eval.c:453
#48 0x080bd784 in Rf_ReplIteration (rho=0x820ce3c, savestack=1,
browselevel=0,
---Type <return> to continue, or q <return> to quit---
    state=0xbffff050) at main.c:236
#49 0x080bd942 in R_ReplConsole (rho=0x820ce3c, savestack=0,
browselevel=0)
    at main.c:284
#50 0x080be1ff in run_Rmainloop () at main.c:615
#51 0x08124b5c in main (ac=1, av=0xbffff524) at system.c:99
#52 0x400977f7 in __libc_start_main () from /lib/i686/libc.so.6
(gdb)
(gdb)

(gdb) run
The program being debugged has been started already.
Start it from the beginning? (y or n) y
 
Starting program:
/home/paul/dse/src/pac/R-test/R-1.7.0beta_2003.04.16/bin/R.bin  
 
R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-16)
 
R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.
 
R is a collaborative project with many contributors.
Type `contributors()' for more information.
 
Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.
 
>  library(tools)
> gctorture()
> checkVignettes(dir='/home/paul/dse/src/pac/monitor', workdir = 'cur',
keepfiles=TRUE)
 
Program received signal SIGILL, Illegal instruction.
0x080786ff in file_fgetc (con=0xbfffc830) at connections.c:289
289             this->wpos = ftell(this->fp);
(gdb) bt
#0  0x080786ff in file_fgetc (con=0xbfffc830) at connections.c:289
#1  0x080a9ce1 in con_getc () at /ext/R/cvs/R-devel/src/main/gram.y:1130
#2  0x080a881b in xxgetc () at /ext/R/cvs/R-devel/src/main/gram.y:287
#3  0x080aa947 in SymbolValue (c=255)
    at /ext/R/cvs/R-devel/src/main/gram.y:1673
#4  0x080aab01 in token () at /ext/R/cvs/R-devel/src/main/gram.y:1744
#5  0x080aaefa in Rf_yylex () at /ext/R/cvs/R-devel/src/main/gram.y:1886
#6  0x080a87e4 in Rf_yyparse () at
/usr/local/share/bison/bison.simple:595
#7  0x080a98cd in R_Parse1 (status=0x46)
    at /ext/R/cvs/R-devel/src/main/gram.y:948
#8  0x080a9bee in R_Parse (n=-1, status=0xbfffcd68)
    at /ext/R/cvs/R-devel/src/main/gram.y:1083
#9  0x081175d1 in do_parse (call=0x883d674, op=0x8205024,
args=0x8839138,
    env=0x8f403ec) at source.c:76
#10 0x080c99e4 in do_internal (call=0x883d5e8, op=0x81fb5e8,
args=0x8f38248,
    env=0x8f403ec) at names.c:1056
#11 0x080a3b28 in Rf_eval (e=0x883d5e8, rho=0x8f403ec) at eval.c:418
#12 0x080a4f62 in do_begin (call=0x883cdc4, op=0x81fba9c,
args=0x883d5cc,
    rho=0x8f403ec) at eval.c:1072
#13 0x080a3b28 in Rf_eval (e=0x883cdc4, rho=0x8f403ec) at eval.c:418
#14 0x080a3db2 in Rf_applyClosure (call=0x8954ae0, op=0x883d4ec,
    arglist=0x8f38a88, rho=0x8f32c1c, suppliedenv=0x81f65c0) at
eval.c:609
#15 0x080a3937 in Rf_eval (e=0x8954ae0, rho=0x8f32c1c) at eval.c:453
---Type <return> to continue, or q <return> to quit---
#16 0x080a5685 in do_set (call=0x8954a8c, op=0x8f32c1c, args=0x8954aa8,
    rho=0x8f32c1c) at eval.c:1283
#17 0x080a3b28 in Rf_eval (e=0x8954a8c, rho=0x8f32c1c) at eval.c:418
#18 0x080a586b in Rf_evalList (el=0x8954a1c, rho=0x8f32c1c) at
eval.c:1372
#19 0x080a3a50 in Rf_eval (e=0x8954a00, rho=0x8f32c1c) at eval.c:439
#20 0x080a5685 in do_set (call=0x89549ac, op=0x8f32c1c, args=0x89549c8,
    rho=0x8f32c1c) at eval.c:1283
#21 0x080a3b28 in Rf_eval (e=0x89549ac, rho=0x8f32c1c) at eval.c:418
#22 0x080a4f62 in do_begin (call=0x8953ad0, op=0x81fba9c,
args=0x8954990,
    rho=0x8f32c1c) at eval.c:1072
#23 0x080a3b28 in Rf_eval (e=0x8953ad0, rho=0x8f32c1c) at eval.c:418
#24 0x080a3db2 in Rf_applyClosure (call=0x8720f1c, op=0x8958db0,
    arglist=0x8f33e5c, rho=0x8f38794, suppliedenv=0x81f65c0) at
eval.c:609
#25 0x080a3937 in Rf_eval (e=0x8720f1c, rho=0x8f38794) at eval.c:453
#26 0x080a3856 in Rf_eval (e=0x8dbce88, rho=0x8f348a0) at eval.c:383
#27 0x080a379f in Rf_eval (e=0x826fc38, rho=0x8f348a0) at eval.c:360
#28 0x080a4f62 in do_begin (call=0x87d4f84, op=0x81fba9c,
args=0x87d4edc,
    rho=0x8f348a0) at eval.c:1072
#29 0x080a3b28 in Rf_eval (e=0x87d4f84, rho=0x8f348a0) at eval.c:418
#30 0x080a3b28 in Rf_eval (e=0x87d5b7c, rho=0x8f348a0) at eval.c:418
#31 0x080a4f62 in do_begin (call=0x87d54c4, op=0x81fba9c,
args=0x87d5b60,
    rho=0x8f348a0) at eval.c:1072
#32 0x080a3b28 in Rf_eval (e=0x87d54c4, rho=0x8f348a0) at eval.c:418
---Type <return> to continue, or q <return> to quit---
#33 0x080a3db2 in Rf_applyClosure (call=0x8721018, op=0x87d5a80,
    arglist=0x8d178e8, rho=0x8f38794, suppliedenv=0x81f65c0) at
eval.c:609
#34 0x080a3937 in Rf_eval (e=0x8721018, rho=0x8f38794) at eval.c:453
#35 0x080a5685 in do_set (call=0x8721088, op=0x8f38794, args=0x8721050,
    rho=0x8f38794) at eval.c:1283
#36 0x080a3b28 in Rf_eval (e=0x8721088, rho=0x8f38794) at eval.c:418
#37 0x080a4f62 in do_begin (call=0x87210a4, op=0x81fba9c,
args=0x87210c0,
    rho=0x8f38794) at eval.c:1072
#38 0x080a3b28 in Rf_eval (e=0x87210a4, rho=0x8f38794) at eval.c:418
#39 0x080a495c in do_for (call=0x872089c, op=0x81f5fa0, args=0x8720810,
    rho=0x8f38794) at eval.c:968
#40 0x080a3b28 in Rf_eval (e=0x872089c, rho=0x8f38794) at eval.c:418
#41 0x080a4f62 in do_begin (call=0x8720d40, op=0x81fba9c,
args=0x87208b8,
    rho=0x8f38794) at eval.c:1072
#42 0x080a3b28 in Rf_eval (e=0x8720d40, rho=0x8f38794) at eval.c:418
#43 0x080a3b28 in Rf_eval (e=0x87209b4, rho=0x8f38794) at eval.c:418
#44 0x080a4f62 in do_begin (call=0x8726138, op=0x81fba9c,
args=0x87209d0,
    rho=0x8f38794) at eval.c:1072
#45 0x080a3b28 in Rf_eval (e=0x8726138, rho=0x8f38794) at eval.c:418
#46 0x080a3db2 in Rf_applyClosure (call=0x8f387e8, op=0x86cd684,
    arglist=0x8f38858, rho=0x820ce3c, suppliedenv=0x81f65c0) at
eval.c:609
#47 0x080a3937 in Rf_eval (e=0x8f387e8, rho=0x820ce3c) at eval.c:453
#48 0x080bd784 in Rf_ReplIteration (rho=0x820ce3c, savestack=1,
browselevel=0,
---Type <return> to continue, or q <return> to quit---
    state=0xbffff050) at main.c:236
#49 0x080bd942 in R_ReplConsole (rho=0x820ce3c, savestack=0,
browselevel=0)
    at main.c:284
#50 0x080be1ff in run_Rmainloop () at main.c:615
#51 0x08124b5c in main (ac=1, av=0xbffff524) at system.c:99
#52 0x400977f7 in __libc_start_main () from /lib/i686/libc.so.6
(gdb)

From murdoch at stats.uwo.ca  Thu Apr 17 11:36:23 2003
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu Apr 17 16:34:43 2003
Subject: [Rd] Difference between .C and .Fortran (on Windows)
Message-ID: <6let9vodriirivok48gitiednh79lc30dn@4ax.com>

In updating my web page on using non-standard compilers in Windows,
I've been trying to figure out exactly what the differences are
between .C() and .Fortran(), but the code is pretty convoluted. 

Can someone let me know if the following is correct?

There are two differences between .C("foo", ...) and .Fortran("foo").

 1.  .C looks for the symbol "foo" in the external library, whereas
.Fortran("foo", ...) looks for the symbol "foo_" (which is how g77
would export the subroutine "foo").

 2.  .C passes character mode vectors as a pointer to an array of
pointers to the strings, whereas .Fortran just passes a pointer to a
255 character buffer containing the first string.  In both cases the
strings are null-terminated.

Are there other differences?  Are these platform-dependent?

Duncan Murdoch

From tlumley at u.washington.edu  Thu Apr 17 09:06:07 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu Apr 17 17:06:27 2003
Subject: [Rd] Difference between .C and .Fortran (on Windows)
In-Reply-To: <6let9vodriirivok48gitiednh79lc30dn@4ax.com>
Message-ID: <Pine.A41.4.44.0304170805160.227706-100000@homer01.u.washington.edu>

On Thu, 17 Apr 2003, Duncan Murdoch wrote:

>
> Are there other differences?  Are these platform-dependent?
>

You can pass arbitrary language objects to .C  but not to .Fortran.

	-thomas

From ramzi_feg at yahoo.fr  Thu Apr 17 18:10:43 2003
From: ramzi_feg at yahoo.fr (=?iso-8859-1?q?Ramzi=20Feghali?=)
Date: Thu Apr 17 17:10:59 2003
Subject: [Rd] C function and Windows XP
Message-ID: <20030417151043.68763.qmail@web20302.mail.yahoo.com>

Hi dear R developer, we are trying to build DLL files using Microsoft Visua=
l C++. As stated in readme.packages we have to build first the import libra=
ry Rdll.lib with the command: lib(def:R.exp/out:Rdll.lib. However, this com=
mand gives 2155 errors due to unresolved external symbols (ATTRIB to zlibVe=
rsion) in R.exp.Could anybody tell me if something is missing in the comman=
d line or suggest any new operation with MVC++ knowing that in R manuals we=
 could build DLL without using a shared library using the Rcmd SHLIB.Thx a =
lot  Ramzi


---------------------------------


	[[alternate HTML version deleted]]

From ramzi_feg at yahoo.fr  Thu Apr 17 18:41:52 2003
From: ramzi_feg at yahoo.fr (=?iso-8859-1?q?Ramzi=20Feghali?=)
Date: Thu Apr 17 17:42:15 2003
Subject: [Rd] C function and Windows XP
Message-ID: <20030417154152.52966.qmail@web20303.mail.yahoo.com>

Dear R developer,we are trying to build DLL files using Microsoft Visual C+=
+. As stated in readme.packages, we have to build first the import library =
Rdll.lib with the command: lib /def:R.exp /out:Rdll.lib. However, this comm=
and gives 2155 errors due to unresolved external symbols (ATTRIB to zlibver=
sion) in Rexp.Could anybody tell me if something is missing in the command =
line or suggest any new operation knowing that for building DLL files with =
MVC++ we don't use to create a shared library with Rcmd SHLIB like it is wr=
itten in R manuals.Thx a lot Ramzi


---------------------------------


	[[alternate HTML version deleted]]

From ml-it-r-devel at epigenomics.com  Thu Apr 17 21:34:45 2003
From: ml-it-r-devel at epigenomics.com (Matthias Burger)
Date: Thu Apr 17 20:34:58 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
 --with-lapack option
Message-ID: <news2mail-3E9EF3C5.2060803@epigenomics.com>



Greetings,

compiling R 1.7.0 with gcc 3.1.1 on Debain Linux (woody stable) with the 
configure option --with-lapack works but make check fails in test base-R with 
the message

[...]
 > kappa(x1 <- cbind(1,1:10))# 15.71
[1] 15.70590
 > kappa(x1, exact = TRUE)        # 13.68
[1] 13.67903
 > kappa(x2 <- cbind(x1,2:11))# high! [x2 is singular!]
[1] 8.351867e+16
 >
 > hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
 > sv9 <- svd(h9 <- hilbert(9))$ d
 > kappa(h9)# pretty high!
[1] 728289149562
 > kappa(h9, exact = TRUE) == max(sv9) / min(sv9)
Error in La.svd(x, nu, nv, method) : LAPACK routine DGEBRD gave error code -10
Execution halted

As I understand from the configure output (and config.status) R used the 
-L/R_HOME/bin -lRlapack
but this seemed to have built ok.

compiling anew after configure with the same option set but without 
--with-lapack make check yields not error test base-R

Is this a known problem with gcc 3.1.1? Or my configure call configuration?
There are lapack dyn libs installed for my system so I thought configure would 
find those - did I make a mistake in the configure options?

Any hints would be very wellcome.


Just now, for testing reconfigured (after make clean) and recompiled with gcc 
2.95.4 using the --with-lapack option and failed make check again (same error). 
So what could be wrong with the lapack option?


Regards,

    Matthias



details:

export CC=gcc-3.1 CXX=g++-3.1

   ./configure --prefix=/mnt/local/R/R-1.7.0-gcc-3.1.1 --enable-R-profiling=yes 
--enable-R-shlib=yes --with-f77 --with-blas=yes --with-lapack=yes 
--with-readline=yes --with-tcltk=/usr/include/tcl8.3 
--with-tcl-config=/usr/lib/tcl8.3/tclConfig.sh 
--with-tk-config=/usr/lib/tk8.3/tkConfig.sh --enable-shared --with-pic --with-x 
--with-gnome --with-gnome-includes=/usr/include/gnome-1.0 
--with-recommended-packages --with-aqua=yes  --with-libpng=yes 
--with-jpeglib=yes --with-zlib=yes --with-bzlib=yes --with-pcre=yes 
--with-libglade-config=/usr/bin/libglade-config

   configure output:

   R is now configured for i686-pc-linux-gnu

   Source directory:          .
   Installation directory:    /mnt/local/R/R-1.7.0-gcc-3.1.1

   C compiler:                gcc-3.1 -D__NO_MATH_INLINES -mieee-fp -g -O2
   C++ compiler:              g++-3.1 -mieee-fp -g -O2
   Fortran compiler:          g77 -mieee-fp -g -O2

   Interfaces supported:      X11, gnome, tcltk
   External libraries:        readline, BLAS(ATLAS), LAPACK(generic)
   Additional capabilities:   PNG, JPEG, bzip2, PCRE
   Options enabled:           shared library, R profiling

   Recommended packages:      no

-- 
Matthias Burger

Bioinformatics R&D
Epigenomics AG                      www.epigenomics.com
Kleine Pr?sidentenstra?e 1          fax:   +49-30-24345-555
10178 Berlin Germany                phone: +49-30-24345-0

From edd at debian.org  Thu Apr 17 14:48:42 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu Apr 17 20:49:03 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
	--with-lapack option
In-Reply-To: <news2mail-3E9EF3C5.2060803@epigenomics.com>
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
Message-ID: <20030417184842.GA12623@sonny.eddelbuettel.com>

On Thu, Apr 17, 2003 at 08:34:45PM +0200, Matthias Burger wrote:
> compiling R 1.7.0 with gcc 3.1.1 on Debain Linux (woody stable) with the 

As announced last night, R 1.7.0 packages are already available for Debian
unstable (as usual via Debian mirrors) as well as Debian testing and stable
(via CRAN).

> configure option --with-lapack works but make check fails in test base-R 
> with the message
[...]

We did not see that. I would suggest that you grab either the procompiled 
packages from CRAN, or their sources if you want to rebuild locally. The
latter option is appealing as you get both the package management
intgegration and a build off your locally installed libs.

[...]
> Is this a known problem with gcc 3.1.1? Or my configure call configuration?

Possibly. I update my Debian machines (mostly testing) almost daily, and I
never had a gcc 3.1.1 -- but testing now has a choice of 2.95, 3.0, 3.2 and
3.3 all of which can be installed at the same time.  You may have your
reasons to stick with gcc 3.1.1, but you then need to accept that we cannot
solve your issues for you as we work from a different set of released and
supported software.

Hth, Dirk

-- 
Don't drink and derive. Alcohol and algebra don't mix.

From bates at stat.wisc.edu  Thu Apr 17 15:07:19 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Apr 17 21:07:36 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
	--with-lapack option
In-Reply-To: <news2mail-3E9EF3C5.2060803@epigenomics.com>
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
Message-ID: <6ry929eye0.fsf@bates4.stat.wisc.edu>

Matthias Burger <ml-it-r-devel@epigenomics.com> writes:

> Greetings,
> 
> compiling R 1.7.0 with gcc 3.1.1 on Debain Linux (woody stable) with
> the configure option --with-lapack works but make check fails in test
> base-R with the message
> 
> 
> [...]
>  > kappa(x1 <- cbind(1,1:10))# 15.71
> [1] 15.70590
>  > kappa(x1, exact = TRUE)        # 13.68
> [1] 13.67903
>  > kappa(x2 <- cbind(x1,2:11))# high! [x2 is singular!]
> [1] 8.351867e+16
>  >
>  > hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
>  > sv9 <- svd(h9 <- hilbert(9))$ d
>  > kappa(h9)# pretty high!
> [1] 728289149562
>  > kappa(h9, exact = TRUE) == max(sv9) / min(sv9)
> Error in La.svd(x, nu, nv, method) : LAPACK routine DGEBRD gave error code -10
> Execution halted
> 
> As I understand from the configure output (and config.status) R used
> the -L/R_HOME/bin -lRlapack
> 
> but this seemed to have built ok.
> 
> compiling anew after configure with the same option set but without
> --with-lapack make check yields not error test base-R
> 
> 
> Is this a known problem with gcc 3.1.1? Or my configure call configuration?
> There are lapack dyn libs installed for my system so I thought
> configure would find those - did I make a mistake in the configure
> options?
> 
> 
> Any hints would be very wellcome.
> 
> 
> Just now, for testing reconfigured (after make clean) and recompiled
> with gcc 2.95.4 using the --with-lapack option and failed make check
> again (same error). So what could be wrong with the lapack option?
> 
> 
> 
> Regards,
> 
>     Matthias
> 
> 
> 
> details:
> 
> export CC=gcc-3.1 CXX=g++-3.1
> 
>    ./configure --prefix=/mnt/local/R/R-1.7.0-gcc-3.1.1
> --enable-R-profiling=yes --enable-R-shlib=yes --with-f77
> --with-blas=yes --with-lapack=yes --with-readline=yes
> --with-tcltk=/usr/include/tcl8.3
> --with-tcl-config=/usr/lib/tcl8.3/tclConfig.sh
> --with-tk-config=/usr/lib/tk8.3/tkConfig.sh --enable-shared --with-pic
> --with-x
> 
> --with-gnome --with-gnome-includes=/usr/include/gnome-1.0
> --with-recommended-packages --with-aqua=yes  --with-libpng=yes
> --with-jpeglib=yes --with-zlib=yes --with-bzlib=yes --with-pcre=yes
> --with-libglade-config=/usr/bin/libglade-config
> 
> 
>    configure output:
> 
>    R is now configured for i686-pc-linux-gnu
> 
>    Source directory:          .
>    Installation directory:    /mnt/local/R/R-1.7.0-gcc-3.1.1
> 
>    C compiler:                gcc-3.1 -D__NO_MATH_INLINES -mieee-fp -g -O2
>    C++ compiler:              g++-3.1 -mieee-fp -g -O2
>    Fortran compiler:          g77 -mieee-fp -g -O2
> 
>    Interfaces supported:      X11, gnome, tcltk
>    External libraries:        readline, BLAS(ATLAS), LAPACK(generic)
>    Additional capabilities:   PNG, JPEG, bzip2, PCRE
>    Options enabled:           shared library, R profiling
> 
>    Recommended packages:      no

Very peculiar.  I just checked the machine where I compiled the
R-1.7.0 Debian packages for the stable distribution.  During the
Debian package build we do run 'make check' and that succeeded on that
machine.

Now I get the peculiar situation that, with h9 the 9x9 Hilbert matrix,
I can successfully run

svd(h9)
svd(h9, nu = 0)
svd(h9, nv = 0)

but

svd(h9, nu = 0, nv = 0)

fails with the error that you quote.

I compiled these packages with g77-3.0 for the Fortran compiler.  Are
there known problems with that?

On another machine running Debian testing and using the gcc-3.2
compiler suite the tests pass.

From edd at debian.org  Thu Apr 17 15:19:50 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu Apr 17 21:20:08 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
	--with-lapack option
In-Reply-To: <6ry929eye0.fsf@bates4.stat.wisc.edu>
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
	<6ry929eye0.fsf@bates4.stat.wisc.edu>
Message-ID: <20030417191950.GA12963@sonny.eddelbuettel.com>

On Thu, Apr 17, 2003 at 02:07:19PM -0500, Douglas Bates wrote:
> > export CC=gcc-3.1 CXX=g++-3.1
> > 
> >    ./configure --prefix=/mnt/local/R/R-1.7.0-gcc-3.1.1
> > --enable-R-profiling=yes --enable-R-shlib=yes --with-f77
> > --with-blas=yes --with-lapack=yes --with-readline=yes
> > --with-tcltk=/usr/include/tcl8.3
> > --with-tcl-config=/usr/lib/tcl8.3/tclConfig.sh
> > --with-tk-config=/usr/lib/tk8.3/tkConfig.sh --enable-shared --with-pic
> > --with-x
> > 
> > --with-gnome --with-gnome-includes=/usr/include/gnome-1.0
> > --with-recommended-packages --with-aqua=yes  --with-libpng=yes
> > --with-jpeglib=yes --with-zlib=yes --with-bzlib=yes --with-pcre=yes
> > --with-libglade-config=/usr/bin/libglade-config
> > 
> > 
> >    configure output:
> > 
> >    R is now configured for i686-pc-linux-gnu
> > 
> >    Source directory:          .
> >    Installation directory:    /mnt/local/R/R-1.7.0-gcc-3.1.1
> > 
> >    C compiler:                gcc-3.1 -D__NO_MATH_INLINES -mieee-fp -g -O2
> >    C++ compiler:              g++-3.1 -mieee-fp -g -O2
> >    Fortran compiler:          g77 -mieee-fp -g -O2

This looks like you're mixing 3.1 for gcc/g++ and the default (2.95 ?) for
g77. Probably risky. 


> >    Interfaces supported:      X11, gnome, tcltk
> >    External libraries:        readline, BLAS(ATLAS), LAPACK(generic)

That mixes Atlas blas with normal lapack. Probably ok, but not a combination
we tried explicitly.

> >    Additional capabilities:   PNG, JPEG, bzip2, PCRE
> >    Options enabled:           shared library, R profiling
> > 
> >    Recommended packages:      no
> 
> Very peculiar.  I just checked the machine where I compiled the
> R-1.7.0 Debian packages for the stable distribution.  During the
> Debian package build we do run 'make check' and that succeeded on that
> machine.
> 
> Now I get the peculiar situation that, with h9 the 9x9 Hilbert matrix,
> I can successfully run
> 
> svd(h9)
> svd(h9, nu = 0)
> svd(h9, nv = 0)
> 
> but
> 
> svd(h9, nu = 0, nv = 0)
> 
> fails with the error that you quote.

Uggh. My apologies for replying too soon earlier.

Dirk

> I compiled these packages with g77-3.0 for the Fortran compiler.  Are
> there known problems with that?
> 
> On another machine running Debian testing and using the gcc-3.2
> compiler suite the tests pass.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Don't drink and derive. Alcohol and algebra don't mix.

From rbaer at kcom.edu  Fri Apr 18 20:01:05 2003
From: rbaer at kcom.edu (rbaer@kcom.edu)
Date: Fri Apr 18 19:01:22 2003
Subject: [Rd] prop.test  confidence intervals (PR#2794)
Message-ID: <200304181701.h3IH15pD022324@pubhealth.ku.dk>

Full_Name: Robert W. Baer, Ph.D.
Version: 1.6.2
OS: Windows 2000
Submission from: (NULL) (198.209.172.106)


Problem:  prop.test() does not seem to produce appropriate confidence intervals
for the case where the vector length of x and n is one.  (I am not certain about
higher vector lengths.)

As an example, I include x=6 and n=42 which has a mean proportion of 0.115. 
When I calculate the 95% CI using the normal approximation by hand (and no
continuity correction) I get (0.028, 0.202).  The exact binomial CI from
binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
(0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
produces  (0.04778925, 0.2412937) This seems reasonably like a normal
approximation 95% CI (which I presume is what is used by prop.test()) of the
true binomial but I did not actually check it by hand.

BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
improperly calculated when continuity correction is turned off.

-----------------------------
Sample R code and output shown below:


> x= 6;n=52
> prop.test(x,n,correct=TRUE)

        1-sample proportions test with continuity correction

data:  x out of n, null probability 0.5 
X-squared = 29.25, df = 1, p-value = 6.362e-08
alternative hypothesis: true p is not equal to 0.5 
95 percent confidence interval:
 0.04778925 0.24129372 
sample estimates:
        p 
0.1153846 

> prop.test(x,n,correct=FALSE)

        1-sample proportions test without continuity correction

data:  x out of n, null probability 0.5 
X-squared = 30.7692, df = 1, p-value = 2.906e-08
alternative hypothesis: true p is not equal to 0.5 
95 percent confidence interval:
 0.05396969 0.22971664 
sample estimates:
        p 
0.1153846 

> binom.test(x,n)

        Exact binomial test

data:  x and n 
number of successes = 6, number of trials = 52, p-value = 1.033e-08
alternative hypothesis: true probability of success is not equal to 0.5 
95 percent confidence interval:
 0.0435412 0.2344083 
sample estimates:
probability of success 
             0.1153846

From tlumley at u.washington.edu  Fri Apr 18 12:53:40 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Apr 18 20:54:01 2003
Subject: [Rd] prop.test  confidence intervals (PR#2794)
In-Reply-To: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0304181137320.79606-100000@homer28.u.washington.edu>

On Fri, 18 Apr 2003 rbaer@kcom.edu wrote:

> Full_Name: Robert W. Baer, Ph.D.
> Version: 1.6.2
> OS: Windows 2000
> Submission from: (NULL) (198.209.172.106)
>
>
> Problem:  prop.test() does not seem to produce appropriate confidence intervals
> for the case where the vector length of x and n is one.  (I am not certain about
> higher vector lengths.)
>
> As an example, I include x=6 and n=42 which has a mean proportion of 0.115.
> When I calculate the 95% CI using the normal approximation by hand (and no
> continuity correction) I get (0.028, 0.202).  The exact binomial CI from
> binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
> (0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
> produces  (0.04778925, 0.2412937) This seems reasonably like a normal
> approximation 95% CI (which I presume is what is used by prop.test()) of the
> true binomial but I did not actually check it by hand.
>
> BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
> improperly calculated when continuity correction is turned off.

No, it isn't a bug.  It uses a Normal approximation, but not the one you
were using. It is based on inverting the score test rather than the Wald
test, and is substantially more accurate.

Checking by simulation: n=42, p=0.1, 10,000 replicates, the coverage from
prop.test without correction was 96.7%, with correction was 97.9% and from
the Wald-based Normal approximation was 92.3%.


	-thomas

From p.dalgaard at biostat.ku.dk  Sat Apr 19 00:13:03 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Apr 18 23:11:10 2003
Subject: [Rd] prop.test  confidence intervals (PR#2794)
In-Reply-To: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
References: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
Message-ID: <x2he8v4ihs.fsf@biostat.ku.dk>

rbaer@kcom.edu writes:

> As an example, I include x=6 and n=42 which has a mean proportion of 0.115. 

...n=52...

> When I calculate the 95% CI using the normal approximation by hand (and no
> continuity correction) I get (0.028, 0.202).  The exact binomial CI from
> binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
> (0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
> produces  (0.04778925, 0.2412937) This seems reasonably like a normal
> approximation 95% CI (which I presume is what is used by prop.test()) of the
> true binomial but I did not actually check it by hand.
> 
> BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
> improperly calculated when continuity correction is turned off.

Uhm... Basically, we know the correct answer from binom.test, and R's
intervals are considerably closer to that than the textbook p+-2*se(p)
formula. So R has a bug because it isn't inaccurate enough??

This might enlighten you:

prop.test(6,52,p=.05396969,alt="g",correct=F)
prop.test(6,52,p=.22971664,alt="l",correct=F)

also, consider the case x=0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From hornik at ci.tuwien.ac.at  Sat Apr 19 21:38:04 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sat Apr 19 22:36:06 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
	--with-lapack option
In-Reply-To: <20030417191950.GA12963@sonny.eddelbuettel.com>
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
	<6ry929eye0.fsf@bates4.stat.wisc.edu>
	<20030417191950.GA12963@sonny.eddelbuettel.com>
Message-ID: <16033.38796.844040.879450@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> ...

>> >    Interfaces supported:      X11, gnome, tcltk
>> >    External libraries:        readline, BLAS(ATLAS), LAPACK(generic)

> That mixes Atlas blas with normal lapack. Probably ok, but not a
> combination we tried explicitly.

That's what one currently gets on a Debian (testing at least) system
with some atlas2 -dev package when configuring with --with-lapack.

I am not sure whether it is a real problem, though: LAPACK_LIBS ends up
as -llapack and the lapack.so module has

  liblapack.so.2 => /usr/lib/atlas/liblapack.so.2 (0x40013000)

(assuming atlas2-base-dev installed), which comes from linking againt
-llapack with hard-wiring library paths, and the /etc/ld.so.conf patch
for Atlas ensures that at run time the atlas version is used.

Of course, at configure time we end up finding only the generic -llapack
in /usr/lib.  I assume that it would be more desirable to use -llapack
in /usr/lib/atlas or even /usr/lib/$arch/atlas which come with the
atlas2 -dev packages, but I am not sure how configure could 'easily'
find these.

I see that there is a -llapack_atlas in /usr/lib, but that does not
contain zgeev() and hence cannot be used as a LAPACK replacement.

I am also not sure about the -lblas in /usr/lib/atlas versus the BLAS
libs we currently come up with.

In any case, the current situation is clearly suboptimal because e.g. if
atlas2-base-dev is installed but lapack-dev is not, then no external
LAPACK will be found although there is one ...

If I may suggest something: it would be nice if the atlas2 -dev packages
could come with a /usr/bin/atlas2-config script which could return the
right BLAS_LIBS and LAPACK_LIBS to use with Atlas.

Best
-k

From DJNordlund at aol.com  Sun Apr 20 01:57:18 2003
From: DJNordlund at aol.com (DJNordlund@aol.com)
Date: Sun Apr 20 00:57:33 2003
Subject: [Rd] Re: [R] Keyboard problem using RWin 1.7.0 (PR#2798)
Message-ID: <200304192257.h3JMvIpD026677@pubhealth.ku.dk>

This is a report of a keyboard problem using RWin 1.7.0.  The following is 
the R version and my system information.

R version
Precompiled binary from CRAN
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    7.0            
year     2003           
month    04             
day      16             
language R   

System Information: Gateway Computer
Processor: Pentium IV 1.4MHz 
RAM: 256M 
OS: Windows 2000 Professional (Build 2195) Service Pack 3


Bug Description 


At startup I get the standard information and prompt.

R : Copyright 2003, The R Development Core Team
Version 1.7.0  (2003-04-16)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

>

If I then paste anything, even something as simple as the character "1" 
(without quotes) to the command line, R stops responding to the keyboard.  
The "1" is visible on the command line, but pressing <return>, or the arrow 
keys, or <esc>, or any other key has no effect.  If the text being pasted is 
several lines of code, it is executed correctly, and if it outputs to the 
console, the output is seen correctly, but afterwards, the keyboard does not 
respond.  Additional code can be pasted to the command line and it also is 
executed correctly.

The computer is not completely locking up, nor is RWin. I can still use the 
mouse to select R menu items, for example, reading documentation, sourcing 
files, even pasting more text.  I can also use <alt>-<tab> to switch between 
other programs running under Windows, where the keyboard works just fine.  

Experimenting with these possibilities actually led to a simple work around 
for me.  After pasting text to the command line (which stops keyboard 
responding), doing any of the following restores keyboard response:

1. Switching to any other running program (like an editor) and then switching 
back to R;
2. pressing <ctrl>-<esc> to bring up the Windows Start menu and then going 
back to R;
3. using the R menus to source a file or read documentation.  (If I use the R 
menu to source some code, the  output of the sourced code appears in the 
console window "above" the pasted text, pushing the previously pasted line of 
text down on the screen.)
4. simply minimizing the console window and then restoring it.

<Speculation warning> 
It would appear that anything that takes the focus away from the console 
window "clears" whatever problem is caused by pasting text to the command 
line.
<speculation off>

Dan Nordlund

	[[alternate HTML version deleted]]

From contact at bonsplansweb.com  Sun Apr 20 07:34:53 2003
From: contact at bonsplansweb.com (BONS PLANS WEB)
Date: Sun Apr 20 06:35:13 2003
Subject: [Rd] Recommande pour vous :
Message-ID: <20030420043455.9B999A000A84@mwinf0204.wanadoo.fr>


Cher Internaute bonjour !

Vous cherchez les bons plans du Web !? Ne cherchez plus http://www.bonsplansweb.com les trouve pour vous !

En vedette ce mois-ci : Le Super Fuel MAX  un economiseur de carburant brevete mondialement !
Nous l'avons teste pour vous, et ca marche !!!

Pour plus d'infos : http://www.econotec-fr.com

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
Notre dernier bon plan :

http://www.banco.fr

Site Web serieux proposant des pronostics pour enfin gagner aux courses, la plus grande librairie dediee aux jeux de hasard...
(livres et logiciels sur le LOTO, KENO, CASINO... )

A bientot.
Bon surf !
Le webmaster
http://www.bonsplansweb.com

//////////////////////////////////////////////////////////////////////////////////////////////////////////////
Vous ne revevez qu'un seul e-mail de notre part, votre adresse n'est pas conservee, il n'est donc pas necessaire de vous desinscrire...
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

From mds23435888 at mail.com  Sun Apr 20 02:14:53 2003
From: mds23435888 at mail.com (Your Dollar Store)
Date: Sun Apr 20 09:01:25 2003
Subject: [Rd] Your own Online Dollar Store in 15 mins or less
In-Reply-To: <Pine.LNX.4.31.0301010016971.43678-26493966@mail.n3>
References: <Pine.LNX.4.31.0301012186265.34937-33569094@mail.n3>
Message-ID: <Pine.LNX.4.31.0301010842778.32009-15842382@mail.n3>

Open a Dollar Store Today!

For the first time ever, you can start you own ONLINE DOLLAR STORE in just minutes.  Here is what you get:

- Your Own Dollar Store Web Site
- Access to a Variety of Products
- Earn Monthly Commissions
- Internet Marketing Guide
- FREE Marketing Consultation
- Make Money 24 hours a day

Click the link below to begin. If you can't click on it, copy and paste it into your Web browser and then press the ENTER key on your key board.

https://secure.secureinternetstores.com/offers/?c=brandon10mdsn&s=10&v=28&p=index&r=

There is a FORTUNE to be  made on the Internet and there is no better time than right now to get started.

                           ****

"I make money 24 hours a day, 7 days a week, and so can you."












To be removed form our list, please go here http://secure.x-web-x.com/unsub/index.html
Do not reply to this message, you will not be removed.


	[[alternate HTML version deleted]]

From smcnary at charm.net  Sun Apr 20 22:01:41 2003
From: smcnary at charm.net (smcnary@charm.net)
Date: Sun Apr 20 21:01:57 2003
Subject: [Rd] 
	Rgui crashes after setting par(ask=TRUE) and using lattice (PR#2801)
Message-ID: <200304201901.h3KJ1fpD029439@pubhealth.ku.dk>

Full_Name: Scot McNary
Version: 1.7
OS: Windows 98se
Submission from: (NULL) (134.192.131.246)


Hi,

Rgui causes a page fault when asking for lattice graphics after setting
par(ask=TRUE).  This doesn't happen in 1.6.2, but does in 1.7.0.

library(lattice)
par(ask=TRUE)
example(dotplot)

Windows "Details" about crash:

RGUI caused an invalid page fault in
module R.DLL at 017f:00421ce0.
Registers:
EAX=00421cd0 CS=017f EIP=00421ce0 EFLGS=00010206
EBX=017b9e18 SS=0187 ESP=0096d7b4 EBP=0096d7d8
ECX=1177ab43 DS=0187 ESI=0096d8c8 FS=8397
EDX=00000000 ES=0187 EDI=0096d8d0 GS=0000
Bytes at CS:EIP:
8b 9a d0 00 00 00 52 d9 7d fa dc 05 c0 1c 42 00 
Stack dump:
00000003 00000000 0096d820 01be3200 17b70d3f 0c705027 88080012 01387cf4 017b9e18
0096d838 11771699 0096d818 0096d820 0096d828 0096d830 01c1e6e8 


> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    7.0            
year     2003           
month    04             
day      16             
language R

From pd at pubhealth.ku.dk  Mon Apr 21 08:15:03 2003
From: pd at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon Apr 21 07:12:54 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200304210515.h3L5F3Mp013718@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0, 0.6-8
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500
* PR# 2480 *
Subject: bug in CrossTable (package:gregmisc)
From: John_Hendrickx@yahoo.com
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
* PR# 2499 *
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
Date: Mon, 27 Jan 2003 17:28:11 +0100
..Needs to resubmit in more useful format.
* PR# 2520 *
Subject: Apparent parser problem
From: "Jim Rogers" <jrogers@cantatapharm.com>
Date: Sat, 1 Feb 2003 16:51:41 -0500
..Its an ESS or XEmacs problem. I redirected him to ESS-bugs.

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
* PR# 2545 *
Subject: colSums etc. documentation
From: "Gunter, Bert" <bert_gunter@merck.com>
Date: Thu, 13 Feb 2003 09:08:44 -0500
* PR# 2794 *
Subject: prop.test  confidence intervals
From: rbaer@kcom.edu
Date: Fri, 18 Apr 2003 19:01:03 +0200 (MET DST)
..prop.test should say how it computes confidence intervals.

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200
* PR# 2578 *
Subject: "trace" argument in legend()
From: jerome@hivnet.ubc.ca
Date: Mon, 24 Feb 2003 18:53:29 +0100 (MET)
* PR# 2628 *
Subject: cex.axis in boxplot
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Wed, 12 Mar 2003 17:27:34 +0100 (CET)
* PR# 2630 *
Subject: plot() with type="s" and lty=2
From: jerome@hivnet.ubc.ca
Date: Wed, 12 Mar 2003 23:35:59 +0100 (MET)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)
* PR# 2550 *
Subject: eigen() error: R Version 1.6.1 on Mac OS X
From: "Daniel E. Weeks" <dweeks@watson.hgen.pitt.edu>
Date: Fri, 14 Feb 2003 15:36:15 -0500
* PR# 2725 *
Subject: Default broswer for OS X
From: james@freelancepropaganda.com
Date: Fri, 4 Apr 2003 06:04:48 +0200 (MET DST)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.
* PR# 2644 *
Subject: R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: faheem@email.unc.edu
Date: Sun, 16 Mar 2003 19:47:55 +0100 (MET)
* PR# 2645 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Faheem Mitha <faheem@email.unc.edu>
Date: Sun, 16 Mar 2003 15:44:14 -0500 (EST)
..part of 2644
* PR# 2648 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
Date: Mon, 17 Mar 2003 21:32:55 +0100
..part of 2644

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
* PR# 2730 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Fri, 4 Apr 2003 06:27:15 -0600
..something obscure in debian: pbuilder is not part of R
* PR# 2733 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Daniel Schepler <schepler@math.berkeley.edu>
Date: 05 Apr 2003 14:06:09 -0800
..part of 2730
* PR# 2736 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Sun, 6 Apr 2003 21:20:29 -0500
..part of 2730

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
..The proposed fix would make it impossible to pass a variable to apropos
..
..eg 
..
..> sor<-"plot"
..> apropos(sor)
..[1] "sor"          "isoreg"       "sortedXyData" "is.unsorted"  "sort"        
..[6] "sort.list"   
..
..A better fix might be to require the argument to be a string.
* PR# 2577 *
Subject: Problem with hessian in deriv3 
From: j.c.rougier@durham.ac.uk
Date: Mon, 24 Feb 2003 17:01:47 GMT
* PR# 2593 *
Subject: density(), with argument of length 1
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 1 Mar 2003 16:35:56 +1100 (EST)
* PR# 2656 *
Subject: recursive default argument reference in debugger
From: pburns@pburns.seanet.com
Date: Wed, 19 Mar 2003 12:23:40 +0100 (MET)
* PR# 2793 *
Subject: Problems with RMySQL in R 1.7.0 for Windows
From: "Jonas Ranstam" <jonas@ranstam.dk>
Date: Fri, 18 Apr 2003 09:13:56 +0200
* PR# 2795 *
Subject: Work from Home -
From: "Stuart Baker" <offerpl@aol.com>
Date: Fri, 18 Apr 2003 17:44:32 +-0600
* PR# 2796 *
Subject: ()     ?   @
From: strong man <big@wonderlife.co.kr>
Date: Sun, 20 Apr 2003 03:59:30 +0900
* PR# 2797 *
Subject: Enlarge your p-e-n-i-s 2 inches GUARANTEED fq l
From: "Lindsey Crow" <8b71karkvy3o@mindspring.com>
Date: Sat, 19 Apr 03 22:01:26 GMT
* PR# 2798 *
Subject: Re: [R] Keyboard problem using RWin 1.7.0
From: DJNordlund@aol.com
Date: Sat, 19 Apr 2003 18:56:25 EDT
* PR# 2799 *
Subject: You and your COLON                                             Ujcfjy
From: <lgvix@yahoo.com>
Date: Sun, 20 Apr 2003 04:34:56 -0200
* PR# 2800 *
Subject: Order V i a g r a , Diet Pills, and other drugs online!  No prior prescription needed
From: "Adeline Ponce" <joy1474@msn.com>
Date: Sun, 20 Apr 03 06:13:09 GMT
* PR# 2801 *
Subject: Rgui crashes after setting par(ask=TRUE) and using lattice
From: smcnary@charm.net
Date: Sun, 20 Apr 2003 21:01:40 +0200 (MET DST)
* PR# 2802 *
Subject: URGENT
From: "Mr Silai Wongo" <Silai11@netscape.net>
Date: Mon, 21 Apr 2003 01:54:46
* PR# 2803 *
Subject: ;-)
From: "Kari Mcdonald" <joy1491@aol.com>
Date: Mon, 21 Apr 03 06:48:17 GMT
* PR# 2804 *
Subject: wasjing ueturn
From: "Madeleine Lanier" <hlejm5flu3h@msn.com>
Date: Sun, 20 Apr 03 10:37:36 GMT

From dmurdoch at pair.com  Mon Apr 21 07:18:15 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Apr 21 12:18:28 2003
Subject: [Rd]  Rgui crashes after setting par(ask=TRUE) and using lattice
	(PR#2801)
In-Reply-To: <200304201901.h3KJ1fpD029439@pubhealth.ku.dk>
References: <200304201901.h3KJ1fpD029439@pubhealth.ku.dk>
Message-ID: <29h7avci4btik6hr1h0iugh0bar7bm4jhv@4ax.com>

On Sun, 20 Apr 2003 21:01:41 +0200 (MET DST), you wrote:

>Full_Name: Scot McNary
>Version: 1.7
>OS: Windows 98se
>Submission from: (NULL) (134.192.131.246)
>
>
>Hi,
>
>Rgui causes a page fault when asking for lattice graphics after setting
>par(ask=TRUE).  This doesn't happen in 1.6.2, but does in 1.7.0.

I don't get the crash in XP.  I'll try it tomorrow in Win98.

Duncan Murdoch

From thoar at ucar.edu  Mon Apr 21 22:17:05 2003
From: thoar at ucar.edu (thoar@ucar.edu)
Date: Mon Apr 21 21:17:26 2003
Subject: [Rd] building R 1.7.0 under RH7.3 (PR#2808)
Message-ID: <200304211917.h3LJH5pD003494@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-959030623-1050952576=:23064
Content-Type: TEXT/PLAIN; charset=US-ASCII


The configure process does not seem to be working as well as it had for
previous versions ... constantly seems to complain about being unable to
determine environment variables.

I am trying to use the PG set of compilers (because the netCDF library was
built with them, and I will need to use it. I have had problems with this in
the past, although particularly with the Intel Compilers).


setenv R_PAPERSIZE letter
setenv CC pgcc
setenv F77 pgf90
setenv CXX pgCC
[note ALL other environment vars are "undefined", including LD_LIBRARY_PATH]

Linux poorman 2.4.18-17.7.xsmp #1 SMP Tue Oct 8 12:37:04 EDT 2002 i686 unknown
RH 7.3, on a 1.7Ghz Pentium

./configure --prefix=/contrib/R-1.7.0 >& configure.attempt.1

results in two things --

The first is that there seems to be a "-x" getting fed to the PG compilers,
which is not a valid option.  I don't know if this is the root problem ...

The second (and seemingly fatal one) is "unable to determine CPICFLAGS".
So -- I set it and try again ...

setenv CPICFLAGS -kpic
./configure --prefix=/contrib/R-1.7.0 >& configure.attempt.2

which  generates "unable to determine FPICFLAGS" ...

and the same scenario is repeated several more times, with "the next"
environment variable not getting useful default values ...


Anyone else report this?

Thanks -- Tim

## Tim Hoar, Associate Scientist              email: thoar@ucar.edu     ##
## Geophysical Statistics Project             phone: 303-497-1708       ##
## National Center for Atmospheric Research   FAX  : 303-497-1333       ##
## Boulder, CO  80307                    http://www.cgd.ucar.edu/~thoar ##

---559023410-959030623-1050952576=:23064
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="configure.attempt.1"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30.0304211316160.23064@sunray2>
Content-Description: 
Content-Disposition: attachment; filename="configure.attempt.1"

Y2hlY2tpbmcgZm9yIGEgQlNELWNvbXBhdGlibGUgaW5zdGFsbC4uLiAvdXNy
L2Jpbi9pbnN0YWxsIC1jDQpjaGVja2luZyB3aGV0aGVyIGJ1aWxkIGVudmly
b25tZW50IGlzIHNhbmUuLi4geWVzDQpjaGVja2luZyB3aGV0aGVyIG1ha2Ug
c2V0cyAkKE1BS0UpLi4uIHllcw0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgYWNs
b2NhbC0xLjQuLi4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIGF1dG9j
b25mLi4uIGZvdW5kDQpjaGVja2luZyBmb3Igd29ya2luZyBhdXRvbWFrZS0x
LjQuLi4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIGF1dG9oZWFkZXIu
Li4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIG1ha2VpbmZvLi4uIGZv
dW5kDQpjaGVja2luZyBidWlsZCBzeXN0ZW0gdHlwZS4uLiBpNjg2LXBjLWxp
bnV4LWdudQ0KY2hlY2tpbmcgaG9zdCBzeXN0ZW0gdHlwZS4uLiBpNjg2LXBj
LWxpbnV4LWdudQ0KbG9hZGluZyBzaXRlIHNjcmlwdCAnLi9jb25maWcuc2l0
ZScNCmxvYWRpbmcgYnVpbGQgc3BlY2lmaWMgc2NyaXB0ICcuL2NvbmZpZy5z
aXRlJw0KY2hlY2tpbmcgZm9yIHB3ZC4uLiAvYmluL3B3ZA0KY2hlY2tpbmcg
d2hldGhlciBidWlsZGRpciBpcyBzcmNkaXIuLi4geWVzDQpjaGVja2luZyBm
b3IgZ2F3ay4uLiBnYXdrDQpjaGVja2luZyBmb3IgZWdyZXAuLi4gZ3JlcCAt
RQ0KY2hlY2tpbmcgd2hldGhlciBsbiAtcyB3b3Jrcy4uLiB5ZXMNCmNoZWNr
aW5nIGZvciByYW5saWIuLi4gcmFubGliDQpjaGVja2luZyBmb3IgYmlzb24u
Li4gYmlzb24gLXkNCmNoZWNraW5nIGZvciBhci4uLiBhcg0KY2hlY2tpbmcg
Zm9yIGphdmFjLi4uIG5vDQpjaGVja2luZyBmb3IgbGVzcy4uLiAvdXNyL2Jp
bi9sZXNzDQpjaGVja2luZyBmb3IgcGVybC4uLiAvdXNyL2xvY2FsL2Jpbi9w
ZXJsDQpjaGVja2luZyB3aGV0aGVyIHBlcmwgdmVyc2lvbiBpcyBhdCBsZWFz
dCA1LjAwNC4uLiB5ZXMNCmNoZWNraW5nIGZvciBkdmlwcy4uLiAvdXNyL2Jp
bi9kdmlwcw0KY2hlY2tpbmcgZm9yIHRleC4uLiAvdXNyL2Jpbi90ZXgNCmNo
ZWNraW5nIGZvciBsYXRleC4uLiAvdXNyL2Jpbi9sYXRleA0KY2hlY2tpbmcg
Zm9yIG1ha2VpbmRleC4uLiAvdXNyL2Jpbi9tYWtlaW5kZXgNCmNoZWNraW5n
IGZvciBwZGZ0ZXguLi4gL3Vzci9iaW4vcGRmdGV4DQpjaGVja2luZyBmb3Ig
cGRmbGF0ZXguLi4gL3Vzci9iaW4vcGRmbGF0ZXgNCmNoZWNraW5nIGZvciBt
YWtlaW5mby4uLiAvdXNyL2Jpbi9tYWtlaW5mbw0KY2hlY2tpbmcgZm9yIHVu
emlwLi4uIG5vDQpjaGVja2luZyBmb3IgemlwLi4uIG5vDQpjaGVja2luZyBm
b3IgZ2NjLi4uIHBnY2MNCmNoZWNraW5nIGZvciBDIGNvbXBpbGVyIGRlZmF1
bHQgb3V0cHV0Li4uIGEub3V0DQpjaGVja2luZyB3aGV0aGVyIHRoZSBDIGNv
bXBpbGVyIHdvcmtzLi4uIHllcw0KY2hlY2tpbmcgd2hldGhlciB3ZSBhcmUg
Y3Jvc3MgY29tcGlsaW5nLi4uIG5vDQpjaGVja2luZyBmb3Igc3VmZml4IG9m
IGV4ZWN1dGFibGVzLi4uIA0KY2hlY2tpbmcgZm9yIHN1ZmZpeCBvZiBvYmpl
Y3QgZmlsZXMuLi4gbw0KY2hlY2tpbmcgd2hldGhlciB3ZSBhcmUgdXNpbmcg
dGhlIEdOVSBDIGNvbXBpbGVyLi4uIG5vDQpjaGVja2luZyB3aGV0aGVyIHBn
Y2MgYWNjZXB0cyAtZy4uLiB5ZXMNCmNoZWNraW5nIGZvciBwZ2NjIG9wdGlv
biB0byBhY2NlcHQgQU5TSSBDLi4uIG5vbmUgbmVlZGVkDQpjaGVja2luZyBm
b3Igbm9uLUdOVSBsZC4uLiAvdXNyL2Jpbi9sZA0KY2hlY2tpbmcgaWYgdGhl
IGxpbmtlciAoL3Vzci9iaW4vbGQpIGlzIEdOVSBsZC4uLiB5ZXMNCmNoZWNr
aW5nIGZvciAvdXNyL2Jpbi9sZCBvcHRpb24gdG8gcmVsb2FkIG9iamVjdCBm
aWxlcy4uLiAtcg0KY2hlY2tpbmcgZm9yIEJTRC1jb21wYXRpYmxlIG5tLi4u
IC91c3IvYmluL25tIC1CDQpjaGVja2luZyBmb3IgYSBzZWQgdGhhdCBkb2Vz
IG5vdCB0cnVuY2F0ZSBvdXRwdXQuLi4gL2Jpbi9zZWQNCmNoZWNraW5nIGhv
dyB0byByZWNvZ25pc2UgZGVwZW5kZW50IGxpYnJhcmllcy4uLiBwYXNzX2Fs
bA0KY2hlY2tpbmcgY29tbWFuZCB0byBwYXJzZSAvdXNyL2Jpbi9ubSAtQiBv
dXRwdXQuLi4gb2sNCmNoZWNraW5nIGhvdyB0byBydW4gdGhlIEMgcHJlcHJv
Y2Vzc29yLi4uIHBnY2MgLUUNCmNoZWNraW5nIGZvciBBTlNJIEMgaGVhZGVy
IGZpbGVzLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy90eXBlcy5oLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHN5cy9zdGF0LmguLi4geWVzDQpjaGVja2luZyBm
b3Igc3RkbGliLmguLi4geWVzDQpjaGVja2luZyBmb3Igc3RyaW5nLmguLi4g
eWVzDQpjaGVja2luZyBmb3IgbWVtb3J5LmguLi4geWVzDQpjaGVja2luZyBm
b3Igc3RyaW5ncy5oLi4uIHllcw0KY2hlY2tpbmcgZm9yIGludHR5cGVzLmgu
Li4geWVzDQpjaGVja2luZyBmb3Igc3RkaW50LmguLi4geWVzDQpjaGVja2lu
ZyBmb3IgdW5pc3RkLmguLi4geWVzDQpjaGVja2luZyBkbGZjbi5oIHVzYWJp
bGl0eS4uLiB5ZXMNCmNoZWNraW5nIGRsZmNuLmggcHJlc2VuY2UuLi4geWVz
DQpjaGVja2luZyBmb3IgZGxmY24uaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBy
YW5saWIuLi4gKGNhY2hlZCkgcmFubGliDQpjaGVja2luZyBmb3Igc3RyaXAu
Li4gc3RyaXANCmNoZWNraW5nIGZvciBvYmpkaXIuLi4gLmxpYnMNCmNoZWNr
aW5nIGZvciBwZ2NjIG9wdGlvbiB0byBwcm9kdWNlIFBJQy4uLiBub25lDQpj
aGVja2luZyBpZiBwZ2NjIHN0YXRpYyBmbGFnICB3b3Jrcy4uLiB5ZXMNCmNo
ZWNraW5nIGlmIHBnY2Mgc3VwcG9ydHMgLWMgLW8gZmlsZS5vLi4uIHllcw0K
Y2hlY2tpbmcgaWYgcGdjYyBzdXBwb3J0cyAtYyAtbyBmaWxlLmxvLi4uIHll
cw0KY2hlY2tpbmcgd2hldGhlciB0aGUgbGlua2VyICgvdXNyL2Jpbi9sZCkg
c3VwcG9ydHMgc2hhcmVkIGxpYnJhcmllcy4uLiB5ZXMNCmNoZWNraW5nIGhv
dyB0byBoYXJkY29kZSBsaWJyYXJ5IHBhdGhzIGludG8gcHJvZ3JhbXMuLi4g
aW1tZWRpYXRlDQpjaGVja2luZyB3aGV0aGVyIHN0cmlwcGluZyBsaWJyYXJp
ZXMgaXMgcG9zc2libGUuLi4geWVzDQpjaGVja2luZyBkeW5hbWljIGxpbmtl
ciBjaGFyYWN0ZXJpc3RpY3MuLi4gR05VL0xpbnV4IGxkLnNvDQpjaGVja2lu
ZyBpZiBsaWJ0b29sIHN1cHBvcnRzIHNoYXJlZCBsaWJyYXJpZXMuLi4gbm8N
CmNoZWNraW5nIHdoZXRoZXIgdG8gYnVpbGQgc2hhcmVkIGxpYnJhcmllcy4u
LiBubw0KY2hlY2tpbmcgd2hldGhlciB0byBidWlsZCBzdGF0aWMgbGlicmFy
aWVzLi4uIHllcw0KY3JlYXRpbmcgbGlidG9vbA0KY2hlY2tpbmcgd2hldGhl
ciBtYWtlaW5mbyB2ZXJzaW9uIGlzIGF0IGxlYXN0IDQuLi4geWVzDQpjaGVj
a2luZyBmb3IgbmV0c2NhcGUuLi4gL3Vzci9iaW4vbmV0c2NhcGUNCnVzaW5n
IGRlZmF1bHQgYnJvd3NlciAuLi4gL3Vzci9iaW4vbmV0c2NhcGUNCmNoZWNr
aW5nIGZvciBhY3JvcmVhZC4uLiAvdXNyL2xvY2FsL2Jpbi9hY3JvcmVhZA0K
Y2hlY2tpbmcgZm9yIGdjYy4uLiAoY2FjaGVkKSBwZ2NjDQpjaGVja2luZyB3
aGV0aGVyIHdlIGFyZSB1c2luZyB0aGUgR05VIEMgY29tcGlsZXIuLi4gKGNh
Y2hlZCkgbm8NCmNoZWNraW5nIHdoZXRoZXIgcGdjYyBhY2NlcHRzIC1nLi4u
IChjYWNoZWQpIHllcw0KY2hlY2tpbmcgZm9yIHBnY2Mgb3B0aW9uIHRvIGFj
Y2VwdCBBTlNJIEMuLi4gKGNhY2hlZCkgbm9uZSBuZWVkZWQNCmNoZWNraW5n
IGhvdyB0byBydW4gdGhlIEMgcHJlcHJvY2Vzc29yLi4uIHBnY2MgLUUNCmRl
ZmluaW5nIEY3NyB0byBiZSBwZ2Y5MA0KY2hlY2tpbmcgd2hldGhlciB3ZSBh
cmUgdXNpbmcgdGhlIEdOVSBGb3J0cmFuIDc3IGNvbXBpbGVyLi4uIG5vDQpj
aGVja2luZyB3aGV0aGVyIHBnZjkwIGFjY2VwdHMgLWcuLi4geWVzDQpjaGVj
a2luZyB3aGV0aGVyIHdlIGFyZSB1c2luZyB0aGUgR05VIEMrKyBjb21waWxl
ci4uLiBubw0KY2hlY2tpbmcgd2hldGhlciBwZ0NDIGFjY2VwdHMgLWcuLi4g
eWVzDQpjaGVja2luZyBob3cgdG8gcnVuIHRoZSBDKysgcHJlcHJvY2Vzc29y
Li4uIHBnQ0MgLUUNCmNoZWNraW5nIGZvciBtYWluIGluIC1sbS4uLiB5ZXMN
CmNoZWNraW5nIGZvciBzaW4gaW4gLWxtLi4uIHllcw0KY2hlY2tpbmcgZm9y
IG1haW4gaW4gLWxuY3Vyc2VzLi4uIHllcw0KY2hlY2tpbmcgZm9yIGRsb3Bl
biBpbiAtbGRsLi4uIHllcw0KY2hlY2tpbmcgZm9yIHJsX2NhbGxiYWNrX3Jl
YWRfY2hhciBpbiAtbHJlYWRsaW5lLi4uIHllcw0KY2hlY2tpbmcgZm9yIEFO
U0kgQyBoZWFkZXIgZmlsZXMuLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyB3
aGV0aGVyIHRpbWUuaCBhbmQgc3lzL3RpbWUuaCBtYXkgYm90aCBiZSBpbmNs
dWRlZC4uLiB5ZXMNCmNoZWNraW5nIGZvciBkaXJlbnQuaCB0aGF0IGRlZmlu
ZXMgRElSLi4uIHllcw0KY2hlY2tpbmcgZm9yIGxpYnJhcnkgY29udGFpbmlu
ZyBvcGVuZGlyLi4uIG5vbmUgcmVxdWlyZWQNCmNoZWNraW5nIGZvciBzeXMv
d2FpdC5oIHRoYXQgaXMgUE9TSVguMSBjb21wYXRpYmxlLi4uIHllcw0KY2hl
Y2tpbmcgYXJwYS9pbmV0LmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tpbmcg
YXJwYS9pbmV0LmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3IgYXJw
YS9pbmV0LmguLi4geWVzDQpjaGVja2luZyBkbC5oIHVzYWJpbGl0eS4uLiBu
bw0KY2hlY2tpbmcgZGwuaCBwcmVzZW5jZS4uLiBubw0KY2hlY2tpbmcgZm9y
IGRsLmguLi4gbm8NCmNoZWNraW5nIGZvciBkbGZjbi5oLi4uIChjYWNoZWQp
IHllcw0KY2hlY2tpbmcgZWxmLmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tp
bmcgZWxmLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3IgZWxmLmgu
Li4geWVzDQpjaGVja2luZyBmY250bC5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNo
ZWNraW5nIGZjbnRsLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Ig
ZmNudGwuaC4uLiB5ZXMNCmNoZWNraW5nIGZsb2F0aW5ncG9pbnQuaCB1c2Fi
aWxpdHkuLi4gbm8NCmNoZWNraW5nIGZsb2F0aW5ncG9pbnQuaCBwcmVzZW5j
ZS4uLiBubw0KY2hlY2tpbmcgZm9yIGZsb2F0aW5ncG9pbnQuaC4uLiBubw0K
Y2hlY2tpbmcgZnB1X2NvbnRyb2wuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVj
a2luZyBmcHVfY29udHJvbC5oIHByZXNlbmNlLi4uIHllcw0KY2hlY2tpbmcg
Zm9yIGZwdV9jb250cm9sLmguLi4geWVzDQpjaGVja2luZyBncnAuaCB1c2Fi
aWxpdHkuLi4geWVzDQpjaGVja2luZyBncnAuaCBwcmVzZW5jZS4uLiB5ZXMN
CmNoZWNraW5nIGZvciBncnAuaC4uLiB5ZXMNCmNoZWNraW5nIGllZWU3NTQu
aCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBpZWVlNzU0LmggcHJlc2Vu
Y2UuLi4geWVzDQpjaGVja2luZyBmb3IgaWVlZTc1NC5oLi4uIHllcw0KY2hl
Y2tpbmcgaWVlZWZwLmggdXNhYmlsaXR5Li4uIG5vDQpjaGVja2luZyBpZWVl
ZnAuaCBwcmVzZW5jZS4uLiBubw0KY2hlY2tpbmcgZm9yIGllZWVmcC5oLi4u
IG5vDQpjaGVja2luZyBsb2NhbGUuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVj
a2luZyBsb2NhbGUuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBs
b2NhbGUuaC4uLiB5ZXMNCmNoZWNraW5nIG5ldGRiLmggdXNhYmlsaXR5Li4u
IHllcw0KY2hlY2tpbmcgbmV0ZGIuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNr
aW5nIGZvciBuZXRkYi5oLi4uIHllcw0KY2hlY2tpbmcgbmV0aW5ldC9pbi5o
IHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIG5ldGluZXQvaW4uaCBwcmVz
ZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBuZXRpbmV0L2luLmguLi4geWVz
DQpjaGVja2luZyBwd2QuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBw
d2QuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBwd2QuaC4uLiB5
ZXMNCmNoZWNraW5nIHJlYWRsaW5lL2hpc3RvcnkuaCB1c2FiaWxpdHkuLi4g
eWVzDQpjaGVja2luZyByZWFkbGluZS9oaXN0b3J5LmggcHJlc2VuY2UuLi4g
eWVzDQpjaGVja2luZyBmb3IgcmVhZGxpbmUvaGlzdG9yeS5oLi4uIHllcw0K
Y2hlY2tpbmcgcmVhZGxpbmUvcmVhZGxpbmUuaCB1c2FiaWxpdHkuLi4geWVz
DQpjaGVja2luZyByZWFkbGluZS9yZWFkbGluZS5oIHByZXNlbmNlLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHJlYWRsaW5lL3JlYWRsaW5lLmguLi4geWVzDQpj
aGVja2luZyBmb3Igc3RyaW5ncy5oLi4uIChjYWNoZWQpIHllcw0KY2hlY2tp
bmcgc3lzL3BhcmFtLmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tpbmcgc3lz
L3BhcmFtLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3Bh
cmFtLmguLi4geWVzDQpjaGVja2luZyBzeXMvc2VsZWN0LmggdXNhYmlsaXR5
Li4uIHllcw0KY2hlY2tpbmcgc3lzL3NlbGVjdC5oIHByZXNlbmNlLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHN5cy9zZWxlY3QuaC4uLiB5ZXMNCmNoZWNraW5n
IHN5cy9zb2NrZXQuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBzeXMv
c29ja2V0LmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3Nv
Y2tldC5oLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy9zdGF0LmguLi4gKGNh
Y2hlZCkgeWVzDQpjaGVja2luZyBzeXMvdGltZS5oIHVzYWJpbGl0eS4uLiB5
ZXMNCmNoZWNraW5nIHN5cy90aW1lLmggcHJlc2VuY2UuLi4geWVzDQpjaGVj
a2luZyBmb3Igc3lzL3RpbWUuaC4uLiB5ZXMNCmNoZWNraW5nIHN5cy90aW1l
cy5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIHN5cy90aW1lcy5oIHBy
ZXNlbmNlLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy90aW1lcy5oLi4uIHll
cw0KY2hlY2tpbmcgc3lzL3V0c25hbWUuaCB1c2FiaWxpdHkuLi4geWVzDQpj
aGVja2luZyBzeXMvdXRzbmFtZS5oIHByZXNlbmNlLi4uIHllcw0KY2hlY2tp
bmcgZm9yIHN5cy91dHNuYW1lLmguLi4geWVzDQpjaGVja2luZyBmb3IgdW5p
c3RkLmguLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyBlcnJuby5oIHVzYWJp
bGl0eS4uLiB5ZXMNCmNoZWNraW5nIGVycm5vLmggcHJlc2VuY2UuLi4geWVz
DQpjaGVja2luZyBmb3IgZXJybm8uaC4uLiB5ZXMNCmNoZWNraW5nIHN0ZGFy
Zy5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIHN0ZGFyZy5oIHByZXNl
bmNlLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN0ZGFyZy5oLi4uIHllcw0KY2hl
Y2tpbmcgZm9yIHN0cmluZy5oLi4uIChjYWNoZWQpIHllcw0KY2hlY2tpbmcg
d2hldGhlciBzZXRqbXAuaCBpcyBQT1NJWC4xIGNvbXBhdGlibGUuLi4geWVz
DQpjaGVja2luZyBmb3IgR05VIEMgbGlicmFyeSB3aXRoIHZlcnNpb24gPj0g
Mi4uLiB5ZXMNCmNoZWNraW5nIHJldHVybiB0eXBlIG9mIHNpZ25hbCBoYW5k
bGVycy4uLiB2b2lkDQpjaGVja2luZyBmb3IgcGlkX3QuLi4geWVzDQpjaGVj
a2luZyBmb3Igc2l6ZV90Li4uIHllcw0KY2hlY2tpbmcgZm9yIGJsa2NudF90
Li4uIHllcw0KY2hlY2tpbmcgZm9yIHR5cGUgb2Ygc29ja2V0IGxlbmd0aC4u
LiBzb2NrbGVuX3QgKg0KY2hlY2tpbmcgd2hldGhlciBieXRlIG9yZGVyaW5n
IGlzIGJpZ2VuZGlhbi4uLiBubw0KY2hlY2tpbmcgZm9yIGFuIEFOU0kgQy1j
b25mb3JtaW5nIGNvbnN0Li4uIHllcw0KY2hlY2tpbmcgZm9yIGludC4uLiB5
ZXMNCmNoZWNraW5nIHNpemUgb2YgaW50Li4uIDQNCmNoZWNraW5nIGZvciBs
b25nLi4uIHllcw0KY2hlY2tpbmcgc2l6ZSBvZiBsb25nLi4uIDQNCmNoZWNr
aW5nIGZvciBsb25nIGxvbmcuLi4geWVzDQpjaGVja2luZyBzaXplIG9mIGxv
bmcgbG9uZy4uLiA4DQpjaGVja2luZyBmb3IgbG9uZyBkb3VibGUuLi4geWVz
DQpjaGVja2luZyBzaXplIG9mIGxvbmcgZG91YmxlLi4uIDgNCmNoZWNraW5n
IHdoZXRoZXIgd2UgY2FuIGNvbXB1dGUgQyBNYWtlIGRlcGVuZGVuY2llcy4u
LiB5ZXMsIHVzaW5nIGNwcCAtTQ0KY2hlY2tpbmcgd2hldGhlciBwZ2NjIHN1
cHBvcnRzIC1jIC1vIEZJTEUubG8uLi4geWVzDQpjaGVja2luZyBob3cgdG8g
Z2V0IHZlcmJvc2UgbGlua2luZyBvdXRwdXQgZnJvbSBwZ2Y5MC4uLiAtdg0K
Y2hlY2tpbmcgZm9yIEZvcnRyYW4gNzcgbGlicmFyaWVzLi4uICAtTC91c3Iv
bG9jYWwvbGliIC1ML3Vzci9sb2NhbC9wZ2kvbGludXg4Ni9saWIgLUwvdXNy
L2xpYiAtTC91c3IvbGliL2djYy1saWIvaTM4Ni1yZWRoYXQtbGludXgvMi45
NiAtbHBnZjkwIC1scGdmOTBfcnBtMSAtbHBnZjkwMiAtbHBnZjkwcnRsIC1s
cGdmdG5ydGwgLWxtIC1scGdjDQpjaGVja2luZyBmb3IgZHVtbXkgbWFpbiB0
byBsaW5rIHdpdGggRm9ydHJhbiA3NyBsaWJyYXJpZXMuLi4gbm9uZQ0KY2hl
Y2tpbmcgZm9yIEZvcnRyYW4gNzcgbmFtZS1tYW5nbGluZyBzY2hlbWUuLi4g
bG93ZXIgY2FzZSwgdW5kZXJzY29yZSwgbm8gZXh0cmEgdW5kZXJzY29yZQ0K
Y2hlY2tpbmcgd2hldGhlciBwZ2Y5MCBhcHBlbmRzIHVuZGVyc2NvcmVzIHRv
IGV4dGVybmFsIG5hbWVzLi4uIHllcw0KY2hlY2tpbmcgd2hldGhlciBtaXhl
ZCBDL0ZvcnRyYW4gY29kZSBjYW4gYmUgcnVuLi4uIHllcw0KY2hlY2tpbmcg
d2hldGhlciBwZ2Y5MCBhbmQgcGdjYyBhZ3JlZSBvbiBpbnQgYW5kIGRvdWJs
ZS4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIgcGdmOTAgYW5kIHBnY2MgYWdy
ZWUgb24gZG91YmxlIGNvbXBsZXguLi4geWVzDQpjaGVja2luZyB3aGV0aGVy
IHBnZjkwIHN1cHBvcnRzIC1jIC1vIEZJTEUubG8uLi4geWVzDQpjaGVja2lu
ZyB3aGV0aGVyIHBnQ0MgYWNjZXB0cyAtTSBmb3IgZ2VuZXJhdGluZyBkZXBl
bmRlbmNpZXMuLi4geWVzDQpjaGVja2luZyB3aGV0aGVyIHBnQ0Mgc3VwcG9y
dHMgLWMgLW8gRklMRS5sby4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIgcGdj
YyBhY2NlcHRzIC1taWVlZS1mcC4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIg
cGdmOTAgYWNjZXB0cyAtbWllZWUtZnAuLi4geWVzDQpjaGVja2luZyB3aGV0
aGVyIHBnQ0MgYWNjZXB0cyAtbWllZWUtZnAuLi4geWVzDQpjaGVja2luZyBm
b3IgeG1rbWYuLi4gL3Vzci9YMTFSNi9iaW4veG1rbWYNCnBnY2MtV2Fybmlu
Zy1Vbmtub3duIHN3aXRjaDogLXgNCnBnY2MtV2FybmluZy1Vbmtub3duIHN3
aXRjaDogLQ0KRmlsZSB3aXRoIHVua25vd24gc3VmZml4IHBhc3NlZCB0byBs
aW5rZXI6IGMNCi91c3IvYmluL2xkOiBjYW5ub3Qgb3BlbiBjOiBObyBzdWNo
IGZpbGUgb3IgZGlyZWN0b3J5DQovdXNyL1gxMVI2L2Jpbi94bWttZjogbGlu
ZSA3MDogIDcyMDcgQWJvcnRlZCAgICAgICAgICAgICAgICAgKGNvcmUgZHVt
cGVkKSBpbWFrZSAkaW1ha2VfZGVmaW5lcyAkYXJncw0KVXNhZ2U6IHdoaWNo
IFtvcHRpb25zXSBbLS1dIHByb2dyYW1uYW1lIFsuLi5dDQpPcHRpb25zOiAt
LXZlcnNpb24sIC1bdlZdIFByaW50IHZlcnNpb24gYW5kIGV4aXQgc3VjY2Vz
c2Z1bGx5Lg0KICAgICAgICAgLS1oZWxwLCAgICAgICAgICBQcmludCB0aGlz
IGhlbHAgYW5kIGV4aXQgc3VjY2Vzc2Z1bGx5Lg0KICAgICAgICAgLS1za2lw
LWRvdCAgICAgICBTa2lwIGRpcmVjdG9yaWVzIGluIFBBVEggdGhhdCBzdGFy
dCB3aXRoIGEgZG90Lg0KICAgICAgICAgLS1za2lwLXRpbGRlICAgICBTa2lw
IGRpcmVjdG9yaWVzIGluIFBBVEggdGhhdCBzdGFydCB3aXRoIGEgdGlsZGUu
DQogICAgICAgICAtLXNob3ctZG90ICAgICAgIERvbid0IGV4cGFuZCBhIGRv
dCB0byBjdXJyZW50IGRpcmVjdG9yeSBpbiBvdXRwdXQuDQogICAgICAgICAt
LXNob3ctdGlsZGUgICAgIE91dHB1dCBhIHRpbGRlIGZvciBIT01FIGRpcmVj
dG9yeSBmb3Igbm9uLXJvb3QuDQogICAgICAgICAtLXR0eS1vbmx5ICAgICAg
IFN0b3AgcHJvY2Vzc2luZyBvcHRpb25zIG9uIHRoZSByaWdodCBpZiBub3Qg
b24gdHR5Lg0KICAgICAgICAgLS1hbGwsIC1hICAgICAgICBQcmludCBhbGwg
bWF0Y2hlcyBpbiBQQVRILCBub3QganVzdCB0aGUgZmlyc3QNCiAgICAgICAg
IC0tcmVhZC1hbGlhcywgLWkgUmVhZCBsaXN0IG9mIGFsaWFzZXMgZnJvbSBz
dGRpbi4NCiAgICAgICAgIC0tc2tpcC1hbGlhcyAgICAgSWdub3JlIG9wdGlv
biAtLXJlYWQtYWxpYXM7IGRvbid0IHJlYWQgc3RkaW4uDQogICAgICAgICAt
LXJlYWQtZnVuY3Rpb25zIFJlYWQgc2hlbGwgZnVuY3Rpb25zIGZyb20gc3Rk
aW4uDQogICAgICAgICAtLXNraXAtZnVuY3Rpb25zIElnbm9yZSBvcHRpb24g
LS1yZWFkLWZ1bmN0aW9uczsgZG9uJ3QgcmVhZCBzdGRpbi4NClVzYWdlOiB3
aGljaCBbb3B0aW9uc10gWy0tXSBwcm9ncmFtbmFtZSBbLi4uXQ0KT3B0aW9u
czogLS12ZXJzaW9uLCAtW3ZWXSBQcmludCB2ZXJzaW9uIGFuZCBleGl0IHN1
Y2Nlc3NmdWxseS4NCiAgICAgICAgIC0taGVscCwgICAgICAgICAgUHJpbnQg
dGhpcyBoZWxwIGFuZCBleGl0IHN1Y2Nlc3NmdWxseS4NCiAgICAgICAgIC0t
c2tpcC1kb3QgICAgICAgU2tpcCBkaXJlY3RvcmllcyBpbiBQQVRIIHRoYXQg
c3RhcnQgd2l0aCBhIGRvdC4NCiAgICAgICAgIC0tc2tpcC10aWxkZSAgICAg
U2tpcCBkaXJlY3RvcmllcyBpbiBQQVRIIHRoYXQgc3RhcnQgd2l0aCBhIHRp
bGRlLg0KICAgICAgICAgLS1zaG93LWRvdCAgICAgICBEb24ndCBleHBhbmQg
YSBkb3QgdG8gY3VycmVudCBkaXJlY3RvcnkgaW4gb3V0cHV0Lg0KICAgICAg
ICAgLS1zaG93LXRpbGRlICAgICBPdXRwdXQgYSB0aWxkZSBmb3IgSE9NRSBk
aXJlY3RvcnkgZm9yIG5vbi1yb290Lg0KICAgICAgICAgLS10dHktb25seSAg
ICAgICBTdG9wIHByb2Nlc3Npbmcgb3B0aW9ucyBvbiB0aGUgcmlnaHQgaWYg
bm90IG9uIHR0eS4NCiAgICAgICAgIC0tYWxsLCAtYSAgICAgICAgUHJpbnQg
YWxsIG1hdGNoZXMgaW4gUEFUSCwgbm90IGp1c3QgdGhlIGZpcnN0DQogICAg
ICAgICAtLXJlYWQtYWxpYXMsIC1pIFJlYWQgbGlzdCBvZiBhbGlhc2VzIGZy
b20gc3RkaW4uDQogICAgICAgICAtLXNraXAtYWxpYXMgICAgIElnbm9yZSBv
cHRpb24gLS1yZWFkLWFsaWFzOyBkb24ndCByZWFkIHN0ZGluLg0KICAgICAg
ICAgLS1yZWFkLWZ1bmN0aW9ucyBSZWFkIHNoZWxsIGZ1bmN0aW9ucyBmcm9t
IHN0ZGluLg0KICAgICAgICAgLS1za2lwLWZ1bmN0aW9ucyBJZ25vcmUgb3B0
aW9uIC0tcmVhZC1mdW5jdGlvbnM7IGRvbid0IHJlYWQgc3RkaW4uDQpjb25m
aWd1cmU6IFdBUk5JTkc6IEkgY291bGQgbm90IGRldGVybWluZSBDUElDRkxB
R1MuDQpjb25maWd1cmU6IGVycm9yOiBTZWUgdGhlIGZpbGUgSU5TVEFMTCBm
b3IgbW9yZSBpbmZvcm1hdGlvbi4NCg==
---559023410-959030623-1050952576=:23064--

From pgilbert at bank-banque-canada.ca  Tue Apr 22 00:03:39 2003
From: pgilbert at bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Mon Apr 21 23:04:01 2003
Subject: [Rd] sweave provoked segfault (PR#2809)
Message-ID: <200304212103.h3LL3dpD003892@pubhealth.ku.dk>

This problem is with R 1.7.0 (as released) on Linux and Solaris. Details below
are from Linux, Mandrake 9.1. The problem also happened with R 1.6.2 and on
Mandrake 9.0.

Vignettes often (for me) provokes problems with the misleading error message:

* creating vignettes ... ERROR
Error in sub(pattern, replacement, x, ignore.case, extended) :
        invalid argument
Error in buildVignettes(dir = ".") : Error in sub(pattern, replacement,
x, ignore.case, extended) :
        invalid argument
Execution halted

This becomes a segfault with gctorture(). Output from gdb bt is copied below.

Paul Gilbert
________
R_LIBS=/home/paul/dse/src/pac/monitor/tmp.R-1.7.0:/home/paul/dse/src/pac/CHECKED.R-1.7.0/Rlibs 
PADI=/home/paul/dse/src/pac/padi/exec
PATH=~/bin:/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin:/usr/games:/home/paul/dse/src/pac/padi/exec
R -d gdb
GNU gdb 5.3-22mdk (Mandrake Linux)
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for
details.
This GDB was configured as "i586-mandrake-linux-gnu"...
(gdb) run
Starting program: /home/paul/toolchain/R/R-1.7.0/bin/R.bin
 
R : Copyright 2003, The R Development Core Team
Version 1.7.0  (2003-04-16)
 
R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.
 
R is a collaborative project with many contributors.
Type `contributors()' for more information.
 
Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.
 
 library(tools)
> >  library(tools)
> gctorture()
> checkVignettes(dir='/home/paul/dse/src/pac/monitor', workdir = 'cur',
keepfiles=TRUE)
 
Program received signal SIGSEGV, Segmentation fault.
0x080c1598 in RunGenCollect (size_needed=0) at memory.c:1210
1210        PROCESS_NODES();
(gdb) bt
#0  0x080c1598 in RunGenCollect (size_needed=0) at memory.c:1210
#1  0x080c3089 in R_gc_internal (size_needed=0) at memory.c:1865
#2  0x080c27fe in Rf_cons (car=0xbfffbf40, cdr=0x81f65a0) at
memory.c:1534
#3  0x08097e35 in Rf_duplicate (s=0x8324ff0) at duplicate.c:108
#4  0x080c9abf in GetObject (cptr=0xbfffc2d0) at objects.c:40
#5  0x080ca663 in do_usemethod (call=0x82c5d28, op=0x8209874,
args=0x82c5d44,
    env=0x8f1ecd4) at objects.c:401
#6  0x080a3b28 in Rf_eval (e=0x82c5d28, rho=0x8f1ecd4) at eval.c:418
#7  0x080a3db2 in Rf_applyClosure (call=0x8324ff0, op=0x82c5c48,
    arglist=0x8d05e80, rho=0x8f385f0, suppliedenv=0x81f65a0) at
eval.c:609
#8  0x080a3937 in Rf_eval (e=0x8324ff0, rho=0x8f385f0) at eval.c:453
#9  0x080a586b in Rf_evalList (el=0x8324f9c, rho=0x8f385f0) at
eval.c:1372
#10 0x080c9a3c in do_internal (call=0x8324ef4, op=0x81fb5c8,
args=0x832515c,
    env=0x8f385f0) at names.c:1053
#11 0x080a3b28 in Rf_eval (e=0x8324ef4, rho=0x8f385f0) at eval.c:418
#12 0x080a3db2 in Rf_applyClosure (call=0x878ef30, op=0x8324e14,
    arglist=0x8dbc92c, rho=0x8f0bb0c, suppliedenv=0x81f65a0) at
eval.c:609
#13 0x080a3937 in Rf_eval (e=0x878ef30, rho=0x8f0bb0c) at eval.c:453
#14 0x080a5685 in do_set (call=0x878efd8, op=0x8f0bb0c, args=0x878efa0,
    rho=0x8f0bb0c) at eval.c:1283
#15 0x080a3b28 in Rf_eval (e=0x878efd8, rho=0x8f0bb0c) at eval.c:418
#16 0x080a4f62 in do_begin (call=0x878f4ec, op=0x81fba7c,
args=0x878eff4,
    rho=0x8f0bb0c) at eval.c:1072
---Type <return> to continue, or q <return> to quit---
#17 0x080a3b28 in Rf_eval (e=0x878f4ec, rho=0x8f0bb0c) at eval.c:418
#18 0x080a3db2 in Rf_applyClosure (call=0x87a0758, op=0x86d817c,
    arglist=0x8f0e3dc, rho=0x8f37ed4, suppliedenv=0x81f65a0) at
eval.c:609
#19 0x080a3937 in Rf_eval (e=0x87a0758, rho=0x8f37ed4) at eval.c:453
#20 0x080a5685 in do_set (call=0x87a07e4, op=0x8f37ed4, args=0x87a07c8,
    rho=0x8f37ed4) at eval.c:1283
#21 0x080a3b28 in Rf_eval (e=0x87a07e4, rho=0x8f37ed4) at eval.c:418
#22 0x080a4f62 in do_begin (call=0x87a0aac, op=0x81fba7c,
args=0x87a08c4,
    rho=0x8f37ed4) at eval.c:1072
#23 0x080a3b28 in Rf_eval (e=0x87a0aac, rho=0x8f37ed4) at eval.c:418
#24 0x080a3b28 in Rf_eval (e=0x879b778, rho=0x8f37ed4) at eval.c:418
#25 0x080a3b28 in Rf_eval (e=0x879b970, rho=0x8f37ed4) at eval.c:418
#26 0x080a4f62 in do_begin (call=0x879b98c, op=0x81fba7c,
args=0x879b9e0,
    rho=0x8f37ed4) at eval.c:1072
#27 0x080a3b28 in Rf_eval (e=0x879b98c, rho=0x8f37ed4) at eval.c:418
#28 0x080a495c in do_for (call=0x879ba6c, op=0x81f5f80, args=0x879ba50,
    rho=0x8f37ed4) at eval.c:968
#29 0x080a3b28 in Rf_eval (e=0x879ba6c, rho=0x8f37ed4) at eval.c:418
#30 0x080a4f62 in do_begin (call=0x87a8554, op=0x81fba7c,
args=0x879baa4,
    rho=0x8f37ed4) at eval.c:1072
#31 0x080a3b28 in Rf_eval (e=0x87a8554, rho=0x8f37ed4) at eval.c:418
#32 0x080a3db2 in Rf_applyClosure (call=0x8721b18, op=0x86e693c,
    arglist=0x8f37fd0, rho=0x8f38e74, suppliedenv=0x81f65a0) at
eval.c:609
---Type <return> to continue, or q <return> to quit---
#33 0x080a3937 in Rf_eval (e=0x8721b18, rho=0x8f38e74) at eval.c:453
#34 0x080a3856 in Rf_eval (e=0x8f37ef0, rho=0x8f38cfc) at eval.c:383
#35 0x080a379f in Rf_eval (e=0x826fbf8, rho=0x8f38cfc) at eval.c:360
#36 0x080a4f62 in do_begin (call=0x87d4f44, op=0x81fba7c,
args=0x87d4e9c,
    rho=0x8f38cfc) at eval.c:1072
#37 0x080a3b28 in Rf_eval (e=0x87d4f44, rho=0x8f38cfc) at eval.c:418
#38 0x080a3b28 in Rf_eval (e=0x87d5b3c, rho=0x8f38cfc) at eval.c:418
#39 0x080a4f62 in do_begin (call=0x87d5484, op=0x81fba7c,
args=0x87d5b20,
    rho=0x8f38cfc) at eval.c:1072
#40 0x080a3b28 in Rf_eval (e=0x87d5484, rho=0x8f38cfc) at eval.c:418
#41 0x080a3db2 in Rf_applyClosure (call=0x8721bf8, op=0x87d5a40,
    arglist=0x8f37f0c, rho=0x8f38e74, suppliedenv=0x81f65a0) at
eval.c:609
#42 0x080a3937 in Rf_eval (e=0x8721bf8, rho=0x8f38e74) at eval.c:453
#43 0x080a5685 in do_set (call=0x8721c68, op=0x8f38e74, args=0x8721c4c,
    rho=0x8f38e74) at eval.c:1283
#44 0x080a3b28 in Rf_eval (e=0x8721c68, rho=0x8f38e74) at eval.c:418
#45 0x080a4f62 in do_begin (call=0x8721c84, op=0x81fba7c,
args=0x8721d48,
    rho=0x8f38e74) at eval.c:1072
#46 0x080a3b28 in Rf_eval (e=0x8721c84, rho=0x8f38e74) at eval.c:418
#47 0x080a3b28 in Rf_eval (e=0x87214d0, rho=0x8f38e74) at eval.c:418
#48 0x080a4f62 in do_begin (call=0x8722908, op=0x81fba7c,
args=0x8721540,
    rho=0x8f38e74) at eval.c:1072
#49 0x080a3b28 in Rf_eval (e=0x8722908, rho=0x8f38e74) at eval.c:418
---Type <return> to continue, or q <return> to quit---
#50 0x080a495c in do_for (call=0x8721604, op=0x81f5f80, args=0x87215cc,
    rho=0x8f38e74) at eval.c:968
#51 0x080a3b28 in Rf_eval (e=0x8721604, rho=0x8f38e74) at eval.c:418
#52 0x080a4f62 in do_begin (call=0x87260f8, op=0x81fba7c,
args=0x8721620,
    rho=0x8f38e74) at eval.c:1072
#53 0x080a3b28 in Rf_eval (e=0x87260f8, rho=0x8f38e74) at eval.c:418
#54 0x080a3db2 in Rf_applyClosure (call=0x8f38ec8, op=0x86cd644,
    arglist=0x8f38f38, rho=0x820ce1c, suppliedenv=0x81f65a0) at
eval.c:609
#55 0x080a3937 in Rf_eval (e=0x8f38ec8, rho=0x820ce1c) at eval.c:453
#56 0x080bd784 in Rf_ReplIteration (rho=0x820ce1c, savestack=16,
    browselevel=0, state=0xbffff0f0) at main.c:236
#57 0x080bd942 in R_ReplConsole (rho=0x820ce1c, savestack=0,
browselevel=0)
    at main.c:284
#58 0x080be1ff in run_Rmainloop () at main.c:615
#59 0x08124b5c in main (ac=1, av=0xbffff5c4) at system.c:99
#60 0x400977f7 in __libc_start_main () from /lib/i686/libc.so.6
(gdb)

From leroy at ucsd.edu  Tue Apr 22 07:21:20 2003
From: leroy at ucsd.edu (leroy@ucsd.edu)
Date: Tue Apr 22 06:21:36 2003
Subject: [Rd] Search Engine (PR#2813)
Message-ID: <200304220421.h3M4LKpD005036@pubhealth.ku.dk>

Full_Name: Anthony Westerling
Version: 1.7.0
OS: Mac OS X 10.2.5
Submission from: (NULL) (64.203.9.4)


R includes a very nice search engine web page which installs at
/usr/local/lib/R/doc/html/search/SearchEngine.html.  The search engine and
keywords links do not work on my Mac G4s running OS X 10.2.5, and this appears
to be independent of choice of browser.  This appears to be a Mac-specific
problem with the Java applet.  

I have tried this on three different G4s using IE, Safari, and Mozilla.  Neither
the local file /usr/local/lib/R/doc/html/search/ nor the latest patched version
documentation at http://stat.ethz.ch/R-alpha/R-patched/doc/html/search/SearchEngine.html
works on the Mac, although the latter URL functions perfectly when accessed from
a browser on a windows PC.

This search function is a very nice feature.  Is there a way to use it on a
Macintosh?

Thank you

Anthony Westerling

From deleeuw at stat.ucla.edu  Mon Apr 21 23:41:07 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Tue Apr 22 07:41:22 2003
Subject: [Rd] Search Engine (PR#2813)
In-Reply-To: <200304220421.h3M4LKpD005036@pubhealth.ku.dk>
Message-ID: <03946496-7485-11D7-90C0-000393BB6D36@stat.ucla.edu>

What is your Java version ? Say "s" in the Java Console under the window
menu in Safari to find out. The searchengine applet loads and  
initializes but then gives
a java.lang.OutOfMemory exception -- there seems to be only 1M  
available,
even after garbage collection. I remember the same problem also occurred
in a much earlier version of R, OS X, and Apple's Java, but then went  
away.
Maybe people who use Java 1.3 do not have this problem.

On Monday, Apr 21, 2003, at 21:21 US/Pacific, leroy@ucsd.edu wrote:

> Full_Name: Anthony Westerling
> Version: 1.7.0
> OS: Mac OS X 10.2.5
> Submission from: (NULL) (64.203.9.4)
>
>
> R includes a very nice search engine web page which installs at
> /usr/local/lib/R/doc/html/search/SearchEngine.html.  The search engine  
> and
> keywords links do not work on my Mac G4s running OS X 10.2.5, and this  
> appears
> to be independent of choice of browser.  This appears to be a  
> Mac-specific
> problem with the Java applet.
>
> I have tried this on three different G4s using IE, Safari, and  
> Mozilla.  Neither
> the local file /usr/local/lib/R/doc/html/search/ nor the latest  
> patched version
> documentation at  
> http://stat.ethz.ch/R-alpha/R-patched/doc/html/search/> SearchEngine.html
> works on the Mac, although the latter URL functions perfectly when  
> accessed from
> a browser on a windows PC.
>
> This search function is a very nice feature.  Is there a way to use it  
> on a
> Macintosh?
>
> Thank you
>
> Anthony Westerling
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From alexg at trwim.com  Tue Apr 22 14:28:43 2003
From: alexg at trwim.com (alexg@trwim.com)
Date: Tue Apr 22 13:29:10 2003
Subject: [Rd] 
	get.hist.quote in tseries stops not working under 1.7 (PR#2815)
Message-ID: <200304221128.h3MBShpD010671@pubhealth.ku.dk>

Full_Name: Alexander Gracian
Version: 1.70
OS: Windows 2000
Submission from: (NULL) (217.158.140.82)


I have just upgraded to v1.7 from v.162 & updates the tseries package. what ever
I try I get the message:
Error in Ops.difftime(jdat - jdat[n], 1) : 
        both arguments of + must be difftime object

Log pasted below....

   `tseries' version: 0.9-10 
 
        `tseries' is a package for time series analysis
         and computational finance.
         See `library (help=tseries)' for details.

> x <- get.hist.quote(instrument = "^spc", start = "1998-01-01",
+                     quote = "Close")
trying URL `http://chart.yahoo.com/table.csv?s=^spc&a=0&b=01&c=1998&d=3&e=21&f=2003&g=d&q=q&y=0&z=^spc&x=.csv'
Content type `application/octet-stream' length unknown
opened URL
downloaded 64Kb

time series starts 1998-01-02
Error in Ops.difftime(jdat - jdat[n], 1) : 
        both arguments of + must be difftime objects

From phgrosjean at sciviews.org  Tue Apr 22 15:34:20 2003
From: phgrosjean at sciviews.org (phgrosjean@sciviews.org)
Date: Tue Apr 22 14:34:36 2003
Subject: [Rd] Handling of upper/lowercase in package names (PR#2816)
Message-ID: <200304221234.h3MCYKpD011790@pubhealth.ku.dk>

Hi,

This is (presumably?) a bug in R 1.7.0 under Windows. I have not tested it
on other systems. Attachment of packages is case sensitive but not
library(), resulting in multiple loadings of the same package if the library
name is spelled differently. The following example loads the `tools'
package, once as `tools' and once as `Tools'. This behavior is the same with
all packages and it occurs also in R 1.6.2.

> library(tools)
> search()
 [1] ".GlobalEnv"      "package:tools"   "package:methods" "package:ctest"
"package:mva"
 [6] "package:modreg"  "package:nls"     "package:ts"      "Autoloads"
"package:base"
> library(Tools)

Attaching package 'Tools':


        The following object(s) are masked from package:tools :

         .checkDemoIndex .checkVignetteIndex .installMD5sums
.installPackageDescription .installPackageIndices buildVignettes
checkAssignFuns checkDocArgs checkDocStyle checkFF checkMD5sums checkMethods
checkTnF checkVignettes codoc md5sum pkgVignettes print.checkAssignFuns
print.checkDemoIndex print.checkDocArgs print.checkDocStyle print.checkFF
print.checkMethods print.checkTnF print.checkVignetteIndex
print.checkVignettes print.codoc print.undoc Rdindex Rtangle RtangleSetup
RtangleWritedoc RweaveLatex RweaveLatexOptions RweaveLatexSetup Stangle
Sweave SweaveSyntaxLatex SweaveSyntaxNoweb SweaveSyntConv undoc

> search()
 [1] ".GlobalEnv"      "package:Tools"   "package:tools"   "package:methods"
"package:ctest"
 [6] "package:mva"     "package:modreg"  "package:nls"     "package:ts"
"Autoloads"
[11] "package:base"


Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows XP Professional (build 2600) Service Pack 0.0

Search Path:
 .GlobalEnv, package:Tools, package:tools, package:methods, package:ctest,
package:mva, package:modreg, package:nls, package:ts, Autoloads,
package:base

Best,

Philippe Grosjean

...........]<(({<...............<}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Ocanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................

From murdoch at stats.uwo.ca  Tue Apr 22 17:06:02 2003
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue Apr 22 16:06:22 2003
Subject: [Rd]  Rgui crashes after setting par(ask=TRUE) and using lattice
	(PR#2801)
Message-ID: <200304221406.h3ME62pD013238@pubhealth.ku.dk>

On Sun, 20 Apr 2003 21:01:41 +0200 (MET DST), you wrote in message
<200304201901.h3KJ1fpD029439@pubhealth.ku.dk>:

>Full_Name: Scot McNary
>Version: 1.7
>OS: Windows 98se
>Submission from: (NULL) (134.192.131.246)
>
>
>Hi,
>
>Rgui causes a page fault when asking for lattice graphics after setting
>par(ask=TRUE).  This doesn't happen in 1.6.2, but does in 1.7.0.
>
>library(lattice)
>par(ask=TRUE)
>example(dotplot)
>
>Windows "Details" about crash:
>
>RGUI caused an invalid page fault in
>module R.DLL at 017f:00421ce0.
>Registers:
>EAX=00421cd0 CS=017f EIP=00421ce0 EFLGS=00010206
>EBX=017b9e18 SS=0187 ESP=0096d7b4 EBP=0096d7d8
>ECX=1177ab43 DS=0187 ESI=0096d8c8 FS=8397
>EDX=00000000 ES=0187 EDI=0096d8d0 GS=0000
>Bytes at CS:EIP:
>8b 9a d0 00 00 00 52 d9 7d fa dc 05 c0 1c 42 00 
>Stack dump:
>00000003 00000000 0096d820 01be3200 17b70d3f 0c705027 88080012 01387cf4 017b9e18
>0096d838 11771699 0096d818 0096d820 0096d828 0096d830 01c1e6e8 
>

I don't get this error in Win98 either.  My guess is that it's your
video driver; I don't know why this would happen in 1.7.0 and not
1.6.2, but lattice has changed, and it might be doing something now
that uncovers a bug that was hidden before.  The address of the error
is in R's graphics driver code.

Could you try to see if there's a newer version of your driver
available, or try to see if you can reproduce the bug on a different
machine?  

Another thing that might work is to set options(warn.FPU=TRUE).  This
will enable checking whenever you load a DLL (which many library
packages do) to see if the floating point control word has changed.
If your video driver is messing with it (a common kind of bug), then
you'll likely see warnings popping up.

Duncan Murdoch

From bert_gunter at merck.com  Tue Apr 22 18:23:27 2003
From: bert_gunter at merck.com (bert_gunter@merck.com)
Date: Tue Apr 22 17:23:46 2003
Subject: [Rd] Weird Windows startup menu display problem in 1.7.0 (PR#2817)
Message-ID: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>

Folks:

Winnt; R1.7.0 (freshly installed) running under Rgui.exe.,MDI=yes.

The following is repeatable:
On startup, in my Rprofile.site file, I use winMenuAdd() etc. to install
some user menus. However, they do not appear when R GUI window opens. If I
minimize and restore the window, the added menus now are present.

The exact same procedure under 1.6.2 with exactly the same Rprofile.site and
Rconsole files works fine.

Have fun.

Cheers,

Bert Gunter
Biometrics Research RY 84-16
Merck & Company
P.O. Box 2000
Rahway, NJ 07065-0900
Phone: (732) 594-7765
mailto: bert_gunter@merck.com

"The business of the statistician is to catalyze the scientific learning
process."      -- George E.P. Box

From hb at maths.lth.se  Tue Apr 22 18:23:28 2003
From: hb at maths.lth.se (hb@maths.lth.se)
Date: Tue Apr 22 17:24:03 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
Message-ID: <200304221523.h3MFNSpD013853@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.7.0
OS: WinXP Pro
Submission from: (NULL) (130.235.2.229)


There seems to be an upper limit of the number of files (approx 1000 files) a
zip-file can contain when unpacking it with zip.unpack(). This results in an R
crash. This bug is urgent since install.packages() relies on zip.unpack() and
too big packages/bundles won't install with the current R v1.7.0 for Windows.

The following R script creates a directory with N files and zips it and tries to
unpack it again. Try with a large number on N (N=1003 is probably enough) and R
will crash. The traceback from Dr. Mingw is pasted at the end.

# 1. Running the script several times with N = 900 crashes R or generates 
# the error:
# Error in zip.unpack("dir.zip", "c:/tmp") :
#        can not set length of non-vector
# 2. Running the script twice with N = 1002 crashes R
# 3. Running the script twice with N = 1003 crashes R (every time?)
# 4. Running the script twice with N = 2000 crashes R (every time!)
N <- 1003

# Create an directory with N files
dest <- "dir"
dir.create(dest)
files <- list.files(dest)
nMissing <- (N - length(files))
if (nMissing > 0) {
  idx <- (length(files)+1):N
  filename <- sapply(as.integer(idx), FUN=sprintf, fmt="file%05d.txt")
  pathname <- paste(dest, filename, sep="/")
  for (k in seq(pathname))
    cat(file=pathname[k], 0)
}

# Create a zip archive of the directory
zipper <- "C:/cygwin/bin/jar -cfM"
cmd <- paste(zipper, " ", dest, ".zip", " ", dest, sep="")
system(cmd)

# Unse zip.unpack(), which is used by install.packages(), to unpack it.
zip.unpack("dir.zip", "c:/tmp")


# From Dr. Mingw:
# Rterm.exe caused an Access Violation at location 004d2a04 in module R.dll
Writing to location 0235f4cc.
# 
# Registers:
# eax=0235f4c8 ebx=0235e508 ecx=0235a511 edx=00000fc0 esi=00637b90 edi=80000000
# eip=004d2a04 esp=0022c840 ebp=0022c868 iopl=0         nv up ei pl nz na po nc
# cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000206
# 
# Call stack:
# 004D2A04  R.dll:004D2A04  malloc
# 0054FEFA  R.dll:0054FEFA  Rf_allocVector
# 0051AA10  R.dll:0051AA10  call_S
# 0051ABB7  R.dll:0051ABB7  call_S
# 0051AF18  R.dll:0051AF18  do_int_unzip
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052CCE6  R.dll:0052CCE6  do_eval
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052C2D5  R.dll:0052C2D5  do_set
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052B427  R.dll:0052B427  do_for
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0054996E  R.dll:0054996E  Rf_ReplIteration
# 00549F72  R.dll:00549F72  Rf_ReplIteration
# 0054AA76  R.dll:0054AA76  run_Rmainloop
# 00401571  Rterm.exe:00401571
# 0040141E  Rterm.exe:0040141E
# 004017B3  Rterm.exe:004017B3
# 00401165  Rterm.exe:00401165
# 00401013  Rterm.exe:00401013
# 77E814C7  kernel32.dll:77E814C7  GetCurrentDirectoryW


# Platform (a fresh R installation):
#  > R.version
#  	    _
#  platform i386-pc-mingw32
#  arch     i386
#  os       mingw32
#  system   i386, mingw32
#  status
#  major    1
#  minor    7.0
#  year     2003
#  month    04
#  day      16
#  language R

From hb at maths.lth.se  Tue Apr 22 18:27:20 2003
From: hb at maths.lth.se (hb@maths.lth.se)
Date: Tue Apr 22 17:27:54 2003
Subject: [Rd] zip.unpack() crashes R (PR#2820)
Message-ID: <200304221527.h3MFRKpD013891@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.7.0
OS: WinXP Pro
Submission from: (NULL) (130.235.2.229)


There seems to be an upper limit of the number of files (approx 1000 files) a
zip-file can contain when unpacking it with zip.unpack(). This results in an R
crash. This bug is urgent since install.packages() relies on zip.unpack() and
too big packages/bundles won't install with the current R v1.7.0 for Windows.

The following R script creates a directory with N files and zips it and tries to
unpack it again. Try with a large number on N (N=1003 is probably enough) and R
will crash. The traceback from Dr. Mingw is pasted at the end.

# 1. Running the script several times with N = 900 crashes R or generates 
# the error:
# Error in zip.unpack("dir.zip", "c:/tmp") :
#        can not set length of non-vector
# 2. Running the script twice with N = 1002 crashes R
# 3. Running the script twice with N = 1003 crashes R (every time?)
# 4. Running the script twice with N = 2000 crashes R (every time!)
N <- 1003

# Create an directory with N files
dest <- "dir"
dir.create(dest)
files <- list.files(dest)
nMissing <- (N - length(files))
if (nMissing > 0) {
  idx <- (length(files)+1):N
  filename <- sapply(as.integer(idx), FUN=sprintf, fmt="file%05d.txt")
  pathname <- paste(dest, filename, sep="/")
  for (k in seq(pathname))
    cat(file=pathname[k], 0)
}

# Create a zip archive of the directory
zipper <- "C:/cygwin/bin/jar -cfM"
cmd <- paste(zipper, " ", dest, ".zip", " ", dest, sep="")
system(cmd)

# Unse zip.unpack(), which is used by install.packages(), to unpack it.
zip.unpack("dir.zip", "c:/tmp")


# From Dr. Mingw:
# Rterm.exe caused an Access Violation at location 004d2a04 in module R.dll
Writing to location 0235f4cc.
# 
# Registers:
# eax=0235f4c8 ebx=0235e508 ecx=0235a511 edx=00000fc0 esi=00637b90 edi=80000000
# eip=004d2a04 esp=0022c840 ebp=0022c868 iopl=0         nv up ei pl nz na po nc
# cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000206
# 
# Call stack:
# 004D2A04  R.dll:004D2A04  malloc
# 0054FEFA  R.dll:0054FEFA  Rf_allocVector
# 0051AA10  R.dll:0051AA10  call_S
# 0051ABB7  R.dll:0051ABB7  call_S
# 0051AF18  R.dll:0051AF18  do_int_unzip
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052CCE6  R.dll:0052CCE6  do_eval
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052C2D5  R.dll:0052C2D5  do_set
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052B427  R.dll:0052B427  do_for
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0054996E  R.dll:0054996E  Rf_ReplIteration
# 00549F72  R.dll:00549F72  Rf_ReplIteration
# 0054AA76  R.dll:0054AA76  run_Rmainloop
# 00401571  Rterm.exe:00401571
# 0040141E  Rterm.exe:0040141E
# 004017B3  Rterm.exe:004017B3
# 00401165  Rterm.exe:00401165
# 00401013  Rterm.exe:00401013
# 77E814C7  kernel32.dll:77E814C7  GetCurrentDirectoryW


# Platform (a fresh R installation):
#  > R.version
#  	    _
#  platform i386-pc-mingw32
#  arch     i386
#  os       mingw32
#  system   i386, mingw32
#  status
#  major    1
#  minor    7.0
#  year     2003
#  month    04
#  day      16
#  language R

From hb at maths.lth.se  Tue Apr 22 18:27:42 2003
From: hb at maths.lth.se (hb@maths.lth.se)
Date: Tue Apr 22 17:28:18 2003
Subject: [Rd] zip.unpack() crashes R (PR#2821)
Message-ID: <200304221527.h3MFRgpD013898@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.7.0
OS: WinXP Pro
Submission from: (NULL) (130.235.2.229)


There seems to be an upper limit of the number of files (approx 1000 files) a
zip-file can contain when unpacking it with zip.unpack(). This results in an R
crash. This bug is urgent since install.packages() relies on zip.unpack() and
too big packages/bundles won't install with the current R v1.7.0 for Windows.

The following R script creates a directory with N files and zips it and tries to
unpack it again. Try with a large number on N (N=1003 is probably enough) and R
will crash. The traceback from Dr. Mingw is pasted at the end.

# 1. Running the script several times with N = 900 crashes R or generates 
# the error:
# Error in zip.unpack("dir.zip", "c:/tmp") :
#        can not set length of non-vector
# 2. Running the script twice with N = 1002 crashes R
# 3. Running the script twice with N = 1003 crashes R (every time?)
# 4. Running the script twice with N = 2000 crashes R (every time!)
N <- 1003

# Create an directory with N files
dest <- "dir"
dir.create(dest)
files <- list.files(dest)
nMissing <- (N - length(files))
if (nMissing > 0) {
  idx <- (length(files)+1):N
  filename <- sapply(as.integer(idx), FUN=sprintf, fmt="file%05d.txt")
  pathname <- paste(dest, filename, sep="/")
  for (k in seq(pathname))
    cat(file=pathname[k], 0)
}

# Create a zip archive of the directory
zipper <- "C:/cygwin/bin/jar -cfM"
cmd <- paste(zipper, " ", dest, ".zip", " ", dest, sep="")
system(cmd)

# Unse zip.unpack(), which is used by install.packages(), to unpack it.
zip.unpack("dir.zip", "c:/tmp")


# From Dr. Mingw:
# Rterm.exe caused an Access Violation at location 004d2a04 in module R.dll
Writing to location 0235f4cc.
# 
# Registers:
# eax=0235f4c8 ebx=0235e508 ecx=0235a511 edx=00000fc0 esi=00637b90 edi=80000000
# eip=004d2a04 esp=0022c840 ebp=0022c868 iopl=0         nv up ei pl nz na po nc
# cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000206
# 
# Call stack:
# 004D2A04  R.dll:004D2A04  malloc
# 0054FEFA  R.dll:0054FEFA  Rf_allocVector
# 0051AA10  R.dll:0051AA10  call_S
# 0051ABB7  R.dll:0051ABB7  call_S
# 0051AF18  R.dll:0051AF18  do_int_unzip
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052CCE6  R.dll:0052CCE6  do_eval
# 00559594  R.dll:00559594  do_internal
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0052C2D5  R.dll:0052C2D5  do_set
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052B427  R.dll:0052B427  do_for
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052BA52  R.dll:0052BA52  do_begin
# 0052A3C8  R.dll:0052A3C8  Rf_eval
# 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
# 0052A1D7  R.dll:0052A1D7  Rf_eval
# 0054996E  R.dll:0054996E  Rf_ReplIteration
# 00549F72  R.dll:00549F72  Rf_ReplIteration
# 0054AA76  R.dll:0054AA76  run_Rmainloop
# 00401571  Rterm.exe:00401571
# 0040141E  Rterm.exe:0040141E
# 004017B3  Rterm.exe:004017B3
# 00401165  Rterm.exe:00401165
# 00401013  Rterm.exe:00401013
# 77E814C7  kernel32.dll:77E814C7  GetCurrentDirectoryW


# Platform (a fresh R installation):
#  > R.version
#  	    _
#  platform i386-pc-mingw32
#  arch     i386
#  os       mingw32
#  system   i386, mingw32
#  status
#  major    1
#  minor    7.0
#  year     2003
#  month    04
#  day      16
#  language R

From hb at maths.lth.se  Tue Apr 22 18:30:51 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Tue Apr 22 17:30:59 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
In-Reply-To: <200304221523.h3MFNSpD013853@pubhealth.ku.dk>
Message-ID: <000a01c308e4$28c76df0$e502eb82@alpha.wehi.edu.au>

Sorry for the reposting of PR #2818 (PR #2820 and PR #2821). It's
because I did reload in my browser after posting the bug report. In
other words, PR #2818 == PR #2820 == PR #2821.

/Henrik

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of 
> hb@maths.lth.se
> Sent: den 22 april 2003 17:23
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] zip.unpack() crashes R (PR#2818)
> 
> 
> Full_Name: Henrik Bengtsson
> Version: R v1.7.0
> OS: WinXP Pro
> Submission from: (NULL) (130.235.2.229)
> 
> 
> There seems to be an upper limit of the number of files 
> (approx 1000 files) a zip-file can contain when unpacking it 
> with zip.unpack(). This results in an R crash. This bug is 
> urgent since install.packages() relies on zip.unpack() and 
> too big packages/bundles won't install with the current R 
> v1.7.0 for Windows.
> 
> The following R script creates a directory with N files and 
> zips it and tries to unpack it again. Try with a large number 
> on N (N=1003 is probably enough) and R will crash. The 
> traceback from Dr. Mingw is pasted at the end.
> 
> # 1. Running the script several times with N = 900 crashes R 
> or generates 
> # the error:
> # Error in zip.unpack("dir.zip", "c:/tmp") :
> #        can not set length of non-vector
> # 2. Running the script twice with N = 1002 crashes R
> # 3. Running the script twice with N = 1003 crashes R (every 
> time?) # 4. Running the script twice with N = 2000 crashes R 
> (every time!) N <- 1003
> 
> # Create an directory with N files
> dest <- "dir"
> dir.create(dest)
> files <- list.files(dest)
> nMissing <- (N - length(files))
> if (nMissing > 0) {
>   idx <- (length(files)+1):N
>   filename <- sapply(as.integer(idx), FUN=sprintf, fmt="file%05d.txt")
>   pathname <- paste(dest, filename, sep="/")
>   for (k in seq(pathname))
>     cat(file=pathname[k], 0)
> }
> 
> # Create a zip archive of the directory
> zipper <- "C:/cygwin/bin/jar -cfM"
> cmd <- paste(zipper, " ", dest, ".zip", " ", dest, sep="")
> system(cmd)
> 
> # Unse zip.unpack(), which is used by install.packages(), to 
> unpack it. zip.unpack("dir.zip", "c:/tmp")
> 
> 
> # From Dr. Mingw:
> # Rterm.exe caused an Access Violation at location 004d2a04 
> in module R.dll Writing to location 0235f4cc. # 
> # Registers:
> # eax=0235f4c8 ebx=0235e508 ecx=0235a511 edx=00000fc0 
> esi=00637b90 edi=80000000
> # eip=004d2a04 esp=0022c840 ebp=0022c868 iopl=0         nv up 
> ei pl nz na po nc
> # cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000        
>      efl=00000206
> # 
> # Call stack:
> # 004D2A04  R.dll:004D2A04  malloc
> # 0054FEFA  R.dll:0054FEFA  Rf_allocVector
> # 0051AA10  R.dll:0051AA10  call_S
> # 0051ABB7  R.dll:0051ABB7  call_S
> # 0051AF18  R.dll:0051AF18  do_int_unzip
> # 00559594  R.dll:00559594  do_internal
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052BA52  R.dll:0052BA52  do_begin
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052BA52  R.dll:0052BA52  do_begin
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052BA52  R.dll:0052BA52  do_begin
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
> # 0052A1D7  R.dll:0052A1D7  Rf_eval
> # 0052CCE6  R.dll:0052CCE6  do_eval
> # 00559594  R.dll:00559594  do_internal
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
> # 0052A1D7  R.dll:0052A1D7  Rf_eval
> # 0052C2D5  R.dll:0052C2D5  do_set
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052BA52  R.dll:0052BA52  do_begin
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052B427  R.dll:0052B427  do_for
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052BA52  R.dll:0052BA52  do_begin
> # 0052A3C8  R.dll:0052A3C8  Rf_eval
> # 0052A6B5  R.dll:0052A6B5  Rf_applyClosure
> # 0052A1D7  R.dll:0052A1D7  Rf_eval
> # 0054996E  R.dll:0054996E  Rf_ReplIteration
> # 00549F72  R.dll:00549F72  Rf_ReplIteration
> # 0054AA76  R.dll:0054AA76  run_Rmainloop
> # 00401571  Rterm.exe:00401571
> # 0040141E  Rterm.exe:0040141E
> # 004017B3  Rterm.exe:004017B3
> # 00401165  Rterm.exe:00401165
> # 00401013  Rterm.exe:00401013
> # 77E814C7  kernel32.dll:77E814C7  GetCurrentDirectoryW
> 
> 
> # Platform (a fresh R installation):
> #  > R.version
> #  	    _
> #  platform i386-pc-mingw32
> #  arch     i386
> #  os       mingw32
> #  system   i386, mingw32
> #  status
> #  major    1
> #  minor    7.0
> #  year     2003
> #  month    04
> #  day      16
> #  language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
> 
>

From ligges at statistik.uni-dortmund.de  Tue Apr 22 19:44:20 2003
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue Apr 22 18:44:39 2003
Subject: [Rd] Handling of upper/lowercase in package names (PR#2816)
Message-ID: <200304221644.h3MGiKpD014259@pubhealth.ku.dk>

phgrosjean@sciviews.org wrote:
> Hi,
> 
> This is (presumably?) a bug in R 1.7.0 under Windows. I have not tested it
> on other systems. Attachment of packages is case sensitive but not
> library(), resulting in multiple loadings of the same package if the library
> name is spelled differently. The following example loads the `tools'
> package, once as `tools' and once as `Tools'. This behavior is the same with
> all packages and it occurs also in R 1.6.2.

Two ways of fixing it, check in library() for .Platform$OS.type == "windows"

a) whether a package was attached by non-case sensitive spelling, e.g.:
     match(tolower(pckname), tolower(search))

b)  for correct (case sensitive) spelling of the package name, e.g. by 
reading the DESCRIPTION file *before* attaching the package.

Each one way seems to be easy, but which is preferred R-Core?
a) won't break windows specific code, b) might do so, but is more 
consistent.

Uwe Ligges

> 
>>library(tools)
>>search()
> 
>  [1] ".GlobalEnv"      "package:tools"   "package:methods" "package:ctest"
> "package:mva"
>  [6] "package:modreg"  "package:nls"     "package:ts"      "Autoloads"
> "package:base"
> 
>>library(Tools)
> 
> 
> Attaching package 'Tools':
> 
> 
>         The following object(s) are masked from package:tools :
> 
>          .checkDemoIndex .checkVignetteIndex .installMD5sums
> .installPackageDescription .installPackageIndices buildVignettes
> checkAssignFuns checkDocArgs checkDocStyle checkFF checkMD5sums checkMethods
> checkTnF checkVignettes codoc md5sum pkgVignettes print.checkAssignFuns
> print.checkDemoIndex print.checkDocArgs print.checkDocStyle print.checkFF
> print.checkMethods print.checkTnF print.checkVignetteIndex
> print.checkVignettes print.codoc print.undoc Rdindex Rtangle RtangleSetup
> RtangleWritedoc RweaveLatex RweaveLatexOptions RweaveLatexSetup Stangle
> Sweave SweaveSyntaxLatex SweaveSyntaxNoweb SweaveSyntConv undoc
> 
> 
>>search()
> 
>  [1] ".GlobalEnv"      "package:Tools"   "package:tools"   "package:methods"
> "package:ctest"
>  [6] "package:mva"     "package:modreg"  "package:nls"     "package:ts"
> "Autoloads"
> [11] "package:base"
> 
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
> 
> Windows XP Professional (build 2600) Service Pack 0.0
> 
> Search Path:
>  .GlobalEnv, package:Tools, package:tools, package:methods, package:ctest,
> package:mva, package:modreg, package:nls, package:ts, Autoloads,
> package:base
> 
> Best,
> 
> Philippe Grosjean
> 
> ...........]<(({?<...............<?}))><...............................
>  ) ) ) ) )
> ( ( ( ( (       Dr. Philippe Grosjean
>  ) ) ) ) )
> ( ( ( ( (       LOV, UMR 7093
>  ) ) ) ) )      Station Zoologique
> ( ( ( ( (       Observatoire Oc?anologique
>  ) ) ) ) )      BP 28
> ( ( ( ( (       06234 Villefranche sur mer cedex
>  ) ) ) ) )      France
> ( ( ( ( (
>  ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
> ( ( ( ( (
>  ) ) ) ) )      e-mail: phgrosjean@sciviews.org
> ( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
>  ) ) ) ) )
> .......................................................................
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Tue Apr 22 19:56:12 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue Apr 22 18:56:09 2003
Subject: [Rd] Weird Windows startup menu display problem in 1.7.0
	(PR#2817)
In-Reply-To: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>
References: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>
Message-ID: <3EA5742C.9030900@statistik.uni-dortmund.de>

bert_gunter@merck.com wrote:
> Folks:
> 
> Winnt; R1.7.0 (freshly installed) running under Rgui.exe.,MDI=yes.
> 
> The following is repeatable:
> On startup, in my Rprofile.site file, I use winMenuAdd() etc. to install
> some user menus. However, they do not appear when R GUI window opens. If I
> minimize and restore the window, the added menus now are present.

Confirmed. Some GUI redrawing events have been cleaned up (I'm quite 
sure I have read about it) -- probably one too much.
Duncan and/or Brian surely know where to fix that (comparing with the 
R-1.6.2 sources will give a hint, if you are going to debug yourself).

Uwe Ligges



> The exact same procedure under 1.6.2 with exactly the same Rprofile.site and
> Rconsole files works fine.
> 
> Have fun.
> 
> Cheers,
> 
> Bert Gunter
> Biometrics Research RY 84-16
> Merck & Company
> P.O. Box 2000
> Rahway, NJ 07065-0900
> Phone: (732) 594-7765
> mailto: bert_gunter@merck.com
> 
> "The business of the statistician is to catalyze the scientific learning
> process."      -- George E.P. Box
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From p.dalgaard at biostat.ku.dk  Tue Apr 22 20:10:14 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 22 19:07:57 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
In-Reply-To: <200304221523.h3MFNSpD013853@pubhealth.ku.dk>
References: <200304221523.h3MFNSpD013853@pubhealth.ku.dk>
Message-ID: <x2ist6bgqx.fsf@biostat.ku.dk>

hb@maths.lth.se writes:

> # 1. Running the script several times with N = 900 crashes R or generates 
> # the error:
> # Error in zip.unpack("dir.zip", "c:/tmp") :
> #        can not set length of non-vector
> # 2. Running the script twice with N = 1002 crashes R
> # 3. Running the script twice with N = 1003 crashes R (every time?)
> # 4. Running the script twice with N = 2000 crashes R (every time!)
> N <- 1003
....
> # Unse zip.unpack(), which is used by install.packages(), to unpack it.
> zip.unpack("dir.zip", "c:/tmp")

Reproducible on Linux with

.Internal(int.unzip("dir.zip",NULL, "/tmp"))

instead of zip.unpack.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From murdoch at stats.uwo.ca  Tue Apr 22 14:11:22 2003
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue Apr 22 19:09:35 2003
Subject: [Rd] Weird Windows startup menu display problem in 1.7.0
	(PR#2817)
In-Reply-To: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>
References: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>
Message-ID: <jrtaav86okn6qdkncb8uo1um3c93knlg3r@4ax.com>

On Tue, 22 Apr 2003 17:23:27 +0200 (MET DST), you wrote in message
<200304221523.h3MFNRpD013846@pubhealth.ku.dk>:

>Folks:
>
>Winnt; R1.7.0 (freshly installed) running under Rgui.exe.,MDI=yes.
>
>The following is repeatable:
>On startup, in my Rprofile.site file, I use winMenuAdd() etc. to install
>some user menus. However, they do not appear when R GUI window opens. If I
>minimize and restore the window, the added menus now are present.

Thanks for the report.  I can reproduce this.  Interestingly, it only
happens in MDI mode; with --sdi on the command line things behave
properly.

Duncan Murdoch

From ml-it-r-devel at epigenomics.com  Tue Apr 22 20:38:11 2003
From: ml-it-r-devel at epigenomics.com (Matthias Burger)
Date: Tue Apr 22 19:38:24 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
   --with-lapack option
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
	<6ry929eye0.fsf@bates4.stat.wisc.edu>
	<20030417191950.GA12963@sonny.eddelbuettel.com>
	<16033.38796.844040.879450@mithrandir.hornik.net>
Message-ID: <news2mail-3EA57E03.5090006@epigenomics.com>


Hi again,

first I'd like to thank you for the prompt replies and insights.

So here is my next attempt log:
After some conversation with my local sys admins I convinced them to install gcc 
3.2.2 (also g++ and g77 for that version) compiled for Debain woody stable (!) 
as that is our site wide system setup.

And yes I simply had forgotten to set the correct g77 version (thanks to Dirk 
for pointing this out).

As we have now one central installation point for R (and not on each host 
individually) I cannot use the Debian package system I believe. Even if so I do 
not have root access and thus have to stick to comile myself from src.

So after some experimenting my host now is configured with packages
blas  &  blas-dev (Version: 1.1-9)
lapack2 & lapack2-dev (Version: 3.0.20000531a-18)
and
atlas2-sse2 & atlas2-sse2-dev (Version: 3.2.1ln-7)

exporting the gcc variables, make distclean

configure (see below)

make
runs through but
make check
fails with the same error in base.R as reported earlier.

ldd bin/R.bin reports

kuhn burger 243 (R/R-1.7.0-inst): ldd bin/R.bin
         libblas.so.2 => /usr/lib/sse2/atlas/libblas.so.2 (0x40027000
         libg2c.so.0 => /usr/lib/libg2c.so.0 (0x403fd000)
         libm.so.6 => /lib/libm.so.6 (0x40419000)
         libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x4043b000)
         libpcre.so.3 => /usr/lib/libpcre.so.3 (0x40443000)
         libbz2.so.1.0 => /usr/lib/libbz2.so.1.0 (0x4044c000)
         libz.so.1 => /usr/lib/libz.so.1 (0x4045c000)
         libreadline.so.4 => /lib/libreadline.so.4 (0x4046c000)
         libdl.so.2 => /lib/libdl.so.2 (0x40492000)
         libncurses.so.5 => /lib/libncurses.so.5 (0x40496000)
         libc.so.6 => /lib/libc.so.6 (0x404d4000)
         /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)

  so it seems to find the libblas
but starting R and doing the same I get

 >system("ldd bin/R.bin")
         libblas.so.2 => /usr/lib/gcc-lib/i386-linux/3.2.2/../../../libblas.so.2 
(0x40016000)
         libg2c.so.0 => /usr/lib/gcc-lib/i386-linux/3.2.2/../../../libg2c.so.0 
(0x40079000)
         libm.so.6 => /lib/libm.so.6 (0x400a6000)
[...]

even if I set
export LD_LIBRARY_PATH=/usr/lib/sse2/atlas:$LD_LIBRARY_PATH
I get the same picture.

Now I have no further knowledge how to check & persuade the run time linker to 
pick up the correct libs. In any case I believ this to be the cause of the 
failure or am I grossly mistaken?

Any suggestions what I could try next (or just leave it and  waive lapack support) ?


Regards,

   Matthias



details:

kuhn burger 249 (R/R-1.7.0-inst): /usr/bin/gcc-3.2 --version
gcc-3.2 (GCC) 3.2.2
Copyright (C) 2002 Free Software Foundation, Inc.


    ./configure --prefix=/mnt/local/R/R-1.7.0-gcc-3.2.2-atlas2-sse2 
--enable-R-profiling=yes --enable-R-shlib=yes --with-f77 --with-blas=yes 
--with-lapack=yes  --with-readline=yes --with-tcltk=/usr/include/tcl8.3 
--with-tcl-config=/usr/lib/tcl8.3/tclConfig.sh 
--with-tk-config=/usr/lib/tk8.3/tkConfig.sh --enable-shared --with-pic --with-x 
--with-gnome --with-gnome-includes=/usr/include/gnome-1.0 
--with-recommended-packages=/mnt/local/R/R-1.7.0-recommended-inst 
--with-aqua=yes  --with-libpng=yes --with-jpeglib=yes --with-zlib=yes 
--with-bzlib=yes --with-pcre=yes --with-libglade-config=/usr/bin/libglade-config



R is now configured for i686-pc-linux-gnu

   Source directory:          .
   Installation directory:    /mnt/local/R/R-1.7.0-gcc-3.2.2-atlas2-sse2

   C compiler:                /usr/bin/gcc-3.2 -D__NO_MATH_INLINES -mieee-fp -g -O2
   C++ compiler:              /usr/bin/g++-3.2 -mieee-fp -g -O2
   Fortran compiler:          /usr/bin/g77-3.2 -mieee-fp -g -O2

   Interfaces supported:      X11, gnome, tcltk
   External libraries:        readline, BLAS(generic), LAPACK(generic)
   Additional capabilities:   PNG, JPEG, bzip2, PCRE
   Options enabled:           shared library, R profiling

   Recommended packages:      no

Kurt Hornik wrote:
>>>>>>Dirk Eddelbuettel writes:
>>>>>
> 
>>...
> 
> 
[...]
> 
> Best
> -k
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


-- 
Matthias Burger

Bioinformatics R&D
Epigenomics AG                      www.epigenomics.com
Kleine Pr?sidentenstra?e 1          fax:   +49-30-24345-555
10178 Berlin Germany                phone: +49-30-24345-0

From hornik at ci.tuwien.ac.at  Tue Apr 22 20:44:12 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Tue Apr 22 19:47:00 2003
Subject: [Rd] building R 1.7.0 under RH7.3 (PR#2808)
In-Reply-To: <200304211917.h3LJH5pD003494@pubhealth.ku.dk>
References: <200304211917.h3LJH5pD003494@pubhealth.ku.dk>
Message-ID: <16037.32620.853828.955013@mithrandir.hornik.net>

>>>>> thoar  writes:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.

> ---559023410-959030623-1050952576=:23064
> Content-Type: TEXT/PLAIN; charset=US-ASCII

> The configure process does not seem to be working as well as it had
> for previous versions ... constantly seems to complain about being
> unable to determine environment variables.

> I am trying to use the PG set of compilers (because the netCDF library
> was built with them, and I will need to use it. I have had problems
> with this in the past, although particularly with the Intel
> Compilers).


> setenv R_PAPERSIZE letter
> setenv CC pgcc
> setenv F77 pgf90
> setenv CXX pgCC
> [note ALL other environment vars are "undefined", including LD_LIBRARY_PATH]

> Linux poorman 2.4.18-17.7.xsmp #1 SMP Tue Oct 8 12:37:04 EDT 2002 i686
> unknown RH 7.3, on a 1.7Ghz Pentium

> ./configure --prefix=/contrib/R-1.7.0 >& configure.attempt.1

> results in two things --

> The first is that there seems to be a "-x" getting fed to the PG
> compilers, which is not a valid option.  I don't know if this is the
> root problem ...

> The second (and seemingly fatal one) is "unable to determine
> CPICFLAGS".  So -- I set it and try again ...

> setenv CPICFLAGS -kpic ./configure --prefix=/contrib/R-1.7.0 >&
> configure.attempt.2

> which  generates "unable to determine FPICFLAGS" ...

> and the same scenario is repeated several more times, with "the next"
> environment variable not getting useful default values ...

> Anyone else report this?

Tim,

[Note that attachments are not preserved properly.]

I am not sure about the -x: I do not see this anywhere in the code.

I don't think that configure is in a position to deal with the pg
compilers by itself: it simply does not know about them.  (Seems that
there is no libtool support either.)

I'll be happy to add support for these, though.  We'd need to know the
right settings for the C/C++/F77 picflags (always -kpic?  Would -fPIC
work?) and the main_ldflags and shlib_ldflags ...

Best
-k

From elegido at vacaciones.us  Mon Apr 21 11:50:35 2003
From: elegido at vacaciones.us (Vacaciones en Disney)
Date: Tue Apr 22 20:05:28 2003
Subject: [Rd] 
	Usted y su familia han sido premiados y seleccionados para viajar a
	Disney!
Message-ID: <20030421105035.46959.qmail@oblivion.shacknet.nu>

An HTML attachment was scrubbed...
URL: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030421/3a01b050/attachment.html
From rdiaz at cnio.es  Tue Apr 22 21:07:36 2003
From: rdiaz at cnio.es (rdiaz@cnio.es)
Date: Tue Apr 22 20:07:53 2003
Subject: [Rd] 
	"LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
Message-ID: <200304221807.h3MI7apD014611@pubhealth.ku.dk>

Dear All,

Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
error

"Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
	LAPACK routine DGESDD gave error code -12"

It seems not to depend on the data per se, but on the relationship between 
numbers of rows and columns. 

For example, if the number of columns is 100, La.svd will fail when the number 
of rows is 56, but not if it is 55 or 57. It will not fail if we use 
"dgesvd". If the number of columns is 51, La.svd fails when the number of 
rows is between 29 and 50 if we use "dgesdd".

This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
not happen if I build R in this same machine with "--without-blas" (where 
make check reports no errors). In case it matters, the bug does not show up 
in a different machine with Windwos 2000 and the Rblas.dll linked against 
ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).

I understand this is probably related to the issues mentioned in R-admin about 
LAPACK 3.0 and some of the issues recently discussed in this list by M. 
Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
using ATLAS at all?).


Ramn

********************************
An example of failure:
> ## ncol = 100
> nrow <- 56
> ncol <- 100
> data <- matrix(1:(nrow * ncol), ncol = ncol)
> ## you get the errors if you use any other data
> ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> svd(data) ## error
> La.svd(data, nu = 0,
             nv = min(nrow, ncol), method = "dgesdd") ## error
> La.svd(data, nu = 0,
             nv = min(nrow, ncol), method = "dgesvd") ## OK

> ##ncol = 51; it fails with nrow in [29, 50]
*************************

> ## version that crashes
> version 
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R        
*****************************
> ## version "--without-blas" that does not crash
> version
         _  
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R   


-----
Ramn Daz-Uriarte
Bioinformatics Unit
Centro Nacional de Investigaciones Oncolgicas (CNIO)
(Spanish National Cancer Center)
Melchor Fernndez Almagro, 3
28029 Madrid (Spain)
Fax: +-34-91-224-6972
Phone: +-34-91-224-6900

http://bioinfo.cnio.es/~rdiaz

From hornik at ci.tuwien.ac.at  Tue Apr 22 21:15:19 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Tue Apr 22 20:18:14 2003
Subject: [Rd] 
	"LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
In-Reply-To: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
Message-ID: <16037.34487.349521.950443@mithrandir.hornik.net>

>>>>> rdiaz  writes:

> Dear All,
> Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> error

> "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> 	LAPACK routine DGESDD gave error code -12"

> It seems not to depend on the data per se, but on the relationship between 
> numbers of rows and columns. 

> For example, if the number of columns is 100, La.svd will fail when
> the number of rows is 56, but not if it is 55 or 57. It will not fail
> if we use "dgesvd". If the number of columns is 51, La.svd fails when
> the number of rows is between 29 and 50 if we use "dgesdd".

> This happens if I use the latest deb packages (and thus ATLAS,
> etc). It does not happen if I build R in this same machine with
> "--without-blas" (where make check reports no errors). In case it
> matters, the bug does not show up in a different machine with Windwos
> 2000 and the Rblas.dll linked against ATLAS provided in
> http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).

> I understand this is probably related to the issues mentioned in
> R-admin about LAPACK 3.0 and some of the issues recently discussed in
> this list by M.  Burger, D. Bates and D. Eddelbuettel. Are there any
> workarounds (besides not using ATLAS at all?).

> Ram?n

> ********************************
> An example of failure:
>> ## ncol = 100
>> nrow <- 56
>> ncol <- 100
>> data <- matrix(1:(nrow * ncol), ncol = ncol)
>> ## you get the errors if you use any other data
>> ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
>> svd(data) ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesdd") ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesvd") ## OK

>> ##ncol = 51; it fails with nrow in [29, 50]
> *************************

Confirmed on Debian GNU/Linux testing with atlas2-base-dev for both the
current 1.7.0 debs and 1.8.0 built from scratch using --with-lapack:

hornik@mithrandir:~/tmp$ ldd /usr/local/lib/R/modules/lapack.so 
        libR.so => not found
        liblapack.so.2 => /usr/lib/atlas/liblapack.so.2 (0x40013000)

-k

From Kurt.Hornik at wu-wien.ac.at  Tue Apr 22 21:18:02 2003
From: Kurt.Hornik at wu-wien.ac.at (Kurt.Hornik@wu-wien.ac.at)
Date: Tue Apr 22 20:18:35 2003
Subject: [Rd] (PR#2823)
Message-ID: <200304221818.h3MII2pD014670@pubhealth.ku.dk>

>>>>> rdiaz  writes:

> Dear All,
> Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> error

> "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> 	LAPACK routine DGESDD gave error code -12"

> It seems not to depend on the data per se, but on the relationship between 
> numbers of rows and columns. 

> For example, if the number of columns is 100, La.svd will fail when
> the number of rows is 56, but not if it is 55 or 57. It will not fail
> if we use "dgesvd". If the number of columns is 51, La.svd fails when
> the number of rows is between 29 and 50 if we use "dgesdd".

> This happens if I use the latest deb packages (and thus ATLAS,
> etc). It does not happen if I build R in this same machine with
> "--without-blas" (where make check reports no errors). In case it
> matters, the bug does not show up in a different machine with Windwos
> 2000 and the Rblas.dll linked against ATLAS provided in
> http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).

> I understand this is probably related to the issues mentioned in
> R-admin about LAPACK 3.0 and some of the issues recently discussed in
> this list by M.  Burger, D. Bates and D. Eddelbuettel. Are there any
> workarounds (besides not using ATLAS at all?).

> Ramn

> ********************************
> An example of failure:
>> ## ncol = 100
>> nrow <- 56
>> ncol <- 100
>> data <- matrix(1:(nrow * ncol), ncol = ncol)
>> ## you get the errors if you use any other data
>> ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
>> svd(data) ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesdd") ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesvd") ## OK

>> ##ncol = 51; it fails with nrow in [29, 50]
> *************************

Confirmed on Debian GNU/Linux testing with atlas2-base-dev for both the
current 1.7.0 debs and 1.8.0 built from scratch using --with-lapack:

hornik@mithrandir:~/tmp$ ldd /usr/local/lib/R/modules/lapack.so 
        libR.so => not found
        liblapack.so.2 => /usr/lib/atlas/liblapack.so.2 (0x40013000)

-k

From dmaszle at mendelbio.com  Wed Apr 23 03:19:57 2003
From: dmaszle at mendelbio.com (dmaszle@mendelbio.com)
Date: Wed Apr 23 02:20:14 2003
Subject: [Rd] coplot panels malrendered / 1653 (PR#2824)
Message-ID: <200304230019.h3N0JvpD016019@pubhealth.ku.dk>

Full_Name: Don Maszle
Version: 1.7.0
OS: Linux
Submission from: (NULL) (206.86.87.3)


This was previously reported I believe as bug 1653.

I just compiled 1.7.0 on RedHat Linux and I get terrible behavior when
panel=plot.  Browsing through the coplot code, I don't how there could be this
dependency.  With panel=points, my 7 graphs come out numbered as
given
7
4 5 6
1 2 3

Using panel=plot the same 7 graphs come out as
3i7en
- 4 5
6 1 2

with the given subplot being overwritten with data plots.

Has anyone looked into this?

From edd at debian.org  Tue Apr 22 20:32:46 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed Apr 23 02:33:00 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
In-Reply-To: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
Message-ID: <20030423003246.GA27400@sonny.eddelbuettel.com>

On Tue, Apr 22, 2003 at 08:07:36PM +0200, rdiaz@cnio.es wrote:
> Dear All,
> 
> Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> error
> 
> "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> 	LAPACK routine DGESDD gave error code -12"
> 
> It seems not to depend on the data per se, but on the relationship between 
> numbers of rows and columns. 
> 
> For example, if the number of columns is 100, La.svd will fail when the number 
> of rows is 56, but not if it is 55 or 57. It will not fail if we use 
> "dgesvd". If the number of columns is 51, La.svd fails when the number of 
> rows is between 29 and 50 if we use "dgesdd".
> 
> This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
> not happen if I build R in this same machine with "--without-blas" (where 
> make check reports no errors). In case it matters, the bug does not show up 
> in a different machine with Windwos 2000 and the Rblas.dll linked against 
> ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).
> 
> I understand this is probably related to the issues mentioned in R-admin about 
> LAPACK 3.0 and some of the issues recently discussed in this list by M. 
> Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
> using ATLAS at all?).

We should probably talk to Camm, the Atlas maintainer. Note how on recent
upgrades he inserted the note (cf /var/lib/dpkg/info/atlas2-3dnow.templates
on my Athlon system) via debconf:

   Template: atlas2-3dnow/3dnow_warning
   Type: note
   Description: 3dnow arithmetic is not IEEE compliant
    Please note that 3dnow arithmetic does not furnish several results
    required by the IEEE standard, and may therefore cause errors in code
    which needs to trap NaN and Inf results, for example.  The
    atlas2-3dnow binaries make heavy use of the 3dnow extensions.
    Please see the accompanying file /usr/share/doc/atlas2-3dnow/3DNow.txt
    for details.
      
I know Camm is on a sabbatical but will CC him nonetheless.

Dirk

> Ramn
> 
> ********************************
> An example of failure:
> > ## ncol = 100
> > nrow <- 56
> > ncol <- 100
> > data <- matrix(1:(nrow * ncol), ncol = ncol)
> > ## you get the errors if you use any other data
> > ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> > svd(data) ## error
> > La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesdd") ## error
> > La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesvd") ## OK
> 
> > ##ncol = 51; it fails with nrow in [29, 50]
> *************************
> 
> > ## version that crashes
> > version 
>          _                
> platform i386-pc-linux-gnu
> arch     i386             
> os       linux-gnu        
> system   i386, linux-gnu  
> status                    
> major    1                
> minor    7.0              
> year     2003             
> month    04               
> day      16               
> language R        
> *****************************
> > ## version "--without-blas" that does not crash
> > version
>          _  
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    7.0              
> year     2003             
> month    04               
> day      16               
> language R   
> 
> 
> -----
> Ramn Daz-Uriarte
> Bioinformatics Unit
> Centro Nacional de Investigaciones Oncolgicas (CNIO)
> (Spanish National Cancer Center)
> Melchor Fernndez Almagro, 3
> 28029 Madrid (Spain)
> Fax: +-34-91-224-6972
> Phone: +-34-91-224-6900
> 
> http://bioinfo.cnio.es/~rdiaz
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Don't drink and derive. Alcohol and algebra don't mix.

From ligges at statistik.uni-dortmund.de  Wed Apr 23 10:20:43 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Apr 23 09:20:46 2003
Subject: [Rd] coplot panels malrendered / 1653 (PR#2824)
In-Reply-To: <200304230019.h3N0JvpD016019@pubhealth.ku.dk>
References: <200304230019.h3N0JvpD016019@pubhealth.ku.dk>
Message-ID: <3EA63ECB.3070308@statistik.uni-dortmund.de>

dmaszle@mendelbio.com wrote:
> Full_Name: Don Maszle
> Version: 1.7.0
> OS: Linux
> Submission from: (NULL) (206.86.87.3)
> 
> 
> This was previously reported I believe as bug 1653.
> 
> I just compiled 1.7.0 on RedHat Linux and I get terrible behavior when
> panel=plot.  Browsing through the coplot code, I don't how there could be this
> dependency.  With panel=points, my 7 graphs come out numbered as
> given
> 7
> 4 5 6
> 1 2 3
> 
> Using panel=plot the same 7 graphs come out as
> 3i7en

???

> - 4 5
> 6 1 2
> 
> with the given subplot being overwritten with data plots.
> 
> Has anyone looked into this?


- Obviously (from R's bug tracking system) PR#1653 is still open.

- Please provide reproducible code in your bug reports. Nobody can check 
whether it is really the same bug as that one in PR#1653. Beside that, 
your "picture" seems to be broken.

- Why do you open a *new* PR#2824 when you think it is the same problem 
as in PR#1653?


Uwe Ligges

From maechler at stat.math.ethz.ch  Wed Apr 23 10:52:18 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed Apr 23 09:52:28 2003
Subject: [Rd] Re: Default value for title in postscript()
In-Reply-To: <20030422220800.GF14368@hortresearch.co.nz>
References: <20030422220800.GF14368@hortresearch.co.nz>
Message-ID: <16038.17970.797442.963291@gargle.gargle.HOWL>


[ This really should have gone to R-devel instead of R-help.
  I'm now diverting -- and please leave off "R-help" when replying again.
]

>>>>> "PaCo" == Patrick Connolly <p.connolly@hortresearch.co.nz>
>>>>>     on Wed, 23 Apr 2003 10:08:00 +1200 writes:

    PaCo> I like the fact that the postscript function enables
    PaCo> the possbiility of a more useful title than before.
    PaCo> However, I'd prefer the default to be the file name.

    PaCo> It's very simple for me to make my own postscript
    PaCo> function that does just that simply by setting title =
    PaCo> file.  I always use onefile = TRUE, so it always works
    PaCo> (so far).  However, I'm a little reluctant to do that
    PaCo> in case some future changes cause conflicts.  I've
    PaCo> been warned off tinkering with .Internal

    PaCo> My question is: What is the tidiest way of doing such
    PaCo> a thing?  Should I make a private function that calls
    PaCo> the standard postscript function, 

yes, your own function calling the standard high-level postscript(),
not some low-level {.Internal(), .Call(), .C() or .For..... } --
these all may be changed "without notice" !}

    PaCo> or should I go the whole hog and make an S4 type method to handle it?

    PaCo> Or would it be simpler for the standard function to be changed

certainly simpler for you.. ;-)

I tend to agree that a change might be useful --
For the new default, I'd actually go further and propose
something like (when file = "Rplots.ps")

   "Rplots.ps [from R 1.7.0]"

    PaCo> (assuming, of course, there aren't good reasons
    PaCo> against doing that)?

Unfortunately, there's a good reason: back-compatibility.
In spite of that, I do advocate a change.

Martin

From ml-it-r-devel at epigenomics.com  Wed Apr 23 13:32:58 2003
From: ml-it-r-devel at epigenomics.com (Matthias Burger)
Date: Wed Apr 23 12:33:10 2003
Subject: [Rd] R 1.7.0 installation problem: make check fails when using
     --with-lapack option
References: <news2mail-3E9EF3C5.2060803@epigenomics.com>
	<6ry929eye0.fsf@bates4.stat.wisc.edu>
	<20030417191950.GA12963@sonny.eddelbuettel.com>
	<16033.38796.844040.879450@mithrandir.hornik.net>
	<3EA57E03.5090006@epigenomics.com>
Message-ID: <news2mail-3EA66BDA.6000800@epigenomics.com>


Hi,

just as a follow up:

as suggested by my sys admin I make use of the environment variable LD_PRELOAD 
to tell the run time linker where to find the desired libraries.

export 
LD_PRELOAD=/usr/lib/sse2/atlas/libblas.so.2:/usr/lib/sse2/atlas/liblapack.so.2

   echo $LD_PRELOAD
/usr/lib/sse2/atlas/libblas.so.2:/usr/lib/sse2/atlas/liblapack.so.2

   > system("ldd R.bin")
         /usr/lib/sse2/atlas/libblas.so.2 => /usr/lib/sse2/atlas/libblas.so.2 
(0x40016000)
         /usr/lib/sse2/atlas/liblapack.so.2 => 
/usr/lib/sse2/atlas/liblapack.so.2 (0x403ec000)
         libg2c.so.0 => /usr/lib/gcc-lib/i386-linux/3.2.2/../../../libg2c.so.0 
(0x40919000)
         libm.so.6 => /lib/libm.so.6 (0x40946000)

[...]
so this works now as expected.

But testing with the example provided by Ram?n D?az-Uriarte
I can confirm that I get the errors as well,
filed as bug report PR# 2823 already.

So for the time being I conlude that I will not enable ATLAS support.

I'b be very happy to hear of any news or development on resolving this problem.

Regards,

   Matthias



-- 
Matthias Burger

Bioinformatics R&D
Epigenomics AG                      www.epigenomics.com
Kleine Pr?sidentenstra?e 1          fax:   +49-30-24345-555
10178 Berlin Germany                phone: +49-30-24345-0

From dmurdoch at pair.com  Wed Apr 23 15:17:36 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Wed Apr 23 14:18:04 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem with
	Downloading "dse") (PR#2827)
Message-ID: <200304231217.h3NCHapD023050@pubhealth.ku.dk>

The reason dse won't install is because of the new versioned install
code.  It assumes that it's dealing with a plain package, and doesn't
handle bundles properly.

Robert, could you look at that?  

A workaround is as follows.  After the install.packages call fails
with this message

>Error in file(file, "r") : unable to open connection
>In addition: Warning message: 
>cannot open file `dse/DESCRIPTION' 

you are left with a temporary directory in $RHOME/library named
something like $RHOME/library/file14752 (the number at the end will
vary).

This directory will contain subdirectories dse1, dse2, setRNG, and
tframe.  

If you move those four subdirectories up a level to $RHOME/library,
then dse will work.

Duncan Murdoch

From murdoch at stats.uwo.ca  Wed Apr 23 10:39:24 2003
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed Apr 23 15:38:24 2003
Subject: [Rd] Weird Windows startup menu display problem in 1.7.0
	(PR#2817)
In-Reply-To: <3EA5742C.9030900@statistik.uni-dortmund.de>
References: <200304221523.h3MFNRpD013846@pubhealth.ku.dk>
	<3EA5742C.9030900@statistik.uni-dortmund.de>
Message-ID: <sq4davggd68jp2cvlgkpvovpo39ajmjlc5@4ax.com>

On Tue, 22 Apr 2003 18:56:12 +0200, you wrote in message
<3EA5742C.9030900@statistik.uni-dortmund.de>:

>Confirmed. Some GUI redrawing events have been cleaned up (I'm quite 
>sure I have read about it) -- probably one too much.
>Duncan and/or Brian surely know where to fix that (comparing with the 
>R-1.6.2 sources will give a hint, if you are going to debug yourself).

Yes, that's it.  There's a bug in 1.6.2 that causes your console
window to go back to normal size (from zoomed or minimized) after all
sorts of operations that should have no such effect, including
winMenuAdd().  I fixed that for 1.7.0, but unfortunately the fix had
the side effect of stopping the MDI frame from redrawing itself when
it needs to.

I've looked at the Graphapp code, and it looks like it would be
time-consuming to figure out how to fix the redraw problem properly.
For now I'll revert to the 1.6.2 behaviour in places where it looks
like a redraw is needed.

Duncan Murdoch

From mckay at repsac.gmr.com  Wed Apr 23 10:40:40 2003
From: mckay at repsac.gmr.com (Neil McKay)
Date: Wed Apr 23 15:43:22 2003
Subject: [Rd] R scripting patches for R-1.7.0
Message-ID: <200304231340.h3NDeef26875@repsac.gmr.com>

I've patched R so that it can be used as a scripting language, i.e.
you can (on Unix-like systems) write files containing R code
and execute them non-interactively, e.g.:

	#!/usr/local/lib/R/bin/R.bin --script

	cat("Hello World!\n")

I've updated the patches for R-1.7.0; if you're interested in the
patches, e-mail me at mckay@gmr.com, and I'll send them to you.

-- 
Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
Manufacturing Systems Research Lab      FAX:   (586)986-0574 (GM:8-226-0574)
GM Research & Development Center        Internet e-mail: mckay@gmr.com
30500 Mound Road
Warren, Mich. 48090

From andy_liaw at merck.com  Wed Apr 23 19:27:54 2003
From: andy_liaw at merck.com (andy_liaw@merck.com)
Date: Wed Apr 23 18:28:09 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 (PR#2828)
Message-ID: <200304231627.h3NGRspD026246@pubhealth.ku.dk>

For the record:

Under Rgui, using the menu "File / Channge dir..." to change 
to a network drive crashes rgui.  The crash happens if I 
browse to a folder on a mapped drive.  I.e., if I type in 
"q:\Andy" in the text box, it works, but if I try to browse
to Q:\Andy and then click on OK, that's when it crashes.  

If I do setwd("q:/Andy"), that works fine.  If I use the menu,
set dir to a local drive first, then use the menu again to set
dir to the network drive, that works, too.

Adding the --vanilla flag doesn't help.  

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com

From andy_liaw at merck.com  Wed Apr 23 14:02:53 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Apr 23 19:03:11 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 (
 PR#282	8)
Message-ID: <3A822319EB35174CA3714066D590DCD5C4FA3C@usrymx25.merck.com>

This is interesting: The crash does not happen if I run 
Rgui in MDI mode.  The crash seemed to only occur in SDI.

Andy

===========================================================
For the record:

Under Rgui, using the menu "File / Channge dir..." to change 
to a network drive crashes rgui.  The crash happens if I 
browse to a folder on a mapped drive.  I.e., if I type in 
"q:\Andy" in the text box, it works, but if I try to browse
to Q:\Andy and then click on OK, that's when it crashes.  

If I do setwd("q:/Andy"), that works fine.  If I use the menu,
set dir to a local drive first, then use the menu again to set
dir to the network drive, that works, too.

Adding the --vanilla flag doesn't help.  

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows NT 4.0 (build 1381) Service Pack 6


Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, cont... {{dropped}}

From mschwartz at medanalytics.com  Wed Apr 23 14:57:09 2003
From: mschwartz at medanalytics.com (Marc Schwartz)
Date: Wed Apr 23 20:57:38 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 ( PR#2828)
In-Reply-To: <3A822319EB35174CA3714066D590DCD5C4FA3C@usrymx25.merck.com>
Message-ID: <001d01c309ca$26656990$0201a8c0@MARC>

>-----Original Message-----
>From: r-devel-bounces@stat.math.ethz.ch 
>[mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Liaw, Andy
>Sent: Wednesday, April 23, 2003 12:03 PM
>To: 'r-devel@stat.math.ethz.ch'
>Subject: RE: [Rd] changing dir. to network drive crash Rgui on 
>NT4 ( PR#282 8)
>
>
>This is interesting: The crash does not happen if I run 
>Rgui in MDI mode.  The crash seemed to only occur in SDI.
>
>Andy

Andy,

After seeing your note above and Uwe's follow up, I reset Rgui to SDI
mode (I normally run MDI).  I have not been able to do this
predictably yet, but I have locked up Rgui twice and caused it to
crash once by changing the current directory and then going into the
GUI preferences and changing back to MDI mode. It has not occurred
simply changing directories.

If I can get this to occur with a predictable sequence, I'll post it.

For the record, this is R 1.7.0 under WinXP Pro with all updates.

A thought occurs to me in that I wonder if there is something to the
folder browsing dialog window/tree control and/or perhaps something
related to the change in window focus under SDI mode.

I have not been able to get this to happen if I just go into SDI mode
and then change back to MDI. It does seem in some fashion related to
the use of the folder browser control.

Regards,

Marc Schwartz

From duncan at research.bell-labs.com  Wed Apr 23 16:07:54 2003
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Wed Apr 23 21:08:14 2003
Subject: [Rd] R scripting patches for R-1.7.0
In-Reply-To: <200304231340.h3NDeef26875@repsac.gmr.com>;
	from mckay@repsac.gmr.com on Wed, Apr 23, 2003 at 09:40:40AM -0400
References: <200304231340.h3NDeef26875@repsac.gmr.com>
Message-ID: <20030423150754.A21651@jessie.research.bell-labs.com>


I haven't forgotten about this and it is high on my todo list.
I have been trying to find the neatest way to combine this with
some other aspects  of the intialization of R and that is why
it has been taking so long.

 D.

Neil McKay wrote:
> I've patched R so that it can be used as a scripting language, i.e.
> you can (on Unix-like systems) write files containing R code
> and execute them non-interactively, e.g.:
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello World!\n")
> 
> I've updated the patches for R-1.7.0; if you're interested in the
> patches, e-mail me at mckay@gmr.com, and I'll send them to you.
> 
> -- 
> Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
> Manufacturing Systems Research Lab      FAX:   (586)986-0574 (GM:8-226-0574)
> GM Research & Development Center        Internet e-mail: mckay@gmr.com
> 30500 Mound Road
> Warren, Mich. 48090
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

From ligges at statistik.uni-dortmund.de  Thu Apr 24 00:19:54 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Apr 23 23:19:41 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 ( PR#282
 8)
In-Reply-To: <3A822319EB35174CA3714066D590DCD5C4FA3C@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD5C4FA3C@usrymx25.merck.com>
Message-ID: <3EA7037A.2000004@statistik.uni-dortmund.de>

Liaw, Andy wrote:
> This is interesting: The crash does not happen if I run 
> Rgui in MDI mode.  The crash seemed to only occur in SDI.

For me a crash as well in MDI without having SDI mode used at any time.

Uwe


> Andy
> 
> ===========================================================
> For the record:
> 
> Under Rgui, using the menu "File / Channge dir..." to change 
> to a network drive crashes rgui.  The crash happens if I 
> browse to a folder on a mapped drive.  I.e., if I type in 
> "q:\Andy" in the text box, it works, but if I try to browse
> to Q:\Andy and then click on OK, that's when it crashes.  
> 
> If I do setwd("q:/Andy"), that works fine.  If I use the menu,
> set dir to a local drive first, then use the menu again to set
> dir to the network drive, that works, too.
> 
> Adding the --vanilla flag doesn't help.  
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> 
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY84-16            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, cont... {{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From p.connolly at hortresearch.co.nz  Thu Apr 24 10:28:49 2003
From: p.connolly at hortresearch.co.nz (Patrick Connolly)
Date: Wed Apr 23 23:30:59 2003
Subject: [Rd] Re: Default value for title in postscript()
In-Reply-To: <16038.17970.797442.963291@gargle.gargle.HOWL>
References: <20030422220800.GF14368@hortresearch.co.nz>
	<16038.17970.797442.963291@gargle.gargle.HOWL>
Message-ID: <20030423212849.GI14368@hortresearch.co.nz>

On Wed, 23-Apr-2003 at 09:52AM +0200, Martin Maechler wrote:

|> 
|> [ This really should have gone to R-devel instead of R-help.
|>   I'm now diverting -- and please leave off "R-help" when replying again.
|> ]
|> 
|> >>>>> "PaCo" == Patrick Connolly <p.connolly@hortresearch.co.nz>
|> >>>>>     on Wed, 23 Apr 2003 10:08:00 +1200 writes:

|>     PaCo> My question is: What is the tidiest way of doing such
|>     PaCo> a thing?  Should I make a private function that calls
|>     PaCo> the standard postscript function, 
|> 
|> yes, your own function calling the standard high-level postscript(),
|> not some low-level {.Internal(), .Call(), .C() or .For..... } --
|> these all may be changed "without notice" !}
|> 
|>     PaCo> or should I go the whole hog and make an S4 type method to handle it?
|> 
|>     PaCo> Or would it be simpler for the standard function to be changed
|> 
|> certainly simpler for you.. ;-)
|> 
|> I tend to agree that a change might be useful --
|> For the new default, I'd actually go further and propose
|> something like (when file = "Rplots.ps")
|> 
|>    "Rplots.ps [from R 1.7.0]"

Sounds like a good idea though I always specify a file name myself.

|> 
|>     PaCo> (assuming, of course, there aren't good reasons
|>     PaCo> against doing that)?
|> 
|> Unfortunately, there's a good reason: back-compatibility.
|> In spite of that, I do advocate a change.

In general, back-compatibility is important, but in this case, who
would be inconvenienced by not having the same '%%Title:' line in all
their postscript files?  Someone more experienced might be able to
imagine a case.  I can't.

I was toying with the idea of setting up a perl script that would run
through all my postscript files and change the %%Title: line so I can
tell what file I'm looking at with ghostview.  It won't be necessary
with any new ones, so I'll probably do some of the other things I
haven't got round to instead.

best

-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world`s largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you`ve seen it.  ---Steven Wright 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~

From kleiweg at let.rug.nl  Thu Apr 24 01:03:54 2003
From: kleiweg at let.rug.nl (Peter Kleiweg)
Date: Thu Apr 24 00:04:07 2003
Subject: [Rd] Re: Default value for title in postscript()
In-Reply-To: <20030423212849.GI14368@hortresearch.co.nz>
Message-ID: <Pine.LNX.4.44.0304232346310.1214-100000@kleigh.nl>

# aldus Patrick Connolly :

> |> I tend to agree that a change might be useful --
> |> For the new default, I'd actually go further and propose
> |> something like (when file = "Rplots.ps")
> |>
> |>    "Rplots.ps [from R 1.7.0]"
>
> Sounds like a good idea though I always specify a file name myself.


> In general, back-compatibility is important, but in this case, who
> would be inconvenienced by not having the same '%%Title:' line in all
> their postscript files?  Someone more experienced might be able to
> imagine a case.  I can't.

If you want to do it properly, add something like this comment:

%%Creator: R : Copyright 2003, The R Development Core Team, Version 1.7.0  (2003-04-16)

Leave out the %%Title comment, unless the user specifies a title.

Adding a %%CreationDate comment might be useful.

-- 
Peter Kleiweg

From camm at enhanced.com  Wed Apr 23 20:59:59 2003
From: camm at enhanced.com (Camm Maguire)
Date: Thu Apr 24 02:01:07 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
In-Reply-To: <20030423003246.GA27400@sonny.eddelbuettel.com>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
Message-ID: <54el3swyrk.fsf@intech19.enhanced.com>

Greetings!

1) This should have nothing to do with atlas, as atlas does not tune
   this routine, meaning you are using the stock routine from lapack.

nm --dynamic /usr/lib/liblapack_atlas.so.2.3 |grep dge
00003810 T ATL_dgetrf
00003590 T ATL_dgetrfC
00003870 T ATL_dgetrfR
00003ae0 T ATL_dgetrs
000047f0 T atl_f77wrap_dgesv__
000048b0 T atl_f77wrap_dgetnb__
000048e0 T atl_f77wrap_dgetrf__
00004970 T atl_f77wrap_dgetrs__
         U cblas_dgemm
00007c68 T clapack_dgesv
00007da0 T clapack_dgetrf
00007e90 T clapack_dgetrs
00009430 T dgesv_
00009500 T dgetrf_
000095b0 T dgetrs_
intech19:/fix/t2/camm/gcl-2.5.2$ 

   You can check this by verifying that the difficulty persists if you
   set the LD_LIBRARY_PATH environment variable to /usr/lib

2) Given the error code, and the scaling behavior with matrix size,
   I'd say the lwork parameter (size of the work array) passed to
   dgesdd is not always large enough, i.e. is not scaling properly
   with n,m.  Please see 'man dgesdd' for interpretations of the error
   code.  It is the responsibility of the calling routine to allocate
   and pass the work array to dgesdd.  With most lapack routines, one
   can make a 'workspace query' call first by setting lwork to -1, or
   some such.  check the man page for details.  This of course would
   have to be done with each change in n,m.  Alternatively, you could
   take the minimum workspace requirements from the manpage.  

   lapack is the relevant lib, so I don't know what --without-blas is
   supposed to do.  And working under windows, while nice, doesn't
   exactly inspire confidence :-).

I am in general away from email until 6/1, so correspondence will be
spotty.

Take care,

Dirk Eddelbuettel <edd@debian.org> writes:

> On Tue, Apr 22, 2003 at 08:07:36PM +0200, rdiaz@cnio.es wrote:
> > Dear All,
> > 
> > Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> > error
> > 
> > "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> > 	LAPACK routine DGESDD gave error code -12"
> > 
> > It seems not to depend on the data per se, but on the relationship between 
> > numbers of rows and columns. 
> > 
> > For example, if the number of columns is 100, La.svd will fail when the number 
> > of rows is 56, but not if it is 55 or 57. It will not fail if we use 
> > "dgesvd". If the number of columns is 51, La.svd fails when the number of 
> > rows is between 29 and 50 if we use "dgesdd".
> > 
> > This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
> > not happen if I build R in this same machine with "--without-blas" (where 
> > make check reports no errors). In case it matters, the bug does not show up 
> > in a different machine with Windwos 2000 and the Rblas.dll linked against 
> > ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).
> > 
> > I understand this is probably related to the issues mentioned in R-admin about 
> > LAPACK 3.0 and some of the issues recently discussed in this list by M. 
> > Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
> > using ATLAS at all?).
> 
> We should probably talk to Camm, the Atlas maintainer. Note how on recent
> upgrades he inserted the note (cf /var/lib/dpkg/info/atlas2-3dnow.templates
> on my Athlon system) via debconf:
> 
>    Template: atlas2-3dnow/3dnow_warning
>    Type: note
>    Description: 3dnow arithmetic is not IEEE compliant
>     Please note that 3dnow arithmetic does not furnish several results
>     required by the IEEE standard, and may therefore cause errors in code
>     which needs to trap NaN and Inf results, for example.  The
>     atlas2-3dnow binaries make heavy use of the 3dnow extensions.
>     Please see the accompanying file /usr/share/doc/atlas2-3dnow/3DNow.txt
>     for details.
>       
> I know Camm is on a sabbatical but will CC him nonetheless.
> 
> Dirk
> 
> > Ram?n
> > 
> > ********************************
> > An example of failure:
> > > ## ncol = 100
> > > nrow <- 56
> > > ncol <- 100
> > > data <- matrix(1:(nrow * ncol), ncol = ncol)
> > > ## you get the errors if you use any other data
> > > ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> > > svd(data) ## error
> > > La.svd(data, nu = 0,
> >              nv = min(nrow, ncol), method = "dgesdd") ## error
> > > La.svd(data, nu = 0,
> >              nv = min(nrow, ncol), method = "dgesvd") ## OK
> > 
> > > ##ncol = 51; it fails with nrow in [29, 50]
> > *************************
> > 
> > > ## version that crashes
> > > version 
> >          _                
> > platform i386-pc-linux-gnu
> > arch     i386             
> > os       linux-gnu        
> > system   i386, linux-gnu  
> > status                    
> > major    1                
> > minor    7.0              
> > year     2003             
> > month    04               
> > day      16               
> > language R        
> > *****************************
> > > ## version "--without-blas" that does not crash
> > > version
> >          _  
> > platform i686-pc-linux-gnu
> > arch     i686             
> > os       linux-gnu        
> > system   i686, linux-gnu  
> > status                    
> > major    1                
> > minor    7.0              
> > year     2003             
> > month    04               
> > day      16               
> > language R   
> > 
> > 
> > -----
> > Ram?n D?az-Uriarte
> > Bioinformatics Unit
> > Centro Nacional de Investigaciones Oncol?gicas (CNIO)
> > (Spanish National Cancer Center)
> > Melchor Fern?ndez Almagro, 3
> > 28029 Madrid (Spain)
> > Fax: +-34-91-224-6972
> > Phone: +-34-91-224-6900
> > 
> > http://bioinfo.cnio.es/~rdiaz
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
> Don't drink and derive. Alcohol and algebra don't mix.
> 
> 
> 

-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah

From andel at ifi.unizh.ch  Thu Apr 24 12:16:27 2003
From: andel at ifi.unizh.ch (andel@ifi.unizh.ch)
Date: Thu Apr 24 11:16:37 2003
Subject: [Rd] Error in R Data Import/Export (PR#2833)
Message-ID: <200304240916.h3O9GRpD002408@pubhealth.ku.dk>

Full_Name: David Andel
Version: 1.7.0
OS: linux
Submission from: (NULL) (130.60.68.45)


In section "Output to connections" there should be:

file.show("outfile", delete.file = TRUE)

instead of:

file.show(outfile, delete.file = TRUE)

From p.dalgaard at biostat.ku.dk  Thu Apr 24 14:28:21 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Apr 24 13:27:05 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
In-Reply-To: <54el3swyrk.fsf@intech19.enhanced.com>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com>
Message-ID: <x2u1co878q.fsf@biostat.ku.dk>

Camm Maguire <camm@enhanced.com> writes:

> 2) Given the error code, and the scaling behavior with matrix size,
>    I'd say the lwork parameter (size of the work array) passed to
>    dgesdd is not always large enough, i.e. is not scaling properly
>    with n,m.  Please see 'man dgesdd' for interpretations of the error
>    code.  It is the responsibility of the calling routine to allocate
>    and pass the work array to dgesdd.  With most lapack routines, one
>    can make a 'workspace query' call first by setting lwork to -1, or
>    some such.  check the man page for details.  This of course would
>    have to be done with each change in n,m.  Alternatively, you could
>    take the minimum workspace requirements from the manpage.  

Right, but that's actually what we do, use the workspace query. It's
all very weird, because the -12 value indicates that the lwork
parameter is wrong, but it is computed from an exactly identical call,
except lwork=-l:

        lwork = -1;

        F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
                         &n, &p, xvals, &n, REAL(s),
                         REAL(u), &ldu,
                         REAL(v), &ldvt,
                         &tmp, &lwork, iwork, &info);
        lwork = (int) tmp;

        work = (double *) R_alloc(lwork, sizeof(double));
        F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
                         &n, &p, xvals, &n, REAL(s),
                         REAL(u), &ldu,
                         REAL(v), &ldvt,
                         work, &lwork, iwork, &info);


Also, this must be happening in the early parts of DGESDD which seem
to be all integer storage size calculations and so shouldn't need the
BLAS. Nevertheless people are seeing different behaviour when linking
against different BLAS libraries.
 
There are a lot of calls similar to this one, though:

      WRKBL = M + M*ILAENV( 1, 'DGELQF', ' ', M, N, -1, -1 )

so whether or not the BLAS is being used is hard to tell precisely.

>    lapack is the relevant lib, so I don't know what --without-blas is
>    supposed to do.  And working under windows, while nice, doesn't
>    exactly inspire confidence :-).

--without-blas means to use generic blas routines in the R
sources?rather than any (tuned) system set.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From dmurdoch at pair.com  Thu Apr 24 09:35:17 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Apr 24 14:35:30 2003
Subject: [Rd] Error in R Data Import/Export (PR#2833)
In-Reply-To: <200304240916.h3O9GRpD002408@pubhealth.ku.dk>
References: <200304240916.h3O9GRpD002408@pubhealth.ku.dk>
Message-ID: <5fmfav40brlvckv42q7r7hdl0i640ldukv@4ax.com>

On Thu, 24 Apr 2003 11:16:27 +0200 (MET DST), you wrote:

>Full_Name: David Andel
>Version: 1.7.0
>OS: linux
>Submission from: (NULL) (130.60.68.45)
>
>
>In section "Output to connections" there should be:
>
>file.show("outfile", delete.file = TRUE)
>
>instead of:
>
>file.show(outfile, delete.file = TRUE)

Thanks for noticing this; I've fixed it.

Duncan Murdoch

From dmurdoch at pair.com  Thu Apr 24 09:45:19 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Apr 24 14:45:37 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 ( PR#2828)
In-Reply-To: <001d01c309ca$26656990$0201a8c0@MARC>
References: <3A822319EB35174CA3714066D590DCD5C4FA3C@usrymx25.merck.com>
	<001d01c309ca$26656990$0201a8c0@MARC>
Message-ID: <vjmfavsen69vs7k5i4kle00lbuotbs9psn@4ax.com>

On Wed, 23 Apr 2003 13:57:09 -0500, you wrote:

>After seeing your note above and Uwe's follow up, I reset Rgui to SDI
>mode (I normally run MDI).  I have not been able to do this
>predictably yet, but I have locked up Rgui twice and caused it to
>crash once by changing the current directory and then going into the
>GUI preferences and changing back to MDI mode. It has not occurred
>simply changing directories.

I found a bug in the folder browsing code and have fixed it; it would
probably cause strange crashes like this.  I've committed the change
to r-patched, and will be putting a build that incorporates this
change (and some others) online at 

http://www.stats.uwo.ca/faculty/murdoch/software/r-devel

as rw1071.exe in a couple of hours from now.  Could those of you who
have been able to reproduce this crash try out the fix?  Thanks.

Duncan Murdoch

From ripley at stats.ox.ac.uk  Thu Apr 24 16:42:34 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 24 16:43:20 2003
Subject: [Rd] Difference between .C and .Fortran (on Windows)
In-Reply-To: <6let9vodriirivok48gitiednh79lc30dn@4ax.com>
Message-ID: <Pine.LNX.4.44.0304241534450.1140-100000@gannet.stats>

On Thu, 17 Apr 2003, Duncan Murdoch wrote:

> In updating my web page on using non-standard compilers in Windows,
> I've been trying to figure out exactly what the differences are
> between .C() and .Fortran(), but the code is pretty convoluted. 
> 
> Can someone let me know if the following is correct?
> 
> There are two differences between .C("foo", ...) and .Fortran("foo").
> 
>  1.  .C looks for the symbol "foo" in the external library, whereas
> .Fortran("foo", ...) looks for the symbol "foo_" (which is how g77
> would export the subroutine "foo").

There are symbol.C() and symbol.For() to show you the mappings used.
Not all systems appends an underscore for Fortran, and some
case-convert the Fortran names (to lower, usually but not always).
R does not currently cope with the latter, so there is an assumption
that Fortran symbol names are written in lower case.  (That precludes
some Fortran compilers.)

I don't think do_symbol is convoluted, BTW!

>  2.  .C passes character mode vectors as a pointer to an array of
> pointers to the strings, whereas .Fortran just passes a pointer to a
> 255 character buffer containing the first string.  In both cases the
> strings are null-terminated.
> 
> Are there other differences?  Are these platform-dependent?

As Thomas noted, arbitrary language objects can be passed through .C.
Also, .Fortran does analogous things on returned strings (which may not be 
null-terminated, BTW).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Apr 24 18:42:41 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 24 18:43:55 2003
Subject: [Rd] Handling of upper/lowercase in package names (PR#2816)
In-Reply-To: <200304221234.h3MCYKpD011790@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304241738380.1373-100000@gannet.stats>

This is not a bug in R, but in your OS which gives you the non-existent 
directory `Tools'.

Since this has been possible for at least five years, I don't consider it
worth fixing.  Learn to use the correct names for packages!

On Tue, 22 Apr 2003 phgrosjean@sciviews.org wrote:

> Hi,
> 
> This is (presumably?) a bug in R 1.7.0 under Windows. I have not tested it
> on other systems. Attachment of packages is case sensitive but not
> library(), resulting in multiple loadings of the same package if the library
> name is spelled differently. The following example loads the `tools'
> package, once as `tools' and once as `Tools'. This behavior is the same with
> all packages and it occurs also in R 1.6.2.
> 
> > library(tools)
> > search()
>  [1] ".GlobalEnv"      "package:tools"   "package:methods" "package:ctest"
> "package:mva"
>  [6] "package:modreg"  "package:nls"     "package:ts"      "Autoloads"
> "package:base"
> > library(Tools)
> 
> Attaching package 'Tools':
> 
> 
>         The following object(s) are masked from package:tools :
> 
>          .checkDemoIndex .checkVignetteIndex .installMD5sums
> .installPackageDescription .installPackageIndices buildVignettes
> checkAssignFuns checkDocArgs checkDocStyle checkFF checkMD5sums checkMethods
> checkTnF checkVignettes codoc md5sum pkgVignettes print.checkAssignFuns
> print.checkDemoIndex print.checkDocArgs print.checkDocStyle print.checkFF
> print.checkMethods print.checkTnF print.checkVignetteIndex
> print.checkVignettes print.codoc print.undoc Rdindex Rtangle RtangleSetup
> RtangleWritedoc RweaveLatex RweaveLatexOptions RweaveLatexSetup Stangle
> Sweave SweaveSyntaxLatex SweaveSyntaxNoweb SweaveSyntConv undoc
> 
> > search()
>  [1] ".GlobalEnv"      "package:Tools"   "package:tools"   "package:methods"
> "package:ctest"
>  [6] "package:mva"     "package:modreg"  "package:nls"     "package:ts"
> "Autoloads"
> [11] "package:base"
> 
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
> 
> Windows XP Professional (build 2600) Service Pack 0.0
> 
> Search Path:
>  .GlobalEnv, package:Tools, package:tools, package:methods, package:ctest,
> package:mva, package:modreg, package:nls, package:ts, Autoloads,
> package:base
> 
> Best,
> 
> Philippe Grosjean
> 
> ...........]<(({?<...............<?}))><...............................
>  ) ) ) ) )
> ( ( ( ( (       Dr. Philippe Grosjean
>  ) ) ) ) )
> ( ( ( ( (       LOV, UMR 7093
>  ) ) ) ) )      Station Zoologique
> ( ( ( ( (       Observatoire Oc?anologique
>  ) ) ) ) )      BP 28
> ( ( ( ( (       06234 Villefranche sur mer cedex
>  ) ) ) ) )      France
> ( ( ( ( (
>  ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
> ( ( ( ( (
>  ) ) ) ) )      e-mail: phgrosjean@sciviews.org
> ( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
>  ) ) ) ) )
> .......................................................................
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Apr 24 18:49:16 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 24 18:49:45 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
In-Reply-To: <200304221523.h3MFNSpD013853@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304241744410.1373-100000@gannet.stats>

On Tue, 22 Apr 2003 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: R v1.7.0
> OS: WinXP Pro
> Submission from: (NULL) (130.235.2.229)
> 
> 
> There seems to be an upper limit of the number of files (approx 1000 files) a

Yes, 500 topics.

> zip-file can contain when unpacking it with zip.unpack(). This results in an R
> crash. This bug is urgent since install.packages() relies on zip.unpack() and
> too big packages/bundles won't install with the current R v1.7.0 for Windows.

Whyever should a R package have over 1000 files?
I think you are not understanding how to use the --use-zip options.

Also, look at options("unzip").

Why is this bug `urgent':  it has been around for 14 months, and no one
else has encountered a problem?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bates at stat.wisc.edu  Thu Apr 24 20:03:31 2003
From: bates at stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu Apr 24 19:03:49 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
Message-ID: <200304241703.h3OH3VpD008668@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Camm Maguire <camm@enhanced.com> writes:
> 
> > 2) Given the error code, and the scaling behavior with matrix size,
> >    I'd say the lwork parameter (size of the work array) passed to
> >    dgesdd is not always large enough, i.e. is not scaling properly
> >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> >    code.  It is the responsibility of the calling routine to allocate
> >    and pass the work array to dgesdd.  With most lapack routines, one
> >    can make a 'workspace query' call first by setting lwork to -1, or
> >    some such.  check the man page for details.  This of course would
> >    have to be done with each change in n,m.  Alternatively, you could
> >    take the minimum workspace requirements from the manpage.  
> 
> Right, but that's actually what we do, use the workspace query. It's
> all very weird, because the -12 value indicates that the lwork
> parameter is wrong, but it is computed from an exactly identical call,
> except lwork=-l:
> 
>         lwork = -1;
> 
>         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
>                          &n, &p, xvals, &n, REAL(s),
>                          REAL(u), &ldu,
>                          REAL(v), &ldvt,
>                          &tmp, &lwork, iwork, &info);
>         lwork = (int) tmp;

It looks like a problem in ilaenv, the Lapack routine that returns the
tuning parameters, like the optimal temporary storage size, for
various Lapack routines.  The value returned in tmp will depend upon
the results of several calls to ilaenv.  These results can vary between
different implementations of the blas (or atlas).

From bates at stat.wisc.edu  Thu Apr 24 13:03:21 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Apr 24 19:04:14 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
In-Reply-To: <x2u1co878q.fsf@biostat.ku.dk>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com> <x2u1co878q.fsf@biostat.ku.dk>
Message-ID: <6r7k9j25gm.fsf@bates4.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Camm Maguire <camm@enhanced.com> writes:
> 
> > 2) Given the error code, and the scaling behavior with matrix size,
> >    I'd say the lwork parameter (size of the work array) passed to
> >    dgesdd is not always large enough, i.e. is not scaling properly
> >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> >    code.  It is the responsibility of the calling routine to allocate
> >    and pass the work array to dgesdd.  With most lapack routines, one
> >    can make a 'workspace query' call first by setting lwork to -1, or
> >    some such.  check the man page for details.  This of course would
> >    have to be done with each change in n,m.  Alternatively, you could
> >    take the minimum workspace requirements from the manpage.  
> 
> Right, but that's actually what we do, use the workspace query. It's
> all very weird, because the -12 value indicates that the lwork
> parameter is wrong, but it is computed from an exactly identical call,
> except lwork=-l:
> 
>         lwork = -1;
> 
>         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
>                          &n, &p, xvals, &n, REAL(s),
>                          REAL(u), &ldu,
>                          REAL(v), &ldvt,
>                          &tmp, &lwork, iwork, &info);
>         lwork = (int) tmp;

It looks like a problem in ilaenv, the Lapack routine that returns the
tuning parameters, like the optimal temporary storage size, for
various Lapack routines.  The value returned in tmp will depend upon
the results of several calls to ilaenv.  These results can vary between
different implementations of the blas (or atlas).

From james at hello.com  Thu Apr 24 20:03:49 2003
From: james at hello.com (james@hello.com)
Date: Thu Apr 24 19:04:36 2003
Subject: [Rd] 
	Italian-crafted Rolex - only $65 - $140!! Free SHIPPING!! (PR#2835)
Message-ID: <200304241703.h3OH3npD008675@pubhealth.ku.dk>

=3Cbody=3E

=3Cp class=3D=22MsoNormal=22=3E=3Ci=3E=3Cspan lang=3D=22EN-US=22 style=3D=22font-size=3A 10=2E0pt=3B mso-bidi-font-size=3A 12=2E0pt=22=3E=3Cfont face=3D=22Verdana=22=3Eplease 
note to send ALL REPLY e-mail direct to me at=3A =3Ca href=3D=22mailto=3AQuestions=40QualityWatchWorld=2Ecom=22=3EQuestions=40QualityWatchWorld=2Ecom=3C=2Fa=3E=3Co=3Ap=3E
=3C=2Fo=3Ap=3E
=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fi=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EHi=2C=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EThank you for 
expressing interest in ATGWS watches=2E=3Cbr=3E
We would like to take this opportunity to offer you our fine selection of 
Italian crafted Rolex Timepieces=2EYou can view our large selection of Rolexes 
=28including Breitling=2C Tag Heuer=2C Cartier etc=29 at=3A=3Cbr style=3D=22mso-special-character=3A
line-break=22=3E
=3Cbr style=3D=22mso-special-character=3Aline-break=22=3E
=3Ca href=3D=22http=3A=2F=2Fwww=2Equalitywatchworld=2Ecom=2F=22=3Ewww=2EQualityWatchWorld=2Ecom=3C=2Fa=3E=3Co=3Ap=3E
=3C=2Fo=3Ap=3E
=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EFor all orders 
placed in the month of April=2C =3Cb=3Eall shipping and handling charges will be free=3C=2Fb=3E=2E&nbsp=3B=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EAs we are the 
direct manufacturers=2C you are guaranteed of lowest prices and highest quality 
each and every time you purchase from us=2E&nbsp=3B=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EYou may also be 
interested to know that we have the following brands available in our wide 
selection as well=3A=3Cbr=3E
1=2E Leather band Daytona =28ladies and men=A1=AFs=29=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E2=2E Blancpain=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E3=2E Fortis=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E4=2E Jaeger LeCoutre=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E5=2E Longines=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E6=2E Mont Blanc=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E7=2E Movado=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E8=2E Oris=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E9=2E Roger Dubuis=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E10=2E Ulysse=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E11=2E Zenith=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E12=2E Audemar Piguet=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E13=2E Breitling=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E14=2E Bvglari=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E15=2E Cartier=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E16=2E Corum=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E17=2E Dunhill=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E18=2E Franck Muller=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E19=2E Gerard 
Perregaux=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E20=2E IWC=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E21=2E IWC=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E22=2E Panerai=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E23=2E Patek Philippe=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E24=2E Tag Heuer=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cfont face=3D=22Verdana=22=3E=3Cspan lang=3D=22EN-US=22=3E25=2E Vacheron 
Constantin=3C=2Fspan=3E=3Cspan lang=3D=22EN-US=22=3E&nbsp=3B=3C=2Fspan=3E=3C=2Ffont=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3EIf you see anything 
that might interest you=2C or if you have any questions=2C please don't hesitate to 
visit our website at=3A=3Ca href=3D=22http=3A=2F=2Fwww=2Equalitywatchworld=2Ecom=2F=22=3Ewww=2EQualityWatchWorld=2Ecom=3C=2Fa=3E 
=3Cspan style=3D=22mso-spacerun=3A yes=22=3E&nbsp=3B&nbsp=3B=3C=2Fspan=3E=3Cbr=3E
I certainly look forward to hearing from you=2E=3Cbr=3E
Best regards=2C=3Cbr=3E
Cal=3Cbr=3E
Division Sales Manager=3Cbr=3E
ATGWS&nbsp=3B&nbsp=3B=3C=2Ffont=3E=3C=2Fspan=3E=3Cfont face=3D=22Verdana=22=3E=3Ci=3E=3Cspan lang=3D=22EN-US=22 style=3D=22font-size=3A 10=2E0pt=3B mso-bidi-font-size=3A 12=2E0pt=22=3E&nbsp=3B=3C=2Fspan=3E=3C=2Fi=3E=3C=2Ffont=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22 style=3D=22font-size=3A 7=2E5pt=22=3E=3Cfont face=3D=22Verdana=22=3EYou 
received this email because your have previous purchased from=2C or inquired about 
our product line under ATGWS=2E If you do not want to receive further mailings 
from ATGWS=2C unsubscribe by sending an email with the title heading=3A DELETE in 
the subject line to =3Ca href=3D=22mailto=3AUnsubscribe=40QualityWatchWorld=2Ecom=22=3EUnsubscribe=40QualityWatchWorld=2Ecom=3C=2Fa=3E=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E
=3Cp class=3D=22MsoNormal=22=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E&nbsp=3B=3C=2Ffont=3E=3C=2Fspan=3E=3Cfont face=3D=22Verdana=22=3E=3Ci=3E=3Cspan lang=3D=22EN-US=22 style=3D=22font-size=3A 10=2E0pt=3B mso-bidi-font-size=3A 12=2E0pt=22=3Eplease 
note to send ALL REPLY e-mail direct to me at=3A =3Ca href=3D=22mailto=3AQuestions=40QualityWatchWorld=2Ecom=22=3EQuestions=40QualityWatchWorld=2Ecom=3C=2Fa=3E=3C=2Fspan=3E=3C=2Fi=3E=3C=2Ffont=3E=3Cspan lang=3D=22EN-US=22=3E=3Cfont face=3D=22Verdana=22=3E&nbsp=3B=3Co=3Ap=3E
=3C=2Fo=3Ap=3E
=3C=2Ffont=3E=3C=2Fspan=3E=3C=2Fp=3E

=3C=2Fbody=3E

From beebe at math.utah.edu  Thu Apr 24 20:40:48 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Thu Apr 24 19:41:01 2003
Subject: [Rd] R-1.7.0: build feedback: OpenBSD 3.2 (PR#2836)
Message-ID: <200304241740.h3OHempD008822@pubhealth.ku.dk>

R-1.7.0 failed to build on OpenBSD 3.2:

Machinetype:            Intel Pentium III (600 MHz);    OpenBSD 3.2 GENERIC#25 i386
Remote gcc version:     gcc (GCC) 3.2.2
Remote g++ version:     g++ (GCC) 3.2.2
Configure environment:  CC=gcc CXX=g++ LDFLAGS=-Wl,-rpath,/usr/local/lib 

gcc -shared -Wl,-rpath,/usr/local/lib -o lapack.so  Lapack.lo rgeev.lo rsyev.lo  -L../../../bin -lRlapack  -L/usr/lib/debug -L/usr/local/lib/gcc-lib/i386-unknown-openbsd3.2/3.2.2 -L/usr/local/lib/gcc-lib/i386-unknown-openbsd3.2/3.2.2/../../.. -lfrtbegin -lg2c -lm -lbz2 -lz -lreadline -lncurses -lm
ld: -lRlapack: no match
collect2: ld returned 1 exit status
make[4]: *** [lapack.so] Error 1
make[4]: Leaving directory `/local/build/R-1.7.0/src/modules/lapack'

The curious thing is that the library IS present, and should have been
found via the -L path settings:

	% ls -l bin/libRlapack.so 
	-rwxrwxr-x    1 beebe    users     2453767 Apr 24 09:46 bin/libRlapack.so

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From beebe at math.utah.edu  Thu Apr 24 20:45:35 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Thu Apr 24 19:45:49 2003
Subject: [Rd] R-1.7.0 build feedback: NetBSD 1.6 (PR#2837)
Message-ID: <200304241745.h3OHjZpD008854@pubhealth.ku.dk>

R-1.7.0 built on NetBSD 1.6, but the validation test suite failed:

Machinetype:            Intel Pentium III (600 MHz);    NetBSD 1.6 (GENERIC)
Remote gcc version:     gcc (GCC) 3.2.2
Remote g++ version:     g++ (GCC) 3.2.2
Configure environment:  CC=gcc CXX=g++ LDFLAGS=-Wl,-rpath,/usr/local/lib 

make[5]: Entering directory `/local/build/R-1.7.0/src/library'
 >>> Building/Updating help pages for package 'base'
     Formats: text example 
make[5]: Leaving directory `/local/build/R-1.7.0/src/library'
running code in 'base-Ex.R' ...make[4]: *** [base-Ex.Rout] Error 1
make[4]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
make[3]: *** [test-Examples-Base] Error 2
make[3]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
make[2]: *** [test-Examples] Error 2
make[2]: Leaving directory `/local/build/R-1.7.0/tests'

I forced the tests to run with "make -i check", getting output like
this:

running code in 'base-Ex.R' ...make[4]: [base-Ex.Rout] Error 1 (ignored)
 OK
collecting examples for package 'ctest' ...
make[5]: Entering directory `/local/build/R-1.7.0/src/library'
 >>> Building/Updating help pages for package 'ctest'
     Formats: text example
make[5]: Leaving directory `/local/build/R-1.7.0/src/library'
running code in 'ctest-Ex.R' ...make[4]: [ctest-Ex.Rout] Error 1 (ignored)
 OK
...


mv: cannot stat `eval-etc.Rout': No such file or directory
comparing 'eval-etc.Rout' to './eval-etc.Rout.save' ...2a3,158
> > ####  eval / parse / deparse / substitute  etc
> >
> > ##- From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > ##- Subject: Re: source() / eval() bug ??? (PR#96)
> > ##- Date: 20 Jan 1999 14:56:24 +0100
> > e1 <- parse(text='c(F=(f <- .3), "Tail area" = 2 * if(f < 1) 30 else 90)')[[1]]
> > e1
> c(F = (f <- 0.3), "Tail area" = 2 * if (f < 1) 30 else 90)
...

This is followed by 9900+ lines of differences.


-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From ripley at stats.ox.ac.uk  Thu Apr 24 19:56:16 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 24 19:56:40 2003
Subject: [Rd] Re: Default value for title in postscript()
In-Reply-To: <16038.17970.797442.963291@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.44.0304241852210.1577-100000@gannet.stats>

On Wed, 23 Apr 2003, Martin Maechler wrote:

> 
> [ This really should have gone to R-devel instead of R-help.
>   I'm now diverting -- and please leave off "R-help" when replying again.
> ]
> 
> >>>>> "PaCo" == Patrick Connolly <p.connolly@hortresearch.co.nz>
> >>>>>     on Wed, 23 Apr 2003 10:08:00 +1200 writes:
> 
>     PaCo> I like the fact that the postscript function enables
>     PaCo> the possbiility of a more useful title than before.
>     PaCo> However, I'd prefer the default to be the file name.
> 
>     PaCo> It's very simple for me to make my own postscript
>     PaCo> function that does just that simply by setting title =
>     PaCo> file.  I always use onefile = TRUE, so it always works
>     PaCo> (so far).  However, I'm a little reluctant to do that
>     PaCo> in case some future changes cause conflicts.  I've
>     PaCo> been warned off tinkering with .Internal
> 
>     PaCo> My question is: What is the tidiest way of doing such
>     PaCo> a thing?  Should I make a private function that calls
>     PaCo> the standard postscript function, 
> 
> yes, your own function calling the standard high-level postscript(),
> not some low-level {.Internal(), .Call(), .C() or .For..... } --
> these all may be changed "without notice" !}
> 
>     PaCo> or should I go the whole hog and make an S4 type method to handle it?
> 
>     PaCo> Or would it be simpler for the standard function to be changed
> 
> certainly simpler for you.. ;-)
> 
> I tend to agree that a change might be useful --
> For the new default, I'd actually go further and propose
> something like (when file = "Rplots.ps")
> 
>    "Rplots.ps [from R 1.7.0]"
> 
>     PaCo> (assuming, of course, there aren't good reasons
>     PaCo> against doing that)?
> 
> Unfortunately, there's a good reason: back-compatibility.
> In spite of that, I do advocate a change.

I'm lost here!

Most people don't care what the title is, and I left it as previous
versions gave.  Why would anyone want the title in the file to default to 
the file name, which in any case defaults to something anodyne?

There's a general R principle here: the person who does the work gets to 
choose the details.  Patrick: if you had submitted a comprehensive patch, 
you might have got to choose!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Thu Apr 24 21:10:25 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu Apr 24 20:10:08 2003
Subject: [Rd] Windows chmhelp fails for files called ....col.Rd;
	was: [R] problems with max.col()
In-Reply-To: <3EA8128C.60301@statistik.uni-dortmund.de>
References: <PKAHOFDKPLJALEAA@mailcity.com>
	<3EA8128C.60301@statistik.uni-dortmund.de>
Message-ID: <3EA82891.6020905@statistik.uni-dortmund.de>

[shifting the R-help thread to R-devel]

Uwe Ligges wrote:
> heberto ghezzo wrote:
> > 
[SNIP]


> You observed another bug: The Compiled HTML help file (on Windows) 
> doesn't come up with ?max.col. Nevertheless, brosing through the index 
> results in a working link (and a page).
> 
> I'm not sure whether the bug is in R or in Microsoft's help compiler ...
> I will take a look later (and move the thread to R-devel in case of 
> further investigations).
> 
> Uwe Ligges


I think it's a bug in Microsoft's html help compiler.
The point seems to be that the lookup doesn't work for files called 
*.col.Rd, which are correctly processed by R's help building scripts 
(html files, index files, toc files are all generated correctly, AFAICS).
The cause might be that col has several meaning in compiled html help, 
particularly there is a file extension ".col" defined for "single Help 
collection".

Uwe Ligges

From zedshaw at zedshaw.com  Thu Apr 24 12:23:14 2003
From: zedshaw at zedshaw.com (Zed Shaw)
Date: Thu Apr 24 20:23:17 2003
Subject: [Rd] A Scanner and Parser for R
Message-ID: <D0283AC5-7681-11D7-8562-00039391E298@zedshaw.com>

Hi All,

I have recently written an R scanner and parser for the Obversive 
project.  I wrote it using re2c and lemon in order to make sure that it 
doesn't require any external libraries.  It currently only has 9 
conflicts which I can't quite figure out how to resolve and I'm sure it 
doesn't parse exactly correct.  One thing I can't quite fix is the 
ambiguous use of newlines in R.  I know that R currently uses a "work 
around" where there is an empty production called cr and this is used 
to tell the scanner when to start ignoring newlines.  I'll most likely 
end up doing the same thing.

I'm sharing this with the R dev team to get some input into it's 
correctness.  I'm curious about general opinions, usefulness, etc.  The 
main purpose of this parser is to give users better feedback on R code 
before they submit it to R for processing.  We're not trying explicitly 
to replicate R's parsing behavior, but more trying to enforce a 
particular style.  This is because we generate R code from GUI 
interfaces, so the user isn't writing code, only reviewing it for 
errors.

The main advantages that this parser has over the current R parser is 
that it is damn fast and doesn't require external libraries.  My own 
informal tests on my machine shows that it can parse 25M of R code in 
about 40 seconds, including error detection, reporting, recovery, and 
logging of the entire parsing internal state.  It is also designed to 
have no memory leaks, which is admittedly really easy when all you do 
is parse.

Anyway, send me your thoughts on this.  Thanks.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: parser.y
Type: application/octet-stream
Size: 5650 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030424/25fc7e79/parser.exe
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scanner.re
Type: application/octet-stream
Size: 5143 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030424/25fc7e79/scanner.exe
From andy_liaw at merck.com  Thu Apr 24 18:02:05 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu Apr 24 23:02:34 2003
Subject: [Rd] changing dir. to network drive crash Rgui on NT4 (
 PR#28	28)
Message-ID: <3A822319EB35174CA3714066D590DCD5C4FA58@usrymx25.merck.com>

Thanks very much, Duncan!  I tried it and no more crashes for me either.

Best,
Andy

> -----Original Message-----
> From: Duncan Murdoch [mailto:dmurdoch@pair.com]
> Sent: Thursday, April 24, 2003 8:45 AM
> To: mschwartz@medanalytics.com
> Cc: 'Liaw, Andy'; r-devel@stat.math.ethz.ch;
> ligges@statistik.uni-dortmund.de
> Subject: Re: [Rd] changing dir. to network drive crash Rgui on NT4 (
> PR#2828)
> 
> 
> On Wed, 23 Apr 2003 13:57:09 -0500, you wrote:
> 
> >After seeing your note above and Uwe's follow up, I reset Rgui to SDI
> >mode (I normally run MDI).  I have not been able to do this
> >predictably yet, but I have locked up Rgui twice and caused it to
> >crash once by changing the current directory and then going into the
> >GUI preferences and changing back to MDI mode. It has not occurred
> >simply changing directories.
> 
> I found a bug in the folder browsing code and have fixed it; it would
> probably cause strange crashes like this.  I've committed the change
> to r-patched, and will be putting a build that incorporates this
> change (and some others) online at 
> 
> http://www.stats.uwo.ca/faculty/murdoch/software/r-devel
> 
> as rw1071.exe in a couple of hours from now.  Could those of you who
> have been able to reproduce this crash try out the fix?  Thanks.
> 
> Duncan Murdoch
>

From ross at biostat.ucsf.edu  Fri Apr 25 03:37:11 2003
From: ross at biostat.ucsf.edu (ross@biostat.ucsf.edu)
Date: Fri Apr 25 02:37:22 2003
Subject: [Rd] FAQ/Website problems (PR#2840)
Message-ID: <200304250037.h3P0bBpD010357@pubhealth.ku.dk>

This is based on the FAQ at
http://cran.r-project.org/doc/FAQ/R-FAQ.html

1) Section 2.7 says an update online html version of
the docs is at http://stat.ethz.ch/R/manual/
Clicking on the link produces "not found".

2) Section 1.5 says feedback is most welcome. It needs to say where
to send the feedback (/dev/null?).

From maechler at stat.math.ethz.ch  Fri Apr 25 13:34:50 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Apr 25 12:35:04 2003
Subject: [Rd] FAQ/Website problems (PR#2840)
Message-ID: <200304251034.h3PAYopD015212@pubhealth.ku.dk>

>>>>> "ross" == ross  <ross@biostat.ucsf.edu>
>>>>>     on Fri, 25 Apr 2003 02:37:11 +0200 (MET DST) writes:

    ross> This is based on the FAQ at
    ross> http://cran.r-project.org/doc/FAQ/R-FAQ.html

    ross> 1) Section 2.7 says an update online html version of
    ross> the docs is at http://stat.ethz.ch/R/manual/ 
    ross> Clicking on the link produces "not found".

(for quite some time I think, and on purpose!)
The correct link (also found from www.R-project.org) is "almost the same":
    http://stat.ethz.ch/R-manual/ 


    ross> 2) Section 1.5 says feedback is most welcome. It needs
    ross> to say where to send the feedback (/dev/null?).
:-)
no, to the author of the FAQ who is indicated there (somewhere).
Added him to the CC list of the e-mail.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From maechler at stat.math.ethz.ch  Fri Apr 25 13:34:50 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Apr 25 12:35:22 2003
Subject: [Rd] FAQ/Website problems (PR#2840)
Message-ID: <200304251034.h3PAYopD015212@pubhealth.ku.dk>

>>>>> "ross" == ross  <ross@biostat.ucsf.edu>
>>>>>     on Fri, 25 Apr 2003 02:37:11 +0200 (MET DST) writes:

    ross> This is based on the FAQ at
    ross> http://cran.r-project.org/doc/FAQ/R-FAQ.html

    ross> 1) Section 2.7 says an update online html version of
    ross> the docs is at http://stat.ethz.ch/R/manual/ 
    ross> Clicking on the link produces "not found".

(for quite some time I think, and on purpose!)
The correct link (also found from www.R-project.org) is "almost the same":
    http://stat.ethz.ch/R-manual/ 


    ross> 2) Section 1.5 says feedback is most welcome. It needs
    ross> to say where to send the feedback (/dev/null?).
:-)
no, to the author of the FAQ who is indicated there (somewhere).
Added him to the CC list of the e-mail.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From leydold at statistik.wu-wien.ac.at  Fri Apr 25 14:19:04 2003
From: leydold at statistik.wu-wien.ac.at (leydold@statistik.wu-wien.ac.at)
Date: Fri Apr 25 13:19:16 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
Message-ID: <200304251119.h3PBJ4pD015872@pubhealth.ku.dk>

Hi,

Our department has detected a bug in the implementation of the
Kinderman-Ramage generator for normal random variates in version
1.7.0, which can be seen from the below R session.
(Consecutive calls for chisq.test(...) always gives p-values very
close to 0.)
We have already encountered this bug in version 1.6.2

The error is in file 
R-1.7.0/src/nmath/snorm.c

Here is a patch for this file to correct the error
(the added two lines are crucial):

--- R-1.7.0/src/nmath/snorm.c	Wed Feb 26 16:51:17 2003
+++ snorm.c	Fri Apr 25 09:22:28 2003
@@ -197,7 +197,9 @@
 	u1 = unif_rand();
 	if(u1 < 0.884070402298758) {
 	    u2 = unif_rand();
-	    return A*(1.13113163544180*u1+u2-1);
+	    /** <modified constant> **/
+	    return A*(1.131131635444180*u1+u2-1);
+	    /** </modified> **/
 	}
 	
 	if(u1 >= 0.973310954173898) { /* tail: */
@@ -241,6 +243,10 @@
 	    tt = 0.479727404222441-0.595507138015940*fmin2(u2,u3);
 	    if(fmax2(u2,u3) <= 0.805577924423817)
 		return (u2<u3) ? tt : -tt;
+	    /** <added> **/
+	    if(0.053377549506886*fabs(u2-u3) <= g(tt))
+	      return (u2<u3) ? tt : -tt;
+	    /** </added> **/
 	}
     case BOX_MULLER:
 	if(BM_norm_keep != 0.0) { /* An exact test is intentional */



----------------------------------------------------------

$ uname -a
Linux 2.4.18-3 #1 Thu Apr 18 07:37:53 EDT 2002 i686 unknown

$ R
R : Copyright 2003, The R Development Core Team
Version 1.7.0  (2003-04-16)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> RNGkind(normal.kind="Kinderman-Ramage")
> chisq.test(table(trunc(100*pnorm(rnorm(1e6)))))

        Chi-squared test for given probabilities

data:  table(trunc(100 * pnorm(rnorm(1e+06)))) 
X-squared = 204.1378, df = 99, p-value = 2.746e-09


Josef

--

-----------------------------------------------------------------------------
Josef Leydold     |     University of Economics and Business Administration
                  |     Department for Applied Statistics and Data Processing
-----------------------------------------------------------------------------
Augasse 2-6       |     Tel.   *43/1/31336-4695
A-1090 Vienna     |     FAX    *43/1/31336-738
European Union    |     email  Josef.Leydold@statistik.wu-wien.ac.at
-----------------------------------------------------------------------------
Alles Unglueck kam daher, dass die Denkenden nicht mehr handeln konnten,
und die Handelnden keine Zeit mehr fanden zu denken.       (Marlen Haushofer)

From p.dalgaard at biostat.ku.dk  Fri Apr 25 15:06:23 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Apr 25 14:03:36 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
In-Reply-To: <200304251119.h3PBJ4pD015872@pubhealth.ku.dk>
References: <200304251119.h3PBJ4pD015872@pubhealth.ku.dk>
Message-ID: <x23ck6u6gw.fsf@biostat.ku.dk>

leydold@statistik.wu-wien.ac.at writes:

> Hi,
> 
> Our department has detected a bug in the implementation of the
> Kinderman-Ramage generator for normal random variates in version
> 1.7.0, which can be seen from the below R session.
> (Consecutive calls for chisq.test(...) always gives p-values very
> close to 0.)
> We have already encountered this bug in version 1.6.2
> 
> The error is in file 
> R-1.7.0/src/nmath/snorm.c
> 
> Here is a patch for this file to correct the error
> (the added two lines are crucial):

Thanks. Both look like transcription errors. What was the source of
the corrected constants? The JASA paper cited in snorm.c? 

(Another way of seeing the effect is

 m <- sapply(1:50,function(i)table(trunc(100*pnorm(rnorm(1e6)))))
 matplot(m,type="l")

Two small, but clear, spikes at around 30 and 70 can be seen. The
effect is not seen with the Inversion method, which is the default in
R-1.7.0.) 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Fri Apr 25 14:15:31 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 25 14:15:45 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
In-Reply-To: <x23ck6u6gw.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0304251310530.10094-100000@gannet.stats>

Unfortunately it was the default prior to 1.7.0, so for reproducibility I
think we can't change this.  We could add a new option, a corrected 
version, but is it worth it?  I would definitely add a warning if the 
buggy version was selected, and perhaps make it an error to select it via 
RNGkind (rather than RNGversion or a saved .Random.seed).

On 25 Apr 2003, Peter Dalgaard BSA wrote:

> leydold@statistik.wu-wien.ac.at writes:
> 
> > Hi,
> > 
> > Our department has detected a bug in the implementation of the
> > Kinderman-Ramage generator for normal random variates in version
> > 1.7.0, which can be seen from the below R session.
> > (Consecutive calls for chisq.test(...) always gives p-values very
> > close to 0.)
> > We have already encountered this bug in version 1.6.2
> > 
> > The error is in file 
> > R-1.7.0/src/nmath/snorm.c
> > 
> > Here is a patch for this file to correct the error
> > (the added two lines are crucial):
> 
> Thanks. Both look like transcription errors. What was the source of
> the corrected constants? The JASA paper cited in snorm.c? 
> 
> (Another way of seeing the effect is
> 
>  m <- sapply(1:50,function(i)table(trunc(100*pnorm(rnorm(1e6)))))
>  matplot(m,type="l")
> 
> Two small, but clear, spikes at around 30 and 70 can be seen. The
> effect is not seen with the Inversion method, which is the default in
> R-1.7.0.) 
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Fri Apr 25 15:37:58 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Apr 25 14:35:13 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
In-Reply-To: <Pine.LNX.4.44.0304251310530.10094-100000@gannet.stats>
References: <Pine.LNX.4.44.0304251310530.10094-100000@gannet.stats>
Message-ID: <x2y91ysqft.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Unfortunately it was the default prior to 1.7.0, so for reproducibility I
> think we can't change this.  We could add a new option, a corrected 
> version, but is it worth it?  I would definitely add a warning if the 
> buggy version was selected, and perhaps make it an error to select it via 
> RNGkind (rather than RNGversion or a saved .Random.seed).

Argh...

We do normally correct errors leading to incorrect values. I mean, if
we found a bug in qnorm() we wouldn't hesitate to fix it even if
though it affects the Inversion RNG, would we? 

How about this: Keep the old generator, but call it "K-R-bug" or so.
Fix the real K-R. Make K-R-bug the version set by RNGversion. One or
more of the methods to set it will generate warnings.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Fri Apr 25 15:35:00 2003
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri Apr 25 14:35:35 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
Message-ID: <200304251235.h3PCZ0pD017081@pubhealth.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Unfortunately it was the default prior to 1.7.0, so for reproducibility I
> think we can't change this.  We could add a new option, a corrected 
> version, but is it worth it?  I would definitely add a warning if the 
> buggy version was selected, and perhaps make it an error to select it via 
> RNGkind (rather than RNGversion or a saved .Random.seed).

Argh...

We do normally correct errors leading to incorrect values. I mean, if
we found a bug in qnorm() we wouldn't hesitate to fix it even if
though it affects the Inversion RNG, would we? 

How about this: Keep the old generator, but call it "K-R-bug" or so.
Fix the real K-R. Make K-R-bug the version set by RNGversion. One or
more of the methods to set it will generate warnings.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Fri Apr 25 15:22:39 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 25 15:22:58 2003
Subject: [Rd] Windows chmhelp fails for files called ....col.Rd; was:
 [R] problems with max.col()
In-Reply-To: <3EA82891.6020905@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.44.0304251420330.12740-100000@gannet.stats>

It does seem to be *.col.html files that give the problem, not max.col as
a topic.  I've renamed the file to maxCol.Rd: I could find no other
*.col.Rd files anywhere.

On Thu, 24 Apr 2003, Uwe Ligges wrote:

> [shifting the R-help thread to R-devel]
> 
> Uwe Ligges wrote:
> > heberto ghezzo wrote:
> > > 
> [SNIP]
> 
> 
> > You observed another bug: The Compiled HTML help file (on Windows) 
> > doesn't come up with ?max.col. Nevertheless, brosing through the index 
> > results in a working link (and a page).
> > 
> > I'm not sure whether the bug is in R or in Microsoft's help compiler ...
> > I will take a look later (and move the thread to R-devel in case of 
> > further investigations).
> > 
> > Uwe Ligges
> 
> 
> I think it's a bug in Microsoft's html help compiler.
> The point seems to be that the lookup doesn't work for files called 
> *.col.Rd, which are correctly processed by R's help building scripts 
> (html files, index files, toc files are all generated correctly, AFAICS).
> The cause might be that col has several meaning in compiled html help, 
> particularly there is a file extension ".col" defined for "single Help 
> collection".

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From camm at enhanced.com  Fri Apr 25 16:28:59 2003
From: camm at enhanced.com (camm@enhanced.com)
Date: Fri Apr 25 15:29:13 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
Message-ID: <200304251328.h3PDSxpD017965@pubhealth.ku.dk>

Greetings!

Douglas Bates <bates@stat.wisc.edu> writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > Camm Maguire <camm@enhanced.com> writes:
> > 
> > > 2) Given the error code, and the scaling behavior with matrix size,
> > >    I'd say the lwork parameter (size of the work array) passed to
> > >    dgesdd is not always large enough, i.e. is not scaling properly
> > >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> > >    code.  It is the responsibility of the calling routine to allocate
> > >    and pass the work array to dgesdd.  With most lapack routines, one
> > >    can make a 'workspace query' call first by setting lwork to -1, or
> > >    some such.  check the man page for details.  This of course would
> > >    have to be done with each change in n,m.  Alternatively, you could
> > >    take the minimum workspace requirements from the manpage.  
> > 
> > Right, but that's actually what we do, use the workspace query. It's
> > all very weird, because the -12 value indicates that the lwork
> > parameter is wrong, but it is computed from an exactly identical call,
> > except lwork=-l:
> > 
> >         lwork = -1;
> > 
> >         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
> >                          &n, &p, xvals, &n, REAL(s),
> >                          REAL(u), &ldu,
> >                          REAL(v), &ldvt,
> >                          &tmp, &lwork, iwork, &info);
> >         lwork = (int) tmp;
> 
> It looks like a problem in ilaenv, the Lapack routine that returns the
> tuning parameters, like the optimal temporary storage size, for
> various Lapack routines.  The value returned in tmp will depend upon
> the results of several calls to ilaenv.  These results can vary between
> different implementations of the blas (or atlas).
> 

Just a note that you should check the returned info value on the
workspace call to make sure tmp has been filled in.  (the man page
says this is done only if the other parameters are valid.)

Does this problem vary with blas, and if so, how?  You can run under
whatever blas you want, including reference, via the LD_LIBRARY_PATH
variable.  Asuming you've installed all the i386 atlas versions and the blas
package:

LD_LIBRARY_PATH     used blas:

/usr/lib                reference
/usr/lib/atlas          base vanilla i386 atlas
/usr/lib/{sse,sse2,3dnow}/atlas    atlas with ISA extensions


ilaenv might possibly be an issue, but only realistically if the
problem blas is coming from the 3dnow atlas.  When I put together the
lapack package, I read in the lapack notes how many of the ilaenv
constants can be hardwired, saving a certain amount of time on the
first call.  I chose not to do this only because of the existence of
the 3dnow, non-ieee compliant blas option at runtime, as one of the
parameters pertains directly to ieee.  So ilaenv is calculating its
parameters n first call at runtime on Debian.  I'm dubious as to the
relevance of this, though, as this should only kick in for single
precision if at all, and should not affect integer values in any case.

Take care,

> 
> 
> 

-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah

From camm at enhanced.com  Fri Apr 25 10:28:33 2003
From: camm at enhanced.com (Camm Maguire)
Date: Fri Apr 25 15:30:32 2003
Subject: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian
	(PR#2822)
In-Reply-To: <6r7k9j25gm.fsf@bates4.stat.wisc.edu>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com> <x2u1co878q.fsf@biostat.ku.dk>
	<6r7k9j25gm.fsf@bates4.stat.wisc.edu>
Message-ID: <541xzqd7um.fsf@intech19.enhanced.com>

Greetings!

Douglas Bates <bates@stat.wisc.edu> writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > Camm Maguire <camm@enhanced.com> writes:
> > 
> > > 2) Given the error code, and the scaling behavior with matrix size,
> > >    I'd say the lwork parameter (size of the work array) passed to
> > >    dgesdd is not always large enough, i.e. is not scaling properly
> > >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> > >    code.  It is the responsibility of the calling routine to allocate
> > >    and pass the work array to dgesdd.  With most lapack routines, one
> > >    can make a 'workspace query' call first by setting lwork to -1, or
> > >    some such.  check the man page for details.  This of course would
> > >    have to be done with each change in n,m.  Alternatively, you could
> > >    take the minimum workspace requirements from the manpage.  
> > 
> > Right, but that's actually what we do, use the workspace query. It's
> > all very weird, because the -12 value indicates that the lwork
> > parameter is wrong, but it is computed from an exactly identical call,
> > except lwork=-l:
> > 
> >         lwork = -1;
> > 
> >         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
> >                          &n, &p, xvals, &n, REAL(s),
> >                          REAL(u), &ldu,
> >                          REAL(v), &ldvt,
> >                          &tmp, &lwork, iwork, &info);
> >         lwork = (int) tmp;
> 
> It looks like a problem in ilaenv, the Lapack routine that returns the
> tuning parameters, like the optimal temporary storage size, for
> various Lapack routines.  The value returned in tmp will depend upon
> the results of several calls to ilaenv.  These results can vary between
> different implementations of the blas (or atlas).
> 

Just a note that you should check the returned info value on the
workspace call to make sure tmp has been filled in.  (the man page
says this is done only if the other parameters are valid.)

Does this problem vary with blas, and if so, how?  You can run under
whatever blas you want, including reference, via the LD_LIBRARY_PATH
variable.  Asuming you've installed all the i386 atlas versions and the blas
package:

LD_LIBRARY_PATH     used blas:

/usr/lib                reference
/usr/lib/atlas          base vanilla i386 atlas
/usr/lib/{sse,sse2,3dnow}/atlas    atlas with ISA extensions


ilaenv might possibly be an issue, but only realistically if the
problem blas is coming from the 3dnow atlas.  When I put together the
lapack package, I read in the lapack notes how many of the ilaenv
constants can be hardwired, saving a certain amount of time on the
first call.  I chose not to do this only because of the existence of
the 3dnow, non-ieee compliant blas option at runtime, as one of the
parameters pertains directly to ieee.  So ilaenv is calculating its
parameters n first call at runtime on Debian.  I'm dubious as to the
relevance of this, though, as this should only kick in for single
precision if at all, and should not affect integer values in any case.

Take care,

> 
> 
> 

-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah

From hb at maths.lth.se  Fri Apr 25 19:21:17 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Apr 25 18:21:22 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem
	withDownloading "dse") (PR#2827)
In-Reply-To: <200304231217.h3NCHapD023050@pubhealth.ku.dk>
Message-ID: <001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>

A patch for install.packages() can be loaded as

 
source("http://www.maths.lth.se/help/R/patches/rw1070/install.packages.R
")

All fixes are done to the local function unpackPkg() of
install.packages(). The fix is based on the assumption that a bundle (in
zip format) contains directories for packages  , which in turn contains
the DESCRIPTION files needed. Is this assumption correct?! I also made
the temporary directory to be deleted using on.exit() to make the error
recovering a little bit nicer.

Henrik Bengtsson

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of 
> dmurdoch@pair.com
> Sent: den 23 april 2003 14:18
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : 
> Problem withDownloading "dse") (PR#2827)
> 
> 
> The reason dse won't install is because of the new versioned 
> install code.  It assumes that it's dealing with a plain 
> package, and doesn't handle bundles properly.
> 
> Robert, could you look at that?  
> 
> A workaround is as follows.  After the install.packages call 
> fails with this message
> 
> >Error in file(file, "r") : unable to open connection
> >In addition: Warning message:
> >cannot open file `dse/DESCRIPTION' 
> 
> you are left with a temporary directory in $RHOME/library 
> named something like $RHOME/library/file14752 (the number at 
> the end will vary).
> 
> This directory will contain subdirectories dse1, dse2, 
> setRNG, and tframe.  
> 
> If you move those four subdirectories up a level to 
> $RHOME/library, then dse will work.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
> 
>

From hornik at ci.tuwien.ac.at  Fri Apr 25 19:21:42 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Fri Apr 25 18:24:37 2003
Subject: [Rd] R-1.7.0 build feedback: NetBSD 1.6 (PR#2837)
In-Reply-To: <200304241745.h3OHjZpD008854@pubhealth.ku.dk>
References: <200304241745.h3OHjZpD008854@pubhealth.ku.dk>
Message-ID: <16041.24726.604398.928556@mithrandir.hornik.net>

>>>>> beebe  writes:

> R-1.7.0 built on NetBSD 1.6, but the validation test suite failed:
> Machinetype:            Intel Pentium III (600 MHz);    NetBSD 1.6 (GENERIC)
> Remote gcc version:     gcc (GCC) 3.2.2
> Remote g++ version:     g++ (GCC) 3.2.2
> Configure environment:  CC=gcc CXX=g++ LDFLAGS=-Wl,-rpath,/usr/local/lib 

> make[5]: Entering directory `/local/build/R-1.7.0/src/library'
>>>> Building/Updating help pages for package 'base'
>      Formats: text example 
> make[5]: Leaving directory `/local/build/R-1.7.0/src/library'
> running code in 'base-Ex.R' ...make[4]: *** [base-Ex.Rout] Error 1
> make[4]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
> make[3]: *** [test-Examples-Base] Error 2
> make[3]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
> make[2]: *** [test-Examples] Error 2
> make[2]: Leaving directory `/local/build/R-1.7.0/tests'

Did you look at base-Ex.Rout.fail to maybe see what the problem is?

-k

From hb at maths.lth.se  Fri Apr 25 19:36:17 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Apr 25 18:36:25 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
In-Reply-To: <Pine.LNX.4.44.0304241744410.1373-100000@gannet.stats>
Message-ID: <001801c30b48$cb4874a0$e502eb82@alpha.wehi.edu.au>

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Prof 
> Brian Ripley
> Sent: den 24 april 2003 18:49
> To: hb@maths.lth.se
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] zip.unpack() crashes R (PR#2818)
> 
> 
> On Tue, 22 Apr 2003 hb@maths.lth.se wrote:
> 
> > Full_Name: Henrik Bengtsson
> > Version: R v1.7.0
> > OS: WinXP Pro
> > Submission from: (NULL) (130.235.2.229)
> > 
> > 
> > There seems to be an upper limit of the number of files 
> (approx 1000 
> > files) a
> 
> Yes, 500 topics.

OK.
 
> > zip-file can contain when unpacking it with zip.unpack(). 
> This results 
> > in an R crash. This bug is urgent since install.packages() 
> relies on 
> > zip.unpack() and too big packages/bundles won't install with the 
> > current R v1.7.0 for Windows.
> 
> Whyever should a R package have over 1000 files?
> I think you are not understanding how to use the --use-zip options.

My --use-zip was indeed broken (HTML Help Workshop was not in the PATH
anymore -> hhc not found -> make partly failed -> use-zip was not ran,
but package was still created but without the *.chm file). Fixing that
brought down the number of files I have quite a bit. However, one can
still not do anything about all the HTML files.

You are right, even with a large number of HTML help files, a package
will probably not contain > 500 files in total in --use-zip is used, but
a bundle may certainly do it. Using --use-zip my bundle contains 580
files and then I still have a lot of documentation left to do. If
bundles will still be around (I have heard rumours packages will only be
supported), then I think 500 files is a too small limit.

> Also, look at options("unzip").

I am aware of the option to use an external unzipper.
 
> Why is this bug `urgent':  it has been around for 14 months, 
> and no one else has encountered a problem?

The moment I sent it I realized that 'urgent' sounded too requesting, I
just wanted to point out that I believe installations of package/bundles
should never be broken since it is such a basic functionality needed.

Thanks for your help

Henrik Bengtsson

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel

From pgilbert at bank-banque-canada.ca  Fri Apr 25 14:06:15 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Apr 25 19:07:13 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem
	withDownloading  "dse") (PR#2827)
In-Reply-To: <001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>
References: <001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>
Message-ID: <3EA96B07.40405@bank-banque-canada.ca>

Henrik Bengtsson wrote:
> A patch for install.packages() can be loaded as
> 
>  
> source("http://www.maths.lth.se/help/R/patches/rw1070/install.packages.R
> ")
> 
> All fixes are done to the local function unpackPkg() of
> install.packages(). The fix is based on the assumption that a bundle (in
> zip format) contains directories for packages  , which in turn contains
> the DESCRIPTION files needed. Is this assumption correct?! I also made

When I put the bundle together, the bundle directory contains a 
DESCRIPTION file, and each package subdirectory contains a file
DESCRIPTION.in. At some point the DESCRIPTION and DESCRIPTION.in files 
are cat'ed together in each package directory (but not by me). So, the 
assumption may be correct at some point in the process, put it is not 
correct at the beginning.

Paul

> the temporary directory to be deleted using on.exit() to make the error
> recovering a little bit nicer.
> 
> Henrik Bengtsson
> 
> 
>>-----Original Message-----
>>From: r-devel-bounces@stat.math.ethz.ch 
>>[mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of 
>>dmurdoch@pair.com
>>Sent: den 23 april 2003 14:18
>>To: r-devel@stat.math.ethz.ch
>>Cc: R-bugs@biostat.ku.dk
>>Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : 
>>Problem withDownloading "dse") (PR#2827)
>>
>>
>>The reason dse won't install is because of the new versioned 
>>install code.  It assumes that it's dealing with a plain 
>>package, and doesn't handle bundles properly.
>>
>>Robert, could you look at that?  
>>
>>A workaround is as follows.  After the install.packages call 
>>fails with this message
>>
>>
>>>Error in file(file, "r") : unable to open connection
>>>In addition: Warning message:
>>>cannot open file `dse/DESCRIPTION' 
>>
>>you are left with a temporary directory in $RHOME/library 
>>named something like $RHOME/library/file14752 (the number at 
>>the end will vary).
>>
>>This directory will contain subdirectories dse1, dse2, 
>>setRNG, and tframe.  
>>
>>If you move those four subdirectories up a level to 
>>$RHOME/library, then dse will work.
>>
>>Duncan Murdoch
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list 
>>https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
>>
>>
> 
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From murdoch at stats.uwo.ca  Fri Apr 25 14:37:31 2003
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri Apr 25 19:35:44 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem
	withDownloading "dse") (PR#2827)
In-Reply-To: <001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>
References: <200304231217.h3NCHapD023050@pubhealth.ku.dk>
	<001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>
Message-ID: <j9qiavseebumt4jtedbkdfpcm1k5b8mtkd@4ax.com>

On Fri, 25 Apr 2003 18:21:17 +0200, you wrote in message
<001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>:

>A patch for install.packages() can be loaded as
>
> 
>source("http://www.maths.lth.se/help/R/patches/rw1070/install.packages.R
>")
>
>All fixes are done to the local function unpackPkg() of
>install.packages(). The fix is based on the assumption that a bundle (in
>zip format) contains directories for packages  , which in turn contains
>the DESCRIPTION files needed. Is this assumption correct?! I also made
>the temporary directory to be deleted using on.exit() to make the error
>recovering a little bit nicer.

That won't quite work.  There are two problems.

 - With namespaces any references from within base functions to
install.packages will see the old function.  There are a few other
functions that call install.packages, so they would need to be fixed,
and the functions that call them, etc...  It's best to fix the
original definition of install.packages by fixing the base package.

 - A change was needed to the code that builds packages as well as to
install.packages.  Binary bundles built with the new code will include
a DESCRIPTION file for the bundle (as well as separate files for each
package within it).  Without that file, the new install.packages won't
work.

As mentioned the other day, I've put a build of the current patched
version of R on my web site (at
http://www.stats.uwo.ca/faculty/murdoch/software/r-devel).  I expect
there will be a 1.7.1 release, but a release date for it has not been
set.  You can use the one from my web site in the meantime if you need
any of the recent bug fixes.  

Duncan

From ripley at stats.ox.ac.uk  Fri Apr 25 19:40:59 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 25 19:41:16 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem
 withDownloading  "dse") (PR#2827)
In-Reply-To: <3EA96B07.40405@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0304251839360.20074-100000@gannet.stats>

On Fri, 25 Apr 2003, Paul Gilbert wrote:

> Henrik Bengtsson wrote:
> > A patch for install.packages() can be loaded as
> > 
> >  
> > source("http://www.maths.lth.se/help/R/patches/rw1070/install.packages.R
> > ")
> > 
> > All fixes are done to the local function unpackPkg() of
> > install.packages(). The fix is based on the assumption that a bundle (in
> > zip format) contains directories for packages  , which in turn contains
> > the DESCRIPTION files needed. Is this assumption correct?! I also made
> 
> When I put the bundle together, the bundle directory contains a 
> DESCRIPTION file, and each package subdirectory contains a file
> DESCRIPTION.in. At some point the DESCRIPTION and DESCRIPTION.in files 
> are cat'ed together in each package directory (but not by me). So, the 
> assumption may be correct at some point in the process, put it is not 
> correct at the beginning.

It is true of a binary INSTALL of a bundle, the issue here.

However, this bug is supposed to be already fixed in R-patched, I believe.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Apr 25 19:49:33 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 25 19:49:47 2003
Subject: [Rd] zip.unpack() crashes R (PR#2818)
In-Reply-To: <001801c30b48$cb4874a0$e502eb82@alpha.wehi.edu.au>
Message-ID: <Pine.LNX.4.44.0304251843490.20090-100000@gannet.stats>

This was intended to work for any size of zip file, and did prior to 
1.7.0.  A bug in the resizing code was introduced in 1.7.0: it is now
fixed in R-patched.


On Fri, 25 Apr 2003, Henrik Bengtsson wrote:

> > -----Original Message-----
> > From: r-devel-bounces@stat.math.ethz.ch 
> > [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Prof 
> > Brian Ripley
> > Sent: den 24 april 2003 18:49
> > To: hb@maths.lth.se
> > Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] zip.unpack() crashes R (PR#2818)
> > 
> > 
> > On Tue, 22 Apr 2003 hb@maths.lth.se wrote:
> > 
> > > Full_Name: Henrik Bengtsson
> > > Version: R v1.7.0
> > > OS: WinXP Pro
> > > Submission from: (NULL) (130.235.2.229)
> > > 
> > > 
> > > There seems to be an upper limit of the number of files 
> > (approx 1000 
> > > files) a
> > 
> > Yes, 500 topics.
> 
> OK.
>  
> > > zip-file can contain when unpacking it with zip.unpack(). 
> > This results 
> > > in an R crash. This bug is urgent since install.packages() 
> > relies on 
> > > zip.unpack() and too big packages/bundles won't install with the 
> > > current R v1.7.0 for Windows.
> > 
> > Whyever should a R package have over 1000 files?
> > I think you are not understanding how to use the --use-zip options.
> 
> My --use-zip was indeed broken (HTML Help Workshop was not in the PATH
> anymore -> hhc not found -> make partly failed -> use-zip was not ran,
> but package was still created but without the *.chm file). Fixing that
> brought down the number of files I have quite a bit. However, one can
> still not do anything about all the HTML files.
> 
> You are right, even with a large number of HTML help files, a package
> will probably not contain > 500 files in total in --use-zip is used, but
> a bundle may certainly do it. Using --use-zip my bundle contains 580
> files and then I still have a lot of documentation left to do. If
> bundles will still be around (I have heard rumours packages will only be
> supported), then I think 500 files is a too small limit.
> 
> > Also, look at options("unzip").
> 
> I am aware of the option to use an external unzipper.
>  
> > Why is this bug `urgent':  it has been around for 14 months, 
> > and no one else has encountered a problem?
> 
> The moment I sent it I realized that 'urgent' sounded too requesting, I
> just wanted to point out that I believe installations of package/bundles
> should never be broken since it is such a basic functionality needed.
> 
> Thanks for your help
> 
> Henrik Bengtsson
> 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list 
> > https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Apr 25 20:27:23 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 25 20:27:34 2003
Subject: [Rd] Bug in versioned install (was: (fwd) R-1.7.0 : Problem
 withDownloading "dse") (PR#2827)
In-Reply-To: <j9qiavseebumt4jtedbkdfpcm1k5b8mtkd@4ax.com>
Message-ID: <Pine.LNX.4.44.0304251920200.22478-100000@gannet.stats>

On Fri, 25 Apr 2003, Duncan Murdoch wrote:

> On Fri, 25 Apr 2003 18:21:17 +0200, you wrote in message
> <001701c30b46$b310e130$e502eb82@alpha.wehi.edu.au>:
> 
> >A patch for install.packages() can be loaded as
> >
> > 
> >source("http://www.maths.lth.se/help/R/patches/rw1070/install.packages.R
> >")
> >
> >All fixes are done to the local function unpackPkg() of
> >install.packages(). The fix is based on the assumption that a bundle (in
> >zip format) contains directories for packages  , which in turn contains
> >the DESCRIPTION files needed. Is this assumption correct?! I also made
> >the temporary directory to be deleted using on.exit() to make the error
> >recovering a little bit nicer.
> 
> That won't quite work.  There are two problems.
> 
>  - With namespaces any references from within base functions to
> install.packages will see the old function.  There are a few other
> functions that call install.packages, so they would need to be fixed,
> and the functions that call them, etc...  It's best to fix the
> original definition of install.packages by fixing the base package.
> 
>  - A change was needed to the code that builds packages as well as to
> install.packages.  Binary bundles built with the new code will include
> a DESCRIPTION file for the bundle (as well as separate files for each
> package within it).  Without that file, the new install.packages won't
> work.

Then the new code is wrong.  A binary bundle is just a zip file containing 
the directories of two or more installed packages.  There is nowhere
useful for the DESCRIPTION file for the bundle to go, and users do expect 
to be able to just unzip the zip file into a library tree.  (They may have 
no choice: our main Windows library tree is only writeable on the Unix 
server.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From lcoggins at usgs.gov  Fri Apr 25 16:13:14 2003
From: lcoggins at usgs.gov (Lewis G Coggins)
Date: Sat Apr 26 00:13:17 2003
Subject: [Rd] problem using mcmc
Message-ID: <OF270A0EFE.F4C5C579-ON07256D13.0079E2AB@wr.usgs.gov>

I'm using the mcmc routine from the bhat library and getting the following
error:

Error in cov(x.mon[2:m1, ] - x.mon[1:(m1 - 1), ]) :
        supply both x and y or a matrix-like x

Anyone have a clue what the problem is?

thanks

Lew Coggins

From j_bailey_46 at agilent.com  Tue Apr 22 04:10:30 2003
From: j_bailey_46 at agilent.com (Jackson Bailey)
Date: Sat Apr 26 09:22:21 2003
Subject: [Rd] Breaking news!   v6ct4ev6lvve9
In-Reply-To: <fa2601c306a0$723999d6$30cea920@ddf8lh1>
Message-ID: <HEBENBGMJOMBGBENOIOJMGJJNOAB.j_bailey_46@agilent.com>

An HTML attachment was scrubbed...
URL: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030422/cc8101c6/attachment.html
From rebecca.cook36 at chello.nl  Sat Apr 26 13:09:12 2003
From: rebecca.cook36 at chello.nl (Rebecca Cook)
Date: Sat Apr 26 14:09:13 2003
Subject: [Rd] no need to stress                                            i
	4tf3e13
In-Reply-To: <c23901c2f27d$08c08ae6$4c4a9898@5uwq6n2>
Message-ID: <DDPPOBKJEADDMDAHAENKFGNHIKAA.rebecca.cook36@chello.nl>

An HTML attachment was scrubbed...
URL: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030426/95c2c750/attachment.html
From maechler at stat.math.ethz.ch  Sat Apr 26 18:53:06 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat Apr 26 17:53:16 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
In-Reply-To: <x2y91ysqft.fsf@biostat.ku.dk>
References: <Pine.LNX.4.44.0304251310530.10094-100000@gannet.stats>
	<x2y91ysqft.fsf@biostat.ku.dk>
Message-ID: <16042.43874.69575.629156@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>>>>>     on 25 Apr 2003 14:37:58 +0200 writes:

    PD> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
    >> Unfortunately it was the default prior to 1.7.0, so for
    >> reproducibility I think we can't change this.  We could
    >> add a new option, a corrected version, but is it worth
    >> it?  I would definitely add a warning if the buggy
    >> version was selected, and perhaps make it an error to
    >> select it via RNGkind (rather than RNGversion or a saved
    >> .Random.seed).

    PD> Argh...

    PD> We do normally correct errors leading to incorrect
    PD> values. I mean, if we found a bug in qnorm() we wouldn't
    PD> hesitate to fix it even if though it affects the
    PD> Inversion RNG, would we?

    PD> How about this: Keep the old generator, but call it
    PD> "K-R-bug" or so.  Fix the real K-R. Make K-R-bug the
    PD> version set by RNGversion. One or more of the methods to
    PD> set it will generate warnings.

This proposal sounds good to my ears.  Since we haven't heard
other comments -- this should go into R-patched, right?
{and who from R-core does it?}

Martin

From p.dalgaard at biostat.ku.dk  Sat Apr 26 19:06:57 2003
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat Apr 26 18:07:10 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
Message-ID: <200304261606.h3QG6vpD028194@pubhealth.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> How about this: Keep the old generator, but call it
>     PD> "K-R-bug" or so.  Fix the real K-R. Make K-R-bug the
>     PD> version set by RNGversion. One or more of the methods to
>     PD> set it will generate warnings.
> 
> This proposal sounds good to my ears.  Since we haven't heard
> other comments -- this should go into R-patched, right?
> {and who from R-core does it?}

I intend to, but not just now. The consequences of not being prepared
for my course on Tuesday are worse than leaving a buggy K-R generator
in 1.7.0 for a while (especially since it is no longer the default)...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Sat Apr 26 19:10:05 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat Apr 26 18:07:35 2003
Subject: [Rd] Kinderman-Ramage (PR#2846)
In-Reply-To: <16042.43874.69575.629156@gargle.gargle.HOWL>
References: <Pine.LNX.4.44.0304251310530.10094-100000@gannet.stats>
	<x2y91ysqft.fsf@biostat.ku.dk>
	<16042.43874.69575.629156@gargle.gargle.HOWL>
Message-ID: <x24r4ls0iq.fsf@biostat.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> How about this: Keep the old generator, but call it
>     PD> "K-R-bug" or so.  Fix the real K-R. Make K-R-bug the
>     PD> version set by RNGversion. One or more of the methods to
>     PD> set it will generate warnings.
> 
> This proposal sounds good to my ears.  Since we haven't heard
> other comments -- this should go into R-patched, right?
> {and who from R-core does it?}

I intend to, but not just now. The consequences of not being prepared
for my course on Tuesday are worse than leaving a buggy K-R generator
in 1.7.0 for a while (especially since it is no longer the default)...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From dmurdoch at pair.com  Sun Apr 27 00:40:31 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Sat Apr 26 23:40:48 2003
Subject: [Rd] Re: [R] Keyboard problem using RWin 1.7.0 (PR#2798)
Message-ID: <200304262140.h3QLeVpD029400@pubhealth.ku.dk>

On Sun, 20 Apr 2003 00:57:18 +0200 (MET DST), DJNordlund@aol.com
wrote:

>Bug Description 
>
>
>At startup I get the standard information and prompt....

>If I then paste anything, even something as simple as the character "1" 
>(without quotes) to the command line, R stops responding to the keyboard.  
>The "1" is visible on the command line, but pressing <return>, or the arrow 
>keys, or <esc>, or any other key has no effect.  If the text being pasted is 
>several lines of code, it is executed correctly, and if it outputs to the 
>console, the output is seen correctly, but afterwards, the keyboard does not 
>respond.  Additional code can be pasted to the command line and it also is 
>executed correctly.

I can't reproduce this one.  Has anyone else been able to?  Dan, can
you reproduce it in the current R-patched?  (If you can't build it
yourself, get a copy from my web page,
<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>.  The copy
there is a couple of days old; I'll be uploading a new one later
today.)

Duncan Murdoch

From dmurdoch at pair.com  Sat Apr 26 18:46:42 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sat Apr 26 23:46:32 2003
Subject: [Rd] Re: Problems with RMySQL in R 1.7.0 for Windows
Message-ID: <qbvlav8rf426pude7vrhaus2l5bfb3ve11@4ax.com>

Jonas, generally questions about contributed packages should go
directly to the packaage maintainer, in this case David A. James
<dj@research.bell-labs.com>.  

>These lines (spec. dbConnect()) do not agree with R 1.7.0 under Win XP:

You should give him details about exactly what's going wrong, that's
not enough information.

Duncan Murdoch

From marknelson_5 at mediaone.com  Tue Apr 22 18:35:32 2003
From: marknelson_5 at mediaone.com (Mark Nelson)
Date: Sun Apr 27 03:37:46 2003
Subject: [Rd] please view your status   rv4xbj1
In-Reply-To: <434801c30773$f172d037$b18ef612@bur7r53>
Message-ID: <CGPHPILDPCGANGHLIHCECMBLAJAB.marknelson_5@mediaone.com>

An HTML attachment was scrubbed...
URL: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030422/e88dd07e/attachment.html
From smyth at wehi.edu.au  Sun Apr 27 16:20:04 2003
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Sun Apr 27 07:21:31 2003
Subject: [Rd] British or American spelling?
Message-ID: <5.2.0.9.1.20030427151644.00acee70@imaphost.wehi.edu.au>

I was curious to read the following in the "Guidelines for Rd files" at 
http://developer.r-project.org/Rds.html:

     "For consistency, aim to use British (rather than American) spelling.
      (NB: British spelling often uses -ize as in `capitalize'. The view of 
spell -b
      of British spelling is a flawed American one. There are English/Scottish
      differences too.)"

because R seems to use American spellings throughout, e.g., "color" instead 
of "colour".

What is the current R-devel view on this?

Gordon

From rmh at surfer.sbm.temple.edu  Sun Apr 27 08:58:03 2003
From: rmh at surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Sun Apr 27 07:58:31 2003
Subject: [Rd] bug and proposed fix in print.trellis 1.7.0 (PR#2859)
Message-ID: <200304270558.h3R5w3pD001161@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII


---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="pt-R.bug.report"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156300.2626055@surfer.sbm.temple.edu>
Content-Description: description
Content-Disposition: attachment; filename="pt-R.bug.report"

IyBZb3VyIG1haWxlciBpcyBzZXQgdG8gIm5vbmUiIChkZWZhdWx0IG9uIFdp
bmRvd3MpLA0NCiMgaGVuY2Ugd2UgY2Fubm90IHNlbmQgdGhlIGJ1ZyByZXBv
cnQgZGlyZWN0bHkgZnJvbSBSLg0NCiMgUGxlYXNlIGNvcHkgdGhlIGJ1ZyBy
ZXBvcnQgKGFmdGVyIGZpbmlzaGluZyBpdCkgdG8NDQojIHlvdXIgZmF2b3Jp
dGUgZW1haWwgcHJvZ3JhbSBhbmQgc2VuZCBpdCB0bw0NCiMNDQojICAgICAg
IHItYnVnc0ByLXByb2plY3Qub3JnDQ0KIw0NCiMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0NCg0NCg0N
ClRoZSBuZXcgZmVhdHVyZSBkZXNjcmliZWQgaW4gcncxMDcwL2xpYnJhcnkv
bGF0dGljZS9DaGFuZ2VzIGlzIHZlcnkNDQp1c2VmdWwgYW5kIGlzIG5lZWRl
ZCBmb3Igc2V2ZXJhbCBvZiB0aGUgZXhhbXBsZXMgSSBzaG93ZWQgYXQgRFND
LTIwMDMuDQ0KDQ0KPiBzY2FsZXMNDQo+IC0tLS0tLQ0NCj4gSW4gYW50aWNp
cGF0aW9uIG9mIGZ1dHVyZSB1c2UgKGluIG5sbWUsIGZvciBleGFtcGxlKSwg
dGhlIGF0IGFuZA0NCj4gbGFiZWxzIGNvbXBvbmVudHMgb2Ygc2NhbGVzIGNh
biBub3cgYmUgYSBsaXN0LiBFYWNoIGVsZW1lbnQNDQo+IGNvcnJlc3BvbmRz
IHRvIGEgcGFuZWwuIFRoaXMgaXMgdGhvcm91Z2hseSB1bnRlc3RlZCBhbmQg
bm90IGd1YXJhbnRlZWQNDQo+IHRvIHdvcmsuDQ0KDQ0KSXQgY3VycmVudGx5
IHJlamVjdHMgY29ycmVjdGx5IGZvcm1lZCB1c2VyIGxhYmVscy4gIEkgYXR0
YWNoIGFuDQ0KZXhhbXBsZSBvZiB0aGUgcHJvYmxlbSBhbmQgYSBwcm9wb3Nl
ZCBmaXguDQ0KDQ0KUmljaA0NCg0NCi0tcGxlYXNlIGRvIG5vdCBlZGl0IHRo
ZSBpbmZvcm1hdGlvbiBiZWxvdy0tDQ0KDQ0KVmVyc2lvbjoNDQogcGxhdGZv
cm0gPSBpMzg2LXBjLW1pbmd3MzINDQogYXJjaCA9IGkzODYNDQogb3MgPSBt
aW5ndzMyDQ0KIHN5c3RlbSA9IGkzODYsIG1pbmd3MzINDQogc3RhdHVzID0g
DQ0KIG1ham9yID0gMQ0NCiBtaW5vciA9IDcuMA0NCiB5ZWFyID0gMjAwMw0N
CiBtb250aCA9IDA0DQ0KIGRheSA9IDE2DQ0KIGxhbmd1YWdlID0gUg0NCg0N
CldpbmRvd3MgWFAgSG9tZSBFZGl0aW9uIChidWlsZCAyNjAwKSBTZXJ2aWNl
IFBhY2sgMS4wDQ0KDQ0KU2VhcmNoIFBhdGg6DQ0KIC5HbG9iYWxFbnYsIGZp
bGU6YzovSE9NRS9ybWgvaGgvc3BsdXMubGlicmFyeS8uUkRhdGEsIHBhY2th
Z2U6Z3JpZCwgcGFja2FnZTpsYXR0aWNlLCBwYWNrYWdlOm1ldGhvZHMsIHBh
Y2thZ2U6Y3Rlc3QsIHBhY2thZ2U6bXZhLCBwYWNrYWdlOm1vZHJlZywgcGFj
a2FnZTpubHMsIHBhY2thZ2U6dHMsIEF1dG9sb2FkcywgcGFja2FnZTpiYXNl
DQ0K
---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="pt-test.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156301.2626055@surfer.sbm.temple.edu>
Content-Description: illustration
Content-Disposition: attachment; filename="pt-test.r"

IyMgcHJpbnQudHJlbGxpcyBidWcgaW4gUiAxLjcuMA0KDQp0bXAgPC0gZGF0
YS5mcmFtZShhPWZhY3RvcihjKCJhIiwiYiIsImMiKSksDQogICAgICAgICAg
ICAgICAgICBiPWZhY3RvcihjKCJkIiwiZSIsImYiKSksDQogICAgICAgICAg
ICAgICAgICBkPWZhY3RvcihjKDEsMSwyKSkpDQoNCnh5cGxvdChhIH4gYiB8
IGQsIGRhdGE9dG1wLCAgIyMgd29ya3MNCiAgICAgICAgc2NhbGVzPWxpc3Qo
YWx0ZXJuYXRpbmc9RikpDQoNCnh5cGxvdChhIH4gYiB8IGQsIGRhdGE9dG1w
LCAgIyMgSW52YWxpZCB2YWx1ZSBmb3IgbGFiZWxzDQogICAgICAgc2NhbGVz
PWxpc3QoeD1saXN0KGxhYmVscz1saXN0KGMoImQiLCJlIiwiIiksYygiIiwi
IiwiZiIpKSwNCiAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0aW5nPUYp
KSkNCg0Kc291cmNlKCJwcmludC50cmVsbGlzLnIiKSAgICAjIyBybWggcHJv
cG9zZWQgZml4DQoNCnh5cGxvdChhIH4gYiB8IGQsIGRhdGE9dG1wLCAgIyMg
bm93IGl0IHdvcmtzDQogICAgICAgc2NhbGVzPWxpc3QoeD1saXN0KGxhYmVs
cz1saXN0KGMoImQiLCJlIiwiIiksYygiIiwiIiwiZiIpKSwNCiAgICAgICAg
ICAgICAgICAgICAgIGFsdGVybmF0aW5nPUYpKSkNCg==
---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="print.trellis.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156302.2626055@surfer.sbm.temple.edu>
Content-Description: proposed fix
Content-Disposition: attachment; filename="print.trellis.r"

cHJpbnQudHJlbGxpcyA8LQ0KZnVuY3Rpb24gKHgsIHBvc2l0aW9uLCBzcGxp
dCwgbW9yZSA9IEZBTFNFLCBuZXdwYWdlID0gVFJVRSwgcGFuZWwuaGVpZ2h0
ID0gbGlzdCgxLCANCiAgICAibnVsbCIpLCBwYW5lbC53aWR0aCA9IGxpc3Qo
MSwgIm51bGwiKSwgLi4uKSANCnsNCiAgICBpZiAoaXMubnVsbChkZXYubGlz
dCgpKSkgDQogICAgICAgIHRyZWxsaXMuZGV2aWNlKCkNCiAgICBlbHNlIGlm
IChpcy5udWxsKHRyZWxsaXMucGFyLmdldCgpKSkgDQogICAgICAgIHRyZWxs
aXMuZGV2aWNlKGRldmljZSA9IC5EZXZpY2UsIG5ldyA9IEZBTFNFKQ0KICAg
IGJnID0gdHJlbGxpcy5wYXIuZ2V0KCJiYWNrZ3JvdW5kIikkY29sDQogICAg
bmV3IDwtIFRSVUUNCiAgICBpZiAoLmxhdHRpY2UucHJpbnQubW9yZSB8fCAh
bmV3cGFnZSkgDQogICAgICAgIG5ldyA8LSBGQUxTRQ0KICAgIC5sYXR0aWNl
LnByaW50Lm1vcmUgPDwtIG1vcmUNCiAgICB1c3VhbCA8LSAobWlzc2luZyhw
b3NpdGlvbikgJiBtaXNzaW5nKHNwbGl0KSkNCiAgICBmb250c2l6ZS5kZWZh
dWx0IDwtIHRyZWxsaXMucGFyLmdldCgiZm9udHNpemUiKSRkZWZhdWx0DQog
ICAgaWYgKCFtaXNzaW5nKHBvc2l0aW9uKSkgew0KICAgICAgICBpZiAobGVu
Z3RoKHBvc2l0aW9uKSAhPSA0KSANCiAgICAgICAgICAgIHN0b3AoIkluY29y
cmVjdCB2YWx1ZSBvZiBwb3NpdGlvbiIpDQogICAgICAgIGlmIChuZXcpIHsN
CiAgICAgICAgICAgIGdyaWQubmV3cGFnZSgpDQogICAgICAgICAgICBncmlk
LnJlY3QoZ3AgPSBncGFyKGZpbGwgPSBiZywgY29sID0gInRyYW5zcGFyZW50
IikpDQogICAgICAgIH0NCiAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9y
dCh4ID0gcG9zaXRpb25bMV0sIHkgPSBwb3NpdGlvblsyXSwgDQogICAgICAg
ICAgICB3aWR0aCA9IHBvc2l0aW9uWzNdIC0gcG9zaXRpb25bMV0sIGhlaWdo
dCA9IHBvc2l0aW9uWzRdIC0gDQogICAgICAgICAgICAgICAgcG9zaXRpb25b
Ml0sIGp1c3QgPSBjKCJsZWZ0IiwgImJvdHRvbSIpKSkNCiAgICAgICAgaWYg
KCFtaXNzaW5nKHNwbGl0KSkgew0KICAgICAgICAgICAgaWYgKGxlbmd0aChz
cGxpdCkgIT0gNCkgDQogICAgICAgICAgICAgICAgc3RvcCgiSW5jb3JyZWN0
IHZhbHVlIG9mIHNwbGl0IikNCiAgICAgICAgICAgIHB1c2gudmlld3BvcnQo
dmlld3BvcnQobGF5b3V0ID0gZ3JpZC5sYXlvdXQobnJvdyA9IHNwbGl0WzRd
LCANCiAgICAgICAgICAgICAgICBuY29sID0gc3BsaXRbM10pKSkNCiAgICAg
ICAgICAgIHB1c2gudmlld3BvcnQodmlld3BvcnQobGF5b3V0LnBvcy5yb3cg
PSBzcGxpdFsyXSwgDQogICAgICAgICAgICAgICAgbGF5b3V0LnBvcy5jb2wg
PSBzcGxpdFsxXSkpDQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZSBpZiAo
IW1pc3Npbmcoc3BsaXQpKSB7DQogICAgICAgIGlmIChsZW5ndGgoc3BsaXQp
ICE9IDQpIA0KICAgICAgICAgICAgc3RvcCgiSW5jb3JyZWN0IHZhbHVlIG9m
IHNwbGl0IikNCiAgICAgICAgaWYgKG5ldykgew0KICAgICAgICAgICAgZ3Jp
ZC5uZXdwYWdlKCkNCiAgICAgICAgICAgIGdyaWQucmVjdChncCA9IGdwYXIo
ZmlsbCA9IGJnLCBjb2wgPSAidHJhbnNwYXJlbnQiKSkNCiAgICAgICAgfQ0K
ICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dCA9IGdyaWQu
bGF5b3V0KG5yb3cgPSBzcGxpdFs0XSwgDQogICAgICAgICAgICBuY29sID0g
c3BsaXRbM10pKSkNCiAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9ydChs
YXlvdXQucG9zLnJvdyA9IHNwbGl0WzJdLCBsYXlvdXQucG9zLmNvbCA9IHNw
bGl0WzFdKSkNCiAgICB9DQogICAgcGFuZWwgPC0gaWYgKGlzLmZ1bmN0aW9u
KHgkcGFuZWwpKSANCiAgICAgICAgeCRwYW5lbA0KICAgIGVsc2UgaWYgKGlz
LmNoYXJhY3Rlcih4JHBhbmVsKSkgDQogICAgICAgIGdldCh4JHBhbmVsKQ0K
ICAgIGVsc2UgZXZhbCh4JHBhbmVsKQ0KICAgIHgkc3RyaXAgPC0gaWYgKGlz
LmZ1bmN0aW9uKHgkc3RyaXApKSANCiAgICAgICAgeCRzdHJpcA0KICAgIGVs
c2UgaWYgKGlzLmNoYXJhY3Rlcih4JHN0cmlwKSkgDQogICAgICAgIGdldCh4
JHN0cmlwKQ0KICAgIGVsc2UgZXZhbCh4JHN0cmlwKQ0KICAgIGF4aXMubGlu
ZSA8LSB0cmVsbGlzLnBhci5nZXQoImF4aXMubGluZSIpDQogICAgbnVtYmVy
Lm9mLmNvbmQgPC0gbGVuZ3RoKHgkY29uZGxldmVscykNCiAgICBsYXlvdXQu
cmVzcGVjdCA8LSAheCRhc3BlY3QuZmlsbA0KICAgIGlmIChsYXlvdXQucmVz
cGVjdCkgDQogICAgICAgIHBhbmVsLmhlaWdodFtbMV1dIDwtIHgkYXNwZWN0
LnJhdGlvICogcGFuZWwud2lkdGhbWzFdXQ0KICAgIGlmICghaXMubnVsbCh4
JGtleSkpIHsNCiAgICAgICAga2V5LmdmIDwtIGRyYXcua2V5KHgka2V5KQ0K
ICAgICAgICBrZXkuc3BhY2UgPC0gaWYgKCJzcGFjZSIgJWluJSBuYW1lcyh4
JGtleSkpIA0KICAgICAgICAgICAgeCRrZXkkc3BhY2UNCiAgICAgICAgZWxz
ZSBpZiAoIngiICVpbiUgbmFtZXMoeCRrZXkpIHx8ICJjb3JuZXIiICVpbiUg
bmFtZXMoeCRrZXkpKSANCiAgICAgICAgICAgICJpbnNpZGUiDQogICAgICAg
IGVsc2UgInRvcCINCiAgICB9DQogICAgZWxzZSBpZiAoIWlzLm51bGwoeCRj
b2xvcmtleSkpIHsNCiAgICAgICAga2V5LmdmIDwtIGRyYXcuY29sb3JrZXko
eCRjb2xvcmtleSkNCiAgICAgICAga2V5LnNwYWNlIDwtIGlmICgic3BhY2Ui
ICVpbiUgbmFtZXMoeCRjb2xvcmtleSkpIA0KICAgICAgICAgICAgeCRjb2xv
cmtleSRzcGFjZQ0KICAgICAgICBlbHNlICJyaWdodCINCiAgICB9DQogICAg
eGF4aXMuY29sIDwtIGlmIChpcy5sb2dpY2FsKHgkeC5zY2FsZXMkY29sKSkg
DQogICAgICAgIGF4aXMubGluZSRjb2wNCiAgICBlbHNlIHgkeC5zY2FsZXMk
Y29sDQogICAgeGF4aXMuZm9udCA8LSBpZiAoaXMubG9naWNhbCh4JHguc2Nh
bGVzJGZvbnQpKSANCiAgICAgICAgMQ0KICAgIGVsc2UgeCR4LnNjYWxlcyRm
b250DQogICAgeGF4aXMuY2V4IDwtIHgkeC5zY2FsZXMkY2V4DQogICAgeGF4
aXMucm90IDwtIGlmIChpcy5sb2dpY2FsKHgkeC5zY2FsZXMkcm90KSkgDQog
ICAgICAgIGMoMCwgMCkNCiAgICBlbHNlIHgkeC5zY2FsZXMkcm90DQogICAg
eWF4aXMuY29sIDwtIGlmIChpcy5sb2dpY2FsKHgkeS5zY2FsZXMkY29sKSkg
DQogICAgICAgIGF4aXMubGluZSRjb2wNCiAgICBlbHNlIHgkeS5zY2FsZXMk
Y29sDQogICAgeWF4aXMuZm9udCA8LSBpZiAoaXMubG9naWNhbCh4JHkuc2Nh
bGVzJGZvbnQpKSANCiAgICAgICAgMQ0KICAgIGVsc2UgeCR5LnNjYWxlcyRm
b250DQogICAgeWF4aXMuY2V4IDwtIHgkeS5zY2FsZXMkY2V4DQogICAgeWF4
aXMucm90IDwtIGlmICghaXMubG9naWNhbCh4JHkuc2NhbGVzJHJvdCkpIA0K
ICAgICAgICB4JHkuc2NhbGVzJHJvdA0KICAgIGVsc2UgaWYgKHgkeS5zY2Fs
ZXMkcmVsYXRpb24gIT0gInNhbWUiICYmIGlzLmxvZ2ljYWwoeCR5LnNjYWxl
cyRsYWJlbHMpKSANCiAgICAgICAgYyg5MCwgOTApDQogICAgZWxzZSBjKDAs
IDApDQogICAgc3RyaXAuY29sLmRlZmF1bHQuYmcgPC0gcmVwKHRyZWxsaXMu
cGFyLmdldCgic3RyaXAuYmFja2dyb3VuZCIpJGNvbCwgDQogICAgICAgIGxl
bmd0aCA9IG51bWJlci5vZi5jb25kKQ0KICAgIHN0cmlwLmNvbC5kZWZhdWx0
LmZnIDwtIHJlcCh0cmVsbGlzLnBhci5nZXQoInN0cmlwLnNoaW5nbGUiKSRj
b2wsIA0KICAgICAgICBsZW5ndGggPSBudW1iZXIub2YuY29uZCkNCiAgICBj
b25kLm1heC5sZXZlbCA8LSBpbnRlZ2VyKG51bWJlci5vZi5jb25kKQ0KICAg
IGZvciAoaSBpbiAxOm51bWJlci5vZi5jb25kKSB7DQogICAgICAgIGNvbmQu
bWF4LmxldmVsW2ldIDwtIGxlbmd0aCh4JGNvbmRsZXZlbHNbW2ldXSkNCiAg
ICB9DQogICAgaWYgKHgkbGF5b3V0WzFdID09IDApIHsNCiAgICAgICAgZGRp
bSA8LSBwYXIoImRpbiIpDQogICAgICAgIGRldmljZS5hc3BlY3QgPC0gZGRp
bVsyXS9kZGltWzFdDQogICAgICAgIHBhbmVsLmFzcGVjdCA8LSBwYW5lbC5o
ZWlnaHRbWzFdXS9wYW5lbC53aWR0aFtbMV1dDQogICAgICAgIHBsb3RzLnBl
ci5wYWdlIDwtIHgkbGF5b3V0WzJdDQogICAgICAgIG0gPC0gbWF4KDEsIHJv
dW5kKHNxcnQoeCRsYXlvdXRbMl0gKiBkZXZpY2UuYXNwZWN0L3BhbmVsLmFz
cGVjdCkpKQ0KICAgICAgICBuIDwtIGNlaWxpbmcocGxvdHMucGVyLnBhZ2Uv
bSkNCiAgICAgICAgbSA8LSBjZWlsaW5nKHBsb3RzLnBlci5wYWdlL24pDQog
ICAgICAgIHgkbGF5b3V0WzFdIDwtIG4NCiAgICAgICAgeCRsYXlvdXRbMl0g
PC0gbQ0KICAgIH0NCiAgICBlbHNlIHBsb3RzLnBlci5wYWdlIDwtIHgkbGF5
b3V0WzFdICogeCRsYXlvdXRbMl0NCiAgICBjb2xzLnBlci5wYWdlIDwtIHgk
bGF5b3V0WzFdDQogICAgcm93cy5wZXIucGFnZSA8LSB4JGxheW91dFsyXQ0K
ICAgIG51bWJlci5vZi5wYWdlcyA8LSB4JGxheW91dFszXQ0KICAgIGlmIChj
b2xzLnBlci5wYWdlID4gMSkgDQogICAgICAgIHguYmV0d2VlbiA8LSByZXAo
eCR4LmJldHdlZW4sIGxlbmd0aCA9IGNvbHMucGVyLnBhZ2UgLSANCiAgICAg
ICAgICAgIDEpDQogICAgaWYgKHJvd3MucGVyLnBhZ2UgPiAxKSANCiAgICAg
ICAgeS5iZXR3ZWVuIDwtIHJlcCh4JHkuYmV0d2VlbiwgbGVuZ3RoID0gcm93
cy5wZXIucGFnZSAtIA0KICAgICAgICAgICAgMSkNCiAgICB4LmFsdGVybmF0
aW5nIDwtIHJlcCh4JHguc2NhbGVzJGFsdGVybmF0aW5nLCBsZW5ndGggPSBj
b2xzLnBlci5wYWdlKQ0KICAgIHkuYWx0ZXJuYXRpbmcgPC0gcmVwKHgkeS5z
Y2FsZXMkYWx0ZXJuYXRpbmcsIGxlbmd0aCA9IHJvd3MucGVyLnBhZ2UpDQog
ICAgeC5yZWxhdGlvbi5zYW1lIDwtIHgkeC5zY2FsZXMkcmVsYXRpb24gPT0g
InNhbWUiDQogICAgeS5yZWxhdGlvbi5zYW1lIDwtIHgkeS5zY2FsZXMkcmVs
YXRpb24gPT0gInNhbWUiDQogICAgeGxvZyA8LSB4JHguc2NhbGVzJGxvZw0K
ICAgIHlsb2cgPC0geCR5LnNjYWxlcyRsb2cNCiAgICBpZiAoaXMubG9naWNh
bCh4bG9nKSAmJiB4bG9nKSANCiAgICAgICAgeGxvZyA8LSAxMA0KICAgIGlm
IChpcy5sb2dpY2FsKHlsb2cpICYmIHlsb2cpIA0KICAgICAgICB5bG9nIDwt
IDEwDQogICAgaGF2ZS54bG9nIDwtICFpcy5sb2dpY2FsKHhsb2cpIHx8IHhs
b2cNCiAgICBoYXZlLnlsb2cgPC0gIWlzLmxvZ2ljYWwoeWxvZykgfHwgeWxv
Zw0KICAgIHhsb2diYXNlIDwtIGlmIChpcy5udW1lcmljKHhsb2cpKSANCiAg
ICAgICAgeGxvZw0KICAgIGVsc2UgZXhwKDEpDQogICAgeWxvZ2Jhc2UgPC0g
aWYgKGlzLm51bWVyaWMoeWxvZykpIA0KICAgICAgICB5bG9nDQogICAgZWxz
ZSBleHAoMSkNCiAgICB4bG9ncGFzdGUgPC0gaWYgKGhhdmUueGxvZykgDQog
ICAgICAgIHBhc3RlKGFzLmNoYXJhY3Rlcih4bG9nKSwgIl4iLCBzZXAgPSAi
IikNCiAgICBlbHNlICIiDQogICAgeWxvZ3Bhc3RlIDwtIGlmIChoYXZlLnls
b2cpIA0KICAgICAgICBwYXN0ZShhcy5jaGFyYWN0ZXIoeWxvZyksICJeIiwg
c2VwID0gIiIpDQogICAgZWxzZSAiIg0KICAgIGhhdmUubWFpbiA8LSAhKGlz
Lm51bGwoeCRtYWluJGxhYmVsKSB8fCAoaXMuY2hhcmFjdGVyKHgkbWFpbiRs
YWJlbCkgJiYgDQogICAgICAgIHgkbWFpbiRsYWJlbCA9PSAiIikpDQogICAg
aGF2ZS5zdWIgPC0gIShpcy5udWxsKHgkc3ViJGxhYmVsKSB8fCAoaXMuY2hh
cmFjdGVyKHgkc3ViJGxhYmVsKSAmJiANCiAgICAgICAgeCRzdWIkbGFiZWwg
PT0gIiIpKQ0KICAgIGhhdmUueGxhYiA8LSAhKGlzLm51bGwoeCR4bGFiJGxh
YmVsKSB8fCAoaXMuY2hhcmFjdGVyKHgkeGxhYiRsYWJlbCkgJiYgDQogICAg
ICAgIHgkeGxhYiRsYWJlbCA9PSAiIikpDQogICAgaGF2ZS55bGFiIDwtICEo
aXMubnVsbCh4JHlsYWIkbGFiZWwpIHx8IChpcy5jaGFyYWN0ZXIoeCR5bGFi
JGxhYmVsKSAmJiANCiAgICAgICAgeCR5bGFiJGxhYmVsID09ICIiKSkNCiAg
ICBuLnJvdyA8LSByb3dzLnBlci5wYWdlICogKG51bWJlci5vZi5jb25kICsg
MykgKyAocm93cy5wZXIucGFnZSAtIA0KICAgICAgICAxKSArIDExDQogICAg
bi5jb2wgPC0gMyAqIGNvbHMucGVyLnBhZ2UgKyAoY29scy5wZXIucGFnZSAt
IDEpICsgOQ0KICAgIGlmIChsYXlvdXQucmVzcGVjdCkgew0KICAgICAgICBs
YXlvdXQucmVzcGVjdCA8LSBtYXRyaXgoMCwgbi5yb3csIG4uY29sKQ0KICAg
ICAgICBsYXlvdXQucmVzcGVjdFtudW1iZXIub2YuY29uZCArIDYgKyAoMTpy
b3dzLnBlci5wYWdlIC0gDQogICAgICAgICAgICAxKSAqIChudW1iZXIub2Yu
Y29uZCArIDQpLCAoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiANCiAgICAgICAg
ICAgIDQgKyA4XSA8LSAxDQogICAgfQ0KICAgIGhlaWdodHMueCA8LSByZXAo
MSwgbi5yb3cpDQogICAgaGVpZ2h0cy51bml0cyA8LSByZXAoImxpbmVzIiwg
bi5yb3cpDQogICAgaGVpZ2h0cy5kYXRhIDwtIGFzLmxpc3QoMTpuLnJvdykN
CiAgICB3aWR0aHMueCA8LSByZXAoMSwgbi5jb2wpDQogICAgd2lkdGhzLnVu
aXRzIDwtIHJlcCgibGluZXMiLCBuLmNvbCkNCiAgICB3aWR0aHMuZGF0YSA8
LSBhcy5saXN0KDE6bi5jb2wpDQogICAgaGVpZ2h0cy54W251bWJlci5vZi5j
b25kICsgNiArICgxOnJvd3MucGVyLnBhZ2UgLSAxKSAqIChudW1iZXIub2Yu
Y29uZCArIA0KICAgICAgICA0KV0gPC0gcGFuZWwuaGVpZ2h0W1sxXV0NCiAg
ICBoZWlnaHRzLnVuaXRzW251bWJlci5vZi5jb25kICsgNiArICgxOnJvd3Mu
cGVyLnBhZ2UgLSAxKSAqIA0KICAgICAgICAobnVtYmVyLm9mLmNvbmQgKyA0
KV0gPC0gcGFuZWwuaGVpZ2h0W1syXV0NCiAgICBoZWlnaHRzLnhbbnVtYmVy
Lm9mLmNvbmQgKyA3ICsgKDE6cm93cy5wZXIucGFnZSAtIDEpICogKG51bWJl
ci5vZi5jb25kICsgDQogICAgICAgIDQpXSA8LSAwDQogICAgaGVpZ2h0cy54
W251bWJlci5vZi5jb25kICsgOCArICgxOnJvd3MucGVyLnBhZ2UgLSAxKSAq
IChudW1iZXIub2YuY29uZCArIA0KICAgICAgICA0KV0gPC0gMA0KICAgIGhl
aWdodHMueFs0XSA8LSAwDQogICAgaGVpZ2h0cy54WzVdIDwtIDANCiAgICBo
ZWlnaHRzLnhbbi5yb3cgLSA0XSA8LSAwDQogICAgaGVpZ2h0cy54W24ucm93
IC0gNV0gPC0gMA0KICAgIGlmIChyb3dzLnBlci5wYWdlID4gMSkgDQogICAg
ICAgIGhlaWdodHMueFtudW1iZXIub2YuY29uZCArIDkgKyAoKGlmICh4JGFz
LnRhYmxlKSANCiAgICAgICAgICAgIDE6KHJvd3MucGVyLnBhZ2UgLSAxKQ0K
ICAgICAgICBlbHNlIChyb3dzLnBlci5wYWdlIC0gMSk6MSkgLSAxKSAqIChu
dW1iZXIub2YuY29uZCArIA0KICAgICAgICAgICAgNCldIDwtIHkuYmV0d2Vl
bg0KICAgIGhlaWdodHMueFsxXSA8LSAwLjUNCiAgICBoZWlnaHRzLnhbMl0g
PC0gaWYgKGhhdmUubWFpbikgDQogICAgICAgIDIgKiB4JG1haW4kY2V4DQog
ICAgZWxzZSAwDQogICAgaWYgKGhhdmUubWFpbikgew0KICAgICAgICBoZWln
aHRzLnVuaXRzWzJdIDwtICJzdHJoZWlnaHQiDQogICAgICAgIGhlaWdodHMu
ZGF0YVtbMl1dIDwtIHgkbWFpbiRsYWINCiAgICB9DQogICAgaGVpZ2h0cy54
W24ucm93XSA8LSAwLjUNCiAgICBoZWlnaHRzLnhbbi5yb3cgLSAxXSA8LSBp
ZiAoaGF2ZS5zdWIpIA0KICAgICAgICAyICogeCRzdWIkY2V4DQogICAgZWxz
ZSAwDQogICAgaWYgKGhhdmUuc3ViKSB7DQogICAgICAgIGhlaWdodHMudW5p
dHNbbi5yb3cgLSAxXSA8LSAic3RyaGVpZ2h0Ig0KICAgICAgICBoZWlnaHRz
LmRhdGFbW24ucm93IC0gMV1dIDwtIHgkc3ViJGxhYg0KICAgIH0NCiAgICBo
ZWlnaHRzLnhbM10gPC0gMA0KICAgIGhlaWdodHMueFtuLnJvdyAtIDJdIDwt
IDANCiAgICBoZWlnaHRzLmluc2VydGxpc3QucG9zaXRpb24gPC0gMA0KICAg
IGhlaWdodHMuaW5zZXJ0bGlzdC51bml0IDwtIHVuaXQoMSwgIm51bGwiKQ0K
ICAgIGlmICh4JHguc2NhbGVzJGRyYXcpIHsNCiAgICAgICAgaWYgKHgucmVs
YXRpb24uc2FtZSkgew0KICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4
aXNDb21wb25lbnRzKHggPSB4JHgubGltaXRzLCBhdCA9IHgkeC5zY2FsZXMk
YXQsIA0KICAgICAgICAgICAgICAgIGxhYmVscyA9IHgkeC5zY2FsZXMkbGFi
LCBoYXZlLmxvZyA9IGhhdmUueGxvZywgDQogICAgICAgICAgICAgICAgbG9n
YmFzZSA9IHhsb2diYXNlLCBsb2dwYXN0ZSA9IHhsb2dwYXN0ZSwgYWJicmV2
aWF0ZSA9IHgkeC5zY2FsZXMkYWJiciwgDQogICAgICAgICAgICAgICAgbWlu
bGVuZ3RoID0geCR4LnNjYWxlcyRtaW5sLCBuID0geCR4LnNjYWxlcyR0aWNr
Lm51bWJlcikkbGFiDQojIyAgICAgICAgICBpZiAoaXMuY2hhcmFjdGVyKGxh
YikpIA0KICAgICAgICAgICAgaWYgKGFsbChzYXBwbHkobGFiLCBpcy5jaGFy
YWN0ZXIpKSkgICMjIHJtaA0KICAgICAgICAgICAgICAgIHN0cmJhciA8LSBh
cy5saXN0KGxhYikNCiAgICAgICAgICAgIGVsc2UgaWYgKGlzLmV4cHJlc3Np
b24obGFiKSkgew0KICAgICAgICAgICAgICAgIHN0cmJhciA8LSBsaXN0KCkN
CiAgICAgICAgICAgICAgICBmb3IgKHNzIGluIHNlcShhbG9uZyA9IGxhYikp
IHN0cmJhciA8LSBjKHN0cmJhciwgDQogICAgICAgICAgICAgICAgICBsaXN0
KGxhYltzc10pKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBz
dG9wKCJJbnZhbGlkIHZhbHVlIGZvciBsYWJlbHMiKQ0KICAgICAgICAgICAg
aGVpZ2h0cy54WzVdIDwtIDAuNSArIG1heCgwLjAwMSwgeCR4LnNjYWxlcyR0
Y2tbMl0pICogDQogICAgICAgICAgICAgICAgMC4zDQogICAgICAgICAgICBo
ZWlnaHRzLnhbbi5yb3cgLSA1XSA8LSAwLjUgKyBtYXgoMC4wMDEsIHgkeC5z
Y2FsZXMkdGNrWzFdKSAqIA0KICAgICAgICAgICAgICAgIDAuMw0KICAgICAg
ICAgICAgaWYgKGFueSh4LmFsdGVybmF0aW5nID09IDIgfCB4LmFsdGVybmF0
aW5nID09IDMpKSB7DQogICAgICAgICAgICAgICAgaWYgKHhheGlzLnJvdFsy
XSAlaW4lIGMoMCwgMTgwKSkgew0KICAgICAgICAgICAgICAgICAgaGVpZ2h0
cy5pbnNlcnRsaXN0LnBvc2l0aW9uIDwtIGMoaGVpZ2h0cy5pbnNlcnRsaXN0
LnBvc2l0aW9uLCANCiAgICAgICAgICAgICAgICAgICAgNCkNCiAgICAgICAg
ICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC51bml0IDwtIHVuaXQuYyho
ZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQogICAgICAgICAgICAgICAgICAg
IG1heCh1bml0KHJlcCgxICogeGF4aXMuY2V4WzJdLCBsZW5ndGgoc3RyYmFy
KSksIA0KICAgICAgICAgICAgICAgICAgICAgICJzdHJoZWlnaHQiLCBzdHJi
YXIpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxz
ZSB7DQogICAgICAgICAgICAgICAgICBoZWlnaHRzLmluc2VydGxpc3QucG9z
aXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3QucG9zaXRpb24sIA0KICAg
ICAgICAgICAgICAgICAgICA0KQ0KICAgICAgICAgICAgICAgICAgaGVpZ2h0
cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5jKGhlaWdodHMuaW5zZXJ0bGlz
dC51bml0LCANCiAgICAgICAgICAgICAgICAgICAgbWF4KHVuaXQocmVwKDEg
KiB4YXhpcy5jZXhbMl0gKiBhYnMoc2luKHhheGlzLnJvdFsyXSAqIA0KICAg
ICAgICAgICAgICAgICAgICAgIGJhc2U6OnBpLzE4MCkpLCBsZW5ndGgoc3Ry
YmFyKSksICJzdHJ3aWR0aCIsIA0KICAgICAgICAgICAgICAgICAgICAgIHN0
cmJhcikpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgIGlmIChhbnkoeC5hbHRlcm5hdGluZyA9PSAxIHwgeC5hbHRl
cm5hdGluZyA9PSAzKSkgew0KICAgICAgICAgICAgICAgIGlmICh4YXhpcy5y
b3RbMV0gJWluJSBjKDAsIDE4MCkpIHsNCiAgICAgICAgICAgICAgICAgIGhl
aWdodHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiA8LSBjKGhlaWdodHMuaW5zZXJ0
bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIG4ucm93IC0g
NCkNCiAgICAgICAgICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC51bml0
IDwtIHVuaXQuYyhoZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQogICAgICAg
ICAgICAgICAgICAgIG1heCh1bml0KHJlcCgxICogeGF4aXMuY2V4WzFdLCBs
ZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAgICJzdHJo
ZWlnaHQiLCBzdHJiYXIpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICBoZWlnaHRzLmlu
c2VydGxpc3QucG9zaXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3QucG9z
aXRpb24sIA0KICAgICAgICAgICAgICAgICAgICBuLnJvdyAtIDQpDQogICAg
ICAgICAgICAgICAgICBoZWlnaHRzLmluc2VydGxpc3QudW5pdCA8LSB1bml0
LmMoaGVpZ2h0cy5pbnNlcnRsaXN0LnVuaXQsIA0KICAgICAgICAgICAgICAg
ICAgICBtYXgodW5pdChyZXAoMSAqIHhheGlzLmNleFsxXSAqIGFicyhzaW4o
eGF4aXMucm90WzFdICogDQogICAgICAgICAgICAgICAgICAgICAgYmFzZTo6
cGkvMTgwKSksIGxlbmd0aChzdHJiYXIpKSwgInN0cndpZHRoIiwgDQogICAg
ICAgICAgICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0K
ICAgICAgICAgICAgbGFiZWxDaGFycyA8LSBjaGFyYWN0ZXIoMCkNCiAgICAg
ICAgICAgIGxhYmVsRXhwcnMgPC0gZXhwcmVzc2lvbigwKQ0KICAgICAgICAg
ICAgZm9yIChpIGluIHNlcShhbG9uZyA9IHgkeC5saW1pdHMpKSB7DQogICAg
ICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4aXNDb21wb25lbnRzKHgg
PSB4JHgubGltaXRzW1tpXV0sIA0KICAgICAgICAgICAgICAgICAgYXQgPSBp
ZiAoaXMubGlzdCh4JHguc2NhbGVzJGF0KSkgDQogICAgICAgICAgICAgICAg
ICAgIHgkeC5zY2FsZXMkYXRbW2ldXQ0KICAgICAgICAgICAgICAgICAgZWxz
ZSB4JHguc2NhbGVzJGF0LCBsYWJlbHMgPSBpZiAoaXMubGlzdCh4JHguc2Nh
bGVzJGxhYikpIA0KICAgICAgICAgICAgICAgICAgICB4JHguc2NhbGVzJGxh
YltbaV1dDQogICAgICAgICAgICAgICAgICBlbHNlIHgkeC5zY2FsZXMkbGFi
LCBoYXZlLmxvZyA9IGhhdmUueGxvZywgDQogICAgICAgICAgICAgICAgICBs
b2diYXNlID0geGxvZ2Jhc2UsIGxvZ3Bhc3RlID0geGxvZ3Bhc3RlLCBhYmJy
ZXZpYXRlID0geCR4LnNjYWxlcyRhYmJyLCANCiAgICAgICAgICAgICAgICAg
IG1pbmxlbmd0aCA9IHgkeC5zY2FsZXMkbWlubCwgbiA9IHgkeC5zY2FsZXMk
dGljay5udW1iZXIpJGxhYg0KICAgICAgICAgICAgICAgIGlmIChpcy5jaGFy
YWN0ZXIobGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJlbENoYXJzIDwt
IGMobGFiZWxDaGFycywgbGFiKQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYg
KGlzLmV4cHJlc3Npb24obGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJl
bEV4cHJzIDwtIGMobGFiZWxFeHBycywgbGFiKQ0KICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgbGFiZWxDaGFycyA8LSB1bmlxdWUobGFiZWxDaGFycykN
CiAgICAgICAgICAgIHN0cmJhciA8LSBsaXN0KCkNCiAgICAgICAgICAgIGZv
ciAoc3MgaW4gbGFiZWxDaGFycykgc3RyYmFyIDwtIGMoc3RyYmFyLCBsaXN0
KHNzKSkNCiAgICAgICAgICAgIGZvciAoc3MgaW4gc2VxKGFsb25nID0gbGFi
ZWxFeHBycykpIHN0cmJhciA8LSBjKHN0cmJhciwgDQogICAgICAgICAgICAg
ICAgbGlzdChsYWJlbEV4cHJzW3NzXSkpDQogICAgICAgICAgICBpZiAoeGF4
aXMucm90WzFdICVpbiUgYygwLCAxODApKSB7DQogICAgICAgICAgICAgICAg
aGVpZ2h0cy54W251bWJlci5vZi5jb25kICsgNyArICgxOnJvd3MucGVyLnBh
Z2UgLSANCiAgICAgICAgICAgICAgICAgIDEpICogKG51bWJlci5vZi5jb25k
ICsgNCldIDwtIG1heCgwLjAwMSwgeCR4LnNjYWxlcyR0Y2tbMV0pICogDQog
ICAgICAgICAgICAgICAgICAwLjMNCiAgICAgICAgICAgICAgICBoZWlnaHRz
Lmluc2VydGxpc3QucG9zaXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3Qu
cG9zaXRpb24sIA0KICAgICAgICAgICAgICAgICAgbnVtYmVyLm9mLmNvbmQg
KyA4ICsgKDE6cm93cy5wZXIucGFnZSAtIDEpICogDQogICAgICAgICAgICAg
ICAgICAgIChudW1iZXIub2YuY29uZCArIDQpKQ0KICAgICAgICAgICAgICAg
IGZvciAoaSBpbiAxOnJvd3MucGVyLnBhZ2UpIGhlaWdodHMuaW5zZXJ0bGlz
dC51bml0IDwtIHVuaXQuYyhoZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQog
ICAgICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMS41ICogeGF4aXMuY2V4
WzFdLCBsZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAi
c3RyaGVpZ2h0Iiwgc3RyYmFyKSkpDQogICAgICAgICAgICB9DQogICAgICAg
ICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoZWlnaHRzLnhbbnVtYmVy
Lm9mLmNvbmQgKyA3ICsgKDE6cm93cy5wZXIucGFnZSAtIA0KICAgICAgICAg
ICAgICAgICAgMSkgKiAobnVtYmVyLm9mLmNvbmQgKyA0KV0gPC0gbWF4KDAu
MDAxLCB4JHguc2NhbGVzJHRja1sxXSkgKiANCiAgICAgICAgICAgICAgICAg
IDAuMw0KICAgICAgICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC5wb3Np
dGlvbiA8LSBjKGhlaWdodHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAg
ICAgICAgICAgICAgICBudW1iZXIub2YuY29uZCArIDggKyAoMTpyb3dzLnBl
ci5wYWdlIC0gMSkgKiANCiAgICAgICAgICAgICAgICAgICAgKG51bWJlci5v
Zi5jb25kICsgNCkpDQogICAgICAgICAgICAgICAgZm9yIChpIGluIDE6cm93
cy5wZXIucGFnZSkgaGVpZ2h0cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5j
KGhlaWdodHMuaW5zZXJ0bGlzdC51bml0LCANCiAgICAgICAgICAgICAgICAg
IG1heCh1bml0KHJlcCgxLjUgKiB4YXhpcy5jZXhbMV0gKiBhYnMoc2luKHhh
eGlzLnJvdFsxXSAqIA0KICAgICAgICAgICAgICAgICAgICBiYXNlOjpwaS8x
ODApKSwgbGVuZ3RoKHN0cmJhcikpLCAic3Ryd2lkdGgiLCANCiAgICAgICAg
ICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAgICAgICB9DQogICAgICAg
IH0NCiAgICB9DQogICAgaGVpZ2h0cy54W24ucm93IC0gM10gPC0gaWYgKGhh
dmUueGxhYikgDQogICAgICAgIDIgKiB4JHhsYWIkY2V4DQogICAgZWxzZSAw
DQogICAgaWYgKGhhdmUueGxhYikgew0KICAgICAgICBoZWlnaHRzLnVuaXRz
W24ucm93IC0gM10gPC0gInN0cmhlaWdodCINCiAgICAgICAgaGVpZ2h0cy5k
YXRhW1tuLnJvdyAtIDNdXSA8LSB4JHhsYWIkbGFiDQogICAgfQ0KICAgIGZv
ciAoY3JyIGluIDE6bnVtYmVyLm9mLmNvbmQpIGhlaWdodHMueFtudW1iZXIu
b2YuY29uZCArIA0KICAgICAgICA2ICsgKDE6cm93cy5wZXIucGFnZSAtIDEp
ICogKG51bWJlci5vZi5jb25kICsgNCkgLSBjcnJdIDwtIGlmIChpcy5sb2dp
Y2FsKHgkc3RyaXApKSANCiAgICAgICAgMA0KICAgIGVsc2UgMS4xICogeCRw
YXIuc3RyaXAudGV4dCRjZXggKiB4JHBhci5zdHJpcC50ZXh0JGxpbmVzDQog
ICAgd2lkdGhzLnhbM10gPC0gaWYgKGhhdmUueWxhYikgDQogICAgICAgIDIg
KiB4JHlsYWIkY2V4DQogICAgZWxzZSAwDQogICAgaWYgKGhhdmUueWxhYikg
ew0KICAgICAgICB3aWR0aHMudW5pdHNbM10gPC0gInN0cmhlaWdodCINCiAg
ICAgICAgd2lkdGhzLmRhdGFbWzNdXSA8LSB4JHlsYWIkbGFiDQogICAgfQ0K
ICAgIHdpZHRocy54WygxOmNvbHMucGVyLnBhZ2UgLSAxKSAqIDQgKyA4XSA8
LSBwYW5lbC53aWR0aFtbMV1dDQogICAgd2lkdGhzLnVuaXRzWygxOmNvbHMu
cGVyLnBhZ2UgLSAxKSAqIDQgKyA4XSA8LSBwYW5lbC53aWR0aFtbMl1dDQog
ICAgd2lkdGhzLnhbKDE6Y29scy5wZXIucGFnZSAtIDEpICogNCArIDddIDwt
IDANCiAgICB3aWR0aHMueFsoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiA0ICsg
Nl0gPC0gMA0KICAgIHdpZHRocy54WzRdIDwtIDANCiAgICB3aWR0aHMueFs1
XSA8LSAwDQogICAgd2lkdGhzLnhbbi5jb2wgLSAyXSA8LSAwDQogICAgd2lk
dGhzLnhbbi5jb2wgLSAzXSA8LSAwDQogICAgaWYgKGNvbHMucGVyLnBhZ2Ug
PiAxKSANCiAgICAgICAgd2lkdGhzLnhbKDE6KGNvbHMucGVyLnBhZ2UgLSAx
KSAtIDEpICogNCArIDldIDwtIHguYmV0d2Vlbg0KICAgIHdpZHRocy54WzFd
IDwtIDAuNQ0KICAgIHdpZHRocy54W24uY29sXSA8LSAwLjUNCiAgICB3aWR0
aHMueFsyXSA8LSAwDQogICAgd2lkdGhzLnhbbi5jb2wgLSAxXSA8LSAwDQog
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gMA0KICAgIHdpZHRo
cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdCgxLCAibnVsbCIpDQogICAgaWYg
KHgkeS5zY2FsZXMkZHJhdykgew0KICAgICAgICBpZiAoeS5yZWxhdGlvbi5z
YW1lKSB7DQogICAgICAgICAgICBsYWIgPC0gY2FsY3VsYXRlQXhpc0NvbXBv
bmVudHMoeCA9IHgkeS5saW1pdHMsIGF0ID0geCR5LnNjYWxlcyRhdCwgDQog
ICAgICAgICAgICAgICAgbGFiZWxzID0geCR5LnNjYWxlcyRsYWIsIGhhdmUu
bG9nID0gaGF2ZS55bG9nLCANCiAgICAgICAgICAgICAgICBsb2diYXNlID0g
eWxvZ2Jhc2UsIGxvZ3Bhc3RlID0geWxvZ3Bhc3RlLCBhYmJyZXZpYXRlID0g
eCR5LnNjYWxlcyRhYmJyLCANCiAgICAgICAgICAgICAgICBtaW5sZW5ndGgg
PSB4JHkuc2NhbGVzJG1pbmwsIG4gPSB4JHkuc2NhbGVzJHRpY2subnVtYmVy
KSRsYWINCiMjICAgICAgICAgIGlmIChpcy5jaGFyYWN0ZXIobGFiKSkgDQog
ICAgICAgICAgICBpZiAoYWxsKHNhcHBseShsYWIsIGlzLmNoYXJhY3Rlcikp
KSAgIyMgcm1oDQogICAgICAgICAgICAgICAgc3RyYmFyIDwtIGFzLmxpc3Qo
bGFiKQ0KICAgICAgICAgICAgZWxzZSBpZiAoaXMuZXhwcmVzc2lvbihsYWIp
KSB7DQogICAgICAgICAgICAgICAgc3RyYmFyIDwtIGxpc3QoKQ0KICAgICAg
ICAgICAgICAgIGZvciAoc3MgaW4gc2VxKGFsb25nID0gbGFiKSkgc3RyYmFy
IDwtIGMoc3RyYmFyLCANCiAgICAgICAgICAgICAgICAgIGxpc3QobGFiW3Nz
XSkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHN0b3AoIklu
dmFsaWQgdmFsdWUgZm9yIGxhYmVscyIpDQogICAgICAgICAgICB3aWR0aHMu
eFs1XSA8LSAwLjUgKyBtYXgoMC4wMDEsIHgkeS5zY2FsZXMkdGNrWzFdKSAq
IA0KICAgICAgICAgICAgICAgIDAuMw0KICAgICAgICAgICAgd2lkdGhzLnhb
bi5jb2wgLSAzXSA8LSBtYXgoMSwgeCR5LnNjYWxlcyR0Y2tbMl0pICogDQog
ICAgICAgICAgICAgICAgMC41DQogICAgICAgICAgICBpZiAoYW55KHkuYWx0
ZXJuYXRpbmcgPT0gMSB8IHkuYWx0ZXJuYXRpbmcgPT0gMykpIHsNCiAgICAg
ICAgICAgICAgICBpZiAoYWJzKHlheGlzLnJvdFsxXSkgPT0gOTApIHsNCiAg
ICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRsaXN0LnBvc2l0aW9uIDwt
IGMod2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24sIA0KICAgICAgICAgICAg
ICAgICAgICA0KQ0KICAgICAgICAgICAgICAgICAgd2lkdGhzLmluc2VydGxp
c3QudW5pdCA8LSB1bml0LmMod2lkdGhzLmluc2VydGxpc3QudW5pdCwgDQog
ICAgICAgICAgICAgICAgICAgIG1heCh1bml0KDEgKiByZXAoeWF4aXMuY2V4
WzFdLCBsZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAg
ICJzdHJoZWlnaHQiLCBkYXRhID0gc3RyYmFyKSkpDQogICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gYyh3aWR0aHMuaW5z
ZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIDQpDQog
ICAgICAgICAgICAgICAgICB3aWR0aHMuaW5zZXJ0bGlzdC51bml0IDwtIHVu
aXQuYyh3aWR0aHMuaW5zZXJ0bGlzdC51bml0LCANCiAgICAgICAgICAgICAg
ICAgICAgbWF4KHVuaXQocmVwKDEgKiB5YXhpcy5jZXhbMV0gKiBhYnMoY29z
KHlheGlzLnJvdFsxXSAqIA0KICAgICAgICAgICAgICAgICAgICAgIGJhc2U6
OnBpLzE4MCkpLCBsZW5ndGgoc3RyYmFyKSksICJzdHJ3aWR0aCIsIA0KICAg
ICAgICAgICAgICAgICAgICAgIHN0cmJhcikpKQ0KICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChhbnkoeS5hbHRl
cm5hdGluZyA9PSAyIHwgeS5hbHRlcm5hdGluZyA9PSAzKSkgew0KICAgICAg
ICAgICAgICAgIGlmIChhYnMoeWF4aXMucm90WzJdKSA9PSA5MCkgew0KICAg
ICAgICAgICAgICAgICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0g
Yyh3aWR0aHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAg
ICAgICAgIG4uY29sIC0gMikNCiAgICAgICAgICAgICAgICAgIHdpZHRocy5p
bnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5jKHdpZHRocy5pbnNlcnRsaXN0LnVu
aXQsIA0KICAgICAgICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMSAqIHlh
eGlzLmNleFsyXSwgbGVuZ3RoKHN0cmJhcikpLCANCiAgICAgICAgICAgICAg
ICAgICAgICAic3RyaGVpZ2h0Iiwgc3RyYmFyKSkpDQogICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gYyh3aWR0aHMuaW5z
ZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIG4uY29s
IC0gMikNCiAgICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRsaXN0LnVu
aXQgPC0gdW5pdC5jKHdpZHRocy5pbnNlcnRsaXN0LnVuaXQsIA0KICAgICAg
ICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMSAqIHlheGlzLmNleFsyXSAq
IGFicyhjb3MoeWF4aXMucm90WzJdICogDQogICAgICAgICAgICAgICAgICAg
ICAgYmFzZTo6cGkvMTgwKSksIGxlbmd0aChzdHJiYXIpKSwgInN0cndpZHRo
IiwgDQogICAgICAgICAgICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAg
IGVsc2Ugew0KICAgICAgICAgICAgbGFiZWxDaGFycyA8LSBjaGFyYWN0ZXIo
MCkNCiAgICAgICAgICAgIGxhYmVsRXhwcnMgPC0gZXhwcmVzc2lvbigwKQ0K
ICAgICAgICAgICAgZm9yIChpIGluIHNlcShhbG9uZyA9IHgkeS5saW1pdHMp
KSB7DQogICAgICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4aXNDb21w
b25lbnRzKHggPSB4JHkubGltaXRzW1tpXV0sIA0KICAgICAgICAgICAgICAg
ICAgYXQgPSBpZiAoaXMubGlzdCh4JHkuc2NhbGVzJGF0KSkgDQogICAgICAg
ICAgICAgICAgICAgIHgkeS5zY2FsZXMkYXRbW2ldXQ0KICAgICAgICAgICAg
ICAgICAgZWxzZSB4JHkuc2NhbGVzJGF0LCBsYWJlbHMgPSBpZiAoaXMubGlz
dCh4JHkuc2NhbGVzJGxhYikpIA0KICAgICAgICAgICAgICAgICAgICB4JHku
c2NhbGVzJGxhYltbaV1dDQogICAgICAgICAgICAgICAgICBlbHNlIHgkeS5z
Y2FsZXMkbGFiLCBoYXZlLmxvZyA9IGhhdmUueWxvZywgDQogICAgICAgICAg
ICAgICAgICBsb2diYXNlID0geWxvZ2Jhc2UsIGxvZ3Bhc3RlID0geWxvZ3Bh
c3RlLCBhYmJyZXZpYXRlID0geCR5LnNjYWxlcyRhYmJyLCANCiAgICAgICAg
ICAgICAgICAgIG1pbmxlbmd0aCA9IHgkeS5zY2FsZXMkbWlubCwgbiA9IHgk
eS5zY2FsZXMkdGljay5udW1iZXIpJGxhYg0KICAgICAgICAgICAgICAgIGlm
IChpcy5jaGFyYWN0ZXIobGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJl
bENoYXJzIDwtIGMobGFiZWxDaGFycywgbGFiKQ0KICAgICAgICAgICAgICAg
IGVsc2UgaWYgKGlzLmV4cHJlc3Npb24obGFiKSkgDQogICAgICAgICAgICAg
ICAgICBsYWJlbEV4cHJzIDwtIGMobGFiZWxFeHBycywgbGFiKQ0KICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgbGFiZWxDaGFycyA8LSB1bmlxdWUobGFi
ZWxDaGFycykNCiAgICAgICAgICAgIHN0cmJhciA8LSBsaXN0KCkNCiAgICAg
ICAgICAgIGZvciAoc3MgaW4gbGFiZWxDaGFycykgc3RyYmFyIDwtIGMoc3Ry
YmFyLCBsaXN0KHNzKSkNCiAgICAgICAgICAgIGZvciAoc3MgaW4gc2VxKGFs
b25nID0gbGFiZWxFeHBycykpIHN0cmJhciA8LSBjKHN0cmJhciwgDQogICAg
ICAgICAgICAgICAgbGlzdChsYWJlbEV4cHJzW3NzXSkpDQogICAgICAgICAg
ICBpZiAoYWJzKHlheGlzLnJvdFsxXSkgPT0gOTApIHsNCiAgICAgICAgICAg
ICAgICB3aWR0aHMueFsoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiA0ICsgN10g
PC0gbWF4KDAuMDAxLCANCiAgICAgICAgICAgICAgICAgIHgkeS5zY2FsZXMk
dGNrWzFdKSAqIDAuMw0KICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRs
aXN0LnBvc2l0aW9uIDwtIGMod2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24s
IA0KICAgICAgICAgICAgICAgICAgKDE6Y29scy5wZXIucGFnZSAtIDEpICog
NCArIDYpDQogICAgICAgICAgICAgICAgZm9yIChpIGluIDE6Y29scy5wZXIu
cGFnZSkgd2lkdGhzLmluc2VydGxpc3QudW5pdCA8LSB1bml0LmMod2lkdGhz
Lmluc2VydGxpc3QudW5pdCwgDQogICAgICAgICAgICAgICAgICBtYXgodW5p
dChyZXAoMS41ICogeWF4aXMuY2V4WzFdLCBsZW5ndGgoc3RyYmFyKSksIA0K
ICAgICAgICAgICAgICAgICAgICAic3RyaGVpZ2h0Iiwgc3RyYmFyKSkpDQog
ICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAg
ICAgICB3aWR0aHMueFsoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiA0ICsgN10g
PC0gbWF4KDAuMDAxLCANCiAgICAgICAgICAgICAgICAgIHgkeS5zY2FsZXMk
dGNrWzFdKSAqIDAuMw0KICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRs
aXN0LnBvc2l0aW9uIDwtIGMod2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24s
IA0KICAgICAgICAgICAgICAgICAgKDE6Y29scy5wZXIucGFnZSAtIDEpICog
NCArIDYpDQogICAgICAgICAgICAgICAgZm9yIChpIGluIDE6Y29scy5wZXIu
cGFnZSkgd2lkdGhzLmluc2VydGxpc3QudW5pdCA8LSB1bml0LmMod2lkdGhz
Lmluc2VydGxpc3QudW5pdCwgDQogICAgICAgICAgICAgICAgICBtYXgodW5p
dChyZXAoMS4yICogeWF4aXMuY2V4WzFdICogYWJzKGNvcyh5YXhpcy5yb3Rb
MV0gKiANCiAgICAgICAgICAgICAgICAgICAgYmFzZTo6cGkvMTgwKSksIGxl
bmd0aChzdHJiYXIpKSwgInN0cndpZHRoIiwgDQogICAgICAgICAgICAgICAg
ICAgIHN0cmJhcikpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAg
fQ0KICAgIGlmICghaXMubnVsbCh4JGtleSkgfHwgIWlzLm51bGwoeCRjb2xv
cmtleSkpIHsNCiAgICAgICAgaWYgKGtleS5zcGFjZSA9PSAibGVmdCIpIHsN
CiAgICAgICAgICAgIHdpZHRocy54WzJdIDwtIDEuMg0KICAgICAgICAgICAg
d2lkdGhzLnVuaXRzWzJdIDwtICJncm9id2lkdGgiDQogICAgICAgICAgICB3
aWR0aHMuZGF0YVtbMl1dIDwtIGtleS5nZg0KICAgICAgICB9DQogICAgICAg
IGVsc2UgaWYgKGtleS5zcGFjZSA9PSAicmlnaHQiKSB7DQogICAgICAgICAg
ICB3aWR0aHMueFtuLmNvbCAtIDFdIDwtIDEuMg0KICAgICAgICAgICAgd2lk
dGhzLnVuaXRzW24uY29sIC0gMV0gPC0gImdyb2J3aWR0aCINCiAgICAgICAg
ICAgIHdpZHRocy5kYXRhW1tuLmNvbCAtIDFdXSA8LSBrZXkuZ2YNCiAgICAg
ICAgfQ0KICAgICAgICBlbHNlIGlmIChrZXkuc3BhY2UgPT0gInRvcCIpIHsN
CiAgICAgICAgICAgIGhlaWdodHMueFszXSA8LSAxLjINCiAgICAgICAgICAg
IGhlaWdodHMudW5pdHNbM10gPC0gImdyb2JoZWlnaHQiDQogICAgICAgICAg
ICBoZWlnaHRzLmRhdGFbWzNdXSA8LSBrZXkuZ2YNCiAgICAgICAgfQ0KICAg
ICAgICBlbHNlIGlmIChrZXkuc3BhY2UgPT0gImJvdHRvbSIpIHsNCiAgICAg
ICAgICAgIGhlaWdodHMueFtuLnJvdyAtIDJdIDwtIDEuMg0KICAgICAgICAg
ICAgaGVpZ2h0cy51bml0c1tuLnJvdyAtIDJdIDwtICJncm9iaGVpZ2h0Ig0K
ICAgICAgICAgICAgaGVpZ2h0cy5kYXRhW1tuLnJvdyAtIDJdXSA8LSBrZXku
Z2YNCiAgICAgICAgfQ0KICAgIH0NCiAgICBsYXlvdXQuaGVpZ2h0cyA8LSB1
bml0KGhlaWdodHMueCwgaGVpZ2h0cy51bml0cywgZGF0YSA9IGhlaWdodHMu
ZGF0YSkNCiAgICBpZiAobGVuZ3RoKGhlaWdodHMuaW5zZXJ0bGlzdC5wb3Np
dGlvbikgPiAxKSANCiAgICAgICAgZm9yIChpbmR4IGluIDI6bGVuZ3RoKGhl
aWdodHMuaW5zZXJ0bGlzdC5wb3NpdGlvbikpIGxheW91dC5oZWlnaHRzIDwt
IHJlYXJyYW5nZVVuaXQobGF5b3V0LmhlaWdodHMsIA0KICAgICAgICAgICAg
aGVpZ2h0cy5pbnNlcnRsaXN0LnBvc2l0aW9uW2luZHhdLCBoZWlnaHRzLmlu
c2VydGxpc3QudW5pdFtpbmR4XSkNCiAgICBsYXlvdXQud2lkdGhzIDwtIHVu
aXQod2lkdGhzLngsIHdpZHRocy51bml0cywgZGF0YSA9IHdpZHRocy5kYXRh
KQ0KICAgIGlmIChsZW5ndGgod2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24p
ID4gMSkgDQogICAgICAgIGZvciAoaW5keCBpbiAyOmxlbmd0aCh3aWR0aHMu
aW5zZXJ0bGlzdC5wb3NpdGlvbikpIGxheW91dC53aWR0aHMgPC0gcmVhcnJh
bmdlVW5pdChsYXlvdXQud2lkdGhzLCANCiAgICAgICAgICAgIHdpZHRocy5p
bnNlcnRsaXN0LnBvc2l0aW9uW2luZHhdLCB3aWR0aHMuaW5zZXJ0bGlzdC51
bml0W2luZHhdKQ0KICAgIHBhZ2UubGF5b3V0IDwtIGdyaWQubGF5b3V0KG5y
b3cgPSBuLnJvdywgbmNvbCA9IG4uY29sLCB3aWR0aHMgPSBsYXlvdXQud2lk
dGhzLCANCiAgICAgICAgaGVpZ2h0cyA9IGxheW91dC5oZWlnaHRzLCByZXNw
ZWN0ID0gbGF5b3V0LnJlc3BlY3QpDQogICAgY29uZC5jdXJyZW50LmxldmVs
IDwtIHJlcCgxLCBudW1iZXIub2YuY29uZCkNCiAgICBwYW5lbC5udW1iZXIg
PC0gMQ0KICAgIGZvciAocGFnZS5udW1iZXIgaW4gMTpudW1iZXIub2YucGFn
ZXMpIGlmICghYW55KGNvbmQubWF4LmxldmVsIC0gDQogICAgICAgIGNvbmQu
Y3VycmVudC5sZXZlbCA8IDApKSB7DQogICAgICAgIGlmICh1c3VhbCkgew0K
ICAgICAgICAgICAgaWYgKG5ldykgDQogICAgICAgICAgICAgICAgZ3JpZC5u
ZXdwYWdlKCkNCiAgICAgICAgICAgIGdyaWQucmVjdChncCA9IGdwYXIoZmls
bCA9IGJnLCBjb2wgPSAidHJhbnNwYXJlbnQiKSkNCiAgICAgICAgICAgIG5l
dyA8LSBUUlVFDQogICAgICAgIH0NCiAgICAgICAgcHVzaC52aWV3cG9ydCh2
aWV3cG9ydChsYXlvdXQgPSBwYWdlLmxheW91dCwgZ3AgPSBncGFyKGZvbnRz
aXplID0gZm9udHNpemUuZGVmYXVsdCwgDQogICAgICAgICAgICBjb2wgPSBh
eGlzLmxpbmUkY29sLCBsdHkgPSBheGlzLmxpbmUkbHR5LCBsd2QgPSBheGlz
LmxpbmUkbHdkKSkpDQogICAgICAgIGlmIChoYXZlLm1haW4pIA0KICAgICAg
ICAgICAgZ3JpZC50ZXh0KGxhYmVsID0geCRtYWluJGxhYmVsLCBncCA9IGdw
YXIoY29sID0geCRtYWluJGNvbCwgDQogICAgICAgICAgICAgICAgZm9udCA9
IHgkbWFpbiRmb250LCBmb250c2l6ZSA9IGZvbnRzaXplLmRlZmF1bHQgKiAN
CiAgICAgICAgICAgICAgICAgIHgkbWFpbiRjZXgpLCB2cCA9IHZpZXdwb3J0
KGxheW91dC5wb3Mucm93ID0gMikpDQogICAgICAgIGlmIChoYXZlLnN1Yikg
DQogICAgICAgICAgICBncmlkLnRleHQobGFiZWwgPSB4JHN1YiRsYWJlbCwg
Z3AgPSBncGFyKGNvbCA9IHgkc3ViJGNvbCwgDQogICAgICAgICAgICAgICAg
Zm9udCA9IHgkc3ViJGZvbnQsIGZvbnRzaXplID0gZm9udHNpemUuZGVmYXVs
dCAqIA0KICAgICAgICAgICAgICAgICAgeCRzdWIkY2V4KSwgdnAgPSB2aWV3
cG9ydChsYXlvdXQucG9zLnJvdyA9IG4ucm93IC0gDQogICAgICAgICAgICAg
ICAgMSkpDQogICAgICAgIGlmIChoYXZlLnhsYWIpIA0KICAgICAgICAgICAg
Z3JpZC50ZXh0KGxhYmVsID0geCR4bGFiJGxhYmVsLCBncCA9IGdwYXIoY29s
ID0geCR4bGFiJGNvbCwgDQogICAgICAgICAgICAgICAgZm9udCA9IHgkeGxh
YiRmb250LCBmb250c2l6ZSA9IGZvbnRzaXplLmRlZmF1bHQgKiANCiAgICAg
ICAgICAgICAgICAgIHgkeGxhYiRjZXgpLCB2cCA9IHZpZXdwb3J0KGxheW91
dC5wb3Mucm93ID0gbi5yb3cgLSANCiAgICAgICAgICAgICAgICAzLCBsYXlv
dXQucG9zLmNvbCA9IGMoNiwgbi5jb2wgLSA0KSkpDQogICAgICAgIGlmICho
YXZlLnlsYWIpIA0KICAgICAgICAgICAgZ3JpZC50ZXh0KGxhYmVsID0geCR5
bGFiJGxhYmVsLCByb3QgPSA5MCwgZ3AgPSBncGFyKGNvbCA9IHgkeWxhYiRj
b2wsIA0KICAgICAgICAgICAgICAgIGZvbnQgPSB4JHlsYWIkZm9udCwgZm9u
dHNpemUgPSBmb250c2l6ZS5kZWZhdWx0ICogDQogICAgICAgICAgICAgICAg
ICB4JHlsYWIkY2V4KSwgdnAgPSB2aWV3cG9ydChsYXlvdXQucG9zLmNvbCA9
IDMsIA0KICAgICAgICAgICAgICAgIGxheW91dC5wb3Mucm93ID0gYyg2LCBu
LnJvdyAtIDYpKSkNCiAgICAgICAgZm9yIChyb3cgaW4gMTpyb3dzLnBlci5w
YWdlKSBmb3IgKGNvbHVtbiBpbiAxOmNvbHMucGVyLnBhZ2UpIGlmICghYW55
KGNvbmQubWF4LmxldmVsIC0gDQogICAgICAgICAgICBjb25kLmN1cnJlbnQu
bGV2ZWwgPCAwKSAmJiAocm93IC0gMSkgKiBjb2xzLnBlci5wYWdlICsgDQog
ICAgICAgICAgICBjb2x1bW4gPD0gcGxvdHMucGVyLnBhZ2UpIHsNCiAgICAg
ICAgICAgIGlmICghaXMubGlzdCh4JHBhbmVsLmFyZ3NbW3BhbmVsLm51bWJl
cl1dKSkgDQogICAgICAgICAgICAgICAgcGFuZWwubnVtYmVyIDwtIHBhbmVs
Lm51bWJlciArIDENCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAg
ICAgIGFjdHVhbC5yb3cgPC0gaWYgKHgkYXMudGFibGUpIA0KICAgICAgICAg
ICAgICAgICAgKHJvd3MucGVyLnBhZ2UgLSByb3cgKyAxKQ0KICAgICAgICAg
ICAgICAgIGVsc2Ugcm93DQogICAgICAgICAgICAgICAgcG9zLnJvdyA8LSA2
ICsgbnVtYmVyLm9mLmNvbmQgKyAocm93cy5wZXIucGFnZSAtIA0KICAgICAg
ICAgICAgICAgICAgYWN0dWFsLnJvdykgKiAobnVtYmVyLm9mLmNvbmQgKyA0
KQ0KICAgICAgICAgICAgICAgIHBvcy5jb2wgPC0gKGNvbHVtbiAtIDEpICog
NCArIDgNCiAgICAgICAgICAgICAgICB4bGFiZWxpbmZvIDwtIGNhbGN1bGF0
ZUF4aXNDb21wb25lbnRzKHggPSBpZiAoeC5yZWxhdGlvbi5zYW1lKSANCiAg
ICAgICAgICAgICAgICAgIHgkeC5saW1pdHMNCiAgICAgICAgICAgICAgICBl
bHNlIHgkeC5saW1pdHNbW3BhbmVsLm51bWJlcl1dLCBhdCA9IGlmIChpcy5s
aXN0KHgkeC5zY2FsZXMkYXQpKSANCiAgICAgICAgICAgICAgICAgIHgkeC5z
Y2FsZXMkYXRbW3BhbmVsLm51bWJlcl1dDQogICAgICAgICAgICAgICAgZWxz
ZSB4JHguc2NhbGVzJGF0LCBsYWJlbHMgPSBpZiAoaXMubGlzdCh4JHguc2Nh
bGVzJGxhYikpIA0KICAgICAgICAgICAgICAgICAgeCR4LnNjYWxlcyRsYWJb
W3BhbmVsLm51bWJlcl1dDQogICAgICAgICAgICAgICAgZWxzZSB4JHguc2Nh
bGVzJGxhYiwgaGF2ZS5sb2cgPSBoYXZlLnhsb2csIGxvZ2Jhc2UgPSB4bG9n
YmFzZSwgDQogICAgICAgICAgICAgICAgICBsb2dwYXN0ZSA9IHhsb2dwYXN0
ZSwgYWJicmV2aWF0ZSA9IHgkeC5zY2FsZXMkYWJiciwgDQogICAgICAgICAg
ICAgICAgICBtaW5sZW5ndGggPSB4JHguc2NhbGVzJG1pbmwsIG4gPSB4JHgu
c2NhbGVzJHRpY2subnVtYmVyKQ0KICAgICAgICAgICAgICAgIHlsYWJlbGlu
Zm8gPC0gY2FsY3VsYXRlQXhpc0NvbXBvbmVudHMoeCA9IGlmICh5LnJlbGF0
aW9uLnNhbWUpIA0KICAgICAgICAgICAgICAgICAgeCR5LmxpbWl0cw0KICAg
ICAgICAgICAgICAgIGVsc2UgeCR5LmxpbWl0c1tbcGFuZWwubnVtYmVyXV0s
IGF0ID0gaWYgKGlzLmxpc3QoeCR5LnNjYWxlcyRhdCkpIA0KICAgICAgICAg
ICAgICAgICAgeCR5LnNjYWxlcyRhdFtbcGFuZWwubnVtYmVyXV0NCiAgICAg
ICAgICAgICAgICBlbHNlIHgkeS5zY2FsZXMkYXQsIGxhYmVscyA9IGlmIChp
cy5saXN0KHgkeS5zY2FsZXMkbGFiKSkgDQogICAgICAgICAgICAgICAgICB4
JHkuc2NhbGVzJGxhYltbcGFuZWwubnVtYmVyXV0NCiAgICAgICAgICAgICAg
ICBlbHNlIHgkeS5zY2FsZXMkbGFiLCBoYXZlLmxvZyA9IGhhdmUueWxvZywg
bG9nYmFzZSA9IHlsb2diYXNlLCANCiAgICAgICAgICAgICAgICAgIGxvZ3Bh
c3RlID0geWxvZ3Bhc3RlLCBhYmJyZXZpYXRlID0geCR5LnNjYWxlcyRhYmJy
LCANCiAgICAgICAgICAgICAgICAgIG1pbmxlbmd0aCA9IHgkeS5zY2FsZXMk
bWlubCwgbiA9IHgkeS5zY2FsZXMkdGljay5udW1iZXIpDQogICAgICAgICAg
ICAgICAgeHNjYWxlIDwtIHhsYWJlbGluZm8kbnVtLmxpbWl0DQogICAgICAg
ICAgICAgICAgeXNjYWxlIDwtIHlsYWJlbGluZm8kbnVtLmxpbWl0DQogICAg
ICAgICAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9ydChsYXlvdXQucG9z
LnJvdyA9IHBvcy5yb3csIA0KICAgICAgICAgICAgICAgICAgbGF5b3V0LnBv
cy5jb2wgPSBwb3MuY29sLCB4c2NhbGUgPSB4c2NhbGUsIA0KICAgICAgICAg
ICAgICAgICAgeXNjYWxlID0geXNjYWxlLCBjbGlwID0gVFJVRSwgZ3AgPSBn
cGFyKGZvbnRzaXplID0gZm9udHNpemUuZGVmYXVsdCkpKQ0KICAgICAgICAg
ICAgICAgIHBhcmdzIDwtIGMoeCRwYW5lbC5hcmdzW1twYW5lbC5udW1iZXJd
XSwgeCRwYW5lbC5hcmdzLmNvbW1vbiwgDQogICAgICAgICAgICAgICAgICBs
aXN0KHBhbmVsLm51bWJlciA9IHBhbmVsLm51bWJlcikpDQogICAgICAgICAg
ICAgICAgaWYgKCEoIi4uLiIgJWluJSBuYW1lcyhmb3JtYWxzKHBhbmVsKSkp
KSANCiAgICAgICAgICAgICAgICAgIHBhcmdzIDwtIHBhcmdzW25hbWVzKGZv
cm1hbHMocGFuZWwpKV0NCiAgICAgICAgICAgICAgICBkby5jYWxsKCJwYW5l
bCIsIHBhcmdzKQ0KICAgICAgICAgICAgICAgIGdyaWQucmVjdCgpDQogICAg
ICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAgICAgICAgICBp
ZiAoIXgucmVsYXRpb24uc2FtZSAmJiB4JHguc2NhbGVzJGRyYXcpIHsNCiAg
ICAgICAgICAgICAgICAgIGF4cyA8LSB4JHguc2NhbGVzDQogICAgICAgICAg
ICAgICAgICBvayA8LSAoeGxhYmVsaW5mbyRhdCA+PSB4c2NhbGVbMV0gJiB4
bGFiZWxpbmZvJGF0IDw9IA0KICAgICAgICAgICAgICAgICAgICB4c2NhbGVb
Ml0pDQogICAgICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0
KGxheW91dC5wb3Mucm93ID0gcG9zLnJvdyArIA0KICAgICAgICAgICAgICAg
ICAgICAxLCBsYXlvdXQucG9zLmNvbCA9IHBvcy5jb2wsIHhzY2FsZSA9IHhz
Y2FsZSkpDQogICAgICAgICAgICAgICAgICBpZiAoYXhzJHRja1sxXSAhPSAw
ICYmIGFueShvaykpIA0KICAgICAgICAgICAgICAgICAgICBncmlkLnNlZ21l
bnRzKHkwID0gdW5pdChyZXAoMSwgc3VtKG9rKSksIA0KICAgICAgICAgICAg
ICAgICAgICAgICJucGMiKSwgeTEgPSB1bml0KHJlcCgxLCBzdW0ob2spKSwg
Im5wYyIpIC0gDQogICAgICAgICAgICAgICAgICAgICAgdW5pdChyZXAoMC4z
ICogYXhzJHRja1sxXSwgc3VtKG9rKSksICJsaW5lcyIpLCANCiAgICAgICAg
ICAgICAgICAgICAgICB4MCA9IHVuaXQoeGxhYmVsaW5mbyRhdFtva10sICJu
YXRpdmUiKSwgDQogICAgICAgICAgICAgICAgICAgICAgeDEgPSB1bml0KHhs
YWJlbGluZm8kYXRbb2tdLCAibmF0aXZlIiksIA0KICAgICAgICAgICAgICAg
ICAgICAgIGdwID0gZ3Bhcihjb2wgPSB4YXhpcy5jb2wpKQ0KICAgICAgICAg
ICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAgICAgICAgICAgIGlm
IChhbnkob2spKSANCiAgICAgICAgICAgICAgICAgICAgZ3JpZC50ZXh0KGxh
YmVsID0geGxhYmVsaW5mbyRsYWJlbFtva10sIHggPSB1bml0KHhsYWJlbGlu
Zm8kYXRbb2tdLCANCiAgICAgICAgICAgICAgICAgICAgICAibmF0aXZlIiks
IHkgPSB1bml0KGlmICh4YXhpcy5yb3RbMV0gJWluJSANCiAgICAgICAgICAg
ICAgICAgICAgICBjKDAsIDE4MCkpIA0KICAgICAgICAgICAgICAgICAgICAg
IDAuNQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIDAuOTUsICJucGMiKSwg
anVzdCA9IGlmICh4YXhpcy5yb3RbMV0gPT0gDQogICAgICAgICAgICAgICAg
ICAgICAgMCkgDQogICAgICAgICAgICAgICAgICAgICAgYygiY2VudHJlIiwg
ImNlbnRyZSIpDQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHhheGlz
LnJvdFsxXSA9PSAxODApIA0KICAgICAgICAgICAgICAgICAgICAgIGMoImNl
bnRyZSIsICJjZW50cmUiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlm
ICh4YXhpcy5yb3RbMV0gPiAwKSANCiAgICAgICAgICAgICAgICAgICAgICBj
KCJyaWdodCIsICJjZW50cmUiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNl
IGMoImxlZnQiLCAiY2VudHJlIiksIHJvdCA9IHhheGlzLnJvdFsxXSwgDQog
ICAgICAgICAgICAgICAgICAgICAgY2hlY2sub3ZlcmxhcCA9IHhsYWJlbGlu
Zm8kY2hlY2sub3ZlcmxhcCwgDQogICAgICAgICAgICAgICAgICAgICAgZ3Ag
PSBncGFyKGNvbCA9IHhheGlzLmNvbCwgZm9udCA9IHhheGlzLmZvbnQsIA0K
ICAgICAgICAgICAgICAgICAgICAgICAgZm9udHNpemUgPSBheHMkY2V4WzFd
ICogZm9udHNpemUuZGVmYXVsdCksIA0KICAgICAgICAgICAgICAgICAgICAg
IHZwID0gdmlld3BvcnQobGF5b3V0LnBvcy5yb3cgPSBwb3Mucm93ICsgDQog
ICAgICAgICAgICAgICAgICAgICAgICAyLCBsYXlvdXQucG9zLmNvbCA9IHBv
cy5jb2wsIHhzY2FsZSA9IHhzY2FsZSkpDQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIGlmICgheS5yZWxhdGlvbi5zYW1lICYmIHgkeS5z
Y2FsZXMkZHJhdykgew0KICAgICAgICAgICAgICAgICAgYXhzIDwtIHgkeS5z
Y2FsZXMNCiAgICAgICAgICAgICAgICAgIG9rIDwtICh5bGFiZWxpbmZvJGF0
ID49IHlzY2FsZVsxXSAmIHlsYWJlbGluZm8kYXQgPD0gDQogICAgICAgICAg
ICAgICAgICAgIHlzY2FsZVsyXSkNCiAgICAgICAgICAgICAgICAgIHB1c2gu
dmlld3BvcnQodmlld3BvcnQobGF5b3V0LnBvcy5yb3cgPSBwb3Mucm93LCAN
CiAgICAgICAgICAgICAgICAgICAgbGF5b3V0LnBvcy5jb2wgPSBwb3MuY29s
IC0gMSwgeXNjYWxlID0geXNjYWxlKSkNCiAgICAgICAgICAgICAgICAgIGlm
IChheHMkdGNrWzFdICE9IDAgJiYgYW55KG9rKSkgDQogICAgICAgICAgICAg
ICAgICAgIGdyaWQuc2VnbWVudHMoeDAgPSB1bml0KHJlcCgxLCBzdW0ob2sp
KSwgDQogICAgICAgICAgICAgICAgICAgICAgIm5wYyIpLCB4MSA9IHVuaXQo
cmVwKDEsIHN1bShvaykpLCAibnBjIikgLSANCiAgICAgICAgICAgICAgICAg
ICAgICB1bml0KHJlcCgwLjMgKiBheHMkdGNrWzFdLCBzdW0ob2spKSwgImxp
bmVzIiksIA0KICAgICAgICAgICAgICAgICAgICAgIHkwID0gdW5pdCh5bGFi
ZWxpbmZvJGF0W29rXSwgIm5hdGl2ZSIpLCANCiAgICAgICAgICAgICAgICAg
ICAgICB5MSA9IHVuaXQoeWxhYmVsaW5mbyRhdFtva10sICJuYXRpdmUiKSwg
DQogICAgICAgICAgICAgICAgICAgICAgZ3AgPSBncGFyKGNvbCA9IHlheGlz
LmNvbCkpDQogICAgICAgICAgICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAg
ICAgICAgICAgICAgICAgaWYgKGFueShvaykpIA0KICAgICAgICAgICAgICAg
ICAgICBncmlkLnRleHQobGFiZWwgPSB5bGFiZWxpbmZvJGxhYmVsW29rXSwg
eSA9IHVuaXQoeWxhYmVsaW5mbyRhdFtva10sIA0KICAgICAgICAgICAgICAg
ICAgICAgICJuYXRpdmUiKSwgeCA9IHVuaXQoaWYgKGFicyh5YXhpcy5yb3Rb
MV0pID09IA0KICAgICAgICAgICAgICAgICAgICAgIDkwKSANCiAgICAgICAg
ICAgICAgICAgICAgICAwLjUNCiAgICAgICAgICAgICAgICAgICAgZWxzZSAw
Ljk1LCAibnBjIiksIGp1c3QgPSBpZiAoeWF4aXMucm90WzFdID09IA0KICAg
ICAgICAgICAgICAgICAgICAgIDkwKSANCiAgICAgICAgICAgICAgICAgICAg
ICBjKCJjZW50cmUiLCAiY2VudHJlIikNCiAgICAgICAgICAgICAgICAgICAg
ZWxzZSBpZiAoeWF4aXMucm90WzFdID09IC05MCkgDQogICAgICAgICAgICAg
ICAgICAgICAgYygiY2VudHJlIiwgImNlbnRyZSIpDQogICAgICAgICAgICAg
ICAgICAgIGVsc2UgaWYgKHlheGlzLnJvdFsxXSA+IC05MCAmJiB5YXhpcy5y
b3RbMV0gPCANCiAgICAgICAgICAgICAgICAgICAgICA5MCkgDQogICAgICAg
ICAgICAgICAgICAgICAgYygicmlnaHQiLCAiY2VudHJlIikNCiAgICAgICAg
ICAgICAgICAgICAgZWxzZSBjKCJsZWZ0IiwgImNlbnRyZSIpLCByb3QgPSB5
YXhpcy5yb3RbMV0sIA0KICAgICAgICAgICAgICAgICAgICAgIGNoZWNrLm92
ZXJsYXAgPSB5bGFiZWxpbmZvJGNoZWNrLm92ZXJsYXAsIA0KICAgICAgICAg
ICAgICAgICAgICAgIGdwID0gZ3Bhcihjb2wgPSB5YXhpcy5jb2wsIGZvbnQg
PSB4YXhpcy5mb250LCANCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRz
aXplID0gYXhzJGNleFsxXSAqIGZvbnRzaXplLmRlZmF1bHQpLCANCiAgICAg
ICAgICAgICAgICAgICAgICB2cCA9IHZpZXdwb3J0KGxheW91dC5wb3Mucm93
ID0gcG9zLnJvdywgDQogICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQu
cG9zLmNvbCA9IHBvcy5jb2wgLSAyLCB5c2NhbGUgPSB5c2NhbGUpKQ0KICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoeS5yZWxhdGlv
bi5zYW1lICYmIHgkeS5zY2FsZXMkZHJhdykgew0KICAgICAgICAgICAgICAg
ICAgaWYgKGNvbHVtbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIGF4
cyA8LSB4JHkuc2NhbGVzDQogICAgICAgICAgICAgICAgICAgIG9rIDwtICh5
bGFiZWxpbmZvJGF0ID49IHlzY2FsZVsxXSAmIHlsYWJlbGluZm8kYXQgPD0g
DQogICAgICAgICAgICAgICAgICAgICAgeXNjYWxlWzJdKQ0KICAgICAgICAg
ICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dC5wb3Mu
cm93ID0gcG9zLnJvdywgDQogICAgICAgICAgICAgICAgICAgICAgbGF5b3V0
LnBvcy5jb2wgPSBwb3MuY29sIC0gMywgeXNjYWxlID0geXNjYWxlKSkNCiAg
ICAgICAgICAgICAgICAgICAgaWYgKGF4cyR0Y2tbMV0gIT0gMCAmJiBhbnko
b2spKSANCiAgICAgICAgICAgICAgICAgICAgICBncmlkLnNlZ21lbnRzKHgw
ID0gdW5pdChyZXAoMSwgc3VtKG9rKSksIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgIm5wYyIpLCB4MSA9IHVuaXQocmVwKDEsIHN1bShvaykpLCAibnBj
IikgLSANCiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQocmVwKDAuMyAq
IGF4cyR0Y2tbMV0sIHN1bShvaykpLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgImxpbmVzIiksIHkwID0gdW5pdCh5bGFiZWxpbmZvJGF0W29rXSwg
DQogICAgICAgICAgICAgICAgICAgICAgICAibmF0aXZlIiksIHkxID0gdW5p
dCh5bGFiZWxpbmZvJGF0W29rXSwgDQogICAgICAgICAgICAgICAgICAgICAg
ICAibmF0aXZlIiksIGdwID0gZ3Bhcihjb2wgPSB5YXhpcy5jb2wpKQ0KICAg
ICAgICAgICAgICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAgICAgICAgICAg
ICAgICAgICBpZiAoeS5hbHRlcm5hdGluZ1thY3R1YWwucm93XSA9PSAxIHx8
IHkuYWx0ZXJuYXRpbmdbYWN0dWFsLnJvd10gPT0gDQogICAgICAgICAgICAg
ICAgICAgICAgMykgDQogICAgICAgICAgICAgICAgICAgICAgaWYgKGFueShv
aykpIA0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC50ZXh0KGxhYmVs
ID0geWxhYmVsaW5mbyRsYWJbb2tdLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgeSA9IHVuaXQoeWxhYmVsaW5mbyRhdFtva10sICJuYXRpdmUiKSwg
DQogICAgICAgICAgICAgICAgICAgICAgICAgIHggPSB1bml0KGlmIChhYnMo
eWF4aXMucm90WzFdKSA9PSA5MCkgDQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMC41DQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgMSwg
Im5wYyIpLCBqdXN0ID0gaWYgKHlheGlzLnJvdFsxXSA9PSANCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAtOTApIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGMoImNlbnRyZSIsICJjZW50cmUiKQ0KICAgICAgICAgICAg
ICAgICAgICAgICAgICBlbHNlIGlmICh5YXhpcy5yb3RbMV0gPT0gOTApIA0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoImNlbnRyZSIsICJjZW50
cmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5YXhp
cy5yb3RbMV0gPiAtOTAgJiYgeWF4aXMucm90WzFdIDwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgOTApIA0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGMoInJpZ2h0IiwgImNlbnRyZSIpDQogICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsc2UgYygibGVmdCIsICJjZW50cmUiKSwgcm90ID0geWF4
aXMucm90WzFdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2su
b3ZlcmxhcCA9IHlsYWJlbGluZm8kY2hlY2sub3ZlcmxhcCwgDQogICAgICAg
ICAgICAgICAgICAgICAgICAgIGdwID0gZ3Bhcihjb2wgPSB5YXhpcy5jb2ws
IGZvbnQgPSB5YXhpcy5mb250LCANCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBmb250c2l6ZSA9IGF4cyRjZXhbMV0gKiBmb250c2l6ZS5kZWZhdWx0
KSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgIHZwID0gdmlld3BvcnQo
bGF5b3V0LnBvcy5yb3cgPSBwb3Mucm93LCANCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBsYXlvdXQucG9zLmNvbCA9IHBvcy5jb2wgLSA0LCB5c2Nh
bGUgPSB5c2NhbGUpKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICAgICAgaWYgKGNvbHVtbiA9PSBjb2xzLnBlci5wYWdlKSB7DQogICAg
ICAgICAgICAgICAgICAgIGF4cyA8LSB4JHkuc2NhbGVzDQogICAgICAgICAg
ICAgICAgICAgIG9rIDwtICh5bGFiZWxpbmZvJGF0ID49IHlzY2FsZVsxXSAm
IHlsYWJlbGluZm8kYXQgPD0gDQogICAgICAgICAgICAgICAgICAgICAgeXNj
YWxlWzJdKQ0KICAgICAgICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZp
ZXdwb3J0KGxheW91dC5wb3Mucm93ID0gcG9zLnJvdywgDQogICAgICAgICAg
ICAgICAgICAgICAgbGF5b3V0LnBvcy5jb2wgPSBwb3MuY29sICsgMSwgeXNj
YWxlID0geXNjYWxlKSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGF4cyR0
Y2tbMl0gIT0gMCAmJiBhbnkob2spKSANCiAgICAgICAgICAgICAgICAgICAg
ICBncmlkLnNlZ21lbnRzKHgwID0gdW5pdChyZXAoMCwgc3VtKG9rKSksIA0K
ICAgICAgICAgICAgICAgICAgICAgICAgIm5wYyIpLCB4MSA9IHVuaXQocmVw
KDAuMyAqIGF4cyR0Y2tbMl0sIA0KICAgICAgICAgICAgICAgICAgICAgICAg
c3VtKG9rKSksICJsaW5lcyIpLCB5MCA9IHVuaXQoeWxhYmVsaW5mbyRhdFtv
a10sIA0KICAgICAgICAgICAgICAgICAgICAgICAgIm5hdGl2ZSIpLCB5MSA9
IHVuaXQoeWxhYmVsaW5mbyRhdFtva10sIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgIm5hdGl2ZSIpLCBncCA9IGdwYXIoY29sID0geWF4aXMuY29sKSkN
CiAgICAgICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAg
ICAgICAgICAgICAgaWYgKHkuYWx0ZXJuYXRpbmdbYWN0dWFsLnJvd10gPT0g
MiB8fCB5LmFsdGVybmF0aW5nW2FjdHVhbC5yb3ddID09IA0KICAgICAgICAg
ICAgICAgICAgICAgIDMpIA0KICAgICAgICAgICAgICAgICAgICAgIGlmIChh
bnkob2spKSANCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQudGV4dChs
YWJlbCA9IHlsYWJlbGluZm8kbGFiZWxbb2tdLCANCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgeSA9IHVuaXQoeWxhYmVsaW5mbyRhdFtva10sICJuYXRp
dmUiKSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgIHggPSB1bml0KGlm
IChhYnMoeWF4aXMucm90WzJdKSA9PSA5MCkgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgMC41DQogICAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2UgMCwgIm5wYyIpLCBqdXN0ID0gaWYgKHlheGlzLnJvdFsyXSA9PSANCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAtOTApIA0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGMoImNlbnRyZSIsICJjZW50cmUiKQ0KICAgICAg
ICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5YXhpcy5yb3RbMl0gPT0g
OTApIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoImNlbnRyZSIs
ICJjZW50cmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlm
ICh5YXhpcy5yb3RbMl0gPiAtOTAgJiYgeWF4aXMucm90WzJdIDwgDQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgOTApIA0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGMoImxlZnQiLCAiY2VudHJlIikNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZSBjKCJyaWdodCIsICJjZW50cmUiKSwgcm90
ID0geWF4aXMucm90WzJdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAg
Y2hlY2sub3ZlcmxhcCA9IHlsYWJlbGluZm8kY2hlY2sub3ZlcmxhcCwgDQog
ICAgICAgICAgICAgICAgICAgICAgICAgIGdwID0gZ3Bhcihjb2wgPSB5YXhp
cy5jb2wsIGZvbnQgPSB5YXhpcy5mb250LCANCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmb250c2l6ZSA9IGF4cyRjZXhbMl0gKiBmb250c2l6ZS5k
ZWZhdWx0KSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgIHZwID0gdmll
d3BvcnQobGF5b3V0LnBvcy5yb3cgPSBwb3Mucm93LCANCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBsYXlvdXQucG9zLmNvbCA9IHBvcy5jb2wgKyAy
LCB5c2NhbGUgPSB5c2NhbGUpKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoeC5yZWxhdGlv
bi5zYW1lICYmIHgkeC5zY2FsZXMkZHJhdykgew0KICAgICAgICAgICAgICAg
ICAgaWYgKGFjdHVhbC5yb3cgPT0gMSkgew0KICAgICAgICAgICAgICAgICAg
ICBheHMgPC0geCR4LnNjYWxlcw0KICAgICAgICAgICAgICAgICAgICBvayA8
LSAoeGxhYmVsaW5mbyRhdCA+PSB4c2NhbGVbMV0gJiB4bGFiZWxpbmZvJGF0
IDw9IA0KICAgICAgICAgICAgICAgICAgICAgIHhzY2FsZVsyXSkNCiAgICAg
ICAgICAgICAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9ydChsYXlvdXQu
cG9zLnJvdyA9IHBvcy5yb3cgKyANCiAgICAgICAgICAgICAgICAgICAgICAz
LCBsYXlvdXQucG9zLmNvbCA9IHBvcy5jb2wsIHhzY2FsZSA9IHhzY2FsZSkp
DQogICAgICAgICAgICAgICAgICAgIGlmIChheHMkdGNrWzFdICE9IDAgJiYg
YW55KG9rKSkgDQogICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZWdtZW50
cyh5MCA9IHVuaXQocmVwKDEsIHN1bShvaykpLCANCiAgICAgICAgICAgICAg
ICAgICAgICAgICJucGMiKSwgeTEgPSB1bml0KHJlcCgxLCBzdW0ob2spKSwg
Im5wYyIpIC0gDQogICAgICAgICAgICAgICAgICAgICAgICB1bml0KHJlcCgw
LjMgKiBheHMkdGNrWzFdLCBzdW0ob2spKSwgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICJsaW5lcyIpLCB4MCA9IHVuaXQoeGxhYmVsaW5mbyRhdFtv
a10sIA0KICAgICAgICAgICAgICAgICAgICAgICAgIm5hdGl2ZSIpLCB4MSA9
IHVuaXQoeGxhYmVsaW5mbyRhdFtva10sIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgIm5hdGl2ZSIpLCBncCA9IGdwYXIoY29sID0geGF4aXMuY29sKSkN
CiAgICAgICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAg
ICAgICAgICAgICAgaWYgKHguYWx0ZXJuYXRpbmdbY29sdW1uXSA9PSAxIHx8
IHguYWx0ZXJuYXRpbmdbY29sdW1uXSA9PSANCiAgICAgICAgICAgICAgICAg
ICAgICAzKSANCiAgICAgICAgICAgICAgICAgICAgICBpZiAoYW55KG9rKSkg
ew0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC50ZXh0KGxhYmVsID0g
eGxhYmVsaW5mbyRsYWJbb2tdLCANCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgeCA9IHVuaXQoeGxhYmVsaW5mbyRhdFtva10sICJuYXRpdmUiKSwgDQog
ICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB1bml0KGlmICh4YXhpcy5y
b3RbMV0gJWluJSBjKDAsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
IDE4MCkpIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuNQ0KICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbHNlIDEsICJucGMiKSwganVzdCA9
IGlmICh4YXhpcy5yb3RbMV0gPT0gDQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMCkgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYygiY2Vu
dHJlIiwgImNlbnRyZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2UgaWYgKHhheGlzLnJvdFsxXSA9PSAxODApIA0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGMoImNlbnRyZSIsICJjZW50cmUiKQ0KICAgICAgICAg
ICAgICAgICAgICAgICAgICBlbHNlIGlmICh4YXhpcy5yb3RbMV0gPiAwKSAN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKCJyaWdodCIsICJjZW50
cmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGMoImxlZnQi
LCAiY2VudHJlIiksIHJvdCA9IHhheGlzLnJvdFsxXSwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgIGNoZWNrLm92ZXJsYXAgPSB4bGFiZWxpbmZvJGNo
ZWNrLm92ZXJsYXAsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICBncCA9
IGdwYXIoY29sID0geGF4aXMuY29sLCBmb250ID0geGF4aXMuZm9udCwgDQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udHNpemUgPSBheHMkY2V4
WzFdICogZm9udHNpemUuZGVmYXVsdCksIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgICB2cCA9IHZpZXdwb3J0KGxheW91dC5wb3Mucm93ID0gcG9zLnJv
dyArIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQsIGxheW91dC5w
b3MuY29sID0gcG9zLmNvbCwgeHNjYWxlID0geHNjYWxlKSkNCiAgICAgICAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghaXMubG9naWNhbCh4
JHN0cmlwKSkgDQogICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gMTpudW1i
ZXIub2YuY29uZCkgew0KICAgICAgICAgICAgICAgICAgICBwdXNoLnZpZXdw
b3J0KHZpZXdwb3J0KGxheW91dC5wb3Mucm93ID0gcG9zLnJvdyAtIA0KICAg
ICAgICAgICAgICAgICAgICAgIGksIGxheW91dC5wb3MuY29sID0gcG9zLmNv
bCwgY2xpcCA9IFRSVUUsIA0KICAgICAgICAgICAgICAgICAgICAgIGdwID0g
Z3Bhcihmb250c2l6ZSA9IGZvbnRzaXplLmRlZmF1bHQpKSkNCiAgICAgICAg
ICAgICAgICAgICAgZ3JpZC5yZWN0KCkNCiAgICAgICAgICAgICAgICAgICAg
eCRzdHJpcCh3aGljaC5naXZlbiA9IGksIHdoaWNoLnBhbmVsID0gY29uZC5j
dXJyZW50LmxldmVsLCANCiAgICAgICAgICAgICAgICAgICAgICB2YXIubmFt
ZSA9IG5hbWVzKHgkY29uZCksIGZhY3Rvci5sZXZlbHMgPSBpZiAoIWlzLmxp
c3QoeCRjb25kW1tpXV0pKSANCiAgICAgICAgICAgICAgICAgICAgICAgIHgk
Y29uZFtbaV1dDQogICAgICAgICAgICAgICAgICAgICAgZWxzZSBOVUxMLCBz
aGluZ2xlLmludGVydmFscyA9IGlmIChpcy5saXN0KHgkY29uZFtbaV1dKSkg
DQogICAgICAgICAgICAgICAgICAgICAgICBkby5jYWxsKCJyYmluZCIsIHgk
Y29uZFtbaV1dKQ0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgTlVMTCwg
YmcgPSBzdHJpcC5jb2wuZGVmYXVsdC5iZ1tpXSwgDQogICAgICAgICAgICAg
ICAgICAgICAgZmcgPSBzdHJpcC5jb2wuZGVmYXVsdC5mZ1tpXSwgcGFyLnN0
cmlwLnRleHQgPSB4JHBhci5zdHJpcC50ZXh0KQ0KICAgICAgICAgICAgICAg
ICAgICBwb3Audmlld3BvcnQoKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgIGlmICh4LnJlbGF0aW9uLnNhbWUgJiYgeCR4LnNjYWxl
cyRkcmF3KSANCiAgICAgICAgICAgICAgICAgIGlmIChhY3R1YWwucm93ID09
IHJvd3MucGVyLnBhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgYXhzIDwt
IHgkeC5zY2FsZXMNCiAgICAgICAgICAgICAgICAgICAgb2sgPC0gKHhsYWJl
bGluZm8kYXQgPj0geHNjYWxlWzFdICYgeGxhYmVsaW5mbyRhdCA8PSANCiAg
ICAgICAgICAgICAgICAgICAgICB4c2NhbGVbMl0pDQogICAgICAgICAgICAg
ICAgICAgIHB1c2gudmlld3BvcnQodmlld3BvcnQobGF5b3V0LnBvcy5yb3cg
PSBwb3Mucm93IC0gDQogICAgICAgICAgICAgICAgICAgICAgMSAtIG51bWJl
ci5vZi5jb25kLCBsYXlvdXQucG9zLmNvbCA9IHBvcy5jb2wsIA0KICAgICAg
ICAgICAgICAgICAgICAgIHhzY2FsZSA9IHhzY2FsZSkpDQogICAgICAgICAg
ICAgICAgICAgIGlmIChheHMkdGNrWzJdICE9IDAgJiYgYW55KG9rKSkgDQog
ICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZWdtZW50cyh5MCA9IHVuaXQo
cmVwKDAsIHN1bShvaykpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICJu
cGMiKSwgeTEgPSB1bml0KHJlcCgwLjMgKiBheHMkdGNrWzJdLCANCiAgICAg
ICAgICAgICAgICAgICAgICAgIHN1bShvaykpLCAibGluZXMiKSwgeDAgPSB1
bml0KHhsYWJlbGluZm8kYXRbb2tdLCANCiAgICAgICAgICAgICAgICAgICAg
ICAgICJuYXRpdmUiKSwgeDEgPSB1bml0KHhsYWJlbGluZm8kYXRbb2tdLCAN
CiAgICAgICAgICAgICAgICAgICAgICAgICJuYXRpdmUiKSwgZ3AgPSBncGFy
KGNvbCA9IHhheGlzLmNvbCkpDQogICAgICAgICAgICAgICAgICAgIHBvcC52
aWV3cG9ydCgpDQogICAgICAgICAgICAgICAgICAgIGlmICh4LmFsdGVybmF0
aW5nW2NvbHVtbl0gPT0gMiB8fCB4LmFsdGVybmF0aW5nW2NvbHVtbl0gPT0g
DQogICAgICAgICAgICAgICAgICAgICAgMykgDQogICAgICAgICAgICAgICAg
ICAgICAgaWYgKGFueShvaykpIA0KICAgICAgICAgICAgICAgICAgICAgICAg
Z3JpZC50ZXh0KGxhYmVsID0geGxhYmVsaW5mbyRsYWJlbFtva10sIA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICB4ID0gdW5pdCh4bGFiZWxpbmZvJGF0
W29rXSwgIm5hdGl2ZSIpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAg
eSA9IHVuaXQoaWYgKHhheGlzLnJvdFsyXSAlaW4lIGMoMCwgDQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgMTgwKSkgDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgMC41DQogICAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2UgMCwgIm5wYyIpLCBqdXN0ID0gaWYgKHhheGlzLnJvdFsyXSA9PSANCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAwKSANCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjKCJjZW50cmUiLCAiY2VudHJlIikNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeGF4aXMucm90WzJdID09IDE4
MCkgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYygiY2VudHJlIiwg
ImNlbnRyZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYg
KHhheGlzLnJvdFsyXSA+IDApIA0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGMoImxlZnQiLCAiY2VudHJlIikNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxzZSBjKCJyaWdodCIsICJjZW50cmUiKSwgcm90ID0geGF4aXMu
cm90WzJdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2sub3Zl
cmxhcCA9IHhsYWJlbGluZm8kY2hlY2sub3ZlcmxhcCwgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgIGdwID0gZ3Bhcihjb2wgPSB4YXhpcy5jb2wsIGZv
bnQgPSB4YXhpcy5mb250LCANCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBmb250c2l6ZSA9IGF4cyRjZXhbMl0gKiBmb250c2l6ZS5kZWZhdWx0KSwg
DQogICAgICAgICAgICAgICAgICAgICAgICAgIHZwID0gdmlld3BvcnQobGF5
b3V0LnBvcy5yb3cgPSBwb3Mucm93IC0gDQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgMiAtIG51bWJlci5vZi5jb25kLCBsYXlvdXQucG9zLmNvbCA9
IHBvcy5jb2wsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhzY2Fs
ZSA9IHhzY2FsZSkpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgICAgY29uZC5jdXJyZW50LmxldmVsIDwtIGN1cGRhdGUoY29uZC5jdXJy
ZW50LmxldmVsLCANCiAgICAgICAgICAgICAgICAgIGNvbmQubWF4LmxldmVs
KQ0KICAgICAgICAgICAgICAgIHBhbmVsLm51bWJlciA8LSBwYW5lbC5udW1i
ZXIgKyAxDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYg
KCFpcy5udWxsKHgka2V5KSB8fCAhaXMubnVsbCh4JGNvbG9ya2V5KSkgew0K
ICAgICAgICAgICAgaWYgKGtleS5zcGFjZSA9PSAibGVmdCIpIHsNCiAgICAg
ICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dC5wb3Mu
Y29sID0gMiwgbGF5b3V0LnBvcy5yb3cgPSBjKDYsIA0KICAgICAgICAgICAg
ICAgICAgbi5yb3cgLSA2KSkpDQogICAgICAgICAgICAgICAgZ3JpZC5kcmF3
KGtleS5nZikNCiAgICAgICAgICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoa2V5LnNwYWNlID09
ICJyaWdodCIpIHsNCiAgICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZp
ZXdwb3J0KGxheW91dC5wb3MuY29sID0gbi5jb2wgLSANCiAgICAgICAgICAg
ICAgICAgIDEsIGxheW91dC5wb3Mucm93ID0gYyg2LCBuLnJvdyAtIDYpKSkN
CiAgICAgICAgICAgICAgICBncmlkLmRyYXcoa2V5LmdmKQ0KICAgICAgICAg
ICAgICAgIHBvcC52aWV3cG9ydCgpDQogICAgICAgICAgICB9DQogICAgICAg
ICAgICBlbHNlIGlmIChrZXkuc3BhY2UgPT0gInRvcCIpIHsNCiAgICAgICAg
ICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dC5wb3Mucm93
ID0gMywgbGF5b3V0LnBvcy5jb2wgPSBjKDYsIA0KICAgICAgICAgICAgICAg
ICAgbi5jb2wgLSA0KSkpDQogICAgICAgICAgICAgICAgZ3JpZC5kcmF3KGtl
eS5nZikNCiAgICAgICAgICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoa2V5LnNwYWNlID09ICJi
b3R0b20iKSB7DQogICAgICAgICAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3
cG9ydChsYXlvdXQucG9zLnJvdyA9IG4ucm93IC0gDQogICAgICAgICAgICAg
ICAgICAyLCBsYXlvdXQucG9zLmNvbCA9IGMoNiwgbi5jb2wgLSA0KSkpDQog
ICAgICAgICAgICAgICAgZ3JpZC5kcmF3KGtleS5nZikNCiAgICAgICAgICAg
ICAgICBwb3Audmlld3BvcnQoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgZWxzZSBpZiAoa2V5LnNwYWNlID09ICJpbnNpZGUiKSB7DQogICAgICAg
ICAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9ydChsYXlvdXQucG9zLnJv
dyA9IGMoMSwgDQogICAgICAgICAgICAgICAgICBuLnJvdyksIGxheW91dC5w
b3MuY29sID0gYygxLCBuLmNvbCkpKQ0KICAgICAgICAgICAgICAgIGlmIChp
cy5udWxsKHgka2V5JGNvcm5lcikpIA0KICAgICAgICAgICAgICAgICAgeCRr
ZXkkY29ybmVyIDwtIGMoMCwgMSkNCiAgICAgICAgICAgICAgICBpZiAoaXMu
bnVsbCh4JGtleSR4KSkgDQogICAgICAgICAgICAgICAgICB4JGtleSR4IDwt
IHgka2V5JGNvcm5lclsxXQ0KICAgICAgICAgICAgICAgIGlmIChpcy5udWxs
KHgka2V5JHkpKSANCiAgICAgICAgICAgICAgICAgIHgka2V5JHkgPC0geCRr
ZXkkY29ybmVyWzJdDQogICAgICAgICAgICAgICAgaWYgKGFsbCh4JGtleSRj
b3JuZXIgPT0gYygwLCAxKSkpIHsNCiAgICAgICAgICAgICAgICAgIHB1c2gu
dmlld3BvcnQodmlld3BvcnQobGF5b3V0ID0gZ3JpZC5sYXlvdXQobnJvdyA9
IDMsIA0KICAgICAgICAgICAgICAgICAgICBuY29sID0gMywgd2lkdGhzID0g
dW5pdChjKHgka2V5JHgsIDEsIDEpLCANCiAgICAgICAgICAgICAgICAgICAg
ICBjKCJucGMiLCAiZ3JvYndpZHRoIiwgIm51bGwiKSwgbGlzdCgxLCANCiAg
ICAgICAgICAgICAgICAgICAgICAgIGtleS5nZiwgMSkpLCBoZWlnaHRzID0g
dW5pdChjKDEgLSB4JGtleSR5LCANCiAgICAgICAgICAgICAgICAgICAgICAx
LCAxKSwgYygibnBjIiwgImdyb2JoZWlnaHQiLCAibnVsbCIpLCANCiAgICAg
ICAgICAgICAgICAgICAgICBsaXN0KDEsIGtleS5nZiwgMSkpKSkpDQogICAg
ICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dC5w
b3Mucm93ID0gMiwgDQogICAgICAgICAgICAgICAgICAgIGxheW91dC5wb3Mu
Y29sID0gMikpDQogICAgICAgICAgICAgICAgICBncmlkLmRyYXcoa2V5Lmdm
KQ0KICAgICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAg
ICAgICAgICAgIHBvcC52aWV3cG9ydCgpDQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIGlmIChhbGwoeCRrZXkkY29ybmVyID09IGMoMSwg
MSkpKSB7DQogICAgICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdw
b3J0KGxheW91dCA9IGdyaWQubGF5b3V0KG5yb3cgPSAzLCANCiAgICAgICAg
ICAgICAgICAgICAgbmNvbCA9IDMsIGhlaWdodHMgPSB1bml0KGMoMSAtIHgk
a2V5JHksIDEsIA0KICAgICAgICAgICAgICAgICAgICAgIDEpLCBjKCJucGMi
LCAiZ3JvYmhlaWdodCIsICJudWxsIiksIGxpc3QoMSwgDQogICAgICAgICAg
ICAgICAgICAgICAga2V5LmdmLCAxKSksIHdpZHRocyA9IHVuaXQoYygxLCAx
LCAxIC0gDQogICAgICAgICAgICAgICAgICAgICAgeCRrZXkkeCksIGMoIm51
bGwiLCAiZ3JvYndpZHRoIiwgIm5wYyIpLCANCiAgICAgICAgICAgICAgICAg
ICAgICBsaXN0KDEsIGtleS5nZiwgMSkpKSkpDQogICAgICAgICAgICAgICAg
ICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dC5wb3Mucm93ID0gMiwg
DQogICAgICAgICAgICAgICAgICAgIGxheW91dC5wb3MuY29sID0gMikpDQog
ICAgICAgICAgICAgICAgICBncmlkLmRyYXcoa2V5LmdmKQ0KICAgICAgICAg
ICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAgICAgICAgICAgIHBv
cC52aWV3cG9ydCgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgIGlmIChhbGwoeCRrZXkkY29ybmVyID09IGMoMCwgMCkpKSB7DQogICAg
ICAgICAgICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dCA9
IGdyaWQubGF5b3V0KG5yb3cgPSAzLCANCiAgICAgICAgICAgICAgICAgICAg
bmNvbCA9IDMsIHdpZHRocyA9IHVuaXQoYyh4JGtleSR4LCAxLCAxKSwgDQog
ICAgICAgICAgICAgICAgICAgICAgYygibnBjIiwgImdyb2J3aWR0aCIsICJu
dWxsIiksIGxpc3QoMSwgDQogICAgICAgICAgICAgICAgICAgICAgICBrZXku
Z2YsIDEpKSwgaGVpZ2h0cyA9IHVuaXQoYygxLCAxLCB4JGtleSR5KSwgDQog
ICAgICAgICAgICAgICAgICAgICAgYygibnVsbCIsICJncm9iaGVpZ2h0Iiwg
Im5wYyIpLCBsaXN0KDEsIA0KICAgICAgICAgICAgICAgICAgICAgICAga2V5
LmdmLCAxKSkpKSkNCiAgICAgICAgICAgICAgICAgIHB1c2gudmlld3BvcnQo
dmlld3BvcnQobGF5b3V0LnBvcy5yb3cgPSAyLCANCiAgICAgICAgICAgICAg
ICAgICAgbGF5b3V0LnBvcy5jb2wgPSAyKSkNCiAgICAgICAgICAgICAgICAg
IGdyaWQuZHJhdyhrZXkuZ2YpDQogICAgICAgICAgICAgICAgICBwb3Audmll
d3BvcnQoKQ0KICAgICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGFsbCh4JGtl
eSRjb3JuZXIgPT0gYygxLCAwKSkpIHsNCiAgICAgICAgICAgICAgICAgIHB1
c2gudmlld3BvcnQodmlld3BvcnQobGF5b3V0ID0gZ3JpZC5sYXlvdXQobnJv
dyA9IDMsIA0KICAgICAgICAgICAgICAgICAgICBuY29sID0gMywgd2lkdGhz
ID0gdW5pdChjKDEsIDEsIDEgLSB4JGtleSR4KSwgDQogICAgICAgICAgICAg
ICAgICAgICAgYygibnVsbCIsICJncm9id2lkdGgiLCAibnBjIiksIGxpc3Qo
MSwgDQogICAgICAgICAgICAgICAgICAgICAgICBrZXkuZ2YsIDEpKSwgaGVp
Z2h0cyA9IHVuaXQoYygxLCAxLCB4JGtleSR5KSwgDQogICAgICAgICAgICAg
ICAgICAgICAgYygibnVsbCIsICJncm9iaGVpZ2h0IiwgIm5wYyIpLCBsaXN0
KDEsIA0KICAgICAgICAgICAgICAgICAgICAgICAga2V5LmdmLCAxKSkpKSkN
CiAgICAgICAgICAgICAgICAgIHB1c2gudmlld3BvcnQodmlld3BvcnQobGF5
b3V0LnBvcy5yb3cgPSAyLCANCiAgICAgICAgICAgICAgICAgICAgbGF5b3V0
LnBvcy5jb2wgPSAyKSkNCiAgICAgICAgICAgICAgICAgIGdyaWQuZHJhdyhr
ZXkuZ2YpDQogICAgICAgICAgICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAg
ICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdw
b3J0KGxheW91dC5wb3Mucm93ID0gYygxLCBuLnJvdyksIA0KICAgICAgICAg
ICAgbGF5b3V0LnBvcy5jb2wgPSBjKDEsIG4uY29sKSkpDQogICAgICAgIGlm
ICghaXMubnVsbCh4JHBhZ2UpKSANCiAgICAgICAgICAgIHgkcGFnZShwYWdl
Lm51bWJlcikNCiAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICAgICAgcG9w
LnZpZXdwb3J0KCkNCiAgICB9DQogICAgaWYgKCFtaXNzaW5nKHBvc2l0aW9u
KSkgew0KICAgICAgICBpZiAoIW1pc3Npbmcoc3BsaXQpKSB7DQogICAgICAg
ICAgICBwb3Audmlld3BvcnQoKQ0KICAgICAgICAgICAgcG9wLnZpZXdwb3J0
KCkNCiAgICAgICAgfQ0KICAgICAgICBwb3Audmlld3BvcnQoKQ0KICAgIH0N
CiAgICBlbHNlIGlmICghbWlzc2luZyhzcGxpdCkpIHsNCiAgICAgICAgcG9w
LnZpZXdwb3J0KCkNCiAgICAgICAgcG9wLnZpZXdwb3J0KCkNCiAgICB9DQog
ICAgaW52aXNpYmxlKHBhZ2UubGF5b3V0KQ0KfQ0K
---1678264062-154654637-1051422990=:2626055--

From h-meguro at aa.e-mansion.com  Sun Apr 27 15:20:02 2003
From: h-meguro at aa.e-mansion.com (h-meguro@aa.e-mansion.com)
Date: Sun Apr 27 14:20:16 2003
Subject: [Rd] An Introduction to R (PR#2860)
Message-ID: <200304271220.h3RCK2pD002696@pubhealth.ku.dk>

Full_Name: Hajime Meguro
Version: 1.4.1
OS: 1.7.0
Submission from: (NULL) (202.215.33.129)


Both Published version(1.4.1) and Web version shows that, on Page 86, line5-7;

>ld50<-function(b) -b[1]/b[2]
>ldp<-ld50(coef(fmp));ldl<-ld50(coef(fmp));
>c(ldp,ldl)

I guess line 6 should be as follows.

>ldp<-ld50(coef(fmp));ldl<-ld50(coef(fml));

Am I right?
Or the current writing is right?

From rmh at surfer.sbm.temple.edu  Sun Apr 27 17:44:09 2003
From: rmh at surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Sun Apr 27 16:44:33 2003
Subject: [Rd] bug and proposed fix in print.trellis 1.7.0 (PR#2859)
Message-ID: <200304271444.h3REi9pD003350@pubhealth.ku.dk>

sent again without attachments at Peter Dalgaard's request

description:
# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


The new feature described in rw1070/library/lattice/Changes is very
useful and is needed for several of the examples I showed at DSC-2003.

> scales
> ------
> In anticipation of future use (in nlme, for example), the at and
> labels components of scales can now be a list. Each element
> corresponds to a panel. This is thoroughly untested and not guaranteed
> to work.

It currently rejects correctly formed user labels.  I attach an
example of the problem and a proposed fix.

Rich

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/.RData, package:grid, package:lattice, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base


example:
## print.trellis bug in R 1.7.0

tmp <- data.frame(a=factor(c("a","b","c")),
                  b=factor(c("d","e","f")),
                  d=factor(c(1,1,2)))

xyplot(a ~ b | d, data=tmp,  ## works
        scales=list(alternating=F))

xyplot(a ~ b | d, data=tmp,  ## Invalid value for labels
       scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
                     alternating=F)))

source("print.trellis.r")    ## rmh proposed fix

xyplot(a ~ b | d, data=tmp,  ## now it works
       scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
                     alternating=F)))




proposed fix:
print.trellis <-
function (x, position, split, more = FALSE, newpage = TRUE, panel.height = list(1, 
    "null"), panel.width = list(1, "null"), ...) 
{
    if (is.null(dev.list())) 
        trellis.device()
    else if (is.null(trellis.par.get())) 
        trellis.device(device = .Device, new = FALSE)
    bg = trellis.par.get("background")$col
    new <- TRUE
    if (.lattice.print.more || !newpage) 
        new <- FALSE
    .lattice.print.more <<- more
    usual <- (missing(position) & missing(split))
    fontsize.default <- trellis.par.get("fontsize")$default
    if (!missing(position)) {
        if (length(position) != 4) 
            stop("Incorrect value of position")
        if (new) {
            grid.newpage()
            grid.rect(gp = gpar(fill = bg, col = "transparent"))
        }
        push.viewport(viewport(x = position[1], y = position[2], 
            width = position[3] - position[1], height = position[4] - 
                position[2], just = c("left", "bottom")))
        if (!missing(split)) {
            if (length(split) != 4) 
                stop("Incorrect value of split")
            push.viewport(viewport(layout = grid.layout(nrow = split[4], 
                ncol = split[3])))
            push.viewport(viewport(layout.pos.row = split[2], 
                layout.pos.col = split[1]))
        }
    }
    else if (!missing(split)) {
        if (length(split) != 4) 
            stop("Incorrect value of split")
        if (new) {
            grid.newpage()
            grid.rect(gp = gpar(fill = bg, col = "transparent"))
        }
        push.viewport(viewport(layout = grid.layout(nrow = split[4], 
            ncol = split[3])))
        push.viewport(viewport(layout.pos.row = split[2], layout.pos.col = split[1]))
    }
    panel <- if (is.function(x$panel)) 
        x$panel
    else if (is.character(x$panel)) 
        get(x$panel)
    else eval(x$panel)
    x$strip <- if (is.function(x$strip)) 
        x$strip
    else if (is.character(x$strip)) 
        get(x$strip)
    else eval(x$strip)
    axis.line <- trellis.par.get("axis.line")
    number.of.cond <- length(x$condlevels)
    layout.respect <- !x$aspect.fill
    if (layout.respect) 
        panel.height[[1]] <- x$aspect.ratio * panel.width[[1]]
    if (!is.null(x$key)) {
        key.gf <- draw.key(x$key)
        key.space <- if ("space" %in% names(x$key)) 
            x$key$space
        else if ("x" %in% names(x$key) || "corner" %in% names(x$key)) 
            "inside"
        else "top"
    }
    else if (!is.null(x$colorkey)) {
        key.gf <- draw.colorkey(x$colorkey)
        key.space <- if ("space" %in% names(x$colorkey)) 
            x$colorkey$space
        else "right"
    }
    xaxis.col <- if (is.logical(x$x.scales$col)) 
        axis.line$col
    else x$x.scales$col
    xaxis.font <- if (is.logical(x$x.scales$font)) 
        1
    else x$x.scales$font
    xaxis.cex <- x$x.scales$cex
    xaxis.rot <- if (is.logical(x$x.scales$rot)) 
        c(0, 0)
    else x$x.scales$rot
    yaxis.col <- if (is.logical(x$y.scales$col)) 
        axis.line$col
    else x$y.scales$col
    yaxis.font <- if (is.logical(x$y.scales$font)) 
        1
    else x$y.scales$font
    yaxis.cex <- x$y.scales$cex
    yaxis.rot <- if (!is.logical(x$y.scales$rot)) 
        x$y.scales$rot
    else if (x$y.scales$relation != "same" && is.logical(x$y.scales$labels)) 
        c(90, 90)
    else c(0, 0)
    strip.col.default.bg <- rep(trellis.par.get("strip.background")$col, 
        length = number.of.cond)
    strip.col.default.fg <- rep(trellis.par.get("strip.shingle")$col, 
        length = number.of.cond)
    cond.max.level <- integer(number.of.cond)
    for (i in 1:number.of.cond) {
        cond.max.level[i] <- length(x$condlevels[[i]])
    }
    if (x$layout[1] == 0) {
        ddim <- par("din")
        device.aspect <- ddim[2]/ddim[1]
        panel.aspect <- panel.height[[1]]/panel.width[[1]]
        plots.per.page <- x$layout[2]
        m <- max(1, round(sqrt(x$layout[2] * device.aspect/panel.aspect)))
        n <- ceiling(plots.per.page/m)
        m <- ceiling(plots.per.page/n)
        x$layout[1] <- n
        x$layout[2] <- m
    }
    else plots.per.page <- x$layout[1] * x$layout[2]
    cols.per.page <- x$layout[1]
    rows.per.page <- x$layout[2]
    number.of.pages <- x$layout[3]
    if (cols.per.page > 1) 
        x.between <- rep(x$x.between, length = cols.per.page - 
            1)
    if (rows.per.page > 1) 
        y.between <- rep(x$y.between, length = rows.per.page - 
            1)
    x.alternating <- rep(x$x.scales$alternating, length = cols.per.page)
    y.alternating <- rep(x$y.scales$alternating, length = rows.per.page)
    x.relation.same <- x$x.scales$relation == "same"
    y.relation.same <- x$y.scales$relation == "same"
    xlog <- x$x.scales$log
    ylog <- x$y.scales$log
    if (is.logical(xlog) && xlog) 
        xlog <- 10
    if (is.logical(ylog) && ylog) 
        ylog <- 10
    have.xlog <- !is.logical(xlog) || xlog
    have.ylog <- !is.logical(ylog) || ylog
    xlogbase <- if (is.numeric(xlog)) 
        xlog
    else exp(1)
    ylogbase <- if (is.numeric(ylog)) 
        ylog
    else exp(1)
    xlogpaste <- if (have.xlog) 
        paste(as.character(xlog), "^", sep = "")
    else ""
    ylogpaste <- if (have.ylog) 
        paste(as.character(ylog), "^", sep = "")
    else ""
    have.main <- !(is.null(x$main$label) || (is.character(x$main$label) && 
        x$main$label == ""))
    have.sub <- !(is.null(x$sub$label) || (is.character(x$sub$label) && 
        x$sub$label == ""))
    have.xlab <- !(is.null(x$xlab$label) || (is.character(x$xlab$label) && 
        x$xlab$label == ""))
    have.ylab <- !(is.null(x$ylab$label) || (is.character(x$ylab$label) && 
        x$ylab$label == ""))
    n.row <- rows.per.page * (number.of.cond + 3) + (rows.per.page - 
        1) + 11
    n.col <- 3 * cols.per.page + (cols.per.page - 1) + 9
    if (layout.respect) {
        layout.respect <- matrix(0, n.row, n.col)
        layout.respect[number.of.cond + 6 + (1:rows.per.page - 
            1) * (number.of.cond + 4), (1:cols.per.page - 1) * 
            4 + 8] <- 1
    }
    heights.x <- rep(1, n.row)
    heights.units <- rep("lines", n.row)
    heights.data <- as.list(1:n.row)
    widths.x <- rep(1, n.col)
    widths.units <- rep("lines", n.col)
    widths.data <- as.list(1:n.col)
    heights.x[number.of.cond + 6 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- panel.height[[1]]
    heights.units[number.of.cond + 6 + (1:rows.per.page - 1) * 
        (number.of.cond + 4)] <- panel.height[[2]]
    heights.x[number.of.cond + 7 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- 0
    heights.x[number.of.cond + 8 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- 0
    heights.x[4] <- 0
    heights.x[5] <- 0
    heights.x[n.row - 4] <- 0
    heights.x[n.row - 5] <- 0
    if (rows.per.page > 1) 
        heights.x[number.of.cond + 9 + ((if (x$as.table) 
            1:(rows.per.page - 1)
        else (rows.per.page - 1):1) - 1) * (number.of.cond + 
            4)] <- y.between
    heights.x[1] <- 0.5
    heights.x[2] <- if (have.main) 
        2 * x$main$cex
    else 0
    if (have.main) {
        heights.units[2] <- "strheight"
        heights.data[[2]] <- x$main$lab
    }
    heights.x[n.row] <- 0.5
    heights.x[n.row - 1] <- if (have.sub) 
        2 * x$sub$cex
    else 0
    if (have.sub) {
        heights.units[n.row - 1] <- "strheight"
        heights.data[[n.row - 1]] <- x$sub$lab
    }
    heights.x[3] <- 0
    heights.x[n.row - 2] <- 0
    heights.insertlist.position <- 0
    heights.insertlist.unit <- unit(1, "null")
    if (x$x.scales$draw) {
        if (x.relation.same) {
            lab <- calculateAxisComponents(x = x$x.limits, at = x$x.scales$at, 
                labels = x$x.scales$lab, have.log = have.xlog, 
                logbase = xlogbase, logpaste = xlogpaste, abbreviate = x$x.scales$abbr, 
                minlength = x$x.scales$minl, n = x$x.scales$tick.number)$lab
##          if (is.character(lab)) 
            if (all(sapply(lab, is.character)))  ## rmh
                strbar <- as.list(lab)
            else if (is.expression(lab)) {
                strbar <- list()
                for (ss in seq(along = lab)) strbar <- c(strbar, 
                  list(lab[ss]))
            }
            else stop("Invalid value for labels")
            heights.x[5] <- 0.5 + max(0.001, x$x.scales$tck[2]) * 
                0.3
            heights.x[n.row - 5] <- 0.5 + max(0.001, x$x.scales$tck[1]) * 
                0.3
            if (any(x.alternating == 2 | x.alternating == 3)) {
                if (xaxis.rot[2] %in% c(0, 180)) {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[2], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[2] * abs(sin(xaxis.rot[2] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
            if (any(x.alternating == 1 | x.alternating == 3)) {
                if (xaxis.rot[1] %in% c(0, 180)) {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    n.row - 4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[1], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    n.row - 4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[1] * abs(sin(xaxis.rot[1] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
        }
        else {
            labelChars <- character(0)
            labelExprs <- expression(0)
            for (i in seq(along = x$x.limits)) {
                lab <- calculateAxisComponents(x = x$x.limits[[i]], 
                  at = if (is.list(x$x.scales$at)) 
                    x$x.scales$at[[i]]
                  else x$x.scales$at, labels = if (is.list(x$x.scales$lab)) 
                    x$x.scales$lab[[i]]
                  else x$x.scales$lab, have.log = have.xlog, 
                  logbase = xlogbase, logpaste = xlogpaste, abbreviate = x$x.scales$abbr, 
                  minlength = x$x.scales$minl, n = x$x.scales$tick.number)$lab
                if (is.character(lab)) 
                  labelChars <- c(labelChars, lab)
                else if (is.expression(lab)) 
                  labelExprs <- c(labelExprs, lab)
            }
            labelChars <- unique(labelChars)
            strbar <- list()
            for (ss in labelChars) strbar <- c(strbar, list(ss))
            for (ss in seq(along = labelExprs)) strbar <- c(strbar, 
                list(labelExprs[ss]))
            if (xaxis.rot[1] %in% c(0, 180)) {
                heights.x[number.of.cond + 7 + (1:rows.per.page - 
                  1) * (number.of.cond + 4)] <- max(0.001, x$x.scales$tck[1]) * 
                  0.3
                heights.insertlist.position <- c(heights.insertlist.position, 
                  number.of.cond + 8 + (1:rows.per.page - 1) * 
                    (number.of.cond + 4))
                for (i in 1:rows.per.page) heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                  max(unit(rep(1.5 * xaxis.cex[1], length(strbar)), 
                    "strheight", strbar)))
            }
            else {
                heights.x[number.of.cond + 7 + (1:rows.per.page - 
                  1) * (number.of.cond + 4)] <- max(0.001, x$x.scales$tck[1]) * 
                  0.3
                heights.insertlist.position <- c(heights.insertlist.position, 
                  number.of.cond + 8 + (1:rows.per.page - 1) * 
                    (number.of.cond + 4))
                for (i in 1:rows.per.page) heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                  max(unit(rep(1.5 * xaxis.cex[1] * abs(sin(xaxis.rot[1] * 
                    base::pi/180)), length(strbar)), "strwidth", 
                    strbar)))
            }
        }
    }
    heights.x[n.row - 3] <- if (have.xlab) 
        2 * x$xlab$cex
    else 0
    if (have.xlab) {
        heights.units[n.row - 3] <- "strheight"
        heights.data[[n.row - 3]] <- x$xlab$lab
    }
    for (crr in 1:number.of.cond) heights.x[number.of.cond + 
        6 + (1:rows.per.page - 1) * (number.of.cond + 4) - crr] <- if (is.logical(x$strip)) 
        0
    else 1.1 * x$par.strip.text$cex * x$par.strip.text$lines
    widths.x[3] <- if (have.ylab) 
        2 * x$ylab$cex
    else 0
    if (have.ylab) {
        widths.units[3] <- "strheight"
        widths.data[[3]] <- x$ylab$lab
    }
    widths.x[(1:cols.per.page - 1) * 4 + 8] <- panel.width[[1]]
    widths.units[(1:cols.per.page - 1) * 4 + 8] <- panel.width[[2]]
    widths.x[(1:cols.per.page - 1) * 4 + 7] <- 0
    widths.x[(1:cols.per.page - 1) * 4 + 6] <- 0
    widths.x[4] <- 0
    widths.x[5] <- 0
    widths.x[n.col - 2] <- 0
    widths.x[n.col - 3] <- 0
    if (cols.per.page > 1) 
        widths.x[(1:(cols.per.page - 1) - 1) * 4 + 9] <- x.between
    widths.x[1] <- 0.5
    widths.x[n.col] <- 0.5
    widths.x[2] <- 0
    widths.x[n.col - 1] <- 0
    widths.insertlist.position <- 0
    widths.insertlist.unit <- unit(1, "null")
    if (x$y.scales$draw) {
        if (y.relation.same) {
            lab <- calculateAxisComponents(x = x$y.limits, at = x$y.scales$at, 
                labels = x$y.scales$lab, have.log = have.ylog, 
                logbase = ylogbase, logpaste = ylogpaste, abbreviate = x$y.scales$abbr, 
                minlength = x$y.scales$minl, n = x$y.scales$tick.number)$lab
##          if (is.character(lab)) 
            if (all(sapply(lab, is.character)))  ## rmh
                strbar <- as.list(lab)
            else if (is.expression(lab)) {
                strbar <- list()
                for (ss in seq(along = lab)) strbar <- c(strbar, 
                  list(lab[ss]))
            }
            else stop("Invalid value for labels")
            widths.x[5] <- 0.5 + max(0.001, x$y.scales$tck[1]) * 
                0.3
            widths.x[n.col - 3] <- max(1, x$y.scales$tck[2]) * 
                0.5
            if (any(y.alternating == 1 | y.alternating == 3)) {
                if (abs(yaxis.rot[1]) == 90) {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    4)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(1 * rep(yaxis.cex[1], length(strbar)), 
                      "strheight", data = strbar)))
                }
                else {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    4)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[1] * abs(cos(yaxis.rot[1] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
            if (any(y.alternating == 2 | y.alternating == 3)) {
                if (abs(yaxis.rot[2]) == 90) {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    n.col - 2)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[2], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    n.col - 2)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[2] * abs(cos(yaxis.rot[2] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
        }
        else {
            labelChars <- character(0)
            labelExprs <- expression(0)
            for (i in seq(along = x$y.limits)) {
                lab <- calculateAxisComponents(x = x$y.limits[[i]], 
                  at = if (is.list(x$y.scales$at)) 
                    x$y.scales$at[[i]]
                  else x$y.scales$at, labels = if (is.list(x$y.scales$lab)) 
                    x$y.scales$lab[[i]]
                  else x$y.scales$lab, have.log = have.ylog, 
                  logbase = ylogbase, logpaste = ylogpaste, abbreviate = x$y.scales$abbr, 
                  minlength = x$y.scales$minl, n = x$y.scales$tick.number)$lab
                if (is.character(lab)) 
                  labelChars <- c(labelChars, lab)
                else if (is.expression(lab)) 
                  labelExprs <- c(labelExprs, lab)
            }
            labelChars <- unique(labelChars)
            strbar <- list()
            for (ss in labelChars) strbar <- c(strbar, list(ss))
            for (ss in seq(along = labelExprs)) strbar <- c(strbar, 
                list(labelExprs[ss]))
            if (abs(yaxis.rot[1]) == 90) {
                widths.x[(1:cols.per.page - 1) * 4 + 7] <- max(0.001, 
                  x$y.scales$tck[1]) * 0.3
                widths.insertlist.position <- c(widths.insertlist.position, 
                  (1:cols.per.page - 1) * 4 + 6)
                for (i in 1:cols.per.page) widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                  max(unit(rep(1.5 * yaxis.cex[1], length(strbar)), 
                    "strheight", strbar)))
            }
            else {
                widths.x[(1:cols.per.page - 1) * 4 + 7] <- max(0.001, 
                  x$y.scales$tck[1]) * 0.3
                widths.insertlist.position <- c(widths.insertlist.position, 
                  (1:cols.per.page - 1) * 4 + 6)
                for (i in 1:cols.per.page) widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                  max(unit(rep(1.2 * yaxis.cex[1] * abs(cos(yaxis.rot[1] * 
                    base::pi/180)), length(strbar)), "strwidth", 
                    strbar)))
            }
        }
    }
    if (!is.null(x$key) || !is.null(x$colorkey)) {
        if (key.space == "left") {
            widths.x[2] <- 1.2
            widths.units[2] <- "grobwidth"
            widths.data[[2]] <- key.gf
        }
        else if (key.space == "right") {
            widths.x[n.col - 1] <- 1.2
            widths.units[n.col - 1] <- "grobwidth"
            widths.data[[n.col - 1]] <- key.gf
        }
        else if (key.space == "top") {
            heights.x[3] <- 1.2
            heights.units[3] <- "grobheight"
            heights.data[[3]] <- key.gf
        }
        else if (key.space == "bottom") {
            heights.x[n.row - 2] <- 1.2
            heights.units[n.row - 2] <- "grobheight"
            heights.data[[n.row - 2]] <- key.gf
        }
    }
    layout.heights <- unit(heights.x, heights.units, data = heights.data)
    if (length(heights.insertlist.position) > 1) 
        for (indx in 2:length(heights.insertlist.position)) layout.heights <- rearrangeUnit(layout.heights, 
            heights.insertlist.position[indx], heights.insertlist.unit[indx])
    layout.widths <- unit(widths.x, widths.units, data = widths.data)
    if (length(widths.insertlist.position) > 1) 
        for (indx in 2:length(widths.insertlist.position)) layout.widths <- rearrangeUnit(layout.widths, 
            widths.insertlist.position[indx], widths.insertlist.unit[indx])
    page.layout <- grid.layout(nrow = n.row, ncol = n.col, widths = layout.widths, 
        heights = layout.heights, respect = layout.respect)
    cond.current.level <- rep(1, number.of.cond)
    panel.number <- 1
    for (page.number in 1:number.of.pages) if (!any(cond.max.level - 
        cond.current.level < 0)) {
        if (usual) {
            if (new) 
                grid.newpage()
            grid.rect(gp = gpar(fill = bg, col = "transparent"))
            new <- TRUE
        }
        push.viewport(viewport(layout = page.layout, gp = gpar(fontsize = fontsize.default, 
            col = axis.line$col, lty = axis.line$lty, lwd = axis.line$lwd)))
        if (have.main) 
            grid.text(label = x$main$label, gp = gpar(col = x$main$col, 
                font = x$main$font, fontsize = fontsize.default * 
                  x$main$cex), vp = viewport(layout.pos.row = 2))
        if (have.sub) 
            grid.text(label = x$sub$label, gp = gpar(col = x$sub$col, 
                font = x$sub$font, fontsize = fontsize.default * 
                  x$sub$cex), vp = viewport(layout.pos.row = n.row - 
                1))
        if (have.xlab) 
            grid.text(label = x$xlab$label, gp = gpar(col = x$xlab$col, 
                font = x$xlab$font, fontsize = fontsize.default * 
                  x$xlab$cex), vp = viewport(layout.pos.row = n.row - 
                3, layout.pos.col = c(6, n.col - 4)))
        if (have.ylab) 
            grid.text(label = x$ylab$label, rot = 90, gp = gpar(col = x$ylab$col, 
                font = x$ylab$font, fontsize = fontsize.default * 
                  x$ylab$cex), vp = viewport(layout.pos.col = 3, 
                layout.pos.row = c(6, n.row - 6)))
        for (row in 1:rows.per.page) for (column in 1:cols.per.page) if (!any(cond.max.level - 
            cond.current.level < 0) && (row - 1) * cols.per.page + 
            column <= plots.per.page) {
            if (!is.list(x$panel.args[[panel.number]])) 
                panel.number <- panel.number + 1
            else {
                actual.row <- if (x$as.table) 
                  (rows.per.page - row + 1)
                else row
                pos.row <- 6 + number.of.cond + (rows.per.page - 
                  actual.row) * (number.of.cond + 4)
                pos.col <- (column - 1) * 4 + 8
                xlabelinfo <- calculateAxisComponents(x = if (x.relation.same) 
                  x$x.limits
                else x$x.limits[[panel.number]], at = if (is.list(x$x.scales$at)) 
                  x$x.scales$at[[panel.number]]
                else x$x.scales$at, labels = if (is.list(x$x.scales$lab)) 
                  x$x.scales$lab[[panel.number]]
                else x$x.scales$lab, have.log = have.xlog, logbase = xlogbase, 
                  logpaste = xlogpaste, abbreviate = x$x.scales$abbr, 
                  minlength = x$x.scales$minl, n = x$x.scales$tick.number)
                ylabelinfo <- calculateAxisComponents(x = if (y.relation.same) 
                  x$y.limits
                else x$y.limits[[panel.number]], at = if (is.list(x$y.scales$at)) 
                  x$y.scales$at[[panel.number]]
                else x$y.scales$at, labels = if (is.list(x$y.scales$lab)) 
                  x$y.scales$lab[[panel.number]]
                else x$y.scales$lab, have.log = have.ylog, logbase = ylogbase, 
                  logpaste = ylogpaste, abbreviate = x$y.scales$abbr, 
                  minlength = x$y.scales$minl, n = x$y.scales$tick.number)
                xscale <- xlabelinfo$num.limit
                yscale <- ylabelinfo$num.limit
                push.viewport(viewport(layout.pos.row = pos.row, 
                  layout.pos.col = pos.col, xscale = xscale, 
                  yscale = yscale, clip = TRUE, gp = gpar(fontsize = fontsize.default)))
                pargs <- c(x$panel.args[[panel.number]], x$panel.args.common, 
                  list(panel.number = panel.number))
                if (!("..." %in% names(formals(panel)))) 
                  pargs <- pargs[names(formals(panel))]
                do.call("panel", pargs)
                grid.rect()
                pop.viewport()
                if (!x.relation.same && x$x.scales$draw) {
                  axs <- x$x.scales
                  ok <- (xlabelinfo$at >= xscale[1] & xlabelinfo$at <= 
                    xscale[2])
                  push.viewport(viewport(layout.pos.row = pos.row + 
                    1, layout.pos.col = pos.col, xscale = xscale))
                  if (axs$tck[1] != 0 && any(ok)) 
                    grid.segments(y0 = unit(rep(1, sum(ok)), 
                      "npc"), y1 = unit(rep(1, sum(ok)), "npc") - 
                      unit(rep(0.3 * axs$tck[1], sum(ok)), "lines"), 
                      x0 = unit(xlabelinfo$at[ok], "native"), 
                      x1 = unit(xlabelinfo$at[ok], "native"), 
                      gp = gpar(col = xaxis.col))
                  pop.viewport()
                  if (any(ok)) 
                    grid.text(label = xlabelinfo$label[ok], x = unit(xlabelinfo$at[ok], 
                      "native"), y = unit(if (xaxis.rot[1] %in% 
                      c(0, 180)) 
                      0.5
                    else 0.95, "npc"), just = if (xaxis.rot[1] == 
                      0) 
                      c("centre", "centre")
                    else if (xaxis.rot[1] == 180) 
                      c("centre", "centre")
                    else if (xaxis.rot[1] > 0) 
                      c("right", "centre")
                    else c("left", "centre"), rot = xaxis.rot[1], 
                      check.overlap = xlabelinfo$check.overlap, 
                      gp = gpar(col = xaxis.col, font = xaxis.font, 
                        fontsize = axs$cex[1] * fontsize.default), 
                      vp = viewport(layout.pos.row = pos.row + 
                        2, layout.pos.col = pos.col, xscale = xscale))
                }
                if (!y.relation.same && x$y.scales$draw) {
                  axs <- x$y.scales
                  ok <- (ylabelinfo$at >= yscale[1] & ylabelinfo$at <= 
                    yscale[2])
                  push.viewport(viewport(layout.pos.row = pos.row, 
                    layout.pos.col = pos.col - 1, yscale = yscale))
                  if (axs$tck[1] != 0 && any(ok)) 
                    grid.segments(x0 = unit(rep(1, sum(ok)), 
                      "npc"), x1 = unit(rep(1, sum(ok)), "npc") - 
                      unit(rep(0.3 * axs$tck[1], sum(ok)), "lines"), 
                      y0 = unit(ylabelinfo$at[ok], "native"), 
                      y1 = unit(ylabelinfo$at[ok], "native"), 
                      gp = gpar(col = yaxis.col))
                  pop.viewport()
                  if (any(ok)) 
                    grid.text(label = ylabelinfo$label[ok], y = unit(ylabelinfo$at[ok], 
                      "native"), x = unit(if (abs(yaxis.rot[1]) == 
                      90) 
                      0.5
                    else 0.95, "npc"), just = if (yaxis.rot[1] == 
                      90) 
                      c("centre", "centre")
                    else if (yaxis.rot[1] == -90) 
                      c("centre", "centre")
                    else if (yaxis.rot[1] > -90 && yaxis.rot[1] < 
                      90) 
                      c("right", "centre")
                    else c("left", "centre"), rot = yaxis.rot[1], 
                      check.overlap = ylabelinfo$check.overlap, 
                      gp = gpar(col = yaxis.col, font = xaxis.font, 
                        fontsize = axs$cex[1] * fontsize.default), 
                      vp = viewport(layout.pos.row = pos.row, 
                        layout.pos.col = pos.col - 2, yscale = yscale))
                }
                if (y.relation.same && x$y.scales$draw) {
                  if (column == 1) {
                    axs <- x$y.scales
                    ok <- (ylabelinfo$at >= yscale[1] & ylabelinfo$at <= 
                      yscale[2])
                    push.viewport(viewport(layout.pos.row = pos.row, 
                      layout.pos.col = pos.col - 3, yscale = yscale))
                    if (axs$tck[1] != 0 && any(ok)) 
                      grid.segments(x0 = unit(rep(1, sum(ok)), 
                        "npc"), x1 = unit(rep(1, sum(ok)), "npc") - 
                        unit(rep(0.3 * axs$tck[1], sum(ok)), 
                          "lines"), y0 = unit(ylabelinfo$at[ok], 
                        "native"), y1 = unit(ylabelinfo$at[ok], 
                        "native"), gp = gpar(col = yaxis.col))
                    pop.viewport()
                    if (y.alternating[actual.row] == 1 || y.alternating[actual.row] == 
                      3) 
                      if (any(ok)) 
                        grid.text(label = ylabelinfo$lab[ok], 
                          y = unit(ylabelinfo$at[ok], "native"), 
                          x = unit(if (abs(yaxis.rot[1]) == 90) 
                            0.5
                          else 1, "npc"), just = if (yaxis.rot[1] == 
                            -90) 
                            c("centre", "centre")
                          else if (yaxis.rot[1] == 90) 
                            c("centre", "centre")
                          else if (yaxis.rot[1] > -90 && yaxis.rot[1] < 
                            90) 
                            c("right", "centre")
                          else c("left", "centre"), rot = yaxis.rot[1], 
                          check.overlap = ylabelinfo$check.overlap, 
                          gp = gpar(col = yaxis.col, font = yaxis.font, 
                            fontsize = axs$cex[1] * fontsize.default), 
                          vp = viewport(layout.pos.row = pos.row, 
                            layout.pos.col = pos.col - 4, yscale = yscale))
                  }
                  if (column == cols.per.page) {
                    axs <- x$y.scales
                    ok <- (ylabelinfo$at >= yscale[1] & ylabelinfo$at <= 
                      yscale[2])
                    push.viewport(viewport(layout.pos.row = pos.row, 
                      layout.pos.col = pos.col + 1, yscale = yscale))
                    if (axs$tck[2] != 0 && any(ok)) 
                      grid.segments(x0 = unit(rep(0, sum(ok)), 
                        "npc"), x1 = unit(rep(0.3 * axs$tck[2], 
                        sum(ok)), "lines"), y0 = unit(ylabelinfo$at[ok], 
                        "native"), y1 = unit(ylabelinfo$at[ok], 
                        "native"), gp = gpar(col = yaxis.col))
                    pop.viewport()
                    if (y.alternating[actual.row] == 2 || y.alternating[actual.row] == 
                      3) 
                      if (any(ok)) 
                        grid.text(label = ylabelinfo$label[ok], 
                          y = unit(ylabelinfo$at[ok], "native"), 
                          x = unit(if (abs(yaxis.rot[2]) == 90) 
                            0.5
                          else 0, "npc"), just = if (yaxis.rot[2] == 
                            -90) 
                            c("centre", "centre")
                          else if (yaxis.rot[2] == 90) 
                            c("centre", "centre")
                          else if (yaxis.rot[2] > -90 && yaxis.rot[2] < 
                            90) 
                            c("left", "centre")
                          else c("right", "centre"), rot = yaxis.rot[2], 
                          check.overlap = ylabelinfo$check.overlap, 
                          gp = gpar(col = yaxis.col, font = yaxis.font, 
                            fontsize = axs$cex[2] * fontsize.default), 
                          vp = viewport(layout.pos.row = pos.row, 
                            layout.pos.col = pos.col + 2, yscale = yscale))
                  }
                }
                if (x.relation.same && x$x.scales$draw) {
                  if (actual.row == 1) {
                    axs <- x$x.scales
                    ok <- (xlabelinfo$at >= xscale[1] & xlabelinfo$at <= 
                      xscale[2])
                    push.viewport(viewport(layout.pos.row = pos.row + 
                      3, layout.pos.col = pos.col, xscale = xscale))
                    if (axs$tck[1] != 0 && any(ok)) 
                      grid.segments(y0 = unit(rep(1, sum(ok)), 
                        "npc"), y1 = unit(rep(1, sum(ok)), "npc") - 
                        unit(rep(0.3 * axs$tck[1], sum(ok)), 
                          "lines"), x0 = unit(xlabelinfo$at[ok], 
                        "native"), x1 = unit(xlabelinfo$at[ok], 
                        "native"), gp = gpar(col = xaxis.col))
                    pop.viewport()
                    if (x.alternating[column] == 1 || x.alternating[column] == 
                      3) 
                      if (any(ok)) {
                        grid.text(label = xlabelinfo$lab[ok], 
                          x = unit(xlabelinfo$at[ok], "native"), 
                          y = unit(if (xaxis.rot[1] %in% c(0, 
                            180)) 
                            0.5
                          else 1, "npc"), just = if (xaxis.rot[1] == 
                            0) 
                            c("centre", "centre")
                          else if (xaxis.rot[1] == 180) 
                            c("centre", "centre")
                          else if (xaxis.rot[1] > 0) 
                            c("right", "centre")
                          else c("left", "centre"), rot = xaxis.rot[1], 
                          check.overlap = xlabelinfo$check.overlap, 
                          gp = gpar(col = xaxis.col, font = xaxis.font, 
                            fontsize = axs$cex[1] * fontsize.default), 
                          vp = viewport(layout.pos.row = pos.row + 
                            4, layout.pos.col = pos.col, xscale = xscale))
                      }
                  }
                }
                if (!is.logical(x$strip)) 
                  for (i in 1:number.of.cond) {
                    push.viewport(viewport(layout.pos.row = pos.row - 
                      i, layout.pos.col = pos.col, clip = TRUE, 
                      gp = gpar(fontsize = fontsize.default)))
                    grid.rect()
                    x$strip(which.given = i, which.panel = cond.current.level, 
                      var.name = names(x$cond), factor.levels = if (!is.list(x$cond[[i]])) 
                        x$cond[[i]]
                      else NULL, shingle.intervals = if (is.list(x$cond[[i]])) 
                        do.call("rbind", x$cond[[i]])
                      else NULL, bg = strip.col.default.bg[i], 
                      fg = strip.col.default.fg[i], par.strip.text = x$par.strip.text)
                    pop.viewport()
                  }
                if (x.relation.same && x$x.scales$draw) 
                  if (actual.row == rows.per.page) {
                    axs <- x$x.scales
                    ok <- (xlabelinfo$at >= xscale[1] & xlabelinfo$at <= 
                      xscale[2])
                    push.viewport(viewport(layout.pos.row = pos.row - 
                      1 - number.of.cond, layout.pos.col = pos.col, 
                      xscale = xscale))
                    if (axs$tck[2] != 0 && any(ok)) 
                      grid.segments(y0 = unit(rep(0, sum(ok)), 
                        "npc"), y1 = unit(rep(0.3 * axs$tck[2], 
                        sum(ok)), "lines"), x0 = unit(xlabelinfo$at[ok], 
                        "native"), x1 = unit(xlabelinfo$at[ok], 
                        "native"), gp = gpar(col = xaxis.col))
                    pop.viewport()
                    if (x.alternating[column] == 2 || x.alternating[column] == 
                      3) 
                      if (any(ok)) 
                        grid.text(label = xlabelinfo$label[ok], 
                          x = unit(xlabelinfo$at[ok], "native"), 
                          y = unit(if (xaxis.rot[2] %in% c(0, 
                            180)) 
                            0.5
                          else 0, "npc"), just = if (xaxis.rot[2] == 
                            0) 
                            c("centre", "centre")
                          else if (xaxis.rot[2] == 180) 
                            c("centre", "centre")
                          else if (xaxis.rot[2] > 0) 
                            c("left", "centre")
                          else c("right", "centre"), rot = xaxis.rot[2], 
                          check.overlap = xlabelinfo$check.overlap, 
                          gp = gpar(col = xaxis.col, font = xaxis.font, 
                            fontsize = axs$cex[2] * fontsize.default), 
                          vp = viewport(layout.pos.row = pos.row - 
                            2 - number.of.cond, layout.pos.col = pos.col, 
                            xscale = xscale))
                  }
                cond.current.level <- cupdate(cond.current.level, 
                  cond.max.level)
                panel.number <- panel.number + 1
            }
        }
        if (!is.null(x$key) || !is.null(x$colorkey)) {
            if (key.space == "left") {
                push.viewport(viewport(layout.pos.col = 2, layout.pos.row = c(6, 
                  n.row - 6)))
                grid.draw(key.gf)
                pop.viewport()
            }
            else if (key.space == "right") {
                push.viewport(viewport(layout.pos.col = n.col - 
                  1, layout.pos.row = c(6, n.row - 6)))
                grid.draw(key.gf)
                pop.viewport()
            }
            else if (key.space == "top") {
                push.viewport(viewport(layout.pos.row = 3, layout.pos.col = c(6, 
                  n.col - 4)))
                grid.draw(key.gf)
                pop.viewport()
            }
            else if (key.space == "bottom") {
                push.viewport(viewport(layout.pos.row = n.row - 
                  2, layout.pos.col = c(6, n.col - 4)))
                grid.draw(key.gf)
                pop.viewport()
            }
            else if (key.space == "inside") {
                push.viewport(viewport(layout.pos.row = c(1, 
                  n.row), layout.pos.col = c(1, n.col)))
                if (is.null(x$key$corner)) 
                  x$key$corner <- c(0, 1)
                if (is.null(x$key$x)) 
                  x$key$x <- x$key$corner[1]
                if (is.null(x$key$y)) 
                  x$key$y <- x$key$corner[2]
                if (all(x$key$corner == c(0, 1))) {
                  push.viewport(viewport(layout = grid.layout(nrow = 3, 
                    ncol = 3, widths = unit(c(x$key$x, 1, 1), 
                      c("npc", "grobwidth", "null"), list(1, 
                        key.gf, 1)), heights = unit(c(1 - x$key$y, 
                      1, 1), c("npc", "grobheight", "null"), 
                      list(1, key.gf, 1)))))
                  push.viewport(viewport(layout.pos.row = 2, 
                    layout.pos.col = 2))
                  grid.draw(key.gf)
                  pop.viewport()
                  pop.viewport()
                }
                if (all(x$key$corner == c(1, 1))) {
                  push.viewport(viewport(layout = grid.layout(nrow = 3, 
                    ncol = 3, heights = unit(c(1 - x$key$y, 1, 
                      1), c("npc", "grobheight", "null"), list(1, 
                      key.gf, 1)), widths = unit(c(1, 1, 1 - 
                      x$key$x), c("null", "grobwidth", "npc"), 
                      list(1, key.gf, 1)))))
                  push.viewport(viewport(layout.pos.row = 2, 
                    layout.pos.col = 2))
                  grid.draw(key.gf)
                  pop.viewport()
                  pop.viewport()
                }
                if (all(x$key$corner == c(0, 0))) {
                  push.viewport(viewport(layout = grid.layout(nrow = 3, 
                    ncol = 3, widths = unit(c(x$key$x, 1, 1), 
                      c("npc", "grobwidth", "null"), list(1, 
                        key.gf, 1)), heights = unit(c(1, 1, x$key$y), 
                      c("null", "grobheight", "npc"), list(1, 
                        key.gf, 1)))))
                  push.viewport(viewport(layout.pos.row = 2, 
                    layout.pos.col = 2))
                  grid.draw(key.gf)
                  pop.viewport()
                  pop.viewport()
                }
                if (all(x$key$corner == c(1, 0))) {
                  push.viewport(viewport(layout = grid.layout(nrow = 3, 
                    ncol = 3, widths = unit(c(1, 1, 1 - x$key$x), 
                      c("null", "grobwidth", "npc"), list(1, 
                        key.gf, 1)), heights = unit(c(1, 1, x$key$y), 
                      c("null", "grobheight", "npc"), list(1, 
                        key.gf, 1)))))
                  push.viewport(viewport(layout.pos.row = 2, 
                    layout.pos.col = 2))
                  grid.draw(key.gf)
                  pop.viewport()
                  pop.viewport()
                }
                pop.viewport()
            }
        }
        push.viewport(viewport(layout.pos.row = c(1, n.row), 
            layout.pos.col = c(1, n.col)))
        if (!is.null(x$page)) 
            x$page(page.number)
        pop.viewport()
        pop.viewport()
    }
    if (!missing(position)) {
        if (!missing(split)) {
            pop.viewport()
            pop.viewport()
        }
        pop.viewport()
    }
    else if (!missing(split)) {
        pop.viewport()
        pop.viewport()
    }
    invisible(page.layout)
}

From bates at stat.wisc.edu  Sun Apr 27 10:54:32 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Sun Apr 27 16:54:46 2003
Subject: [Rd] An Introduction to R (PR#2860)
In-Reply-To: <200304271220.h3RCK2pD002696@pubhealth.ku.dk>
References: <200304271220.h3RCK2pD002696@pubhealth.ku.dk>
Message-ID: <6rllxwvvmf.fsf@bates4.stat.wisc.edu>

h-meguro@aa.e-mansion.com writes:

> Full_Name: Hajime Meguro
> Version: 1.4.1
> OS: 1.7.0
> Submission from: (NULL) (202.215.33.129)
> 
> 
> Both Published version(1.4.1) and Web version shows that, on Page 86, line5-7;
> 
> >ld50<-function(b) -b[1]/b[2]
> >ldp<-ld50(coef(fmp));ldl<-ld50(coef(fmp));
> >c(ldp,ldl)
> 
> I guess line 6 should be as follows.
> 
> >ldp<-ld50(coef(fmp));ldl<-ld50(coef(fml));
> 
> Am I right?
> Or the current writing is right?

Both.  The version of the manual for the current release of R (1.7.0)
has that line corrected as you suggested.

Please upgrade.  Your version of R is more than a year out of date.

From p.dalgaard at biostat.ku.dk  Sun Apr 27 18:39:27 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun Apr 27 17:36:29 2003
Subject: [Rd] An Introduction to R (PR#2860)
In-Reply-To: <6rllxwvvmf.fsf@bates4.stat.wisc.edu>
References: <200304271220.h3RCK2pD002696@pubhealth.ku.dk>
	<6rllxwvvmf.fsf@bates4.stat.wisc.edu>
Message-ID: <x2u1ckq79s.fsf@biostat.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> h-meguro@aa.e-mansion.com writes:
> 
> > Full_Name: Hajime Meguro
> > Version: 1.4.1
> > OS: 1.7.0
> > Submission from: (NULL) (202.215.33.129)
> > 
> > 
> > Both Published version(1.4.1) and Web version shows that, on Page 86, line5-7;

....

> Both.  The version of the manual for the current release of R (1.7.0)
> has that line corrected as you suggested.
> 
> Please upgrade.  Your version of R is more than a year out of date.

Eh? He did say 1.7.0. The printed copy is presumably the one from
Network Theory Ltd. ( http://www.network-theory.co.uk/R/manual, ISBN
0954161742) which was published a year ago in May (just missing
1.5.x).

The web version *on CRAN* has the item corrected (on page 60 -- the
papersize is different), so I assume that the submitter is referring
to the web version at the publishers. I think the logic is that that
must coincide with the printed version to make it clear that they are
mainly providing a printing service for an otherwise publicly
available document.

Anyway, we can't fix bugs retroactively in old versions, only get them
corrected in newer versions, so this should never have been a bug
report. The publisher might want to build a list of errata though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From xiao.gang.fan1 at libertysurf.fr  Sun Apr 27 19:14:28 2003
From: xiao.gang.fan1 at libertysurf.fr (=?iso-8859-1?Q?Fan?=)
Date: Sun Apr 27 18:14:41 2003
Subject: [Rd] Basic date time arithmetics operations
Message-ID: <HE0FS4$2E3B89086EAFD45D4CD3E4E7428A22AD@tiscali.fr>

Hello,

For basic date time arithmetics operations, AFAK, there're 
actually the function difftime() and the (dt + num) operations.

I'm wondering if other basic operations exist, like
add(dt, num, unit) where unit would be "y", "q", "m", etc. 

Also for the function seq.dates (or seq.POSIXt), the 
case for by="months" would be more useful if it takes
the situation of the end of month into account. 
For example,

> seq(ISOdate(2002,1,31), by="months", length=3)

"2002-01-31 13:00:00 CET" 
"2002-03-03 13:00:00 CET" 
"2002-03-31 13:00:00 CET"

rather than

"2002-01-31 13:00:00 CET" 
"2002-02-28 13:00:00 CET" 
"2002-03-31 13:00:00 CET"

Thanks
--
Fan

************ VITE, C'EST LE MOMENT DE VOUS ABONNER A L'ADSL !!! **********
Du 3 avril au 5 mai, s?rie limit?e ADSL 128K, cliquez vite ici : http://register.tiscali.fr/adsl/ 
Offre promotionnelle soumise ? conditions, r?serv?e aux nouveaux abonn?s ADSL Tiscali.

From hb at maths.lth.se  Sun Apr 27 19:44:43 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Sun Apr 27 18:44:47 2003
Subject: [Rd] Suggestion to modify "Writing R Extensions"
Message-ID: <000001c30cdc$4eb26b40$e502eb82@alpha.wehi.edu.au>

In "Writing R Extensions" (1.7.0 (2003-04-16). ISBN 3-901167-54-4) under
the section "Writing R help files" and the subsection "Cross-references"
the usage of \link is currently a little bit unclear:

"There are optional arguments specified as \link[pkg]{foo} and
\link[pkg:bar]{foo} to link to the package pkg with topic (file?) foo
and bar respectively."

I suggest the following update:

"There are optional  arguments specified as \link[pkg]{label} and
\link[pkg:name]{label} to make a link to the help document for name in
package pkg where the link will get the label 'label', e.g.
\code{\link[base:Normal]{dnorm}}."

I tried to avoid using 'topic' because that is used in the description
of \alias{topic} and that is not what is linked to. 'name' is better
since \name{name} is what defines the name of the help document (and is
the base for the name of the files generated).

Cheers

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
Lund Institute of Technology/Lund University, Sweden 
(Sweden +2h UTC, Melbourne +10 UTC, Calif. -7h UTC)
+46 708 909208 (cell), +46 46 320 820 (home), 
+1 (508) 464 6644 (global fax),
+46 46 2229611 (off), +46 46 2224623 (dept. fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/

From hornik at ci.tuwien.ac.at  Sun Apr 27 15:05:59 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sun Apr 27 20:21:00 2003
Subject: [Rd] British or American spelling?
In-Reply-To: <5.2.0.9.1.20030427151644.00acee70@imaphost.wehi.edu.au>
References: <5.2.0.9.1.20030427151644.00acee70@imaphost.wehi.edu.au>
Message-ID: <16043.51111.795389.439162@mithrandir.hornik.net>

>>>>> Gordon Smyth writes:

> I was curious to read the following in the "Guidelines for Rd files" at 
> http://developer.r-project.org/Rds.html:

>      "For consistency, aim to use British (rather than American)
>      spelling.  (NB: British spelling often uses -ize as in
>      `capitalize'. The view of > spell -b of British spelling is a
>      flawed American one. There are English/Scottish differences
>      too.)"

> because R seems to use American spellings throughout, e.g., "color"
> instead of "colour".

> What is the current R-devel view on this?

I don't think it is 'throughout' but rather a mixture of both, for both
R and packages on CRAN, and I don't think we can force the exclusive
use of British spelling.  

Actually, this is one of the main motivations for having functionality
for fuzzy matching in R.

-k

From p.connolly at hortresearch.co.nz  Mon Apr 28 10:45:19 2003
From: p.connolly at hortresearch.co.nz (Patrick Connolly)
Date: Sun Apr 27 23:48:11 2003
Subject: [Rd] Re: Default value for title in postscript()
In-Reply-To: <Pine.LNX.4.44.0304241852210.1577-100000@gannet.stats>
References: <16038.17970.797442.963291@gargle.gargle.HOWL>
	<Pine.LNX.4.44.0304241852210.1577-100000@gannet.stats>
Message-ID: <20030427214519.GK14368@hortresearch.co.nz>

On Thu, 24-Apr-2003 at 06:56PM +0100, Prof Brian Ripley wrote:

|> On Wed, 23 Apr 2003, Martin Maechler wrote:
|> 
|> > 

|> > I tend to agree that a change might be useful --
|> > For the new default, I'd actually go further and propose
|> > something like (when file = "Rplots.ps")
|> > 
|> >    "Rplots.ps [from R 1.7.0]"
|> > 
|> >     PaCo> (assuming, of course, there aren't good reasons
|> >     PaCo> against doing that)?
|> > 
|> > Unfortunately, there's a good reason: back-compatibility.
|> > In spite of that, I do advocate a change.
|> 
|> I'm lost here!
|> 
|> Most people don't care what the title is, and I left it as previous
|> versions gave.  Why would anyone want the title in the file to default to 
|> the file name, which in any case defaults to something anodyne?

There is only one reason I can think of and that's so it is shown in
the title bar of ghostview.  That's a pretty good one.  I never use
default filenames, so the name in the title bar is always informative
if it's the filename.  All my postscript files created by R are in
places where it's obvious they're R Graphics Output.  That might not
be the case for other people.


|> 
|> There's a general R principle here: the person who does the work
|> gets to choose the details.  Patrick: if you had submitted a
|> comprehensive patch, you might have got to choose!

I looked at it, and noticed I'd have to do things with the .Internal
PS function (and I'd been warned off going there).  I asked the R-help
list how complicated it would be and was promptly notified that it had
been changed in the R-devel.  That's one of the neat things about R:
things happen quickly.

I'm not complaining.  It's simple enough for me to work with how it
is.  There was a possibility that other people might think my way of
working wasn't so wierd so that a change to the default might be
desirable.  I never use onefile = FALSE so there could be issues that
complicate matters in a way I'm unaware of.

best

-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world`s largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you`ve seen it.  ---Steven Wright 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~

From smyth at wehi.edu.au  Mon Apr 28 13:25:54 2003
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Mon Apr 28 04:26:09 2003
Subject: [Rd] British or American spelling?
In-Reply-To: <16043.51111.795389.439162@mithrandir.hornik.net>
References: <5.2.0.9.1.20030427151644.00acee70@imaphost.wehi.edu.au>
 <5.2.0.9.1.20030427151644.00acee70@imaphost.wehi.edu.au>
Message-ID: <5.2.0.9.1.20030428121750.00b04998@imaphost.wehi.edu.au>

At 10:05 PM 27/04/2003, Kurt Hornik wrote:
> >>>>> Gordon Smyth writes:
>
> > I was curious to read the following in the "Guidelines for Rd files" at
> > http://developer.r-project.org/Rds.html:
>
> >      "For consistency, aim to use British (rather than American)
> >      spelling.  (NB: British spelling often uses -ize as in
> >      `capitalize'. The view of > spell -b of British spelling is a
> >      flawed American one. There are English/Scottish differences
> >      too.)"
>
> > because R seems to use American spellings throughout, e.g., "color"
> > instead of "colour".
>
> > What is the current R-devel view on this?
>
>I don't think it is 'throughout' but rather a mixture of both, for both
>R and packages on CRAN, and I don't think we can force the exclusive
>use of British spelling.

Thanks for that. I was considering going through my Rd files and making 
changes in line with the recommendation, but now I will leave as is.

Even though I live in a British spelling country, it makes sense to me to 
use American spellings for publically available programs and associated 
documentation.

>Actually, this is one of the main motivations for having functionality
>for fuzzy matching in R.
>
>-k

Cheers
Gordon

From rmh at surfer.sbm.temple.edu  Mon Apr 28 09:20:39 2003
From: rmh at surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Mon Apr 28 08:20:51 2003
Subject: [Rd] bug in y limits in bwplot (PR#2865)
Message-ID: <200304280620.h3S6KdpD006495@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################

## bug in y limits in bwplot

tmp <- data.frame(y=1:10, a=factor(rep(1:2,5)))

## x limits in bwplot works as expected
bwplot(y ~ a, data=tmp, horizontal=F)  # works

bwplot(y ~ a, data=tmp, horizontal=F,  # works
       xlim=c(-1,5))

bwplot(y ~ a, data=tmp, horizontal=F,  # works
       scales=list(x=list(limits=c(-1,5))))


## problem with y limits in bwplot
bwplot(a ~ y, data=tmp, horizontal=T)  # works

bwplot(a ~ y, data=tmp, horizontal=T,  # works
       ylim=c(-1,5))

bwplot(a ~ y, data=tmp, horizontal=T,  # error message
       scales=list(y=list(limits=c(-1,5))))


## transcript with error message
> bwplot(a ~ y, data=tmp, horizontal=T,  # error message
+        scales=list(y=list(limits=c(-1,5))))
Error in print.trellis(structure(list(as.table = FALSE, aspect.fill = TRUE,  : 
	Invalid value for labels
In addition: Warning message: 
is.na() applied to non-(list or vector) in: is.na(x) 
> 





--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base

From ripley at stats.ox.ac.uk  Mon Apr 28 14:29:32 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Apr 28 14:29:46 2003
Subject: [Rd] suggested changes to summary.glm and summary.lm (PR#2776)
In-Reply-To: <200304141159.h3EBxQpD026575@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304281319210.30743-100000@gannet.stats>

This is a little tricky, and the issue is with the print methods, not the
return values I believe.

I don't think we want to alter summary.lm nor summary.glm, which in
neither S nor R include aliased coefficients in the coef component (nor
the covariance nor correlation components).  However, S's
print.summary.glm does expand the coef and correl matrices to include NAs
(which I noticed after starting a similar strategy).  However,
print.coefmat prints NAs as empty strings, so my current version shows the
aliased coefficients as a blank row and not via NAs.

Anyone know why print.coefmat suppresses NAs?

I am about to commit a version of the print methods that

- warns of undefined coefficients
- shows them in the coef dispay as NAs
- omits them from the correlation matrix.


On Mon, 14 Apr 2003 jfox@mcmaster.ca wrote:

> Something for the wish list (not really a bug):
> 
> I was reminded of what I see as a problem with summary.glm last week when 
> some of my students fell into a trap in a homework exercise, defining a 
> logit model in which coefficients were aliased. When this happens in lm, 
> summary.lm prints a message ["Coefficients: (1 not defined because of 
> singularities)"], but summary.glm is silent. In both instances, the print 
> methods show aliased coefficients as NA.
> 
> At minimum, I think that it would be desirable for summary.glm to indicate 
> that there's a problem. In addition, I would prefer that both summary.glm 
> and summary.lm include aliased coefficients (as NA) in the table of 
> coefficients.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From mckay at repsac.gmr.com  Mon Apr 28 10:59:28 2003
From: mckay at repsac.gmr.com (Neil McKay)
Date: Mon Apr 28 16:04:01 2003
Subject: [Rd] R scripting patches for R-1.7.0 (bug fix)
Message-ID: <200304281359.h3SDxSH32229@repsac.gmr.com>

A few days ago I posted a message to r-devel about patches for
allowing R to be used as a scripting language. Well, the patches
as distributed had a bug: R would dump core when certain errors
occurred. (Thanks to Gregory Warnes for finding the bug, and
sending me a one-liner that excercised it.) If I sent you the
patches and you want the fixed version, let me know by sending
mail to

	mckay@gmr.com

-- 
Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
Manufacturing Systems Research Lab      FAX:   (586)986-0574 (GM:8-226-0574)
GM Research & Development Center        Internet e-mail: mckay@gmr.com
30500 Mound Road
Warren, Mich. 48090

From simon at stats.gla.ac.uk  Mon Apr 28 18:36:17 2003
From: simon at stats.gla.ac.uk (simon@stats.gla.ac.uk)
Date: Mon Apr 28 17:36:29 2003
Subject: [Rd] qr(x,LAPACK=TRUE) (PR#2867)
Message-ID: <200304281536.h3SFaHpD015670@pubhealth.ku.dk>

Hi, 

I think there is a problem with the LAPACK version of qr() in version
1.7.0. (version below).

1. The documentation states that LAPACK=TRUE is the default, but the code
has LAPACK=FALSE.

2. With LAPACK=TRUE qr() is never pivoting, even in cases where it very
clearly should be. e.g.

set.seed(0)
X<-matrix(rnorm(40),10,4);X[,1]<-X[,2]
qrx<-qr(X,LAPACK=TRUE)
qrx$pivot # note, no pivoting
qr.R(qrx) # note zero on leading diagonal is not in trailing block

3. ?qr includes the statement:

Using LAPACK (including in the complex case) uses column pivoting

4. If I call F77_NAME(dgeqp3) directly I get correct pivoting.

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R     

Apologies if I'm doing something dumb, but I can't see what it is at the
moment.

best,
Simon

_____________________________________________________________________
> Simon Wood simon@stats.gla.ac.uk        www.stats.gla.ac.uk/~simon/
>>  Department of Statistics, University of Glasgow, Glasgow, G12 8QQ
>>>   Direct telephone: (0)141 330 4530          Fax: (0)141 330 4814

From jgentry at jimmy.harvard.edu  Mon Apr 28 13:37:41 2003
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Mon Apr 28 18:37:49 2003
Subject: [Rd] installed.packages() with no packages
Message-ID: <Pine.SOL.4.20.0304281233530.13849-100000@santiam.dfci.harvard.edu>

Hello ...

I found this due to a situation where installed.packages() was given a
lib.loc argument that turned out to not have any R packages installed.  As
an example:
> z <- tempfile()
> dir.create(z)
> installed.packages(z)
Error in "colnames<-"(*tmp*, value = c("Package", "LibPath", pkgFlds)) : 
	dimnames applied to non-array

Looking at the code, it seems what happens is that 'retval' is assigned
character() but then after the for loop the function checks 'retval' with
a "if(!is.null(retval))", and I don't see how 'retval' could ever have a
NULL value in this situation.  Would this be better to check against
"nrow(retval)"?

Thanks
-Jeff

From hb at maths.lth.se  Mon Apr 28 21:06:13 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Mon Apr 28 20:06:16 2003
Subject: [Rd] Webcuts - Navigating HTML help using only the keyboard
Message-ID: <002a01c30db0$db62db40$e502eb82@alpha.wehi.edu.au>

A while ago I put together a Javascript called Webcuts (GPL), which when
included in an HTML document it will make it possible to navigate the
page and follow links by just typing parts of the label of the links,
i.e. no mouse is needed. I have, by using 'sed', added the script to
every HTML help file generated by R as an example, cf.

  http://www.maths.lth.se/help/R/.R/doc/html/packages.html

I find quite convenient since it make it possible to quickly access help
files without having to scroll the browser window and without having to
touch the mouse. 
Try for instance

 0. Click on the above link.
 1. Type "base" -> ENTER and then "ansi" -> ENTER. 
 2. Go back with "-" + ENTER or two steps back with "-2" + ENTER. 
 3. Go to the parent directory by typing ".." + ENTER.
 4. Search google for "R" by typing "?R" + ENTER etc. 
 5. See help for all Webcuts features by typing "?" + ENTER.
 
I've been able to test it on IE6 and Mozilla (also w/ "Find As You
Type"), but it was written for NS4+ and IE4+ so it should work on some
other browsers too. Some browser are also known for not supporting
Webcuts.

To include it on a webpage one just add the line

<head>
   ...
   <script type="text/javascript" src="Webcuts.js"
language="JavaScript1.2"></script>
 </head>

Do you think it would be a useful add Webcuts to the HTML generating
code in R? The natural location of Webcuts.js could be
$R_HOME/doc/html/. If anyone dislikes Webcuts it could be disabled by
replacing Webcuts.js with an empty file.

For more details see http://www.maths.lth.se/tools/webcuts/.

Cheers

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
Lund Institute of Technology/Lund University, Sweden 
(Sweden +2h UTC, Melbourne +10 UTC, Calif. -7h UTC)
+46 708 909208 (cell), +46 46 320 820 (home), 
+1 (508) 464 6644 (global fax),
+46 46 2229611 (off), +46 46 2224623 (dept. fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/

From kademan at phz.com  Mon Apr 28 23:07:06 2003
From: kademan at phz.com (kademan@phz.com)
Date: Mon Apr 28 22:07:19 2003
Subject: [Rd] ylab in time series plot (PR#2869)
Message-ID: <200304282007.h3SK76pD016858@pubhealth.ku.dk>

You get a warning message when you specify a ylab parameter while
plotting data whose x's are POSIXct values.  Apparently the
`axis.POSIXct' method tries to reset the ylab---via the ...
parameter---after it has already been set by higher level methods.

Here is a function that illustrates the problem.

  ylabProblem <- function() {
    x <- ISOdate(2003, 4, 1:10)           # POSIXct vector
    y <- rnorm(10)
    plot(x, y, ylab = 'I am y')
  }

and this is what I get when I run it.

  > ylabProblem()
  Warning message: 
  parameter "ylab" couldn't be set in high-level plot() function 

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base

From mail at joeconway.com  Mon Apr 28 15:29:48 2003
From: mail at joeconway.com (Joe Conway)
Date: Mon Apr 28 23:30:38 2003
Subject: [Rd] Red Hat 9 regex symbol conflict
Message-ID: <3EAD9D4C.20305@joeconway.com>

Hello,

I've been struggling with a problem for the past several weeks, trying 
to get PL/R (R procedural language handler for PostgreSQL, 
http://www.joeconway.com/plr/) to work on Red Hat 9. In brief, R dumps 
core during the embedded library initialization, while in Rf_regcomp(), 
working on on Rprofile. Below I've included the important parts of a 
backtrace:

Program received signal SIGSEGV, Segmentation fault.
0x420b655c in re_compile_fastmap_iter () from /lib/tls/libc.so.6
(gdb) bt
#0  0x420b655c in re_compile_fastmap_iter () from /lib/tls/libc.so.6
#1  0x420b649d in re_compile_fastmap () from /lib/tls/libc.so.6
#2  0x403fcb3c in Rf_regcomp (preg=0xbfffb0e0, pattern=0x8ba68a0 
"[[:blank:]]*([[:alnum:]]+)", cflags=0) at regex.c:5729

{...snipped...]

#32 0x403b1015 in R_ReplFile (fp=0x83250d8, rho=0x8321e30, savestack=0, 
browselevel=0) at main.c:80
#33 0x403b17aa in R_LoadProfile (fparg=0x0, env=0x8321e30) at main.c:385
#34 0x403b1984 in setup_Rmainloop () at main.c:503
#35 0x4045c78f in Rf_initEmbeddedR (argc=4, argv=0xbfffcdb0) at system.c:332

 From the backtrace it is apparent that re_compile_fastmap() is being 
resolved to /lib/tls/libc.so.6 instead of the function by the same name 
in R's regex.c. On the advice of Ulrich Drepper (of the Red Hat glibc 
team) I was able to get a trace of the symbol resolution process:

# start PostgreSQL with glibc debugging turned on
env LD_DEBUG=all LD_DEBUG_OUTPUT=/home/postgres/dbg.out pg_ctl start

On Red Hat 8 (where everything works), the relevant output looks like this:

   19097: symbol=re_compile_fastmap;  lookup in file=postgres: postgres
          regression [local] SELECT
   19097: symbol=re_compile_fastmap;  lookup in file=/usr/lib/libz.so.1
   19097: symbol=re_compile_fastmap;  lookup in
          file=/usr/lib/libreadline.so.4
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/libtermcap.so.2
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/libcrypt.so.1
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/libresolv.so.2
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/libnsl.so.1
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/libdl.so.2
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/i686/libm.so.6
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/i686/libc.so.6
   19097: symbol=re_compile_fastmap;  lookup in file=/lib/ld-linux.so.2
   19097: symbol=re_compile_fastmap;  lookup in
          file=/usr/local/pgsql/lib/plr.so
   19097: symbol=re_compile_fastmap;  lookup in
          file=/usr/local/lib/R/bin/libR.so
   19097: binding file /usr/local/lib/R/bin/libR.so to
          /usr/local/lib/R/bin/libR.so:
          normal symbol `re_compile_fastmap'

On Red Hat 9 (where I get core dumps), the relevant output looks like this:

   23521: symbol=re_compile_fastmap;  lookup in file=postgres: postgres
          regression [local] SELECT
   23521: symbol=re_compile_fastmap;  lookup in file=/usr/lib/libz.so.1
   23521: symbol=re_compile_fastmap;  lookup in
          file=/usr/lib/libreadline.so.4
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/libtermcap.so.2
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/libcrypt.so.1
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/libresolv.so.2
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/libnsl.so.1
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/libdl.so.2
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/tls/libm.so.6
   23521: symbol=re_compile_fastmap;  lookup in file=/lib/tls/libc.so.6
   23521: binding file /usr/local/lib/R/bin/libR.so to
          /lib/tls/libc.so.6: normal symbol `re_compile_fastmap'

The problem exists when using both the 1.6.2 and 1.7.0 versions of 
libR.so. I have been unable to find a way to prevent this behavior on 
Red Hat 9 without patching R itself. The attached patch fixes the 
problem, hopefully in the least obtrusive way. It declares the 
internal-use-only regex.c functions 'static' instead of 'extern'. There 
is also a small correction to eval-etc.Rout.save which had an old copyright.

The patch is against 1.7.0, compiles cleanly, and passes `make check` on 
my Red Hat 9 machine. I'd appreciate it if you would consider it for 
inclusion in R-devel, and for any future R.1.7.x release. If a patch 
against R-devel is needed, I'd be happy to provide that. Alternatively, 
if someone can suggest a fix that I can apply directly to PL/R, I would 
also be most appreciative.

Thank you,

Joe
-------------- next part --------------
diff -cNr R-1.7.0/src/main/Rregex.h R-1.7.0.fixed/src/main/Rregex.h
*** R-1.7.0/src/main/Rregex.h	Fri May 10 00:11:47 2002
--- R-1.7.0.fixed/src/main/Rregex.h	Mon Apr 28 10:19:50 2003
***************
*** 452,463 ****
  
  /* Sets the current default syntax to SYNTAX, and return the old syntax.
     You can also simply assign to the `re_syntax_options' variable.  */
! extern reg_syntax_t re_set_syntax _RE_ARGS ((reg_syntax_t syntax));
  
  /* Compile the regular expression PATTERN, with length LENGTH
     and syntax given by the global `re_syntax_options', into the buffer
     BUFFER.  Return NULL if successful, and an error string if not.  */
! extern const char *re_compile_pattern
    _RE_ARGS ((const char *pattern, size_t length,
               struct re_pattern_buffer *buffer));
  
--- 452,463 ----
  
  /* Sets the current default syntax to SYNTAX, and return the old syntax.
     You can also simply assign to the `re_syntax_options' variable.  */
! static reg_syntax_t re_set_syntax _RE_ARGS ((reg_syntax_t syntax));
  
  /* Compile the regular expression PATTERN, with length LENGTH
     and syntax given by the global `re_syntax_options', into the buffer
     BUFFER.  Return NULL if successful, and an error string if not.  */
! static const char *re_compile_pattern
    _RE_ARGS ((const char *pattern, size_t length,
               struct re_pattern_buffer *buffer));
  
***************
*** 465,471 ****
  /* Compile a fastmap for the compiled pattern in BUFFER; used to
     accelerate searches.  Return 0 if successful and -2 if was an
     internal error.  */
! extern int re_compile_fastmap _RE_ARGS ((struct re_pattern_buffer *buffer));
  
  
  /* Search in the string STRING (with length LENGTH) for the pattern
--- 465,471 ----
  /* Compile a fastmap for the compiled pattern in BUFFER; used to
     accelerate searches.  Return 0 if successful and -2 if was an
     internal error.  */
! static int re_compile_fastmap _RE_ARGS ((struct re_pattern_buffer *buffer));
  
  
  /* Search in the string STRING (with length LENGTH) for the pattern
***************
*** 473,486 ****
     characters.  Return the starting position of the match, -1 for no
     match, or -2 for an internal error.  Also return register
     information in REGS (if REGS and BUFFER->no_sub are nonzero).  */
! extern int re_search
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string,
              int length, int start, int range, struct re_registers *regs));
  
  
  /* Like `re_search', but search in the concatenation of STRING1 and
     STRING2.  Also, stop searching at index START + STOP.  */
! extern int re_search_2
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string1,
               int length1, const char *string2, int length2,
               int start, int range, struct re_registers *regs, int stop));
--- 473,486 ----
     characters.  Return the starting position of the match, -1 for no
     match, or -2 for an internal error.  Also return register
     information in REGS (if REGS and BUFFER->no_sub are nonzero).  */
! static int re_search
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string,
              int length, int start, int range, struct re_registers *regs));
  
  
  /* Like `re_search', but search in the concatenation of STRING1 and
     STRING2.  Also, stop searching at index START + STOP.  */
! static int re_search_2
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string1,
               int length1, const char *string2, int length2,
               int start, int range, struct re_registers *regs, int stop));
***************
*** 488,500 ****
  
  /* Like `re_search', but return how many characters in STRING the regexp
     in BUFFER matched, starting at position START.  */
! extern int re_match
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string,
               int length, int start, struct re_registers *regs));
  
  
  /* Relates to `re_match' as `re_search_2' relates to `re_search'.  */
! extern int re_match_2
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string1,
               int length1, const char *string2, int length2,
               int start, struct re_registers *regs, int stop));
--- 488,500 ----
  
  /* Like `re_search', but return how many characters in STRING the regexp
     in BUFFER matched, starting at position START.  */
! static int re_match
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string,
               int length, int start, struct re_registers *regs));
  
  
  /* Relates to `re_match' as `re_search_2' relates to `re_search'.  */
! static int re_match_2
    _RE_ARGS ((struct re_pattern_buffer *buffer, const char *string1,
               int length1, const char *string2, int length2,
               int start, struct re_registers *regs, int stop));
***************
*** 512,518 ****
     Unless this function is called, the first search or match using
     PATTERN_BUFFER will allocate its own register data, without
     freeing the old data.  */
! extern void re_set_registers
    _RE_ARGS ((struct re_pattern_buffer *buffer, struct re_registers *regs,
               unsigned num_regs, regoff_t *starts, regoff_t *ends));
  
--- 512,518 ----
     Unless this function is called, the first search or match using
     PATTERN_BUFFER will allocate its own register data, without
     freeing the old data.  */
! static void re_set_registers
    _RE_ARGS ((struct re_pattern_buffer *buffer, struct re_registers *regs,
               unsigned num_regs, regoff_t *starts, regoff_t *ends));
  
diff -cNr R-1.7.0/src/main/regex.c R-1.7.0.fixed/src/main/regex.c
*** R-1.7.0/src/main/regex.c	Fri May 31 19:35:50 2002
--- R-1.7.0.fixed/src/main/regex.c	Mon Apr 28 10:22:30 2003
***************
*** 991,997 ****
     The argument SYNTAX is a bit mask comprised of the various bits
     defined in regex.h.  We return the old syntax.  */
  
! reg_syntax_t
  re_set_syntax (syntax)
      reg_syntax_t syntax;
  {
--- 991,997 ----
     The argument SYNTAX is a bit mask comprised of the various bits
     defined in regex.h.  We return the old syntax.  */
  
! static reg_syntax_t
  re_set_syntax (syntax)
      reg_syntax_t syntax;
  {
***************
*** 3205,3211 ****
  
     Returns 0 if we succeed, -2 if an internal error.   */
  
! int
  re_compile_fastmap (bufp)
       struct re_pattern_buffer *bufp;
  {
--- 3205,3211 ----
  
     Returns 0 if we succeed, -2 if an internal error.   */
  
! static int
  re_compile_fastmap (bufp)
       struct re_pattern_buffer *bufp;
  {
***************
*** 3511,3517 ****
     PATTERN_BUFFER will allocate its own register data, without
     freeing the old data.  */
  
! void
  re_set_registers (bufp, regs, num_regs, starts, ends)
      struct re_pattern_buffer *bufp;
      struct re_registers *regs;
--- 3511,3517 ----
     PATTERN_BUFFER will allocate its own register data, without
     freeing the old data.  */
  
! static void
  re_set_registers (bufp, regs, num_regs, starts, ends)
      struct re_pattern_buffer *bufp;
      struct re_registers *regs;
***************
*** 3541,3547 ****
  /* Like re_search_2, below, but only one string is specified, and
     doesn't let you say where to stop matching. */
  
! int
  re_search (bufp, string, size, startpos, range, regs)
       struct re_pattern_buffer *bufp;
       const char *string;
--- 3541,3547 ----
  /* Like re_search_2, below, but only one string is specified, and
     doesn't let you say where to stop matching. */
  
! static int
  re_search (bufp, string, size, startpos, range, regs)
       struct re_pattern_buffer *bufp;
       const char *string;
***************
*** 3577,3583 ****
     found, -1 if no match, or -2 if error (such as failure
     stack overflow).  */
  
! int
  re_search_2 (bufp, string1, size1, string2, size2, startpos, range, regs, stop)
       struct re_pattern_buffer *bufp;
       const char *string1, *string2;
--- 3577,3583 ----
     found, -1 if no match, or -2 if error (such as failure
     stack overflow).  */
  
! static int
  re_search_2 (bufp, string1, size1, string2, size2, startpos, range, regs, stop)
       struct re_pattern_buffer *bufp;
       const char *string1, *string2;
***************
*** 3802,3808 ****
  #ifndef emacs   /* Emacs never uses this.  */
  /* re_match is like re_match_2 except it takes only a single string.  */
  
! int
  re_match (bufp, string, size, pos, regs)
       struct re_pattern_buffer *bufp;
       const char *string;
--- 3802,3808 ----
  #ifndef emacs   /* Emacs never uses this.  */
  /* re_match is like re_match_2 except it takes only a single string.  */
  
! static int
  re_match (bufp, string, size, pos, regs)
       struct re_pattern_buffer *bufp;
       const char *string;
***************
*** 3848,3854 ****
     failure stack overflowing).  Otherwise, we return the length of the
     matched substring.  */
  
! int
  re_match_2 (bufp, string1, size1, string2, size2, pos, regs, stop)
       struct re_pattern_buffer *bufp;
       const char *string1, *string2;
--- 3848,3854 ----
     failure stack overflowing).  Otherwise, we return the length of the
     matched substring.  */
  
! static int
  re_match_2 (bufp, string1, size1, string2, size2, pos, regs, stop)
       struct re_pattern_buffer *bufp;
       const char *string1, *string2;
***************
*** 5525,5531 ****
  
     We call regex_compile to do the actual compilation.  */
  
! const char *
  re_compile_pattern (pattern, length, bufp)
       const char *pattern;
       size_t length;
--- 5525,5531 ----
  
     We call regex_compile to do the actual compilation.  */
  
! static const char *
  re_compile_pattern (pattern, length, bufp)
       const char *pattern;
       size_t length;
diff -cNr R-1.7.0/tests/eval-etc.Rout.save R-1.7.0.fixed/tests/eval-etc.Rout.save
*** R-1.7.0/tests/eval-etc.Rout.save	Tue Apr  2 06:15:19 2002
--- R-1.7.0.fixed/tests/eval-etc.Rout.save	Mon Apr 28 10:01:37 2003
***************
*** 1,6 ****
  
! R : Copyright 2002, The R Development Core Team
! Version 1.5.0 Under development (unstable) (2002-04-02)
  
  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
--- 1,6 ----
  
! R : Copyright 2003, The R Development Core Team
! Version 1.7.0  (2003-04-16)
  
  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
From p.dalgaard at biostat.ku.dk  Tue Apr 29 01:47:27 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Apr 29 00:44:42 2003
Subject: [Rd] installed.packages() with no packages
In-Reply-To: <Pine.SOL.4.20.0304281233530.13849-100000@santiam.dfci.harvard.edu>
References: <Pine.SOL.4.20.0304281233530.13849-100000@santiam.dfci.harvard.edu>
Message-ID: <x2llxuqlxc.fsf@biostat.ku.dk>

Jeff Gentry <jgentry@jimmy.harvard.edu> writes:

> Hello ...
> 
> I found this due to a situation where installed.packages() was given a
> lib.loc argument that turned out to not have any R packages installed.  As
> an example:
> > z <- tempfile()
> > dir.create(z)
> > installed.packages(z)
> Error in "colnames<-"(*tmp*, value = c("Package", "LibPath", pkgFlds)) : 
> 	dimnames applied to non-array
> 
> Looking at the code, it seems what happens is that 'retval' is assigned
> character() but then after the for loop the function checks 'retval' with
> a "if(!is.null(retval))", and I don't see how 'retval' could ever have a
> NULL value in this situation.  Would this be better to check against
> "nrow(retval)"?

Or change the initialization to retval <- NULL as would seem to have
been intended? Seems to work OK.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From cox at adelphia.net  Tue Apr 22 09:25:27 2003
From: cox at adelphia.net (Autumn Cox)
Date: Tue Apr 29 02:00:21 2003
Subject: [Rd] Enl4rge your manlyhood!   p72y5f2t0td
In-Reply-To: <f93b01c305ba$38e61658$1f206bad@veojr6q>
Message-ID: <NIPGGJCHBKMKFNAGICJHNKLJCLAA.cox@adelphia.net>

An HTML attachment was scrubbed...
URL: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20030422/c229994f/attachment.html
From ripley at stats.ox.ac.uk  Tue Apr 29 09:13:37 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 09:16:35 2003
Subject: [Rd] qr(x,LAPACK=TRUE) (PR#2867)
In-Reply-To: <200304281536.h3SFaHpD015670@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304290808100.16266-100000@gannet.stats>

Thanks for this.

On Mon, 28 Apr 2003 simon@stats.gla.ac.uk wrote:

> I think there is a problem with the LAPACK version of qr() in version
> 1.7.0. (version below).
> 
> 1. The documentation states that LAPACK=TRUE is the default, but the code
> has LAPACK=FALSE.

The code is the intended. Originally I intended to change the default, but 
discovered that quite a bit of code depended on the (generous) tolerance 
in the previous qr, not least to determine the rank.

> 2. With LAPACK=TRUE qr() is never pivoting, even in cases where it very
> clearly should be. e.g.

Well, it did pivot sometimes.  I had assumed that jpvt was zeroed, but it
was not guaranteed.  In fact I got pivoting sometimes in your example,
which threw me for a while.  It is now explicitly zeroed in R-patched, and
seems to be solved.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 29 09:18:01 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 09:19:40 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <200304282007.h3SK76pD016858@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0304290814190.16266-100000@gannet.stats>

And the bug is?

You got a correct plot, with a correct warning.

On Mon, 28 Apr 2003 kademan@phz.com wrote:

> You get a warning message when you specify a ylab parameter while
> plotting data whose x's are POSIXct values.  Apparently the
> `axis.POSIXct' method tries to reset the ylab---via the ...
> parameter---after it has already been set by higher level methods.

Nope.  axis.POSIXct is passed the `lab' parameter but does not know what
to do with it -- and that's the warning.

> Here is a function that illustrates the problem.
> 
>   ylabProblem <- function() {
>     x <- ISOdate(2003, 4, 1:10)           # POSIXct vector
>     y <- rnorm(10)
>     plot(x, y, ylab = 'I am y')
>   }
> 
> and this is what I get when I run it.
> 
>   > ylabProblem()
>   Warning message: 
>   parameter "ylab" couldn't be set in high-level plot() function 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 29 12:04:32 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 12:04:47 2003
Subject: [Rd] Red Hat 9 regex symbol conflict
In-Reply-To: <3EAD9D4C.20305@joeconway.com>
Message-ID: <Pine.LNX.4.44.0304291041130.5286-100000@gannet.stats>

1) .Rout.save files are compared via Rdiff which ignores differences like 
this, so no patch is needed.

2) Can you explore the use of -DUSE_SYSTEM_REGEX, which is designed for 
exactly this sort of problem?

As I understand it, you are getting calls from regex.o in libR.so resolved
into some other library rather than the symbol in the same module.
(re_compile_fastmap is called nowhere else).  If that can happen (and it
seems perverse), surely regcomp and regexp called from e.g. character.o
could get resolved to a library other than libR.so.  I don't see we have
much option but to remap the names R uses to be safe.

On Mon, 28 Apr 2003, Joe Conway wrote:

> Hello,
> 
> I've been struggling with a problem for the past several weeks, trying 
> to get PL/R (R procedural language handler for PostgreSQL, 
> http://www.joeconway.com/plr/) to work on Red Hat 9. In brief, R dumps 
> core during the embedded library initialization, while in Rf_regcomp(), 
> working on on Rprofile. Below I've included the important parts of a 
> backtrace:
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x420b655c in re_compile_fastmap_iter () from /lib/tls/libc.so.6
> (gdb) bt
> #0  0x420b655c in re_compile_fastmap_iter () from /lib/tls/libc.so.6
> #1  0x420b649d in re_compile_fastmap () from /lib/tls/libc.so.6
> #2  0x403fcb3c in Rf_regcomp (preg=0xbfffb0e0, pattern=0x8ba68a0 
> "[[:blank:]]*([[:alnum:]]+)", cflags=0) at regex.c:5729
> 
> {...snipped...]
> 
> #32 0x403b1015 in R_ReplFile (fp=0x83250d8, rho=0x8321e30, savestack=0, 
> browselevel=0) at main.c:80
> #33 0x403b17aa in R_LoadProfile (fparg=0x0, env=0x8321e30) at main.c:385
> #34 0x403b1984 in setup_Rmainloop () at main.c:503
> #35 0x4045c78f in Rf_initEmbeddedR (argc=4, argv=0xbfffcdb0) at system.c:332
> 
>  From the backtrace it is apparent that re_compile_fastmap() is being 
> resolved to /lib/tls/libc.so.6 instead of the function by the same name 
> in R's regex.c. On the advice of Ulrich Drepper (of the Red Hat glibc 
> team) I was able to get a trace of the symbol resolution process:
> 
> # start PostgreSQL with glibc debugging turned on
> env LD_DEBUG=all LD_DEBUG_OUTPUT=/home/postgres/dbg.out pg_ctl start
> 
> On Red Hat 8 (where everything works), the relevant output looks like this:
> 
>    19097: symbol=re_compile_fastmap;  lookup in file=postgres: postgres
>           regression [local] SELECT
>    19097: symbol=re_compile_fastmap;  lookup in file=/usr/lib/libz.so.1
>    19097: symbol=re_compile_fastmap;  lookup in
>           file=/usr/lib/libreadline.so.4
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/libtermcap.so.2
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/libcrypt.so.1
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/libresolv.so.2
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/libnsl.so.1
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/libdl.so.2
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/i686/libm.so.6
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/i686/libc.so.6
>    19097: symbol=re_compile_fastmap;  lookup in file=/lib/ld-linux.so.2
>    19097: symbol=re_compile_fastmap;  lookup in
>           file=/usr/local/pgsql/lib/plr.so
>    19097: symbol=re_compile_fastmap;  lookup in
>           file=/usr/local/lib/R/bin/libR.so
>    19097: binding file /usr/local/lib/R/bin/libR.so to
>           /usr/local/lib/R/bin/libR.so:
>           normal symbol `re_compile_fastmap'
> 
> On Red Hat 9 (where I get core dumps), the relevant output looks like this:
> 
>    23521: symbol=re_compile_fastmap;  lookup in file=postgres: postgres
>           regression [local] SELECT
>    23521: symbol=re_compile_fastmap;  lookup in file=/usr/lib/libz.so.1
>    23521: symbol=re_compile_fastmap;  lookup in
>           file=/usr/lib/libreadline.so.4
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/libtermcap.so.2
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/libcrypt.so.1
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/libresolv.so.2
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/libnsl.so.1
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/libdl.so.2
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/tls/libm.so.6
>    23521: symbol=re_compile_fastmap;  lookup in file=/lib/tls/libc.so.6
>    23521: binding file /usr/local/lib/R/bin/libR.so to
>           /lib/tls/libc.so.6: normal symbol `re_compile_fastmap'
> 
> The problem exists when using both the 1.6.2 and 1.7.0 versions of 
> libR.so. I have been unable to find a way to prevent this behavior on 
> Red Hat 9 without patching R itself. The attached patch fixes the 
> problem, hopefully in the least obtrusive way. It declares the 
> internal-use-only regex.c functions 'static' instead of 'extern'. There 
> is also a small correction to eval-etc.Rout.save which had an old copyright.
> 
> The patch is against 1.7.0, compiles cleanly, and passes `make check` on 
> my Red Hat 9 machine. I'd appreciate it if you would consider it for 
> inclusion in R-devel, and for any future R.1.7.x release. If a patch 
> against R-devel is needed, I'd be happy to provide that. Alternatively, 
> if someone can suggest a fix that I can apply directly to PL/R, I would 
> also be most appreciative.
> 
> Thank you,
> 
> Joe
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 29 12:11:40 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 12:11:53 2003
Subject: [Rd] Red Hat 9 regex symbol conflict
In-Reply-To: <Pine.LNX.4.44.0304291041130.5286-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0304291109120.5367-100000@gannet.stats>

On Tue, 29 Apr 2003, Prof Brian Ripley wrote:

> 2) Can you explore the use of -DUSE_SYSTEM_REGEX, which is designed for 
> exactly this sort of problem?
> 
> As I understand it, you are getting calls from regex.o in libR.so resolved
> into some other library rather than the symbol in the same module.
> (re_compile_fastmap is called nowhere else).  If that can happen (and it
> seems perverse), surely regcomp and regexp called from e.g. character.o
> could get resolved to a library other than libR.so.  I don't see we have
> much option but to remap the names R uses to be safe.

Sorry, my grep missed this: the names used are already remapped in 
Rregex.h.

I've made the others static in R-patched.

B
-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From laurent at cbs.dtu.dk  Tue Apr 29 13:49:10 2003
From: laurent at cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Tue Apr 29 12:49:22 2003
Subject: [Rd] Rprofile.site and check/build (PR#2872)
Message-ID: <200304291049.h3TAn9pD022302@pubhealth.ku.dk>

Hi,

Apparently R-1.7.0 (and possibly earlier versions too) do 
not care much about what is in $R_HOME/etc/Rprofile.site
when calling 'R CMD check' or 'R CMD build'. This
is annoying when having libraries (packages) in alternative locations.

Cheers,



Laurent

From andy_liaw at merck.com  Tue Apr 29 09:37:49 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue Apr 29 14:38:17 2003
Subject: [Rd] Rprofile.site and check/build (PR#2872)
Message-ID: <3A822319EB35174CA3714066D590DCD5C4FA6F@usrymx25.merck.com>

How's this a bug?  It only make sense to run "check" and "build" on source
packages, but things like R_LIBS points to where *binary* packages are
install.

Andy

> -----Original Message-----
> From: laurent@cbs.dtu.dk [mailto:laurent@cbs.dtu.dk]
> Sent: Tuesday, April 29, 2003 6:49 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] Rprofile.site and check/build (PR#2872)
> 
> 
> Hi,
> 
> Apparently R-1.7.0 (and possibly earlier versions too) do 
> not care much about what is in $R_HOME/etc/Rprofile.site
> when calling 'R CMD check' or 'R CMD build'. This
> is annoying when having libraries (packages) in alternative locations.
> 
> Cheers,
> 
> 
> 
> Laurent
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, cont... {{dropped}}

From ripley at stats.ox.ac.uk  Tue Apr 29 14:49:33 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 14:49:44 2003
Subject: [Rd] Rprofile.site and check/build (PR#2872)
In-Reply-To: <3A822319EB35174CA3714066D590DCD5C4FA6F@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0304291345370.19425-100000@gannet.stats>

On Tue, 29 Apr 2003, Liaw, Andy wrote:

> How's this a bug?  It only make sense to run "check" and "build" on source
> packages, but things like R_LIBS points to where *binary* packages are
> install.

R CMD check is going to run an installed version, and that may use other 
packages.  However, these tools have always used --vanilla, and see
?Startup for why that works as stated below.

So this works as intended, checking on a vanilla system.  That's not a 
bug, and definitely not a recent change.

> > -----Original Message-----
> > From: laurent@cbs.dtu.dk [mailto:laurent@cbs.dtu.dk]
> > Sent: Tuesday, April 29, 2003 6:49 AM
> > To: r-devel@stat.math.ethz.ch
> > Cc: R-bugs@biostat.ku.dk
> > Subject: [Rd] Rprofile.site and check/build (PR#2872)
> > 
> > 
> > Hi,
> > 
> > Apparently R-1.7.0 (and possibly earlier versions too) do 
> > not care much about what is in $R_HOME/etc/Rprofile.site
> > when calling 'R CMD check' or 'R CMD build'. This
> > is annoying when having libraries (packages) in alternative locations.
> > 
> > Cheers,
> > 
> > 
> > 
> > Laurent
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, cont... {{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kademan at phz.com  Tue Apr 29 09:51:09 2003
From: kademan at phz.com (Ed Kademan)
Date: Tue Apr 29 14:51:47 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <Pine.LNX.4.44.0304290814190.16266-100000@gannet.stats>
Message-ID: <ulg8yttlb5u.fsf@phz.com>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> And the bug is?
> 
> You got a correct plot, with a correct warning.
> 
> On Mon, 28 Apr 2003 kademan@phz.com wrote:
> 
> > You get a warning message when you specify a ylab parameter while
> > plotting data whose x's are POSIXct values.  Apparently the
> > `axis.POSIXct' method tries to reset the ylab---via the ...
> > parameter---after it has already been set by higher level methods.

No.  The bug is that the warning is incorrect.

How do you specify a ylab parameter to a time series plot without
generating a warning?

From laurent at cbs.dtu.dk  Tue Apr 29 15:53:22 2003
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Tue Apr 29 14:52:42 2003
Subject: [Rd] Rprofile.site and check/build (PR#2872)
In-Reply-To: <3A822319EB35174CA3714066D590DCD5C4FA6F@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD5C4FA6F@usrymx25.merck.com>
Message-ID: <20030429125322.GA38382480@genome.cbs.dtu.dk>

On Tue, Apr 29, 2003 at 08:37:49AM -0400, Liaw, Andy wrote:
> How's this a bug?  It only make sense to run "check" and "build" on source
> packages, but things like R_LIBS points to where *binary* packages are
> install.

...and in the case of package dependancies ?


...and what about building the 'vignette' ?


L.


> 
> Andy
> 
> > -----Original Message-----
> > From: laurent@cbs.dtu.dk [mailto:laurent@cbs.dtu.dk]
> > Sent: Tuesday, April 29, 2003 6:49 AM
> > To: r-devel@stat.math.ethz.ch
> > Cc: R-bugs@biostat.ku.dk
> > Subject: [Rd] Rprofile.site and check/build (PR#2872)
> > 
> > 
> > Hi,
> > 
> > Apparently R-1.7.0 (and possibly earlier versions too) do 
> > not care much about what is in $R_HOME/etc/Rprofile.site
> > when calling 'R CMD check' or 'R CMD build'. This
> > is annoying when having libraries (packages) in alternative locations.
> > 
> > Cheers,
> > 
> > 
> > 
> > Laurent
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains 
> information of Merck & Co., Inc. (Whitehouse Station, New Jersey, 
> USA) that may be confidential, proprietary copyrighted and/or legally 
> privileged, and is intended solely for the use of the individual or entity
> named on this message. If you are not the intended recipient, and
> have received this message in error, please immediately return this by 
> e-mail and then delete it.
> ------------------------------------------------------------------------------

-- 
--------------------------------------------------------------
currently at the National Yang-Ming University in Taipei, Taiwan
--------------------------------------------------------------
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			DK-2800 Lyngby,Denmark	
tel: +45 45 25 24 89		http://www.cbs.dtu.dk/laurent

From ripley at stats.ox.ac.uk  Tue Apr 29 15:03:03 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 29 15:03:18 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <ulg8yttlb5u.fsf@phz.com>
Message-ID: <Pine.LNX.4.44.0304291401090.19444-100000@gannet.stats>

On 29 Apr 2003, Ed Kademan wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > And the bug is?
> > 
> > You got a correct plot, with a correct warning.
> > 
> > On Mon, 28 Apr 2003 kademan@phz.com wrote:
> > 
> > > You get a warning message when you specify a ylab parameter while
> > > plotting data whose x's are POSIXct values.  Apparently the
> > > `axis.POSIXct' method tries to reset the ylab---via the ...
> > > parameter---after it has already been set by higher level methods.
> 
> No.  The bug is that the warning is incorrect.
> 
> How do you specify a ylab parameter to a time series plot without
> generating a warning?

[This is not a time-series plot!  You are plotting against a date-time 
object, and this has nothing to do with a time series: the object does not 
even have to be in data order.]

You are not able to, but nowhere is it stated that you can -- so it is not 
a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kademan at phz.com  Tue Apr 29 10:20:30 2003
From: kademan at phz.com (Ed Kademan)
Date: Tue Apr 29 15:20:55 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <Pine.LNX.4.44.0304291401090.19444-100000@gannet.stats>
Message-ID: <ulg3ck1l9sx.fsf@phz.com>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > How do you specify a ylab parameter to a time series plot without
> > generating a warning?
> 
> [This is not a time-series plot!  You are plotting against a date-time 
> object, and this has nothing to do with a time series: the object does not 
> even have to be in data order.]
> 
> You are not able to, but nowhere is it stated that you can -- so it is not 
> a bug.

Thank you for your quick response.  I was using the phrase "time
series" in a more general way and did not mean to imply that it was a
particular type of R object.

This doesn't solve my problem but I have already found an ugly
work-around and maybe I will ask the question on r-help.

From Friedrich.Leisch at univie.ac.at  Tue Apr 29 17:13:32 2003
From: Friedrich.Leisch at univie.ac.at (Friedrich.Leisch@univie.ac.at)
Date: Tue Apr 29 16:13:54 2003
Subject: [Rd] Rprofile.site and check/build (PR#2872)
In-Reply-To: <20030429125322.GA38382480@genome.cbs.dtu.dk>
References: <3A822319EB35174CA3714066D590DCD5C4FA6F@usrymx25.merck.com>
	<20030429125322.GA38382480@genome.cbs.dtu.dk>
Message-ID: <16046.34956.549596.369529@ci.tuwien.ac.at>

>>>>> On Tue, 29 Apr 2003 14:53:22 +0200,
>>>>> Laurent Gautier (LG) wrote:

  > On Tue, Apr 29, 2003 at 08:37:49AM -0400, Liaw, Andy wrote:
  >> How's this a bug?  It only make sense to run "check" and "build" on source
  >> packages, but things like R_LIBS points to where *binary* packages are
  >> install.

  > ...and in the case of package dependancies ?


  > ...and what about building the 'vignette' ?

That's currently an open problem I intend to fix for 1.8

Best,
Fritz

From mail at joeconway.com  Tue Apr 29 08:31:44 2003
From: mail at joeconway.com (Joe Conway)
Date: Tue Apr 29 16:30:10 2003
Subject: [Rd] Red Hat 9 regex symbol conflict
References: <Pine.LNX.4.44.0304291109120.5367-100000@gannet.stats>
Message-ID: <3EAE8CD0.2040000@joeconway.com>

Prof Brian Ripley wrote:
> On Tue, 29 Apr 2003, Prof Brian Ripley wrote:
> 
>>2) Can you explore the use of -DUSE_SYSTEM_REGEX, which is designed for 
>>exactly this sort of problem?

Sorry, I should have mentioned that I did try that. I get a compile time 
failure:
------------------------------------------------------------------------
dcf.o(.text+0x10a): In function `do_readDCF':
/opt/src/R-1.7.0/src/main/dcf.c:63: undefined reference to `Rf_regcomp'
dcf.o(.text+0x11d):/opt/src/R-1.7.0/src/main/dcf.c:64: undefined 
reference to `Rf_regcomp'
dcf.o(.text+0x130):/opt/src/R-1.7.0/src/main/dcf.c:65: undefined 
reference to `Rf_regcomp'
dcf.o(.text+0x146):/opt/src/R-1.7.0/src/main/dcf.c:66: undefined 
reference to `Rf_regcomp'
dcf.o(.text+0x1a1):/opt/src/R-1.7.0/src/main/dcf.c:72: undefined 
reference to `Rf_regexec'
dcf.o(.text+0x1ce):/opt/src/R-1.7.0/src/main/dcf.c:88: undefined 
reference to `Rf_regexec'
dcf.o(.text+0x201):/opt/src/R-1.7.0/src/main/dcf.c:92: undefined 
reference to `Rf_regexec'
dcf.o(.text+0x227):/opt/src/R-1.7.0/src/main/dcf.c:108: undefined 
reference to `Rf_regexec'
dcf.o(.text+0x6ed):/opt/src/R-1.7.0/src/main/dcf.c:170: undefined 
reference to `Rf_regfree'
dcf.o(.text+0x6f8):/opt/src/R-1.7.0/src/main/dcf.c:171: undefined 
reference to `Rf_regfree'
dcf.o(.text+0x700):/opt/src/R-1.7.0/src/main/dcf.c:172: undefined 
reference to `Rf_regfree'
dcf.o(.text+0x70e):/opt/src/R-1.7.0/src/main/dcf.c:173: undefined 
reference to `Rf_regfree'
collect2: ld returned 1 exit status
------------------------------------------------------------------------

I stopped there earlier, but I just now was able to successfully compile 
by adding the following to src/include/Rinternals.h:

   #ifdef USE_SYSTEM_REGEX
   #include <regex.h>
   #endif /* USE_SYSTEM_REGEX */


However make check now fails with:
------------------------------------------------------------------------
make[4]: Entering directory `/opt/src/R-1.7.0/tests/Examples'
collecting examples for package 'base' ...
make[5]: Entering directory `/opt/src/R-1.7.0/src/library'
  >>> Building/Updating help pages for package 'base'
      Formats: text example
Error in grep(pattern, x, ignore.case, extended, value) :
         invalid regular expression
Execution halted


>>As I understand it, you are getting calls from regex.o in libR.so resolved
>>into some other library rather than the symbol in the same module.
>>(re_compile_fastmap is called nowhere else).  If that can happen (and it
>>seems perverse), surely regcomp and regexp called from e.g. character.o
>>could get resolved to a library other than libR.so.  I don't see we have
>>much option but to remap the names R uses to be safe.
> 
> Sorry, my grep missed this: the names used are already remapped in 
> Rregex.h.
> 
> I've made the others static in R-patched.

Great! Thank you. I'll download and give R-patched a try.

On a mostly unrelated note, I've been wondering if anyone is actively 
maintaining/working on RPgSQL? I see that it is no longer listed on 
CRAN. If not, I would like contribute by bringing RPgSQL back up to the 
level of a fully supported CRAN package (I won't have time to get 
started until June, however). Any interest or anyone specific I should 
contact?

Thanks,

Joe

From kademan at phz.com  Tue Apr 29 14:35:29 2003
From: kademan at phz.com (Ed Kademan)
Date: Tue Apr 29 19:37:27 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <Pine.LNX.4.44.0304291401090.19444-100000@gannet.stats>
Message-ID: <ulgptn5jjfi.fsf@phz.com>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 29 Apr 2003, Ed Kademan wrote:
> 
> > Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > > And the bug is?
> > > 
> > > You got a correct plot, with a correct warning.
> > > 
> > > On Mon, 28 Apr 2003 kademan@phz.com wrote:
> > > 
> > > > You get a warning message when you specify a ylab parameter while
> > > > plotting data whose x's are POSIXct values.  Apparently the
> > > > `axis.POSIXct' method tries to reset the ylab---via the ...
> > > > parameter---after it has already been set by higher level methods.
> > 
> > No.  The bug is that the warning is incorrect.
> > 
> > How do you specify a ylab parameter to a time series plot without
> > generating a warning?
> 
> [This is not a time-series plot!  You are plotting against a date-time 
> object, and this has nothing to do with a time series: the object does not 
> even have to be in data order.]
> 
> You are not able to, but nowhere is it stated that you can -- so it is not 
> a bug.

When I look up the manual page for `axis.POSIXct' I get the following:

  Functions to plot objects of classes "POSIXlt" and "POSIXct"
  representing calendar dates and times.

  Usage

  plot(x, y, xlab = "", ...)
  axis.POSIXct(side, x, at, format, ...)

  Arguments

   x, at
          A date-time object.
   y
          numeric values to be plotted against x.
   xlab
          a character string giving the label for the x axis.
   side
          See axis.
   format
          See strptime.
   ...rther arguments to be passed from or to other methods, typically graphical parameters.

From kademan at phz.com  Tue Apr 29 15:04:35 2003
From: kademan at phz.com (Ed Kademan)
Date: Tue Apr 29 20:04:58 2003
Subject: [Rd] ylab in time series plot (PR#2869)
In-Reply-To: <Pine.LNX.4.44.0304291401090.19444-100000@gannet.stats>
Message-ID: <ulgn0i9ji30.fsf@phz.com>

I am sorry, I accidentally sent off an incomplete version of this
reply while I was composing it.  Here is the complete one.

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 29 Apr 2003, Ed Kademan wrote:
> 
> > Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > > And the bug is?
> > > 
> > > You got a correct plot, with a correct warning.
> > > 
> > > On Mon, 28 Apr 2003 kademan@phz.com wrote:
> > > 
> > > > You get a warning message when you specify a ylab parameter while
> > > > plotting data whose x's are POSIXct values.  Apparently the
> > > > `axis.POSIXct' method tries to reset the ylab---via the ...
> > > > parameter---after it has already been set by higher level methods.
> > 
> > No.  The bug is that the warning is incorrect.
> > 
> > How do you specify a ylab parameter to a time series plot without
> > generating a warning?
> 
> [This is not a time-series plot!  You are plotting against a date-time 
> object, and this has nothing to do with a time series: the object does not 
> even have to be in data order.]
> 
> You are not able to, but nowhere is it stated that you can -- so it is not 
> a bug.

When I look up the manual page for `axis.POSIXct' I get the following.
(I have removed some lines but haven't changed the text in any other
way.)

  Functions to plot objects of classes "POSIXlt" and "POSIXct"
  representing calendar dates and times.

  Usage

  plot(x, y, xlab = "", ...)
  axis.POSIXct(side, x, at, format, ...)

  Arguments

   x, at
          A date-time object.
   y
          numeric values to be plotted against x.
   xlab
          a character string giving the label for the x axis.

   ...   Further arguments to be passed from or to other methods,
          typically graphical parameters.

Is this description implicitly leaving open the possibility that R
could generate warning messages even if we follow its advice?  Or is
it possible that I am reading it wrong? or that I have a faulty
installation with the wrong documentation?  (That page goes on to
describe an example that also generates the warning.)

From buerkla at uwec.edu  Tue Apr 29 21:24:13 2003
From: buerkla at uwec.edu (buerkla@uwec.edu)
Date: Tue Apr 29 20:24:25 2003
Subject: [Rd] 
	configure succeeds without dlfcn.h, but fails to compile (OS X)
	(PR#2875)
Message-ID: <200304291824.h3TIOD2b027864@pubhealth.ku.dk>

Full_Name: Alex Buerkle
Version: 1.7.0
OS: OS X 
Submission from: (NULL) (137.28.112.199)


The configure of R-1.7.0 completed, but the build fails with error
below.  This failure appears to be because dlfcn.h was missing (installing it
fixed the problem).  

The possible bug:  my limited ability to read ./configure suggests that it tests
for dlfcn.h, but does not fail if it doesn't find it on Darwin/OS X.  Given that
it is required to compile, it seems like configure should fail.  
 

This error was reported in June 2002
(http://maths.newcastle.edu.au/~rking/R/help/02a/4783.html) and discussed
briefly in a thread I started on R-SIG-Mac, which contains a few more details
(https://www.stat.math.ethz.ch/pipermail/r-sig-mac/2003-April/000832.html).

The error:

./configure --enable-R-shlib --with-x \
--with-blas='-framework vecLib' \
--with-lapack

...

./make 

...

making strdup.d from strdup.c
making strncasecmp.d from strncasecmp.c
making vsnprintf.d from vsnprintf.c
gcc   -I../../src/extra/pcre -no-cpp-precomp -I. -I../../src/include
-I../../src/include -I/sw/include -DHAVE_CONFIG_H   -g -O2 -c
CConverters.c -o CConverters.o
gcc   -I../../src/extra/pcre -no-cpp-precomp -I. -I../../src/include
-I../../src/include -I/sw/include -DHAVE_CONFIG_H   -g -O2 -c
Rdynload.c -o Rdynload.o
Rdynload.c: In function `R_FindSymbol':
Rdynload.c:1036: `CFunTab' undeclared (first use in this function)
Rdynload.c:1036: (Each undeclared identifier is reported only once
Rdynload.c:1036: for each function it appears in.)
make[3]: *** [Rdynload.o] Error 1
make[2]: *** [R] Error 2
make[1]: *** [R] Error 1
make: *** [R] Error 1



Fix for the user:
The fink package dlcompat-dev is required, as it contains /sw/include/dlfcn.h.

From tlumley at u.washington.edu  Tue Apr 29 23:02:29 2003
From: tlumley at u.washington.edu (tlumley@u.washington.edu)
Date: Tue Apr 29 22:02:50 2003
Subject: [Rd]  configure succeeds without dlfcn.h, but fails to compile
	(PR#2876)
Message-ID: <200304292002.h3TK2T2b028317@pubhealth.ku.dk>

On Tue, 29 Apr 2003 buerkla@uwec.edu wrote:

> Full_Name: Alex Buerkle
> Version: 1.7.0
> OS: OS X
> Submission from: (NULL) (137.28.112.199)
>
>
> The configure of R-1.7.0 completed, but the build fails with error
> below.  This failure appears to be because dlfcn.h was missing (installing it
> fixed the problem).
>
> The possible bug:  my limited ability to read ./configure suggests that it tests
> for dlfcn.h, but does not fail if it doesn't find it on Darwin/OS X.  Given that
> it is required to compile, it seems like configure should fail.
>
>

I think in fact the problem is that there is a bug in the code for when
dynamic loading is not available. There are various tests for
HAVE_DYNAMIC_LOADING, suggesting that it was once possible to compile
without it.

	-thomas

From tlumley at u.washington.edu  Tue Apr 29 14:02:25 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Apr 29 22:03:14 2003
Subject: [Rd]  configure succeeds without dlfcn.h, but fails to compile
 (OS X) (PR#2875)
In-Reply-To: <200304291824.h3TIOD2b027864@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0304291254210.104800-100000@homer03.u.washington.edu>

On Tue, 29 Apr 2003 buerkla@uwec.edu wrote:

> Full_Name: Alex Buerkle
> Version: 1.7.0
> OS: OS X
> Submission from: (NULL) (137.28.112.199)
>
>
> The configure of R-1.7.0 completed, but the build fails with error
> below.  This failure appears to be because dlfcn.h was missing (installing it
> fixed the problem).
>
> The possible bug:  my limited ability to read ./configure suggests that it tests
> for dlfcn.h, but does not fail if it doesn't find it on Darwin/OS X.  Given that
> it is required to compile, it seems like configure should fail.
>
>

I think in fact the problem is that there is a bug in the code for when
dynamic loading is not available. There are various tests for
HAVE_DYNAMIC_LOADING, suggesting that it was once possible to compile
without it.

	-thomas

From mail at joeconway.com  Tue Apr 29 19:45:32 2003
From: mail at joeconway.com (Joe Conway)
Date: Wed Apr 30 03:46:11 2003
Subject: [Rd] Red Hat 9 regex symbol conflict
In-Reply-To: <Pine.LNX.4.44.0304291109120.5367-100000@gannet.stats>
References: <Pine.LNX.4.44.0304291109120.5367-100000@gannet.stats>
Message-ID: <3EAF2ABC.6090308@joeconway.com>

Prof Brian Ripley wrote:
> Sorry, my grep missed this: the names used are already remapped in 
> Rregex.h.
> 
> I've made the others static in R-patched.

Just to confirm, R-patched does indeed resolve the issue I was having 
with PL/R on Red Hat 9.

Thanks!

Joe

From rpeng at stat.ucla.edu  Wed Apr 30 09:23:14 2003
From: rpeng at stat.ucla.edu (rpeng@stat.ucla.edu)
Date: Wed Apr 30 08:23:25 2003
Subject: [Rd] Problem with R CMD INSTALL and package versions (PR#2878)
Message-ID: <200304300623.h3U6NE2b000288@pubhealth.ku.dk>

Full_Name: Roger Peng
Version: 1.7.0
OS: Linux (Red Hat 8.0)
Submission from: (NULL) (68.64.112.179)


There seems to be a problem with R CMD INSTALL using --with-package-versions. 
First, when using --save and --with-package-versions together, I get the
following output (in this case, for the `snow' package):

--

marla:> R CMD INSTALL --save --with-package-versions snow_0.1-1.tar.gz 
* Installing *source* package 'snow' as 'snow_0.1-1' ...
** R
** inst
** save image
cat: /home/rpeng/install/R-1.7.0/lib/R/library/snow_0.1-1/R/snow: No such file
or directory

mv: cannot stat `/home/rpeng/install/R-1.7.0/lib/R/library/snow_0.1-1/R/snow':
No such file or directory
** help
 >>> Building/Updating help pages for package 'snow'
     Formats: text html latex example 
  snow-cluster                      text    html    latex   example
  snow-internal                     text    html    latex
  snow-parallel                     text    html    latex   example
  snow-rand                         text    html    latex   example
  snow-startstop                    text    html    latex   example
* DONE (snow)

* DONE (INSTALL)

--

When trying to load the package in R, I get:

> library(snow, version = "0.1-1")
Error in .path.package("snow") : none of the packages are loaded
Error in library(snow, version = "0.1-1") : 
        .First.lib failed

Using install.packages() with `installWithVers = TRUE' produces the same
problem.  Removing the --with-package-versions flag makes the package install as
expected.  Removing the --save flag (but keeping the --with-package-versions
flag) gets rid of the complaint during the install process, but I get the same
error when trying to load the package in R.  

I haven't tried this with too many packages but I alwasy get the same behavior. 
I first noticed this when trying to install `pixmap' and `gpclib' packages with
versions since they are both installed using --save.

-roger

From ligges at statistik.uni-dortmund.de  Wed Apr 30 16:52:56 2003
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed Apr 30 15:53:09 2003
Subject: [Rd] return(1, ) results in subsequent segfault (PR#2880)
Message-ID: <200304301352.h3UDqu2b008595@pubhealth.ku.dk>

Inappropriate (?) usage of return() [e.g.: return(1, )] results in 
subsequent segfaults on Linux as well as on Windows (details see below), 
which is reproducible with the following example:

  foo <- function() return(1, )
  x <- foo()
  cbind(as.vector(1), as.vector(1))


You can also crash R on Solaris with e.g.:

  foo <- function() return(1, )
  x <- foo()
  set.seed(1)
  arima(rnorm(10), c(1,0,0))


Uwe Ligges

--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = i386
  os = mingw32
  system = i386, mingw32
  status =
  major = 1
  minor = 7.0
  year = 2003
  month = 04
  day = 16
  language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
  .GlobalEnv, package:methods, package:ctest, package:mva, 
package:modreg, package:nls, package:ts, Autoloads, package:base

From dbpemste at artsci.wustl.edu  Wed Apr 30 20:20:36 2003
From: dbpemste at artsci.wustl.edu (dbpemste@artsci.wustl.edu)
Date: Wed Apr 30 19:20:48 2003
Subject: [Rd] pnorm conditional (PR#2883)
Message-ID: <200304301720.h3UHKa2b010147@pubhealth.ku.dk>


--=-YFjXKq8/D/t1qWmIzQ9D
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

I was going over the source in src/nmath/pnorm.c and noticed a little
bug in pnorm_both (in R 1.7.0).  The else-if on line 205 covers the
entire real line.  Seems you want an &&, not an ||.  Doesn't make a big
difference (you still get a 0 or 1 from extreme starting values) but
your log refinements will always be skipped.

--=20
Daniel Pemstein
Email: dbpemste@artsci.wustl.edu, dan@lcws.org
Web: http://www.danpemstein.com
PGP: http://www.danpemstein.com/files/pgp.txt

--=-YFjXKq8/D/t1qWmIzQ9D
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQA+sAX6ItxEqhMqILgRAjKxAJ40B1Laa6AEiYt+Mh29FhT3o03IsACfXwKb
/so6cYytUi1PmuPwZOMs75E=
=QgyI
-----END PGP SIGNATURE-----

--=-YFjXKq8/D/t1qWmIzQ9D--

From ross at biostat.ucsf.edu  Wed Apr 30 21:06:17 2003
From: ross at biostat.ucsf.edu (ross@biostat.ucsf.edu)
Date: Wed Apr 30 20:06:57 2003
Subject: [Rd] make check failures (PR#2884)
Message-ID: <200304301806.h3UI6H2b010322@pubhealth.ku.dk>

R Version 1.7.0 Patched (2003-04-28), built on Solaris 2.8
with gcc 3.0.3.
Obtained via rsync -rC rsync.r-project.org::r-patched R

I'm not sure how signficant these difference are during development,
but after an apparently successful build I got the following
discrepancies in make check:

make[3]: Entering directory `/export/home/ross/src/R/tests'
running code in 'reg-tests-1.R' ... OK
running code in 'reg-tests-2.R' ... OK
comparing 'reg-tests-2.Rout' to './reg-tests-2.Rout.save' ...2259,2260c2259,2276
< Warning message: 
< There is no package called 'MASS' in: library(package, character.only = TRUE, logical = TRUE, warn.conflicts = warn.conflicts,  
---
> Start:  AIC= 26.94 
>  y ~ x1 + x2 + x3 + x4 
> 
>        Df Sum of Sq    RSS    AIC
> - x3    1     0.109 47.973 24.974
> - x4    1     0.247 48.111 25.011
> - x2    1     2.972 50.836 25.728
> <none>              47.864 26.944
> - x1    1    25.951 73.815 30.576
> 
> Step:  AIC= 24.97 
>  y ~ x1 + x2 + x4 
> 
>        Df Sum of Sq    RSS    AIC
> <none>               47.97  24.97
> - x4    1      9.93  57.90  25.42
> - x2    1     26.79  74.76  28.74
> - x1    1    820.91 868.88  60.63
2291,2292c2307,2311
< Warning message: 
< There is no package called 'survival' in: library(package, character.only = TRUE, logical = TRUE, warn.conflicts = warn.conflicts,  
---
>  Surv [1:23, 1:2]  9  13  13+ 18  23  28+ 31  34  45+ 48  ...
>  - attr(*, "dimnames")=List of 2
>   ..$ : NULL
>   ..$ : chr [1:2] "time" "status"
>  - attr(*, "type")= chr "right"
 OK
running code in 'reg-IO.R' ... OK


Note that configure reported
checking for recommended packages... ./src/library/Recommended/survival_*.tar.gz not found

I don't know what the deal is with the survival library.

From ross at biostat.ucsf.edu  Wed Apr 30 21:08:39 2003
From: ross at biostat.ucsf.edu (ross@biostat.ucsf.edu)
Date: Wed Apr 30 20:08:57 2003
Subject: [Rd] Wrong date on FAQ (PR#2885)
Message-ID: <200304301808.h3UI8d2b010333@pubhealth.ku.dk>

The FAQ is living in the future:

   R FAQ
Frequently Asked Questions on R
Version 1.7-6, 2004-04-27
ISBN 3-901167-51-X
Kurt Hornik

R Version 1.7.0 Patched (2003-04-28), built on Solaris 2.8
with gcc 3.0.3.
Obtained via rsync -rC rsync.r-project.org::r-patched R

From ross at biostat.ucsf.edu  Wed Apr 30 21:15:45 2003
From: ross at biostat.ucsf.edu (ross@biostat.ucsf.edu)
Date: Wed Apr 30 20:16:04 2003
Subject: [Rd] [ENH] Clarify rsync flavors (PR#2886)
Message-ID: <200304301815.h3UIFj2b010363@pubhealth.ku.dk>

The 1.7.0 (2003-04-16) "R Installation and Adminsistration"
manual mentions various flavors of R available from rsync (section
1.2, p. 1).  These are also referred to in various other sources on
and offline (e.g., the FAQ).

The meaning of r-release vs r-patched was not entirely clear to me.
How is the patched version patched?  Should it just have bug fixes,
and so likely be more reliable than r-release?  Or is it patched with
a lot of development changes, so that it's quite like r-devel?

It would be helpful to say a little more about these matters.

From p.dalgaard at biostat.ku.dk  Wed Apr 30 21:33:55 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Apr 30 20:30:37 2003
Subject: [Rd] make check failures (PR#2884)
In-Reply-To: <200304301806.h3UI6H2b010322@pubhealth.ku.dk>
References: <200304301806.h3UI6H2b010322@pubhealth.ku.dk>
Message-ID: <x27k9bltrg.fsf@biostat.ku.dk>

ross@biostat.ucsf.edu writes:

> R Version 1.7.0 Patched (2003-04-28), built on Solaris 2.8
> with gcc 3.0.3.
> Obtained via rsync -rC rsync.r-project.org::r-patched R
> 
> I'm not sure how signficant these difference are during development,
> but after an apparently successful build I got the following
> discrepancies in make check:

You need to get the set of recommended packages. Run
tools/rsync-recommended in your source directroy and rebuild.

The discrepances are warnings (and only warnings) about the absense of
packages and are quite expectable if you didn't install them...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From bates at stat.wisc.edu  Wed Apr 30 14:40:49 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Apr 30 20:41:02 2003
Subject: [Rd] make check failures (PR#2884)
In-Reply-To: <200304301806.h3UI6H2b010322@pubhealth.ku.dk>
References: <200304301806.h3UI6H2b010322@pubhealth.ku.dk>
Message-ID: <6rn0i7eslq.fsf@bates4.stat.wisc.edu>

ross@biostat.ucsf.edu writes:

> R Version 1.7.0 Patched (2003-04-28), built on Solaris 2.8
> with gcc 3.0.3.
> Obtained via rsync -rC rsync.r-project.org::r-patched R
> 
> I'm not sure how signficant these difference are during development,
> but after an apparently successful build I got the following
> discrepancies in make check:
> 
> make[3]: Entering directory `/export/home/ross/src/R/tests'
> running code in 'reg-tests-1.R' ... OK
> running code in 'reg-tests-2.R' ... OK
> comparing 'reg-tests-2.Rout' to './reg-tests-2.Rout.save' ...2259,2260c2259,2276
> < Warning message: 
> < There is no package called 'MASS' in: library(package, character.only = TRUE, logical = TRUE, warn.conflicts = warn.conflicts,  
> ---
> > Start:  AIC= 26.94 
> >  y ~ x1 + x2 + x3 + x4 
> > 
> >        Df Sum of Sq    RSS    AIC
> > - x3    1     0.109 47.973 24.974
> > - x4    1     0.247 48.111 25.011
> > - x2    1     2.972 50.836 25.728
> > <none>              47.864 26.944
> > - x1    1    25.951 73.815 30.576
> > 
> > Step:  AIC= 24.97 
> >  y ~ x1 + x2 + x4 
> > 
> >        Df Sum of Sq    RSS    AIC
> > <none>               47.97  24.97
> > - x4    1      9.93  57.90  25.42
> > - x2    1     26.79  74.76  28.74
> > - x1    1    820.91 868.88  60.63
> 2291,2292c2307,2311
> < Warning message: 
> < There is no package called 'survival' in: library(package, character.only = TRUE, logical = TRUE, warn.conflicts = warn.conflicts,  
> ---
> >  Surv [1:23, 1:2]  9  13  13+ 18  23  28+ 31  34  45+ 48  ...
> >  - attr(*, "dimnames")=List of 2
> >   ..$ : NULL
> >   ..$ : chr [1:2] "time" "status"
> >  - attr(*, "type")= chr "right"
>  OK
> running code in 'reg-IO.R' ... OK
> 
> 
> Note that configure reported
> checking for recommended packages... ./src/library/Recommended/survival_*.tar.gz not found
> 
> I don't know what the deal is with the survival library.

R-patched is just the R sources.  After you have obtained a copy of
those sources via rsync, cd to the top-level source directory and run

./tools/rsync-recommended

This arrangement allows the authors of recommended packages to update
their packages on their own schedules, not necessarily on the schedule
for the R sources.

From p.dalgaard at biostat.ku.dk  Wed Apr 30 21:46:34 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Apr 30 20:43:13 2003
Subject: [Rd] [ENH] Clarify rsync flavors (PR#2886)
In-Reply-To: <200304301815.h3UIFj2b010363@pubhealth.ku.dk>
References: <200304301815.h3UIFj2b010363@pubhealth.ku.dk>
Message-ID: <x23cjzlt6d.fsf@biostat.ku.dk>

ross@biostat.ucsf.edu writes:

> The 1.7.0 (2003-04-16) "R Installation and Adminsistration"
> manual mentions various flavors of R available from rsync (section
> 1.2, p. 1).  These are also referred to in various other sources on
> and offline (e.g., the FAQ).
> 
> The meaning of r-release vs r-patched was not entirely clear to me.
> How is the patched version patched?  Should it just have bug fixes,
> and so likely be more reliable than r-release?  Or is it patched with
> a lot of development changes, so that it's quite like r-devel?
> 
> It would be helpful to say a little more about these matters.

It's basically bug fixes. It's somewhere on the road between x.y.z and
x.y.z+1 so glancing at the NEWS file might give you an idea of what
typically gets changed. The policy is quite conservative, bug fixes go
in if considered safe, but we do allow adding "obviously missing"
functionality to be added, and also some development in areas that
have been labeled "experimental". Of course, since they are not actual
releases, there is always some risk of a bad fix or catching the
repository in a half-updated state.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From bates at stat.wisc.edu  Wed Apr 30 14:45:48 2003
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Apr 30 20:46:43 2003
Subject: [Rd] [ENH] Clarify rsync flavors (PR#2886)
In-Reply-To: <200304301815.h3UIFj2b010363@pubhealth.ku.dk>
References: <200304301815.h3UIFj2b010363@pubhealth.ku.dk>
Message-ID: <6rissvesdf.fsf@bates4.stat.wisc.edu>

ross@biostat.ucsf.edu writes:

> The 1.7.0 (2003-04-16) "R Installation and Adminsistration"
> manual mentions various flavors of R available from rsync (section
> 1.2, p. 1).  These are also referred to in various other sources on
> and offline (e.g., the FAQ).
> 
> The meaning of r-release vs r-patched was not entirely clear to me.
> How is the patched version patched?  Should it just have bug fixes,
> and so likely be more reliable than r-release?  Or is it patched with
> a lot of development changes, so that it's quite like r-devel?

R-patched = original sources plus bug-fix patches
R-devel = development sources that include bug-fix patches _and_ new capabilities

We had rather hoped that our choice of names would make this
distinction clear.

From rgrubbfink at cox.net  Wed Apr 30 23:24:35 2003
From: rgrubbfink at cox.net (rgrubbfink@cox.net)
Date: Wed Apr 30 22:24:49 2003
Subject: [Rd] tools/ldAIX4 Assumes AIX nm (PR#2887)
Message-ID: <200304302024.h3UKOZ2b010906@pubhealth.ku.dk>

Full_Name: Richard L. Grubb
Version: 1.6.2
OS: AIX 4.3.3
Submission from: (NULL) (130.76.96.17)


The ldAIX4 script in the tools directory calls the nm program, assuming it is
the
nm supplied with AIX. However, I have GNU nm in $HOME/bin, and it was being
executed
instead of /usr/bin/nm or /bin/nm. The script failed silently, and caused
downstream
problems because etc/R.exp was empty.

I ran into this same bug under R 1.7.0, but have not verified my fix yet (I
backed up
to version 1.6.2 to see if I could build it). My fix was to replace the line
"nm=nm"
in the script ldAIX4 with "nm=/bin/nm"

See also my bug report on nm not being able to read src/main/dounzip.o

From rgrubbfink at cox.net  Wed Apr 30 23:33:25 2003
From: rgrubbfink at cox.net (rgrubbfink@cox.net)
Date: Wed Apr 30 22:33:37 2003
Subject: [Rd] AIX 4.3.3 nm will not read all of dounzip.o (PR#2888)
Message-ID: <200304302033.h3UKXP2b010940@pubhealth.ku.dk>

Full_Name: Richard L. Grubb
Version: 1.6.2
OS: AIX 4.3.3
Submission from: (NULL) (130.76.96.17)


The tools/ldAIX4 script fails when it tries to execute nm -p -g -h dounzip.o.

The output is:

__mull               U          -                                               
                                    
__divss              U          -                                               
                                    
__divus              U          -                                               
                                    
__quoss              U          -                                               
                                    
__quous              U          -                                               
                                    
.mkdir               U          -                                               
                                    
.strlen              U          -                                               
                                    
.strcpy              U          -                                               
                                    
.strcat              U          -                                               
                                    
...[SNIP]...
.inflateInit2_       U          -                                               
                                    
.crc32               U          -                                               
                                    
.inflate             U          -                                               
                                    
.inflateEnd          U          -                                               
                                    
.do_int_unzip        T       1084     758                                       
                                    
.R_newunz            T       2904     426                                       
                                    
nm: dounzip.o: 0654-206 Cannot process the symbol table                         
                                    


Whereas Gnu nm -p -g dounzip.o (can't use -h in GNU nm) gives:

                 U __mulh                                                       
                                    
                 U __mull
                 U __divss
                 U __divus
                 U __quoss
                 U __quous
                 U .mkdir
                 U .strlen
                 U .strcpy
                 U .strcat
...[SNIP]...
                 U .crc32
                 U .inflate
                 U .inflateEnd
000000000000043c T .do_int_unzip
0000000000000b58 T .R_newunz
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
0000000000002a40 T unz_copyright
0000000000002a94 D do_int_unzip 
0000000000002b00 D R_newunz

I deleted dounzip.o from the list of object files to be processed by ldAIX4, and
the
rest of R has compiled ok so far.

From rpeng at stat.ucla.edu  Wed Apr 30 18:24:46 2003
From: rpeng at stat.ucla.edu (Roger Peng)
Date: Thu May  1 02:25:00 2003
Subject: [Rd] 
	system.file() and .path.package() incorrect with package versions
Message-ID: <Pine.GSO.4.10.10304301708030.26132-100000@quetelet.stat.ucla.edu>

The system.file() and .path.package() functions appear to be unaware of
package versions and can return incorrect information or fail if a package
is installed using `installWithVers = TRUE' of install.packages().  For
example, I can run

> install.packages("session", "~/R-local/libs", installWithVers = TRUE)

and

> library(session, version = "1.0.1")

without a problem.  However,

> system.file(package = "session")
[1] ""

but

> system.file(package = "session_1.0.1")
[1] "/home/rpeng/R-local/libs/session_1.0.1"

which I kind of expected.  Also, .path.package() produces:

> .path.package()
[1] "/home/rpeng/R-local/libs/session_1.0.1"     
[2] "/home/rpeng/install/R/lib/R/library/methods"
[3] "/home/rpeng/install/R/lib/R/library/ctest"  
[4] "/home/rpeng/install/R/lib/R/library/mva"    
[5] "/home/rpeng/install/R/lib/R/library/modreg" 
[6] "/home/rpeng/install/R/lib/R/library/nls"    
[7] "/home/rpeng/install/R/lib/R/library/ts"     
[8] "/home/rpeng/install/R/lib/R/library/base"   

but

> .path.package(package = "session")
Error in .path.package(package = "session") : 
        none of the packages are loaded

This is problematic because many packages run their examples using
system.file() or .path.package() and those will not run when packages are
installed with versions.  Also, some packages call .path.package() in
.First.lib(), in which case the package will usually not even load.

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R                

-roger
_______________________________
UCLA Department of Statistics
http://www.stat.ucla.edu/~rpeng

